# Comparing `tmp/omni_infer_api-0.0.2-py3-none-any.whl.zip` & `tmp/omni_infer_api-0.0.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 9390 bytes, number of entries: 20
+Zip file size: 9541 bytes, number of entries: 20
 -rw-rw-rw-  2.0 fat      122 b- defN 23-Aug-01 08:12 omniifer_api/__init__.py
 -rw-rw-rw-  2.0 fat       64 b- defN 23-Jul-30 01:10 omniifer_api/config.py
 -rw-rw-rw-  2.0 fat      181 b- defN 23-Jul-30 01:30 omniifer_api/error.py
 -rw-rw-rw-  2.0 fat       94 b- defN 23-Jul-31 07:03 omniifer_api/image_generate/__init__.py
--rw-rw-rw-  2.0 fat     2717 b- defN 23-Jul-31 07:37 omniifer_api/image_generate/img2img.py
--rw-rw-rw-  2.0 fat      720 b- defN 23-Jul-31 07:30 omniifer_api/image_generate/progress.py
--rw-rw-rw-  2.0 fat     3790 b- defN 23-Aug-01 08:12 omniifer_api/image_generate/txt2img.py
+-rw-rw-rw-  2.0 fat     2759 b- defN 23-Aug-02 04:24 omniifer_api/image_generate/img2img.py
+-rw-rw-rw-  2.0 fat      762 b- defN 23-Aug-02 04:24 omniifer_api/image_generate/progress.py
+-rw-rw-rw-  2.0 fat     3832 b- defN 23-Aug-02 04:24 omniifer_api/image_generate/txt2img.py
 -rw-rw-rw-  2.0 fat      176 b- defN 23-Jul-31 07:03 omniifer_api/model_list/__init__.py
--rw-rw-rw-  2.0 fat      830 b- defN 23-Jul-31 07:37 omniifer_api/model_list/get_model.py
--rw-rw-rw-  2.0 fat      438 b- defN 23-Jul-31 07:37 omniifer_api/model_list/get_models.py
+-rw-rw-rw-  2.0 fat      872 b- defN 23-Aug-02 04:24 omniifer_api/model_list/get_model.py
+-rw-rw-rw-  2.0 fat      478 b- defN 23-Aug-02 04:24 omniifer_api/model_list/get_models.py
 -rw-rw-rw-  2.0 fat      237 b- defN 23-Jul-31 07:35 omniifer_api/model_list/model_available.py
--rw-rw-rw-  2.0 fat      716 b- defN 23-Jul-30 14:23 omniifer_api/model_list/put_model.py
--rw-rw-rw-  2.0 fat     1250 b- defN 23-Jul-30 14:08 omniifer_api/model_list/search_models.py
--rw-rw-rw-  2.0 fat      564 b- defN 23-Jul-30 14:23 omniifer_api/model_list/update.py
+-rw-rw-rw-  2.0 fat      758 b- defN 23-Aug-02 04:27 omniifer_api/model_list/put_model.py
+-rw-rw-rw-  2.0 fat     1271 b- defN 23-Aug-02 04:27 omniifer_api/model_list/search_models.py
+-rw-rw-rw-  2.0 fat      581 b- defN 23-Aug-02 04:27 omniifer_api/model_list/update.py
 -rw-rw-rw-  2.0 fat       33 b- defN 23-Jul-31 07:37 omniifer_api/tools/__init__.py
 -rw-rw-rw-  2.0 fat      307 b- defN 23-Jul-30 02:18 omniifer_api/tools/response_check.py
--rw-rw-rw-  2.0 fat      199 b- defN 23-Aug-01 08:14 omni_infer_api-0.0.2.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Aug-01 08:14 omni_infer_api-0.0.2.dist-info/WHEEL
--rw-rw-rw-  2.0 fat       13 b- defN 23-Aug-01 08:14 omni_infer_api-0.0.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     1767 b- defN 23-Aug-01 08:14 omni_infer_api-0.0.2.dist-info/RECORD
-20 files, 14310 bytes uncompressed, 6444 bytes compressed:  55.0%
+-rw-rw-rw-  2.0 fat      199 b- defN 23-Aug-02 04:51 omni_infer_api-0.0.3.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Aug-02 04:51 omni_infer_api-0.0.3.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       13 b- defN 23-Aug-02 04:51 omni_infer_api-0.0.3.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     1767 b- defN 23-Aug-02 04:51 omni_infer_api-0.0.3.dist-info/RECORD
+20 files, 14598 bytes uncompressed, 6595 bytes compressed:  54.8%
```

## zipnote {}

```diff
@@ -42,20 +42,20 @@
 
 Filename: omniifer_api/tools/__init__.py
 Comment: 
 
 Filename: omniifer_api/tools/response_check.py
 Comment: 
 
-Filename: omni_infer_api-0.0.2.dist-info/METADATA
+Filename: omni_infer_api-0.0.3.dist-info/METADATA
 Comment: 
 
-Filename: omni_infer_api-0.0.2.dist-info/WHEEL
+Filename: omni_infer_api-0.0.3.dist-info/WHEEL
 Comment: 
 
-Filename: omni_infer_api-0.0.2.dist-info/top_level.txt
+Filename: omni_infer_api-0.0.3.dist-info/top_level.txt
 Comment: 
 
-Filename: omni_infer_api-0.0.2.dist-info/RECORD
+Filename: omni_infer_api-0.0.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## omniifer_api/image_generate/img2img.py

```diff
@@ -4,15 +4,15 @@
 import random
 from typing import List
 
 
 # init_images:["base64"]
 def img2img(init_images: List, prompt: str, model_name: str, negative_prompt="", sampler_name="Euler a", batch_size=1
             , n_iter=1, steps=20, cfg_scale=7, seed=-1, height=512, width=512, denoising_strength=0.75
-            , restore_faces=False, clip_skip=2):
+            , restore_faces=False, clip_skip=2, api_key=""):
 
     if len(init_images) <= 0:
         raise error.OMNI_INFER_API_ERROR("Error zero init_images")
     if not 1 <= batch_size <= 8:
         raise error.OMNI_INFER_API_ERROR("Error batch size: " + str(batch_size))
     if not 1 <= n_iter <= 8:
         raise error.OMNI_INFER_API_ERROR("Error n iter: " + str(n_iter))
@@ -31,15 +31,15 @@
     if not clip_skip > 0:
         raise error.OMNI_INFER_API_ERROR("Error clip skip: " + str(clip_skip))
     if not 0.0 <= denoising_strength <= 1.0:
         raise error.OMNI_INFER_API_ERROR("Error denoising_strength: " + str(denoising_strength))
 
     header = {
         "Content-Type": "application/json",
-        "X-Omni-Key": config.API_KEY,
+        "X-Omni-Key": config.API_KEY if api_key == "" else api_key,
         "accept": "application/json"
     }
 
     data = {
         "init_images": init_images,
         "prompt": prompt,
         "negative_prompt": negative_prompt,
```

## omniifer_api/image_generate/progress.py

```diff
@@ -1,18 +1,18 @@
 import requests
 import json
 from .. import error, tools, config
 
 
 # status: 0 init 1 progressing 2 success 3 failed 4 timeout
-def progress(task_id: str):
+def progress(task_id: str, api_key=""):
 
     header = {
         "accept": "application/json",
-        "X-Omni-Key": config.API_KEY
+        "X-Omni-Key": config.API_KEY if api_key == "" else api_key
     }
 
     response = requests.get(config.endpoint + "v2/progress?task_id=" + task_id, headers=header)
     tools.response_check(response)
 
     re_json = json.loads(response.content.decode("utf-8"))
```

## omniifer_api/image_generate/txt2img.py

```diff
@@ -8,15 +8,15 @@
 # controlnet_mask=-1 = don't use controlnet_mask
 # 返回task_id
 def txt2img(prompt: str, model_name: str, negative_prompt="", sampler_name="Euler a", batch_size=1, n_iter=1, steps=20
             , cfg_scale=7, seed=-1, height=512, width=512, restore_faces=False, clip_skip=2, using_controlnet=False
             , controlnet_model="", controlnet_module="none", controlnet_weight=1.0, controlnet_input_image="base64"
             , control_mode=0, controlnet_mask=-1, controlnet_resize_mode=0, controlnet_lowvram=False
             , controlnet_processor_res=64, controlnet_threshold_a=64, controlnet_threshold_b=64
-            , controlnet_guidance_start=0.0, controlnet_guidance_end=1.0, controlnet_pixel_perfect=False):
+            , controlnet_guidance_start=0.0, controlnet_guidance_end=1.0, controlnet_pixel_perfect=False, api_key=""):
     if not 1 <= batch_size <= 8:
         raise error.OMNI_INFER_API_ERROR("Error batch size: " + str(batch_size))
     if not 1 <= n_iter <= 8:
         raise error.OMNI_INFER_API_ERROR("Error n iter: " + str(n_iter))
     if not 1 <= steps <= 50:
         raise error.OMNI_INFER_API_ERROR("Error steps: " + str(steps))
     if not 1 <= cfg_scale <= 30:
@@ -69,15 +69,15 @@
         }]
 
         if controlnet_mask != -1:
             data["controlnet_units"][0]["mask"] = controlnet_mask
 
     header = {
         "Content-Type": "application/json",
-        "X-Omni-Key": config.API_KEY,
+        "X-Omni-Key": config.API_KEY if api_key == "" else api_key,
         "accept": "application/json"
     }
 
     response = requests.post(config.endpoint + "v2/txt2img", headers=header, data=json.dumps(data))
 
     tools.response_check(response)
```

## omniifer_api/model_list/get_model.py

```diff
@@ -2,19 +2,19 @@
 from .. import config
 from .. import tools
 import json
 from .. import error
 
 
 # 通过civitai version id获取model详细信息  模型不存在会返回null
-def get_model(version_id: int):
+def get_model(version_id: int, api_key=""):
 
     header = {
         "Content-Type": "application/json",
-        "X-Omni-Key": config.API_KEY
+        "X-Omni-Key": config.API_KEY if api_key == "" else api_key
     }
 
     response = requests.get(config.endpoint + "v2/model/civitai_version_id/" + str(version_id), headers=header)
     tools.response_check(response)
     response_json = json.loads(response.content.decode("utf-8"))
     if response_json["code"] != 0:
         raise error.OMNI_INFER_API_ERROR("Get model request return a error code: {} , error message: {}"
```

## omniifer_api/model_list/get_models.py

```diff
@@ -1,17 +1,17 @@
 import requests
 from .. import config
 from .. import tools
 
 
 # 请求获取models的api并返回内容
-def get_models() -> str:
+def get_models(api_key="") -> str:
 
     header = {
         "Accept-Encoding": "gzip",
         "Content-Type": "application/json",
-        "X-Omni-Key": config.API_KEY
+        "X-Omni-Key": config.API_KEY if api_key == "" else api_key
     }
 
     response = requests.get(config.endpoint + "v2/models", headers=header)
     tools.response_check(response)
     return response.content.decode("utf-8")
```

## omniifer_api/model_list/put_model.py

```diff
@@ -1,19 +1,19 @@
 import json
 from .. import tools
 import requests
 from .. import config
 from .. import error
 
 
-def put_model(version_id: int):
+def put_model(version_id: int, api_key=""):
 
     header = {
         "Content-Type": "application/json",
-        "X-Omni-Key": config.API_KEY
+        "X-Omni-Key": config.API_KEY if api_key == "" else api_key
     }
 
     data = json.dumps([version_id], ensure_ascii=False)
 
     response = requests.post(config.endpoint + "v2/model", headers=header, data=data)
     tools.response_check(response)
```

## omniifer_api/model_list/search_models.py

```diff
@@ -2,17 +2,17 @@
 
 from .. import error
 from . import get_model
 
 
 # 根据keyword在model list中搜索模型  keyword可以是int(civitai version id或model id 但model id只允许是civitai的)或str(model name keyword)
 # 返回模型内容的数组 不存在则返回空数组
-def search_models(keyword):
+def search_models(keyword, api_key=""):
     if isinstance(keyword, int):
-        model = get_model.get_model(keyword)
+        model = get_model.get_model(keyword, api_key)
         if model is None:
             models = []
         else:
             models = [model]
         with open("models_cache.json", "r", encoding="utf-8") as f:
             model_list = json.loads(f.read())
```

## omniifer_api/model_list/update.py

```diff
@@ -1,15 +1,15 @@
 from . import get_models
 import json
 from .. import error
 
 
 # 更新model list缓存
-def update():
-    model_list = get_models.get_models()
+def update(api_key=""):
+    model_list = get_models.get_models(api_key)
     model_list_json = json.loads(model_list)
     if model_list_json["code"] != 0:
         raise error.OMNI_INFER_API_ERROR("Update request return a error code: {} , error message: {}".format(
             str(model_list_json["code"]), model_list_json["msg"]))
     with open("models_cache.json", "w", encoding="utf-8") as f:
         f.write(json.dumps(model_list_json["data"]["models"], ensure_ascii=False))
```

## Comparing `omni_infer_api-0.0.2.dist-info/RECORD` & `omni_infer_api-0.0.3.dist-info/RECORD`

 * *Files 26% similar despite different names*

```diff
@@ -1,20 +1,20 @@
 omniifer_api/__init__.py,sha256=u0VFTki9sLh0vIMB7nFn2nL86ZNYFVJ72p2PkNccNjs,122
 omniifer_api/config.py,sha256=XQOwj3lkD7rK9NAhYqkuEmCiZ7TJOJUgIb-JiSrB7Ns,64
 omniifer_api/error.py,sha256=0vXK1xTR3KjXsYCcw9W3G4Wz9q5QEcsCRR1hfKA2gZk,181
 omniifer_api/image_generate/__init__.py,sha256=NBmouScnfMygwpFo0xX5Ezm4h0FZLKvQqEdnt1HvS_4,94
-omniifer_api/image_generate/img2img.py,sha256=cu8ZoVTc_8Xk2rVqBrrcKtedexGH5u-7BQb9L3bMACA,2717
-omniifer_api/image_generate/progress.py,sha256=sE3H1baRhisBMOFXTshwJV8smXUEAhF8v1qK2an-Kvo,720
-omniifer_api/image_generate/txt2img.py,sha256=jr9x1hATq4L0Wv3f6n0IZJD51kxNAWd-L4mIgiQQI9k,3790
+omniifer_api/image_generate/img2img.py,sha256=F8pnsYnI41e-jYfq4hf7rLh_CKy1829OYEwMP8sfVHk,2759
+omniifer_api/image_generate/progress.py,sha256=D9BmnjK86L4uF4mmfU4YLlnaGKTL6uReH0KmAeRxlhI,762
+omniifer_api/image_generate/txt2img.py,sha256=HkuiO3MRDNI_2D9eFaGZlAMsn_bFRTXkuap7XrFWU_w,3832
 omniifer_api/model_list/__init__.py,sha256=QH1XUsdx0lPb5meXsgAtaSoEID76eptJuzfRkv524I8,176
-omniifer_api/model_list/get_model.py,sha256=qY_kRyRaeNN2iig9eniFgPLBGYEY6fvhUhuT-jDJu64,830
-omniifer_api/model_list/get_models.py,sha256=2jHaTTS_7pPxCpAkB2NS-40BCYL8A_qxo667ViPxKdw,438
+omniifer_api/model_list/get_model.py,sha256=JfGnbk09SEshvJ_veSKoqh-5_HjPInK8UliCsHthtXU,872
+omniifer_api/model_list/get_models.py,sha256=831qL54ESVJCVS95cNxZzmn416UMDYBCGgygFf_-8P0,478
 omniifer_api/model_list/model_available.py,sha256=ldlVh9n5rakrhR9clAiuy-7NqoWikOcyTT5QvhoRfpU,237
-omniifer_api/model_list/put_model.py,sha256=gNeg3QTRG02qkZfT9QftWzljQnJwLgJerDxTksNAxsQ,716
-omniifer_api/model_list/search_models.py,sha256=fwQ-XdhK_jrIP0cJ_t_oOLyMrnPXh62CZAA6P0p7ST0,1250
-omniifer_api/model_list/update.py,sha256=h7gt3Vfwp4UScrGRSh4iGQCTB_wlfvR-YKpBMNpSx1o,564
+omniifer_api/model_list/put_model.py,sha256=ooYNTWaHt0MAq4Inrc1g8yrlnFA1Iv6TMwCYKkp7OUc,758
+omniifer_api/model_list/search_models.py,sha256=ZP6lgYyUrZoexC2g8VmmiDKoPeEatS1kEjHdMPSuBI0,1271
+omniifer_api/model_list/update.py,sha256=v_WrUh0SVG6f4-hbH_LBdtUmAFWBPnEp7ukDPVkSK9g,581
 omniifer_api/tools/__init__.py,sha256=PbUs8cnYO79sGl1Y6zsKhOiZHHExEidiyrntyJ-aTDg,33
 omniifer_api/tools/response_check.py,sha256=PJbyxy5CXICZnRenoS1Qxyvp3vYzSOCAQSbUGqdTzJc,307
-omni_infer_api-0.0.2.dist-info/METADATA,sha256=dqgSOSdcMY7AU00P83oRMvzWuwCpAsXjlSheXYohauk,199
-omni_infer_api-0.0.2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-omni_infer_api-0.0.2.dist-info/top_level.txt,sha256=-5RhHKNFz5hCy5blJH5c-osZ5xLeU7Vk5unquKrtgIM,13
-omni_infer_api-0.0.2.dist-info/RECORD,,
+omni_infer_api-0.0.3.dist-info/METADATA,sha256=kVLrYxzSeOdxY03XpCGE6ktPIqq93o5YJ8elHV249Xc,199
+omni_infer_api-0.0.3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+omni_infer_api-0.0.3.dist-info/top_level.txt,sha256=-5RhHKNFz5hCy5blJH5c-osZ5xLeU7Vk5unquKrtgIM,13
+omni_infer_api-0.0.3.dist-info/RECORD,,
```

