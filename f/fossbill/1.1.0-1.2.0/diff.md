# Comparing `tmp/fossbill-1.1.0-py3-none-any.whl.zip` & `tmp/fossbill-1.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,66 +1,68 @@
-Zip file size: 75774 bytes, number of entries: 64
--rw-r--r--  2.0 unx     1584 b- defN 23-Jul-18 09:31 fossbill/__init__.py
--rw-r--r--  2.0 unx     3177 b- defN 23-Jul-18 09:31 fossbill/alembic.ini
--rw-r--r--  2.0 unx    11367 b- defN 23-Jul-18 09:31 fossbill/auth.py
--rw-r--r--  2.0 unx    28230 b- defN 23-Jul-18 09:31 fossbill/bill.py
--rw-r--r--  2.0 unx     5399 b- defN 23-Jul-18 09:31 fossbill/customer.py
--rw-r--r--  2.0 unx     9672 b- defN 23-Jul-18 09:31 fossbill/database.py
--rw-r--r--  2.0 unx      344 b- defN 23-Jul-18 09:31 fossbill/landing.py
--rw-r--r--  2.0 unx    12464 b- defN 23-Jul-18 09:31 fossbill/me.py
--rw-r--r--  2.0 unx    10699 b- defN 23-Jul-18 09:31 fossbill/payment.py
--rw-r--r--  2.0 unx     6880 b- defN 23-Jul-18 09:31 fossbill/product.py
--rw-r--r--  2.0 unx     3160 b- defN 23-Jul-18 09:31 fossbill/user.py
--rw-r--r--  2.0 unx     1836 b- defN 23-Jul-18 09:31 fossbill/alembic/env.py
--rw-r--r--  2.0 unx      510 b- defN 23-Jul-18 09:31 fossbill/alembic/script.py.mako
--rw-r--r--  2.0 unx      704 b- defN 23-Jul-18 09:31 fossbill/alembic/versions/21487ff4ab8c_store_receipt_url_in_payment.py
--rw-r--r--  2.0 unx      492 b- defN 23-Jul-18 09:31 fossbill/alembic/versions/7899e98936b3_bills_date_to_created_at.py
--rw-r--r--  2.0 unx     1355 b- defN 23-Jul-18 09:31 fossbill/alembic/versions/ac14f3a73a29_rename_client_to_customer.py
--rw-r--r--  2.0 unx     7770 b- defN 23-Jul-18 09:31 fossbill/alembic/versions/fda694e67f67_init.py
--rw-r--r--  2.0 unx      800 b- defN 23-Jul-18 09:31 fossbill/alembic/versions/ff51555aa2ba_add_date_on_bills_and_quotes.py
--rw-r--r--  2.0 unx      451 b- defN 23-Jul-18 09:33 fossbill/locale/en_US/LC_MESSAGES/messages.mo
--rw-r--r--  2.0 unx    17222 b- defN 23-Jul-18 09:33 fossbill/locale/fr_FR/LC_MESSAGES/messages.mo
--rw-r--r--  2.0 unx      592 b- defN 23-Jul-18 09:31 fossbill/static/bill.css
--rw-r--r--  2.0 unx     2784 b- defN 23-Jul-18 09:31 fossbill/static/style.css
--rw-r--r--  2.0 unx     1744 b- defN 23-Jul-18 09:31 fossbill/templates/base.html
--rw-r--r--  2.0 unx     1588 b- defN 23-Jul-18 09:31 fossbill/templates/macros.html
--rw-r--r--  2.0 unx      423 b- defN 23-Jul-18 09:31 fossbill/templates/auth/ask_reset_password.html
--rw-r--r--  2.0 unx      698 b- defN 23-Jul-18 09:31 fossbill/templates/auth/login.html
--rw-r--r--  2.0 unx      566 b- defN 23-Jul-18 09:31 fossbill/templates/auth/register.html
--rw-r--r--  2.0 unx      152 b- defN 23-Jul-18 09:31 fossbill/templates/auth/reset_password_email.plain
--rw-r--r--  2.0 unx      546 b- defN 23-Jul-18 09:31 fossbill/templates/auth/use_reset_password.html
--rw-r--r--  2.0 unx      107 b- defN 23-Jul-18 09:31 fossbill/templates/bill/bill_email.plain
--rw-r--r--  2.0 unx      642 b- defN 23-Jul-18 09:31 fossbill/templates/bill/create.html
--rw-r--r--  2.0 unx     2696 b- defN 23-Jul-18 09:31 fossbill/templates/bill/create_row.html
--rw-r--r--  2.0 unx     1559 b- defN 23-Jul-18 09:31 fossbill/templates/bill/finish.html
--rw-r--r--  2.0 unx      933 b- defN 23-Jul-18 09:31 fossbill/templates/bill/generated_bill.html
--rw-r--r--  2.0 unx     2522 b- defN 23-Jul-18 09:31 fossbill/templates/bill/generated_draft.html
--rw-r--r--  2.0 unx      479 b- defN 23-Jul-18 09:31 fossbill/templates/bill/generated_quote.html
--rw-r--r--  2.0 unx     6094 b- defN 23-Jul-18 09:31 fossbill/templates/bill/index.html
--rw-r--r--  2.0 unx      108 b- defN 23-Jul-18 09:31 fossbill/templates/bill/quote_email.plain
--rw-r--r--  2.0 unx      762 b- defN 23-Jul-18 09:31 fossbill/templates/bill/send_bill_email.html
--rw-r--r--  2.0 unx      763 b- defN 23-Jul-18 09:31 fossbill/templates/bill/send_quote_email.html
--rw-r--r--  2.0 unx     4494 b- defN 23-Jul-18 09:31 fossbill/templates/bill/update.html
--rw-r--r--  2.0 unx     1612 b- defN 23-Jul-18 09:31 fossbill/templates/bill/update_bill.html
--rw-r--r--  2.0 unx     3022 b- defN 23-Jul-18 09:31 fossbill/templates/bill/update_quote.html
--rw-r--r--  2.0 unx     1147 b- defN 23-Jul-18 09:31 fossbill/templates/bill/update_row.html
--rw-r--r--  2.0 unx     1551 b- defN 23-Jul-18 09:31 fossbill/templates/customer/create.html
--rw-r--r--  2.0 unx     2078 b- defN 23-Jul-18 09:31 fossbill/templates/customer/index.html
--rw-r--r--  2.0 unx     1625 b- defN 23-Jul-18 09:31 fossbill/templates/customer/update.html
--rw-r--r--  2.0 unx      840 b- defN 23-Jul-18 09:31 fossbill/templates/landing/dashboard.html
--rw-r--r--  2.0 unx     1194 b- defN 23-Jul-18 09:31 fossbill/templates/landing/welcome.html
--rw-r--r--  2.0 unx      639 b- defN 23-Jul-18 09:31 fossbill/templates/me/import_export_user.html
--rw-r--r--  2.0 unx       91 b- defN 23-Jul-18 09:31 fossbill/templates/me/test_email.plain
--rw-r--r--  2.0 unx     6547 b- defN 23-Jul-18 09:31 fossbill/templates/me/update.html
--rw-r--r--  2.0 unx      153 b- defN 23-Jul-18 09:31 fossbill/templates/payment/charged_notice.plain
--rw-r--r--  2.0 unx     3474 b- defN 23-Jul-18 09:31 fossbill/templates/payment/index.html
--rw-r--r--  2.0 unx     1381 b- defN 23-Jul-18 09:31 fossbill/templates/payment/invoice.html
--rw-r--r--  2.0 unx     1486 b- defN 23-Jul-18 09:31 fossbill/templates/product/create.html
--rw-r--r--  2.0 unx     2913 b- defN 23-Jul-18 09:31 fossbill/templates/product/index.html
--rw-r--r--  2.0 unx     1548 b- defN 23-Jul-18 09:31 fossbill/templates/product/update.html
--rw-r--r--  2.0 unx     3458 b- defN 23-Jul-18 09:31 fossbill/templates/user/index.html
--rw-r--r--  2.0 unx    34523 b- defN 23-Jul-18 09:33 fossbill-1.1.0.dist-info/LICENSE
--rw-r--r--  2.0 unx      232 b- defN 23-Jul-18 09:33 fossbill-1.1.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jul-18 09:33 fossbill-1.1.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        9 b- defN 23-Jul-18 09:33 fossbill-1.1.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     5899 b- defN 23-Jul-18 09:33 fossbill-1.1.0.dist-info/RECORD
-64 files, 229882 bytes uncompressed, 66230 bytes compressed:  71.2%
+Zip file size: 78055 bytes, number of entries: 66
+-rw-r--r--  2.0 unx     1584 b- defN 23-Aug-02 05:43 fossbill/__init__.py
+-rw-r--r--  2.0 unx     3177 b- defN 23-Aug-02 05:43 fossbill/alembic.ini
+-rw-r--r--  2.0 unx    11367 b- defN 23-Aug-02 05:43 fossbill/auth.py
+-rw-r--r--  2.0 unx    31079 b- defN 23-Aug-02 05:43 fossbill/bill.py
+-rw-r--r--  2.0 unx     5399 b- defN 23-Aug-02 05:43 fossbill/customer.py
+-rw-r--r--  2.0 unx     9735 b- defN 23-Aug-02 05:43 fossbill/database.py
+-rw-r--r--  2.0 unx      344 b- defN 23-Aug-02 05:43 fossbill/landing.py
+-rw-r--r--  2.0 unx    13547 b- defN 23-Aug-02 05:43 fossbill/me.py
+-rw-r--r--  2.0 unx    10699 b- defN 23-Aug-02 05:43 fossbill/payment.py
+-rw-r--r--  2.0 unx     6880 b- defN 23-Aug-02 05:43 fossbill/product.py
+-rw-r--r--  2.0 unx     3160 b- defN 23-Aug-02 05:43 fossbill/user.py
+-rw-r--r--  2.0 unx     1836 b- defN 23-Aug-02 05:43 fossbill/alembic/env.py
+-rw-r--r--  2.0 unx      510 b- defN 23-Aug-02 05:43 fossbill/alembic/script.py.mako
+-rw-r--r--  2.0 unx      704 b- defN 23-Aug-02 05:43 fossbill/alembic/versions/21487ff4ab8c_store_receipt_url_in_payment.py
+-rw-r--r--  2.0 unx      492 b- defN 23-Aug-02 05:43 fossbill/alembic/versions/7899e98936b3_bills_date_to_created_at.py
+-rw-r--r--  2.0 unx      491 b- defN 23-Aug-02 05:43 fossbill/alembic/versions/8b4e2235b960_add_bill_style.py
+-rw-r--r--  2.0 unx     1355 b- defN 23-Aug-02 05:43 fossbill/alembic/versions/ac14f3a73a29_rename_client_to_customer.py
+-rw-r--r--  2.0 unx     7770 b- defN 23-Aug-02 05:43 fossbill/alembic/versions/fda694e67f67_init.py
+-rw-r--r--  2.0 unx      800 b- defN 23-Aug-02 05:43 fossbill/alembic/versions/ff51555aa2ba_add_date_on_bills_and_quotes.py
+-rw-r--r--  2.0 unx      451 b- defN 23-Aug-02 05:45 fossbill/locale/en_US/LC_MESSAGES/messages.mo
+-rw-r--r--  2.0 unx    17878 b- defN 23-Aug-02 05:45 fossbill/locale/fr_FR/LC_MESSAGES/messages.mo
+-rw-r--r--  2.0 unx      592 b- defN 23-Aug-02 05:43 fossbill/static/bill.css
+-rw-r--r--  2.0 unx     2830 b- defN 23-Aug-02 05:43 fossbill/static/style.css
+-rw-r--r--  2.0 unx     1744 b- defN 23-Aug-02 05:43 fossbill/templates/base.html
+-rw-r--r--  2.0 unx     1588 b- defN 23-Aug-02 05:43 fossbill/templates/macros.html
+-rw-r--r--  2.0 unx      423 b- defN 23-Aug-02 05:43 fossbill/templates/auth/ask_reset_password.html
+-rw-r--r--  2.0 unx      698 b- defN 23-Aug-02 05:43 fossbill/templates/auth/login.html
+-rw-r--r--  2.0 unx      566 b- defN 23-Aug-02 05:43 fossbill/templates/auth/register.html
+-rw-r--r--  2.0 unx      152 b- defN 23-Aug-02 05:43 fossbill/templates/auth/reset_password_email.plain
+-rw-r--r--  2.0 unx      546 b- defN 23-Aug-02 05:43 fossbill/templates/auth/use_reset_password.html
+-rw-r--r--  2.0 unx      107 b- defN 23-Aug-02 05:43 fossbill/templates/bill/bill_email.plain
+-rw-r--r--  2.0 unx      642 b- defN 23-Aug-02 05:43 fossbill/templates/bill/create.html
+-rw-r--r--  2.0 unx     2696 b- defN 23-Aug-02 05:43 fossbill/templates/bill/create_row.html
+-rw-r--r--  2.0 unx     1559 b- defN 23-Aug-02 05:43 fossbill/templates/bill/finish.html
+-rw-r--r--  2.0 unx      933 b- defN 23-Aug-02 05:43 fossbill/templates/bill/generated_bill.html
+-rw-r--r--  2.0 unx     2612 b- defN 23-Aug-02 05:43 fossbill/templates/bill/generated_draft.html
+-rw-r--r--  2.0 unx      479 b- defN 23-Aug-02 05:43 fossbill/templates/bill/generated_quote.html
+-rw-r--r--  2.0 unx     6094 b- defN 23-Aug-02 05:43 fossbill/templates/bill/index.html
+-rw-r--r--  2.0 unx      108 b- defN 23-Aug-02 05:43 fossbill/templates/bill/quote_email.plain
+-rw-r--r--  2.0 unx      762 b- defN 23-Aug-02 05:43 fossbill/templates/bill/send_bill_email.html
+-rw-r--r--  2.0 unx      763 b- defN 23-Aug-02 05:43 fossbill/templates/bill/send_quote_email.html
+-rw-r--r--  2.0 unx     4494 b- defN 23-Aug-02 05:43 fossbill/templates/bill/update.html
+-rw-r--r--  2.0 unx     1612 b- defN 23-Aug-02 05:43 fossbill/templates/bill/update_bill.html
+-rw-r--r--  2.0 unx     3022 b- defN 23-Aug-02 05:43 fossbill/templates/bill/update_quote.html
+-rw-r--r--  2.0 unx     1147 b- defN 23-Aug-02 05:43 fossbill/templates/bill/update_row.html
+-rw-r--r--  2.0 unx     1551 b- defN 23-Aug-02 05:43 fossbill/templates/customer/create.html
+-rw-r--r--  2.0 unx     2078 b- defN 23-Aug-02 05:43 fossbill/templates/customer/index.html
+-rw-r--r--  2.0 unx     1625 b- defN 23-Aug-02 05:43 fossbill/templates/customer/update.html
+-rw-r--r--  2.0 unx      840 b- defN 23-Aug-02 05:43 fossbill/templates/landing/dashboard.html
+-rw-r--r--  2.0 unx     1194 b- defN 23-Aug-02 05:43 fossbill/templates/landing/welcome.html
+-rw-r--r--  2.0 unx      639 b- defN 23-Aug-02 05:43 fossbill/templates/me/import_export_user.html
+-rw-r--r--  2.0 unx       91 b- defN 23-Aug-02 05:43 fossbill/templates/me/test_email.plain
+-rw-r--r--  2.0 unx     6646 b- defN 23-Aug-02 05:43 fossbill/templates/me/update.html
+-rw-r--r--  2.0 unx      663 b- defN 23-Aug-02 05:43 fossbill/templates/me/update_bill_style.html
+-rw-r--r--  2.0 unx      153 b- defN 23-Aug-02 05:43 fossbill/templates/payment/charged_notice.plain
+-rw-r--r--  2.0 unx     3474 b- defN 23-Aug-02 05:43 fossbill/templates/payment/index.html
+-rw-r--r--  2.0 unx     1381 b- defN 23-Aug-02 05:43 fossbill/templates/payment/invoice.html
+-rw-r--r--  2.0 unx     1486 b- defN 23-Aug-02 05:43 fossbill/templates/product/create.html
+-rw-r--r--  2.0 unx     2913 b- defN 23-Aug-02 05:43 fossbill/templates/product/index.html
+-rw-r--r--  2.0 unx     1548 b- defN 23-Aug-02 05:43 fossbill/templates/product/update.html
+-rw-r--r--  2.0 unx     3458 b- defN 23-Aug-02 05:43 fossbill/templates/user/index.html
+-rw-r--r--  2.0 unx    34523 b- defN 23-Aug-02 05:45 fossbill-1.2.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx      232 b- defN 23-Aug-02 05:45 fossbill-1.2.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Aug-02 05:45 fossbill-1.2.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        9 b- defN 23-Aug-02 05:45 fossbill-1.2.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     6111 b- defN 23-Aug-02 05:45 fossbill-1.2.0.dist-info/RECORD
+66 files, 236134 bytes uncompressed, 68159 bytes compressed:  71.1%
```

## zipnote {}

```diff
@@ -39,14 +39,17 @@
 
 Filename: fossbill/alembic/versions/21487ff4ab8c_store_receipt_url_in_payment.py
 Comment: 
 
 Filename: fossbill/alembic/versions/7899e98936b3_bills_date_to_created_at.py
 Comment: 
 
+Filename: fossbill/alembic/versions/8b4e2235b960_add_bill_style.py
+Comment: 
+
 Filename: fossbill/alembic/versions/ac14f3a73a29_rename_client_to_customer.py
 Comment: 
 
 Filename: fossbill/alembic/versions/fda694e67f67_init.py
 Comment: 
 
 Filename: fossbill/alembic/versions/ff51555aa2ba_add_date_on_bills_and_quotes.py
@@ -150,14 +153,17 @@
 
 Filename: fossbill/templates/me/test_email.plain
 Comment: 
 
 Filename: fossbill/templates/me/update.html
 Comment: 
 
+Filename: fossbill/templates/me/update_bill_style.html
+Comment: 
+
 Filename: fossbill/templates/payment/charged_notice.plain
 Comment: 
 
 Filename: fossbill/templates/payment/index.html
 Comment: 
 
 Filename: fossbill/templates/payment/invoice.html
@@ -171,23 +177,23 @@
 
 Filename: fossbill/templates/product/update.html
 Comment: 
 
 Filename: fossbill/templates/user/index.html
 Comment: 
 
-Filename: fossbill-1.1.0.dist-info/LICENSE
+Filename: fossbill-1.2.0.dist-info/LICENSE
 Comment: 
 
-Filename: fossbill-1.1.0.dist-info/METADATA
+Filename: fossbill-1.2.0.dist-info/METADATA
 Comment: 
 
-Filename: fossbill-1.1.0.dist-info/WHEEL
+Filename: fossbill-1.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: fossbill-1.1.0.dist-info/top_level.txt
+Filename: fossbill-1.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: fossbill-1.1.0.dist-info/RECORD
+Filename: fossbill-1.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## fossbill/bill.py

```diff
@@ -746,14 +746,52 @@
 @login_required
 def view_bill_pdf(id):
     return render_pdf(
         url_for('bill.view_bill', id=id),
         download_filename="fossbill_bill_{}.pdf".format(id)
     )
 
+def get_bill_template():
+    return {
+        'id': 9999,
+        'customer_id': 9999,
+        'comment': _("This is a template bill"),
+        'created_at': datetime.date.today() - datetime.timedelta(days=5),
+        'bill_number': 32523,
+        'bill_date': datetime.date.today() - datetime.timedelta(days=1),
+        'quote_number': 23522,
+        'quote_date': datetime.date.today() - datetime.timedelta(days=3),
+        'recipient': _("EI John Doe\nSIRET XXXXXXXXXXXXXX\nXXX Street of Smith\nXXXXX Bright United state"),
+        'source': _("Malton Cober\nSIRET XXXXXXXXXXXXXX\nXXX Street of Cobolt\nXXXXX Dark United state"),
+        'user_id': g.user.id,
+        'bill_mentions': "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</br>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</br>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</br>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
+        'quote_mentions': "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</br>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</br>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</br>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
+        'paid': False,
+        'gross_amount': 35816,
+        'tax_amount': 4827,
+        'amount': 40643,
+    }
+
+def get_bill_rows_template():
+    return [
+        {'bill_id': 9999, 'id': 9999, 'label': "Lorem ipsum dolor sit amet", 'price': 2313, 'quantity': 3, 'tax_rate': 12, 'user_id': g.user.id, 'gross_amount': 6939, 'tax_amount': 832, 'amount': 7771 },
+        {'bill_id': 9999, 'id': 9999, 'label': "Consectetur adipiscing", 'price': 5472, 'quantity': 2, 'tax_rate': 20, 'user_id': g.user.id, 'gross_amount': 10944, 'tax_amount': 2188, 'amount': 13132 },
+        {'bill_id': 9999, 'id': 9999, 'label': "Sed do eiusmod tempor", 'price': 1057, 'quantity': 9, 'tax_rate': 19, 'user_id': g.user.id, 'gross_amount': 9513, 'tax_amount': 1807, 'amount': 11320 },
+        {'bill_id': 9999, 'id': 9999, 'label': "Quis nostrud exercitation", 'price': 2105, 'quantity': 4, 'tax_rate': 0, 'user_id': g.user.id, 'gross_amount': 8420, 'tax_amount': 0, 'amount': 8420 },
+    ]
+
+@bp.route('/view_bill_template', methods=['GET'])
+@login_required
+def view_bill_template():
+    return render_template(
+        'bill/generated_bill.html',
+        bill=get_bill_template(),
+        bill_rows=get_bill_rows_template(),
+    )
+
 @bp.route('/<int:id>/send_quote_email', methods=['GET', 'POST'])
 @login_required
 @user_pref_smtp_enough
 def send_quote_email(id):
     bill = get_bill(id, g.user.id)
 
     if None == bill.quote_number:
```

## fossbill/database.py

```diff
@@ -156,14 +156,15 @@
             Column('smtp_password', String(30), nullable=True),
             Column('smtp_port', Integer, nullable=True),
             Column('smtp_security', String(10), nullable=True),
             Column('smtp_username', String(30), nullable=True),
             Column('smtp_reply_to', String(254), nullable=True),
             Column('smtp_cc', String(508), nullable=True),
             Column('source', String(500), nullable=True),
+            Column('bill_style', String(1500), nullable=True),
             Column('user_id', Integer, ForeignKey("user.id"), nullable=False, index=True),
         )
 
         user_password_reset_token = Table('user_password_reset_token', g.metadata,
             Column('id', Integer, primary_key=True),
             Column('user_id', Integer, ForeignKey("user.id"), nullable=False, index=True),
             Column('token', String(128), nullable=False, unique=True),
```

## fossbill/me.py

```diff
@@ -381,7 +381,41 @@
         for row in rows:
             writer.writerow([getattr(row, column) for column in columns])
         textbuf.flush()
         filebuf.seek(0)
         info = tarfile.TarInfo('{}.csv'.format(table))
         info.size=filebuf.getbuffer().nbytes
         file.addfile(tarinfo=info, fileobj=filebuf)
+
+@bp.route('/update_bill_style', methods=('GET', 'POST'))
+@login_required
+def update_bill_style():
+    if request.method == 'POST':
+        error = None
+
+        if None == request.form.get('bill_style'):
+            error = _('Bill style is required.')
+
+        if error is not None:
+            flash(error)
+        else:
+            engine, metadata = get_db()
+            user_prefs = metadata.tables['user_pref']
+
+            stmt = user_prefs.update().values(
+              bill_style=request.form.get('bill_style')
+            ).where(
+                user_prefs.c.id == g.user_pref.id,
+            )
+
+            try:
+                with engine.connect() as conn:
+                    result = conn.execute(stmt)
+                    conn.commit()
+            except SQLAlchemyError as e:
+                current_app.logger.error(str(e))
+                flash(_("Something went wrong."))
+            else:
+                flash(_("Bill style updated."))
+                return redirect(url_for("me.update_bill_style"))
+
+    return render_template('me/update_bill_style.html')
```

## fossbill/locale/en_US/LC_MESSAGES/messages.mo

 * *Format-specific differences are supported for Gettext message catalogues but no file-specific differences were detected; falling back to a binary diff. file(1) reports: GNU message catalog (little endian), revision 0.0, 1 message, Project-Id-Version: PROJECT VERSION*

```diff
@@ -2,16 +2,16 @@
 00000010: 2400 0000 0000 0000 0000 0000 0000 0000  $...............
 00000020: 2c00 0000 9501 0000 2d00 0000 0050 726f  ,.......-....Pro
 00000030: 6a65 6374 2d49 642d 5665 7273 696f 6e3a  ject-Id-Version:
 00000040: 2050 524f 4a45 4354 2056 4552 5349 4f4e   PROJECT VERSION
 00000050: 0a52 6570 6f72 742d 4d73 6769 642d 4275  .Report-Msgid-Bu
 00000060: 6773 2d54 6f3a 2045 4d41 494c 4041 4444  gs-To: EMAIL@ADD
 00000070: 5245 5353 0a50 4f54 2d43 7265 6174 696f  RESS.POT-Creatio
-00000080: 6e2d 4461 7465 3a20 3230 3233 2d30 372d  n-Date: 2023-07-
-00000090: 3138 2030 393a 3333 2b30 3030 300a 504f  18 09:33+0000.PO
+00000080: 6e2d 4461 7465 3a20 3230 3233 2d30 382d  n-Date: 2023-08-
+00000090: 3032 2030 353a 3435 2b30 3030 300a 504f  02 05:45+0000.PO
 000000a0: 2d52 6576 6973 696f 6e2d 4461 7465 3a20  -Revision-Date: 
 000000b0: 5945 4152 2d4d 4f2d 4441 2048 4f3a 4d49  YEAR-MO-DA HO:MI
 000000c0: 2b5a 4f4e 450a 4c61 7374 2d54 7261 6e73  +ZONE.Last-Trans
 000000d0: 6c61 746f 723a 2046 554c 4c20 4e41 4d45  lator: FULL NAME
 000000e0: 203c 454d 4149 4c40 4144 4452 4553 533e   <EMAIL@ADDRESS>
 000000f0: 0a4c 616e 6775 6167 653a 2065 6e5f 5553  .Language: en_US
 00000100: 0a4c 616e 6775 6167 652d 5465 616d 3a20  .Language-Team:
```

## fossbill/locale/fr_FR/LC_MESSAGES/messages.mo

### msgunfmt {}

```diff
@@ -1,12 +1,12 @@
 msgid ""
 msgstr ""
 "Project-Id-Version: PROJECT VERSION\n"
 "Report-Msgid-Bugs-To: EMAIL@ADDRESS\n"
-"POT-Creation-Date: 2023-07-18 09:33+0000\n"
+"POT-Creation-Date: 2023-08-02 05:45+0000\n"
 "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
 "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
 "Language: fr_FR\n"
 "Language-Team: fr_FR <LL@li.org>\n"
 "Plural-Forms: nplurals=2; plural=(n > 1);\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=utf-8\n"
@@ -120,14 +120,23 @@
 
 msgid "Bill row deleted."
 msgstr "Ligne de facture supprimée."
 
 msgid "Bill row updated."
 msgstr "Ligne de facture modifiée."
 
+msgid "Bill style"
+msgstr "Styles de factures"
+
+msgid "Bill style is required."
+msgstr "Les styles de facture sont requis."
+
+msgid "Bill style updated."
+msgstr "Styles de facture mis à jours."
+
 msgid "Bill updated."
 msgstr "Facture modifiée."
 
 msgid "Bills"
 msgstr "Factures"
 
 msgid ""
@@ -251,26 +260,40 @@
 
 msgid "Draft"
 msgstr "Brouillon"
 
 msgid "Due at"
 msgstr "Expire le"
 
+msgid ""
+"EI John Doe\n"
+"SIRET XXXXXXXXXXXXXX\n"
+"XXX Street of Smith\n"
+"XXXXX Bright United state"
+msgstr ""
+"EI Bernard Noyer\n"
+"SIRET XXXXXXXXXXXXXX\n"
+"XXX Rue Jean Bignon\n"
+"XXXXX Perpignan France"
+
 msgid "Edit"
 msgstr "Modifier"
 
 msgid "Edit \"%(customerlabel)s\""
 msgstr "Modifier \"%(customerlabel)s\""
 
 msgid "Edit \"%(productlabel)s\""
 msgstr "Modifier \"%(productlabel)s\""
 
 msgid "Edit \"%(username)s\""
 msgstr "Modifier \"%(username)s\""
 
+msgid "Edit bill style"
+msgstr "Modifier les styles de facture"
+
 msgid "Edit row"
 msgstr "Modifier la ligne"
 
 msgid "Either give a product id or all."
 msgstr "Utilisez soit un id de produit soit tous."
 
 msgid "Email"
@@ -464,14 +487,25 @@
 
 msgid "Log In"
 msgstr "Connection"
 
 msgid "Log Out"
 msgstr "Déconnection"
 
+msgid ""
+"Malton Cober\n"
+"SIRET XXXXXXXXXXXXXX\n"
+"XXX Street of Cobolt\n"
+"XXXXX Dark United state"
+msgstr ""
+"Michel Franc\n"
+"SIRET XXXXXXXXXXXXXX\n"
+"XXX Rue Pignon\n"
+"XXXXX Paris"
+
 msgid "New"
 msgstr "Nouveau"
 
 msgid "New Bill"
 msgstr "Nouvelle facture"
 
 msgid "New Customer"
@@ -742,14 +776,17 @@
 
 msgid "This bill is not a draft."
 msgstr "Cette facture n'est pas un brouillon."
 
 msgid "This bill is not generated."
 msgstr "Cette facture n'est pas générée."
 
+msgid "This is a template bill"
+msgstr "Ceci est un template de facture"
+
 msgid "This quote is not generated."
 msgstr "Ce devis n'est pas généré."
 
 msgid "To"
 msgstr "À"
 
 msgid "Token already expired."
```

## fossbill/static/style.css

```diff
@@ -66,7 +66,11 @@
 
 @media screen and (min-width: 960px) {
     body { max-width: 960px; margin: 1rem auto 3rem auto; }
     nav { align-items: flex-end; flex-direction: row; justify-content: space-between; }
     .flex-align { display: flex; justify-content: space-between;}
     .flex-align > * { flex-basis: 48%; }
 }
+
+iframe.bill {
+    background-color: white;
+}
```

## fossbill/templates/bill/generated_draft.html

```diff
@@ -1,13 +1,14 @@
 <!DOCTYPE html>
 <html lang="en">
   <head>
     <meta charset="utf-8">
     <title>{% block title %}{% trans quotenumber=bill.quote_number %}Quote #{{ quotenumber }}{% endtrans %}{% endblock %}</title>
     <link rel="stylesheet" href="{{ url_for('static', filename='bill.css') }}">
+    {% if g.user_pref.bill_style %}<style>{{ g.user_pref.bill_style }}</style>{% endif %}
   </head>
   <body>
     {% block identifier %}
       <div class="warning">
         <h1>{% trans %}Draft{% endtrans %}</h1>
       </div>
       <div class="persons">
```

### html2text {}

```diff
@@ -1,7 +1,9 @@
+ {% if g.user_pref.bill_style %}
+{% endif %}
 {% block identifier %}
 ****** {% trans %}Draft{% endtrans %} ******
 {% trans %}From{% endtrans %}
 {{ bill.source or '' }}
 {% trans %}To{% endtrans %}
 {{ bill.recipient }}
 {% if None == bill.quote_number %} {% trans %}Draft{% endtrans %}
```

## fossbill/templates/me/update.html

```diff
@@ -107,9 +107,10 @@
         {{ csrf_token()|safe }}
       </form>
       <form action="{{ url_for('me.delete_bills') }}" method="post">
         <input class="danger" type="submit" value="{% trans %}Delete bills{% endtrans %}" onclick="return confirm('{% trans %}You are about to delete all of your bills.\nAre you sure?{% endtrans %}');">
         {{ csrf_token()|safe }}
       </form>
       <a href="{{ url_for('me.import_export_user') }}">{% trans %}Import / Export{% endtrans %}</a>
+      <a href="{{ url_for('me.update_bill_style') }}">{% trans %}Edit bill style{% endtrans %}</a>
   </div>
 {% endblock %}
```

## Comparing `fossbill-1.1.0.dist-info/LICENSE` & `fossbill-1.2.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `fossbill-1.1.0.dist-info/RECORD` & `fossbill-1.2.0.dist-info/RECORD`

 * *Files 12% similar despite different names*

```diff
@@ -1,42 +1,43 @@
 fossbill/__init__.py,sha256=J6-SnwDPfxFd-jX5zY2wwx-51zrvPabsDCPsyoM4XT0,1584
 fossbill/alembic.ini,sha256=aJbEygfNAlh8HRJfjifPeR-AdKEs6RvAn3EcNAktnVM,3177
 fossbill/auth.py,sha256=o8aA2y1b69vsitt_TYpRwNs2BMIaENnB6KVftNuAiTE,11367
-fossbill/bill.py,sha256=DL2YuI06o8plxvYOESjaC7RsndoEDVtJb5j4fo_w7r0,28230
+fossbill/bill.py,sha256=baLAl8fQXvoMdXGohCJUu8sKAf36fRsDbs0_YSxC0A8,31079
 fossbill/customer.py,sha256=hneNpQRQK4XX2UbUU1CDyaJDGrHC-SYyVW3aXTP_U-g,5399
-fossbill/database.py,sha256=hB8CvYRhp-i47GJ4PcYCNgg3QVMvIvOx86DITno5QXs,9672
+fossbill/database.py,sha256=Si1Hw0fa551IJKAsjJp_3rk4SZ5KUKPwxJBc6QEWRgU,9735
 fossbill/landing.py,sha256=iHmECuoW2lCIt19eaXL5w4c7649EGPMf6IqUGIxmhAE,344
-fossbill/me.py,sha256=UQl55zOIVl4s8fo2N8Ex5NfgVtc6bk8p6Z3ae5sGH4w,12464
+fossbill/me.py,sha256=PUBPzny-3eSYN2WVS52R0RU-Nl1sh7m_f_ctQuxMJKQ,13547
 fossbill/payment.py,sha256=tlhC0IXwCWxVjP_jgjAM8fpehqVsXDEntpWKkFlUEYA,10699
 fossbill/product.py,sha256=p8fPJIMZxozou7auJ1OUTaM6GWFku59Uh_yUE-BTDvQ,6880
 fossbill/user.py,sha256=Vi11FEIWrZqYYbu2BPQRA3EtrPwPrFiwch9gKCWUzB0,3160
 fossbill/alembic/env.py,sha256=AaC0ebQmXmRKI_UtQpDXsgiUTj9b64wyMcoQXBbzWjI,1836
 fossbill/alembic/script.py.mako,sha256=HNlf26BI1xvQKjiUojnj15BPrVUfVVr81IOgliJf83c,510
 fossbill/alembic/versions/21487ff4ab8c_store_receipt_url_in_payment.py,sha256=HdCOsCFGfLAG6UcwySX2vVxGVZihF5At3FfiCXDa9l4,704
 fossbill/alembic/versions/7899e98936b3_bills_date_to_created_at.py,sha256=orkiLS6CoW4Tl2XoD5-o4J2zp-87dkzZJVq-gEfbnFk,492
+fossbill/alembic/versions/8b4e2235b960_add_bill_style.py,sha256=n3rvSci9NpcFmD2JDUFEiGvHzGF1xCX1VgiPJTrfQZ0,491
 fossbill/alembic/versions/ac14f3a73a29_rename_client_to_customer.py,sha256=ZYYNxX74v8KPSYfjy27dBY1An7GSBgCCWPJlJamSE1o,1355
 fossbill/alembic/versions/fda694e67f67_init.py,sha256=aJdRCEUND0KGp4iBtOGX0_0oAifgdgSHyJ5O4asip_4,7770
 fossbill/alembic/versions/ff51555aa2ba_add_date_on_bills_and_quotes.py,sha256=7Kzt1RN7-9RDZcCjrR2mGHaX-Ya7oQuaeqPmh43QBks,800
-fossbill/locale/en_US/LC_MESSAGES/messages.mo,sha256=o-K1epodj-OY2KBf4E81lBEdEMjvxFSpWKK0g6Yln4g,451
-fossbill/locale/fr_FR/LC_MESSAGES/messages.mo,sha256=2YxhLzGX3wGB_WyaVhvwvG5050h5iJoc0BP8Jryd3zk,17222
+fossbill/locale/en_US/LC_MESSAGES/messages.mo,sha256=jOnlewRAJWXLtq-9zrAVs3siK8pb5eXV43njel4tnnI,451
+fossbill/locale/fr_FR/LC_MESSAGES/messages.mo,sha256=_DxDf-c4GM2MRyb6FjbvqFatR5WdfvEmuWfyhBPfhB4,17878
 fossbill/static/bill.css,sha256=MUHyEYKjlNEZpj32uSIlq4wj4evFkTGIVGvsXPEmGpw,592
-fossbill/static/style.css,sha256=uqfAp5QPOAEWcR24nZaMnlT320PW7D9NcPULPU275VM,2784
+fossbill/static/style.css,sha256=S82XFNfX4UyxbtzH9iAByb8hOaU0erbFYkwSlZtZEDg,2830
 fossbill/templates/base.html,sha256=Br_cdncS21bisLQVJAQHFxOaA1sQIkKrkKieKrXR8Fg,1744
 fossbill/templates/macros.html,sha256=cVbZO23WeyTx4RdvJZUSXRIzfk4bKIdF_UY5g4Xh-JU,1588
 fossbill/templates/auth/ask_reset_password.html,sha256=OgXkipciXCz_JjjD-tOj5xqfPOoEL1GByUnImPch1fw,423
 fossbill/templates/auth/login.html,sha256=Qge-oGgFfqOTRmG3XazwZLC9Nm7gip7L-UlqZ46vt4M,698
 fossbill/templates/auth/register.html,sha256=NqajXuHBpBTH9CntB6S2KIt_tt_w-t-qu1JV2o30Hbs,566
 fossbill/templates/auth/reset_password_email.plain,sha256=Ojxh1LbmQroZTKAJwrusDvbcyb9rP35KnPTq1YbO-C8,152
 fossbill/templates/auth/use_reset_password.html,sha256=jcVM4gSJCsawNtXZIOt1AVRoIVTlltdm0VBqjFfdKfM,546
 fossbill/templates/bill/bill_email.plain,sha256=ZqWZvEwSppsftsvua_CiZ27zQcsHjixEnpbxEWUWcp4,107
 fossbill/templates/bill/create.html,sha256=mm7quPoARbGkdfK2K4yfUjXPpj-fOBJbc0V0jNMPh-I,642
 fossbill/templates/bill/create_row.html,sha256=wu4yg6ptHO2nqU82QAQCw5ichwxeG-ZUwCCmiavnEyY,2696
 fossbill/templates/bill/finish.html,sha256=MyE-dQ-2dzid9pGymaO65gq1epvU4qZXu537iRvDe30,1559
 fossbill/templates/bill/generated_bill.html,sha256=kcoc77VSqohnAJJTubmZCdX_ERe1ulaie3FOc14nbxA,933
-fossbill/templates/bill/generated_draft.html,sha256=klFZfGFuuL-L27ypn89CtK2gbueiIMT84wytRyHGN4w,2522
+fossbill/templates/bill/generated_draft.html,sha256=HTDEfTdg1A7h3s6W9bBKRuRWESMHKF8a-mCjUhhnIU0,2612
 fossbill/templates/bill/generated_quote.html,sha256=DJg0fmZprKLvco1cZwXFp1JAf0MoxgaJd-R1xPJ60c8,479
 fossbill/templates/bill/index.html,sha256=ohpLxmDCeRoqTHI7Tx5Vm0vR5BxL_F5sNshnHQp_arE,6094
 fossbill/templates/bill/quote_email.plain,sha256=F7LyDUhhVDvYqZyy_sCrZggQ_fVs1tgfVazdj7IHE0k,108
 fossbill/templates/bill/send_bill_email.html,sha256=PyHZ8siNN4Yb-lYOCHOR2HqG8GExMrxL4CpXdeyENoo,762
 fossbill/templates/bill/send_quote_email.html,sha256=k6lO2r_3pXnBpDydZzCGh51XiR-huu69F6EG2h-ZY-Q,763
 fossbill/templates/bill/update.html,sha256=ctH9mEYKEqtVmANem5QcPPNMF-gnDfo94M1wzoYce1E,4494
 fossbill/templates/bill/update_bill.html,sha256=r1uyp8BxKInIW9YXk0aU1SOu-ReTk53Yz11Og-uyNZY,1612
@@ -45,20 +46,21 @@
 fossbill/templates/customer/create.html,sha256=j7k9cCPCGFcLkHrSe3GPoajwqFzFYnYpjWcVUnvAnuQ,1551
 fossbill/templates/customer/index.html,sha256=m_qhOA6pDiJMb4HKNUKDTXOLj4l5CCsymX-ws5jIQRo,2078
 fossbill/templates/customer/update.html,sha256=xlGQ8L23lDFm8RSshRn9qJ4LbQgeLT_m7REdoHYAN8w,1625
 fossbill/templates/landing/dashboard.html,sha256=7Hb2pCs1FyHu3R8LMfAp1dch7JSbact-cBJ7OvxIUAU,840
 fossbill/templates/landing/welcome.html,sha256=9nJ4XTN-xd-7I61keypXY6oTvjTQoAC0QMC2uOVvLNA,1194
 fossbill/templates/me/import_export_user.html,sha256=kQyFcHyeM6zBEMklhtpmcX9xgFyb-S_VhFLIsvb-3Ag,639
 fossbill/templates/me/test_email.plain,sha256=rxG8bZuAedYS0U83l31S93XeT5YpS6wB5h46ChsU_w0,91
-fossbill/templates/me/update.html,sha256=JkAJJawDY2RPuc2WIYJ9qtUhQT9PTUd31esimXQ16rw,6547
+fossbill/templates/me/update.html,sha256=Y65_2kbKxlOvBReY_hpKJRk-lqtuIG0NxxDLCg0qDkU,6646
+fossbill/templates/me/update_bill_style.html,sha256=ttFfm8DKRXRYi5OS05U3f-DatkqSX8EnlPubP3peMYs,663
 fossbill/templates/payment/charged_notice.plain,sha256=PfaOxkor6PniuCFGD0j-OUmt2Cc4OylF3kTaUgFqtMg,153
 fossbill/templates/payment/index.html,sha256=WyJLZsvtYByaC9Hdwr3COtdm8D8rCJnST3p597kkJZo,3474
 fossbill/templates/payment/invoice.html,sha256=x_SnaWn7dqUD3E4mq3UzdoeV63uNZlEL8TOz3imGCmc,1381
 fossbill/templates/product/create.html,sha256=Fa_7w6T_kFol9-HBv_JEBpeDCCE0TdVXAUjMJbHX_-o,1486
 fossbill/templates/product/index.html,sha256=lEboPcPsm3_k_sk0pVI07UYGPUtHa0LOVwugv0sMGak,2913
 fossbill/templates/product/update.html,sha256=Cx4EQMiWOKKpL1pljle568iPdXdUF3VOfzyXfTpj3H4,1548
 fossbill/templates/user/index.html,sha256=Q5vEfYR3WDc_F1r_vCCAfKRxfe3hIc-9l7du2uRdlJQ,3458
-fossbill-1.1.0.dist-info/LICENSE,sha256=DZak_2itbUtvHzD3E7GNUYSRK6jdOJ-GqncQ2weavLA,34523
-fossbill-1.1.0.dist-info/METADATA,sha256=m1Nm3Mg0hs2SLG1_PvsWcooKP7CF4vzThugLaeE-1nw,232
-fossbill-1.1.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-fossbill-1.1.0.dist-info/top_level.txt,sha256=_3zpUgFKDVFDozmRBG8VdiIcs6h94lXOUIAg4g1Gur4,9
-fossbill-1.1.0.dist-info/RECORD,,
+fossbill-1.2.0.dist-info/LICENSE,sha256=DZak_2itbUtvHzD3E7GNUYSRK6jdOJ-GqncQ2weavLA,34523
+fossbill-1.2.0.dist-info/METADATA,sha256=jXNe0OShnpRhUknvortUBPMmLZiV_eazIXelIiuTifg,232
+fossbill-1.2.0.dist-info/WHEEL,sha256=AtBG6SXL3KF_v0NxLf0ehyVOh0cold-JbJYXNGorC6Q,92
+fossbill-1.2.0.dist-info/top_level.txt,sha256=_3zpUgFKDVFDozmRBG8VdiIcs6h94lXOUIAg4g1Gur4,9
+fossbill-1.2.0.dist-info/RECORD,,
```

