# Comparing `tmp/ant1Interface-0.0.7-py3-none-any.whl.zip` & `tmp/ant1Interface-0.0.9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,34 +1,34 @@
-Zip file size: 223209 bytes, number of entries: 62
--r-xr-xr-x  2.0 unx    32452 b- defN 23-May-10 19:10 __init__.py
--r-xr-xr-x  2.0 unx      360 b- defN 23-May-10 19:10 ant1/ant1Interface_env.sh
+Zip file size: 223243 bytes, number of entries: 62
+-r-xr-xr-x  2.0 unx    32452 b- defN 23-May-10 20:12 __init__.py
+-r-xr-xr-x  2.0 unx      360 b- defN 23-May-10 20:12 ant1/ant1Interface_env.sh
 -rw-r--r--  2.0 unx     5146 b- defN 23-Mar-21 10:40 ant1/catch_all.py
--rw-r--r--  2.0 unx    13674 b- defN 23-May-10 17:42 ant1/decoder.py
+-rw-r--r--  2.0 unx    13777 b- defN 23-May-10 20:07 ant1/decoder.py
 -rw-r--r--  2.0 unx      722 b- defN 22-Dec-19 14:12 ant1/demo.py
 -rw-r--r--  2.0 unx     3680 b- defN 23-Mar-01 16:18 ant1/dst.py
 -rw-r--r--  2.0 unx     3060 b- defN 23-Mar-27 15:21 ant1/query_handler.py
 -rw-r--r--  2.0 unx        0 b- defN 22-Dec-09 15:43 ant1/ranker.py
--rw-r--r--  2.0 unx    17867 b- defN 23-May-10 18:03 ant1/util.py
--r-xr-xr-x  2.0 unx   155690 b- defN 23-May-10 19:10 bot/interface/interface_pb2.py
--r-xr-xr-x  2.0 unx   122753 b- defN 23-May-10 19:10 bot/interface/model_context_pb2.py
--r-xr-xr-x  2.0 unx   101780 b- defN 23-May-10 19:10 bot/interface/slot_pb2.py
--r-xr-xr-x  2.0 unx    17321 b- defN 23-May-10 19:10 bot/interface/user_pb2.py
+-rw-r--r--  2.0 unx    17920 b- defN 23-May-10 19:29 ant1/util.py
+-r-xr-xr-x  2.0 unx   155690 b- defN 23-May-10 20:12 bot/interface/interface_pb2.py
+-r-xr-xr-x  2.0 unx   122753 b- defN 23-May-10 20:12 bot/interface/model_context_pb2.py
+-r-xr-xr-x  2.0 unx   101780 b- defN 23-May-10 20:12 bot/interface/slot_pb2.py
+-r-xr-xr-x  2.0 unx    17321 b- defN 23-May-10 20:12 bot/interface/user_pb2.py
 -rw-r--r--  2.0 unx      150 b- defN 20-Jun-03 04:17 python/google/__init__.py
 -rw-r--r--  2.0 unx     1891 b- defN 20-Jun-03 04:17 python/google/protobuf/__init__.py
--r-xr-xr-x  2.0 unx     2728 b- defN 23-May-10 19:10 python/google/protobuf/any_pb2.py
--r-xr-xr-x  2.0 unx    11836 b- defN 23-May-10 19:10 python/google/protobuf/api_pb2.py
+-r-xr-xr-x  2.0 unx     2728 b- defN 23-May-10 20:12 python/google/protobuf/any_pb2.py
+-r-xr-xr-x  2.0 unx    11836 b- defN 23-May-10 20:12 python/google/protobuf/api_pb2.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Jun-03 04:17 python/google/protobuf/compiler/__init__.py
--r-xr-xr-x  2.0 unx    13096 b- defN 23-May-10 19:10 python/google/protobuf/compiler/plugin_pb2.py
+-r-xr-xr-x  2.0 unx    13096 b- defN 23-May-10 20:12 python/google/protobuf/compiler/plugin_pb2.py
 -rw-r--r--  2.0 unx    44328 b- defN 20-Jun-03 04:17 python/google/protobuf/descriptor.py
 -rw-r--r--  2.0 unx     6820 b- defN 20-Jun-03 04:17 python/google/protobuf/descriptor_database.py
--r-xr-xr-x  2.0 unx   101533 b- defN 23-May-10 19:10 python/google/protobuf/descriptor_pb2.py
+-r-xr-xr-x  2.0 unx   101533 b- defN 23-May-10 20:12 python/google/protobuf/descriptor_pb2.py
 -rw-r--r--  2.0 unx    46541 b- defN 20-Jun-03 04:17 python/google/protobuf/descriptor_pool.py
--r-xr-xr-x  2.0 unx     2828 b- defN 23-May-10 19:10 python/google/protobuf/duration_pb2.py
--r-xr-xr-x  2.0 unx     1885 b- defN 23-May-10 19:10 python/google/protobuf/empty_pb2.py
--r-xr-xr-x  2.0 unx     2437 b- defN 23-May-10 19:10 python/google/protobuf/field_mask_pb2.py
+-r-xr-xr-x  2.0 unx     2828 b- defN 23-May-10 20:12 python/google/protobuf/duration_pb2.py
+-r-xr-xr-x  2.0 unx     1885 b- defN 23-May-10 20:12 python/google/protobuf/empty_pb2.py
+-r-xr-xr-x  2.0 unx     2437 b- defN 23-May-10 20:12 python/google/protobuf/field_mask_pb2.py
 -rw-r--r--  2.0 unx     1631 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/__init__.py
 -rwxr-xr--  2.0 unx    15500 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/_parameterized.py
 -rw-r--r--  2.0 unx     6495 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/api_implementation.py
 -rw-r--r--  2.0 unx    25334 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/containers.py
 -rw-r--r--  2.0 unx    38117 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/decoder.py
 -rw-r--r--  2.0 unx    28587 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/encoder.py
 -rw-r--r--  2.0 unx     4040 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/enum_type_wrapper.py
@@ -45,20 +45,20 @@
 -rw-r--r--  2.0 unx     6653 b- defN 20-Jun-03 04:17 python/google/protobuf/message_factory.py
 -rw-r--r--  2.0 unx     5202 b- defN 20-Jun-03 04:17 python/google/protobuf/proto_builder.py
 -rw-r--r--  2.0 unx      150 b- defN 20-Jun-03 04:17 python/google/protobuf/pyext/__init__.py
 -rw-r--r--  2.0 unx     2851 b- defN 20-Jun-03 04:17 python/google/protobuf/pyext/cpp_message.py
 -rw-r--r--  2.0 unx     3779 b- defN 20-Jun-03 04:17 python/google/protobuf/reflection.py
 -rw-r--r--  2.0 unx     9146 b- defN 20-Jun-03 04:17 python/google/protobuf/service.py
 -rw-r--r--  2.0 unx    11592 b- defN 20-Jun-03 04:17 python/google/protobuf/service_reflection.py
--r-xr-xr-x  2.0 unx     2525 b- defN 23-May-10 19:10 python/google/protobuf/source_context_pb2.py
--r-xr-xr-x  2.0 unx    11580 b- defN 23-May-10 19:10 python/google/protobuf/struct_pb2.py
+-r-xr-xr-x  2.0 unx     2525 b- defN 23-May-10 20:12 python/google/protobuf/source_context_pb2.py
+-r-xr-xr-x  2.0 unx    11580 b- defN 23-May-10 20:12 python/google/protobuf/struct_pb2.py
 -rw-r--r--  2.0 unx     6944 b- defN 20-Jun-03 04:17 python/google/protobuf/symbol_database.py
 -rw-r--r--  2.0 unx     4855 b- defN 20-Jun-03 04:17 python/google/protobuf/text_encoding.py
 -rw-r--r--  2.0 unx    61049 b- defN 20-Jun-03 04:17 python/google/protobuf/text_format.py
--r-xr-xr-x  2.0 unx     2848 b- defN 23-May-10 19:10 python/google/protobuf/timestamp_pb2.py
--r-xr-xr-x  2.0 unx    25207 b- defN 23-May-10 19:10 python/google/protobuf/type_pb2.py
+-r-xr-xr-x  2.0 unx     2848 b- defN 23-May-10 20:12 python/google/protobuf/timestamp_pb2.py
+-r-xr-xr-x  2.0 unx    25207 b- defN 23-May-10 20:12 python/google/protobuf/type_pb2.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Jun-03 04:17 python/google/protobuf/util/__init__.py
--r-xr-xr-x  2.0 unx    12436 b- defN 23-May-10 19:10 python/google/protobuf/wrappers_pb2.py
-?rw-------  2.0 unx       91 b- defN 23-May-10 19:10 ant1Interface-0.0.7.dist-info/WHEEL
-?rw-------  2.0 unx     1018 b- defN 23-May-10 19:10 ant1Interface-0.0.7.dist-info/METADATA
-?rw-------  2.0 unx     5771 b- defN 23-May-10 19:10 ant1Interface-0.0.7.dist-info/RECORD
-62 files, 1180248 bytes uncompressed, 213923 bytes compressed:  81.9%
+-r-xr-xr-x  2.0 unx    12436 b- defN 23-May-10 20:12 python/google/protobuf/wrappers_pb2.py
+?rw-------  2.0 unx       91 b- defN 23-May-10 20:12 ant1Interface-0.0.9.dist-info/WHEEL
+?rw-------  2.0 unx     1018 b- defN 23-May-10 20:12 ant1Interface-0.0.9.dist-info/METADATA
+?rw-------  2.0 unx     5771 b- defN 23-May-10 20:12 ant1Interface-0.0.9.dist-info/RECORD
+62 files, 1180404 bytes uncompressed, 213957 bytes compressed:  81.9%
```

## zipnote {}

```diff
@@ -171,17 +171,17 @@
 
 Filename: python/google/protobuf/util/__init__.py
 Comment: 
 
 Filename: python/google/protobuf/wrappers_pb2.py
 Comment: 
 
-Filename: ant1Interface-0.0.7.dist-info/WHEEL
+Filename: ant1Interface-0.0.9.dist-info/WHEEL
 Comment: 
 
-Filename: ant1Interface-0.0.7.dist-info/METADATA
+Filename: ant1Interface-0.0.9.dist-info/METADATA
 Comment: 
 
-Filename: ant1Interface-0.0.7.dist-info/RECORD
+Filename: ant1Interface-0.0.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ant1/ant1Interface_env.sh

```diff
@@ -1,4 +1,4 @@
 # This script should be sourced by the shell with the pythonenvironment where the adabrain wheel package is installed.
 
 ADABRAIN_INSTALL_PATH="$(python -m pip show ant1Interface | grep ^Location: | cut -d ' ' -f 2)"
-export PYTHONPATH=${ADABRAIN_INSTALL_PATH}/:${ADABRAIN_INSTALL_PATH}/adabrain/common/interface/ant1:${ADABRAIN_INSTALL_PATH}/python:$PYTHONPATH
+export PYTHONPATH=${ADABRAIN_INSTALL_PATH}/:${ADABRAIN_INSTALL_PATH}/python:${ADABRAIN_INSTALL_PATH}/adabrain/common/interface/ant1:$PYTHONPATH
```

## ant1/decoder.py

```diff
@@ -88,14 +88,15 @@
             self._parse_input(input_json)
         try:
             if self._input_proto_type == RemoteDecoderInput:
                 return {"domain": self._input_proto.expected_domain, "intent": self._input_proto.expected_intent}
             else:
                 # TODO: ModelContext中的expected domain和intent
                 self.logger.info("ModelServiceInput does not support expected domain and intent")
+                return {"domain": "", "intent": ""}
         except Exception as e:
             print(e)
             self.logger.exception(f"fail to get expected domain and intent from {self._input_proto}")
         return {}
             
     def request_expected_slots(self, input_json: str) -> Dict:
         if self._input_proto is None:
@@ -226,14 +227,15 @@
     def set_hyp(
         self,
         intent, 
         domain,
         slots=[], 
         params={}, 
         hyp_knowledge={}, 
+        knowledge_is_json=True,
         intent_confidence=1.0, 
         domain_confidence=1.0
     ):
         if not intent or not domain:
             self.logger.info("intent and domain must not be empty")
             return -1
         try:
@@ -257,15 +259,15 @@
                         slot_proto.value = slot["value"]
                     else:
                         raise ValueError(f"value in slot can only be list or string")
                     slot_proto.id = slot["id"]
                     slot_proto.confidence = slot.get("confidence", 1.0)
                 # wrap knowledge    
                 if hyp_knowledge:
-                    knowledge = ProtoWrapper.wrap_knowledge(hyp_knowledge)
+                    knowledge = ProtoWrapper.wrap_knowledge(hyp_knowledge, knowledge_is_json)
                     intent_hyp.knowledge.CopyFrom(knowledge)
                 # set params
                 if params:
                     for k, v in params.items():
                         intent_hyp.params[k] = v
             else:
                 ModelContextParser.set_hyp(intent, domain, self._output_proto, slots, params,
```

## ant1/util.py

```diff
@@ -410,14 +410,15 @@
         cls, 
         intent, 
         domain,
         output_proto, 
         slots=[], 
         params={}, 
         hyp_knowledge={}, 
+        knowledge_is_json = True,
         intent_confidence=1.0, 
         domain_confidence=1.0
     ):
         try:
             intent_hyp = IntentHyp()
             if not domain or not intent:
                 raise ValueError("domain and intent should not be empty")
@@ -428,15 +429,15 @@
             # wrap slots
             if len(slots) > 0:
                 for slot in slots:
                     slot_proto = ProtoWrapper.wrap_slot(slot)
                     intent_hyp.slots.append(slot_proto)
             # wrap knowledge
             if hyp_knowledge:
-                knowledge = ProtoWrapper.wrap_knowledge(hyp_knowledge)
+                knowledge = ProtoWrapper.wrap_knowledge(hyp_knowledge, knowledge_is_json)
                 intent_hyp.knowledge.CopyFrom(knowledge)
             # set params
             if params:
                 for k, v in params.items():
                     intent_hyp.params[k] = v
             output_proto.model_context.decoder_result.hyps.append(intent_hyp)
         except Exception as e:
```

## Comparing `ant1Interface-0.0.7.dist-info/RECORD` & `ant1Interface-0.0.9.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 __init__.py,sha256=h9jch2pS86y4R36pKRS3LOYUCVFNIJMRwjZ4fJDtJ44,32452
-ant1/ant1Interface_env.sh,sha256=z3wgj480hz1DL-A681HKUGC8wIHsueTWN4yMBLHjzTM,360
+ant1/ant1Interface_env.sh,sha256=uQi2CkQsDk_2F9DLeY6qG7yxWjG8AF6k-1pCGweOrDs,360
 ant1/catch_all.py,sha256=UQU37vYjtPtw07irDQgyW8lzUMJ-s9c7H5X__ClLh6U,5146
-ant1/decoder.py,sha256=TrNEgSTk72ORO4dbhCS4rAxiHWg5WFTf3-McMLKtTlM,13674
+ant1/decoder.py,sha256=VfywsqjmWTrpSWVOQHEw_YaUP-i5CFLI0CvhiOQ7Skc,13777
 ant1/demo.py,sha256=7EKHWgl3qoqsm1e1jmLppQxUr66noDpD1PQXEzAm2uQ,722
 ant1/dst.py,sha256=E31JsW4qye3DD_QPrZziHOAF9Wvhi8XNvGZk-EfCVIk,3680
 ant1/query_handler.py,sha256=zwUxjRYYCSI7WxovllovBLUYExPQD0Gm4e-ABUJhp-M,3060
 ant1/ranker.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-ant1/util.py,sha256=1a7AK-uUF5gJRTyK8X8Un8b4k12mVY21VwX5DtmOXzE,17867
-ant1Interface-0.0.7.dist-info/METADATA,sha256=2z9AnSat3ThFIIJ2r-SWFurNxDj6ntvJJkHwRiDCn_0,1018
-ant1Interface-0.0.7.dist-info/RECORD,,
-ant1Interface-0.0.7.dist-info/WHEEL,sha256=sobxWSyDDkdg_rinUth-jxhXHqoNqlmNMJY3aTZn2Us,91
+ant1/util.py,sha256=wF-6FYgbujRyUtvvvA2ioXm0hjryUSL_oJs1O8HuFbo,17920
+ant1Interface-0.0.9.dist-info/METADATA,sha256=Vk27pY-gny94tL7joh2yI0dmWvmJwByU2tRPaNkGUsQ,1018
+ant1Interface-0.0.9.dist-info/RECORD,,
+ant1Interface-0.0.9.dist-info/WHEEL,sha256=sobxWSyDDkdg_rinUth-jxhXHqoNqlmNMJY3aTZn2Us,91
 bot/interface/interface_pb2.py,sha256=0JGPROdtiSaqiDWQh4e5-HTneV1vCsARinRi2HYUsHk,155690
 bot/interface/model_context_pb2.py,sha256=LrVqARIMdXhv8rRzdAikkhMotfV7UJz_bKUfX-riClM,122753
 bot/interface/slot_pb2.py,sha256=edCH9E8YRi8m4BCl9_OB1DFwwYyQjG1GZGE55YuUB3A,101780
 bot/interface/user_pb2.py,sha256=Dnv3VyJb8oNGcLB2P_Wc_kiIc5QEp54Yl5D6CLD1VwY,17321
 python/google/__init__.py,sha256=8SXBh8YGxPXGDmFtR_n90wt5xWvc5CEp_L5Pn687VaU,150
 python/google/protobuf/__init__.py,sha256=JSAhUB5Xqs01GlvK1UfieMS0VhV-hv0ma-tCMyzX_ls,1891
 python/google/protobuf/any_pb2.py,sha256=wisu94JIzDISMelDvN8PtV0XQ91Y1QI877tAAIJ-8Hg,2728
```

