# Comparing `tmp/abjad-3.8.tar.gz` & `tmp/abjad-3.9.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "abjad-3.8.tar", last modified: Fri Apr  8 15:27:31 2022, max compression
+gzip compressed data, was "abjad-3.9.tar", last modified: Sun May  1 13:28:35 2022, max compression
```

## Comparing `abjad-3.8.tar` & `abjad-3.9.tar`

### file list

```diff
@@ -1,105 +1,105 @@
-drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-04-08 15:27:31.542152 abjad-3.8/
--rw-r--r--   0 trevor     (501) staff       (20)    35151 2022-04-06 13:13:10.000000 abjad-3.8/LICENSE
--rw-r--r--   0 trevor     (501) staff       (20)      164 2022-01-30 15:30:55.000000 abjad-3.8/MANIFEST.in
--rw-r--r--   0 trevor     (501) staff       (20)     3187 2022-04-08 15:27:31.542445 abjad-3.8/PKG-INFO
--rw-r--r--   0 trevor     (501) staff       (20)     2455 2022-04-08 14:38:22.000000 abjad-3.8/README.rst
-drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-04-08 15:27:31.526461 abjad-3.8/abjad/
--rw-r--r--   0 trevor     (501) staff       (20)    11024 2022-04-06 11:37:41.000000 abjad-3.8/abjad/__init__.py
--rw-r--r--   0 trevor     (501) staff       (20)       17 2022-03-21 12:04:40.000000 abjad-3.8/abjad/_indent.py
--rw-r--r--   0 trevor     (501) staff       (20)    16994 2022-04-06 11:37:41.000000 abjad-3.8/abjad/_inspect.py
--rw-r--r--   0 trevor     (501) staff       (20)     9879 2022-03-28 14:37:36.000000 abjad-3.8/abjad/_iterate.py
-drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-04-08 15:27:31.537471 abjad-3.8/abjad/_stylesheets/
--rw-r--r--   0 trevor     (501) staff       (20)     1387 2022-04-08 14:10:02.000000 abjad-3.8/abjad/_stylesheets/abjad-coloring.ily
--rw-r--r--   0 trevor     (501) staff       (20)     1370 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/abjad-make-music-functions.ily
--rw-r--r--   0 trevor     (501) staff       (20)    15895 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/abjad-metric-modulations.ily
--rw-r--r--   0 trevor     (501) staff       (20)     1112 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/abjad-metronome-marks.ily
--rw-r--r--   0 trevor     (501) staff       (20)      614 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/abjad-spanners.ily
--rw-r--r--   0 trevor     (501) staff       (20)     4845 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/abjad-text-spanner-line-styles.ily
--rw-r--r--   0 trevor     (501) staff       (20)      299 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/abjad.ily
--rw-r--r--   0 trevor     (501) staff       (20)      723 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/all-edo-markups-example.ily
--rw-r--r--   0 trevor     (501) staff       (20)      950 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/default-et-accidental-markups.ily
--rw-r--r--   0 trevor     (501) staff       (20)      990 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/ekmelos-edo-accidental-markups.ily
--rw-r--r--   0 trevor     (501) staff       (20)     2239 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/ekmelos-ji-accidental-markups.ily
--rw-r--r--   0 trevor     (501) staff       (20)     3042 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/fraction-accidental-markups.ily
--rw-r--r--   0 trevor     (501) staff       (20)     2134 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/general-et-accidental-markups.ily
--rw-r--r--   0 trevor     (501) staff       (20)      572 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/harmonic-series-layout.ily
--rw-r--r--   0 trevor     (501) staff       (20)      687 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/heji2-ji-accidental-markups.ily
--rw-r--r--   0 trevor     (501) staff       (20)     6991 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/markup-functions.ily
--rw-r--r--   0 trevor     (501) staff       (20)      941 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/nalesnik-slash.ily
--rw-r--r--   0 trevor     (501) staff       (20)     9233 2022-04-08 14:10:02.000000 abjad-3.8/abjad/_stylesheets/nalesnik-text-spanner-id.ily
--rw-r--r--   0 trevor     (501) staff       (20)     1878 2022-02-09 09:09:26.000000 abjad-3.8/abjad/_stylesheets/solomon-flared-hairpin-demo.ly
--rw-r--r--   0 trevor     (501) staff       (20)     9756 2022-04-08 14:10:02.000000 abjad-3.8/abjad/_stylesheets/solomon-flared-hairpin.ily
--rw-r--r--   0 trevor     (501) staff       (20)    15908 2022-04-06 11:37:41.000000 abjad-3.8/abjad/_update.py
--rw-r--r--   0 trevor     (501) staff       (20)      132 2022-04-08 14:38:22.000000 abjad-3.8/abjad/_version.py
--rw-r--r--   0 trevor     (501) staff       (20)    41298 2022-04-06 11:37:41.000000 abjad-3.8/abjad/bind.py
--rw-r--r--   0 trevor     (501) staff       (20)    26281 2022-04-06 11:37:41.000000 abjad-3.8/abjad/configuration.py
--rw-r--r--   0 trevor     (501) staff       (20)    20523 2022-02-14 10:01:14.000000 abjad-3.8/abjad/contextmanagers.py
--rw-r--r--   0 trevor     (501) staff       (20)     6475 2022-04-06 11:37:41.000000 abjad-3.8/abjad/contributions.py
--rw-r--r--   0 trevor     (501) staff       (20)     3318 2022-03-18 15:45:48.000000 abjad-3.8/abjad/cyclictuple.py
--rw-r--r--   0 trevor     (501) staff       (20)        5 2022-02-15 10:55:26.000000 abjad-3.8/abjad/deprecated.py
--rw-r--r--   0 trevor     (501) staff       (20)    76965 2022-03-18 07:39:06.000000 abjad-3.8/abjad/duration.py
--rw-r--r--   0 trevor     (501) staff       (20)    38846 2022-04-06 11:37:41.000000 abjad-3.8/abjad/dynamic.py
--rw-r--r--   0 trevor     (501) staff       (20)    14013 2022-02-22 15:53:56.000000 abjad-3.8/abjad/enumerate.py
--rw-r--r--   0 trevor     (501) staff       (20)      633 2022-03-18 07:39:06.000000 abjad-3.8/abjad/enums.py
--rw-r--r--   0 trevor     (501) staff       (20)      971 2022-01-30 15:30:55.000000 abjad-3.8/abjad/exceptions.py
-drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-04-08 15:27:31.538167 abjad-3.8/abjad/ext/
--rw-r--r--   0 trevor     (501) staff       (20)        0 2022-02-09 09:09:26.000000 abjad-3.8/abjad/ext/__init__.py
--rw-r--r--   0 trevor     (501) staff       (20)    14531 2022-03-21 12:04:40.000000 abjad-3.8/abjad/ext/sphinx.py
--rw-r--r--   0 trevor     (501) staff       (20)     6014 2022-04-06 11:37:41.000000 abjad-3.8/abjad/format.py
--rw-r--r--   0 trevor     (501) staff       (20)   154235 2022-04-08 11:59:23.000000 abjad-3.8/abjad/get.py
--rw-r--r--   0 trevor     (501) staff       (20)    11606 2022-02-13 09:56:52.000000 abjad-3.8/abjad/grace_corner_cases.py
--rw-r--r--   0 trevor     (501) staff       (20)    19071 2022-04-06 11:37:41.000000 abjad-3.8/abjad/illustrators.py
--rw-r--r--   0 trevor     (501) staff       (20)   191361 2022-04-06 11:37:41.000000 abjad-3.8/abjad/indicators.py
--rw-r--r--   0 trevor     (501) staff       (20)    87429 2022-04-06 11:37:41.000000 abjad-3.8/abjad/instruments.py
--rw-r--r--   0 trevor     (501) staff       (20)    32138 2022-03-15 14:04:00.000000 abjad-3.8/abjad/io.py
--rw-r--r--   0 trevor     (501) staff       (20)    32418 2022-03-15 14:04:00.000000 abjad-3.8/abjad/iterate.py
--rw-r--r--   0 trevor     (501) staff       (20)     9911 2022-04-06 11:37:41.000000 abjad-3.8/abjad/iterpitches.py
--rw-r--r--   0 trevor     (501) staff       (20)    64971 2022-04-06 11:37:41.000000 abjad-3.8/abjad/label.py
--rw-r--r--   0 trevor     (501) staff       (20)    16404 2022-04-06 11:37:41.000000 abjad-3.8/abjad/lilypondfile.py
--rw-r--r--   0 trevor     (501) staff       (20)     8895 2022-02-09 09:09:26.000000 abjad-3.8/abjad/lyconst.py
--rw-r--r--   0 trevor     (501) staff       (20)   248020 2022-03-18 07:39:06.000000 abjad-3.8/abjad/lyenv.py
--rw-r--r--   0 trevor     (501) staff       (20)    71947 2022-03-18 07:39:06.000000 abjad-3.8/abjad/lyproxy.py
--rw-r--r--   0 trevor     (501) staff       (20)    58321 2022-03-22 07:51:14.000000 abjad-3.8/abjad/makers.py
--rw-r--r--   0 trevor     (501) staff       (20)    30505 2022-03-15 14:04:00.000000 abjad-3.8/abjad/math.py
--rw-r--r--   0 trevor     (501) staff       (20)   106637 2022-04-06 11:37:41.000000 abjad-3.8/abjad/meter.py
--rw-r--r--   0 trevor     (501) staff       (20)    25395 2022-04-06 11:37:41.000000 abjad-3.8/abjad/metricmodulation.py
--rw-r--r--   0 trevor     (501) staff       (20)    80161 2022-04-06 10:51:51.000000 abjad-3.8/abjad/mutate.py
--rw-r--r--   0 trevor     (501) staff       (20)    30607 2022-04-06 11:37:41.000000 abjad-3.8/abjad/obgc.py
--rw-r--r--   0 trevor     (501) staff       (20)    26519 2022-03-30 13:02:50.000000 abjad-3.8/abjad/overrides.py
--rw-r--r--   0 trevor     (501) staff       (20)    62755 2022-03-18 15:45:48.000000 abjad-3.8/abjad/parentage.py
-drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-04-08 15:27:31.541626 abjad-3.8/abjad/parsers/
--rw-r--r--   0 trevor     (501) staff       (20)        0 2022-02-09 09:09:26.000000 abjad-3.8/abjad/parsers/__init__.py
--rw-r--r--   0 trevor     (501) staff       (20)     4384 2022-02-13 09:56:52.000000 abjad-3.8/abjad/parsers/base.py
--rw-r--r--   0 trevor     (501) staff       (20)     1019 2022-03-15 14:04:00.000000 abjad-3.8/abjad/parsers/parse.py
--rw-r--r--   0 trevor     (501) staff       (20)   222625 2022-04-06 11:37:41.000000 abjad-3.8/abjad/parsers/parser.py
--rw-r--r--   0 trevor     (501) staff       (20)    17124 2022-03-18 15:45:48.000000 abjad-3.8/abjad/parsers/reduced.py
--rw-r--r--   0 trevor     (501) staff       (20)    15848 2022-03-21 12:04:40.000000 abjad-3.8/abjad/parsers/scheme.py
--rw-r--r--   0 trevor     (501) staff       (20)    77318 2022-03-12 17:33:59.000000 abjad-3.8/abjad/pattern.py
--rw-r--r--   0 trevor     (501) staff       (20)    92828 2022-03-27 10:58:18.000000 abjad-3.8/abjad/pcollections.py
--rw-r--r--   0 trevor     (501) staff       (20)     6291 2022-03-21 12:04:40.000000 abjad-3.8/abjad/persist.py
--rw-r--r--   0 trevor     (501) staff       (20)   161246 2022-03-21 12:04:40.000000 abjad-3.8/abjad/pitch.py
--rw-r--r--   0 trevor     (501) staff       (20)        0 2022-04-08 08:26:45.000000 abjad-3.8/abjad/py.typed
--rw-r--r--   0 trevor     (501) staff       (20)    10334 2022-03-18 15:45:48.000000 abjad-3.8/abjad/ratio.py
--rw-r--r--   0 trevor     (501) staff       (20)    27267 2022-03-15 14:04:00.000000 abjad-3.8/abjad/rhythmtrees.py
--rw-r--r--   0 trevor     (501) staff       (20)   209834 2022-04-06 11:37:41.000000 abjad-3.8/abjad/score.py
--rw-r--r--   0 trevor     (501) staff       (20)   204693 2022-04-06 11:37:41.000000 abjad-3.8/abjad/select.py
--rw-r--r--   0 trevor     (501) staff       (20)    70642 2022-03-18 07:39:06.000000 abjad-3.8/abjad/sequence.py
--rw-r--r--   0 trevor     (501) staff       (20)    51364 2022-03-18 15:45:48.000000 abjad-3.8/abjad/setclass.py
--rw-r--r--   0 trevor     (501) staff       (20)    61079 2022-04-06 11:37:41.000000 abjad-3.8/abjad/spanners.py
--rw-r--r--   0 trevor     (501) staff       (20)    14599 2022-03-18 07:39:06.000000 abjad-3.8/abjad/string.py
--rw-r--r--   0 trevor     (501) staff       (20)    22588 2022-04-06 11:37:41.000000 abjad-3.8/abjad/tag.py
--rw-r--r--   0 trevor     (501) staff       (20)   164974 2022-04-06 11:37:41.000000 abjad-3.8/abjad/timespan.py
--rw-r--r--   0 trevor     (501) staff       (20)    12083 2022-04-06 11:37:41.000000 abjad-3.8/abjad/tweaks.py
--rw-r--r--   0 trevor     (501) staff       (20)     1009 2022-03-20 15:26:28.000000 abjad-3.8/abjad/typings.py
--rw-r--r--   0 trevor     (501) staff       (20)    25066 2022-03-15 14:04:00.000000 abjad-3.8/abjad/verticalmoment.py
--rw-r--r--   0 trevor     (501) staff       (20)    34294 2022-04-06 11:37:41.000000 abjad-3.8/abjad/wf.py
-drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-04-08 15:27:31.528545 abjad-3.8/abjad.egg-info/
--rw-r--r--   0 trevor     (501) staff       (20)     3187 2022-04-08 15:27:31.000000 abjad-3.8/abjad.egg-info/PKG-INFO
--rw-r--r--   0 trevor     (501) staff       (20)     2373 2022-04-08 15:27:31.000000 abjad-3.8/abjad.egg-info/SOURCES.txt
--rw-r--r--   0 trevor     (501) staff       (20)        1 2022-04-08 15:27:31.000000 abjad-3.8/abjad.egg-info/dependency_links.txt
--rw-r--r--   0 trevor     (501) staff       (20)      273 2022-04-08 15:27:31.000000 abjad-3.8/abjad.egg-info/requires.txt
--rw-r--r--   0 trevor     (501) staff       (20)        6 2022-04-08 15:27:31.000000 abjad-3.8/abjad.egg-info/top_level.txt
--rw-r--r--   0 trevor     (501) staff       (20)      163 2022-04-06 13:13:10.000000 abjad-3.8/conftest.py
--rw-r--r--   0 trevor     (501) staff       (20)      187 2022-04-06 13:13:10.000000 abjad-3.8/pytest.ini
--rw-r--r--   0 trevor     (501) staff       (20)       80 2022-04-08 15:27:31.543591 abjad-3.8/setup.cfg
--rwxr-xr-x   0 trevor     (501) staff       (20)     2809 2022-04-08 14:38:22.000000 abjad-3.8/setup.py
+drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-05-01 13:28:35.480425 abjad-3.9/
+-rw-r--r--   0 trevor     (501) staff       (20)    35151 2022-04-06 13:13:10.000000 abjad-3.9/LICENSE
+-rw-r--r--   0 trevor     (501) staff       (20)      164 2022-01-30 15:30:55.000000 abjad-3.9/MANIFEST.in
+-rw-r--r--   0 trevor     (501) staff       (20)     3229 2022-05-01 13:28:35.480546 abjad-3.9/PKG-INFO
+-rw-r--r--   0 trevor     (501) staff       (20)     2497 2022-05-01 13:02:02.000000 abjad-3.9/README.rst
+drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-05-01 13:28:35.469138 abjad-3.9/abjad/
+-rw-r--r--   0 trevor     (501) staff       (20)    10564 2022-04-15 06:09:17.000000 abjad-3.9/abjad/__init__.py
+-rw-r--r--   0 trevor     (501) staff       (20)    17024 2022-04-15 06:09:17.000000 abjad-3.9/abjad/_getlib.py
+-rw-r--r--   0 trevor     (501) staff       (20)       17 2022-04-15 06:09:17.000000 abjad-3.9/abjad/_indentlib.py
+-rw-r--r--   0 trevor     (501) staff       (20)     9896 2022-04-15 06:09:17.000000 abjad-3.9/abjad/_iterlib.py
+-rw-r--r--   0 trevor     (501) staff       (20)    15908 2022-04-15 06:09:17.000000 abjad-3.9/abjad/_updatelib.py
+-rw-r--r--   0 trevor     (501) staff       (20)      132 2022-05-01 13:02:02.000000 abjad-3.9/abjad/_version.py
+-rw-r--r--   0 trevor     (501) staff       (20)    41358 2022-05-01 11:32:56.000000 abjad-3.9/abjad/bind.py
+-rw-r--r--   0 trevor     (501) staff       (20)    26281 2022-04-06 11:37:41.000000 abjad-3.9/abjad/configuration.py
+-rw-r--r--   0 trevor     (501) staff       (20)    20532 2022-04-15 06:09:17.000000 abjad-3.9/abjad/contextmanagers.py
+-rw-r--r--   0 trevor     (501) staff       (20)     8350 2022-05-01 11:32:56.000000 abjad-3.9/abjad/contributions.py
+-rw-r--r--   0 trevor     (501) staff       (20)     3318 2022-03-18 15:45:48.000000 abjad-3.9/abjad/cyclictuple.py
+-rw-r--r--   0 trevor     (501) staff       (20)        5 2022-02-15 10:55:26.000000 abjad-3.9/abjad/deprecated.py
+-rw-r--r--   0 trevor     (501) staff       (20)    76965 2022-03-18 07:39:06.000000 abjad-3.9/abjad/duration.py
+-rw-r--r--   0 trevor     (501) staff       (20)    38846 2022-04-06 11:37:41.000000 abjad-3.9/abjad/dynamic.py
+-rw-r--r--   0 trevor     (501) staff       (20)    14013 2022-02-22 15:53:56.000000 abjad-3.9/abjad/enumerate.py
+-rw-r--r--   0 trevor     (501) staff       (20)      633 2022-04-22 13:51:20.000000 abjad-3.9/abjad/enums.py
+-rw-r--r--   0 trevor     (501) staff       (20)      971 2022-01-30 15:30:55.000000 abjad-3.9/abjad/exceptions.py
+drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-05-01 13:28:35.471994 abjad-3.9/abjad/ext/
+-rw-r--r--   0 trevor     (501) staff       (20)        0 2022-02-09 09:09:26.000000 abjad-3.9/abjad/ext/__init__.py
+-rw-r--r--   0 trevor     (501) staff       (20)    14614 2022-05-01 11:32:56.000000 abjad-3.9/abjad/ext/sphinx.py
+-rw-r--r--   0 trevor     (501) staff       (20)     7332 2022-05-01 11:32:56.000000 abjad-3.9/abjad/format.py
+-rw-r--r--   0 trevor     (501) staff       (20)   154214 2022-04-22 16:44:08.000000 abjad-3.9/abjad/get.py
+-rw-r--r--   0 trevor     (501) staff       (20)    11606 2022-02-13 09:56:52.000000 abjad-3.9/abjad/grace_corner_cases.py
+-rw-r--r--   0 trevor     (501) staff       (20)    19203 2022-05-01 11:32:56.000000 abjad-3.9/abjad/illustrators.py
+-rw-r--r--   0 trevor     (501) staff       (20)   191351 2022-05-01 11:32:56.000000 abjad-3.9/abjad/indicators.py
+-rw-r--r--   0 trevor     (501) staff       (20)    87429 2022-04-06 11:37:41.000000 abjad-3.9/abjad/instruments.py
+-rw-r--r--   0 trevor     (501) staff       (20)    32129 2022-05-01 11:48:11.000000 abjad-3.9/abjad/io.py
+-rw-r--r--   0 trevor     (501) staff       (20)    32418 2022-04-15 06:09:17.000000 abjad-3.9/abjad/iterate.py
+-rw-r--r--   0 trevor     (501) staff       (20)     9905 2022-04-15 06:09:17.000000 abjad-3.9/abjad/iterpitches.py
+-rw-r--r--   0 trevor     (501) staff       (20)    64969 2022-04-15 06:09:17.000000 abjad-3.9/abjad/label.py
+-rw-r--r--   0 trevor     (501) staff       (20)    16410 2022-04-15 06:09:17.000000 abjad-3.9/abjad/lilypondfile.py
+-rw-r--r--   0 trevor     (501) staff       (20)     8895 2022-02-09 09:09:26.000000 abjad-3.9/abjad/lyconst.py
+-rw-r--r--   0 trevor     (501) staff       (20)   248020 2022-03-18 07:39:06.000000 abjad-3.9/abjad/lyenv.py
+-rw-r--r--   0 trevor     (501) staff       (20)    71947 2022-03-18 07:39:06.000000 abjad-3.9/abjad/lyproxy.py
+-rw-r--r--   0 trevor     (501) staff       (20)    58305 2022-04-15 06:09:17.000000 abjad-3.9/abjad/makers.py
+-rw-r--r--   0 trevor     (501) staff       (20)    30505 2022-03-15 14:04:00.000000 abjad-3.9/abjad/math.py
+-rw-r--r--   0 trevor     (501) staff       (20)   106635 2022-04-15 06:09:17.000000 abjad-3.9/abjad/meter.py
+-rw-r--r--   0 trevor     (501) staff       (20)    25342 2022-04-15 06:09:17.000000 abjad-3.9/abjad/metricmodulation.py
+-rw-r--r--   0 trevor     (501) staff       (20)    80158 2022-05-01 11:32:56.000000 abjad-3.9/abjad/mutate.py
+-rw-r--r--   0 trevor     (501) staff       (20)    30610 2022-04-22 16:36:41.000000 abjad-3.9/abjad/obgc.py
+-rw-r--r--   0 trevor     (501) staff       (20)    26525 2022-04-15 06:09:17.000000 abjad-3.9/abjad/overrides.py
+-rw-r--r--   0 trevor     (501) staff       (20)    62755 2022-03-18 15:45:48.000000 abjad-3.9/abjad/parentage.py
+drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-05-01 13:28:35.474095 abjad-3.9/abjad/parsers/
+-rw-r--r--   0 trevor     (501) staff       (20)        0 2022-02-09 09:09:26.000000 abjad-3.9/abjad/parsers/__init__.py
+-rw-r--r--   0 trevor     (501) staff       (20)     4384 2022-02-13 09:56:52.000000 abjad-3.9/abjad/parsers/base.py
+-rw-r--r--   0 trevor     (501) staff       (20)     1019 2022-03-15 14:04:00.000000 abjad-3.9/abjad/parsers/parse.py
+-rw-r--r--   0 trevor     (501) staff       (20)   222631 2022-05-01 11:32:56.000000 abjad-3.9/abjad/parsers/parser.py
+-rw-r--r--   0 trevor     (501) staff       (20)    17124 2022-04-15 06:09:17.000000 abjad-3.9/abjad/parsers/reduced.py
+-rw-r--r--   0 trevor     (501) staff       (20)    15848 2022-03-21 12:04:40.000000 abjad-3.9/abjad/parsers/scheme.py
+-rw-r--r--   0 trevor     (501) staff       (20)    77318 2022-03-12 17:33:59.000000 abjad-3.9/abjad/pattern.py
+-rw-r--r--   0 trevor     (501) staff       (20)    92828 2022-03-27 10:58:18.000000 abjad-3.9/abjad/pcollections.py
+-rw-r--r--   0 trevor     (501) staff       (20)     6291 2022-03-21 12:04:40.000000 abjad-3.9/abjad/persist.py
+-rw-r--r--   0 trevor     (501) staff       (20)   161246 2022-03-21 12:04:40.000000 abjad-3.9/abjad/pitch.py
+-rw-r--r--   0 trevor     (501) staff       (20)        0 2022-04-08 08:26:45.000000 abjad-3.9/abjad/py.typed
+-rw-r--r--   0 trevor     (501) staff       (20)    10334 2022-03-18 15:45:48.000000 abjad-3.9/abjad/ratio.py
+-rw-r--r--   0 trevor     (501) staff       (20)    27267 2022-03-15 14:04:00.000000 abjad-3.9/abjad/rhythmtrees.py
+drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-05-01 13:28:35.480155 abjad-3.9/abjad/scm/
+-rw-r--r--   0 trevor     (501) staff       (20)     1387 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/abjad-coloring.ily
+-rw-r--r--   0 trevor     (501) staff       (20)     1370 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/abjad-make-music-functions.ily
+-rw-r--r--   0 trevor     (501) staff       (20)    15895 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/abjad-metric-modulations.ily
+-rw-r--r--   0 trevor     (501) staff       (20)     1112 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/abjad-metronome-marks.ily
+-rw-r--r--   0 trevor     (501) staff       (20)      614 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/abjad-spanners.ily
+-rw-r--r--   0 trevor     (501) staff       (20)     4845 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/abjad-text-spanner-line-styles.ily
+-rw-r--r--   0 trevor     (501) staff       (20)      299 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/abjad.ily
+-rw-r--r--   0 trevor     (501) staff       (20)      723 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/all-edo-markups-example.ily
+-rw-r--r--   0 trevor     (501) staff       (20)      950 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/default-et-accidental-markups.ily
+-rw-r--r--   0 trevor     (501) staff       (20)      990 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/ekmelos-edo-accidental-markups.ily
+-rw-r--r--   0 trevor     (501) staff       (20)     2239 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/ekmelos-ji-accidental-markups.ily
+-rw-r--r--   0 trevor     (501) staff       (20)     3042 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/fraction-accidental-markups.ily
+-rw-r--r--   0 trevor     (501) staff       (20)     2134 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/general-et-accidental-markups.ily
+-rw-r--r--   0 trevor     (501) staff       (20)      572 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/harmonic-series-layout.ily
+-rw-r--r--   0 trevor     (501) staff       (20)      687 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/heji2-ji-accidental-markups.ily
+-rw-r--r--   0 trevor     (501) staff       (20)     6991 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/markup-functions.ily
+-rw-r--r--   0 trevor     (501) staff       (20)      941 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/nalesnik-slash.ily
+-rw-r--r--   0 trevor     (501) staff       (20)     9233 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/nalesnik-text-spanner-id.ily
+-rw-r--r--   0 trevor     (501) staff       (20)     1878 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/solomon-flared-hairpin-demo.ly
+-rw-r--r--   0 trevor     (501) staff       (20)     9756 2022-05-01 11:48:11.000000 abjad-3.9/abjad/scm/solomon-flared-hairpin.ily
+-rw-r--r--   0 trevor     (501) staff       (20)   214122 2022-05-01 11:32:56.000000 abjad-3.9/abjad/score.py
+-rw-r--r--   0 trevor     (501) staff       (20)   205084 2022-05-01 11:32:56.000000 abjad-3.9/abjad/select.py
+-rw-r--r--   0 trevor     (501) staff       (20)    70642 2022-04-14 12:04:05.000000 abjad-3.9/abjad/sequence.py
+-rw-r--r--   0 trevor     (501) staff       (20)    51364 2022-03-18 15:45:48.000000 abjad-3.9/abjad/setclass.py
+-rw-r--r--   0 trevor     (501) staff       (20)    61043 2022-04-22 07:28:56.000000 abjad-3.9/abjad/spanners.py
+-rw-r--r--   0 trevor     (501) staff       (20)    14599 2022-03-18 07:39:06.000000 abjad-3.9/abjad/string.py
+-rw-r--r--   0 trevor     (501) staff       (20)    22298 2022-05-01 11:32:56.000000 abjad-3.9/abjad/tag.py
+-rw-r--r--   0 trevor     (501) staff       (20)   164974 2022-04-06 11:37:41.000000 abjad-3.9/abjad/timespan.py
+-rw-r--r--   0 trevor     (501) staff       (20)    12083 2022-04-06 11:37:41.000000 abjad-3.9/abjad/tweaks.py
+-rw-r--r--   0 trevor     (501) staff       (20)      712 2022-04-15 06:09:17.000000 abjad-3.9/abjad/typings.py
+-rw-r--r--   0 trevor     (501) staff       (20)    25066 2022-04-15 06:09:17.000000 abjad-3.9/abjad/verticalmoment.py
+-rw-r--r--   0 trevor     (501) staff       (20)    34283 2022-04-15 06:09:17.000000 abjad-3.9/abjad/wf.py
+drwxr-xr-x   0 trevor     (501) staff       (20)        0 2022-05-01 13:28:35.471377 abjad-3.9/abjad.egg-info/
+-rw-r--r--   0 trevor     (501) staff       (20)     3229 2022-05-01 13:28:35.000000 abjad-3.9/abjad.egg-info/PKG-INFO
+-rw-r--r--   0 trevor     (501) staff       (20)     2198 2022-05-01 13:28:35.000000 abjad-3.9/abjad.egg-info/SOURCES.txt
+-rw-r--r--   0 trevor     (501) staff       (20)        1 2022-05-01 13:28:35.000000 abjad-3.9/abjad.egg-info/dependency_links.txt
+-rw-r--r--   0 trevor     (501) staff       (20)      273 2022-05-01 13:28:35.000000 abjad-3.9/abjad.egg-info/requires.txt
+-rw-r--r--   0 trevor     (501) staff       (20)        6 2022-05-01 13:28:35.000000 abjad-3.9/abjad.egg-info/top_level.txt
+-rw-r--r--   0 trevor     (501) staff       (20)      163 2022-04-06 13:13:10.000000 abjad-3.9/conftest.py
+-rw-r--r--   0 trevor     (501) staff       (20)      187 2022-04-06 13:13:10.000000 abjad-3.9/pytest.ini
+-rw-r--r--   0 trevor     (501) staff       (20)       80 2022-05-01 13:28:35.480955 abjad-3.9/setup.cfg
+-rwxr-xr-x   0 trevor     (501) staff       (20)     2809 2022-05-01 13:02:02.000000 abjad-3.9/setup.py
```

### Comparing `abjad-3.8/LICENSE` & `abjad-3.9/LICENSE`

 * *Files identical despite different names*

### Comparing `abjad-3.8/PKG-INFO` & `abjad-3.9/PKG-INFO`

 * *Files 4% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: abjad
-Version: 3.8
+Version: 3.9
 Summary: Abjad is a Python API for building LilyPond files.
 Home-page: https://abjad.github.io
 Author: Trevor Bača, Josiah Wolf Oberholtzer
 Author-email: trevor.baca@gmail.com, josiah.oberholtzer@gmail.com
 License: MIT
 Keywords: music composition,music notation,lilypond
 Platform: Any
@@ -14,15 +14,15 @@
 Classifier: Programming Language :: Python :: Implementation :: CPython
 Classifier: Topic :: Artistic Software
 Description-Content-Type: text/x-rst
 Provides-Extra: nauert
 Provides-Extra: rmakers
 License-File: LICENSE
 
-Abjad 3.8
+Abjad 3.9
 =========
 
 Abjad helps composers build up complex pieces of music notation in iterative and
 incremental ways. Use Abjad to create a symbolic representation of all the notes, rests,
 chords, tuplets, beams and slurs in any score. Because Abjad extends the Python
 programming language, you can use Abjad to make systematic changes to music as you work.
 Because Abjad wraps the LilyPond music notation package, you can use Abjad to control the
@@ -49,24 +49,26 @@
 Abjad requires Python 3.10 or later:
 
 ..  code-block::
 
     ~$ python --version
     Python 3.10.2
 
+Abjad requires LilyPond 2.23.6 or later.
+
 Make sure LilyPond is installed: http://lilypond.org/development.html
 
 Make sure LilyPond is callable from the commandline:
 
 ..  code-block::
 
     $ lilypond --version
-    GNU LilyPond 2.22.1
+    GNU LilyPond 2.23.8
 
-    Copyright (c) 1996--2021 by
+    Copyright (c) 1996--2022 by
     Han-Wen Nienhuys <hanwen@xs4all.nl>
     Jan Nieuwenhuizen <janneke@gnu.org>
     and others.
 
     This program is free software.  It is covered by the GNU General Public
     License and you are welcome to change it and/or distribute copies of it
     under certain conditions.  Invoke as `lilypond --warranty' for more
```

### Comparing `abjad-3.8/README.rst` & `abjad-3.9/README.rst`

 * *Files 10% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-Abjad 3.8
+Abjad 3.9
 =========
 
 Abjad helps composers build up complex pieces of music notation in iterative and
 incremental ways. Use Abjad to create a symbolic representation of all the notes, rests,
 chords, tuplets, beams and slurs in any score. Because Abjad extends the Python
 programming language, you can use Abjad to make systematic changes to music as you work.
 Because Abjad wraps the LilyPond music notation package, you can use Abjad to control the
@@ -29,24 +29,26 @@
 Abjad requires Python 3.10 or later:
 
 ..  code-block::
 
     ~$ python --version
     Python 3.10.2
 
+Abjad requires LilyPond 2.23.6 or later.
+
 Make sure LilyPond is installed: http://lilypond.org/development.html
 
 Make sure LilyPond is callable from the commandline:
 
 ..  code-block::
 
     $ lilypond --version
-    GNU LilyPond 2.22.1
+    GNU LilyPond 2.23.8
 
-    Copyright (c) 1996--2021 by
+    Copyright (c) 1996--2022 by
     Han-Wen Nienhuys <hanwen@xs4all.nl>
     Jan Nieuwenhuizen <janneke@gnu.org>
     and others.
 
     This program is free software.  It is covered by the GNU General Public
     License and you are welcome to change it and/or distribute copies of it
     under certain conditions.  Invoke as `lilypond --warranty' for more
```

### Comparing `abjad-3.8/abjad/__init__.py` & `abjad-3.9/abjad/__init__.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,25 +1,26 @@
 from quicktions import Fraction
 
 from . import (
-    _update,
+    _updatelib,
     deprecated,
     enumerate,
     format,
     get,
     illustrators,
     io,
     iterate,
     iterpitches,
     lyconst,
     lyenv,
     makers,
     mutate,
     persist,
     string,
+    typings,
     wf,
 )
 from ._version import __version__, __version_info__
 from .bind import Wrapper, annotate, attach, detach
 from .configuration import (
     Configuration,
     list_all_classes,
@@ -258,29 +259,14 @@
     text_spanner,
     tie,
     trill_spanner,
 )
 from .tag import Line, Tag, activate, deactivate
 from .timespan import OffsetCounter, Timespan, TimespanList
 from .tweaks import Bundle, Tweak, bundle, tweak
-from .typings import (
-    DurationSequenceTyping,
-    DurationTyping,
-    IntegerPair,
-    IntegerSequence,
-    Number,
-    NumberPair,
-    OffsetSequenceTyping,
-    OffsetTyping,
-    PatternTyping,
-    Prototype,
-    RatioSequenceTyping,
-    RatioTyping,
-    Strings,
-)
 from .verticalmoment import (
     VerticalMoment,
     iterate_leaf_pairs,
     iterate_pitch_pairs,
     iterate_vertical_moments,
 )
 
@@ -337,16 +323,14 @@
     "ContrabassFlute",
     "ContrabassSaxophone",
     "Contrabassoon",
     "CyclicTuple",
     "DOWN",
     "DrumNoteHead",
     "Duration",
-    "DurationSequenceTyping",
-    "DurationTyping",
     "Dynamic",
     "EnglishHorn",
     "EXACT",
     "Expression",
     "Fermata",
     "FilesystemState",
     "Flute",
@@ -359,15 +343,14 @@
     "Harp",
     "Harpsichord",
     "Horizontal",
     "ImpreciseMetronomeMarkError",
     "Infinity",
     "Instrument",
     "IntegerPair",
-    "IntegerSequence",
     "Interface",
     "Interval",
     "IntervalClass",
     "KeyCluster",
     "KeySignature",
     "LaissezVibrer",
     "Leaf",
@@ -425,37 +408,31 @@
     "PitchClassSet",
     "PitchSegment",
     "PitchSet",
     "Oboe",
     "Octave",
     "Offset",
     "OffsetCounter",
-    "OffsetSequenceTyping",
-    "OffsetTyping",
     "OnBeatGraceContainer",
     "Ottava",
     "OverrideInterface",
     "Parentage",
     "ParentageError",
     "Parser",
     "Pattern",
     "PatternTuple",
-    "PatternTyping",
     "Percussion",
     "PersistentIndicatorError",
     "Piano",
     "Piccolo",
     "Pitch",
     "PitchClass",
     "PitchRange",
     "ProgressIndicator",
-    "Prototype",
     "Ratio",
-    "RatioSequenceTyping",
-    "RatioTyping",
     "RedirectedStreams",
     "RehearsalMark",
     "Repeat",
     "RepeatTie",
     "Rest",
     "RIGHT",
     "SchemeParserFinishedError",
@@ -485,15 +462,14 @@
     "StopHairpin",
     "StopPhrasingSlur",
     "StopPianoPedal",
     "StopSlur",
     "StopTextSpan",
     "StopTrillSpan",
     "StringNumber",
-    "Strings",
     "Tag",
     "TemporaryDirectory",
     "TemporaryDirectoryChange",
     "TenorSaxophone",
     "TenorTrombone",
     "TenorVoice",
     "Tie",
@@ -517,15 +493,15 @@
     "Violin",
     "Voice",
     "WellformednessError",
     "Wrapper",
     "Xylophone",
     "__version__",
     "__version_info__",
-    "_update",
+    "_updatelib",
     "activate",
     "annotate",
     "attach",
     "beam",
     "bundle",
     "deactivate",
     "deprecated",
@@ -570,10 +546,11 @@
     "show",
     "slur",
     "string",
     "text_spanner",
     "tie",
     "trill_spanner",
     "tweak",
+    "typings",
     "wf",
     "yield_all_modules",
 ]
```

### Comparing `abjad-3.8/abjad/_inspect.py` & `abjad-3.9/abjad/_getlib.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,13 @@
 import bisect
 import collections
+import enum
 import typing
 
-from . import _update
+from . import _updatelib
 from . import duration as _duration
 from . import dynamic as _dynamic
 from . import exceptions as _exceptions
 from . import indicators as _indicators
 from . import instruments as _instruments
 from . import parentage as _parentage
 from . import pitch as _pitch
@@ -36,15 +37,15 @@
             same_logical_voice = False
         if not parentage.orphan and not same_logical_voice:
             return False
     return True
 
 
 def _get_annotation(component, annotation, default=None, unwrap: bool = True):
-    assert isinstance(annotation, str), repr(annotation)
+    assert isinstance(annotation, str | enum.Enum), repr(annotation)
     for wrapper in _get_annotation_wrappers(component):
         if wrapper.annotation == annotation:
             if unwrap is True:
                 # return wrapper.indicator
                 return wrapper.get_item()
             else:
                 return wrapper
@@ -99,15 +100,15 @@
             return _duration.Duration(result)
         raise _exceptions.MissingMetronomeMarkError
 
 
 def _get_effective(
     component, prototype, *, attributes=None, command=None, n=0, unwrap=True
 ):
-    _update._update_now(component, indicators=True)
+    _updatelib._update_now(component, indicators=True)
     candidate_wrappers = {}
     parentage = component._get_parentage()
     enclosing_voice_name = None
     for component_ in parentage:
         if isinstance(component_, _score.Voice):
             if (
                 enclosing_voice_name is not None
```

### Comparing `abjad-3.8/abjad/_iterate.py` & `abjad-3.9/abjad/_iterlib.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,20 +1,21 @@
 import collections
+import enum
 import typing
 
-from . import _inspect
+from . import _getlib
 from . import indicators as _indicators
 from . import score as _score
 from . import select as _select
 
 
 def _coerce_exclude(exclude):
     if exclude is None:
         exclude = ()
-    elif isinstance(exclude, str):
+    elif isinstance(exclude, str | enum.Enum):
         exclude = (exclude,)
     else:
         exclude = tuple(exclude)
     assert isinstance(exclude, tuple), repr(exclude)
     return exclude
 
 
@@ -91,16 +92,16 @@
                 do_not_iterate_grace_containers=do_not_iterate_grace_containers,
                 grace=grace,
                 reverse=reverse,
             )
         if isinstance(argument, prototype):
             if (
                 grace is None
-                or (grace is True and _inspect._get_grace_container(argument))
-                or (grace is False and not _inspect._get_grace_container(argument))
+                or (grace is True and _getlib._get_grace_container(argument))
+                or (grace is False and not _getlib._get_grace_container(argument))
             ):
                 if not _should_exclude(argument, exclude):
                     yield argument
         if (
             not do_not_iterate_grace_containers
             and grace is not False
             and after_grace_container
@@ -136,16 +137,16 @@
                 do_not_iterate_grace_containers=do_not_iterate_grace_containers,
                 grace=grace,
                 reverse=reverse,
             )
         if isinstance(argument, prototype):
             if (
                 grace is None
-                or (grace is True and _inspect._get_grace_container(argument))
-                or (grace is False and not _inspect._get_grace_container(argument))
+                or (grace is True and _getlib._get_grace_container(argument))
+                or (grace is False and not _getlib._get_grace_container(argument))
             ):
                 if not _should_exclude(argument, exclude):
                     yield argument
         if (
             not do_not_iterate_grace_containers
             and grace is not False
             and before_grace_container
@@ -222,18 +223,18 @@
 
 def _get_leaf(argument, n: int = 0):
     if n not in (-1, 0, 1):
         message = "n must be -1, 0 or 1:\n"
         message += f"   {repr(n)}"
         raise Exception(message)
     if isinstance(argument, _score.Leaf):
-        candidate = _inspect._get_sibling_with_graces(argument, n)
+        candidate = _getlib._get_sibling_with_graces(argument, n)
         if isinstance(candidate, _score.Leaf):
             return candidate
-        return _inspect._get_leaf_from_leaf(argument, n)
+        return _getlib._get_leaf_from_leaf(argument, n)
     if 0 <= n:
         reverse = False
     else:
         reverse = True
         n = abs(n) - 1
     leaves = _public_iterate_leaves(argument, reverse=reverse)
     for i, leaf in enumerate(leaves):
```

### Comparing `abjad-3.8/abjad/_stylesheets/abjad-coloring.ily` & `abjad-3.9/abjad/scm/abjad-coloring.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/abjad-make-music-functions.ily` & `abjad-3.9/abjad/scm/abjad-make-music-functions.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/abjad-metric-modulations.ily` & `abjad-3.9/abjad/scm/abjad-metric-modulations.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/abjad-metronome-marks.ily` & `abjad-3.9/abjad/scm/abjad-metronome-marks.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/abjad-spanners.ily` & `abjad-3.9/abjad/scm/abjad-spanners.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/abjad-text-spanner-line-styles.ily` & `abjad-3.9/abjad/scm/abjad-text-spanner-line-styles.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/all-edo-markups-example.ily` & `abjad-3.9/abjad/scm/all-edo-markups-example.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/default-et-accidental-markups.ily` & `abjad-3.9/abjad/scm/default-et-accidental-markups.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/ekmelos-edo-accidental-markups.ily` & `abjad-3.9/abjad/scm/ekmelos-edo-accidental-markups.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/ekmelos-ji-accidental-markups.ily` & `abjad-3.9/abjad/scm/ekmelos-ji-accidental-markups.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/fraction-accidental-markups.ily` & `abjad-3.9/abjad/scm/fraction-accidental-markups.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/general-et-accidental-markups.ily` & `abjad-3.9/abjad/scm/general-et-accidental-markups.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/harmonic-series-layout.ily` & `abjad-3.9/abjad/scm/harmonic-series-layout.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/heji2-ji-accidental-markups.ily` & `abjad-3.9/abjad/scm/heji2-ji-accidental-markups.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/markup-functions.ily` & `abjad-3.9/abjad/scm/markup-functions.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/nalesnik-slash.ily` & `abjad-3.9/abjad/scm/nalesnik-slash.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/nalesnik-text-spanner-id.ily` & `abjad-3.9/abjad/scm/nalesnik-text-spanner-id.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/solomon-flared-hairpin-demo.ly` & `abjad-3.9/abjad/scm/solomon-flared-hairpin-demo.ly`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_stylesheets/solomon-flared-hairpin.ily` & `abjad-3.9/abjad/scm/solomon-flared-hairpin.ily`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/_update.py` & `abjad-3.9/abjad/_updatelib.py`

 * *Files 1% similar despite different names*

```diff
@@ -6,15 +6,15 @@
     As a hint, the update manager implements a weird version of the "observer pattern."
     It may make sense to revisit a textbook example of the observer pattern and review
     the implementation of the update manager.
 
 """
 from . import duration as _duration
 from . import indicators as _indicators
-from . import iterate as iterate_
+from . import iterate as _iterate
 from . import math as _math
 from . import obgc as _obgc
 from . import parentage as _parentage
 from . import score as _score
 from . import sequence as _sequence
 from . import timespan as _timespan
 
@@ -148,16 +148,16 @@
     )
 
 
 def _iterate_entire_score(root):
     """
     NOTE: RETURNS GRACE NOTES LAST (AND OUT-OF-ORDER).
     """
-    components = list(iterate_.components(root, grace=False))
-    graces = iterate_.components(root, grace=True)
+    components = list(_iterate.components(root, grace=False))
+    graces = _iterate.components(root, grace=True)
     components.extend(graces)
     return components
 
 
 def _make_metronome_mark_map(root):
     pairs = []
     all_stop_offsets = set()
```

### Comparing `abjad-3.8/abjad/bind.py` & `abjad-3.9/abjad/bind.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,13 @@
 import copy
+import enum
 import importlib
 import typing
 
-from . import _inspect, _update
+from . import _getlib, _updatelib
 from . import duration as _duration
 from . import enums as _enums
 from . import exceptions as _exceptions
 from . import score as _score
 from . import tag as _tag
 from . import tweaks as _tweaks
 
@@ -80,27 +81,27 @@
         "_indicator",
         "_synthetic_offset",
         "_tag",
     )
 
     def __init__(
         self,
-        annotation: str = None,
+        annotation: str | enum.Enum | None = None,
         check_duplicate_indicator=False,
         component=None,
         context: str = None,
         deactivate: bool = False,
         direction: _enums.Vertical = None,
         indicator: typing.Any = None,
         synthetic_offset: int = None,
         tag: _tag.Tag = _tag.Tag(),
     ) -> None:
         assert not isinstance(indicator, type(self)), repr(indicator)
         if annotation is not None:
-            assert isinstance(annotation, str), repr(annotation)
+            assert isinstance(annotation, str | enum.Enum), repr(annotation)
         self._annotation = annotation
         if component is not None:
             assert isinstance(component, _score.Component), repr(component)
         self._component = component
         deactivate = bool(deactivate)
         if context is not None:
             assert isinstance(context, str), repr(context)
@@ -167,16 +168,16 @@
             >>> old_staff = abjad.Staff("c'4 d'4 e'4 f'4")
             >>> clef = abjad.Clef("alto")
             >>> abjad.attach(clef, old_staff[0], tag=abjad.Tag("RED:M1"))
             >>> string = abjad.lilypond(old_staff, tags=True)
             >>> print(string)
             \new Staff
             {
-                %! RED
                 %! M1
+                %! RED
                 \clef "alto"
                 c'4
                 d'4
                 e'4
                 f'4
             }
 
@@ -185,16 +186,16 @@
             Wrapper(annotation=None, context='Staff', deactivate=False, direction=None, indicator=Clef(name='alto', hide=False), synthetic_offset=None, tag=Tag(string='RED:M1'))
 
             >>> new_staff = abjad.mutate.copy(old_staff)
             >>> string = abjad.lilypond(new_staff, tags=True)
             >>> print(string)
             \new Staff
             {
-                %! RED
                 %! M1
+                %! RED
                 \clef "alto"
                 c'4
                 d'4
                 e'4
                 f'4
             }
 
@@ -213,16 +214,16 @@
             ...     deactivate=True,
             ...     tag=abjad.Tag("RED:M1"),
             ... )
             >>> string = abjad.lilypond(old_staff, tags=True)
             >>> print(string)
             \new Staff
             {
-                %! RED
                 %! M1
+                %! RED
                 %@% \clef "alto"
                 c'4
                 d'4
                 e'4
                 f'4
             }
 
@@ -231,16 +232,16 @@
             Wrapper(annotation=None, context='Staff', deactivate=True, direction=None, indicator=Clef(name='alto', hide=False), synthetic_offset=None, tag=Tag(string='RED:M1'))
 
             >>> new_staff = abjad.mutate.copy(old_staff)
             >>> string = abjad.lilypond(new_staff, tags=True)
             >>> print(string)
             \new Staff
             {
-                %! RED
                 %! M1
+                %! RED
                 %@% \clef "alto"
                 c'4
                 d'4
                 e'4
                 f'4
             }
 
@@ -374,15 +375,15 @@
                 if component.name == candidate.name:
                     candidate = component
                     break
         return candidate
 
     def _get_effective_context(self):
         if self.component is not None:
-            _update._update_now(self.component, indicators=True)
+            _updatelib._update_now(self.component, indicators=True)
         return self._effective_context
 
     def _unbind_component(self):
         if self._component is not None and self in self._component._wrappers:
             self._component._wrappers.remove(self)
         self._component = None
 
@@ -404,15 +405,15 @@
             return
         if isinstance(self.indicator, _tweaks.Bundle):
             indicator = self.indicator.indicator
         else:
             indicator = self.indicator
         prototype = type(indicator)
         command = getattr(indicator, "command", None)
-        wrapper = _inspect._get_effective(
+        wrapper = _getlib._get_effective(
             component,
             prototype,
             attributes={"command": command},
             unwrap=False,
         )
         wrapper_site = None
         if wrapper is not None:
@@ -451,29 +452,27 @@
         else:
             message += f" to {repr(wrapper.component)}"
             message += f" in {wrapper_context.name}."
         message += "\n"
         raise _exceptions.PersistentIndicatorError(message)
 
     @property
-    def annotation(self) -> str | None:
+    def annotation(self) -> str | enum.Enum | None:
         """
         Gets wrapper annotation.
 
         ..  container:: example
 
             >>> note = abjad.Note("c'4")
             >>> articulation = abjad.Articulation("accent")
             >>> abjad.attach(articulation, note, direction=abjad.UP)
             >>> wrapper = abjad.get.wrapper(note)
             >>> wrapper.annotation is None
             True
 
-        ..  container:: example
-
             >>> note = abjad.Note("c'4")
             >>> articulation = abjad.Articulation("accent")
             >>> abjad.annotate(note, "foo", articulation)
             >>> abjad.get.annotation(note, "foo")
             Articulation(name='accent')
 
         """
@@ -668,15 +667,15 @@
         99
 
     """
     if isinstance(annotation, _tag.Tag):
         message = "use the tag=None keyword instead of annotate():\n"
         message += f"   {repr(annotation)}"
         raise Exception(message)
-    assert isinstance(annotation, str), repr(annotation)
+    assert isinstance(annotation, str | enum.Enum), repr(annotation)
     Wrapper(annotation=annotation, component=component, indicator=indicator)
 
 
 def attach(  # noqa: 302
     attachable,
     target,
     check_duplicate_indicator=False,
@@ -807,19 +806,19 @@
 
         ..  docs::
 
             >>> string = abjad.lilypond(staff, tags=True)
             >>> print(string)
             \new Staff
             {
-                \clef "treble"
                 %! +PARTS
                 %@% \clef "alto"
                 %! +PARTS
                 %@% \clef "tenor"
+                \clef "treble"
                 c'4
                 d'4
                 e'4
                 f'4
             }
 
         Active indicator is always effective when competing inactive indicators are
@@ -924,27 +923,28 @@
             assert isinstance(result, list), repr(result)
             result = ["  " + _ for _ in result]
             message = f"{nonbundle_attachable!r}._attachment_test_all():"
             result.insert(0, message)
             message = "\n".join(result)
             raise Exception(message)
 
-    # HERE:
     prototype = (_score.AfterGraceContainer, _score.BeforeGraceContainer)
     if isinstance(nonbundle_attachable, prototype):
         if not hasattr(target, "written_duration"):
             raise Exception("grace containers attach to single leaf only.")
         nonbundle_attachable._attach(target)
         return
 
     assert isinstance(target, _score.Component), repr(target)
 
     if isinstance(target, _score.Container):
         acceptable = False
-        if isinstance(nonbundle_attachable, dict | str | _tag.Tag | Wrapper):
+        if isinstance(
+            nonbundle_attachable, dict | str | enum.Enum | _tag.Tag | Wrapper
+        ):
             acceptable = True
         if getattr(nonbundle_attachable, "_can_attach_to_containers", False):
             acceptable = True
         if not acceptable:
             message = f"can not attach {attachable!r} to containers: {target!r}"
             raise Exception(message)
     elif not isinstance(target, _score.Leaf):
```

### Comparing `abjad-3.8/abjad/configuration.py` & `abjad-3.9/abjad/configuration.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/contextmanagers.py` & `abjad-3.9/abjad/contextmanagers.py`

 * *Files 1% similar despite different names*

```diff
@@ -4,15 +4,15 @@
 import pathlib
 import shutil
 import subprocess
 import sys
 import tempfile
 import time
 
-from . import _update
+from . import _updatelib
 from . import configuration as _configuration
 from . import string as _string
 
 configuration = _configuration.Configuration()
 
 
 class ContextManager:
@@ -185,28 +185,28 @@
     def __enter__(self):
         """
         Enters context manager.
 
         Returns context manager.
         """
         if self.component is not None:
-            _update._update_now(self.component, offsets=True)
+            _updatelib._update_now(self.component, offsets=True)
             self.component._is_forbidden_to_update = True
         return self
 
     def __exit__(self, exc_type, exc_value, traceback):
         """
         Exits context manager.
 
         Returns none.
         """
         if self.component is not None:
             self.component._is_forbidden_to_update = False
             if self.update_on_exit:
-                _update._update_now(self.component, offsets=True)
+                _updatelib._update_now(self.component, offsets=True)
 
     ### PUBLIC PROPERTIES ###
 
     @property
     def component(self):
         """
         Gets component.
```

### Comparing `abjad-3.8/abjad/cyclictuple.py` & `abjad-3.9/abjad/cyclictuple.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/duration.py` & `abjad-3.9/abjad/duration.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/dynamic.py` & `abjad-3.9/abjad/dynamic.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/enumerate.py` & `abjad-3.9/abjad/enumerate.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/enums.py` & `abjad-3.9/abjad/enums.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/exceptions.py` & `abjad-3.9/abjad/exceptions.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/ext/sphinx.py` & `abjad-3.9/abjad/ext/sphinx.py`

 * *Files 1% similar despite different names*

```diff
@@ -19,14 +19,15 @@
 from sphinx.util import FilenameUniqDict, logging
 from sphinx.util.console import brown  # type: ignore
 from sphinx.util.nodes import set_source_info
 from sphinx.util.osutil import copyfile, ensuredir
 from uqbar.book.extensions import Extension
 from uqbar.strings import normalize
 
+from .. import format as _format
 from .. import lilypondfile as _lilypondfile
 from .. import tag as _tag
 from ..configuration import Configuration
 from ..contextmanagers import TemporaryDirectoryChange
 from ..illustrators import illustrate
 from ..io import Illustrator, LilyPondIO, Player
 
@@ -260,14 +261,15 @@
         else:
             illustration = illustrate(self.illustrable, **self.keywords)
         if self.kind == self.Kind.AUDIO:
             block = _lilypondfile.Block("midi")
             illustration["score"].items.append(block)
         illustration.lilypond_version_token = r'\version "2.19.83"'
         code = illustration._get_lilypond_format()
+        code = _format.remove_site_comments(code)
         code = _tag.remove_tags(code)
         node = self.lilypond_block(code, code)
         node["kind"] = self.kind.name.lower()
         node["no-trim"] = self.no_trim
         node["pages"] = self.pages
         node["with-columns"] = self.with_columns
         return [node]
```

### Comparing `abjad-3.8/abjad/format.py` & `abjad-3.9/abjad/format.py`

 * *Files 20% similar despite different names*

```diff
@@ -1,7 +1,8 @@
+from . import _indentlib
 from . import contributions as _contributions
 from . import enums as _enums
 from . import indicators as _indicators
 from . import overrides as _overrides
 
 
 def _get_context_setting_contributions(component, contributions):
@@ -123,28 +124,61 @@
 def format_component(component) -> str:
     """
     Formats ``component``.
     """
     strings = []
     contributions = _get_contributions_by_site(component)
     strings_ = component._format_absolute_before_site(contributions)
-    strings.extend(strings_)
+    if strings_:
+        strings.append(f"% {_contributions.Sites.ABSOLUTE_BEFORE.name}:")
+        strings.extend(strings_)
     strings_ = component._format_before_site(contributions)
-    strings.extend(strings_)
-    strings_ = component._format_open_brackets_site(contributions)
-    strings.extend(strings_)
+    if strings_:
+        strings.append(f"% {_contributions.Sites.BEFORE.name}:")
+        strings.extend(strings_)
+    if hasattr(component, "_format_open_brackets_site"):
+        strings_ = component._format_open_brackets_site(contributions)
+        if strings_:
+            strings.append(f"% {_contributions.Sites.OPEN_BRACKETS.name}:")
+            strings.extend(strings_)
     strings_ = component._format_opening_site(contributions)
-    strings.extend(strings_)
-    strings_ = component._format_contents_site(contributions)
-    strings.extend(strings_)
+    if strings_:
+        strings.append(f"% {_contributions.Sites.OPENING.name}:")
+        strings.extend(strings_)
+    strings_ = component._format_contents()
+    if strings_:
+        strings.extend(strings_)
     strings_ = component._format_closing_site(contributions)
-    strings.extend(strings_)
-    strings_ = component._format_close_brackets_site(contributions)
-    strings.extend(strings_)
+    if strings_:
+        strings.append(_indentlib.INDENT + f"% {_contributions.Sites.CLOSING.name}:")
+        strings.extend(strings_)
+    if hasattr(component, "_format_close_brackets"):
+        strings_ = component._format_close_brackets()
+        if strings_:
+            strings.append(f"% {_contributions.Sites.CLOSE_BRACKETS.name}:")
+            strings.extend(strings_)
     strings_ = component._format_after_site(contributions)
-    strings.extend(strings_)
+    if strings_:
+        strings.append(f"% {_contributions.Sites.AFTER.name}:")
+        strings.extend(strings_)
     strings_ = component._format_absolute_after_site(contributions)
-    strings.extend(strings_)
+    if strings_:
+        strings.append(f"% {_contributions.Sites.ABSOLUTE_AFTER.name}:")
+        strings.extend(strings_)
     assert all(isinstance(_, str) for _ in strings), repr(strings)
     strings = ["" if _.isspace() else _ for _ in strings]
     string = "\n".join(strings)
     return string
+
+
+def remove_site_comments(string) -> str:
+    """
+    Removes site comments from ``string``.
+    """
+    site_comments = []
+    for site in _contributions.Sites:
+        site_comments.append(f"% {site.name}:")
+    for type_ in _contributions.Types:
+        site_comments.append(f"% {type_.name}:")
+    lines = [_ for _ in string.split("\n") if _.strip() not in site_comments]
+    string = "\n".join(lines)
+    return string
```

### Comparing `abjad-3.8/abjad/get.py` & `abjad-3.9/abjad/get.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 import collections
 import typing
 
-from . import _inspect, _iterate, _update
+from . import _getlib, _iterlib, _updatelib
 from . import duration as _duration
 from . import indicators as _indicators
-from . import iterate as iterate_
+from . import iterate as _iterate
 from . import parentage as _parentage
 from . import pitch as _pitch
 from . import score as _score
 from . import select as _select
 from . import tag as _tag
 from . import timespan as _timespan
 from . import typings as _typings
@@ -168,17 +168,15 @@
         >>> abjad.get.effective(staff[2], prototype) is None
         True
 
         >>> abjad.get.effective(staff[3], prototype) is None
         True
 
     """
-    return _inspect._get_annotation(
-        argument, annotation, default=default, unwrap=unwrap
-    )
+    return _getlib._get_annotation(argument, annotation, default=default, unwrap=unwrap)
 
 
 def annotation_wrappers(argument):
     r"""
     Gets annotation wrappers.
 
     ..  container:: example
@@ -201,15 +199,15 @@
             }
 
         >>> for wrapper in abjad.get.annotation_wrappers(staff[0]): wrapper
         Wrapper(annotation='default_instrument', context=None, deactivate=False, direction=None, indicator=Cello(), synthetic_offset=None, tag=Tag(string=''))
         Wrapper(annotation='default_clef', context=None, deactivate=False, direction=None, indicator=Clef(name='tenor', hide=False), synthetic_offset=None, tag=Tag(string=''))
 
     """
-    return _inspect._get_annotation_wrappers(argument)
+    return _getlib._get_annotation_wrappers(argument)
 
 
 def bar_line_crossing(argument) -> bool:
     r"""
     Is true when ``argument`` crosses bar line.
 
     ..  container:: example
@@ -238,15 +236,15 @@
         Note("c'4") False
         Note("d'4") True
         Note("e'4") False
 
     """
     if not isinstance(argument, _score.Component):
         raise Exception("can only get indicator on component.")
-    time_signature = _inspect._get_effective(argument, _indicators.TimeSignature)
+    time_signature = _getlib._get_effective(argument, _indicators.TimeSignature)
     if time_signature is None:
         time_signature_duration = _duration.Duration(4, 4)
     else:
         time_signature_duration = time_signature.duration
     partial = getattr(time_signature, "partial", 0)
     partial = partial or 0
     start_offset = timespan(argument).start_offset
@@ -703,15 +701,15 @@
             Note("fs'16")
 
     """
     if isinstance(argument, _score.Component):
         argument = [argument]
     components = []
     for item in argument:
-        generator = _iterate._iterate_descendants(item)
+        generator = _iterlib._iterate_descendants(item)
         for component in generator:
             if component not in components:
                 components.append(component)
     return components
 
 
 def duration(
@@ -905,15 +903,15 @@
         ...     duration = abjad.get.duration(lt)
         ...     preprolated = abjad.get.duration(lt, preprolated=True)
         ...     lt, duration, preprolated
         (LogicalTie(items=[Note("c'4"), Note("c'4")]), Duration(1, 3), Duration(1, 2))
         (LogicalTie(items=[Note("d'4"), Note("d'4")]), Duration(1, 3), Duration(1, 2))
 
     """
-    return _inspect._get_duration(
+    return _getlib._get_duration(
         argument, in_seconds=in_seconds, preprolated=preprolated
     )
 
 
 def effective(
     argument,
     prototype: _typings.Prototype,
@@ -1413,15 +1411,15 @@
         (Note("f'2"), BarLine(abbreviation='||', site='after'))
 
     """
     if not isinstance(argument, _score.Component):
         raise Exception("can only get effective on components.")
     if attributes is not None:
         assert isinstance(attributes, dict), repr(attributes)
-    result = _inspect._get_effective(
+    result = _getlib._get_effective(
         argument, prototype, attributes=attributes, n=n, unwrap=unwrap
     )
     if result is None:
         result = default
     return result
 
 
@@ -1533,15 +1531,15 @@
             Staff("{ c'4 d'4 { { <e' g'>16 gs'16 a'16 as'16 } { e'4 } } f'4 }")
         Note("fs'16"):
             Staff("{ c'4 d'4 { { <e' g'>16 gs'16 a'16 as'16 } { e'4 } } f'4 }")
 
     """
     if not isinstance(argument, _score.Component):
         raise Exception("can only get effective staff on components.")
-    staff_change = _inspect._get_effective(argument, _indicators.StaffChange)
+    staff_change = _getlib._get_effective(argument, _indicators.StaffChange)
     if staff_change is not None:
         for component in argument._get_parentage():
             root = component
         effective_staff = root[staff_change.staff]
         return effective_staff
     for component in argument._get_parentage():
         if isinstance(component, _score.Staff):
@@ -1764,15 +1762,15 @@
         Voice("e'4", name='Music_Voice') False
         Note("e'4")                    False
         Note("f'4")                    False
         AfterGraceContainer("fs'16")   True
         Note("fs'16")                  True
 
     """
-    return _inspect._get_grace_container(argument)
+    return _getlib._get_grace_container(argument)
 
 
 def has_effective_indicator(
     argument,
     prototype: _typings.Prototype = None,
     *,
     attributes: dict = None,
@@ -1916,15 +1914,15 @@
         Note("ds'4")                   True
 
     """
     if not isinstance(argument, _score.Component):
         raise Exception("can only get effective indicator on component.")
     if attributes is not None:
         assert isinstance(attributes, dict), repr(attributes)
-    indicator = _inspect._get_effective(argument, prototype, attributes=attributes)
+    indicator = _getlib._get_effective(argument, prototype, attributes=attributes)
     return indicator is not None
 
 
 def has_indicator(
     argument,
     prototype: str | _typings.Prototype | None = None,
     *,
@@ -2265,15 +2263,15 @@
         Note("ds'4")                   None
 
     Raises exception when more than one indicator of ``prototype`` attach to
     ``argument``.
 
     Returns default when no indicator of ``prototype`` attaches to ``argument``.
     """
-    return _inspect._get_indicator(argument, prototype, default=default, unwrap=unwrap)
+    return _getlib._get_indicator(argument, prototype, default=default, unwrap=unwrap)
 
 
 def indicators(
     argument,
     prototype: _typings.Prototype = None,
     *,
     attributes: dict = None,
@@ -2707,15 +2705,15 @@
         ---
         previous leaf: Note("f'16")
         current leaf:  Note("ds'4")
         next leaf:     None
         ---
 
     """
-    return _iterate._get_leaf(argument, n=n)
+    return _iterlib._get_leaf(argument, n=n)
 
 
 def lineage(argument) -> "Lineage":
     r"""
     Gets lineage.
 
     ..  container:: example
@@ -3092,15 +3090,15 @@
 
         >>> abjad.get.logical_tie(staff[1])
         LogicalTie(items=[Note("c'4")])
 
     """
     if not isinstance(argument, _score.Leaf):
         raise Exception("can only get logical tie on leaf.")
-    leaves = _iterate._get_logical_tie_leaves(argument)
+    leaves = _iterlib._get_logical_tie_leaves(argument)
     return _select.LogicalTie(leaves)
 
 
 def markup(argument, *, direction: int = None) -> list[_indicators.Markup]:
     """
     Gets markup.
     """
@@ -3278,15 +3276,15 @@
         Note("d'16")                   1
         Note("f'16")                   1
         Note("ds'4")                   1
 
     """
     if not isinstance(argument, _score.Component):
         raise Exception("can only get measure number on component.")
-    _update._update_measure_numbers(argument)
+    _updatelib._update_measure_numbers(argument)
     assert isinstance(argument._measure_number, int)
     return argument._measure_number
 
 
 def parentage(argument) -> "_parentage.Parentage":
     r"""
     Gets parentage.
@@ -3633,15 +3631,15 @@
             NamedPitch("f'")
         AfterGraceContainer("fs'16")
             NamedPitch("fs'")
         Note("fs'16")
             NamedPitch("fs'")
 
     """
-    generator = iterate_.pitches(argument)
+    generator = _iterate.pitches(argument)
     return set(generator)
 
 
 def sounding_pitch(argument) -> _pitch.NamedPitch:
     r"""
     Gets sounding pitch of note.
 
@@ -3672,15 +3670,15 @@
         Note("e'8") NamedPitch("e''")
         Note("f'8") NamedPitch("f''")
         Note("g'8") NamedPitch("g''")
 
     """
     if not isinstance(argument, _score.Note):
         raise Exception("can only get sounding pitch of note.")
-    return _inspect._get_sounding_pitch(argument)
+    return _getlib._get_sounding_pitch(argument)
 
 
 def sounding_pitches(argument) -> set[_pitch.NamedPitch]:
     r"""
     Gets sounding pitches.
 
     ..  container:: example
@@ -3712,15 +3710,15 @@
             NamedPitch("d'''")
             NamedPitch("fs'''")
 
     """
     # TODO: extend to any non-none argument
     if not isinstance(argument, _score.Chord):
         raise Exception("can only get sounding pitches of chord.")
-    pitches = _inspect._get_sounding_pitches(argument)
+    pitches = _getlib._get_sounding_pitches(argument)
     return set(pitches)
 
 
 def sustained(argument) -> bool:
     r"""
     Is true when ``argument`` is sustained.
 
@@ -3930,15 +3928,15 @@
                 f'4
             }
 
         >>> abjad.get.timespan(staff[:3])
         Timespan(Offset((0, 1)), Offset((3, 4)))
 
     """
-    return _inspect._get_timespan(argument, in_seconds=in_seconds)
+    return _getlib._get_timespan(argument, in_seconds=in_seconds)
 
 
 def wrapper(
     argument,
     prototype: _typings.Prototype = None,
     *,
     attributes: dict = None,
```

### Comparing `abjad-3.8/abjad/grace_corner_cases.py` & `abjad-3.9/abjad/grace_corner_cases.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/illustrators.py` & `abjad-3.9/abjad/illustrators.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,16 +1,17 @@
 import copy
 import dataclasses
 
 from . import bind as _bind
 from . import duration as _duration
 from . import enums as _enums
+from . import format as _format
 from . import get as _get
 from . import indicators as _indicators
-from . import iterate as iterate_
+from . import iterate as _iterate
 from . import lilypondfile as _lilypondfile
 from . import makers as _makers
 from . import metricmodulation as _metricmodulation
 from . import overrides as _overrides
 from . import pcollections as _pcollections
 from . import pitch as _pitch
 from . import score as _score
@@ -83,15 +84,15 @@
         bass_staff.extend([start_note, stop_note])
         treble_staff.extend("s1 s1")
         bass_leaves = _select.leaves(bass_staff)
         _spanners.glissando(bass_leaves)
         _bind.attach(_indicators.StaffChange("Treble_Staff"), bass_staff[1])
         _bind.attach(_indicators.Clef("treble"), treble_staff[0])
         _bind.attach(_indicators.Clef("bass"), bass_staff[0])
-    for leaf in iterate_.leaves(score):
+    for leaf in _iterate.leaves(score):
         leaf.multiplier = (1, 4)
     _overrides.override(score).BarLine.stencil = False
     _overrides.override(score).SpanBar.stencil = False
     _overrides.override(score).Glissando.thickness = 2
     _overrides.override(score).TimeSignature.stencil = False
     lilypond_file = _lilypondfile.LilyPondFile([score])
     return lilypond_file
@@ -101,15 +102,15 @@
     named_pitches = [_pitch.NamedPitch(x) for x in segment]
     maker = _makers.NoteMaker()
     notes = maker(named_pitches, [1])
     score = make_piano_score(leaves=notes)
     _overrides.override(score).TimeSignature.stencil = False
     _overrides.override(score).BarLine.stencil = False
     _overrides.override(score).SpanBar.stencil = False
-    for leaf in iterate_.leaves(score):
+    for leaf in _iterate.leaves(score):
         leaf.multiplier = (1, 8)
     _overrides.override(score).Rest.transparent = True
     lilypond_file = _lilypondfile.LilyPondFile([score])
     return lilypond_file
 
 
 def _illustrate_pitch_set(set_):
@@ -245,24 +246,25 @@
             method = _class_to_method[key]
             break
     if method is None:
         raise Exception(f"can not illustrate objects of type {type(item)}.")
     return method(item, **keywords)
 
 
-def lilypond(argument, tags=False):
+def lilypond(argument, *, site_comments=False, tags=False):
     """
     Gets LilyPond format of ``argument``.
     """
     if not hasattr(argument, "_get_lilypond_format"):
         raise Exception(f"no LilyPond format defined for {argument!r}.")
     string = argument._get_lilypond_format()
-    if tags:
-        return string
-    string = _tag.remove_tags(string)
+    if site_comments is False:
+        string = _format.remove_site_comments(string)
+    if tags is False:
+        string = _tag.remove_tags(string)
     return string
 
 
 def make_piano_score(leaves=None, lowest_treble_pitch="B3"):
     r"""
     Makes piano score from ``leaves``.
```

### Comparing `abjad-3.8/abjad/indicators.py` & `abjad-3.9/abjad/indicators.py`

 * *Files 0% similar despite different names*

```diff
@@ -402,15 +402,15 @@
                 d'4
                 e'4
                 f'4
             }
 
     """
 
-    bend_amount: _typings.Number = -4
+    bend_amount: int | float = -4
 
     _site: typing.ClassVar[str] = "after"
     _time_orientation: typing.ClassVar[_enums.Horizontal] = _enums.RIGHT
     post_event: typing.ClassVar[bool] = True
 
     def _get_lilypond_format(self):
         return rf"- \bendAfter #'{self.bend_amount}"
@@ -2160,16 +2160,16 @@
         >>> abjad.show(staff) # doctest: +SKIP
 
         >>> string = abjad.lilypond(staff, tags=True)
         >>> print(string)
         \new Staff
         {
             c'4
-            %! RED
             %! M1
+            %! RED
             ^ \markup \italic Allegro
             d'4
             e'4
             f'4
         }
 
         Tagged markup can be deactivated:
@@ -2186,16 +2186,16 @@
         >>> abjad.show(staff) # doctest: +SKIP
 
         >>> string = abjad.lilypond(staff, tags=True)
         >>> print(string)
         \new Staff
         {
             c'4
-            %! RED
             %! M1
+            %! RED
             %@% ^ \markup \italic Allegro
             d'4
             e'4
             f'4
         }
 
     ..  container:: example
@@ -2212,16 +2212,16 @@
         ..  docs::
 
             >>> string = abjad.lilypond(staff)
             >>> print(string)
             \new Staff
             {
                 c'4
-                ^ \markup \italic Allegro
                 ^ \markup \italic "non troppo"
+                ^ \markup \italic Allegro
                 d'4
                 e'4
                 f'4
             }
 
     """
 
@@ -2499,15 +2499,15 @@
         (Note("c'4"), MetronomeMark(reference_duration=Duration(1, 4), units_per_minute=72, textual_indication=None, custom_markup=None, decimal=False, hide=False))
         (Note("d'4"), MetronomeMark(reference_duration=Duration(1, 4), units_per_minute=72, textual_indication=None, custom_markup=None, decimal=False, hide=False))
         (Note("e'4"), MetronomeMark(reference_duration=None, units_per_minute=None, textual_indication='Allegro', custom_markup=None, decimal=False, hide=True))
         (Note("f'4"), MetronomeMark(reference_duration=None, units_per_minute=None, textual_indication='Allegro', custom_markup=None, decimal=False, hide=True))
 
     """
 
-    reference_duration: _typings.DurationTyping | None = None
+    reference_duration: _typings.Duration | None = None
     units_per_minute: int | quicktions.Fraction = None
     textual_indication: str | None = None
     custom_markup: Markup | None = None
     decimal: bool | str = False
     hide: bool = False
 
     _site: typing.ClassVar[str] = "opening"
```

### Comparing `abjad-3.8/abjad/instruments.py` & `abjad-3.9/abjad/instruments.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/io.py` & `abjad-3.9/abjad/io.py`

 * *Files 0% similar despite different names*

```diff
@@ -151,15 +151,15 @@
             lilypond_file = _illustrators.illustrate(self.illustrable, **self.keywords)
         return lilypond_file._get_lilypond_format()
 
     def get_stylesheets_directories(self) -> list[pathlib.Path]:
         directories = []
         path = getattr(abjad, "__path__")
         abjad_path = pathlib.Path(path[0])
-        directory = abjad_path / "_stylesheets"
+        directory = abjad_path / "scm"
         directories.append(directory)
         if "sphinx_stylesheets_directory" in configuration:
             string = configuration["sphinx_stylesheets_directory"]
             for path in string.split(":"):
                 directory = pathlib.Path(path)
                 directories.append(directory)
         return directories
```

### Comparing `abjad-3.8/abjad/iterate.py` & `abjad-3.9/abjad/iterate.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 import typing
 
-from . import _iterate
+from . import _iterlib
 from . import duration as _duration
 from . import pcollections as _pcollections
 from . import pitch as _pitch
 from . import score as _score
 from . import select as _select
 
 
@@ -222,15 +222,15 @@
         Container("{ <e' g'>16 gs'16 a'16 as'16 } { e'4 }")
         Voice("e'4", name='Music_Voice')
         Note("e'4")
         Note("d'4")
         Note("c'4")
 
     """
-    return _iterate._public_iterate_components(
+    return _iterlib._public_iterate_components(
         argument,
         prototype,
         exclude=exclude,
         grace=grace,
         reverse=reverse,
     )
 
@@ -464,15 +464,15 @@
         >>> for leaf in abjad.iterate.leaves(staff, pitched=False):
         ...     leaf
         ...
         Rest('r8')
         Rest('r8')
 
     """
-    return _iterate._public_iterate_leaves(
+    return _iterlib._public_iterate_leaves(
         argument,
         prototype=prototype,
         exclude=exclude,
         grace=grace,
         pitched=pitched,
         reverse=reverse,
     )
@@ -826,15 +826,15 @@
         >>> selection = voice[:2]
         >>> for logical_tie in abjad.iterate.logical_ties(selection):
         ...     logical_tie
         ...
         LogicalTie(items=[Note("c'8"), Note("c'8"), Note("c'8")])
 
     """
-    return _iterate._iterate_logical_ties(
+    return _iterlib._iterate_logical_ties(
         argument,
         exclude=exclude,
         grace=grace,
         nontrivial=nontrivial,
         pitched=pitched,
         reverse=reverse,
     )
```

### Comparing `abjad-3.8/abjad/iterpitches.py` & `abjad-3.9/abjad/iterpitches.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 import dataclasses
 import typing
 
-from . import _inspect
+from . import _getlib
 from . import bind as _bind
 from . import get as _get
 from . import indicators as _indicators
 from . import instruments as _instruments
 from . import iterate as _iterate
 from . import pcollections as _pcollections
 from . import pitch as _pitch
@@ -38,15 +38,15 @@
         >>> for leaf in abjad.iterpitches.iterate_out_of_range(staff):
         ...     leaf
         ...
         Chord('<d fs>8')
 
     """
     for leaf in _iterate.leaves(argument, pitched=True):
-        instrument = _inspect._get_effective(leaf, _instruments.Instrument)
+        instrument = _getlib._get_effective(leaf, _instruments.Instrument)
         if instrument is None:
             raise ValueError("no instrument found.")
         if not sounding_pitches_are_in_range(leaf, instrument.pitch_range):
             yield leaf
 
 
 def respell_with_flats(argument) -> None:
@@ -162,18 +162,18 @@
     assert isinstance(pitch_range, _pcollections.PitchRange), repr(pitch_range)
     if isinstance(argument, int | float):
         pitch = _pitch.NamedPitch(argument)
         return pitch in pitch_range
     if isinstance(argument, _pitch.Pitch):
         return argument in pitch_range
     if hasattr(argument, "written_pitch"):
-        sounding_pitch = _inspect._get_sounding_pitch(argument)
+        sounding_pitch = _getlib._get_sounding_pitch(argument)
         return sounding_pitch in pitch_range
     if hasattr(argument, "written_pitches"):
-        sounding_pitches = _inspect._get_sounding_pitches(argument)
+        sounding_pitches = _getlib._get_sounding_pitches(argument)
         return all(_ in pitch_range for _ in sounding_pitches)
     pitches = list(_iterate.pitches(argument))
     if pitches:
         return all(_ in pitch_range for _ in pitches)
     else:
         try:
             return all(_ in pitch_range for _ in argument)
@@ -218,15 +218,15 @@
                 e'4
                 r4
                 fs'4
             }
 
     """
     for leaf in _iterate.leaves(argument, pitched=True):
-        instrument = _inspect._get_effective(leaf, _instruments.Instrument)
+        instrument = _getlib._get_effective(leaf, _instruments.Instrument)
         if not instrument:
             continue
         sounding_pitch = instrument.middle_c_sounding_pitch
         interval = _pitch.NamedPitch("C4") - sounding_pitch
         interval *= -1
         if hasattr(leaf, "written_pitch"):
             pitch = leaf.written_pitch
@@ -289,15 +289,15 @@
                 c'4
                 r4
                 d'4
             }
 
     """
     for leaf in _iterate.leaves(argument, pitched=True):
-        instrument = _inspect._get_effective(leaf, _instruments.Instrument)
+        instrument = _getlib._get_effective(leaf, _instruments.Instrument)
         if not instrument:
             continue
         sounding_pitch = instrument.middle_c_sounding_pitch
         interval = _pitch.NamedPitch("C4") - sounding_pitch
         if hasattr(leaf, "written_pitch"):
             written_pitch = leaf.written_pitch
             written_pitch = interval.transpose(written_pitch)
```

### Comparing `abjad-3.8/abjad/label.py` & `abjad-3.9/abjad/label.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 import dataclasses
 import typing
 
-from . import _inspect, _iterate
+from . import _getlib, _iterlib
 from . import bind as _bind
 from . import cyclictuple as _cyclictuple
 from . import duration as _duration
 from . import enums as _enums
 from . import indicators as _indicators
-from . import iterate as iterate_
+from . import iterate as _iterate
 from . import overrides as _overrides
 from . import pcollections as _pcollections
 from . import pitch as _pitch
 from . import score as _score
 from . import select as _select
 from . import setclass as _setclass
 from . import tweaks as _tweaks
@@ -147,15 +147,15 @@
                 s8.
                 \abjad-color-music #'red
                 <c' cs' a'>8.
                 ]
             }
 
     """
-    for leaf in iterate_.leaves(argument):
+    for leaf in _iterate.leaves(argument):
         _color_leaf(leaf, color, deactivate=deactivate, tag=tag)
 
 
 def color_note_heads(argument, color_map=pc_number_to_color) -> None:
     r"""
     Colors note note-heads.
 
@@ -265,15 +265,15 @@
                 \tweak Accidental.color #(x11-color 'red)
                 \tweak color #(x11-color 'red)
                 c''8
             }
 
     """
     color_map = color_map or pc_number_to_color
-    for leaf in iterate_.leaves(argument):
+    for leaf in _iterate.leaves(argument):
         if isinstance(leaf, _score.Chord):
             for note_head in leaf.note_heads:
                 number = note_head.written_pitch.number
                 pc = _pitch.NumberedPitchClass(number)
                 color = color_map.get(pc, None)
                 if color is not None:
                     _tweaks.tweak(note_head, rf"\tweak Accidental.color {color}")
@@ -326,15 +326,15 @@
                 c'8
                 d'8
                 e'8
                 f'8
             }
 
     """
-    for leaf in iterate_.leaves(argument):
+    for leaf in _iterate.leaves(argument):
         _bind.detach(_indicators.Markup, leaf)
 
 
 def vertical_moments(
     argument, direction=_enums.UP, prototype=None, *, deactivate=False, tag=None
 ):
     r'''
@@ -669,23 +669,23 @@
     vertical_moments = _verticalmoment.iterate_vertical_moments(argument)
     for index, vertical_moment in enumerate(vertical_moments):
         label, string = None, None
         if prototype is int:
             string = str(index)
         elif prototype is _pitch.NumberedPitch:
             leaves = vertical_moment.leaves
-            generator = iterate_.pitches(leaves)
+            generator = _iterate.pitches(leaves)
             pitches = _pcollections.PitchSegment(generator)
             if not pitches:
                 continue
             pitch_numbers = [str(pitch.number) for pitch in pitches]
             string = rf'\column {{ {" ".join(pitch_numbers)} }}'
         elif prototype is _pitch.NumberedPitchClass:
             leaves = vertical_moment.leaves
-            generator = iterate_.pitches(leaves)
+            generator = _iterate.pitches(leaves)
             pitches = _pcollections.PitchSegment(generator)
             if not pitches:
                 continue
             pitch_classes = [pitch.pitch_class.number for pitch in pitches]
             pitch_classes = list(set(pitch_classes))
             pitch_classes.sort()
             pitch_classes.reverse()
@@ -730,28 +730,28 @@
         elif prototype is _setclass.SetClass or isinstance(
             prototype, _setclass.SetClass
         ):
             if prototype is _setclass.SetClass:
                 prototype = prototype()
             assert isinstance(prototype, _setclass.SetClass)
             leaves = vertical_moment.leaves
-            generator = iterate_.pitches(leaves)
+            generator = _iterate.pitches(leaves)
             pitch_class_set = _pcollections.PitchClassSet(generator)
             if not pitch_class_set:
                 continue
             set_class = _setclass.SetClass.from_pitch_class_set(
                 pitch_class_set,
                 lex_rank=prototype.lex_rank,
                 transposition_only=prototype.transposition_only,
             )
             string = str(set_class)
             string = rf'\line {{ "{string}" }}'
         elif callable(prototype):
             leaves = vertical_moment.leaves
-            generator = iterate_.pitches(leaves)
+            generator = _iterate.pitches(leaves)
             string = prototype(generator)
         else:
             raise TypeError(f"unknown prototype {prototype!r}.")
         assert string is not None
         label = _indicators.Markup(rf"\markup \tiny {string}")
         if direction is _enums.UP:
             leaf = vertical_moment.start_leaves[0]
@@ -820,16 +820,16 @@
                 ef'16
                 ^ \markup \fraction 1 16
                 ]
             }
 
     Returns none.
     """
-    for logical_tie in iterate_.logical_ties(argument):
-        duration = _inspect._get_duration(logical_tie, in_seconds=in_seconds)
+    for logical_tie in _iterate.logical_ties(argument):
+        duration = _getlib._get_duration(logical_tie, in_seconds=in_seconds)
         if denominator is not None:
             duration = _duration.NonreducedFraction(duration)
             duration = duration.with_denominator(denominator)
         pair = duration.pair
         numerator, denominator = pair
         label = _indicators.Markup(rf"\markup \fraction {numerator} {denominator}")
         _attach(label, logical_tie.head, direction=direction)
@@ -1028,17 +1028,17 @@
                     e'8
                     ]
                 }
             }
 
     """
     if prototype is None:
-        generator = iterate_.logical_ties(argument)
+        generator = _iterate.logical_ties(argument)
     else:
-        generator = iterate_.components(argument, prototype=prototype)
+        generator = _iterate.components(argument, prototype=prototype)
     items = list(generator)
     for index, item in enumerate(items):
         label = _indicators.Markup(rf"\markup {index}")
         leaves = _select.leaves(item)
         first_leaf = leaves[0]
         _attach(label, first_leaf, direction=direction)
 
@@ -1244,17 +1244,17 @@
                 a'4
                 ^ \markup 1
                 bf'4
             }
 
     """
     prototype = prototype or _pitch.NamedInterval
-    for note in iterate_.leaves(argument, _score.Note):
+    for note in _iterate.leaves(argument, _score.Note):
         label = None
-        next_leaf = _iterate._get_leaf(note, 1)
+        next_leaf = _iterlib._get_leaf(note, 1)
         if isinstance(next_leaf, _score.Note):
             interval = _pitch.NamedInterval.from_pitch_carriers(note, next_leaf)
             interval = prototype(interval)
             if hasattr(interval, "name"):
                 label = _indicators.Markup(rf"\markup {interval.name}")
             elif isinstance(interval, _pitch.NumberedInversionEquivalentIntervalClass):
                 label = _indicators.Markup(rf"\markup {interval.number}")
@@ -1523,15 +1523,15 @@
                 ^ \markup 3
                 \stopGroup
             }
 
     Returns none.
     """
     prototype = prototype or _pitch.NamedPitch
-    logical_ties = iterate_.logical_ties(argument)
+    logical_ties = _iterate.logical_ties(argument)
     for logical_tie in logical_ties:
         leaf = logical_tie.head
         label = None
         if prototype is _pitch.NamedPitch:
             if isinstance(leaf, _score.Note):
                 string = leaf.written_pitch.get_name(locale=locale)
                 if "#" in string:
@@ -1715,15 +1715,15 @@
     Returns none.
     """
     prototype = prototype or _setclass.SetClass()
     if prototype is _setclass.SetClass:
         prototype = prototype()
     assert isinstance(prototype, _setclass.SetClass), repr(prototype)
     for selection in argument:
-        generator = iterate_.pitches(selection)
+        generator = _iterate.pitches(selection)
         pitch_class_set = _pcollections.PitchClassSet(generator)
         if not pitch_class_set:
             continue
         set_class = _setclass.SetClass.from_pitch_class_set(
             pitch_class_set,
             lex_rank=prototype.lex_rank,
             transposition_only=prototype.transposition_only,
@@ -1867,15 +1867,15 @@
         >>
 
     Returns total duration.
     """
     direction = direction or _enums.UP
     if global_offset is not None:
         assert isinstance(global_offset, _duration.Duration)
-    for logical_tie in iterate_.logical_ties(argument):
+    for logical_tie in _iterate.logical_ties(argument):
         if clock_time:
             timespan = logical_tie.head._get_timespan(in_seconds=True)
             start_offset = timespan.start_offset
             if global_offset is not None:
                 start_offset += global_offset
             string = start_offset.to_clock_string()
         else:
```

### Comparing `abjad-3.8/abjad/lilypondfile.py` & `abjad-3.9/abjad/lilypondfile.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 import dataclasses
 
-from . import _indent
+from . import _indentlib
 from . import configuration as _configuration
 from . import indicators as _indicators
-from . import iterate as iterate_
+from . import iterate as _iterate
 from . import score as _score
 from . import tag as _tag
 
 configuration = _configuration.Configuration()
 
 
 @dataclasses.dataclass
@@ -130,15 +130,15 @@
     items: list = dataclasses.field(default_factory=list)
 
     def __post_init__(self):
         assert isinstance(self.items, list), repr(self.items)
 
     @staticmethod
     def _format_item(item, depth=1):
-        indent = depth * _indent.INDENT
+        indent = depth * _indentlib.INDENT
         result = []
         if isinstance(item, str):
             if item.isspace():
                 string = ""
             else:
                 string = indent + item
             result.append(string)
@@ -454,19 +454,19 @@
             if getattr(item, "name", None) == argument:
                 return item
             elif hasattr(item, "items"):
                 for item_ in item.items:
                     if getattr(item_, "name", None) == argument:
                         return item_
                     if isinstance(item_, _score.Component):
-                        for component in iterate_.components(item_):
+                        for component in _iterate.components(item_):
                             if getattr(component, "name", None) == argument:
                                 return component
             elif isinstance(item, _score.Component):
-                for component in iterate_.components(item):
+                for component in _iterate.components(item):
                     if getattr(component, "name", None) == argument:
                         return component
         raise KeyError(f"no block or component with name {argument!r}.")
 
     def _get_lilypond_format(self):
         result = []
         strings = []
```

### Comparing `abjad-3.8/abjad/lyconst.py` & `abjad-3.9/abjad/lyconst.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/lyenv.py` & `abjad-3.9/abjad/lyenv.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/lyproxy.py` & `abjad-3.9/abjad/lyproxy.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/makers.py` & `abjad-3.9/abjad/makers.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 import collections
 import math
 import numbers
 
-from . import _inspect
+from . import _getlib
 from . import duration as _duration
 from . import exceptions as _exceptions
 from . import math as _math
 from . import pitch as _pitch
 from . import ratio as _ratio
 from . import score as _score
 from . import sequence as _sequence
@@ -440,16 +440,16 @@
 
     ### INITIALIZER ###
 
     def __init__(
         self,
         *,
         increase_monotonic: bool = False,
-        forbidden_note_duration: _typings.DurationTyping = None,
-        forbidden_rest_duration: _typings.DurationTyping = None,
+        forbidden_note_duration: _typings.Duration = None,
+        forbidden_rest_duration: _typings.Duration = None,
         skips_instead_of_rests: bool = False,
         tag: _tag.Tag = None,
         use_multimeasure_rests: bool = False,
     ) -> None:
         if increase_monotonic is not None:
             increase_monotonic = bool(increase_monotonic)
         self._increase_monotonic = increase_monotonic
@@ -1671,15 +1671,15 @@
         notes = [_score.Note(0, x) for x in written_durations]
     except _exceptions.AssignabilityError:
         denominator = target_duration.denominator
         note_durations = [
             _duration.Duration(_, denominator) for _ in proportions.numbers
         ]
         notes = list(maker(0, note_durations))
-    contents_duration = _inspect._get_duration(notes)
+    contents_duration = _getlib._get_duration(notes)
     multiplier = target_duration / contents_duration
     tuplet = _score.Tuplet(multiplier, notes)
     tuplet.normalize_multiplier()
     return tuplet
 
 
 def tuplet_from_ratio_and_pair(
@@ -1878,25 +1878,25 @@
                 note = _score.Note(0, duration, tag=tag)
                 duration = note._get_duration()
                 tuplet = _score.Tuplet.from_duration(duration, [note], tag=tag)
                 return tuplet
             except _exceptions.AssignabilityError:
                 note_maker = NoteMaker(tag=tag)
                 notes = note_maker(0, duration)
-                duration = _inspect._get_duration(notes)
+                duration = _getlib._get_duration(notes)
                 return _score.Tuplet.from_duration(duration, notes, tag=tag)
         elif ratio.numbers[0] < 0:
             try:
                 rest = _score.Rest(duration, tag=tag)
                 duration = rest._get_duration()
                 return _score.Tuplet.from_duration(duration, [rest], tag=tag)
             except _exceptions.AssignabilityError:
                 leaf_maker = LeafMaker(tag=tag)
                 rests = leaf_maker([None], duration)
-                duration = _inspect._get_duration(rests)
+                duration = _getlib._get_duration(rests)
                 return _score.Tuplet.from_duration(duration, rests, tag=tag)
         else:
             raise ValueError("no divide zero values.")
     else:
         exponent = int(
             math.log(_math.weight(ratio.numbers), 2) - math.log(numerator, 2)
         )
```

### Comparing `abjad-3.8/abjad/math.py` & `abjad-3.9/abjad/math.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/meter.py` & `abjad-3.9/abjad/meter.py`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 Tools for modeling musical meter.
 """
 import bisect
 import collections
 
 import uqbar.graphs
 
-from . import _inspect, _iterate
+from . import _getlib, _iterlib
 from . import duration as _duration
 from . import indicators as _indicators
 from . import lilypondfile as _lilypondfile
 from . import math as _math
 from . import mutate as _mutate
 from . import parentage as _parentage
 from . import rhythmtrees as _rhythmtrees
@@ -2291,15 +2291,15 @@
             depth=0,
             logical_tie=None,
         ):
             offsets = _MeterManager.get_offsets_at_depth(depth, offset_inventory)
             logical_tie_duration = sum(
                 _._get_preprolated_duration() for _ in logical_tie
             )
-            logical_tie_timespan = _inspect._get_timespan(logical_tie)
+            logical_tie_timespan = _getlib._get_timespan(logical_tie)
             logical_tie_start_offset = logical_tie_timespan.start_offset
             logical_tie_stop_offset = logical_tie_timespan.stop_offset
             logical_tie_starts_in_offsets = logical_tie_start_offset in offsets
             logical_tie_stops_in_offsets = logical_tie_stop_offset in offsets
             if not _MeterManager.is_acceptable_logical_tie(
                 logical_tie_duration=logical_tie_duration,
                 logical_tie_starts_in_offsets=logical_tie_starts_in_offsets,
@@ -3248,15 +3248,15 @@
         Returns generator.
         """
         last_tie = None
         current_leaf_group = None
         current_leaf_group_is_silent = False
         for component in argument:
             if isinstance(component, _score.Note | _score.Chord):
-                this_tie_leaves = _iterate._get_logical_tie_leaves(component)
+                this_tie_leaves = _iterlib._get_logical_tie_leaves(component)
                 this_tie = _select.LogicalTie(this_tie_leaves)
                 if current_leaf_group is None:
                     current_leaf_group = []
                 elif (
                     current_leaf_group_is_silent
                     or this_tie is None
                     or last_tie != this_tie
```

### Comparing `abjad-3.8/abjad/metricmodulation.py` & `abjad-3.9/abjad/metricmodulation.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,16 +1,15 @@
 import typing
 
-from . import _inspect
+from . import _getlib
 from . import contributions as _contributions
 from . import illustrators as _illustrators
 from . import indicators as _indicators
 from . import ratio as _ratio
 from . import score as _score
-from . import typings as _typings
 
 
 class MetricModulation:
     r"""
     Metric modulation.
 
     ..  container:: example
@@ -347,15 +346,15 @@
         self,
         left_rhythm,
         right_rhythm,
         *,
         hide: bool = False,
         left_markup: _indicators.Markup = None,
         right_markup: _indicators.Markup = None,
-        scale: tuple[_typings.Number, _typings.Number] = (1, 1),
+        scale: tuple[int | float, int | float] = (1, 1),
     ) -> None:
         self._hide = bool(hide)
         left_rhythm = self._initialize_rhythm(left_rhythm)
         self._left_rhythm = left_rhythm
         right_rhythm = self._initialize_rhythm(right_rhythm)
         self._right_rhythm = right_rhythm
         self._right_rhythm = right_rhythm
@@ -628,16 +627,16 @@
             ...     left_rhythm=abjad.Tuplet((2, 3), [abjad.Note("c'4")]),
             ...     right_rhythm=abjad.Note("c'4"),
             ... )
             >>> metric_modulation.ratio
             Ratio(numbers=(2, 3))
 
         """
-        left_duration = _inspect._get_duration(self.left_rhythm)
-        right_duration = _inspect._get_duration(self.right_rhythm)
+        left_duration = _getlib._get_duration(self.left_rhythm)
+        right_duration = _getlib._get_duration(self.right_rhythm)
         duration = left_duration / right_duration
         ratio = _ratio.Ratio(duration.pair)
         return ratio
 
     @property
     def right_markup(self) -> _indicators.Markup | None:
         r"""Gets right markup of metric modulation.
@@ -667,15 +666,15 @@
             >>> metric_modulation.right_rhythm
             [Note("c'4.")]
 
         """
         return self._right_rhythm
 
     @property
-    def scale(self) -> tuple[_typings.Number, _typings.Number]:
+    def scale(self) -> tuple[int | float, int | float]:
         r"""
         Gets scale of output markup.
 
         ..  container:: example
 
             >>> staff = abjad.Staff("c'4 d'4 e'4 f'4 e'4 d'4")
             >>> abjad.attach(abjad.TimeSignature((3, 4)), staff[0])
```

### Comparing `abjad-3.8/abjad/mutate.py` & `abjad-3.9/abjad/mutate.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 import collections
 import copy as python_copy
 import itertools
 
-from . import _inspect
+from . import _getlib
 from . import bind as _bind
 from . import duration as _duration
 from . import enums as _enums
 from . import exceptions as _exceptions
 from . import get as _get
 from . import indicators as _indicators
-from . import iterate as iterate_
+from . import iterate as _iterate
 from . import makers as _makers
 from . import parentage as _parentage
 from . import pitch as _pitch
 from . import ratio as _ratio
 from . import score as _score
 from . import select as _select
 from . import sequence as _sequence
@@ -401,21 +401,21 @@
 def _immediately_precedes(component_1, component_2, ignore_before_after_grace=None):
     successors = []
     current = component_1
     # do not include OnBeatGraceContainer here because
     # OnBeatGraceContainer is a proper container
     grace_prototype = (_score.AfterGraceContainer, _score.BeforeGraceContainer)
     while current is not None:
-        sibling = _inspect._get_sibling_with_graces(current, 1)
+        sibling = _getlib._get_sibling_with_graces(current, 1)
         while (
             ignore_before_after_grace
             and sibling is not None
             and isinstance(sibling._parent, grace_prototype)
         ):
-            sibling = _inspect._get_sibling_with_graces(sibling, 1)
+            sibling = _getlib._get_sibling_with_graces(sibling, 1)
         if sibling is None:
             current = current._parent
         else:
             descendants = sibling._get_descendants_starting_with()
             successors = descendants
             break
     return component_2 in successors
@@ -597,15 +597,15 @@
         duration_crossing_containers = duration_crossing_descendants[:-1]
         assert len(duration_crossing_containers)
     # if split point falls between leaves
     # then find leaf to immediate right of split point
     # in order to start upward crawl through duration-crossing containers
     else:
         duration_crossing_containers = duration_crossing_descendants[:]
-        for leaf in iterate_.leaves(bottom):
+        for leaf in _iterate.leaves(bottom):
             timespan = _get.timespan(leaf)
             if timespan.start_offset == global_split_point:
                 leaf_right_of_split = leaf
                 leaf_left_of_split = _get.leaf(leaf, -1)
                 break
         else:
             raise Exception("can not split empty container {bottom!r}.")
@@ -1390,16 +1390,16 @@
             >>> print(string)
             \new Staff
             {
                 \times 2/3
                 {
                     c'4
                     \p
-                    \<
                     (
+                    \<
                     d'4
                     e'4
                 }
                 \times 2/3
                 {
                     d'4
                     e'4
@@ -2327,16 +2327,16 @@
             >>> print(string)
             \new Staff
             {
                 {
                     \time 3/4
                     c'4
                     \p
-                    \<
                     (
+                    \<
                     d'4
                     e'4
                 }
                 {
                     d'4
                     e'4
                     f'4
@@ -2358,16 +2358,16 @@
             \new Staff
             {
                 \times 4/6
                 {
                     \time 3/4
                     c'4
                     \p
-                    \<
                     (
+                    \<
                     d'4
                     e'4
                     d'4
                     e'4
                     f'4
                     \f
                     )
@@ -2441,15 +2441,15 @@
                 g'4
                 <af' c'' ef''>4
             }
 
     Returns none.
     """
     named_interval = _pitch.NamedInterval(interval)
-    for item in iterate_.components(argument, (_score.Note, _score.Chord)):
+    for item in _iterate.components(argument, (_score.Note, _score.Chord)):
         if isinstance(item, _score.Note):
             old_written_pitch = item.note_head.written_pitch
             new_written_pitch = old_written_pitch.transpose(named_interval)
             item.note_head.written_pitch = new_written_pitch
         else:
             for note_head in item.note_heads:
                 old_written_pitch = note_head.written_pitch
```

### Comparing `abjad-3.8/abjad/obgc.py` & `abjad-3.9/abjad/obgc.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,12 +1,12 @@
-from . import _indent, _iterate
+from . import _indentlib, _iterlib
 from . import bind as _bind
 from . import duration as _duration
 from . import indicators as _indicators
-from . import iterate as iterate_
+from . import iterate as _iterate
 from . import mutate as _mutate
 from . import parentage as _parentage
 from . import score as _score
 from . import select as _select
 from . import spanners as _spanners
 from . import tag as _tag
 from . import tweaks as _tweaks
@@ -91,15 +91,15 @@
 
     ### INITIALIZER ###
 
     def __init__(
         self,
         components=None,
         identifier: str = None,
-        leaf_duration: _typings.DurationTyping = None,
+        leaf_duration: _typings.Duration = None,
         name: str = None,
         tag: _tag.Tag = None,
     ) -> None:
         super().__init__(components, identifier=identifier, name=name, tag=tag)
         if leaf_duration is not None:
             leaf_duration = _duration.Duration(leaf_duration)
         self._leaf_duration = leaf_duration
@@ -129,16 +129,16 @@
     # ... doesn't work.
     #
     # This is hackish, and some sort of longer term solution should
     # happen later.
     def _attach_lilypond_one_voice(self):
         anchor_leaf = self._get_on_beat_anchor_leaf()
         anchor_voice = _parentage.Parentage(anchor_leaf).get(_score.Voice)
-        final_anchor_leaf = _iterate._get_leaf(anchor_voice, -1)
-        next_leaf = _iterate._get_leaf(final_anchor_leaf, 1)
+        final_anchor_leaf = _iterlib._get_leaf(anchor_voice, -1)
+        next_leaf = _iterlib._get_leaf(final_anchor_leaf, 1)
         literal = _indicators.LilyPondLiteral(r"\oneVoice", site="absolute_before")
         if next_leaf._has_indicator(literal):
             return
         if isinstance(next_leaf._parent, OnBeatGraceContainer):
             return
         if self._is_on_beat_anchor_voice(next_leaf._parent):
             return
@@ -159,18 +159,18 @@
         brackets_open = [open_bracket]
         overrides = contributions.grob_overrides
         settings = contributions.context_settings
         if overrides or settings:
             contributions = [self._format_invocation(), r"\with", "{"]
             contributions = self._tag_strings(contributions)
             result.extend(contributions)
-            contributions = [_indent.INDENT + _ for _ in overrides]
+            contributions = [_indentlib.INDENT + _ for _ in overrides]
             contributions = self._tag_strings(contributions)
             result.extend(contributions)
-            contributions = [_indent.INDENT + _ for _ in settings]
+            contributions = [_indentlib.INDENT + _ for _ in settings]
             contributions = self._tag_strings(contributions)
             result.extend(contributions)
             contributions = [f"}} {brackets_open[0]}"]
             contributions = ["}", open_bracket]
             contributions = self._tag_strings(contributions)
             result.extend(contributions)
         else:
@@ -218,28 +218,28 @@
         if isinstance(CONTAINER[0], _score.Voice) and isinstance(
             CONTAINER[1], OnBeatGraceContainer
         ):
             return True
         return False
 
     def _match_anchor_leaf(self):
-        first_grace = _iterate._get_leaf(self, 0)
+        first_grace = _iterlib._get_leaf(self, 0)
         if not isinstance(first_grace, _score.Note | _score.Chord):
             message = "must start with note or chord:\n"
             message += f"    {repr(self)}"
             raise Exception(message)
         anchor_leaf = self._get_on_beat_anchor_leaf()
         if isinstance(anchor_leaf, _score.Note | _score.Chord) and isinstance(
             first_grace, (_score.Note, _score.Chord)
         ):
             if isinstance(first_grace, _score.Note):
                 chord = _score.Chord(first_grace)
                 _mutate.replace(first_grace, chord)
                 first_grace = chord
-            generator = iterate_.pitches(anchor_leaf)
+            generator = _iterate.pitches(anchor_leaf)
             anchor_pitches = list(generator)
             highest_pitch = list(sorted(anchor_pitches))[-1]
             if highest_pitch not in first_grace.note_heads:
                 first_grace.note_heads.append(highest_pitch)
             grace_mate_head = first_grace.note_heads.get(highest_pitch)
             _tweaks.tweak(grace_mate_head, r"\tweak font-size 0")
             _tweaks.tweak(grace_mate_head, r"\tweak transparent ##t")
@@ -811,15 +811,15 @@
     ):
         message = "selection must be contiguous in same parent:\n"
         message += f"   {repr(anchor_voice_selection)}"
         raise Exception(message)
     on_beat_grace_container = OnBeatGraceContainer(
         contents, leaf_duration=leaf_duration
     )
-    anchor_leaf = _iterate._get_leaf(anchor_voice_selection, 0)
+    anchor_leaf = _iterlib._get_leaf(anchor_voice_selection, 0)
     anchor_voice = _parentage.Parentage(anchor_leaf).get(_score.Voice)
     if anchor_voice.name is None:
         raise Exception(f"anchor voice must be named:\n   {repr(anchor_voice)}")
     anchor_voice_insert = _score.Voice(name=anchor_voice.name)
     _mutate.wrap(anchor_voice_selection, anchor_voice_insert)
     container = _score.Container(simultaneous=True)
     _mutate.wrap(anchor_voice_insert, container)
@@ -845,27 +845,27 @@
         _spanners.slur(on_beat_grace_container[:])
     voice_number_to_string = {
         1: r"\voiceOne",
         2: r"\voiceTwo",
         3: r"\voiceThree",
         4: r"\voiceFour",
     }
-    first_grace = _iterate._get_leaf(on_beat_grace_container, 0)
+    first_grace = _iterlib._get_leaf(on_beat_grace_container, 0)
     one_voice_literal = _indicators.LilyPondLiteral(
         r"\oneVoice", site="absolute_before"
     )
     string = voice_number_to_string.get(grace_voice_number, None)
     if string is not None:
         literal
         _bind.detach(one_voice_literal, anchor_leaf)
         _bind.attach(_indicators.LilyPondLiteral(string), first_grace, tag=_site(3))
     string = voice_number_to_string.get(anchor_voice_number, None)
     if string is not None:
         _bind.detach(one_voice_literal, anchor_leaf)
         _bind.attach(_indicators.LilyPondLiteral(string), anchor_leaf, tag=_site(4))
     if not do_not_stop_polyphony:
-        last_anchor_leaf = _iterate._get_leaf(anchor_voice_selection, -1)
-        next_leaf = _iterate._get_leaf(last_anchor_leaf, 1)
+        last_anchor_leaf = _iterlib._get_leaf(anchor_voice_selection, -1)
+        next_leaf = _iterlib._get_leaf(last_anchor_leaf, 1)
         if next_leaf is not None:
             literal = _indicators.LilyPondLiteral(r"\oneVoice", site="absolute_before")
             _bind.attach(literal, next_leaf, tag=_site(5))
     return on_beat_grace_container
```

### Comparing `abjad-3.8/abjad/overrides.py` & `abjad-3.9/abjad/overrides.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 import copy
 import dataclasses
 import typing
 
-from . import _indent
+from . import _indentlib
 from . import contributions as _contributions
 from . import enums as _enums
 from . import lyenv as _lyenv
 from . import string as _string
 
 
 def _format_scheme_value(value):
@@ -674,15 +674,15 @@
             name = first + rest
             string = "".join(name)
             value = _format_scheme_value(value)
             value_parts = value.split("\n")
             result = rf"{string!s} = {value_parts[0]!s}"
             pieces = [result]
             for part in value_parts[1:]:
-                pieces.append(_indent.INDENT + part)
+                pieces.append(_indentlib.INDENT + part)
             string = "\n".join(pieces)
             strings.append(string)
         return strings
 
     def _format_inline(self, context=None) -> list[str]:
         result = []
         for name, value in vars(self).items():
```

### Comparing `abjad-3.8/abjad/parentage.py` & `abjad-3.9/abjad/parentage.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/parsers/base.py` & `abjad-3.9/abjad/parsers/base.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/parsers/parse.py` & `abjad-3.9/abjad/parsers/parse.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/parsers/parser.py` & `abjad-3.9/abjad/parsers/parser.py`

 * *Files 0% similar despite different names*

```diff
@@ -11,13905 +11,13905 @@
 000000a0: 650a 2020 2020 5961 6363 5072 6f64 7563  e.    YaccProduc
 000000b0: 7469 6f6e 2c0a 2020 2020 5961 6363 5379  tion,.    YaccSy
 000000c0: 6d62 6f6c 2c0a 2020 2020 6572 726f 725f  mbol,.    error_
 000000d0: 636f 756e 742c 0a20 2020 2066 6f72 6d61  count,.    forma
 000000e0: 745f 7265 7375 6c74 2c0a 2020 2020 666f  t_result,.    fo
 000000f0: 726d 6174 5f73 7461 636b 5f65 6e74 7279  rmat_stack_entry
 00000100: 2c0a 290a 0a66 726f 6d20 2e2e 2069 6d70  ,.)..from .. imp
-00000110: 6f72 7420 5f69 6e64 656e 740a 6672 6f6d  ort _indent.from
-00000120: 202e 2e20 696d 706f 7274 2062 696e 6420   .. import bind 
-00000130: 6173 205f 6269 6e64 0a66 726f 6d20 2e2e  as _bind.from ..
-00000140: 2069 6d70 6f72 7420 6475 7261 7469 6f6e   import duration
-00000150: 2061 7320 5f64 7572 6174 696f 6e0a 6672   as _duration.fr
-00000160: 6f6d 202e 2e20 696d 706f 7274 2064 796e  om .. import dyn
-00000170: 616d 6963 2061 7320 5f64 796e 616d 6963  amic as _dynamic
-00000180: 0a66 726f 6d20 2e2e 2069 6d70 6f72 7420  .from .. import 
-00000190: 6578 6365 7074 696f 6e73 2061 7320 5f65  exceptions as _e
-000001a0: 7863 6570 7469 6f6e 730a 6672 6f6d 202e  xceptions.from .
-000001b0: 2e20 696d 706f 7274 2069 6e64 6963 6174  . import indicat
-000001c0: 6f72 7320 6173 205f 696e 6469 6361 746f  ors as _indicato
-000001d0: 7273 0a66 726f 6d20 2e2e 2069 6d70 6f72  rs.from .. impor
-000001e0: 7420 6c69 6c79 706f 6e64 6669 6c65 2061  t lilypondfile a
-000001f0: 7320 5f6c 696c 7970 6f6e 6466 696c 650a  s _lilypondfile.
-00000200: 6672 6f6d 202e 2e20 696d 706f 7274 206c  from .. import l
-00000210: 7963 6f6e 7374 2061 7320 5f6c 7963 6f6e  yconst as _lycon
-00000220: 7374 0a66 726f 6d20 2e2e 2069 6d70 6f72  st.from .. impor
-00000230: 7420 6c79 656e 7620 6173 205f 6c79 656e  t lyenv as _lyen
-00000240: 760a 6672 6f6d 202e 2e20 696d 706f 7274  v.from .. import
-00000250: 2070 6974 6368 2061 7320 5f70 6974 6368   pitch as _pitch
-00000260: 0a66 726f 6d20 2e2e 2069 6d70 6f72 7420  .from .. import 
-00000270: 7363 6f72 6520 6173 205f 7363 6f72 650a  score as _score.
-00000280: 6672 6f6d 202e 2e20 696d 706f 7274 2073  from .. import s
-00000290: 7472 696e 6720 6173 205f 7374 7269 6e67  tring as _string
-000002a0: 0a66 726f 6d20 2e62 6173 6520 696d 706f  .from .base impo
-000002b0: 7274 2050 6172 7365 720a 6672 6f6d 202e  rt Parser.from .
-000002c0: 7363 6865 6d65 2069 6d70 6f72 7420 5363  scheme import Sc
-000002d0: 6865 6d65 5061 7273 6572 0a0a 0a63 6c61  hemeParser...cla
-000002e0: 7373 204c 696c 7950 6f6e 6444 7572 6174  ss LilyPondDurat
-000002f0: 696f 6e3a 0a20 2020 2022 2222 0a20 2020  ion:.    """.   
-00000300: 204d 6f64 656c 206f 6620 6120 6475 7261   Model of a dura
-00000310: 7469 6f6e 2069 6e20 4c69 6c79 506f 6e64  tion in LilyPond
-00000320: 2e0a 0a20 2020 204e 6f74 2063 6f6d 706f  ...    Not compo
-00000330: 7365 722d 7361 6665 2e0a 0a20 2020 2055  ser-safe...    U
-00000340: 7365 6420 696e 7465 726e 616c 6c79 2062  sed internally b
-00000350: 7920 4c69 6c79 506f 6e64 5061 7273 6572  y LilyPondParser
-00000360: 2e0a 2020 2020 2222 220a 0a20 2020 2023  ..    """..    #
-00000370: 2323 2043 4c41 5353 2056 4152 4941 424c  ## CLASS VARIABL
-00000380: 4553 2023 2323 0a0a 2020 2020 5f5f 736c  ES ###..    __sl
-00000390: 6f74 735f 5f20 3d20 2822 6475 7261 7469  ots__ = ("durati
-000003a0: 6f6e 222c 2022 6d75 6c74 6970 6c69 6572  on", "multiplier
-000003b0: 2229 0a0a 2020 2020 2323 2320 494e 4954  ")..    ### INIT
-000003c0: 4941 4c49 5a45 5220 2323 230a 0a20 2020  IALIZER ###..   
-000003d0: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
-000003e0: 6c66 2c20 6475 7261 7469 6f6e 3d4e 6f6e  lf, duration=Non
-000003f0: 652c 206d 756c 7469 706c 6965 723d 4e6f  e, multiplier=No
-00000400: 6e65 293a 0a20 2020 2020 2020 2073 656c  ne):.        sel
-00000410: 662e 6475 7261 7469 6f6e 203d 2064 7572  f.duration = dur
-00000420: 6174 696f 6e0a 2020 2020 2020 2020 7365  ation.        se
-00000430: 6c66 2e6d 756c 7469 706c 6965 7220 3d20  lf.multiplier = 
-00000440: 6d75 6c74 6970 6c69 6572 0a0a 0a5f 6c79  multiplier..._ly
-00000450: 656e 762e 6375 7272 656e 745f 6d6f 6475  env.current_modu
-00000460: 6c65 5b22 6272 6576 6522 5d20 3d20 4c69  le["breve"] = Li
-00000470: 6c79 506f 6e64 4475 7261 7469 6f6e 285f  lyPondDuration(_
-00000480: 6475 7261 7469 6f6e 2e44 7572 6174 696f  duration.Duratio
-00000490: 6e28 322c 2031 292c 204e 6f6e 6529 0a5f  n(2, 1), None)._
-000004a0: 6c79 656e 762e 6375 7272 656e 745f 6d6f  lyenv.current_mo
-000004b0: 6475 6c65 5b22 6c6f 6e67 6122 5d20 3d20  dule["longa"] = 
-000004c0: 4c69 6c79 506f 6e64 4475 7261 7469 6f6e  LilyPondDuration
-000004d0: 285f 6475 7261 7469 6f6e 2e44 7572 6174  (_duration.Durat
-000004e0: 696f 6e28 342c 2031 292c 204e 6f6e 6529  ion(4, 1), None)
-000004f0: 0a5f 6c79 656e 762e 6375 7272 656e 745f  ._lyenv.current_
-00000500: 6d6f 6475 6c65 5b22 6d61 7869 6d61 225d  module["maxima"]
-00000510: 203d 204c 696c 7950 6f6e 6444 7572 6174   = LilyPondDurat
-00000520: 696f 6e28 5f64 7572 6174 696f 6e2e 4475  ion(_duration.Du
-00000530: 7261 7469 6f6e 2838 2c20 3129 2c20 4e6f  ration(8, 1), No
-00000540: 6e65 290a 0a0a 636c 6173 7320 4d61 726b  ne)...class Mark
-00000550: 7570 436f 6d6d 616e 643a 0a20 2020 2022  upCommand:.    "
-00000560: 2222 0a20 2020 204c 696c 7950 6f6e 6420  "".    LilyPond 
-00000570: 6d61 726b 7570 2063 6f6d 6d61 6e64 2e0a  markup command..
-00000580: 2020 2020 2222 220a 0a20 2020 205f 5f73      """..    __s
-00000590: 6c6f 7473 5f5f 203d 2028 2261 7267 756d  lots__ = ("argum
-000005a0: 656e 7473 222c 2022 6e61 6d65 2229 0a0a  ents", "name")..
-000005b0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-000005c0: 2873 656c 662c 206e 616d 653d 4e6f 6e65  (self, name=None
-000005d0: 2c20 2a61 7267 756d 656e 7473 293a 0a20  , *arguments):. 
-000005e0: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
-000005f0: 696e 7374 616e 6365 286e 616d 652c 2073  instance(name, s
-00000600: 7472 292c 2072 6570 7228 6e61 6d65 290a  tr), repr(name).
-00000610: 2020 2020 2020 2020 7365 6c66 2e6e 616d          self.nam
-00000620: 6520 3d20 6e61 6d65 0a20 2020 2020 2020  e = name.       
-00000630: 2073 656c 662e 6172 6775 6d65 6e74 7320   self.arguments 
-00000640: 3d20 7475 706c 6528 6172 6775 6d65 6e74  = tuple(argument
-00000650: 7329 0a0a 2020 2020 6465 6620 5f5f 6571  s)..    def __eq
-00000660: 5f5f 2873 656c 662c 2061 7267 756d 656e  __(self, argumen
-00000670: 7429 3a0a 2020 2020 2020 2020 2222 220a  t):.        """.
-00000680: 2020 2020 2020 2020 4973 2074 7275 6520          Is true 
-00000690: 7768 656e 2060 6061 7267 756d 656e 7460  when ``argument`
-000006a0: 6020 6973 2061 206d 6172 6b75 7020 636f  ` is a markup co
-000006b0: 6d6d 616e 6420 7769 7468 206e 616d 6520  mmand with name 
-000006c0: 616e 6420 6172 6775 6d65 6e74 7320 6571  and arguments eq
-000006d0: 7561 6c20 746f 0a20 2020 2020 2020 2074  ual to.        t
-000006e0: 686f 7365 206f 6620 7468 6973 206d 6172  hose of this mar
-000006f0: 6b75 7020 636f 6d6d 616e 642e 0a20 2020  kup command..   
-00000700: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00000710: 2023 2064 6566 696e 6564 2065 7870 6c69   # defined expli
-00000720: 6369 746c 7920 6265 6361 7573 6520 6f66  citly because of
-00000730: 2069 6e69 7469 616c 697a 6572 202a 6172   initializer *ar
-00000740: 6775 6d65 6e74 730a 2020 2020 2020 2020  guments.        
-00000750: 6966 2069 7369 6e73 7461 6e63 6528 6172  if isinstance(ar
-00000760: 6775 6d65 6e74 2c20 7479 7065 2873 656c  gument, type(sel
-00000770: 6629 293a 0a20 2020 2020 2020 2020 2020  f)):.           
-00000780: 2069 6620 7365 6c66 2e6e 616d 6520 3d3d   if self.name ==
-00000790: 2061 7267 756d 656e 742e 6e61 6d65 3a0a   argument.name:.
-000007a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000007b0: 6966 2073 656c 662e 6172 6775 6d65 6e74  if self.argument
-000007c0: 7320 3d3d 2061 7267 756d 656e 742e 6172  s == argument.ar
-000007d0: 6775 6d65 6e74 733a 0a20 2020 2020 2020  guments:.       
-000007e0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000007f0: 7572 6e20 5472 7565 0a20 2020 2020 2020  urn True.       
-00000800: 2072 6574 7572 6e20 4661 6c73 650a 0a20   return False.. 
-00000810: 2020 2064 6566 205f 5f68 6173 685f 5f28     def __hash__(
-00000820: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-00000830: 2222 0a20 2020 2020 2020 2048 6173 6865  "".        Hashe
-00000840: 7320 6d61 726b 7570 2063 6f6d 6d61 6e64  s markup command
-00000850: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-00000860: 2020 2020 2020 7265 7475 726e 2068 6173        return has
-00000870: 6828 7365 6c66 2e5f 5f63 6c61 7373 5f5f  h(self.__class__
-00000880: 2e5f 5f6e 616d 655f 5f20 2b20 7374 7228  .__name__ + str(
-00000890: 7365 6c66 2929 0a0a 2020 2020 6465 6620  self))..    def 
-000008a0: 5f5f 7265 7072 5f5f 2873 656c 6629 3a0a  __repr__(self):.
-000008b0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000008c0: 2020 2020 4765 7473 2072 6570 722e 0a20      Gets repr.. 
-000008d0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-000008e0: 2020 2072 6574 7572 6e20 280a 2020 2020     return (.    
-000008f0: 2020 2020 2020 2020 6622 7b74 7970 6528          f"{type(
-00000900: 7365 6c66 292e 5f5f 6e61 6d65 5f5f 7d28  self).__name__}(
-00000910: 6e61 6d65 3d7b 7365 6c66 2e6e 616d 6521  name={self.name!
-00000920: 727d 2c20 6172 6775 6d65 6e74 733d 7b73  r}, arguments={s
-00000930: 656c 662e 6172 6775 6d65 6e74 7321 727d  elf.arguments!r}
-00000940: 2922 0a20 2020 2020 2020 2029 0a0a 2020  )".        )..  
-00000950: 2020 6465 6620 5f67 6574 5f6c 696c 7970    def _get_lilyp
-00000960: 6f6e 645f 666f 726d 6174 2873 656c 6629  ond_format(self)
-00000970: 3a0a 2020 2020 2020 2020 6465 6620 7265  :.        def re
-00000980: 6375 7273 6528 6974 6572 6162 6c65 293a  curse(iterable):
-00000990: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-000009a0: 756c 7420 3d20 5b5d 0a20 2020 2020 2020  ult = [].       
-000009b0: 2020 2020 2066 6f72 2069 7465 6d20 696e       for item in
-000009c0: 2069 7465 7261 626c 653a 0a20 2020 2020   iterable:.     
-000009d0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-000009e0: 696e 7374 616e 6365 2869 7465 6d2c 206c  instance(item, l
-000009f0: 6973 7420 7c20 7475 706c 6529 3a0a 2020  ist | tuple):.  
-00000a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000a10: 2020 7265 7375 6c74 2e61 7070 656e 6428    result.append(
-00000a20: 227b 2229 0a20 2020 2020 2020 2020 2020  "{").           
-00000a30: 2020 2020 2020 2020 2072 6573 756c 742e           result.
-00000a40: 6578 7465 6e64 2872 6563 7572 7365 2869  extend(recurse(i
-00000a50: 7465 6d29 290a 2020 2020 2020 2020 2020  tem)).          
-00000a60: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00000a70: 2e61 7070 656e 6428 227d 2229 0a20 2020  .append("}").   
-00000a80: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00000a90: 6620 6973 696e 7374 616e 6365 2869 7465  f isinstance(ite
-00000aa0: 6d2c 204d 6172 6b75 7043 6f6d 6d61 6e64  m, MarkupCommand
-00000ab0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00000ac0: 2020 2020 2020 2073 7472 696e 6720 3d20         string = 
-00000ad0: 6974 656d 2e5f 6765 745f 6c69 6c79 706f  item._get_lilypo
-00000ae0: 6e64 5f66 6f72 6d61 7428 290a 2020 2020  nd_format().    
+00000110: 6f72 7420 5f69 6e64 656e 746c 6962 0a66  ort _indentlib.f
+00000120: 726f 6d20 2e2e 2069 6d70 6f72 7420 6269  rom .. import bi
+00000130: 6e64 2061 7320 5f62 696e 640a 6672 6f6d  nd as _bind.from
+00000140: 202e 2e20 696d 706f 7274 2064 7572 6174   .. import durat
+00000150: 696f 6e20 6173 205f 6475 7261 7469 6f6e  ion as _duration
+00000160: 0a66 726f 6d20 2e2e 2069 6d70 6f72 7420  .from .. import 
+00000170: 6479 6e61 6d69 6320 6173 205f 6479 6e61  dynamic as _dyna
+00000180: 6d69 630a 6672 6f6d 202e 2e20 696d 706f  mic.from .. impo
+00000190: 7274 2065 7863 6570 7469 6f6e 7320 6173  rt exceptions as
+000001a0: 205f 6578 6365 7074 696f 6e73 0a66 726f   _exceptions.fro
+000001b0: 6d20 2e2e 2069 6d70 6f72 7420 696e 6469  m .. import indi
+000001c0: 6361 746f 7273 2061 7320 5f69 6e64 6963  cators as _indic
+000001d0: 6174 6f72 730a 6672 6f6d 202e 2e20 696d  ators.from .. im
+000001e0: 706f 7274 206c 696c 7970 6f6e 6466 696c  port lilypondfil
+000001f0: 6520 6173 205f 6c69 6c79 706f 6e64 6669  e as _lilypondfi
+00000200: 6c65 0a66 726f 6d20 2e2e 2069 6d70 6f72  le.from .. impor
+00000210: 7420 6c79 636f 6e73 7420 6173 205f 6c79  t lyconst as _ly
+00000220: 636f 6e73 740a 6672 6f6d 202e 2e20 696d  const.from .. im
+00000230: 706f 7274 206c 7965 6e76 2061 7320 5f6c  port lyenv as _l
+00000240: 7965 6e76 0a66 726f 6d20 2e2e 2069 6d70  yenv.from .. imp
+00000250: 6f72 7420 7069 7463 6820 6173 205f 7069  ort pitch as _pi
+00000260: 7463 680a 6672 6f6d 202e 2e20 696d 706f  tch.from .. impo
+00000270: 7274 2073 636f 7265 2061 7320 5f73 636f  rt score as _sco
+00000280: 7265 0a66 726f 6d20 2e2e 2069 6d70 6f72  re.from .. impor
+00000290: 7420 7374 7269 6e67 2061 7320 5f73 7472  t string as _str
+000002a0: 696e 670a 6672 6f6d 202e 6261 7365 2069  ing.from .base i
+000002b0: 6d70 6f72 7420 5061 7273 6572 0a66 726f  mport Parser.fro
+000002c0: 6d20 2e73 6368 656d 6520 696d 706f 7274  m .scheme import
+000002d0: 2053 6368 656d 6550 6172 7365 720a 0a0a   SchemeParser...
+000002e0: 636c 6173 7320 4c69 6c79 506f 6e64 4475  class LilyPondDu
+000002f0: 7261 7469 6f6e 3a0a 2020 2020 2222 220a  ration:.    """.
+00000300: 2020 2020 4d6f 6465 6c20 6f66 2061 2064      Model of a d
+00000310: 7572 6174 696f 6e20 696e 204c 696c 7950  uration in LilyP
+00000320: 6f6e 642e 0a0a 2020 2020 4e6f 7420 636f  ond...    Not co
+00000330: 6d70 6f73 6572 2d73 6166 652e 0a0a 2020  mposer-safe...  
+00000340: 2020 5573 6564 2069 6e74 6572 6e61 6c6c    Used internall
+00000350: 7920 6279 204c 696c 7950 6f6e 6450 6172  y by LilyPondPar
+00000360: 7365 722e 0a20 2020 2022 2222 0a0a 2020  ser..    """..  
+00000370: 2020 2323 2320 434c 4153 5320 5641 5249    ### CLASS VARI
+00000380: 4142 4c45 5320 2323 230a 0a20 2020 205f  ABLES ###..    _
+00000390: 5f73 6c6f 7473 5f5f 203d 2028 2264 7572  _slots__ = ("dur
+000003a0: 6174 696f 6e22 2c20 226d 756c 7469 706c  ation", "multipl
+000003b0: 6965 7222 290a 0a20 2020 2023 2323 2049  ier")..    ### I
+000003c0: 4e49 5449 414c 495a 4552 2023 2323 0a0a  NITIALIZER ###..
+000003d0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+000003e0: 2873 656c 662c 2064 7572 6174 696f 6e3d  (self, duration=
+000003f0: 4e6f 6e65 2c20 6d75 6c74 6970 6c69 6572  None, multiplier
+00000400: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00000410: 7365 6c66 2e64 7572 6174 696f 6e20 3d20  self.duration = 
+00000420: 6475 7261 7469 6f6e 0a20 2020 2020 2020  duration.       
+00000430: 2073 656c 662e 6d75 6c74 6970 6c69 6572   self.multiplier
+00000440: 203d 206d 756c 7469 706c 6965 720a 0a0a   = multiplier...
+00000450: 5f6c 7965 6e76 2e63 7572 7265 6e74 5f6d  _lyenv.current_m
+00000460: 6f64 756c 655b 2262 7265 7665 225d 203d  odule["breve"] =
+00000470: 204c 696c 7950 6f6e 6444 7572 6174 696f   LilyPondDuratio
+00000480: 6e28 5f64 7572 6174 696f 6e2e 4475 7261  n(_duration.Dura
+00000490: 7469 6f6e 2832 2c20 3129 2c20 4e6f 6e65  tion(2, 1), None
+000004a0: 290a 5f6c 7965 6e76 2e63 7572 7265 6e74  )._lyenv.current
+000004b0: 5f6d 6f64 756c 655b 226c 6f6e 6761 225d  _module["longa"]
+000004c0: 203d 204c 696c 7950 6f6e 6444 7572 6174   = LilyPondDurat
+000004d0: 696f 6e28 5f64 7572 6174 696f 6e2e 4475  ion(_duration.Du
+000004e0: 7261 7469 6f6e 2834 2c20 3129 2c20 4e6f  ration(4, 1), No
+000004f0: 6e65 290a 5f6c 7965 6e76 2e63 7572 7265  ne)._lyenv.curre
+00000500: 6e74 5f6d 6f64 756c 655b 226d 6178 696d  nt_module["maxim
+00000510: 6122 5d20 3d20 4c69 6c79 506f 6e64 4475  a"] = LilyPondDu
+00000520: 7261 7469 6f6e 285f 6475 7261 7469 6f6e  ration(_duration
+00000530: 2e44 7572 6174 696f 6e28 382c 2031 292c  .Duration(8, 1),
+00000540: 204e 6f6e 6529 0a0a 0a63 6c61 7373 204d   None)...class M
+00000550: 6172 6b75 7043 6f6d 6d61 6e64 3a0a 2020  arkupCommand:.  
+00000560: 2020 2222 220a 2020 2020 4c69 6c79 506f    """.    LilyPo
+00000570: 6e64 206d 6172 6b75 7020 636f 6d6d 616e  nd markup comman
+00000580: 642e 0a20 2020 2022 2222 0a0a 2020 2020  d..    """..    
+00000590: 5f5f 736c 6f74 735f 5f20 3d20 2822 6172  __slots__ = ("ar
+000005a0: 6775 6d65 6e74 7322 2c20 226e 616d 6522  guments", "name"
+000005b0: 290a 0a20 2020 2064 6566 205f 5f69 6e69  )..    def __ini
+000005c0: 745f 5f28 7365 6c66 2c20 6e61 6d65 3d4e  t__(self, name=N
+000005d0: 6f6e 652c 202a 6172 6775 6d65 6e74 7329  one, *arguments)
+000005e0: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
+000005f0: 2069 7369 6e73 7461 6e63 6528 6e61 6d65   isinstance(name
+00000600: 2c20 7374 7229 2c20 7265 7072 286e 616d  , str), repr(nam
+00000610: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+00000620: 6e61 6d65 203d 206e 616d 650a 2020 2020  name = name.    
+00000630: 2020 2020 7365 6c66 2e61 7267 756d 656e      self.argumen
+00000640: 7473 203d 2074 7570 6c65 2861 7267 756d  ts = tuple(argum
+00000650: 656e 7473 290a 0a20 2020 2064 6566 205f  ents)..    def _
+00000660: 5f65 715f 5f28 7365 6c66 2c20 6172 6775  _eq__(self, argu
+00000670: 6d65 6e74 293a 0a20 2020 2020 2020 2022  ment):.        "
+00000680: 2222 0a20 2020 2020 2020 2049 7320 7472  "".        Is tr
+00000690: 7565 2077 6865 6e20 6060 6172 6775 6d65  ue when ``argume
+000006a0: 6e74 6060 2069 7320 6120 6d61 726b 7570  nt`` is a markup
+000006b0: 2063 6f6d 6d61 6e64 2077 6974 6820 6e61   command with na
+000006c0: 6d65 2061 6e64 2061 7267 756d 656e 7473  me and arguments
+000006d0: 2065 7175 616c 2074 6f0a 2020 2020 2020   equal to.      
+000006e0: 2020 7468 6f73 6520 6f66 2074 6869 7320    those of this 
+000006f0: 6d61 726b 7570 2063 6f6d 6d61 6e64 2e0a  markup command..
+00000700: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00000710: 2020 2020 2320 6465 6669 6e65 6420 6578      # defined ex
+00000720: 706c 6963 6974 6c79 2062 6563 6175 7365  plicitly because
+00000730: 206f 6620 696e 6974 6961 6c69 7a65 7220   of initializer 
+00000740: 2a61 7267 756d 656e 7473 0a20 2020 2020  *arguments.     
+00000750: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00000760: 2861 7267 756d 656e 742c 2074 7970 6528  (argument, type(
+00000770: 7365 6c66 2929 3a0a 2020 2020 2020 2020  self)):.        
+00000780: 2020 2020 6966 2073 656c 662e 6e61 6d65      if self.name
+00000790: 203d 3d20 6172 6775 6d65 6e74 2e6e 616d   == argument.nam
+000007a0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000007b0: 2020 2069 6620 7365 6c66 2e61 7267 756d     if self.argum
+000007c0: 656e 7473 203d 3d20 6172 6775 6d65 6e74  ents == argument
+000007d0: 2e61 7267 756d 656e 7473 3a0a 2020 2020  .arguments:.    
+000007e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000007f0: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+00000800: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00000810: 0a0a 2020 2020 6465 6620 5f5f 6861 7368  ..    def __hash
+00000820: 5f5f 2873 656c 6629 3a0a 2020 2020 2020  __(self):.      
+00000830: 2020 2222 220a 2020 2020 2020 2020 4861    """.        Ha
+00000840: 7368 6573 206d 6172 6b75 7020 636f 6d6d  shes markup comm
+00000850: 616e 642e 0a20 2020 2020 2020 2022 2222  and..        """
+00000860: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00000870: 6861 7368 2873 656c 662e 5f5f 636c 6173  hash(self.__clas
+00000880: 735f 5f2e 5f5f 6e61 6d65 5f5f 202b 2073  s__.__name__ + s
+00000890: 7472 2873 656c 6629 290a 0a20 2020 2064  tr(self))..    d
+000008a0: 6566 205f 5f72 6570 725f 5f28 7365 6c66  ef __repr__(self
+000008b0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
+000008c0: 2020 2020 2020 2047 6574 7320 7265 7072         Gets repr
+000008d0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+000008e0: 2020 2020 2020 7265 7475 726e 2028 0a20        return (. 
+000008f0: 2020 2020 2020 2020 2020 2066 227b 7479             f"{ty
+00000900: 7065 2873 656c 6629 2e5f 5f6e 616d 655f  pe(self).__name_
+00000910: 5f7d 286e 616d 653d 7b73 656c 662e 6e61  _}(name={self.na
+00000920: 6d65 2172 7d2c 2061 7267 756d 656e 7473  me!r}, arguments
+00000930: 3d7b 7365 6c66 2e61 7267 756d 656e 7473  ={self.arguments
+00000940: 2172 7d29 220a 2020 2020 2020 2020 290a  !r})".        ).
+00000950: 0a20 2020 2064 6566 205f 6765 745f 6c69  .    def _get_li
+00000960: 6c79 706f 6e64 5f66 6f72 6d61 7428 7365  lypond_format(se
+00000970: 6c66 293a 0a20 2020 2020 2020 2064 6566  lf):.        def
+00000980: 2072 6563 7572 7365 2869 7465 7261 626c   recurse(iterabl
+00000990: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+000009a0: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
+000009b0: 2020 2020 2020 2020 666f 7220 6974 656d          for item
+000009c0: 2069 6e20 6974 6572 6162 6c65 3a0a 2020   in iterable:.  
+000009d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000009e0: 2069 7369 6e73 7461 6e63 6528 6974 656d   isinstance(item
+000009f0: 2c20 6c69 7374 207c 2074 7570 6c65 293a  , list | tuple):
+00000a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000a10: 2020 2020 2072 6573 756c 742e 6170 7065       result.appe
+00000a20: 6e64 2822 7b22 290a 2020 2020 2020 2020  nd("{").        
+00000a30: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00000a40: 6c74 2e65 7874 656e 6428 7265 6375 7273  lt.extend(recurs
+00000a50: 6528 6974 656d 2929 0a20 2020 2020 2020  e(item)).       
+00000a60: 2020 2020 2020 2020 2020 2020 2072 6573               res
+00000a70: 756c 742e 6170 7065 6e64 2822 7d22 290a  ult.append("}").
+00000a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000a90: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+00000aa0: 6974 656d 2c20 4d61 726b 7570 436f 6d6d  item, MarkupComm
+00000ab0: 616e 6429 3a0a 2020 2020 2020 2020 2020  and):.          
+00000ac0: 2020 2020 2020 2020 2020 7374 7269 6e67            string
+00000ad0: 203d 2069 7465 6d2e 5f67 6574 5f6c 696c   = item._get_lil
+00000ae0: 7970 6f6e 645f 666f 726d 6174 2829 0a20  ypond_format(). 
 00000af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000b00: 7069 6563 6573 203d 2073 7472 696e 672e  pieces = string.
-00000b10: 7370 6c69 7428 225c 6e22 290a 2020 2020  split("\n").    
+00000b00: 2020 2070 6965 6365 7320 3d20 7374 7269     pieces = stri
+00000b10: 6e67 2e73 706c 6974 2822 5c6e 2229 0a20  ng.split("\n"). 
 00000b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000b30: 7265 7375 6c74 2e65 7874 656e 6428 7069  result.extend(pi
-00000b40: 6563 6573 290a 2020 2020 2020 2020 2020  eces).          
-00000b50: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-00000b60: 7461 6e63 6528 6974 656d 2c20 7374 7229  tance(item, str)
-00000b70: 2061 6e64 2022 5c6e 2220 696e 2069 7465   and "\n" in ite
-00000b80: 6d3a 0a20 2020 2020 2020 2020 2020 2020  m:.             
-00000b90: 2020 2020 2020 2072 6573 756c 742e 6170         result.ap
-00000ba0: 7065 6e64 2827 2322 2729 0a20 2020 2020  pend('#"').     
-00000bb0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00000bc0: 6573 756c 742e 6578 7465 6e64 2869 7465  esult.extend(ite
-00000bd0: 6d2e 7370 6c69 746c 696e 6573 2829 290a  m.splitlines()).
-00000be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000bf0: 2020 2020 7265 7375 6c74 2e61 7070 656e      result.appen
-00000c00: 6428 2722 2729 0a20 2020 2020 2020 2020  d('"').         
-00000c10: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00000b30: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
+00000b40: 2870 6965 6365 7329 0a20 2020 2020 2020  (pieces).       
+00000b50: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
+00000b60: 696e 7374 616e 6365 2869 7465 6d2c 2073  instance(item, s
+00000b70: 7472 2920 616e 6420 225c 6e22 2069 6e20  tr) and "\n" in 
+00000b80: 6974 656d 3a0a 2020 2020 2020 2020 2020  item:.          
+00000b90: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00000ba0: 2e61 7070 656e 6428 2723 2227 290a 2020  .append('#"').  
+00000bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000bc0: 2020 7265 7375 6c74 2e65 7874 656e 6428    result.extend(
+00000bd0: 6974 656d 2e73 706c 6974 6c69 6e65 7328  item.splitlines(
+00000be0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00000bf0: 2020 2020 2020 2072 6573 756c 742e 6170         result.ap
+00000c00: 7065 6e64 2827 2227 290a 2020 2020 2020  pend('"').      
+00000c10: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
 00000c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000c30: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
-00000c40: 6365 2869 7465 6d2c 2073 7472 292c 2072  ce(item, str), r
-00000c50: 6570 7228 6974 656d 290a 2020 2020 2020  epr(item).      
-00000c60: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00000c70: 7375 6c74 2e61 7070 656e 6428 6974 656d  sult.append(item
-00000c80: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00000c90: 7475 726e 205b 6622 7b69 6e64 656e 747d  turn [f"{indent}
-00000ca0: 7b69 7465 6d7d 2220 666f 7220 6974 656d  {item}" for item
-00000cb0: 2069 6e20 7265 7375 6c74 5d0a 0a20 2020   in result]..   
-00000cc0: 2020 2020 2069 6e64 656e 7420 3d20 5f69       indent = _i
-00000cd0: 6e64 656e 742e 494e 4445 4e54 0a20 2020  ndent.INDENT.   
-00000ce0: 2020 2020 2070 6172 7473 203d 205b 7266       parts = [rf
-00000cf0: 225c 7b73 656c 662e 6e61 6d65 7d22 5d0a  "\{self.name}"].
-00000d00: 2020 2020 2020 2020 7061 7274 732e 6578          parts.ex
-00000d10: 7465 6e64 2872 6563 7572 7365 2873 656c  tend(recurse(sel
-00000d20: 662e 6172 6775 6d65 6e74 7329 290a 2020  f.arguments)).  
-00000d30: 2020 2020 2020 7374 7269 6e67 203d 2022        string = "
-00000d40: 5c6e 222e 6a6f 696e 2870 6172 7473 290a  \n".join(parts).
-00000d50: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00000d60: 7472 696e 670a 0a0a 636c 6173 7320 4d75  tring...class Mu
-00000d70: 7369 633a 0a20 2020 2022 2222 0a20 2020  sic:.    """.   
-00000d80: 2041 626a 6164 206d 6f64 656c 206f 6620   Abjad model of 
-00000d90: 7468 6520 4c69 6c79 506f 6e64 2041 5354  the LilyPond AST
-00000da0: 206d 7573 6963 206e 6f64 652e 0a20 2020   music node..   
-00000db0: 2022 2222 0a0a 2020 2020 2323 2320 434c   """..    ### CL
-00000dc0: 4153 5320 5641 5249 4142 4c45 5320 2323  ASS VARIABLES ##
-00000dd0: 230a 0a20 2020 205f 5f73 6c6f 7473 5f5f  #..    __slots__
-00000de0: 203d 2028 226d 7573 6963 222c 290a 0a20   = ("music",).. 
-00000df0: 2020 2023 2323 2049 4e49 5449 414c 495a     ### INITIALIZ
-00000e00: 4552 2023 2323 0a0a 2020 2020 6465 6620  ER ###..    def 
-00000e10: 5f5f 696e 6974 5f5f 2873 656c 662c 206d  __init__(self, m
-00000e20: 7573 6963 3d4e 6f6e 6529 3a0a 2020 2020  usic=None):.    
-00000e30: 2020 2020 7365 6c66 2e6d 7573 6963 203d      self.music =
-00000e40: 206d 7573 6963 0a0a 0a63 6c61 7373 2043   music...class C
-00000e50: 6f6e 7465 7874 5370 6563 6365 644d 7573  ontextSpeccedMus
-00000e60: 6963 284d 7573 6963 293a 0a20 2020 2022  ic(Music):.    "
-00000e70: 2222 0a20 2020 2041 626a 6164 206d 6f64  "".    Abjad mod
-00000e80: 656c 206f 6620 7468 6520 4c69 6c79 506f  el of the LilyPo
-00000e90: 6e64 2041 5354 2063 6f6e 7465 7874 2d73  nd AST context-s
-00000ea0: 7065 6363 6564 206d 7573 6963 206e 6f64  pecced music nod
-00000eb0: 652e 0a20 2020 2022 2222 0a0a 2020 2020  e..    """..    
-00000ec0: 2323 2320 434c 4153 5320 5641 5249 4142  ### CLASS VARIAB
-00000ed0: 4c45 5320 2323 230a 0a20 2020 205f 5f73  LES ###..    __s
-00000ee0: 6c6f 7473 5f5f 203d 2028 0a20 2020 2020  lots__ = (.     
-00000ef0: 2020 2023 2022 636f 6e74 6578 7422 2c0a     # "context",.
-00000f00: 2020 2020 2020 2020 226c 696c 7970 6f6e          "lilypon
-00000f10: 645f 7479 7065 222c 0a20 2020 2020 2020  d_type",.       
-00000f20: 2022 6d75 7369 6322 2c0a 2020 2020 2020   "music",.      
-00000f30: 2020 226f 7074 696f 6e61 6c5f 6964 222c    "optional_id",
-00000f40: 0a20 2020 2020 2020 2022 6f70 7469 6f6e  .        "option
-00000f50: 616c 5f63 6f6e 7465 7874 5f6d 6f64 222c  al_context_mod",
-00000f60: 0a20 2020 2029 0a0a 2020 2020 2323 2320  .    )..    ### 
-00000f70: 494e 4954 4941 4c49 5a45 5220 2323 230a  INITIALIZER ###.
-00000f80: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-00000f90: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
-00000fa0: 0a20 2020 2020 2020 206c 696c 7970 6f6e  .        lilypon
-00000fb0: 645f 7479 7065 3d4e 6f6e 652c 0a20 2020  d_type=None,.   
-00000fc0: 2020 2020 206f 7074 696f 6e61 6c5f 6964       optional_id
-00000fd0: 3d4e 6f6e 652c 0a20 2020 2020 2020 206f  =None,.        o
-00000fe0: 7074 696f 6e61 6c5f 636f 6e74 6578 745f  ptional_context_
-00000ff0: 6d6f 643d 4e6f 6e65 2c0a 2020 2020 2020  mod=None,.      
-00001000: 2020 6d75 7369 633d 4e6f 6e65 2c0a 2020    music=None,.  
-00001010: 2020 293a 0a20 2020 2020 2020 206c 696c    ):.        lil
-00001020: 7970 6f6e 645f 7479 7065 203d 206c 696c  ypond_type = lil
-00001030: 7970 6f6e 645f 7479 7065 206f 7220 2222  ypond_type or ""
-00001040: 0a20 2020 2020 2020 206d 7573 6963 203d  .        music =
-00001050: 206d 7573 6963 206f 7220 5365 7175 656e   music or Sequen
-00001060: 7469 616c 4d75 7369 6328 290a 2020 2020  tialMusic().    
-00001070: 2020 2020 6173 7365 7274 2069 7369 6e73      assert isins
-00001080: 7461 6e63 6528 6d75 7369 632c 204d 7573  tance(music, Mus
-00001090: 6963 290a 2020 2020 2020 2020 7365 6c66  ic).        self
-000010a0: 2e6c 696c 7970 6f6e 645f 7479 7065 203d  .lilypond_type =
-000010b0: 206c 696c 7970 6f6e 645f 7479 7065 0a20   lilypond_type. 
-000010c0: 2020 2020 2020 2073 656c 662e 6f70 7469         self.opti
-000010d0: 6f6e 616c 5f69 6420 3d20 6f70 7469 6f6e  onal_id = option
-000010e0: 616c 5f69 640a 2020 2020 2020 2020 7365  al_id.        se
-000010f0: 6c66 2e6f 7074 696f 6e61 6c5f 636f 6e74  lf.optional_cont
-00001100: 6578 745f 6d6f 6420 3d20 6f70 7469 6f6e  ext_mod = option
-00001110: 616c 5f63 6f6e 7465 7874 5f6d 6f64 0a20  al_context_mod. 
-00001120: 2020 2020 2020 2073 656c 662e 6d75 7369         self.musi
-00001130: 6320 3d20 6d75 7369 630a 0a20 2020 2023  c = music..    #
-00001140: 2323 2050 5542 4c49 4320 4d45 5448 4f44  ## PUBLIC METHOD
-00001150: 5320 2323 230a 0a20 2020 2064 6566 2063  S ###..    def c
-00001160: 6f6e 7374 7275 6374 2873 656c 6629 3a0a  onstruct(self):.
-00001170: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00001180: 2020 2020 436f 6e73 7472 7563 7473 2063      Constructs c
-00001190: 6f6e 7465 7874 2e0a 0a20 2020 2020 2020  ontext...       
-000011a0: 2052 6574 7572 6e73 2063 6f6e 7465 7874   Returns context
-000011b0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-000011c0: 2020 2020 2020 6966 2073 656c 662e 6c69        if self.li
-000011d0: 6c79 706f 6e64 5f74 7970 6520 696e 2073  lypond_type in s
-000011e0: 656c 662e 6b6e 6f77 6e5f 636f 6e74 6578  elf.known_contex
-000011f0: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-00001200: 636f 6e74 6578 7420 3d20 7365 6c66 2e6b  context = self.k
-00001210: 6e6f 776e 5f63 6f6e 7465 7874 735b 7365  nown_contexts[se
-00001220: 6c66 2e6c 696c 7970 6f6e 645f 7479 7065  lf.lilypond_type
-00001230: 5d28 5b5d 290a 2020 2020 2020 2020 656c  ]([]).        el
-00001240: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00001250: 7261 6973 6520 4578 6365 7074 696f 6e28  raise Exception(
-00001260: 6622 636f 6e74 6578 7420 7479 7065 206e  f"context type n
-00001270: 6f74 2073 7570 706f 7274 6564 3a20 7b73  ot supported: {s
-00001280: 656c 662e 6c69 6c79 706f 6e64 5f74 7970  elf.lilypond_typ
-00001290: 657d 2e22 290a 0a20 2020 2020 2020 2069  e}.")..        i
-000012a0: 6620 7365 6c66 2e6f 7074 696f 6e61 6c5f  f self.optional_
-000012b0: 6964 2069 7320 6e6f 7420 4e6f 6e65 3a0a  id is not None:.
-000012c0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-000012d0: 6578 742e 6e61 6d65 203d 2073 656c 662e  ext.name = self.
-000012e0: 6f70 7469 6f6e 616c 5f69 640a 0a20 2020  optional_id..   
-000012f0: 2020 2020 2069 6620 7365 6c66 2e6f 7074       if self.opt
-00001300: 696f 6e61 6c5f 636f 6e74 6578 745f 6d6f  ional_context_mo
-00001310: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
-00001320: 2020 2020 2020 2020 2020 2066 6f72 2078             for x
-00001330: 2069 6e20 7365 6c66 2e6f 7074 696f 6e61   in self.optiona
-00001340: 6c5f 636f 6e74 6578 745f 6d6f 643a 0a20  l_context_mod:. 
-00001350: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00001360: 7269 6e74 2878 290a 2020 2020 2020 2020  rint(x).        
-00001370: 2020 2020 2320 544f 444f 3a20 696d 706c      # TODO: impl
-00001380: 656d 656e 7420 636f 6e74 6578 7420 6d6f  ement context mo
-00001390: 6469 6669 6361 7469 6f6e 7320 6f6e 2063  difications on c
-000013a0: 6f6e 7465 7874 730a 2020 2020 2020 2020  ontexts.        
-000013b0: 2020 2020 7061 7373 0a0a 2020 2020 2020      pass..      
-000013c0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-000013d0: 7365 6c66 2e6d 7573 6963 2c20 5369 6d75  self.music, Simu
-000013e0: 6c74 616e 656f 7573 4d75 7369 6329 3a0a  ltaneousMusic):.
-000013f0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-00001400: 6578 742e 7369 6d75 6c74 616e 656f 7573  ext.simultaneous
-00001410: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
-00001420: 2320 636f 6e74 6578 742e 6578 7465 6e64  # context.extend
-00001430: 286d 7573 6963 2e63 6f6e 7374 7275 6374  (music.construct
-00001440: 2829 290a 2020 2020 2020 2020 636f 6e74  ()).        cont
-00001450: 6578 742e 6578 7465 6e64 2873 656c 662e  ext.extend(self.
-00001460: 6d75 7369 632e 636f 6e73 7472 7563 7428  music.construct(
-00001470: 2929 0a0a 2020 2020 2020 2020 7265 7475  ))..        retu
-00001480: 726e 2063 6f6e 7465 7874 0a0a 2020 2020  rn context..    
-00001490: 2323 2320 5055 424c 4943 2050 524f 5045  ### PUBLIC PROPE
-000014a0: 5254 4945 5320 2323 230a 0a20 2020 2040  RTIES ###..    @
-000014b0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
-000014c0: 206b 6e6f 776e 5f63 6f6e 7465 7874 7328   known_contexts(
-000014d0: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-000014e0: 2222 0a20 2020 2020 2020 204b 6e6f 776e  "".        Known
-000014f0: 2063 6f6e 7465 7874 732e 0a0a 2020 2020   contexts...    
-00001500: 2020 2020 5265 7475 726e 7320 6469 6374      Returns dict
-00001510: 696f 6e61 7279 2e0a 2020 2020 2020 2020  ionary..        
-00001520: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
-00001530: 726e 207b 0a20 2020 2020 2020 2020 2020  rn {.           
-00001540: 2022 4368 6f69 7253 7461 6666 223a 205f   "ChoirStaff": _
-00001550: 7363 6f72 652e 5374 6166 6647 726f 7570  score.StaffGroup
-00001560: 2c0a 2020 2020 2020 2020 2020 2020 2247  ,.            "G
-00001570: 7261 6e64 5374 6166 6622 3a20 5f73 636f  randStaff": _sco
-00001580: 7265 2e53 7461 6666 4772 6f75 702c 0a20  re.StaffGroup,. 
-00001590: 2020 2020 2020 2020 2020 2022 5069 616e             "Pian
-000015a0: 6f53 7461 6666 223a 205f 7363 6f72 652e  oStaff": _score.
-000015b0: 5374 6166 6647 726f 7570 2c0a 2020 2020  StaffGroup,.    
-000015c0: 2020 2020 2020 2020 2253 636f 7265 223a          "Score":
-000015d0: 205f 7363 6f72 652e 5363 6f72 652c 0a20   _score.Score,. 
-000015e0: 2020 2020 2020 2020 2020 2022 5374 6166             "Staf
-000015f0: 6622 3a20 5f73 636f 7265 2e53 7461 6666  f": _score.Staff
-00001600: 2c0a 2020 2020 2020 2020 2020 2020 2253  ,.            "S
-00001610: 7461 6666 4772 6f75 7022 3a20 5f73 636f  taffGroup": _sco
-00001620: 7265 2e53 7461 6666 4772 6f75 702c 0a20  re.StaffGroup,. 
-00001630: 2020 2020 2020 2020 2020 2022 566f 6963             "Voic
-00001640: 6522 3a20 5f73 636f 7265 2e56 6f69 6365  e": _score.Voice
-00001650: 2c0a 2020 2020 2020 2020 7d0a 0a0a 636c  ,.        }...cl
-00001660: 6173 7320 4775 696c 6550 726f 7879 3a0a  ass GuileProxy:.
-00001670: 2020 2020 2222 220a 2020 2020 456d 756c      """.    Emul
-00001680: 6174 6573 204c 696c 7950 6f6e 6420 6d75  ates LilyPond mu
-00001690: 7369 6320 6675 6e63 7469 6f6e 732e 0a0a  sic functions...
-000016a0: 2020 2020 5573 6564 2069 6e74 6572 6e61      Used interna
-000016b0: 6c6c 7920 6279 204c 696c 7950 6f6e 6450  lly by LilyPondP
-000016c0: 6172 7365 722e 0a0a 2020 2020 4e6f 7420  arser...    Not 
-000016d0: 636f 6d70 6f73 6572 2d73 6166 652e 0a20  composer-safe.. 
-000016e0: 2020 2022 2222 0a0a 2020 2020 2323 2320     """..    ### 
-000016f0: 434c 4153 5320 5641 5249 4142 4c45 5320  CLASS VARIABLES 
-00001700: 2323 230a 0a20 2020 205f 6675 6e63 7469  ###..    _functi
-00001710: 6f6e 5f6e 616d 655f 6d61 7070 696e 673a  on_name_mapping:
-00001720: 2064 6963 745b 7374 722c 2074 7970 696e   dict[str, typin
-00001730: 672e 4361 6c6c 6162 6c65 5d20 3d20 7b7d  g.Callable] = {}
-00001740: 0a0a 2020 2020 2323 2320 494e 4954 4941  ..    ### INITIA
-00001750: 4c49 5a45 5220 2323 230a 0a20 2020 2064  LIZER ###..    d
-00001760: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00001770: 2c20 636c 6965 6e74 3d4e 6f6e 6529 3a0a  , client=None):.
-00001780: 2020 2020 2020 2020 7365 6c66 2e63 6c69          self.cli
-00001790: 656e 7420 3d20 636c 6965 6e74 0a0a 2020  ent = client..  
-000017a0: 2020 2323 2320 5350 4543 4941 4c20 4d45    ### SPECIAL ME
-000017b0: 5448 4f44 5320 2323 230a 0a20 2020 2064  THODS ###..    d
-000017c0: 6566 205f 5f63 616c 6c5f 5f28 7365 6c66  ef __call__(self
-000017d0: 2c20 6675 6e63 7469 6f6e 5f6e 616d 652c  , function_name,
-000017e0: 2061 7267 756d 656e 7473 293a 0a20 2020   arguments):.   
-000017f0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00001800: 2043 616c 6c73 2047 7569 6c65 2070 726f   Calls Guile pro
-00001810: 7879 206f 6e20 6060 6675 6e63 7469 6f6e  xy on ``function
-00001820: 5f6e 616d 6560 6020 7769 7468 2060 6061  _name`` with ``a
-00001830: 7267 756d 656e 7473 6060 2e0a 0a20 2020  rguments``...   
-00001840: 2020 2020 2052 6574 7572 6e73 2066 756e       Returns fun
-00001850: 6374 696f 6e20 6f75 7470 7574 2e0a 2020  ction output..  
-00001860: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00001870: 2020 6966 2068 6173 6174 7472 2873 656c    if hasattr(sel
-00001880: 662c 2066 756e 6374 696f 6e5f 6e61 6d65  f, function_name
-00001890: 5b31 3a5d 293a 0a20 2020 2020 2020 2020  [1:]):.         
-000018a0: 2020 2072 6573 756c 7420 3d20 6765 7461     result = geta
-000018b0: 7474 7228 7365 6c66 2c20 6675 6e63 7469  ttr(self, functi
-000018c0: 6f6e 5f6e 616d 655b 313a 5d29 282a 6172  on_name[1:])(*ar
-000018d0: 6775 6d65 6e74 7329 0a20 2020 2020 2020  guments).       
-000018e0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-000018f0: 6c74 0a20 2020 2020 2020 2065 6c69 6620  lt.        elif 
-00001900: 6675 6e63 7469 6f6e 5f6e 616d 655b 313a  function_name[1:
-00001910: 5d20 696e 2073 656c 662e 5f66 756e 6374  ] in self._funct
-00001920: 696f 6e5f 6e61 6d65 5f6d 6170 7069 6e67  ion_name_mapping
-00001930: 3a0a 2020 2020 2020 2020 2020 2020 6675  :.            fu
-00001940: 6e63 7469 6f6e 5f6e 616d 6520 3d20 6675  nction_name = fu
-00001950: 6e63 7469 6f6e 5f6e 616d 655b 313a 5d0a  nction_name[1:].
-00001960: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00001970: 6c74 203d 2067 6574 6174 7472 2873 656c  lt = getattr(sel
-00001980: 662c 2066 756e 6374 696f 6e5f 6e61 6d65  f, function_name
-00001990: 2928 2a61 7267 756d 656e 7473 290a 2020  )(*arguments).  
-000019a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000019b0: 2072 6573 756c 740a 2020 2020 2020 2020   result.        
-000019c0: 6d65 7373 6167 6520 3d20 6622 4c69 6c79  message = f"Lily
-000019d0: 506f 6e64 5061 7273 6572 2063 616e 206e  PondParser can n
-000019e0: 6f74 2065 6d75 6c61 7465 206d 7573 6963  ot emulate music
-000019f0: 2066 756e 6374 696f 6e3a 207b 6675 6e63   function: {func
-00001a00: 7469 6f6e 5f6e 616d 657d 2e22 0a20 2020  tion_name}.".   
-00001a10: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
-00001a20: 7469 6f6e 286d 6573 7361 6765 290a 0a20  tion(message).. 
-00001a30: 2020 2023 2323 2046 554e 4354 494f 4e20     ### FUNCTION 
-00001a40: 454d 554c 4154 4f52 5320 2323 230a 0a20  EMULATORS ###.. 
-00001a50: 2020 2064 6566 2061 6363 6961 6363 6174     def acciaccat
-00001a60: 7572 6128 7365 6c66 2c20 6d75 7369 6329  ura(self, music)
-00001a70: 3a0a 2020 2020 2020 2020 7222 2222 0a20  :.        r""". 
-00001a80: 2020 2020 2020 2048 616e 646c 6573 204c         Handles L
-00001a90: 696c 7950 6f6e 6420 6060 5c61 6363 6961  ilyPond ``\accia
-00001aa0: 6363 6174 7572 6160 6020 636f 6d6d 616e  ccatura`` comman
-00001ab0: 642e 0a20 2020 2020 2020 2022 2222 0a20  d..        """. 
-00001ac0: 2020 2020 2020 2067 7261 6365 203d 205f         grace = _
-00001ad0: 7363 6f72 652e 4265 666f 7265 4772 6163  score.BeforeGrac
-00001ae0: 6543 6f6e 7461 696e 6572 286d 7573 6963  eContainer(music
-00001af0: 5b3a 5d2c 2063 6f6d 6d61 6e64 3d72 225c  [:], command=r"\
-00001b00: 6163 6369 6163 6361 7475 7261 2229 0a20  acciaccatura"). 
-00001b10: 2020 2020 2020 2072 6574 7572 6e20 6772         return gr
-00001b20: 6163 650a 0a20 2020 2023 2061 6674 6572  ace..    # after
-00001b30: 4772 6163 653f 0a0a 2020 2020 6465 6620  Grace?..    def 
-00001b40: 6170 706f 6767 6961 7475 7261 2873 656c  appoggiatura(sel
-00001b50: 662c 206d 7573 6963 293a 0a20 2020 2020  f, music):.     
-00001b60: 2020 2072 2222 220a 2020 2020 2020 2020     r""".        
-00001b70: 4861 6e64 6c65 7320 4c69 6c79 506f 6e64  Handles LilyPond
-00001b80: 2060 605c 6170 706f 6767 6961 7475 7261   ``\appoggiatura
-00001b90: 6060 2063 6f6d 6d61 6e64 2e0a 2020 2020  `` command..    
-00001ba0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00001bb0: 6772 6163 6520 3d20 5f73 636f 7265 2e42  grace = _score.B
-00001bc0: 6566 6f72 6547 7261 6365 436f 6e74 6169  eforeGraceContai
-00001bd0: 6e65 7228 6d75 7369 635b 3a5d 2c20 636f  ner(music[:], co
-00001be0: 6d6d 616e 643d 7222 5c61 7070 6f67 6769  mmand=r"\appoggi
-00001bf0: 6174 7572 6122 290a 2020 2020 2020 2020  atura").        
-00001c00: 7265 7475 726e 2067 7261 6365 0a0a 2020  return grace..  
-00001c10: 2020 6465 6620 6261 7228 7365 6c66 2c20    def bar(self, 
-00001c20: 7374 7269 6e67 293a 0a20 2020 2020 2020  string):.       
-00001c30: 2072 2222 220a 2020 2020 2020 2020 4861   r""".        Ha
-00001c40: 6e64 6c65 7320 4c69 6c79 506f 6e64 2060  ndles LilyPond `
-00001c50: 605c 6261 7260 6020 636f 6d6d 616e 642e  `\bar`` command.
-00001c60: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00001c70: 2020 2020 2072 6574 7572 6e20 5f69 6e64       return _ind
-00001c80: 6963 6174 6f72 732e 4261 724c 696e 6528  icators.BarLine(
-00001c90: 7374 7269 6e67 290a 0a20 2020 2064 6566  string)..    def
-00001ca0: 2062 7265 6174 6865 2873 656c 6629 3a0a   breathe(self):.
-00001cb0: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
-00001cc0: 2020 2020 2048 616e 646c 6573 204c 696c       Handles Lil
-00001cd0: 7950 6f6e 6420 6060 5c62 7265 6174 6865  yPond ``\breathe
-00001ce0: 6060 2063 6f6d 6d61 6e64 2e0a 2020 2020  `` command..    
-00001cf0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00001d00: 7265 7475 726e 205f 696e 6469 6361 746f  return _indicato
-00001d10: 7273 2e4c 696c 7950 6f6e 644c 6974 6572  rs.LilyPondLiter
-00001d20: 616c 2872 225c 6272 6561 7468 6522 2c20  al(r"\breathe", 
-00001d30: 2261 6674 6572 2229 0a0a 2020 2020 6465  "after")..    de
-00001d40: 6620 636c 6566 2873 656c 662c 2073 7472  f clef(self, str
-00001d50: 696e 6729 3a0a 2020 2020 2020 2020 7222  ing):.        r"
-00001d60: 2222 0a20 2020 2020 2020 2048 616e 646c  "".        Handl
-00001d70: 6573 204c 696c 7950 6f6e 6420 6060 5c63  es LilyPond ``\c
-00001d80: 6c65 6660 6020 636f 6d6d 616e 642e 0a20  lef`` command.. 
-00001d90: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00001da0: 2020 2072 6574 7572 6e20 5f69 6e64 6963     return _indic
-00001db0: 6174 6f72 732e 436c 6566 2873 7472 696e  ators.Clef(strin
-00001dc0: 6729 0a0a 2020 2020 6465 6620 6772 6163  g)..    def grac
-00001dd0: 6528 7365 6c66 2c20 6d75 7369 6329 3a0a  e(self, music):.
-00001de0: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
-00001df0: 2020 2020 2048 616e 646c 6573 204c 696c       Handles Lil
-00001e00: 7950 6f6e 6420 6060 5c67 7261 6365 6060  yPond ``\grace``
-00001e10: 2063 6f6d 6d61 6e64 2e0a 2020 2020 2020   command..      
-00001e20: 2020 2222 220a 2020 2020 2020 2020 6173    """.        as
-00001e30: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
-00001e40: 6d75 7369 632c 205f 7363 6f72 652e 436f  music, _score.Co
-00001e50: 6e74 6169 6e65 7229 0a20 2020 2020 2020  ntainer).       
-00001e60: 206c 6561 7665 7320 3d20 6d75 7369 635b   leaves = music[
-00001e70: 3a5d 0a20 2020 2020 2020 206d 7573 6963  :].        music
-00001e80: 5b3a 5d20 3d20 5b5d 0a20 2020 2020 2020  [:] = [].       
-00001e90: 2072 6574 7572 6e20 5f73 636f 7265 2e42   return _score.B
-00001ea0: 6566 6f72 6547 7261 6365 436f 6e74 6169  eforeGraceContai
-00001eb0: 6e65 7228 6c65 6176 6573 290a 0a20 2020  ner(leaves)..   
-00001ec0: 2064 6566 206b 6579 2873 656c 662c 206e   def key(self, n
-00001ed0: 6f74 656e 616d 655f 7069 7463 682c 206e  otename_pitch, n
-00001ee0: 756d 6265 725f 6c69 7374 293a 0a20 2020  umber_list):.   
-00001ef0: 2020 2020 2072 2222 220a 2020 2020 2020       r""".      
-00001f00: 2020 4861 6e64 6c65 7320 4c69 6c79 506f    Handles LilyPo
-00001f10: 6e64 2060 605c 6b65 7960 6020 636f 6d6d  nd ``\key`` comm
-00001f20: 616e 642e 0a20 2020 2020 2020 2022 2222  and..        """
-00001f30: 0a20 2020 2020 2020 2069 6620 6e75 6d62  .        if numb
-00001f40: 6572 5f6c 6973 7420 6973 204e 6f6e 653a  er_list is None:
-00001f50: 0a20 2020 2020 2020 2020 2020 206e 756d  .            num
-00001f60: 6265 725f 6c69 7374 203d 2022 6d61 6a6f  ber_list = "majo
-00001f70: 7222 0a20 2020 2020 2020 2072 6574 7572  r".        retur
-00001f80: 6e20 5f69 6e64 6963 6174 6f72 732e 4b65  n _indicators.Ke
-00001f90: 7953 6967 6e61 7475 7265 280a 2020 2020  ySignature(.    
-00001fa0: 2020 2020 2020 2020 5f70 6974 6368 2e4e          _pitch.N
-00001fb0: 616d 6564 5069 7463 6843 6c61 7373 286e  amedPitchClass(n
-00001fc0: 6f74 656e 616d 655f 7069 7463 6829 2c20  otename_pitch), 
-00001fd0: 5f69 6e64 6963 6174 6f72 732e 4d6f 6465  _indicators.Mode
-00001fe0: 286e 756d 6265 725f 6c69 7374 290a 2020  (number_list).  
-00001ff0: 2020 2020 2020 290a 0a20 2020 2064 6566        )..    def
-00002000: 206c 616e 6775 6167 6528 7365 6c66 2c20   language(self, 
-00002010: 7374 7269 6e67 293a 0a20 2020 2020 2020  string):.       
-00002020: 2072 2222 220a 2020 2020 2020 2020 4861   r""".        Ha
-00002030: 6e64 6c65 7320 4c69 6c79 506f 6e64 2060  ndles LilyPond `
-00002040: 605c 6c61 6e67 7561 6765 6060 2063 6f6d  `\language`` com
-00002050: 6d61 6e64 2e0a 2020 2020 2020 2020 2222  mand..        ""
-00002060: 220a 2020 2020 2020 2020 6966 2073 7472  ".        if str
-00002070: 696e 6720 696e 2073 656c 662e 636c 6965  ing in self.clie
-00002080: 6e74 2e5f 6c61 6e67 7561 6765 5f70 6974  nt._language_pit
-00002090: 6368 5f6e 616d 6573 3a0a 2020 2020 2020  ch_names:.      
-000020a0: 2020 2020 2020 7365 6c66 2e63 6c69 656e        self.clien
-000020b0: 742e 5f70 6974 6368 5f6e 616d 6573 203d  t._pitch_names =
-000020c0: 2073 656c 662e 636c 6965 6e74 2e5f 6c61   self.client._la
-000020d0: 6e67 7561 6765 5f70 6974 6368 5f6e 616d  nguage_pitch_nam
-000020e0: 6573 5b73 7472 696e 675d 0a20 2020 2020  es[string].     
-000020f0: 2020 2023 2074 7279 2072 6570 6172 7369     # try reparsi
-00002100: 6e67 2074 6865 206e 6578 7420 6e6f 7465  ng the next note
-00002110: 206e 616d 652c 2069 6620 6120 6e6f 7465   name, if a note
-00002120: 206e 616d 6520 696d 6d65 6469 6174 656c   name immediatel
-00002130: 7920 666f 6c6c 6f77 730a 2020 2020 2020  y follows.      
-00002140: 2020 6c6f 6f6b 6168 6561 6420 3d20 7365    lookahead = se
-00002150: 6c66 2e63 6c69 656e 742e 5f70 6172 7365  lf.client._parse
-00002160: 722e 6c6f 6f6b 6168 6561 640a 2020 2020  r.lookahead.    
-00002170: 2020 2020 6966 206c 6f6f 6b61 6865 6164      if lookahead
-00002180: 2e74 7970 6520 3d3d 2022 5354 5249 4e47  .type == "STRING
-00002190: 223a 0a20 2020 2020 2020 2020 2020 2069  ":.            i
-000021a0: 6620 6c6f 6f6b 6168 6561 642e 7661 6c75  f lookahead.valu
-000021b0: 6520 696e 2073 656c 662e 636c 6965 6e74  e in self.client
-000021c0: 2e5f 7069 7463 685f 6e61 6d65 733a 0a20  ._pitch_names:. 
-000021d0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-000021e0: 6f6f 6b61 6865 6164 2e74 7970 6520 3d20  ookahead.type = 
-000021f0: 224e 4f54 454e 414d 455f 5049 5443 4822  "NOTENAME_PITCH"
-00002200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002210: 206c 6f6f 6b61 6865 6164 2e76 616c 7565   lookahead.value
-00002220: 203d 205f 7069 7463 682e 4e61 6d65 6450   = _pitch.NamedP
-00002230: 6974 6368 436c 6173 7328 0a20 2020 2020  itchClass(.     
-00002240: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00002250: 656c 662e 636c 6965 6e74 2e5f 7069 7463  elf.client._pitc
-00002260: 685f 6e61 6d65 735b 6c6f 6f6b 6168 6561  h_names[lookahea
-00002270: 642e 7661 6c75 655d 0a20 2020 2020 2020  d.value].       
-00002280: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
-00002290: 6465 6620 6d61 6b65 436c 7573 7465 7273  def makeClusters
-000022a0: 2873 656c 662c 206d 7573 6963 293a 0a20  (self, music):. 
-000022b0: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
-000022c0: 2020 2020 4861 6e64 6c65 7320 4c69 6c79      Handles Lily
-000022d0: 506f 6e64 2060 605c 6d61 6b65 436c 7573  Pond ``\makeClus
-000022e0: 7465 7273 6060 2063 6f6d 6d61 6e64 2e0a  ters`` command..
-000022f0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00002300: 2020 2020 7265 7475 726e 205f 7363 6f72      return _scor
-00002310: 652e 436c 7573 7465 7228 6d75 7369 635b  e.Cluster(music[
-00002320: 3a5d 290a 0a20 2020 2064 6566 206d 6172  :])..    def mar
-00002330: 6b28 7365 6c66 2c20 6c61 6265 6c29 3a0a  k(self, label):.
-00002340: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
-00002350: 2020 2020 2048 616e 646c 6573 204c 696c       Handles Lil
-00002360: 7950 6f6e 6420 6060 5c6d 6172 6b60 6020  yPond ``\mark`` 
-00002370: 636f 6d6d 616e 642e 0a20 2020 2020 2020  command..       
-00002380: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
-00002390: 6c61 6265 6c20 6973 204e 6f6e 653a 0a20  label is None:. 
-000023a0: 2020 2020 2020 2020 2020 206c 6162 656c             label
-000023b0: 203d 2072 225c 6465 6661 756c 7422 0a20   = r"\default". 
-000023c0: 2020 2020 2020 2072 6574 7572 6e20 5f69         return _i
-000023d0: 6e64 6963 6174 6f72 732e 4c69 6c79 506f  ndicators.LilyPo
-000023e0: 6e64 4c69 7465 7261 6c28 7222 5c6d 6172  ndLiteral(r"\mar
-000023f0: 6b20 2573 2220 2520 6c61 6265 6c29 0a0a  k %s" % label)..
-00002400: 2020 2020 6465 6620 6f6e 6556 6f69 6365      def oneVoice
-00002410: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00002420: 7222 2222 0a20 2020 2020 2020 2048 616e  r""".        Han
-00002430: 646c 6573 204c 696c 7950 6f6e 6420 6060  dles LilyPond ``
-00002440: 5c6f 6e65 566f 6963 6560 6020 636f 6d6d  \oneVoice`` comm
-00002450: 616e 642e 0a20 2020 2020 2020 2022 2222  and..        """
-00002460: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00002470: 5f69 6e64 6963 6174 6f72 732e 4c69 6c79  _indicators.Lily
-00002480: 506f 6e64 4c69 7465 7261 6c28 7222 5c6f  PondLiteral(r"\o
-00002490: 6e65 566f 6963 6522 290a 0a20 2020 2023  neVoice")..    #
-000024a0: 2070 6974 6368 6564 5472 696c 6c0a 0a20   pitchedTrill.. 
-000024b0: 2020 2064 6566 2072 656c 6174 6976 6528     def relative(
-000024c0: 7365 6c66 2c20 7069 7463 682c 206d 7573  self, pitch, mus
-000024d0: 6963 293a 0a20 2020 2020 2020 2072 2222  ic):.        r""
-000024e0: 220a 2020 2020 2020 2020 4861 6e64 6c65  ".        Handle
-000024f0: 7320 4c69 6c79 506f 6e64 2060 605c 7265  s LilyPond ``\re
-00002500: 6c61 7469 7665 6060 2063 6f6d 6d61 6e64  lative`` command
-00002510: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-00002520: 2020 2020 2020 2320 5765 2073 686f 756c        # We shoul
-00002530: 6420 616c 7761 7973 206b 6565 7020 7472  d always keep tr
-00002540: 6163 6b20 6f66 2074 6865 206c 6173 7420  ack of the last 
-00002550: 6368 6f72 6420 656e 7465 7265 642e 0a20  chord entered.. 
-00002560: 2020 2020 2020 2023 2057 6865 6e20 7468         # When th
-00002570: 6572 6520 6172 6520 7265 7065 6174 6564  ere are repeated
-00002580: 2063 686f 7264 7320 2876 6961 2071 292c   chords (via q),
-00002590: 0a20 2020 2020 2020 2023 2077 6520 6164  .        # we ad
-000025a0: 6420 7468 6520 6c61 7374 2063 686f 7264  d the last chord
-000025b0: 2061 7320 6120 6b65 7920 696e 2061 205f   as a key in a _
-000025c0: 7265 7065 6174 6564 5f63 686f 7264 7320  repeated_chords 
-000025d0: 6469 6374 696f 6e61 7279 2e0a 2020 2020  dictionary..    
-000025e0: 2020 2020 2320 5468 656e 2c20 7765 2061      # Then, we a
-000025f0: 7373 6f63 6961 7465 2061 206c 6973 7420  ssociate a list 
-00002600: 7769 7468 2074 6865 2063 686f 7264 2022  with the chord "
-00002610: 6b65 7922 2069 6e20 7468 6520 6469 6374  key" in the dict
-00002620: 2c0a 2020 2020 2020 2020 2320 616e 6420  ,.        # and 
-00002630: 6170 7065 6e64 2061 2072 6566 6572 656e  append a referen
-00002640: 6365 2074 6f20 7468 6520 7265 7065 6174  ce to the repeat
-00002650: 6564 2063 686f 7264 2e0a 0a20 2020 2020  ed chord...     
-00002660: 2020 2023 2053 686f 756c 6420 7468 6520     # Should the 
-00002670: 7265 6665 7265 6e63 6564 2063 686f 7264  referenced chord
-00002680: 2061 7070 6561 7220 696e 2061 2072 656c   appear in a rel
-00002690: 6174 6976 6520 626c 6f63 6b2c 0a20 2020  ative block,.   
-000026a0: 2020 2020 2023 2077 6520 7265 6c61 7469       # we relati
-000026b0: 7669 7a65 2074 6861 7420 6368 6f72 642c  vize that chord,
-000026c0: 2061 6e64 2075 7064 6174 6520 616e 7920   and update any 
-000026d0: 7265 7065 6174 6564 2063 686f 7264 730a  repeated chords.
-000026e0: 2020 2020 2020 2020 2320 7765 2776 6520          # we've 
-000026f0: 6164 6465 6420 746f 2069 7473 206c 6973  added to its lis
-00002700: 7420 6f66 2072 6566 6572 656e 6369 6e67  t of referencing
-00002710: 2063 686f 7264 732e 0a0a 2020 2020 2020   chords...      
-00002720: 2020 2320 5468 6520 7061 7273 6572 2773    # The parser's
-00002730: 2022 6c61 7374 5f63 686f 7264 2220 7661   "last_chord" va
-00002740: 7269 6162 6c65 2077 696c 6c20 6e6f 7720  riable will now 
-00002750: 7265 666c 6563 7420 7468 650a 2020 2020  reflect the.    
-00002760: 2020 2020 2320 7265 6c61 7469 7669 7a65      # relativize
-00002770: 6420 7069 7463 6865 7320 6f66 2074 6865  d pitches of the
-00002780: 206f 7269 6769 6e61 6c20 7265 6665 7265   original refere
-00002790: 6e63 6564 2063 686f 7264 2c0a 2020 2020  nced chord,.    
-000027a0: 2020 2020 2320 616e 6420 736f 2061 6e79      # and so any
-000027b0: 206e 6577 2063 686f 7264 2072 6570 6574   new chord repet
-000027c0: 6974 696f 6e73 2066 6f6c 6c6f 7769 6e67  itions following
-000027d0: 2074 6865 205c 7265 6c61 7469 7665 2062   the \relative b
-000027e0: 6c6f 636b 0a20 2020 2020 2020 2023 2073  lock.        # s
-000027f0: 686f 756c 6420 7265 7375 6c74 2069 6e20  hould result in 
-00002800: 6d61 7463 6869 6e67 2061 6273 6f6c 7574  matching absolut
-00002810: 6520 7069 7463 6865 7320 746f 2062 6f74  e pitches to bot
-00002820: 6820 7468 6520 226c 6173 745f 6368 6f72  h the "last_chor
-00002830: 6422 0a20 2020 2020 2020 2023 2061 6e64  d".        # and
-00002840: 2061 6e79 206f 7468 6572 2072 6570 6574   any other repet
-00002850: 6974 696f 6e73 2e0a 0a20 2020 2020 2020  itions...       
-00002860: 2069 6620 7365 6c66 2e5f 6973 5f75 6e72   if self._is_unr
-00002870: 656c 6174 6976 6162 6c65 286d 7573 6963  elativable(music
-00002880: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00002890: 6574 7572 6e20 6d75 7369 630a 0a20 2020  eturn music..   
-000028a0: 2020 2020 2064 6566 2072 6563 7572 7365       def recurse
-000028b0: 2863 6f6d 706f 6e65 6e74 2c20 7069 7463  (component, pitc
-000028c0: 6829 3a0a 2020 2020 2020 2020 2020 2020  h):.            
-000028d0: 6966 2073 656c 662e 5f69 735f 756e 7265  if self._is_unre
-000028e0: 6c61 7469 7661 626c 6528 636f 6d70 6f6e  lativable(compon
-000028f0: 656e 7429 3a0a 2020 2020 2020 2020 2020  ent):.          
-00002900: 2020 2020 2020 7265 7475 726e 2070 6974        return pit
-00002910: 6368 0a20 2020 2020 2020 2020 2020 2065  ch.            e
-00002920: 6c69 6620 6973 696e 7374 616e 6365 2863  lif isinstance(c
-00002930: 6f6d 706f 6e65 6e74 2c20 5f73 636f 7265  omponent, _score
-00002940: 2e43 686f 7264 207c 205f 7363 6f72 652e  .Chord | _score.
-00002950: 4e6f 7465 293a 0a20 2020 2020 2020 2020  Note):.         
-00002960: 2020 2020 2020 2070 6974 6368 203d 2073         pitch = s
-00002970: 656c 662e 5f6d 616b 655f 7265 6c61 7469  elf._make_relati
-00002980: 7665 5f6c 6561 6628 636f 6d70 6f6e 656e  ve_leaf(componen
-00002990: 742c 2070 6974 6368 290a 2020 2020 2020  t, pitch).      
-000029a0: 2020 2020 2020 2020 2020 6966 2063 6f6d            if com
-000029b0: 706f 6e65 6e74 2069 6e20 7365 6c66 2e63  ponent in self.c
-000029c0: 6c69 656e 742e 5f72 6570 6561 7465 645f  lient._repeated_
-000029d0: 6368 6f72 6473 3a0a 2020 2020 2020 2020  chords:.        
-000029e0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-000029f0: 7265 7065 6174 6564 5f63 686f 7264 2069  repeated_chord i
-00002a00: 6e20 7365 6c66 2e63 6c69 656e 742e 5f72  n self.client._r
-00002a10: 6570 6561 7465 645f 6368 6f72 6473 5b63  epeated_chords[c
-00002a20: 6f6d 706f 6e65 6e74 5d3a 0a20 2020 2020  omponent]:.     
-00002a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002a40: 2020 2072 6570 6561 7465 645f 6368 6f72     repeated_chor
-00002a50: 642e 7772 6974 7465 6e5f 7069 7463 6865  d.written_pitche
-00002a60: 7320 3d20 636f 6d70 6f6e 656e 742e 7772  s = component.wr
-00002a70: 6974 7465 6e5f 7069 7463 6865 730a 2020  itten_pitches.  
-00002a80: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00002a90: 7369 6e73 7461 6e63 6528 636f 6d70 6f6e  sinstance(compon
-00002aa0: 656e 742c 205f 7363 6f72 652e 436f 6e74  ent, _score.Cont
-00002ab0: 6169 6e65 7229 3a0a 2020 2020 2020 2020  ainer):.        
-00002ac0: 2020 2020 2020 2020 666f 7220 6368 696c          for chil
-00002ad0: 6420 696e 2063 6f6d 706f 6e65 6e74 3a0a  d in component:.
-00002ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002af0: 2020 2020 7069 7463 6820 3d20 7265 6375      pitch = recu
-00002b00: 7273 6528 6368 696c 642c 2070 6974 6368  rse(child, pitch
-00002b10: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00002b20: 7475 726e 2070 6974 6368 0a0a 2020 2020  turn pitch..    
-00002b30: 2020 2020 7069 7463 6820 3d20 7265 6375      pitch = recu
-00002b40: 7273 6528 6d75 7369 632c 2070 6974 6368  rse(music, pitch
-00002b50: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00002b60: 5f6d 616b 655f 756e 7265 6c61 7469 7661  _make_unrelativa
-00002b70: 626c 6528 6d75 7369 6329 0a0a 2020 2020  ble(music)..    
-00002b80: 2020 2020 7265 7475 726e 206d 7573 6963      return music
-00002b90: 0a0a 2020 2020 6465 6620 736b 6970 2873  ..    def skip(s
-00002ba0: 656c 662c 2064 7572 6174 696f 6e29 3a0a  elf, duration):.
-00002bb0: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
-00002bc0: 2020 2020 2048 616e 646c 6573 204c 696c       Handles Lil
-00002bd0: 7950 6f6e 6420 6060 5c73 6b69 7060 6020  yPond ``\skip`` 
-00002be0: 636f 6d6d 616e 642e 0a20 2020 2020 2020  command..       
-00002bf0: 2022 2222 0a20 2020 2020 2020 206c 6561   """.        lea
-00002c00: 6620 3d20 5f73 636f 7265 2e53 6b69 7028  f = _score.Skip(
-00002c10: 6475 7261 7469 6f6e 2e64 7572 6174 696f  duration.duratio
-00002c20: 6e29 0a20 2020 2020 2020 2069 6620 6475  n).        if du
-00002c30: 7261 7469 6f6e 2e6d 756c 7469 706c 6965  ration.multiplie
-00002c40: 7220 6973 206e 6f74 204e 6f6e 653a 0a20  r is not None:. 
-00002c50: 2020 2020 2020 2020 2020 205f 6269 6e64             _bind
-00002c60: 2e61 7474 6163 6828 6475 7261 7469 6f6e  .attach(duration
-00002c70: 2e6d 756c 7469 706c 6965 722c 206c 6561  .multiplier, lea
-00002c80: 6629 0a20 2020 2020 2020 2072 6574 7572  f).        retur
-00002c90: 6e20 6c65 6166 0a0a 2020 2020 6465 6620  n leaf..    def 
-00002ca0: 736c 6173 6865 645f 6772 6163 655f 636f  slashed_grace_co
-00002cb0: 6e74 6169 6e65 7228 7365 6c66 2c20 6d75  ntainer(self, mu
-00002cc0: 7369 6329 3a0a 2020 2020 2020 2020 7222  sic):.        r"
-00002cd0: 2222 0a20 2020 2020 2020 2048 616e 646c  "".        Handl
-00002ce0: 6573 204c 696c 7950 6f6e 6420 6060 5c73  es LilyPond ``\s
-00002cf0: 6c61 7368 6564 4772 6163 6560 6020 636f  lashedGrace`` co
-00002d00: 6d6d 616e 642e 0a20 2020 2020 2020 2022  mmand..        "
-00002d10: 2222 0a20 2020 2020 2020 2067 7261 6365  "".        grace
-00002d20: 203d 205f 7363 6f72 652e 4265 666f 7265   = _score.Before
-00002d30: 4772 6163 6543 6f6e 7461 696e 6572 286d  GraceContainer(m
-00002d40: 7573 6963 5b3a 5d29 0a20 2020 2020 2020  usic[:]).       
-00002d50: 2072 6574 7572 6e20 6772 6163 650a 0a20   return grace.. 
-00002d60: 2020 2064 6566 2074 696d 6528 7365 6c66     def time(self
-00002d70: 2c20 6e75 6d62 6572 5f6c 6973 742c 2066  , number_list, f
-00002d80: 7261 6374 696f 6e29 3a0a 2020 2020 2020  raction):.      
-00002d90: 2020 7222 2222 0a20 2020 2020 2020 2048    r""".        H
-00002da0: 616e 646c 6573 204c 696c 7950 6f6e 6420  andles LilyPond 
-00002db0: 6060 5c74 696d 6560 6020 636f 6d6d 616e  ``\time`` comman
-00002dc0: 642e 0a20 2020 2020 2020 2022 2222 0a20  d..        """. 
-00002dd0: 2020 2020 2020 206e 2c20 6420 3d20 6672         n, d = fr
-00002de0: 6163 7469 6f6e 2e6e 756d 6572 6174 6f72  action.numerator
-00002df0: 2c20 6672 6163 7469 6f6e 2e64 656e 6f6d  , fraction.denom
-00002e00: 696e 6174 6f72 0a20 2020 2020 2020 2072  inator.        r
-00002e10: 6574 7572 6e20 5f69 6e64 6963 6174 6f72  eturn _indicator
-00002e20: 732e 5469 6d65 5369 676e 6174 7572 6528  s.TimeSignature(
-00002e30: 286e 2c20 6429 290a 0a20 2020 2064 6566  (n, d))..    def
-00002e40: 2074 696d 6573 2873 656c 662c 2066 7261   times(self, fra
-00002e50: 6374 696f 6e2c 206d 7573 6963 293a 0a20  ction, music):. 
-00002e60: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
-00002e70: 2020 2020 4861 6e64 6c65 7320 4c69 6c79      Handles Lily
-00002e80: 506f 6e64 2060 605c 7469 6d65 7360 6020  Pond ``\times`` 
-00002e90: 636f 6d6d 616e 642e 0a20 2020 2020 2020  command..       
-00002ea0: 2022 2222 0a20 2020 2020 2020 206e 2c20   """.        n, 
-00002eb0: 6420 3d20 6672 6163 7469 6f6e 2e6e 756d  d = fraction.num
-00002ec0: 6572 6174 6f72 2c20 6672 6163 7469 6f6e  erator, fraction
-00002ed0: 2e64 656e 6f6d 696e 6174 6f72 0a20 2020  .denominator.   
-00002ee0: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
-00002ef0: 7374 616e 6365 286d 7573 6963 2c20 5f73  stance(music, _s
-00002f00: 636f 7265 2e43 6f6e 7465 7874 2920 616e  core.Context) an
-00002f10: 6420 6e6f 7420 6973 696e 7374 616e 6365  d not isinstance
-00002f20: 286d 7573 6963 2c20 5f73 636f 7265 2e4c  (music, _score.L
-00002f30: 6561 6629 3a0a 2020 2020 2020 2020 2020  eaf):.          
-00002f40: 2020 6173 7365 7274 2069 7369 6e73 7461    assert isinsta
-00002f50: 6e63 6528 6d75 7369 632c 205f 7363 6f72  nce(music, _scor
-00002f60: 652e 436f 6e74 6169 6e65 7229 2c20 7265  e.Container), re
-00002f70: 7072 286d 7573 6963 290a 2020 2020 2020  pr(music).      
-00002f80: 2020 2020 2020 6c65 6176 6573 203d 206d        leaves = m
-00002f90: 7573 6963 5b3a 5d0a 2020 2020 2020 2020  usic[:].        
-00002fa0: 2020 2020 6d75 7369 635b 3a5d 203d 205b      music[:] = [
-00002fb0: 5d0a 2020 2020 2020 2020 2020 2020 7265  ].            re
-00002fc0: 7475 726e 205f 7363 6f72 652e 5475 706c  turn _score.Tupl
-00002fd0: 6574 2828 6e2c 2064 292c 206c 6561 7665  et((n, d), leave
-00002fe0: 7329 0a20 2020 2020 2020 2072 6574 7572  s).        retur
-00002ff0: 6e20 5f73 636f 7265 2e54 7570 6c65 7428  n _score.Tuplet(
-00003000: 286e 2c20 6429 2c20 5b6d 7573 6963 5d29  (n, d), [music])
-00003010: 0a0a 2020 2020 6465 6620 7472 616e 7370  ..    def transp
-00003020: 6f73 6528 7365 6c66 2c20 6672 6f6d 5f70  ose(self, from_p
-00003030: 6974 6368 2c20 746f 5f70 6974 6368 2c20  itch, to_pitch, 
-00003040: 6d75 7369 6329 3a0a 2020 2020 2020 2020  music):.        
-00003050: 7222 2222 0a20 2020 2020 2020 2048 616e  r""".        Han
-00003060: 646c 6573 204c 696c 7950 6f6e 6420 6060  dles LilyPond ``
-00003070: 5c74 7261 6e73 706f 7365 6060 2063 6f6d  \transpose`` com
-00003080: 6d61 6e64 2e0a 2020 2020 2020 2020 2222  mand..        ""
-00003090: 220a 0a20 2020 2020 2020 2064 6566 2072  "..        def r
-000030a0: 6563 7572 7365 286d 7573 6963 293a 0a20  ecurse(music):. 
-000030b0: 2020 2020 2020 2020 2020 206b 6579 5f73             key_s
-000030c0: 6967 6e61 7475 7265 7320 3d20 6d75 7369  ignatures = musi
-000030d0: 632e 5f67 6574 5f69 6e64 6963 6174 6f72  c._get_indicator
-000030e0: 7328 5f69 6e64 6963 6174 6f72 732e 4b65  s(_indicators.Ke
-000030f0: 7953 6967 6e61 7475 7265 290a 2020 2020  ySignature).    
-00003100: 2020 2020 2020 2020 6966 206b 6579 5f73          if key_s
-00003110: 6967 6e61 7475 7265 733a 0a20 2020 2020  ignatures:.     
-00003120: 2020 2020 2020 2020 2020 2066 6f72 206b             for k
-00003130: 6579 5f73 6967 6e61 7475 7265 2069 6e20  ey_signature in 
-00003140: 6b65 795f 7369 676e 6174 7572 6573 3a0a  key_signatures:.
-00003150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003160: 2020 2020 6e65 775f 746f 6e69 6320 3d20      new_tonic = 
-00003170: 5f70 6974 6368 2e4e 616d 6564 5069 7463  _pitch.NamedPitc
-00003180: 6828 286b 6579 5f73 6967 6e61 7475 7265  h((key_signature
-00003190: 2e74 6f6e 6963 2e6e 616d 652c 2034 2929  .tonic.name, 4))
-000031a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000031b0: 2020 2020 206e 6577 5f74 6f6e 6963 203d       new_tonic =
-000031c0: 204c 696c 7950 6f6e 6450 6172 7365 722e   LilyPondParser.
-000031d0: 5f74 7261 6e73 706f 7365 5f65 6e68 6172  _transpose_enhar
-000031e0: 6d6f 6e69 6361 6c6c 7928 0a20 2020 2020  monically(.     
-000031f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003200: 2020 2066 726f 6d5f 7069 7463 682c 2074     from_pitch, t
-00003210: 6f5f 7069 7463 682c 206e 6577 5f74 6f6e  o_pitch, new_ton
-00003220: 6963 0a20 2020 2020 2020 2020 2020 2020  ic.             
-00003230: 2020 2020 2020 2029 2e70 6974 6368 5f63         ).pitch_c
-00003240: 6c61 7373 0a20 2020 2020 2020 2020 2020  lass.           
-00003250: 2020 2020 2020 2020 206e 6577 5f6b 6579           new_key
-00003260: 5f73 6967 6e61 7475 7265 203d 205f 696e  _signature = _in
-00003270: 6469 6361 746f 7273 2e4b 6579 5369 676e  dicators.KeySign
-00003280: 6174 7572 6528 0a20 2020 2020 2020 2020  ature(.         
-00003290: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-000032a0: 6577 5f74 6f6e 6963 2c20 6b65 795f 7369  ew_tonic, key_si
-000032b0: 676e 6174 7572 652e 6d6f 6465 0a20 2020  gnature.mode.   
-000032c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000032d0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
-000032e0: 2020 2020 2020 205f 6269 6e64 2e64 6574         _bind.det
-000032f0: 6163 6828 6b65 795f 7369 676e 6174 7572  ach(key_signatur
-00003300: 652c 206d 7573 6963 290a 2020 2020 2020  e, music).      
-00003310: 2020 2020 2020 2020 2020 2020 2020 5f62                _b
-00003320: 696e 642e 6174 7461 6368 286e 6577 5f6b  ind.attach(new_k
-00003330: 6579 5f73 6967 6e61 7475 7265 2c20 6d75  ey_signature, mu
-00003340: 7369 6329 0a20 2020 2020 2020 2020 2020  sic).           
-00003350: 2069 6620 6973 696e 7374 616e 6365 286d   if isinstance(m
-00003360: 7573 6963 2c20 5f73 636f 7265 2e4e 6f74  usic, _score.Not
-00003370: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00003380: 2020 2020 6d75 7369 632e 7772 6974 7465      music.writte
-00003390: 6e5f 7069 7463 6820 3d20 4c69 6c79 506f  n_pitch = LilyPo
-000033a0: 6e64 5061 7273 6572 2e5f 7472 616e 7370  ndParser._transp
-000033b0: 6f73 655f 656e 6861 726d 6f6e 6963 616c  ose_enharmonical
-000033c0: 6c79 280a 2020 2020 2020 2020 2020 2020  ly(.            
-000033d0: 2020 2020 2020 2020 6672 6f6d 5f70 6974          from_pit
-000033e0: 6368 2c20 746f 5f70 6974 6368 2c20 6d75  ch, to_pitch, mu
-000033f0: 7369 632e 7772 6974 7465 6e5f 7069 7463  sic.written_pitc
-00003400: 680a 2020 2020 2020 2020 2020 2020 2020  h.              
-00003410: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-00003420: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-00003430: 6d75 7369 632c 205f 7363 6f72 652e 4368  music, _score.Ch
-00003440: 6f72 6429 3a0a 2020 2020 2020 2020 2020  ord):.          
-00003450: 2020 2020 2020 666f 7220 6e6f 7465 5f68        for note_h
-00003460: 6561 6420 696e 206d 7573 6963 2e6e 6f74  ead in music.not
-00003470: 655f 6865 6164 733a 0a20 2020 2020 2020  e_heads:.       
-00003480: 2020 2020 2020 2020 2020 2020 206e 6f74               not
-00003490: 655f 6865 6164 2e77 7269 7474 656e 5f70  e_head.written_p
-000034a0: 6974 6368 203d 204c 696c 7950 6f6e 6450  itch = LilyPondP
-000034b0: 6172 7365 722e 5f74 7261 6e73 706f 7365  arser._transpose
-000034c0: 5f65 6e68 6172 6d6f 6e69 6361 6c6c 7928  _enharmonically(
-000034d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000034e0: 2020 2020 2020 2020 2066 726f 6d5f 7069           from_pi
-000034f0: 7463 682c 2074 6f5f 7069 7463 682c 206e  tch, to_pitch, n
-00003500: 6f74 655f 6865 6164 2e77 7269 7474 656e  ote_head.written
-00003510: 5f70 6974 6368 0a20 2020 2020 2020 2020  _pitch.         
-00003520: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00003530: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
-00003540: 696e 7374 616e 6365 286d 7573 6963 2c20  instance(music, 
-00003550: 5f73 636f 7265 2e43 6f6e 7461 696e 6572  _score.Container
-00003560: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00003570: 2020 2066 6f72 2063 6f6d 706f 6e65 6e74     for component
-00003580: 2069 6e20 6d75 7369 633a 0a20 2020 2020   in music:.     
-00003590: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000035a0: 6563 7572 7365 2863 6f6d 706f 6e65 6e74  ecurse(component
-000035b0: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-000035c0: 5f6d 616b 655f 756e 7265 6c61 7469 7661  _make_unrelativa
-000035d0: 626c 6528 6d75 7369 6329 0a20 2020 2020  ble(music).     
-000035e0: 2020 2072 6563 7572 7365 286d 7573 6963     recurse(music
-000035f0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00003600: 206d 7573 6963 0a0a 2020 2020 2320 7472   music..    # tr
-00003610: 616e 7370 6f73 6974 696f 6e0a 0a20 2020  ansposition..   
-00003620: 2064 6566 2074 7570 6c65 7428 7365 6c66   def tuplet(self
-00003630: 2c20 6672 6163 7469 6f6e 2c20 5f6f 7074  , fraction, _opt
-00003640: 696f 6e61 6c2c 206d 7573 6963 293a 0a20  ional, music):. 
-00003650: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
-00003660: 2020 2020 4861 6e64 6c65 7320 4c69 6c79      Handles Lily
-00003670: 506f 6e64 2060 605c 7475 706c 6574 6060  Pond ``\tuplet``
-00003680: 2063 6f6d 6d61 6e64 2e0a 0a20 2020 2020   command...     
-00003690: 2020 2054 6865 2060 605f 6f70 7469 6f6e     The ``_option
-000036a0: 616c 6060 2070 6172 616d 6574 6572 2061  al`` parameter a
-000036b0: 7070 6561 7273 2074 6f20 6765 7420 7061  ppears to get pa
-000036c0: 7373 6564 2069 6e20 6275 7420 6973 2075  ssed in but is u
-000036d0: 6e75 7365 642e 0a20 2020 2020 2020 2022  nused..        "
-000036e0: 2222 0a20 2020 2020 2020 206e 2c20 6420  "".        n, d 
-000036f0: 3d20 6672 6163 7469 6f6e 2e6e 756d 6572  = fraction.numer
-00003700: 6174 6f72 2c20 6672 6163 7469 6f6e 2e64  ator, fraction.d
-00003710: 656e 6f6d 696e 6174 6f72 0a20 2020 2020  enominator.     
-00003720: 2020 2073 7472 696e 6720 3d20 6622 7b6e     string = f"{n
-00003730: 7d3a 7b64 7d22 0a20 2020 2020 2020 2069  }:{d}".        i
-00003740: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-00003750: 286d 7573 6963 2c20 5f73 636f 7265 2e43  (music, _score.C
-00003760: 6f6e 7465 7874 2920 616e 6420 6e6f 7420  ontext) and not 
-00003770: 6973 696e 7374 616e 6365 286d 7573 6963  isinstance(music
-00003780: 2c20 5f73 636f 7265 2e4c 6561 6629 3a0a  , _score.Leaf):.
-00003790: 2020 2020 2020 2020 2020 2020 6173 7365              asse
-000037a0: 7274 2069 7369 6e73 7461 6e63 6528 6d75  rt isinstance(mu
-000037b0: 7369 632c 205f 7363 6f72 652e 436f 6e74  sic, _score.Cont
-000037c0: 6169 6e65 7229 2c20 7265 7072 286d 7573  ainer), repr(mus
-000037d0: 6963 290a 2020 2020 2020 2020 2020 2020  ic).            
-000037e0: 6c65 6176 6573 203d 206d 7573 6963 5b3a  leaves = music[:
-000037f0: 5d0a 2020 2020 2020 2020 2020 2020 6d75  ].            mu
-00003800: 7369 635b 3a5d 203d 205b 5d0a 2020 2020  sic[:] = [].    
-00003810: 2020 2020 2020 2020 7265 7475 726e 205f          return _
-00003820: 7363 6f72 652e 5475 706c 6574 2873 7472  score.Tuplet(str
-00003830: 696e 672c 206c 6561 7665 7329 0a20 2020  ing, leaves).   
-00003840: 2020 2020 2072 6574 7572 6e20 5f73 636f       return _sco
-00003850: 7265 2e54 7570 6c65 7428 7374 7269 6e67  re.Tuplet(string
-00003860: 2c20 5b6d 7573 6963 5d29 0a0a 2020 2020  , [music])..    
-00003870: 2320 7477 6561 6b0a 0a20 2020 2064 6566  # tweak..    def
-00003880: 2076 6f69 6365 466f 7572 2873 656c 6629   voiceFour(self)
-00003890: 3a0a 2020 2020 2020 2020 7222 2222 0a20  :.        r""". 
-000038a0: 2020 2020 2020 2048 616e 646c 6573 204c         Handles L
-000038b0: 696c 7950 6f6e 6420 6060 5c76 6f69 6365  ilyPond ``\voice
-000038c0: 466f 7572 6060 2063 6f6d 6d61 6e64 2e0a  Four`` command..
-000038d0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000038e0: 2020 2020 7265 7475 726e 205f 696e 6469      return _indi
-000038f0: 6361 746f 7273 2e4c 696c 7950 6f6e 644c  cators.LilyPondL
-00003900: 6974 6572 616c 2872 225c 766f 6963 6546  iteral(r"\voiceF
-00003910: 6f75 7222 290a 0a20 2020 2064 6566 2076  our")..    def v
-00003920: 6f69 6365 4f6e 6528 7365 6c66 293a 0a20  oiceOne(self):. 
-00003930: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
-00003940: 2020 2020 4861 6e64 6c65 7320 4c69 6c79      Handles Lily
-00003950: 506f 6e64 2060 605c 766f 6963 654f 6e63  Pond ``\voiceOnc
-00003960: 6560 6020 636f 6d6d 616e 642e 0a20 2020  e`` command..   
-00003970: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00003980: 2072 6574 7572 6e20 5f69 6e64 6963 6174   return _indicat
-00003990: 6f72 732e 4c69 6c79 506f 6e64 4c69 7465  ors.LilyPondLite
-000039a0: 7261 6c28 7222 5c76 6f69 6365 4f6e 6522  ral(r"\voiceOne"
-000039b0: 290a 0a20 2020 2064 6566 2076 6f69 6365  )..    def voice
-000039c0: 5468 7265 6528 7365 6c66 293a 0a20 2020  Three(self):.   
-000039d0: 2020 2020 2072 2222 220a 2020 2020 2020       r""".      
-000039e0: 2020 4861 6e64 6c65 7320 4c69 6c79 506f    Handles LilyPo
-000039f0: 6e64 2060 605c 766f 6963 6554 6872 6565  nd ``\voiceThree
-00003a00: 6060 2063 6f6d 6d61 6e64 2e0a 2020 2020  `` command..    
-00003a10: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00003a20: 7265 7475 726e 205f 696e 6469 6361 746f  return _indicato
-00003a30: 7273 2e4c 696c 7950 6f6e 644c 6974 6572  rs.LilyPondLiter
-00003a40: 616c 2872 225c 766f 6963 6554 6872 6565  al(r"\voiceThree
-00003a50: 2229 0a0a 2020 2020 6465 6620 766f 6963  ")..    def voic
-00003a60: 6554 776f 2873 656c 6629 3a0a 2020 2020  eTwo(self):.    
-00003a70: 2020 2020 7222 2222 0a20 2020 2020 2020      r""".       
-00003a80: 2048 616e 646c 6573 204c 696c 7950 6f6e   Handles LilyPon
-00003a90: 6420 6060 5c76 6f69 6365 5477 6f60 6020  d ``\voiceTwo`` 
-00003aa0: 636f 6d6d 616e 642e 0a20 2020 2020 2020  command..       
-00003ab0: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
-00003ac0: 7572 6e20 5f69 6e64 6963 6174 6f72 732e  urn _indicators.
-00003ad0: 4c69 6c79 506f 6e64 4c69 7465 7261 6c28  LilyPondLiteral(
-00003ae0: 7222 5c76 6f69 6365 5477 6f22 290a 0a20  r"\voiceTwo").. 
-00003af0: 2020 2023 2323 2048 454c 5045 5220 4655     ### HELPER FU
-00003b00: 4e43 5449 4f4e 5320 2323 230a 0a20 2020  NCTIONS ###..   
-00003b10: 2064 6566 205f 6973 5f75 6e72 656c 6174   def _is_unrelat
-00003b20: 6976 6162 6c65 2873 656c 662c 206d 7573  ivable(self, mus
-00003b30: 6963 293a 0a20 2020 2020 2020 2061 6e6e  ic):.        ann
-00003b40: 6f74 6174 696f 6e73 203d 206d 7573 6963  otations = music
-00003b50: 2e5f 6765 745f 696e 6469 6361 746f 7273  ._get_indicators
-00003b60: 2864 6963 7429 0a20 2020 2020 2020 206b  (dict).        k
-00003b70: 6579 7320 3d20 5b6c 6973 7428 5f2e 6b65  eys = [list(_.ke
-00003b80: 7973 2829 295b 305d 2066 6f72 205f 2069  ys())[0] for _ i
-00003b90: 6e20 616e 6e6f 7461 7469 6f6e 735d 0a20  n annotations]. 
-00003ba0: 2020 2020 2020 2069 6620 2255 6e72 656c         if "Unrel
-00003bb0: 6174 6976 6162 6c65 4d75 7369 6322 2069  ativableMusic" i
-00003bc0: 6e20 6b65 7973 3a0a 2020 2020 2020 2020  n keys:.        
-00003bd0: 2020 2020 7265 7475 726e 2054 7275 650a      return True.
-00003be0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00003bf0: 616c 7365 0a0a 2020 2020 6465 6620 5f6d  alse..    def _m
-00003c00: 616b 655f 7265 6c61 7469 7665 5f6c 6561  ake_relative_lea
-00003c10: 6628 7365 6c66 2c20 6c65 6166 2c20 7069  f(self, leaf, pi
-00003c20: 7463 6829 3a0a 2020 2020 2020 2020 6966  tch):.        if
-00003c30: 2073 656c 662e 5f69 735f 756e 7265 6c61   self._is_unrela
-00003c40: 7469 7661 626c 6528 6c65 6166 293a 0a20  tivable(leaf):. 
-00003c50: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00003c60: 6e20 7069 7463 680a 2020 2020 2020 2020  n pitch.        
-00003c70: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-00003c80: 6c65 6166 2c20 5f73 636f 7265 2e4e 6f74  leaf, _score.Not
-00003c90: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00003ca0: 7069 7463 6820 3d20 7365 6c66 2e5f 746f  pitch = self._to
-00003cb0: 5f72 656c 6174 6976 655f 6f63 7461 7665  _relative_octave
-00003cc0: 286c 6561 662e 7772 6974 7465 6e5f 7069  (leaf.written_pi
-00003cd0: 7463 682c 2070 6974 6368 290a 2020 2020  tch, pitch).    
-00003ce0: 2020 2020 2020 2020 6c65 6166 2e77 7269          leaf.wri
-00003cf0: 7474 656e 5f70 6974 6368 203d 2070 6974  tten_pitch = pit
-00003d00: 6368 0a20 2020 2020 2020 2065 6c69 6620  ch.        elif 
-00003d10: 6973 696e 7374 616e 6365 286c 6561 662c  isinstance(leaf,
-00003d20: 205f 7363 6f72 652e 4368 6f72 6429 3a0a   _score.Chord):.
-00003d30: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
-00003d40: 444f 3a20 5468 6973 2069 7320 6e6f 7420  DO: This is not 
-00003d50: 6964 6561 6c20 772f 722f 7420 706f 7374  ideal w/r/t post
-00003d60: 2065 7665 6e74 7320 6173 204c 696c 7950   events as LilyP
-00003d70: 6f6e 6420 646f 6573 0a20 2020 2020 2020  ond does.       
-00003d80: 2020 2020 2023 206e 6f74 2073 6f72 7420       # not sort 
-00003d90: 6368 6f72 6420 636f 6e74 656e 7473 0a20  chord contents. 
-00003da0: 2020 2020 2020 2020 2020 2063 686f 7264             chord
-00003db0: 5f70 6974 6368 6573 203d 2073 656c 662e  _pitches = self.
-00003dc0: 636c 6965 6e74 2e5f 6368 6f72 645f 7069  client._chord_pi
-00003dd0: 7463 685f 6f72 6465 7273 5b6c 6561 665d  tch_orders[leaf]
-00003de0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00003df0: 2069 2c20 6368 6f72 645f 7069 7463 6820   i, chord_pitch 
-00003e00: 696e 2065 6e75 6d65 7261 7465 2863 686f  in enumerate(cho
-00003e10: 7264 5f70 6974 6368 6573 293a 0a20 2020  rd_pitches):.   
-00003e20: 2020 2020 2020 2020 2020 2020 2070 6974               pit
-00003e30: 6368 203d 2073 656c 662e 5f74 6f5f 7265  ch = self._to_re
-00003e40: 6c61 7469 7665 5f6f 6374 6176 6528 6368  lative_octave(ch
-00003e50: 6f72 645f 7069 7463 682c 2070 6974 6368  ord_pitch, pitch
-00003e60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00003e70: 2020 6368 6f72 645f 7069 7463 6865 735b    chord_pitches[
-00003e80: 695d 203d 2070 6974 6368 0a20 2020 2020  i] = pitch.     
-00003e90: 2020 2020 2020 206c 6561 662e 7772 6974         leaf.writ
-00003ea0: 7465 6e5f 7069 7463 6865 7320 3d20 6368  ten_pitches = ch
-00003eb0: 6f72 645f 7069 7463 6865 730a 2020 2020  ord_pitches.    
-00003ec0: 2020 2020 2020 2020 7069 7463 6820 3d20          pitch = 
-00003ed0: 6d69 6e28 6c65 6166 2e77 7269 7474 656e  min(leaf.written
-00003ee0: 5f70 6974 6368 6573 290a 2020 2020 2020  _pitches).      
-00003ef0: 2020 7265 7475 726e 2070 6974 6368 0a0a    return pitch..
-00003f00: 2020 2020 6465 6620 5f6d 616b 655f 756e      def _make_un
-00003f10: 7265 6c61 7469 7661 626c 6528 7365 6c66  relativable(self
-00003f20: 2c20 6d75 7369 6329 3a0a 2020 2020 2020  , music):.      
-00003f30: 2020 6966 206e 6f74 2073 656c 662e 5f69    if not self._i
-00003f40: 735f 756e 7265 6c61 7469 7661 626c 6528  s_unrelativable(
-00003f50: 6d75 7369 6329 3a0a 2020 2020 2020 2020  music):.        
-00003f60: 2020 2020 616e 6e6f 7461 7469 6f6e 203d      annotation =
-00003f70: 207b 2255 6e72 656c 6174 6976 6162 6c65   {"Unrelativable
-00003f80: 4d75 7369 6322 3a20 5472 7565 7d0a 2020  Music": True}.  
-00003f90: 2020 2020 2020 2020 2020 5f62 696e 642e            _bind.
-00003fa0: 6174 7461 6368 2861 6e6e 6f74 6174 696f  attach(annotatio
-00003fb0: 6e2c 206d 7573 6963 290a 0a20 2020 2064  n, music)..    d
-00003fc0: 6566 205f 746f 5f72 656c 6174 6976 655f  ef _to_relative_
-00003fd0: 6f63 7461 7665 2873 656c 662c 2070 6974  octave(self, pit
-00003fe0: 6368 2c20 7265 6665 7265 6e63 6529 3a0a  ch, reference):.
-00003ff0: 2020 2020 2020 2020 6966 2070 6974 6368          if pitch
-00004000: 2e70 6974 6368 5f63 6c61 7373 2e6e 756d  .pitch_class.num
-00004010: 6265 7220 3e20 7265 6665 7265 6e63 652e  ber > reference.
-00004020: 7069 7463 685f 636c 6173 732e 6e75 6d62  pitch_class.numb
-00004030: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-00004040: 7061 6972 203d 2028 7069 7463 682e 7069  pair = (pitch.pi
-00004050: 7463 685f 636c 6173 732e 6e61 6d65 2c20  tch_class.name, 
-00004060: 7265 6665 7265 6e63 652e 6f63 7461 7665  reference.octave
-00004070: 2e6e 756d 6265 7229 0a20 2020 2020 2020  .number).       
-00004080: 2020 2020 2075 705f 7069 7463 6820 3d20       up_pitch = 
-00004090: 5f70 6974 6368 2e4e 616d 6564 5069 7463  _pitch.NamedPitc
-000040a0: 6828 7061 6972 290a 2020 2020 2020 2020  h(pair).        
-000040b0: 2020 2020 7061 6972 203d 2028 7069 7463      pair = (pitc
-000040c0: 682e 7069 7463 685f 636c 6173 732e 6e61  h.pitch_class.na
-000040d0: 6d65 2c20 7265 6665 7265 6e63 652e 6f63  me, reference.oc
-000040e0: 7461 7665 2e6e 756d 6265 7220 2d20 3129  tave.number - 1)
-000040f0: 0a20 2020 2020 2020 2020 2020 2064 6f77  .            dow
-00004100: 6e5f 7069 7463 6820 3d20 5f70 6974 6368  n_pitch = _pitch
-00004110: 2e4e 616d 6564 5069 7463 6828 7061 6972  .NamedPitch(pair
-00004120: 290a 2020 2020 2020 2020 2020 2020 7570  ).            up
-00004130: 5f6f 6374 6176 6520 3d20 7570 5f70 6974  _octave = up_pit
-00004140: 6368 2e6f 6374 6176 652e 6e75 6d62 6572  ch.octave.number
-00004150: 0a20 2020 2020 2020 2020 2020 2064 6f77  .            dow
-00004160: 6e5f 6f63 7461 7665 203d 2064 6f77 6e5f  n_octave = down_
-00004170: 7069 7463 682e 6f63 7461 7665 2e6e 756d  pitch.octave.num
-00004180: 6265 720a 2020 2020 2020 2020 656c 7365  ber.        else
-00004190: 3a0a 2020 2020 2020 2020 2020 2020 7061  :.            pa
-000041a0: 6972 203d 2028 7069 7463 682e 7069 7463  ir = (pitch.pitc
-000041b0: 685f 636c 6173 732e 6e61 6d65 2c20 7265  h_class.name, re
-000041c0: 6665 7265 6e63 652e 6f63 7461 7665 2e6e  ference.octave.n
-000041d0: 756d 6265 7220 2b20 3129 0a20 2020 2020  umber + 1).     
-000041e0: 2020 2020 2020 2075 705f 7069 7463 6820         up_pitch 
-000041f0: 3d20 5f70 6974 6368 2e4e 616d 6564 5069  = _pitch.NamedPi
-00004200: 7463 6828 7061 6972 290a 2020 2020 2020  tch(pair).      
-00004210: 2020 2020 2020 7061 6972 203d 2028 7069        pair = (pi
-00004220: 7463 682e 7069 7463 685f 636c 6173 732e  tch.pitch_class.
-00004230: 6e61 6d65 2c20 7265 6665 7265 6e63 652e  name, reference.
-00004240: 6f63 7461 7665 2e6e 756d 6265 7229 0a20  octave.number). 
-00004250: 2020 2020 2020 2020 2020 2064 6f77 6e5f             down_
-00004260: 7069 7463 6820 3d20 5f70 6974 6368 2e4e  pitch = _pitch.N
-00004270: 616d 6564 5069 7463 6828 7061 6972 290a  amedPitch(pair).
-00004280: 2020 2020 2020 2020 2020 2020 7570 5f6f              up_o
-00004290: 6374 6176 6520 3d20 7570 5f70 6974 6368  ctave = up_pitch
-000042a0: 2e6f 6374 6176 652e 6e75 6d62 6572 0a20  .octave.number. 
-000042b0: 2020 2020 2020 2020 2020 2064 6f77 6e5f             down_
-000042c0: 6f63 7461 7665 203d 2064 6f77 6e5f 7069  octave = down_pi
-000042d0: 7463 682e 6f63 7461 7665 2e6e 756d 6265  tch.octave.numbe
-000042e0: 720a 2020 2020 2020 2020 6966 2061 6273  r.        if abs
-000042f0: 280a 2020 2020 2020 2020 2020 2020 666c  (.            fl
-00004300: 6f61 7428 7570 5f70 6974 6368 2e5f 6765  oat(up_pitch._ge
-00004310: 745f 6469 6174 6f6e 6963 5f70 6974 6368  t_diatonic_pitch
-00004320: 5f6e 756d 6265 7228 2929 0a20 2020 2020  _number()).     
-00004330: 2020 2020 2020 202d 2066 6c6f 6174 2872         - float(r
-00004340: 6566 6572 656e 6365 2e5f 6765 745f 6469  eference._get_di
-00004350: 6174 6f6e 6963 5f70 6974 6368 5f6e 756d  atonic_pitch_num
-00004360: 6265 7228 2929 0a20 2020 2020 2020 2029  ber()).        )
-00004370: 203c 2061 6273 280a 2020 2020 2020 2020   < abs(.        
-00004380: 2020 2020 666c 6f61 7428 646f 776e 5f70      float(down_p
-00004390: 6974 6368 2e5f 6765 745f 6469 6174 6f6e  itch._get_diaton
-000043a0: 6963 5f70 6974 6368 5f6e 756d 6265 7228  ic_pitch_number(
-000043b0: 2929 0a20 2020 2020 2020 2020 2020 202d  )).            -
-000043c0: 2066 6c6f 6174 2872 6566 6572 656e 6365   float(reference
-000043d0: 2e5f 6765 745f 6469 6174 6f6e 6963 5f70  ._get_diatonic_p
-000043e0: 6974 6368 5f6e 756d 6265 7228 2929 0a20  itch_number()). 
-000043f0: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
-00004400: 2020 2020 2020 7061 6972 203d 2028 0a20        pair = (. 
-00004410: 2020 2020 2020 2020 2020 2020 2020 2075                 u
-00004420: 705f 7069 7463 682e 7069 7463 685f 636c  p_pitch.pitch_cl
-00004430: 6173 732e 6e61 6d65 2c0a 2020 2020 2020  ass.name,.      
-00004440: 2020 2020 2020 2020 2020 7570 5f6f 6374            up_oct
-00004450: 6176 6520 2b20 7069 7463 682e 6f63 7461  ave + pitch.octa
-00004460: 7665 2e6e 756d 6265 7220 2d20 332c 0a20  ve.number - 3,. 
-00004470: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00004480: 2020 2020 2020 2020 2070 6974 6368 203d           pitch =
-00004490: 205f 7069 7463 682e 4e61 6d65 6450 6974   _pitch.NamedPit
-000044a0: 6368 2870 6169 7229 0a20 2020 2020 2020  ch(pair).       
-000044b0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000044c0: 2020 2070 6169 7220 3d20 280a 2020 2020     pair = (.    
-000044d0: 2020 2020 2020 2020 2020 2020 646f 776e              down
-000044e0: 5f70 6974 6368 2e70 6974 6368 5f63 6c61  _pitch.pitch_cla
-000044f0: 7373 2e6e 616d 652c 0a20 2020 2020 2020  ss.name,.       
-00004500: 2020 2020 2020 2020 2064 6f77 6e5f 6f63           down_oc
-00004510: 7461 7665 202b 2070 6974 6368 2e6f 6374  tave + pitch.oct
-00004520: 6176 652e 6e75 6d62 6572 202d 2033 2c0a  ave.number - 3,.
-00004530: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00004540: 2020 2020 2020 2020 2020 7069 7463 6820            pitch 
-00004550: 3d20 5f70 6974 6368 2e4e 616d 6564 5069  = _pitch.NamedPi
-00004560: 7463 6828 7061 6972 290a 2020 2020 2020  tch(pair).      
-00004570: 2020 7265 7475 726e 2070 6974 6368 0a0a    return pitch..
-00004580: 0a63 6c61 7373 204c 696c 7950 6f6e 6445  .class LilyPondE
-00004590: 7665 6e74 3a0a 2020 2020 2222 220a 2020  vent:.    """.  
-000045a0: 2020 4d6f 6465 6c20 6f66 2061 6e20 6172    Model of an ar
-000045b0: 6269 7472 6172 7920 6576 656e 7420 696e  bitrary event in
-000045c0: 204c 696c 7950 6f6e 642e 0a0a 2020 2020   LilyPond...    
-000045d0: 4e6f 7420 636f 6d70 6f73 6572 2d73 6166  Not composer-saf
-000045e0: 652e 0a0a 2020 2020 5573 6564 2069 6e74  e...    Used int
-000045f0: 6572 6e61 6c6c 7920 6279 204c 696c 7950  ernally by LilyP
-00004600: 6f6e 6450 6172 7365 722e 0a20 2020 2022  ondParser..    "
-00004610: 2222 0a0a 2020 2020 2323 2320 494e 4954  ""..    ### INIT
-00004620: 4941 4c49 5a45 5220 2323 230a 0a20 2020  IALIZER ###..   
-00004630: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
-00004640: 6c66 2c20 6e61 6d65 3d4e 6f6e 652c 202a  lf, name=None, *
-00004650: 2a6b 6579 776f 7264 7329 3a0a 2020 2020  *keywords):.    
-00004660: 2020 2020 7365 6c66 2e6e 616d 6520 3d20      self.name = 
-00004670: 6e61 6d65 0a20 2020 2020 2020 2066 6f72  name.        for
-00004680: 206b 2c20 7620 696e 206b 6579 776f 7264   k, v in keyword
-00004690: 732e 6974 656d 7328 293a 0a20 2020 2020  s.items():.     
-000046a0: 2020 2020 2020 2069 6620 6b20 213d 2022         if k != "
-000046b0: 6e61 6d65 223a 0a20 2020 2020 2020 2020  name":.         
-000046c0: 2020 2020 2020 2073 6574 6174 7472 2873         setattr(s
-000046d0: 656c 662c 206b 2c20 7629 0a0a 2020 2020  elf, k, v)..    
-000046e0: 2323 2320 5350 4543 4941 4c20 4d45 5448  ### SPECIAL METH
-000046f0: 4f44 5320 2323 230a 0a20 2020 2064 6566  ODS ###..    def
-00004700: 205f 5f72 6570 725f 5f28 7365 6c66 293a   __repr__(self):
-00004710: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00004720: 2020 2020 2047 6574 7320 696e 7465 7270       Gets interp
-00004730: 7265 7465 7220 7265 7072 6573 656e 7461  reter representa
-00004740: 7469 6f6e 206f 6620 4c69 6c79 506f 6e64  tion of LilyPond
-00004750: 2065 7665 6e74 2e0a 0a20 2020 2020 2020   event...       
-00004760: 2052 6574 7572 6e73 2073 7472 696e 672e   Returns string.
-00004770: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00004780: 2020 2020 2072 6573 756c 7420 3d20 7265       result = re
-00004790: 7072 2873 656c 662e 6e61 6d65 290a 2020  pr(self.name).  
-000047a0: 2020 2020 2020 666f 7220 6b65 7920 696e        for key in
-000047b0: 2073 656c 662e 5f5f 6469 6374 5f5f 3a0a   self.__dict__:.
-000047c0: 2020 2020 2020 2020 2020 2020 6966 206b              if k
-000047d0: 6579 203d 3d20 226e 616d 6522 3a0a 2020  ey == "name":.  
-000047e0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000047f0: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
-00004800: 2020 2072 6573 756c 7420 2b3d 2066 222c     result += f",
-00004810: 207b 6b65 797d 203d 207b 6765 7461 7474   {key} = {getatt
-00004820: 7228 7365 6c66 2c20 6b65 7929 2172 7d22  r(self, key)!r}"
-00004830: 0a20 2020 2020 2020 206e 616d 6520 3d20  .        name = 
-00004840: 7479 7065 2873 656c 6629 2e5f 5f6e 616d  type(self).__nam
-00004850: 655f 5f0a 2020 2020 2020 2020 7265 7475  e__.        retu
-00004860: 726e 2066 227b 6e61 6d65 7d28 7b72 6573  rn f"{name}({res
-00004870: 756c 747d 2922 0a0a 0a63 6c61 7373 204c  ult})"...class L
-00004880: 696c 7950 6f6e 6446 7261 6374 696f 6e3a  ilyPondFraction:
-00004890: 0a20 2020 2022 2222 0a20 2020 204d 6f64  .    """.    Mod
-000048a0: 656c 206f 6620 6120 6672 6163 7469 6f6e  el of a fraction
-000048b0: 2069 6e20 4c69 6c79 506f 6e64 2e0a 0a20   in LilyPond... 
-000048c0: 2020 204e 6f74 2063 6f6d 706f 7365 722d     Not composer-
-000048d0: 7361 6665 2e0a 0a20 2020 2055 7365 6420  safe...    Used 
-000048e0: 696e 7465 726e 616c 6c79 2062 7920 4c69  internally by Li
-000048f0: 6c79 506f 6e64 5061 7273 6572 2e0a 2020  lyPondParser..  
-00004900: 2020 2222 220a 0a20 2020 2023 2323 2043    """..    ### C
-00004910: 4c41 5353 2056 4152 4941 424c 4553 2023  LASS VARIABLES #
-00004920: 2323 0a0a 2020 2020 5f5f 736c 6f74 735f  ##..    __slots_
-00004930: 5f20 3d20 2822 6e75 6d65 7261 746f 7222  _ = ("numerator"
-00004940: 2c20 2264 656e 6f6d 696e 6174 6f72 2229  , "denominator")
-00004950: 0a0a 2020 2020 2323 2320 494e 4954 4941  ..    ### INITIA
-00004960: 4c49 5a45 5220 2323 230a 0a20 2020 2064  LIZER ###..    d
-00004970: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00004980: 2c20 6e75 6d65 7261 746f 723d 302c 2064  , numerator=0, d
-00004990: 656e 6f6d 696e 6174 6f72 3d31 293a 0a20  enominator=1):. 
-000049a0: 2020 2020 2020 2073 656c 662e 6e75 6d65         self.nume
-000049b0: 7261 746f 7220 3d20 6e75 6d65 7261 746f  rator = numerato
-000049c0: 720a 2020 2020 2020 2020 7365 6c66 2e64  r.        self.d
-000049d0: 656e 6f6d 696e 6174 6f72 203d 2064 656e  enominator = den
-000049e0: 6f6d 696e 6174 6f72 0a0a 0a63 6c61 7373  ominator...class
-000049f0: 204c 696c 7950 6f6e 6447 7261 6d6d 6172   LilyPondGrammar
-00004a00: 4765 6e65 7261 746f 723a 0a20 2020 2022  Generator:.    "
-00004a10: 2222 0a20 2020 2047 656e 6572 6174 6573  "".    Generates
-00004a20: 2061 2073 796e 7461 7820 736b 656c 6574   a syntax skelet
-00004a30: 6f6e 2066 726f 6d20 4c69 6c79 506f 6e64  on from LilyPond
-00004a40: 2067 7261 6d6d 6172 2066 696c 6573 2e0a   grammar files..
-00004a50: 2020 2020 2222 220a 0a20 2020 2023 2323      """..    ###
-00004a60: 2043 4c41 5353 2056 4152 4941 424c 4553   CLASS VARIABLES
-00004a70: 2023 2323 0a0a 2020 2020 5f5f 736c 6f74   ###..    __slot
-00004a80: 735f 5f20 3d20 2829 0a0a 2020 2020 2323  s__ = ()..    ##
-00004a90: 2320 5350 4543 4941 4c20 4d45 5448 4f44  # SPECIAL METHOD
-00004aa0: 5320 2323 230a 0a20 2020 2064 6566 205f  S ###..    def _
-00004ab0: 5f63 616c 6c5f 5f28 7365 6c66 2c20 736b  _call__(self, sk
-00004ac0: 656c 6574 6f6e 5f70 6174 682c 2070 6172  eleton_path, par
-00004ad0: 7365 725f 6f75 7470 7574 5f70 6174 682c  ser_output_path,
-00004ae0: 2070 6172 7365 725f 7461 625f 6868 5f70   parser_tab_hh_p
-00004af0: 6174 6829 3a0a 2020 2020 2020 2020 2222  ath):.        ""
-00004b00: 220a 2020 2020 2020 2020 4361 6c6c 7320  ".        Calls 
-00004b10: 4c69 6c79 506f 6e64 2067 7261 6d6d 6172  LilyPond grammar
-00004b20: 2067 656e 6572 6174 6f72 2e0a 2020 2020   generator..    
-00004b30: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00004b40: 7365 6c66 2e5f 7772 6974 655f 7061 7273  self._write_pars
-00004b50: 6572 5f73 796e 7461 785f 736b 656c 6574  er_syntax_skelet
-00004b60: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-00004b70: 7365 6c66 2c20 736b 656c 6574 6f6e 5f70  self, skeleton_p
-00004b80: 6174 682c 2070 6172 7365 725f 6f75 7470  ath, parser_outp
-00004b90: 7574 5f70 6174 682c 2070 6172 7365 725f  ut_path, parser_
-00004ba0: 7461 625f 6868 5f70 6174 680a 2020 2020  tab_hh_path.    
-00004bb0: 2020 2020 290a 0a20 2020 2023 2323 2050      )..    ### P
-00004bc0: 5249 5641 5445 204d 4554 484f 4453 2023  RIVATE METHODS #
-00004bd0: 2323 0a0a 2020 2020 6465 6620 5f65 7874  ##..    def _ext
-00004be0: 7261 6374 5f70 726f 6475 6374 696f 6e73  ract_productions
-00004bf0: 5f66 726f 6d5f 7061 7273 6572 5f6f 7574  _from_parser_out
-00004c00: 7075 7428 7365 6c66 2c20 6669 6c65 5f70  put(self, file_p
-00004c10: 6174 6829 3a0a 2020 2020 2020 2020 7769  ath):.        wi
-00004c20: 7468 206f 7065 6e28 6669 6c65 5f70 6174  th open(file_pat
-00004c30: 682c 2022 7222 2920 6173 2066 3a0a 2020  h, "r") as f:.  
-00004c40: 2020 2020 2020 2020 2020 6c69 6e65 7320            lines 
-00004c50: 3d20 662e 7265 6164 2829 2e73 706c 6974  = f.read().split
-00004c60: 2822 5c6e 2229 0a20 2020 2020 2020 2070  ("\n").        p
-00004c70: 726f 6475 6374 696f 6e73 203d 207b 7d0a  roductions = {}.
-00004c80: 2020 2020 2020 2020 6e6f 6e74 6572 6d69          nontermi
-00004c90: 6e61 6c20 3d20 4e6f 6e65 0a20 2020 2020  nal = None.     
-00004ca0: 2020 2069 6e5f 6772 616d 6d61 7220 3d20     in_grammar = 
-00004cb0: 4661 6c73 650a 2020 2020 2020 2020 666f  False.        fo
-00004cc0: 7220 6c69 6e65 2069 6e20 6c69 6e65 733a  r line in lines:
-00004cd0: 0a20 2020 2020 2020 2020 2020 2074 6578  .            tex
-00004ce0: 7420 3d20 6c69 6e65 2e73 7472 6970 2829  t = line.strip()
-00004cf0: 0a20 2020 2020 2020 2020 2020 2023 2073  .            # s
-00004d00: 7461 7274 696e 6720 616e 6420 7374 6f70  tarting and stop
-00004d10: 7069 6e67 0a20 2020 2020 2020 2020 2020  ping.           
-00004d20: 2069 6620 7465 7874 203d 3d20 2254 6572   if text == "Ter
-00004d30: 6d69 6e61 6c73 2c20 7769 7468 2072 756c  minals, with rul
-00004d40: 6573 2077 6865 7265 2074 6865 7920 6170  es where they ap
-00004d50: 7065 6172 223a 0a20 2020 2020 2020 2020  pear":.         
-00004d60: 2020 2020 2020 2062 7265 616b 0a20 2020         break.   
-00004d70: 2020 2020 2020 2020 2065 6c69 6620 7465           elif te
-00004d80: 7874 203d 3d20 2247 7261 6d6d 6172 223a  xt == "Grammar":
-00004d90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004da0: 2069 6e5f 6772 616d 6d61 7220 3d20 5472   in_grammar = Tr
-00004db0: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-00004dc0: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-00004dd0: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-00004de0: 6e5f 6772 616d 6d61 723a 0a20 2020 2020  n_grammar:.     
-00004df0: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
-00004e00: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
-00004e10: 6966 206e 6f74 2074 6578 743a 0a20 2020  if not text:.   
-00004e20: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00004e30: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
-00004e40: 2020 7061 7274 7320 3d20 7465 7874 2e73    parts = text.s
-00004e50: 706c 6974 2829 5b31 3a5d 0a20 2020 2020  plit()[1:].     
-00004e60: 2020 2020 2020 2069 6620 7061 7274 735b         if parts[
-00004e70: 305d 2e73 7461 7274 7377 6974 6828 2224  0].startswith("$
-00004e80: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
-00004e90: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-00004ea0: 2020 2020 2020 2020 2065 6c69 6620 7061           elif pa
-00004eb0: 7274 735b 305d 203d 3d20 227c 223a 0a20  rts[0] == "|":. 
-00004ec0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00004ed0: 6967 6874 5f68 616e 6420 3d20 6669 6c74  ight_hand = filt
-00004ee0: 6572 286c 616d 6264 6120 783a 206e 6f74  er(lambda x: not
-00004ef0: 2078 2e73 7461 7274 7377 6974 6828 2224   x.startswith("$
-00004f00: 2229 2c20 7061 7274 735b 313a 5d29 0a20  "), parts[1:]). 
-00004f10: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00004f20: 726f 6475 6374 696f 6e73 5b6e 6f6e 7465  roductions[nonte
-00004f30: 726d 696e 616c 5d2e 6170 7065 6e64 2870  rminal].append(p
-00004f40: 6172 7473 5b31 3a5d 290a 2020 2020 2020  arts[1:]).      
-00004f50: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00004f60: 2020 2020 2020 2020 2020 2020 6e6f 6e74              nont
-00004f70: 6572 6d69 6e61 6c20 3d20 7061 7274 735b  erminal = parts[
-00004f80: 305d 5b3a 2d31 5d0a 2020 2020 2020 2020  0][:-1].        
-00004f90: 2020 2020 2020 2020 6966 206e 6f6e 7465          if nonte
-00004fa0: 726d 696e 616c 206e 6f74 2069 6e20 7072  rminal not in pr
-00004fb0: 6f64 7563 7469 6f6e 733a 0a20 2020 2020  oductions:.     
-00004fc0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00004fd0: 726f 6475 6374 696f 6e73 5b6e 6f6e 7465  roductions[nonte
-00004fe0: 726d 696e 616c 5d20 3d20 5b5d 0a20 2020  rminal] = [].   
-00004ff0: 2020 2020 2020 2020 2020 2020 2072 6967               rig
-00005000: 6874 5f68 616e 6420 3d20 7061 7274 735b  ht_hand = parts[
-00005010: 313a 5d0a 2020 2020 2020 2020 2020 2020  1:].            
-00005020: 2020 2020 6966 2072 6967 6874 5f68 616e      if right_han
-00005030: 645b 305d 203d 3d20 222f 2a22 3a20 2023  d[0] == "/*":  #
-00005040: 202f 2a20 656d 7074 7920 2a2f 0a20 2020   /* empty */.   
-00005050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005060: 2070 726f 6475 6374 696f 6e73 5b6e 6f6e   productions[non
-00005070: 7465 726d 696e 616c 5d2e 6170 7065 6e64  terminal].append
-00005080: 285b 5d29 0a20 2020 2020 2020 2020 2020  ([]).           
-00005090: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000050a0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000050b0: 6967 6874 5f68 616e 6420 3d20 6669 6c74  ight_hand = filt
-000050c0: 6572 286c 616d 6264 6120 783a 206e 6f74  er(lambda x: not
-000050d0: 2078 2e73 7461 7274 7377 6974 6828 2224   x.startswith("$
-000050e0: 2229 2c20 7269 6768 745f 6861 6e64 290a  "), right_hand).
-000050f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005100: 2020 2020 7072 6f64 7563 7469 6f6e 735b      productions[
-00005110: 6e6f 6e74 6572 6d69 6e61 6c5d 2e61 7070  nonterminal].app
-00005120: 656e 6428 7269 6768 745f 6861 6e64 290a  end(right_hand).
-00005130: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-00005140: 726f 6475 6374 696f 6e73 0a0a 2020 2020  roductions..    
-00005150: 6465 6620 5f65 7874 7261 6374 5f74 6f6b  def _extract_tok
-00005160: 656e 5f6e 616d 6573 5f66 726f 6d5f 7061  en_names_from_pa
-00005170: 7273 6572 5f74 6162 5f68 6828 7365 6c66  rser_tab_hh(self
-00005180: 2c20 6669 6c65 5f70 6174 6829 3a0a 2020  , file_path):.  
-00005190: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-000051a0: 6669 6c65 5f70 6174 682c 2022 7222 2920  file_path, "r") 
-000051b0: 6173 2066 3a0a 2020 2020 2020 2020 2020  as f:.          
-000051c0: 2020 6c69 6e65 7320 3d20 662e 7265 6164    lines = f.read
-000051d0: 2829 2e73 706c 6974 2822 5c6e 2229 0a20  ().split("\n"). 
-000051e0: 2020 2020 2020 2074 6f6b 656e 5f6e 616d         token_nam
-000051f0: 6573 203d 207b 7d0a 2020 2020 2020 2020  es = {}.        
-00005200: 696e 5f65 6e75 6d20 3d20 4661 6c73 650a  in_enum = False.
-00005210: 2020 2020 2020 2020 666f 7220 6c69 6e65          for line
-00005220: 2069 6e20 6c69 6e65 733a 0a20 2020 2020   in lines:.     
-00005230: 2020 2020 2020 2074 6578 7420 3d20 6c69         text = li
-00005240: 6e65 2e73 7472 6970 2829 0a20 2020 2020  ne.strip().     
-00005250: 2020 2020 2020 2069 6620 696e 5f65 6e75         if in_enu
-00005260: 6d20 616e 6420 7465 7874 203d 3d20 227d  m and text == "}
-00005270: 3b22 3a0a 2020 2020 2020 2020 2020 2020  ;":.            
-00005280: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
-00005290: 2020 2020 2020 6966 2069 6e5f 656e 756d        if in_enum
-000052a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000052b0: 2020 7061 7274 7320 3d20 7465 7874 2e73    parts = text.s
-000052c0: 706c 6974 2822 2022 290a 2020 2020 2020  plit(" ").      
-000052d0: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
-000052e0: 2070 6172 7473 5b30 5d0a 2020 2020 2020   parts[0].      
-000052f0: 2020 2020 2020 2020 2020 6966 2070 6172            if par
-00005300: 7473 5b32 5d2e 656e 6473 7769 7468 2822  ts[2].endswith("
-00005310: 2c22 293a 0a20 2020 2020 2020 2020 2020  ,"):.           
-00005320: 2020 2020 2020 2020 206e 756d 6265 7220           number 
-00005330: 3d20 696e 7428 7061 7274 735b 325d 5b3a  = int(parts[2][:
-00005340: 2d31 5d29 0a20 2020 2020 2020 2020 2020  -1]).           
-00005350: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00005360: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00005370: 756d 6265 7220 3d20 696e 7428 7061 7274  umber = int(part
-00005380: 735b 325d 290a 2020 2020 2020 2020 2020  s[2]).          
-00005390: 2020 2020 2020 746f 6b65 6e5f 6e61 6d65        token_name
-000053a0: 735b 6e75 6d62 6572 5d20 3d20 6e61 6d65  s[number] = name
-000053b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000053c0: 7465 7874 203d 3d20 2265 6e75 6d20 7979  text == "enum yy
-000053d0: 746f 6b65 6e74 7970 6520 7b22 3a0a 2020  tokentype {":.  
-000053e0: 2020 2020 2020 2020 2020 2020 2020 696e                in
-000053f0: 5f65 6e75 6d20 3d20 5472 7565 0a20 2020  _enum = True.   
-00005400: 2020 2020 2072 6574 7572 6e20 746f 6b65       return toke
-00005410: 6e5f 6e61 6d65 730a 0a20 2020 2064 6566  n_names..    def
-00005420: 205f 6578 7472 6163 745f 746f 6b65 6e5f   _extract_token_
-00005430: 7661 6c75 6573 5f66 726f 6d5f 7061 7273  values_from_pars
-00005440: 6572 5f6f 7574 7075 7428 7365 6c66 2c20  er_output(self, 
-00005450: 6669 6c65 5f70 6174 6829 3a0a 2020 2020  file_path):.    
-00005460: 2020 2020 7769 7468 206f 7065 6e28 6669      with open(fi
-00005470: 6c65 5f70 6174 682c 2022 7222 2920 6173  le_path, "r") as
-00005480: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
-00005490: 6c69 6e65 7320 3d20 662e 7265 6164 2829  lines = f.read()
-000054a0: 2e73 706c 6974 2822 5c6e 2229 0a20 2020  .split("\n").   
-000054b0: 2020 2020 2074 6f6b 656e 5f76 616c 7565       token_value
-000054c0: 7320 3d20 7b7d 0a20 2020 2020 2020 2069  s = {}.        i
-000054d0: 6e5f 746f 6b65 6e5f 6c69 7374 203d 2046  n_token_list = F
-000054e0: 616c 7365 0a20 2020 2020 2020 2066 6f72  alse.        for
-000054f0: 206c 696e 6520 696e 206c 696e 6573 3a0a   line in lines:.
-00005500: 2020 2020 2020 2020 2020 2020 7465 7874              text
-00005510: 203d 206c 696e 652e 7374 7269 7028 290a   = line.strip().
-00005520: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00005530: 6e5f 746f 6b65 6e5f 6c69 7374 2061 6e64  n_token_list and
-00005540: 2074 6578 7420 3d3d 2022 4e6f 6e74 6572   text == "Nonter
-00005550: 6d69 6e61 6c73 2c20 7769 7468 2072 756c  minals, with rul
-00005560: 6573 2077 6865 7265 2074 6865 7920 6170  es where they ap
-00005570: 7065 6172 223a 0a20 2020 2020 2020 2020  pear":.         
-00005580: 2020 2020 2020 2062 7265 616b 0a20 2020         break.   
-00005590: 2020 2020 2020 2020 2065 6c69 6620 7465           elif te
-000055a0: 7874 203d 3d20 2254 6572 6d69 6e61 6c73  xt == "Terminals
-000055b0: 2c20 7769 7468 2072 756c 6573 2077 6865  , with rules whe
-000055c0: 7265 2074 6865 7920 6170 7065 6172 223a  re they appear":
-000055d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000055e0: 2069 6e5f 746f 6b65 6e5f 6c69 7374 203d   in_token_list =
-000055f0: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-00005600: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
-00005610: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00005620: 6e6f 7420 7465 7874 3a0a 2020 2020 2020  not text:.      
-00005630: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-00005640: 7565 0a20 2020 2020 2020 2020 2020 2065  ue.            e
-00005650: 6c69 6620 6e6f 7420 696e 5f74 6f6b 656e  lif not in_token
-00005660: 5f6c 6973 743a 0a20 2020 2020 2020 2020  _list:.         
-00005670: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-00005680: 2020 2020 2020 2020 2020 2020 7061 7274              part
-00005690: 7320 3d20 7465 7874 2e73 706c 6974 2829  s = text.split()
-000056a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000056b0: 7061 7274 735b 305d 2e69 7364 6967 6974  parts[0].isdigit
-000056c0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-000056d0: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-000056e0: 2020 2020 2020 2020 2065 6c69 6620 7061           elif pa
-000056f0: 7274 735b 305d 2e73 7461 7274 7377 6974  rts[0].startswit
-00005700: 6828 2224 2229 3a0a 2020 2020 2020 2020  h("$"):.        
-00005710: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-00005720: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
-00005730: 7565 203d 2070 6172 7473 5b30 5d0a 2020  ue = parts[0].  
-00005740: 2020 2020 2020 2020 2020 6e75 6d62 6572            number
-00005750: 203d 2069 6e74 2870 6172 7473 5b31 5d5b   = int(parts[1][
-00005760: 313a 2d31 5d29 0a20 2020 2020 2020 2020  1:-1]).         
-00005770: 2020 2074 6f6b 656e 5f76 616c 7565 735b     token_values[
-00005780: 6e75 6d62 6572 5d20 3d20 7661 6c75 650a  number] = value.
-00005790: 2020 2020 2020 2020 7265 7475 726e 2074          return t
-000057a0: 6f6b 656e 5f76 616c 7565 730a 0a20 2020  oken_values..   
-000057b0: 2064 6566 205f 6765 6e65 7261 7465 5f70   def _generate_p
-000057c0: 726f 6475 6374 696f 6e5f 6d61 7028 7365  roduction_map(se
-000057d0: 6c66 2c20 6f75 7470 7574 5f70 6174 682c  lf, output_path,
-000057e0: 2074 6162 5f68 685f 7061 7468 293a 0a20   tab_hh_path):. 
-000057f0: 2020 2020 2020 2070 726f 6475 6374 696f         productio
-00005800: 6e73 203d 2073 656c 662e 5f65 7874 7261  ns = self._extra
-00005810: 6374 5f70 726f 6475 6374 696f 6e73 5f66  ct_productions_f
-00005820: 726f 6d5f 7061 7273 6572 5f6f 7574 7075  rom_parser_outpu
-00005830: 7428 6f75 7470 7574 5f70 6174 6829 0a20  t(output_path). 
-00005840: 2020 2020 2020 206e 616d 6573 203d 2073         names = s
-00005850: 656c 662e 5f65 7874 7261 6374 5f74 6f6b  elf._extract_tok
-00005860: 656e 5f6e 616d 6573 5f66 726f 6d5f 7061  en_names_from_pa
-00005870: 7273 6572 5f74 6162 5f68 6828 7461 625f  rser_tab_hh(tab_
-00005880: 6868 5f70 6174 6829 0a20 2020 2020 2020  hh_path).       
-00005890: 2076 616c 7565 7320 3d20 7365 6c66 2e5f   values = self._
-000058a0: 6578 7472 6163 745f 746f 6b65 6e5f 7661  extract_token_va
-000058b0: 6c75 6573 5f66 726f 6d5f 7061 7273 6572  lues_from_parser
-000058c0: 5f6f 7574 7075 7428 6f75 7470 7574 5f70  _output(output_p
-000058d0: 6174 6829 0a20 2020 2020 2020 206d 6174  ath).        mat
-000058e0: 6368 6573 203d 2073 656c 662e 5f6d 6174  ches = self._mat
-000058f0: 6368 5f74 6f6b 656e 5f6e 616d 6573 5f77  ch_token_names_w
-00005900: 6974 685f 746f 6b65 6e5f 7661 6c75 6573  ith_token_values
-00005910: 286e 616d 6573 2c20 7661 6c75 6573 290a  (names, values).
-00005920: 2020 2020 2020 2020 7265 7772 6974 6573          rewrites
-00005930: 203d 207b 7d0a 2020 2020 2020 2020 666f   = {}.        fo
-00005940: 7220 6e6f 6e74 6572 6d69 6e61 6c20 696e  r nonterminal in
-00005950: 2070 726f 6475 6374 696f 6e73 3a0a 2020   productions:.  
-00005960: 2020 2020 2020 2020 2020 666f 7220 7268            for rh
-00005970: 2069 6e20 7072 6f64 7563 7469 6f6e 735b   in productions[
-00005980: 6e6f 6e74 6572 6d69 6e61 6c5d 3a0a 2020  nonterminal]:.  
-00005990: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-000059a0: 7220 692c 2072 2069 6e20 656e 756d 6572  r i, r in enumer
-000059b0: 6174 6528 7268 293a 0a20 2020 2020 2020  ate(rh):.       
-000059c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000059d0: 7220 696e 206d 6174 6368 6573 3a0a 2020  r in matches:.  
-000059e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000059f0: 2020 2020 2020 7268 5b69 5d20 3d20 6d61        rh[i] = ma
-00005a00: 7463 6865 735b 725d 0a20 2020 2020 2020  tches[r].       
-00005a10: 2020 2020 2020 2020 2073 7472 696e 6720           string 
-00005a20: 3d20 2220 222e 6a6f 696e 2872 6829 0a20  = " ".join(rh). 
-00005a30: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00005a40: 6f63 7374 7269 6e67 203d 2066 227b 6e6f  ocstring = f"{no
-00005a50: 6e74 6572 6d69 6e61 6c7d 203a 207b 7374  nterminal} : {st
-00005a60: 7269 6e67 7d22 0a20 2020 2020 2020 2020  ring}".         
-00005a70: 2020 2020 2020 2066 6f72 2069 2c20 7220         for i, r 
-00005a80: 696e 2065 6e75 6d65 7261 7465 2872 6829  in enumerate(rh)
-00005a90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00005aa0: 2020 2020 2020 6966 2072 5b30 5d20 3d3d        if r[0] ==
-00005ab0: 2022 2722 2061 6e64 2072 5b2d 315d 203d   "'" and r[-1] =
-00005ac0: 3d20 2227 223a 0a20 2020 2020 2020 2020  = "'":.         
-00005ad0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00005ae0: 685b 695d 203d 2066 2243 6872 7b6f 7264  h[i] = f"Chr{ord
-00005af0: 2872 5b2d 325d 297d 220a 2020 2020 2020  (r[-2])}".      
-00005b00: 2020 2020 2020 2020 2020 7374 7269 6e67            string
-00005b10: 203d 2022 5f5f 222e 6a6f 696e 2872 6829   = "__".join(rh)
-00005b20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005b30: 2066 756e 636e 616d 6520 3d20 6622 705f   funcname = f"p_
-00005b40: 7b6e 6f6e 7465 726d 696e 616c 7d5f 5f7b  {nonterminal}__{
-00005b50: 7374 7269 6e67 7d22 0a20 2020 2020 2020  string}".       
-00005b60: 2020 2020 2020 2020 2072 6577 7269 7465           rewrite
-00005b70: 735b 6675 6e63 6e61 6d65 5d20 3d20 646f  s[funcname] = do
-00005b80: 6373 7472 696e 670a 2020 2020 2020 2020  cstring.        
-00005b90: 7265 7475 726e 2072 6577 7269 7465 730a  return rewrites.
-00005ba0: 0a20 2020 2064 6566 205f 6d61 7463 685f  .    def _match_
-00005bb0: 746f 6b65 6e5f 6e61 6d65 735f 7769 7468  token_names_with
-00005bc0: 5f74 6f6b 656e 5f76 616c 7565 7328 7365  _token_values(se
-00005bd0: 6c66 2c20 6e61 6d65 732c 2076 616c 7565  lf, names, value
-00005be0: 7329 3a0a 2020 2020 2020 2020 6d61 7463  s):.        matc
-00005bf0: 6865 7320 3d20 7b7d 0a20 2020 2020 2020  hes = {}.       
-00005c00: 2066 6f72 206e 756d 6265 722c 2076 616c   for number, val
-00005c10: 7565 2069 6e20 7661 6c75 6573 2e69 7465  ue in values.ite
-00005c20: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
-00005c30: 2020 6966 206e 756d 6265 7220 696e 206e    if number in n
-00005c40: 616d 6573 3a0a 2020 2020 2020 2020 2020  ames:.          
-00005c50: 2020 2020 2020 6e61 6d65 203d 206e 616d        name = nam
-00005c60: 6573 5b6e 756d 6265 725d 0a20 2020 2020  es[number].     
-00005c70: 2020 2020 2020 2020 2020 206d 6174 6368             match
-00005c80: 6573 5b76 616c 7565 5d20 3d20 6e61 6d65  es[value] = name
-00005c90: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00005ca0: 6d61 7463 6865 730a 0a20 2020 2064 6566  matches..    def
-00005cb0: 205f 7772 6974 655f 7061 7273 6572 5f73   _write_parser_s
-00005cc0: 796e 7461 785f 736b 656c 6574 6f6e 280a  yntax_skeleton(.
-00005cd0: 2020 2020 2020 2020 7365 6c66 2c20 736b          self, sk
-00005ce0: 656c 6574 6f6e 5f70 6174 682c 2070 6172  eleton_path, par
-00005cf0: 7365 725f 6f75 7470 7574 5f70 6174 682c  ser_output_path,
-00005d00: 2070 6172 7365 725f 7461 625f 6868 5f70   parser_tab_hh_p
-00005d10: 6174 680a 2020 2020 293a 0a20 2020 2020  ath.    ):.     
-00005d20: 2020 2070 726f 6475 6374 696f 6e73 203d     productions =
-00005d30: 2073 656c 662e 5f67 656e 6572 6174 655f   self._generate_
-00005d40: 7072 6f64 7563 7469 6f6e 5f6d 6170 280a  production_map(.
-00005d50: 2020 2020 2020 2020 2020 2020 7061 7273              pars
-00005d60: 6572 5f6f 7574 7075 745f 7061 7468 2c20  er_output_path, 
-00005d70: 7061 7273 6572 5f74 6162 5f68 685f 7061  parser_tab_hh_pa
-00005d80: 7468 0a20 2020 2020 2020 2029 0a20 2020  th.        ).   
-00005d90: 2020 2020 2077 6974 6820 6f70 656e 2873       with open(s
-00005da0: 6b65 6c65 746f 6e5f 7061 7468 2c20 2277  keleton_path, "w
-00005db0: 2229 2061 7320 663a 0a20 2020 2020 2020  ") as f:.       
-00005dc0: 2020 2020 2066 2e77 7269 7465 2822 6672       f.write("fr
-00005dd0: 6f6d 2061 626a 6164 2e70 6172 7365 7273  om abjad.parsers
-00005de0: 2e70 6172 7365 7220 696d 706f 7274 2053  .parser import S
-00005df0: 796e 7461 784e 6f64 6520 6173 204e 6f64  yntaxNode as Nod
-00005e00: 6520 5c5c 5c6e 2229 0a20 2020 2020 2020  e \\\n").       
-00005e10: 2020 2020 2066 2e77 7269 7465 2822 636c       f.write("cl
-00005e20: 6173 7320 5f4c 696c 7950 6f6e 6453 796e  ass _LilyPondSyn
-00005e30: 7461 6374 6963 616c 4465 6669 6e69 7469  tacticalDefiniti
-00005e40: 6f6e 3a5c 6e5c 6e22 290a 2020 2020 2020  on:\n\n").      
-00005e50: 2020 2020 2020 662e 7772 6974 6528 2220        f.write(" 
-00005e60: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00005e70: 7365 6c66 2c20 636c 6965 6e74 293a 5c6e  self, client):\n
-00005e80: 2229 0a20 2020 2020 2020 2020 2020 2066  ").            f
-00005e90: 2e77 7269 7465 2822 2020 2020 2020 2020  .write("        
-00005ea0: 7365 6c66 2e63 6c69 656e 7420 3d20 636c  self.client = cl
-00005eb0: 6965 6e74 5c6e 2229 0a20 2020 2020 2020  ient\n").       
-00005ec0: 2020 2020 2066 2e77 7269 7465 2822 2020       f.write("  
-00005ed0: 2020 2020 2020 7365 6c66 2e74 6f6b 656e        self.token
-00005ee0: 7320 3d20 7365 6c66 2e63 6c69 656e 742e  s = self.client.
-00005ef0: 6c65 7864 6566 2e74 6f6b 656e 735c 6e5c  lexdef.tokens\n\
-00005f00: 6e5c 6e22 290a 2020 2020 2020 2020 2020  n\n").          
-00005f10: 2020 662e 7772 6974 6528 2220 2020 2073    f.write("    s
-00005f20: 7461 7274 5f73 796d 626f 6c20 3d20 2773  tart_symbol = 's
-00005f30: 7461 7274 5f73 796d 626f 6c27 5c6e 5c6e  tart_symbol'\n\n
-00005f40: 5c6e 2229 0a20 2020 2020 2020 2020 2020  \n").           
-00005f50: 2066 2e77 7269 7465 2822 2020 2020 7072   f.write("    pr
-00005f60: 6563 6564 656e 6365 203d 2028 5c6e 2229  ecedence = (\n")
-00005f70: 0a20 2020 2020 2020 2020 2020 2066 2e77  .            f.w
-00005f80: 7269 7465 2822 2020 2020 2020 2020 2827  rite("        ('
-00005f90: 6e6f 6e61 7373 6f63 272c 2027 434f 4d50  nonassoc', 'COMP
-00005fa0: 4f53 4954 4527 292c 5c6e 2229 0a20 2020  OSITE'),\n").   
-00005fb0: 2020 2020 2020 2020 2066 2e77 7269 7465           f.write
-00005fc0: 2822 2020 2020 2020 2020 2827 6e6f 6e61  ("        ('nona
-00005fd0: 7373 6f63 272c 2027 5245 5045 4154 2729  ssoc', 'REPEAT')
-00005fe0: 2c5c 6e22 290a 2020 2020 2020 2020 2020  ,\n").          
-00005ff0: 2020 662e 7772 6974 6528 2220 2020 2020    f.write("     
-00006000: 2020 2028 276e 6f6e 6173 736f 6327 2c20     ('nonassoc', 
-00006010: 2741 4c54 4552 4e41 5449 5645 2729 2c5c  'ALTERNATIVE'),\
-00006020: 6e22 290a 2020 2020 2020 2020 2020 2020  n").            
-00006030: 662e 7772 6974 6528 2220 2020 2020 2020  f.write("       
-00006040: 2028 276c 6566 7427 2c20 2741 4444 4c59   ('left', 'ADDLY
-00006050: 5249 4353 2729 2c5c 6e22 290a 2020 2020  RICS'),\n").    
-00006060: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
-00006070: 2220 2020 2020 2020 2028 276e 6f6e 6173  "        ('nonas
-00006080: 736f 6327 2c20 2744 4546 4155 4c54 2729  soc', 'DEFAULT')
-00006090: 2c5c 6e22 290a 2020 2020 2020 2020 2020  ,\n").          
-000060a0: 2020 662e 7772 6974 6528 2220 2020 2020    f.write("     
-000060b0: 2020 2028 276e 6f6e 6173 736f 6327 2c20     ('nonassoc', 
-000060c0: 2746 554e 4354 494f 4e5f 4152 474c 4953  'FUNCTION_ARGLIS
-000060d0: 5427 292c 5c6e 2229 0a20 2020 2020 2020  T'),\n").       
-000060e0: 2020 2020 2066 2e77 7269 7465 280a 2020       f.write(.  
-000060f0: 2020 2020 2020 2020 2020 2020 2020 2220                " 
-00006100: 2020 2020 2020 2028 2772 6967 6874 272c         ('right',
-00006110: 2027 5049 5443 485f 4944 454e 5449 4649   'PITCH_IDENTIFI
-00006120: 4552 272c 2027 4e4f 5445 4e41 4d45 5f50  ER', 'NOTENAME_P
-00006130: 4954 4348 272c 220a 2020 2020 2020 2020  ITCH',".        
-00006140: 2020 2020 2020 2020 2220 2754 4f4e 4943          " 'TONIC
-00006150: 4e41 4d45 5f50 4954 4348 272c 2027 554e  NAME_PITCH', 'UN
-00006160: 5349 474e 4544 272c 2027 5245 414c 272c  SIGNED', 'REAL',
-00006170: 2027 4455 5241 5449 4f4e 5f49 4445 4e54   'DURATION_IDENT
-00006180: 4946 4945 5227 2c20 273a 2729 2c5c 6e22  IFIER', ':'),\n"
-00006190: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-000061a0: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
-000061b0: 7465 2822 2020 2020 2020 2020 2827 6e6f  te("        ('no
-000061c0: 6e61 7373 6f63 272c 2027 4e55 4d42 4552  nassoc', 'NUMBER
-000061d0: 5f49 4445 4e54 4946 4945 5227 2c20 272f  _IDENTIFIER', '/
-000061e0: 2729 2c5c 6e22 290a 2020 2020 2020 2020  '),\n").        
-000061f0: 2020 2020 662e 7772 6974 6528 2220 2020      f.write("   
-00006200: 2029 5c6e 5c6e 5c6e 2229 0a20 2020 2020   )\n\n\n").     
-00006210: 2020 2020 2020 2066 2e77 7269 7465 2822         f.write("
-00006220: 2020 2020 2323 2320 5359 4e54 4143 5449      ### SYNTACTI
-00006230: 4341 4c20 5255 4c45 5320 2841 4c50 4841  CAL RULES (ALPHA
-00006240: 4245 5449 4341 4c29 2023 2323 5c6e 5c6e  BETICAL) ###\n\n
-00006250: 5c6e 2229 0a20 2020 2020 2020 2020 2020  \n").           
-00006260: 2063 7572 7265 6e74 5f6e 6f6e 7465 726d   current_nonterm
-00006270: 696e 616c 203d 2022 7374 6172 745f 7379  inal = "start_sy
-00006280: 6d62 6f6c 220a 2020 2020 2020 2020 2020  mbol".          
-00006290: 2020 6c79 5f6b 6579 7320 3d20 736f 7274    ly_keys = sort
-000062a0: 6564 280a 2020 2020 2020 2020 2020 2020  ed(.            
-000062b0: 2020 2020 6b65 7920 666f 7220 6b65 7920      key for key 
-000062c0: 696e 2070 726f 6475 6374 696f 6e73 2069  in productions i
-000062d0: 6620 6b65 792e 7374 6172 7473 7769 7468  f key.startswith
-000062e0: 2822 705f 7374 6172 745f 7379 6d62 6f6c  ("p_start_symbol
-000062f0: 2229 0a20 2020 2020 2020 2020 2020 2029  ").            )
-00006300: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00006310: 206b 6579 2069 6e20 6c79 5f6b 6579 733a   key in ly_keys:
-00006320: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006330: 2066 756e 636e 616d 6520 3d20 6b65 790a   funcname = key.
-00006340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006350: 646f 6373 7472 696e 6720 3d20 7072 6f64  docstring = prod
-00006360: 7563 7469 6f6e 735b 6b65 795d 0a20 2020  uctions[key].   
-00006370: 2020 2020 2020 2020 2020 2020 2066 2e77               f.w
-00006380: 7269 7465 2866 2220 2020 2064 6566 207b  rite(f"    def {
-00006390: 6675 6e63 6e61 6d65 7d28 7365 6c66 2c20  funcname}(self, 
-000063a0: 7029 3a5c 6e22 290a 2020 2020 2020 2020  p):\n").        
-000063b0: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
-000063c0: 6622 2020 2020 2020 2020 7b64 6f63 7374  f"        {docst
-000063d0: 7269 6e67 2172 7d5c 6e22 290a 2020 2020  ring!r}\n").    
-000063e0: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
-000063f0: 6974 6528 6622 2020 2020 2020 2020 705b  ite(f"        p[
-00006400: 305d 203d 204e 6f64 6528 277b 6375 7272  0] = Node('{curr
-00006410: 656e 745f 6e6f 6e74 6572 6d69 6e61 6c7d  ent_nonterminal}
-00006420: 272c 2070 5b31 3a5d 295c 6e5c 6e5c 6e22  ', p[1:])\n\n\n"
-00006430: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
-00006440: 7220 6675 6e63 6e61 6d65 2c20 646f 6373  r funcname, docs
-00006450: 7472 696e 6720 696e 2073 6f72 7465 6428  tring in sorted(
-00006460: 7072 6f64 7563 7469 6f6e 732e 6974 656d  productions.item
-00006470: 7328 2929 3a0a 2020 2020 2020 2020 2020  s()):.          
-00006480: 2020 2020 2020 6e6f 6e74 6572 6d69 6e61        nontermina
-00006490: 6c20 3d20 6675 6e63 6e61 6d65 2e73 706c  l = funcname.spl
-000064a0: 6974 2822 5f5f 2229 5b30 5d5b 323a 5d0a  it("__")[0][2:].
-000064b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000064c0: 6966 206e 6f6e 7465 726d 696e 616c 203d  if nonterminal =
-000064d0: 3d20 2273 7461 7274 5f73 796d 626f 6c22  = "start_symbol"
-000064e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000064f0: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
-00006500: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00006510: 6620 6e6f 6e74 6572 6d69 6e61 6c20 213d  f nonterminal !=
-00006520: 2063 7572 7265 6e74 5f6e 6f6e 7465 726d   current_nonterm
-00006530: 696e 616c 3a0a 2020 2020 2020 2020 2020  inal:.          
-00006540: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-00006550: 745f 6e6f 6e74 6572 6d69 6e61 6c20 3d20  t_nonterminal = 
-00006560: 6e6f 6e74 6572 6d69 6e61 6c0a 2020 2020  nonterminal.    
-00006570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006580: 662e 7772 6974 6528 6622 2020 2020 2323  f.write(f"    ##
-00006590: 2320 7b63 7572 7265 6e74 5f6e 6f6e 7465  # {current_nonte
-000065a0: 726d 696e 616c 7d20 2323 235c 6e5c 6e5c  rminal} ###\n\n\
-000065b0: 6e22 290a 2020 2020 2020 2020 2020 2020  n").            
-000065c0: 2020 2020 662e 7772 6974 6528 6622 2020      f.write(f"  
-000065d0: 2020 6465 6620 7b66 756e 636e 616d 657d    def {funcname}
-000065e0: 2873 656c 662c 2070 293a 5c6e 2229 0a20  (self, p):\n"). 
-000065f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00006600: 2e77 7269 7465 2866 2220 2020 2020 2020  .write(f"       
-00006610: 207b 646f 6373 7472 696e 6721 727d 5c6e   {docstring!r}\n
-00006620: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00006630: 2020 2066 2e77 7269 7465 2866 2220 2020     f.write(f"   
-00006640: 2020 2020 2070 5b30 5d20 3d20 4e6f 6465       p[0] = Node
-00006650: 2827 7b63 7572 7265 6e74 5f6e 6f6e 7465  ('{current_nonte
-00006660: 726d 696e 616c 7d27 2c20 705b 313a 5d29  rminal}', p[1:])
-00006670: 5c6e 5c6e 5c6e 2229 0a20 2020 2020 2020  \n\n\n").       
-00006680: 2020 2020 2066 2e77 7269 7465 2822 2020       f.write("  
-00006690: 2020 6465 6620 705f 6572 726f 7228 7365    def p_error(se
-000066a0: 6c66 2c20 7029 3a5c 6e22 290a 2020 2020  lf, p):\n").    
-000066b0: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
-000066c0: 2220 2020 2020 2020 2070 6173 735c 6e5c  "        pass\n\
-000066d0: 6e22 290a 0a0a 6465 6620 5f70 6172 7365  n")...def _parse
-000066e0: 2873 656c 662c 2069 6e70 7574 3d4e 6f6e  (self, input=Non
-000066f0: 652c 206c 6578 6572 3d4e 6f6e 652c 2064  e, lexer=None, d
-00006700: 6562 7567 3d4e 6f6e 652c 2074 7261 636b  ebug=None, track
-00006710: 696e 673d 302c 2074 6f6b 656e 6675 6e63  ing=0, tokenfunc
-00006720: 3d4e 6f6e 6529 3a0a 2020 2020 7365 6c66  =None):.    self
-00006730: 2e6c 6f6f 6b61 6865 6164 203d 204e 6f6e  .lookahead = Non
-00006740: 6520 2023 2043 7572 7265 6e74 206c 6f6f  e  # Current loo
-00006750: 6b61 6865 6164 2073 796d 626f 6c0a 2020  kahead symbol.  
-00006760: 2020 6163 7469 6f6e 7320 3d20 7365 6c66    actions = self
-00006770: 2e61 6374 696f 6e20 2023 204c 6f63 616c  .action  # Local
-00006780: 2072 6566 6572 656e 6365 2074 6f20 6163   reference to ac
-00006790: 7469 6f6e 2074 6162 6c65 2028 746f 2061  tion table (to a
-000067a0: 766f 6964 206c 6f6f 6b75 7020 6f6e 2073  void lookup on s
-000067b0: 656c 662e 290a 2020 2020 676f 746f 203d  elf.).    goto =
-000067c0: 2073 656c 662e 676f 746f 2020 2320 4c6f   self.goto  # Lo
-000067d0: 6361 6c20 7265 6665 7265 6e63 6520 746f  cal reference to
-000067e0: 2067 6f74 6f20 7461 626c 6520 2874 6f20   goto table (to 
-000067f0: 6176 6f69 6420 6c6f 6f6b 7570 206f 6e20  avoid lookup on 
-00006800: 7365 6c66 2e29 0a20 2020 2070 726f 6420  self.).    prod 
-00006810: 3d20 280a 2020 2020 2020 2020 7365 6c66  = (.        self
-00006820: 2e70 726f 6475 6374 696f 6e73 0a20 2020  .productions.   
-00006830: 2029 2020 2320 4c6f 6361 6c20 7265 6665   )  # Local refe
-00006840: 7265 6e63 6520 746f 2070 726f 6475 6374  rence to product
-00006850: 696f 6e20 6c69 7374 2028 746f 2061 766f  ion list (to avo
-00006860: 6964 206c 6f6f 6b75 7020 6f6e 2073 656c  id lookup on sel
-00006870: 662e 290a 2020 2020 7073 6c69 6365 203d  f.).    pslice =
-00006880: 2059 6163 6350 726f 6475 6374 696f 6e28   YaccProduction(
-00006890: 4e6f 6e65 2920 2023 2050 726f 6475 6374  None)  # Product
-000068a0: 696f 6e20 6f62 6a65 6374 2070 6173 7365  ion object passe
-000068b0: 6420 746f 2067 7261 6d6d 6172 2072 756c  d to grammar rul
-000068c0: 6573 0a20 2020 2065 7272 6f72 636f 756e  es.    errorcoun
-000068d0: 7420 3d20 3020 2023 2055 7365 6420 6475  t = 0  # Used du
-000068e0: 7269 6e67 2065 7272 6f72 2072 6563 6f76  ring error recov
-000068f0: 6572 790a 0a20 2020 2023 202d 2d21 2044  ery..    # --! D
-00006900: 4542 5547 0a20 2020 2023 2064 6562 7567  EBUG.    # debug
-00006910: 2e69 6e66 6f28 2250 4c59 3a20 5041 5253  .info("PLY: PARS
-00006920: 4520 4445 4255 4720 5354 4152 5422 290a  E DEBUG START").
-00006930: 2020 2020 2320 2d2d 2120 4445 4255 470a      # --! DEBUG.
-00006940: 0a20 2020 2023 2053 6574 2075 7020 7468  .    # Set up th
-00006950: 6520 6c65 7865 7220 616e 6420 7061 7273  e lexer and pars
-00006960: 6572 206f 626a 6563 7473 206f 6e20 7073  er objects on ps
-00006970: 6c69 6365 0a20 2020 2070 736c 6963 652e  lice.    pslice.
-00006980: 6c65 7865 7220 3d20 6c65 7865 720a 2020  lexer = lexer.  
-00006990: 2020 7073 6c69 6365 2e70 6172 7365 7220    pslice.parser 
-000069a0: 3d20 7365 6c66 0a0a 2020 2020 2320 4966  = self..    # If
-000069b0: 2069 6e70 7574 2077 6173 2073 7570 706c   input was suppl
-000069c0: 6965 642c 2070 6173 7320 746f 206c 6578  ied, pass to lex
-000069d0: 6572 0a20 2020 2069 6620 696e 7075 7420  er.    if input 
-000069e0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000069f0: 2020 2020 206c 6578 6572 2e69 6e70 7574       lexer.input
-00006a00: 2869 6e70 7574 290a 0a20 2020 2069 6620  (input)..    if 
-00006a10: 746f 6b65 6e66 756e 6320 6973 204e 6f6e  tokenfunc is Non
-00006a20: 653a 0a20 2020 2020 2020 2023 2054 6f6b  e:.        # Tok
-00006a30: 656e 697a 6520 6675 6e63 7469 6f6e 0a20  enize function. 
-00006a40: 2020 2020 2020 2067 6574 5f74 6f6b 656e         get_token
-00006a50: 203d 206c 6578 6572 2e74 6f6b 656e 0a20   = lexer.token. 
-00006a60: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00006a70: 2067 6574 5f74 6f6b 656e 203d 2074 6f6b   get_token = tok
-00006a80: 656e 6675 6e63 0a0a 2020 2020 2320 5365  enfunc..    # Se
-00006a90: 7420 7570 2074 6865 2073 7461 7465 2061  t up the state a
-00006aa0: 6e64 2073 796d 626f 6c20 7374 6163 6b73  nd symbol stacks
-00006ab0: 0a0a 2020 2020 6c6f 6f6b 6168 6561 6473  ..    lookaheads
-00006ac0: 7461 636b 203d 205b 5d20 2023 2053 7461  tack = []  # Sta
-00006ad0: 636b 206f 6620 6c6f 6f6b 6168 6561 6420  ck of lookahead 
-00006ae0: 746f 6b65 6e73 0a20 2020 2073 656c 662e  tokens.    self.
-00006af0: 6c6f 6f6b 6168 6561 6473 7461 636b 203d  lookaheadstack =
-00006b00: 206c 6f6f 6b61 6865 6164 7374 6163 6b0a   lookaheadstack.
-00006b10: 2020 2020 7374 6174 6573 7461 636b 203d      statestack =
-00006b20: 205b 5d20 2023 2053 7461 636b 206f 6620   []  # Stack of 
-00006b30: 7061 7273 696e 6720 7374 6174 6573 0a20  parsing states. 
-00006b40: 2020 2073 656c 662e 7374 6174 6573 7461     self.statesta
-00006b50: 636b 203d 2073 7461 7465 7374 6163 6b0a  ck = statestack.
-00006b60: 2020 2020 7379 6d73 7461 636b 203d 205b      symstack = [
-00006b70: 5d20 2023 2053 7461 636b 206f 6620 6772  ]  # Stack of gr
-00006b80: 616d 6d61 7220 7379 6d62 6f6c 730a 2020  ammar symbols.  
-00006b90: 2020 7365 6c66 2e73 796d 7374 6163 6b20    self.symstack 
-00006ba0: 3d20 7379 6d73 7461 636b 0a0a 2020 2020  = symstack..    
-00006bb0: 7073 6c69 6365 2e73 7461 636b 203d 2073  pslice.stack = s
-00006bc0: 796d 7374 6163 6b20 2023 2050 7574 2069  ymstack  # Put i
-00006bd0: 6e20 7468 6520 7072 6f64 7563 7469 6f6e  n the production
-00006be0: 0a20 2020 2065 7272 746f 6b65 6e20 3d20  .    errtoken = 
-00006bf0: 4e6f 6e65 2020 2320 4572 7220 746f 6b65  None  # Err toke
-00006c00: 6e0a 0a20 2020 2023 2054 6865 2073 7461  n..    # The sta
-00006c10: 7274 2073 7461 7465 2069 7320 6173 7375  rt state is assu
-00006c20: 6d65 6420 746f 2062 6520 2830 2c24 656e  med to be (0,$en
-00006c30: 6429 0a0a 2020 2020 7374 6174 6573 7461  d)..    statesta
-00006c40: 636b 2e61 7070 656e 6428 3029 0a20 2020  ck.append(0).   
-00006c50: 2073 796d 203d 2059 6163 6353 796d 626f   sym = YaccSymbo
-00006c60: 6c28 290a 2020 2020 7379 6d2e 7479 7065  l().    sym.type
-00006c70: 203d 2022 2465 6e64 220a 2020 2020 7379   = "$end".    sy
-00006c80: 6d73 7461 636b 2e61 7070 656e 6428 7379  mstack.append(sy
-00006c90: 6d29 0a20 2020 2073 7461 7465 203d 2030  m).    state = 0
-00006ca0: 0a20 2020 2077 6869 6c65 2031 3a0a 2020  .    while 1:.  
-00006cb0: 2020 2020 2020 2320 4765 7420 7468 6520        # Get the 
-00006cc0: 6e65 7874 2073 796d 626f 6c20 6f6e 2074  next symbol on t
-00006cd0: 6865 2069 6e70 7574 2e20 2049 6620 6120  he input.  If a 
-00006ce0: 6c6f 6f6b 6168 6561 6420 7379 6d62 6f6c  lookahead symbol
-00006cf0: 0a20 2020 2020 2020 2023 2069 7320 616c  .        # is al
-00006d00: 7265 6164 7920 7365 742c 2077 6520 6a75  ready set, we ju
-00006d10: 7374 2075 7365 2074 6861 742e 204f 7468  st use that. Oth
-00006d20: 6572 7769 7365 2c20 7765 276c 6c20 7075  erwise, we'll pu
-00006d30: 6c6c 0a20 2020 2020 2020 2023 2074 6865  ll.        # the
-00006d40: 206e 6578 7420 746f 6b65 6e20 6f66 6620   next token off 
-00006d50: 6f66 2074 6865 206c 6f6f 6b61 6865 6164  of the lookahead
-00006d60: 7374 6163 6b20 6f72 2066 726f 6d20 7468  stack or from th
-00006d70: 6520 6c65 7865 720a 0a20 2020 2020 2020  e lexer..       
-00006d80: 2023 202d 2d21 2044 4542 5547 0a20 2020   # --! DEBUG.   
-00006d90: 2020 2020 2023 2064 6562 7567 2e64 6562       # debug.deb
-00006da0: 7567 2827 2729 0a20 2020 2020 2020 2023  ug('').        #
-00006db0: 2064 6562 7567 2e64 6562 7567 2827 5374   debug.debug('St
-00006dc0: 6174 6520 203a 2025 7327 2c20 7374 6174  ate  : %s', stat
-00006dd0: 6529 0a20 2020 2020 2020 2023 202d 2d21  e).        # --!
-00006de0: 2044 4542 5547 0a0a 2020 2020 2020 2020   DEBUG..        
-00006df0: 6966 206e 6f74 2073 656c 662e 6c6f 6f6b  if not self.look
-00006e00: 6168 6561 643a 0a20 2020 2020 2020 2020  ahead:.         
-00006e10: 2020 2069 6620 6e6f 7420 7365 6c66 2e6c     if not self.l
-00006e20: 6f6f 6b61 6865 6164 7374 6163 6b3a 0a20  ookaheadstack:. 
-00006e30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00006e40: 656c 662e 6c6f 6f6b 6168 6561 6420 3d20  elf.lookahead = 
-00006e50: 6765 745f 746f 6b65 6e28 2920 2023 2047  get_token()  # G
-00006e60: 6574 2074 6865 206e 6578 7420 746f 6b65  et the next toke
-00006e70: 6e0a 2020 2020 2020 2020 2020 2020 656c  n.            el
-00006e80: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00006e90: 2020 2020 7365 6c66 2e6c 6f6f 6b61 6865      self.lookahe
-00006ea0: 6164 203d 2073 656c 662e 6c6f 6f6b 6168  ad = self.lookah
-00006eb0: 6561 6473 7461 636b 2e70 6f70 2829 0a20  eadstack.pop(). 
-00006ec0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00006ed0: 7420 7365 6c66 2e6c 6f6f 6b61 6865 6164  t self.lookahead
-00006ee0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00006ef0: 2020 7365 6c66 2e6c 6f6f 6b61 6865 6164    self.lookahead
-00006f00: 203d 2059 6163 6353 796d 626f 6c28 290a   = YaccSymbol().
-00006f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f20: 7365 6c66 2e6c 6f6f 6b61 6865 6164 2e74  self.lookahead.t
-00006f30: 7970 6520 3d20 2224 656e 6422 0a0a 2020  ype = "$end"..  
-00006f40: 2020 2020 2020 2320 2d2d 2120 4445 4255        # --! DEBU
-00006f50: 470a 2020 2020 2020 2020 2320 6465 6275  G.        # debu
-00006f60: 672e 6465 6275 6728 2753 7461 636b 2020  g.debug('Stack  
-00006f70: 3a20 2573 272c 0a20 2020 2020 2020 2023  : %s',.        #
-00006f80: 2020 2020 2020 2020 2020 2020 2028 2225               ("%
-00006f90: 7320 2e20 2573 2220 2520 2822 2022 2e6a  s . %s" % (" ".j
-00006fa0: 6f69 6e28 5b78 782e 7479 7065 2066 6f72  oin([xx.type for
-00006fb0: 2078 7820 696e 2073 796d 7374 6163 6b5d   xx in symstack]
-00006fc0: 5b31 3a5d 292c 2073 7472 2873 656c 662e  [1:]), str(self.
-00006fd0: 6c6f 6f6b 6168 6561 6429 2929 2e6c 7374  lookahead))).lst
-00006fe0: 7269 7028 2929 0a20 2020 2020 2020 2023  rip()).        #
-00006ff0: 202d 2d21 2044 4542 5547 0a0a 2020 2020   --! DEBUG..    
-00007000: 2020 2020 2320 4368 6563 6b20 7468 6520      # Check the 
-00007010: 6163 7469 6f6e 2074 6162 6c65 0a20 2020  action table.   
-00007020: 2020 2020 206c 7479 7065 203d 2073 656c       ltype = sel
-00007030: 662e 6c6f 6f6b 6168 6561 642e 7479 7065  f.lookahead.type
-00007040: 0a20 2020 2020 2020 2074 203d 2061 6374  .        t = act
-00007050: 696f 6e73 5b73 7461 7465 5d2e 6765 7428  ions[state].get(
-00007060: 6c74 7970 6529 0a0a 2020 2020 2020 2020  ltype)..        
-00007070: 2320 5468 6973 2069 7320 6120 6261 6420  # This is a bad 
-00007080: 6861 636b 2074 6f20 6465 616c 2077 6974  hack to deal wit
-00007090: 6820 4c69 6c79 506f 6e64 2773 2062 6163  h LilyPond's bac
-000070a0: 6b75 702f 7265 7061 7273 6520 7265 6769  kup/reparse regi
-000070b0: 6d65 0a20 2020 2020 2020 2069 6620 7420  me.        if t 
-000070c0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-000070d0: 2020 2020 2061 203d 2073 6574 2861 6374       a = set(act
-000070e0: 696f 6e73 5b73 7461 7465 5d2e 7661 6c75  ions[state].valu
-000070f0: 6573 2829 290a 2020 2020 2020 2020 2020  es()).          
-00007100: 2020 6966 2031 203d 3d20 6c65 6e28 6129    if 1 == len(a)
-00007110: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00007120: 2020 7420 3d20 6c69 7374 2861 295b 305d    t = list(a)[0]
-00007130: 0a0a 2020 2020 2020 2020 6966 2074 2069  ..        if t i
-00007140: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00007150: 2020 2020 2020 2020 6966 2074 203e 2030          if t > 0
-00007160: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00007170: 2020 2320 7368 6966 7420 6120 7379 6d62    # shift a symb
-00007180: 6f6c 206f 6e20 7468 6520 7374 6163 6b0a  ol on the stack.
-00007190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000071a0: 7374 6174 6573 7461 636b 2e61 7070 656e  statestack.appen
-000071b0: 6428 7429 0a20 2020 2020 2020 2020 2020  d(t).           
-000071c0: 2020 2020 2073 7461 7465 203d 2074 0a0a       state = t..
-000071d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000071e0: 2320 2d2d 2120 4445 4255 470a 2020 2020  # --! DEBUG.    
-000071f0: 2020 2020 2020 2020 2020 2020 2320 6465              # de
-00007200: 6275 672e 6465 6275 6728 2241 6374 696f  bug.debug("Actio
-00007210: 6e20 3a20 5368 6966 7420 616e 6420 676f  n : Shift and go
-00007220: 746f 2073 7461 7465 2025 7322 2c20 7429  to state %s", t)
-00007230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007240: 2023 202d 2d21 2044 4542 5547 0a0a 2020   # --! DEBUG..  
-00007250: 2020 2020 2020 2020 2020 2020 2020 7379                sy
-00007260: 6d73 7461 636b 2e61 7070 656e 6428 7365  mstack.append(se
-00007270: 6c66 2e6c 6f6f 6b61 6865 6164 290a 2020  lf.lookahead).  
-00007280: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00007290: 6c66 2e6c 6f6f 6b61 6865 6164 203d 204e  lf.lookahead = N
-000072a0: 6f6e 650a 0a20 2020 2020 2020 2020 2020  one..           
-000072b0: 2020 2020 2023 2044 6563 7265 6173 6520       # Decrease 
-000072c0: 6572 726f 7220 636f 756e 7420 6f6e 2073  error count on s
-000072d0: 7563 6365 7373 6675 6c20 7368 6966 740a  uccessful shift.
-000072e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000072f0: 6966 2065 7272 6f72 636f 756e 743a 0a20  if errorcount:. 
-00007300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007310: 2020 2065 7272 6f72 636f 756e 7420 2d3d     errorcount -=
-00007320: 2031 0a20 2020 2020 2020 2020 2020 2020   1.             
-00007330: 2020 2063 6f6e 7469 6e75 650a 0a20 2020     continue..   
-00007340: 2020 2020 2020 2020 2069 6620 7420 3c20           if t < 
-00007350: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-00007360: 2020 2023 2072 6564 7563 6520 6120 7379     # reduce a sy
-00007370: 6d62 6f6c 206f 6e20 7468 6520 7374 6163  mbol on the stac
-00007380: 6b2c 2065 6d69 7420 6120 7072 6f64 7563  k, emit a produc
-00007390: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
-000073a0: 2020 2020 2070 203d 2070 726f 645b 2d74       p = prod[-t
-000073b0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-000073c0: 2020 706e 616d 6520 3d20 702e 6e61 6d65    pname = p.name
-000073d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000073e0: 2070 6c65 6e20 3d20 702e 6c65 6e0a 0a20   plen = p.len.. 
-000073f0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00007400: 2047 6574 2070 726f 6475 6374 696f 6e20   Get production 
-00007410: 6675 6e63 7469 6f6e 0a20 2020 2020 2020  function.       
-00007420: 2020 2020 2020 2020 2073 796d 203d 2059           sym = Y
-00007430: 6163 6353 796d 626f 6c28 290a 2020 2020  accSymbol().    
-00007440: 2020 2020 2020 2020 2020 2020 7379 6d2e              sym.
-00007450: 7479 7065 203d 2070 6e61 6d65 2020 2320  type = pname  # 
-00007460: 5072 6f64 7563 7469 6f6e 206e 616d 650a  Production name.
-00007470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007480: 7379 6d2e 7661 6c75 6520 3d20 4e6f 6e65  sym.value = None
-00007490: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000074a0: 2020 2320 2d2d 2120 4445 4255 470a 2020    # --! DEBUG.  
-000074b0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-000074c0: 6966 2070 6c65 6e3a 0a20 2020 2020 2020  if plen:.       
-000074d0: 2020 2020 2020 2020 2023 2020 2020 2064           #     d
-000074e0: 6562 7567 2e69 6e66 6f28 2241 6374 696f  ebug.info("Actio
-000074f0: 6e20 3a20 5265 6475 6365 2072 756c 6520  n : Reduce rule 
-00007500: 5b25 735d 2077 6974 6820 2573 2061 6e64  [%s] with %s and
-00007510: 2067 6f74 6f20 7374 6174 6520 2564 222c   goto state %d",
-00007520: 2070 2e73 7472 2c20 225b 222b 222c 222e   p.str, "["+",".
-00007530: 6a6f 696e 285b 666f 726d 6174 5f73 7461  join([format_sta
-00007540: 636b 5f65 6e74 7279 285f 762e 7661 6c75  ck_entry(_v.valu
-00007550: 6529 2066 6f72 205f 7620 696e 2073 796d  e) for _v in sym
-00007560: 7374 6163 6b5b 2d70 6c65 6e3a 5d5d 292b  stack[-plen:]])+
-00007570: 225d 222c 2d74 290a 2020 2020 2020 2020  "]",-t).        
-00007580: 2020 2020 2020 2020 2320 656c 7365 3a0a          # else:.
-00007590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000075a0: 2320 2020 2020 6465 6275 672e 696e 666f  #     debug.info
-000075b0: 2822 4163 7469 6f6e 203a 2052 6564 7563  ("Action : Reduc
-000075c0: 6520 7275 6c65 205b 2573 5d20 7769 7468  e rule [%s] with
-000075d0: 2025 7320 616e 6420 676f 746f 2073 7461   %s and goto sta
-000075e0: 7465 2025 6422 2c20 702e 7374 722c 205b  te %d", p.str, [
-000075f0: 5d2c 2d74 290a 2020 2020 2020 2020 2020  ],-t).          
-00007600: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00007610: 2020 2020 2020 2020 2320 2d2d 2120 4445          # --! DE
-00007620: 4255 470a 0a20 2020 2020 2020 2020 2020  BUG..           
-00007630: 2020 2020 2069 6620 706c 656e 3a0a 2020       if plen:.  
-00007640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007650: 2020 7461 7267 203d 2073 796d 7374 6163    targ = symstac
-00007660: 6b5b 2d70 6c65 6e20 2d20 3120 3a5d 0a20  k[-plen - 1 :]. 
-00007670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007680: 2020 2074 6172 675b 305d 203d 2073 796d     targ[0] = sym
-00007690: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000076a0: 2020 2020 2020 2320 2d2d 2120 5452 4143        # --! TRAC
-000076b0: 4b49 4e47 0a20 2020 2020 2020 2020 2020  KING.           
-000076c0: 2020 2020 2020 2020 2069 6620 7472 6163           if trac
-000076d0: 6b69 6e67 3a0a 2020 2020 2020 2020 2020  king:.          
-000076e0: 2020 2020 2020 2020 2020 2020 2020 7431                t1
-000076f0: 203d 2074 6172 675b 315d 0a20 2020 2020   = targ[1].     
-00007700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007710: 2020 2073 796d 2e6c 696e 656e 6f20 3d20     sym.lineno = 
-00007720: 7431 2e6c 696e 656e 6f0a 2020 2020 2020  t1.lineno.      
+00000c30: 2020 2020 6173 7365 7274 2069 7369 6e73      assert isins
+00000c40: 7461 6e63 6528 6974 656d 2c20 7374 7229  tance(item, str)
+00000c50: 2c20 7265 7072 2869 7465 6d29 0a20 2020  , repr(item).   
+00000c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000c70: 2072 6573 756c 742e 6170 7065 6e64 2869   result.append(i
+00000c80: 7465 6d29 0a20 2020 2020 2020 2020 2020  tem).           
+00000c90: 2072 6574 7572 6e20 5b66 227b 696e 6465   return [f"{inde
+00000ca0: 6e74 7d7b 6974 656d 7d22 2066 6f72 2069  nt}{item}" for i
+00000cb0: 7465 6d20 696e 2072 6573 756c 745d 0a0a  tem in result]..
+00000cc0: 2020 2020 2020 2020 696e 6465 6e74 203d          indent =
+00000cd0: 205f 696e 6465 6e74 6c69 622e 494e 4445   _indentlib.INDE
+00000ce0: 4e54 0a20 2020 2020 2020 2070 6172 7473  NT.        parts
+00000cf0: 203d 205b 7266 225c 7b73 656c 662e 6e61   = [rf"\{self.na
+00000d00: 6d65 7d22 5d0a 2020 2020 2020 2020 7061  me}"].        pa
+00000d10: 7274 732e 6578 7465 6e64 2872 6563 7572  rts.extend(recur
+00000d20: 7365 2873 656c 662e 6172 6775 6d65 6e74  se(self.argument
+00000d30: 7329 290a 2020 2020 2020 2020 7374 7269  s)).        stri
+00000d40: 6e67 203d 2022 5c6e 222e 6a6f 696e 2870  ng = "\n".join(p
+00000d50: 6172 7473 290a 2020 2020 2020 2020 7265  arts).        re
+00000d60: 7475 726e 2073 7472 696e 670a 0a0a 636c  turn string...cl
+00000d70: 6173 7320 4d75 7369 633a 0a20 2020 2022  ass Music:.    "
+00000d80: 2222 0a20 2020 2041 626a 6164 206d 6f64  "".    Abjad mod
+00000d90: 656c 206f 6620 7468 6520 4c69 6c79 506f  el of the LilyPo
+00000da0: 6e64 2041 5354 206d 7573 6963 206e 6f64  nd AST music nod
+00000db0: 652e 0a20 2020 2022 2222 0a0a 2020 2020  e..    """..    
+00000dc0: 2323 2320 434c 4153 5320 5641 5249 4142  ### CLASS VARIAB
+00000dd0: 4c45 5320 2323 230a 0a20 2020 205f 5f73  LES ###..    __s
+00000de0: 6c6f 7473 5f5f 203d 2028 226d 7573 6963  lots__ = ("music
+00000df0: 222c 290a 0a20 2020 2023 2323 2049 4e49  ",)..    ### INI
+00000e00: 5449 414c 495a 4552 2023 2323 0a0a 2020  TIALIZER ###..  
+00000e10: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+00000e20: 656c 662c 206d 7573 6963 3d4e 6f6e 6529  elf, music=None)
+00000e30: 3a0a 2020 2020 2020 2020 7365 6c66 2e6d  :.        self.m
+00000e40: 7573 6963 203d 206d 7573 6963 0a0a 0a63  usic = music...c
+00000e50: 6c61 7373 2043 6f6e 7465 7874 5370 6563  lass ContextSpec
+00000e60: 6365 644d 7573 6963 284d 7573 6963 293a  cedMusic(Music):
+00000e70: 0a20 2020 2022 2222 0a20 2020 2041 626a  .    """.    Abj
+00000e80: 6164 206d 6f64 656c 206f 6620 7468 6520  ad model of the 
+00000e90: 4c69 6c79 506f 6e64 2041 5354 2063 6f6e  LilyPond AST con
+00000ea0: 7465 7874 2d73 7065 6363 6564 206d 7573  text-specced mus
+00000eb0: 6963 206e 6f64 652e 0a20 2020 2022 2222  ic node..    """
+00000ec0: 0a0a 2020 2020 2323 2320 434c 4153 5320  ..    ### CLASS 
+00000ed0: 5641 5249 4142 4c45 5320 2323 230a 0a20  VARIABLES ###.. 
+00000ee0: 2020 205f 5f73 6c6f 7473 5f5f 203d 2028     __slots__ = (
+00000ef0: 0a20 2020 2020 2020 2023 2022 636f 6e74  .        # "cont
+00000f00: 6578 7422 2c0a 2020 2020 2020 2020 226c  ext",.        "l
+00000f10: 696c 7970 6f6e 645f 7479 7065 222c 0a20  ilypond_type",. 
+00000f20: 2020 2020 2020 2022 6d75 7369 6322 2c0a         "music",.
+00000f30: 2020 2020 2020 2020 226f 7074 696f 6e61          "optiona
+00000f40: 6c5f 6964 222c 0a20 2020 2020 2020 2022  l_id",.        "
+00000f50: 6f70 7469 6f6e 616c 5f63 6f6e 7465 7874  optional_context
+00000f60: 5f6d 6f64 222c 0a20 2020 2029 0a0a 2020  _mod",.    )..  
+00000f70: 2020 2323 2320 494e 4954 4941 4c49 5a45    ### INITIALIZE
+00000f80: 5220 2323 230a 0a20 2020 2064 6566 205f  R ###..    def _
+00000f90: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+00000fa0: 2073 656c 662c 0a20 2020 2020 2020 206c   self,.        l
+00000fb0: 696c 7970 6f6e 645f 7479 7065 3d4e 6f6e  ilypond_type=Non
+00000fc0: 652c 0a20 2020 2020 2020 206f 7074 696f  e,.        optio
+00000fd0: 6e61 6c5f 6964 3d4e 6f6e 652c 0a20 2020  nal_id=None,.   
+00000fe0: 2020 2020 206f 7074 696f 6e61 6c5f 636f       optional_co
+00000ff0: 6e74 6578 745f 6d6f 643d 4e6f 6e65 2c0a  ntext_mod=None,.
+00001000: 2020 2020 2020 2020 6d75 7369 633d 4e6f          music=No
+00001010: 6e65 2c0a 2020 2020 293a 0a20 2020 2020  ne,.    ):.     
+00001020: 2020 206c 696c 7970 6f6e 645f 7479 7065     lilypond_type
+00001030: 203d 206c 696c 7970 6f6e 645f 7479 7065   = lilypond_type
+00001040: 206f 7220 2222 0a20 2020 2020 2020 206d   or "".        m
+00001050: 7573 6963 203d 206d 7573 6963 206f 7220  usic = music or 
+00001060: 5365 7175 656e 7469 616c 4d75 7369 6328  SequentialMusic(
+00001070: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
+00001080: 2069 7369 6e73 7461 6e63 6528 6d75 7369   isinstance(musi
+00001090: 632c 204d 7573 6963 290a 2020 2020 2020  c, Music).      
+000010a0: 2020 7365 6c66 2e6c 696c 7970 6f6e 645f    self.lilypond_
+000010b0: 7479 7065 203d 206c 696c 7970 6f6e 645f  type = lilypond_
+000010c0: 7479 7065 0a20 2020 2020 2020 2073 656c  type.        sel
+000010d0: 662e 6f70 7469 6f6e 616c 5f69 6420 3d20  f.optional_id = 
+000010e0: 6f70 7469 6f6e 616c 5f69 640a 2020 2020  optional_id.    
+000010f0: 2020 2020 7365 6c66 2e6f 7074 696f 6e61      self.optiona
+00001100: 6c5f 636f 6e74 6578 745f 6d6f 6420 3d20  l_context_mod = 
+00001110: 6f70 7469 6f6e 616c 5f63 6f6e 7465 7874  optional_context
+00001120: 5f6d 6f64 0a20 2020 2020 2020 2073 656c  _mod.        sel
+00001130: 662e 6d75 7369 6320 3d20 6d75 7369 630a  f.music = music.
+00001140: 0a20 2020 2023 2323 2050 5542 4c49 4320  .    ### PUBLIC 
+00001150: 4d45 5448 4f44 5320 2323 230a 0a20 2020  METHODS ###..   
+00001160: 2064 6566 2063 6f6e 7374 7275 6374 2873   def construct(s
+00001170: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+00001180: 220a 2020 2020 2020 2020 436f 6e73 7472  ".        Constr
+00001190: 7563 7473 2063 6f6e 7465 7874 2e0a 0a20  ucts context... 
+000011a0: 2020 2020 2020 2052 6574 7572 6e73 2063         Returns c
+000011b0: 6f6e 7465 7874 2e0a 2020 2020 2020 2020  ontext..        
+000011c0: 2222 220a 2020 2020 2020 2020 6966 2073  """.        if s
+000011d0: 656c 662e 6c69 6c79 706f 6e64 5f74 7970  elf.lilypond_typ
+000011e0: 6520 696e 2073 656c 662e 6b6e 6f77 6e5f  e in self.known_
+000011f0: 636f 6e74 6578 7473 3a0a 2020 2020 2020  contexts:.      
+00001200: 2020 2020 2020 636f 6e74 6578 7420 3d20        context = 
+00001210: 7365 6c66 2e6b 6e6f 776e 5f63 6f6e 7465  self.known_conte
+00001220: 7874 735b 7365 6c66 2e6c 696c 7970 6f6e  xts[self.lilypon
+00001230: 645f 7479 7065 5d28 5b5d 290a 2020 2020  d_type]([]).    
+00001240: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00001250: 2020 2020 2020 7261 6973 6520 4578 6365        raise Exce
+00001260: 7074 696f 6e28 6622 636f 6e74 6578 7420  ption(f"context 
+00001270: 7479 7065 206e 6f74 2073 7570 706f 7274  type not support
+00001280: 6564 3a20 7b73 656c 662e 6c69 6c79 706f  ed: {self.lilypo
+00001290: 6e64 5f74 7970 657d 2e22 290a 0a20 2020  nd_type}.")..   
+000012a0: 2020 2020 2069 6620 7365 6c66 2e6f 7074       if self.opt
+000012b0: 696f 6e61 6c5f 6964 2069 7320 6e6f 7420  ional_id is not 
+000012c0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+000012d0: 2020 636f 6e74 6578 742e 6e61 6d65 203d    context.name =
+000012e0: 2073 656c 662e 6f70 7469 6f6e 616c 5f69   self.optional_i
+000012f0: 640a 0a20 2020 2020 2020 2069 6620 7365  d..        if se
+00001300: 6c66 2e6f 7074 696f 6e61 6c5f 636f 6e74  lf.optional_cont
+00001310: 6578 745f 6d6f 6420 6973 206e 6f74 204e  ext_mod is not N
+00001320: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00001330: 2066 6f72 2078 2069 6e20 7365 6c66 2e6f   for x in self.o
+00001340: 7074 696f 6e61 6c5f 636f 6e74 6578 745f  ptional_context_
+00001350: 6d6f 643a 0a20 2020 2020 2020 2020 2020  mod:.           
+00001360: 2020 2020 2070 7269 6e74 2878 290a 2020       print(x).  
+00001370: 2020 2020 2020 2020 2020 2320 544f 444f            # TODO
+00001380: 3a20 696d 706c 656d 656e 7420 636f 6e74  : implement cont
+00001390: 6578 7420 6d6f 6469 6669 6361 7469 6f6e  ext modification
+000013a0: 7320 6f6e 2063 6f6e 7465 7874 730a 2020  s on contexts.  
+000013b0: 2020 2020 2020 2020 2020 7061 7373 0a0a            pass..
+000013c0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+000013d0: 7461 6e63 6528 7365 6c66 2e6d 7573 6963  tance(self.music
+000013e0: 2c20 5369 6d75 6c74 616e 656f 7573 4d75  , SimultaneousMu
+000013f0: 7369 6329 3a0a 2020 2020 2020 2020 2020  sic):.          
+00001400: 2020 636f 6e74 6578 742e 7369 6d75 6c74    context.simult
+00001410: 616e 656f 7573 203d 2054 7275 650a 2020  aneous = True.  
+00001420: 2020 2020 2020 2320 636f 6e74 6578 742e        # context.
+00001430: 6578 7465 6e64 286d 7573 6963 2e63 6f6e  extend(music.con
+00001440: 7374 7275 6374 2829 290a 2020 2020 2020  struct()).      
+00001450: 2020 636f 6e74 6578 742e 6578 7465 6e64    context.extend
+00001460: 2873 656c 662e 6d75 7369 632e 636f 6e73  (self.music.cons
+00001470: 7472 7563 7428 2929 0a0a 2020 2020 2020  truct())..      
+00001480: 2020 7265 7475 726e 2063 6f6e 7465 7874    return context
+00001490: 0a0a 2020 2020 2323 2320 5055 424c 4943  ..    ### PUBLIC
+000014a0: 2050 524f 5045 5254 4945 5320 2323 230a   PROPERTIES ###.
+000014b0: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
+000014c0: 2020 2064 6566 206b 6e6f 776e 5f63 6f6e     def known_con
+000014d0: 7465 7874 7328 7365 6c66 293a 0a20 2020  texts(self):.   
+000014e0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000014f0: 204b 6e6f 776e 2063 6f6e 7465 7874 732e   Known contexts.
+00001500: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+00001510: 7320 6469 6374 696f 6e61 7279 2e0a 2020  s dictionary..  
+00001520: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00001530: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
+00001540: 2020 2020 2020 2022 4368 6f69 7253 7461         "ChoirSta
+00001550: 6666 223a 205f 7363 6f72 652e 5374 6166  ff": _score.Staf
+00001560: 6647 726f 7570 2c0a 2020 2020 2020 2020  fGroup,.        
+00001570: 2020 2020 2247 7261 6e64 5374 6166 6622      "GrandStaff"
+00001580: 3a20 5f73 636f 7265 2e53 7461 6666 4772  : _score.StaffGr
+00001590: 6f75 702c 0a20 2020 2020 2020 2020 2020  oup,.           
+000015a0: 2022 5069 616e 6f53 7461 6666 223a 205f   "PianoStaff": _
+000015b0: 7363 6f72 652e 5374 6166 6647 726f 7570  score.StaffGroup
+000015c0: 2c0a 2020 2020 2020 2020 2020 2020 2253  ,.            "S
+000015d0: 636f 7265 223a 205f 7363 6f72 652e 5363  core": _score.Sc
+000015e0: 6f72 652c 0a20 2020 2020 2020 2020 2020  ore,.           
+000015f0: 2022 5374 6166 6622 3a20 5f73 636f 7265   "Staff": _score
+00001600: 2e53 7461 6666 2c0a 2020 2020 2020 2020  .Staff,.        
+00001610: 2020 2020 2253 7461 6666 4772 6f75 7022      "StaffGroup"
+00001620: 3a20 5f73 636f 7265 2e53 7461 6666 4772  : _score.StaffGr
+00001630: 6f75 702c 0a20 2020 2020 2020 2020 2020  oup,.           
+00001640: 2022 566f 6963 6522 3a20 5f73 636f 7265   "Voice": _score
+00001650: 2e56 6f69 6365 2c0a 2020 2020 2020 2020  .Voice,.        
+00001660: 7d0a 0a0a 636c 6173 7320 4775 696c 6550  }...class GuileP
+00001670: 726f 7879 3a0a 2020 2020 2222 220a 2020  roxy:.    """.  
+00001680: 2020 456d 756c 6174 6573 204c 696c 7950    Emulates LilyP
+00001690: 6f6e 6420 6d75 7369 6320 6675 6e63 7469  ond music functi
+000016a0: 6f6e 732e 0a0a 2020 2020 5573 6564 2069  ons...    Used i
+000016b0: 6e74 6572 6e61 6c6c 7920 6279 204c 696c  nternally by Lil
+000016c0: 7950 6f6e 6450 6172 7365 722e 0a0a 2020  yPondParser...  
+000016d0: 2020 4e6f 7420 636f 6d70 6f73 6572 2d73    Not composer-s
+000016e0: 6166 652e 0a20 2020 2022 2222 0a0a 2020  afe..    """..  
+000016f0: 2020 2323 2320 434c 4153 5320 5641 5249    ### CLASS VARI
+00001700: 4142 4c45 5320 2323 230a 0a20 2020 205f  ABLES ###..    _
+00001710: 6675 6e63 7469 6f6e 5f6e 616d 655f 6d61  function_name_ma
+00001720: 7070 696e 673a 2064 6963 745b 7374 722c  pping: dict[str,
+00001730: 2074 7970 696e 672e 4361 6c6c 6162 6c65   typing.Callable
+00001740: 5d20 3d20 7b7d 0a0a 2020 2020 2323 2320  ] = {}..    ### 
+00001750: 494e 4954 4941 4c49 5a45 5220 2323 230a  INITIALIZER ###.
+00001760: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00001770: 5f28 7365 6c66 2c20 636c 6965 6e74 3d4e  _(self, client=N
+00001780: 6f6e 6529 3a0a 2020 2020 2020 2020 7365  one):.        se
+00001790: 6c66 2e63 6c69 656e 7420 3d20 636c 6965  lf.client = clie
+000017a0: 6e74 0a0a 2020 2020 2323 2320 5350 4543  nt..    ### SPEC
+000017b0: 4941 4c20 4d45 5448 4f44 5320 2323 230a  IAL METHODS ###.
+000017c0: 0a20 2020 2064 6566 205f 5f63 616c 6c5f  .    def __call_
+000017d0: 5f28 7365 6c66 2c20 6675 6e63 7469 6f6e  _(self, function
+000017e0: 5f6e 616d 652c 2061 7267 756d 656e 7473  _name, arguments
+000017f0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
+00001800: 2020 2020 2020 2043 616c 6c73 2047 7569         Calls Gui
+00001810: 6c65 2070 726f 7879 206f 6e20 6060 6675  le proxy on ``fu
+00001820: 6e63 7469 6f6e 5f6e 616d 6560 6020 7769  nction_name`` wi
+00001830: 7468 2060 6061 7267 756d 656e 7473 6060  th ``arguments``
+00001840: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00001850: 6e73 2066 756e 6374 696f 6e20 6f75 7470  ns function outp
+00001860: 7574 2e0a 2020 2020 2020 2020 2222 220a  ut..        """.
+00001870: 2020 2020 2020 2020 6966 2068 6173 6174          if hasat
+00001880: 7472 2873 656c 662c 2066 756e 6374 696f  tr(self, functio
+00001890: 6e5f 6e61 6d65 5b31 3a5d 293a 0a20 2020  n_name[1:]):.   
+000018a0: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+000018b0: 3d20 6765 7461 7474 7228 7365 6c66 2c20  = getattr(self, 
+000018c0: 6675 6e63 7469 6f6e 5f6e 616d 655b 313a  function_name[1:
+000018d0: 5d29 282a 6172 6775 6d65 6e74 7329 0a20  ])(*arguments). 
+000018e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000018f0: 6e20 7265 7375 6c74 0a20 2020 2020 2020  n result.       
+00001900: 2065 6c69 6620 6675 6e63 7469 6f6e 5f6e   elif function_n
+00001910: 616d 655b 313a 5d20 696e 2073 656c 662e  ame[1:] in self.
+00001920: 5f66 756e 6374 696f 6e5f 6e61 6d65 5f6d  _function_name_m
+00001930: 6170 7069 6e67 3a0a 2020 2020 2020 2020  apping:.        
+00001940: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
+00001950: 6520 3d20 6675 6e63 7469 6f6e 5f6e 616d  e = function_nam
+00001960: 655b 313a 5d0a 2020 2020 2020 2020 2020  e[1:].          
+00001970: 2020 7265 7375 6c74 203d 2067 6574 6174    result = getat
+00001980: 7472 2873 656c 662c 2066 756e 6374 696f  tr(self, functio
+00001990: 6e5f 6e61 6d65 2928 2a61 7267 756d 656e  n_name)(*argumen
+000019a0: 7473 290a 2020 2020 2020 2020 2020 2020  ts).            
+000019b0: 7265 7475 726e 2072 6573 756c 740a 2020  return result.  
+000019c0: 2020 2020 2020 6d65 7373 6167 6520 3d20        message = 
+000019d0: 6622 4c69 6c79 506f 6e64 5061 7273 6572  f"LilyPondParser
+000019e0: 2063 616e 206e 6f74 2065 6d75 6c61 7465   can not emulate
+000019f0: 206d 7573 6963 2066 756e 6374 696f 6e3a   music function:
+00001a00: 207b 6675 6e63 7469 6f6e 5f6e 616d 657d   {function_name}
+00001a10: 2e22 0a20 2020 2020 2020 2072 6169 7365  .".        raise
+00001a20: 2045 7863 6570 7469 6f6e 286d 6573 7361   Exception(messa
+00001a30: 6765 290a 0a20 2020 2023 2323 2046 554e  ge)..    ### FUN
+00001a40: 4354 494f 4e20 454d 554c 4154 4f52 5320  CTION EMULATORS 
+00001a50: 2323 230a 0a20 2020 2064 6566 2061 6363  ###..    def acc
+00001a60: 6961 6363 6174 7572 6128 7365 6c66 2c20  iaccatura(self, 
+00001a70: 6d75 7369 6329 3a0a 2020 2020 2020 2020  music):.        
+00001a80: 7222 2222 0a20 2020 2020 2020 2048 616e  r""".        Han
+00001a90: 646c 6573 204c 696c 7950 6f6e 6420 6060  dles LilyPond ``
+00001aa0: 5c61 6363 6961 6363 6174 7572 6160 6020  \acciaccatura`` 
+00001ab0: 636f 6d6d 616e 642e 0a20 2020 2020 2020  command..       
+00001ac0: 2022 2222 0a20 2020 2020 2020 2067 7261   """.        gra
+00001ad0: 6365 203d 205f 7363 6f72 652e 4265 666f  ce = _score.Befo
+00001ae0: 7265 4772 6163 6543 6f6e 7461 696e 6572  reGraceContainer
+00001af0: 286d 7573 6963 5b3a 5d2c 2063 6f6d 6d61  (music[:], comma
+00001b00: 6e64 3d72 225c 6163 6369 6163 6361 7475  nd=r"\acciaccatu
+00001b10: 7261 2229 0a20 2020 2020 2020 2072 6574  ra").        ret
+00001b20: 7572 6e20 6772 6163 650a 0a20 2020 2023  urn grace..    #
+00001b30: 2061 6674 6572 4772 6163 653f 0a0a 2020   afterGrace?..  
+00001b40: 2020 6465 6620 6170 706f 6767 6961 7475    def appoggiatu
+00001b50: 7261 2873 656c 662c 206d 7573 6963 293a  ra(self, music):
+00001b60: 0a20 2020 2020 2020 2072 2222 220a 2020  .        r""".  
+00001b70: 2020 2020 2020 4861 6e64 6c65 7320 4c69        Handles Li
+00001b80: 6c79 506f 6e64 2060 605c 6170 706f 6767  lyPond ``\appogg
+00001b90: 6961 7475 7261 6060 2063 6f6d 6d61 6e64  iatura`` command
+00001ba0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00001bb0: 2020 2020 2020 6772 6163 6520 3d20 5f73        grace = _s
+00001bc0: 636f 7265 2e42 6566 6f72 6547 7261 6365  core.BeforeGrace
+00001bd0: 436f 6e74 6169 6e65 7228 6d75 7369 635b  Container(music[
+00001be0: 3a5d 2c20 636f 6d6d 616e 643d 7222 5c61  :], command=r"\a
+00001bf0: 7070 6f67 6769 6174 7572 6122 290a 2020  ppoggiatura").  
+00001c00: 2020 2020 2020 7265 7475 726e 2067 7261        return gra
+00001c10: 6365 0a0a 2020 2020 6465 6620 6261 7228  ce..    def bar(
+00001c20: 7365 6c66 2c20 7374 7269 6e67 293a 0a20  self, string):. 
+00001c30: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
+00001c40: 2020 2020 4861 6e64 6c65 7320 4c69 6c79      Handles Lily
+00001c50: 506f 6e64 2060 605c 6261 7260 6020 636f  Pond ``\bar`` co
+00001c60: 6d6d 616e 642e 0a20 2020 2020 2020 2022  mmand..        "
+00001c70: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+00001c80: 6e20 5f69 6e64 6963 6174 6f72 732e 4261  n _indicators.Ba
+00001c90: 724c 696e 6528 7374 7269 6e67 290a 0a20  rLine(string).. 
+00001ca0: 2020 2064 6566 2062 7265 6174 6865 2873     def breathe(s
+00001cb0: 656c 6629 3a0a 2020 2020 2020 2020 7222  elf):.        r"
+00001cc0: 2222 0a20 2020 2020 2020 2048 616e 646c  "".        Handl
+00001cd0: 6573 204c 696c 7950 6f6e 6420 6060 5c62  es LilyPond ``\b
+00001ce0: 7265 6174 6865 6060 2063 6f6d 6d61 6e64  reathe`` command
+00001cf0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00001d00: 2020 2020 2020 7265 7475 726e 205f 696e        return _in
+00001d10: 6469 6361 746f 7273 2e4c 696c 7950 6f6e  dicators.LilyPon
+00001d20: 644c 6974 6572 616c 2872 225c 6272 6561  dLiteral(r"\brea
+00001d30: 7468 6522 2c20 2261 6674 6572 2229 0a0a  the", "after")..
+00001d40: 2020 2020 6465 6620 636c 6566 2873 656c      def clef(sel
+00001d50: 662c 2073 7472 696e 6729 3a0a 2020 2020  f, string):.    
+00001d60: 2020 2020 7222 2222 0a20 2020 2020 2020      r""".       
+00001d70: 2048 616e 646c 6573 204c 696c 7950 6f6e   Handles LilyPon
+00001d80: 6420 6060 5c63 6c65 6660 6020 636f 6d6d  d ``\clef`` comm
+00001d90: 616e 642e 0a20 2020 2020 2020 2022 2222  and..        """
+00001da0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00001db0: 5f69 6e64 6963 6174 6f72 732e 436c 6566  _indicators.Clef
+00001dc0: 2873 7472 696e 6729 0a0a 2020 2020 6465  (string)..    de
+00001dd0: 6620 6772 6163 6528 7365 6c66 2c20 6d75  f grace(self, mu
+00001de0: 7369 6329 3a0a 2020 2020 2020 2020 7222  sic):.        r"
+00001df0: 2222 0a20 2020 2020 2020 2048 616e 646c  "".        Handl
+00001e00: 6573 204c 696c 7950 6f6e 6420 6060 5c67  es LilyPond ``\g
+00001e10: 7261 6365 6060 2063 6f6d 6d61 6e64 2e0a  race`` command..
+00001e20: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00001e30: 2020 2020 6173 7365 7274 2069 7369 6e73      assert isins
+00001e40: 7461 6e63 6528 6d75 7369 632c 205f 7363  tance(music, _sc
+00001e50: 6f72 652e 436f 6e74 6169 6e65 7229 0a20  ore.Container). 
+00001e60: 2020 2020 2020 206c 6561 7665 7320 3d20         leaves = 
+00001e70: 6d75 7369 635b 3a5d 0a20 2020 2020 2020  music[:].       
+00001e80: 206d 7573 6963 5b3a 5d20 3d20 5b5d 0a20   music[:] = []. 
+00001e90: 2020 2020 2020 2072 6574 7572 6e20 5f73         return _s
+00001ea0: 636f 7265 2e42 6566 6f72 6547 7261 6365  core.BeforeGrace
+00001eb0: 436f 6e74 6169 6e65 7228 6c65 6176 6573  Container(leaves
+00001ec0: 290a 0a20 2020 2064 6566 206b 6579 2873  )..    def key(s
+00001ed0: 656c 662c 206e 6f74 656e 616d 655f 7069  elf, notename_pi
+00001ee0: 7463 682c 206e 756d 6265 725f 6c69 7374  tch, number_list
+00001ef0: 293a 0a20 2020 2020 2020 2072 2222 220a  ):.        r""".
+00001f00: 2020 2020 2020 2020 4861 6e64 6c65 7320          Handles 
+00001f10: 4c69 6c79 506f 6e64 2060 605c 6b65 7960  LilyPond ``\key`
+00001f20: 6020 636f 6d6d 616e 642e 0a20 2020 2020  ` command..     
+00001f30: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
+00001f40: 6620 6e75 6d62 6572 5f6c 6973 7420 6973  f number_list is
+00001f50: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00001f60: 2020 206e 756d 6265 725f 6c69 7374 203d     number_list =
+00001f70: 2022 6d61 6a6f 7222 0a20 2020 2020 2020   "major".       
+00001f80: 2072 6574 7572 6e20 5f69 6e64 6963 6174   return _indicat
+00001f90: 6f72 732e 4b65 7953 6967 6e61 7475 7265  ors.KeySignature
+00001fa0: 280a 2020 2020 2020 2020 2020 2020 5f70  (.            _p
+00001fb0: 6974 6368 2e4e 616d 6564 5069 7463 6843  itch.NamedPitchC
+00001fc0: 6c61 7373 286e 6f74 656e 616d 655f 7069  lass(notename_pi
+00001fd0: 7463 6829 2c20 5f69 6e64 6963 6174 6f72  tch), _indicator
+00001fe0: 732e 4d6f 6465 286e 756d 6265 725f 6c69  s.Mode(number_li
+00001ff0: 7374 290a 2020 2020 2020 2020 290a 0a20  st).        ).. 
+00002000: 2020 2064 6566 206c 616e 6775 6167 6528     def language(
+00002010: 7365 6c66 2c20 7374 7269 6e67 293a 0a20  self, string):. 
+00002020: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
+00002030: 2020 2020 4861 6e64 6c65 7320 4c69 6c79      Handles Lily
+00002040: 506f 6e64 2060 605c 6c61 6e67 7561 6765  Pond ``\language
+00002050: 6060 2063 6f6d 6d61 6e64 2e0a 2020 2020  `` command..    
+00002060: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00002070: 6966 2073 7472 696e 6720 696e 2073 656c  if string in sel
+00002080: 662e 636c 6965 6e74 2e5f 6c61 6e67 7561  f.client._langua
+00002090: 6765 5f70 6974 6368 5f6e 616d 6573 3a0a  ge_pitch_names:.
+000020a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000020b0: 2e63 6c69 656e 742e 5f70 6974 6368 5f6e  .client._pitch_n
+000020c0: 616d 6573 203d 2073 656c 662e 636c 6965  ames = self.clie
+000020d0: 6e74 2e5f 6c61 6e67 7561 6765 5f70 6974  nt._language_pit
+000020e0: 6368 5f6e 616d 6573 5b73 7472 696e 675d  ch_names[string]
+000020f0: 0a20 2020 2020 2020 2023 2074 7279 2072  .        # try r
+00002100: 6570 6172 7369 6e67 2074 6865 206e 6578  eparsing the nex
+00002110: 7420 6e6f 7465 206e 616d 652c 2069 6620  t note name, if 
+00002120: 6120 6e6f 7465 206e 616d 6520 696d 6d65  a note name imme
+00002130: 6469 6174 656c 7920 666f 6c6c 6f77 730a  diately follows.
+00002140: 2020 2020 2020 2020 6c6f 6f6b 6168 6561          lookahea
+00002150: 6420 3d20 7365 6c66 2e63 6c69 656e 742e  d = self.client.
+00002160: 5f70 6172 7365 722e 6c6f 6f6b 6168 6561  _parser.lookahea
+00002170: 640a 2020 2020 2020 2020 6966 206c 6f6f  d.        if loo
+00002180: 6b61 6865 6164 2e74 7970 6520 3d3d 2022  kahead.type == "
+00002190: 5354 5249 4e47 223a 0a20 2020 2020 2020  STRING":.       
+000021a0: 2020 2020 2069 6620 6c6f 6f6b 6168 6561       if lookahea
+000021b0: 642e 7661 6c75 6520 696e 2073 656c 662e  d.value in self.
+000021c0: 636c 6965 6e74 2e5f 7069 7463 685f 6e61  client._pitch_na
+000021d0: 6d65 733a 0a20 2020 2020 2020 2020 2020  mes:.           
+000021e0: 2020 2020 206c 6f6f 6b61 6865 6164 2e74       lookahead.t
+000021f0: 7970 6520 3d20 224e 4f54 454e 414d 455f  ype = "NOTENAME_
+00002200: 5049 5443 4822 0a20 2020 2020 2020 2020  PITCH".         
+00002210: 2020 2020 2020 206c 6f6f 6b61 6865 6164         lookahead
+00002220: 2e76 616c 7565 203d 205f 7069 7463 682e  .value = _pitch.
+00002230: 4e61 6d65 6450 6974 6368 436c 6173 7328  NamedPitchClass(
+00002240: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002250: 2020 2020 2073 656c 662e 636c 6965 6e74       self.client
+00002260: 2e5f 7069 7463 685f 6e61 6d65 735b 6c6f  ._pitch_names[lo
+00002270: 6f6b 6168 6561 642e 7661 6c75 655d 0a20  okahead.value]. 
+00002280: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00002290: 0a0a 2020 2020 6465 6620 6d61 6b65 436c  ..    def makeCl
+000022a0: 7573 7465 7273 2873 656c 662c 206d 7573  usters(self, mus
+000022b0: 6963 293a 0a20 2020 2020 2020 2072 2222  ic):.        r""
+000022c0: 220a 2020 2020 2020 2020 4861 6e64 6c65  ".        Handle
+000022d0: 7320 4c69 6c79 506f 6e64 2060 605c 6d61  s LilyPond ``\ma
+000022e0: 6b65 436c 7573 7465 7273 6060 2063 6f6d  keClusters`` com
+000022f0: 6d61 6e64 2e0a 2020 2020 2020 2020 2222  mand..        ""
+00002300: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00002310: 205f 7363 6f72 652e 436c 7573 7465 7228   _score.Cluster(
+00002320: 6d75 7369 635b 3a5d 290a 0a20 2020 2064  music[:])..    d
+00002330: 6566 206d 6172 6b28 7365 6c66 2c20 6c61  ef mark(self, la
+00002340: 6265 6c29 3a0a 2020 2020 2020 2020 7222  bel):.        r"
+00002350: 2222 0a20 2020 2020 2020 2048 616e 646c  "".        Handl
+00002360: 6573 204c 696c 7950 6f6e 6420 6060 5c6d  es LilyPond ``\m
+00002370: 6172 6b60 6020 636f 6d6d 616e 642e 0a20  ark`` command.. 
+00002380: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00002390: 2020 2069 6620 6c61 6265 6c20 6973 204e     if label is N
+000023a0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000023b0: 206c 6162 656c 203d 2072 225c 6465 6661   label = r"\defa
+000023c0: 756c 7422 0a20 2020 2020 2020 2072 6574  ult".        ret
+000023d0: 7572 6e20 5f69 6e64 6963 6174 6f72 732e  urn _indicators.
+000023e0: 4c69 6c79 506f 6e64 4c69 7465 7261 6c28  LilyPondLiteral(
+000023f0: 7222 5c6d 6172 6b20 2573 2220 2520 6c61  r"\mark %s" % la
+00002400: 6265 6c29 0a0a 2020 2020 6465 6620 6f6e  bel)..    def on
+00002410: 6556 6f69 6365 2873 656c 6629 3a0a 2020  eVoice(self):.  
+00002420: 2020 2020 2020 7222 2222 0a20 2020 2020        r""".     
+00002430: 2020 2048 616e 646c 6573 204c 696c 7950     Handles LilyP
+00002440: 6f6e 6420 6060 5c6f 6e65 566f 6963 6560  ond ``\oneVoice`
+00002450: 6020 636f 6d6d 616e 642e 0a20 2020 2020  ` command..     
+00002460: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00002470: 6574 7572 6e20 5f69 6e64 6963 6174 6f72  eturn _indicator
+00002480: 732e 4c69 6c79 506f 6e64 4c69 7465 7261  s.LilyPondLitera
+00002490: 6c28 7222 5c6f 6e65 566f 6963 6522 290a  l(r"\oneVoice").
+000024a0: 0a20 2020 2023 2070 6974 6368 6564 5472  .    # pitchedTr
+000024b0: 696c 6c0a 0a20 2020 2064 6566 2072 656c  ill..    def rel
+000024c0: 6174 6976 6528 7365 6c66 2c20 7069 7463  ative(self, pitc
+000024d0: 682c 206d 7573 6963 293a 0a20 2020 2020  h, music):.     
+000024e0: 2020 2072 2222 220a 2020 2020 2020 2020     r""".        
+000024f0: 4861 6e64 6c65 7320 4c69 6c79 506f 6e64  Handles LilyPond
+00002500: 2060 605c 7265 6c61 7469 7665 6060 2063   ``\relative`` c
+00002510: 6f6d 6d61 6e64 2e0a 2020 2020 2020 2020  ommand..        
+00002520: 2222 220a 2020 2020 2020 2020 2320 5765  """.        # We
+00002530: 2073 686f 756c 6420 616c 7761 7973 206b   should always k
+00002540: 6565 7020 7472 6163 6b20 6f66 2074 6865  eep track of the
+00002550: 206c 6173 7420 6368 6f72 6420 656e 7465   last chord ente
+00002560: 7265 642e 0a20 2020 2020 2020 2023 2057  red..        # W
+00002570: 6865 6e20 7468 6572 6520 6172 6520 7265  hen there are re
+00002580: 7065 6174 6564 2063 686f 7264 7320 2876  peated chords (v
+00002590: 6961 2071 292c 0a20 2020 2020 2020 2023  ia q),.        #
+000025a0: 2077 6520 6164 6420 7468 6520 6c61 7374   we add the last
+000025b0: 2063 686f 7264 2061 7320 6120 6b65 7920   chord as a key 
+000025c0: 696e 2061 205f 7265 7065 6174 6564 5f63  in a _repeated_c
+000025d0: 686f 7264 7320 6469 6374 696f 6e61 7279  hords dictionary
+000025e0: 2e0a 2020 2020 2020 2020 2320 5468 656e  ..        # Then
+000025f0: 2c20 7765 2061 7373 6f63 6961 7465 2061  , we associate a
+00002600: 206c 6973 7420 7769 7468 2074 6865 2063   list with the c
+00002610: 686f 7264 2022 6b65 7922 2069 6e20 7468  hord "key" in th
+00002620: 6520 6469 6374 2c0a 2020 2020 2020 2020  e dict,.        
+00002630: 2320 616e 6420 6170 7065 6e64 2061 2072  # and append a r
+00002640: 6566 6572 656e 6365 2074 6f20 7468 6520  eference to the 
+00002650: 7265 7065 6174 6564 2063 686f 7264 2e0a  repeated chord..
+00002660: 0a20 2020 2020 2020 2023 2053 686f 756c  .        # Shoul
+00002670: 6420 7468 6520 7265 6665 7265 6e63 6564  d the referenced
+00002680: 2063 686f 7264 2061 7070 6561 7220 696e   chord appear in
+00002690: 2061 2072 656c 6174 6976 6520 626c 6f63   a relative bloc
+000026a0: 6b2c 0a20 2020 2020 2020 2023 2077 6520  k,.        # we 
+000026b0: 7265 6c61 7469 7669 7a65 2074 6861 7420  relativize that 
+000026c0: 6368 6f72 642c 2061 6e64 2075 7064 6174  chord, and updat
+000026d0: 6520 616e 7920 7265 7065 6174 6564 2063  e any repeated c
+000026e0: 686f 7264 730a 2020 2020 2020 2020 2320  hords.        # 
+000026f0: 7765 2776 6520 6164 6465 6420 746f 2069  we've added to i
+00002700: 7473 206c 6973 7420 6f66 2072 6566 6572  ts list of refer
+00002710: 656e 6369 6e67 2063 686f 7264 732e 0a0a  encing chords...
+00002720: 2020 2020 2020 2020 2320 5468 6520 7061          # The pa
+00002730: 7273 6572 2773 2022 6c61 7374 5f63 686f  rser's "last_cho
+00002740: 7264 2220 7661 7269 6162 6c65 2077 696c  rd" variable wil
+00002750: 6c20 6e6f 7720 7265 666c 6563 7420 7468  l now reflect th
+00002760: 650a 2020 2020 2020 2020 2320 7265 6c61  e.        # rela
+00002770: 7469 7669 7a65 6420 7069 7463 6865 7320  tivized pitches 
+00002780: 6f66 2074 6865 206f 7269 6769 6e61 6c20  of the original 
+00002790: 7265 6665 7265 6e63 6564 2063 686f 7264  referenced chord
+000027a0: 2c0a 2020 2020 2020 2020 2320 616e 6420  ,.        # and 
+000027b0: 736f 2061 6e79 206e 6577 2063 686f 7264  so any new chord
+000027c0: 2072 6570 6574 6974 696f 6e73 2066 6f6c   repetitions fol
+000027d0: 6c6f 7769 6e67 2074 6865 205c 7265 6c61  lowing the \rela
+000027e0: 7469 7665 2062 6c6f 636b 0a20 2020 2020  tive block.     
+000027f0: 2020 2023 2073 686f 756c 6420 7265 7375     # should resu
+00002800: 6c74 2069 6e20 6d61 7463 6869 6e67 2061  lt in matching a
+00002810: 6273 6f6c 7574 6520 7069 7463 6865 7320  bsolute pitches 
+00002820: 746f 2062 6f74 6820 7468 6520 226c 6173  to both the "las
+00002830: 745f 6368 6f72 6422 0a20 2020 2020 2020  t_chord".       
+00002840: 2023 2061 6e64 2061 6e79 206f 7468 6572   # and any other
+00002850: 2072 6570 6574 6974 696f 6e73 2e0a 0a20   repetitions... 
+00002860: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
+00002870: 6973 5f75 6e72 656c 6174 6976 6162 6c65  is_unrelativable
+00002880: 286d 7573 6963 293a 0a20 2020 2020 2020  (music):.       
+00002890: 2020 2020 2072 6574 7572 6e20 6d75 7369       return musi
+000028a0: 630a 0a20 2020 2020 2020 2064 6566 2072  c..        def r
+000028b0: 6563 7572 7365 2863 6f6d 706f 6e65 6e74  ecurse(component
+000028c0: 2c20 7069 7463 6829 3a0a 2020 2020 2020  , pitch):.      
+000028d0: 2020 2020 2020 6966 2073 656c 662e 5f69        if self._i
+000028e0: 735f 756e 7265 6c61 7469 7661 626c 6528  s_unrelativable(
+000028f0: 636f 6d70 6f6e 656e 7429 3a0a 2020 2020  component):.    
+00002900: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00002910: 726e 2070 6974 6368 0a20 2020 2020 2020  rn pitch.       
+00002920: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
+00002930: 616e 6365 2863 6f6d 706f 6e65 6e74 2c20  ance(component, 
+00002940: 5f73 636f 7265 2e43 686f 7264 207c 205f  _score.Chord | _
+00002950: 7363 6f72 652e 4e6f 7465 293a 0a20 2020  score.Note):.   
+00002960: 2020 2020 2020 2020 2020 2020 2070 6974               pit
+00002970: 6368 203d 2073 656c 662e 5f6d 616b 655f  ch = self._make_
+00002980: 7265 6c61 7469 7665 5f6c 6561 6628 636f  relative_leaf(co
+00002990: 6d70 6f6e 656e 742c 2070 6974 6368 290a  mponent, pitch).
+000029a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000029b0: 6966 2063 6f6d 706f 6e65 6e74 2069 6e20  if component in 
+000029c0: 7365 6c66 2e63 6c69 656e 742e 5f72 6570  self.client._rep
+000029d0: 6561 7465 645f 6368 6f72 6473 3a0a 2020  eated_chords:.  
+000029e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000029f0: 2020 666f 7220 7265 7065 6174 6564 5f63    for repeated_c
+00002a00: 686f 7264 2069 6e20 7365 6c66 2e63 6c69  hord in self.cli
+00002a10: 656e 742e 5f72 6570 6561 7465 645f 6368  ent._repeated_ch
+00002a20: 6f72 6473 5b63 6f6d 706f 6e65 6e74 5d3a  ords[component]:
+00002a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002a40: 2020 2020 2020 2020 2072 6570 6561 7465           repeate
+00002a50: 645f 6368 6f72 642e 7772 6974 7465 6e5f  d_chord.written_
+00002a60: 7069 7463 6865 7320 3d20 636f 6d70 6f6e  pitches = compon
+00002a70: 656e 742e 7772 6974 7465 6e5f 7069 7463  ent.written_pitc
+00002a80: 6865 730a 2020 2020 2020 2020 2020 2020  hes.            
+00002a90: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+00002aa0: 636f 6d70 6f6e 656e 742c 205f 7363 6f72  component, _scor
+00002ab0: 652e 436f 6e74 6169 6e65 7229 3a0a 2020  e.Container):.  
+00002ac0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00002ad0: 7220 6368 696c 6420 696e 2063 6f6d 706f  r child in compo
+00002ae0: 6e65 6e74 3a0a 2020 2020 2020 2020 2020  nent:.          
+00002af0: 2020 2020 2020 2020 2020 7069 7463 6820            pitch 
+00002b00: 3d20 7265 6375 7273 6528 6368 696c 642c  = recurse(child,
+00002b10: 2070 6974 6368 290a 2020 2020 2020 2020   pitch).        
+00002b20: 2020 2020 7265 7475 726e 2070 6974 6368      return pitch
+00002b30: 0a0a 2020 2020 2020 2020 7069 7463 6820  ..        pitch 
+00002b40: 3d20 7265 6375 7273 6528 6d75 7369 632c  = recurse(music,
+00002b50: 2070 6974 6368 290a 0a20 2020 2020 2020   pitch)..       
+00002b60: 2073 656c 662e 5f6d 616b 655f 756e 7265   self._make_unre
+00002b70: 6c61 7469 7661 626c 6528 6d75 7369 6329  lativable(music)
+00002b80: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00002b90: 206d 7573 6963 0a0a 2020 2020 6465 6620   music..    def 
+00002ba0: 736b 6970 2873 656c 662c 2064 7572 6174  skip(self, durat
+00002bb0: 696f 6e29 3a0a 2020 2020 2020 2020 7222  ion):.        r"
+00002bc0: 2222 0a20 2020 2020 2020 2048 616e 646c  "".        Handl
+00002bd0: 6573 204c 696c 7950 6f6e 6420 6060 5c73  es LilyPond ``\s
+00002be0: 6b69 7060 6020 636f 6d6d 616e 642e 0a20  kip`` command.. 
+00002bf0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00002c00: 2020 206c 6561 6620 3d20 5f73 636f 7265     leaf = _score
+00002c10: 2e53 6b69 7028 6475 7261 7469 6f6e 2e64  .Skip(duration.d
+00002c20: 7572 6174 696f 6e29 0a20 2020 2020 2020  uration).       
+00002c30: 2069 6620 6475 7261 7469 6f6e 2e6d 756c   if duration.mul
+00002c40: 7469 706c 6965 7220 6973 206e 6f74 204e  tiplier is not N
+00002c50: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00002c60: 205f 6269 6e64 2e61 7474 6163 6828 6475   _bind.attach(du
+00002c70: 7261 7469 6f6e 2e6d 756c 7469 706c 6965  ration.multiplie
+00002c80: 722c 206c 6561 6629 0a20 2020 2020 2020  r, leaf).       
+00002c90: 2072 6574 7572 6e20 6c65 6166 0a0a 2020   return leaf..  
+00002ca0: 2020 6465 6620 736c 6173 6865 645f 6772    def slashed_gr
+00002cb0: 6163 655f 636f 6e74 6169 6e65 7228 7365  ace_container(se
+00002cc0: 6c66 2c20 6d75 7369 6329 3a0a 2020 2020  lf, music):.    
+00002cd0: 2020 2020 7222 2222 0a20 2020 2020 2020      r""".       
+00002ce0: 2048 616e 646c 6573 204c 696c 7950 6f6e   Handles LilyPon
+00002cf0: 6420 6060 5c73 6c61 7368 6564 4772 6163  d ``\slashedGrac
+00002d00: 6560 6020 636f 6d6d 616e 642e 0a20 2020  e`` command..   
+00002d10: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00002d20: 2067 7261 6365 203d 205f 7363 6f72 652e   grace = _score.
+00002d30: 4265 666f 7265 4772 6163 6543 6f6e 7461  BeforeGraceConta
+00002d40: 696e 6572 286d 7573 6963 5b3a 5d29 0a20  iner(music[:]). 
+00002d50: 2020 2020 2020 2072 6574 7572 6e20 6772         return gr
+00002d60: 6163 650a 0a20 2020 2064 6566 2074 696d  ace..    def tim
+00002d70: 6528 7365 6c66 2c20 6e75 6d62 6572 5f6c  e(self, number_l
+00002d80: 6973 742c 2066 7261 6374 696f 6e29 3a0a  ist, fraction):.
+00002d90: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
+00002da0: 2020 2020 2048 616e 646c 6573 204c 696c       Handles Lil
+00002db0: 7950 6f6e 6420 6060 5c74 696d 6560 6020  yPond ``\time`` 
+00002dc0: 636f 6d6d 616e 642e 0a20 2020 2020 2020  command..       
+00002dd0: 2022 2222 0a20 2020 2020 2020 206e 2c20   """.        n, 
+00002de0: 6420 3d20 6672 6163 7469 6f6e 2e6e 756d  d = fraction.num
+00002df0: 6572 6174 6f72 2c20 6672 6163 7469 6f6e  erator, fraction
+00002e00: 2e64 656e 6f6d 696e 6174 6f72 0a20 2020  .denominator.   
+00002e10: 2020 2020 2072 6574 7572 6e20 5f69 6e64       return _ind
+00002e20: 6963 6174 6f72 732e 5469 6d65 5369 676e  icators.TimeSign
+00002e30: 6174 7572 6528 286e 2c20 6429 290a 0a20  ature((n, d)).. 
+00002e40: 2020 2064 6566 2074 696d 6573 2873 656c     def times(sel
+00002e50: 662c 2066 7261 6374 696f 6e2c 206d 7573  f, fraction, mus
+00002e60: 6963 293a 0a20 2020 2020 2020 2072 2222  ic):.        r""
+00002e70: 220a 2020 2020 2020 2020 4861 6e64 6c65  ".        Handle
+00002e80: 7320 4c69 6c79 506f 6e64 2060 605c 7469  s LilyPond ``\ti
+00002e90: 6d65 7360 6020 636f 6d6d 616e 642e 0a20  mes`` command.. 
+00002ea0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00002eb0: 2020 206e 2c20 6420 3d20 6672 6163 7469     n, d = fracti
+00002ec0: 6f6e 2e6e 756d 6572 6174 6f72 2c20 6672  on.numerator, fr
+00002ed0: 6163 7469 6f6e 2e64 656e 6f6d 696e 6174  action.denominat
+00002ee0: 6f72 0a20 2020 2020 2020 2069 6620 6e6f  or.        if no
+00002ef0: 7420 6973 696e 7374 616e 6365 286d 7573  t isinstance(mus
+00002f00: 6963 2c20 5f73 636f 7265 2e43 6f6e 7465  ic, _score.Conte
+00002f10: 7874 2920 616e 6420 6e6f 7420 6973 696e  xt) and not isin
+00002f20: 7374 616e 6365 286d 7573 6963 2c20 5f73  stance(music, _s
+00002f30: 636f 7265 2e4c 6561 6629 3a0a 2020 2020  core.Leaf):.    
+00002f40: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+00002f50: 7369 6e73 7461 6e63 6528 6d75 7369 632c  sinstance(music,
+00002f60: 205f 7363 6f72 652e 436f 6e74 6169 6e65   _score.Containe
+00002f70: 7229 2c20 7265 7072 286d 7573 6963 290a  r), repr(music).
+00002f80: 2020 2020 2020 2020 2020 2020 6c65 6176              leav
+00002f90: 6573 203d 206d 7573 6963 5b3a 5d0a 2020  es = music[:].  
+00002fa0: 2020 2020 2020 2020 2020 6d75 7369 635b            music[
+00002fb0: 3a5d 203d 205b 5d0a 2020 2020 2020 2020  :] = [].        
+00002fc0: 2020 2020 7265 7475 726e 205f 7363 6f72      return _scor
+00002fd0: 652e 5475 706c 6574 2828 6e2c 2064 292c  e.Tuplet((n, d),
+00002fe0: 206c 6561 7665 7329 0a20 2020 2020 2020   leaves).       
+00002ff0: 2072 6574 7572 6e20 5f73 636f 7265 2e54   return _score.T
+00003000: 7570 6c65 7428 286e 2c20 6429 2c20 5b6d  uplet((n, d), [m
+00003010: 7573 6963 5d29 0a0a 2020 2020 6465 6620  usic])..    def 
+00003020: 7472 616e 7370 6f73 6528 7365 6c66 2c20  transpose(self, 
+00003030: 6672 6f6d 5f70 6974 6368 2c20 746f 5f70  from_pitch, to_p
+00003040: 6974 6368 2c20 6d75 7369 6329 3a0a 2020  itch, music):.  
+00003050: 2020 2020 2020 7222 2222 0a20 2020 2020        r""".     
+00003060: 2020 2048 616e 646c 6573 204c 696c 7950     Handles LilyP
+00003070: 6f6e 6420 6060 5c74 7261 6e73 706f 7365  ond ``\transpose
+00003080: 6060 2063 6f6d 6d61 6e64 2e0a 2020 2020  `` command..    
+00003090: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+000030a0: 2064 6566 2072 6563 7572 7365 286d 7573   def recurse(mus
+000030b0: 6963 293a 0a20 2020 2020 2020 2020 2020  ic):.           
+000030c0: 206b 6579 5f73 6967 6e61 7475 7265 7320   key_signatures 
+000030d0: 3d20 6d75 7369 632e 5f67 6574 5f69 6e64  = music._get_ind
+000030e0: 6963 6174 6f72 7328 5f69 6e64 6963 6174  icators(_indicat
+000030f0: 6f72 732e 4b65 7953 6967 6e61 7475 7265  ors.KeySignature
+00003100: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00003110: 206b 6579 5f73 6967 6e61 7475 7265 733a   key_signatures:
+00003120: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003130: 2066 6f72 206b 6579 5f73 6967 6e61 7475   for key_signatu
+00003140: 7265 2069 6e20 6b65 795f 7369 676e 6174  re in key_signat
+00003150: 7572 6573 3a0a 2020 2020 2020 2020 2020  ures:.          
+00003160: 2020 2020 2020 2020 2020 6e65 775f 746f            new_to
+00003170: 6e69 6320 3d20 5f70 6974 6368 2e4e 616d  nic = _pitch.Nam
+00003180: 6564 5069 7463 6828 286b 6579 5f73 6967  edPitch((key_sig
+00003190: 6e61 7475 7265 2e74 6f6e 6963 2e6e 616d  nature.tonic.nam
+000031a0: 652c 2034 2929 0a20 2020 2020 2020 2020  e, 4)).         
+000031b0: 2020 2020 2020 2020 2020 206e 6577 5f74             new_t
+000031c0: 6f6e 6963 203d 204c 696c 7950 6f6e 6450  onic = LilyPondP
+000031d0: 6172 7365 722e 5f74 7261 6e73 706f 7365  arser._transpose
+000031e0: 5f65 6e68 6172 6d6f 6e69 6361 6c6c 7928  _enharmonically(
+000031f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003200: 2020 2020 2020 2020 2066 726f 6d5f 7069           from_pi
+00003210: 7463 682c 2074 6f5f 7069 7463 682c 206e  tch, to_pitch, n
+00003220: 6577 5f74 6f6e 6963 0a20 2020 2020 2020  ew_tonic.       
+00003230: 2020 2020 2020 2020 2020 2020 2029 2e70               ).p
+00003240: 6974 6368 5f63 6c61 7373 0a20 2020 2020  itch_class.     
+00003250: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00003260: 6577 5f6b 6579 5f73 6967 6e61 7475 7265  ew_key_signature
+00003270: 203d 205f 696e 6469 6361 746f 7273 2e4b   = _indicators.K
+00003280: 6579 5369 676e 6174 7572 6528 0a20 2020  eySignature(.   
+00003290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000032a0: 2020 2020 206e 6577 5f74 6f6e 6963 2c20       new_tonic, 
+000032b0: 6b65 795f 7369 676e 6174 7572 652e 6d6f  key_signature.mo
+000032c0: 6465 0a20 2020 2020 2020 2020 2020 2020  de.             
+000032d0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000032e0: 2020 2020 2020 2020 2020 2020 205f 6269               _bi
+000032f0: 6e64 2e64 6574 6163 6828 6b65 795f 7369  nd.detach(key_si
+00003300: 676e 6174 7572 652c 206d 7573 6963 290a  gnature, music).
+00003310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003320: 2020 2020 5f62 696e 642e 6174 7461 6368      _bind.attach
+00003330: 286e 6577 5f6b 6579 5f73 6967 6e61 7475  (new_key_signatu
+00003340: 7265 2c20 6d75 7369 6329 0a20 2020 2020  re, music).     
+00003350: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00003360: 616e 6365 286d 7573 6963 2c20 5f73 636f  ance(music, _sco
+00003370: 7265 2e4e 6f74 6529 3a0a 2020 2020 2020  re.Note):.      
+00003380: 2020 2020 2020 2020 2020 6d75 7369 632e            music.
+00003390: 7772 6974 7465 6e5f 7069 7463 6820 3d20  written_pitch = 
+000033a0: 4c69 6c79 506f 6e64 5061 7273 6572 2e5f  LilyPondParser._
+000033b0: 7472 616e 7370 6f73 655f 656e 6861 726d  transpose_enharm
+000033c0: 6f6e 6963 616c 6c79 280a 2020 2020 2020  onically(.      
+000033d0: 2020 2020 2020 2020 2020 2020 2020 6672                fr
+000033e0: 6f6d 5f70 6974 6368 2c20 746f 5f70 6974  om_pitch, to_pit
+000033f0: 6368 2c20 6d75 7369 632e 7772 6974 7465  ch, music.writte
+00003400: 6e5f 7069 7463 680a 2020 2020 2020 2020  n_pitch.        
+00003410: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00003420: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+00003430: 7461 6e63 6528 6d75 7369 632c 205f 7363  tance(music, _sc
+00003440: 6f72 652e 4368 6f72 6429 3a0a 2020 2020  ore.Chord):.    
+00003450: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00003460: 6e6f 7465 5f68 6561 6420 696e 206d 7573  note_head in mus
+00003470: 6963 2e6e 6f74 655f 6865 6164 733a 0a20  ic.note_heads:. 
+00003480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003490: 2020 206e 6f74 655f 6865 6164 2e77 7269     note_head.wri
+000034a0: 7474 656e 5f70 6974 6368 203d 204c 696c  tten_pitch = Lil
+000034b0: 7950 6f6e 6450 6172 7365 722e 5f74 7261  yPondParser._tra
+000034c0: 6e73 706f 7365 5f65 6e68 6172 6d6f 6e69  nspose_enharmoni
+000034d0: 6361 6c6c 7928 0a20 2020 2020 2020 2020  cally(.         
+000034e0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000034f0: 726f 6d5f 7069 7463 682c 2074 6f5f 7069  rom_pitch, to_pi
+00003500: 7463 682c 206e 6f74 655f 6865 6164 2e77  tch, note_head.w
+00003510: 7269 7474 656e 5f70 6974 6368 0a20 2020  ritten_pitch.   
+00003520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003530: 2029 0a20 2020 2020 2020 2020 2020 2065   ).            e
+00003540: 6c69 6620 6973 696e 7374 616e 6365 286d  lif isinstance(m
+00003550: 7573 6963 2c20 5f73 636f 7265 2e43 6f6e  usic, _score.Con
+00003560: 7461 696e 6572 293a 0a20 2020 2020 2020  tainer):.       
+00003570: 2020 2020 2020 2020 2066 6f72 2063 6f6d           for com
+00003580: 706f 6e65 6e74 2069 6e20 6d75 7369 633a  ponent in music:
+00003590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000035a0: 2020 2020 2072 6563 7572 7365 2863 6f6d       recurse(com
+000035b0: 706f 6e65 6e74 290a 0a20 2020 2020 2020  ponent)..       
+000035c0: 2073 656c 662e 5f6d 616b 655f 756e 7265   self._make_unre
+000035d0: 6c61 7469 7661 626c 6528 6d75 7369 6329  lativable(music)
+000035e0: 0a20 2020 2020 2020 2072 6563 7572 7365  .        recurse
+000035f0: 286d 7573 6963 290a 2020 2020 2020 2020  (music).        
+00003600: 7265 7475 726e 206d 7573 6963 0a0a 2020  return music..  
+00003610: 2020 2320 7472 616e 7370 6f73 6974 696f    # transpositio
+00003620: 6e0a 0a20 2020 2064 6566 2074 7570 6c65  n..    def tuple
+00003630: 7428 7365 6c66 2c20 6672 6163 7469 6f6e  t(self, fraction
+00003640: 2c20 5f6f 7074 696f 6e61 6c2c 206d 7573  , _optional, mus
+00003650: 6963 293a 0a20 2020 2020 2020 2072 2222  ic):.        r""
+00003660: 220a 2020 2020 2020 2020 4861 6e64 6c65  ".        Handle
+00003670: 7320 4c69 6c79 506f 6e64 2060 605c 7475  s LilyPond ``\tu
+00003680: 706c 6574 6060 2063 6f6d 6d61 6e64 2e0a  plet`` command..
+00003690: 0a20 2020 2020 2020 2054 6865 2060 605f  .        The ``_
+000036a0: 6f70 7469 6f6e 616c 6060 2070 6172 616d  optional`` param
+000036b0: 6574 6572 2061 7070 6561 7273 2074 6f20  eter appears to 
+000036c0: 6765 7420 7061 7373 6564 2069 6e20 6275  get passed in bu
+000036d0: 7420 6973 2075 6e75 7365 642e 0a20 2020  t is unused..   
+000036e0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000036f0: 206e 2c20 6420 3d20 6672 6163 7469 6f6e   n, d = fraction
+00003700: 2e6e 756d 6572 6174 6f72 2c20 6672 6163  .numerator, frac
+00003710: 7469 6f6e 2e64 656e 6f6d 696e 6174 6f72  tion.denominator
+00003720: 0a20 2020 2020 2020 2073 7472 696e 6720  .        string 
+00003730: 3d20 6622 7b6e 7d3a 7b64 7d22 0a20 2020  = f"{n}:{d}".   
+00003740: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+00003750: 7374 616e 6365 286d 7573 6963 2c20 5f73  stance(music, _s
+00003760: 636f 7265 2e43 6f6e 7465 7874 2920 616e  core.Context) an
+00003770: 6420 6e6f 7420 6973 696e 7374 616e 6365  d not isinstance
+00003780: 286d 7573 6963 2c20 5f73 636f 7265 2e4c  (music, _score.L
+00003790: 6561 6629 3a0a 2020 2020 2020 2020 2020  eaf):.          
+000037a0: 2020 6173 7365 7274 2069 7369 6e73 7461    assert isinsta
+000037b0: 6e63 6528 6d75 7369 632c 205f 7363 6f72  nce(music, _scor
+000037c0: 652e 436f 6e74 6169 6e65 7229 2c20 7265  e.Container), re
+000037d0: 7072 286d 7573 6963 290a 2020 2020 2020  pr(music).      
+000037e0: 2020 2020 2020 6c65 6176 6573 203d 206d        leaves = m
+000037f0: 7573 6963 5b3a 5d0a 2020 2020 2020 2020  usic[:].        
+00003800: 2020 2020 6d75 7369 635b 3a5d 203d 205b      music[:] = [
+00003810: 5d0a 2020 2020 2020 2020 2020 2020 7265  ].            re
+00003820: 7475 726e 205f 7363 6f72 652e 5475 706c  turn _score.Tupl
+00003830: 6574 2873 7472 696e 672c 206c 6561 7665  et(string, leave
+00003840: 7329 0a20 2020 2020 2020 2072 6574 7572  s).        retur
+00003850: 6e20 5f73 636f 7265 2e54 7570 6c65 7428  n _score.Tuplet(
+00003860: 7374 7269 6e67 2c20 5b6d 7573 6963 5d29  string, [music])
+00003870: 0a0a 2020 2020 2320 7477 6561 6b0a 0a20  ..    # tweak.. 
+00003880: 2020 2064 6566 2076 6f69 6365 466f 7572     def voiceFour
+00003890: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+000038a0: 7222 2222 0a20 2020 2020 2020 2048 616e  r""".        Han
+000038b0: 646c 6573 204c 696c 7950 6f6e 6420 6060  dles LilyPond ``
+000038c0: 5c76 6f69 6365 466f 7572 6060 2063 6f6d  \voiceFour`` com
+000038d0: 6d61 6e64 2e0a 2020 2020 2020 2020 2222  mand..        ""
+000038e0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+000038f0: 205f 696e 6469 6361 746f 7273 2e4c 696c   _indicators.Lil
+00003900: 7950 6f6e 644c 6974 6572 616c 2872 225c  yPondLiteral(r"\
+00003910: 766f 6963 6546 6f75 7222 290a 0a20 2020  voiceFour")..   
+00003920: 2064 6566 2076 6f69 6365 4f6e 6528 7365   def voiceOne(se
+00003930: 6c66 293a 0a20 2020 2020 2020 2072 2222  lf):.        r""
+00003940: 220a 2020 2020 2020 2020 4861 6e64 6c65  ".        Handle
+00003950: 7320 4c69 6c79 506f 6e64 2060 605c 766f  s LilyPond ``\vo
+00003960: 6963 654f 6e63 6560 6020 636f 6d6d 616e  iceOnce`` comman
+00003970: 642e 0a20 2020 2020 2020 2022 2222 0a20  d..        """. 
+00003980: 2020 2020 2020 2072 6574 7572 6e20 5f69         return _i
+00003990: 6e64 6963 6174 6f72 732e 4c69 6c79 506f  ndicators.LilyPo
+000039a0: 6e64 4c69 7465 7261 6c28 7222 5c76 6f69  ndLiteral(r"\voi
+000039b0: 6365 4f6e 6522 290a 0a20 2020 2064 6566  ceOne")..    def
+000039c0: 2076 6f69 6365 5468 7265 6528 7365 6c66   voiceThree(self
+000039d0: 293a 0a20 2020 2020 2020 2072 2222 220a  ):.        r""".
+000039e0: 2020 2020 2020 2020 4861 6e64 6c65 7320          Handles 
+000039f0: 4c69 6c79 506f 6e64 2060 605c 766f 6963  LilyPond ``\voic
+00003a00: 6554 6872 6565 6060 2063 6f6d 6d61 6e64  eThree`` command
+00003a10: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00003a20: 2020 2020 2020 7265 7475 726e 205f 696e        return _in
+00003a30: 6469 6361 746f 7273 2e4c 696c 7950 6f6e  dicators.LilyPon
+00003a40: 644c 6974 6572 616c 2872 225c 766f 6963  dLiteral(r"\voic
+00003a50: 6554 6872 6565 2229 0a0a 2020 2020 6465  eThree")..    de
+00003a60: 6620 766f 6963 6554 776f 2873 656c 6629  f voiceTwo(self)
+00003a70: 3a0a 2020 2020 2020 2020 7222 2222 0a20  :.        r""". 
+00003a80: 2020 2020 2020 2048 616e 646c 6573 204c         Handles L
+00003a90: 696c 7950 6f6e 6420 6060 5c76 6f69 6365  ilyPond ``\voice
+00003aa0: 5477 6f60 6020 636f 6d6d 616e 642e 0a20  Two`` command.. 
+00003ab0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00003ac0: 2020 2072 6574 7572 6e20 5f69 6e64 6963     return _indic
+00003ad0: 6174 6f72 732e 4c69 6c79 506f 6e64 4c69  ators.LilyPondLi
+00003ae0: 7465 7261 6c28 7222 5c76 6f69 6365 5477  teral(r"\voiceTw
+00003af0: 6f22 290a 0a20 2020 2023 2323 2048 454c  o")..    ### HEL
+00003b00: 5045 5220 4655 4e43 5449 4f4e 5320 2323  PER FUNCTIONS ##
+00003b10: 230a 0a20 2020 2064 6566 205f 6973 5f75  #..    def _is_u
+00003b20: 6e72 656c 6174 6976 6162 6c65 2873 656c  nrelativable(sel
+00003b30: 662c 206d 7573 6963 293a 0a20 2020 2020  f, music):.     
+00003b40: 2020 2061 6e6e 6f74 6174 696f 6e73 203d     annotations =
+00003b50: 206d 7573 6963 2e5f 6765 745f 696e 6469   music._get_indi
+00003b60: 6361 746f 7273 2864 6963 7429 0a20 2020  cators(dict).   
+00003b70: 2020 2020 206b 6579 7320 3d20 5b6c 6973       keys = [lis
+00003b80: 7428 5f2e 6b65 7973 2829 295b 305d 2066  t(_.keys())[0] f
+00003b90: 6f72 205f 2069 6e20 616e 6e6f 7461 7469  or _ in annotati
+00003ba0: 6f6e 735d 0a20 2020 2020 2020 2069 6620  ons].        if 
+00003bb0: 2255 6e72 656c 6174 6976 6162 6c65 4d75  "UnrelativableMu
+00003bc0: 7369 6322 2069 6e20 6b65 7973 3a0a 2020  sic" in keys:.  
+00003bd0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00003be0: 2054 7275 650a 2020 2020 2020 2020 7265   True.        re
+00003bf0: 7475 726e 2046 616c 7365 0a0a 2020 2020  turn False..    
+00003c00: 6465 6620 5f6d 616b 655f 7265 6c61 7469  def _make_relati
+00003c10: 7665 5f6c 6561 6628 7365 6c66 2c20 6c65  ve_leaf(self, le
+00003c20: 6166 2c20 7069 7463 6829 3a0a 2020 2020  af, pitch):.    
+00003c30: 2020 2020 6966 2073 656c 662e 5f69 735f      if self._is_
+00003c40: 756e 7265 6c61 7469 7661 626c 6528 6c65  unrelativable(le
+00003c50: 6166 293a 0a20 2020 2020 2020 2020 2020  af):.           
+00003c60: 2072 6574 7572 6e20 7069 7463 680a 2020   return pitch.  
+00003c70: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+00003c80: 7461 6e63 6528 6c65 6166 2c20 5f73 636f  tance(leaf, _sco
+00003c90: 7265 2e4e 6f74 6529 3a0a 2020 2020 2020  re.Note):.      
+00003ca0: 2020 2020 2020 7069 7463 6820 3d20 7365        pitch = se
+00003cb0: 6c66 2e5f 746f 5f72 656c 6174 6976 655f  lf._to_relative_
+00003cc0: 6f63 7461 7665 286c 6561 662e 7772 6974  octave(leaf.writ
+00003cd0: 7465 6e5f 7069 7463 682c 2070 6974 6368  ten_pitch, pitch
+00003ce0: 290a 2020 2020 2020 2020 2020 2020 6c65  ).            le
+00003cf0: 6166 2e77 7269 7474 656e 5f70 6974 6368  af.written_pitch
+00003d00: 203d 2070 6974 6368 0a20 2020 2020 2020   = pitch.       
+00003d10: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00003d20: 286c 6561 662c 205f 7363 6f72 652e 4368  (leaf, _score.Ch
+00003d30: 6f72 6429 3a0a 2020 2020 2020 2020 2020  ord):.          
+00003d40: 2020 2320 544f 444f 3a20 5468 6973 2069    # TODO: This i
+00003d50: 7320 6e6f 7420 6964 6561 6c20 772f 722f  s not ideal w/r/
+00003d60: 7420 706f 7374 2065 7665 6e74 7320 6173  t post events as
+00003d70: 204c 696c 7950 6f6e 6420 646f 6573 0a20   LilyPond does. 
+00003d80: 2020 2020 2020 2020 2020 2023 206e 6f74             # not
+00003d90: 2073 6f72 7420 6368 6f72 6420 636f 6e74   sort chord cont
+00003da0: 656e 7473 0a20 2020 2020 2020 2020 2020  ents.           
+00003db0: 2063 686f 7264 5f70 6974 6368 6573 203d   chord_pitches =
+00003dc0: 2073 656c 662e 636c 6965 6e74 2e5f 6368   self.client._ch
+00003dd0: 6f72 645f 7069 7463 685f 6f72 6465 7273  ord_pitch_orders
+00003de0: 5b6c 6561 665d 0a20 2020 2020 2020 2020  [leaf].         
+00003df0: 2020 2066 6f72 2069 2c20 6368 6f72 645f     for i, chord_
+00003e00: 7069 7463 6820 696e 2065 6e75 6d65 7261  pitch in enumera
+00003e10: 7465 2863 686f 7264 5f70 6974 6368 6573  te(chord_pitches
+00003e20: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00003e30: 2020 2070 6974 6368 203d 2073 656c 662e     pitch = self.
+00003e40: 5f74 6f5f 7265 6c61 7469 7665 5f6f 6374  _to_relative_oct
+00003e50: 6176 6528 6368 6f72 645f 7069 7463 682c  ave(chord_pitch,
+00003e60: 2070 6974 6368 290a 2020 2020 2020 2020   pitch).        
+00003e70: 2020 2020 2020 2020 6368 6f72 645f 7069          chord_pi
+00003e80: 7463 6865 735b 695d 203d 2070 6974 6368  tches[i] = pitch
+00003e90: 0a20 2020 2020 2020 2020 2020 206c 6561  .            lea
+00003ea0: 662e 7772 6974 7465 6e5f 7069 7463 6865  f.written_pitche
+00003eb0: 7320 3d20 6368 6f72 645f 7069 7463 6865  s = chord_pitche
+00003ec0: 730a 2020 2020 2020 2020 2020 2020 7069  s.            pi
+00003ed0: 7463 6820 3d20 6d69 6e28 6c65 6166 2e77  tch = min(leaf.w
+00003ee0: 7269 7474 656e 5f70 6974 6368 6573 290a  ritten_pitches).
+00003ef0: 2020 2020 2020 2020 7265 7475 726e 2070          return p
+00003f00: 6974 6368 0a0a 2020 2020 6465 6620 5f6d  itch..    def _m
+00003f10: 616b 655f 756e 7265 6c61 7469 7661 626c  ake_unrelativabl
+00003f20: 6528 7365 6c66 2c20 6d75 7369 6329 3a0a  e(self, music):.
+00003f30: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
+00003f40: 656c 662e 5f69 735f 756e 7265 6c61 7469  elf._is_unrelati
+00003f50: 7661 626c 6528 6d75 7369 6329 3a0a 2020  vable(music):.  
+00003f60: 2020 2020 2020 2020 2020 616e 6e6f 7461            annota
+00003f70: 7469 6f6e 203d 207b 2255 6e72 656c 6174  tion = {"Unrelat
+00003f80: 6976 6162 6c65 4d75 7369 6322 3a20 5472  ivableMusic": Tr
+00003f90: 7565 7d0a 2020 2020 2020 2020 2020 2020  ue}.            
+00003fa0: 5f62 696e 642e 6174 7461 6368 2861 6e6e  _bind.attach(ann
+00003fb0: 6f74 6174 696f 6e2c 206d 7573 6963 290a  otation, music).
+00003fc0: 0a20 2020 2064 6566 205f 746f 5f72 656c  .    def _to_rel
+00003fd0: 6174 6976 655f 6f63 7461 7665 2873 656c  ative_octave(sel
+00003fe0: 662c 2070 6974 6368 2c20 7265 6665 7265  f, pitch, refere
+00003ff0: 6e63 6529 3a0a 2020 2020 2020 2020 6966  nce):.        if
+00004000: 2070 6974 6368 2e70 6974 6368 5f63 6c61   pitch.pitch_cla
+00004010: 7373 2e6e 756d 6265 7220 3e20 7265 6665  ss.number > refe
+00004020: 7265 6e63 652e 7069 7463 685f 636c 6173  rence.pitch_clas
+00004030: 732e 6e75 6d62 6572 3a0a 2020 2020 2020  s.number:.      
+00004040: 2020 2020 2020 7061 6972 203d 2028 7069        pair = (pi
+00004050: 7463 682e 7069 7463 685f 636c 6173 732e  tch.pitch_class.
+00004060: 6e61 6d65 2c20 7265 6665 7265 6e63 652e  name, reference.
+00004070: 6f63 7461 7665 2e6e 756d 6265 7229 0a20  octave.number). 
+00004080: 2020 2020 2020 2020 2020 2075 705f 7069             up_pi
+00004090: 7463 6820 3d20 5f70 6974 6368 2e4e 616d  tch = _pitch.Nam
+000040a0: 6564 5069 7463 6828 7061 6972 290a 2020  edPitch(pair).  
+000040b0: 2020 2020 2020 2020 2020 7061 6972 203d            pair =
+000040c0: 2028 7069 7463 682e 7069 7463 685f 636c   (pitch.pitch_cl
+000040d0: 6173 732e 6e61 6d65 2c20 7265 6665 7265  ass.name, refere
+000040e0: 6e63 652e 6f63 7461 7665 2e6e 756d 6265  nce.octave.numbe
+000040f0: 7220 2d20 3129 0a20 2020 2020 2020 2020  r - 1).         
+00004100: 2020 2064 6f77 6e5f 7069 7463 6820 3d20     down_pitch = 
+00004110: 5f70 6974 6368 2e4e 616d 6564 5069 7463  _pitch.NamedPitc
+00004120: 6828 7061 6972 290a 2020 2020 2020 2020  h(pair).        
+00004130: 2020 2020 7570 5f6f 6374 6176 6520 3d20      up_octave = 
+00004140: 7570 5f70 6974 6368 2e6f 6374 6176 652e  up_pitch.octave.
+00004150: 6e75 6d62 6572 0a20 2020 2020 2020 2020  number.         
+00004160: 2020 2064 6f77 6e5f 6f63 7461 7665 203d     down_octave =
+00004170: 2064 6f77 6e5f 7069 7463 682e 6f63 7461   down_pitch.octa
+00004180: 7665 2e6e 756d 6265 720a 2020 2020 2020  ve.number.      
+00004190: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000041a0: 2020 2020 7061 6972 203d 2028 7069 7463      pair = (pitc
+000041b0: 682e 7069 7463 685f 636c 6173 732e 6e61  h.pitch_class.na
+000041c0: 6d65 2c20 7265 6665 7265 6e63 652e 6f63  me, reference.oc
+000041d0: 7461 7665 2e6e 756d 6265 7220 2b20 3129  tave.number + 1)
+000041e0: 0a20 2020 2020 2020 2020 2020 2075 705f  .            up_
+000041f0: 7069 7463 6820 3d20 5f70 6974 6368 2e4e  pitch = _pitch.N
+00004200: 616d 6564 5069 7463 6828 7061 6972 290a  amedPitch(pair).
+00004210: 2020 2020 2020 2020 2020 2020 7061 6972              pair
+00004220: 203d 2028 7069 7463 682e 7069 7463 685f   = (pitch.pitch_
+00004230: 636c 6173 732e 6e61 6d65 2c20 7265 6665  class.name, refe
+00004240: 7265 6e63 652e 6f63 7461 7665 2e6e 756d  rence.octave.num
+00004250: 6265 7229 0a20 2020 2020 2020 2020 2020  ber).           
+00004260: 2064 6f77 6e5f 7069 7463 6820 3d20 5f70   down_pitch = _p
+00004270: 6974 6368 2e4e 616d 6564 5069 7463 6828  itch.NamedPitch(
+00004280: 7061 6972 290a 2020 2020 2020 2020 2020  pair).          
+00004290: 2020 7570 5f6f 6374 6176 6520 3d20 7570    up_octave = up
+000042a0: 5f70 6974 6368 2e6f 6374 6176 652e 6e75  _pitch.octave.nu
+000042b0: 6d62 6572 0a20 2020 2020 2020 2020 2020  mber.           
+000042c0: 2064 6f77 6e5f 6f63 7461 7665 203d 2064   down_octave = d
+000042d0: 6f77 6e5f 7069 7463 682e 6f63 7461 7665  own_pitch.octave
+000042e0: 2e6e 756d 6265 720a 2020 2020 2020 2020  .number.        
+000042f0: 6966 2061 6273 280a 2020 2020 2020 2020  if abs(.        
+00004300: 2020 2020 666c 6f61 7428 7570 5f70 6974      float(up_pit
+00004310: 6368 2e5f 6765 745f 6469 6174 6f6e 6963  ch._get_diatonic
+00004320: 5f70 6974 6368 5f6e 756d 6265 7228 2929  _pitch_number())
+00004330: 0a20 2020 2020 2020 2020 2020 202d 2066  .            - f
+00004340: 6c6f 6174 2872 6566 6572 656e 6365 2e5f  loat(reference._
+00004350: 6765 745f 6469 6174 6f6e 6963 5f70 6974  get_diatonic_pit
+00004360: 6368 5f6e 756d 6265 7228 2929 0a20 2020  ch_number()).   
+00004370: 2020 2020 2029 203c 2061 6273 280a 2020       ) < abs(.  
+00004380: 2020 2020 2020 2020 2020 666c 6f61 7428            float(
+00004390: 646f 776e 5f70 6974 6368 2e5f 6765 745f  down_pitch._get_
+000043a0: 6469 6174 6f6e 6963 5f70 6974 6368 5f6e  diatonic_pitch_n
+000043b0: 756d 6265 7228 2929 0a20 2020 2020 2020  umber()).       
+000043c0: 2020 2020 202d 2066 6c6f 6174 2872 6566       - float(ref
+000043d0: 6572 656e 6365 2e5f 6765 745f 6469 6174  erence._get_diat
+000043e0: 6f6e 6963 5f70 6974 6368 5f6e 756d 6265  onic_pitch_numbe
+000043f0: 7228 2929 0a20 2020 2020 2020 2029 3a0a  r()).        ):.
+00004400: 2020 2020 2020 2020 2020 2020 7061 6972              pair
+00004410: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+00004420: 2020 2020 2075 705f 7069 7463 682e 7069       up_pitch.pi
+00004430: 7463 685f 636c 6173 732e 6e61 6d65 2c0a  tch_class.name,.
+00004440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004450: 7570 5f6f 6374 6176 6520 2b20 7069 7463  up_octave + pitc
+00004460: 682e 6f63 7461 7665 2e6e 756d 6265 7220  h.octave.number 
+00004470: 2d20 332c 0a20 2020 2020 2020 2020 2020  - 3,.           
+00004480: 2029 0a20 2020 2020 2020 2020 2020 2070   ).            p
+00004490: 6974 6368 203d 205f 7069 7463 682e 4e61  itch = _pitch.Na
+000044a0: 6d65 6450 6974 6368 2870 6169 7229 0a20  medPitch(pair). 
+000044b0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000044c0: 2020 2020 2020 2020 2070 6169 7220 3d20           pair = 
+000044d0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000044e0: 2020 646f 776e 5f70 6974 6368 2e70 6974    down_pitch.pit
+000044f0: 6368 5f63 6c61 7373 2e6e 616d 652c 0a20  ch_class.name,. 
+00004500: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00004510: 6f77 6e5f 6f63 7461 7665 202b 2070 6974  own_octave + pit
+00004520: 6368 2e6f 6374 6176 652e 6e75 6d62 6572  ch.octave.number
+00004530: 202d 2033 2c0a 2020 2020 2020 2020 2020   - 3,.          
+00004540: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00004550: 7069 7463 6820 3d20 5f70 6974 6368 2e4e  pitch = _pitch.N
+00004560: 616d 6564 5069 7463 6828 7061 6972 290a  amedPitch(pair).
+00004570: 2020 2020 2020 2020 7265 7475 726e 2070          return p
+00004580: 6974 6368 0a0a 0a63 6c61 7373 204c 696c  itch...class Lil
+00004590: 7950 6f6e 6445 7665 6e74 3a0a 2020 2020  yPondEvent:.    
+000045a0: 2222 220a 2020 2020 4d6f 6465 6c20 6f66  """.    Model of
+000045b0: 2061 6e20 6172 6269 7472 6172 7920 6576   an arbitrary ev
+000045c0: 656e 7420 696e 204c 696c 7950 6f6e 642e  ent in LilyPond.
+000045d0: 0a0a 2020 2020 4e6f 7420 636f 6d70 6f73  ..    Not compos
+000045e0: 6572 2d73 6166 652e 0a0a 2020 2020 5573  er-safe...    Us
+000045f0: 6564 2069 6e74 6572 6e61 6c6c 7920 6279  ed internally by
+00004600: 204c 696c 7950 6f6e 6450 6172 7365 722e   LilyPondParser.
+00004610: 0a20 2020 2022 2222 0a0a 2020 2020 2323  .    """..    ##
+00004620: 2320 494e 4954 4941 4c49 5a45 5220 2323  # INITIALIZER ##
+00004630: 230a 0a20 2020 2064 6566 205f 5f69 6e69  #..    def __ini
+00004640: 745f 5f28 7365 6c66 2c20 6e61 6d65 3d4e  t__(self, name=N
+00004650: 6f6e 652c 202a 2a6b 6579 776f 7264 7329  one, **keywords)
+00004660: 3a0a 2020 2020 2020 2020 7365 6c66 2e6e  :.        self.n
+00004670: 616d 6520 3d20 6e61 6d65 0a20 2020 2020  ame = name.     
+00004680: 2020 2066 6f72 206b 2c20 7620 696e 206b     for k, v in k
+00004690: 6579 776f 7264 732e 6974 656d 7328 293a  eywords.items():
+000046a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000046b0: 6b20 213d 2022 6e61 6d65 223a 0a20 2020  k != "name":.   
+000046c0: 2020 2020 2020 2020 2020 2020 2073 6574               set
+000046d0: 6174 7472 2873 656c 662c 206b 2c20 7629  attr(self, k, v)
+000046e0: 0a0a 2020 2020 2323 2320 5350 4543 4941  ..    ### SPECIA
+000046f0: 4c20 4d45 5448 4f44 5320 2323 230a 0a20  L METHODS ###.. 
+00004700: 2020 2064 6566 205f 5f72 6570 725f 5f28     def __repr__(
+00004710: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+00004720: 2222 0a20 2020 2020 2020 2047 6574 7320  "".        Gets 
+00004730: 696e 7465 7270 7265 7465 7220 7265 7072  interpreter repr
+00004740: 6573 656e 7461 7469 6f6e 206f 6620 4c69  esentation of Li
+00004750: 6c79 506f 6e64 2065 7665 6e74 2e0a 0a20  lyPond event... 
+00004760: 2020 2020 2020 2052 6574 7572 6e73 2073         Returns s
+00004770: 7472 696e 672e 0a20 2020 2020 2020 2022  tring..        "
+00004780: 2222 0a20 2020 2020 2020 2072 6573 756c  "".        resul
+00004790: 7420 3d20 7265 7072 2873 656c 662e 6e61  t = repr(self.na
+000047a0: 6d65 290a 2020 2020 2020 2020 666f 7220  me).        for 
+000047b0: 6b65 7920 696e 2073 656c 662e 5f5f 6469  key in self.__di
+000047c0: 6374 5f5f 3a0a 2020 2020 2020 2020 2020  ct__:.          
+000047d0: 2020 6966 206b 6579 203d 3d20 226e 616d    if key == "nam
+000047e0: 6522 3a0a 2020 2020 2020 2020 2020 2020  e":.            
+000047f0: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
+00004800: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00004810: 2b3d 2066 222c 207b 6b65 797d 203d 207b  += f", {key} = {
+00004820: 6765 7461 7474 7228 7365 6c66 2c20 6b65  getattr(self, ke
+00004830: 7929 2172 7d22 0a20 2020 2020 2020 206e  y)!r}".        n
+00004840: 616d 6520 3d20 7479 7065 2873 656c 6629  ame = type(self)
+00004850: 2e5f 5f6e 616d 655f 5f0a 2020 2020 2020  .__name__.      
+00004860: 2020 7265 7475 726e 2066 227b 6e61 6d65    return f"{name
+00004870: 7d28 7b72 6573 756c 747d 2922 0a0a 0a63  }({result})"...c
+00004880: 6c61 7373 204c 696c 7950 6f6e 6446 7261  lass LilyPondFra
+00004890: 6374 696f 6e3a 0a20 2020 2022 2222 0a20  ction:.    """. 
+000048a0: 2020 204d 6f64 656c 206f 6620 6120 6672     Model of a fr
+000048b0: 6163 7469 6f6e 2069 6e20 4c69 6c79 506f  action in LilyPo
+000048c0: 6e64 2e0a 0a20 2020 204e 6f74 2063 6f6d  nd...    Not com
+000048d0: 706f 7365 722d 7361 6665 2e0a 0a20 2020  poser-safe...   
+000048e0: 2055 7365 6420 696e 7465 726e 616c 6c79   Used internally
+000048f0: 2062 7920 4c69 6c79 506f 6e64 5061 7273   by LilyPondPars
+00004900: 6572 2e0a 2020 2020 2222 220a 0a20 2020  er..    """..   
+00004910: 2023 2323 2043 4c41 5353 2056 4152 4941   ### CLASS VARIA
+00004920: 424c 4553 2023 2323 0a0a 2020 2020 5f5f  BLES ###..    __
+00004930: 736c 6f74 735f 5f20 3d20 2822 6e75 6d65  slots__ = ("nume
+00004940: 7261 746f 7222 2c20 2264 656e 6f6d 696e  rator", "denomin
+00004950: 6174 6f72 2229 0a0a 2020 2020 2323 2320  ator")..    ### 
+00004960: 494e 4954 4941 4c49 5a45 5220 2323 230a  INITIALIZER ###.
+00004970: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00004980: 5f28 7365 6c66 2c20 6e75 6d65 7261 746f  _(self, numerato
+00004990: 723d 302c 2064 656e 6f6d 696e 6174 6f72  r=0, denominator
+000049a0: 3d31 293a 0a20 2020 2020 2020 2073 656c  =1):.        sel
+000049b0: 662e 6e75 6d65 7261 746f 7220 3d20 6e75  f.numerator = nu
+000049c0: 6d65 7261 746f 720a 2020 2020 2020 2020  merator.        
+000049d0: 7365 6c66 2e64 656e 6f6d 696e 6174 6f72  self.denominator
+000049e0: 203d 2064 656e 6f6d 696e 6174 6f72 0a0a   = denominator..
+000049f0: 0a63 6c61 7373 204c 696c 7950 6f6e 6447  .class LilyPondG
+00004a00: 7261 6d6d 6172 4765 6e65 7261 746f 723a  rammarGenerator:
+00004a10: 0a20 2020 2022 2222 0a20 2020 2047 656e  .    """.    Gen
+00004a20: 6572 6174 6573 2061 2073 796e 7461 7820  erates a syntax 
+00004a30: 736b 656c 6574 6f6e 2066 726f 6d20 4c69  skeleton from Li
+00004a40: 6c79 506f 6e64 2067 7261 6d6d 6172 2066  lyPond grammar f
+00004a50: 696c 6573 2e0a 2020 2020 2222 220a 0a20  iles..    """.. 
+00004a60: 2020 2023 2323 2043 4c41 5353 2056 4152     ### CLASS VAR
+00004a70: 4941 424c 4553 2023 2323 0a0a 2020 2020  IABLES ###..    
+00004a80: 5f5f 736c 6f74 735f 5f20 3d20 2829 0a0a  __slots__ = ()..
+00004a90: 2020 2020 2323 2320 5350 4543 4941 4c20      ### SPECIAL 
+00004aa0: 4d45 5448 4f44 5320 2323 230a 0a20 2020  METHODS ###..   
+00004ab0: 2064 6566 205f 5f63 616c 6c5f 5f28 7365   def __call__(se
+00004ac0: 6c66 2c20 736b 656c 6574 6f6e 5f70 6174  lf, skeleton_pat
+00004ad0: 682c 2070 6172 7365 725f 6f75 7470 7574  h, parser_output
+00004ae0: 5f70 6174 682c 2070 6172 7365 725f 7461  _path, parser_ta
+00004af0: 625f 6868 5f70 6174 6829 3a0a 2020 2020  b_hh_path):.    
+00004b00: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00004b10: 4361 6c6c 7320 4c69 6c79 506f 6e64 2067  Calls LilyPond g
+00004b20: 7261 6d6d 6172 2067 656e 6572 6174 6f72  rammar generator
+00004b30: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00004b40: 2020 2020 2020 7365 6c66 2e5f 7772 6974        self._writ
+00004b50: 655f 7061 7273 6572 5f73 796e 7461 785f  e_parser_syntax_
+00004b60: 736b 656c 6574 6f6e 280a 2020 2020 2020  skeleton(.      
+00004b70: 2020 2020 2020 7365 6c66 2c20 736b 656c        self, skel
+00004b80: 6574 6f6e 5f70 6174 682c 2070 6172 7365  eton_path, parse
+00004b90: 725f 6f75 7470 7574 5f70 6174 682c 2070  r_output_path, p
+00004ba0: 6172 7365 725f 7461 625f 6868 5f70 6174  arser_tab_hh_pat
+00004bb0: 680a 2020 2020 2020 2020 290a 0a20 2020  h.        )..   
+00004bc0: 2023 2323 2050 5249 5641 5445 204d 4554   ### PRIVATE MET
+00004bd0: 484f 4453 2023 2323 0a0a 2020 2020 6465  HODS ###..    de
+00004be0: 6620 5f65 7874 7261 6374 5f70 726f 6475  f _extract_produ
+00004bf0: 6374 696f 6e73 5f66 726f 6d5f 7061 7273  ctions_from_pars
+00004c00: 6572 5f6f 7574 7075 7428 7365 6c66 2c20  er_output(self, 
+00004c10: 6669 6c65 5f70 6174 6829 3a0a 2020 2020  file_path):.    
+00004c20: 2020 2020 7769 7468 206f 7065 6e28 6669      with open(fi
+00004c30: 6c65 5f70 6174 682c 2022 7222 2920 6173  le_path, "r") as
+00004c40: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
+00004c50: 6c69 6e65 7320 3d20 662e 7265 6164 2829  lines = f.read()
+00004c60: 2e73 706c 6974 2822 5c6e 2229 0a20 2020  .split("\n").   
+00004c70: 2020 2020 2070 726f 6475 6374 696f 6e73       productions
+00004c80: 203d 207b 7d0a 2020 2020 2020 2020 6e6f   = {}.        no
+00004c90: 6e74 6572 6d69 6e61 6c20 3d20 4e6f 6e65  nterminal = None
+00004ca0: 0a20 2020 2020 2020 2069 6e5f 6772 616d  .        in_gram
+00004cb0: 6d61 7220 3d20 4661 6c73 650a 2020 2020  mar = False.    
+00004cc0: 2020 2020 666f 7220 6c69 6e65 2069 6e20      for line in 
+00004cd0: 6c69 6e65 733a 0a20 2020 2020 2020 2020  lines:.         
+00004ce0: 2020 2074 6578 7420 3d20 6c69 6e65 2e73     text = line.s
+00004cf0: 7472 6970 2829 0a20 2020 2020 2020 2020  trip().         
+00004d00: 2020 2023 2073 7461 7274 696e 6720 616e     # starting an
+00004d10: 6420 7374 6f70 7069 6e67 0a20 2020 2020  d stopping.     
+00004d20: 2020 2020 2020 2069 6620 7465 7874 203d         if text =
+00004d30: 3d20 2254 6572 6d69 6e61 6c73 2c20 7769  = "Terminals, wi
+00004d40: 7468 2072 756c 6573 2077 6865 7265 2074  th rules where t
+00004d50: 6865 7920 6170 7065 6172 223a 0a20 2020  hey appear":.   
+00004d60: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+00004d70: 616b 0a20 2020 2020 2020 2020 2020 2065  ak.            e
+00004d80: 6c69 6620 7465 7874 203d 3d20 2247 7261  lif text == "Gra
+00004d90: 6d6d 6172 223a 0a20 2020 2020 2020 2020  mmar":.         
+00004da0: 2020 2020 2020 2069 6e5f 6772 616d 6d61         in_gramma
+00004db0: 7220 3d20 5472 7565 0a20 2020 2020 2020  r = True.       
+00004dc0: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00004dd0: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00004de0: 206e 6f74 2069 6e5f 6772 616d 6d61 723a   not in_grammar:
+00004df0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004e00: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+00004e10: 2020 2020 2020 6966 206e 6f74 2074 6578        if not tex
+00004e20: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00004e30: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
+00004e40: 2020 2020 2020 2020 7061 7274 7320 3d20          parts = 
+00004e50: 7465 7874 2e73 706c 6974 2829 5b31 3a5d  text.split()[1:]
+00004e60: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00004e70: 7061 7274 735b 305d 2e73 7461 7274 7377  parts[0].startsw
+00004e80: 6974 6828 2224 2229 3a0a 2020 2020 2020  ith("$"):.      
+00004e90: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+00004ea0: 7565 0a20 2020 2020 2020 2020 2020 2065  ue.            e
+00004eb0: 6c69 6620 7061 7274 735b 305d 203d 3d20  lif parts[0] == 
+00004ec0: 227c 223a 0a20 2020 2020 2020 2020 2020  "|":.           
+00004ed0: 2020 2020 2072 6967 6874 5f68 616e 6420       right_hand 
+00004ee0: 3d20 6669 6c74 6572 286c 616d 6264 6120  = filter(lambda 
+00004ef0: 783a 206e 6f74 2078 2e73 7461 7274 7377  x: not x.startsw
+00004f00: 6974 6828 2224 2229 2c20 7061 7274 735b  ith("$"), parts[
+00004f10: 313a 5d29 0a20 2020 2020 2020 2020 2020  1:]).           
+00004f20: 2020 2020 2070 726f 6475 6374 696f 6e73       productions
+00004f30: 5b6e 6f6e 7465 726d 696e 616c 5d2e 6170  [nonterminal].ap
+00004f40: 7065 6e64 2870 6172 7473 5b31 3a5d 290a  pend(parts[1:]).
+00004f50: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00004f60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00004f70: 2020 6e6f 6e74 6572 6d69 6e61 6c20 3d20    nonterminal = 
+00004f80: 7061 7274 735b 305d 5b3a 2d31 5d0a 2020  parts[0][:-1].  
+00004f90: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00004fa0: 206e 6f6e 7465 726d 696e 616c 206e 6f74   nonterminal not
+00004fb0: 2069 6e20 7072 6f64 7563 7469 6f6e 733a   in productions:
+00004fc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004fd0: 2020 2020 2070 726f 6475 6374 696f 6e73       productions
+00004fe0: 5b6e 6f6e 7465 726d 696e 616c 5d20 3d20  [nonterminal] = 
+00004ff0: 5b5d 0a20 2020 2020 2020 2020 2020 2020  [].             
+00005000: 2020 2072 6967 6874 5f68 616e 6420 3d20     right_hand = 
+00005010: 7061 7274 735b 313a 5d0a 2020 2020 2020  parts[1:].      
+00005020: 2020 2020 2020 2020 2020 6966 2072 6967            if rig
+00005030: 6874 5f68 616e 645b 305d 203d 3d20 222f  ht_hand[0] == "/
+00005040: 2a22 3a20 2023 202f 2a20 656d 7074 7920  *":  # /* empty 
+00005050: 2a2f 0a20 2020 2020 2020 2020 2020 2020  */.             
+00005060: 2020 2020 2020 2070 726f 6475 6374 696f         productio
+00005070: 6e73 5b6e 6f6e 7465 726d 696e 616c 5d2e  ns[nonterminal].
+00005080: 6170 7065 6e64 285b 5d29 0a20 2020 2020  append([]).     
+00005090: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000050a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000050b0: 2020 2020 2072 6967 6874 5f68 616e 6420       right_hand 
+000050c0: 3d20 6669 6c74 6572 286c 616d 6264 6120  = filter(lambda 
+000050d0: 783a 206e 6f74 2078 2e73 7461 7274 7377  x: not x.startsw
+000050e0: 6974 6828 2224 2229 2c20 7269 6768 745f  ith("$"), right_
+000050f0: 6861 6e64 290a 2020 2020 2020 2020 2020  hand).          
+00005100: 2020 2020 2020 2020 2020 7072 6f64 7563            produc
+00005110: 7469 6f6e 735b 6e6f 6e74 6572 6d69 6e61  tions[nontermina
+00005120: 6c5d 2e61 7070 656e 6428 7269 6768 745f  l].append(right_
+00005130: 6861 6e64 290a 2020 2020 2020 2020 7265  hand).        re
+00005140: 7475 726e 2070 726f 6475 6374 696f 6e73  turn productions
+00005150: 0a0a 2020 2020 6465 6620 5f65 7874 7261  ..    def _extra
+00005160: 6374 5f74 6f6b 656e 5f6e 616d 6573 5f66  ct_token_names_f
+00005170: 726f 6d5f 7061 7273 6572 5f74 6162 5f68  rom_parser_tab_h
+00005180: 6828 7365 6c66 2c20 6669 6c65 5f70 6174  h(self, file_pat
+00005190: 6829 3a0a 2020 2020 2020 2020 7769 7468  h):.        with
+000051a0: 206f 7065 6e28 6669 6c65 5f70 6174 682c   open(file_path,
+000051b0: 2022 7222 2920 6173 2066 3a0a 2020 2020   "r") as f:.    
+000051c0: 2020 2020 2020 2020 6c69 6e65 7320 3d20          lines = 
+000051d0: 662e 7265 6164 2829 2e73 706c 6974 2822  f.read().split("
+000051e0: 5c6e 2229 0a20 2020 2020 2020 2074 6f6b  \n").        tok
+000051f0: 656e 5f6e 616d 6573 203d 207b 7d0a 2020  en_names = {}.  
+00005200: 2020 2020 2020 696e 5f65 6e75 6d20 3d20        in_enum = 
+00005210: 4661 6c73 650a 2020 2020 2020 2020 666f  False.        fo
+00005220: 7220 6c69 6e65 2069 6e20 6c69 6e65 733a  r line in lines:
+00005230: 0a20 2020 2020 2020 2020 2020 2074 6578  .            tex
+00005240: 7420 3d20 6c69 6e65 2e73 7472 6970 2829  t = line.strip()
+00005250: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00005260: 696e 5f65 6e75 6d20 616e 6420 7465 7874  in_enum and text
+00005270: 203d 3d20 227d 3b22 3a0a 2020 2020 2020   == "};":.      
+00005280: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
+00005290: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+000052a0: 6e5f 656e 756d 3a0a 2020 2020 2020 2020  n_enum:.        
+000052b0: 2020 2020 2020 2020 7061 7274 7320 3d20          parts = 
+000052c0: 7465 7874 2e73 706c 6974 2822 2022 290a  text.split(" ").
+000052d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000052e0: 6e61 6d65 203d 2070 6172 7473 5b30 5d0a  name = parts[0].
+000052f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005300: 6966 2070 6172 7473 5b32 5d2e 656e 6473  if parts[2].ends
+00005310: 7769 7468 2822 2c22 293a 0a20 2020 2020  with(","):.     
+00005320: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00005330: 756d 6265 7220 3d20 696e 7428 7061 7274  umber = int(part
+00005340: 735b 325d 5b3a 2d31 5d29 0a20 2020 2020  s[2][:-1]).     
+00005350: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00005360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005370: 2020 2020 206e 756d 6265 7220 3d20 696e       number = in
+00005380: 7428 7061 7274 735b 325d 290a 2020 2020  t(parts[2]).    
+00005390: 2020 2020 2020 2020 2020 2020 746f 6b65              toke
+000053a0: 6e5f 6e61 6d65 735b 6e75 6d62 6572 5d20  n_names[number] 
+000053b0: 3d20 6e61 6d65 0a20 2020 2020 2020 2020  = name.         
+000053c0: 2020 2069 6620 7465 7874 203d 3d20 2265     if text == "e
+000053d0: 6e75 6d20 7979 746f 6b65 6e74 7970 6520  num yytokentype 
+000053e0: 7b22 3a0a 2020 2020 2020 2020 2020 2020  {":.            
+000053f0: 2020 2020 696e 5f65 6e75 6d20 3d20 5472      in_enum = Tr
+00005400: 7565 0a20 2020 2020 2020 2072 6574 7572  ue.        retur
+00005410: 6e20 746f 6b65 6e5f 6e61 6d65 730a 0a20  n token_names.. 
+00005420: 2020 2064 6566 205f 6578 7472 6163 745f     def _extract_
+00005430: 746f 6b65 6e5f 7661 6c75 6573 5f66 726f  token_values_fro
+00005440: 6d5f 7061 7273 6572 5f6f 7574 7075 7428  m_parser_output(
+00005450: 7365 6c66 2c20 6669 6c65 5f70 6174 6829  self, file_path)
+00005460: 3a0a 2020 2020 2020 2020 7769 7468 206f  :.        with o
+00005470: 7065 6e28 6669 6c65 5f70 6174 682c 2022  pen(file_path, "
+00005480: 7222 2920 6173 2066 3a0a 2020 2020 2020  r") as f:.      
+00005490: 2020 2020 2020 6c69 6e65 7320 3d20 662e        lines = f.
+000054a0: 7265 6164 2829 2e73 706c 6974 2822 5c6e  read().split("\n
+000054b0: 2229 0a20 2020 2020 2020 2074 6f6b 656e  ").        token
+000054c0: 5f76 616c 7565 7320 3d20 7b7d 0a20 2020  _values = {}.   
+000054d0: 2020 2020 2069 6e5f 746f 6b65 6e5f 6c69       in_token_li
+000054e0: 7374 203d 2046 616c 7365 0a20 2020 2020  st = False.     
+000054f0: 2020 2066 6f72 206c 696e 6520 696e 206c     for line in l
+00005500: 696e 6573 3a0a 2020 2020 2020 2020 2020  ines:.          
+00005510: 2020 7465 7874 203d 206c 696e 652e 7374    text = line.st
+00005520: 7269 7028 290a 2020 2020 2020 2020 2020  rip().          
+00005530: 2020 6966 2069 6e5f 746f 6b65 6e5f 6c69    if in_token_li
+00005540: 7374 2061 6e64 2074 6578 7420 3d3d 2022  st and text == "
+00005550: 4e6f 6e74 6572 6d69 6e61 6c73 2c20 7769  Nonterminals, wi
+00005560: 7468 2072 756c 6573 2077 6865 7265 2074  th rules where t
+00005570: 6865 7920 6170 7065 6172 223a 0a20 2020  hey appear":.   
+00005580: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+00005590: 616b 0a20 2020 2020 2020 2020 2020 2065  ak.            e
+000055a0: 6c69 6620 7465 7874 203d 3d20 2254 6572  lif text == "Ter
+000055b0: 6d69 6e61 6c73 2c20 7769 7468 2072 756c  minals, with rul
+000055c0: 6573 2077 6865 7265 2074 6865 7920 6170  es where they ap
+000055d0: 7065 6172 223a 0a20 2020 2020 2020 2020  pear":.         
+000055e0: 2020 2020 2020 2069 6e5f 746f 6b65 6e5f         in_token_
+000055f0: 6c69 7374 203d 2054 7275 650a 2020 2020  list = True.    
+00005600: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00005610: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
+00005620: 2065 6c69 6620 6e6f 7420 7465 7874 3a0a   elif not text:.
+00005630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005640: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
+00005650: 2020 2020 2065 6c69 6620 6e6f 7420 696e       elif not in
+00005660: 5f74 6f6b 656e 5f6c 6973 743a 0a20 2020  _token_list:.   
+00005670: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00005680: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+00005690: 2020 7061 7274 7320 3d20 7465 7874 2e73    parts = text.s
+000056a0: 706c 6974 2829 0a20 2020 2020 2020 2020  plit().         
+000056b0: 2020 2069 6620 7061 7274 735b 305d 2e69     if parts[0].i
+000056c0: 7364 6967 6974 2829 3a0a 2020 2020 2020  sdigit():.      
+000056d0: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+000056e0: 7565 0a20 2020 2020 2020 2020 2020 2065  ue.            e
+000056f0: 6c69 6620 7061 7274 735b 305d 2e73 7461  lif parts[0].sta
+00005700: 7274 7377 6974 6828 2224 2229 3a0a 2020  rtswith("$"):.  
+00005710: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00005720: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+00005730: 2020 2076 616c 7565 203d 2070 6172 7473     value = parts
+00005740: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
+00005750: 6e75 6d62 6572 203d 2069 6e74 2870 6172  number = int(par
+00005760: 7473 5b31 5d5b 313a 2d31 5d29 0a20 2020  ts[1][1:-1]).   
+00005770: 2020 2020 2020 2020 2074 6f6b 656e 5f76           token_v
+00005780: 616c 7565 735b 6e75 6d62 6572 5d20 3d20  alues[number] = 
+00005790: 7661 6c75 650a 2020 2020 2020 2020 7265  value.        re
+000057a0: 7475 726e 2074 6f6b 656e 5f76 616c 7565  turn token_value
+000057b0: 730a 0a20 2020 2064 6566 205f 6765 6e65  s..    def _gene
+000057c0: 7261 7465 5f70 726f 6475 6374 696f 6e5f  rate_production_
+000057d0: 6d61 7028 7365 6c66 2c20 6f75 7470 7574  map(self, output
+000057e0: 5f70 6174 682c 2074 6162 5f68 685f 7061  _path, tab_hh_pa
+000057f0: 7468 293a 0a20 2020 2020 2020 2070 726f  th):.        pro
+00005800: 6475 6374 696f 6e73 203d 2073 656c 662e  ductions = self.
+00005810: 5f65 7874 7261 6374 5f70 726f 6475 6374  _extract_product
+00005820: 696f 6e73 5f66 726f 6d5f 7061 7273 6572  ions_from_parser
+00005830: 5f6f 7574 7075 7428 6f75 7470 7574 5f70  _output(output_p
+00005840: 6174 6829 0a20 2020 2020 2020 206e 616d  ath).        nam
+00005850: 6573 203d 2073 656c 662e 5f65 7874 7261  es = self._extra
+00005860: 6374 5f74 6f6b 656e 5f6e 616d 6573 5f66  ct_token_names_f
+00005870: 726f 6d5f 7061 7273 6572 5f74 6162 5f68  rom_parser_tab_h
+00005880: 6828 7461 625f 6868 5f70 6174 6829 0a20  h(tab_hh_path). 
+00005890: 2020 2020 2020 2076 616c 7565 7320 3d20         values = 
+000058a0: 7365 6c66 2e5f 6578 7472 6163 745f 746f  self._extract_to
+000058b0: 6b65 6e5f 7661 6c75 6573 5f66 726f 6d5f  ken_values_from_
+000058c0: 7061 7273 6572 5f6f 7574 7075 7428 6f75  parser_output(ou
+000058d0: 7470 7574 5f70 6174 6829 0a20 2020 2020  tput_path).     
+000058e0: 2020 206d 6174 6368 6573 203d 2073 656c     matches = sel
+000058f0: 662e 5f6d 6174 6368 5f74 6f6b 656e 5f6e  f._match_token_n
+00005900: 616d 6573 5f77 6974 685f 746f 6b65 6e5f  ames_with_token_
+00005910: 7661 6c75 6573 286e 616d 6573 2c20 7661  values(names, va
+00005920: 6c75 6573 290a 2020 2020 2020 2020 7265  lues).        re
+00005930: 7772 6974 6573 203d 207b 7d0a 2020 2020  writes = {}.    
+00005940: 2020 2020 666f 7220 6e6f 6e74 6572 6d69      for nontermi
+00005950: 6e61 6c20 696e 2070 726f 6475 6374 696f  nal in productio
+00005960: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
+00005970: 666f 7220 7268 2069 6e20 7072 6f64 7563  for rh in produc
+00005980: 7469 6f6e 735b 6e6f 6e74 6572 6d69 6e61  tions[nontermina
+00005990: 6c5d 3a0a 2020 2020 2020 2020 2020 2020  l]:.            
+000059a0: 2020 2020 666f 7220 692c 2072 2069 6e20      for i, r in 
+000059b0: 656e 756d 6572 6174 6528 7268 293a 0a20  enumerate(rh):. 
+000059c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000059d0: 2020 2069 6620 7220 696e 206d 6174 6368     if r in match
+000059e0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+000059f0: 2020 2020 2020 2020 2020 2020 7268 5b69              rh[i
+00005a00: 5d20 3d20 6d61 7463 6865 735b 725d 0a20  ] = matches[r]. 
+00005a10: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00005a20: 7472 696e 6720 3d20 2220 222e 6a6f 696e  tring = " ".join
+00005a30: 2872 6829 0a20 2020 2020 2020 2020 2020  (rh).           
+00005a40: 2020 2020 2064 6f63 7374 7269 6e67 203d       docstring =
+00005a50: 2066 227b 6e6f 6e74 6572 6d69 6e61 6c7d   f"{nonterminal}
+00005a60: 203a 207b 7374 7269 6e67 7d22 0a20 2020   : {string}".   
+00005a70: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00005a80: 2069 2c20 7220 696e 2065 6e75 6d65 7261   i, r in enumera
+00005a90: 7465 2872 6829 3a0a 2020 2020 2020 2020  te(rh):.        
+00005aa0: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+00005ab0: 5b30 5d20 3d3d 2022 2722 2061 6e64 2072  [0] == "'" and r
+00005ac0: 5b2d 315d 203d 3d20 2227 223a 0a20 2020  [-1] == "'":.   
+00005ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005ae0: 2020 2020 2072 685b 695d 203d 2066 2243       rh[i] = f"C
+00005af0: 6872 7b6f 7264 2872 5b2d 325d 297d 220a  hr{ord(r[-2])}".
+00005b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005b10: 7374 7269 6e67 203d 2022 5f5f 222e 6a6f  string = "__".jo
+00005b20: 696e 2872 6829 0a20 2020 2020 2020 2020  in(rh).         
+00005b30: 2020 2020 2020 2066 756e 636e 616d 6520         funcname 
+00005b40: 3d20 6622 705f 7b6e 6f6e 7465 726d 696e  = f"p_{nontermin
+00005b50: 616c 7d5f 5f7b 7374 7269 6e67 7d22 0a20  al}__{string}". 
+00005b60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00005b70: 6577 7269 7465 735b 6675 6e63 6e61 6d65  ewrites[funcname
+00005b80: 5d20 3d20 646f 6373 7472 696e 670a 2020  ] = docstring.  
+00005b90: 2020 2020 2020 7265 7475 726e 2072 6577        return rew
+00005ba0: 7269 7465 730a 0a20 2020 2064 6566 205f  rites..    def _
+00005bb0: 6d61 7463 685f 746f 6b65 6e5f 6e61 6d65  match_token_name
+00005bc0: 735f 7769 7468 5f74 6f6b 656e 5f76 616c  s_with_token_val
+00005bd0: 7565 7328 7365 6c66 2c20 6e61 6d65 732c  ues(self, names,
+00005be0: 2076 616c 7565 7329 3a0a 2020 2020 2020   values):.      
+00005bf0: 2020 6d61 7463 6865 7320 3d20 7b7d 0a20    matches = {}. 
+00005c00: 2020 2020 2020 2066 6f72 206e 756d 6265         for numbe
+00005c10: 722c 2076 616c 7565 2069 6e20 7661 6c75  r, value in valu
+00005c20: 6573 2e69 7465 6d73 2829 3a0a 2020 2020  es.items():.    
+00005c30: 2020 2020 2020 2020 6966 206e 756d 6265          if numbe
+00005c40: 7220 696e 206e 616d 6573 3a0a 2020 2020  r in names:.    
+00005c50: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+00005c60: 203d 206e 616d 6573 5b6e 756d 6265 725d   = names[number]
+00005c70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005c80: 206d 6174 6368 6573 5b76 616c 7565 5d20   matches[value] 
+00005c90: 3d20 6e61 6d65 0a20 2020 2020 2020 2072  = name.        r
+00005ca0: 6574 7572 6e20 6d61 7463 6865 730a 0a20  eturn matches.. 
+00005cb0: 2020 2064 6566 205f 7772 6974 655f 7061     def _write_pa
+00005cc0: 7273 6572 5f73 796e 7461 785f 736b 656c  rser_syntax_skel
+00005cd0: 6574 6f6e 280a 2020 2020 2020 2020 7365  eton(.        se
+00005ce0: 6c66 2c20 736b 656c 6574 6f6e 5f70 6174  lf, skeleton_pat
+00005cf0: 682c 2070 6172 7365 725f 6f75 7470 7574  h, parser_output
+00005d00: 5f70 6174 682c 2070 6172 7365 725f 7461  _path, parser_ta
+00005d10: 625f 6868 5f70 6174 680a 2020 2020 293a  b_hh_path.    ):
+00005d20: 0a20 2020 2020 2020 2070 726f 6475 6374  .        product
+00005d30: 696f 6e73 203d 2073 656c 662e 5f67 656e  ions = self._gen
+00005d40: 6572 6174 655f 7072 6f64 7563 7469 6f6e  erate_production
+00005d50: 5f6d 6170 280a 2020 2020 2020 2020 2020  _map(.          
+00005d60: 2020 7061 7273 6572 5f6f 7574 7075 745f    parser_output_
+00005d70: 7061 7468 2c20 7061 7273 6572 5f74 6162  path, parser_tab
+00005d80: 5f68 685f 7061 7468 0a20 2020 2020 2020  _hh_path.       
+00005d90: 2029 0a20 2020 2020 2020 2077 6974 6820   ).        with 
+00005da0: 6f70 656e 2873 6b65 6c65 746f 6e5f 7061  open(skeleton_pa
+00005db0: 7468 2c20 2277 2229 2061 7320 663a 0a20  th, "w") as f:. 
+00005dc0: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
+00005dd0: 7465 2822 6672 6f6d 2061 626a 6164 2e70  te("from abjad.p
+00005de0: 6172 7365 7273 2e70 6172 7365 7220 696d  arsers.parser im
+00005df0: 706f 7274 2053 796e 7461 784e 6f64 6520  port SyntaxNode 
+00005e00: 6173 204e 6f64 6520 5c5c 5c6e 2229 0a20  as Node \\\n"). 
+00005e10: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
+00005e20: 7465 2822 636c 6173 7320 5f4c 696c 7950  te("class _LilyP
+00005e30: 6f6e 6453 796e 7461 6374 6963 616c 4465  ondSyntacticalDe
+00005e40: 6669 6e69 7469 6f6e 3a5c 6e5c 6e22 290a  finition:\n\n").
+00005e50: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
+00005e60: 6974 6528 2220 2020 2064 6566 205f 5f69  ite("    def __i
+00005e70: 6e69 745f 5f28 7365 6c66 2c20 636c 6965  nit__(self, clie
+00005e80: 6e74 293a 5c6e 2229 0a20 2020 2020 2020  nt):\n").       
+00005e90: 2020 2020 2066 2e77 7269 7465 2822 2020       f.write("  
+00005ea0: 2020 2020 2020 7365 6c66 2e63 6c69 656e        self.clien
+00005eb0: 7420 3d20 636c 6965 6e74 5c6e 2229 0a20  t = client\n"). 
+00005ec0: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
+00005ed0: 7465 2822 2020 2020 2020 2020 7365 6c66  te("        self
+00005ee0: 2e74 6f6b 656e 7320 3d20 7365 6c66 2e63  .tokens = self.c
+00005ef0: 6c69 656e 742e 6c65 7864 6566 2e74 6f6b  lient.lexdef.tok
+00005f00: 656e 735c 6e5c 6e5c 6e22 290a 2020 2020  ens\n\n\n").    
+00005f10: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
+00005f20: 2220 2020 2073 7461 7274 5f73 796d 626f  "    start_symbo
+00005f30: 6c20 3d20 2773 7461 7274 5f73 796d 626f  l = 'start_symbo
+00005f40: 6c27 5c6e 5c6e 5c6e 2229 0a20 2020 2020  l'\n\n\n").     
+00005f50: 2020 2020 2020 2066 2e77 7269 7465 2822         f.write("
+00005f60: 2020 2020 7072 6563 6564 656e 6365 203d      precedence =
+00005f70: 2028 5c6e 2229 0a20 2020 2020 2020 2020   (\n").         
+00005f80: 2020 2066 2e77 7269 7465 2822 2020 2020     f.write("    
+00005f90: 2020 2020 2827 6e6f 6e61 7373 6f63 272c      ('nonassoc',
+00005fa0: 2027 434f 4d50 4f53 4954 4527 292c 5c6e   'COMPOSITE'),\n
+00005fb0: 2229 0a20 2020 2020 2020 2020 2020 2066  ").            f
+00005fc0: 2e77 7269 7465 2822 2020 2020 2020 2020  .write("        
+00005fd0: 2827 6e6f 6e61 7373 6f63 272c 2027 5245  ('nonassoc', 'RE
+00005fe0: 5045 4154 2729 2c5c 6e22 290a 2020 2020  PEAT'),\n").    
+00005ff0: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
+00006000: 2220 2020 2020 2020 2028 276e 6f6e 6173  "        ('nonas
+00006010: 736f 6327 2c20 2741 4c54 4552 4e41 5449  soc', 'ALTERNATI
+00006020: 5645 2729 2c5c 6e22 290a 2020 2020 2020  VE'),\n").      
+00006030: 2020 2020 2020 662e 7772 6974 6528 2220        f.write(" 
+00006040: 2020 2020 2020 2028 276c 6566 7427 2c20         ('left', 
+00006050: 2741 4444 4c59 5249 4353 2729 2c5c 6e22  'ADDLYRICS'),\n"
+00006060: 290a 2020 2020 2020 2020 2020 2020 662e  ).            f.
+00006070: 7772 6974 6528 2220 2020 2020 2020 2028  write("        (
+00006080: 276e 6f6e 6173 736f 6327 2c20 2744 4546  'nonassoc', 'DEF
+00006090: 4155 4c54 2729 2c5c 6e22 290a 2020 2020  AULT'),\n").    
+000060a0: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
+000060b0: 2220 2020 2020 2020 2028 276e 6f6e 6173  "        ('nonas
+000060c0: 736f 6327 2c20 2746 554e 4354 494f 4e5f  soc', 'FUNCTION_
+000060d0: 4152 474c 4953 5427 292c 5c6e 2229 0a20  ARGLIST'),\n"). 
+000060e0: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
+000060f0: 7465 280a 2020 2020 2020 2020 2020 2020  te(.            
+00006100: 2020 2020 2220 2020 2020 2020 2028 2772      "        ('r
+00006110: 6967 6874 272c 2027 5049 5443 485f 4944  ight', 'PITCH_ID
+00006120: 454e 5449 4649 4552 272c 2027 4e4f 5445  ENTIFIER', 'NOTE
+00006130: 4e41 4d45 5f50 4954 4348 272c 220a 2020  NAME_PITCH',".  
+00006140: 2020 2020 2020 2020 2020 2020 2020 2220                " 
+00006150: 2754 4f4e 4943 4e41 4d45 5f50 4954 4348  'TONICNAME_PITCH
+00006160: 272c 2027 554e 5349 474e 4544 272c 2027  ', 'UNSIGNED', '
+00006170: 5245 414c 272c 2027 4455 5241 5449 4f4e  REAL', 'DURATION
+00006180: 5f49 4445 4e54 4946 4945 5227 2c20 273a  _IDENTIFIER', ':
+00006190: 2729 2c5c 6e22 0a20 2020 2020 2020 2020  '),\n".         
+000061a0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+000061b0: 2066 2e77 7269 7465 2822 2020 2020 2020   f.write("      
+000061c0: 2020 2827 6e6f 6e61 7373 6f63 272c 2027    ('nonassoc', '
+000061d0: 4e55 4d42 4552 5f49 4445 4e54 4946 4945  NUMBER_IDENTIFIE
+000061e0: 5227 2c20 272f 2729 2c5c 6e22 290a 2020  R', '/'),\n").  
+000061f0: 2020 2020 2020 2020 2020 662e 7772 6974            f.writ
+00006200: 6528 2220 2020 2029 5c6e 5c6e 5c6e 2229  e("    )\n\n\n")
+00006210: 0a20 2020 2020 2020 2020 2020 2066 2e77  .            f.w
+00006220: 7269 7465 2822 2020 2020 2323 2320 5359  rite("    ### SY
+00006230: 4e54 4143 5449 4341 4c20 5255 4c45 5320  NTACTICAL RULES 
+00006240: 2841 4c50 4841 4245 5449 4341 4c29 2023  (ALPHABETICAL) #
+00006250: 2323 5c6e 5c6e 5c6e 2229 0a20 2020 2020  ##\n\n\n").     
+00006260: 2020 2020 2020 2063 7572 7265 6e74 5f6e         current_n
+00006270: 6f6e 7465 726d 696e 616c 203d 2022 7374  onterminal = "st
+00006280: 6172 745f 7379 6d62 6f6c 220a 2020 2020  art_symbol".    
+00006290: 2020 2020 2020 2020 6c79 5f6b 6579 7320          ly_keys 
+000062a0: 3d20 736f 7274 6564 280a 2020 2020 2020  = sorted(.      
+000062b0: 2020 2020 2020 2020 2020 6b65 7920 666f            key fo
+000062c0: 7220 6b65 7920 696e 2070 726f 6475 6374  r key in product
+000062d0: 696f 6e73 2069 6620 6b65 792e 7374 6172  ions if key.star
+000062e0: 7473 7769 7468 2822 705f 7374 6172 745f  tswith("p_start_
+000062f0: 7379 6d62 6f6c 2229 0a20 2020 2020 2020  symbol").       
+00006300: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00006310: 2020 2066 6f72 206b 6579 2069 6e20 6c79     for key in ly
+00006320: 5f6b 6579 733a 0a20 2020 2020 2020 2020  _keys:.         
+00006330: 2020 2020 2020 2066 756e 636e 616d 6520         funcname 
+00006340: 3d20 6b65 790a 2020 2020 2020 2020 2020  = key.          
+00006350: 2020 2020 2020 646f 6373 7472 696e 6720        docstring 
+00006360: 3d20 7072 6f64 7563 7469 6f6e 735b 6b65  = productions[ke
+00006370: 795d 0a20 2020 2020 2020 2020 2020 2020  y].             
+00006380: 2020 2066 2e77 7269 7465 2866 2220 2020     f.write(f"   
+00006390: 2064 6566 207b 6675 6e63 6e61 6d65 7d28   def {funcname}(
+000063a0: 7365 6c66 2c20 7029 3a5c 6e22 290a 2020  self, p):\n").  
+000063b0: 2020 2020 2020 2020 2020 2020 2020 662e                f.
+000063c0: 7772 6974 6528 6622 2020 2020 2020 2020  write(f"        
+000063d0: 7b64 6f63 7374 7269 6e67 2172 7d5c 6e22  {docstring!r}\n"
+000063e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000063f0: 2020 662e 7772 6974 6528 6622 2020 2020    f.write(f"    
+00006400: 2020 2020 705b 305d 203d 204e 6f64 6528      p[0] = Node(
+00006410: 277b 6375 7272 656e 745f 6e6f 6e74 6572  '{current_nonter
+00006420: 6d69 6e61 6c7d 272c 2070 5b31 3a5d 295c  minal}', p[1:])\
+00006430: 6e5c 6e5c 6e22 290a 2020 2020 2020 2020  n\n\n").        
+00006440: 2020 2020 666f 7220 6675 6e63 6e61 6d65      for funcname
+00006450: 2c20 646f 6373 7472 696e 6720 696e 2073  , docstring in s
+00006460: 6f72 7465 6428 7072 6f64 7563 7469 6f6e  orted(production
+00006470: 732e 6974 656d 7328 2929 3a0a 2020 2020  s.items()):.    
+00006480: 2020 2020 2020 2020 2020 2020 6e6f 6e74              nont
+00006490: 6572 6d69 6e61 6c20 3d20 6675 6e63 6e61  erminal = funcna
+000064a0: 6d65 2e73 706c 6974 2822 5f5f 2229 5b30  me.split("__")[0
+000064b0: 5d5b 323a 5d0a 2020 2020 2020 2020 2020  ][2:].          
+000064c0: 2020 2020 2020 6966 206e 6f6e 7465 726d        if nonterm
+000064d0: 696e 616c 203d 3d20 2273 7461 7274 5f73  inal == "start_s
+000064e0: 796d 626f 6c22 3a0a 2020 2020 2020 2020  ymbol":.        
+000064f0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00006500: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
+00006510: 2020 2020 2069 6620 6e6f 6e74 6572 6d69       if nontermi
+00006520: 6e61 6c20 213d 2063 7572 7265 6e74 5f6e  nal != current_n
+00006530: 6f6e 7465 726d 696e 616c 3a0a 2020 2020  onterminal:.    
+00006540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006550: 6375 7272 656e 745f 6e6f 6e74 6572 6d69  current_nontermi
+00006560: 6e61 6c20 3d20 6e6f 6e74 6572 6d69 6e61  nal = nontermina
+00006570: 6c0a 2020 2020 2020 2020 2020 2020 2020  l.              
+00006580: 2020 2020 2020 662e 7772 6974 6528 6622        f.write(f"
+00006590: 2020 2020 2323 2320 7b63 7572 7265 6e74      ### {current
+000065a0: 5f6e 6f6e 7465 726d 696e 616c 7d20 2323  _nonterminal} ##
+000065b0: 235c 6e5c 6e5c 6e22 290a 2020 2020 2020  #\n\n\n").      
+000065c0: 2020 2020 2020 2020 2020 662e 7772 6974            f.writ
+000065d0: 6528 6622 2020 2020 6465 6620 7b66 756e  e(f"    def {fun
+000065e0: 636e 616d 657d 2873 656c 662c 2070 293a  cname}(self, p):
+000065f0: 5c6e 2229 0a20 2020 2020 2020 2020 2020  \n").           
+00006600: 2020 2020 2066 2e77 7269 7465 2866 2220       f.write(f" 
+00006610: 2020 2020 2020 207b 646f 6373 7472 696e         {docstrin
+00006620: 6721 727d 5c6e 2229 0a20 2020 2020 2020  g!r}\n").       
+00006630: 2020 2020 2020 2020 2066 2e77 7269 7465           f.write
+00006640: 2866 2220 2020 2020 2020 2070 5b30 5d20  (f"        p[0] 
+00006650: 3d20 4e6f 6465 2827 7b63 7572 7265 6e74  = Node('{current
+00006660: 5f6e 6f6e 7465 726d 696e 616c 7d27 2c20  _nonterminal}', 
+00006670: 705b 313a 5d29 5c6e 5c6e 5c6e 2229 0a20  p[1:])\n\n\n"). 
+00006680: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
+00006690: 7465 2822 2020 2020 6465 6620 705f 6572  te("    def p_er
+000066a0: 726f 7228 7365 6c66 2c20 7029 3a5c 6e22  ror(self, p):\n"
+000066b0: 290a 2020 2020 2020 2020 2020 2020 662e  ).            f.
+000066c0: 7772 6974 6528 2220 2020 2020 2020 2070  write("        p
+000066d0: 6173 735c 6e5c 6e22 290a 0a0a 6465 6620  ass\n\n")...def 
+000066e0: 5f70 6172 7365 2873 656c 662c 2069 6e70  _parse(self, inp
+000066f0: 7574 3d4e 6f6e 652c 206c 6578 6572 3d4e  ut=None, lexer=N
+00006700: 6f6e 652c 2064 6562 7567 3d4e 6f6e 652c  one, debug=None,
+00006710: 2074 7261 636b 696e 673d 302c 2074 6f6b   tracking=0, tok
+00006720: 656e 6675 6e63 3d4e 6f6e 6529 3a0a 2020  enfunc=None):.  
+00006730: 2020 7365 6c66 2e6c 6f6f 6b61 6865 6164    self.lookahead
+00006740: 203d 204e 6f6e 6520 2023 2043 7572 7265   = None  # Curre
+00006750: 6e74 206c 6f6f 6b61 6865 6164 2073 796d  nt lookahead sym
+00006760: 626f 6c0a 2020 2020 6163 7469 6f6e 7320  bol.    actions 
+00006770: 3d20 7365 6c66 2e61 6374 696f 6e20 2023  = self.action  #
+00006780: 204c 6f63 616c 2072 6566 6572 656e 6365   Local reference
+00006790: 2074 6f20 6163 7469 6f6e 2074 6162 6c65   to action table
+000067a0: 2028 746f 2061 766f 6964 206c 6f6f 6b75   (to avoid looku
+000067b0: 7020 6f6e 2073 656c 662e 290a 2020 2020  p on self.).    
+000067c0: 676f 746f 203d 2073 656c 662e 676f 746f  goto = self.goto
+000067d0: 2020 2320 4c6f 6361 6c20 7265 6665 7265    # Local refere
+000067e0: 6e63 6520 746f 2067 6f74 6f20 7461 626c  nce to goto tabl
+000067f0: 6520 2874 6f20 6176 6f69 6420 6c6f 6f6b  e (to avoid look
+00006800: 7570 206f 6e20 7365 6c66 2e29 0a20 2020  up on self.).   
+00006810: 2070 726f 6420 3d20 280a 2020 2020 2020   prod = (.      
+00006820: 2020 7365 6c66 2e70 726f 6475 6374 696f    self.productio
+00006830: 6e73 0a20 2020 2029 2020 2320 4c6f 6361  ns.    )  # Loca
+00006840: 6c20 7265 6665 7265 6e63 6520 746f 2070  l reference to p
+00006850: 726f 6475 6374 696f 6e20 6c69 7374 2028  roduction list (
+00006860: 746f 2061 766f 6964 206c 6f6f 6b75 7020  to avoid lookup 
+00006870: 6f6e 2073 656c 662e 290a 2020 2020 7073  on self.).    ps
+00006880: 6c69 6365 203d 2059 6163 6350 726f 6475  lice = YaccProdu
+00006890: 6374 696f 6e28 4e6f 6e65 2920 2023 2050  ction(None)  # P
+000068a0: 726f 6475 6374 696f 6e20 6f62 6a65 6374  roduction object
+000068b0: 2070 6173 7365 6420 746f 2067 7261 6d6d   passed to gramm
+000068c0: 6172 2072 756c 6573 0a20 2020 2065 7272  ar rules.    err
+000068d0: 6f72 636f 756e 7420 3d20 3020 2023 2055  orcount = 0  # U
+000068e0: 7365 6420 6475 7269 6e67 2065 7272 6f72  sed during error
+000068f0: 2072 6563 6f76 6572 790a 0a20 2020 2023   recovery..    #
+00006900: 202d 2d21 2044 4542 5547 0a20 2020 2023   --! DEBUG.    #
+00006910: 2064 6562 7567 2e69 6e66 6f28 2250 4c59   debug.info("PLY
+00006920: 3a20 5041 5253 4520 4445 4255 4720 5354  : PARSE DEBUG ST
+00006930: 4152 5422 290a 2020 2020 2320 2d2d 2120  ART").    # --! 
+00006940: 4445 4255 470a 0a20 2020 2023 2053 6574  DEBUG..    # Set
+00006950: 2075 7020 7468 6520 6c65 7865 7220 616e   up the lexer an
+00006960: 6420 7061 7273 6572 206f 626a 6563 7473  d parser objects
+00006970: 206f 6e20 7073 6c69 6365 0a20 2020 2070   on pslice.    p
+00006980: 736c 6963 652e 6c65 7865 7220 3d20 6c65  slice.lexer = le
+00006990: 7865 720a 2020 2020 7073 6c69 6365 2e70  xer.    pslice.p
+000069a0: 6172 7365 7220 3d20 7365 6c66 0a0a 2020  arser = self..  
+000069b0: 2020 2320 4966 2069 6e70 7574 2077 6173    # If input was
+000069c0: 2073 7570 706c 6965 642c 2070 6173 7320   supplied, pass 
+000069d0: 746f 206c 6578 6572 0a20 2020 2069 6620  to lexer.    if 
+000069e0: 696e 7075 7420 6973 206e 6f74 204e 6f6e  input is not Non
+000069f0: 653a 0a20 2020 2020 2020 206c 6578 6572  e:.        lexer
+00006a00: 2e69 6e70 7574 2869 6e70 7574 290a 0a20  .input(input).. 
+00006a10: 2020 2069 6620 746f 6b65 6e66 756e 6320     if tokenfunc 
+00006a20: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+00006a30: 2023 2054 6f6b 656e 697a 6520 6675 6e63   # Tokenize func
+00006a40: 7469 6f6e 0a20 2020 2020 2020 2067 6574  tion.        get
+00006a50: 5f74 6f6b 656e 203d 206c 6578 6572 2e74  _token = lexer.t
+00006a60: 6f6b 656e 0a20 2020 2065 6c73 653a 0a20  oken.    else:. 
+00006a70: 2020 2020 2020 2067 6574 5f74 6f6b 656e         get_token
+00006a80: 203d 2074 6f6b 656e 6675 6e63 0a0a 2020   = tokenfunc..  
+00006a90: 2020 2320 5365 7420 7570 2074 6865 2073    # Set up the s
+00006aa0: 7461 7465 2061 6e64 2073 796d 626f 6c20  tate and symbol 
+00006ab0: 7374 6163 6b73 0a0a 2020 2020 6c6f 6f6b  stacks..    look
+00006ac0: 6168 6561 6473 7461 636b 203d 205b 5d20  aheadstack = [] 
+00006ad0: 2023 2053 7461 636b 206f 6620 6c6f 6f6b   # Stack of look
+00006ae0: 6168 6561 6420 746f 6b65 6e73 0a20 2020  ahead tokens.   
+00006af0: 2073 656c 662e 6c6f 6f6b 6168 6561 6473   self.lookaheads
+00006b00: 7461 636b 203d 206c 6f6f 6b61 6865 6164  tack = lookahead
+00006b10: 7374 6163 6b0a 2020 2020 7374 6174 6573  stack.    states
+00006b20: 7461 636b 203d 205b 5d20 2023 2053 7461  tack = []  # Sta
+00006b30: 636b 206f 6620 7061 7273 696e 6720 7374  ck of parsing st
+00006b40: 6174 6573 0a20 2020 2073 656c 662e 7374  ates.    self.st
+00006b50: 6174 6573 7461 636b 203d 2073 7461 7465  atestack = state
+00006b60: 7374 6163 6b0a 2020 2020 7379 6d73 7461  stack.    symsta
+00006b70: 636b 203d 205b 5d20 2023 2053 7461 636b  ck = []  # Stack
+00006b80: 206f 6620 6772 616d 6d61 7220 7379 6d62   of grammar symb
+00006b90: 6f6c 730a 2020 2020 7365 6c66 2e73 796d  ols.    self.sym
+00006ba0: 7374 6163 6b20 3d20 7379 6d73 7461 636b  stack = symstack
+00006bb0: 0a0a 2020 2020 7073 6c69 6365 2e73 7461  ..    pslice.sta
+00006bc0: 636b 203d 2073 796d 7374 6163 6b20 2023  ck = symstack  #
+00006bd0: 2050 7574 2069 6e20 7468 6520 7072 6f64   Put in the prod
+00006be0: 7563 7469 6f6e 0a20 2020 2065 7272 746f  uction.    errto
+00006bf0: 6b65 6e20 3d20 4e6f 6e65 2020 2320 4572  ken = None  # Er
+00006c00: 7220 746f 6b65 6e0a 0a20 2020 2023 2054  r token..    # T
+00006c10: 6865 2073 7461 7274 2073 7461 7465 2069  he start state i
+00006c20: 7320 6173 7375 6d65 6420 746f 2062 6520  s assumed to be 
+00006c30: 2830 2c24 656e 6429 0a0a 2020 2020 7374  (0,$end)..    st
+00006c40: 6174 6573 7461 636b 2e61 7070 656e 6428  atestack.append(
+00006c50: 3029 0a20 2020 2073 796d 203d 2059 6163  0).    sym = Yac
+00006c60: 6353 796d 626f 6c28 290a 2020 2020 7379  cSymbol().    sy
+00006c70: 6d2e 7479 7065 203d 2022 2465 6e64 220a  m.type = "$end".
+00006c80: 2020 2020 7379 6d73 7461 636b 2e61 7070      symstack.app
+00006c90: 656e 6428 7379 6d29 0a20 2020 2073 7461  end(sym).    sta
+00006ca0: 7465 203d 2030 0a20 2020 2077 6869 6c65  te = 0.    while
+00006cb0: 2031 3a0a 2020 2020 2020 2020 2320 4765   1:.        # Ge
+00006cc0: 7420 7468 6520 6e65 7874 2073 796d 626f  t the next symbo
+00006cd0: 6c20 6f6e 2074 6865 2069 6e70 7574 2e20  l on the input. 
+00006ce0: 2049 6620 6120 6c6f 6f6b 6168 6561 6420   If a lookahead 
+00006cf0: 7379 6d62 6f6c 0a20 2020 2020 2020 2023  symbol.        #
+00006d00: 2069 7320 616c 7265 6164 7920 7365 742c   is already set,
+00006d10: 2077 6520 6a75 7374 2075 7365 2074 6861   we just use tha
+00006d20: 742e 204f 7468 6572 7769 7365 2c20 7765  t. Otherwise, we
+00006d30: 276c 6c20 7075 6c6c 0a20 2020 2020 2020  'll pull.       
+00006d40: 2023 2074 6865 206e 6578 7420 746f 6b65   # the next toke
+00006d50: 6e20 6f66 6620 6f66 2074 6865 206c 6f6f  n off of the loo
+00006d60: 6b61 6865 6164 7374 6163 6b20 6f72 2066  kaheadstack or f
+00006d70: 726f 6d20 7468 6520 6c65 7865 720a 0a20  rom the lexer.. 
+00006d80: 2020 2020 2020 2023 202d 2d21 2044 4542         # --! DEB
+00006d90: 5547 0a20 2020 2020 2020 2023 2064 6562  UG.        # deb
+00006da0: 7567 2e64 6562 7567 2827 2729 0a20 2020  ug.debug('').   
+00006db0: 2020 2020 2023 2064 6562 7567 2e64 6562       # debug.deb
+00006dc0: 7567 2827 5374 6174 6520 203a 2025 7327  ug('State  : %s'
+00006dd0: 2c20 7374 6174 6529 0a20 2020 2020 2020  , state).       
+00006de0: 2023 202d 2d21 2044 4542 5547 0a0a 2020   # --! DEBUG..  
+00006df0: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
+00006e00: 662e 6c6f 6f6b 6168 6561 643a 0a20 2020  f.lookahead:.   
+00006e10: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00006e20: 7365 6c66 2e6c 6f6f 6b61 6865 6164 7374  self.lookaheadst
+00006e30: 6163 6b3a 0a20 2020 2020 2020 2020 2020  ack:.           
+00006e40: 2020 2020 2073 656c 662e 6c6f 6f6b 6168       self.lookah
+00006e50: 6561 6420 3d20 6765 745f 746f 6b65 6e28  ead = get_token(
+00006e60: 2920 2023 2047 6574 2074 6865 206e 6578  )  # Get the nex
+00006e70: 7420 746f 6b65 6e0a 2020 2020 2020 2020  t token.        
+00006e80: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00006e90: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+00006ea0: 6f6f 6b61 6865 6164 203d 2073 656c 662e  ookahead = self.
+00006eb0: 6c6f 6f6b 6168 6561 6473 7461 636b 2e70  lookaheadstack.p
+00006ec0: 6f70 2829 0a20 2020 2020 2020 2020 2020  op().           
+00006ed0: 2069 6620 6e6f 7420 7365 6c66 2e6c 6f6f   if not self.loo
+00006ee0: 6b61 6865 6164 3a0a 2020 2020 2020 2020  kahead:.        
+00006ef0: 2020 2020 2020 2020 7365 6c66 2e6c 6f6f          self.loo
+00006f00: 6b61 6865 6164 203d 2059 6163 6353 796d  kahead = YaccSym
+00006f10: 626f 6c28 290a 2020 2020 2020 2020 2020  bol().          
+00006f20: 2020 2020 2020 7365 6c66 2e6c 6f6f 6b61        self.looka
+00006f30: 6865 6164 2e74 7970 6520 3d20 2224 656e  head.type = "$en
+00006f40: 6422 0a0a 2020 2020 2020 2020 2320 2d2d  d"..        # --
+00006f50: 2120 4445 4255 470a 2020 2020 2020 2020  ! DEBUG.        
+00006f60: 2320 6465 6275 672e 6465 6275 6728 2753  # debug.debug('S
+00006f70: 7461 636b 2020 3a20 2573 272c 0a20 2020  tack  : %s',.   
+00006f80: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00006f90: 2020 2028 2225 7320 2e20 2573 2220 2520     ("%s . %s" % 
+00006fa0: 2822 2022 2e6a 6f69 6e28 5b78 782e 7479  (" ".join([xx.ty
+00006fb0: 7065 2066 6f72 2078 7820 696e 2073 796d  pe for xx in sym
+00006fc0: 7374 6163 6b5d 5b31 3a5d 292c 2073 7472  stack][1:]), str
+00006fd0: 2873 656c 662e 6c6f 6f6b 6168 6561 6429  (self.lookahead)
+00006fe0: 2929 2e6c 7374 7269 7028 2929 0a20 2020  )).lstrip()).   
+00006ff0: 2020 2020 2023 202d 2d21 2044 4542 5547       # --! DEBUG
+00007000: 0a0a 2020 2020 2020 2020 2320 4368 6563  ..        # Chec
+00007010: 6b20 7468 6520 6163 7469 6f6e 2074 6162  k the action tab
+00007020: 6c65 0a20 2020 2020 2020 206c 7479 7065  le.        ltype
+00007030: 203d 2073 656c 662e 6c6f 6f6b 6168 6561   = self.lookahea
+00007040: 642e 7479 7065 0a20 2020 2020 2020 2074  d.type.        t
+00007050: 203d 2061 6374 696f 6e73 5b73 7461 7465   = actions[state
+00007060: 5d2e 6765 7428 6c74 7970 6529 0a0a 2020  ].get(ltype)..  
+00007070: 2020 2020 2020 2320 5468 6973 2069 7320        # This is 
+00007080: 6120 6261 6420 6861 636b 2074 6f20 6465  a bad hack to de
+00007090: 616c 2077 6974 6820 4c69 6c79 506f 6e64  al with LilyPond
+000070a0: 2773 2062 6163 6b75 702f 7265 7061 7273  's backup/repars
+000070b0: 6520 7265 6769 6d65 0a20 2020 2020 2020  e regime.       
+000070c0: 2069 6620 7420 6973 204e 6f6e 653a 0a20   if t is None:. 
+000070d0: 2020 2020 2020 2020 2020 2061 203d 2073             a = s
+000070e0: 6574 2861 6374 696f 6e73 5b73 7461 7465  et(actions[state
+000070f0: 5d2e 7661 6c75 6573 2829 290a 2020 2020  ].values()).    
+00007100: 2020 2020 2020 2020 6966 2031 203d 3d20          if 1 == 
+00007110: 6c65 6e28 6129 3a0a 2020 2020 2020 2020  len(a):.        
+00007120: 2020 2020 2020 2020 7420 3d20 6c69 7374          t = list
+00007130: 2861 295b 305d 0a0a 2020 2020 2020 2020  (a)[0]..        
+00007140: 6966 2074 2069 7320 6e6f 7420 4e6f 6e65  if t is not None
+00007150: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00007160: 2074 203e 2030 3a0a 2020 2020 2020 2020   t > 0:.        
+00007170: 2020 2020 2020 2020 2320 7368 6966 7420          # shift 
+00007180: 6120 7379 6d62 6f6c 206f 6e20 7468 6520  a symbol on the 
+00007190: 7374 6163 6b0a 2020 2020 2020 2020 2020  stack.          
+000071a0: 2020 2020 2020 7374 6174 6573 7461 636b        statestack
+000071b0: 2e61 7070 656e 6428 7429 0a20 2020 2020  .append(t).     
+000071c0: 2020 2020 2020 2020 2020 2073 7461 7465             state
+000071d0: 203d 2074 0a0a 2020 2020 2020 2020 2020   = t..          
+000071e0: 2020 2020 2020 2320 2d2d 2120 4445 4255        # --! DEBU
+000071f0: 470a 2020 2020 2020 2020 2020 2020 2020  G.              
+00007200: 2020 2320 6465 6275 672e 6465 6275 6728    # debug.debug(
+00007210: 2241 6374 696f 6e20 3a20 5368 6966 7420  "Action : Shift 
+00007220: 616e 6420 676f 746f 2073 7461 7465 2025  and goto state %
+00007230: 7322 2c20 7429 0a20 2020 2020 2020 2020  s", t).         
+00007240: 2020 2020 2020 2023 202d 2d21 2044 4542         # --! DEB
+00007250: 5547 0a0a 2020 2020 2020 2020 2020 2020  UG..            
+00007260: 2020 2020 7379 6d73 7461 636b 2e61 7070      symstack.app
+00007270: 656e 6428 7365 6c66 2e6c 6f6f 6b61 6865  end(self.lookahe
+00007280: 6164 290a 2020 2020 2020 2020 2020 2020  ad).            
+00007290: 2020 2020 7365 6c66 2e6c 6f6f 6b61 6865      self.lookahe
+000072a0: 6164 203d 204e 6f6e 650a 0a20 2020 2020  ad = None..     
+000072b0: 2020 2020 2020 2020 2020 2023 2044 6563             # Dec
+000072c0: 7265 6173 6520 6572 726f 7220 636f 756e  rease error coun
+000072d0: 7420 6f6e 2073 7563 6365 7373 6675 6c20  t on successful 
+000072e0: 7368 6966 740a 2020 2020 2020 2020 2020  shift.          
+000072f0: 2020 2020 2020 6966 2065 7272 6f72 636f        if errorco
+00007300: 756e 743a 0a20 2020 2020 2020 2020 2020  unt:.           
+00007310: 2020 2020 2020 2020 2065 7272 6f72 636f           errorco
+00007320: 756e 7420 2d3d 2031 0a20 2020 2020 2020  unt -= 1.       
+00007330: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00007340: 650a 0a20 2020 2020 2020 2020 2020 2069  e..            i
+00007350: 6620 7420 3c20 303a 0a20 2020 2020 2020  f t < 0:.       
+00007360: 2020 2020 2020 2020 2023 2072 6564 7563           # reduc
+00007370: 6520 6120 7379 6d62 6f6c 206f 6e20 7468  e a symbol on th
+00007380: 6520 7374 6163 6b2c 2065 6d69 7420 6120  e stack, emit a 
+00007390: 7072 6f64 7563 7469 6f6e 0a20 2020 2020  production.     
+000073a0: 2020 2020 2020 2020 2020 2070 203d 2070             p = p
+000073b0: 726f 645b 2d74 5d0a 2020 2020 2020 2020  rod[-t].        
+000073c0: 2020 2020 2020 2020 706e 616d 6520 3d20          pname = 
+000073d0: 702e 6e61 6d65 0a20 2020 2020 2020 2020  p.name.         
+000073e0: 2020 2020 2020 2070 6c65 6e20 3d20 702e         plen = p.
+000073f0: 6c65 6e0a 0a20 2020 2020 2020 2020 2020  len..           
+00007400: 2020 2020 2023 2047 6574 2070 726f 6475       # Get produ
+00007410: 6374 696f 6e20 6675 6e63 7469 6f6e 0a20  ction function. 
+00007420: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00007430: 796d 203d 2059 6163 6353 796d 626f 6c28  ym = YaccSymbol(
+00007440: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00007450: 2020 7379 6d2e 7479 7065 203d 2070 6e61    sym.type = pna
+00007460: 6d65 2020 2320 5072 6f64 7563 7469 6f6e  me  # Production
+00007470: 206e 616d 650a 2020 2020 2020 2020 2020   name.          
+00007480: 2020 2020 2020 7379 6d2e 7661 6c75 6520        sym.value 
+00007490: 3d20 4e6f 6e65 0a0a 2020 2020 2020 2020  = None..        
+000074a0: 2020 2020 2020 2020 2320 2d2d 2120 4445          # --! DE
+000074b0: 4255 470a 2020 2020 2020 2020 2020 2020  BUG.            
+000074c0: 2020 2020 2320 6966 2070 6c65 6e3a 0a20      # if plen:. 
+000074d0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000074e0: 2020 2020 2064 6562 7567 2e69 6e66 6f28       debug.info(
+000074f0: 2241 6374 696f 6e20 3a20 5265 6475 6365  "Action : Reduce
+00007500: 2072 756c 6520 5b25 735d 2077 6974 6820   rule [%s] with 
+00007510: 2573 2061 6e64 2067 6f74 6f20 7374 6174  %s and goto stat
+00007520: 6520 2564 222c 2070 2e73 7472 2c20 225b  e %d", p.str, "[
+00007530: 222b 222c 222e 6a6f 696e 285b 666f 726d  "+",".join([form
+00007540: 6174 5f73 7461 636b 5f65 6e74 7279 285f  at_stack_entry(_
+00007550: 762e 7661 6c75 6529 2066 6f72 205f 7620  v.value) for _v 
+00007560: 696e 2073 796d 7374 6163 6b5b 2d70 6c65  in symstack[-ple
+00007570: 6e3a 5d5d 292b 225d 222c 2d74 290a 2020  n:]])+"]",-t).  
+00007580: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00007590: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000075a0: 2020 2020 2020 2320 2020 2020 6465 6275        #     debu
+000075b0: 672e 696e 666f 2822 4163 7469 6f6e 203a  g.info("Action :
+000075c0: 2052 6564 7563 6520 7275 6c65 205b 2573   Reduce rule [%s
+000075d0: 5d20 7769 7468 2025 7320 616e 6420 676f  ] with %s and go
+000075e0: 746f 2073 7461 7465 2025 6422 2c20 702e  to state %d", p.
+000075f0: 7374 722c 205b 5d2c 2d74 290a 2020 2020  str, [],-t).    
+00007600: 2020 2020 2020 2020 2020 2020 230a 2020              #.  
+00007610: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00007620: 2d2d 2120 4445 4255 470a 0a20 2020 2020  --! DEBUG..     
+00007630: 2020 2020 2020 2020 2020 2069 6620 706c             if pl
+00007640: 656e 3a0a 2020 2020 2020 2020 2020 2020  en:.            
+00007650: 2020 2020 2020 2020 7461 7267 203d 2073          targ = s
+00007660: 796d 7374 6163 6b5b 2d70 6c65 6e20 2d20  ymstack[-plen - 
+00007670: 3120 3a5d 0a20 2020 2020 2020 2020 2020  1 :].           
+00007680: 2020 2020 2020 2020 2074 6172 675b 305d           targ[0]
+00007690: 203d 2073 796d 0a0a 2020 2020 2020 2020   = sym..        
+000076a0: 2020 2020 2020 2020 2020 2020 2320 2d2d              # --
+000076b0: 2120 5452 4143 4b49 4e47 0a20 2020 2020  ! TRACKING.     
+000076c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000076d0: 6620 7472 6163 6b69 6e67 3a0a 2020 2020  f tracking:.    
+000076e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000076f0: 2020 2020 7431 203d 2074 6172 675b 315d      t1 = targ[1]
+00007700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007710: 2020 2020 2020 2020 2073 796d 2e6c 696e           sym.lin
+00007720: 656e 6f20 3d20 7431 2e6c 696e 656e 6f0a  eno = t1.lineno.
 00007730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007740: 2020 7379 6d2e 6c65 7870 6f73 203d 2074    sym.lexpos = t
-00007750: 312e 6c65 7870 6f73 0a20 2020 2020 2020  1.lexpos.       
+00007740: 2020 2020 2020 2020 7379 6d2e 6c65 7870          sym.lexp
+00007750: 6f73 203d 2074 312e 6c65 7870 6f73 0a20  os = t1.lexpos. 
 00007760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007770: 2074 3120 3d20 7461 7267 5b2d 315d 0a20   t1 = targ[-1]. 
-00007780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007790: 2020 2020 2020 2073 796d 2e65 6e64 6c69         sym.endli
-000077a0: 6e65 6e6f 203d 2067 6574 6174 7472 2874  neno = getattr(t
-000077b0: 312c 2022 656e 646c 696e 656e 6f22 2c20  1, "endlineno", 
-000077c0: 7431 2e6c 696e 656e 6f29 0a20 2020 2020  t1.lineno).     
-000077d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000077e0: 2020 2073 796d 2e65 6e64 6c65 7870 6f73     sym.endlexpos
-000077f0: 203d 2067 6574 6174 7472 2874 312c 2022   = getattr(t1, "
-00007800: 656e 646c 6578 706f 7322 2c20 7431 2e6c  endlexpos", t1.l
-00007810: 6578 706f 7329 0a0a 2020 2020 2020 2020  expos)..        
-00007820: 2020 2020 2020 2020 2020 2020 2320 2d2d              # --
-00007830: 2120 5452 4143 4b49 4e47 0a0a 2020 2020  ! TRACKING..    
-00007840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007850: 2320 2121 2121 2121 2121 2121 2121 2121  # !!!!!!!!!!!!!!
+00007770: 2020 2020 2020 2074 3120 3d20 7461 7267         t1 = targ
+00007780: 5b2d 315d 0a20 2020 2020 2020 2020 2020  [-1].           
+00007790: 2020 2020 2020 2020 2020 2020 2073 796d               sym
+000077a0: 2e65 6e64 6c69 6e65 6e6f 203d 2067 6574  .endlineno = get
+000077b0: 6174 7472 2874 312c 2022 656e 646c 696e  attr(t1, "endlin
+000077c0: 656e 6f22 2c20 7431 2e6c 696e 656e 6f29  eno", t1.lineno)
+000077d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000077e0: 2020 2020 2020 2020 2073 796d 2e65 6e64           sym.end
+000077f0: 6c65 7870 6f73 203d 2067 6574 6174 7472  lexpos = getattr
+00007800: 2874 312c 2022 656e 646c 6578 706f 7322  (t1, "endlexpos"
+00007810: 2c20 7431 2e6c 6578 706f 7329 0a0a 2020  , t1.lexpos)..  
+00007820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007830: 2020 2320 2d2d 2120 5452 4143 4b49 4e47    # --! TRACKING
+00007840: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007850: 2020 2020 2020 2320 2121 2121 2121 2121        # !!!!!!!!
 00007860: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
 00007870: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
-00007880: 2121 2121 0a20 2020 2020 2020 2020 2020  !!!!.           
-00007890: 2020 2020 2020 2020 2023 2054 6865 2063           # The c
-000078a0: 6f64 6520 656e 636c 6f73 6564 2069 6e20  ode enclosed in 
-000078b0: 7468 6973 2073 6563 7469 6f6e 2069 7320  this section is 
-000078c0: 6475 706c 6963 6174 6564 0a20 2020 2020  duplicated.     
-000078d0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000078e0: 2062 656c 6f77 2061 7320 6120 7065 7266   below as a perf
-000078f0: 6f72 6d61 6e63 6520 6f70 7469 6d69 7a61  ormance optimiza
-00007900: 7469 6f6e 2e20 204d 616b 6520 7375 7265  tion.  Make sure
-00007910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007920: 2020 2020 2023 2063 6861 6e67 6573 2067       # changes g
-00007930: 6574 206d 6164 6520 696e 2062 6f74 6820  et made in both 
-00007940: 6c6f 6361 7469 6f6e 732e 0a0a 2020 2020  locations...    
-00007950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007960: 7073 6c69 6365 2e73 6c69 6365 203d 2074  pslice.slice = t
-00007970: 6172 670a 0a20 2020 2020 2020 2020 2020  arg..           
-00007980: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
-00007990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000079a0: 2020 2020 2020 2320 4361 6c6c 2074 6865        # Call the
-000079b0: 2067 7261 6d6d 6172 2072 756c 6520 7769   grammar rule wi
-000079c0: 7468 206f 7572 2073 7065 6369 616c 2073  th our special s
-000079d0: 6c69 6365 206f 626a 6563 740a 2020 2020  lice object.    
-000079e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000079f0: 2020 2020 6465 6c20 7379 6d73 7461 636b      del symstack
-00007a00: 5b2d 706c 656e 3a5d 0a20 2020 2020 2020  [-plen:].       
+00007880: 2121 2121 2121 2121 2121 0a20 2020 2020  !!!!!!!!!!.     
+00007890: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000078a0: 2054 6865 2063 6f64 6520 656e 636c 6f73   The code enclos
+000078b0: 6564 2069 6e20 7468 6973 2073 6563 7469  ed in this secti
+000078c0: 6f6e 2069 7320 6475 706c 6963 6174 6564  on is duplicated
+000078d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000078e0: 2020 2020 2023 2062 656c 6f77 2061 7320       # below as 
+000078f0: 6120 7065 7266 6f72 6d61 6e63 6520 6f70  a performance op
+00007900: 7469 6d69 7a61 7469 6f6e 2e20 204d 616b  timization.  Mak
+00007910: 6520 7375 7265 0a20 2020 2020 2020 2020  e sure.         
+00007920: 2020 2020 2020 2020 2020 2023 2063 6861             # cha
+00007930: 6e67 6573 2067 6574 206d 6164 6520 696e  nges get made in
+00007940: 2062 6f74 6820 6c6f 6361 7469 6f6e 732e   both locations.
+00007950: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007960: 2020 2020 2020 7073 6c69 6365 2e73 6c69        pslice.sli
+00007970: 6365 203d 2074 6172 670a 0a20 2020 2020  ce = targ..     
+00007980: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00007990: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+000079a0: 2020 2020 2020 2020 2020 2020 2320 4361              # Ca
+000079b0: 6c6c 2074 6865 2067 7261 6d6d 6172 2072  ll the grammar r
+000079c0: 756c 6520 7769 7468 206f 7572 2073 7065  ule with our spe
+000079d0: 6369 616c 2073 6c69 6365 206f 626a 6563  cial slice objec
+000079e0: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+000079f0: 2020 2020 2020 2020 2020 6465 6c20 7379            del sy
+00007a00: 6d73 7461 636b 5b2d 706c 656e 3a5d 0a20  mstack[-plen:]. 
 00007a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007a20: 2064 656c 2073 7461 7465 7374 6163 6b5b   del statestack[
-00007a30: 2d70 6c65 6e3a 5d0a 2020 2020 2020 2020  -plen:].        
+00007a20: 2020 2020 2020 2064 656c 2073 7461 7465         del state
+00007a30: 7374 6163 6b5b 2d70 6c65 6e3a 5d0a 2020  stack[-plen:].  
 00007a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007a50: 702e 6361 6c6c 6162 6c65 2870 736c 6963  p.callable(pslic
-00007a60: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-00007a70: 2020 2020 2020 2020 2020 2023 202d 2d21             # --!
-00007a80: 2044 4542 5547 0a20 2020 2020 2020 2020   DEBUG.         
-00007a90: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00007aa0: 2064 6562 7567 2e69 6e66 6f28 2252 6573   debug.info("Res
-00007ab0: 756c 7420 3a20 2573 222c 2066 6f72 6d61  ult : %s", forma
-00007ac0: 745f 7265 7375 6c74 2870 736c 6963 655b  t_result(pslice[
-00007ad0: 305d 2929 0a20 2020 2020 2020 2020 2020  0])).           
-00007ae0: 2020 2020 2020 2020 2020 2020 2023 202d               # -
-00007af0: 2d21 2044 4542 5547 0a20 2020 2020 2020  -! DEBUG.       
+00007a50: 2020 2020 2020 702e 6361 6c6c 6162 6c65        p.callable
+00007a60: 2870 736c 6963 6529 0a20 2020 2020 2020  (pslice).       
+00007a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007a80: 2023 202d 2d21 2044 4542 5547 0a20 2020   # --! DEBUG.   
+00007a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007aa0: 2020 2020 2023 2064 6562 7567 2e69 6e66       # debug.inf
+00007ab0: 6f28 2252 6573 756c 7420 3a20 2573 222c  o("Result : %s",
+00007ac0: 2066 6f72 6d61 745f 7265 7375 6c74 2870   format_result(p
+00007ad0: 736c 6963 655b 305d 2929 0a20 2020 2020  slice[0])).     
+00007ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007af0: 2020 2023 202d 2d21 2044 4542 5547 0a20     # --! DEBUG. 
 00007b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b10: 2073 796d 7374 6163 6b2e 6170 7065 6e64   symstack.append
-00007b20: 2873 796d 290a 2020 2020 2020 2020 2020  (sym).          
-00007b30: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00007b40: 6174 6520 3d20 676f 746f 5b73 7461 7465  ate = goto[state
-00007b50: 7374 6163 6b5b 2d31 5d5d 5b70 6e61 6d65  stack[-1]][pname
-00007b60: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00007b70: 2020 2020 2020 2020 2020 7374 6174 6573            states
-00007b80: 7461 636b 2e61 7070 656e 6428 7374 6174  tack.append(stat
-00007b90: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-00007ba0: 2020 2020 2020 2065 7863 6570 7420 5379         except Sy
-00007bb0: 6e74 6178 4572 726f 723a 0a20 2020 2020  ntaxError:.     
-00007bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007bd0: 2020 2023 2049 6620 616e 2065 7272 6f72     # If an error
-00007be0: 2077 6173 2073 6574 2e20 456e 7465 7220   was set. Enter 
-00007bf0: 6572 726f 7220 7265 636f 7665 7279 2073  error recovery s
-00007c00: 7461 7465 0a20 2020 2020 2020 2020 2020  tate.           
-00007c10: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00007c20: 662e 6c6f 6f6b 6168 6561 6473 7461 636b  f.lookaheadstack
-00007c30: 2e61 7070 656e 6428 7365 6c66 2e6c 6f6f  .append(self.loo
-00007c40: 6b61 6865 6164 290a 2020 2020 2020 2020  kahead).        
+00007b10: 2020 2020 2020 2073 796d 7374 6163 6b2e         symstack.
+00007b20: 6170 7065 6e64 2873 796d 290a 2020 2020  append(sym).    
+00007b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007b40: 2020 2020 7374 6174 6520 3d20 676f 746f      state = goto
+00007b50: 5b73 7461 7465 7374 6163 6b5b 2d31 5d5d  [statestack[-1]]
+00007b60: 5b70 6e61 6d65 5d0a 2020 2020 2020 2020  [pname].        
+00007b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007b80: 7374 6174 6573 7461 636b 2e61 7070 656e  statestack.appen
+00007b90: 6428 7374 6174 6529 0a20 2020 2020 2020  d(state).       
+00007ba0: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+00007bb0: 6570 7420 5379 6e74 6178 4572 726f 723a  ept SyntaxError:
+00007bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007bd0: 2020 2020 2020 2020 2023 2049 6620 616e           # If an
+00007be0: 2065 7272 6f72 2077 6173 2073 6574 2e20   error was set. 
+00007bf0: 456e 7465 7220 6572 726f 7220 7265 636f  Enter error reco
+00007c00: 7665 7279 2073 7461 7465 0a20 2020 2020  very state.     
+00007c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007c20: 2020 2073 656c 662e 6c6f 6f6b 6168 6561     self.lookahea
+00007c30: 6473 7461 636b 2e61 7070 656e 6428 7365  dstack.append(se
+00007c40: 6c66 2e6c 6f6f 6b61 6865 6164 290a 2020  lf.lookahead).  
 00007c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c60: 7379 6d73 7461 636b 2e70 6f70 2829 0a20  symstack.pop(). 
-00007c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c80: 2020 2020 2020 2073 7461 7465 7374 6163         statestac
-00007c90: 6b2e 706f 7028 290a 2020 2020 2020 2020  k.pop().        
+00007c60: 2020 2020 2020 7379 6d73 7461 636b 2e70        symstack.p
+00007c70: 6f70 2829 0a20 2020 2020 2020 2020 2020  op().           
+00007c80: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+00007c90: 7465 7374 6163 6b2e 706f 7028 290a 2020  testack.pop().  
 00007ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007cb0: 7374 6174 6520 3d20 7374 6174 6573 7461  state = statesta
-00007cc0: 636b 5b2d 315d 0a20 2020 2020 2020 2020  ck[-1].         
-00007cd0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00007ce0: 796d 2e74 7970 6520 3d20 2265 7272 6f72  ym.type = "error
-00007cf0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-00007d00: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-00007d10: 6f6f 6b61 6865 6164 203d 2073 796d 0a20  ookahead = sym. 
-00007d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d30: 2020 2020 2020 2065 7272 6f72 636f 756e         errorcoun
-00007d40: 7420 3d20 6572 726f 725f 636f 756e 740a  t = error_count.
-00007d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d60: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
-00007d70: 6f72 6f6b 203d 2030 0a20 2020 2020 2020  orok = 0.       
-00007d80: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00007d90: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
-00007da0: 2020 2020 2020 2020 2020 2320 2121 2121            # !!!!
-00007db0: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
+00007cb0: 2020 2020 2020 7374 6174 6520 3d20 7374        state = st
+00007cc0: 6174 6573 7461 636b 5b2d 315d 0a20 2020  atestack[-1].   
+00007cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007ce0: 2020 2020 2073 796d 2e74 7970 6520 3d20       sym.type = 
+00007cf0: 2265 7272 6f72 220a 2020 2020 2020 2020  "error".        
+00007d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007d10: 7365 6c66 2e6c 6f6f 6b61 6865 6164 203d  self.lookahead =
+00007d20: 2073 796d 0a20 2020 2020 2020 2020 2020   sym.           
+00007d30: 2020 2020 2020 2020 2020 2020 2065 7272               err
+00007d40: 6f72 636f 756e 7420 3d20 6572 726f 725f  orcount = error_
+00007d50: 636f 756e 740a 2020 2020 2020 2020 2020  count.          
+00007d60: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00007d70: 6c66 2e65 7272 6f72 6f6b 203d 2030 0a20  lf.errorok = 0. 
+00007d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007d90: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
+00007da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007db0: 2320 2121 2121 2121 2121 2121 2121 2121  # !!!!!!!!!!!!!!
 00007dc0: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
-00007dd0: 2121 2121 2121 2121 2121 2121 2121 0a0a  !!!!!!!!!!!!!!..
-00007de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007df0: 656c 7365 3a0a 0a20 2020 2020 2020 2020  else:..         
-00007e00: 2020 2020 2020 2020 2020 2023 202d 2d21             # --!
-00007e10: 2054 5241 434b 494e 470a 2020 2020 2020   TRACKING.      
-00007e20: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00007e30: 2074 7261 636b 696e 673a 0a20 2020 2020   tracking:.     
-00007e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007e50: 2020 2073 796d 2e6c 696e 656e 6f20 3d20     sym.lineno = 
-00007e60: 6c65 7865 722e 6c69 6e65 6e6f 0a20 2020  lexer.lineno.   
-00007e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007e80: 2020 2020 2073 796d 2e6c 6578 706f 7320       sym.lexpos 
-00007e90: 3d20 6c65 7865 722e 6c65 7870 6f73 0a20  = lexer.lexpos. 
-00007ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007eb0: 2020 2023 202d 2d21 2054 5241 434b 494e     # --! TRACKIN
-00007ec0: 470a 0a20 2020 2020 2020 2020 2020 2020  G..             
-00007ed0: 2020 2020 2020 2074 6172 6720 3d20 5b73         targ = [s
-00007ee0: 796d 5d0a 0a20 2020 2020 2020 2020 2020  ym]..           
-00007ef0: 2020 2020 2020 2020 2023 2021 2121 2121           # !!!!!
-00007f00: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
+00007dd0: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
+00007de0: 2121 2121 0a0a 2020 2020 2020 2020 2020  !!!!..          
+00007df0: 2020 2020 2020 656c 7365 3a0a 0a20 2020        else:..   
+00007e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007e10: 2023 202d 2d21 2054 5241 434b 494e 470a   # --! TRACKING.
+00007e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007e30: 2020 2020 6966 2074 7261 636b 696e 673a      if tracking:
+00007e40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007e50: 2020 2020 2020 2020 2073 796d 2e6c 696e           sym.lin
+00007e60: 656e 6f20 3d20 6c65 7865 722e 6c69 6e65  eno = lexer.line
+00007e70: 6e6f 0a20 2020 2020 2020 2020 2020 2020  no.             
+00007e80: 2020 2020 2020 2020 2020 2073 796d 2e6c             sym.l
+00007e90: 6578 706f 7320 3d20 6c65 7865 722e 6c65  expos = lexer.le
+00007ea0: 7870 6f73 0a20 2020 2020 2020 2020 2020  xpos.           
+00007eb0: 2020 2020 2020 2020 2023 202d 2d21 2054           # --! T
+00007ec0: 5241 434b 494e 470a 0a20 2020 2020 2020  RACKING..       
+00007ed0: 2020 2020 2020 2020 2020 2020 2074 6172               tar
+00007ee0: 6720 3d20 5b73 796d 5d0a 0a20 2020 2020  g = [sym]..     
+00007ef0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00007f00: 2021 2121 2121 2121 2121 2121 2121 2121   !!!!!!!!!!!!!!!
 00007f10: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
-00007f20: 2121 2121 2121 2121 2121 2121 210a 2020  !!!!!!!!!!!!!.  
-00007f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007f40: 2020 2320 5468 6520 636f 6465 2065 6e63    # The code enc
-00007f50: 6c6f 7365 6420 696e 2074 6869 7320 7365  losed in this se
-00007f60: 6374 696f 6e20 6973 2064 7570 6c69 6361  ction is duplica
-00007f70: 7465 640a 2020 2020 2020 2020 2020 2020  ted.            
-00007f80: 2020 2020 2020 2020 2320 6162 6f76 6520          # above 
-00007f90: 6173 2061 2070 6572 666f 726d 616e 6365  as a performance
-00007fa0: 206f 7074 696d 697a 6174 696f 6e2e 2020   optimization.  
-00007fb0: 4d61 6b65 2073 7572 650a 2020 2020 2020  Make sure.      
-00007fc0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00007fd0: 6368 616e 6765 7320 6765 7420 6d61 6465  changes get made
-00007fe0: 2069 6e20 626f 7468 206c 6f63 6174 696f   in both locatio
-00007ff0: 6e73 2e0a 0a20 2020 2020 2020 2020 2020  ns...           
-00008000: 2020 2020 2020 2020 2070 736c 6963 652e           pslice.
-00008010: 736c 6963 6520 3d20 7461 7267 0a0a 2020  slice = targ..  
-00008020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008030: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-00008040: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00008050: 2043 616c 6c20 7468 6520 6772 616d 6d61   Call the gramma
-00008060: 7220 7275 6c65 2077 6974 6820 6f75 7220  r rule with our 
-00008070: 7370 6563 6961 6c20 736c 6963 6520 6f62  special slice ob
-00008080: 6a65 6374 0a20 2020 2020 2020 2020 2020  ject.           
-00008090: 2020 2020 2020 2020 2020 2020 2070 2e63               p.c
-000080a0: 616c 6c61 626c 6528 7073 6c69 6365 290a  allable(pslice).
-000080b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000080c0: 2020 2020 2020 2020 2320 2d2d 2120 4445          # --! DE
-000080d0: 4255 470a 2020 2020 2020 2020 2020 2020  BUG.            
-000080e0: 2020 2020 2020 2020 2020 2020 2320 6465              # de
-000080f0: 6275 672e 696e 666f 2822 5265 7375 6c74  bug.info("Result
-00008100: 203a 2025 7322 2c20 666f 726d 6174 5f72   : %s", format_r
-00008110: 6573 756c 7428 7073 6c69 6365 5b30 5d29  esult(pslice[0])
-00008120: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00008130: 2020 2020 2020 2020 2020 2320 2d2d 2120            # --! 
-00008140: 4445 4255 470a 2020 2020 2020 2020 2020  DEBUG.          
-00008150: 2020 2020 2020 2020 2020 2020 2020 7379                sy
-00008160: 6d73 7461 636b 2e61 7070 656e 6428 7379  mstack.append(sy
-00008170: 6d29 0a20 2020 2020 2020 2020 2020 2020  m).             
-00008180: 2020 2020 2020 2020 2020 2073 7461 7465             state
-00008190: 203d 2067 6f74 6f5b 7374 6174 6573 7461   = goto[statesta
-000081a0: 636b 5b2d 315d 5d5b 706e 616d 655d 0a20  ck[-1]][pname]. 
-000081b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000081c0: 2020 2020 2020 2073 7461 7465 7374 6163         statestac
-000081d0: 6b2e 6170 7065 6e64 2873 7461 7465 290a  k.append(state).
-000081e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000081f0: 2020 2020 6578 6365 7074 2053 796e 7461      except Synta
-00008200: 7845 7272 6f72 3a0a 2020 2020 2020 2020  xError:.        
+00007f20: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
+00007f30: 2121 210a 2020 2020 2020 2020 2020 2020  !!!.            
+00007f40: 2020 2020 2020 2020 2320 5468 6520 636f          # The co
+00007f50: 6465 2065 6e63 6c6f 7365 6420 696e 2074  de enclosed in t
+00007f60: 6869 7320 7365 6374 696f 6e20 6973 2064  his section is d
+00007f70: 7570 6c69 6361 7465 640a 2020 2020 2020  uplicated.      
+00007f80: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00007f90: 6162 6f76 6520 6173 2061 2070 6572 666f  above as a perfo
+00007fa0: 726d 616e 6365 206f 7074 696d 697a 6174  rmance optimizat
+00007fb0: 696f 6e2e 2020 4d61 6b65 2073 7572 650a  ion.  Make sure.
+00007fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007fd0: 2020 2020 2320 6368 616e 6765 7320 6765      # changes ge
+00007fe0: 7420 6d61 6465 2069 6e20 626f 7468 206c  t made in both l
+00007ff0: 6f63 6174 696f 6e73 2e0a 0a20 2020 2020  ocations...     
+00008000: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00008010: 736c 6963 652e 736c 6963 6520 3d20 7461  slice.slice = ta
+00008020: 7267 0a0a 2020 2020 2020 2020 2020 2020  rg..            
+00008030: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+00008040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008050: 2020 2020 2023 2043 616c 6c20 7468 6520       # Call the 
+00008060: 6772 616d 6d61 7220 7275 6c65 2077 6974  grammar rule wit
+00008070: 6820 6f75 7220 7370 6563 6961 6c20 736c  h our special sl
+00008080: 6963 6520 6f62 6a65 6374 0a20 2020 2020  ice object.     
+00008090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000080a0: 2020 2070 2e63 616c 6c61 626c 6528 7073     p.callable(ps
+000080b0: 6c69 6365 290a 2020 2020 2020 2020 2020  lice).          
+000080c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000080d0: 2d2d 2120 4445 4255 470a 2020 2020 2020  --! DEBUG.      
+000080e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000080f0: 2020 2320 6465 6275 672e 696e 666f 2822    # debug.info("
+00008100: 5265 7375 6c74 203a 2025 7322 2c20 666f  Result : %s", fo
+00008110: 726d 6174 5f72 6573 756c 7428 7073 6c69  rmat_result(psli
+00008120: 6365 5b30 5d29 290a 2020 2020 2020 2020  ce[0])).        
+00008130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008140: 2320 2d2d 2120 4445 4255 470a 2020 2020  # --! DEBUG.    
+00008150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008160: 2020 2020 7379 6d73 7461 636b 2e61 7070      symstack.app
+00008170: 656e 6428 7379 6d29 0a20 2020 2020 2020  end(sym).       
+00008180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008190: 2073 7461 7465 203d 2067 6f74 6f5b 7374   state = goto[st
+000081a0: 6174 6573 7461 636b 5b2d 315d 5d5b 706e  atestack[-1]][pn
+000081b0: 616d 655d 0a20 2020 2020 2020 2020 2020  ame].           
+000081c0: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+000081d0: 7465 7374 6163 6b2e 6170 7065 6e64 2873  testack.append(s
+000081e0: 7461 7465 290a 2020 2020 2020 2020 2020  tate).          
+000081f0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00008200: 2053 796e 7461 7845 7272 6f72 3a0a 2020   SyntaxError:.  
 00008210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008220: 2320 4966 2061 6e20 6572 726f 7220 7761  # If an error wa
-00008230: 7320 7365 742e 2045 6e74 6572 2065 7272  s set. Enter err
-00008240: 6f72 2072 6563 6f76 6572 7920 7374 6174  or recovery stat
-00008250: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00008260: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-00008270: 6f6f 6b61 6865 6164 7374 6163 6b2e 6170  ookaheadstack.ap
-00008280: 7065 6e64 2873 656c 662e 6c6f 6f6b 6168  pend(self.lookah
-00008290: 6561 6429 0a20 2020 2020 2020 2020 2020  ead).           
-000082a0: 2020 2020 2020 2020 2020 2020 2073 796d               sym
-000082b0: 7374 6163 6b2e 706f 7028 290a 2020 2020  stack.pop().    
-000082c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000082d0: 2020 2020 7374 6174 6573 7461 636b 2e70      statestack.p
-000082e0: 6f70 2829 0a20 2020 2020 2020 2020 2020  op().           
-000082f0: 2020 2020 2020 2020 2020 2020 2073 7461               sta
-00008300: 7465 203d 2073 7461 7465 7374 6163 6b5b  te = statestack[
-00008310: 2d31 5d0a 2020 2020 2020 2020 2020 2020  -1].            
-00008320: 2020 2020 2020 2020 2020 2020 7379 6d2e              sym.
-00008330: 7479 7065 203d 2022 6572 726f 7222 0a20  type = "error". 
-00008340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008350: 2020 2020 2020 2073 656c 662e 6c6f 6f6b         self.look
-00008360: 6168 6561 6420 3d20 7379 6d0a 2020 2020  ahead = sym.    
-00008370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008380: 2020 2020 6572 726f 7263 6f75 6e74 203d      errorcount =
-00008390: 2065 7272 6f72 5f63 6f75 6e74 0a20 2020   error_count.   
-000083a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000083b0: 2020 2020 2073 656c 662e 6572 726f 726f       self.erroro
-000083c0: 6b20 3d20 300a 2020 2020 2020 2020 2020  k = 0.          
-000083d0: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-000083e0: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-000083f0: 2020 2020 2020 2023 2021 2121 2121 2121         # !!!!!!!
+00008220: 2020 2020 2020 2320 4966 2061 6e20 6572        # If an er
+00008230: 726f 7220 7761 7320 7365 742e 2045 6e74  ror was set. Ent
+00008240: 6572 2065 7272 6f72 2072 6563 6f76 6572  er error recover
+00008250: 7920 7374 6174 650a 2020 2020 2020 2020  y state.        
+00008260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008270: 7365 6c66 2e6c 6f6f 6b61 6865 6164 7374  self.lookaheadst
+00008280: 6163 6b2e 6170 7065 6e64 2873 656c 662e  ack.append(self.
+00008290: 6c6f 6f6b 6168 6561 6429 0a20 2020 2020  lookahead).     
+000082a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000082b0: 2020 2073 796d 7374 6163 6b2e 706f 7028     symstack.pop(
+000082c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000082d0: 2020 2020 2020 2020 2020 7374 6174 6573            states
+000082e0: 7461 636b 2e70 6f70 2829 0a20 2020 2020  tack.pop().     
+000082f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008300: 2020 2073 7461 7465 203d 2073 7461 7465     state = state
+00008310: 7374 6163 6b5b 2d31 5d0a 2020 2020 2020  stack[-1].      
+00008320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008330: 2020 7379 6d2e 7479 7065 203d 2022 6572    sym.type = "er
+00008340: 726f 7222 0a20 2020 2020 2020 2020 2020  ror".           
+00008350: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00008360: 662e 6c6f 6f6b 6168 6561 6420 3d20 7379  f.lookahead = sy
+00008370: 6d0a 2020 2020 2020 2020 2020 2020 2020  m.              
+00008380: 2020 2020 2020 2020 2020 6572 726f 7263            errorc
+00008390: 6f75 6e74 203d 2065 7272 6f72 5f63 6f75  ount = error_cou
+000083a0: 6e74 0a20 2020 2020 2020 2020 2020 2020  nt.             
+000083b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000083c0: 6572 726f 726f 6b20 3d20 300a 2020 2020  errorok = 0.    
+000083d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000083e0: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
+000083f0: 2020 2020 2020 2020 2020 2020 2023 2021               # !
 00008400: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
 00008410: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
-00008420: 2121 2121 2121 2121 2121 210a 0a20 2020  !!!!!!!!!!!..   
-00008430: 2020 2020 2020 2020 2069 6620 7420 3d3d           if t ==
-00008440: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-00008450: 2020 2020 6e20 3d20 7379 6d73 7461 636b      n = symstack
-00008460: 5b2d 315d 0a20 2020 2020 2020 2020 2020  [-1].           
-00008470: 2020 2020 2072 6573 756c 7420 3d20 6765       result = ge
-00008480: 7461 7474 7228 6e2c 2022 7661 6c75 6522  tattr(n, "value"
-00008490: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-000084a0: 2020 2020 2020 2020 2320 2d2d 2120 4445          # --! DE
-000084b0: 4255 470a 2020 2020 2020 2020 2020 2020  BUG.            
-000084c0: 2020 2020 2320 6465 6275 672e 696e 666f      # debug.info
-000084d0: 2822 446f 6e65 2020 203a 2052 6574 7572  ("Done   : Retur
-000084e0: 6e69 6e67 2025 7322 2c20 666f 726d 6174  ning %s", format
-000084f0: 5f72 6573 756c 7428 7265 7375 6c74 2929  _result(result))
-00008500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008510: 2023 2064 6562 7567 2e69 6e66 6f28 2250   # debug.info("P
-00008520: 4c59 3a20 5041 5253 4520 4445 4255 4720  LY: PARSE DEBUG 
-00008530: 454e 4422 290a 2020 2020 2020 2020 2020  END").          
-00008540: 2020 2020 2020 2320 2d2d 2120 4445 4255        # --! DEBU
-00008550: 470a 2020 2020 2020 2020 2020 2020 2020  G.              
-00008560: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
-00008570: 0a20 2020 2020 2020 2069 6620 7420 6973  .        if t is
-00008580: 204e 6f6e 653a 0a0a 2020 2020 2020 2020   None:..        
-00008590: 2020 2020 2320 2d2d 2120 4445 4255 470a      # --! DEBUG.
-000085a0: 2020 2020 2020 2020 2020 2020 2320 6465              # de
-000085b0: 6275 672e 6572 726f 7228 2745 7272 6f72  bug.error('Error
-000085c0: 2020 3a20 2573 272c 0a20 2020 2020 2020    : %s',.       
-000085d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000085e0: 2020 2028 2225 7320 2e20 2573 2220 2520     ("%s . %s" % 
-000085f0: 2822 2022 2e6a 6f69 6e28 5b78 782e 7479  (" ".join([xx.ty
-00008600: 7065 2066 6f72 2078 7820 696e 2073 796d  pe for xx in sym
-00008610: 7374 6163 6b5d 5b31 3a5d 292c 2073 7472  stack][1:]), str
-00008620: 2873 656c 662e 6c6f 6f6b 6168 6561 6429  (self.lookahead)
-00008630: 2929 2e6c 7374 7269 7028 2929 0a20 2020  )).lstrip()).   
-00008640: 2020 2020 2020 2020 2023 202d 2d21 2044           # --! D
-00008650: 4542 5547 0a0a 2020 2020 2020 2020 2020  EBUG..          
-00008660: 2020 2320 5765 2068 6176 6520 736f 6d65    # We have some
-00008670: 206b 696e 6420 6f66 2070 6172 7369 6e67   kind of parsing
-00008680: 2065 7272 6f72 2068 6572 652e 2020 546f   error here.  To
-00008690: 2068 616e 646c 650a 2020 2020 2020 2020   handle.        
-000086a0: 2020 2020 2320 7468 6973 2c20 7765 2061      # this, we a
-000086b0: 7265 2067 6f69 6e67 2074 6f20 7075 7368  re going to push
-000086c0: 2074 6865 2063 7572 7265 6e74 2074 6f6b   the current tok
-000086d0: 656e 206f 6e74 6f0a 2020 2020 2020 2020  en onto.        
-000086e0: 2020 2020 2320 7468 6520 746f 6b65 6e73      # the tokens
-000086f0: 7461 636b 2061 6e64 2072 6570 6c61 6365  tack and replace
-00008700: 2069 7420 7769 7468 2061 6e20 2765 7272   it with an 'err
-00008710: 6f72 2720 746f 6b65 6e2e 0a20 2020 2020  or' token..     
-00008720: 2020 2020 2020 2023 2049 6620 7468 6572         # If ther
-00008730: 6520 6172 6520 616e 7920 7379 6e63 6872  e are any synchr
-00008740: 6f6e 697a 6174 696f 6e20 7275 6c65 732c  onization rules,
-00008750: 2074 6865 7920 6d61 790a 2020 2020 2020   they may.      
-00008760: 2020 2020 2020 2320 6361 7463 6820 6974        # catch it
-00008770: 2e0a 2020 2020 2020 2020 2020 2020 230a  ..            #.
-00008780: 2020 2020 2020 2020 2020 2020 2320 496e              # In
-00008790: 2061 6464 6974 696f 6e20 746f 2070 7573   addition to pus
-000087a0: 6869 6e67 2074 6865 2065 7272 6f72 2074  hing the error t
-000087b0: 6f6b 656e 2c20 7765 2063 616c 6c20 6361  oken, we call ca
-000087c0: 6c6c 0a20 2020 2020 2020 2020 2020 2023  ll.            #
-000087d0: 2074 6865 2075 7365 7220 6465 6669 6e65   the user define
-000087e0: 6420 705f 6572 726f 7228 2920 6675 6e63  d p_error() func
-000087f0: 7469 6f6e 2069 6620 7468 6973 2069 7320  tion if this is 
-00008800: 7468 650a 2020 2020 2020 2020 2020 2020  the.            
-00008810: 2320 6669 7273 7420 7379 6e74 6178 2065  # first syntax e
-00008820: 7272 6f72 2e20 2054 6869 7320 6675 6e63  rror.  This func
-00008830: 7469 6f6e 2069 7320 6f6e 6c79 2063 616c  tion is only cal
-00008840: 6c65 6420 6966 0a20 2020 2020 2020 2020  led if.         
-00008850: 2020 2023 2065 7272 6f72 636f 756e 7420     # errorcount 
-00008860: 3d3d 2030 2e0a 2020 2020 2020 2020 2020  == 0..          
-00008870: 2020 6966 2065 7272 6f72 636f 756e 7420    if errorcount 
-00008880: 3d3d 2030 206f 7220 7365 6c66 2e65 7272  == 0 or self.err
-00008890: 6f72 6f6b 3a0a 2020 2020 2020 2020 2020  orok:.          
-000088a0: 2020 2020 2020 6572 726f 7263 6f75 6e74        errorcount
-000088b0: 203d 2065 7272 6f72 5f63 6f75 6e74 0a20   = error_count. 
-000088c0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000088d0: 656c 662e 6572 726f 726f 6b20 3d20 300a  elf.errorok = 0.
-000088e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000088f0: 6572 7274 6f6b 656e 203d 2073 656c 662e  errtoken = self.
-00008900: 6c6f 6f6b 6168 6561 640a 2020 2020 2020  lookahead.      
-00008910: 2020 2020 2020 2020 2020 6966 2065 7272            if err
-00008920: 746f 6b65 6e2e 7479 7065 203d 3d20 2224  token.type == "$
-00008930: 656e 6422 3a0a 2020 2020 2020 2020 2020  end":.          
-00008940: 2020 2020 2020 2020 2020 6572 7274 6f6b            errtok
-00008950: 656e 203d 204e 6f6e 6520 2023 2045 6e64  en = None  # End
-00008960: 206f 6620 6669 6c65 210a 2020 2020 2020   of file!.      
-00008970: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00008980: 662e 6572 726f 7266 756e 633a 0a20 2020  f.errorfunc:.   
-00008990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000089a0: 2067 6c6f 6261 6c20 6572 726f 6b2c 2074   global errok, t
-000089b0: 6f6b 656e 2c20 7265 7374 6172 740a 2020  oken, restart.  
-000089c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000089d0: 2020 6572 726f 6b20 3d20 280a 2020 2020    errok = (.    
-000089e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000089f0: 2020 2020 7365 6c66 2e65 7272 6f6b 0a20      self.errok. 
-00008a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a10: 2020 2029 2020 2320 5365 7420 736f 6d65     )  # Set some
-00008a20: 2073 7065 6369 616c 2066 756e 6374 696f   special functio
-00008a30: 6e73 2061 7661 696c 6162 6c65 2069 6e20  ns available in 
-00008a40: 6572 726f 7220 7265 636f 7665 7279 0a20  error recovery. 
-00008a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a60: 2020 2074 6f6b 656e 203d 2067 6574 5f74     token = get_t
-00008a70: 6f6b 656e 0a20 2020 2020 2020 2020 2020  oken.           
-00008a80: 2020 2020 2020 2020 2072 6573 7461 7274           restart
-00008a90: 203d 2073 656c 662e 7265 7374 6172 740a   = self.restart.
-00008aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ab0: 2020 2020 6966 2065 7272 746f 6b65 6e20      if errtoken 
-00008ac0: 616e 6420 6e6f 7420 6861 7361 7474 7228  and not hasattr(
-00008ad0: 6572 7274 6f6b 656e 2c20 226c 6578 6572  errtoken, "lexer
-00008ae0: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
-00008af0: 2020 2020 2020 2020 2020 2020 6572 7274              errt
-00008b00: 6f6b 656e 2e6c 6578 6572 203d 206c 6578  oken.lexer = lex
-00008b10: 6572 0a20 2020 2020 2020 2020 2020 2020  er.             
-00008b20: 2020 2020 2020 2074 6f6b 203d 2073 656c         tok = sel
-00008b30: 662e 6572 726f 7266 756e 6328 6572 7274  f.errorfunc(errt
-00008b40: 6f6b 656e 290a 2020 2020 2020 2020 2020  oken).          
-00008b50: 2020 2020 2020 2020 2020 6465 6c20 6572            del er
-00008b60: 726f 6b2c 2074 6f6b 656e 2c20 7265 7374  rok, token, rest
-00008b70: 6172 7420 2023 2044 656c 6574 6520 7370  art  # Delete sp
-00008b80: 6563 6961 6c20 6675 6e63 7469 6f6e 730a  ecial functions.
-00008b90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008ba0: 2020 2020 2069 6620 7365 6c66 2e65 7272       if self.err
-00008bb0: 6f72 6f6b 3a0a 2020 2020 2020 2020 2020  orok:.          
-00008bc0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00008bd0: 5573 6572 206d 7573 7420 6861 7665 2064  User must have d
-00008be0: 6f6e 6520 736f 6d65 206b 696e 6420 6f66  one some kind of
-00008bf0: 2070 616e 6963 0a20 2020 2020 2020 2020   panic.         
-00008c00: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00008c10: 206d 6f64 6520 7265 636f 7665 7279 206f   mode recovery o
-00008c20: 6e20 7468 6569 7220 6f77 6e2e 2020 5468  n their own.  Th
-00008c30: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00008c40: 2020 2020 2020 2020 2020 2320 7265 7475            # retu
-00008c50: 726e 6564 2074 6f6b 656e 2069 7320 7468  rned token is th
-00008c60: 6520 6e65 7874 2073 656c 662e 6c6f 6f6b  e next self.look
-00008c70: 6168 6561 640a 2020 2020 2020 2020 2020  ahead.          
-00008c80: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00008c90: 6c66 2e6c 6f6f 6b61 6865 6164 203d 2074  lf.lookahead = t
-00008ca0: 6f6b 0a20 2020 2020 2020 2020 2020 2020  ok.             
-00008cb0: 2020 2020 2020 2020 2020 2065 7272 746f             errto
-00008cc0: 6b65 6e20 3d20 4e6f 6e65 0a20 2020 2020  ken = None.     
-00008cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ce0: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-00008cf0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00008d00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00008d10: 2020 2020 2020 6966 2065 7272 746f 6b65        if errtoke
-00008d20: 6e3a 0a20 2020 2020 2020 2020 2020 2020  n:.             
-00008d30: 2020 2020 2020 2020 2020 2069 6620 6861             if ha
-00008d40: 7361 7474 7228 6572 7274 6f6b 656e 2c20  sattr(errtoken, 
-00008d50: 226c 696e 656e 6f22 293a 0a20 2020 2020  "lineno"):.     
-00008d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d70: 2020 2020 2020 206c 696e 656e 6f20 3d20         lineno = 
-00008d80: 7365 6c66 2e6c 6f6f 6b61 6865 6164 2e6c  self.lookahead.l
-00008d90: 696e 656e 6f0a 2020 2020 2020 2020 2020  ineno.          
-00008da0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00008db0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00008420: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
+00008430: 210a 0a20 2020 2020 2020 2020 2020 2069  !..            i
+00008440: 6620 7420 3d3d 2030 3a0a 2020 2020 2020  f t == 0:.      
+00008450: 2020 2020 2020 2020 2020 6e20 3d20 7379            n = sy
+00008460: 6d73 7461 636b 5b2d 315d 0a20 2020 2020  mstack[-1].     
+00008470: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00008480: 7420 3d20 6765 7461 7474 7228 6e2c 2022  t = getattr(n, "
+00008490: 7661 6c75 6522 2c20 4e6f 6e65 290a 2020  value", None).  
+000084a0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000084b0: 2d2d 2120 4445 4255 470a 2020 2020 2020  --! DEBUG.      
+000084c0: 2020 2020 2020 2020 2020 2320 6465 6275            # debu
+000084d0: 672e 696e 666f 2822 446f 6e65 2020 203a  g.info("Done   :
+000084e0: 2052 6574 7572 6e69 6e67 2025 7322 2c20   Returning %s", 
+000084f0: 666f 726d 6174 5f72 6573 756c 7428 7265  format_result(re
+00008500: 7375 6c74 2929 0a20 2020 2020 2020 2020  sult)).         
+00008510: 2020 2020 2020 2023 2064 6562 7567 2e69         # debug.i
+00008520: 6e66 6f28 2250 4c59 3a20 5041 5253 4520  nfo("PLY: PARSE 
+00008530: 4445 4255 4720 454e 4422 290a 2020 2020  DEBUG END").    
+00008540: 2020 2020 2020 2020 2020 2020 2320 2d2d              # --
+00008550: 2120 4445 4255 470a 2020 2020 2020 2020  ! DEBUG.        
+00008560: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00008570: 6573 756c 740a 0a20 2020 2020 2020 2069  esult..        i
+00008580: 6620 7420 6973 204e 6f6e 653a 0a0a 2020  f t is None:..  
+00008590: 2020 2020 2020 2020 2020 2320 2d2d 2120            # --! 
+000085a0: 4445 4255 470a 2020 2020 2020 2020 2020  DEBUG.          
+000085b0: 2020 2320 6465 6275 672e 6572 726f 7228    # debug.error(
+000085c0: 2745 7272 6f72 2020 3a20 2573 272c 0a20  'Error  : %s',. 
+000085d0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+000085e0: 2020 2020 2020 2020 2028 2225 7320 2e20           ("%s . 
+000085f0: 2573 2220 2520 2822 2022 2e6a 6f69 6e28  %s" % (" ".join(
+00008600: 5b78 782e 7479 7065 2066 6f72 2078 7820  [xx.type for xx 
+00008610: 696e 2073 796d 7374 6163 6b5d 5b31 3a5d  in symstack][1:]
+00008620: 292c 2073 7472 2873 656c 662e 6c6f 6f6b  ), str(self.look
+00008630: 6168 6561 6429 2929 2e6c 7374 7269 7028  ahead))).lstrip(
+00008640: 2929 0a20 2020 2020 2020 2020 2020 2023  )).            #
+00008650: 202d 2d21 2044 4542 5547 0a0a 2020 2020   --! DEBUG..    
+00008660: 2020 2020 2020 2020 2320 5765 2068 6176          # We hav
+00008670: 6520 736f 6d65 206b 696e 6420 6f66 2070  e some kind of p
+00008680: 6172 7369 6e67 2065 7272 6f72 2068 6572  arsing error her
+00008690: 652e 2020 546f 2068 616e 646c 650a 2020  e.  To handle.  
+000086a0: 2020 2020 2020 2020 2020 2320 7468 6973            # this
+000086b0: 2c20 7765 2061 7265 2067 6f69 6e67 2074  , we are going t
+000086c0: 6f20 7075 7368 2074 6865 2063 7572 7265  o push the curre
+000086d0: 6e74 2074 6f6b 656e 206f 6e74 6f0a 2020  nt token onto.  
+000086e0: 2020 2020 2020 2020 2020 2320 7468 6520            # the 
+000086f0: 746f 6b65 6e73 7461 636b 2061 6e64 2072  tokenstack and r
+00008700: 6570 6c61 6365 2069 7420 7769 7468 2061  eplace it with a
+00008710: 6e20 2765 7272 6f72 2720 746f 6b65 6e2e  n 'error' token.
+00008720: 0a20 2020 2020 2020 2020 2020 2023 2049  .            # I
+00008730: 6620 7468 6572 6520 6172 6520 616e 7920  f there are any 
+00008740: 7379 6e63 6872 6f6e 697a 6174 696f 6e20  synchronization 
+00008750: 7275 6c65 732c 2074 6865 7920 6d61 790a  rules, they may.
+00008760: 2020 2020 2020 2020 2020 2020 2320 6361              # ca
+00008770: 7463 6820 6974 2e0a 2020 2020 2020 2020  tch it..        
+00008780: 2020 2020 230a 2020 2020 2020 2020 2020      #.          
+00008790: 2020 2320 496e 2061 6464 6974 696f 6e20    # In addition 
+000087a0: 746f 2070 7573 6869 6e67 2074 6865 2065  to pushing the e
+000087b0: 7272 6f72 2074 6f6b 656e 2c20 7765 2063  rror token, we c
+000087c0: 616c 6c20 6361 6c6c 0a20 2020 2020 2020  all call.       
+000087d0: 2020 2020 2023 2074 6865 2075 7365 7220       # the user 
+000087e0: 6465 6669 6e65 6420 705f 6572 726f 7228  defined p_error(
+000087f0: 2920 6675 6e63 7469 6f6e 2069 6620 7468  ) function if th
+00008800: 6973 2069 7320 7468 650a 2020 2020 2020  is is the.      
+00008810: 2020 2020 2020 2320 6669 7273 7420 7379        # first sy
+00008820: 6e74 6178 2065 7272 6f72 2e20 2054 6869  ntax error.  Thi
+00008830: 7320 6675 6e63 7469 6f6e 2069 7320 6f6e  s function is on
+00008840: 6c79 2063 616c 6c65 6420 6966 0a20 2020  ly called if.   
+00008850: 2020 2020 2020 2020 2023 2065 7272 6f72           # error
+00008860: 636f 756e 7420 3d3d 2030 2e0a 2020 2020  count == 0..    
+00008870: 2020 2020 2020 2020 6966 2065 7272 6f72          if error
+00008880: 636f 756e 7420 3d3d 2030 206f 7220 7365  count == 0 or se
+00008890: 6c66 2e65 7272 6f72 6f6b 3a0a 2020 2020  lf.errorok:.    
+000088a0: 2020 2020 2020 2020 2020 2020 6572 726f              erro
+000088b0: 7263 6f75 6e74 203d 2065 7272 6f72 5f63  rcount = error_c
+000088c0: 6f75 6e74 0a20 2020 2020 2020 2020 2020  ount.           
+000088d0: 2020 2020 2073 656c 662e 6572 726f 726f       self.erroro
+000088e0: 6b20 3d20 300a 2020 2020 2020 2020 2020  k = 0.          
+000088f0: 2020 2020 2020 6572 7274 6f6b 656e 203d        errtoken =
+00008900: 2073 656c 662e 6c6f 6f6b 6168 6561 640a   self.lookahead.
+00008910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008920: 6966 2065 7272 746f 6b65 6e2e 7479 7065  if errtoken.type
+00008930: 203d 3d20 2224 656e 6422 3a0a 2020 2020   == "$end":.    
+00008940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008950: 6572 7274 6f6b 656e 203d 204e 6f6e 6520  errtoken = None 
+00008960: 2023 2045 6e64 206f 6620 6669 6c65 210a   # End of file!.
+00008970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008980: 6966 2073 656c 662e 6572 726f 7266 756e  if self.errorfun
+00008990: 633a 0a20 2020 2020 2020 2020 2020 2020  c:.             
+000089a0: 2020 2020 2020 2067 6c6f 6261 6c20 6572         global er
+000089b0: 726f 6b2c 2074 6f6b 656e 2c20 7265 7374  rok, token, rest
+000089c0: 6172 740a 2020 2020 2020 2020 2020 2020  art.            
+000089d0: 2020 2020 2020 2020 6572 726f 6b20 3d20          errok = 
+000089e0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000089f0: 2020 2020 2020 2020 2020 7365 6c66 2e65            self.e
+00008a00: 7272 6f6b 0a20 2020 2020 2020 2020 2020  rrok.           
+00008a10: 2020 2020 2020 2020 2029 2020 2320 5365           )  # Se
+00008a20: 7420 736f 6d65 2073 7065 6369 616c 2066  t some special f
+00008a30: 756e 6374 696f 6e73 2061 7661 696c 6162  unctions availab
+00008a40: 6c65 2069 6e20 6572 726f 7220 7265 636f  le in error reco
+00008a50: 7665 7279 0a20 2020 2020 2020 2020 2020  very.           
+00008a60: 2020 2020 2020 2020 2074 6f6b 656e 203d           token =
+00008a70: 2067 6574 5f74 6f6b 656e 0a20 2020 2020   get_token.     
+00008a80: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00008a90: 6573 7461 7274 203d 2073 656c 662e 7265  estart = self.re
+00008aa0: 7374 6172 740a 2020 2020 2020 2020 2020  start.          
+00008ab0: 2020 2020 2020 2020 2020 6966 2065 7272            if err
+00008ac0: 746f 6b65 6e20 616e 6420 6e6f 7420 6861  token and not ha
+00008ad0: 7361 7474 7228 6572 7274 6f6b 656e 2c20  sattr(errtoken, 
+00008ae0: 226c 6578 6572 2229 3a0a 2020 2020 2020  "lexer"):.      
+00008af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b00: 2020 6572 7274 6f6b 656e 2e6c 6578 6572    errtoken.lexer
+00008b10: 203d 206c 6578 6572 0a20 2020 2020 2020   = lexer.       
+00008b20: 2020 2020 2020 2020 2020 2020 2074 6f6b               tok
+00008b30: 203d 2073 656c 662e 6572 726f 7266 756e   = self.errorfun
+00008b40: 6328 6572 7274 6f6b 656e 290a 2020 2020  c(errtoken).    
+00008b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b60: 6465 6c20 6572 726f 6b2c 2074 6f6b 656e  del errok, token
+00008b70: 2c20 7265 7374 6172 7420 2023 2044 656c  , restart  # Del
+00008b80: 6574 6520 7370 6563 6961 6c20 6675 6e63  ete special func
+00008b90: 7469 6f6e 730a 0a20 2020 2020 2020 2020  tions..         
+00008ba0: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00008bb0: 6c66 2e65 7272 6f72 6f6b 3a0a 2020 2020  lf.errorok:.    
+00008bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008bd0: 2020 2020 2320 5573 6572 206d 7573 7420      # User must 
+00008be0: 6861 7665 2064 6f6e 6520 736f 6d65 206b  have done some k
+00008bf0: 696e 6420 6f66 2070 616e 6963 0a20 2020  ind of panic.   
+00008c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c10: 2020 2020 2023 206d 6f64 6520 7265 636f       # mode reco
+00008c20: 7665 7279 206f 6e20 7468 6569 7220 6f77  very on their ow
+00008c30: 6e2e 2020 5468 650a 2020 2020 2020 2020  n.  The.        
+00008c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c50: 2320 7265 7475 726e 6564 2074 6f6b 656e  # returned token
+00008c60: 2069 7320 7468 6520 6e65 7874 2073 656c   is the next sel
+00008c70: 662e 6c6f 6f6b 6168 6561 640a 2020 2020  f.lookahead.    
+00008c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c90: 2020 2020 7365 6c66 2e6c 6f6f 6b61 6865      self.lookahe
+00008ca0: 6164 203d 2074 6f6b 0a20 2020 2020 2020  ad = tok.       
+00008cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008cc0: 2065 7272 746f 6b65 6e20 3d20 4e6f 6e65   errtoken = None
+00008cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008ce0: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00008cf0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00008d00: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00008d10: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+00008d20: 7272 746f 6b65 6e3a 0a20 2020 2020 2020  rrtoken:.       
+00008d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008d40: 2069 6620 6861 7361 7474 7228 6572 7274   if hasattr(errt
+00008d50: 6f6b 656e 2c20 226c 696e 656e 6f22 293a  oken, "lineno"):
+00008d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008d70: 2020 2020 2020 2020 2020 2020 206c 696e               lin
+00008d80: 656e 6f20 3d20 7365 6c66 2e6c 6f6f 6b61  eno = self.looka
+00008d90: 6865 6164 2e6c 696e 656e 6f0a 2020 2020  head.lineno.    
+00008da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008db0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
 00008dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008dd0: 6c69 6e65 6e6f 203d 2030 0a20 2020 2020  lineno = 0.     
-00008de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008df0: 2020 2069 6620 6c69 6e65 6e6f 3a0a 2020     if lineno:.  
-00008e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e10: 2020 2020 2020 2020 2020 7379 732e 7374            sys.st
-00008e20: 6465 7272 2e77 7269 7465 280a 2020 2020  derr.write(.    
-00008e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e40: 2020 2020 2020 2020 2020 2020 2279 6163              "yac
-00008e50: 633a 2053 796e 7461 7820 6572 726f 7220  c: Syntax error 
-00008e60: 6174 206c 696e 6520 2564 2c20 746f 6b65  at line %d, toke
-00008e70: 6e3d 2573 5c6e 220a 2020 2020 2020 2020  n=%s\n".        
+00008dd0: 2020 2020 2020 6c69 6e65 6e6f 203d 2030        lineno = 0
+00008de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008df0: 2020 2020 2020 2020 2069 6620 6c69 6e65           if line
+00008e00: 6e6f 3a0a 2020 2020 2020 2020 2020 2020  no:.            
+00008e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008e20: 7379 732e 7374 6465 7272 2e77 7269 7465  sys.stderr.write
+00008e30: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00008e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008e50: 2020 2279 6163 633a 2053 796e 7461 7820    "yacc: Syntax 
+00008e60: 6572 726f 7220 6174 206c 696e 6520 2564  error at line %d
+00008e70: 2c20 746f 6b65 6e3d 2573 5c6e 220a 2020  , token=%s\n".  
 00008e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e90: 2020 2020 2020 2020 2520 286c 696e 656e          % (linen
-00008ea0: 6f2c 2065 7272 746f 6b65 6e2e 7479 7065  o, errtoken.type
-00008eb0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00008ec0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-00008ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ee0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00008ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f00: 2020 2020 2020 2020 2020 7379 732e 7374            sys.st
-00008f10: 6465 7272 2e77 7269 7465 280a 2020 2020  derr.write(.    
-00008f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f30: 2020 2020 2020 2020 2020 2020 2279 6163              "yac
-00008f40: 633a 2053 796e 7461 7820 6572 726f 722c  c: Syntax error,
-00008f50: 2074 6f6b 656e 3d25 7322 2025 2065 7272   token=%s" % err
-00008f60: 746f 6b65 6e2e 7479 7065 0a20 2020 2020  token.type.     
-00008f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f80: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00008f90: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00008fa0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00008fb0: 2020 2020 2020 2020 2020 2073 7973 2e73             sys.s
-00008fc0: 7464 6572 722e 7772 6974 6528 2279 6163  tderr.write("yac
-00008fd0: 633a 2050 6172 7365 2065 7272 6f72 2069  c: Parse error i
-00008fe0: 6e20 696e 7075 742e 2045 4f46 5c6e 2229  n input. EOF\n")
-00008ff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009000: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
-00009010: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00009020: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00009030: 2020 2065 7272 6f72 636f 756e 7420 3d20     errorcount = 
-00009040: 6572 726f 725f 636f 756e 740a 0a20 2020  error_count..   
-00009050: 2020 2020 2020 2020 2023 2063 6173 6520           # case 
-00009060: 313a 2020 7468 6520 7374 6174 6573 7461  1:  the statesta
-00009070: 636b 206f 6e6c 7920 6861 7320 3120 656e  ck only has 1 en
-00009080: 7472 7920 6f6e 2069 742e 2020 4966 2077  try on it.  If w
-00009090: 6527 7265 2069 6e20 7468 6973 2073 7461  e're in this sta
-000090a0: 7465 2c20 7468 650a 2020 2020 2020 2020  te, the.        
-000090b0: 2020 2020 2320 656e 7469 7265 2070 6172      # entire par
-000090c0: 7365 2068 6173 2062 6565 6e20 726f 6c6c  se has been roll
-000090d0: 6564 2062 6163 6b20 616e 6420 7765 2772  ed back and we'r
-000090e0: 6520 636f 6d70 6c65 7465 6c79 2068 6f73  e completely hos
-000090f0: 6564 2e20 2020 5468 6520 746f 6b65 6e20  ed.   The token 
-00009100: 6973 0a20 2020 2020 2020 2020 2020 2023  is.            #
-00009110: 2064 6973 6361 7264 6564 2061 6e64 2077   discarded and w
-00009120: 6520 6a75 7374 206b 6565 7020 676f 696e  e just keep goin
-00009130: 672e 0a0a 2020 2020 2020 2020 2020 2020  g...            
-00009140: 6966 206c 656e 2873 7461 7465 7374 6163  if len(statestac
-00009150: 6b29 203c 3d20 3120 616e 6420 7365 6c66  k) <= 1 and self
-00009160: 2e6c 6f6f 6b61 6865 6164 2e74 7970 6520  .lookahead.type 
-00009170: 213d 2022 2465 6e64 223a 0a20 2020 2020  != "$end":.     
-00009180: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00009190: 6c6f 6f6b 6168 6561 6420 3d20 4e6f 6e65  lookahead = None
-000091a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000091b0: 2065 7272 746f 6b65 6e20 3d20 4e6f 6e65   errtoken = None
-000091c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000091d0: 2073 7461 7465 203d 2030 0a20 2020 2020   state = 0.     
-000091e0: 2020 2020 2020 2020 2020 2023 204e 756b             # Nuk
-000091f0: 6520 7468 6520 7075 7368 6261 636b 2073  e the pushback s
-00009200: 7461 636b 0a20 2020 2020 2020 2020 2020  tack.           
-00009210: 2020 2020 2064 656c 2073 656c 662e 6c6f       del self.lo
-00009220: 6f6b 6168 6561 6473 7461 636b 5b3a 5d0a  okaheadstack[:].
-00009230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009240: 636f 6e74 696e 7565 0a0a 2020 2020 2020  continue..      
-00009250: 2020 2020 2020 2320 6361 7365 2032 3a20        # case 2: 
-00009260: 7468 6520 7374 6174 6573 7461 636b 2068  the statestack h
-00009270: 6173 2061 2063 6f75 706c 6520 6f66 2065  as a couple of e
-00009280: 6e74 7269 6573 206f 6e20 6974 2c20 6275  ntries on it, bu
-00009290: 7420 7765 2772 650a 2020 2020 2020 2020  t we're.        
-000092a0: 2020 2020 2320 6174 2074 6865 2065 6e64      # at the end
-000092b0: 206f 6620 7468 6520 6669 6c65 2e20 6e75   of the file. nu
-000092c0: 6b65 2074 6865 2074 6f70 2065 6e74 7279  ke the top entry
-000092d0: 2061 6e64 2067 656e 6572 6174 6520 616e   and generate an
-000092e0: 2065 7272 6f72 2074 6f6b 656e 0a0a 2020   error token..  
-000092f0: 2020 2020 2020 2020 2020 2320 5374 6172            # Star
-00009300: 7420 6e75 6b69 6e67 2065 6e74 7269 6573  t nuking entries
-00009310: 206f 6e20 7468 6520 7374 6163 6b0a 2020   on the stack.  
-00009320: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00009330: 662e 6c6f 6f6b 6168 6561 642e 7479 7065  f.lookahead.type
-00009340: 203d 3d20 2224 656e 6422 3a0a 2020 2020   == "$end":.    
-00009350: 2020 2020 2020 2020 2020 2020 2320 5768              # Wh
-00009360: 6f61 2e20 5765 2772 6520 7265 616c 6c79  oa. We're really
-00009370: 2068 6f73 6564 2068 6572 652e 2042 6169   hosed here. Bai
-00009380: 6c20 6f75 740a 2020 2020 2020 2020 2020  l out.          
-00009390: 2020 2020 2020 7265 7475 726e 0a0a 2020        return..  
-000093a0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-000093b0: 662e 6c6f 6f6b 6168 6561 642e 7479 7065  f.lookahead.type
-000093c0: 2021 3d20 2265 7272 6f72 223a 0a20 2020   != "error":.   
-000093d0: 2020 2020 2020 2020 2020 2020 2073 796d               sym
-000093e0: 203d 2073 796d 7374 6163 6b5b 2d31 5d0a   = symstack[-1].
-000093f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009400: 6966 2073 796d 2e74 7970 6520 3d3d 2022  if sym.type == "
-00009410: 6572 726f 7222 3a0a 2020 2020 2020 2020  error":.        
-00009420: 2020 2020 2020 2020 2020 2020 2320 486d              # Hm
-00009430: 6d6d 3a20 6572 726f 7220 6973 206f 6e20  mm: error is on 
-00009440: 746f 7020 6f66 2073 7461 636b 2c20 7765  top of stack, we
-00009450: 276c 6c20 6a75 7374 206e 756b 6520 696e  'll just nuke in
-00009460: 7075 740a 2020 2020 2020 2020 2020 2020  put.            
-00009470: 2020 2020 2020 2020 2320 7379 6d62 6f6c          # symbol
-00009480: 2061 6e64 2063 6f6e 7469 6e75 650a 2020   and continue.  
-00009490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000094a0: 2020 7365 6c66 2e6c 6f6f 6b61 6865 6164    self.lookahead
-000094b0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-000094c0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-000094d0: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
-000094e0: 2020 2020 2074 203d 2059 6163 6353 796d       t = YaccSym
-000094f0: 626f 6c28 290a 2020 2020 2020 2020 2020  bol().          
-00009500: 2020 2020 2020 742e 7479 7065 203d 2022        t.type = "
-00009510: 6572 726f 7222 0a20 2020 2020 2020 2020  error".         
-00009520: 2020 2020 2020 2069 6620 6861 7361 7474         if hasatt
-00009530: 7228 7365 6c66 2e6c 6f6f 6b61 6865 6164  r(self.lookahead
-00009540: 2c20 226c 696e 656e 6f22 293a 0a20 2020  , "lineno"):.   
-00009550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009560: 2074 2e6c 696e 656e 6f20 3d20 7365 6c66   t.lineno = self
-00009570: 2e6c 6f6f 6b61 6865 6164 2e6c 696e 656e  .lookahead.linen
-00009580: 6f0a 2020 2020 2020 2020 2020 2020 2020  o.              
-00009590: 2020 742e 7661 6c75 6520 3d20 7365 6c66    t.value = self
-000095a0: 2e6c 6f6f 6b61 6865 6164 0a20 2020 2020  .lookahead.     
-000095b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000095c0: 6c6f 6f6b 6168 6561 6473 7461 636b 2e61  lookaheadstack.a
-000095d0: 7070 656e 6428 7365 6c66 2e6c 6f6f 6b61  ppend(self.looka
-000095e0: 6865 6164 290a 2020 2020 2020 2020 2020  head).          
-000095f0: 2020 2020 2020 7365 6c66 2e6c 6f6f 6b61        self.looka
-00009600: 6865 6164 203d 2074 0a20 2020 2020 2020  head = t.       
-00009610: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00009620: 2020 2020 2020 2020 2020 2073 796d 7374             symst
-00009630: 6163 6b2e 706f 7028 290a 2020 2020 2020  ack.pop().      
-00009640: 2020 2020 2020 2020 2020 7374 6174 6573            states
-00009650: 7461 636b 2e70 6f70 2829 0a20 2020 2020  tack.pop().     
-00009660: 2020 2020 2020 2020 2020 2073 7461 7465             state
-00009670: 203d 2073 7461 7465 7374 6163 6b5b 2d31   = statestack[-1
-00009680: 5d20 2023 2050 6f74 656e 7469 616c 2062  ]  # Potential b
-00009690: 7567 2066 6978 0a0a 2020 2020 2020 2020  ug fix..        
-000096a0: 2020 2020 636f 6e74 696e 7565 0a0a 2020      continue..  
-000096b0: 2020 2020 2020 2320 4361 6c6c 2061 6e20        # Call an 
-000096c0: 6572 726f 7220 6675 6e63 7469 6f6e 2068  error function h
-000096d0: 6572 650a 2020 2020 2020 2020 7261 6973  ere.        rais
-000096e0: 6520 5275 6e74 696d 6545 7272 6f72 2822  e RuntimeError("
-000096f0: 7961 6363 3a20 696e 7465 726e 616c 2070  yacc: internal p
-00009700: 6172 7365 7220 6572 726f 7221 2121 5c6e  arser error!!!\n
-00009710: 2229 0a0a 0a64 6566 205f 7061 7273 655f  ")...def _parse_
-00009720: 6465 6275 6728 7365 6c66 2c20 696e 7075  debug(self, inpu
-00009730: 743d 4e6f 6e65 2c20 6c65 7865 723d 4e6f  t=None, lexer=No
-00009740: 6e65 2c20 6465 6275 673d 4e6f 6e65 2c20  ne, debug=None, 
-00009750: 7472 6163 6b69 6e67 3d30 2c20 746f 6b65  tracking=0, toke
-00009760: 6e66 756e 633d 4e6f 6e65 293a 0a20 2020  nfunc=None):.   
-00009770: 2073 656c 662e 6c6f 6f6b 6168 6561 6420   self.lookahead 
-00009780: 3d20 4e6f 6e65 2020 2320 4375 7272 656e  = None  # Curren
-00009790: 7420 6c6f 6f6b 6168 6561 6420 7379 6d62  t lookahead symb
-000097a0: 6f6c 0a20 2020 2061 6374 696f 6e73 203d  ol.    actions =
-000097b0: 2073 656c 662e 6163 7469 6f6e 2020 2320   self.action  # 
-000097c0: 4c6f 6361 6c20 7265 6665 7265 6e63 6520  Local reference 
-000097d0: 746f 2061 6374 696f 6e20 7461 626c 6520  to action table 
-000097e0: 2874 6f20 6176 6f69 6420 6c6f 6f6b 7570  (to avoid lookup
-000097f0: 206f 6e20 7365 6c66 2e29 0a20 2020 2067   on self.).    g
-00009800: 6f74 6f20 3d20 7365 6c66 2e67 6f74 6f20  oto = self.goto 
-00009810: 2023 204c 6f63 616c 2072 6566 6572 656e   # Local referen
-00009820: 6365 2074 6f20 676f 746f 2074 6162 6c65  ce to goto table
-00009830: 2028 746f 2061 766f 6964 206c 6f6f 6b75   (to avoid looku
-00009840: 7020 6f6e 2073 656c 662e 290a 2020 2020  p on self.).    
-00009850: 7072 6f64 203d 2028 0a20 2020 2020 2020  prod = (.       
-00009860: 2073 656c 662e 7072 6f64 7563 7469 6f6e   self.production
-00009870: 730a 2020 2020 2920 2023 204c 6f63 616c  s.    )  # Local
-00009880: 2072 6566 6572 656e 6365 2074 6f20 7072   reference to pr
-00009890: 6f64 7563 7469 6f6e 206c 6973 7420 2874  oduction list (t
-000098a0: 6f20 6176 6f69 6420 6c6f 6f6b 7570 206f  o avoid lookup o
-000098b0: 6e20 7365 6c66 2e29 0a20 2020 2070 736c  n self.).    psl
-000098c0: 6963 6520 3d20 5961 6363 5072 6f64 7563  ice = YaccProduc
-000098d0: 7469 6f6e 284e 6f6e 6529 2020 2320 5072  tion(None)  # Pr
-000098e0: 6f64 7563 7469 6f6e 206f 626a 6563 7420  oduction object 
-000098f0: 7061 7373 6564 2074 6f20 6772 616d 6d61  passed to gramma
-00009900: 7220 7275 6c65 730a 2020 2020 6572 726f  r rules.    erro
-00009910: 7263 6f75 6e74 203d 2030 2020 2320 5573  rcount = 0  # Us
-00009920: 6564 2064 7572 696e 6720 6572 726f 7220  ed during error 
-00009930: 7265 636f 7665 7279 0a0a 2020 2020 2320  recovery..    # 
-00009940: 2d2d 2120 4445 4255 470a 2020 2020 6465  --! DEBUG.    de
-00009950: 6275 672e 696e 666f 2822 504c 593a 2050  bug.info("PLY: P
-00009960: 4152 5345 2044 4542 5547 2053 5441 5254  ARSE DEBUG START
-00009970: 2229 0a20 2020 2023 202d 2d21 2044 4542  ").    # --! DEB
-00009980: 5547 0a0a 2020 2020 2320 5365 7420 7570  UG..    # Set up
-00009990: 2074 6865 206c 6578 6572 2061 6e64 2070   the lexer and p
-000099a0: 6172 7365 7220 6f62 6a65 6374 7320 6f6e  arser objects on
-000099b0: 2070 736c 6963 650a 2020 2020 7073 6c69   pslice.    psli
-000099c0: 6365 2e6c 6578 6572 203d 206c 6578 6572  ce.lexer = lexer
-000099d0: 0a20 2020 2070 736c 6963 652e 7061 7273  .    pslice.pars
-000099e0: 6572 203d 2073 656c 660a 0a20 2020 2023  er = self..    #
-000099f0: 2049 6620 696e 7075 7420 7761 7320 7375   If input was su
-00009a00: 7070 6c69 6564 2c20 7061 7373 2074 6f20  pplied, pass to 
-00009a10: 6c65 7865 720a 2020 2020 6966 2069 6e70  lexer.    if inp
-00009a20: 7574 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ut is not None:.
-00009a30: 2020 2020 2020 2020 6c65 7865 722e 696e          lexer.in
-00009a40: 7075 7428 696e 7075 7429 0a0a 2020 2020  put(input)..    
-00009a50: 6966 2074 6f6b 656e 6675 6e63 2069 7320  if tokenfunc is 
-00009a60: 4e6f 6e65 3a0a 2020 2020 2020 2020 2320  None:.        # 
-00009a70: 546f 6b65 6e69 7a65 2066 756e 6374 696f  Tokenize functio
-00009a80: 6e0a 2020 2020 2020 2020 6765 745f 746f  n.        get_to
-00009a90: 6b65 6e20 3d20 6c65 7865 722e 746f 6b65  ken = lexer.toke
-00009aa0: 6e0a 2020 2020 656c 7365 3a0a 2020 2020  n.    else:.    
-00009ab0: 2020 2020 6765 745f 746f 6b65 6e20 3d20      get_token = 
-00009ac0: 746f 6b65 6e66 756e 630a 0a20 2020 2023  tokenfunc..    #
-00009ad0: 2053 6574 2075 7020 7468 6520 7374 6174   Set up the stat
-00009ae0: 6520 616e 6420 7379 6d62 6f6c 2073 7461  e and symbol sta
-00009af0: 636b 730a 0a20 2020 206c 6f6f 6b61 6865  cks..    lookahe
-00009b00: 6164 7374 6163 6b20 3d20 5b5d 2020 2320  adstack = []  # 
-00009b10: 5374 6163 6b20 6f66 206c 6f6f 6b61 6865  Stack of lookahe
-00009b20: 6164 2074 6f6b 656e 730a 2020 2020 7365  ad tokens.    se
-00009b30: 6c66 2e6c 6f6f 6b61 6865 6164 7374 6163  lf.lookaheadstac
-00009b40: 6b20 3d20 6c6f 6f6b 6168 6561 6473 7461  k = lookaheadsta
-00009b50: 636b 0a20 2020 2073 7461 7465 7374 6163  ck.    statestac
-00009b60: 6b20 3d20 5b5d 2020 2320 5374 6163 6b20  k = []  # Stack 
-00009b70: 6f66 2070 6172 7369 6e67 2073 7461 7465  of parsing state
-00009b80: 730a 2020 2020 7365 6c66 2e73 7461 7465  s.    self.state
-00009b90: 7374 6163 6b20 3d20 7374 6174 6573 7461  stack = statesta
-00009ba0: 636b 0a20 2020 2073 796d 7374 6163 6b20  ck.    symstack 
-00009bb0: 3d20 5b5d 2020 2320 5374 6163 6b20 6f66  = []  # Stack of
-00009bc0: 2067 7261 6d6d 6172 2073 796d 626f 6c73   grammar symbols
-00009bd0: 0a20 2020 2073 656c 662e 7379 6d73 7461  .    self.symsta
-00009be0: 636b 203d 2073 796d 7374 6163 6b0a 0a20  ck = symstack.. 
-00009bf0: 2020 2070 736c 6963 652e 7374 6163 6b20     pslice.stack 
-00009c00: 3d20 7379 6d73 7461 636b 2020 2320 5075  = symstack  # Pu
-00009c10: 7420 696e 2074 6865 2070 726f 6475 6374  t in the product
-00009c20: 696f 6e0a 2020 2020 6572 7274 6f6b 656e  ion.    errtoken
-00009c30: 203d 204e 6f6e 6520 2023 2045 7272 2074   = None  # Err t
-00009c40: 6f6b 656e 0a0a 2020 2020 2320 5468 6520  oken..    # The 
-00009c50: 7374 6172 7420 7374 6174 6520 6973 2061  start state is a
-00009c60: 7373 756d 6564 2074 6f20 6265 2028 302c  ssumed to be (0,
-00009c70: 2465 6e64 290a 0a20 2020 2073 7461 7465  $end)..    state
-00009c80: 7374 6163 6b2e 6170 7065 6e64 2830 290a  stack.append(0).
-00009c90: 2020 2020 7379 6d20 3d20 5961 6363 5379      sym = YaccSy
-00009ca0: 6d62 6f6c 2829 0a20 2020 2073 796d 2e74  mbol().    sym.t
-00009cb0: 7970 6520 3d20 2224 656e 6422 0a20 2020  ype = "$end".   
-00009cc0: 2073 796d 7374 6163 6b2e 6170 7065 6e64   symstack.append
-00009cd0: 2873 796d 290a 2020 2020 7374 6174 6520  (sym).    state 
-00009ce0: 3d20 300a 2020 2020 7768 696c 6520 313a  = 0.    while 1:
-00009cf0: 0a20 2020 2020 2020 2023 2047 6574 2074  .        # Get t
-00009d00: 6865 206e 6578 7420 7379 6d62 6f6c 206f  he next symbol o
-00009d10: 6e20 7468 6520 696e 7075 742e 2020 4966  n the input.  If
-00009d20: 2061 206c 6f6f 6b61 6865 6164 2073 796d   a lookahead sym
-00009d30: 626f 6c0a 2020 2020 2020 2020 2320 6973  bol.        # is
-00009d40: 2061 6c72 6561 6479 2073 6574 2c20 7765   already set, we
-00009d50: 206a 7573 7420 7573 6520 7468 6174 2e20   just use that. 
-00009d60: 4f74 6865 7277 6973 652c 2077 6527 6c6c  Otherwise, we'll
-00009d70: 2070 756c 6c0a 2020 2020 2020 2020 2320   pull.        # 
-00009d80: 7468 6520 6e65 7874 2074 6f6b 656e 206f  the next token o
-00009d90: 6666 206f 6620 7468 6520 6c6f 6f6b 6168  ff of the lookah
-00009da0: 6561 6473 7461 636b 206f 7220 6672 6f6d  eadstack or from
-00009db0: 2074 6865 206c 6578 6572 0a0a 2020 2020   the lexer..    
-00009dc0: 2020 2020 2320 2d2d 2120 4445 4255 470a      # --! DEBUG.
-00009dd0: 2020 2020 2020 2020 6465 6275 672e 6465          debug.de
-00009de0: 6275 6728 2222 290a 2020 2020 2020 2020  bug("").        
-00009df0: 6465 6275 672e 6465 6275 6728 2253 7461  debug.debug("Sta
-00009e00: 7465 2020 3a20 2573 222c 2073 7461 7465  te  : %s", state
-00009e10: 290a 2020 2020 2020 2020 2320 2d2d 2120  ).        # --! 
-00009e20: 4445 4255 470a 0a20 2020 2020 2020 2069  DEBUG..        i
-00009e30: 6620 6e6f 7420 7365 6c66 2e6c 6f6f 6b61  f not self.looka
-00009e40: 6865 6164 3a0a 2020 2020 2020 2020 2020  head:.          
-00009e50: 2020 6966 206e 6f74 2073 656c 662e 6c6f    if not self.lo
-00009e60: 6f6b 6168 6561 6473 7461 636b 3a0a 2020  okaheadstack:.  
-00009e70: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00009e80: 6c66 2e6c 6f6f 6b61 6865 6164 203d 2067  lf.lookahead = g
-00009e90: 6574 5f74 6f6b 656e 2829 2020 2320 4765  et_token()  # Ge
-00009ea0: 7420 7468 6520 6e65 7874 2074 6f6b 656e  t the next token
-00009eb0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00009ec0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00009ed0: 2020 2073 656c 662e 6c6f 6f6b 6168 6561     self.lookahea
-00009ee0: 6420 3d20 7365 6c66 2e6c 6f6f 6b61 6865  d = self.lookahe
-00009ef0: 6164 7374 6163 6b2e 706f 7028 290a 2020  adstack.pop().  
-00009f00: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00009f10: 2073 656c 662e 6c6f 6f6b 6168 6561 643a   self.lookahead:
-00009f20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009f30: 2073 656c 662e 6c6f 6f6b 6168 6561 6420   self.lookahead 
-00009f40: 3d20 5961 6363 5379 6d62 6f6c 2829 0a20  = YaccSymbol(). 
-00009f50: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00009f60: 656c 662e 6c6f 6f6b 6168 6561 642e 7479  elf.lookahead.ty
-00009f70: 7065 203d 2022 2465 6e64 220a 0a20 2020  pe = "$end"..   
-00009f80: 2020 2020 2023 202d 2d21 2044 4542 5547       # --! DEBUG
-00009f90: 0a20 2020 2020 2020 2064 6562 7567 2e64  .        debug.d
-00009fa0: 6562 7567 280a 2020 2020 2020 2020 2020  ebug(.          
-00009fb0: 2020 2253 7461 636b 2020 3a20 2573 222c    "Stack  : %s",
-00009fc0: 0a20 2020 2020 2020 2020 2020 2028 0a20  .            (. 
-00009fd0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00009fe0: 2573 202e 2025 7322 0a20 2020 2020 2020  %s . %s".       
-00009ff0: 2020 2020 2020 2020 2025 2028 0a20 2020           % (.   
-0000a000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a010: 2022 2022 2e6a 6f69 6e28 5b78 782e 7479   " ".join([xx.ty
-0000a020: 7065 2066 6f72 2078 7820 696e 2073 796d  pe for xx in sym
-0000a030: 7374 6163 6b5d 5b31 3a5d 292c 0a20 2020  stack][1:]),.   
-0000a040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a050: 2073 7472 2873 656c 662e 6c6f 6f6b 6168   str(self.lookah
-0000a060: 6561 6429 2c0a 2020 2020 2020 2020 2020  ead),.          
-0000a070: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0000a080: 2020 2020 292e 6c73 7472 6970 2829 2c0a      ).lstrip(),.
-0000a090: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000a0a0: 2020 2320 2d2d 2120 4445 4255 470a 0a20    # --! DEBUG.. 
-0000a0b0: 2020 2020 2020 2023 2043 6865 636b 2074         # Check t
-0000a0c0: 6865 2061 6374 696f 6e20 7461 626c 650a  he action table.
-0000a0d0: 2020 2020 2020 2020 6c74 7970 6520 3d20          ltype = 
-0000a0e0: 7365 6c66 2e6c 6f6f 6b61 6865 6164 2e74  self.lookahead.t
-0000a0f0: 7970 650a 2020 2020 2020 2020 7420 3d20  ype.        t = 
-0000a100: 6163 7469 6f6e 735b 7374 6174 655d 2e67  actions[state].g
-0000a110: 6574 286c 7479 7065 290a 0a20 2020 2020  et(ltype)..     
-0000a120: 2020 2023 2054 6869 7320 6973 2061 2062     # This is a b
-0000a130: 6164 2068 6163 6b20 746f 2064 6561 6c20  ad hack to deal 
-0000a140: 7769 7468 204c 696c 7950 6f6e 6427 7320  with LilyPond's 
-0000a150: 6261 636b 7570 2f72 6570 6172 7365 2072  backup/reparse r
-0000a160: 6567 696d 650a 2020 2020 2020 2020 6966  egime.        if
-0000a170: 2074 2069 7320 4e6f 6e65 3a0a 2020 2020   t is None:.    
-0000a180: 2020 2020 2020 2020 6120 3d20 7365 7428          a = set(
-0000a190: 6163 7469 6f6e 735b 7374 6174 655d 2e76  actions[state].v
-0000a1a0: 616c 7565 7328 2929 0a20 2020 2020 2020  alues()).       
-0000a1b0: 2020 2020 2069 6620 3120 3d3d 206c 656e       if 1 == len
-0000a1c0: 2861 293a 0a20 2020 2020 2020 2020 2020  (a):.           
-0000a1d0: 2020 2020 2074 203d 206c 6973 7428 6129       t = list(a)
-0000a1e0: 5b30 5d0a 0a20 2020 2020 2020 2069 6620  [0]..        if 
-0000a1f0: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-0000a200: 2020 2020 2020 2020 2020 2069 6620 7420             if t 
-0000a210: 3e20 303a 0a20 2020 2020 2020 2020 2020  > 0:.           
-0000a220: 2020 2020 2023 2073 6869 6674 2061 2073       # shift a s
-0000a230: 796d 626f 6c20 6f6e 2074 6865 2073 7461  ymbol on the sta
-0000a240: 636b 0a20 2020 2020 2020 2020 2020 2020  ck.             
-0000a250: 2020 2073 7461 7465 7374 6163 6b2e 6170     statestack.ap
-0000a260: 7065 6e64 2874 290a 2020 2020 2020 2020  pend(t).        
-0000a270: 2020 2020 2020 2020 7374 6174 6520 3d20          state = 
-0000a280: 740a 0a20 2020 2020 2020 2020 2020 2020  t..             
-0000a290: 2020 2023 202d 2d21 2044 4542 5547 0a20     # --! DEBUG. 
-0000a2a0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0000a2b0: 6562 7567 2e64 6562 7567 2822 4163 7469  ebug.debug("Acti
-0000a2c0: 6f6e 203a 2053 6869 6674 2061 6e64 2067  on : Shift and g
-0000a2d0: 6f74 6f20 7374 6174 6520 2573 222c 2074  oto state %s", t
-0000a2e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000a2f0: 2020 2320 2d2d 2120 4445 4255 470a 0a20    # --! DEBUG.. 
-0000a300: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000a310: 796d 7374 6163 6b2e 6170 7065 6e64 2873  ymstack.append(s
-0000a320: 656c 662e 6c6f 6f6b 6168 6561 6429 0a20  elf.lookahead). 
-0000a330: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000a340: 656c 662e 6c6f 6f6b 6168 6561 6420 3d20  elf.lookahead = 
-0000a350: 4e6f 6e65 0a0a 2020 2020 2020 2020 2020  None..          
-0000a360: 2020 2020 2020 2320 4465 6372 6561 7365        # Decrease
-0000a370: 2065 7272 6f72 2063 6f75 6e74 206f 6e20   error count on 
-0000a380: 7375 6363 6573 7366 756c 2073 6869 6674  successful shift
-0000a390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a3a0: 2069 6620 6572 726f 7263 6f75 6e74 3a0a   if errorcount:.
-0000a3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a3c0: 2020 2020 6572 726f 7263 6f75 6e74 202d      errorcount -
-0000a3d0: 3d20 310a 2020 2020 2020 2020 2020 2020  = 1.            
-0000a3e0: 2020 2020 636f 6e74 696e 7565 0a0a 2020      continue..  
-0000a3f0: 2020 2020 2020 2020 2020 6966 2074 203c            if t <
-0000a400: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-0000a410: 2020 2020 2320 7265 6475 6365 2061 2073      # reduce a s
-0000a420: 796d 626f 6c20 6f6e 2074 6865 2073 7461  ymbol on the sta
-0000a430: 636b 2c20 656d 6974 2061 2070 726f 6475  ck, emit a produ
-0000a440: 6374 696f 6e0a 2020 2020 2020 2020 2020  ction.          
-0000a450: 2020 2020 2020 7020 3d20 7072 6f64 5b2d        p = prod[-
-0000a460: 745d 0a20 2020 2020 2020 2020 2020 2020  t].             
-0000a470: 2020 2070 6e61 6d65 203d 2070 2e6e 616d     pname = p.nam
-0000a480: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0000a490: 2020 706c 656e 203d 2070 2e6c 656e 0a0a    plen = p.len..
-0000a4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a4b0: 2320 4765 7420 7072 6f64 7563 7469 6f6e  # Get production
-0000a4c0: 2066 756e 6374 696f 6e0a 2020 2020 2020   function.      
-0000a4d0: 2020 2020 2020 2020 2020 7379 6d20 3d20            sym = 
-0000a4e0: 5961 6363 5379 6d62 6f6c 2829 0a20 2020  YaccSymbol().   
-0000a4f0: 2020 2020 2020 2020 2020 2020 2073 796d               sym
-0000a500: 2e74 7970 6520 3d20 706e 616d 6520 2023  .type = pname  #
-0000a510: 2050 726f 6475 6374 696f 6e20 6e61 6d65   Production name
-0000a520: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a530: 2073 796d 2e76 616c 7565 203d 204e 6f6e   sym.value = Non
-0000a540: 650a 0a20 2020 2020 2020 2020 2020 2020  e..             
-0000a550: 2020 2023 202d 2d21 2044 4542 5547 0a20     # --! DEBUG. 
-0000a560: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000a570: 6620 706c 656e 3a0a 2020 2020 2020 2020  f plen:.        
-0000a580: 2020 2020 2020 2020 2020 2020 6465 6275              debu
-0000a590: 672e 696e 666f 280a 2020 2020 2020 2020  g.info(.        
+00008e90: 2020 2020 2020 2020 2020 2020 2020 2520                % 
+00008ea0: 286c 696e 656e 6f2c 2065 7272 746f 6b65  (lineno, errtoke
+00008eb0: 6e2e 7479 7065 290a 2020 2020 2020 2020  n.type).        
+00008ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008ed0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00008ee0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00008ef0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00008f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008f10: 7379 732e 7374 6465 7272 2e77 7269 7465  sys.stderr.write
+00008f20: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00008f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008f40: 2020 2279 6163 633a 2053 796e 7461 7820    "yacc: Syntax 
+00008f50: 6572 726f 722c 2074 6f6b 656e 3d25 7322  error, token=%s"
+00008f60: 2025 2065 7272 746f 6b65 6e2e 7479 7065   % errtoken.type
+00008f70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008f80: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
+00008f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008fa0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00008fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008fc0: 2073 7973 2e73 7464 6572 722e 7772 6974   sys.stderr.writ
+00008fd0: 6528 2279 6163 633a 2050 6172 7365 2065  e("yacc: Parse e
+00008fe0: 7272 6f72 2069 6e20 696e 7075 742e 2045  rror in input. E
+00008ff0: 4f46 5c6e 2229 0a20 2020 2020 2020 2020  OF\n").         
+00009000: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00009010: 6574 7572 6e0a 0a20 2020 2020 2020 2020  eturn..         
+00009020: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00009030: 2020 2020 2020 2020 2065 7272 6f72 636f           errorco
+00009040: 756e 7420 3d20 6572 726f 725f 636f 756e  unt = error_coun
+00009050: 740a 0a20 2020 2020 2020 2020 2020 2023  t..            #
+00009060: 2063 6173 6520 313a 2020 7468 6520 7374   case 1:  the st
+00009070: 6174 6573 7461 636b 206f 6e6c 7920 6861  atestack only ha
+00009080: 7320 3120 656e 7472 7920 6f6e 2069 742e  s 1 entry on it.
+00009090: 2020 4966 2077 6527 7265 2069 6e20 7468    If we're in th
+000090a0: 6973 2073 7461 7465 2c20 7468 650a 2020  is state, the.  
+000090b0: 2020 2020 2020 2020 2020 2320 656e 7469            # enti
+000090c0: 7265 2070 6172 7365 2068 6173 2062 6565  re parse has bee
+000090d0: 6e20 726f 6c6c 6564 2062 6163 6b20 616e  n rolled back an
+000090e0: 6420 7765 2772 6520 636f 6d70 6c65 7465  d we're complete
+000090f0: 6c79 2068 6f73 6564 2e20 2020 5468 6520  ly hosed.   The 
+00009100: 746f 6b65 6e20 6973 0a20 2020 2020 2020  token is.       
+00009110: 2020 2020 2023 2064 6973 6361 7264 6564       # discarded
+00009120: 2061 6e64 2077 6520 6a75 7374 206b 6565   and we just kee
+00009130: 7020 676f 696e 672e 0a0a 2020 2020 2020  p going...      
+00009140: 2020 2020 2020 6966 206c 656e 2873 7461        if len(sta
+00009150: 7465 7374 6163 6b29 203c 3d20 3120 616e  testack) <= 1 an
+00009160: 6420 7365 6c66 2e6c 6f6f 6b61 6865 6164  d self.lookahead
+00009170: 2e74 7970 6520 213d 2022 2465 6e64 223a  .type != "$end":
+00009180: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009190: 2073 656c 662e 6c6f 6f6b 6168 6561 6420   self.lookahead 
+000091a0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2020  = None.         
+000091b0: 2020 2020 2020 2065 7272 746f 6b65 6e20         errtoken 
+000091c0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2020  = None.         
+000091d0: 2020 2020 2020 2073 7461 7465 203d 2030         state = 0
+000091e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000091f0: 2023 204e 756b 6520 7468 6520 7075 7368   # Nuke the push
+00009200: 6261 636b 2073 7461 636b 0a20 2020 2020  back stack.     
+00009210: 2020 2020 2020 2020 2020 2064 656c 2073             del s
+00009220: 656c 662e 6c6f 6f6b 6168 6561 6473 7461  elf.lookaheadsta
+00009230: 636b 5b3a 5d0a 2020 2020 2020 2020 2020  ck[:].          
+00009240: 2020 2020 2020 636f 6e74 696e 7565 0a0a        continue..
+00009250: 2020 2020 2020 2020 2020 2020 2320 6361              # ca
+00009260: 7365 2032 3a20 7468 6520 7374 6174 6573  se 2: the states
+00009270: 7461 636b 2068 6173 2061 2063 6f75 706c  tack has a coupl
+00009280: 6520 6f66 2065 6e74 7269 6573 206f 6e20  e of entries on 
+00009290: 6974 2c20 6275 7420 7765 2772 650a 2020  it, but we're.  
+000092a0: 2020 2020 2020 2020 2020 2320 6174 2074            # at t
+000092b0: 6865 2065 6e64 206f 6620 7468 6520 6669  he end of the fi
+000092c0: 6c65 2e20 6e75 6b65 2074 6865 2074 6f70  le. nuke the top
+000092d0: 2065 6e74 7279 2061 6e64 2067 656e 6572   entry and gener
+000092e0: 6174 6520 616e 2065 7272 6f72 2074 6f6b  ate an error tok
+000092f0: 656e 0a0a 2020 2020 2020 2020 2020 2020  en..            
+00009300: 2320 5374 6172 7420 6e75 6b69 6e67 2065  # Start nuking e
+00009310: 6e74 7269 6573 206f 6e20 7468 6520 7374  ntries on the st
+00009320: 6163 6b0a 2020 2020 2020 2020 2020 2020  ack.            
+00009330: 6966 2073 656c 662e 6c6f 6f6b 6168 6561  if self.lookahea
+00009340: 642e 7479 7065 203d 3d20 2224 656e 6422  d.type == "$end"
+00009350: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00009360: 2020 2320 5768 6f61 2e20 5765 2772 6520    # Whoa. We're 
+00009370: 7265 616c 6c79 2068 6f73 6564 2068 6572  really hosed her
+00009380: 652e 2042 6169 6c20 6f75 740a 2020 2020  e. Bail out.    
+00009390: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000093a0: 726e 0a0a 2020 2020 2020 2020 2020 2020  rn..            
+000093b0: 6966 2073 656c 662e 6c6f 6f6b 6168 6561  if self.lookahea
+000093c0: 642e 7479 7065 2021 3d20 2265 7272 6f72  d.type != "error
+000093d0: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
+000093e0: 2020 2073 796d 203d 2073 796d 7374 6163     sym = symstac
+000093f0: 6b5b 2d31 5d0a 2020 2020 2020 2020 2020  k[-1].          
+00009400: 2020 2020 2020 6966 2073 796d 2e74 7970        if sym.typ
+00009410: 6520 3d3d 2022 6572 726f 7222 3a0a 2020  e == "error":.  
+00009420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009430: 2020 2320 486d 6d6d 3a20 6572 726f 7220    # Hmmm: error 
+00009440: 6973 206f 6e20 746f 7020 6f66 2073 7461  is on top of sta
+00009450: 636b 2c20 7765 276c 6c20 6a75 7374 206e  ck, we'll just n
+00009460: 756b 6520 696e 7075 740a 2020 2020 2020  uke input.      
+00009470: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00009480: 7379 6d62 6f6c 2061 6e64 2063 6f6e 7469  symbol and conti
+00009490: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
+000094a0: 2020 2020 2020 2020 7365 6c66 2e6c 6f6f          self.loo
+000094b0: 6b61 6865 6164 203d 204e 6f6e 650a 2020  kahead = None.  
+000094c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000094d0: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
+000094e0: 2020 2020 2020 2020 2020 2074 203d 2059             t = Y
+000094f0: 6163 6353 796d 626f 6c28 290a 2020 2020  accSymbol().    
+00009500: 2020 2020 2020 2020 2020 2020 742e 7479              t.ty
+00009510: 7065 203d 2022 6572 726f 7222 0a20 2020  pe = "error".   
+00009520: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00009530: 6861 7361 7474 7228 7365 6c66 2e6c 6f6f  hasattr(self.loo
+00009540: 6b61 6865 6164 2c20 226c 696e 656e 6f22  kahead, "lineno"
+00009550: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00009560: 2020 2020 2020 2074 2e6c 696e 656e 6f20         t.lineno 
+00009570: 3d20 7365 6c66 2e6c 6f6f 6b61 6865 6164  = self.lookahead
+00009580: 2e6c 696e 656e 6f0a 2020 2020 2020 2020  .lineno.        
+00009590: 2020 2020 2020 2020 742e 7661 6c75 6520          t.value 
+000095a0: 3d20 7365 6c66 2e6c 6f6f 6b61 6865 6164  = self.lookahead
+000095b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000095c0: 2073 656c 662e 6c6f 6f6b 6168 6561 6473   self.lookaheads
+000095d0: 7461 636b 2e61 7070 656e 6428 7365 6c66  tack.append(self
+000095e0: 2e6c 6f6f 6b61 6865 6164 290a 2020 2020  .lookahead).    
+000095f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00009600: 2e6c 6f6f 6b61 6865 6164 203d 2074 0a20  .lookahead = t. 
+00009610: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00009620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009630: 2073 796d 7374 6163 6b2e 706f 7028 290a   symstack.pop().
+00009640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009650: 7374 6174 6573 7461 636b 2e70 6f70 2829  statestack.pop()
+00009660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009670: 2073 7461 7465 203d 2073 7461 7465 7374   state = statest
+00009680: 6163 6b5b 2d31 5d20 2023 2050 6f74 656e  ack[-1]  # Poten
+00009690: 7469 616c 2062 7567 2066 6978 0a0a 2020  tial bug fix..  
+000096a0: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+000096b0: 7565 0a0a 2020 2020 2020 2020 2320 4361  ue..        # Ca
+000096c0: 6c6c 2061 6e20 6572 726f 7220 6675 6e63  ll an error func
+000096d0: 7469 6f6e 2068 6572 650a 2020 2020 2020  tion here.      
+000096e0: 2020 7261 6973 6520 5275 6e74 696d 6545    raise RuntimeE
+000096f0: 7272 6f72 2822 7961 6363 3a20 696e 7465  rror("yacc: inte
+00009700: 726e 616c 2070 6172 7365 7220 6572 726f  rnal parser erro
+00009710: 7221 2121 5c6e 2229 0a0a 0a64 6566 205f  r!!!\n")...def _
+00009720: 7061 7273 655f 6465 6275 6728 7365 6c66  parse_debug(self
+00009730: 2c20 696e 7075 743d 4e6f 6e65 2c20 6c65  , input=None, le
+00009740: 7865 723d 4e6f 6e65 2c20 6465 6275 673d  xer=None, debug=
+00009750: 4e6f 6e65 2c20 7472 6163 6b69 6e67 3d30  None, tracking=0
+00009760: 2c20 746f 6b65 6e66 756e 633d 4e6f 6e65  , tokenfunc=None
+00009770: 293a 0a20 2020 2073 656c 662e 6c6f 6f6b  ):.    self.look
+00009780: 6168 6561 6420 3d20 4e6f 6e65 2020 2320  ahead = None  # 
+00009790: 4375 7272 656e 7420 6c6f 6f6b 6168 6561  Current lookahea
+000097a0: 6420 7379 6d62 6f6c 0a20 2020 2061 6374  d symbol.    act
+000097b0: 696f 6e73 203d 2073 656c 662e 6163 7469  ions = self.acti
+000097c0: 6f6e 2020 2320 4c6f 6361 6c20 7265 6665  on  # Local refe
+000097d0: 7265 6e63 6520 746f 2061 6374 696f 6e20  rence to action 
+000097e0: 7461 626c 6520 2874 6f20 6176 6f69 6420  table (to avoid 
+000097f0: 6c6f 6f6b 7570 206f 6e20 7365 6c66 2e29  lookup on self.)
+00009800: 0a20 2020 2067 6f74 6f20 3d20 7365 6c66  .    goto = self
+00009810: 2e67 6f74 6f20 2023 204c 6f63 616c 2072  .goto  # Local r
+00009820: 6566 6572 656e 6365 2074 6f20 676f 746f  eference to goto
+00009830: 2074 6162 6c65 2028 746f 2061 766f 6964   table (to avoid
+00009840: 206c 6f6f 6b75 7020 6f6e 2073 656c 662e   lookup on self.
+00009850: 290a 2020 2020 7072 6f64 203d 2028 0a20  ).    prod = (. 
+00009860: 2020 2020 2020 2073 656c 662e 7072 6f64         self.prod
+00009870: 7563 7469 6f6e 730a 2020 2020 2920 2023  uctions.    )  #
+00009880: 204c 6f63 616c 2072 6566 6572 656e 6365   Local reference
+00009890: 2074 6f20 7072 6f64 7563 7469 6f6e 206c   to production l
+000098a0: 6973 7420 2874 6f20 6176 6f69 6420 6c6f  ist (to avoid lo
+000098b0: 6f6b 7570 206f 6e20 7365 6c66 2e29 0a20  okup on self.). 
+000098c0: 2020 2070 736c 6963 6520 3d20 5961 6363     pslice = Yacc
+000098d0: 5072 6f64 7563 7469 6f6e 284e 6f6e 6529  Production(None)
+000098e0: 2020 2320 5072 6f64 7563 7469 6f6e 206f    # Production o
+000098f0: 626a 6563 7420 7061 7373 6564 2074 6f20  bject passed to 
+00009900: 6772 616d 6d61 7220 7275 6c65 730a 2020  grammar rules.  
+00009910: 2020 6572 726f 7263 6f75 6e74 203d 2030    errorcount = 0
+00009920: 2020 2320 5573 6564 2064 7572 696e 6720    # Used during 
+00009930: 6572 726f 7220 7265 636f 7665 7279 0a0a  error recovery..
+00009940: 2020 2020 2320 2d2d 2120 4445 4255 470a      # --! DEBUG.
+00009950: 2020 2020 6465 6275 672e 696e 666f 2822      debug.info("
+00009960: 504c 593a 2050 4152 5345 2044 4542 5547  PLY: PARSE DEBUG
+00009970: 2053 5441 5254 2229 0a20 2020 2023 202d   START").    # -
+00009980: 2d21 2044 4542 5547 0a0a 2020 2020 2320  -! DEBUG..    # 
+00009990: 5365 7420 7570 2074 6865 206c 6578 6572  Set up the lexer
+000099a0: 2061 6e64 2070 6172 7365 7220 6f62 6a65   and parser obje
+000099b0: 6374 7320 6f6e 2070 736c 6963 650a 2020  cts on pslice.  
+000099c0: 2020 7073 6c69 6365 2e6c 6578 6572 203d    pslice.lexer =
+000099d0: 206c 6578 6572 0a20 2020 2070 736c 6963   lexer.    pslic
+000099e0: 652e 7061 7273 6572 203d 2073 656c 660a  e.parser = self.
+000099f0: 0a20 2020 2023 2049 6620 696e 7075 7420  .    # If input 
+00009a00: 7761 7320 7375 7070 6c69 6564 2c20 7061  was supplied, pa
+00009a10: 7373 2074 6f20 6c65 7865 720a 2020 2020  ss to lexer.    
+00009a20: 6966 2069 6e70 7574 2069 7320 6e6f 7420  if input is not 
+00009a30: 4e6f 6e65 3a0a 2020 2020 2020 2020 6c65  None:.        le
+00009a40: 7865 722e 696e 7075 7428 696e 7075 7429  xer.input(input)
+00009a50: 0a0a 2020 2020 6966 2074 6f6b 656e 6675  ..    if tokenfu
+00009a60: 6e63 2069 7320 4e6f 6e65 3a0a 2020 2020  nc is None:.    
+00009a70: 2020 2020 2320 546f 6b65 6e69 7a65 2066      # Tokenize f
+00009a80: 756e 6374 696f 6e0a 2020 2020 2020 2020  unction.        
+00009a90: 6765 745f 746f 6b65 6e20 3d20 6c65 7865  get_token = lexe
+00009aa0: 722e 746f 6b65 6e0a 2020 2020 656c 7365  r.token.    else
+00009ab0: 3a0a 2020 2020 2020 2020 6765 745f 746f  :.        get_to
+00009ac0: 6b65 6e20 3d20 746f 6b65 6e66 756e 630a  ken = tokenfunc.
+00009ad0: 0a20 2020 2023 2053 6574 2075 7020 7468  .    # Set up th
+00009ae0: 6520 7374 6174 6520 616e 6420 7379 6d62  e state and symb
+00009af0: 6f6c 2073 7461 636b 730a 0a20 2020 206c  ol stacks..    l
+00009b00: 6f6f 6b61 6865 6164 7374 6163 6b20 3d20  ookaheadstack = 
+00009b10: 5b5d 2020 2320 5374 6163 6b20 6f66 206c  []  # Stack of l
+00009b20: 6f6f 6b61 6865 6164 2074 6f6b 656e 730a  ookahead tokens.
+00009b30: 2020 2020 7365 6c66 2e6c 6f6f 6b61 6865      self.lookahe
+00009b40: 6164 7374 6163 6b20 3d20 6c6f 6f6b 6168  adstack = lookah
+00009b50: 6561 6473 7461 636b 0a20 2020 2073 7461  eadstack.    sta
+00009b60: 7465 7374 6163 6b20 3d20 5b5d 2020 2320  testack = []  # 
+00009b70: 5374 6163 6b20 6f66 2070 6172 7369 6e67  Stack of parsing
+00009b80: 2073 7461 7465 730a 2020 2020 7365 6c66   states.    self
+00009b90: 2e73 7461 7465 7374 6163 6b20 3d20 7374  .statestack = st
+00009ba0: 6174 6573 7461 636b 0a20 2020 2073 796d  atestack.    sym
+00009bb0: 7374 6163 6b20 3d20 5b5d 2020 2320 5374  stack = []  # St
+00009bc0: 6163 6b20 6f66 2067 7261 6d6d 6172 2073  ack of grammar s
+00009bd0: 796d 626f 6c73 0a20 2020 2073 656c 662e  ymbols.    self.
+00009be0: 7379 6d73 7461 636b 203d 2073 796d 7374  symstack = symst
+00009bf0: 6163 6b0a 0a20 2020 2070 736c 6963 652e  ack..    pslice.
+00009c00: 7374 6163 6b20 3d20 7379 6d73 7461 636b  stack = symstack
+00009c10: 2020 2320 5075 7420 696e 2074 6865 2070    # Put in the p
+00009c20: 726f 6475 6374 696f 6e0a 2020 2020 6572  roduction.    er
+00009c30: 7274 6f6b 656e 203d 204e 6f6e 6520 2023  rtoken = None  #
+00009c40: 2045 7272 2074 6f6b 656e 0a0a 2020 2020   Err token..    
+00009c50: 2320 5468 6520 7374 6172 7420 7374 6174  # The start stat
+00009c60: 6520 6973 2061 7373 756d 6564 2074 6f20  e is assumed to 
+00009c70: 6265 2028 302c 2465 6e64 290a 0a20 2020  be (0,$end)..   
+00009c80: 2073 7461 7465 7374 6163 6b2e 6170 7065   statestack.appe
+00009c90: 6e64 2830 290a 2020 2020 7379 6d20 3d20  nd(0).    sym = 
+00009ca0: 5961 6363 5379 6d62 6f6c 2829 0a20 2020  YaccSymbol().   
+00009cb0: 2073 796d 2e74 7970 6520 3d20 2224 656e   sym.type = "$en
+00009cc0: 6422 0a20 2020 2073 796d 7374 6163 6b2e  d".    symstack.
+00009cd0: 6170 7065 6e64 2873 796d 290a 2020 2020  append(sym).    
+00009ce0: 7374 6174 6520 3d20 300a 2020 2020 7768  state = 0.    wh
+00009cf0: 696c 6520 313a 0a20 2020 2020 2020 2023  ile 1:.        #
+00009d00: 2047 6574 2074 6865 206e 6578 7420 7379   Get the next sy
+00009d10: 6d62 6f6c 206f 6e20 7468 6520 696e 7075  mbol on the inpu
+00009d20: 742e 2020 4966 2061 206c 6f6f 6b61 6865  t.  If a lookahe
+00009d30: 6164 2073 796d 626f 6c0a 2020 2020 2020  ad symbol.      
+00009d40: 2020 2320 6973 2061 6c72 6561 6479 2073    # is already s
+00009d50: 6574 2c20 7765 206a 7573 7420 7573 6520  et, we just use 
+00009d60: 7468 6174 2e20 4f74 6865 7277 6973 652c  that. Otherwise,
+00009d70: 2077 6527 6c6c 2070 756c 6c0a 2020 2020   we'll pull.    
+00009d80: 2020 2020 2320 7468 6520 6e65 7874 2074      # the next t
+00009d90: 6f6b 656e 206f 6666 206f 6620 7468 6520  oken off of the 
+00009da0: 6c6f 6f6b 6168 6561 6473 7461 636b 206f  lookaheadstack o
+00009db0: 7220 6672 6f6d 2074 6865 206c 6578 6572  r from the lexer
+00009dc0: 0a0a 2020 2020 2020 2020 2320 2d2d 2120  ..        # --! 
+00009dd0: 4445 4255 470a 2020 2020 2020 2020 6465  DEBUG.        de
+00009de0: 6275 672e 6465 6275 6728 2222 290a 2020  bug.debug("").  
+00009df0: 2020 2020 2020 6465 6275 672e 6465 6275        debug.debu
+00009e00: 6728 2253 7461 7465 2020 3a20 2573 222c  g("State  : %s",
+00009e10: 2073 7461 7465 290a 2020 2020 2020 2020   state).        
+00009e20: 2320 2d2d 2120 4445 4255 470a 0a20 2020  # --! DEBUG..   
+00009e30: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
+00009e40: 2e6c 6f6f 6b61 6865 6164 3a0a 2020 2020  .lookahead:.    
+00009e50: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
+00009e60: 656c 662e 6c6f 6f6b 6168 6561 6473 7461  elf.lookaheadsta
+00009e70: 636b 3a0a 2020 2020 2020 2020 2020 2020  ck:.            
+00009e80: 2020 2020 7365 6c66 2e6c 6f6f 6b61 6865      self.lookahe
+00009e90: 6164 203d 2067 6574 5f74 6f6b 656e 2829  ad = get_token()
+00009ea0: 2020 2320 4765 7420 7468 6520 6e65 7874    # Get the next
+00009eb0: 2074 6f6b 656e 0a20 2020 2020 2020 2020   token.         
+00009ec0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00009ed0: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
+00009ee0: 6f6b 6168 6561 6420 3d20 7365 6c66 2e6c  okahead = self.l
+00009ef0: 6f6f 6b61 6865 6164 7374 6163 6b2e 706f  ookaheadstack.po
+00009f00: 7028 290a 2020 2020 2020 2020 2020 2020  p().            
+00009f10: 6966 206e 6f74 2073 656c 662e 6c6f 6f6b  if not self.look
+00009f20: 6168 6561 643a 0a20 2020 2020 2020 2020  ahead:.         
+00009f30: 2020 2020 2020 2073 656c 662e 6c6f 6f6b         self.look
+00009f40: 6168 6561 6420 3d20 5961 6363 5379 6d62  ahead = YaccSymb
+00009f50: 6f6c 2829 0a20 2020 2020 2020 2020 2020  ol().           
+00009f60: 2020 2020 2073 656c 662e 6c6f 6f6b 6168       self.lookah
+00009f70: 6561 642e 7479 7065 203d 2022 2465 6e64  ead.type = "$end
+00009f80: 220a 0a20 2020 2020 2020 2023 202d 2d21  "..        # --!
+00009f90: 2044 4542 5547 0a20 2020 2020 2020 2064   DEBUG.        d
+00009fa0: 6562 7567 2e64 6562 7567 280a 2020 2020  ebug.debug(.    
+00009fb0: 2020 2020 2020 2020 2253 7461 636b 2020          "Stack  
+00009fc0: 3a20 2573 222c 0a20 2020 2020 2020 2020  : %s",.         
+00009fd0: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
+00009fe0: 2020 2020 2022 2573 202e 2025 7322 0a20       "%s . %s". 
+00009ff0: 2020 2020 2020 2020 2020 2020 2020 2025                 %
+0000a000: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+0000a010: 2020 2020 2020 2022 2022 2e6a 6f69 6e28         " ".join(
+0000a020: 5b78 782e 7479 7065 2066 6f72 2078 7820  [xx.type for xx 
+0000a030: 696e 2073 796d 7374 6163 6b5d 5b31 3a5d  in symstack][1:]
+0000a040: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+0000a050: 2020 2020 2020 2073 7472 2873 656c 662e         str(self.
+0000a060: 6c6f 6f6b 6168 6561 6429 2c0a 2020 2020  lookahead),.    
+0000a070: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0000a080: 2020 2020 2020 2020 2020 292e 6c73 7472            ).lstr
+0000a090: 6970 2829 2c0a 2020 2020 2020 2020 290a  ip(),.        ).
+0000a0a0: 2020 2020 2020 2020 2320 2d2d 2120 4445          # --! DE
+0000a0b0: 4255 470a 0a20 2020 2020 2020 2023 2043  BUG..        # C
+0000a0c0: 6865 636b 2074 6865 2061 6374 696f 6e20  heck the action 
+0000a0d0: 7461 626c 650a 2020 2020 2020 2020 6c74  table.        lt
+0000a0e0: 7970 6520 3d20 7365 6c66 2e6c 6f6f 6b61  ype = self.looka
+0000a0f0: 6865 6164 2e74 7970 650a 2020 2020 2020  head.type.      
+0000a100: 2020 7420 3d20 6163 7469 6f6e 735b 7374    t = actions[st
+0000a110: 6174 655d 2e67 6574 286c 7479 7065 290a  ate].get(ltype).
+0000a120: 0a20 2020 2020 2020 2023 2054 6869 7320  .        # This 
+0000a130: 6973 2061 2062 6164 2068 6163 6b20 746f  is a bad hack to
+0000a140: 2064 6561 6c20 7769 7468 204c 696c 7950   deal with LilyP
+0000a150: 6f6e 6427 7320 6261 636b 7570 2f72 6570  ond's backup/rep
+0000a160: 6172 7365 2072 6567 696d 650a 2020 2020  arse regime.    
+0000a170: 2020 2020 6966 2074 2069 7320 4e6f 6e65      if t is None
+0000a180: 3a0a 2020 2020 2020 2020 2020 2020 6120  :.            a 
+0000a190: 3d20 7365 7428 6163 7469 6f6e 735b 7374  = set(actions[st
+0000a1a0: 6174 655d 2e76 616c 7565 7328 2929 0a20  ate].values()). 
+0000a1b0: 2020 2020 2020 2020 2020 2069 6620 3120             if 1 
+0000a1c0: 3d3d 206c 656e 2861 293a 0a20 2020 2020  == len(a):.     
+0000a1d0: 2020 2020 2020 2020 2020 2074 203d 206c             t = l
+0000a1e0: 6973 7428 6129 5b30 5d0a 0a20 2020 2020  ist(a)[0]..     
+0000a1f0: 2020 2069 6620 7420 6973 206e 6f74 204e     if t is not N
+0000a200: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0000a210: 2069 6620 7420 3e20 303a 0a20 2020 2020   if t > 0:.     
+0000a220: 2020 2020 2020 2020 2020 2023 2073 6869             # shi
+0000a230: 6674 2061 2073 796d 626f 6c20 6f6e 2074  ft a symbol on t
+0000a240: 6865 2073 7461 636b 0a20 2020 2020 2020  he stack.       
+0000a250: 2020 2020 2020 2020 2073 7461 7465 7374           statest
+0000a260: 6163 6b2e 6170 7065 6e64 2874 290a 2020  ack.append(t).  
+0000a270: 2020 2020 2020 2020 2020 2020 2020 7374                st
+0000a280: 6174 6520 3d20 740a 0a20 2020 2020 2020  ate = t..       
+0000a290: 2020 2020 2020 2020 2023 202d 2d21 2044           # --! D
+0000a2a0: 4542 5547 0a20 2020 2020 2020 2020 2020  EBUG.           
+0000a2b0: 2020 2020 2064 6562 7567 2e64 6562 7567       debug.debug
+0000a2c0: 2822 4163 7469 6f6e 203a 2053 6869 6674  ("Action : Shift
+0000a2d0: 2061 6e64 2067 6f74 6f20 7374 6174 6520   and goto state 
+0000a2e0: 2573 222c 2074 290a 2020 2020 2020 2020  %s", t).        
+0000a2f0: 2020 2020 2020 2020 2320 2d2d 2120 4445          # --! DE
+0000a300: 4255 470a 0a20 2020 2020 2020 2020 2020  BUG..           
+0000a310: 2020 2020 2073 796d 7374 6163 6b2e 6170       symstack.ap
+0000a320: 7065 6e64 2873 656c 662e 6c6f 6f6b 6168  pend(self.lookah
+0000a330: 6561 6429 0a20 2020 2020 2020 2020 2020  ead).           
+0000a340: 2020 2020 2073 656c 662e 6c6f 6f6b 6168       self.lookah
+0000a350: 6561 6420 3d20 4e6f 6e65 0a0a 2020 2020  ead = None..    
+0000a360: 2020 2020 2020 2020 2020 2020 2320 4465              # De
+0000a370: 6372 6561 7365 2065 7272 6f72 2063 6f75  crease error cou
+0000a380: 6e74 206f 6e20 7375 6363 6573 7366 756c  nt on successful
+0000a390: 2073 6869 6674 0a20 2020 2020 2020 2020   shift.         
+0000a3a0: 2020 2020 2020 2069 6620 6572 726f 7263         if errorc
+0000a3b0: 6f75 6e74 3a0a 2020 2020 2020 2020 2020  ount:.          
+0000a3c0: 2020 2020 2020 2020 2020 6572 726f 7263            errorc
+0000a3d0: 6f75 6e74 202d 3d20 310a 2020 2020 2020  ount -= 1.      
+0000a3e0: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+0000a3f0: 7565 0a0a 2020 2020 2020 2020 2020 2020  ue..            
+0000a400: 6966 2074 203c 2030 3a0a 2020 2020 2020  if t < 0:.      
+0000a410: 2020 2020 2020 2020 2020 2320 7265 6475            # redu
+0000a420: 6365 2061 2073 796d 626f 6c20 6f6e 2074  ce a symbol on t
+0000a430: 6865 2073 7461 636b 2c20 656d 6974 2061  he stack, emit a
+0000a440: 2070 726f 6475 6374 696f 6e0a 2020 2020   production.    
+0000a450: 2020 2020 2020 2020 2020 2020 7020 3d20              p = 
+0000a460: 7072 6f64 5b2d 745d 0a20 2020 2020 2020  prod[-t].       
+0000a470: 2020 2020 2020 2020 2070 6e61 6d65 203d           pname =
+0000a480: 2070 2e6e 616d 650a 2020 2020 2020 2020   p.name.        
+0000a490: 2020 2020 2020 2020 706c 656e 203d 2070          plen = p
+0000a4a0: 2e6c 656e 0a0a 2020 2020 2020 2020 2020  .len..          
+0000a4b0: 2020 2020 2020 2320 4765 7420 7072 6f64        # Get prod
+0000a4c0: 7563 7469 6f6e 2066 756e 6374 696f 6e0a  uction function.
+0000a4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a4e0: 7379 6d20 3d20 5961 6363 5379 6d62 6f6c  sym = YaccSymbol
+0000a4f0: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
+0000a500: 2020 2073 796d 2e74 7970 6520 3d20 706e     sym.type = pn
+0000a510: 616d 6520 2023 2050 726f 6475 6374 696f  ame  # Productio
+0000a520: 6e20 6e61 6d65 0a20 2020 2020 2020 2020  n name.         
+0000a530: 2020 2020 2020 2073 796d 2e76 616c 7565         sym.value
+0000a540: 203d 204e 6f6e 650a 0a20 2020 2020 2020   = None..       
+0000a550: 2020 2020 2020 2020 2023 202d 2d21 2044           # --! D
+0000a560: 4542 5547 0a20 2020 2020 2020 2020 2020  EBUG.           
+0000a570: 2020 2020 2069 6620 706c 656e 3a0a 2020       if plen:.  
+0000a580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a590: 2020 6465 6275 672e 696e 666f 280a 2020    debug.info(.  
 0000a5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a5b0: 2241 6374 696f 6e20 3a20 5265 6475 6365  "Action : Reduce
-0000a5c0: 2072 756c 6520 5b25 735d 2077 6974 6820   rule [%s] with 
-0000a5d0: 2573 2061 6e64 2067 6f74 6f20 7374 6174  %s and goto stat
-0000a5e0: 6520 2564 222c 0a20 2020 2020 2020 2020  e %d",.         
-0000a5f0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000a600: 2e73 7472 2c0a 2020 2020 2020 2020 2020  .str,.          
-0000a610: 2020 2020 2020 2020 2020 2020 2020 225b                "[
-0000a620: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-0000a630: 2020 2020 2020 2020 2020 2b20 222c 222e            + ",".
-0000a640: 6a6f 696e 280a 2020 2020 2020 2020 2020  join(.          
+0000a5b0: 2020 2020 2020 2241 6374 696f 6e20 3a20        "Action : 
+0000a5c0: 5265 6475 6365 2072 756c 6520 5b25 735d  Reduce rule [%s]
+0000a5d0: 2077 6974 6820 2573 2061 6e64 2067 6f74   with %s and got
+0000a5e0: 6f20 7374 6174 6520 2564 222c 0a20 2020  o state %d",.   
+0000a5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a600: 2020 2020 2070 2e73 7472 2c0a 2020 2020       p.str,.    
+0000a610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a620: 2020 2020 225b 220a 2020 2020 2020 2020      "[".        
+0000a630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a640: 2b20 222c 222e 6a6f 696e 280a 2020 2020  + ",".join(.    
 0000a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a660: 2020 5b66 6f72 6d61 745f 7374 6163 6b5f    [format_stack_
-0000a670: 656e 7472 7928 5f76 2e76 616c 7565 2920  entry(_v.value) 
-0000a680: 666f 7220 5f76 2069 6e20 7379 6d73 7461  for _v in symsta
-0000a690: 636b 5b2d 706c 656e 3a5d 5d0a 2020 2020  ck[-plen:]].    
-0000a6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a6b0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-0000a6c0: 2020 2020 2020 2020 2020 2020 2020 2b20                + 
-0000a6d0: 225d 222c 0a20 2020 2020 2020 2020 2020  "]",.           
-0000a6e0: 2020 2020 2020 2020 2020 2020 202d 742c               -t,
-0000a6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a700: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-0000a710: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0000a720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a730: 2064 6562 7567 2e69 6e66 6f28 0a20 2020   debug.info(.   
-0000a740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a750: 2020 2020 2022 4163 7469 6f6e 203a 2052       "Action : R
-0000a760: 6564 7563 6520 7275 6c65 205b 2573 5d20  educe rule [%s] 
-0000a770: 7769 7468 2025 7320 616e 6420 676f 746f  with %s and goto
-0000a780: 2073 7461 7465 2025 6422 2c0a 2020 2020   state %d",.    
-0000a790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a7a0: 2020 2020 702e 7374 722c 0a20 2020 2020      p.str,.     
-0000a7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a7c0: 2020 205b 5d2c 0a20 2020 2020 2020 2020     [],.         
-0000a7d0: 2020 2020 2020 2020 2020 2020 2020 202d                 -
-0000a7e0: 742c 0a20 2020 2020 2020 2020 2020 2020  t,.             
-0000a7f0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000a800: 2020 2020 2020 2020 2023 202d 2d21 2044           # --! D
-0000a810: 4542 5547 0a0a 2020 2020 2020 2020 2020  EBUG..          
-0000a820: 2020 2020 2020 6966 2070 6c65 6e3a 0a20        if plen:. 
-0000a830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a840: 2020 2074 6172 6720 3d20 7379 6d73 7461     targ = symsta
-0000a850: 636b 5b2d 706c 656e 202d 2031 203a 5d0a  ck[-plen - 1 :].
-0000a860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a870: 2020 2020 7461 7267 5b30 5d20 3d20 7379      targ[0] = sy
-0000a880: 6d0a 0a20 2020 2020 2020 2020 2020 2020  m..             
-0000a890: 2020 2020 2020 2023 202d 2d21 2054 5241         # --! TRA
-0000a8a0: 434b 494e 470a 2020 2020 2020 2020 2020  CKING.          
-0000a8b0: 2020 2020 2020 2020 2020 6966 2074 7261            if tra
-0000a8c0: 636b 696e 673a 0a20 2020 2020 2020 2020  cking:.         
-0000a8d0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0000a8e0: 3120 3d20 7461 7267 5b31 5d0a 2020 2020  1 = targ[1].    
-0000a8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a900: 2020 2020 7379 6d2e 6c69 6e65 6e6f 203d      sym.lineno =
-0000a910: 2074 312e 6c69 6e65 6e6f 0a20 2020 2020   t1.lineno.     
-0000a920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a930: 2020 2073 796d 2e6c 6578 706f 7320 3d20     sym.lexpos = 
-0000a940: 7431 2e6c 6578 706f 730a 2020 2020 2020  t1.lexpos.      
+0000a660: 2020 2020 2020 2020 5b66 6f72 6d61 745f          [format_
+0000a670: 7374 6163 6b5f 656e 7472 7928 5f76 2e76  stack_entry(_v.v
+0000a680: 616c 7565 2920 666f 7220 5f76 2069 6e20  alue) for _v in 
+0000a690: 7379 6d73 7461 636b 5b2d 706c 656e 3a5d  symstack[-plen:]
+0000a6a0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+0000a6b0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0000a6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a6d0: 2020 2020 2b20 225d 222c 0a20 2020 2020      + "]",.     
+0000a6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a6f0: 2020 202d 742c 0a20 2020 2020 2020 2020     -t,.         
+0000a700: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0000a710: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0000a720: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000a730: 2020 2020 2020 2064 6562 7567 2e69 6e66         debug.inf
+0000a740: 6f28 0a20 2020 2020 2020 2020 2020 2020  o(.             
+0000a750: 2020 2020 2020 2020 2020 2022 4163 7469             "Acti
+0000a760: 6f6e 203a 2052 6564 7563 6520 7275 6c65  on : Reduce rule
+0000a770: 205b 2573 5d20 7769 7468 2025 7320 616e   [%s] with %s an
+0000a780: 6420 676f 746f 2073 7461 7465 2025 6422  d goto state %d"
+0000a790: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000a7a0: 2020 2020 2020 2020 2020 702e 7374 722c            p.str,
+0000a7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a7c0: 2020 2020 2020 2020 205b 5d2c 0a20 2020           [],.   
+0000a7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a7e0: 2020 2020 202d 742c 0a20 2020 2020 2020       -t,.       
+0000a7f0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
+0000a800: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000a810: 202d 2d21 2044 4542 5547 0a0a 2020 2020   --! DEBUG..    
+0000a820: 2020 2020 2020 2020 2020 2020 6966 2070              if p
+0000a830: 6c65 6e3a 0a20 2020 2020 2020 2020 2020  len:.           
+0000a840: 2020 2020 2020 2020 2074 6172 6720 3d20           targ = 
+0000a850: 7379 6d73 7461 636b 5b2d 706c 656e 202d  symstack[-plen -
+0000a860: 2031 203a 5d0a 2020 2020 2020 2020 2020   1 :].          
+0000a870: 2020 2020 2020 2020 2020 7461 7267 5b30            targ[0
+0000a880: 5d20 3d20 7379 6d0a 0a20 2020 2020 2020  ] = sym..       
+0000a890: 2020 2020 2020 2020 2020 2020 2023 202d               # -
+0000a8a0: 2d21 2054 5241 434b 494e 470a 2020 2020  -! TRACKING.    
+0000a8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8c0: 6966 2074 7261 636b 696e 673a 0a20 2020  if tracking:.   
+0000a8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8e0: 2020 2020 2074 3120 3d20 7461 7267 5b31       t1 = targ[1
+0000a8f0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+0000a900: 2020 2020 2020 2020 2020 7379 6d2e 6c69            sym.li
+0000a910: 6e65 6e6f 203d 2074 312e 6c69 6e65 6e6f  neno = t1.lineno
+0000a920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a930: 2020 2020 2020 2020 2073 796d 2e6c 6578           sym.lex
+0000a940: 706f 7320 3d20 7431 2e6c 6578 706f 730a  pos = t1.lexpos.
 0000a950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a960: 2020 7431 203d 2074 6172 675b 2d31 5d0a    t1 = targ[-1].
-0000a970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a980: 2020 2020 2020 2020 7379 6d2e 656e 646c          sym.endl
-0000a990: 696e 656e 6f20 3d20 6765 7461 7474 7228  ineno = getattr(
-0000a9a0: 7431 2c20 2265 6e64 6c69 6e65 6e6f 222c  t1, "endlineno",
-0000a9b0: 2074 312e 6c69 6e65 6e6f 290a 2020 2020   t1.lineno).    
-0000a9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9d0: 2020 2020 7379 6d2e 656e 646c 6578 706f      sym.endlexpo
-0000a9e0: 7320 3d20 6765 7461 7474 7228 7431 2c20  s = getattr(t1, 
-0000a9f0: 2265 6e64 6c65 7870 6f73 222c 2074 312e  "endlexpos", t1.
-0000aa00: 6c65 7870 6f73 290a 0a20 2020 2020 2020  lexpos)..       
-0000aa10: 2020 2020 2020 2020 2020 2020 2023 202d               # -
-0000aa20: 2d21 2054 5241 434b 494e 470a 0a20 2020  -! TRACKING..   
-0000aa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa40: 2023 2021 2121 2121 2121 2121 2121 2121   # !!!!!!!!!!!!!
+0000a960: 2020 2020 2020 2020 7431 203d 2074 6172          t1 = tar
+0000a970: 675b 2d31 5d0a 2020 2020 2020 2020 2020  g[-1].          
+0000a980: 2020 2020 2020 2020 2020 2020 2020 7379                sy
+0000a990: 6d2e 656e 646c 696e 656e 6f20 3d20 6765  m.endlineno = ge
+0000a9a0: 7461 7474 7228 7431 2c20 2265 6e64 6c69  tattr(t1, "endli
+0000a9b0: 6e65 6e6f 222c 2074 312e 6c69 6e65 6e6f  neno", t1.lineno
+0000a9c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000a9d0: 2020 2020 2020 2020 2020 7379 6d2e 656e            sym.en
+0000a9e0: 646c 6578 706f 7320 3d20 6765 7461 7474  dlexpos = getatt
+0000a9f0: 7228 7431 2c20 2265 6e64 6c65 7870 6f73  r(t1, "endlexpos
+0000aa00: 222c 2074 312e 6c65 7870 6f73 290a 0a20  ", t1.lexpos).. 
+0000aa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aa20: 2020 2023 202d 2d21 2054 5241 434b 494e     # --! TRACKIN
+0000aa30: 470a 0a20 2020 2020 2020 2020 2020 2020  G..             
+0000aa40: 2020 2020 2020 2023 2021 2121 2121 2121         # !!!!!!!
 0000aa50: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
 0000aa60: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
-0000aa70: 2121 2121 210a 2020 2020 2020 2020 2020  !!!!!.          
-0000aa80: 2020 2020 2020 2020 2020 2320 5468 6520            # The 
-0000aa90: 636f 6465 2065 6e63 6c6f 7365 6420 696e  code enclosed in
-0000aaa0: 2074 6869 7320 7365 6374 696f 6e20 6973   this section is
-0000aab0: 2064 7570 6c69 6361 7465 640a 2020 2020   duplicated.    
-0000aac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aad0: 2320 6265 6c6f 7720 6173 2061 2070 6572  # below as a per
-0000aae0: 666f 726d 616e 6365 206f 7074 696d 697a  formance optimiz
-0000aaf0: 6174 696f 6e2e 2020 4d61 6b65 2073 7572  ation.  Make sur
-0000ab00: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0000ab10: 2020 2020 2020 2320 6368 616e 6765 7320        # changes 
-0000ab20: 6765 7420 6d61 6465 2069 6e20 626f 7468  get made in both
-0000ab30: 206c 6f63 6174 696f 6e73 2e0a 0a20 2020   locations...   
-0000ab40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab50: 2070 736c 6963 652e 736c 6963 6520 3d20   pslice.slice = 
-0000ab60: 7461 7267 0a0a 2020 2020 2020 2020 2020  targ..          
-0000ab70: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-0000ab80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab90: 2020 2020 2020 2023 2043 616c 6c20 7468         # Call th
-0000aba0: 6520 6772 616d 6d61 7220 7275 6c65 2077  e grammar rule w
-0000abb0: 6974 6820 6f75 7220 7370 6563 6961 6c20  ith our special 
-0000abc0: 736c 6963 6520 6f62 6a65 6374 0a20 2020  slice object.   
-0000abd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000abe0: 2020 2020 2064 656c 2073 796d 7374 6163       del symstac
-0000abf0: 6b5b 2d70 6c65 6e3a 5d0a 2020 2020 2020  k[-plen:].      
+0000aa70: 2121 2121 2121 2121 2121 210a 2020 2020  !!!!!!!!!!!.    
+0000aa80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aa90: 2320 5468 6520 636f 6465 2065 6e63 6c6f  # The code enclo
+0000aaa0: 7365 6420 696e 2074 6869 7320 7365 6374  sed in this sect
+0000aab0: 696f 6e20 6973 2064 7570 6c69 6361 7465  ion is duplicate
+0000aac0: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
+0000aad0: 2020 2020 2020 2320 6265 6c6f 7720 6173        # below as
+0000aae0: 2061 2070 6572 666f 726d 616e 6365 206f   a performance o
+0000aaf0: 7074 696d 697a 6174 696f 6e2e 2020 4d61  ptimization.  Ma
+0000ab00: 6b65 2073 7572 650a 2020 2020 2020 2020  ke sure.        
+0000ab10: 2020 2020 2020 2020 2020 2020 2320 6368              # ch
+0000ab20: 616e 6765 7320 6765 7420 6d61 6465 2069  anges get made i
+0000ab30: 6e20 626f 7468 206c 6f63 6174 696f 6e73  n both locations
+0000ab40: 2e0a 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000ab50: 2020 2020 2020 2070 736c 6963 652e 736c         pslice.sl
+0000ab60: 6963 6520 3d20 7461 7267 0a0a 2020 2020  ice = targ..    
+0000ab70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab80: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+0000ab90: 2020 2020 2020 2020 2020 2020 2023 2043               # C
+0000aba0: 616c 6c20 7468 6520 6772 616d 6d61 7220  all the grammar 
+0000abb0: 7275 6c65 2077 6974 6820 6f75 7220 7370  rule with our sp
+0000abc0: 6563 6961 6c20 736c 6963 6520 6f62 6a65  ecial slice obje
+0000abd0: 6374 0a20 2020 2020 2020 2020 2020 2020  ct.             
+0000abe0: 2020 2020 2020 2020 2020 2064 656c 2073             del s
+0000abf0: 796d 7374 6163 6b5b 2d70 6c65 6e3a 5d0a  ymstack[-plen:].
 0000ac00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac10: 2020 6465 6c20 7374 6174 6573 7461 636b    del statestack
-0000ac20: 5b2d 706c 656e 3a5d 0a20 2020 2020 2020  [-plen:].       
+0000ac10: 2020 2020 2020 2020 6465 6c20 7374 6174          del stat
+0000ac20: 6573 7461 636b 5b2d 706c 656e 3a5d 0a20  estack[-plen:]. 
 0000ac30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac40: 2070 2e63 616c 6c61 626c 6528 7073 6c69   p.callable(psli
-0000ac50: 6365 290a 2020 2020 2020 2020 2020 2020  ce).            
-0000ac60: 2020 2020 2020 2020 2020 2020 2320 2d2d              # --
-0000ac70: 2120 4445 4255 470a 2020 2020 2020 2020  ! DEBUG.        
+0000ac40: 2020 2020 2020 2070 2e63 616c 6c61 626c         p.callabl
+0000ac50: 6528 7073 6c69 6365 290a 2020 2020 2020  e(pslice).      
+0000ac60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac70: 2020 2320 2d2d 2120 4445 4255 470a 2020    # --! DEBUG.  
 0000ac80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac90: 6465 6275 672e 696e 666f 2822 5265 7375  debug.info("Resu
-0000aca0: 6c74 203a 2025 7322 2c20 666f 726d 6174  lt : %s", format
-0000acb0: 5f72 6573 756c 7428 7073 6c69 6365 5b30  _result(pslice[0
-0000acc0: 5d29 290a 2020 2020 2020 2020 2020 2020  ])).            
-0000acd0: 2020 2020 2020 2020 2020 2020 2320 2d2d              # --
-0000ace0: 2120 4445 4255 470a 2020 2020 2020 2020  ! DEBUG.        
+0000ac90: 2020 2020 2020 6465 6275 672e 696e 666f        debug.info
+0000aca0: 2822 5265 7375 6c74 203a 2025 7322 2c20  ("Result : %s", 
+0000acb0: 666f 726d 6174 5f72 6573 756c 7428 7073  format_result(ps
+0000acc0: 6c69 6365 5b30 5d29 290a 2020 2020 2020  lice[0])).      
+0000acd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ace0: 2020 2320 2d2d 2120 4445 4255 470a 2020    # --! DEBUG.  
 0000acf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad00: 7379 6d73 7461 636b 2e61 7070 656e 6428  symstack.append(
-0000ad10: 7379 6d29 0a20 2020 2020 2020 2020 2020  sym).           
-0000ad20: 2020 2020 2020 2020 2020 2020 2073 7461               sta
-0000ad30: 7465 203d 2067 6f74 6f5b 7374 6174 6573  te = goto[states
-0000ad40: 7461 636b 5b2d 315d 5d5b 706e 616d 655d  tack[-1]][pname]
-0000ad50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ad60: 2020 2020 2020 2020 2073 7461 7465 7374           statest
-0000ad70: 6163 6b2e 6170 7065 6e64 2873 7461 7465  ack.append(state
-0000ad80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000ad90: 2020 2020 2020 6578 6365 7074 2053 796e        except Syn
-0000ada0: 7461 7845 7272 6f72 3a0a 2020 2020 2020  taxError:.      
+0000ad00: 2020 2020 2020 7379 6d73 7461 636b 2e61        symstack.a
+0000ad10: 7070 656e 6428 7379 6d29 0a20 2020 2020  ppend(sym).     
+0000ad20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad30: 2020 2073 7461 7465 203d 2067 6f74 6f5b     state = goto[
+0000ad40: 7374 6174 6573 7461 636b 5b2d 315d 5d5b  statestack[-1]][
+0000ad50: 706e 616d 655d 0a20 2020 2020 2020 2020  pname].         
+0000ad60: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000ad70: 7461 7465 7374 6163 6b2e 6170 7065 6e64  tatestack.append
+0000ad80: 2873 7461 7465 290a 2020 2020 2020 2020  (state).        
+0000ad90: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+0000ada0: 7074 2053 796e 7461 7845 7272 6f72 3a0a  pt SyntaxError:.
 0000adb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000adc0: 2020 2320 4966 2061 6e20 6572 726f 7220    # If an error 
-0000add0: 7761 7320 7365 742e 2045 6e74 6572 2065  was set. Enter e
-0000ade0: 7272 6f72 2072 6563 6f76 6572 7920 7374  rror recovery st
-0000adf0: 6174 650a 2020 2020 2020 2020 2020 2020  ate.            
-0000ae00: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000ae10: 2e6c 6f6f 6b61 6865 6164 7374 6163 6b2e  .lookaheadstack.
-0000ae20: 6170 7065 6e64 2873 656c 662e 6c6f 6f6b  append(self.look
-0000ae30: 6168 6561 6429 0a20 2020 2020 2020 2020  ahead).         
-0000ae40: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000ae50: 796d 7374 6163 6b2e 706f 7028 290a 2020  ymstack.pop().  
-0000ae60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae70: 2020 2020 2020 7374 6174 6573 7461 636b        statestack
-0000ae80: 2e70 6f70 2829 0a20 2020 2020 2020 2020  .pop().         
-0000ae90: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000aea0: 7461 7465 203d 2073 7461 7465 7374 6163  tate = statestac
-0000aeb0: 6b5b 2d31 5d0a 2020 2020 2020 2020 2020  k[-1].          
-0000aec0: 2020 2020 2020 2020 2020 2020 2020 7379                sy
-0000aed0: 6d2e 7479 7065 203d 2022 6572 726f 7222  m.type = "error"
-0000aee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000aef0: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
-0000af00: 6f6b 6168 6561 6420 3d20 7379 6d0a 2020  okahead = sym.  
-0000af10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af20: 2020 2020 2020 6572 726f 7263 6f75 6e74        errorcount
-0000af30: 203d 2065 7272 6f72 5f63 6f75 6e74 0a20   = error_count. 
-0000af40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af50: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
-0000af60: 726f 6b20 3d20 300a 2020 2020 2020 2020  rok = 0.        
-0000af70: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-0000af80: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
-0000af90: 2020 2020 2020 2020 2023 2021 2121 2121           # !!!!!
-0000afa0: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
+0000adc0: 2020 2020 2020 2020 2320 4966 2061 6e20          # If an 
+0000add0: 6572 726f 7220 7761 7320 7365 742e 2045  error was set. E
+0000ade0: 6e74 6572 2065 7272 6f72 2072 6563 6f76  nter error recov
+0000adf0: 6572 7920 7374 6174 650a 2020 2020 2020  ery state.      
+0000ae00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ae10: 2020 7365 6c66 2e6c 6f6f 6b61 6865 6164    self.lookahead
+0000ae20: 7374 6163 6b2e 6170 7065 6e64 2873 656c  stack.append(sel
+0000ae30: 662e 6c6f 6f6b 6168 6561 6429 0a20 2020  f.lookahead).   
+0000ae40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ae50: 2020 2020 2073 796d 7374 6163 6b2e 706f       symstack.po
+0000ae60: 7028 290a 2020 2020 2020 2020 2020 2020  p().            
+0000ae70: 2020 2020 2020 2020 2020 2020 7374 6174              stat
+0000ae80: 6573 7461 636b 2e70 6f70 2829 0a20 2020  estack.pop().   
+0000ae90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aea0: 2020 2020 2073 7461 7465 203d 2073 7461       state = sta
+0000aeb0: 7465 7374 6163 6b5b 2d31 5d0a 2020 2020  testack[-1].    
+0000aec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aed0: 2020 2020 7379 6d2e 7479 7065 203d 2022      sym.type = "
+0000aee0: 6572 726f 7222 0a20 2020 2020 2020 2020  error".         
+0000aef0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000af00: 656c 662e 6c6f 6f6b 6168 6561 6420 3d20  elf.lookahead = 
+0000af10: 7379 6d0a 2020 2020 2020 2020 2020 2020  sym.            
+0000af20: 2020 2020 2020 2020 2020 2020 6572 726f              erro
+0000af30: 7263 6f75 6e74 203d 2065 7272 6f72 5f63  rcount = error_c
+0000af40: 6f75 6e74 0a20 2020 2020 2020 2020 2020  ount.           
+0000af50: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000af60: 662e 6572 726f 726f 6b20 3d20 300a 2020  f.errorok = 0.  
+0000af70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000af80: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
+0000af90: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000afa0: 2021 2121 2121 2121 2121 2121 2121 2121   !!!!!!!!!!!!!!!
 0000afb0: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
-0000afc0: 2121 2121 2121 2121 2121 2121 210a 0a20  !!!!!!!!!!!!!.. 
-0000afd0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000afe0: 6c73 653a 0a0a 2020 2020 2020 2020 2020  lse:..          
-0000aff0: 2020 2020 2020 2020 2020 2320 2d2d 2120            # --! 
-0000b000: 5452 4143 4b49 4e47 0a20 2020 2020 2020  TRACKING.       
-0000b010: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000b020: 7472 6163 6b69 6e67 3a0a 2020 2020 2020  tracking:.      
+0000afc0: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
+0000afd0: 2121 210a 0a20 2020 2020 2020 2020 2020  !!!..           
+0000afe0: 2020 2020 2065 6c73 653a 0a0a 2020 2020       else:..    
+0000aff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b000: 2320 2d2d 2120 5452 4143 4b49 4e47 0a20  # --! TRACKING. 
+0000b010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b020: 2020 2069 6620 7472 6163 6b69 6e67 3a0a     if tracking:.
 0000b030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b040: 2020 7379 6d2e 6c69 6e65 6e6f 203d 206c    sym.lineno = l
-0000b050: 6578 6572 2e6c 696e 656e 6f0a 2020 2020  exer.lineno.    
-0000b060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b070: 2020 2020 7379 6d2e 6c65 7870 6f73 203d      sym.lexpos =
-0000b080: 206c 6578 6572 2e6c 6578 706f 730a 2020   lexer.lexpos.  
-0000b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0a0: 2020 2320 2d2d 2120 5452 4143 4b49 4e47    # --! TRACKING
-0000b0b0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b0c0: 2020 2020 2020 7461 7267 203d 205b 7379        targ = [sy
-0000b0d0: 6d5d 0a0a 2020 2020 2020 2020 2020 2020  m]..            
-0000b0e0: 2020 2020 2020 2020 2320 2121 2121 2121          # !!!!!!
+0000b040: 2020 2020 2020 2020 7379 6d2e 6c69 6e65          sym.line
+0000b050: 6e6f 203d 206c 6578 6572 2e6c 696e 656e  no = lexer.linen
+0000b060: 6f0a 2020 2020 2020 2020 2020 2020 2020  o.              
+0000b070: 2020 2020 2020 2020 2020 7379 6d2e 6c65            sym.le
+0000b080: 7870 6f73 203d 206c 6578 6572 2e6c 6578  xpos = lexer.lex
+0000b090: 706f 730a 2020 2020 2020 2020 2020 2020  pos.            
+0000b0a0: 2020 2020 2020 2020 2320 2d2d 2120 5452          # --! TR
+0000b0b0: 4143 4b49 4e47 0a0a 2020 2020 2020 2020  ACKING..        
+0000b0c0: 2020 2020 2020 2020 2020 2020 7461 7267              targ
+0000b0d0: 203d 205b 7379 6d5d 0a0a 2020 2020 2020   = [sym]..      
+0000b0e0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
 0000b0f0: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
 0000b100: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
-0000b110: 2121 2121 2121 2121 2121 2121 0a20 2020  !!!!!!!!!!!!.   
-0000b120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b130: 2023 2054 6865 2063 6f64 6520 656e 636c   # The code encl
-0000b140: 6f73 6564 2069 6e20 7468 6973 2073 6563  osed in this sec
-0000b150: 7469 6f6e 2069 7320 6475 706c 6963 6174  tion is duplicat
-0000b160: 6564 0a20 2020 2020 2020 2020 2020 2020  ed.             
-0000b170: 2020 2020 2020 2023 2061 626f 7665 2061         # above a
-0000b180: 7320 6120 7065 7266 6f72 6d61 6e63 6520  s a performance 
-0000b190: 6f70 7469 6d69 7a61 7469 6f6e 2e20 204d  optimization.  M
-0000b1a0: 616b 6520 7375 7265 0a20 2020 2020 2020  ake sure.       
-0000b1b0: 2020 2020 2020 2020 2020 2020 2023 2063               # c
-0000b1c0: 6861 6e67 6573 2067 6574 206d 6164 6520  hanges get made 
-0000b1d0: 696e 2062 6f74 6820 6c6f 6361 7469 6f6e  in both location
-0000b1e0: 732e 0a0a 2020 2020 2020 2020 2020 2020  s...            
-0000b1f0: 2020 2020 2020 2020 7073 6c69 6365 2e73          pslice.s
-0000b200: 6c69 6365 203d 2074 6172 670a 0a20 2020  lice = targ..   
-0000b210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b220: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-0000b230: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000b240: 4361 6c6c 2074 6865 2067 7261 6d6d 6172  Call the grammar
-0000b250: 2072 756c 6520 7769 7468 206f 7572 2073   rule with our s
-0000b260: 7065 6369 616c 2073 6c69 6365 206f 626a  pecial slice obj
-0000b270: 6563 740a 2020 2020 2020 2020 2020 2020  ect.            
-0000b280: 2020 2020 2020 2020 2020 2020 702e 6361              p.ca
-0000b290: 6c6c 6162 6c65 2870 736c 6963 6529 0a20  llable(pslice). 
-0000b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b2b0: 2020 2020 2020 2023 202d 2d21 2044 4542         # --! DEB
-0000b2c0: 5547 0a20 2020 2020 2020 2020 2020 2020  UG.             
-0000b2d0: 2020 2020 2020 2020 2020 2064 6562 7567             debug
-0000b2e0: 2e69 6e66 6f28 2252 6573 756c 7420 3a20  .info("Result : 
-0000b2f0: 2573 222c 2066 6f72 6d61 745f 7265 7375  %s", format_resu
-0000b300: 6c74 2870 736c 6963 655b 305d 2929 0a20  lt(pslice[0])). 
-0000b310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b320: 2020 2020 2020 2023 202d 2d21 2044 4542         # --! DEB
-0000b330: 5547 0a20 2020 2020 2020 2020 2020 2020  UG.             
-0000b340: 2020 2020 2020 2020 2020 2073 796d 7374             symst
-0000b350: 6163 6b2e 6170 7065 6e64 2873 796d 290a  ack.append(sym).
-0000b360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b370: 2020 2020 2020 2020 7374 6174 6520 3d20          state = 
-0000b380: 676f 746f 5b73 7461 7465 7374 6163 6b5b  goto[statestack[
-0000b390: 2d31 5d5d 5b70 6e61 6d65 5d0a 2020 2020  -1]][pname].    
-0000b3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3b0: 2020 2020 7374 6174 6573 7461 636b 2e61      statestack.a
-0000b3c0: 7070 656e 6428 7374 6174 6529 0a20 2020  ppend(state).   
-0000b3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3e0: 2065 7863 6570 7420 5379 6e74 6178 4572   except SyntaxEr
-0000b3f0: 726f 723a 0a20 2020 2020 2020 2020 2020  ror:.           
-0000b400: 2020 2020 2020 2020 2020 2020 2023 2049               # I
-0000b410: 6620 616e 2065 7272 6f72 2077 6173 2073  f an error was s
-0000b420: 6574 2e20 456e 7465 7220 6572 726f 7220  et. Enter error 
-0000b430: 7265 636f 7665 7279 2073 7461 7465 0a20  recovery state. 
-0000b440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b450: 2020 2020 2020 2073 656c 662e 6c6f 6f6b         self.look
-0000b460: 6168 6561 6473 7461 636b 2e61 7070 656e  aheadstack.appen
-0000b470: 6428 7365 6c66 2e6c 6f6f 6b61 6865 6164  d(self.lookahead
-0000b480: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000b490: 2020 2020 2020 2020 2020 7379 6d73 7461            symsta
-0000b4a0: 636b 2e70 6f70 2829 0a20 2020 2020 2020  ck.pop().       
+0000b110: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
+0000b120: 2121 0a20 2020 2020 2020 2020 2020 2020  !!.             
+0000b130: 2020 2020 2020 2023 2054 6865 2063 6f64         # The cod
+0000b140: 6520 656e 636c 6f73 6564 2069 6e20 7468  e enclosed in th
+0000b150: 6973 2073 6563 7469 6f6e 2069 7320 6475  is section is du
+0000b160: 706c 6963 6174 6564 0a20 2020 2020 2020  plicated.       
+0000b170: 2020 2020 2020 2020 2020 2020 2023 2061               # a
+0000b180: 626f 7665 2061 7320 6120 7065 7266 6f72  bove as a perfor
+0000b190: 6d61 6e63 6520 6f70 7469 6d69 7a61 7469  mance optimizati
+0000b1a0: 6f6e 2e20 204d 616b 6520 7375 7265 0a20  on.  Make sure. 
+0000b1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b1c0: 2020 2023 2063 6861 6e67 6573 2067 6574     # changes get
+0000b1d0: 206d 6164 6520 696e 2062 6f74 6820 6c6f   made in both lo
+0000b1e0: 6361 7469 6f6e 732e 0a0a 2020 2020 2020  cations...      
+0000b1f0: 2020 2020 2020 2020 2020 2020 2020 7073                ps
+0000b200: 6c69 6365 2e73 6c69 6365 203d 2074 6172  lice.slice = tar
+0000b210: 670a 0a20 2020 2020 2020 2020 2020 2020  g..             
+0000b220: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+0000b230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b240: 2020 2020 2320 4361 6c6c 2074 6865 2067      # Call the g
+0000b250: 7261 6d6d 6172 2072 756c 6520 7769 7468  rammar rule with
+0000b260: 206f 7572 2073 7065 6369 616c 2073 6c69   our special sli
+0000b270: 6365 206f 626a 6563 740a 2020 2020 2020  ce object.      
+0000b280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b290: 2020 702e 6361 6c6c 6162 6c65 2870 736c    p.callable(psl
+0000b2a0: 6963 6529 0a20 2020 2020 2020 2020 2020  ice).           
+0000b2b0: 2020 2020 2020 2020 2020 2020 2023 202d               # -
+0000b2c0: 2d21 2044 4542 5547 0a20 2020 2020 2020  -! DEBUG.       
+0000b2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b2e0: 2064 6562 7567 2e69 6e66 6f28 2252 6573   debug.info("Res
+0000b2f0: 756c 7420 3a20 2573 222c 2066 6f72 6d61  ult : %s", forma
+0000b300: 745f 7265 7375 6c74 2870 736c 6963 655b  t_result(pslice[
+0000b310: 305d 2929 0a20 2020 2020 2020 2020 2020  0])).           
+0000b320: 2020 2020 2020 2020 2020 2020 2023 202d               # -
+0000b330: 2d21 2044 4542 5547 0a20 2020 2020 2020  -! DEBUG.       
+0000b340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b350: 2073 796d 7374 6163 6b2e 6170 7065 6e64   symstack.append
+0000b360: 2873 796d 290a 2020 2020 2020 2020 2020  (sym).          
+0000b370: 2020 2020 2020 2020 2020 2020 2020 7374                st
+0000b380: 6174 6520 3d20 676f 746f 5b73 7461 7465  ate = goto[state
+0000b390: 7374 6163 6b5b 2d31 5d5d 5b70 6e61 6d65  stack[-1]][pname
+0000b3a0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+0000b3b0: 2020 2020 2020 2020 2020 7374 6174 6573            states
+0000b3c0: 7461 636b 2e61 7070 656e 6428 7374 6174  tack.append(stat
+0000b3d0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+0000b3e0: 2020 2020 2020 2065 7863 6570 7420 5379         except Sy
+0000b3f0: 6e74 6178 4572 726f 723a 0a20 2020 2020  ntaxError:.     
+0000b400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b410: 2020 2023 2049 6620 616e 2065 7272 6f72     # If an error
+0000b420: 2077 6173 2073 6574 2e20 456e 7465 7220   was set. Enter 
+0000b430: 6572 726f 7220 7265 636f 7665 7279 2073  error recovery s
+0000b440: 7461 7465 0a20 2020 2020 2020 2020 2020  tate.           
+0000b450: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000b460: 662e 6c6f 6f6b 6168 6561 6473 7461 636b  f.lookaheadstack
+0000b470: 2e61 7070 656e 6428 7365 6c66 2e6c 6f6f  .append(self.loo
+0000b480: 6b61 6865 6164 290a 2020 2020 2020 2020  kahead).        
+0000b490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b4a0: 7379 6d73 7461 636b 2e70 6f70 2829 0a20  symstack.pop(). 
 0000b4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b4c0: 2073 7461 7465 7374 6163 6b2e 706f 7028   statestack.pop(
-0000b4d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000b4e0: 2020 2020 2020 2020 2020 7374 6174 6520            state 
-0000b4f0: 3d20 7374 6174 6573 7461 636b 5b2d 315d  = statestack[-1]
-0000b500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b510: 2020 2020 2020 2020 2073 796d 2e74 7970           sym.typ
-0000b520: 6520 3d20 2265 7272 6f72 220a 2020 2020  e = "error".    
-0000b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b540: 2020 2020 7365 6c66 2e6c 6f6f 6b61 6865      self.lookahe
-0000b550: 6164 203d 2073 796d 0a20 2020 2020 2020  ad = sym.       
+0000b4c0: 2020 2020 2020 2073 7461 7465 7374 6163         statestac
+0000b4d0: 6b2e 706f 7028 290a 2020 2020 2020 2020  k.pop().        
+0000b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b4f0: 7374 6174 6520 3d20 7374 6174 6573 7461  state = statesta
+0000b500: 636b 5b2d 315d 0a20 2020 2020 2020 2020  ck[-1].         
+0000b510: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000b520: 796d 2e74 7970 6520 3d20 2265 7272 6f72  ym.type = "error
+0000b530: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0000b540: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+0000b550: 6f6f 6b61 6865 6164 203d 2073 796d 0a20  ookahead = sym. 
 0000b560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b570: 2065 7272 6f72 636f 756e 7420 3d20 6572   errorcount = er
-0000b580: 726f 725f 636f 756e 740a 2020 2020 2020  ror_count.      
+0000b570: 2020 2020 2020 2065 7272 6f72 636f 756e         errorcoun
+0000b580: 7420 3d20 6572 726f 725f 636f 756e 740a  t = error_count.
 0000b590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b5a0: 2020 7365 6c66 2e65 7272 6f72 6f6b 203d    self.errorok =
-0000b5b0: 2030 0a20 2020 2020 2020 2020 2020 2020   0.             
-0000b5c0: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-0000b5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b5e0: 2020 2020 2320 2121 2121 2121 2121 2121      # !!!!!!!!!!
+0000b5a0: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
+0000b5b0: 6f72 6f6b 203d 2030 0a20 2020 2020 2020  orok = 0.       
+0000b5c0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+0000b5d0: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+0000b5e0: 2020 2020 2020 2020 2020 2320 2121 2121            # !!!!
 0000b5f0: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
 0000b600: 2121 2121 2121 2121 2121 2121 2121 2121  !!!!!!!!!!!!!!!!
-0000b610: 2121 2121 2121 2121 0a0a 2020 2020 2020  !!!!!!!!..      
-0000b620: 2020 2020 2020 6966 2074 203d 3d20 303a        if t == 0:
-0000b630: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b640: 206e 203d 2073 796d 7374 6163 6b5b 2d31   n = symstack[-1
-0000b650: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-0000b660: 2020 7265 7375 6c74 203d 2067 6574 6174    result = getat
-0000b670: 7472 286e 2c20 2276 616c 7565 222c 204e  tr(n, "value", N
-0000b680: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-0000b690: 2020 2020 2023 202d 2d21 2044 4542 5547       # --! DEBUG
-0000b6a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b6b0: 2064 6562 7567 2e69 6e66 6f28 2244 6f6e   debug.info("Don
-0000b6c0: 6520 2020 3a20 5265 7475 726e 696e 6720  e   : Returning 
-0000b6d0: 2573 222c 2066 6f72 6d61 745f 7265 7375  %s", format_resu
-0000b6e0: 6c74 2872 6573 756c 7429 290a 2020 2020  lt(result)).    
-0000b6f0: 2020 2020 2020 2020 2020 2020 6465 6275              debu
-0000b700: 672e 696e 666f 2822 504c 593a 2050 4152  g.info("PLY: PAR
-0000b710: 5345 2044 4542 5547 2045 4e44 2229 0a20  SE DEBUG END"). 
-0000b720: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000b730: 202d 2d21 2044 4542 5547 0a20 2020 2020   --! DEBUG.     
-0000b740: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000b750: 6e20 7265 7375 6c74 0a0a 2020 2020 2020  n result..      
-0000b760: 2020 6966 2074 2069 7320 4e6f 6e65 3a0a    if t is None:.
-0000b770: 0a20 2020 2020 2020 2020 2020 2023 202d  .            # -
-0000b780: 2d21 2044 4542 5547 0a20 2020 2020 2020  -! DEBUG.       
-0000b790: 2020 2020 2064 6562 7567 2e65 7272 6f72       debug.error
-0000b7a0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000b7b0: 2020 2245 7272 6f72 2020 3a20 2573 222c    "Error  : %s",
-0000b7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b7d0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
-0000b7e0: 2020 2020 2020 2022 2573 202e 2025 7322         "%s . %s"
-0000b7f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b800: 2020 2020 2025 2028 0a20 2020 2020 2020       % (.       
+0000b610: 2121 2121 2121 2121 2121 2121 2121 0a0a  !!!!!!!!!!!!!!..
+0000b620: 2020 2020 2020 2020 2020 2020 6966 2074              if t
+0000b630: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
+0000b640: 2020 2020 2020 206e 203d 2073 796d 7374         n = symst
+0000b650: 6163 6b5b 2d31 5d0a 2020 2020 2020 2020  ack[-1].        
+0000b660: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+0000b670: 2067 6574 6174 7472 286e 2c20 2276 616c   getattr(n, "val
+0000b680: 7565 222c 204e 6f6e 6529 0a20 2020 2020  ue", None).     
+0000b690: 2020 2020 2020 2020 2020 2023 202d 2d21             # --!
+0000b6a0: 2044 4542 5547 0a20 2020 2020 2020 2020   DEBUG.         
+0000b6b0: 2020 2020 2020 2064 6562 7567 2e69 6e66         debug.inf
+0000b6c0: 6f28 2244 6f6e 6520 2020 3a20 5265 7475  o("Done   : Retu
+0000b6d0: 726e 696e 6720 2573 222c 2066 6f72 6d61  rning %s", forma
+0000b6e0: 745f 7265 7375 6c74 2872 6573 756c 7429  t_result(result)
+0000b6f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000b700: 2020 6465 6275 672e 696e 666f 2822 504c    debug.info("PL
+0000b710: 593a 2050 4152 5345 2044 4542 5547 2045  Y: PARSE DEBUG E
+0000b720: 4e44 2229 0a20 2020 2020 2020 2020 2020  ND").           
+0000b730: 2020 2020 2023 202d 2d21 2044 4542 5547       # --! DEBUG
+0000b740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b750: 2072 6574 7572 6e20 7265 7375 6c74 0a0a   return result..
+0000b760: 2020 2020 2020 2020 6966 2074 2069 7320          if t is 
+0000b770: 4e6f 6e65 3a0a 0a20 2020 2020 2020 2020  None:..         
+0000b780: 2020 2023 202d 2d21 2044 4542 5547 0a20     # --! DEBUG. 
+0000b790: 2020 2020 2020 2020 2020 2064 6562 7567             debug
+0000b7a0: 2e65 7272 6f72 280a 2020 2020 2020 2020  .error(.        
+0000b7b0: 2020 2020 2020 2020 2245 7272 6f72 2020          "Error  
+0000b7c0: 3a20 2573 222c 0a20 2020 2020 2020 2020  : %s",.         
+0000b7d0: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
+0000b7e0: 2020 2020 2020 2020 2020 2020 2022 2573               "%s
+0000b7f0: 202e 2025 7322 0a20 2020 2020 2020 2020   . %s".         
+0000b800: 2020 2020 2020 2020 2020 2025 2028 0a20             % (. 
 0000b810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b820: 2022 2022 2e6a 6f69 6e28 5b78 782e 7479   " ".join([xx.ty
-0000b830: 7065 2066 6f72 2078 7820 696e 2073 796d  pe for xx in sym
-0000b840: 7374 6163 6b5d 5b31 3a5d 292c 0a20 2020  stack][1:]),.   
-0000b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b860: 2020 2020 2073 7472 2873 656c 662e 6c6f       str(self.lo
-0000b870: 6f6b 6168 6561 6429 2c0a 2020 2020 2020  okahead),.      
-0000b880: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-0000b890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8a0: 292e 6c73 7472 6970 2829 2c0a 2020 2020  ).lstrip(),.    
-0000b8b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000b8c0: 2020 2020 2020 2320 2d2d 2120 4445 4255        # --! DEBU
-0000b8d0: 470a 0a20 2020 2020 2020 2020 2020 2023  G..            #
-0000b8e0: 2057 6520 6861 7665 2073 6f6d 6520 6b69   We have some ki
-0000b8f0: 6e64 206f 6620 7061 7273 696e 6720 6572  nd of parsing er
-0000b900: 726f 7220 6865 7265 2e20 2054 6f20 6861  ror here.  To ha
-0000b910: 6e64 6c65 0a20 2020 2020 2020 2020 2020  ndle.           
-0000b920: 2023 2074 6869 732c 2077 6520 6172 6520   # this, we are 
-0000b930: 676f 696e 6720 746f 2070 7573 6820 7468  going to push th
-0000b940: 6520 6375 7272 656e 7420 746f 6b65 6e20  e current token 
-0000b950: 6f6e 746f 0a20 2020 2020 2020 2020 2020  onto.           
-0000b960: 2023 2074 6865 2074 6f6b 656e 7374 6163   # the tokenstac
-0000b970: 6b20 616e 6420 7265 706c 6163 6520 6974  k and replace it
-0000b980: 2077 6974 6820 616e 2027 6572 726f 7227   with an 'error'
-0000b990: 2074 6f6b 656e 2e0a 2020 2020 2020 2020   token..        
-0000b9a0: 2020 2020 2320 4966 2074 6865 7265 2061      # If there a
-0000b9b0: 7265 2061 6e79 2073 796e 6368 726f 6e69  re any synchroni
-0000b9c0: 7a61 7469 6f6e 2072 756c 6573 2c20 7468  zation rules, th
-0000b9d0: 6579 206d 6179 0a20 2020 2020 2020 2020  ey may.         
-0000b9e0: 2020 2023 2063 6174 6368 2069 742e 0a20     # catch it.. 
-0000b9f0: 2020 2020 2020 2020 2020 2023 0a20 2020             #.   
-0000ba00: 2020 2020 2020 2020 2023 2049 6e20 6164           # In ad
-0000ba10: 6469 7469 6f6e 2074 6f20 7075 7368 696e  dition to pushin
-0000ba20: 6720 7468 6520 6572 726f 7220 746f 6b65  g the error toke
-0000ba30: 6e2c 2077 6520 6361 6c6c 2063 616c 6c0a  n, we call call.
-0000ba40: 2020 2020 2020 2020 2020 2020 2320 7468              # th
-0000ba50: 6520 7573 6572 2064 6566 696e 6564 2070  e user defined p
-0000ba60: 5f65 7272 6f72 2829 2066 756e 6374 696f  _error() functio
-0000ba70: 6e20 6966 2074 6869 7320 6973 2074 6865  n if this is the
-0000ba80: 0a20 2020 2020 2020 2020 2020 2023 2066  .            # f
-0000ba90: 6972 7374 2073 796e 7461 7820 6572 726f  irst syntax erro
-0000baa0: 722e 2020 5468 6973 2066 756e 6374 696f  r.  This functio
-0000bab0: 6e20 6973 206f 6e6c 7920 6361 6c6c 6564  n is only called
-0000bac0: 2069 660a 2020 2020 2020 2020 2020 2020   if.            
-0000bad0: 2320 6572 726f 7263 6f75 6e74 203d 3d20  # errorcount == 
-0000bae0: 302e 0a20 2020 2020 2020 2020 2020 2069  0..            i
-0000baf0: 6620 6572 726f 7263 6f75 6e74 203d 3d20  f errorcount == 
-0000bb00: 3020 6f72 2073 656c 662e 6572 726f 726f  0 or self.erroro
-0000bb10: 6b3a 0a20 2020 2020 2020 2020 2020 2020  k:.             
-0000bb20: 2020 2065 7272 6f72 636f 756e 7420 3d20     errorcount = 
-0000bb30: 6572 726f 725f 636f 756e 740a 2020 2020  error_count.    
-0000bb40: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000bb50: 2e65 7272 6f72 6f6b 203d 2030 0a20 2020  .errorok = 0.   
-0000bb60: 2020 2020 2020 2020 2020 2020 2065 7272               err
-0000bb70: 746f 6b65 6e20 3d20 7365 6c66 2e6c 6f6f  token = self.loo
-0000bb80: 6b61 6865 6164 0a20 2020 2020 2020 2020  kahead.         
-0000bb90: 2020 2020 2020 2069 6620 6572 7274 6f6b         if errtok
-0000bba0: 656e 2e74 7970 6520 3d3d 2022 2465 6e64  en.type == "$end
-0000bbb0: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
-0000bbc0: 2020 2020 2020 2065 7272 746f 6b65 6e20         errtoken 
-0000bbd0: 3d20 4e6f 6e65 2020 2320 456e 6420 6f66  = None  # End of
-0000bbe0: 2066 696c 6521 0a20 2020 2020 2020 2020   file!.         
-0000bbf0: 2020 2020 2020 2069 6620 7365 6c66 2e65         if self.e
-0000bc00: 7272 6f72 6675 6e63 3a0a 2020 2020 2020  rrorfunc:.      
-0000bc10: 2020 2020 2020 2020 2020 2020 2020 676c                gl
-0000bc20: 6f62 616c 2065 7272 6f6b 2c20 746f 6b65  obal errok, toke
-0000bc30: 6e2c 2072 6573 7461 7274 0a20 2020 2020  n, restart.     
-0000bc40: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000bc50: 7272 6f6b 203d 2028 0a20 2020 2020 2020  rrok = (.       
+0000b820: 2020 2020 2020 2022 2022 2e6a 6f69 6e28         " ".join(
+0000b830: 5b78 782e 7479 7065 2066 6f72 2078 7820  [xx.type for xx 
+0000b840: 696e 2073 796d 7374 6163 6b5d 5b31 3a5d  in symstack][1:]
+0000b850: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+0000b860: 2020 2020 2020 2020 2020 2073 7472 2873             str(s
+0000b870: 656c 662e 6c6f 6f6b 6168 6561 6429 2c0a  elf.lookahead),.
+0000b880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b890: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+0000b8a0: 2020 2020 2020 292e 6c73 7472 6970 2829        ).lstrip()
+0000b8b0: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
+0000b8c0: 2020 2020 2020 2020 2020 2020 2320 2d2d              # --
+0000b8d0: 2120 4445 4255 470a 0a20 2020 2020 2020  ! DEBUG..       
+0000b8e0: 2020 2020 2023 2057 6520 6861 7665 2073       # We have s
+0000b8f0: 6f6d 6520 6b69 6e64 206f 6620 7061 7273  ome kind of pars
+0000b900: 696e 6720 6572 726f 7220 6865 7265 2e20  ing error here. 
+0000b910: 2054 6f20 6861 6e64 6c65 0a20 2020 2020   To handle.     
+0000b920: 2020 2020 2020 2023 2074 6869 732c 2077         # this, w
+0000b930: 6520 6172 6520 676f 696e 6720 746f 2070  e are going to p
+0000b940: 7573 6820 7468 6520 6375 7272 656e 7420  ush the current 
+0000b950: 746f 6b65 6e20 6f6e 746f 0a20 2020 2020  token onto.     
+0000b960: 2020 2020 2020 2023 2074 6865 2074 6f6b         # the tok
+0000b970: 656e 7374 6163 6b20 616e 6420 7265 706c  enstack and repl
+0000b980: 6163 6520 6974 2077 6974 6820 616e 2027  ace it with an '
+0000b990: 6572 726f 7227 2074 6f6b 656e 2e0a 2020  error' token..  
+0000b9a0: 2020 2020 2020 2020 2020 2320 4966 2074            # If t
+0000b9b0: 6865 7265 2061 7265 2061 6e79 2073 796e  here are any syn
+0000b9c0: 6368 726f 6e69 7a61 7469 6f6e 2072 756c  chronization rul
+0000b9d0: 6573 2c20 7468 6579 206d 6179 0a20 2020  es, they may.   
+0000b9e0: 2020 2020 2020 2020 2023 2063 6174 6368           # catch
+0000b9f0: 2069 742e 0a20 2020 2020 2020 2020 2020   it..           
+0000ba00: 2023 0a20 2020 2020 2020 2020 2020 2023   #.            #
+0000ba10: 2049 6e20 6164 6469 7469 6f6e 2074 6f20   In addition to 
+0000ba20: 7075 7368 696e 6720 7468 6520 6572 726f  pushing the erro
+0000ba30: 7220 746f 6b65 6e2c 2077 6520 6361 6c6c  r token, we call
+0000ba40: 2063 616c 6c0a 2020 2020 2020 2020 2020   call.          
+0000ba50: 2020 2320 7468 6520 7573 6572 2064 6566    # the user def
+0000ba60: 696e 6564 2070 5f65 7272 6f72 2829 2066  ined p_error() f
+0000ba70: 756e 6374 696f 6e20 6966 2074 6869 7320  unction if this 
+0000ba80: 6973 2074 6865 0a20 2020 2020 2020 2020  is the.         
+0000ba90: 2020 2023 2066 6972 7374 2073 796e 7461     # first synta
+0000baa0: 7820 6572 726f 722e 2020 5468 6973 2066  x error.  This f
+0000bab0: 756e 6374 696f 6e20 6973 206f 6e6c 7920  unction is only 
+0000bac0: 6361 6c6c 6564 2069 660a 2020 2020 2020  called if.      
+0000bad0: 2020 2020 2020 2320 6572 726f 7263 6f75        # errorcou
+0000bae0: 6e74 203d 3d20 302e 0a20 2020 2020 2020  nt == 0..       
+0000baf0: 2020 2020 2069 6620 6572 726f 7263 6f75       if errorcou
+0000bb00: 6e74 203d 3d20 3020 6f72 2073 656c 662e  nt == 0 or self.
+0000bb10: 6572 726f 726f 6b3a 0a20 2020 2020 2020  errorok:.       
+0000bb20: 2020 2020 2020 2020 2065 7272 6f72 636f           errorco
+0000bb30: 756e 7420 3d20 6572 726f 725f 636f 756e  unt = error_coun
+0000bb40: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+0000bb50: 2020 7365 6c66 2e65 7272 6f72 6f6b 203d    self.errorok =
+0000bb60: 2030 0a20 2020 2020 2020 2020 2020 2020   0.             
+0000bb70: 2020 2065 7272 746f 6b65 6e20 3d20 7365     errtoken = se
+0000bb80: 6c66 2e6c 6f6f 6b61 6865 6164 0a20 2020  lf.lookahead.   
+0000bb90: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000bba0: 6572 7274 6f6b 656e 2e74 7970 6520 3d3d  errtoken.type ==
+0000bbb0: 2022 2465 6e64 223a 0a20 2020 2020 2020   "$end":.       
+0000bbc0: 2020 2020 2020 2020 2020 2020 2065 7272               err
+0000bbd0: 746f 6b65 6e20 3d20 4e6f 6e65 2020 2320  token = None  # 
+0000bbe0: 456e 6420 6f66 2066 696c 6521 0a20 2020  End of file!.   
+0000bbf0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000bc00: 7365 6c66 2e65 7272 6f72 6675 6e63 3a0a  self.errorfunc:.
+0000bc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bc20: 2020 2020 676c 6f62 616c 2065 7272 6f6b      global errok
+0000bc30: 2c20 746f 6b65 6e2c 2072 6573 7461 7274  , token, restart
+0000bc40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000bc50: 2020 2020 2065 7272 6f6b 203d 2028 0a20       errok = (. 
 0000bc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc70: 2073 656c 662e 6572 726f 6b0a 2020 2020   self.errok.    
-0000bc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc90: 2920 2023 2053 6574 2073 6f6d 6520 7370  )  # Set some sp
-0000bca0: 6563 6961 6c20 6675 6e63 7469 6f6e 7320  ecial functions 
-0000bcb0: 6176 6169 6c61 626c 6520 696e 2065 7272  available in err
-0000bcc0: 6f72 2072 6563 6f76 6572 790a 2020 2020  or recovery.    
-0000bcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bce0: 746f 6b65 6e20 3d20 6765 745f 746f 6b65  token = get_toke
-0000bcf0: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
-0000bd00: 2020 2020 2020 7265 7374 6172 7420 3d20        restart = 
-0000bd10: 7365 6c66 2e72 6573 7461 7274 0a20 2020  self.restart.   
-0000bd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd30: 2069 6620 6572 7274 6f6b 656e 2061 6e64   if errtoken and
-0000bd40: 206e 6f74 2068 6173 6174 7472 2865 7272   not hasattr(err
-0000bd50: 746f 6b65 6e2c 2022 6c65 7865 7222 293a  token, "lexer"):
-0000bd60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000bd70: 2020 2020 2020 2020 2065 7272 746f 6b65           errtoke
-0000bd80: 6e2e 6c65 7865 7220 3d20 6c65 7865 720a  n.lexer = lexer.
-0000bd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bda0: 2020 2020 746f 6b20 3d20 7365 6c66 2e65      tok = self.e
-0000bdb0: 7272 6f72 6675 6e63 2865 7272 746f 6b65  rrorfunc(errtoke
-0000bdc0: 6e29 0a20 2020 2020 2020 2020 2020 2020  n).             
-0000bdd0: 2020 2020 2020 2064 656c 2065 7272 6f6b         del errok
-0000bde0: 2c20 746f 6b65 6e2c 2072 6573 7461 7274  , token, restart
-0000bdf0: 2020 2320 4465 6c65 7465 2073 7065 6369    # Delete speci
-0000be00: 616c 2066 756e 6374 696f 6e73 0a0a 2020  al functions..  
-0000be10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be20: 2020 6966 2073 656c 662e 6572 726f 726f    if self.erroro
-0000be30: 6b3a 0a20 2020 2020 2020 2020 2020 2020  k:.             
-0000be40: 2020 2020 2020 2020 2020 2023 2055 7365             # Use
-0000be50: 7220 6d75 7374 2068 6176 6520 646f 6e65  r must have done
-0000be60: 2073 6f6d 6520 6b69 6e64 206f 6620 7061   some kind of pa
-0000be70: 6e69 630a 2020 2020 2020 2020 2020 2020  nic.            
-0000be80: 2020 2020 2020 2020 2020 2020 2320 6d6f              # mo
-0000be90: 6465 2072 6563 6f76 6572 7920 6f6e 2074  de recovery on t
-0000bea0: 6865 6972 206f 776e 2e20 2054 6865 0a20  heir own.  The. 
-0000beb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bec0: 2020 2020 2020 2023 2072 6574 7572 6e65         # returne
-0000bed0: 6420 746f 6b65 6e20 6973 2074 6865 206e  d token is the n
-0000bee0: 6578 7420 7365 6c66 2e6c 6f6f 6b61 6865  ext self.lookahe
-0000bef0: 6164 0a20 2020 2020 2020 2020 2020 2020  ad.             
-0000bf00: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000bf10: 6c6f 6f6b 6168 6561 6420 3d20 746f 6b0a  lookahead = tok.
-0000bf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf30: 2020 2020 2020 2020 6572 7274 6f6b 656e          errtoken
-0000bf40: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+0000bc70: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
+0000bc80: 6b0a 2020 2020 2020 2020 2020 2020 2020  k.              
+0000bc90: 2020 2020 2020 2920 2023 2053 6574 2073        )  # Set s
+0000bca0: 6f6d 6520 7370 6563 6961 6c20 6675 6e63  ome special func
+0000bcb0: 7469 6f6e 7320 6176 6169 6c61 626c 6520  tions available 
+0000bcc0: 696e 2065 7272 6f72 2072 6563 6f76 6572  in error recover
+0000bcd0: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
+0000bce0: 2020 2020 2020 746f 6b65 6e20 3d20 6765        token = ge
+0000bcf0: 745f 746f 6b65 6e0a 2020 2020 2020 2020  t_token.        
+0000bd00: 2020 2020 2020 2020 2020 2020 7265 7374              rest
+0000bd10: 6172 7420 3d20 7365 6c66 2e72 6573 7461  art = self.resta
+0000bd20: 7274 0a20 2020 2020 2020 2020 2020 2020  rt.             
+0000bd30: 2020 2020 2020 2069 6620 6572 7274 6f6b         if errtok
+0000bd40: 656e 2061 6e64 206e 6f74 2068 6173 6174  en and not hasat
+0000bd50: 7472 2865 7272 746f 6b65 6e2c 2022 6c65  tr(errtoken, "le
+0000bd60: 7865 7222 293a 0a20 2020 2020 2020 2020  xer"):.         
+0000bd70: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000bd80: 7272 746f 6b65 6e2e 6c65 7865 7220 3d20  rrtoken.lexer = 
+0000bd90: 6c65 7865 720a 2020 2020 2020 2020 2020  lexer.          
+0000bda0: 2020 2020 2020 2020 2020 746f 6b20 3d20            tok = 
+0000bdb0: 7365 6c66 2e65 7272 6f72 6675 6e63 2865  self.errorfunc(e
+0000bdc0: 7272 746f 6b65 6e29 0a20 2020 2020 2020  rrtoken).       
+0000bdd0: 2020 2020 2020 2020 2020 2020 2064 656c               del
+0000bde0: 2065 7272 6f6b 2c20 746f 6b65 6e2c 2072   errok, token, r
+0000bdf0: 6573 7461 7274 2020 2320 4465 6c65 7465  estart  # Delete
+0000be00: 2073 7065 6369 616c 2066 756e 6374 696f   special functio
+0000be10: 6e73 0a0a 2020 2020 2020 2020 2020 2020  ns..            
+0000be20: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000be30: 6572 726f 726f 6b3a 0a20 2020 2020 2020  errorok:.       
+0000be40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be50: 2023 2055 7365 7220 6d75 7374 2068 6176   # User must hav
+0000be60: 6520 646f 6e65 2073 6f6d 6520 6b69 6e64  e done some kind
+0000be70: 206f 6620 7061 6e69 630a 2020 2020 2020   of panic.      
+0000be80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be90: 2020 2320 6d6f 6465 2072 6563 6f76 6572    # mode recover
+0000bea0: 7920 6f6e 2074 6865 6972 206f 776e 2e20  y on their own. 
+0000beb0: 2054 6865 0a20 2020 2020 2020 2020 2020   The.           
+0000bec0: 2020 2020 2020 2020 2020 2020 2023 2072               # r
+0000bed0: 6574 7572 6e65 6420 746f 6b65 6e20 6973  eturned token is
+0000bee0: 2074 6865 206e 6578 7420 7365 6c66 2e6c   the next self.l
+0000bef0: 6f6f 6b61 6865 6164 0a20 2020 2020 2020  ookahead.       
+0000bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf10: 2073 656c 662e 6c6f 6f6b 6168 6561 6420   self.lookahead 
+0000bf20: 3d20 746f 6b0a 2020 2020 2020 2020 2020  = tok.          
+0000bf30: 2020 2020 2020 2020 2020 2020 2020 6572                er
+0000bf40: 7274 6f6b 656e 203d 204e 6f6e 650a 2020  rtoken = None.  
 0000bf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf60: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
-0000bf70: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0000bf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf90: 2020 2069 6620 6572 7274 6f6b 656e 3a0a     if errtoken:.
-0000bfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bfb0: 2020 2020 2020 2020 6966 2068 6173 6174          if hasat
-0000bfc0: 7472 2865 7272 746f 6b65 6e2c 2022 6c69  tr(errtoken, "li
-0000bfd0: 6e65 6e6f 2229 3a0a 2020 2020 2020 2020  neno"):.        
+0000bf60: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
+0000bf70: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000bf80: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0000bf90: 2020 2020 2020 2020 2069 6620 6572 7274           if errt
+0000bfa0: 6f6b 656e 3a0a 2020 2020 2020 2020 2020  oken:.          
+0000bfb0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000bfc0: 2068 6173 6174 7472 2865 7272 746f 6b65   hasattr(errtoke
+0000bfd0: 6e2c 2022 6c69 6e65 6e6f 2229 3a0a 2020  n, "lineno"):.  
 0000bfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bff0: 2020 2020 6c69 6e65 6e6f 203d 2073 656c      lineno = sel
-0000c000: 662e 6c6f 6f6b 6168 6561 642e 6c69 6e65  f.lookahead.line
-0000c010: 6e6f 0a20 2020 2020 2020 2020 2020 2020  no.             
-0000c020: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0000c030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c040: 2020 2020 2020 2020 2020 2020 206c 696e               lin
-0000c050: 656e 6f20 3d20 300a 2020 2020 2020 2020  eno = 0.        
+0000bff0: 2020 2020 2020 2020 2020 6c69 6e65 6e6f            lineno
+0000c000: 203d 2073 656c 662e 6c6f 6f6b 6168 6561   = self.lookahea
+0000c010: 642e 6c69 6e65 6e6f 0a20 2020 2020 2020  d.lineno.       
+0000c020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c030: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000c040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c050: 2020 206c 696e 656e 6f20 3d20 300a 2020     lineno = 0.  
 0000c060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c070: 6966 206c 696e 656e 6f3a 0a20 2020 2020  if lineno:.     
-0000c080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c090: 2020 2020 2020 2073 7973 2e73 7464 6572         sys.stder
-0000c0a0: 722e 7772 6974 6528 0a20 2020 2020 2020  r.write(.       
+0000c070: 2020 2020 2020 6966 206c 696e 656e 6f3a        if lineno:
+0000c080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c090: 2020 2020 2020 2020 2020 2020 2073 7973               sys
+0000c0a0: 2e73 7464 6572 722e 7772 6974 6528 0a20  .stderr.write(. 
 0000c0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c0c0: 2020 2020 2020 2020 2022 7961 6363 3a20           "yacc: 
-0000c0d0: 5379 6e74 6178 2065 7272 6f72 2061 7420  Syntax error at 
-0000c0e0: 6c69 6e65 2025 642c 2074 6f6b 656e 3d25  line %d, token=%
-0000c0f0: 735c 6e22 0a20 2020 2020 2020 2020 2020  s\n".           
+0000c0c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000c0d0: 7961 6363 3a20 5379 6e74 6178 2065 7272  yacc: Syntax err
+0000c0e0: 6f72 2061 7420 6c69 6e65 2025 642c 2074  or at line %d, t
+0000c0f0: 6f6b 656e 3d25 735c 6e22 0a20 2020 2020  oken=%s\n".     
 0000c100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c110: 2020 2020 2025 2028 6c69 6e65 6e6f 2c20       % (lineno, 
-0000c120: 6572 7274 6f6b 656e 2e74 7970 6529 0a20  errtoken.type). 
-0000c130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c140: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-0000c150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c160: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0000c170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c180: 2020 2020 2020 2073 7973 2e73 7464 6572         sys.stder
-0000c190: 722e 7772 6974 6528 0a20 2020 2020 2020  r.write(.       
+0000c110: 2020 2020 2020 2020 2020 2025 2028 6c69             % (li
+0000c120: 6e65 6e6f 2c20 6572 7274 6f6b 656e 2e74  neno, errtoken.t
+0000c130: 7970 6529 0a20 2020 2020 2020 2020 2020  ype).           
+0000c140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c150: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+0000c160: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0000c170: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c180: 2020 2020 2020 2020 2020 2020 2073 7973               sys
+0000c190: 2e73 7464 6572 722e 7772 6974 6528 0a20  .stderr.write(. 
 0000c1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c1b0: 2020 2020 2020 2020 2022 7961 6363 3a20           "yacc: 
-0000c1c0: 5379 6e74 6178 2065 7272 6f72 2c20 746f  Syntax error, to
-0000c1d0: 6b65 6e3d 2573 2220 2520 6572 7274 6f6b  ken=%s" % errtok
-0000c1e0: 656e 2e74 7970 650a 2020 2020 2020 2020  en.type.        
+0000c1b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000c1c0: 7961 6363 3a20 5379 6e74 6178 2065 7272  yacc: Syntax err
+0000c1d0: 6f72 2c20 746f 6b65 6e3d 2573 2220 2520  or, token=%s" % 
+0000c1e0: 6572 7274 6f6b 656e 2e74 7970 650a 2020  errtoken.type.  
 0000c1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c200: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-0000c210: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0000c220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c230: 2020 2020 2020 2020 7379 732e 7374 6465          sys.stde
-0000c240: 7272 2e77 7269 7465 2822 7961 6363 3a20  rr.write("yacc: 
-0000c250: 5061 7273 6520 6572 726f 7220 696e 2069  Parse error in i
-0000c260: 6e70 7574 2e20 454f 465c 6e22 290a 2020  nput. EOF\n").  
-0000c270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c280: 2020 2020 2020 7265 7475 726e 0a0a 2020        return..  
-0000c290: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0000c2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c2b0: 6572 726f 7263 6f75 6e74 203d 2065 7272  errorcount = err
-0000c2c0: 6f72 5f63 6f75 6e74 0a0a 2020 2020 2020  or_count..      
-0000c2d0: 2020 2020 2020 2320 6361 7365 2031 3a20        # case 1: 
-0000c2e0: 2074 6865 2073 7461 7465 7374 6163 6b20   the statestack 
-0000c2f0: 6f6e 6c79 2068 6173 2031 2065 6e74 7279  only has 1 entry
-0000c300: 206f 6e20 6974 2e20 2049 6620 7765 2772   on it.  If we'r
-0000c310: 6520 696e 2074 6869 7320 7374 6174 652c  e in this state,
-0000c320: 2074 6865 0a20 2020 2020 2020 2020 2020   the.           
-0000c330: 2023 2065 6e74 6972 6520 7061 7273 6520   # entire parse 
-0000c340: 6861 7320 6265 656e 2072 6f6c 6c65 6420  has been rolled 
-0000c350: 6261 636b 2061 6e64 2077 6527 7265 2063  back and we're c
-0000c360: 6f6d 706c 6574 656c 7920 686f 7365 642e  ompletely hosed.
-0000c370: 2020 2054 6865 2074 6f6b 656e 2069 730a     The token is.
-0000c380: 2020 2020 2020 2020 2020 2020 2320 6469              # di
-0000c390: 7363 6172 6465 6420 616e 6420 7765 206a  scarded and we j
-0000c3a0: 7573 7420 6b65 6570 2067 6f69 6e67 2e0a  ust keep going..
-0000c3b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000c3c0: 6c65 6e28 7374 6174 6573 7461 636b 2920  len(statestack) 
-0000c3d0: 3c3d 2031 2061 6e64 2073 656c 662e 6c6f  <= 1 and self.lo
-0000c3e0: 6f6b 6168 6561 642e 7479 7065 2021 3d20  okahead.type != 
-0000c3f0: 2224 656e 6422 3a0a 2020 2020 2020 2020  "$end":.        
-0000c400: 2020 2020 2020 2020 7365 6c66 2e6c 6f6f          self.loo
-0000c410: 6b61 6865 6164 203d 204e 6f6e 650a 2020  kahead = None.  
-0000c420: 2020 2020 2020 2020 2020 2020 2020 6572                er
-0000c430: 7274 6f6b 656e 203d 204e 6f6e 650a 2020  rtoken = None.  
-0000c440: 2020 2020 2020 2020 2020 2020 2020 7374                st
-0000c450: 6174 6520 3d20 300a 2020 2020 2020 2020  ate = 0.        
-0000c460: 2020 2020 2020 2020 2320 4e75 6b65 2074          # Nuke t
-0000c470: 6865 2070 7573 6862 6163 6b20 7374 6163  he pushback stac
-0000c480: 6b0a 2020 2020 2020 2020 2020 2020 2020  k.              
-0000c490: 2020 6465 6c20 7365 6c66 2e6c 6f6f 6b61    del self.looka
-0000c4a0: 6865 6164 7374 6163 6b5b 3a5d 0a20 2020  headstack[:].   
-0000c4b0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-0000c4c0: 7469 6e75 650a 0a20 2020 2020 2020 2020  tinue..         
-0000c4d0: 2020 2023 2063 6173 6520 323a 2074 6865     # case 2: the
-0000c4e0: 2073 7461 7465 7374 6163 6b20 6861 7320   statestack has 
-0000c4f0: 6120 636f 7570 6c65 206f 6620 656e 7472  a couple of entr
-0000c500: 6965 7320 6f6e 2069 742c 2062 7574 2077  ies on it, but w
-0000c510: 6527 7265 0a20 2020 2020 2020 2020 2020  e're.           
-0000c520: 2023 2061 7420 7468 6520 656e 6420 6f66   # at the end of
-0000c530: 2074 6865 2066 696c 652e 206e 756b 6520   the file. nuke 
-0000c540: 7468 6520 746f 7020 656e 7472 7920 616e  the top entry an
-0000c550: 6420 6765 6e65 7261 7465 2061 6e20 6572  d generate an er
-0000c560: 726f 7220 746f 6b65 6e0a 0a20 2020 2020  ror token..     
-0000c570: 2020 2020 2020 2023 2053 7461 7274 206e         # Start n
-0000c580: 756b 696e 6720 656e 7472 6965 7320 6f6e  uking entries on
-0000c590: 2074 6865 2073 7461 636b 0a20 2020 2020   the stack.     
-0000c5a0: 2020 2020 2020 2069 6620 7365 6c66 2e6c         if self.l
-0000c5b0: 6f6f 6b61 6865 6164 2e74 7970 6520 3d3d  ookahead.type ==
-0000c5c0: 2022 2465 6e64 223a 0a20 2020 2020 2020   "$end":.       
-0000c5d0: 2020 2020 2020 2020 2023 2057 686f 612e           # Whoa.
-0000c5e0: 2057 6527 7265 2072 6561 6c6c 7920 686f   We're really ho
-0000c5f0: 7365 6420 6865 7265 2e20 4261 696c 206f  sed here. Bail o
-0000c600: 7574 0a20 2020 2020 2020 2020 2020 2020  ut.             
-0000c610: 2020 2072 6574 7572 6e0a 0a20 2020 2020     return..     
-0000c620: 2020 2020 2020 2069 6620 7365 6c66 2e6c         if self.l
-0000c630: 6f6f 6b61 6865 6164 2e74 7970 6520 213d  ookahead.type !=
-0000c640: 2022 6572 726f 7222 3a0a 2020 2020 2020   "error":.      
-0000c650: 2020 2020 2020 2020 2020 7379 6d20 3d20            sym = 
-0000c660: 7379 6d73 7461 636b 5b2d 315d 0a20 2020  symstack[-1].   
-0000c670: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000c680: 7379 6d2e 7479 7065 203d 3d20 2265 7272  sym.type == "err
-0000c690: 6f72 223a 0a20 2020 2020 2020 2020 2020  or":.           
-0000c6a0: 2020 2020 2020 2020 2023 2048 6d6d 6d3a           # Hmmm:
-0000c6b0: 2065 7272 6f72 2069 7320 6f6e 2074 6f70   error is on top
-0000c6c0: 206f 6620 7374 6163 6b2c 2077 6527 6c6c   of stack, we'll
-0000c6d0: 206a 7573 7420 6e75 6b65 2069 6e70 7574   just nuke input
-0000c6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c6f0: 2020 2020 2023 2073 796d 626f 6c20 616e       # symbol an
-0000c700: 6420 636f 6e74 696e 7565 0a20 2020 2020  d continue.     
-0000c710: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000c720: 656c 662e 6c6f 6f6b 6168 6561 6420 3d20  elf.lookahead = 
-0000c730: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0000c740: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-0000c750: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0000c760: 2020 7420 3d20 5961 6363 5379 6d62 6f6c    t = YaccSymbol
-0000c770: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
-0000c780: 2020 2074 2e74 7970 6520 3d20 2265 7272     t.type = "err
-0000c790: 6f72 220a 2020 2020 2020 2020 2020 2020  or".            
-0000c7a0: 2020 2020 6966 2068 6173 6174 7472 2873      if hasattr(s
-0000c7b0: 656c 662e 6c6f 6f6b 6168 6561 642c 2022  elf.lookahead, "
-0000c7c0: 6c69 6e65 6e6f 2229 3a0a 2020 2020 2020  lineno"):.      
-0000c7d0: 2020 2020 2020 2020 2020 2020 2020 742e                t.
-0000c7e0: 6c69 6e65 6e6f 203d 2073 656c 662e 6c6f  lineno = self.lo
-0000c7f0: 6f6b 6168 6561 642e 6c69 6e65 6e6f 0a20  okahead.lineno. 
-0000c800: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0000c810: 2e76 616c 7565 203d 2073 656c 662e 6c6f  .value = self.lo
-0000c820: 6f6b 6168 6561 640a 2020 2020 2020 2020  okahead.        
-0000c830: 2020 2020 2020 2020 7365 6c66 2e6c 6f6f          self.loo
-0000c840: 6b61 6865 6164 7374 6163 6b2e 6170 7065  kaheadstack.appe
-0000c850: 6e64 2873 656c 662e 6c6f 6f6b 6168 6561  nd(self.lookahea
-0000c860: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
-0000c870: 2020 2073 656c 662e 6c6f 6f6b 6168 6561     self.lookahea
-0000c880: 6420 3d20 740a 2020 2020 2020 2020 2020  d = t.          
-0000c890: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000c8a0: 2020 2020 2020 2020 7379 6d73 7461 636b          symstack
-0000c8b0: 2e70 6f70 2829 0a20 2020 2020 2020 2020  .pop().         
-0000c8c0: 2020 2020 2020 2073 7461 7465 7374 6163         statestac
-0000c8d0: 6b2e 706f 7028 290a 2020 2020 2020 2020  k.pop().        
-0000c8e0: 2020 2020 2020 2020 7374 6174 6520 3d20          state = 
-0000c8f0: 7374 6174 6573 7461 636b 5b2d 315d 2020  statestack[-1]  
-0000c900: 2320 506f 7465 6e74 6961 6c20 6275 6720  # Potential bug 
-0000c910: 6669 780a 0a20 2020 2020 2020 2020 2020  fix..           
-0000c920: 2063 6f6e 7469 6e75 650a 0a20 2020 2020   continue..     
-0000c930: 2020 2023 2043 616c 6c20 616e 2065 7272     # Call an err
-0000c940: 6f72 2066 756e 6374 696f 6e20 6865 7265  or function here
-0000c950: 0a20 2020 2020 2020 2072 6169 7365 2052  .        raise R
-0000c960: 756e 7469 6d65 4572 726f 7228 2279 6163  untimeError("yac
-0000c970: 633a 2069 6e74 6572 6e61 6c20 7061 7273  c: internal pars
-0000c980: 6572 2065 7272 6f72 2121 215c 6e22 290a  er error!!!\n").
-0000c990: 0a0a 636c 6173 7320 4c69 6c79 506f 6e64  ..class LilyPond
-0000c9a0: 4c65 7869 6361 6c44 6566 696e 6974 696f  LexicalDefinitio
-0000c9b0: 6e3a 0a20 2020 2022 2222 0a20 2020 2054  n:.    """.    T
-0000c9c0: 6865 206c 6578 6963 616c 2064 6566 696e  he lexical defin
-0000c9d0: 6974 696f 6e20 6f66 204c 696c 7950 6f6e  ition of LilyPon
-0000c9e0: 6427 7320 7379 6e74 6178 2e0a 0a20 2020  d's syntax...   
-0000c9f0: 2045 6666 6563 7469 7665 6c79 2065 7175   Effectively equ
-0000ca00: 6976 616c 656e 7420 746f 204c 696c 7950  ivalent to LilyP
-0000ca10: 6f6e 6427 7320 6060 6c65 7865 722e 6c6c  ond's ``lexer.ll
-0000ca20: 6060 2066 696c 652e 0a0a 2020 2020 4e6f  `` file...    No
-0000ca30: 7420 636f 6d70 6f73 6572 2d73 6166 652e  t composer-safe.
-0000ca40: 0a0a 2020 2020 5573 6564 2069 6e74 6572  ..    Used inter
-0000ca50: 6e61 6c6c 7920 6279 2060 604c 696c 7950  nally by ``LilyP
-0000ca60: 6f6e 6450 6172 7365 7260 602e 0a20 2020  ondParser``..   
-0000ca70: 2022 2222 0a0a 2020 2020 2323 2320 494e   """..    ### IN
-0000ca80: 4954 4941 4c49 5a45 5220 2323 230a 0a20  ITIALIZER ###.. 
-0000ca90: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-0000caa0: 7365 6c66 2c20 636c 6965 6e74 3d4e 6f6e  self, client=Non
-0000cab0: 6529 3a0a 2020 2020 2020 2020 7365 6c66  e):.        self
-0000cac0: 2e63 6c69 656e 7420 3d20 636c 6965 6e74  .client = client
-0000cad0: 0a0a 2020 2020 7374 6174 6573 203d 2028  ..    states = (
-0000cae0: 0a20 2020 2020 2020 2023 206c 6578 6572  .        # lexer
-0000caf0: 2e6c 6c3a 3131 350a 2020 2020 2020 2020  .ll:115.        
-0000cb00: 2320 2827 6578 7472 6174 6f6b 656e 272c  # ('extratoken',
-0000cb10: 2027 6578 636c 7573 6976 6527 292c 0a20   'exclusive'),. 
-0000cb20: 2020 2020 2020 2023 2028 2763 686f 7264         # ('chord
-0000cb30: 7327 2c20 2765 7863 6c75 7369 7665 2729  s', 'exclusive')
-0000cb40: 2c0a 2020 2020 2020 2020 2320 2827 6669  ,.        # ('fi
-0000cb50: 6775 7265 7327 2c20 2765 7863 6c75 7369  gures', 'exclusi
-0000cb60: 7665 2729 2c0a 2020 2020 2020 2020 2320  ve'),.        # 
-0000cb70: 2827 696e 636c 272c 2027 6578 636c 7573  ('incl', 'exclus
-0000cb80: 6976 6527 292c 0a20 2020 2020 2020 2023  ive'),.        #
-0000cb90: 2028 276c 7972 6963 7327 2c20 2765 7863   ('lyrics', 'exc
-0000cba0: 6c75 7369 7665 2729 2c0a 2020 2020 2020  lusive'),.      
-0000cbb0: 2020 2320 2827 6c79 7269 635f 7175 6f74    # ('lyric_quot
-0000cbc0: 6520 272c 2027 6578 636c 7573 6976 6527  e ', 'exclusive'
-0000cbd0: 292c 0a20 2020 2020 2020 2028 226c 6f6e  ),.        ("lon
-0000cbe0: 6763 6f6d 6d65 6e74 222c 2022 6578 636c  gcomment", "excl
-0000cbf0: 7573 6976 6522 292c 0a20 2020 2020 2020  usive"),.       
-0000cc00: 2028 226d 6172 6b75 7022 2c20 2265 7863   ("markup", "exc
-0000cc10: 6c75 7369 7665 2229 2c0a 2020 2020 2020  lusive"),.      
-0000cc20: 2020 2822 6e6f 7465 7322 2c20 2265 7863    ("notes", "exc
-0000cc30: 6c75 7369 7665 2229 2c0a 2020 2020 2020  lusive"),.      
-0000cc40: 2020 2822 7175 6f74 6522 2c20 2265 7863    ("quote", "exc
-0000cc50: 6c75 7369 7665 2229 2c0a 2020 2020 2020  lusive"),.      
-0000cc60: 2020 2320 2827 736f 7572 6365 6669 6c65    # ('sourcefile
-0000cc70: 6c69 6e65 272c 2027 6578 636c 7573 6976  line', 'exclusiv
-0000cc80: 6527 292c 0a20 2020 2020 2020 2023 2028  e'),.        # (
-0000cc90: 2773 6f75 7263 6566 696c 656e 616d 6527  'sourcefilename'
-0000cca0: 2c20 2765 7863 6c75 7369 7665 2729 2c0a  , 'exclusive'),.
-0000ccb0: 2020 2020 2020 2020 2822 7665 7273 696f          ("versio
-0000ccc0: 6e22 2c20 2265 7863 6c75 7369 7665 2229  n", "exclusive")
-0000ccd0: 2c0a 2020 2020 2020 2020 2822 7363 6865  ,.        ("sche
-0000cce0: 6d65 222c 2022 6578 636c 7573 6976 6522  me", "exclusive"
-0000ccf0: 292c 0a20 2020 2029 0a0a 2020 2020 2320  ),.    )..    # 
-0000cd00: 6c65 7865 722e 6c6c 3a31 3239 0a20 2020  lexer.ll:129.   
-0000cd10: 2041 203d 2072 225b 612d 7a41 2d5a 5c32   A = r"[a-zA-Z\2
-0000cd20: 3030 2d5c 3337 375d 220a 2020 2020 4141  00-\377]".    AA
-0000cd30: 203d 2072 2228 2573 7c5f 2922 2025 2041   = r"(%s|_)" % A
-0000cd40: 0a20 2020 204e 203d 2072 225b 302d 395d  .    N = r"[0-9]
-0000cd50: 220a 2020 2020 414e 203d 2072 2228 2573  ".    AN = r"(%s
-0000cd60: 7c25 7329 2220 2520 2841 412c 204e 290a  |%s)" % (AA, N).
-0000cd70: 2020 2020 414e 595f 4348 4152 203d 2072      ANY_CHAR = r
-0000cd80: 2228 2e7c 5c6e 2922 0a20 2020 2050 554e  "(.|\n)".    PUN
-0000cd90: 4354 203d 2072 225b 3f21 3a27 605d 220a  CT = r"[?!:'`]".
-0000cda0: 2020 2020 4143 4345 4e54 203d 2072 2222      ACCENT = r""
-0000cdb0: 225c 5c5b 6027 225e 5d22 2222 0a20 2020  "\\[`'"^]""".   
-0000cdc0: 204e 4154 494f 4e41 4c20 3d20 7222 5b5c   NATIONAL = r"[\
-0000cdd0: 3030 312d 5c30 3036 5c30 3231 2d5c 3032  001-\006\021-\02
-0000cde0: 375c 3033 315c 3033 365d 220a 2020 2020  7\031\036]".    
-0000cdf0: 5445 5820 3d20 7222 2573 7c2d 7c25 737c  TEX = r"%s|-|%s|
-0000ce00: 2573 7c25 7322 2025 2028 4141 2c20 5055  %s|%s" % (AA, PU
-0000ce10: 4e43 542c 2041 4343 454e 542c 204e 4154  NCT, ACCENT, NAT
-0000ce20: 494f 4e41 4c29 0a20 2020 2057 4f52 4420  IONAL).    WORD 
-0000ce30: 3d20 7222 2573 2573 2a22 2025 2028 412c  = r"%s%s*" % (A,
-0000ce40: 2041 4e29 0a20 2020 2044 4153 4845 445f   AN).    DASHED_
-0000ce50: 574f 5244 203d 2072 2225 7328 2573 7c2d  WORD = r"%s(%s|-
-0000ce60: 292a 2220 2520 2841 2c20 414e 290a 2020  )*" % (A, AN).  
-0000ce70: 2020 4441 5348 4544 5f4b 4559 5f57 4f52    DASHED_KEY_WOR
-0000ce80: 4420 3d20 7222 5c5c 2573 2220 2520 4441  D = r"\\%s" % DA
-0000ce90: 5348 4544 5f57 4f52 440a 0a20 2020 2023  SHED_WORD..    #
-0000cea0: 206c 6578 6572 2e6c 6c3a 3134 340a 2020   lexer.ll:144.  
-0000ceb0: 2020 414c 5048 4157 4f52 4420 3d20 7222    ALPHAWORD = r"
-0000cec0: 2573 2b22 2025 2041 0a20 2020 2044 4947  %s+" % A.    DIG
-0000ced0: 4954 203d 2072 2225 7322 2025 204e 0a20  IT = r"%s" % N. 
-0000cee0: 2020 2055 4e53 4947 4e45 4420 3d20 7222     UNSIGNED = r"
-0000cef0: 2573 2b22 2025 204e 0a20 2020 2049 4e54  %s+" % N.    INT
-0000cf00: 203d 2072 2228 2d3f 2573 2922 2025 2055   = r"(-?%s)" % U
-0000cf10: 4e53 4947 4e45 440a 2020 2020 5245 414c  NSIGNED.    REAL
-0000cf20: 203d 2072 2228 2825 735c 2e25 732a 297c   = r"((%s\.%s*)|
-0000cf30: 282d 3f5c 2e25 732b 2929 2220 2520 2849  (-?\.%s+))" % (I
-0000cf40: 4e54 2c20 4e2c 204e 290a 2020 2020 455f  NT, N, N).    E_
-0000cf50: 554e 5349 474e 4544 203d 2072 225c 5c25  UNSIGNED = r"\\%
-0000cf60: 732b 2220 2520 4e0a 2020 2020 4652 4143  s+" % N.    FRAC
-0000cf70: 5449 4f4e 203d 2072 2225 732b 5c2f 2573  TION = r"%s+\/%s
-0000cf80: 2b22 2025 2028 4e2c 204e 290a 2020 2020  +" % (N, N).    
-0000cf90: 4b45 5957 4f52 4420 3d20 7222 5c5c 2573  KEYWORD = r"\\%s
-0000cfa0: 2220 2520 574f 5244 0a20 2020 2057 4849  " % WORD.    WHI
-0000cfb0: 5445 203d 2072 225b 205c 6e5c 745c 665c  TE = r"[ \n\t\f\
-0000cfc0: 725d 2220 2023 206f 6e6c 7920 7768 6974  r]"  # only whit
-0000cfd0: 6573 7061 6365 0a20 2020 2048 4f52 495a  espace.    HORIZ
-0000cfe0: 4f4e 5441 4c57 4849 5445 203d 2072 225b  ONTALWHITE = r"[
-0000cff0: 205c 745d 2220 2023 206f 6e6c 7920 6e6f   \t]"  # only no
-0000d000: 6e2d 6c69 6e65 2d62 7265 616b 696e 6720  n-line-breaking 
-0000d010: 7768 6974 6573 7061 6365 0a20 2020 2042  whitespace.    B
-0000d020: 4c41 434b 203d 2072 225b 5e20 5c6e 5c74  LACK = r"[^ \n\t
-0000d030: 5c66 5c72 5d22 2020 2320 6f6e 6c79 206e  \f\r]"  # only n
-0000d040: 6f6e 2d77 6869 7465 7370 6163 650a 2020  on-whitespace.  
-0000d050: 2020 5245 5354 4e41 4d45 203d 2072 225b    RESTNAME = r"[
-0000d060: 7273 5d22 0a20 2020 204e 4f54 4543 4f4d  rs]".    NOTECOM
-0000d070: 4d41 4e44 203d 2072 225c 5c25 732b 2220  MAND = r"\\%s+" 
-0000d080: 2520 410a 2020 2020 4d41 524b 5550 434f  % A.    MARKUPCO
-0000d090: 4d4d 414e 4420 3d20 7222 5c5c 2825 737c  MMAND = r"\\(%s|
-0000d0a0: 5b2d 5f5d 292b 2220 2520 410a 2020 2020  [-_])+" % A.    
-0000d0b0: 4c59 5249 4353 203d 2072 2228 2573 7c25  LYRICS = r"(%s|%
-0000d0c0: 7329 5b5e 302d 3920 5c74 5c6e 5c72 5c66  s)[^0-9 \t\n\r\f
-0000d0d0: 5d2a 2220 2520 2841 412c 2054 4558 290a  ]*" % (AA, TEX).
-0000d0e0: 2020 2020 4553 4341 5045 4420 3d20 7222      ESCAPED = r"
-0000d0f0: 2222 5b6e 745c 5c27 225d 2222 220a 2020  ""[nt\\'"]""".  
-0000d100: 2020 4558 5445 4e44 4552 203d 2072 225f    EXTENDER = r"_
-0000d110: 5f22 0a20 2020 2048 5950 4845 4e20 3d20  _".    HYPHEN = 
-0000d120: 7222 2d2d 220a 2020 2020 424f 4d5f 5554  r"--".    BOM_UT
-0000d130: 4638 203d 2072 225c 3335 375c 3237 335c  F8 = r"\357\273\
-0000d140: 3237 3722 0a0a 2020 2020 6b65 7977 6f72  277"..    keywor
-0000d150: 6473 203d 207b 0a20 2020 2020 2020 2023  ds = {.        #
-0000d160: 2070 6172 7365 722e 7979 3a31 3832 2c20   parser.yy:182, 
-0000d170: 6c69 6c79 2d6c 6578 6572 2e63 633a 3339  lily-lexer.cc:39
-0000d180: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000d190: 2020 275c 5c61 6363 6570 7473 273a 2027    '\\accepts': '
-0000d1a0: 4143 4345 5054 5327 2c0a 2020 2020 2020  ACCEPTS',.      
-0000d1b0: 2020 2320 2020 2020 2020 2027 5c5c 6164    #        '\\ad
-0000d1c0: 646c 7972 6963 7327 3a20 2741 4444 4c59  dlyrics': 'ADDLY
-0000d1d0: 5249 4353 272c 0a20 2020 2020 2020 2023  RICS',.        #
-0000d1e0: 2020 2020 2020 2020 275c 5c61 6c69 6173          '\\alias
-0000d1f0: 273a 2027 414c 4941 5327 2c0a 2020 2020  ': 'ALIAS',.    
-0000d200: 2020 2020 2320 2020 2020 2020 2027 5c5c      #        '\\
-0000d210: 616c 7465 726e 6174 6976 6527 3a20 2741  alternative': 'A
-0000d220: 4c54 4552 4e41 5449 5645 272c 0a20 2020  LTERNATIVE',.   
-0000d230: 2020 2020 2023 2020 2020 2020 2020 275c       #        '\
-0000d240: 5c62 6f6f 6b27 3a20 2742 4f4f 4b27 2c0a  \book': 'BOOK',.
-0000d250: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000d260: 2027 5c5c 626f 6f6b 7061 7274 273a 2027   '\\bookpart': '
-0000d270: 424f 4f4b 5041 5254 272c 0a20 2020 2020  BOOKPART',.     
-0000d280: 2020 2022 5c5c 6368 616e 6765 223a 2022     "\\change": "
-0000d290: 4348 414e 4745 222c 0a20 2020 2020 2020  CHANGE",.       
-0000d2a0: 2023 2020 2020 2020 2020 275c 5c63 686f   #        '\\cho
-0000d2b0: 7264 6d6f 6465 273a 2027 4348 4f52 444d  rdmode': 'CHORDM
-0000d2c0: 4f44 4527 2c0a 2020 2020 2020 2020 2320  ODE',.        # 
-0000d2d0: 2020 2020 2020 2027 5c5c 6368 6f72 6473         '\\chords
-0000d2e0: 273a 2027 4348 4f52 4453 272c 0a20 2020  ': 'CHORDS',.   
-0000d2f0: 2020 2020 2023 2020 2020 2020 2020 275c       #        '\
-0000d300: 5c63 6f6e 7369 7374 7327 3a20 2743 4f4e  \consists': 'CON
-0000d310: 5349 5354 5327 2c0a 2020 2020 2020 2020  SISTS',.        
-0000d320: 225c 5c63 6f6e 7465 7874 223a 2022 434f  "\\context": "CO
-0000d330: 4e54 4558 5422 2c0a 2020 2020 2020 2020  NTEXT",.        
-0000d340: 225c 5c64 6566 6175 6c74 223a 2022 4445  "\\default": "DE
-0000d350: 4641 554c 5422 2c0a 2020 2020 2020 2020  FAULT",.        
-0000d360: 2320 2020 2020 2020 2027 5c5c 6465 6661  #        '\\defa
-0000d370: 756c 7463 6869 6c64 273a 2027 4445 4641  ultchild': 'DEFA
-0000d380: 554c 5443 4849 4c44 272c 0a20 2020 2020  ULTCHILD',.     
-0000d390: 2020 2023 2020 2020 2020 2020 275c 5c64     #        '\\d
-0000d3a0: 656e 6965 7327 3a20 2744 454e 4945 5327  enies': 'DENIES'
-0000d3b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000d3c0: 2020 2027 5c5c 6465 7363 7269 7074 696f     '\\descriptio
-0000d3d0: 6e27 3a20 2744 4553 4352 4950 5449 4f4e  n': 'DESCRIPTION
-0000d3e0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-0000d3f0: 2020 2020 275c 5c64 7275 6d6d 6f64 6527      '\\drummode'
-0000d400: 3a20 2744 5255 4d4d 4f44 4527 2c0a 2020  : 'DRUMMODE',.  
-0000d410: 2020 2020 2020 2320 2020 2020 2020 2027        #        '
-0000d420: 5c5c 6472 756d 7327 3a20 2744 5255 4d53  \\drums': 'DRUMS
-0000d430: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-0000d440: 2020 2020 275c 5c66 6967 7572 656d 6f64      '\\figuremod
-0000d450: 6527 3a20 2746 4947 5552 454d 4f44 4527  e': 'FIGUREMODE'
-0000d460: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000d470: 2020 2027 5c5c 6669 6775 7265 7327 3a20     '\\figures': 
-0000d480: 2746 4947 5552 4553 272c 0a20 2020 2020  'FIGURES',.     
-0000d490: 2020 2022 5c5c 6865 6164 6572 223a 2022     "\\header": "
-0000d4a0: 4845 4144 4552 222c 0a20 2020 2020 2020  HEADER",.       
-0000d4b0: 2023 2020 2020 2020 2020 275c 5c76 6572   #        '\\ver
-0000d4c0: 7369 6f6e 2d65 7272 6f72 273a 2027 494e  sion-error': 'IN
-0000d4d0: 5641 4c49 4427 2c0a 2020 2020 2020 2020  VALID',.        
-0000d4e0: 225c 5c6c 6179 6f75 7422 3a20 224c 4159  "\\layout": "LAY
-0000d4f0: 4f55 5422 2c0a 2020 2020 2020 2020 2320  OUT",.        # 
-0000d500: 2020 2020 2020 2027 5c5c 6c79 7269 636d         '\\lyricm
-0000d510: 6f64 6527 3a20 274c 5952 4943 4d4f 4445  ode': 'LYRICMODE
-0000d520: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-0000d530: 2020 2020 275c 5c6c 7972 6963 7327 3a20      '\\lyrics': 
-0000d540: 274c 5952 4943 5327 2c0a 2020 2020 2020  'LYRICS',.      
-0000d550: 2020 2320 2020 2020 2020 2027 5c5c 6c79    #        '\\ly
-0000d560: 7269 6373 746f 273a 2027 4c59 5249 4353  ricsto': 'LYRICS
-0000d570: 544f 272c 0a20 2020 2020 2020 2022 5c5c  TO',.        "\\
-0000d580: 6d61 726b 7570 223a 2022 4d41 524b 5550  markup": "MARKUP
-0000d590: 222c 0a20 2020 2020 2020 2022 5c5c 6d61  ",.        "\\ma
-0000d5a0: 726b 7570 6c69 7374 223a 2022 4d41 524b  rkuplist": "MARK
-0000d5b0: 5550 4c49 5354 222c 0a20 2020 2020 2020  UPLIST",.       
-0000d5c0: 2022 5c5c 6d69 6469 223a 2022 4d49 4449   "\\midi": "MIDI
-0000d5d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0000d5e0: 2020 2020 275c 5c6e 616d 6527 3a20 274e      '\\name': 'N
-0000d5f0: 414d 4527 2c0a 2020 2020 2020 2020 2320  AME',.        # 
-0000d600: 2020 2020 2020 2027 5c5c 6e6f 7465 6d6f         '\\notemo
-0000d610: 6465 273a 2027 4e4f 5445 4d4f 4445 272c  de': 'NOTEMODE',
-0000d620: 0a20 2020 2020 2020 2022 5c5c 6f76 6572  .        "\\over
-0000d630: 7269 6465 223a 2022 4f56 4552 5249 4445  ride": "OVERRIDE
-0000d640: 222c 0a20 2020 2020 2020 2022 5c5c 7061  ",.        "\\pa
-0000d650: 7065 7222 3a20 2250 4150 4552 222c 0a20  per": "PAPER",. 
-0000d660: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000d670: 275c 5c72 656d 6f76 6527 3a20 2752 454d  '\\remove': 'REM
-0000d680: 4f56 4527 2c0a 2020 2020 2020 2020 2320  OVE',.        # 
-0000d690: 2020 2020 2020 2027 5c5c 7265 7065 6174         '\\repeat
-0000d6a0: 273a 2027 5245 5045 4154 272c 0a20 2020  ': 'REPEAT',.   
-0000d6b0: 2020 2020 2022 5c5c 7265 7374 223a 2022       "\\rest": "
-0000d6c0: 5245 5354 222c 0a20 2020 2020 2020 2022  REST",.        "
-0000d6d0: 5c5c 7265 7665 7274 223a 2022 5245 5645  \\revert": "REVE
-0000d6e0: 5254 222c 0a20 2020 2020 2020 2022 5c5c  RT",.        "\\
-0000d6f0: 7363 6f72 6522 3a20 2253 434f 5245 222c  score": "SCORE",
-0000d700: 0a20 2020 2020 2020 2022 5c5c 7365 7175  .        "\\sequ
-0000d710: 656e 7469 616c 223a 2022 5345 5155 454e  ential": "SEQUEN
-0000d720: 5449 414c 222c 0a20 2020 2020 2020 2022  TIAL",.        "
-0000d730: 5c5c 7365 7422 3a20 2253 4554 222c 0a20  \\set": "SET",. 
-0000d740: 2020 2020 2020 2022 5c5c 7369 6d75 6c74         "\\simult
-0000d750: 616e 656f 7573 223a 2022 5349 4d55 4c54  aneous": "SIMULT
-0000d760: 414e 454f 5553 222c 0a20 2020 2020 2020  ANEOUS",.       
-0000d770: 2022 5c5c 7465 6d70 6f22 3a20 2254 454d   "\\tempo": "TEM
-0000d780: 504f 222c 0a20 2020 2020 2020 2023 2020  PO",.        #  
-0000d790: 2020 2020 2020 275c 5c74 7970 6527 3a20        '\\type': 
-0000d7a0: 2754 5950 4527 2c0a 2020 2020 2020 2020  'TYPE',.        
-0000d7b0: 225c 5c75 6e73 6574 223a 2022 554e 5345  "\\unset": "UNSE
-0000d7c0: 5422 2c0a 2020 2020 2020 2020 225c 5c77  T",.        "\\w
-0000d7d0: 6974 6822 3a20 2257 4954 4822 2c0a 2020  ith": "WITH",.  
-0000d7e0: 2020 2020 2020 2320 7061 7273 6572 2e79        # parser.y
-0000d7f0: 793a 3233 330a 2020 2020 2020 2020 225c  y:233.        "\
-0000d800: 5c6e 6577 223a 2022 4e45 5743 4f4e 5445  \new": "NEWCONTE
-0000d810: 5854 222c 0a20 2020 2020 2020 2023 203f  XT",.        # ?
-0000d820: 3f3f 0a20 2020 2020 2020 2023 2020 2020  ??.        #    
-0000d830: 2020 2020 275c 5c6f 626a 6563 7469 6427      '\\objectid'
-0000d840: 3a20 274f 424a 4543 5449 4427 2c0a 2020  : 'OBJECTID',.  
-0000d850: 2020 7d0a 0a20 2020 2074 6f6b 656e 7320    }..    tokens 
-0000d860: 3d20 5b0a 2020 2020 2020 2020 2320 2020  = [.        #   
-0000d870: 2020 2020 2027 4348 4f52 445f 4241 5353       'CHORD_BASS
-0000d880: 272c 2023 2022 2f2b 220a 2020 2020 2020  ', # "/+".      
-0000d890: 2020 2320 2020 2020 2020 2027 4348 4f52    #        'CHOR
-0000d8a0: 445f 4341 5245 5427 2c20 2320 225e 220a  D_CARET', # "^".
-0000d8b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000d8c0: 2027 4348 4f52 445f 434f 4c4f 4e27 2c20   'CHORD_COLON', 
-0000d8d0: 2320 223a 220a 2020 2020 2020 2020 2320  # ":".        # 
-0000d8e0: 2020 2020 2020 2027 4348 4f52 445f 4d49         'CHORD_MI
-0000d8f0: 4e55 5327 2c20 2320 222d 220a 2020 2020  NUS', # "-".    
-0000d900: 2020 2020 2320 2020 2020 2020 2027 4348      #        'CH
-0000d910: 4f52 445f 534c 4153 4827 2c20 2320 222f  ORD_SLASH', # "/
-0000d920: 220a 2020 2020 2020 2020 2241 4e47 4c45  ".        "ANGLE
-0000d930: 5f4f 5045 4e22 2c20 2023 2022 3c22 0a20  _OPEN",  # "<". 
-0000d940: 2020 2020 2020 2022 414e 474c 455f 434c         "ANGLE_CL
-0000d950: 4f53 4522 2c20 2023 2022 3e22 0a20 2020  OSE",  # ">".   
-0000d960: 2020 2020 2022 444f 5542 4c45 5f41 4e47       "DOUBLE_ANG
-0000d970: 4c45 5f4f 5045 4e22 2c20 2023 2022 3c3c  LE_OPEN",  # "<<
-0000d980: 220a 2020 2020 2020 2020 2244 4f55 424c  ".        "DOUBL
-0000d990: 455f 414e 474c 455f 434c 4f53 4522 2c20  E_ANGLE_CLOSE", 
-0000d9a0: 2023 2022 3e3e 220a 2020 2020 2020 2020   # ">>".        
-0000d9b0: 2245 5f42 4143 4b53 4c41 5348 222c 2020  "E_BACKSLASH",  
-0000d9c0: 2320 225c 5c22 0a20 2020 2020 2020 2022  # "\\".        "
-0000d9d0: 455f 414e 474c 455f 434c 4f53 4522 2c20  E_ANGLE_CLOSE", 
-0000d9e0: 2023 2022 5c5c 3e22 0a20 2020 2020 2020   # "\\>".       
-0000d9f0: 2023 2020 2020 2020 2020 2745 5f43 4841   #        'E_CHA
-0000da00: 5227 2c20 2320 225c 5c43 5b68 6172 6163  R', # "\\C[harac
-0000da10: 7465 725d 220a 2020 2020 2020 2020 2245  ter]".        "E
-0000da20: 5f43 4c4f 5345 222c 2020 2320 225c 5c29  _CLOSE",  # "\\)
-0000da30: 220a 2020 2020 2020 2020 2245 5f45 5843  ".        "E_EXC
-0000da40: 4c41 4d41 5449 4f4e 222c 2020 2320 225c  LAMATION",  # "\
-0000da50: 5c21 220a 2020 2020 2020 2020 2320 2020  \!".        #   
-0000da60: 2020 2020 2027 455f 4252 4143 4b45 545f       'E_BRACKET_
-0000da70: 4f50 454e 272c 2023 2022 5c5c 5b22 0a20  OPEN', # "\\[". 
-0000da80: 2020 2020 2020 2022 455f 4f50 454e 222c         "E_OPEN",
-0000da90: 2020 2320 225c 5c28 220a 2020 2020 2020    # "\\(".      
-0000daa0: 2020 2320 2020 2020 2020 2027 455f 4252    #        'E_BR
-0000dab0: 4143 4b45 545f 434c 4f53 4527 2c20 2320  ACKET_CLOSE', # 
-0000dac0: 225c 5c5d 220a 2020 2020 2020 2020 2245  "\\]".        "E
-0000dad0: 5f41 4e47 4c45 5f4f 5045 4e22 2c20 2023  _ANGLE_OPEN",  #
-0000dae0: 2022 5c5c 3c22 0a20 2020 2020 2020 2023   "\\<".        #
-0000daf0: 2020 2020 2020 2020 2745 5f50 4c55 5327          'E_PLUS'
-0000db00: 2c20 2320 225c 5c2b 220a 2020 2020 2020  , # "\\+".      
-0000db10: 2020 2320 2020 2020 2020 2027 455f 5449    #        'E_TI
-0000db20: 4c44 4527 2c20 2320 225c 5c7e 220a 2020  LDE', # "\\~".  
-0000db30: 2020 2020 2020 2245 5854 454e 4445 5222        "EXTENDER"
-0000db40: 2c20 2023 2022 5f5f 220a 2020 2020 2020  ,  # "__".      
-0000db50: 2020 2320 2020 2020 2020 2027 4649 4755    #        'FIGU
-0000db60: 5245 5f43 4c4f 5345 272c 2023 2022 5c5c  RE_CLOSE', # "\\
-0000db70: 3e22 0a20 2020 2020 2020 2023 2020 2020  >".        #    
-0000db80: 2020 2020 2746 4947 5552 455f 4f50 454e      'FIGURE_OPEN
-0000db90: 272c 2023 2022 5c5c 3c22 0a20 2020 2020  ', # "\\<".     
-0000dba0: 2020 2023 2020 2020 2020 2020 2746 4947     #        'FIG
-0000dbb0: 5552 455f 5350 4143 4527 2c20 2320 225f  URE_SPACE', # "_
-0000dbc0: 220a 2020 2020 2020 2020 2248 5950 4845  ".        "HYPHE
-0000dbd0: 4e22 2c20 2023 2022 2d2d 220a 2020 2020  N",  # "--".    
-0000dbe0: 2020 2020 2320 2020 2020 2020 2027 4c59      #        'LY
-0000dbf0: 5249 435f 4d41 524b 5550 272c 0a20 2020  RIC_MARKUP',.   
-0000dc00: 2020 2020 2022 4d55 4c54 495f 4d45 4153       "MULTI_MEAS
-0000dc10: 5552 455f 5245 5354 222c 0a20 2020 2020  URE_REST",.     
-0000dc20: 2020 2022 455f 554e 5349 474e 4544 222c     "E_UNSIGNED",
-0000dc30: 0a20 2020 2020 2020 2022 554e 5349 474e  .        "UNSIGN
-0000dc40: 4544 222c 0a20 2020 2020 2020 2022 4558  ED",.        "EX
-0000dc50: 5045 4354 5f4d 4152 4b55 5022 2c20 2023  PECT_MARKUP",  #
-0000dc60: 2022 6d61 726b 7570 3f22 0a20 2020 2020   "markup?".     
-0000dc70: 2020 2022 4558 5045 4354 5f50 4954 4348     "EXPECT_PITCH
-0000dc80: 222c 2020 2320 226c 793a 7069 7463 683f  ",  # "ly:pitch?
-0000dc90: 220a 2020 2020 2020 2020 2245 5850 4543  ".        "EXPEC
-0000dca0: 545f 4455 5241 5449 4f4e 222c 2020 2320  T_DURATION",  # 
-0000dcb0: 226c 793a 6475 7261 7469 6f6e 3f22 0a20  "ly:duration?". 
-0000dcc0: 2020 2020 2020 2022 4558 5045 4354 5f53         "EXPECT_S
-0000dcd0: 434d 222c 2020 2320 2273 6368 656d 653f  CM",  # "scheme?
-0000dce0: 220a 2020 2020 2020 2020 2242 4143 4b55  ".        "BACKU
-0000dcf0: 5022 2c20 2023 2022 2862 6163 6b65 642d  P",  # "(backed-
-0000dd00: 7570 3f29 220a 2020 2020 2020 2020 2252  up?)".        "R
-0000dd10: 4550 4152 5345 222c 2020 2320 2228 7265  EPARSE",  # "(re
-0000dd20: 7061 7273 6564 3f29 220a 2020 2020 2020  parsed?)".      
-0000dd30: 2020 2245 5850 4543 545f 4d41 524b 5550    "EXPECT_MARKUP
-0000dd40: 5f4c 4953 5422 2c20 2023 2022 6d61 726b  _LIST",  # "mark
-0000dd50: 7570 2d6c 6973 743f 220a 2020 2020 2020  up-list?".      
-0000dd60: 2020 2245 5850 4543 545f 4f50 5449 4f4e    "EXPECT_OPTION
-0000dd70: 414c 222c 2020 2320 226f 7074 696f 6e61  AL",  # "optiona
-0000dd80: 6c3f 220a 2020 2020 2020 2020 2245 5850  l?".        "EXP
-0000dd90: 4543 545f 4e4f 5f4d 4f52 455f 4152 4753  ECT_NO_MORE_ARGS
-0000dda0: 222c 2020 230a 2020 2020 2020 2020 2320  ",  #.        # 
-0000ddb0: 2020 2020 2020 2027 454d 4245 4444 4544         'EMBEDDED
-0000ddc0: 5f4c 494c 5927 2c20 2320 2223 7b22 0a20  _LILY', # "#{". 
-0000ddd0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000dde0: 2742 4f4f 4b5f 4944 454e 5449 4649 4552  'BOOK_IDENTIFIER
-0000ddf0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-0000de00: 2020 2020 2743 484f 5244 5f4d 4f44 4946      'CHORD_MODIF
-0000de10: 4945 5227 2c0a 2020 2020 2020 2020 2243  IER',.        "C
-0000de20: 484f 5244 5f52 4550 4554 4954 494f 4e22  HORD_REPETITION"
-0000de30: 2c0a 2020 2020 2020 2020 2243 4f4e 5445  ,.        "CONTE
-0000de40: 5854 5f44 4546 5f49 4445 4e54 4946 4945  XT_DEF_IDENTIFIE
-0000de50: 5222 2c0a 2020 2020 2020 2020 2243 4f4e  R",.        "CON
-0000de60: 5445 5854 5f4d 4f44 5f49 4445 4e54 4946  TEXT_MOD_IDENTIF
-0000de70: 4945 5222 2c0a 2020 2020 2020 2020 2320  IER",.        # 
-0000de80: 2020 2020 2020 2027 4452 554d 5f50 4954         'DRUM_PIT
-0000de90: 4348 272c 0a20 2020 2020 2020 2022 5049  CH',.        "PI
-0000dea0: 5443 485f 4944 454e 5449 4649 4552 222c  TCH_IDENTIFIER",
-0000deb0: 0a20 2020 2020 2020 2022 4455 5241 5449  .        "DURATI
-0000dec0: 4f4e 5f49 4445 4e54 4946 4945 5222 2c0a  ON_IDENTIFIER",.
-0000ded0: 2020 2020 2020 2020 2245 5645 4e54 5f49          "EVENT_I
-0000dee0: 4445 4e54 4946 4945 5222 2c0a 2020 2020  DENTIFIER",.    
-0000def0: 2020 2020 2245 5645 4e54 5f46 554e 4354      "EVENT_FUNCT
-0000df00: 494f 4e22 2c0a 2020 2020 2020 2020 2246  ION",.        "F
-0000df10: 5241 4354 494f 4e22 2c0a 2020 2020 2020  RACTION",.      
-0000df20: 2020 2320 2020 2020 2020 2027 4c59 5249    #        'LYRI
-0000df30: 4353 5f53 5452 494e 4727 2c0a 2020 2020  CS_STRING',.    
-0000df40: 2020 2020 2320 2020 2020 2020 2027 4c59      #        'LY
-0000df50: 5249 435f 454c 454d 454e 5427 2c0a 2020  RIC_ELEMENT',.  
-0000df60: 2020 2020 2020 2320 2020 2020 2020 2027        #        '
-0000df70: 4c59 5249 435f 4d41 524b 5550 5f49 4445  LYRIC_MARKUP_IDE
-0000df80: 4e54 4946 4945 5227 2c0a 2020 2020 2020  NTIFIER',.      
-0000df90: 2020 224d 4152 4b55 505f 4655 4e43 5449    "MARKUP_FUNCTI
-0000dfa0: 4f4e 222c 0a20 2020 2020 2020 2022 4d41  ON",.        "MA
-0000dfb0: 524b 5550 5f4c 4953 545f 4655 4e43 5449  RKUP_LIST_FUNCTI
-0000dfc0: 4f4e 222c 0a20 2020 2020 2020 2022 4d41  ON",.        "MA
-0000dfd0: 524b 5550 5f49 4445 4e54 4946 4945 5222  RKUP_IDENTIFIER"
-0000dfe0: 2c0a 2020 2020 2020 2020 224d 4152 4b55  ,.        "MARKU
-0000dff0: 504c 4953 545f 4944 454e 5449 4649 4552  PLIST_IDENTIFIER
-0000e000: 222c 0a20 2020 2020 2020 2022 4d55 5349  ",.        "MUSI
-0000e010: 435f 4655 4e43 5449 4f4e 222c 0a20 2020  C_FUNCTION",.   
-0000e020: 2020 2020 2022 4d55 5349 435f 4944 454e       "MUSIC_IDEN
-0000e030: 5449 4649 4552 222c 0a20 2020 2020 2020  TIFIER",.       
-0000e040: 2022 4e4f 5445 4e41 4d45 5f50 4954 4348   "NOTENAME_PITCH
-0000e050: 222c 0a20 2020 2020 2020 2022 4e55 4d42  ",.        "NUMB
-0000e060: 4552 5f49 4445 4e54 4946 4945 5222 2c0a  ER_IDENTIFIER",.
-0000e070: 2020 2020 2020 2020 224f 5554 5055 545f          "OUTPUT_
-0000e080: 4445 465f 4944 454e 5449 4649 4552 222c  DEF_IDENTIFIER",
-0000e090: 0a20 2020 2020 2020 2022 5245 414c 222c  .        "REAL",
-0000e0a0: 0a20 2020 2020 2020 2022 5245 5354 4e41  .        "RESTNA
-0000e0b0: 4d45 222c 0a20 2020 2020 2020 2022 5343  ME",.        "SC
-0000e0c0: 4d5f 4655 4e43 5449 4f4e 222c 0a20 2020  M_FUNCTION",.   
-0000e0d0: 2020 2020 2022 5343 4d5f 4944 454e 5449       "SCM_IDENTI
-0000e0e0: 4649 4552 222c 0a20 2020 2020 2020 2022  FIER",.        "
-0000e0f0: 5343 4d5f 544f 4b45 4e22 2c0a 2020 2020  SCM_TOKEN",.    
-0000e100: 2020 2020 2253 434f 5245 5f49 4445 4e54      "SCORE_IDENT
-0000e110: 4946 4945 5222 2c0a 2020 2020 2020 2020  IFIER",.        
-0000e120: 2253 5452 494e 4722 2c0a 2020 2020 2020  "STRING",.      
-0000e130: 2020 2253 5452 494e 475f 4944 454e 5449    "STRING_IDENTI
-0000e140: 4649 4552 222c 0a20 2020 2020 2020 2022  FIER",.        "
-0000e150: 544f 4e49 434e 414d 455f 5049 5443 4822  TONICNAME_PITCH"
-0000e160: 2c0a 2020 2020 5d20 2b20 6c69 7374 286b  ,.    ] + list(k
-0000e170: 6579 776f 7264 732e 7661 6c75 6573 2829  eywords.values()
-0000e180: 290a 0a20 2020 206c 6974 6572 616c 7320  )..    literals 
-0000e190: 3d20 280a 2020 2020 2020 2020 2221 222c  = (.        "!",
-0000e1a0: 0a20 2020 2020 2020 2022 2722 2c0a 2020  .        "'",.  
-0000e1b0: 2020 2020 2020 2228 222c 0a20 2020 2020        "(",.     
-0000e1c0: 2020 2022 2922 2c0a 2020 2020 2020 2020     ")",.        
-0000e1d0: 222a 222c 0a20 2020 2020 2020 2022 2b22  "*",.        "+"
-0000e1e0: 2c0a 2020 2020 2020 2020 222c 222c 0a20  ,.        ",",. 
-0000e1f0: 2020 2020 2020 2022 2d22 2c0a 2020 2020         "-",.    
-0000e200: 2020 2020 222e 222c 0a20 2020 2020 2020      ".",.       
-0000e210: 2022 2f22 2c0a 2020 2020 2020 2020 223a   "/",.        ":
-0000e220: 222c 0a20 2020 2020 2020 2022 3c22 2c0a  ",.        "<",.
-0000e230: 2020 2020 2020 2020 223d 222c 0a20 2020          "=",.   
-0000e240: 2020 2020 2022 3e22 2c0a 2020 2020 2020       ">",.      
-0000e250: 2020 223f 222c 0a20 2020 2020 2020 2022    "?",.        "
-0000e260: 5b22 2c0a 2020 2020 2020 2020 225c 5c22  [",.        "\\"
-0000e270: 2c0a 2020 2020 2020 2020 225e 222c 0a20  ,.        "^",. 
-0000e280: 2020 2020 2020 2022 5f22 2c0a 2020 2020         "_",.    
-0000e290: 2020 2020 227b 222c 0a20 2020 2020 2020      "{",.       
-0000e2a0: 2022 7c22 2c0a 2020 2020 2020 2020 227d   "|",.        "}
-0000e2b0: 222c 0a20 2020 2020 2020 2022 7e22 2c0a  ",.        "~",.
-0000e2c0: 2020 2020 2020 2020 225d 222c 0a20 2020          "]",.   
-0000e2d0: 2029 0a0a 2020 2020 7374 7269 6e67 5f61   )..    string_a
-0000e2e0: 6363 756d 756c 6174 6f72 203d 2022 220a  ccumulator = "".
-0000e2f0: 0a20 2020 2023 2323 204c 4558 4943 414c  .    ### LEXICAL
-0000e300: 2052 554c 4553 2023 2323 0a0a 2020 2020   RULES ###..    
-0000e310: 2320 6c65 7865 722e 6c6c 3a31 3635 0a20  # lexer.ll:165. 
-0000e320: 2020 2023 203c 2a3e 5c72 0a20 2020 2064     # <*>\r.    d
-0000e330: 6566 2074 5f41 4e59 5f31 3635 2873 656c  ef t_ANY_165(sel
-0000e340: 662c 2074 293a 0a20 2020 2020 2020 2072  f, t):.        r
-0000e350: 225c 7222 0a20 2020 2020 2020 2070 6173  "\r".        pas
-0000e360: 730a 0a20 2020 2023 206c 6578 6572 2e6c  s..    # lexer.l
-0000e370: 6c3a 3136 390a 2020 2020 2320 3c65 7874  l:169.    # <ext
-0000e380: 7261 746f 6b65 6e3e 7b41 4e59 5f43 4841  ratoken>{ANY_CHA
-0000e390: 527d 0a0a 2020 2020 2320 6c65 7865 722e  R}..    # lexer.
-0000e3a0: 6c6c 3a31 3836 0a20 2020 2023 203c 6578  ll:186.    # <ex
-0000e3b0: 7472 6174 6f6b 656e 3e3c 3c45 4f46 3e3e  tratoken><<EOF>>
-0000e3c0: 0a0a 2020 2020 2320 6c65 7865 722e 6c6c  ..    # lexer.ll
-0000e3d0: 3a32 3031 0a20 2020 2023 203c 494e 4954  :201.    # <INIT
-0000e3e0: 4941 4c2c 6368 6f72 6473 2c6c 7972 6963  IAL,chords,lyric
-0000e3f0: 732c 6669 6775 7265 732c 6e6f 7465 733e  s,figures,notes>
-0000e400: 7b42 4f4d 5f55 5446 387d 2f2e 2a0a 0a20  {BOM_UTF8}/.*.. 
-0000e410: 2020 2023 206c 6578 6572 2e6c 6c3a 3231     # lexer.ll:21
-0000e420: 300a 2020 2020 2320 3c49 4e49 5449 414c  0.    # <INITIAL
-0000e430: 2c63 686f 7264 732c 6669 6775 7265 732c  ,chords,figures,
-0000e440: 696e 636c 2c6c 7972 6963 732c 6d61 726b  incl,lyrics,mark
-0000e450: 7570 2c6e 6f74 6573 3e22 257b 220a 2020  up,notes>"%{".  
-0000e460: 2020 6465 6620 745f 494e 4954 4941 4c5f    def t_INITIAL_
-0000e470: 6d61 726b 7570 5f6e 6f74 6573 5f32 3130  markup_notes_210
-0000e480: 2873 656c 662c 2074 293a 0a20 2020 2020  (self, t):.     
-0000e490: 2020 2072 2225 7b22 0a20 2020 2020 2020     r"%{".       
-0000e4a0: 2074 2e6c 6578 6572 2e70 7573 685f 7374   t.lexer.push_st
-0000e4b0: 6174 6528 226c 6f6e 6763 6f6d 6d65 6e74  ate("longcomment
-0000e4c0: 2229 0a20 2020 2020 2020 2070 6173 730a  ").        pass.
-0000e4d0: 0a20 2020 2023 206c 6578 6572 2e6c 6c3a  .    # lexer.ll:
-0000e4e0: 3231 340a 2020 2020 2320 3c49 4e49 5449  214.    # <INITI
-0000e4f0: 414c 2c63 686f 7264 732c 6669 6775 7265  AL,chords,figure
-0000e500: 732c 696e 636c 2c6c 7972 6963 732c 6d61  s,incl,lyrics,ma
-0000e510: 726b 7570 2c6e 6f74 6573 3e25 5b5e 7b5c  rkup,notes>%[^{\
-0000e520: 6e5c 725d 5b5e 5c6e 5c72 5d2a 5b5c 6e5c  n\r][^\n\r]*[\n\
-0000e530: 725d 0a20 2020 2064 6566 2074 5f49 4e49  r].    def t_INI
-0000e540: 5449 414c 5f6d 6172 6b75 705f 6e6f 7465  TIAL_markup_note
-0000e550: 735f 3231 3428 7365 6c66 2c20 7429 3a0a  s_214(self, t):.
-0000e560: 2020 2020 2020 2020 7222 255b 5e7b 5c6e          r"%[^{\n
-0000e570: 5c72 5d5b 5e5c 6e5c 725d 2a5b 5c6e 5c72  \r][^\n\r]*[\n\r
-0000e580: 5d22 0a20 2020 2020 2020 2070 6173 730a  ]".        pass.
-0000e590: 0a20 2020 2064 6566 2074 5f49 4e49 5449  .    def t_INITI
-0000e5a0: 414c 5f6d 6172 6b75 705f 6e6f 7465 735f  AL_markup_notes_
-0000e5b0: 3231 345f 454f 4628 7365 6c66 2c20 7429  214_EOF(self, t)
-0000e5c0: 3a0a 2020 2020 2020 2020 7222 255b 5e7b  :.        r"%[^{
-0000e5d0: 5c6e 5c72 5d5b 5e5c 6e5c 725d 2a24 220a  \n\r][^\n\r]*$".
-0000e5e0: 2020 2020 2020 2020 7061 7373 0a0a 2020          pass..  
-0000e5f0: 2020 2320 6c65 7865 722e 6c6c 3a32 3136    # lexer.ll:216
-0000e600: 0a20 2020 2023 203c 494e 4954 4941 4c2c  .    # <INITIAL,
-0000e610: 6368 6f72 6473 2c66 6967 7572 6573 2c69  chords,figures,i
-0000e620: 6e63 6c2c 6c79 7269 6373 2c6d 6172 6b75  ncl,lyrics,marku
-0000e630: 702c 6e6f 7465 733e 255b 5e7b 5c6e 5c72  p,notes>%[^{\n\r
-0000e640: 5d0a 2020 2020 6465 6620 745f 494e 4954  ].    def t_INIT
-0000e650: 4941 4c5f 6d61 726b 7570 5f6e 6f74 6573  IAL_markup_notes
-0000e660: 5f32 3136 2873 656c 662c 2074 293a 0a20  _216(self, t):. 
-0000e670: 2020 2020 2020 2072 2225 5b5e 7b5c 6e5c         r"%[^{\n\
-0000e680: 725d 220a 2020 2020 2020 2020 7061 7373  r]".        pass
-0000e690: 0a0a 2020 2020 2320 6c65 7865 722e 6c6c  ..    # lexer.ll
-0000e6a0: 3a32 3138 0a20 2020 2023 203c 494e 4954  :218.    # <INIT
-0000e6b0: 4941 4c2c 6368 6f72 6473 2c66 6967 7572  IAL,chords,figur
-0000e6c0: 6573 2c69 6e63 6c2c 6c79 7269 6373 2c6d  es,incl,lyrics,m
-0000e6d0: 6172 6b75 702c 6e6f 7465 733e 255b 5c6e  arkup,notes>%[\n
-0000e6e0: 5c72 5d0a 2020 2020 6465 6620 745f 494e  \r].    def t_IN
-0000e6f0: 4954 4941 4c5f 6d61 726b 7570 5f6e 6f74  ITIAL_markup_not
-0000e700: 6573 5f32 3138 2873 656c 662c 2074 293a  es_218(self, t):
-0000e710: 0a20 2020 2020 2020 2072 2225 5b5c 6e5c  .        r"%[\n\
-0000e720: 725d 220a 2020 2020 2020 2020 7061 7373  r]".        pass
-0000e730: 0a0a 2020 2020 2320 6c65 7865 722e 6c6c  ..    # lexer.ll
-0000e740: 3a32 3230 0a20 2020 2023 203c 494e 4954  :220.    # <INIT
-0000e750: 4941 4c2c 6368 6f72 6473 2c66 6967 7572  IAL,chords,figur
-0000e760: 6573 2c69 6e63 6c2c 6c79 7269 6373 2c6d  es,incl,lyrics,m
-0000e770: 6172 6b75 702c 6e6f 7465 733e 255b 5e7b  arkup,notes>%[^{
-0000e780: 5c6e 5c72 5d5b 5e5c 6e5c 725d 2a0a 2020  \n\r][^\n\r]*.  
-0000e790: 2020 6465 6620 745f 494e 4954 4941 4c5f    def t_INITIAL_
-0000e7a0: 6d61 726b 7570 5f6e 6f74 6573 5f32 3230  markup_notes_220
-0000e7b0: 2873 656c 662c 2074 293a 0a20 2020 2020  (self, t):.     
-0000e7c0: 2020 2072 2225 5b5e 7b5c 6e5c 725d 5b5e     r"%[^{\n\r][^
-0000e7d0: 5c6e 5c72 5d2a 220a 2020 2020 2020 2020  \n\r]*".        
-0000e7e0: 7061 7373 0a0a 2020 2020 2320 6c65 7865  pass..    # lexe
-0000e7f0: 722e 6c6c 3a32 3232 0a20 2020 2023 203c  r.ll:222.    # <
-0000e800: 494e 4954 4941 4c2c 6368 6f72 6473 2c66  INITIAL,chords,f
-0000e810: 6967 7572 6573 2c69 6e63 6c2c 6c79 7269  igures,incl,lyri
-0000e820: 6373 2c6d 6172 6b75 702c 6e6f 7465 733e  cs,markup,notes>
-0000e830: 7b57 4849 5445 7d2b 0a20 2020 2064 6566  {WHITE}+.    def
-0000e840: 2074 5f49 4e49 5449 414c 5f6d 6172 6b75   t_INITIAL_marku
-0000e850: 705f 6e6f 7465 735f 3232 3228 7365 6c66  p_notes_222(self
-0000e860: 2c20 7429 3a0a 2020 2020 2020 2020 225b  , t):.        "[
-0000e870: 205c 6e5c 745c 665c 725d 220a 2020 2020   \n\t\f\r]".    
-0000e880: 2020 2020 7061 7373 0a0a 2020 2020 2320      pass..    # 
-0000e890: 6c65 7865 722e 6c6c 3a32 3237 0a20 2020  lexer.ll:227.   
-0000e8a0: 2023 203c 494e 4954 4941 4c2c 6e6f 7465   # <INITIAL,note
-0000e8b0: 732c 6669 6775 7265 732c 6368 6f72 6473  s,figures,chords
-0000e8c0: 2c6d 6172 6b75 703e 5c22 0a20 2020 2064  ,markup>\".    d
-0000e8d0: 6566 2074 5f49 4e49 5449 414c 5f6d 6172  ef t_INITIAL_mar
-0000e8e0: 6b75 705f 6e6f 7465 735f 3232 3728 7365  kup_notes_227(se
-0000e8f0: 6c66 2c20 7429 3a0a 2020 2020 2020 2020  lf, t):.        
-0000e900: 7222 5c22 2022 0a20 2020 2020 2020 2074  r"\" ".        t
-0000e910: 2e6c 6578 6572 2e70 7573 685f 7374 6174  .lexer.push_stat
-0000e920: 6528 2271 756f 7465 2229 0a20 2020 2020  e("quote").     
-0000e930: 2020 2073 656c 662e 7374 7269 6e67 5f61     self.string_a
-0000e940: 6363 756d 756c 6174 6f72 203d 2022 220a  ccumulator = "".
-0000e950: 2020 2020 2020 2020 7061 7373 0a0a 2020          pass..  
-0000e960: 2020 2320 6c65 7865 722e 6c6c 3a32 3333    # lexer.ll:233
-0000e970: 0a20 2020 2023 203c 494e 4954 4941 4c2c  .    # <INITIAL,
-0000e980: 6368 6f72 6473 2c6c 7972 6963 732c 6e6f  chords,lyrics,no
-0000e990: 7465 732c 6669 6775 7265 733e 5c5c 7665  tes,figures>\\ve
-0000e9a0: 7273 696f 6e7b 5748 4954 457d 2a0a 2020  rsion{WHITE}*.  
-0000e9b0: 2020 6465 6620 745f 494e 4954 4941 4c5f    def t_INITIAL_
-0000e9c0: 6e6f 7465 735f 3233 3328 7365 6c66 2c20  notes_233(self, 
-0000e9d0: 7429 3a0a 2020 2020 2020 2020 7222 5c5c  t):.        r"\\
-0000e9e0: 7665 7273 696f 6e5b 205c 6e5c 745c 665c  version[ \n\t\f\
-0000e9f0: 725d 2a22 0a20 2020 2020 2020 2074 2e6c  r]*".        t.l
-0000ea00: 6578 6572 2e70 7573 685f 7374 6174 6528  exer.push_state(
-0000ea10: 2276 6572 7369 6f6e 2229 0a20 2020 2020  "version").     
-0000ea20: 2020 2070 6173 730a 0a20 2020 2023 206c     pass..    # l
-0000ea30: 6578 6572 2e6c 6c3a 3233 360a 2020 2020  exer.ll:236.    
-0000ea40: 2320 3c49 4e49 5449 414c 2c63 686f 7264  # <INITIAL,chord
-0000ea50: 732c 6c79 7269 6373 2c6e 6f74 6573 2c66  s,lyrics,notes,f
-0000ea60: 6967 7572 6573 3e5c 5c73 6f75 7263 6566  igures>\\sourcef
-0000ea70: 696c 656e 616d 657b 5748 4954 457d 2a0a  ilename{WHITE}*.
-0000ea80: 0a20 2020 2023 206c 6578 6572 2e6c 6c3a  .    # lexer.ll:
-0000ea90: 3233 390a 2020 2020 2320 3c49 4e49 5449  239.    # <INITI
-0000eaa0: 414c 2c63 686f 7264 732c 6c79 7269 6373  AL,chords,lyrics
-0000eab0: 2c6e 6f74 6573 2c66 6967 7572 6573 3e5c  ,notes,figures>\
-0000eac0: 5c73 6f75 7263 6566 696c 656c 696e 657b  \sourcefileline{
-0000ead0: 5748 4954 457d 2a0a 0a20 2020 2023 206c  WHITE}*..    # l
-0000eae0: 6578 6572 2e6c 6c3a 3234 320a 2020 2020  exer.ll:242.    
-0000eaf0: 2320 3c76 6572 7369 6f6e 3e5c 225b 5e22  # <version>\"[^"
-0000eb00: 5d2a 5c22 0a20 2020 2064 6566 2074 5f76  ]*\".    def t_v
-0000eb10: 6572 7369 6f6e 5f32 3432 2873 656c 662c  ersion_242(self,
-0000eb20: 2074 293a 0a20 2020 2020 2020 2072 275c   t):.        r'\
-0000eb30: 225b 5e22 5d2a 5c22 270a 2020 2020 2020  "[^"]*\"'.      
-0000eb40: 2020 742e 6c65 7865 722e 706f 705f 7374    t.lexer.pop_st
-0000eb50: 6174 6528 290a 2020 2020 2020 2020 7061  ate().        pa
-0000eb60: 7373 0a0a 2020 2020 2320 6c65 7865 722e  ss..    # lexer.
-0000eb70: 6c6c 3a32 3536 0a20 2020 2023 203c 736f  ll:256.    # <so
-0000eb80: 7572 6365 6669 6c65 6e61 6d65 3e5c 225b  urcefilename>\"[
-0000eb90: 5e22 5d2a 5c22 0a0a 2020 2020 2320 6c65  ^"]*\"..    # le
-0000eba0: 7865 722e 6c6c 3a32 3730 0a20 2020 2023  xer.ll:270.    #
-0000ebb0: 203c 736f 7572 6365 6669 6c65 6c69 6e65   <sourcefileline
-0000ebc0: 3e7b 494e 547d 0a0a 2020 2020 2320 6c65  >{INT}..    # le
-0000ebd0: 7865 722e 6c6c 3a32 3738 0a20 2020 2023  xer.ll:278.    #
-0000ebe0: 203c 7665 7273 696f 6e3e 7b41 4e59 5f43   <version>{ANY_C
-0000ebf0: 4841 527d 0a20 2020 2040 6c65 782e 544f  HAR}.    @lex.TO
-0000ec00: 4b45 4e28 414e 595f 4348 4152 290a 2020  KEN(ANY_CHAR).  
-0000ec10: 2020 6465 6620 745f 7665 7273 696f 6e5f    def t_version_
-0000ec20: 3237 3828 7365 6c66 2c20 7429 3a0a 2020  278(self, t):.  
-0000ec30: 2020 2020 2020 7072 696e 7428 2822 4c69        print(("Li
-0000ec40: 6c79 506f 6e64 5061 7273 6572 3a20 496c  lyPondParser: Il
-0000ec50: 6c65 6761 6c20 6368 6172 6163 7465 7220  legal character 
-0000ec60: 2725 7327 2220 2520 742e 7661 6c75 655b  '%s'" % t.value[
-0000ec70: 305d 2929 0a20 2020 2020 2020 2074 2e6c  0])).        t.l
-0000ec80: 6578 6572 2e73 6b69 7028 3129 0a0a 2020  exer.skip(1)..  
-0000ec90: 2020 2320 6c65 7865 722e 6c6c 3a32 3832    # lexer.ll:282
-0000eca0: 0a20 2020 2023 203c 736f 7572 6365 6669  .    # <sourcefi
-0000ecb0: 6c65 6e61 6d65 3e7b 414e 595f 4348 4152  lename>{ANY_CHAR
-0000ecc0: 7d0a 0a20 2020 2023 206c 6578 6572 2e6c  }..    # lexer.l
-0000ecd0: 6c3a 3238 360a 2020 2020 2320 3c73 6f75  l:286.    # <sou
-0000ece0: 7263 6566 696c 656c 696e 653e 7b41 4e59  rcefileline>{ANY
-0000ecf0: 5f43 4841 527d 0a0a 2020 2020 2320 6c65  _CHAR}..    # le
-0000ed00: 7865 722e 6c6c 3a32 3936 0a20 2020 2023  xer.ll:296.    #
-0000ed10: 203c 6c6f 6e67 636f 6d6d 656e 743e 2225   <longcomment>"%
-0000ed20: 222b 227d 220a 2020 2020 6465 6620 745f  "+"}".    def t_
-0000ed30: 6c6f 6e67 636f 6d6d 656e 745f 3239 3628  longcomment_296(
-0000ed40: 7365 6c66 2c20 7429 3a0a 2020 2020 2020  self, t):.      
-0000ed50: 2020 7222 257d 220a 2020 2020 2020 2020    r"%}".        
-0000ed60: 742e 6c65 7865 722e 706f 705f 7374 6174  t.lexer.pop_stat
-0000ed70: 6528 290a 2020 2020 2020 2020 7061 7373  e().        pass
-0000ed80: 0a0a 2020 2020 2320 6c65 7865 722e 6c6c  ..    # lexer.ll
-0000ed90: 3a32 3931 0a20 2020 2023 203c 6c6f 6e67  :291.    # <long
-0000eda0: 636f 6d6d 656e 743e 5b5e 5c25 5d2a 0a20  comment>[^\%]*. 
-0000edb0: 2020 2064 6566 2074 5f6c 6f6e 6763 6f6d     def t_longcom
-0000edc0: 6d65 6e74 5f32 3931 2873 656c 662c 2074  ment_291(self, t
-0000edd0: 293a 0a20 2020 2020 2020 2072 225b 5e25  ):.        r"[^%
-0000ede0: 5d2b 220a 2020 2020 2020 2020 7061 7373  ]+".        pass
-0000edf0: 0a0a 2020 2020 2320 6c65 7865 722e 6c6c  ..    # lexer.ll
-0000ee00: 3a32 3933 0a20 2020 2023 203c 6c6f 6e67  :293.    # <long
-0000ee10: 636f 6d6d 656e 743e 5c25 2a5b 5e7d 255d  comment>\%*[^}%]
-0000ee20: 2a0a 2020 2020 6465 6620 745f 6c6f 6e67  *.    def t_long
-0000ee30: 636f 6d6d 656e 745f 3239 3328 7365 6c66  comment_293(self
-0000ee40: 2c20 7429 3a0a 2020 2020 2020 2020 7222  , t):.        r"
-0000ee50: 252b 5b5e 7d25 5d2a 220a 2020 2020 2020  %+[^}%]*".      
-0000ee60: 2020 7061 7373 0a0a 2020 2020 2320 6c65    pass..    # le
-0000ee70: 7865 722e 6c6c 3a33 3032 0a20 2020 2023  xer.ll:302.    #
-0000ee80: 203c 494e 4954 4941 4c2c 6368 6f72 6473   <INITIAL,chords
-0000ee90: 2c6c 7972 6963 732c 6e6f 7465 732c 6669  ,lyrics,notes,fi
-0000eea0: 6775 7265 733e 5c5c 6d61 696e 696e 7075  gures>\\maininpu
-0000eeb0: 740a 0a20 2020 2023 206c 6578 6572 2e6c  t..    # lexer.l
-0000eec0: 6c3a 3331 320a 2020 2020 2320 3c49 4e49  l:312.    # <INI
-0000eed0: 5449 414c 2c63 686f 7264 732c 6c79 7269  TIAL,chords,lyri
-0000eee0: 6373 2c66 6967 7572 6573 2c6e 6f74 6573  cs,figures,notes
-0000eef0: 3e5c 5c69 6e63 6c75 6465 0a0a 2020 2020  >\\include..    
-0000ef00: 2320 6c65 7865 722e 6c6c 3a33 3135 0a20  # lexer.ll:315. 
-0000ef10: 2020 2023 203c 696e 636c 3e5c 225b 5e22     # <incl>\"[^"
-0000ef20: 5d2a 5c22 0a0a 2020 2020 2320 6c65 7865  ]*\"..    # lexe
-0000ef30: 722e 6c6c 3a33 3232 0a20 2020 2023 203c  r.ll:322.    # <
-0000ef40: 696e 636c 3e5c 5c7b 424c 4143 4b7d 2a7b  incl>\\{BLACK}*{
-0000ef50: 5748 4954 457d 3f0a 0a20 2020 2023 206c  WHITE}?..    # l
-0000ef60: 6578 6572 2e6c 6c3a 3334 310a 2020 2020  exer.ll:341.    
-0000ef70: 2320 3c69 6e63 6c2c 7665 7273 696f 6e2c  # <incl,version,
-0000ef80: 736f 7572 6365 6669 6c65 6e61 6d65 3e5c  sourcefilename>\
-0000ef90: 225b 5e22 5d2a 0a20 2020 2064 6566 2074  "[^"]*.    def t
-0000efa0: 5f76 6572 7369 6f6e 5f33 3431 2873 656c  _version_341(sel
-0000efb0: 662c 2074 293a 0a20 2020 2020 2020 2072  f, t):.        r
-0000efc0: 2722 5b5e 225d 2a27 0a20 2020 2020 2020  '"[^"]*'.       
-0000efd0: 2072 6169 7365 2045 7863 6570 7469 6f6e   raise Exception
-0000efe0: 2866 2265 6e64 2071 756f 7465 206d 6973  (f"end quote mis
-0000eff0: 7369 6e67 3a20 7b74 2172 7d2e 2229 0a0a  sing: {t!r}.")..
-0000f000: 2020 2020 2320 6c65 7865 722e 6c6c 3a33      # lexer.ll:3
-0000f010: 3435 0a20 2020 2023 203c 6368 6f72 6473  45.    # <chords
-0000f020: 2c6e 6f74 6573 2c66 6967 7572 6573 3e7b  ,notes,figures>{
-0000f030: 5245 5354 4e41 4d45 7d0a 2020 2020 2320  RESTNAME}.    # 
-0000f040: 2020 2040 6c65 782e 746f 6b65 6e2e 544f     @lex.token.TO
-0000f050: 4b45 4e28 5245 5354 4e41 4d45 290a 2020  KEN(RESTNAME).  
-0000f060: 2020 2320 2020 2064 6566 2074 5f6e 6f74    #    def t_not
-0000f070: 6573 5f33 3435 2873 656c 662c 2074 293a  es_345(self, t):
-0000f080: 0a20 2020 2023 2020 2020 2020 2020 742e  .    #        t.
-0000f090: 7479 7065 203d 2027 5245 5354 4e41 4d45  type = 'RESTNAME
-0000f0a0: 270a 2020 2020 2320 2020 2020 2020 2072  '.    #        r
-0000f0b0: 6574 7572 6e20 740a 0a20 2020 2023 206c  eturn t..    # l
-0000f0c0: 6578 6572 2e6c 6c3a 3335 300a 2020 2020  exer.ll:350.    
-0000f0d0: 2320 3c63 686f 7264 732c 6e6f 7465 732c  # <chords,notes,
-0000f0e0: 6669 6775 7265 733e 520a 2020 2020 2320  figures>R.    # 
-0000f0f0: 2020 2064 6566 2074 5f6e 6f74 6573 5f33     def t_notes_3
-0000f100: 3530 2873 656c 662c 2074 293a 0a20 2020  50(self, t):.   
-0000f110: 2023 2020 2020 2020 2020 2752 270a 2020   #        'R'.  
-0000f120: 2020 2320 2020 2020 2020 2074 2e74 7970    #        t.typ
-0000f130: 6520 3d20 274d 554c 5449 5f4d 4541 5355  e = 'MULTI_MEASU
-0000f140: 5245 5f52 4553 5427 0a20 2020 2023 2020  RE_REST'.    #  
-0000f150: 2020 2020 2020 7265 7475 726e 2074 0a0a        return t..
-0000f160: 2020 2020 2320 6465 6620 745f 494e 4954      # def t_INIT
-0000f170: 4941 4c5f 6d61 726b 7570 5f6e 6f74 6573  IAL_markup_notes
-0000f180: 5f33 3533 5f62 6f6f 6c65 616e 2873 656c  _353_boolean(sel
-0000f190: 662c 2074 293a 0a20 2020 2023 2020 2020  f, t):.    #    
-0000f1a0: 275c 235c 2328 747c 6629 270a 2020 2020  '\#\#(t|f)'.    
-0000f1b0: 2320 2020 2074 2e74 7970 6520 3d20 2753  #    t.type = 'S
-0000f1c0: 434d 5f54 4f4b 454e 270a 2020 2020 2320  CM_TOKEN'.    # 
-0000f1d0: 2020 2069 6620 742e 7661 6c75 655b 325d     if t.value[2]
-0000f1e0: 203d 3d20 2774 273a 0a20 2020 2023 2020   == 't':.    #  
-0000f1f0: 2020 2020 2020 742e 7661 6c75 6520 3d20        t.value = 
-0000f200: 5472 7565 0a20 2020 2023 2020 2020 656c  True.    #    el
-0000f210: 7365 3a0a 2020 2020 2320 2020 2020 2020  se:.    #       
-0000f220: 2074 2e76 616c 7565 203d 2046 616c 7365   t.value = False
-0000f230: 0a20 2020 2023 2020 2020 7265 7475 726e  .    #    return
-0000f240: 2074 0a0a 2020 2020 2320 406c 6578 2e54   t..    # @lex.T
-0000f250: 4f4b 454e 2822 5c23 2725 7322 2025 2044  OKEN("\#'%s" % D
-0000f260: 4153 4845 445f 574f 5244 290a 2020 2020  ASHED_WORD).    
-0000f270: 2320 6465 6620 745f 494e 4954 4941 4c5f  # def t_INITIAL_
-0000f280: 6d61 726b 7570 5f6e 6f74 6573 5f33 3533  markup_notes_353
-0000f290: 5f69 6465 6e74 6966 6965 7228 7365 6c66  _identifier(self
-0000f2a0: 2c20 7429 3a0a 2020 2020 2320 2020 2074  , t):.    #    t
-0000f2b0: 2e74 7970 6520 3d20 2753 434d 5f49 4445  .type = 'SCM_IDE
-0000f2c0: 4e54 4946 4945 5227 0a20 2020 2023 2020  NTIFIER'.    #  
-0000f2d0: 2020 742e 7661 6c75 6520 3d20 742e 7661    t.value = t.va
-0000f2e0: 6c75 655b 323a 5d0a 2020 2020 2320 2020  lue[2:].    #   
-0000f2f0: 2072 6574 7572 6e20 740a 0a20 2020 2023   return t..    #
-0000f300: 206c 6578 6572 2e6c 6c3a 3335 330a 2020   lexer.ll:353.  
-0000f310: 2020 2320 3c49 4e49 5449 414c 2c63 686f    # <INITIAL,cho
-0000f320: 7264 732c 6669 6775 7265 732c 6c79 7269  rds,figures,lyri
-0000f330: 6373 2c6d 6172 6b75 702c 6e6f 7465 733e  cs,markup,notes>
-0000f340: 230a 2020 2020 6465 6620 745f 494e 4954  #.    def t_INIT
-0000f350: 4941 4c5f 6d61 726b 7570 5f6e 6f74 6573  IAL_markup_notes
-0000f360: 5f33 3533 2873 656c 662c 2074 293a 0a20  _353(self, t):. 
-0000f370: 2020 2020 2020 2072 225c 2322 0a20 2020         r"\#".   
-0000f380: 2020 2020 2023 2074 2e74 7970 6520 3d20       # t.type = 
-0000f390: 2753 4348 454d 455f 5354 4152 5427 0a20  'SCHEME_START'. 
-0000f3a0: 2020 2020 2020 2023 2074 2e6c 6578 6572         # t.lexer
-0000f3b0: 2e70 7573 685f 7374 6174 6528 2749 4e49  .push_state('INI
-0000f3c0: 5449 414c 2729 0a20 2020 2020 2020 2073  TIAL').        s
-0000f3d0: 6368 656d 655f 7061 7273 6572 203d 2053  cheme_parser = S
-0000f3e0: 6368 656d 6550 6172 7365 7228 6465 6275  chemeParser(debu
-0000f3f0: 673d 4661 6c73 6529 0a20 2020 2020 2020  g=False).       
-0000f400: 2069 6e70 7574 5f73 7472 696e 6720 3d20   input_string = 
-0000f410: 742e 6c65 7865 722e 6c65 7864 6174 615b  t.lexer.lexdata[
-0000f420: 742e 6c65 7870 6f73 202b 2031 203a 5d0a  t.lexpos + 1 :].
-0000f430: 2020 2020 2020 2020 2320 7072 696e 7420          # print 
-0000f440: 2750 5245 5041 5253 4527 0a20 2020 2020  'PREPARSE'.     
-0000f450: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0000f460: 2020 2020 7363 6865 6d65 5f70 6172 7365      scheme_parse
-0000f470: 7228 696e 7075 745f 7374 7269 6e67 290a  r(input_string).
-0000f480: 2020 2020 2020 2020 6578 6365 7074 205f          except _
-0000f490: 6578 6365 7074 696f 6e73 2e53 6368 656d  exceptions.Schem
-0000f4a0: 6550 6172 7365 7246 696e 6973 6865 6445  eParserFinishedE
-0000f4b0: 7272 6f72 3a0a 2020 2020 2020 2020 2020  rror:.          
-0000f4c0: 2020 7265 7375 6c74 203d 2073 6368 656d    result = schem
-0000f4d0: 655f 7061 7273 6572 2e72 6573 756c 740a  e_parser.result.
-0000f4e0: 2020 2020 2020 2020 2020 2020 742e 7661              t.va
-0000f4f0: 6c75 6520 3d20 7265 7375 6c74 0a20 2020  lue = result.   
-0000f500: 2020 2020 2020 2020 2074 2e74 7970 6520           t.type 
-0000f510: 3d20 2253 434d 5f54 4f4b 454e 220a 2020  = "SCM_TOKEN".  
-0000f520: 2020 2020 2020 2020 2020 2320 6966 2069            # if i
-0000f530: 7369 6e73 7461 6e63 6528 7265 7375 6c74  sinstance(result
-0000f540: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
-0000f550: 2020 2020 2320 2020 2074 2e74 7970 6520      #    t.type 
-0000f560: 3d20 2753 5452 494e 4727 0a20 2020 2020  = 'STRING'.     
-0000f570: 2020 2020 2020 2023 2020 2020 6966 2074         #    if t
-0000f580: 2e76 616c 7565 2e66 696e 6428 2720 2729  .value.find(' ')
-0000f590: 2021 3d20 2d31 3a0a 2020 2020 2020 2020   != -1:.        
-0000f5a0: 2020 2020 2320 2020 2020 2020 2074 2e76      #        t.v
-0000f5b0: 616c 7565 203d 2066 2722 7b74 2e76 616c  alue = f'"{t.val
-0000f5c0: 7565 7d22 270a 2020 2020 2020 2020 2020  ue}"'.          
-0000f5d0: 2020 2320 656c 7365 3a0a 2020 2020 2020    # else:.      
-0000f5e0: 2020 2020 2020 2320 2020 2074 2e74 7970        #    t.typ
-0000f5f0: 6520 3d20 2753 434d 5f54 4f4b 454e 270a  e = 'SCM_TOKEN'.
-0000f600: 2020 2020 2020 2020 2020 2020 742e 6c65              t.le
-0000f610: 7865 722e 736b 6970 2873 6368 656d 655f  xer.skip(scheme_
-0000f620: 7061 7273 6572 2e63 7572 736f 725f 656e  parser.cursor_en
-0000f630: 6420 2b20 3129 0a20 2020 2020 2020 2072  d + 1).        r
-0000f640: 6574 7572 6e20 740a 0a20 2020 2023 206c  eturn t..    # l
-0000f650: 6578 6572 2e6c 6c3a 3338 370a 2020 2020  exer.ll:387.    
-0000f660: 2320 3c49 4e49 5449 414c 2c6e 6f74 6573  # <INITIAL,notes
-0000f670: 2c6c 7972 6963 733e 5c3c 5c3c 0a20 2020  ,lyrics>\<\<.   
-0000f680: 2064 6566 2074 5f49 4e49 5449 414c 5f6e   def t_INITIAL_n
-0000f690: 6f74 6573 5f33 3837 2873 656c 662c 2074  otes_387(self, t
-0000f6a0: 293a 0a20 2020 2020 2020 2072 225c 3c5c  ):.        r"\<\
-0000f6b0: 3c22 0a20 2020 2020 2020 2074 2e74 7970  <".        t.typ
-0000f6c0: 6520 3d20 2244 4f55 424c 455f 414e 474c  e = "DOUBLE_ANGL
-0000f6d0: 455f 4f50 454e 220a 2020 2020 2020 2020  E_OPEN".        
-0000f6e0: 7265 7475 726e 2074 0a0a 2020 2020 2320  return t..    # 
-0000f6f0: 6c65 7865 722e 6c6c 3a33 3930 0a20 2020  lexer.ll:390.   
-0000f700: 2023 203c 494e 4954 4941 4c2c 6e6f 7465   # <INITIAL,note
-0000f710: 732c 6c79 7269 6373 3e5c 3e5c 3e0a 2020  s,lyrics>\>\>.  
-0000f720: 2020 6465 6620 745f 494e 4954 4941 4c5f    def t_INITIAL_
-0000f730: 6e6f 7465 735f 3339 3028 7365 6c66 2c20  notes_390(self, 
-0000f740: 7429 3a0a 2020 2020 2020 2020 7222 5c3e  t):.        r"\>
-0000f750: 5c3e 220a 2020 2020 2020 2020 742e 7479  \>".        t.ty
-0000f760: 7065 203d 2022 444f 5542 4c45 5f41 4e47  pe = "DOUBLE_ANG
-0000f770: 4c45 5f43 4c4f 5345 220a 2020 2020 2020  LE_CLOSE".      
-0000f780: 2020 7265 7475 726e 2074 0a0a 2020 2020    return t..    
-0000f790: 2320 6c65 7865 722e 6c6c 3a33 3936 0a20  # lexer.ll:396. 
-0000f7a0: 2020 2023 203c 494e 4954 4941 4c2c 6e6f     # <INITIAL,no
-0000f7b0: 7465 733e 5c3c 0a20 2020 2064 6566 2074  tes>\<.    def t
-0000f7c0: 5f49 4e49 5449 414c 5f6e 6f74 6573 5f33  _INITIAL_notes_3
-0000f7d0: 3936 2873 656c 662c 2074 293a 0a20 2020  96(self, t):.   
-0000f7e0: 2020 2020 2072 225c 3c22 0a20 2020 2020       r"\<".     
-0000f7f0: 2020 2074 2e74 7970 6520 3d20 2241 4e47     t.type = "ANG
-0000f800: 4c45 5f4f 5045 4e22 0a20 2020 2020 2020  LE_OPEN".       
-0000f810: 2072 6574 7572 6e20 740a 0a20 2020 2023   return t..    #
-0000f820: 206c 6578 6572 2e6c 6c3a 3339 390a 2020   lexer.ll:399.  
-0000f830: 2020 2320 3c49 4e49 5449 414c 2c6e 6f74    # <INITIAL,not
-0000f840: 6573 3e5c 3e0a 2020 2020 6465 6620 745f  es>\>.    def t_
-0000f850: 494e 4954 4941 4c5f 6e6f 7465 735f 3339  INITIAL_notes_39
-0000f860: 3928 7365 6c66 2c20 7429 3a0a 2020 2020  9(self, t):.    
-0000f870: 2020 2020 7222 5c3e 220a 2020 2020 2020      r"\>".      
-0000f880: 2020 742e 7479 7065 203d 2022 414e 474c    t.type = "ANGL
-0000f890: 455f 434c 4f53 4522 0a20 2020 2020 2020  E_CLOSE".       
-0000f8a0: 2072 6574 7572 6e20 740a 0a20 2020 2023   return t..    #
-0000f8b0: 206c 6578 6572 2e6c 6c3a 3430 350a 2020   lexer.ll:405.  
-0000f8c0: 2020 2320 3c66 6967 7572 6573 3e5f 0a0a    # <figures>_..
-0000f8d0: 2020 2020 2320 6c65 7865 722e 6c6c 3a34      # lexer.ll:4
-0000f8e0: 3038 0a20 2020 2023 203c 6669 6775 7265  08.    # <figure
-0000f8f0: 733e 5c3e 0a0a 2020 2020 2320 6c65 7865  s>\>..    # lexe
-0000f900: 722e 6c6c 3a34 3131 0a20 2020 2023 203c  r.ll:411.    # <
-0000f910: 6669 6775 7265 733e 5c3c 0a0a 2020 2020  figures>\<..    
-0000f920: 2320 6c65 7865 722e 6c6c 3a34 3137 0a20  # lexer.ll:417. 
-0000f930: 2020 2023 203c 6e6f 7465 732c 6669 6775     # <notes,figu
-0000f940: 7265 733e 7b41 4c50 4841 574f 5244 7d0a  res>{ALPHAWORD}.
-0000f950: 2020 2020 406c 6578 2e54 4f4b 454e 2841      @lex.TOKEN(A
-0000f960: 4c50 4841 574f 5244 290a 2020 2020 6465  LPHAWORD).    de
-0000f970: 6620 745f 6e6f 7465 735f 3431 3728 7365  f t_notes_417(se
-0000f980: 6c66 2c20 7429 3a0a 2020 2020 2020 2020  lf, t):.        
-0000f990: 7069 7463 685f 6e61 6d65 7320 3d20 7365  pitch_names = se
-0000f9a0: 6c66 2e63 6c69 656e 742e 5f70 6974 6368  lf.client._pitch
-0000f9b0: 5f6e 616d 6573 0a20 2020 2020 2020 2076  _names.        v
-0000f9c0: 616c 7565 203d 2074 2e76 616c 7565 0a20  alue = t.value. 
-0000f9d0: 2020 2020 2020 2069 6620 7661 6c75 6520         if value 
-0000f9e0: 696e 2070 6974 6368 5f6e 616d 6573 3a0a  in pitch_names:.
-0000f9f0: 2020 2020 2020 2020 2020 2020 742e 7479              t.ty
-0000fa00: 7065 203d 2022 4e4f 5445 4e41 4d45 5f50  pe = "NOTENAME_P
-0000fa10: 4954 4348 220a 2020 2020 2020 2020 2020  ITCH".          
-0000fa20: 2020 742e 7661 6c75 6520 3d20 5f70 6974    t.value = _pit
-0000fa30: 6368 2e4e 616d 6564 5069 7463 6843 6c61  ch.NamedPitchCla
-0000fa40: 7373 2870 6974 6368 5f6e 616d 6573 5b74  ss(pitch_names[t
-0000fa50: 2e76 616c 7565 5d29 0a20 2020 2020 2020  .value]).       
-0000fa60: 2065 6c69 6620 7661 6c75 6520 696e 205f   elif value in _
-0000fa70: 6c79 636f 6e73 742e 6472 756d 733a 0a20  lyconst.drums:. 
-0000fa80: 2020 2020 2020 2020 2020 2074 2e74 7970             t.typ
-0000fa90: 6520 3d20 224e 4f54 454e 414d 455f 5049  e = "NOTENAME_PI
-0000faa0: 5443 4822 0a20 2020 2020 2020 2020 2020  TCH".           
-0000fab0: 2074 2e76 616c 7565 203d 205f 6c79 636f   t.value = _lyco
-0000fac0: 6e73 742e 6472 756d 735b 7661 6c75 655d  nst.drums[value]
-0000fad0: 0a20 2020 2020 2020 2065 6c69 6620 7661  .        elif va
-0000fae0: 6c75 6520 696e 205b 2272 222c 2022 7322  lue in ["r", "s"
-0000faf0: 5d3a 0a20 2020 2020 2020 2020 2020 2074  ]:.            t
-0000fb00: 2e74 7970 6520 3d20 2252 4553 544e 414d  .type = "RESTNAM
-0000fb10: 4522 0a20 2020 2020 2020 2065 6c69 6620  E".        elif 
-0000fb20: 7661 6c75 6520 3d3d 2022 5222 3a0a 2020  value == "R":.  
-0000fb30: 2020 2020 2020 2020 2020 742e 7479 7065            t.type
-0000fb40: 203d 2022 4d55 4c54 495f 4d45 4153 5552   = "MULTI_MEASUR
-0000fb50: 455f 5245 5354 220a 2020 2020 2020 2020  E_REST".        
-0000fb60: 656c 6966 2076 616c 7565 203d 3d20 2271  elif value == "q
-0000fb70: 223a 0a20 2020 2020 2020 2020 2020 2069  ":.            i
-0000fb80: 6620 7365 6c66 2e63 6c69 656e 742e 5f6c  f self.client._l
-0000fb90: 6173 745f 6368 6f72 6420 6973 204e 6f6e  ast_chord is Non
-0000fba0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0000fbb0: 2020 2073 656c 662e 636c 6965 6e74 2e5f     self.client._
-0000fbc0: 6c61 7374 5f63 686f 7264 203d 205f 7363  last_chord = _sc
-0000fbd0: 6f72 652e 4368 6f72 6428 5b22 6322 2c20  ore.Chord(["c", 
-0000fbe0: 2267 222c 2022 6327 225d 2c20 2831 2c20  "g", "c'"], (1, 
-0000fbf0: 3429 290a 2020 2020 2020 2020 2020 2020  4)).            
-0000fc00: 742e 7479 7065 203d 2022 4348 4f52 445f  t.type = "CHORD_
-0000fc10: 5245 5045 5449 5449 4f4e 220a 2020 2020  REPETITION".    
-0000fc20: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000fc30: 2020 2020 2020 742e 7479 7065 203d 2022        t.type = "
-0000fc40: 5354 5249 4e47 220a 2020 2020 2020 2020  STRING".        
-0000fc50: 7265 7475 726e 2074 0a0a 2020 2020 2320  return t..    # 
-0000fc60: 6c65 7865 722e 6c6c 3a34 3231 0a20 2020  lexer.ll:421.   
-0000fc70: 2023 203c 6e6f 7465 732c 6669 6775 7265   # <notes,figure
-0000fc80: 733e 7b4e 4f54 4543 4f4d 4d41 4e44 7d0a  s>{NOTECOMMAND}.
-0000fc90: 2020 2020 406c 6578 2e54 4f4b 454e 284e      @lex.TOKEN(N
-0000fca0: 4f54 4543 4f4d 4d41 4e44 290a 2020 2020  OTECOMMAND).    
-0000fcb0: 6465 6620 745f 6e6f 7465 735f 3432 3128  def t_notes_421(
-0000fcc0: 7365 6c66 2c20 7429 3a0a 2020 2020 2020  self, t):.      
-0000fcd0: 2020 742e 7479 7065 203d 2073 656c 662e    t.type = self.
-0000fce0: 7363 616e 5f65 7363 6170 6564 5f77 6f72  scan_escaped_wor
-0000fcf0: 6428 7429 0a20 2020 2020 2020 2072 6574  d(t).        ret
-0000fd00: 7572 6e20 740a 0a20 2020 2023 206c 6578  urn t..    # lex
-0000fd10: 6572 2e6c 6c3a 3432 340a 2020 2020 2320  er.ll:424.    # 
-0000fd20: 3c6e 6f74 6573 2c66 6967 7572 6573 3e7b  <notes,figures>{
-0000fd30: 4652 4143 5449 4f4e 7d0a 2020 2020 406c  FRACTION}.    @l
-0000fd40: 6578 2e54 4f4b 454e 2846 5241 4354 494f  ex.TOKEN(FRACTIO
-0000fd50: 4e29 0a20 2020 2064 6566 2074 5f6e 6f74  N).    def t_not
-0000fd60: 6573 5f34 3234 2873 656c 662c 2074 293a  es_424(self, t):
-0000fd70: 0a20 2020 2020 2020 2074 2e74 7970 6520  .        t.type 
-0000fd80: 3d20 2246 5241 4354 494f 4e22 0a20 2020  = "FRACTION".   
-0000fd90: 2020 2020 2070 6172 7473 203d 2074 2e76       parts = t.v
-0000fda0: 616c 7565 2e73 706c 6974 2822 2f22 290a  alue.split("/").
-0000fdb0: 2020 2020 2020 2020 742e 7661 6c75 6520          t.value 
-0000fdc0: 3d20 4c69 6c79 506f 6e64 4672 6163 7469  = LilyPondFracti
-0000fdd0: 6f6e 2869 6e74 2870 6172 7473 5b30 5d29  on(int(parts[0])
-0000fde0: 2c20 696e 7428 7061 7274 735b 315d 2929  , int(parts[1]))
-0000fdf0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000fe00: 740a 0a20 2020 2023 206c 6578 6572 2e6c  t..    # lexer.l
-0000fe10: 6c3a 3432 380a 2020 2020 2320 3c6e 6f74  l:428.    # <not
-0000fe20: 6573 2c66 6967 7572 6573 3e7b 554e 5349  es,figures>{UNSI
-0000fe30: 474e 4544 7d2f 5c2f 7c7b 554e 5349 474e  GNED}/\/|{UNSIGN
-0000fe40: 4544 7d0a 2020 2020 2320 406c 6578 2e54  ED}.    # @lex.T
-0000fe50: 4f4b 454e 2827 2573 2f5c 2f7c 2573 2720  OKEN('%s/\/|%s' 
-0000fe60: 2520 2855 4e53 4947 4e45 442c 2055 4e53  % (UNSIGNED, UNS
-0000fe70: 4947 4e45 4429 290a 2020 2020 406c 6578  IGNED)).    @lex
-0000fe80: 2e54 4f4b 454e 2872 2225 732f 5c2f 2220  .TOKEN(r"%s/\/" 
-0000fe90: 2520 554e 5349 474e 4544 290a 2020 2020  % UNSIGNED).    
-0000fea0: 6465 6620 745f 6e6f 7465 735f 3432 3828  def t_notes_428(
-0000feb0: 7365 6c66 2c20 7429 3a0a 2020 2020 2020  self, t):.      
-0000fec0: 2020 742e 7479 7065 203d 2022 554e 5349    t.type = "UNSI
-0000fed0: 474e 4544 220a 2020 2020 2020 2020 742e  GNED".        t.
-0000fee0: 7661 6c75 6520 3d20 696e 7428 742e 7661  value = int(t.va
-0000fef0: 6c75 6529 0a20 2020 2020 2020 2072 6574  lue).        ret
-0000ff00: 7572 6e20 740a 0a20 2020 2040 6c65 782e  urn t..    @lex.
-0000ff10: 544f 4b45 4e28 554e 5349 474e 4544 290a  TOKEN(UNSIGNED).
-0000ff20: 2020 2020 6465 6620 745f 6e6f 7465 735f      def t_notes_
-0000ff30: 3432 3862 2873 656c 662c 2074 293a 0a20  428b(self, t):. 
-0000ff40: 2020 2020 2020 2074 2e74 7970 6520 3d20         t.type = 
-0000ff50: 2255 4e53 4947 4e45 4422 0a20 2020 2020  "UNSIGNED".     
-0000ff60: 2020 2074 2e76 616c 7565 203d 2069 6e74     t.value = int
-0000ff70: 2874 2e76 616c 7565 290a 2020 2020 2020  (t.value).      
-0000ff80: 2020 7265 7475 726e 2074 0a0a 2020 2020    return t..    
-0000ff90: 2320 6c65 7865 722e 6c6c 3a34 3333 0a20  # lexer.ll:433. 
-0000ffa0: 2020 2023 203c 6e6f 7465 732c 6669 6775     # <notes,figu
-0000ffb0: 7265 733e 7b45 5f55 4e53 4947 4e45 447d  res>{E_UNSIGNED}
-0000ffc0: 0a20 2020 2040 6c65 782e 544f 4b45 4e28  .    @lex.TOKEN(
-0000ffd0: 455f 554e 5349 474e 4544 290a 2020 2020  E_UNSIGNED).    
-0000ffe0: 6465 6620 745f 6e6f 7465 735f 3433 3328  def t_notes_433(
-0000fff0: 7365 6c66 2c20 7429 3a0a 2020 2020 2020  self, t):.      
-00010000: 2020 742e 7479 7065 203d 2022 455f 554e    t.type = "E_UN
-00010010: 5349 474e 4544 220a 2020 2020 2020 2020  SIGNED".        
-00010020: 742e 7661 6c75 6520 3d20 696e 7428 742e  t.value = int(t.
-00010030: 7661 6c75 655b 313a 5d29 0a20 2020 2020  value[1:]).     
-00010040: 2020 2072 6574 7572 6e20 740a 0a20 2020     return t..   
-00010050: 2023 206c 6578 6572 2e6c 6c3a 3434 300a   # lexer.ll:440.
-00010060: 2020 2020 2320 3c71 756f 7465 2c6c 7972      # <quote,lyr
-00010070: 6963 5f71 756f 7465 3e5c 5c7b 4553 4341  ic_quote>\\{ESCA
-00010080: 5045 447d 0a20 2020 2040 6c65 782e 544f  PED}.    @lex.TO
-00010090: 4b45 4e28 225c 5c25 7322 2025 2045 5343  KEN("\\%s" % ESC
-000100a0: 4150 4544 290a 2020 2020 6465 6620 745f  APED).    def t_
-000100b0: 7175 6f74 655f 3434 3028 7365 6c66 2c20  quote_440(self, 
-000100c0: 7429 3a0a 2020 2020 2020 2020 7365 6c66  t):.        self
-000100d0: 2e73 7472 696e 675f 6163 6375 6d75 6c61  .string_accumula
-000100e0: 746f 7220 2b3d 2074 2e76 616c 7565 0a20  tor += t.value. 
-000100f0: 2020 2020 2020 2070 6173 730a 0a20 2020         pass..   
-00010100: 2064 6566 2074 5f71 756f 7465 5f58 5858   def t_quote_XXX
-00010110: 2873 656c 662c 2074 293a 0a20 2020 2020  (self, t):.     
-00010120: 2020 2072 275c 5c22 270a 2020 2020 2020     r'\\"'.      
-00010130: 2020 7365 6c66 2e73 7472 696e 675f 6163    self.string_ac
-00010140: 6375 6d75 6c61 746f 7220 2b3d 2074 2e76  cumulator += t.v
-00010150: 616c 7565 0a20 2020 2020 2020 2070 6173  alue.        pas
-00010160: 730a 0a20 2020 2023 206c 6578 6572 2e6c  s..    # lexer.l
-00010170: 6c3a 3434 330a 2020 2020 2320 3c71 756f  l:443.    # <quo
-00010180: 7465 2c6c 7972 6963 5f71 756f 7465 3e5b  te,lyric_quote>[
-00010190: 5e5c 5c22 225d 2b0a 2020 2020 6465 6620  ^\\""]+.    def 
-000101a0: 745f 7175 6f74 655f 3434 3328 7365 6c66  t_quote_443(self
-000101b0: 2c20 7429 3a0a 2020 2020 2020 2020 7227  , t):.        r'
-000101c0: 5b5e 5c5c 2222 5d2b 270a 2020 2020 2020  [^\\""]+'.      
-000101d0: 2020 7365 6c66 2e73 7472 696e 675f 6163    self.string_ac
-000101e0: 6375 6d75 6c61 746f 7220 2b3d 2074 2e76  cumulator += t.v
-000101f0: 616c 7565 0a20 2020 2020 2020 2070 6173  alue.        pas
-00010200: 730a 0a20 2020 2023 206c 6578 6572 2e6c  s..    # lexer.l
-00010210: 6c3a 3434 360a 2020 2020 2320 3c71 756f  l:446.    # <quo
-00010220: 7465 2c6c 7972 6963 5f71 756f 7465 3e5c  te,lyric_quote>\
-00010230: 220a 2020 2020 6465 6620 745f 7175 6f74  ".    def t_quot
-00010240: 655f 3434 3628 7365 6c66 2c20 7429 3a0a  e_446(self, t):.
-00010250: 2020 2020 2020 2020 7222 5c22 2022 0a20          r"\" ". 
-00010260: 2020 2020 2020 2074 2e6c 6578 6572 2e70         t.lexer.p
-00010270: 6f70 5f73 7461 7465 2829 0a20 2020 2020  op_state().     
-00010280: 2020 2074 2e74 7970 6520 3d20 2253 5452     t.type = "STR
-00010290: 494e 4722 0a20 2020 2020 2020 2074 2e76  ING".        t.v
-000102a0: 616c 7565 203d 2073 656c 662e 7374 7269  alue = self.stri
-000102b0: 6e67 5f61 6363 756d 756c 6174 6f72 0a20  ng_accumulator. 
-000102c0: 2020 2020 2020 2072 6574 7572 6e20 740a         return t.
-000102d0: 0a20 2020 2023 206c 6578 6572 2e6c 6c3a  .    # lexer.ll:
-000102e0: 3435 360a 2020 2020 2320 3c71 756f 7465  456.    # <quote
-000102f0: 2c6c 7972 6963 5f71 756f 7465 3e2e 0a20  ,lyric_quote>.. 
-00010300: 2020 2064 6566 2074 5f71 756f 7465 5f34     def t_quote_4
-00010310: 3536 2873 656c 662c 2074 293a 0a20 2020  56(self, t):.   
-00010320: 2020 2020 2072 222e 220a 2020 2020 2020       r".".      
-00010330: 2020 7365 6c66 2e73 7472 696e 675f 6163    self.string_ac
-00010340: 6375 6d75 6c61 746f 7220 2b3d 2074 2e76  cumulator += t.v
-00010350: 616c 7565 0a20 2020 2020 2020 2070 6173  alue.        pas
-00010360: 730a 0a20 2020 2023 206c 6578 6572 2e6c  s..    # lexer.l
-00010370: 6c3a 3436 320a 2020 2020 2320 3c6c 7972  l:462.    # <lyr
-00010380: 6963 733e 5c22 0a0a 2020 2020 2320 6c65  ics>\"..    # le
-00010390: 7865 722e 6c6c 3a34 3635 0a20 2020 2023  xer.ll:465.    #
-000103a0: 203c 6c79 7269 6373 3e7b 4652 4143 5449   <lyrics>{FRACTI
-000103b0: 4f4e 7d0a 0a20 2020 2023 206c 6578 6572  ON}..    # lexer
-000103c0: 2e6c 6c3a 3436 390a 2020 2020 2320 3c6c  .ll:469.    # <l
-000103d0: 7972 6963 733e 7b55 4e53 4947 4e45 447d  yrics>{UNSIGNED}
-000103e0: 2f5c 2f5b 5e30 2d39 5d0a 0a20 2020 2023  /\/[^0-9]..    #
-000103f0: 206c 6578 6572 2e6c 6c3a 3437 330a 2020   lexer.ll:473.  
-00010400: 2020 2320 3c6c 7972 6963 733e 7b55 4e53    # <lyrics>{UNS
-00010410: 4947 4e45 447d 2f5c 2f7c 7b55 4e53 4947  IGNED}/\/|{UNSIG
-00010420: 4e45 447d 0a0a 2020 2020 2320 6c65 7865  NED}..    # lexe
-00010430: 722e 6c6c 3a34 3738 0a20 2020 2023 203c  r.ll:478.    # <
-00010440: 6c79 7269 6373 3e7b 4e4f 5445 434f 4d4d  lyrics>{NOTECOMM
-00010450: 414e 447d 0a0a 2020 2020 2320 6c65 7865  AND}..    # lexe
-00010460: 722e 6c6c 3a34 3831 0a20 2020 2023 203c  r.ll:481.    # <
-00010470: 6c79 7269 6373 3e7b 4c59 5249 4353 7d0a  lyrics>{LYRICS}.
-00010480: 0a20 2020 2023 206c 6578 6572 2e6c 6c3a  .    # lexer.ll:
-00010490: 3439 390a 2020 2020 2320 3c6c 7972 6963  499.    # <lyric
-000104a0: 733e 2e0a 0a20 2020 2023 206c 6578 6572  s>...    # lexer
-000104b0: 2e6c 6c3a 3530 340a 2020 2020 2320 3c63  .ll:504.    # <c
-000104c0: 686f 7264 733e 7b41 4c50 4841 574f 5244  hords>{ALPHAWORD
-000104d0: 7d0a 0a20 2020 2023 206c 6578 6572 2e6c  }..    # lexer.l
-000104e0: 6c3a 3530 370a 2020 2020 2320 3c63 686f  l:507.    # <cho
-000104f0: 7264 733e 7b4e 4f54 4543 4f4d 4d41 4e44  rds>{NOTECOMMAND
-00010500: 7d0a 0a20 2020 2023 206c 6578 6572 2e6c  }..    # lexer.l
-00010510: 6c3a 3531 300a 2020 2020 2320 3c63 686f  l:510.    # <cho
-00010520: 7264 733e 7b46 5241 4354 494f 4e7d 0a0a  rds>{FRACTION}..
-00010530: 2020 2020 2320 6c65 7865 722e 6c6c 3a35      # lexer.ll:5
-00010540: 3134 0a20 2020 2023 203c 6368 6f72 6473  14.    # <chords
-00010550: 3e7b 554e 5349 474e 4544 7d2f 5c2f 5b5e  >{UNSIGNED}/\/[^
-00010560: 302d 395d 0a0a 2020 2020 2320 6c65 7865  0-9]..    # lexe
-00010570: 722e 6c6c 3a35 3138 0a20 2020 2023 203c  r.ll:518.    # <
-00010580: 6368 6f72 6473 3e7b 554e 5349 474e 4544  chords>{UNSIGNED
-00010590: 7d2f 5c2f 7c7b 554e 5349 474e 4544 7d0a  }/\/|{UNSIGNED}.
-000105a0: 0a20 2020 2023 206c 6578 6572 2e6c 6c3a  .    # lexer.ll:
-000105b0: 3532 330a 2020 2020 2320 3c63 686f 7264  523.    # <chord
-000105c0: 733e 2d0a 0a20 2020 2023 206c 6578 6572  s>-..    # lexer
-000105d0: 2e6c 6c3a 3532 360a 2020 2020 2320 3c63  .ll:526.    # <c
-000105e0: 686f 7264 733e 3a0a 0a20 2020 2023 206c  hords>:..    # l
-000105f0: 6578 6572 2e6c 6c3a 3532 390a 2020 2020  exer.ll:529.    
-00010600: 2320 3c63 686f 7264 733e 5c2f 5c2b 0a0a  # <chords>\/\+..
-00010610: 2020 2020 2320 6c65 7865 722e 6c6c 3a35      # lexer.ll:5
-00010620: 3332 0a20 2020 2023 203c 6368 6f72 6473  32.    # <chords
-00010630: 3e5c 2f0a 0a20 2020 2023 206c 6578 6572  >\/..    # lexer
-00010640: 2e6c 6c3a 3533 350a 2020 2020 2320 3c63  .ll:535.    # <c
-00010650: 686f 7264 733e 5c5e 0a0a 2020 2020 2320  hords>\^..    # 
-00010660: 6c65 7865 722e 6c6c 3a35 3338 0a20 2020  lexer.ll:538.   
-00010670: 2023 203c 6368 6f72 6473 3e2e 0a0a 2020   # <chords>...  
-00010680: 2020 2320 6c65 7865 722e 6c6c 3a35 3435    # lexer.ll:545
-00010690: 0a20 2020 2023 203c 6d61 726b 7570 3e5c  .    # <markup>\
-000106a0: 5c73 636f 7265 0a20 2020 2064 6566 2074  \score.    def t
-000106b0: 5f6d 6172 6b75 705f 3534 3528 7365 6c66  _markup_545(self
-000106c0: 2c20 7429 3a0a 2020 2020 2020 2020 7222  , t):.        r"
-000106d0: 5c5c 7363 6f72 6522 0a20 2020 2020 2020  \\score".       
-000106e0: 2074 2e74 7970 6520 3d20 2253 434f 5245   t.type = "SCORE
-000106f0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
-00010700: 2074 0a0a 2020 2020 2320 6c65 7865 722e   t..    # lexer.
-00010710: 6c6c 3a35 3438 0a20 2020 2023 203c 6d61  ll:548.    # <ma
-00010720: 726b 7570 3e7b 4d41 524b 5550 434f 4d4d  rkup>{MARKUPCOMM
-00010730: 414e 447d 0a20 2020 2040 6c65 782e 544f  AND}.    @lex.TO
-00010740: 4b45 4e28 4d41 524b 5550 434f 4d4d 414e  KEN(MARKUPCOMMAN
-00010750: 4429 0a20 2020 2064 6566 2074 5f6d 6172  D).    def t_mar
-00010760: 6b75 705f 3534 3828 7365 6c66 2c20 7429  kup_548(self, t)
-00010770: 3a0a 2020 2020 2020 2020 7661 6c75 6520  :.        value 
-00010780: 3d20 742e 7661 6c75 655b 313a 5d0a 2020  = t.value[1:].  
-00010790: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
-000107a0: 2020 2020 2020 2076 616c 7565 2069 6e20         value in 
-000107b0: 7365 6c66 2e63 6c69 656e 742e 5f6d 6172  self.client._mar
-000107c0: 6b75 705f 6675 6e63 7469 6f6e 730a 2020  kup_functions.  
-000107d0: 2020 2020 2020 2020 2020 6f72 2076 616c            or val
-000107e0: 7565 2069 6e20 7365 6c66 2e63 6c69 656e  ue in self.clien
-000107f0: 742e 5f6d 6172 6b75 705f 6c69 7374 5f66  t._markup_list_f
-00010800: 756e 6374 696f 6e73 0a20 2020 2020 2020  unctions.       
-00010810: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
-00010820: 6966 2076 616c 7565 2069 6e20 7365 6c66  if value in self
-00010830: 2e63 6c69 656e 742e 5f6d 6172 6b75 705f  .client._markup_
-00010840: 6675 6e63 7469 6f6e 733a 0a20 2020 2020  functions:.     
-00010850: 2020 2020 2020 2020 2020 2074 2e74 7970             t.typ
-00010860: 6520 3d20 224d 4152 4b55 505f 4655 4e43  e = "MARKUP_FUNC
-00010870: 5449 4f4e 220a 2020 2020 2020 2020 2020  TION".          
-00010880: 2020 2020 2020 7369 676e 6174 7572 6520        signature 
-00010890: 3d20 7365 6c66 2e63 6c69 656e 742e 5f6d  = self.client._m
-000108a0: 6172 6b75 705f 6675 6e63 7469 6f6e 735b  arkup_functions[
-000108b0: 7661 6c75 655d 0a20 2020 2020 2020 2020  value].         
-000108c0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000108d0: 2020 2020 2020 2020 2074 2e74 7970 6520           t.type 
-000108e0: 3d20 224d 4152 4b55 505f 4c49 5354 5f46  = "MARKUP_LIST_F
-000108f0: 554e 4354 494f 4e22 0a20 2020 2020 2020  UNCTION".       
-00010900: 2020 2020 2020 2020 2073 6967 6e61 7475           signatu
-00010910: 7265 203d 2073 656c 662e 636c 6965 6e74  re = self.client
-00010920: 2e5f 6d61 726b 7570 5f6c 6973 745f 6675  ._markup_list_fu
-00010930: 6e63 7469 6f6e 735b 7661 6c75 655d 0a20  nctions[value]. 
-00010940: 2020 2020 2020 2020 2020 2023 2070 7269             # pri
-00010950: 6e74 2074 2e74 7970 652c 2076 616c 7565  nt t.type, value
-00010960: 2c20 7369 676e 6174 7572 650a 2020 2020  , signature.    
-00010970: 2020 2020 2020 2020 7365 6c66 2e70 7573          self.pus
-00010980: 685f 7369 676e 6174 7572 6528 7369 676e  h_signature(sign
-00010990: 6174 7572 652c 2074 290a 2020 2020 2020  ature, t).      
-000109a0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000109b0: 2020 2020 742e 7479 7065 203d 2073 656c      t.type = sel
-000109c0: 662e 7363 616e 5f65 7363 6170 6564 5f77  f.scan_escaped_w
-000109d0: 6f72 6428 7429 0a20 2020 2020 2020 2072  ord(t).        r
-000109e0: 6574 7572 6e20 740a 0a20 2020 2023 206c  eturn t..    # l
-000109f0: 6578 6572 2e6c 6c3a 3539 380a 2020 2020  exer.ll:598.    
-00010a00: 2320 3c6d 6172 6b75 703e 5b7b 7d5d 0a20  # <markup>[{}]. 
-00010a10: 2020 2023 2020 2020 6465 6620 745f 6d61     #    def t_ma
-00010a20: 726b 7570 5f35 3938 2873 656c 662c 2074  rkup_598(self, t
-00010a30: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
-00010a40: 7227 5b7b 7d5d 270a 2020 2020 2320 2020  r'[{}]'.    #   
-00010a50: 2020 2020 2074 2e74 7970 6520 3d20 742e       t.type = t.
-00010a60: 7661 6c75 650a 2020 2020 2320 2020 2020  value.    #     
-00010a70: 2020 2072 6574 7572 6e20 740a 0a20 2020     return t..   
-00010a80: 2023 206c 6578 6572 2e6c 6c3a 3630 310a   # lexer.ll:601.
-00010a90: 2020 2020 2320 3c6d 6172 6b75 703e 5b5e      # <markup>[^
-00010aa0: 237b 7d5c 225c 5c20 5c74 5c6e 5c72 5c66  #{}\"\\ \t\n\r\f
-00010ab0: 5d2b 0a20 2020 2064 6566 2074 5f6d 6172  ]+.    def t_mar
-00010ac0: 6b75 705f 3630 3128 7365 6c66 2c20 7429  kup_601(self, t)
-00010ad0: 3a0a 2020 2020 2020 2020 7222 5b5e 237b  :.        r"[^#{
-00010ae0: 7d5c 225c 5c20 5c74 5c6e 5c72 5c66 5d2b  }\"\\ \t\n\r\f]+
-00010af0: 220a 2020 2020 2020 2020 742e 7479 7065  ".        t.type
-00010b00: 203d 2022 5354 5249 4e47 220a 2020 2020   = "STRING".    
-00010b10: 2020 2020 7265 7475 726e 2074 0a0a 2020      return t..  
-00010b20: 2020 2320 6c65 7865 722e 6c6c 3a36 3134    # lexer.ll:614
-00010b30: 0a20 2020 2023 203c 6d61 726b 7570 3e2e  .    # <markup>.
-00010b40: 0a0a 2020 2020 2320 6c65 7865 722e 6c6c  ..    # lexer.ll
-00010b50: 3a36 3139 0a20 2020 2023 203c 6c6f 6e67  :619.    # <long
-00010b60: 636f 6d6d 656e 743e 3c3c 454f 463e 3e0a  comment><<EOF>>.
-00010b70: 0a20 2020 2023 206c 6578 6572 2e6c 6c3a  .    # lexer.ll:
-00010b80: 3632 360a 2020 2020 2320 3c3c 454f 463e  626.    # <<EOF>
-00010b90: 3e0a 0a20 2020 2023 206c 6578 6572 2e6c  >..    # lexer.l
-00010ba0: 6c3a 3634 330a 2020 2020 2320 3c49 4e49  l:643.    # <INI
-00010bb0: 5449 414c 3e7b 4441 5348 4544 5f57 4f52  TIAL>{DASHED_WOR
-00010bc0: 447d 0a20 2020 2040 6c65 782e 544f 4b45  D}.    @lex.TOKE
-00010bd0: 4e28 4441 5348 4544 5f57 4f52 4429 0a20  N(DASHED_WORD). 
-00010be0: 2020 2064 6566 2074 5f49 4e49 5449 414c     def t_INITIAL
-00010bf0: 5f36 3433 2873 656c 662c 2074 293a 0a20  _643(self, t):. 
-00010c00: 2020 2020 2020 2074 2e74 7970 6520 3d20         t.type = 
-00010c10: 7365 6c66 2e73 6361 6e5f 6261 7265 5f77  self.scan_bare_w
-00010c20: 6f72 6428 7429 0a20 2020 2020 2020 2072  ord(t).        r
-00010c30: 6574 7572 6e20 740a 0a20 2020 2023 206c  eturn t..    # l
-00010c40: 6578 6572 2e6c 6c3a 3634 360a 2020 2020  exer.ll:646.    
-00010c50: 2320 3c49 4e49 5449 414c 3e7b 4441 5348  # <INITIAL>{DASH
-00010c60: 4544 5f4b 4559 5f57 4f52 447d 0a20 2020  ED_KEY_WORD}.   
-00010c70: 2040 6c65 782e 544f 4b45 4e28 4441 5348   @lex.TOKEN(DASH
-00010c80: 4544 5f4b 4559 5f57 4f52 4429 0a20 2020  ED_KEY_WORD).   
-00010c90: 2064 6566 2074 5f49 4e49 5449 414c 5f36   def t_INITIAL_6
-00010ca0: 3436 2873 656c 662c 2074 293a 0a20 2020  46(self, t):.   
-00010cb0: 2020 2020 2074 2e74 7970 6520 3d20 7365       t.type = se
-00010cc0: 6c66 2e73 6361 6e5f 6573 6361 7065 645f  lf.scan_escaped_
-00010cd0: 776f 7264 2874 290a 2020 2020 2020 2020  word(t).        
-00010ce0: 7265 7475 726e 2074 0a0a 2020 2020 2320  return t..    # 
-00010cf0: 6c65 7865 722e 6c6c 3a36 3531 0a20 2020  lexer.ll:651.   
-00010d00: 2023 202d 7b55 4e53 4947 4e45 447d 7c7b   # -{UNSIGNED}|{
-00010d10: 5245 414c 7d0a 2020 2020 406c 6578 2e54  REAL}.    @lex.T
-00010d20: 4f4b 454e 2852 4541 4c29 0a20 2020 2064  OKEN(REAL).    d
-00010d30: 6566 2074 5f36 3531 5f61 2873 656c 662c  ef t_651_a(self,
-00010d40: 2074 293a 0a20 2020 2020 2020 2074 2e74   t):.        t.t
-00010d50: 7970 6520 3d20 2252 4541 4c22 0a20 2020  ype = "REAL".   
-00010d60: 2020 2020 2074 2e76 616c 7565 203d 2066       t.value = f
-00010d70: 6c6f 6174 2874 2e76 616c 7565 290a 2020  loat(t.value).  
-00010d80: 2020 2020 2020 7265 7475 726e 2074 0a0a        return t..
-00010d90: 2020 2020 406c 6578 2e54 4f4b 454e 2822      @lex.TOKEN("
-00010da0: 2d25 7322 2025 2055 4e53 4947 4e45 4429  -%s" % UNSIGNED)
-00010db0: 0a20 2020 2064 6566 2074 5f36 3531 5f62  .    def t_651_b
-00010dc0: 2873 656c 662c 2074 293a 0a20 2020 2020  (self, t):.     
-00010dd0: 2020 2074 2e74 7970 6520 3d20 2252 4541     t.type = "REA
-00010de0: 4c22 0a20 2020 2020 2020 2074 2e76 616c  L".        t.val
-00010df0: 7565 203d 2066 6c6f 6174 2874 2e76 616c  ue = float(t.val
-00010e00: 7565 290a 2020 2020 2020 2020 7265 7475  ue).        retu
-00010e10: 726e 2074 0a0a 2020 2020 2320 6c65 7865  rn t..    # lexe
-00010e20: 722e 6c6c 3a36 3631 0a20 2020 2023 202d  r.ll:661.    # -
-00010e30: 5c2e 0a20 2020 2064 6566 2074 5f36 3631  \..    def t_661
-00010e40: 2873 656c 662c 2074 293a 0a20 2020 2020  (self, t):.     
-00010e50: 2020 2072 222d 5c2e 220a 2020 2020 2020     r"-\.".      
-00010e60: 2020 742e 7479 7065 203d 2022 5245 414c    t.type = "REAL
-00010e70: 220a 2020 2020 2020 2020 742e 7661 6c75  ".        t.valu
-00010e80: 6520 3d20 302e 300a 2020 2020 2020 2020  e = 0.0.        
-00010e90: 7265 7475 726e 2074 0a0a 2020 2020 2320  return t..    # 
-00010ea0: 6c65 7865 722e 6c6c 3a36 3636 0a20 2020  lexer.ll:666.   
-00010eb0: 2023 207b 554e 5349 474e 4544 7d0a 2020   # {UNSIGNED}.  
-00010ec0: 2020 406c 6578 2e54 4f4b 454e 2855 4e53    @lex.TOKEN(UNS
-00010ed0: 4947 4e45 4429 0a20 2020 2064 6566 2074  IGNED).    def t
-00010ee0: 5f36 3636 2873 656c 662c 2074 293a 0a20  _666(self, t):. 
-00010ef0: 2020 2020 2020 2074 2e74 7970 6520 3d20         t.type = 
-00010f00: 2255 4e53 4947 4e45 4422 0a20 2020 2020  "UNSIGNED".     
-00010f10: 2020 2074 2e76 616c 7565 203d 2066 6c6f     t.value = flo
-00010f20: 6174 2874 2e76 616c 7565 290a 2020 2020  at(t.value).    
-00010f30: 2020 2020 7265 7475 726e 2074 0a0a 2020      return t..  
-00010f40: 2020 2320 6c65 7865 722e 6c6c 3a36 3732    # lexer.ll:672
-00010f50: 0a20 2020 2023 205b 7b7d 5d0a 0a20 2020  .    # [{}]..   
-00010f60: 2023 206c 6578 6572 2e6c 6c3a 3637 360a   # lexer.ll:676.
-00010f70: 2020 2020 2320 5b2a 3a3d 5d0a 0a20 2020      # [*:=]..   
-00010f80: 2023 206c 6578 6572 2e6c 6c3a 3638 320a   # lexer.ll:682.
-00010f90: 2020 2020 2320 3c49 4e49 5449 414c 2c6e      # <INITIAL,n
-00010fa0: 6f74 6573 2c66 6967 7572 6573 3e2e 0a0a  otes,figures>...
-00010fb0: 2020 2020 2320 6c65 7865 722e 6c6c 3a36      # lexer.ll:6
-00010fc0: 3836 0a20 2020 2023 203c 494e 4954 4941  86.    # <INITIA
-00010fd0: 4c2c 6c79 7269 6373 2c6e 6f74 6573 2c66  L,lyrics,notes,f
-00010fe0: 6967 7572 6573 3e5c 5c2e 0a20 2020 2064  igures>\\..    d
-00010ff0: 6566 2074 5f49 4e49 5449 414c 5f6e 6f74  ef t_INITIAL_not
-00011000: 6573 5f36 3836 2873 656c 662c 2074 293a  es_686(self, t):
-00011010: 0a20 2020 2020 2020 2072 225c 5c2e 220a  .        r"\\.".
-00011020: 2020 2020 2020 2020 6966 2074 2e76 616c          if t.val
-00011030: 7565 5b31 5d20 3d3d 2022 3e22 3a0a 2020  ue[1] == ">":.  
-00011040: 2020 2020 2020 2020 2020 742e 7479 7065            t.type
-00011050: 203d 2022 455f 414e 474c 455f 434c 4f53   = "E_ANGLE_CLOS
-00011060: 4522 0a20 2020 2020 2020 2065 6c69 6620  E".        elif 
-00011070: 742e 7661 6c75 655b 315d 203d 3d20 223c  t.value[1] == "<
-00011080: 223a 0a20 2020 2020 2020 2020 2020 2074  ":.            t
-00011090: 2e74 7970 6520 3d20 2245 5f41 4e47 4c45  .type = "E_ANGLE
-000110a0: 5f4f 5045 4e22 0a20 2020 2020 2020 2065  _OPEN".        e
-000110b0: 6c69 6620 742e 7661 6c75 655b 315d 203d  lif t.value[1] =
-000110c0: 3d20 2221 223a 0a20 2020 2020 2020 2020  = "!":.         
-000110d0: 2020 2074 2e74 7970 6520 3d20 2245 5f45     t.type = "E_E
-000110e0: 5843 4c41 4d41 5449 4f4e 220a 2020 2020  XCLAMATION".    
-000110f0: 2020 2020 656c 6966 2074 2e76 616c 7565      elif t.value
-00011100: 5b31 5d20 3d3d 2022 2822 3a0a 2020 2020  [1] == "(":.    
-00011110: 2020 2020 2020 2020 742e 7479 7065 203d          t.type =
-00011120: 2022 455f 4f50 454e 220a 2020 2020 2020   "E_OPEN".      
-00011130: 2020 656c 6966 2074 2e76 616c 7565 5b31    elif t.value[1
-00011140: 5d20 3d3d 2022 2922 3a0a 2020 2020 2020  ] == ")":.      
-00011150: 2020 2020 2020 742e 7479 7065 203d 2022        t.type = "
-00011160: 455f 434c 4f53 4522 0a20 2020 2020 2020  E_CLOSE".       
-00011170: 2065 6c69 6620 742e 7661 6c75 655b 315d   elif t.value[1]
-00011180: 203d 3d20 225b 223a 0a20 2020 2020 2020   == "[":.       
-00011190: 2020 2020 2074 2e74 7970 6520 3d20 2245       t.type = "E
-000111a0: 5f42 5241 434b 4554 5f4f 5045 4e22 0a20  _BRACKET_OPEN". 
-000111b0: 2020 2020 2020 2065 6c69 6620 742e 7661         elif t.va
-000111c0: 6c75 655b 315d 203d 3d20 222b 223a 0a20  lue[1] == "+":. 
-000111d0: 2020 2020 2020 2020 2020 2074 2e74 7970             t.typ
-000111e0: 6520 3d20 2245 5f50 4c55 5322 0a20 2020  e = "E_PLUS".   
-000111f0: 2020 2020 2065 6c69 6620 742e 7661 6c75       elif t.valu
-00011200: 655b 315d 203d 3d20 225d 223a 0a20 2020  e[1] == "]":.   
-00011210: 2020 2020 2020 2020 2074 2e74 7970 6520           t.type 
-00011220: 3d20 2245 5f42 5241 434b 4554 5f43 4c4f  = "E_BRACKET_CLO
-00011230: 5345 220a 2020 2020 2020 2020 656c 6966  SE".        elif
-00011240: 2074 2e76 616c 7565 5b31 5d20 3d3d 2022   t.value[1] == "
-00011250: 7e22 3a0a 2020 2020 2020 2020 2020 2020  ~":.            
-00011260: 742e 7479 7065 203d 2022 455f 5449 4c44  t.type = "E_TILD
-00011270: 4522 0a20 2020 2020 2020 2065 6c69 6620  E".        elif 
-00011280: 742e 7661 6c75 655b 315d 203d 3d20 225c  t.value[1] == "\
-00011290: 5c22 3a0a 2020 2020 2020 2020 2020 2020  \":.            
-000112a0: 742e 7479 7065 203d 2022 455f 4241 434b  t.type = "E_BACK
-000112b0: 534c 4153 4822 0a20 2020 2020 2020 2065  SLASH".        e
-000112c0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000112d0: 2074 2e74 7970 6520 3d20 2245 5f43 4841   t.type = "E_CHA
-000112e0: 5222 0a20 2020 2020 2020 2072 6574 7572  R".        retur
-000112f0: 6e20 740a 0a20 2020 2023 206c 6578 6572  n t..    # lexer
-00011300: 2e6c 6c3a 0a20 2020 2023 203c 2a3e 2e37  .ll:.    # <*>.7
-00011310: 3136 0a20 2020 2023 2020 2020 6465 6620  16.    #    def 
-00011320: 745f 414e 595f 3731 3628 7365 6c66 2c20  t_ANY_716(self, 
-00011330: 7429 3a0a 2020 2020 2320 2020 2020 2020  t):.    #       
-00011340: 2072 272e 270a 2020 2020 2320 2020 2020   r'.'.    #     
-00011350: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
-00011360: 6f6e 0a0a 2020 2020 2323 2320 4445 4641  on..    ### DEFA
-00011370: 554c 5420 5255 4c45 5320 2323 230a 0a20  ULT RULES ###.. 
-00011380: 2020 2074 5f69 676e 6f72 6520 3d20 2222     t_ignore = ""
-00011390: 2020 2320 6c65 7420 7468 6520 6772 616d    # let the gram
-000113a0: 6d61 7220 6861 6e64 6c65 2069 676e 6f72  mar handle ignor
-000113b0: 696e 6720 7468 696e 6773 0a0a 2020 2020  ing things..    
-000113c0: 2320 2020 2074 5f65 7874 7261 746f 6b65  #    t_extratoke
-000113d0: 6e5f 6967 6e6f 7265 203d 2074 5f69 676e  n_ignore = t_ign
-000113e0: 6f72 650a 2020 2020 2320 2020 2074 5f63  ore.    #    t_c
-000113f0: 686f 7264 735f 6967 6e6f 7265 203d 2074  hords_ignore = t
-00011400: 5f69 676e 6f72 650a 2020 2020 2320 2020  _ignore.    #   
-00011410: 2074 5f66 6967 7572 6573 5f69 676e 6f72   t_figures_ignor
-00011420: 6520 3d20 745f 6967 6e6f 7265 0a20 2020  e = t_ignore.   
-00011430: 2023 2020 2020 745f 696e 636c 5f69 676e   #    t_incl_ign
-00011440: 6f72 6520 3d20 745f 6967 6e6f 7265 0a20  ore = t_ignore. 
-00011450: 2020 2023 2020 2020 745f 6c79 7269 6373     #    t_lyrics
-00011460: 5f69 676e 6f72 6520 3d20 745f 6967 6e6f  _ignore = t_igno
-00011470: 7265 0a20 2020 2023 2020 2020 745f 6c79  re.    #    t_ly
-00011480: 7269 635f 7175 6f74 655f 6967 6e6f 7265  ric_quote_ignore
-00011490: 203d 2074 5f69 676e 6f72 650a 2020 2020   = t_ignore.    
-000114a0: 745f 6c6f 6e67 636f 6d6d 656e 745f 6967  t_longcomment_ig
-000114b0: 6e6f 7265 203d 2074 5f69 676e 6f72 650a  nore = t_ignore.
-000114c0: 2020 2020 745f 6d61 726b 7570 5f69 676e      t_markup_ign
-000114d0: 6f72 6520 3d20 745f 6967 6e6f 7265 0a20  ore = t_ignore. 
-000114e0: 2020 2074 5f6e 6f74 6573 5f69 676e 6f72     t_notes_ignor
-000114f0: 6520 3d20 745f 6967 6e6f 7265 0a20 2020  e = t_ignore.   
-00011500: 2074 5f71 756f 7465 5f69 676e 6f72 6520   t_quote_ignore 
-00011510: 3d20 745f 6967 6e6f 7265 0a20 2020 2023  = t_ignore.    #
-00011520: 2020 2020 745f 736f 7572 6365 6669 6c65      t_sourcefile
-00011530: 6c69 6e65 5f69 676e 6f72 6520 3d20 745f  line_ignore = t_
-00011540: 6967 6e6f 7265 0a20 2020 2023 2020 2020  ignore.    #    
-00011550: 745f 736f 7572 6365 6669 6c65 6e61 6d65  t_sourcefilename
-00011560: 5f69 676e 6f72 6520 3d20 745f 6967 6e6f  _ignore = t_igno
-00011570: 7265 0a20 2020 2074 5f76 6572 7369 6f6e  re.    t_version
-00011580: 5f69 676e 6f72 6520 3d20 745f 6967 6e6f  _ignore = t_igno
-00011590: 7265 0a0a 2020 2020 745f 7363 6865 6d65  re..    t_scheme
-000115a0: 5f69 676e 6f72 6520 3d20 745f 6967 6e6f  _ignore = t_igno
-000115b0: 7265 0a0a 2020 2020 6465 6620 745f 6e65  re..    def t_ne
-000115c0: 776c 696e 6528 7365 6c66 2c20 7429 3a0a  wline(self, t):.
-000115d0: 2020 2020 2020 2020 7222 5c6e 2b22 0a20          r"\n+". 
-000115e0: 2020 2020 2020 2074 2e6c 6578 6572 2e6c         t.lexer.l
-000115f0: 696e 656e 6f20 2b3d 2074 2e76 616c 7565  ineno += t.value
-00011600: 2e63 6f75 6e74 2822 5c6e 2229 0a0a 2020  .count("\n")..  
-00011610: 2020 6465 6620 745f 6572 726f 7228 7365    def t_error(se
-00011620: 6c66 2c20 7429 3a0a 2020 2020 2020 2020  lf, t):.        
-00011630: 7072 696e 7428 2822 4c69 6c79 506f 6e64  print(("LilyPond
-00011640: 5061 7273 6572 3a20 496c 6c65 6761 6c20  Parser: Illegal 
-00011650: 6368 6172 6163 7465 7220 2725 7327 2220  character '%s'" 
-00011660: 2520 742e 7661 6c75 655b 305d 2929 0a20  % t.value[0])). 
-00011670: 2020 2020 2020 2074 2e6c 6578 6572 2e73         t.lexer.s
-00011680: 6b69 7028 3129 0a0a 2020 2020 2320 2020  kip(1)..    #   
-00011690: 2074 5f65 7874 7261 746f 6b65 6e5f 6572   t_extratoken_er
-000116a0: 726f 7220 3d20 745f 6572 726f 720a 2020  ror = t_error.  
-000116b0: 2020 2320 2020 2074 5f63 686f 7264 735f    #    t_chords_
-000116c0: 6572 726f 7220 3d20 745f 6572 726f 720a  error = t_error.
-000116d0: 2020 2020 2320 2020 2074 5f66 6967 7572      #    t_figur
-000116e0: 6573 5f65 7272 6f72 203d 2074 5f65 7272  es_error = t_err
-000116f0: 6f72 0a20 2020 2023 2020 2020 745f 696e  or.    #    t_in
-00011700: 636c 5f65 7272 6f72 203d 2074 5f65 7272  cl_error = t_err
-00011710: 6f72 0a20 2020 2023 2020 2020 745f 6c79  or.    #    t_ly
-00011720: 7269 6373 5f65 7272 6f72 203d 2074 5f65  rics_error = t_e
-00011730: 7272 6f72 0a20 2020 2023 2020 2020 745f  rror.    #    t_
-00011740: 6c79 7269 635f 7175 6f74 655f 6572 726f  lyric_quote_erro
-00011750: 7220 3d20 745f 6572 726f 720a 2020 2020  r = t_error.    
-00011760: 745f 6c6f 6e67 636f 6d6d 656e 745f 6572  t_longcomment_er
-00011770: 726f 7220 3d20 745f 6572 726f 720a 2020  ror = t_error.  
-00011780: 2020 745f 6d61 726b 7570 5f65 7272 6f72    t_markup_error
-00011790: 203d 2074 5f65 7272 6f72 0a20 2020 2074   = t_error.    t
-000117a0: 5f6e 6f74 6573 5f65 7272 6f72 203d 2074  _notes_error = t
-000117b0: 5f65 7272 6f72 0a20 2020 2074 5f71 756f  _error.    t_quo
-000117c0: 7465 5f65 7272 6f72 203d 2074 5f65 7272  te_error = t_err
-000117d0: 6f72 0a20 2020 2023 2020 2020 745f 736f  or.    #    t_so
-000117e0: 7572 6365 6669 6c65 6c69 6e65 5f65 7272  urcefileline_err
-000117f0: 6f72 203d 2074 5f65 7272 6f72 0a20 2020  or = t_error.   
-00011800: 2023 2020 2020 745f 736f 7572 6365 6669   #    t_sourcefi
-00011810: 6c65 6e61 6d65 5f65 7272 6f72 203d 2074  lename_error = t
-00011820: 5f65 7272 6f72 0a20 2020 2074 5f76 6572  _error.    t_ver
-00011830: 7369 6f6e 5f65 7272 6f72 203d 2074 5f65  sion_error = t_e
-00011840: 7272 6f72 0a20 2020 2074 5f73 6368 656d  rror.    t_schem
-00011850: 655f 6572 726f 7220 3d20 745f 6572 726f  e_error = t_erro
-00011860: 720a 0a20 2020 2064 6566 2073 6361 6e5f  r..    def scan_
-00011870: 6261 7265 5f77 6f72 6428 7365 6c66 2c20  bare_word(self, 
-00011880: 7429 3a0a 2020 2020 2020 2020 6966 2074  t):.        if t
-00011890: 2e6c 6578 6572 2e63 7572 7265 6e74 5f73  .lexer.current_s
-000118a0: 7461 7465 2829 2069 6e20 2822 6e6f 7465  tate() in ("note
-000118b0: 7322 2c29 3a0a 2020 2020 2020 2020 2020  s",):.          
-000118c0: 2020 7069 7463 685f 6e61 6d65 7320 3d20    pitch_names = 
-000118d0: 7365 6c66 2e63 6c69 656e 742e 5f70 6974  self.client._pit
-000118e0: 6368 5f6e 616d 6573 0a20 2020 2020 2020  ch_names.       
-000118f0: 2020 2020 2069 6620 742e 7661 6c75 6520       if t.value 
-00011900: 696e 2070 6974 6368 5f6e 616d 6573 3a0a  in pitch_names:.
-00011910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011920: 742e 7479 7065 203d 2022 4e4f 5445 4e41  t.type = "NOTENA
-00011930: 4d45 5f50 4954 4348 220a 2020 2020 2020  ME_PITCH".      
-00011940: 2020 2020 2020 656c 6966 2074 2e76 616c        elif t.val
-00011950: 7565 203d 3d20 2271 2220 616e 6420 7365  ue == "q" and se
-00011960: 6c66 2e63 6c69 656e 742e 5f6c 6173 745f  lf.client._last_
-00011970: 6368 6f72 643a 0a20 2020 2020 2020 2020  chord:.         
-00011980: 2020 2020 2020 2074 2e74 7970 6520 3d20         t.type = 
-00011990: 2243 484f 5244 5f52 4550 4554 4954 494f  "CHORD_REPETITIO
-000119a0: 4e22 0a20 2020 2020 2020 2072 6574 7572  N".        retur
-000119b0: 6e20 2253 5452 494e 4722 0a0a 2020 2020  n "STRING"..    
-000119c0: 6465 6620 7363 616e 5f65 7363 6170 6564  def scan_escaped
-000119d0: 5f77 6f72 6428 7365 6c66 2c20 7429 3a0a  _word(self, t):.
-000119e0: 2020 2020 2020 2020 2320 6669 7273 742c          # first,
-000119f0: 2063 6865 636b 2066 6f72 2069 7420 696e   check for it in
-00011a00: 2074 6865 206b 6579 776f 7264 206c 6973   the keyword lis
-00011a10: 740a 2020 2020 2020 2020 6966 2074 2e76  t.        if t.v
-00011a20: 616c 7565 2069 6e20 7365 6c66 2e6b 6579  alue in self.key
-00011a30: 776f 7264 733a 0a20 2020 2020 2020 2020  words:.         
-00011a40: 2020 2076 616c 7565 203d 2073 656c 662e     value = self.
-00011a50: 6b65 7977 6f72 6473 5b74 2e76 616c 7565  keywords[t.value
-00011a60: 5d0a 2020 2020 2020 2020 2020 2020 6966  ].            if
-00011a70: 2076 616c 7565 203d 3d20 224d 4152 4b55   value == "MARKU
-00011a80: 5022 3a0a 2020 2020 2020 2020 2020 2020  P":.            
-00011a90: 2020 2020 742e 6c65 7865 722e 7075 7368      t.lexer.push
-00011aa0: 5f73 7461 7465 2822 6d61 726b 7570 2229  _state("markup")
-00011ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011ac0: 2069 6620 742e 6c65 7865 722e 6375 7272   if t.lexer.curr
-00011ad0: 656e 745f 7374 6174 6528 2920 3d3d 2022  ent_state() == "
-00011ae0: 6c79 7269 6373 223a 0a20 2020 2020 2020  lyrics":.       
-00011af0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00011b00: 7572 6e20 224c 5952 4943 5f4d 4152 4b55  urn "LYRIC_MARKU
-00011b10: 5022 0a20 2020 2020 2020 2020 2020 2065  P".            e
-00011b20: 6c69 6620 7661 6c75 6520 3d3d 2022 5749  lif value == "WI
-00011b30: 5448 223a 0a20 2020 2020 2020 2020 2020  TH":.           
-00011b40: 2020 2020 2074 2e6c 6578 6572 2e70 7573       t.lexer.pus
-00011b50: 685f 7374 6174 6528 2249 4e49 5449 414c  h_state("INITIAL
-00011b60: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
-00011b70: 6574 7572 6e20 7661 6c75 650a 2020 2020  eturn value.    
-00011b80: 2020 2020 6964 656e 7469 6669 6572 203d      identifier =
-00011b90: 2074 2e76 616c 7565 5b31 3a5d 0a20 2020   t.value[1:].   
-00011ba0: 2020 2020 2023 2063 6865 636b 2066 6f72       # check for
-00011bb0: 2074 6865 2069 6465 6e74 6966 6965 7220   the identifier 
-00011bc0: 696e 2074 6865 2073 636f 7065 2073 7461  in the scope sta
-00011bd0: 636b 0a20 2020 2020 2020 206c 6f6f 6b75  ck.        looku
-00011be0: 7020 3d20 7365 6c66 2e63 6c69 656e 742e  p = self.client.
-00011bf0: 5f72 6573 6f6c 7665 5f69 6465 6e74 6966  _resolve_identif
-00011c00: 6965 7228 6964 656e 7469 6669 6572 290a  ier(identifier).
-00011c10: 2020 2020 2020 2020 6966 206c 6f6f 6b75          if looku
-00011c20: 7020 6973 206e 6f74 204e 6f6e 653a 0a20  p is not None:. 
-00011c30: 2020 2020 2020 2020 2020 2069 6465 6e74             ident
-00011c40: 6966 6965 725f 6c6f 6f6b 7570 203d 207b  ifier_lookup = {
-00011c50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011c60: 2022 626f 6f6b 5f62 6c6f 636b 223a 2022   "book_block": "
-00011c70: 424f 4f4b 5f49 4445 4e54 4946 4945 5222  BOOK_IDENTIFIER"
-00011c80: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00011c90: 2020 2262 6f6f 6b70 6172 745f 626c 6f63    "bookpart_bloc
-00011ca0: 6b22 3a20 2242 4f4f 4b5f 4944 454e 5449  k": "BOOK_IDENTI
-00011cb0: 4649 4552 222c 0a20 2020 2020 2020 2020  FIER",.         
-00011cc0: 2020 2020 2020 2022 636f 6e74 6578 745f         "context_
-00011cd0: 6465 665f 7370 6563 5f62 6c6f 636b 223a  def_spec_block":
-00011ce0: 2022 434f 4e54 4558 545f 4445 465f 4944   "CONTEXT_DEF_ID
-00011cf0: 454e 5449 4649 4552 222c 0a20 2020 2020  ENTIFIER",.     
-00011d00: 2020 2020 2020 2020 2020 2022 636f 6e74             "cont
-00011d10: 6578 745f 6d6f 6469 6669 6361 7469 6f6e  ext_modification
-00011d20: 223a 2022 434f 4e54 4558 545f 4d4f 445f  ": "CONTEXT_MOD_
-00011d30: 4944 454e 5449 4649 4552 222c 0a20 2020  IDENTIFIER",.   
-00011d40: 2020 2020 2020 2020 2020 2020 2022 706f               "po
-00011d50: 7374 5f65 7665 6e74 5f6e 6f66 696e 6765  st_event_nofinge
-00011d60: 7222 3a20 2245 5645 4e54 5f49 4445 4e54  r": "EVENT_IDENT
-00011d70: 4946 4945 5222 2c0a 2020 2020 2020 2020  IFIER",.        
-00011d80: 2020 2020 2020 2020 2266 756c 6c5f 6d61          "full_ma
-00011d90: 726b 7570 223a 2022 4d41 524b 5550 5f49  rkup": "MARKUP_I
-00011da0: 4445 4e54 4946 4945 5222 2c0a 2020 2020  DENTIFIER",.    
-00011db0: 2020 2020 2020 2020 2020 2020 2266 756c              "ful
-00011dc0: 6c5f 6d61 726b 7570 5f6c 6973 7422 3a20  l_markup_list": 
-00011dd0: 224d 4152 4b55 504c 494e 4553 5f49 4445  "MARKUPLINES_IDE
-00011de0: 4e54 4946 4945 5222 2c0a 2020 2020 2020  NTIFIER",.      
-00011df0: 2020 2020 2020 2020 2020 226d 7573 6963            "music
-00011e00: 223a 2022 4d55 5349 435f 4944 454e 5449  ": "MUSIC_IDENTI
-00011e10: 4649 4552 222c 0a20 2020 2020 2020 2020  FIER",.         
-00011e20: 2020 2020 2020 2022 6e75 6d62 6572 5f65         "number_e
-00011e30: 7870 7265 7373 696f 6e22 3a20 224e 554d  xpression": "NUM
-00011e40: 4245 525f 4944 454e 5449 4649 4552 222c  BER_IDENTIFIER",
-00011e50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011e60: 2022 6f75 7470 7574 5f64 6566 223a 2022   "output_def": "
-00011e70: 6f75 7470 7574 5f44 4546 5f49 4445 4e54  output_DEF_IDENT
-00011e80: 4946 4945 5222 2c0a 2020 2020 2020 2020  IFIER",.        
-00011e90: 2020 2020 2020 2020 2265 6d62 6564 6465          "embedde
-00011ea0: 645f 7363 6d22 3a20 2253 434d 5f49 4445  d_scm": "SCM_IDE
-00011eb0: 4e54 4946 4945 5222 2c0a 2020 2020 2020  NTIFIER",.      
-00011ec0: 2020 2020 2020 2020 2020 2273 636f 7265            "score
-00011ed0: 5f62 6c6f 636b 223a 2022 5343 4f52 455f  _block": "SCORE_
-00011ee0: 4944 454e 5449 4649 4552 222c 0a20 2020  IDENTIFIER",.   
-00011ef0: 2020 2020 2020 2020 2020 2020 2022 7374               "st
-00011f00: 7269 6e67 223a 2022 5354 5249 4e47 5f49  ring": "STRING_I
-00011f10: 4445 4e54 4946 4945 5222 2c0a 2020 2020  DENTIFIER",.    
-00011f20: 2020 2020 2020 2020 2020 2020 2320 2750              # 'P
-00011f30: 4954 4348 5f49 4445 4e54 4946 4945 5227  ITCH_IDENTIFIER'
-00011f40: 203f 0a20 2020 2020 2020 2020 2020 2020   ?.             
-00011f50: 2020 2023 2027 4455 5241 5449 4f4e 5f49     # 'DURATION_I
-00011f60: 4445 4e54 4946 4945 5227 203f 0a20 2020  DENTIFIER' ?.   
-00011f70: 2020 2020 2020 2020 2020 2020 2023 2027               # '
-00011f80: 4c59 5249 435f 4d41 524b 5550 5f49 4445  LYRIC_MARKUP_IDE
-00011f90: 4e54 4946 4945 5227 203f 0a20 2020 2020  NTIFIER' ?.     
-00011fa0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00011fb0: 2020 2020 2074 2e76 616c 7565 203d 2063       t.value = c
-00011fc0: 6f70 792e 6465 6570 636f 7079 286c 6f6f  opy.deepcopy(loo
-00011fd0: 6b75 702e 7661 6c75 6529 0a20 2020 2020  kup.value).     
-00011fe0: 2020 2020 2020 2072 6574 7572 6e20 6964         return id
-00011ff0: 656e 7469 6669 6572 5f6c 6f6f 6b75 705b  entifier_lookup[
-00012000: 6c6f 6f6b 7570 2e74 7970 655d 0a20 2020  lookup.type].   
-00012010: 2020 2020 2023 2074 6865 6e2c 2063 6865       # then, che
-00012020: 636b 2066 6f72 2069 7420 696e 2074 6865  ck for it in the
-00012030: 2063 7572 7265 6e74 5f6d 6f64 756c 6520   current_module 
-00012040: 6469 6374 696f 6e61 7279 0a20 2020 2020  dictionary.     
-00012050: 2020 2023 2077 6869 6368 2077 6527 7665     # which we've
-00012060: 2064 756d 7065 6420 6f75 7420 6f66 204c   dumped out of L
-00012070: 696c 7950 6f6e 640a 2020 2020 2020 2020  ilyPond.        
-00012080: 6966 2069 6465 6e74 6966 6965 7220 6e6f  if identifier no
-00012090: 7420 696e 2073 656c 662e 636c 6965 6e74  t in self.client
-000120a0: 2e5f 6375 7272 656e 745f 6d6f 6475 6c65  ._current_module
-000120b0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-000120c0: 6973 6520 4578 6365 7074 696f 6e28 6622  ise Exception(f"
-000120d0: 756e 6b6e 6f77 6e20 6573 6361 7065 6420  unknown escaped 
-000120e0: 776f 7264 3a20 7b74 2e76 616c 7565 2172  word: {t.value!r
-000120f0: 7d2e 2229 0a20 2020 2020 2020 206c 6f6f  }.").        loo
-00012100: 6b75 7020 3d20 7365 6c66 2e63 6c69 656e  kup = self.clien
-00012110: 742e 5f63 7572 7265 6e74 5f6d 6f64 756c  t._current_modul
-00012120: 655b 6964 656e 7469 6669 6572 5d0a 2020  e[identifier].  
-00012130: 2020 2020 2020 2320 6966 2074 6865 206c        # if the l
-00012140: 6f6f 6b75 7020 7265 736f 6c76 6573 2074  ookup resolves t
-00012150: 6f20 6120 6675 6e63 7469 6f6e 2064 6566  o a function def
-00012160: 696e 6974 696f 6e2c 0a20 2020 2020 2020  inition,.       
-00012170: 2023 2077 6520 6861 7665 2074 6f20 7075   # we have to pu
-00012180: 7368 2061 7274 6966 6963 6961 6c20 746f  sh artificial to
-00012190: 6b65 6e73 206f 6e74 6f20 7468 6520 746f  kens onto the to
-000121a0: 6b65 6e20 7374 6163 6b2e 0a20 2020 2020  ken stack..     
-000121b0: 2020 2023 2074 6865 2074 6f6b 656e 7320     # the tokens 
-000121c0: 6172 6520 7075 7368 6564 2069 6e20 7265  are pushed in re
-000121d0: 7665 7273 6520 6f72 6465 7220 284c 4946  verse order (LIF
-000121e0: 4f29 2e0a 2020 2020 2020 2020 6966 2069  O)..        if i
-000121f0: 7369 6e73 7461 6e63 6528 6c6f 6f6b 7570  sinstance(lookup
-00012200: 2c20 6469 6374 2920 616e 6420 2274 7970  , dict) and "typ
-00012210: 6522 2069 6e20 6c6f 6f6b 7570 3a0a 2020  e" in lookup:.  
-00012220: 2020 2020 2020 2020 2020 6966 206c 6f6f            if loo
-00012230: 6b75 705b 2274 7970 6522 5d20 3d3d 2022  kup["type"] == "
-00012240: 6c79 3a6d 7573 6963 2d66 756e 6374 696f  ly:music-functio
-00012250: 6e3f 223a 0a20 2020 2020 2020 2020 2020  n?":.           
-00012260: 2020 2020 2073 6967 6e61 7475 7265 203d       signature =
-00012270: 206c 6f6f 6b75 705b 2273 6967 6e61 7475   lookup["signatu
-00012280: 7265 225d 0a20 2020 2020 2020 2020 2020  re"].           
-00012290: 2020 2020 2066 756e 7479 7065 203d 2022       funtype = "
-000122a0: 5343 4d5f 4655 4e43 5449 4f4e 220a 2020  SCM_FUNCTION".  
-000122b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000122c0: 2073 6967 6e61 7475 7265 5b30 5d20 3d3d   signature[0] ==
-000122d0: 2022 6c79 3a6d 7573 6963 3f22 3a0a 2020   "ly:music?":.  
-000122e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000122f0: 2020 6675 6e74 7970 6520 3d20 224d 5553    funtype = "MUS
-00012300: 4943 5f46 554e 4354 494f 4e22 0a20 2020  IC_FUNCTION".   
-00012310: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00012320: 6620 7369 676e 6174 7572 655b 305d 203d  f signature[0] =
-00012330: 3d20 226c 793a 6576 656e 743f 223a 0a20  = "ly:event?":. 
-00012340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012350: 2020 2066 756e 7479 7065 203d 2022 4556     funtype = "EV
-00012360: 454e 545f 4655 4e43 5449 4f4e 220a 2020  ENT_FUNCTION".  
-00012370: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00012380: 6c66 2e70 7573 685f 7369 676e 6174 7572  lf.push_signatur
-00012390: 6528 7369 676e 6174 7572 655b 313a 5d2c  e(signature[1:],
-000123a0: 2074 290a 2020 2020 2020 2020 2020 2020   t).            
-000123b0: 2020 2020 7265 7475 726e 2066 756e 7479      return funty
-000123c0: 7065 0a20 2020 2020 2020 2020 2020 2065  pe.            e
-000123d0: 6c69 6620 6c6f 6f6b 7570 5b22 7479 7065  lif lookup["type
-000123e0: 225d 203d 3d20 226c 793a 7072 6f62 3f22  "] == "ly:prob?"
-000123f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00012400: 2020 6966 2022 6576 656e 7422 2069 6e20    if "event" in 
-00012410: 6c6f 6f6b 7570 5b22 7479 7065 7322 5d3a  lookup["types"]:
-00012420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012430: 2020 2020 2072 6574 7572 6e20 2245 5645       return "EVE
-00012440: 4e54 5f49 4445 4e54 4946 4945 5222 0a20  NT_IDENTIFIER". 
-00012450: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00012460: 6c69 6620 2263 6f6e 7465 7874 2d73 7065  lif "context-spe
-00012470: 6369 6669 6361 7469 6f6e 2220 696e 206c  cification" in l
-00012480: 6f6f 6b75 705b 2274 7970 6573 225d 2061  ookup["types"] a
-00012490: 6e64 2068 6173 6174 7472 280a 2020 2020  nd hasattr(.    
-000124a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000124b0: 7365 6c66 2e63 6c69 656e 742e 5f67 7569  self.client._gui
-000124c0: 6c65 2c20 6964 656e 7469 6669 6572 0a20  le, identifier. 
-000124d0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-000124e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000124f0: 2020 2020 2020 742e 7661 6c75 6520 3d20        t.value = 
-00012500: 6765 7461 7474 7228 7365 6c66 2e63 6c69  getattr(self.cli
-00012510: 656e 742e 5f67 7569 6c65 2c20 6964 656e  ent._guile, iden
-00012520: 7469 6669 6572 2928 290a 2020 2020 2020  tifier)().      
-00012530: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00012540: 7475 726e 2022 4d55 5349 435f 4944 454e  turn "MUSIC_IDEN
-00012550: 5449 4649 4552 220a 2020 2020 2020 2020  TIFIER".        
-00012560: 2320 7765 2061 6c73 6f20 6368 6563 6b20  # we also check 
-00012570: 666f 7220 6f74 6865 7220 7479 7065 732c  for other types,
-00012580: 2074 6f20 6861 6e64 6c65 205c 6c6f 6e67   to handle \long
-00012590: 612c 205c 6272 6576 6520 6574 632e 0a20  a, \breve etc.. 
-000125a0: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-000125b0: 7374 616e 6365 286c 6f6f 6b75 702c 204c  stance(lookup, L
-000125c0: 696c 7950 6f6e 6444 7572 6174 696f 6e29  ilyPondDuration)
-000125d0: 3a0a 2020 2020 2020 2020 2020 2020 742e  :.            t.
-000125e0: 7661 6c75 6520 3d20 636f 7079 2e63 6f70  value = copy.cop
-000125f0: 7928 6c6f 6f6b 7570 290a 2020 2020 2020  y(lookup).      
-00012600: 2020 2020 2020 7265 7475 726e 2022 4455        return "DU
-00012610: 5241 5449 4f4e 5f49 4445 4e54 4946 4945  RATION_IDENTIFIE
-00012620: 5222 0a20 2020 2020 2020 2023 2065 6c73  R".        # els
-00012630: 652e 2e2e 0a20 2020 2020 2020 2074 2e76  e....        t.v
-00012640: 616c 7565 203d 2063 6f70 792e 636f 7079  alue = copy.copy
-00012650: 286c 6f6f 6b75 7029 0a20 2020 2020 2020  (lookup).       
-00012660: 2072 6574 7572 6e20 2253 434d 5f49 4445   return "SCM_IDE
-00012670: 4e54 4946 4945 5222 0a0a 2020 2020 6465  NTIFIER"..    de
-00012680: 6620 7075 7368 5f73 6967 6e61 7475 7265  f push_signature
-00012690: 2873 656c 662c 2073 6967 6e61 7475 7265  (self, signature
-000126a0: 2c20 7429 3a0a 0a20 2020 2020 2020 2074  , t):..        t
-000126b0: 6f6b 656e 203d 206c 6578 2e4c 6578 546f  oken = lex.LexTo
-000126c0: 6b65 6e28 290a 2020 2020 2020 2020 746f  ken().        to
-000126d0: 6b65 6e2e 7479 7065 203d 2022 4558 5045  ken.type = "EXPE
-000126e0: 4354 5f4e 4f5f 4d4f 5245 5f41 5247 5322  CT_NO_MORE_ARGS"
-000126f0: 0a20 2020 2020 2020 2074 6f6b 656e 2e76  .        token.v
-00012700: 616c 7565 203d 204e 6f6e 650a 2020 2020  alue = None.    
-00012710: 2020 2020 746f 6b65 6e2e 6c69 6e65 6e6f      token.lineno
-00012720: 203d 2074 2e6c 696e 656e 6f0a 2020 2020   = t.lineno.    
-00012730: 2020 2020 746f 6b65 6e2e 6c65 7870 6f73      token.lexpos
-00012740: 203d 2074 2e6c 6578 706f 730a 2020 2020   = t.lexpos.    
-00012750: 2020 2020 7365 6c66 2e63 6c69 656e 742e      self.client.
-00012760: 5f70 7573 685f 6578 7472 615f 746f 6b65  _push_extra_toke
-00012770: 6e28 746f 6b65 6e29 0a0a 2020 2020 2020  n(token)..      
-00012780: 2020 6f70 7469 6f6e 616c 203d 2046 616c    optional = Fal
-00012790: 7365 0a20 2020 2020 2020 2066 6f72 2070  se.        for p
-000127a0: 7265 6469 6361 7465 2069 6e20 7369 676e  redicate in sign
-000127b0: 6174 7572 653a 0a0a 2020 2020 2020 2020  ature:..        
-000127c0: 2020 2020 6966 2070 7265 6469 6361 7465      if predicate
-000127d0: 203d 3d20 226f 7074 696f 6e61 6c3f 223a   == "optional?":
-000127e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000127f0: 206f 7074 696f 6e61 6c20 3d20 5472 7565   optional = True
-00012800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012810: 2063 6f6e 7469 6e75 650a 0a20 2020 2020   continue..     
-00012820: 2020 2020 2020 2074 6f6b 656e 203d 206c         token = l
-00012830: 6578 2e4c 6578 546f 6b65 6e28 290a 2020  ex.LexToken().  
-00012840: 2020 2020 2020 2020 2020 746f 6b65 6e2e            token.
-00012850: 7661 6c75 6520 3d20 7072 6564 6963 6174  value = predicat
-00012860: 650a 2020 2020 2020 2020 2020 2020 746f  e.            to
-00012870: 6b65 6e2e 6c69 6e65 6e6f 203d 2074 2e6c  ken.lineno = t.l
-00012880: 696e 656e 6f0a 2020 2020 2020 2020 2020  ineno.          
-00012890: 2020 746f 6b65 6e2e 6c65 7870 6f73 203d    token.lexpos =
-000128a0: 2074 2e6c 6578 706f 730a 0a20 2020 2020   t.lexpos..     
-000128b0: 2020 2020 2020 2069 6620 7072 6564 6963         if predic
-000128c0: 6174 6520 3d3d 2022 6c79 3a6d 7573 6963  ate == "ly:music
-000128d0: 3f22 3a0a 2020 2020 2020 2020 2020 2020  ?":.            
-000128e0: 2020 2020 746f 6b65 6e2e 7479 7065 203d      token.type =
-000128f0: 2022 4558 5045 4354 5f53 434d 2220 2023   "EXPECT_SCM"  #
-00012900: 203f 213f 210a 2020 2020 2020 2020 2020   ?!?!.          
-00012910: 2020 656c 6966 2070 7265 6469 6361 7465    elif predicate
-00012920: 203d 3d20 226c 793a 7069 7463 683f 223a   == "ly:pitch?":
-00012930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012940: 2074 6f6b 656e 2e74 7970 6520 3d20 2245   token.type = "E
-00012950: 5850 4543 545f 5049 5443 4822 0a20 2020  XPECT_PITCH".   
-00012960: 2020 2020 2020 2020 2065 6c69 6620 7072           elif pr
-00012970: 6564 6963 6174 6520 3d3d 2022 6c79 3a64  edicate == "ly:d
-00012980: 7572 6174 696f 6e3f 223a 0a20 2020 2020  uration?":.     
-00012990: 2020 2020 2020 2020 2020 2074 6f6b 656e             token
-000129a0: 2e74 7970 6520 3d20 2245 5850 4543 545f  .type = "EXPECT_
-000129b0: 4455 5241 5449 4f4e 220a 2020 2020 2020  DURATION".      
-000129c0: 2020 2020 2020 656c 6966 2070 7265 6469        elif predi
-000129d0: 6361 7465 2069 6e20 5b22 6d61 726b 7570  cate in ["markup
-000129e0: 3f22 2c20 2263 6865 6170 2d6d 6172 6b75  ?", "cheap-marku
-000129f0: 703f 225d 3a0a 2020 2020 2020 2020 2020  p?"]:.          
-00012a00: 2020 2020 2020 746f 6b65 6e2e 7479 7065        token.type
-00012a10: 203d 2022 4558 5045 4354 5f4d 4152 4b55   = "EXPECT_MARKU
-00012a20: 5022 0a20 2020 2020 2020 2020 2020 2065  P".            e
-00012a30: 6c69 6620 7072 6564 6963 6174 6520 3d3d  lif predicate ==
-00012a40: 2022 6d61 726b 7570 2d6c 6973 743f 223a   "markup-list?":
-00012a50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012a60: 2074 6f6b 656e 2e74 7970 6520 3d20 2245   token.type = "E
-00012a70: 5850 4543 545f 4d41 524b 5550 5f4c 4953  XPECT_MARKUP_LIS
-00012a80: 5422 0a20 2020 2020 2020 2020 2020 2065  T".            e
-00012a90: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00012aa0: 2020 2020 2074 6f6b 656e 2e74 7970 6520       token.type 
-00012ab0: 3d20 2245 5850 4543 545f 5343 4d22 0a0a  = "EXPECT_SCM"..
-00012ac0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00012ad0: 2e63 6c69 656e 742e 5f70 7573 685f 6578  .client._push_ex
-00012ae0: 7472 615f 746f 6b65 6e28 746f 6b65 6e29  tra_token(token)
-00012af0: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00012b00: 206f 7074 696f 6e61 6c3a 0a20 2020 2020   optional:.     
-00012b10: 2020 2020 2020 2020 2020 206f 7074 696f             optio
-00012b20: 6e61 6c5f 746f 6b65 6e20 3d20 6c65 782e  nal_token = lex.
-00012b30: 4c65 7854 6f6b 656e 2829 0a20 2020 2020  LexToken().     
-00012b40: 2020 2020 2020 2020 2020 206f 7074 696f             optio
-00012b50: 6e61 6c5f 746f 6b65 6e2e 7661 6c75 6520  nal_token.value 
-00012b60: 3d20 226f 7074 696f 6e61 6c3f 220a 2020  = "optional?".  
-00012b70: 2020 2020 2020 2020 2020 2020 2020 6f70                op
-00012b80: 7469 6f6e 616c 5f74 6f6b 656e 2e6c 696e  tional_token.lin
-00012b90: 656e 6f20 3d20 742e 6c69 6e65 6e6f 0a20  eno = t.lineno. 
-00012ba0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00012bb0: 7074 696f 6e61 6c5f 746f 6b65 6e2e 6c65  ptional_token.le
-00012bc0: 7870 6f73 203d 2074 2e6c 6578 706f 730a  xpos = t.lexpos.
-00012bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012be0: 6f70 7469 6f6e 616c 5f74 6f6b 656e 2e74  optional_token.t
-00012bf0: 7970 6520 3d20 2245 5850 4543 545f 4f50  ype = "EXPECT_OP
-00012c00: 5449 4f4e 414c 220a 2020 2020 2020 2020  TIONAL".        
-00012c10: 2020 2020 2020 2020 7365 6c66 2e63 6c69          self.cli
-00012c20: 656e 742e 5f70 7573 685f 6578 7472 615f  ent._push_extra_
-00012c30: 746f 6b65 6e28 6f70 7469 6f6e 616c 5f74  token(optional_t
-00012c40: 6f6b 656e 290a 2020 2020 2020 2020 2020  oken).          
-00012c50: 2020 2020 2020 6f70 7469 6f6e 616c 203d        optional =
-00012c60: 2046 616c 7365 0a0a 0a23 2061 7070 6c79   False...# apply
-00012c70: 206d 6f6e 6b65 7920 7061 7463 680a 706c   monkey patch.pl
-00012c80: 792e 7961 6363 2e4c 5250 6172 7365 722e  y.yacc.LRParser.
-00012c90: 5f6c 696c 7970 6f6e 645f 7061 7463 685f  _lilypond_patch_
-00012ca0: 7061 7273 6520 3d20 5f70 6172 7365 0a70  parse = _parse.p
-00012cb0: 6c79 2e79 6163 632e 4c52 5061 7273 6572  ly.yacc.LRParser
-00012cc0: 2e5f 6c69 6c79 706f 6e64 5f70 6174 6368  ._lilypond_patch
-00012cd0: 5f70 6172 7365 5f64 6562 7567 203d 205f  _parse_debug = _
-00012ce0: 7061 7273 655f 6465 6275 670a 0a0a 636c  parse_debug...cl
-00012cf0: 6173 7320 4c69 6c79 506f 6e64 5061 7273  ass LilyPondPars
-00012d00: 6572 2850 6172 7365 7229 3a0a 2020 2020  er(Parser):.    
-00012d10: 7222 2222 0a20 2020 2041 204c 696c 7950  r""".    A LilyP
-00012d20: 6f6e 6420 7379 6e74 6178 2070 6172 7365  ond syntax parse
-00012d30: 722e 0a0a 2020 2020 2e2e 2020 636f 6e74  r...    ..  cont
-00012d40: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-00012d50: 0a20 2020 2020 2020 203e 3e3e 2070 6172  .        >>> par
-00012d60: 7365 7220 3d20 6162 6a61 642e 7061 7273  ser = abjad.pars
-00012d70: 6572 2e4c 696c 7950 6f6e 6450 6172 7365  er.LilyPondParse
-00012d80: 7228 290a 2020 2020 2020 2020 3e3e 3e20  r().        >>> 
-00012d90: 7374 7269 6e67 203d 2072 225c 6e65 7720  string = r"\new 
-00012da0: 5374 6166 6620 7b20 6327 3420 2820 6427  Staff { c'4 ( d'
-00012db0: 3820 6527 2066 7327 3229 205c 6665 726d  8 e' fs'2) \ferm
-00012dc0: 6174 6120 7d22 0a20 2020 2020 2020 203e  ata }".        >
-00012dd0: 3e3e 2073 7461 6666 203d 2070 6172 7365  >> staff = parse
-00012de0: 7228 7374 7269 6e67 290a 2020 2020 2020  r(string).      
-00012df0: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
-00012e00: 2873 7461 6666 2920 2320 646f 6374 6573  (staff) # doctes
-00012e10: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-00012e20: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-00012e30: 626a 6164 2e6c 696c 7970 6f6e 6428 7374  bjad.lilypond(st
-00012e40: 6166 6629 0a20 2020 2020 2020 203e 3e3e  aff).        >>>
-00012e50: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
-00012e60: 2020 2020 2020 205c 6e65 7720 5374 6166         \new Staf
-00012e70: 660a 2020 2020 2020 2020 7b0a 2020 2020  f.        {.    
-00012e80: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
-00012e90: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
-00012ea0: 2020 2020 2020 6427 380a 2020 2020 2020        d'8.      
-00012eb0: 2020 2020 2020 6527 380a 2020 2020 2020        e'8.      
-00012ec0: 2020 2020 2020 6673 2732 0a20 2020 2020        fs'2.     
-00012ed0: 2020 2020 2020 202d 205c 6665 726d 6174         - \fermat
-00012ee0: 610a 2020 2020 2020 2020 2020 2020 290a  a.            ).
-00012ef0: 2020 2020 2020 2020 7d0a 0a20 2020 202e          }..    .
-00012f00: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-00012f10: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-00012f20: 5468 6520 4c69 6c79 506f 6e64 2070 6172  The LilyPond par
-00012f30: 7365 7220 756e 6465 7273 7461 6e64 7320  ser understands 
-00012f40: 6d6f 7374 2073 7061 6e6e 6572 732c 2061  most spanners, a
-00012f50: 7274 6963 756c 6174 696f 6e73 2061 6e64  rticulations and
-00012f60: 0a20 2020 2020 2020 2064 796e 616d 6963  .        dynamic
-00012f70: 733a 0a0a 2020 2020 2020 2020 3e3e 3e20  s:..        >>> 
-00012f80: 7374 7269 6e67 203d 2072 2727 270a 2020  string = r'''.  
-00012f90: 2020 2020 2020 2e2e 2e20 5c6e 6577 2053        ... \new S
-00012fa0: 7461 6666 207b 0a20 2020 2020 2020 202e  taff {.        .
-00012fb0: 2e2e 2020 2020 2063 2738 205c 6620 5c3e  ..     c'8 \f \>
-00012fc0: 2028 0a20 2020 2020 2020 202e 2e2e 2020   (.        ...  
-00012fd0: 2020 2064 2720 2d5f 205b 0a20 2020 2020     d' -_ [.     
-00012fe0: 2020 202e 2e2e 2020 2020 2065 2720 5e3e     ...     e' ^>
-00012ff0: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-00013000: 2066 2720 5c70 7070 205c 3c0a 2020 2020   f' \ppp \<.    
-00013010: 2020 2020 2e2e 2e20 2020 2020 6727 205c      ...     g' \
-00013020: 7374 6172 7454 7269 6c6c 5370 616e 205c  startTrillSpan \
-00013030: 280a 2020 2020 2020 2020 2e2e 2e20 2020  (.        ...   
-00013040: 2020 6127 205c 290a 2020 2020 2020 2020    a' \).        
-00013050: 2e2e 2e20 2020 2020 6227 205d 205c 7374  ...     b' ] \st
-00013060: 6f70 5472 696c 6c53 7061 6e0a 2020 2020  opTrillSpan.    
-00013070: 2020 2020 2e2e 2e20 2020 2020 6327 2720      ...     c'' 
-00013080: 2920 5c61 6363 656e 7420 5c73 667a 0a20  ) \accent \sfz. 
-00013090: 2020 2020 2020 202e 2e2e 207d 0a20 2020         ... }.   
-000130a0: 2020 2020 202e 2e2e 2027 2727 0a20 2020       ... '''.   
-000130b0: 2020 2020 203e 3e3e 2073 7461 6666 203d       >>> staff =
-000130c0: 2070 6172 7365 7228 7374 7269 6e67 290a   parser(string).
-000130d0: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-000130e0: 642e 7368 6f77 2873 7461 6666 2920 2320  d.show(staff) # 
-000130f0: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
-00013100: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-00013110: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-00013120: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
-00013130: 6164 2e6c 696c 7970 6f6e 6428 7374 6166  ad.lilypond(staf
-00013140: 6629 0a20 2020 2020 2020 2020 2020 203e  f).            >
-00013150: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
-00013160: 0a20 2020 2020 2020 2020 2020 205c 6e65  .            \ne
-00013170: 7720 5374 6166 660a 2020 2020 2020 2020  w Staff.        
-00013180: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-00013190: 2020 2020 2020 6327 380a 2020 2020 2020        c'8.      
-000131a0: 2020 2020 2020 2020 2020 5c66 0a20 2020            \f.   
-000131b0: 2020 2020 2020 2020 2020 2020 205c 3e0a               \>.
-000131c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000131d0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000131e0: 2020 6427 380a 2020 2020 2020 2020 2020    d'8.          
-000131f0: 2020 2020 2020 2d20 5c70 6f72 7461 746f        - \portato
-00013200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013210: 205b 0a20 2020 2020 2020 2020 2020 2020   [.             
-00013220: 2020 2065 2738 0a20 2020 2020 2020 2020     e'8.         
-00013230: 2020 2020 2020 205e 205c 6163 6365 6e74         ^ \accent
-00013240: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013250: 2066 2738 0a20 2020 2020 2020 2020 2020   f'8.           
-00013260: 2020 2020 205c 7070 700a 2020 2020 2020       \ppp.      
-00013270: 2020 2020 2020 2020 2020 5c3c 0a20 2020            \<.   
-00013280: 2020 2020 2020 2020 2020 2020 2067 2738               g'8
-00013290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000132a0: 205c 280a 2020 2020 2020 2020 2020 2020   \(.            
-000132b0: 2020 2020 5c73 7461 7274 5472 696c 6c53      \startTrillS
-000132c0: 7061 6e0a 2020 2020 2020 2020 2020 2020  pan.            
-000132d0: 2020 2020 6127 380a 2020 2020 2020 2020      a'8.        
-000132e0: 2020 2020 2020 2020 5c29 0a20 2020 2020          \).     
-000132f0: 2020 2020 2020 2020 2020 2062 2738 0a20             b'8. 
-00013300: 2020 2020 2020 2020 2020 2020 2020 205c                 \
-00013310: 7374 6f70 5472 696c 6c53 7061 6e0a 2020  stopTrillSpan.  
-00013320: 2020 2020 2020 2020 2020 2020 2020 5d0a                ].
-00013330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013340: 6327 2738 0a20 2020 2020 2020 2020 2020  c''8.           
-00013350: 2020 2020 205c 7366 7a0a 2020 2020 2020       \sfz.      
-00013360: 2020 2020 2020 2020 2020 2d20 5c61 6363            - \acc
-00013370: 656e 740a 2020 2020 2020 2020 2020 2020  ent.            
-00013380: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00013390: 2020 7d0a 0a20 2020 202e 2e20 2063 6f6e    }..    ..  con
-000133a0: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
-000133b0: 0a0a 2020 2020 2020 2020 5468 6520 4c69  ..        The Li
-000133c0: 6c79 506f 6e64 2070 6172 7365 7220 756e  lyPond parser un
-000133d0: 6465 7273 7461 6e64 7320 636f 6e74 6578  derstands contex
-000133e0: 7473 2061 6e64 206d 6172 6b75 703a 0a0a  ts and markup:..
-000133f0: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
-00013400: 6e67 203d 2072 2727 275c 6e65 7720 5363  ng = r'''\new Sc
-00013410: 6f72 6520 3c3c 0a20 2020 2020 2020 202e  ore <<.        .
-00013420: 2e2e 2020 2020 205c 6e65 7720 5374 6166  ..     \new Staf
-00013430: 6620 3d20 2254 7265 626c 6520 5374 6166  f = "Treble Staf
-00013440: 6622 207b 0a20 2020 2020 2020 202e 2e2e  f" {.        ...
-00013450: 2020 2020 2020 2020 205c 6e65 7720 566f           \new Vo
-00013460: 6963 6520 3d20 2254 7265 626c 6520 566f  ice = "Treble Vo
-00013470: 6963 6522 207b 0a20 2020 2020 2020 202e  ice" {.        .
-00013480: 2e2e 2020 2020 2020 2020 2020 2020 2063  ..             c
-00013490: 2720 5e5c 6d61 726b 7570 207b 205c 626f  ' ^\markup { \bo
-000134a0: 6c64 2054 7265 626c 6521 207d 0a20 2020  ld Treble! }.   
-000134b0: 2020 2020 202e 2e2e 2020 2020 2020 2020       ...        
-000134c0: 207d 0a20 2020 2020 2020 202e 2e2e 2020   }.        ...  
-000134d0: 2020 207d 0a20 2020 2020 2020 202e 2e2e     }.        ...
-000134e0: 2020 2020 205c 6e65 7720 5374 6166 6620       \new Staff 
-000134f0: 3d20 2242 6173 7320 5374 6166 6622 207b  = "Bass Staff" {
-00013500: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-00013510: 2020 2020 205c 6e65 7720 566f 6963 6520       \new Voice 
-00013520: 3d20 2242 6173 7320 566f 6963 6522 207b  = "Bass Voice" {
-00013530: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-00013540: 2020 2020 2020 2020 205c 636c 6566 2062           \clef b
-00013550: 6173 730a 2020 2020 2020 2020 2e2e 2e20  ass.        ... 
-00013560: 2020 2020 2020 2020 2020 2020 632c 205f              c, _
-00013570: 5c6d 6172 6b75 7020 7b20 5c69 7461 6c69  \markup { \itali
-00013580: 6320 4261 7373 2120 7d0a 2020 2020 2020  c Bass! }.      
-00013590: 2020 2e2e 2e20 2020 2020 2020 2020 7d0a    ...         }.
-000135a0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-000135b0: 7d0a 2020 2020 2020 2020 2e2e 2e20 3e3e  }.        ... >>
-000135c0: 0a20 2020 2020 2020 202e 2e2e 2027 2727  .        ... '''
-000135d0: 0a20 2020 2020 2020 203e 3e3e 2073 636f  .        >>> sco
-000135e0: 7265 203d 2070 6172 7365 7228 7374 7269  re = parser(stri
-000135f0: 6e67 290a 2020 2020 2020 2020 3e3e 3e20  ng).        >>> 
-00013600: 6162 6a61 642e 7368 6f77 2873 636f 7265  abjad.show(score
-00013610: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-00013620: 4950 0a0a 2020 2020 2020 2020 2e2e 2020  IP..        ..  
-00013630: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
-00013640: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-00013650: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-00013660: 7363 6f72 6529 0a20 2020 2020 2020 2020  score).         
-00013670: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
-00013680: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
-00013690: 205c 6e65 7720 5363 6f72 650a 2020 2020   \new Score.    
-000136a0: 2020 2020 2020 2020 3c3c 0a20 2020 2020          <<.     
-000136b0: 2020 2020 2020 2020 2020 205c 636f 6e74             \cont
-000136c0: 6578 7420 5374 6166 6620 3d20 2254 7265  ext Staff = "Tre
-000136d0: 626c 6520 5374 6166 6622 0a20 2020 2020  ble Staff".     
-000136e0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-000136f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013700: 205c 636f 6e74 6578 7420 566f 6963 6520   \context Voice 
-00013710: 3d20 2254 7265 626c 6520 566f 6963 6522  = "Treble Voice"
-00013720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013730: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00013740: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00013750: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00013760: 2020 2020 2020 2020 2020 205e 205c 6d61             ^ \ma
-00013770: 726b 7570 207b 0a20 2020 2020 2020 2020  rkup {.         
+0000c200: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0000c210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c220: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0000c230: 2020 2020 2020 2020 2020 2020 2020 7379                sy
+0000c240: 732e 7374 6465 7272 2e77 7269 7465 2822  s.stderr.write("
+0000c250: 7961 6363 3a20 5061 7273 6520 6572 726f  yacc: Parse erro
+0000c260: 7220 696e 2069 6e70 7574 2e20 454f 465c  r in input. EOF\
+0000c270: 6e22 290a 2020 2020 2020 2020 2020 2020  n").            
+0000c280: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000c290: 726e 0a0a 2020 2020 2020 2020 2020 2020  rn..            
+0000c2a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0000c2b0: 2020 2020 2020 6572 726f 7263 6f75 6e74        errorcount
+0000c2c0: 203d 2065 7272 6f72 5f63 6f75 6e74 0a0a   = error_count..
+0000c2d0: 2020 2020 2020 2020 2020 2020 2320 6361              # ca
+0000c2e0: 7365 2031 3a20 2074 6865 2073 7461 7465  se 1:  the state
+0000c2f0: 7374 6163 6b20 6f6e 6c79 2068 6173 2031  stack only has 1
+0000c300: 2065 6e74 7279 206f 6e20 6974 2e20 2049   entry on it.  I
+0000c310: 6620 7765 2772 6520 696e 2074 6869 7320  f we're in this 
+0000c320: 7374 6174 652c 2074 6865 0a20 2020 2020  state, the.     
+0000c330: 2020 2020 2020 2023 2065 6e74 6972 6520         # entire 
+0000c340: 7061 7273 6520 6861 7320 6265 656e 2072  parse has been r
+0000c350: 6f6c 6c65 6420 6261 636b 2061 6e64 2077  olled back and w
+0000c360: 6527 7265 2063 6f6d 706c 6574 656c 7920  e're completely 
+0000c370: 686f 7365 642e 2020 2054 6865 2074 6f6b  hosed.   The tok
+0000c380: 656e 2069 730a 2020 2020 2020 2020 2020  en is.          
+0000c390: 2020 2320 6469 7363 6172 6465 6420 616e    # discarded an
+0000c3a0: 6420 7765 206a 7573 7420 6b65 6570 2067  d we just keep g
+0000c3b0: 6f69 6e67 2e0a 0a20 2020 2020 2020 2020  oing...         
+0000c3c0: 2020 2069 6620 6c65 6e28 7374 6174 6573     if len(states
+0000c3d0: 7461 636b 2920 3c3d 2031 2061 6e64 2073  tack) <= 1 and s
+0000c3e0: 656c 662e 6c6f 6f6b 6168 6561 642e 7479  elf.lookahead.ty
+0000c3f0: 7065 2021 3d20 2224 656e 6422 3a0a 2020  pe != "$end":.  
+0000c400: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000c410: 6c66 2e6c 6f6f 6b61 6865 6164 203d 204e  lf.lookahead = N
+0000c420: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0000c430: 2020 2020 6572 7274 6f6b 656e 203d 204e      errtoken = N
+0000c440: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0000c450: 2020 2020 7374 6174 6520 3d20 300a 2020      state = 0.  
+0000c460: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000c470: 4e75 6b65 2074 6865 2070 7573 6862 6163  Nuke the pushbac
+0000c480: 6b20 7374 6163 6b0a 2020 2020 2020 2020  k stack.        
+0000c490: 2020 2020 2020 2020 6465 6c20 7365 6c66          del self
+0000c4a0: 2e6c 6f6f 6b61 6865 6164 7374 6163 6b5b  .lookaheadstack[
+0000c4b0: 3a5d 0a20 2020 2020 2020 2020 2020 2020  :].             
+0000c4c0: 2020 2063 6f6e 7469 6e75 650a 0a20 2020     continue..   
+0000c4d0: 2020 2020 2020 2020 2023 2063 6173 6520           # case 
+0000c4e0: 323a 2074 6865 2073 7461 7465 7374 6163  2: the statestac
+0000c4f0: 6b20 6861 7320 6120 636f 7570 6c65 206f  k has a couple o
+0000c500: 6620 656e 7472 6965 7320 6f6e 2069 742c  f entries on it,
+0000c510: 2062 7574 2077 6527 7265 0a20 2020 2020   but we're.     
+0000c520: 2020 2020 2020 2023 2061 7420 7468 6520         # at the 
+0000c530: 656e 6420 6f66 2074 6865 2066 696c 652e  end of the file.
+0000c540: 206e 756b 6520 7468 6520 746f 7020 656e   nuke the top en
+0000c550: 7472 7920 616e 6420 6765 6e65 7261 7465  try and generate
+0000c560: 2061 6e20 6572 726f 7220 746f 6b65 6e0a   an error token.
+0000c570: 0a20 2020 2020 2020 2020 2020 2023 2053  .            # S
+0000c580: 7461 7274 206e 756b 696e 6720 656e 7472  tart nuking entr
+0000c590: 6965 7320 6f6e 2074 6865 2073 7461 636b  ies on the stack
+0000c5a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000c5b0: 7365 6c66 2e6c 6f6f 6b61 6865 6164 2e74  self.lookahead.t
+0000c5c0: 7970 6520 3d3d 2022 2465 6e64 223a 0a20  ype == "$end":. 
+0000c5d0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000c5e0: 2057 686f 612e 2057 6527 7265 2072 6561   Whoa. We're rea
+0000c5f0: 6c6c 7920 686f 7365 6420 6865 7265 2e20  lly hosed here. 
+0000c600: 4261 696c 206f 7574 0a20 2020 2020 2020  Bail out.       
+0000c610: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
+0000c620: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000c630: 7365 6c66 2e6c 6f6f 6b61 6865 6164 2e74  self.lookahead.t
+0000c640: 7970 6520 213d 2022 6572 726f 7222 3a0a  ype != "error":.
+0000c650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c660: 7379 6d20 3d20 7379 6d73 7461 636b 5b2d  sym = symstack[-
+0000c670: 315d 0a20 2020 2020 2020 2020 2020 2020  1].             
+0000c680: 2020 2069 6620 7379 6d2e 7479 7065 203d     if sym.type =
+0000c690: 3d20 2265 7272 6f72 223a 0a20 2020 2020  = "error":.     
+0000c6a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000c6b0: 2048 6d6d 6d3a 2065 7272 6f72 2069 7320   Hmmm: error is 
+0000c6c0: 6f6e 2074 6f70 206f 6620 7374 6163 6b2c  on top of stack,
+0000c6d0: 2077 6527 6c6c 206a 7573 7420 6e75 6b65   we'll just nuke
+0000c6e0: 2069 6e70 7574 0a20 2020 2020 2020 2020   input.         
+0000c6f0: 2020 2020 2020 2020 2020 2023 2073 796d             # sym
+0000c700: 626f 6c20 616e 6420 636f 6e74 696e 7565  bol and continue
+0000c710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c720: 2020 2020 2073 656c 662e 6c6f 6f6b 6168       self.lookah
+0000c730: 6561 6420 3d20 4e6f 6e65 0a20 2020 2020  ead = None.     
+0000c740: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000c750: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+0000c760: 2020 2020 2020 2020 7420 3d20 5961 6363          t = Yacc
+0000c770: 5379 6d62 6f6c 2829 0a20 2020 2020 2020  Symbol().       
+0000c780: 2020 2020 2020 2020 2074 2e74 7970 6520           t.type 
+0000c790: 3d20 2265 7272 6f72 220a 2020 2020 2020  = "error".      
+0000c7a0: 2020 2020 2020 2020 2020 6966 2068 6173            if has
+0000c7b0: 6174 7472 2873 656c 662e 6c6f 6f6b 6168  attr(self.lookah
+0000c7c0: 6561 642c 2022 6c69 6e65 6e6f 2229 3a0a  ead, "lineno"):.
+0000c7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c7e0: 2020 2020 742e 6c69 6e65 6e6f 203d 2073      t.lineno = s
+0000c7f0: 656c 662e 6c6f 6f6b 6168 6561 642e 6c69  elf.lookahead.li
+0000c800: 6e65 6e6f 0a20 2020 2020 2020 2020 2020  neno.           
+0000c810: 2020 2020 2074 2e76 616c 7565 203d 2073       t.value = s
+0000c820: 656c 662e 6c6f 6f6b 6168 6561 640a 2020  elf.lookahead.  
+0000c830: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000c840: 6c66 2e6c 6f6f 6b61 6865 6164 7374 6163  lf.lookaheadstac
+0000c850: 6b2e 6170 7065 6e64 2873 656c 662e 6c6f  k.append(self.lo
+0000c860: 6f6b 6168 6561 6429 0a20 2020 2020 2020  okahead).       
+0000c870: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
+0000c880: 6f6b 6168 6561 6420 3d20 740a 2020 2020  okahead = t.    
+0000c890: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0000c8a0: 2020 2020 2020 2020 2020 2020 2020 7379                sy
+0000c8b0: 6d73 7461 636b 2e70 6f70 2829 0a20 2020  mstack.pop().   
+0000c8c0: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+0000c8d0: 7465 7374 6163 6b2e 706f 7028 290a 2020  testack.pop().  
+0000c8e0: 2020 2020 2020 2020 2020 2020 2020 7374                st
+0000c8f0: 6174 6520 3d20 7374 6174 6573 7461 636b  ate = statestack
+0000c900: 5b2d 315d 2020 2320 506f 7465 6e74 6961  [-1]  # Potentia
+0000c910: 6c20 6275 6720 6669 780a 0a20 2020 2020  l bug fix..     
+0000c920: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+0000c930: 0a20 2020 2020 2020 2023 2043 616c 6c20  .        # Call 
+0000c940: 616e 2065 7272 6f72 2066 756e 6374 696f  an error functio
+0000c950: 6e20 6865 7265 0a20 2020 2020 2020 2072  n here.        r
+0000c960: 6169 7365 2052 756e 7469 6d65 4572 726f  aise RuntimeErro
+0000c970: 7228 2279 6163 633a 2069 6e74 6572 6e61  r("yacc: interna
+0000c980: 6c20 7061 7273 6572 2065 7272 6f72 2121  l parser error!!
+0000c990: 215c 6e22 290a 0a0a 636c 6173 7320 4c69  !\n")...class Li
+0000c9a0: 6c79 506f 6e64 4c65 7869 6361 6c44 6566  lyPondLexicalDef
+0000c9b0: 696e 6974 696f 6e3a 0a20 2020 2022 2222  inition:.    """
+0000c9c0: 0a20 2020 2054 6865 206c 6578 6963 616c  .    The lexical
+0000c9d0: 2064 6566 696e 6974 696f 6e20 6f66 204c   definition of L
+0000c9e0: 696c 7950 6f6e 6427 7320 7379 6e74 6178  ilyPond's syntax
+0000c9f0: 2e0a 0a20 2020 2045 6666 6563 7469 7665  ...    Effective
+0000ca00: 6c79 2065 7175 6976 616c 656e 7420 746f  ly equivalent to
+0000ca10: 204c 696c 7950 6f6e 6427 7320 6060 6c65   LilyPond's ``le
+0000ca20: 7865 722e 6c6c 6060 2066 696c 652e 0a0a  xer.ll`` file...
+0000ca30: 2020 2020 4e6f 7420 636f 6d70 6f73 6572      Not composer
+0000ca40: 2d73 6166 652e 0a0a 2020 2020 5573 6564  -safe...    Used
+0000ca50: 2069 6e74 6572 6e61 6c6c 7920 6279 2060   internally by `
+0000ca60: 604c 696c 7950 6f6e 6450 6172 7365 7260  `LilyPondParser`
+0000ca70: 602e 0a20 2020 2022 2222 0a0a 2020 2020  `..    """..    
+0000ca80: 2323 2320 494e 4954 4941 4c49 5a45 5220  ### INITIALIZER 
+0000ca90: 2323 230a 0a20 2020 2064 6566 205f 5f69  ###..    def __i
+0000caa0: 6e69 745f 5f28 7365 6c66 2c20 636c 6965  nit__(self, clie
+0000cab0: 6e74 3d4e 6f6e 6529 3a0a 2020 2020 2020  nt=None):.      
+0000cac0: 2020 7365 6c66 2e63 6c69 656e 7420 3d20    self.client = 
+0000cad0: 636c 6965 6e74 0a0a 2020 2020 7374 6174  client..    stat
+0000cae0: 6573 203d 2028 0a20 2020 2020 2020 2023  es = (.        #
+0000caf0: 206c 6578 6572 2e6c 6c3a 3131 350a 2020   lexer.ll:115.  
+0000cb00: 2020 2020 2020 2320 2827 6578 7472 6174        # ('extrat
+0000cb10: 6f6b 656e 272c 2027 6578 636c 7573 6976  oken', 'exclusiv
+0000cb20: 6527 292c 0a20 2020 2020 2020 2023 2028  e'),.        # (
+0000cb30: 2763 686f 7264 7327 2c20 2765 7863 6c75  'chords', 'exclu
+0000cb40: 7369 7665 2729 2c0a 2020 2020 2020 2020  sive'),.        
+0000cb50: 2320 2827 6669 6775 7265 7327 2c20 2765  # ('figures', 'e
+0000cb60: 7863 6c75 7369 7665 2729 2c0a 2020 2020  xclusive'),.    
+0000cb70: 2020 2020 2320 2827 696e 636c 272c 2027      # ('incl', '
+0000cb80: 6578 636c 7573 6976 6527 292c 0a20 2020  exclusive'),.   
+0000cb90: 2020 2020 2023 2028 276c 7972 6963 7327       # ('lyrics'
+0000cba0: 2c20 2765 7863 6c75 7369 7665 2729 2c0a  , 'exclusive'),.
+0000cbb0: 2020 2020 2020 2020 2320 2827 6c79 7269          # ('lyri
+0000cbc0: 635f 7175 6f74 6520 272c 2027 6578 636c  c_quote ', 'excl
+0000cbd0: 7573 6976 6527 292c 0a20 2020 2020 2020  usive'),.       
+0000cbe0: 2028 226c 6f6e 6763 6f6d 6d65 6e74 222c   ("longcomment",
+0000cbf0: 2022 6578 636c 7573 6976 6522 292c 0a20   "exclusive"),. 
+0000cc00: 2020 2020 2020 2028 226d 6172 6b75 7022         ("markup"
+0000cc10: 2c20 2265 7863 6c75 7369 7665 2229 2c0a  , "exclusive"),.
+0000cc20: 2020 2020 2020 2020 2822 6e6f 7465 7322          ("notes"
+0000cc30: 2c20 2265 7863 6c75 7369 7665 2229 2c0a  , "exclusive"),.
+0000cc40: 2020 2020 2020 2020 2822 7175 6f74 6522          ("quote"
+0000cc50: 2c20 2265 7863 6c75 7369 7665 2229 2c0a  , "exclusive"),.
+0000cc60: 2020 2020 2020 2020 2320 2827 736f 7572          # ('sour
+0000cc70: 6365 6669 6c65 6c69 6e65 272c 2027 6578  cefileline', 'ex
+0000cc80: 636c 7573 6976 6527 292c 0a20 2020 2020  clusive'),.     
+0000cc90: 2020 2023 2028 2773 6f75 7263 6566 696c     # ('sourcefil
+0000cca0: 656e 616d 6527 2c20 2765 7863 6c75 7369  ename', 'exclusi
+0000ccb0: 7665 2729 2c0a 2020 2020 2020 2020 2822  ve'),.        ("
+0000ccc0: 7665 7273 696f 6e22 2c20 2265 7863 6c75  version", "exclu
+0000ccd0: 7369 7665 2229 2c0a 2020 2020 2020 2020  sive"),.        
+0000cce0: 2822 7363 6865 6d65 222c 2022 6578 636c  ("scheme", "excl
+0000ccf0: 7573 6976 6522 292c 0a20 2020 2029 0a0a  usive"),.    )..
+0000cd00: 2020 2020 2320 6c65 7865 722e 6c6c 3a31      # lexer.ll:1
+0000cd10: 3239 0a20 2020 2041 203d 2072 225b 612d  29.    A = r"[a-
+0000cd20: 7a41 2d5a 5c32 3030 2d5c 3337 375d 220a  zA-Z\200-\377]".
+0000cd30: 2020 2020 4141 203d 2072 2228 2573 7c5f      AA = r"(%s|_
+0000cd40: 2922 2025 2041 0a20 2020 204e 203d 2072  )" % A.    N = r
+0000cd50: 225b 302d 395d 220a 2020 2020 414e 203d  "[0-9]".    AN =
+0000cd60: 2072 2228 2573 7c25 7329 2220 2520 2841   r"(%s|%s)" % (A
+0000cd70: 412c 204e 290a 2020 2020 414e 595f 4348  A, N).    ANY_CH
+0000cd80: 4152 203d 2072 2228 2e7c 5c6e 2922 0a20  AR = r"(.|\n)". 
+0000cd90: 2020 2050 554e 4354 203d 2072 225b 3f21     PUNCT = r"[?!
+0000cda0: 3a27 605d 220a 2020 2020 4143 4345 4e54  :'`]".    ACCENT
+0000cdb0: 203d 2072 2222 225c 5c5b 6027 225e 5d22   = r"""\\[`'"^]"
+0000cdc0: 2222 0a20 2020 204e 4154 494f 4e41 4c20  "".    NATIONAL 
+0000cdd0: 3d20 7222 5b5c 3030 312d 5c30 3036 5c30  = r"[\001-\006\0
+0000cde0: 3231 2d5c 3032 375c 3033 315c 3033 365d  21-\027\031\036]
+0000cdf0: 220a 2020 2020 5445 5820 3d20 7222 2573  ".    TEX = r"%s
+0000ce00: 7c2d 7c25 737c 2573 7c25 7322 2025 2028  |-|%s|%s|%s" % (
+0000ce10: 4141 2c20 5055 4e43 542c 2041 4343 454e  AA, PUNCT, ACCEN
+0000ce20: 542c 204e 4154 494f 4e41 4c29 0a20 2020  T, NATIONAL).   
+0000ce30: 2057 4f52 4420 3d20 7222 2573 2573 2a22   WORD = r"%s%s*"
+0000ce40: 2025 2028 412c 2041 4e29 0a20 2020 2044   % (A, AN).    D
+0000ce50: 4153 4845 445f 574f 5244 203d 2072 2225  ASHED_WORD = r"%
+0000ce60: 7328 2573 7c2d 292a 2220 2520 2841 2c20  s(%s|-)*" % (A, 
+0000ce70: 414e 290a 2020 2020 4441 5348 4544 5f4b  AN).    DASHED_K
+0000ce80: 4559 5f57 4f52 4420 3d20 7222 5c5c 2573  EY_WORD = r"\\%s
+0000ce90: 2220 2520 4441 5348 4544 5f57 4f52 440a  " % DASHED_WORD.
+0000cea0: 0a20 2020 2023 206c 6578 6572 2e6c 6c3a  .    # lexer.ll:
+0000ceb0: 3134 340a 2020 2020 414c 5048 4157 4f52  144.    ALPHAWOR
+0000cec0: 4420 3d20 7222 2573 2b22 2025 2041 0a20  D = r"%s+" % A. 
+0000ced0: 2020 2044 4947 4954 203d 2072 2225 7322     DIGIT = r"%s"
+0000cee0: 2025 204e 0a20 2020 2055 4e53 4947 4e45   % N.    UNSIGNE
+0000cef0: 4420 3d20 7222 2573 2b22 2025 204e 0a20  D = r"%s+" % N. 
+0000cf00: 2020 2049 4e54 203d 2072 2228 2d3f 2573     INT = r"(-?%s
+0000cf10: 2922 2025 2055 4e53 4947 4e45 440a 2020  )" % UNSIGNED.  
+0000cf20: 2020 5245 414c 203d 2072 2228 2825 735c    REAL = r"((%s\
+0000cf30: 2e25 732a 297c 282d 3f5c 2e25 732b 2929  .%s*)|(-?\.%s+))
+0000cf40: 2220 2520 2849 4e54 2c20 4e2c 204e 290a  " % (INT, N, N).
+0000cf50: 2020 2020 455f 554e 5349 474e 4544 203d      E_UNSIGNED =
+0000cf60: 2072 225c 5c25 732b 2220 2520 4e0a 2020   r"\\%s+" % N.  
+0000cf70: 2020 4652 4143 5449 4f4e 203d 2072 2225    FRACTION = r"%
+0000cf80: 732b 5c2f 2573 2b22 2025 2028 4e2c 204e  s+\/%s+" % (N, N
+0000cf90: 290a 2020 2020 4b45 5957 4f52 4420 3d20  ).    KEYWORD = 
+0000cfa0: 7222 5c5c 2573 2220 2520 574f 5244 0a20  r"\\%s" % WORD. 
+0000cfb0: 2020 2057 4849 5445 203d 2072 225b 205c     WHITE = r"[ \
+0000cfc0: 6e5c 745c 665c 725d 2220 2023 206f 6e6c  n\t\f\r]"  # onl
+0000cfd0: 7920 7768 6974 6573 7061 6365 0a20 2020  y whitespace.   
+0000cfe0: 2048 4f52 495a 4f4e 5441 4c57 4849 5445   HORIZONTALWHITE
+0000cff0: 203d 2072 225b 205c 745d 2220 2023 206f   = r"[ \t]"  # o
+0000d000: 6e6c 7920 6e6f 6e2d 6c69 6e65 2d62 7265  nly non-line-bre
+0000d010: 616b 696e 6720 7768 6974 6573 7061 6365  aking whitespace
+0000d020: 0a20 2020 2042 4c41 434b 203d 2072 225b  .    BLACK = r"[
+0000d030: 5e20 5c6e 5c74 5c66 5c72 5d22 2020 2320  ^ \n\t\f\r]"  # 
+0000d040: 6f6e 6c79 206e 6f6e 2d77 6869 7465 7370  only non-whitesp
+0000d050: 6163 650a 2020 2020 5245 5354 4e41 4d45  ace.    RESTNAME
+0000d060: 203d 2072 225b 7273 5d22 0a20 2020 204e   = r"[rs]".    N
+0000d070: 4f54 4543 4f4d 4d41 4e44 203d 2072 225c  OTECOMMAND = r"\
+0000d080: 5c25 732b 2220 2520 410a 2020 2020 4d41  \%s+" % A.    MA
+0000d090: 524b 5550 434f 4d4d 414e 4420 3d20 7222  RKUPCOMMAND = r"
+0000d0a0: 5c5c 2825 737c 5b2d 5f5d 292b 2220 2520  \\(%s|[-_])+" % 
+0000d0b0: 410a 2020 2020 4c59 5249 4353 203d 2072  A.    LYRICS = r
+0000d0c0: 2228 2573 7c25 7329 5b5e 302d 3920 5c74  "(%s|%s)[^0-9 \t
+0000d0d0: 5c6e 5c72 5c66 5d2a 2220 2520 2841 412c  \n\r\f]*" % (AA,
+0000d0e0: 2054 4558 290a 2020 2020 4553 4341 5045   TEX).    ESCAPE
+0000d0f0: 4420 3d20 7222 2222 5b6e 745c 5c27 225d  D = r"""[nt\\'"]
+0000d100: 2222 220a 2020 2020 4558 5445 4e44 4552  """.    EXTENDER
+0000d110: 203d 2072 225f 5f22 0a20 2020 2048 5950   = r"__".    HYP
+0000d120: 4845 4e20 3d20 7222 2d2d 220a 2020 2020  HEN = r"--".    
+0000d130: 424f 4d5f 5554 4638 203d 2072 225c 3335  BOM_UTF8 = r"\35
+0000d140: 375c 3237 335c 3237 3722 0a0a 2020 2020  7\273\277"..    
+0000d150: 6b65 7977 6f72 6473 203d 207b 0a20 2020  keywords = {.   
+0000d160: 2020 2020 2023 2070 6172 7365 722e 7979       # parser.yy
+0000d170: 3a31 3832 2c20 6c69 6c79 2d6c 6578 6572  :182, lily-lexer
+0000d180: 2e63 633a 3339 0a20 2020 2020 2020 2023  .cc:39.        #
+0000d190: 2020 2020 2020 2020 275c 5c61 6363 6570          '\\accep
+0000d1a0: 7473 273a 2027 4143 4345 5054 5327 2c0a  ts': 'ACCEPTS',.
+0000d1b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000d1c0: 2027 5c5c 6164 646c 7972 6963 7327 3a20   '\\addlyrics': 
+0000d1d0: 2741 4444 4c59 5249 4353 272c 0a20 2020  'ADDLYRICS',.   
+0000d1e0: 2020 2020 2023 2020 2020 2020 2020 275c       #        '\
+0000d1f0: 5c61 6c69 6173 273a 2027 414c 4941 5327  \alias': 'ALIAS'
+0000d200: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000d210: 2020 2027 5c5c 616c 7465 726e 6174 6976     '\\alternativ
+0000d220: 6527 3a20 2741 4c54 4552 4e41 5449 5645  e': 'ALTERNATIVE
+0000d230: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+0000d240: 2020 2020 275c 5c62 6f6f 6b27 3a20 2742      '\\book': 'B
+0000d250: 4f4f 4b27 2c0a 2020 2020 2020 2020 2320  OOK',.        # 
+0000d260: 2020 2020 2020 2027 5c5c 626f 6f6b 7061         '\\bookpa
+0000d270: 7274 273a 2027 424f 4f4b 5041 5254 272c  rt': 'BOOKPART',
+0000d280: 0a20 2020 2020 2020 2022 5c5c 6368 616e  .        "\\chan
+0000d290: 6765 223a 2022 4348 414e 4745 222c 0a20  ge": "CHANGE",. 
+0000d2a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000d2b0: 275c 5c63 686f 7264 6d6f 6465 273a 2027  '\\chordmode': '
+0000d2c0: 4348 4f52 444d 4f44 4527 2c0a 2020 2020  CHORDMODE',.    
+0000d2d0: 2020 2020 2320 2020 2020 2020 2027 5c5c      #        '\\
+0000d2e0: 6368 6f72 6473 273a 2027 4348 4f52 4453  chords': 'CHORDS
+0000d2f0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+0000d300: 2020 2020 275c 5c63 6f6e 7369 7374 7327      '\\consists'
+0000d310: 3a20 2743 4f4e 5349 5354 5327 2c0a 2020  : 'CONSISTS',.  
+0000d320: 2020 2020 2020 225c 5c63 6f6e 7465 7874        "\\context
+0000d330: 223a 2022 434f 4e54 4558 5422 2c0a 2020  ": "CONTEXT",.  
+0000d340: 2020 2020 2020 225c 5c64 6566 6175 6c74        "\\default
+0000d350: 223a 2022 4445 4641 554c 5422 2c0a 2020  ": "DEFAULT",.  
+0000d360: 2020 2020 2020 2320 2020 2020 2020 2027        #        '
+0000d370: 5c5c 6465 6661 756c 7463 6869 6c64 273a  \\defaultchild':
+0000d380: 2027 4445 4641 554c 5443 4849 4c44 272c   'DEFAULTCHILD',
+0000d390: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000d3a0: 2020 275c 5c64 656e 6965 7327 3a20 2744    '\\denies': 'D
+0000d3b0: 454e 4945 5327 2c0a 2020 2020 2020 2020  ENIES',.        
+0000d3c0: 2320 2020 2020 2020 2027 5c5c 6465 7363  #        '\\desc
+0000d3d0: 7269 7074 696f 6e27 3a20 2744 4553 4352  ription': 'DESCR
+0000d3e0: 4950 5449 4f4e 272c 0a20 2020 2020 2020  IPTION',.       
+0000d3f0: 2023 2020 2020 2020 2020 275c 5c64 7275   #        '\\dru
+0000d400: 6d6d 6f64 6527 3a20 2744 5255 4d4d 4f44  mmode': 'DRUMMOD
+0000d410: 4527 2c0a 2020 2020 2020 2020 2320 2020  E',.        #   
+0000d420: 2020 2020 2027 5c5c 6472 756d 7327 3a20       '\\drums': 
+0000d430: 2744 5255 4d53 272c 0a20 2020 2020 2020  'DRUMS',.       
+0000d440: 2023 2020 2020 2020 2020 275c 5c66 6967   #        '\\fig
+0000d450: 7572 656d 6f64 6527 3a20 2746 4947 5552  uremode': 'FIGUR
+0000d460: 454d 4f44 4527 2c0a 2020 2020 2020 2020  EMODE',.        
+0000d470: 2320 2020 2020 2020 2027 5c5c 6669 6775  #        '\\figu
+0000d480: 7265 7327 3a20 2746 4947 5552 4553 272c  res': 'FIGURES',
+0000d490: 0a20 2020 2020 2020 2022 5c5c 6865 6164  .        "\\head
+0000d4a0: 6572 223a 2022 4845 4144 4552 222c 0a20  er": "HEADER",. 
+0000d4b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000d4c0: 275c 5c76 6572 7369 6f6e 2d65 7272 6f72  '\\version-error
+0000d4d0: 273a 2027 494e 5641 4c49 4427 2c0a 2020  ': 'INVALID',.  
+0000d4e0: 2020 2020 2020 225c 5c6c 6179 6f75 7422        "\\layout"
+0000d4f0: 3a20 224c 4159 4f55 5422 2c0a 2020 2020  : "LAYOUT",.    
+0000d500: 2020 2020 2320 2020 2020 2020 2027 5c5c      #        '\\
+0000d510: 6c79 7269 636d 6f64 6527 3a20 274c 5952  lyricmode': 'LYR
+0000d520: 4943 4d4f 4445 272c 0a20 2020 2020 2020  ICMODE',.       
+0000d530: 2023 2020 2020 2020 2020 275c 5c6c 7972   #        '\\lyr
+0000d540: 6963 7327 3a20 274c 5952 4943 5327 2c0a  ics': 'LYRICS',.
+0000d550: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000d560: 2027 5c5c 6c79 7269 6373 746f 273a 2027   '\\lyricsto': '
+0000d570: 4c59 5249 4353 544f 272c 0a20 2020 2020  LYRICSTO',.     
+0000d580: 2020 2022 5c5c 6d61 726b 7570 223a 2022     "\\markup": "
+0000d590: 4d41 524b 5550 222c 0a20 2020 2020 2020  MARKUP",.       
+0000d5a0: 2022 5c5c 6d61 726b 7570 6c69 7374 223a   "\\markuplist":
+0000d5b0: 2022 4d41 524b 5550 4c49 5354 222c 0a20   "MARKUPLIST",. 
+0000d5c0: 2020 2020 2020 2022 5c5c 6d69 6469 223a         "\\midi":
+0000d5d0: 2022 4d49 4449 222c 0a20 2020 2020 2020   "MIDI",.       
+0000d5e0: 2023 2020 2020 2020 2020 275c 5c6e 616d   #        '\\nam
+0000d5f0: 6527 3a20 274e 414d 4527 2c0a 2020 2020  e': 'NAME',.    
+0000d600: 2020 2020 2320 2020 2020 2020 2027 5c5c      #        '\\
+0000d610: 6e6f 7465 6d6f 6465 273a 2027 4e4f 5445  notemode': 'NOTE
+0000d620: 4d4f 4445 272c 0a20 2020 2020 2020 2022  MODE',.        "
+0000d630: 5c5c 6f76 6572 7269 6465 223a 2022 4f56  \\override": "OV
+0000d640: 4552 5249 4445 222c 0a20 2020 2020 2020  ERRIDE",.       
+0000d650: 2022 5c5c 7061 7065 7222 3a20 2250 4150   "\\paper": "PAP
+0000d660: 4552 222c 0a20 2020 2020 2020 2023 2020  ER",.        #  
+0000d670: 2020 2020 2020 275c 5c72 656d 6f76 6527        '\\remove'
+0000d680: 3a20 2752 454d 4f56 4527 2c0a 2020 2020  : 'REMOVE',.    
+0000d690: 2020 2020 2320 2020 2020 2020 2027 5c5c      #        '\\
+0000d6a0: 7265 7065 6174 273a 2027 5245 5045 4154  repeat': 'REPEAT
+0000d6b0: 272c 0a20 2020 2020 2020 2022 5c5c 7265  ',.        "\\re
+0000d6c0: 7374 223a 2022 5245 5354 222c 0a20 2020  st": "REST",.   
+0000d6d0: 2020 2020 2022 5c5c 7265 7665 7274 223a       "\\revert":
+0000d6e0: 2022 5245 5645 5254 222c 0a20 2020 2020   "REVERT",.     
+0000d6f0: 2020 2022 5c5c 7363 6f72 6522 3a20 2253     "\\score": "S
+0000d700: 434f 5245 222c 0a20 2020 2020 2020 2022  CORE",.        "
+0000d710: 5c5c 7365 7175 656e 7469 616c 223a 2022  \\sequential": "
+0000d720: 5345 5155 454e 5449 414c 222c 0a20 2020  SEQUENTIAL",.   
+0000d730: 2020 2020 2022 5c5c 7365 7422 3a20 2253       "\\set": "S
+0000d740: 4554 222c 0a20 2020 2020 2020 2022 5c5c  ET",.        "\\
+0000d750: 7369 6d75 6c74 616e 656f 7573 223a 2022  simultaneous": "
+0000d760: 5349 4d55 4c54 414e 454f 5553 222c 0a20  SIMULTANEOUS",. 
+0000d770: 2020 2020 2020 2022 5c5c 7465 6d70 6f22         "\\tempo"
+0000d780: 3a20 2254 454d 504f 222c 0a20 2020 2020  : "TEMPO",.     
+0000d790: 2020 2023 2020 2020 2020 2020 275c 5c74     #        '\\t
+0000d7a0: 7970 6527 3a20 2754 5950 4527 2c0a 2020  ype': 'TYPE',.  
+0000d7b0: 2020 2020 2020 225c 5c75 6e73 6574 223a        "\\unset":
+0000d7c0: 2022 554e 5345 5422 2c0a 2020 2020 2020   "UNSET",.      
+0000d7d0: 2020 225c 5c77 6974 6822 3a20 2257 4954    "\\with": "WIT
+0000d7e0: 4822 2c0a 2020 2020 2020 2020 2320 7061  H",.        # pa
+0000d7f0: 7273 6572 2e79 793a 3233 330a 2020 2020  rser.yy:233.    
+0000d800: 2020 2020 225c 5c6e 6577 223a 2022 4e45      "\\new": "NE
+0000d810: 5743 4f4e 5445 5854 222c 0a20 2020 2020  WCONTEXT",.     
+0000d820: 2020 2023 203f 3f3f 0a20 2020 2020 2020     # ???.       
+0000d830: 2023 2020 2020 2020 2020 275c 5c6f 626a   #        '\\obj
+0000d840: 6563 7469 6427 3a20 274f 424a 4543 5449  ectid': 'OBJECTI
+0000d850: 4427 2c0a 2020 2020 7d0a 0a20 2020 2074  D',.    }..    t
+0000d860: 6f6b 656e 7320 3d20 5b0a 2020 2020 2020  okens = [.      
+0000d870: 2020 2320 2020 2020 2020 2027 4348 4f52    #        'CHOR
+0000d880: 445f 4241 5353 272c 2023 2022 2f2b 220a  D_BASS', # "/+".
+0000d890: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000d8a0: 2027 4348 4f52 445f 4341 5245 5427 2c20   'CHORD_CARET', 
+0000d8b0: 2320 225e 220a 2020 2020 2020 2020 2320  # "^".        # 
+0000d8c0: 2020 2020 2020 2027 4348 4f52 445f 434f         'CHORD_CO
+0000d8d0: 4c4f 4e27 2c20 2320 223a 220a 2020 2020  LON', # ":".    
+0000d8e0: 2020 2020 2320 2020 2020 2020 2027 4348      #        'CH
+0000d8f0: 4f52 445f 4d49 4e55 5327 2c20 2320 222d  ORD_MINUS', # "-
+0000d900: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+0000d910: 2020 2027 4348 4f52 445f 534c 4153 4827     'CHORD_SLASH'
+0000d920: 2c20 2320 222f 220a 2020 2020 2020 2020  , # "/".        
+0000d930: 2241 4e47 4c45 5f4f 5045 4e22 2c20 2023  "ANGLE_OPEN",  #
+0000d940: 2022 3c22 0a20 2020 2020 2020 2022 414e   "<".        "AN
+0000d950: 474c 455f 434c 4f53 4522 2c20 2023 2022  GLE_CLOSE",  # "
+0000d960: 3e22 0a20 2020 2020 2020 2022 444f 5542  >".        "DOUB
+0000d970: 4c45 5f41 4e47 4c45 5f4f 5045 4e22 2c20  LE_ANGLE_OPEN", 
+0000d980: 2023 2022 3c3c 220a 2020 2020 2020 2020   # "<<".        
+0000d990: 2244 4f55 424c 455f 414e 474c 455f 434c  "DOUBLE_ANGLE_CL
+0000d9a0: 4f53 4522 2c20 2023 2022 3e3e 220a 2020  OSE",  # ">>".  
+0000d9b0: 2020 2020 2020 2245 5f42 4143 4b53 4c41        "E_BACKSLA
+0000d9c0: 5348 222c 2020 2320 225c 5c22 0a20 2020  SH",  # "\\".   
+0000d9d0: 2020 2020 2022 455f 414e 474c 455f 434c       "E_ANGLE_CL
+0000d9e0: 4f53 4522 2c20 2023 2022 5c5c 3e22 0a20  OSE",  # "\\>". 
+0000d9f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000da00: 2745 5f43 4841 5227 2c20 2320 225c 5c43  'E_CHAR', # "\\C
+0000da10: 5b68 6172 6163 7465 725d 220a 2020 2020  [haracter]".    
+0000da20: 2020 2020 2245 5f43 4c4f 5345 222c 2020      "E_CLOSE",  
+0000da30: 2320 225c 5c29 220a 2020 2020 2020 2020  # "\\)".        
+0000da40: 2245 5f45 5843 4c41 4d41 5449 4f4e 222c  "E_EXCLAMATION",
+0000da50: 2020 2320 225c 5c21 220a 2020 2020 2020    # "\\!".      
+0000da60: 2020 2320 2020 2020 2020 2027 455f 4252    #        'E_BR
+0000da70: 4143 4b45 545f 4f50 454e 272c 2023 2022  ACKET_OPEN', # "
+0000da80: 5c5c 5b22 0a20 2020 2020 2020 2022 455f  \\[".        "E_
+0000da90: 4f50 454e 222c 2020 2320 225c 5c28 220a  OPEN",  # "\\(".
+0000daa0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000dab0: 2027 455f 4252 4143 4b45 545f 434c 4f53   'E_BRACKET_CLOS
+0000dac0: 4527 2c20 2320 225c 5c5d 220a 2020 2020  E', # "\\]".    
+0000dad0: 2020 2020 2245 5f41 4e47 4c45 5f4f 5045      "E_ANGLE_OPE
+0000dae0: 4e22 2c20 2023 2022 5c5c 3c22 0a20 2020  N",  # "\\<".   
+0000daf0: 2020 2020 2023 2020 2020 2020 2020 2745       #        'E
+0000db00: 5f50 4c55 5327 2c20 2320 225c 5c2b 220a  _PLUS', # "\\+".
+0000db10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000db20: 2027 455f 5449 4c44 4527 2c20 2320 225c   'E_TILDE', # "\
+0000db30: 5c7e 220a 2020 2020 2020 2020 2245 5854  \~".        "EXT
+0000db40: 454e 4445 5222 2c20 2023 2022 5f5f 220a  ENDER",  # "__".
+0000db50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000db60: 2027 4649 4755 5245 5f43 4c4f 5345 272c   'FIGURE_CLOSE',
+0000db70: 2023 2022 5c5c 3e22 0a20 2020 2020 2020   # "\\>".       
+0000db80: 2023 2020 2020 2020 2020 2746 4947 5552   #        'FIGUR
+0000db90: 455f 4f50 454e 272c 2023 2022 5c5c 3c22  E_OPEN', # "\\<"
+0000dba0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000dbb0: 2020 2746 4947 5552 455f 5350 4143 4527    'FIGURE_SPACE'
+0000dbc0: 2c20 2320 225f 220a 2020 2020 2020 2020  , # "_".        
+0000dbd0: 2248 5950 4845 4e22 2c20 2023 2022 2d2d  "HYPHEN",  # "--
+0000dbe0: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+0000dbf0: 2020 2027 4c59 5249 435f 4d41 524b 5550     'LYRIC_MARKUP
+0000dc00: 272c 0a20 2020 2020 2020 2022 4d55 4c54  ',.        "MULT
+0000dc10: 495f 4d45 4153 5552 455f 5245 5354 222c  I_MEASURE_REST",
+0000dc20: 0a20 2020 2020 2020 2022 455f 554e 5349  .        "E_UNSI
+0000dc30: 474e 4544 222c 0a20 2020 2020 2020 2022  GNED",.        "
+0000dc40: 554e 5349 474e 4544 222c 0a20 2020 2020  UNSIGNED",.     
+0000dc50: 2020 2022 4558 5045 4354 5f4d 4152 4b55     "EXPECT_MARKU
+0000dc60: 5022 2c20 2023 2022 6d61 726b 7570 3f22  P",  # "markup?"
+0000dc70: 0a20 2020 2020 2020 2022 4558 5045 4354  .        "EXPECT
+0000dc80: 5f50 4954 4348 222c 2020 2320 226c 793a  _PITCH",  # "ly:
+0000dc90: 7069 7463 683f 220a 2020 2020 2020 2020  pitch?".        
+0000dca0: 2245 5850 4543 545f 4455 5241 5449 4f4e  "EXPECT_DURATION
+0000dcb0: 222c 2020 2320 226c 793a 6475 7261 7469  ",  # "ly:durati
+0000dcc0: 6f6e 3f22 0a20 2020 2020 2020 2022 4558  on?".        "EX
+0000dcd0: 5045 4354 5f53 434d 222c 2020 2320 2273  PECT_SCM",  # "s
+0000dce0: 6368 656d 653f 220a 2020 2020 2020 2020  cheme?".        
+0000dcf0: 2242 4143 4b55 5022 2c20 2023 2022 2862  "BACKUP",  # "(b
+0000dd00: 6163 6b65 642d 7570 3f29 220a 2020 2020  acked-up?)".    
+0000dd10: 2020 2020 2252 4550 4152 5345 222c 2020      "REPARSE",  
+0000dd20: 2320 2228 7265 7061 7273 6564 3f29 220a  # "(reparsed?)".
+0000dd30: 2020 2020 2020 2020 2245 5850 4543 545f          "EXPECT_
+0000dd40: 4d41 524b 5550 5f4c 4953 5422 2c20 2023  MARKUP_LIST",  #
+0000dd50: 2022 6d61 726b 7570 2d6c 6973 743f 220a   "markup-list?".
+0000dd60: 2020 2020 2020 2020 2245 5850 4543 545f          "EXPECT_
+0000dd70: 4f50 5449 4f4e 414c 222c 2020 2320 226f  OPTIONAL",  # "o
+0000dd80: 7074 696f 6e61 6c3f 220a 2020 2020 2020  ptional?".      
+0000dd90: 2020 2245 5850 4543 545f 4e4f 5f4d 4f52    "EXPECT_NO_MOR
+0000dda0: 455f 4152 4753 222c 2020 230a 2020 2020  E_ARGS",  #.    
+0000ddb0: 2020 2020 2320 2020 2020 2020 2027 454d      #        'EM
+0000ddc0: 4245 4444 4544 5f4c 494c 5927 2c20 2320  BEDDED_LILY', # 
+0000ddd0: 2223 7b22 0a20 2020 2020 2020 2023 2020  "#{".        #  
+0000dde0: 2020 2020 2020 2742 4f4f 4b5f 4944 454e        'BOOK_IDEN
+0000ddf0: 5449 4649 4552 272c 0a20 2020 2020 2020  TIFIER',.       
+0000de00: 2023 2020 2020 2020 2020 2743 484f 5244   #        'CHORD
+0000de10: 5f4d 4f44 4946 4945 5227 2c0a 2020 2020  _MODIFIER',.    
+0000de20: 2020 2020 2243 484f 5244 5f52 4550 4554      "CHORD_REPET
+0000de30: 4954 494f 4e22 2c0a 2020 2020 2020 2020  ITION",.        
+0000de40: 2243 4f4e 5445 5854 5f44 4546 5f49 4445  "CONTEXT_DEF_IDE
+0000de50: 4e54 4946 4945 5222 2c0a 2020 2020 2020  NTIFIER",.      
+0000de60: 2020 2243 4f4e 5445 5854 5f4d 4f44 5f49    "CONTEXT_MOD_I
+0000de70: 4445 4e54 4946 4945 5222 2c0a 2020 2020  DENTIFIER",.    
+0000de80: 2020 2020 2320 2020 2020 2020 2027 4452      #        'DR
+0000de90: 554d 5f50 4954 4348 272c 0a20 2020 2020  UM_PITCH',.     
+0000dea0: 2020 2022 5049 5443 485f 4944 454e 5449     "PITCH_IDENTI
+0000deb0: 4649 4552 222c 0a20 2020 2020 2020 2022  FIER",.        "
+0000dec0: 4455 5241 5449 4f4e 5f49 4445 4e54 4946  DURATION_IDENTIF
+0000ded0: 4945 5222 2c0a 2020 2020 2020 2020 2245  IER",.        "E
+0000dee0: 5645 4e54 5f49 4445 4e54 4946 4945 5222  VENT_IDENTIFIER"
+0000def0: 2c0a 2020 2020 2020 2020 2245 5645 4e54  ,.        "EVENT
+0000df00: 5f46 554e 4354 494f 4e22 2c0a 2020 2020  _FUNCTION",.    
+0000df10: 2020 2020 2246 5241 4354 494f 4e22 2c0a      "FRACTION",.
+0000df20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000df30: 2027 4c59 5249 4353 5f53 5452 494e 4727   'LYRICS_STRING'
+0000df40: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000df50: 2020 2027 4c59 5249 435f 454c 454d 454e     'LYRIC_ELEMEN
+0000df60: 5427 2c0a 2020 2020 2020 2020 2320 2020  T',.        #   
+0000df70: 2020 2020 2027 4c59 5249 435f 4d41 524b       'LYRIC_MARK
+0000df80: 5550 5f49 4445 4e54 4946 4945 5227 2c0a  UP_IDENTIFIER',.
+0000df90: 2020 2020 2020 2020 224d 4152 4b55 505f          "MARKUP_
+0000dfa0: 4655 4e43 5449 4f4e 222c 0a20 2020 2020  FUNCTION",.     
+0000dfb0: 2020 2022 4d41 524b 5550 5f4c 4953 545f     "MARKUP_LIST_
+0000dfc0: 4655 4e43 5449 4f4e 222c 0a20 2020 2020  FUNCTION",.     
+0000dfd0: 2020 2022 4d41 524b 5550 5f49 4445 4e54     "MARKUP_IDENT
+0000dfe0: 4946 4945 5222 2c0a 2020 2020 2020 2020  IFIER",.        
+0000dff0: 224d 4152 4b55 504c 4953 545f 4944 454e  "MARKUPLIST_IDEN
+0000e000: 5449 4649 4552 222c 0a20 2020 2020 2020  TIFIER",.       
+0000e010: 2022 4d55 5349 435f 4655 4e43 5449 4f4e   "MUSIC_FUNCTION
+0000e020: 222c 0a20 2020 2020 2020 2022 4d55 5349  ",.        "MUSI
+0000e030: 435f 4944 454e 5449 4649 4552 222c 0a20  C_IDENTIFIER",. 
+0000e040: 2020 2020 2020 2022 4e4f 5445 4e41 4d45         "NOTENAME
+0000e050: 5f50 4954 4348 222c 0a20 2020 2020 2020  _PITCH",.       
+0000e060: 2022 4e55 4d42 4552 5f49 4445 4e54 4946   "NUMBER_IDENTIF
+0000e070: 4945 5222 2c0a 2020 2020 2020 2020 224f  IER",.        "O
+0000e080: 5554 5055 545f 4445 465f 4944 454e 5449  UTPUT_DEF_IDENTI
+0000e090: 4649 4552 222c 0a20 2020 2020 2020 2022  FIER",.        "
+0000e0a0: 5245 414c 222c 0a20 2020 2020 2020 2022  REAL",.        "
+0000e0b0: 5245 5354 4e41 4d45 222c 0a20 2020 2020  RESTNAME",.     
+0000e0c0: 2020 2022 5343 4d5f 4655 4e43 5449 4f4e     "SCM_FUNCTION
+0000e0d0: 222c 0a20 2020 2020 2020 2022 5343 4d5f  ",.        "SCM_
+0000e0e0: 4944 454e 5449 4649 4552 222c 0a20 2020  IDENTIFIER",.   
+0000e0f0: 2020 2020 2022 5343 4d5f 544f 4b45 4e22       "SCM_TOKEN"
+0000e100: 2c0a 2020 2020 2020 2020 2253 434f 5245  ,.        "SCORE
+0000e110: 5f49 4445 4e54 4946 4945 5222 2c0a 2020  _IDENTIFIER",.  
+0000e120: 2020 2020 2020 2253 5452 494e 4722 2c0a        "STRING",.
+0000e130: 2020 2020 2020 2020 2253 5452 494e 475f          "STRING_
+0000e140: 4944 454e 5449 4649 4552 222c 0a20 2020  IDENTIFIER",.   
+0000e150: 2020 2020 2022 544f 4e49 434e 414d 455f       "TONICNAME_
+0000e160: 5049 5443 4822 2c0a 2020 2020 5d20 2b20  PITCH",.    ] + 
+0000e170: 6c69 7374 286b 6579 776f 7264 732e 7661  list(keywords.va
+0000e180: 6c75 6573 2829 290a 0a20 2020 206c 6974  lues())..    lit
+0000e190: 6572 616c 7320 3d20 280a 2020 2020 2020  erals = (.      
+0000e1a0: 2020 2221 222c 0a20 2020 2020 2020 2022    "!",.        "
+0000e1b0: 2722 2c0a 2020 2020 2020 2020 2228 222c  '",.        "(",
+0000e1c0: 0a20 2020 2020 2020 2022 2922 2c0a 2020  .        ")",.  
+0000e1d0: 2020 2020 2020 222a 222c 0a20 2020 2020        "*",.     
+0000e1e0: 2020 2022 2b22 2c0a 2020 2020 2020 2020     "+",.        
+0000e1f0: 222c 222c 0a20 2020 2020 2020 2022 2d22  ",",.        "-"
+0000e200: 2c0a 2020 2020 2020 2020 222e 222c 0a20  ,.        ".",. 
+0000e210: 2020 2020 2020 2022 2f22 2c0a 2020 2020         "/",.    
+0000e220: 2020 2020 223a 222c 0a20 2020 2020 2020      ":",.       
+0000e230: 2022 3c22 2c0a 2020 2020 2020 2020 223d   "<",.        "=
+0000e240: 222c 0a20 2020 2020 2020 2022 3e22 2c0a  ",.        ">",.
+0000e250: 2020 2020 2020 2020 223f 222c 0a20 2020          "?",.   
+0000e260: 2020 2020 2022 5b22 2c0a 2020 2020 2020       "[",.      
+0000e270: 2020 225c 5c22 2c0a 2020 2020 2020 2020    "\\",.        
+0000e280: 225e 222c 0a20 2020 2020 2020 2022 5f22  "^",.        "_"
+0000e290: 2c0a 2020 2020 2020 2020 227b 222c 0a20  ,.        "{",. 
+0000e2a0: 2020 2020 2020 2022 7c22 2c0a 2020 2020         "|",.    
+0000e2b0: 2020 2020 227d 222c 0a20 2020 2020 2020      "}",.       
+0000e2c0: 2022 7e22 2c0a 2020 2020 2020 2020 225d   "~",.        "]
+0000e2d0: 222c 0a20 2020 2029 0a0a 2020 2020 7374  ",.    )..    st
+0000e2e0: 7269 6e67 5f61 6363 756d 756c 6174 6f72  ring_accumulator
+0000e2f0: 203d 2022 220a 0a20 2020 2023 2323 204c   = ""..    ### L
+0000e300: 4558 4943 414c 2052 554c 4553 2023 2323  EXICAL RULES ###
+0000e310: 0a0a 2020 2020 2320 6c65 7865 722e 6c6c  ..    # lexer.ll
+0000e320: 3a31 3635 0a20 2020 2023 203c 2a3e 5c72  :165.    # <*>\r
+0000e330: 0a20 2020 2064 6566 2074 5f41 4e59 5f31  .    def t_ANY_1
+0000e340: 3635 2873 656c 662c 2074 293a 0a20 2020  65(self, t):.   
+0000e350: 2020 2020 2072 225c 7222 0a20 2020 2020       r"\r".     
+0000e360: 2020 2070 6173 730a 0a20 2020 2023 206c     pass..    # l
+0000e370: 6578 6572 2e6c 6c3a 3136 390a 2020 2020  exer.ll:169.    
+0000e380: 2320 3c65 7874 7261 746f 6b65 6e3e 7b41  # <extratoken>{A
+0000e390: 4e59 5f43 4841 527d 0a0a 2020 2020 2320  NY_CHAR}..    # 
+0000e3a0: 6c65 7865 722e 6c6c 3a31 3836 0a20 2020  lexer.ll:186.   
+0000e3b0: 2023 203c 6578 7472 6174 6f6b 656e 3e3c   # <extratoken><
+0000e3c0: 3c45 4f46 3e3e 0a0a 2020 2020 2320 6c65  <EOF>>..    # le
+0000e3d0: 7865 722e 6c6c 3a32 3031 0a20 2020 2023  xer.ll:201.    #
+0000e3e0: 203c 494e 4954 4941 4c2c 6368 6f72 6473   <INITIAL,chords
+0000e3f0: 2c6c 7972 6963 732c 6669 6775 7265 732c  ,lyrics,figures,
+0000e400: 6e6f 7465 733e 7b42 4f4d 5f55 5446 387d  notes>{BOM_UTF8}
+0000e410: 2f2e 2a0a 0a20 2020 2023 206c 6578 6572  /.*..    # lexer
+0000e420: 2e6c 6c3a 3231 300a 2020 2020 2320 3c49  .ll:210.    # <I
+0000e430: 4e49 5449 414c 2c63 686f 7264 732c 6669  NITIAL,chords,fi
+0000e440: 6775 7265 732c 696e 636c 2c6c 7972 6963  gures,incl,lyric
+0000e450: 732c 6d61 726b 7570 2c6e 6f74 6573 3e22  s,markup,notes>"
+0000e460: 257b 220a 2020 2020 6465 6620 745f 494e  %{".    def t_IN
+0000e470: 4954 4941 4c5f 6d61 726b 7570 5f6e 6f74  ITIAL_markup_not
+0000e480: 6573 5f32 3130 2873 656c 662c 2074 293a  es_210(self, t):
+0000e490: 0a20 2020 2020 2020 2072 2225 7b22 0a20  .        r"%{". 
+0000e4a0: 2020 2020 2020 2074 2e6c 6578 6572 2e70         t.lexer.p
+0000e4b0: 7573 685f 7374 6174 6528 226c 6f6e 6763  ush_state("longc
+0000e4c0: 6f6d 6d65 6e74 2229 0a20 2020 2020 2020  omment").       
+0000e4d0: 2070 6173 730a 0a20 2020 2023 206c 6578   pass..    # lex
+0000e4e0: 6572 2e6c 6c3a 3231 340a 2020 2020 2320  er.ll:214.    # 
+0000e4f0: 3c49 4e49 5449 414c 2c63 686f 7264 732c  <INITIAL,chords,
+0000e500: 6669 6775 7265 732c 696e 636c 2c6c 7972  figures,incl,lyr
+0000e510: 6963 732c 6d61 726b 7570 2c6e 6f74 6573  ics,markup,notes
+0000e520: 3e25 5b5e 7b5c 6e5c 725d 5b5e 5c6e 5c72  >%[^{\n\r][^\n\r
+0000e530: 5d2a 5b5c 6e5c 725d 0a20 2020 2064 6566  ]*[\n\r].    def
+0000e540: 2074 5f49 4e49 5449 414c 5f6d 6172 6b75   t_INITIAL_marku
+0000e550: 705f 6e6f 7465 735f 3231 3428 7365 6c66  p_notes_214(self
+0000e560: 2c20 7429 3a0a 2020 2020 2020 2020 7222  , t):.        r"
+0000e570: 255b 5e7b 5c6e 5c72 5d5b 5e5c 6e5c 725d  %[^{\n\r][^\n\r]
+0000e580: 2a5b 5c6e 5c72 5d22 0a20 2020 2020 2020  *[\n\r]".       
+0000e590: 2070 6173 730a 0a20 2020 2064 6566 2074   pass..    def t
+0000e5a0: 5f49 4e49 5449 414c 5f6d 6172 6b75 705f  _INITIAL_markup_
+0000e5b0: 6e6f 7465 735f 3231 345f 454f 4628 7365  notes_214_EOF(se
+0000e5c0: 6c66 2c20 7429 3a0a 2020 2020 2020 2020  lf, t):.        
+0000e5d0: 7222 255b 5e7b 5c6e 5c72 5d5b 5e5c 6e5c  r"%[^{\n\r][^\n\
+0000e5e0: 725d 2a24 220a 2020 2020 2020 2020 7061  r]*$".        pa
+0000e5f0: 7373 0a0a 2020 2020 2320 6c65 7865 722e  ss..    # lexer.
+0000e600: 6c6c 3a32 3136 0a20 2020 2023 203c 494e  ll:216.    # <IN
+0000e610: 4954 4941 4c2c 6368 6f72 6473 2c66 6967  ITIAL,chords,fig
+0000e620: 7572 6573 2c69 6e63 6c2c 6c79 7269 6373  ures,incl,lyrics
+0000e630: 2c6d 6172 6b75 702c 6e6f 7465 733e 255b  ,markup,notes>%[
+0000e640: 5e7b 5c6e 5c72 5d0a 2020 2020 6465 6620  ^{\n\r].    def 
+0000e650: 745f 494e 4954 4941 4c5f 6d61 726b 7570  t_INITIAL_markup
+0000e660: 5f6e 6f74 6573 5f32 3136 2873 656c 662c  _notes_216(self,
+0000e670: 2074 293a 0a20 2020 2020 2020 2072 2225   t):.        r"%
+0000e680: 5b5e 7b5c 6e5c 725d 220a 2020 2020 2020  [^{\n\r]".      
+0000e690: 2020 7061 7373 0a0a 2020 2020 2320 6c65    pass..    # le
+0000e6a0: 7865 722e 6c6c 3a32 3138 0a20 2020 2023  xer.ll:218.    #
+0000e6b0: 203c 494e 4954 4941 4c2c 6368 6f72 6473   <INITIAL,chords
+0000e6c0: 2c66 6967 7572 6573 2c69 6e63 6c2c 6c79  ,figures,incl,ly
+0000e6d0: 7269 6373 2c6d 6172 6b75 702c 6e6f 7465  rics,markup,note
+0000e6e0: 733e 255b 5c6e 5c72 5d0a 2020 2020 6465  s>%[\n\r].    de
+0000e6f0: 6620 745f 494e 4954 4941 4c5f 6d61 726b  f t_INITIAL_mark
+0000e700: 7570 5f6e 6f74 6573 5f32 3138 2873 656c  up_notes_218(sel
+0000e710: 662c 2074 293a 0a20 2020 2020 2020 2072  f, t):.        r
+0000e720: 2225 5b5c 6e5c 725d 220a 2020 2020 2020  "%[\n\r]".      
+0000e730: 2020 7061 7373 0a0a 2020 2020 2320 6c65    pass..    # le
+0000e740: 7865 722e 6c6c 3a32 3230 0a20 2020 2023  xer.ll:220.    #
+0000e750: 203c 494e 4954 4941 4c2c 6368 6f72 6473   <INITIAL,chords
+0000e760: 2c66 6967 7572 6573 2c69 6e63 6c2c 6c79  ,figures,incl,ly
+0000e770: 7269 6373 2c6d 6172 6b75 702c 6e6f 7465  rics,markup,note
+0000e780: 733e 255b 5e7b 5c6e 5c72 5d5b 5e5c 6e5c  s>%[^{\n\r][^\n\
+0000e790: 725d 2a0a 2020 2020 6465 6620 745f 494e  r]*.    def t_IN
+0000e7a0: 4954 4941 4c5f 6d61 726b 7570 5f6e 6f74  ITIAL_markup_not
+0000e7b0: 6573 5f32 3230 2873 656c 662c 2074 293a  es_220(self, t):
+0000e7c0: 0a20 2020 2020 2020 2072 2225 5b5e 7b5c  .        r"%[^{\
+0000e7d0: 6e5c 725d 5b5e 5c6e 5c72 5d2a 220a 2020  n\r][^\n\r]*".  
+0000e7e0: 2020 2020 2020 7061 7373 0a0a 2020 2020        pass..    
+0000e7f0: 2320 6c65 7865 722e 6c6c 3a32 3232 0a20  # lexer.ll:222. 
+0000e800: 2020 2023 203c 494e 4954 4941 4c2c 6368     # <INITIAL,ch
+0000e810: 6f72 6473 2c66 6967 7572 6573 2c69 6e63  ords,figures,inc
+0000e820: 6c2c 6c79 7269 6373 2c6d 6172 6b75 702c  l,lyrics,markup,
+0000e830: 6e6f 7465 733e 7b57 4849 5445 7d2b 0a20  notes>{WHITE}+. 
+0000e840: 2020 2064 6566 2074 5f49 4e49 5449 414c     def t_INITIAL
+0000e850: 5f6d 6172 6b75 705f 6e6f 7465 735f 3232  _markup_notes_22
+0000e860: 3228 7365 6c66 2c20 7429 3a0a 2020 2020  2(self, t):.    
+0000e870: 2020 2020 225b 205c 6e5c 745c 665c 725d      "[ \n\t\f\r]
+0000e880: 220a 2020 2020 2020 2020 7061 7373 0a0a  ".        pass..
+0000e890: 2020 2020 2320 6c65 7865 722e 6c6c 3a32      # lexer.ll:2
+0000e8a0: 3237 0a20 2020 2023 203c 494e 4954 4941  27.    # <INITIA
+0000e8b0: 4c2c 6e6f 7465 732c 6669 6775 7265 732c  L,notes,figures,
+0000e8c0: 6368 6f72 6473 2c6d 6172 6b75 703e 5c22  chords,markup>\"
+0000e8d0: 0a20 2020 2064 6566 2074 5f49 4e49 5449  .    def t_INITI
+0000e8e0: 414c 5f6d 6172 6b75 705f 6e6f 7465 735f  AL_markup_notes_
+0000e8f0: 3232 3728 7365 6c66 2c20 7429 3a0a 2020  227(self, t):.  
+0000e900: 2020 2020 2020 7222 5c22 2022 0a20 2020        r"\" ".   
+0000e910: 2020 2020 2074 2e6c 6578 6572 2e70 7573       t.lexer.pus
+0000e920: 685f 7374 6174 6528 2271 756f 7465 2229  h_state("quote")
+0000e930: 0a20 2020 2020 2020 2073 656c 662e 7374  .        self.st
+0000e940: 7269 6e67 5f61 6363 756d 756c 6174 6f72  ring_accumulator
+0000e950: 203d 2022 220a 2020 2020 2020 2020 7061   = "".        pa
+0000e960: 7373 0a0a 2020 2020 2320 6c65 7865 722e  ss..    # lexer.
+0000e970: 6c6c 3a32 3333 0a20 2020 2023 203c 494e  ll:233.    # <IN
+0000e980: 4954 4941 4c2c 6368 6f72 6473 2c6c 7972  ITIAL,chords,lyr
+0000e990: 6963 732c 6e6f 7465 732c 6669 6775 7265  ics,notes,figure
+0000e9a0: 733e 5c5c 7665 7273 696f 6e7b 5748 4954  s>\\version{WHIT
+0000e9b0: 457d 2a0a 2020 2020 6465 6620 745f 494e  E}*.    def t_IN
+0000e9c0: 4954 4941 4c5f 6e6f 7465 735f 3233 3328  ITIAL_notes_233(
+0000e9d0: 7365 6c66 2c20 7429 3a0a 2020 2020 2020  self, t):.      
+0000e9e0: 2020 7222 5c5c 7665 7273 696f 6e5b 205c    r"\\version[ \
+0000e9f0: 6e5c 745c 665c 725d 2a22 0a20 2020 2020  n\t\f\r]*".     
+0000ea00: 2020 2074 2e6c 6578 6572 2e70 7573 685f     t.lexer.push_
+0000ea10: 7374 6174 6528 2276 6572 7369 6f6e 2229  state("version")
+0000ea20: 0a20 2020 2020 2020 2070 6173 730a 0a20  .        pass.. 
+0000ea30: 2020 2023 206c 6578 6572 2e6c 6c3a 3233     # lexer.ll:23
+0000ea40: 360a 2020 2020 2320 3c49 4e49 5449 414c  6.    # <INITIAL
+0000ea50: 2c63 686f 7264 732c 6c79 7269 6373 2c6e  ,chords,lyrics,n
+0000ea60: 6f74 6573 2c66 6967 7572 6573 3e5c 5c73  otes,figures>\\s
+0000ea70: 6f75 7263 6566 696c 656e 616d 657b 5748  ourcefilename{WH
+0000ea80: 4954 457d 2a0a 0a20 2020 2023 206c 6578  ITE}*..    # lex
+0000ea90: 6572 2e6c 6c3a 3233 390a 2020 2020 2320  er.ll:239.    # 
+0000eaa0: 3c49 4e49 5449 414c 2c63 686f 7264 732c  <INITIAL,chords,
+0000eab0: 6c79 7269 6373 2c6e 6f74 6573 2c66 6967  lyrics,notes,fig
+0000eac0: 7572 6573 3e5c 5c73 6f75 7263 6566 696c  ures>\\sourcefil
+0000ead0: 656c 696e 657b 5748 4954 457d 2a0a 0a20  eline{WHITE}*.. 
+0000eae0: 2020 2023 206c 6578 6572 2e6c 6c3a 3234     # lexer.ll:24
+0000eaf0: 320a 2020 2020 2320 3c76 6572 7369 6f6e  2.    # <version
+0000eb00: 3e5c 225b 5e22 5d2a 5c22 0a20 2020 2064  >\"[^"]*\".    d
+0000eb10: 6566 2074 5f76 6572 7369 6f6e 5f32 3432  ef t_version_242
+0000eb20: 2873 656c 662c 2074 293a 0a20 2020 2020  (self, t):.     
+0000eb30: 2020 2072 275c 225b 5e22 5d2a 5c22 270a     r'\"[^"]*\"'.
+0000eb40: 2020 2020 2020 2020 742e 6c65 7865 722e          t.lexer.
+0000eb50: 706f 705f 7374 6174 6528 290a 2020 2020  pop_state().    
+0000eb60: 2020 2020 7061 7373 0a0a 2020 2020 2320      pass..    # 
+0000eb70: 6c65 7865 722e 6c6c 3a32 3536 0a20 2020  lexer.ll:256.   
+0000eb80: 2023 203c 736f 7572 6365 6669 6c65 6e61   # <sourcefilena
+0000eb90: 6d65 3e5c 225b 5e22 5d2a 5c22 0a0a 2020  me>\"[^"]*\"..  
+0000eba0: 2020 2320 6c65 7865 722e 6c6c 3a32 3730    # lexer.ll:270
+0000ebb0: 0a20 2020 2023 203c 736f 7572 6365 6669  .    # <sourcefi
+0000ebc0: 6c65 6c69 6e65 3e7b 494e 547d 0a0a 2020  leline>{INT}..  
+0000ebd0: 2020 2320 6c65 7865 722e 6c6c 3a32 3738    # lexer.ll:278
+0000ebe0: 0a20 2020 2023 203c 7665 7273 696f 6e3e  .    # <version>
+0000ebf0: 7b41 4e59 5f43 4841 527d 0a20 2020 2040  {ANY_CHAR}.    @
+0000ec00: 6c65 782e 544f 4b45 4e28 414e 595f 4348  lex.TOKEN(ANY_CH
+0000ec10: 4152 290a 2020 2020 6465 6620 745f 7665  AR).    def t_ve
+0000ec20: 7273 696f 6e5f 3237 3828 7365 6c66 2c20  rsion_278(self, 
+0000ec30: 7429 3a0a 2020 2020 2020 2020 7072 696e  t):.        prin
+0000ec40: 7428 2822 4c69 6c79 506f 6e64 5061 7273  t(("LilyPondPars
+0000ec50: 6572 3a20 496c 6c65 6761 6c20 6368 6172  er: Illegal char
+0000ec60: 6163 7465 7220 2725 7327 2220 2520 742e  acter '%s'" % t.
+0000ec70: 7661 6c75 655b 305d 2929 0a20 2020 2020  value[0])).     
+0000ec80: 2020 2074 2e6c 6578 6572 2e73 6b69 7028     t.lexer.skip(
+0000ec90: 3129 0a0a 2020 2020 2320 6c65 7865 722e  1)..    # lexer.
+0000eca0: 6c6c 3a32 3832 0a20 2020 2023 203c 736f  ll:282.    # <so
+0000ecb0: 7572 6365 6669 6c65 6e61 6d65 3e7b 414e  urcefilename>{AN
+0000ecc0: 595f 4348 4152 7d0a 0a20 2020 2023 206c  Y_CHAR}..    # l
+0000ecd0: 6578 6572 2e6c 6c3a 3238 360a 2020 2020  exer.ll:286.    
+0000ece0: 2320 3c73 6f75 7263 6566 696c 656c 696e  # <sourcefilelin
+0000ecf0: 653e 7b41 4e59 5f43 4841 527d 0a0a 2020  e>{ANY_CHAR}..  
+0000ed00: 2020 2320 6c65 7865 722e 6c6c 3a32 3936    # lexer.ll:296
+0000ed10: 0a20 2020 2023 203c 6c6f 6e67 636f 6d6d  .    # <longcomm
+0000ed20: 656e 743e 2225 222b 227d 220a 2020 2020  ent>"%"+"}".    
+0000ed30: 6465 6620 745f 6c6f 6e67 636f 6d6d 656e  def t_longcommen
+0000ed40: 745f 3239 3628 7365 6c66 2c20 7429 3a0a  t_296(self, t):.
+0000ed50: 2020 2020 2020 2020 7222 257d 220a 2020          r"%}".  
+0000ed60: 2020 2020 2020 742e 6c65 7865 722e 706f        t.lexer.po
+0000ed70: 705f 7374 6174 6528 290a 2020 2020 2020  p_state().      
+0000ed80: 2020 7061 7373 0a0a 2020 2020 2320 6c65    pass..    # le
+0000ed90: 7865 722e 6c6c 3a32 3931 0a20 2020 2023  xer.ll:291.    #
+0000eda0: 203c 6c6f 6e67 636f 6d6d 656e 743e 5b5e   <longcomment>[^
+0000edb0: 5c25 5d2a 0a20 2020 2064 6566 2074 5f6c  \%]*.    def t_l
+0000edc0: 6f6e 6763 6f6d 6d65 6e74 5f32 3931 2873  ongcomment_291(s
+0000edd0: 656c 662c 2074 293a 0a20 2020 2020 2020  elf, t):.       
+0000ede0: 2072 225b 5e25 5d2b 220a 2020 2020 2020   r"[^%]+".      
+0000edf0: 2020 7061 7373 0a0a 2020 2020 2320 6c65    pass..    # le
+0000ee00: 7865 722e 6c6c 3a32 3933 0a20 2020 2023  xer.ll:293.    #
+0000ee10: 203c 6c6f 6e67 636f 6d6d 656e 743e 5c25   <longcomment>\%
+0000ee20: 2a5b 5e7d 255d 2a0a 2020 2020 6465 6620  *[^}%]*.    def 
+0000ee30: 745f 6c6f 6e67 636f 6d6d 656e 745f 3239  t_longcomment_29
+0000ee40: 3328 7365 6c66 2c20 7429 3a0a 2020 2020  3(self, t):.    
+0000ee50: 2020 2020 7222 252b 5b5e 7d25 5d2a 220a      r"%+[^}%]*".
+0000ee60: 2020 2020 2020 2020 7061 7373 0a0a 2020          pass..  
+0000ee70: 2020 2320 6c65 7865 722e 6c6c 3a33 3032    # lexer.ll:302
+0000ee80: 0a20 2020 2023 203c 494e 4954 4941 4c2c  .    # <INITIAL,
+0000ee90: 6368 6f72 6473 2c6c 7972 6963 732c 6e6f  chords,lyrics,no
+0000eea0: 7465 732c 6669 6775 7265 733e 5c5c 6d61  tes,figures>\\ma
+0000eeb0: 696e 696e 7075 740a 0a20 2020 2023 206c  ininput..    # l
+0000eec0: 6578 6572 2e6c 6c3a 3331 320a 2020 2020  exer.ll:312.    
+0000eed0: 2320 3c49 4e49 5449 414c 2c63 686f 7264  # <INITIAL,chord
+0000eee0: 732c 6c79 7269 6373 2c66 6967 7572 6573  s,lyrics,figures
+0000eef0: 2c6e 6f74 6573 3e5c 5c69 6e63 6c75 6465  ,notes>\\include
+0000ef00: 0a0a 2020 2020 2320 6c65 7865 722e 6c6c  ..    # lexer.ll
+0000ef10: 3a33 3135 0a20 2020 2023 203c 696e 636c  :315.    # <incl
+0000ef20: 3e5c 225b 5e22 5d2a 5c22 0a0a 2020 2020  >\"[^"]*\"..    
+0000ef30: 2320 6c65 7865 722e 6c6c 3a33 3232 0a20  # lexer.ll:322. 
+0000ef40: 2020 2023 203c 696e 636c 3e5c 5c7b 424c     # <incl>\\{BL
+0000ef50: 4143 4b7d 2a7b 5748 4954 457d 3f0a 0a20  ACK}*{WHITE}?.. 
+0000ef60: 2020 2023 206c 6578 6572 2e6c 6c3a 3334     # lexer.ll:34
+0000ef70: 310a 2020 2020 2320 3c69 6e63 6c2c 7665  1.    # <incl,ve
+0000ef80: 7273 696f 6e2c 736f 7572 6365 6669 6c65  rsion,sourcefile
+0000ef90: 6e61 6d65 3e5c 225b 5e22 5d2a 0a20 2020  name>\"[^"]*.   
+0000efa0: 2064 6566 2074 5f76 6572 7369 6f6e 5f33   def t_version_3
+0000efb0: 3431 2873 656c 662c 2074 293a 0a20 2020  41(self, t):.   
+0000efc0: 2020 2020 2072 2722 5b5e 225d 2a27 0a20       r'"[^"]*'. 
+0000efd0: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
+0000efe0: 6570 7469 6f6e 2866 2265 6e64 2071 756f  eption(f"end quo
+0000eff0: 7465 206d 6973 7369 6e67 3a20 7b74 2172  te missing: {t!r
+0000f000: 7d2e 2229 0a0a 2020 2020 2320 6c65 7865  }.")..    # lexe
+0000f010: 722e 6c6c 3a33 3435 0a20 2020 2023 203c  r.ll:345.    # <
+0000f020: 6368 6f72 6473 2c6e 6f74 6573 2c66 6967  chords,notes,fig
+0000f030: 7572 6573 3e7b 5245 5354 4e41 4d45 7d0a  ures>{RESTNAME}.
+0000f040: 2020 2020 2320 2020 2040 6c65 782e 746f      #    @lex.to
+0000f050: 6b65 6e2e 544f 4b45 4e28 5245 5354 4e41  ken.TOKEN(RESTNA
+0000f060: 4d45 290a 2020 2020 2320 2020 2064 6566  ME).    #    def
+0000f070: 2074 5f6e 6f74 6573 5f33 3435 2873 656c   t_notes_345(sel
+0000f080: 662c 2074 293a 0a20 2020 2023 2020 2020  f, t):.    #    
+0000f090: 2020 2020 742e 7479 7065 203d 2027 5245      t.type = 'RE
+0000f0a0: 5354 4e41 4d45 270a 2020 2020 2320 2020  STNAME'.    #   
+0000f0b0: 2020 2020 2072 6574 7572 6e20 740a 0a20       return t.. 
+0000f0c0: 2020 2023 206c 6578 6572 2e6c 6c3a 3335     # lexer.ll:35
+0000f0d0: 300a 2020 2020 2320 3c63 686f 7264 732c  0.    # <chords,
+0000f0e0: 6e6f 7465 732c 6669 6775 7265 733e 520a  notes,figures>R.
+0000f0f0: 2020 2020 2320 2020 2064 6566 2074 5f6e      #    def t_n
+0000f100: 6f74 6573 5f33 3530 2873 656c 662c 2074  otes_350(self, t
+0000f110: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
+0000f120: 2752 270a 2020 2020 2320 2020 2020 2020  'R'.    #       
+0000f130: 2074 2e74 7970 6520 3d20 274d 554c 5449   t.type = 'MULTI
+0000f140: 5f4d 4541 5355 5245 5f52 4553 5427 0a20  _MEASURE_REST'. 
+0000f150: 2020 2023 2020 2020 2020 2020 7265 7475     #        retu
+0000f160: 726e 2074 0a0a 2020 2020 2320 6465 6620  rn t..    # def 
+0000f170: 745f 494e 4954 4941 4c5f 6d61 726b 7570  t_INITIAL_markup
+0000f180: 5f6e 6f74 6573 5f33 3533 5f62 6f6f 6c65  _notes_353_boole
+0000f190: 616e 2873 656c 662c 2074 293a 0a20 2020  an(self, t):.   
+0000f1a0: 2023 2020 2020 275c 235c 2328 747c 6629   #    '\#\#(t|f)
+0000f1b0: 270a 2020 2020 2320 2020 2074 2e74 7970  '.    #    t.typ
+0000f1c0: 6520 3d20 2753 434d 5f54 4f4b 454e 270a  e = 'SCM_TOKEN'.
+0000f1d0: 2020 2020 2320 2020 2069 6620 742e 7661      #    if t.va
+0000f1e0: 6c75 655b 325d 203d 3d20 2774 273a 0a20  lue[2] == 't':. 
+0000f1f0: 2020 2023 2020 2020 2020 2020 742e 7661     #        t.va
+0000f200: 6c75 6520 3d20 5472 7565 0a20 2020 2023  lue = True.    #
+0000f210: 2020 2020 656c 7365 3a0a 2020 2020 2320      else:.    # 
+0000f220: 2020 2020 2020 2074 2e76 616c 7565 203d         t.value =
+0000f230: 2046 616c 7365 0a20 2020 2023 2020 2020   False.    #    
+0000f240: 7265 7475 726e 2074 0a0a 2020 2020 2320  return t..    # 
+0000f250: 406c 6578 2e54 4f4b 454e 2822 5c23 2725  @lex.TOKEN("\#'%
+0000f260: 7322 2025 2044 4153 4845 445f 574f 5244  s" % DASHED_WORD
+0000f270: 290a 2020 2020 2320 6465 6620 745f 494e  ).    # def t_IN
+0000f280: 4954 4941 4c5f 6d61 726b 7570 5f6e 6f74  ITIAL_markup_not
+0000f290: 6573 5f33 3533 5f69 6465 6e74 6966 6965  es_353_identifie
+0000f2a0: 7228 7365 6c66 2c20 7429 3a0a 2020 2020  r(self, t):.    
+0000f2b0: 2320 2020 2074 2e74 7970 6520 3d20 2753  #    t.type = 'S
+0000f2c0: 434d 5f49 4445 4e54 4946 4945 5227 0a20  CM_IDENTIFIER'. 
+0000f2d0: 2020 2023 2020 2020 742e 7661 6c75 6520     #    t.value 
+0000f2e0: 3d20 742e 7661 6c75 655b 323a 5d0a 2020  = t.value[2:].  
+0000f2f0: 2020 2320 2020 2072 6574 7572 6e20 740a    #    return t.
+0000f300: 0a20 2020 2023 206c 6578 6572 2e6c 6c3a  .    # lexer.ll:
+0000f310: 3335 330a 2020 2020 2320 3c49 4e49 5449  353.    # <INITI
+0000f320: 414c 2c63 686f 7264 732c 6669 6775 7265  AL,chords,figure
+0000f330: 732c 6c79 7269 6373 2c6d 6172 6b75 702c  s,lyrics,markup,
+0000f340: 6e6f 7465 733e 230a 2020 2020 6465 6620  notes>#.    def 
+0000f350: 745f 494e 4954 4941 4c5f 6d61 726b 7570  t_INITIAL_markup
+0000f360: 5f6e 6f74 6573 5f33 3533 2873 656c 662c  _notes_353(self,
+0000f370: 2074 293a 0a20 2020 2020 2020 2072 225c   t):.        r"\
+0000f380: 2322 0a20 2020 2020 2020 2023 2074 2e74  #".        # t.t
+0000f390: 7970 6520 3d20 2753 4348 454d 455f 5354  ype = 'SCHEME_ST
+0000f3a0: 4152 5427 0a20 2020 2020 2020 2023 2074  ART'.        # t
+0000f3b0: 2e6c 6578 6572 2e70 7573 685f 7374 6174  .lexer.push_stat
+0000f3c0: 6528 2749 4e49 5449 414c 2729 0a20 2020  e('INITIAL').   
+0000f3d0: 2020 2020 2073 6368 656d 655f 7061 7273       scheme_pars
+0000f3e0: 6572 203d 2053 6368 656d 6550 6172 7365  er = SchemeParse
+0000f3f0: 7228 6465 6275 673d 4661 6c73 6529 0a20  r(debug=False). 
+0000f400: 2020 2020 2020 2069 6e70 7574 5f73 7472         input_str
+0000f410: 696e 6720 3d20 742e 6c65 7865 722e 6c65  ing = t.lexer.le
+0000f420: 7864 6174 615b 742e 6c65 7870 6f73 202b  xdata[t.lexpos +
+0000f430: 2031 203a 5d0a 2020 2020 2020 2020 2320   1 :].        # 
+0000f440: 7072 696e 7420 2750 5245 5041 5253 4527  print 'PREPARSE'
+0000f450: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+0000f460: 2020 2020 2020 2020 2020 7363 6865 6d65            scheme
+0000f470: 5f70 6172 7365 7228 696e 7075 745f 7374  _parser(input_st
+0000f480: 7269 6e67 290a 2020 2020 2020 2020 6578  ring).        ex
+0000f490: 6365 7074 205f 6578 6365 7074 696f 6e73  cept _exceptions
+0000f4a0: 2e53 6368 656d 6550 6172 7365 7246 696e  .SchemeParserFin
+0000f4b0: 6973 6865 6445 7272 6f72 3a0a 2020 2020  ishedError:.    
+0000f4c0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+0000f4d0: 2073 6368 656d 655f 7061 7273 6572 2e72   scheme_parser.r
+0000f4e0: 6573 756c 740a 2020 2020 2020 2020 2020  esult.          
+0000f4f0: 2020 742e 7661 6c75 6520 3d20 7265 7375    t.value = resu
+0000f500: 6c74 0a20 2020 2020 2020 2020 2020 2074  lt.            t
+0000f510: 2e74 7970 6520 3d20 2253 434d 5f54 4f4b  .type = "SCM_TOK
+0000f520: 454e 220a 2020 2020 2020 2020 2020 2020  EN".            
+0000f530: 2320 6966 2069 7369 6e73 7461 6e63 6528  # if isinstance(
+0000f540: 7265 7375 6c74 2c20 7374 7229 3a0a 2020  result, str):.  
+0000f550: 2020 2020 2020 2020 2020 2320 2020 2074            #    t
+0000f560: 2e74 7970 6520 3d20 2753 5452 494e 4727  .type = 'STRING'
+0000f570: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0000f580: 2020 6966 2074 2e76 616c 7565 2e66 696e    if t.value.fin
+0000f590: 6428 2720 2729 2021 3d20 2d31 3a0a 2020  d(' ') != -1:.  
+0000f5a0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0000f5b0: 2020 2074 2e76 616c 7565 203d 2066 2722     t.value = f'"
+0000f5c0: 7b74 2e76 616c 7565 7d22 270a 2020 2020  {t.value}"'.    
+0000f5d0: 2020 2020 2020 2020 2320 656c 7365 3a0a          # else:.
+0000f5e0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0000f5f0: 2074 2e74 7970 6520 3d20 2753 434d 5f54   t.type = 'SCM_T
+0000f600: 4f4b 454e 270a 2020 2020 2020 2020 2020  OKEN'.          
+0000f610: 2020 742e 6c65 7865 722e 736b 6970 2873    t.lexer.skip(s
+0000f620: 6368 656d 655f 7061 7273 6572 2e63 7572  cheme_parser.cur
+0000f630: 736f 725f 656e 6420 2b20 3129 0a20 2020  sor_end + 1).   
+0000f640: 2020 2020 2072 6574 7572 6e20 740a 0a20       return t.. 
+0000f650: 2020 2023 206c 6578 6572 2e6c 6c3a 3338     # lexer.ll:38
+0000f660: 370a 2020 2020 2320 3c49 4e49 5449 414c  7.    # <INITIAL
+0000f670: 2c6e 6f74 6573 2c6c 7972 6963 733e 5c3c  ,notes,lyrics>\<
+0000f680: 5c3c 0a20 2020 2064 6566 2074 5f49 4e49  \<.    def t_INI
+0000f690: 5449 414c 5f6e 6f74 6573 5f33 3837 2873  TIAL_notes_387(s
+0000f6a0: 656c 662c 2074 293a 0a20 2020 2020 2020  elf, t):.       
+0000f6b0: 2072 225c 3c5c 3c22 0a20 2020 2020 2020   r"\<\<".       
+0000f6c0: 2074 2e74 7970 6520 3d20 2244 4f55 424c   t.type = "DOUBL
+0000f6d0: 455f 414e 474c 455f 4f50 454e 220a 2020  E_ANGLE_OPEN".  
+0000f6e0: 2020 2020 2020 7265 7475 726e 2074 0a0a        return t..
+0000f6f0: 2020 2020 2320 6c65 7865 722e 6c6c 3a33      # lexer.ll:3
+0000f700: 3930 0a20 2020 2023 203c 494e 4954 4941  90.    # <INITIA
+0000f710: 4c2c 6e6f 7465 732c 6c79 7269 6373 3e5c  L,notes,lyrics>\
+0000f720: 3e5c 3e0a 2020 2020 6465 6620 745f 494e  >\>.    def t_IN
+0000f730: 4954 4941 4c5f 6e6f 7465 735f 3339 3028  ITIAL_notes_390(
+0000f740: 7365 6c66 2c20 7429 3a0a 2020 2020 2020  self, t):.      
+0000f750: 2020 7222 5c3e 5c3e 220a 2020 2020 2020    r"\>\>".      
+0000f760: 2020 742e 7479 7065 203d 2022 444f 5542    t.type = "DOUB
+0000f770: 4c45 5f41 4e47 4c45 5f43 4c4f 5345 220a  LE_ANGLE_CLOSE".
+0000f780: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+0000f790: 0a0a 2020 2020 2320 6c65 7865 722e 6c6c  ..    # lexer.ll
+0000f7a0: 3a33 3936 0a20 2020 2023 203c 494e 4954  :396.    # <INIT
+0000f7b0: 4941 4c2c 6e6f 7465 733e 5c3c 0a20 2020  IAL,notes>\<.   
+0000f7c0: 2064 6566 2074 5f49 4e49 5449 414c 5f6e   def t_INITIAL_n
+0000f7d0: 6f74 6573 5f33 3936 2873 656c 662c 2074  otes_396(self, t
+0000f7e0: 293a 0a20 2020 2020 2020 2072 225c 3c22  ):.        r"\<"
+0000f7f0: 0a20 2020 2020 2020 2074 2e74 7970 6520  .        t.type 
+0000f800: 3d20 2241 4e47 4c45 5f4f 5045 4e22 0a20  = "ANGLE_OPEN". 
+0000f810: 2020 2020 2020 2072 6574 7572 6e20 740a         return t.
+0000f820: 0a20 2020 2023 206c 6578 6572 2e6c 6c3a  .    # lexer.ll:
+0000f830: 3339 390a 2020 2020 2320 3c49 4e49 5449  399.    # <INITI
+0000f840: 414c 2c6e 6f74 6573 3e5c 3e0a 2020 2020  AL,notes>\>.    
+0000f850: 6465 6620 745f 494e 4954 4941 4c5f 6e6f  def t_INITIAL_no
+0000f860: 7465 735f 3339 3928 7365 6c66 2c20 7429  tes_399(self, t)
+0000f870: 3a0a 2020 2020 2020 2020 7222 5c3e 220a  :.        r"\>".
+0000f880: 2020 2020 2020 2020 742e 7479 7065 203d          t.type =
+0000f890: 2022 414e 474c 455f 434c 4f53 4522 0a20   "ANGLE_CLOSE". 
+0000f8a0: 2020 2020 2020 2072 6574 7572 6e20 740a         return t.
+0000f8b0: 0a20 2020 2023 206c 6578 6572 2e6c 6c3a  .    # lexer.ll:
+0000f8c0: 3430 350a 2020 2020 2320 3c66 6967 7572  405.    # <figur
+0000f8d0: 6573 3e5f 0a0a 2020 2020 2320 6c65 7865  es>_..    # lexe
+0000f8e0: 722e 6c6c 3a34 3038 0a20 2020 2023 203c  r.ll:408.    # <
+0000f8f0: 6669 6775 7265 733e 5c3e 0a0a 2020 2020  figures>\>..    
+0000f900: 2320 6c65 7865 722e 6c6c 3a34 3131 0a20  # lexer.ll:411. 
+0000f910: 2020 2023 203c 6669 6775 7265 733e 5c3c     # <figures>\<
+0000f920: 0a0a 2020 2020 2320 6c65 7865 722e 6c6c  ..    # lexer.ll
+0000f930: 3a34 3137 0a20 2020 2023 203c 6e6f 7465  :417.    # <note
+0000f940: 732c 6669 6775 7265 733e 7b41 4c50 4841  s,figures>{ALPHA
+0000f950: 574f 5244 7d0a 2020 2020 406c 6578 2e54  WORD}.    @lex.T
+0000f960: 4f4b 454e 2841 4c50 4841 574f 5244 290a  OKEN(ALPHAWORD).
+0000f970: 2020 2020 6465 6620 745f 6e6f 7465 735f      def t_notes_
+0000f980: 3431 3728 7365 6c66 2c20 7429 3a0a 2020  417(self, t):.  
+0000f990: 2020 2020 2020 7069 7463 685f 6e61 6d65        pitch_name
+0000f9a0: 7320 3d20 7365 6c66 2e63 6c69 656e 742e  s = self.client.
+0000f9b0: 5f70 6974 6368 5f6e 616d 6573 0a20 2020  _pitch_names.   
+0000f9c0: 2020 2020 2076 616c 7565 203d 2074 2e76       value = t.v
+0000f9d0: 616c 7565 0a20 2020 2020 2020 2069 6620  alue.        if 
+0000f9e0: 7661 6c75 6520 696e 2070 6974 6368 5f6e  value in pitch_n
+0000f9f0: 616d 6573 3a0a 2020 2020 2020 2020 2020  ames:.          
+0000fa00: 2020 742e 7479 7065 203d 2022 4e4f 5445    t.type = "NOTE
+0000fa10: 4e41 4d45 5f50 4954 4348 220a 2020 2020  NAME_PITCH".    
+0000fa20: 2020 2020 2020 2020 742e 7661 6c75 6520          t.value 
+0000fa30: 3d20 5f70 6974 6368 2e4e 616d 6564 5069  = _pitch.NamedPi
+0000fa40: 7463 6843 6c61 7373 2870 6974 6368 5f6e  tchClass(pitch_n
+0000fa50: 616d 6573 5b74 2e76 616c 7565 5d29 0a20  ames[t.value]). 
+0000fa60: 2020 2020 2020 2065 6c69 6620 7661 6c75         elif valu
+0000fa70: 6520 696e 205f 6c79 636f 6e73 742e 6472  e in _lyconst.dr
+0000fa80: 756d 733a 0a20 2020 2020 2020 2020 2020  ums:.           
+0000fa90: 2074 2e74 7970 6520 3d20 224e 4f54 454e   t.type = "NOTEN
+0000faa0: 414d 455f 5049 5443 4822 0a20 2020 2020  AME_PITCH".     
+0000fab0: 2020 2020 2020 2074 2e76 616c 7565 203d         t.value =
+0000fac0: 205f 6c79 636f 6e73 742e 6472 756d 735b   _lyconst.drums[
+0000fad0: 7661 6c75 655d 0a20 2020 2020 2020 2065  value].        e
+0000fae0: 6c69 6620 7661 6c75 6520 696e 205b 2272  lif value in ["r
+0000faf0: 222c 2022 7322 5d3a 0a20 2020 2020 2020  ", "s"]:.       
+0000fb00: 2020 2020 2074 2e74 7970 6520 3d20 2252       t.type = "R
+0000fb10: 4553 544e 414d 4522 0a20 2020 2020 2020  ESTNAME".       
+0000fb20: 2065 6c69 6620 7661 6c75 6520 3d3d 2022   elif value == "
+0000fb30: 5222 3a0a 2020 2020 2020 2020 2020 2020  R":.            
+0000fb40: 742e 7479 7065 203d 2022 4d55 4c54 495f  t.type = "MULTI_
+0000fb50: 4d45 4153 5552 455f 5245 5354 220a 2020  MEASURE_REST".  
+0000fb60: 2020 2020 2020 656c 6966 2076 616c 7565        elif value
+0000fb70: 203d 3d20 2271 223a 0a20 2020 2020 2020   == "q":.       
+0000fb80: 2020 2020 2069 6620 7365 6c66 2e63 6c69       if self.cli
+0000fb90: 656e 742e 5f6c 6173 745f 6368 6f72 6420  ent._last_chord 
+0000fba0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0000fbb0: 2020 2020 2020 2020 2073 656c 662e 636c           self.cl
+0000fbc0: 6965 6e74 2e5f 6c61 7374 5f63 686f 7264  ient._last_chord
+0000fbd0: 203d 205f 7363 6f72 652e 4368 6f72 6428   = _score.Chord(
+0000fbe0: 5b22 6322 2c20 2267 222c 2022 6327 225d  ["c", "g", "c'"]
+0000fbf0: 2c20 2831 2c20 3429 290a 2020 2020 2020  , (1, 4)).      
+0000fc00: 2020 2020 2020 742e 7479 7065 203d 2022        t.type = "
+0000fc10: 4348 4f52 445f 5245 5045 5449 5449 4f4e  CHORD_REPETITION
+0000fc20: 220a 2020 2020 2020 2020 656c 7365 3a0a  ".        else:.
+0000fc30: 2020 2020 2020 2020 2020 2020 742e 7479              t.ty
+0000fc40: 7065 203d 2022 5354 5249 4e47 220a 2020  pe = "STRING".  
+0000fc50: 2020 2020 2020 7265 7475 726e 2074 0a0a        return t..
+0000fc60: 2020 2020 2320 6c65 7865 722e 6c6c 3a34      # lexer.ll:4
+0000fc70: 3231 0a20 2020 2023 203c 6e6f 7465 732c  21.    # <notes,
+0000fc80: 6669 6775 7265 733e 7b4e 4f54 4543 4f4d  figures>{NOTECOM
+0000fc90: 4d41 4e44 7d0a 2020 2020 406c 6578 2e54  MAND}.    @lex.T
+0000fca0: 4f4b 454e 284e 4f54 4543 4f4d 4d41 4e44  OKEN(NOTECOMMAND
+0000fcb0: 290a 2020 2020 6465 6620 745f 6e6f 7465  ).    def t_note
+0000fcc0: 735f 3432 3128 7365 6c66 2c20 7429 3a0a  s_421(self, t):.
+0000fcd0: 2020 2020 2020 2020 742e 7479 7065 203d          t.type =
+0000fce0: 2073 656c 662e 7363 616e 5f65 7363 6170   self.scan_escap
+0000fcf0: 6564 5f77 6f72 6428 7429 0a20 2020 2020  ed_word(t).     
+0000fd00: 2020 2072 6574 7572 6e20 740a 0a20 2020     return t..   
+0000fd10: 2023 206c 6578 6572 2e6c 6c3a 3432 340a   # lexer.ll:424.
+0000fd20: 2020 2020 2320 3c6e 6f74 6573 2c66 6967      # <notes,fig
+0000fd30: 7572 6573 3e7b 4652 4143 5449 4f4e 7d0a  ures>{FRACTION}.
+0000fd40: 2020 2020 406c 6578 2e54 4f4b 454e 2846      @lex.TOKEN(F
+0000fd50: 5241 4354 494f 4e29 0a20 2020 2064 6566  RACTION).    def
+0000fd60: 2074 5f6e 6f74 6573 5f34 3234 2873 656c   t_notes_424(sel
+0000fd70: 662c 2074 293a 0a20 2020 2020 2020 2074  f, t):.        t
+0000fd80: 2e74 7970 6520 3d20 2246 5241 4354 494f  .type = "FRACTIO
+0000fd90: 4e22 0a20 2020 2020 2020 2070 6172 7473  N".        parts
+0000fda0: 203d 2074 2e76 616c 7565 2e73 706c 6974   = t.value.split
+0000fdb0: 2822 2f22 290a 2020 2020 2020 2020 742e  ("/").        t.
+0000fdc0: 7661 6c75 6520 3d20 4c69 6c79 506f 6e64  value = LilyPond
+0000fdd0: 4672 6163 7469 6f6e 2869 6e74 2870 6172  Fraction(int(par
+0000fde0: 7473 5b30 5d29 2c20 696e 7428 7061 7274  ts[0]), int(part
+0000fdf0: 735b 315d 2929 0a20 2020 2020 2020 2072  s[1])).        r
+0000fe00: 6574 7572 6e20 740a 0a20 2020 2023 206c  eturn t..    # l
+0000fe10: 6578 6572 2e6c 6c3a 3432 380a 2020 2020  exer.ll:428.    
+0000fe20: 2320 3c6e 6f74 6573 2c66 6967 7572 6573  # <notes,figures
+0000fe30: 3e7b 554e 5349 474e 4544 7d2f 5c2f 7c7b  >{UNSIGNED}/\/|{
+0000fe40: 554e 5349 474e 4544 7d0a 2020 2020 2320  UNSIGNED}.    # 
+0000fe50: 406c 6578 2e54 4f4b 454e 2827 2573 2f5c  @lex.TOKEN('%s/\
+0000fe60: 2f7c 2573 2720 2520 2855 4e53 4947 4e45  /|%s' % (UNSIGNE
+0000fe70: 442c 2055 4e53 4947 4e45 4429 290a 2020  D, UNSIGNED)).  
+0000fe80: 2020 406c 6578 2e54 4f4b 454e 2872 2225    @lex.TOKEN(r"%
+0000fe90: 732f 5c2f 2220 2520 554e 5349 474e 4544  s/\/" % UNSIGNED
+0000fea0: 290a 2020 2020 6465 6620 745f 6e6f 7465  ).    def t_note
+0000feb0: 735f 3432 3828 7365 6c66 2c20 7429 3a0a  s_428(self, t):.
+0000fec0: 2020 2020 2020 2020 742e 7479 7065 203d          t.type =
+0000fed0: 2022 554e 5349 474e 4544 220a 2020 2020   "UNSIGNED".    
+0000fee0: 2020 2020 742e 7661 6c75 6520 3d20 696e      t.value = in
+0000fef0: 7428 742e 7661 6c75 6529 0a20 2020 2020  t(t.value).     
+0000ff00: 2020 2072 6574 7572 6e20 740a 0a20 2020     return t..   
+0000ff10: 2040 6c65 782e 544f 4b45 4e28 554e 5349   @lex.TOKEN(UNSI
+0000ff20: 474e 4544 290a 2020 2020 6465 6620 745f  GNED).    def t_
+0000ff30: 6e6f 7465 735f 3432 3862 2873 656c 662c  notes_428b(self,
+0000ff40: 2074 293a 0a20 2020 2020 2020 2074 2e74   t):.        t.t
+0000ff50: 7970 6520 3d20 2255 4e53 4947 4e45 4422  ype = "UNSIGNED"
+0000ff60: 0a20 2020 2020 2020 2074 2e76 616c 7565  .        t.value
+0000ff70: 203d 2069 6e74 2874 2e76 616c 7565 290a   = int(t.value).
+0000ff80: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+0000ff90: 0a0a 2020 2020 2320 6c65 7865 722e 6c6c  ..    # lexer.ll
+0000ffa0: 3a34 3333 0a20 2020 2023 203c 6e6f 7465  :433.    # <note
+0000ffb0: 732c 6669 6775 7265 733e 7b45 5f55 4e53  s,figures>{E_UNS
+0000ffc0: 4947 4e45 447d 0a20 2020 2040 6c65 782e  IGNED}.    @lex.
+0000ffd0: 544f 4b45 4e28 455f 554e 5349 474e 4544  TOKEN(E_UNSIGNED
+0000ffe0: 290a 2020 2020 6465 6620 745f 6e6f 7465  ).    def t_note
+0000fff0: 735f 3433 3328 7365 6c66 2c20 7429 3a0a  s_433(self, t):.
+00010000: 2020 2020 2020 2020 742e 7479 7065 203d          t.type =
+00010010: 2022 455f 554e 5349 474e 4544 220a 2020   "E_UNSIGNED".  
+00010020: 2020 2020 2020 742e 7661 6c75 6520 3d20        t.value = 
+00010030: 696e 7428 742e 7661 6c75 655b 313a 5d29  int(t.value[1:])
+00010040: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00010050: 740a 0a20 2020 2023 206c 6578 6572 2e6c  t..    # lexer.l
+00010060: 6c3a 3434 300a 2020 2020 2320 3c71 756f  l:440.    # <quo
+00010070: 7465 2c6c 7972 6963 5f71 756f 7465 3e5c  te,lyric_quote>\
+00010080: 5c7b 4553 4341 5045 447d 0a20 2020 2040  \{ESCAPED}.    @
+00010090: 6c65 782e 544f 4b45 4e28 225c 5c25 7322  lex.TOKEN("\\%s"
+000100a0: 2025 2045 5343 4150 4544 290a 2020 2020   % ESCAPED).    
+000100b0: 6465 6620 745f 7175 6f74 655f 3434 3028  def t_quote_440(
+000100c0: 7365 6c66 2c20 7429 3a0a 2020 2020 2020  self, t):.      
+000100d0: 2020 7365 6c66 2e73 7472 696e 675f 6163    self.string_ac
+000100e0: 6375 6d75 6c61 746f 7220 2b3d 2074 2e76  cumulator += t.v
+000100f0: 616c 7565 0a20 2020 2020 2020 2070 6173  alue.        pas
+00010100: 730a 0a20 2020 2064 6566 2074 5f71 756f  s..    def t_quo
+00010110: 7465 5f58 5858 2873 656c 662c 2074 293a  te_XXX(self, t):
+00010120: 0a20 2020 2020 2020 2072 275c 5c22 270a  .        r'\\"'.
+00010130: 2020 2020 2020 2020 7365 6c66 2e73 7472          self.str
+00010140: 696e 675f 6163 6375 6d75 6c61 746f 7220  ing_accumulator 
+00010150: 2b3d 2074 2e76 616c 7565 0a20 2020 2020  += t.value.     
+00010160: 2020 2070 6173 730a 0a20 2020 2023 206c     pass..    # l
+00010170: 6578 6572 2e6c 6c3a 3434 330a 2020 2020  exer.ll:443.    
+00010180: 2320 3c71 756f 7465 2c6c 7972 6963 5f71  # <quote,lyric_q
+00010190: 756f 7465 3e5b 5e5c 5c22 225d 2b0a 2020  uote>[^\\""]+.  
+000101a0: 2020 6465 6620 745f 7175 6f74 655f 3434    def t_quote_44
+000101b0: 3328 7365 6c66 2c20 7429 3a0a 2020 2020  3(self, t):.    
+000101c0: 2020 2020 7227 5b5e 5c5c 2222 5d2b 270a      r'[^\\""]+'.
+000101d0: 2020 2020 2020 2020 7365 6c66 2e73 7472          self.str
+000101e0: 696e 675f 6163 6375 6d75 6c61 746f 7220  ing_accumulator 
+000101f0: 2b3d 2074 2e76 616c 7565 0a20 2020 2020  += t.value.     
+00010200: 2020 2070 6173 730a 0a20 2020 2023 206c     pass..    # l
+00010210: 6578 6572 2e6c 6c3a 3434 360a 2020 2020  exer.ll:446.    
+00010220: 2320 3c71 756f 7465 2c6c 7972 6963 5f71  # <quote,lyric_q
+00010230: 756f 7465 3e5c 220a 2020 2020 6465 6620  uote>\".    def 
+00010240: 745f 7175 6f74 655f 3434 3628 7365 6c66  t_quote_446(self
+00010250: 2c20 7429 3a0a 2020 2020 2020 2020 7222  , t):.        r"
+00010260: 5c22 2022 0a20 2020 2020 2020 2074 2e6c  \" ".        t.l
+00010270: 6578 6572 2e70 6f70 5f73 7461 7465 2829  exer.pop_state()
+00010280: 0a20 2020 2020 2020 2074 2e74 7970 6520  .        t.type 
+00010290: 3d20 2253 5452 494e 4722 0a20 2020 2020  = "STRING".     
+000102a0: 2020 2074 2e76 616c 7565 203d 2073 656c     t.value = sel
+000102b0: 662e 7374 7269 6e67 5f61 6363 756d 756c  f.string_accumul
+000102c0: 6174 6f72 0a20 2020 2020 2020 2072 6574  ator.        ret
+000102d0: 7572 6e20 740a 0a20 2020 2023 206c 6578  urn t..    # lex
+000102e0: 6572 2e6c 6c3a 3435 360a 2020 2020 2320  er.ll:456.    # 
+000102f0: 3c71 756f 7465 2c6c 7972 6963 5f71 756f  <quote,lyric_quo
+00010300: 7465 3e2e 0a20 2020 2064 6566 2074 5f71  te>..    def t_q
+00010310: 756f 7465 5f34 3536 2873 656c 662c 2074  uote_456(self, t
+00010320: 293a 0a20 2020 2020 2020 2072 222e 220a  ):.        r".".
+00010330: 2020 2020 2020 2020 7365 6c66 2e73 7472          self.str
+00010340: 696e 675f 6163 6375 6d75 6c61 746f 7220  ing_accumulator 
+00010350: 2b3d 2074 2e76 616c 7565 0a20 2020 2020  += t.value.     
+00010360: 2020 2070 6173 730a 0a20 2020 2023 206c     pass..    # l
+00010370: 6578 6572 2e6c 6c3a 3436 320a 2020 2020  exer.ll:462.    
+00010380: 2320 3c6c 7972 6963 733e 5c22 0a0a 2020  # <lyrics>\"..  
+00010390: 2020 2320 6c65 7865 722e 6c6c 3a34 3635    # lexer.ll:465
+000103a0: 0a20 2020 2023 203c 6c79 7269 6373 3e7b  .    # <lyrics>{
+000103b0: 4652 4143 5449 4f4e 7d0a 0a20 2020 2023  FRACTION}..    #
+000103c0: 206c 6578 6572 2e6c 6c3a 3436 390a 2020   lexer.ll:469.  
+000103d0: 2020 2320 3c6c 7972 6963 733e 7b55 4e53    # <lyrics>{UNS
+000103e0: 4947 4e45 447d 2f5c 2f5b 5e30 2d39 5d0a  IGNED}/\/[^0-9].
+000103f0: 0a20 2020 2023 206c 6578 6572 2e6c 6c3a  .    # lexer.ll:
+00010400: 3437 330a 2020 2020 2320 3c6c 7972 6963  473.    # <lyric
+00010410: 733e 7b55 4e53 4947 4e45 447d 2f5c 2f7c  s>{UNSIGNED}/\/|
+00010420: 7b55 4e53 4947 4e45 447d 0a0a 2020 2020  {UNSIGNED}..    
+00010430: 2320 6c65 7865 722e 6c6c 3a34 3738 0a20  # lexer.ll:478. 
+00010440: 2020 2023 203c 6c79 7269 6373 3e7b 4e4f     # <lyrics>{NO
+00010450: 5445 434f 4d4d 414e 447d 0a0a 2020 2020  TECOMMAND}..    
+00010460: 2320 6c65 7865 722e 6c6c 3a34 3831 0a20  # lexer.ll:481. 
+00010470: 2020 2023 203c 6c79 7269 6373 3e7b 4c59     # <lyrics>{LY
+00010480: 5249 4353 7d0a 0a20 2020 2023 206c 6578  RICS}..    # lex
+00010490: 6572 2e6c 6c3a 3439 390a 2020 2020 2320  er.ll:499.    # 
+000104a0: 3c6c 7972 6963 733e 2e0a 0a20 2020 2023  <lyrics>...    #
+000104b0: 206c 6578 6572 2e6c 6c3a 3530 340a 2020   lexer.ll:504.  
+000104c0: 2020 2320 3c63 686f 7264 733e 7b41 4c50    # <chords>{ALP
+000104d0: 4841 574f 5244 7d0a 0a20 2020 2023 206c  HAWORD}..    # l
+000104e0: 6578 6572 2e6c 6c3a 3530 370a 2020 2020  exer.ll:507.    
+000104f0: 2320 3c63 686f 7264 733e 7b4e 4f54 4543  # <chords>{NOTEC
+00010500: 4f4d 4d41 4e44 7d0a 0a20 2020 2023 206c  OMMAND}..    # l
+00010510: 6578 6572 2e6c 6c3a 3531 300a 2020 2020  exer.ll:510.    
+00010520: 2320 3c63 686f 7264 733e 7b46 5241 4354  # <chords>{FRACT
+00010530: 494f 4e7d 0a0a 2020 2020 2320 6c65 7865  ION}..    # lexe
+00010540: 722e 6c6c 3a35 3134 0a20 2020 2023 203c  r.ll:514.    # <
+00010550: 6368 6f72 6473 3e7b 554e 5349 474e 4544  chords>{UNSIGNED
+00010560: 7d2f 5c2f 5b5e 302d 395d 0a0a 2020 2020  }/\/[^0-9]..    
+00010570: 2320 6c65 7865 722e 6c6c 3a35 3138 0a20  # lexer.ll:518. 
+00010580: 2020 2023 203c 6368 6f72 6473 3e7b 554e     # <chords>{UN
+00010590: 5349 474e 4544 7d2f 5c2f 7c7b 554e 5349  SIGNED}/\/|{UNSI
+000105a0: 474e 4544 7d0a 0a20 2020 2023 206c 6578  GNED}..    # lex
+000105b0: 6572 2e6c 6c3a 3532 330a 2020 2020 2320  er.ll:523.    # 
+000105c0: 3c63 686f 7264 733e 2d0a 0a20 2020 2023  <chords>-..    #
+000105d0: 206c 6578 6572 2e6c 6c3a 3532 360a 2020   lexer.ll:526.  
+000105e0: 2020 2320 3c63 686f 7264 733e 3a0a 0a20    # <chords>:.. 
+000105f0: 2020 2023 206c 6578 6572 2e6c 6c3a 3532     # lexer.ll:52
+00010600: 390a 2020 2020 2320 3c63 686f 7264 733e  9.    # <chords>
+00010610: 5c2f 5c2b 0a0a 2020 2020 2320 6c65 7865  \/\+..    # lexe
+00010620: 722e 6c6c 3a35 3332 0a20 2020 2023 203c  r.ll:532.    # <
+00010630: 6368 6f72 6473 3e5c 2f0a 0a20 2020 2023  chords>\/..    #
+00010640: 206c 6578 6572 2e6c 6c3a 3533 350a 2020   lexer.ll:535.  
+00010650: 2020 2320 3c63 686f 7264 733e 5c5e 0a0a    # <chords>\^..
+00010660: 2020 2020 2320 6c65 7865 722e 6c6c 3a35      # lexer.ll:5
+00010670: 3338 0a20 2020 2023 203c 6368 6f72 6473  38.    # <chords
+00010680: 3e2e 0a0a 2020 2020 2320 6c65 7865 722e  >...    # lexer.
+00010690: 6c6c 3a35 3435 0a20 2020 2023 203c 6d61  ll:545.    # <ma
+000106a0: 726b 7570 3e5c 5c73 636f 7265 0a20 2020  rkup>\\score.   
+000106b0: 2064 6566 2074 5f6d 6172 6b75 705f 3534   def t_markup_54
+000106c0: 3528 7365 6c66 2c20 7429 3a0a 2020 2020  5(self, t):.    
+000106d0: 2020 2020 7222 5c5c 7363 6f72 6522 0a20      r"\\score". 
+000106e0: 2020 2020 2020 2074 2e74 7970 6520 3d20         t.type = 
+000106f0: 2253 434f 5245 220a 2020 2020 2020 2020  "SCORE".        
+00010700: 7265 7475 726e 2074 0a0a 2020 2020 2320  return t..    # 
+00010710: 6c65 7865 722e 6c6c 3a35 3438 0a20 2020  lexer.ll:548.   
+00010720: 2023 203c 6d61 726b 7570 3e7b 4d41 524b   # <markup>{MARK
+00010730: 5550 434f 4d4d 414e 447d 0a20 2020 2040  UPCOMMAND}.    @
+00010740: 6c65 782e 544f 4b45 4e28 4d41 524b 5550  lex.TOKEN(MARKUP
+00010750: 434f 4d4d 414e 4429 0a20 2020 2064 6566  COMMAND).    def
+00010760: 2074 5f6d 6172 6b75 705f 3534 3828 7365   t_markup_548(se
+00010770: 6c66 2c20 7429 3a0a 2020 2020 2020 2020  lf, t):.        
+00010780: 7661 6c75 6520 3d20 742e 7661 6c75 655b  value = t.value[
+00010790: 313a 5d0a 2020 2020 2020 2020 6966 2028  1:].        if (
+000107a0: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
+000107b0: 7565 2069 6e20 7365 6c66 2e63 6c69 656e  ue in self.clien
+000107c0: 742e 5f6d 6172 6b75 705f 6675 6e63 7469  t._markup_functi
+000107d0: 6f6e 730a 2020 2020 2020 2020 2020 2020  ons.            
+000107e0: 6f72 2076 616c 7565 2069 6e20 7365 6c66  or value in self
+000107f0: 2e63 6c69 656e 742e 5f6d 6172 6b75 705f  .client._markup_
+00010800: 6c69 7374 5f66 756e 6374 696f 6e73 0a20  list_functions. 
+00010810: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+00010820: 2020 2020 2020 6966 2076 616c 7565 2069        if value i
+00010830: 6e20 7365 6c66 2e63 6c69 656e 742e 5f6d  n self.client._m
+00010840: 6172 6b75 705f 6675 6e63 7469 6f6e 733a  arkup_functions:
+00010850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010860: 2074 2e74 7970 6520 3d20 224d 4152 4b55   t.type = "MARKU
+00010870: 505f 4655 4e43 5449 4f4e 220a 2020 2020  P_FUNCTION".    
+00010880: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+00010890: 6174 7572 6520 3d20 7365 6c66 2e63 6c69  ature = self.cli
+000108a0: 656e 742e 5f6d 6172 6b75 705f 6675 6e63  ent._markup_func
+000108b0: 7469 6f6e 735b 7661 6c75 655d 0a20 2020  tions[value].   
+000108c0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+000108d0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+000108e0: 2e74 7970 6520 3d20 224d 4152 4b55 505f  .type = "MARKUP_
+000108f0: 4c49 5354 5f46 554e 4354 494f 4e22 0a20  LIST_FUNCTION". 
+00010900: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00010910: 6967 6e61 7475 7265 203d 2073 656c 662e  ignature = self.
+00010920: 636c 6965 6e74 2e5f 6d61 726b 7570 5f6c  client._markup_l
+00010930: 6973 745f 6675 6e63 7469 6f6e 735b 7661  ist_functions[va
+00010940: 6c75 655d 0a20 2020 2020 2020 2020 2020  lue].           
+00010950: 2023 2070 7269 6e74 2074 2e74 7970 652c   # print t.type,
+00010960: 2076 616c 7565 2c20 7369 676e 6174 7572   value, signatur
+00010970: 650a 2020 2020 2020 2020 2020 2020 7365  e.            se
+00010980: 6c66 2e70 7573 685f 7369 676e 6174 7572  lf.push_signatur
+00010990: 6528 7369 676e 6174 7572 652c 2074 290a  e(signature, t).
+000109a0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000109b0: 2020 2020 2020 2020 2020 742e 7479 7065            t.type
+000109c0: 203d 2073 656c 662e 7363 616e 5f65 7363   = self.scan_esc
+000109d0: 6170 6564 5f77 6f72 6428 7429 0a20 2020  aped_word(t).   
+000109e0: 2020 2020 2072 6574 7572 6e20 740a 0a20       return t.. 
+000109f0: 2020 2023 206c 6578 6572 2e6c 6c3a 3539     # lexer.ll:59
+00010a00: 380a 2020 2020 2320 3c6d 6172 6b75 703e  8.    # <markup>
+00010a10: 5b7b 7d5d 0a20 2020 2023 2020 2020 6465  [{}].    #    de
+00010a20: 6620 745f 6d61 726b 7570 5f35 3938 2873  f t_markup_598(s
+00010a30: 656c 662c 2074 293a 0a20 2020 2023 2020  elf, t):.    #  
+00010a40: 2020 2020 2020 7227 5b7b 7d5d 270a 2020        r'[{}]'.  
+00010a50: 2020 2320 2020 2020 2020 2074 2e74 7970    #        t.typ
+00010a60: 6520 3d20 742e 7661 6c75 650a 2020 2020  e = t.value.    
+00010a70: 2320 2020 2020 2020 2072 6574 7572 6e20  #        return 
+00010a80: 740a 0a20 2020 2023 206c 6578 6572 2e6c  t..    # lexer.l
+00010a90: 6c3a 3630 310a 2020 2020 2320 3c6d 6172  l:601.    # <mar
+00010aa0: 6b75 703e 5b5e 237b 7d5c 225c 5c20 5c74  kup>[^#{}\"\\ \t
+00010ab0: 5c6e 5c72 5c66 5d2b 0a20 2020 2064 6566  \n\r\f]+.    def
+00010ac0: 2074 5f6d 6172 6b75 705f 3630 3128 7365   t_markup_601(se
+00010ad0: 6c66 2c20 7429 3a0a 2020 2020 2020 2020  lf, t):.        
+00010ae0: 7222 5b5e 237b 7d5c 225c 5c20 5c74 5c6e  r"[^#{}\"\\ \t\n
+00010af0: 5c72 5c66 5d2b 220a 2020 2020 2020 2020  \r\f]+".        
+00010b00: 742e 7479 7065 203d 2022 5354 5249 4e47  t.type = "STRING
+00010b10: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00010b20: 2074 0a0a 2020 2020 2320 6c65 7865 722e   t..    # lexer.
+00010b30: 6c6c 3a36 3134 0a20 2020 2023 203c 6d61  ll:614.    # <ma
+00010b40: 726b 7570 3e2e 0a0a 2020 2020 2320 6c65  rkup>...    # le
+00010b50: 7865 722e 6c6c 3a36 3139 0a20 2020 2023  xer.ll:619.    #
+00010b60: 203c 6c6f 6e67 636f 6d6d 656e 743e 3c3c   <longcomment><<
+00010b70: 454f 463e 3e0a 0a20 2020 2023 206c 6578  EOF>>..    # lex
+00010b80: 6572 2e6c 6c3a 3632 360a 2020 2020 2320  er.ll:626.    # 
+00010b90: 3c3c 454f 463e 3e0a 0a20 2020 2023 206c  <<EOF>>..    # l
+00010ba0: 6578 6572 2e6c 6c3a 3634 330a 2020 2020  exer.ll:643.    
+00010bb0: 2320 3c49 4e49 5449 414c 3e7b 4441 5348  # <INITIAL>{DASH
+00010bc0: 4544 5f57 4f52 447d 0a20 2020 2040 6c65  ED_WORD}.    @le
+00010bd0: 782e 544f 4b45 4e28 4441 5348 4544 5f57  x.TOKEN(DASHED_W
+00010be0: 4f52 4429 0a20 2020 2064 6566 2074 5f49  ORD).    def t_I
+00010bf0: 4e49 5449 414c 5f36 3433 2873 656c 662c  NITIAL_643(self,
+00010c00: 2074 293a 0a20 2020 2020 2020 2074 2e74   t):.        t.t
+00010c10: 7970 6520 3d20 7365 6c66 2e73 6361 6e5f  ype = self.scan_
+00010c20: 6261 7265 5f77 6f72 6428 7429 0a20 2020  bare_word(t).   
+00010c30: 2020 2020 2072 6574 7572 6e20 740a 0a20       return t.. 
+00010c40: 2020 2023 206c 6578 6572 2e6c 6c3a 3634     # lexer.ll:64
+00010c50: 360a 2020 2020 2320 3c49 4e49 5449 414c  6.    # <INITIAL
+00010c60: 3e7b 4441 5348 4544 5f4b 4559 5f57 4f52  >{DASHED_KEY_WOR
+00010c70: 447d 0a20 2020 2040 6c65 782e 544f 4b45  D}.    @lex.TOKE
+00010c80: 4e28 4441 5348 4544 5f4b 4559 5f57 4f52  N(DASHED_KEY_WOR
+00010c90: 4429 0a20 2020 2064 6566 2074 5f49 4e49  D).    def t_INI
+00010ca0: 5449 414c 5f36 3436 2873 656c 662c 2074  TIAL_646(self, t
+00010cb0: 293a 0a20 2020 2020 2020 2074 2e74 7970  ):.        t.typ
+00010cc0: 6520 3d20 7365 6c66 2e73 6361 6e5f 6573  e = self.scan_es
+00010cd0: 6361 7065 645f 776f 7264 2874 290a 2020  caped_word(t).  
+00010ce0: 2020 2020 2020 7265 7475 726e 2074 0a0a        return t..
+00010cf0: 2020 2020 2320 6c65 7865 722e 6c6c 3a36      # lexer.ll:6
+00010d00: 3531 0a20 2020 2023 202d 7b55 4e53 4947  51.    # -{UNSIG
+00010d10: 4e45 447d 7c7b 5245 414c 7d0a 2020 2020  NED}|{REAL}.    
+00010d20: 406c 6578 2e54 4f4b 454e 2852 4541 4c29  @lex.TOKEN(REAL)
+00010d30: 0a20 2020 2064 6566 2074 5f36 3531 5f61  .    def t_651_a
+00010d40: 2873 656c 662c 2074 293a 0a20 2020 2020  (self, t):.     
+00010d50: 2020 2074 2e74 7970 6520 3d20 2252 4541     t.type = "REA
+00010d60: 4c22 0a20 2020 2020 2020 2074 2e76 616c  L".        t.val
+00010d70: 7565 203d 2066 6c6f 6174 2874 2e76 616c  ue = float(t.val
+00010d80: 7565 290a 2020 2020 2020 2020 7265 7475  ue).        retu
+00010d90: 726e 2074 0a0a 2020 2020 406c 6578 2e54  rn t..    @lex.T
+00010da0: 4f4b 454e 2822 2d25 7322 2025 2055 4e53  OKEN("-%s" % UNS
+00010db0: 4947 4e45 4429 0a20 2020 2064 6566 2074  IGNED).    def t
+00010dc0: 5f36 3531 5f62 2873 656c 662c 2074 293a  _651_b(self, t):
+00010dd0: 0a20 2020 2020 2020 2074 2e74 7970 6520  .        t.type 
+00010de0: 3d20 2252 4541 4c22 0a20 2020 2020 2020  = "REAL".       
+00010df0: 2074 2e76 616c 7565 203d 2066 6c6f 6174   t.value = float
+00010e00: 2874 2e76 616c 7565 290a 2020 2020 2020  (t.value).      
+00010e10: 2020 7265 7475 726e 2074 0a0a 2020 2020    return t..    
+00010e20: 2320 6c65 7865 722e 6c6c 3a36 3631 0a20  # lexer.ll:661. 
+00010e30: 2020 2023 202d 5c2e 0a20 2020 2064 6566     # -\..    def
+00010e40: 2074 5f36 3631 2873 656c 662c 2074 293a   t_661(self, t):
+00010e50: 0a20 2020 2020 2020 2072 222d 5c2e 220a  .        r"-\.".
+00010e60: 2020 2020 2020 2020 742e 7479 7065 203d          t.type =
+00010e70: 2022 5245 414c 220a 2020 2020 2020 2020   "REAL".        
+00010e80: 742e 7661 6c75 6520 3d20 302e 300a 2020  t.value = 0.0.  
+00010e90: 2020 2020 2020 7265 7475 726e 2074 0a0a        return t..
+00010ea0: 2020 2020 2320 6c65 7865 722e 6c6c 3a36      # lexer.ll:6
+00010eb0: 3636 0a20 2020 2023 207b 554e 5349 474e  66.    # {UNSIGN
+00010ec0: 4544 7d0a 2020 2020 406c 6578 2e54 4f4b  ED}.    @lex.TOK
+00010ed0: 454e 2855 4e53 4947 4e45 4429 0a20 2020  EN(UNSIGNED).   
+00010ee0: 2064 6566 2074 5f36 3636 2873 656c 662c   def t_666(self,
+00010ef0: 2074 293a 0a20 2020 2020 2020 2074 2e74   t):.        t.t
+00010f00: 7970 6520 3d20 2255 4e53 4947 4e45 4422  ype = "UNSIGNED"
+00010f10: 0a20 2020 2020 2020 2074 2e76 616c 7565  .        t.value
+00010f20: 203d 2066 6c6f 6174 2874 2e76 616c 7565   = float(t.value
+00010f30: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00010f40: 2074 0a0a 2020 2020 2320 6c65 7865 722e   t..    # lexer.
+00010f50: 6c6c 3a36 3732 0a20 2020 2023 205b 7b7d  ll:672.    # [{}
+00010f60: 5d0a 0a20 2020 2023 206c 6578 6572 2e6c  ]..    # lexer.l
+00010f70: 6c3a 3637 360a 2020 2020 2320 5b2a 3a3d  l:676.    # [*:=
+00010f80: 5d0a 0a20 2020 2023 206c 6578 6572 2e6c  ]..    # lexer.l
+00010f90: 6c3a 3638 320a 2020 2020 2320 3c49 4e49  l:682.    # <INI
+00010fa0: 5449 414c 2c6e 6f74 6573 2c66 6967 7572  TIAL,notes,figur
+00010fb0: 6573 3e2e 0a0a 2020 2020 2320 6c65 7865  es>...    # lexe
+00010fc0: 722e 6c6c 3a36 3836 0a20 2020 2023 203c  r.ll:686.    # <
+00010fd0: 494e 4954 4941 4c2c 6c79 7269 6373 2c6e  INITIAL,lyrics,n
+00010fe0: 6f74 6573 2c66 6967 7572 6573 3e5c 5c2e  otes,figures>\\.
+00010ff0: 0a20 2020 2064 6566 2074 5f49 4e49 5449  .    def t_INITI
+00011000: 414c 5f6e 6f74 6573 5f36 3836 2873 656c  AL_notes_686(sel
+00011010: 662c 2074 293a 0a20 2020 2020 2020 2072  f, t):.        r
+00011020: 225c 5c2e 220a 2020 2020 2020 2020 6966  "\\.".        if
+00011030: 2074 2e76 616c 7565 5b31 5d20 3d3d 2022   t.value[1] == "
+00011040: 3e22 3a0a 2020 2020 2020 2020 2020 2020  >":.            
+00011050: 742e 7479 7065 203d 2022 455f 414e 474c  t.type = "E_ANGL
+00011060: 455f 434c 4f53 4522 0a20 2020 2020 2020  E_CLOSE".       
+00011070: 2065 6c69 6620 742e 7661 6c75 655b 315d   elif t.value[1]
+00011080: 203d 3d20 223c 223a 0a20 2020 2020 2020   == "<":.       
+00011090: 2020 2020 2074 2e74 7970 6520 3d20 2245       t.type = "E
+000110a0: 5f41 4e47 4c45 5f4f 5045 4e22 0a20 2020  _ANGLE_OPEN".   
+000110b0: 2020 2020 2065 6c69 6620 742e 7661 6c75       elif t.valu
+000110c0: 655b 315d 203d 3d20 2221 223a 0a20 2020  e[1] == "!":.   
+000110d0: 2020 2020 2020 2020 2074 2e74 7970 6520           t.type 
+000110e0: 3d20 2245 5f45 5843 4c41 4d41 5449 4f4e  = "E_EXCLAMATION
+000110f0: 220a 2020 2020 2020 2020 656c 6966 2074  ".        elif t
+00011100: 2e76 616c 7565 5b31 5d20 3d3d 2022 2822  .value[1] == "("
+00011110: 3a0a 2020 2020 2020 2020 2020 2020 742e  :.            t.
+00011120: 7479 7065 203d 2022 455f 4f50 454e 220a  type = "E_OPEN".
+00011130: 2020 2020 2020 2020 656c 6966 2074 2e76          elif t.v
+00011140: 616c 7565 5b31 5d20 3d3d 2022 2922 3a0a  alue[1] == ")":.
+00011150: 2020 2020 2020 2020 2020 2020 742e 7479              t.ty
+00011160: 7065 203d 2022 455f 434c 4f53 4522 0a20  pe = "E_CLOSE". 
+00011170: 2020 2020 2020 2065 6c69 6620 742e 7661         elif t.va
+00011180: 6c75 655b 315d 203d 3d20 225b 223a 0a20  lue[1] == "[":. 
+00011190: 2020 2020 2020 2020 2020 2074 2e74 7970             t.typ
+000111a0: 6520 3d20 2245 5f42 5241 434b 4554 5f4f  e = "E_BRACKET_O
+000111b0: 5045 4e22 0a20 2020 2020 2020 2065 6c69  PEN".        eli
+000111c0: 6620 742e 7661 6c75 655b 315d 203d 3d20  f t.value[1] == 
+000111d0: 222b 223a 0a20 2020 2020 2020 2020 2020  "+":.           
+000111e0: 2074 2e74 7970 6520 3d20 2245 5f50 4c55   t.type = "E_PLU
+000111f0: 5322 0a20 2020 2020 2020 2065 6c69 6620  S".        elif 
+00011200: 742e 7661 6c75 655b 315d 203d 3d20 225d  t.value[1] == "]
+00011210: 223a 0a20 2020 2020 2020 2020 2020 2074  ":.            t
+00011220: 2e74 7970 6520 3d20 2245 5f42 5241 434b  .type = "E_BRACK
+00011230: 4554 5f43 4c4f 5345 220a 2020 2020 2020  ET_CLOSE".      
+00011240: 2020 656c 6966 2074 2e76 616c 7565 5b31    elif t.value[1
+00011250: 5d20 3d3d 2022 7e22 3a0a 2020 2020 2020  ] == "~":.      
+00011260: 2020 2020 2020 742e 7479 7065 203d 2022        t.type = "
+00011270: 455f 5449 4c44 4522 0a20 2020 2020 2020  E_TILDE".       
+00011280: 2065 6c69 6620 742e 7661 6c75 655b 315d   elif t.value[1]
+00011290: 203d 3d20 225c 5c22 3a0a 2020 2020 2020   == "\\":.      
+000112a0: 2020 2020 2020 742e 7479 7065 203d 2022        t.type = "
+000112b0: 455f 4241 434b 534c 4153 4822 0a20 2020  E_BACKSLASH".   
+000112c0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000112d0: 2020 2020 2020 2074 2e74 7970 6520 3d20         t.type = 
+000112e0: 2245 5f43 4841 5222 0a20 2020 2020 2020  "E_CHAR".       
+000112f0: 2072 6574 7572 6e20 740a 0a20 2020 2023   return t..    #
+00011300: 206c 6578 6572 2e6c 6c3a 0a20 2020 2023   lexer.ll:.    #
+00011310: 203c 2a3e 2e37 3136 0a20 2020 2023 2020   <*>.716.    #  
+00011320: 2020 6465 6620 745f 414e 595f 3731 3628    def t_ANY_716(
+00011330: 7365 6c66 2c20 7429 3a0a 2020 2020 2320  self, t):.    # 
+00011340: 2020 2020 2020 2072 272e 270a 2020 2020         r'.'.    
+00011350: 2320 2020 2020 2020 2072 6169 7365 2045  #        raise E
+00011360: 7863 6570 7469 6f6e 0a0a 2020 2020 2323  xception..    ##
+00011370: 2320 4445 4641 554c 5420 5255 4c45 5320  # DEFAULT RULES 
+00011380: 2323 230a 0a20 2020 2074 5f69 676e 6f72  ###..    t_ignor
+00011390: 6520 3d20 2222 2020 2320 6c65 7420 7468  e = ""  # let th
+000113a0: 6520 6772 616d 6d61 7220 6861 6e64 6c65  e grammar handle
+000113b0: 2069 676e 6f72 696e 6720 7468 696e 6773   ignoring things
+000113c0: 0a0a 2020 2020 2320 2020 2074 5f65 7874  ..    #    t_ext
+000113d0: 7261 746f 6b65 6e5f 6967 6e6f 7265 203d  ratoken_ignore =
+000113e0: 2074 5f69 676e 6f72 650a 2020 2020 2320   t_ignore.    # 
+000113f0: 2020 2074 5f63 686f 7264 735f 6967 6e6f     t_chords_igno
+00011400: 7265 203d 2074 5f69 676e 6f72 650a 2020  re = t_ignore.  
+00011410: 2020 2320 2020 2074 5f66 6967 7572 6573    #    t_figures
+00011420: 5f69 676e 6f72 6520 3d20 745f 6967 6e6f  _ignore = t_igno
+00011430: 7265 0a20 2020 2023 2020 2020 745f 696e  re.    #    t_in
+00011440: 636c 5f69 676e 6f72 6520 3d20 745f 6967  cl_ignore = t_ig
+00011450: 6e6f 7265 0a20 2020 2023 2020 2020 745f  nore.    #    t_
+00011460: 6c79 7269 6373 5f69 676e 6f72 6520 3d20  lyrics_ignore = 
+00011470: 745f 6967 6e6f 7265 0a20 2020 2023 2020  t_ignore.    #  
+00011480: 2020 745f 6c79 7269 635f 7175 6f74 655f    t_lyric_quote_
+00011490: 6967 6e6f 7265 203d 2074 5f69 676e 6f72  ignore = t_ignor
+000114a0: 650a 2020 2020 745f 6c6f 6e67 636f 6d6d  e.    t_longcomm
+000114b0: 656e 745f 6967 6e6f 7265 203d 2074 5f69  ent_ignore = t_i
+000114c0: 676e 6f72 650a 2020 2020 745f 6d61 726b  gnore.    t_mark
+000114d0: 7570 5f69 676e 6f72 6520 3d20 745f 6967  up_ignore = t_ig
+000114e0: 6e6f 7265 0a20 2020 2074 5f6e 6f74 6573  nore.    t_notes
+000114f0: 5f69 676e 6f72 6520 3d20 745f 6967 6e6f  _ignore = t_igno
+00011500: 7265 0a20 2020 2074 5f71 756f 7465 5f69  re.    t_quote_i
+00011510: 676e 6f72 6520 3d20 745f 6967 6e6f 7265  gnore = t_ignore
+00011520: 0a20 2020 2023 2020 2020 745f 736f 7572  .    #    t_sour
+00011530: 6365 6669 6c65 6c69 6e65 5f69 676e 6f72  cefileline_ignor
+00011540: 6520 3d20 745f 6967 6e6f 7265 0a20 2020  e = t_ignore.   
+00011550: 2023 2020 2020 745f 736f 7572 6365 6669   #    t_sourcefi
+00011560: 6c65 6e61 6d65 5f69 676e 6f72 6520 3d20  lename_ignore = 
+00011570: 745f 6967 6e6f 7265 0a20 2020 2074 5f76  t_ignore.    t_v
+00011580: 6572 7369 6f6e 5f69 676e 6f72 6520 3d20  ersion_ignore = 
+00011590: 745f 6967 6e6f 7265 0a0a 2020 2020 745f  t_ignore..    t_
+000115a0: 7363 6865 6d65 5f69 676e 6f72 6520 3d20  scheme_ignore = 
+000115b0: 745f 6967 6e6f 7265 0a0a 2020 2020 6465  t_ignore..    de
+000115c0: 6620 745f 6e65 776c 696e 6528 7365 6c66  f t_newline(self
+000115d0: 2c20 7429 3a0a 2020 2020 2020 2020 7222  , t):.        r"
+000115e0: 5c6e 2b22 0a20 2020 2020 2020 2074 2e6c  \n+".        t.l
+000115f0: 6578 6572 2e6c 696e 656e 6f20 2b3d 2074  exer.lineno += t
+00011600: 2e76 616c 7565 2e63 6f75 6e74 2822 5c6e  .value.count("\n
+00011610: 2229 0a0a 2020 2020 6465 6620 745f 6572  ")..    def t_er
+00011620: 726f 7228 7365 6c66 2c20 7429 3a0a 2020  ror(self, t):.  
+00011630: 2020 2020 2020 7072 696e 7428 2822 4c69        print(("Li
+00011640: 6c79 506f 6e64 5061 7273 6572 3a20 496c  lyPondParser: Il
+00011650: 6c65 6761 6c20 6368 6172 6163 7465 7220  legal character 
+00011660: 2725 7327 2220 2520 742e 7661 6c75 655b  '%s'" % t.value[
+00011670: 305d 2929 0a20 2020 2020 2020 2074 2e6c  0])).        t.l
+00011680: 6578 6572 2e73 6b69 7028 3129 0a0a 2020  exer.skip(1)..  
+00011690: 2020 2320 2020 2074 5f65 7874 7261 746f    #    t_extrato
+000116a0: 6b65 6e5f 6572 726f 7220 3d20 745f 6572  ken_error = t_er
+000116b0: 726f 720a 2020 2020 2320 2020 2074 5f63  ror.    #    t_c
+000116c0: 686f 7264 735f 6572 726f 7220 3d20 745f  hords_error = t_
+000116d0: 6572 726f 720a 2020 2020 2320 2020 2074  error.    #    t
+000116e0: 5f66 6967 7572 6573 5f65 7272 6f72 203d  _figures_error =
+000116f0: 2074 5f65 7272 6f72 0a20 2020 2023 2020   t_error.    #  
+00011700: 2020 745f 696e 636c 5f65 7272 6f72 203d    t_incl_error =
+00011710: 2074 5f65 7272 6f72 0a20 2020 2023 2020   t_error.    #  
+00011720: 2020 745f 6c79 7269 6373 5f65 7272 6f72    t_lyrics_error
+00011730: 203d 2074 5f65 7272 6f72 0a20 2020 2023   = t_error.    #
+00011740: 2020 2020 745f 6c79 7269 635f 7175 6f74      t_lyric_quot
+00011750: 655f 6572 726f 7220 3d20 745f 6572 726f  e_error = t_erro
+00011760: 720a 2020 2020 745f 6c6f 6e67 636f 6d6d  r.    t_longcomm
+00011770: 656e 745f 6572 726f 7220 3d20 745f 6572  ent_error = t_er
+00011780: 726f 720a 2020 2020 745f 6d61 726b 7570  ror.    t_markup
+00011790: 5f65 7272 6f72 203d 2074 5f65 7272 6f72  _error = t_error
+000117a0: 0a20 2020 2074 5f6e 6f74 6573 5f65 7272  .    t_notes_err
+000117b0: 6f72 203d 2074 5f65 7272 6f72 0a20 2020  or = t_error.   
+000117c0: 2074 5f71 756f 7465 5f65 7272 6f72 203d   t_quote_error =
+000117d0: 2074 5f65 7272 6f72 0a20 2020 2023 2020   t_error.    #  
+000117e0: 2020 745f 736f 7572 6365 6669 6c65 6c69    t_sourcefileli
+000117f0: 6e65 5f65 7272 6f72 203d 2074 5f65 7272  ne_error = t_err
+00011800: 6f72 0a20 2020 2023 2020 2020 745f 736f  or.    #    t_so
+00011810: 7572 6365 6669 6c65 6e61 6d65 5f65 7272  urcefilename_err
+00011820: 6f72 203d 2074 5f65 7272 6f72 0a20 2020  or = t_error.   
+00011830: 2074 5f76 6572 7369 6f6e 5f65 7272 6f72   t_version_error
+00011840: 203d 2074 5f65 7272 6f72 0a20 2020 2074   = t_error.    t
+00011850: 5f73 6368 656d 655f 6572 726f 7220 3d20  _scheme_error = 
+00011860: 745f 6572 726f 720a 0a20 2020 2064 6566  t_error..    def
+00011870: 2073 6361 6e5f 6261 7265 5f77 6f72 6428   scan_bare_word(
+00011880: 7365 6c66 2c20 7429 3a0a 2020 2020 2020  self, t):.      
+00011890: 2020 6966 2074 2e6c 6578 6572 2e63 7572    if t.lexer.cur
+000118a0: 7265 6e74 5f73 7461 7465 2829 2069 6e20  rent_state() in 
+000118b0: 2822 6e6f 7465 7322 2c29 3a0a 2020 2020  ("notes",):.    
+000118c0: 2020 2020 2020 2020 7069 7463 685f 6e61          pitch_na
+000118d0: 6d65 7320 3d20 7365 6c66 2e63 6c69 656e  mes = self.clien
+000118e0: 742e 5f70 6974 6368 5f6e 616d 6573 0a20  t._pitch_names. 
+000118f0: 2020 2020 2020 2020 2020 2069 6620 742e             if t.
+00011900: 7661 6c75 6520 696e 2070 6974 6368 5f6e  value in pitch_n
+00011910: 616d 6573 3a0a 2020 2020 2020 2020 2020  ames:.          
+00011920: 2020 2020 2020 742e 7479 7065 203d 2022        t.type = "
+00011930: 4e4f 5445 4e41 4d45 5f50 4954 4348 220a  NOTENAME_PITCH".
+00011940: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00011950: 2074 2e76 616c 7565 203d 3d20 2271 2220   t.value == "q" 
+00011960: 616e 6420 7365 6c66 2e63 6c69 656e 742e  and self.client.
+00011970: 5f6c 6173 745f 6368 6f72 643a 0a20 2020  _last_chord:.   
+00011980: 2020 2020 2020 2020 2020 2020 2074 2e74               t.t
+00011990: 7970 6520 3d20 2243 484f 5244 5f52 4550  ype = "CHORD_REP
+000119a0: 4554 4954 494f 4e22 0a20 2020 2020 2020  ETITION".       
+000119b0: 2072 6574 7572 6e20 2253 5452 494e 4722   return "STRING"
+000119c0: 0a0a 2020 2020 6465 6620 7363 616e 5f65  ..    def scan_e
+000119d0: 7363 6170 6564 5f77 6f72 6428 7365 6c66  scaped_word(self
+000119e0: 2c20 7429 3a0a 2020 2020 2020 2020 2320  , t):.        # 
+000119f0: 6669 7273 742c 2063 6865 636b 2066 6f72  first, check for
+00011a00: 2069 7420 696e 2074 6865 206b 6579 776f   it in the keywo
+00011a10: 7264 206c 6973 740a 2020 2020 2020 2020  rd list.        
+00011a20: 6966 2074 2e76 616c 7565 2069 6e20 7365  if t.value in se
+00011a30: 6c66 2e6b 6579 776f 7264 733a 0a20 2020  lf.keywords:.   
+00011a40: 2020 2020 2020 2020 2076 616c 7565 203d           value =
+00011a50: 2073 656c 662e 6b65 7977 6f72 6473 5b74   self.keywords[t
+00011a60: 2e76 616c 7565 5d0a 2020 2020 2020 2020  .value].        
+00011a70: 2020 2020 6966 2076 616c 7565 203d 3d20      if value == 
+00011a80: 224d 4152 4b55 5022 3a0a 2020 2020 2020  "MARKUP":.      
+00011a90: 2020 2020 2020 2020 2020 742e 6c65 7865            t.lexe
+00011aa0: 722e 7075 7368 5f73 7461 7465 2822 6d61  r.push_state("ma
+00011ab0: 726b 7570 2229 0a20 2020 2020 2020 2020  rkup").         
+00011ac0: 2020 2020 2020 2069 6620 742e 6c65 7865         if t.lexe
+00011ad0: 722e 6375 7272 656e 745f 7374 6174 6528  r.current_state(
+00011ae0: 2920 3d3d 2022 6c79 7269 6373 223a 0a20  ) == "lyrics":. 
+00011af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011b00: 2020 2072 6574 7572 6e20 224c 5952 4943     return "LYRIC
+00011b10: 5f4d 4152 4b55 5022 0a20 2020 2020 2020  _MARKUP".       
+00011b20: 2020 2020 2065 6c69 6620 7661 6c75 6520       elif value 
+00011b30: 3d3d 2022 5749 5448 223a 0a20 2020 2020  == "WITH":.     
+00011b40: 2020 2020 2020 2020 2020 2074 2e6c 6578             t.lex
+00011b50: 6572 2e70 7573 685f 7374 6174 6528 2249  er.push_state("I
+00011b60: 4e49 5449 414c 2229 0a20 2020 2020 2020  NITIAL").       
+00011b70: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
+00011b80: 650a 2020 2020 2020 2020 6964 656e 7469  e.        identi
+00011b90: 6669 6572 203d 2074 2e76 616c 7565 5b31  fier = t.value[1
+00011ba0: 3a5d 0a20 2020 2020 2020 2023 2063 6865  :].        # che
+00011bb0: 636b 2066 6f72 2074 6865 2069 6465 6e74  ck for the ident
+00011bc0: 6966 6965 7220 696e 2074 6865 2073 636f  ifier in the sco
+00011bd0: 7065 2073 7461 636b 0a20 2020 2020 2020  pe stack.       
+00011be0: 206c 6f6f 6b75 7020 3d20 7365 6c66 2e63   lookup = self.c
+00011bf0: 6c69 656e 742e 5f72 6573 6f6c 7665 5f69  lient._resolve_i
+00011c00: 6465 6e74 6966 6965 7228 6964 656e 7469  dentifier(identi
+00011c10: 6669 6572 290a 2020 2020 2020 2020 6966  fier).        if
+00011c20: 206c 6f6f 6b75 7020 6973 206e 6f74 204e   lookup is not N
+00011c30: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00011c40: 2069 6465 6e74 6966 6965 725f 6c6f 6f6b   identifier_look
+00011c50: 7570 203d 207b 0a20 2020 2020 2020 2020  up = {.         
+00011c60: 2020 2020 2020 2022 626f 6f6b 5f62 6c6f         "book_blo
+00011c70: 636b 223a 2022 424f 4f4b 5f49 4445 4e54  ck": "BOOK_IDENT
+00011c80: 4946 4945 5222 2c0a 2020 2020 2020 2020  IFIER",.        
+00011c90: 2020 2020 2020 2020 2262 6f6f 6b70 6172          "bookpar
+00011ca0: 745f 626c 6f63 6b22 3a20 2242 4f4f 4b5f  t_block": "BOOK_
+00011cb0: 4944 454e 5449 4649 4552 222c 0a20 2020  IDENTIFIER",.   
+00011cc0: 2020 2020 2020 2020 2020 2020 2022 636f               "co
+00011cd0: 6e74 6578 745f 6465 665f 7370 6563 5f62  ntext_def_spec_b
+00011ce0: 6c6f 636b 223a 2022 434f 4e54 4558 545f  lock": "CONTEXT_
+00011cf0: 4445 465f 4944 454e 5449 4649 4552 222c  DEF_IDENTIFIER",
+00011d00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011d10: 2022 636f 6e74 6578 745f 6d6f 6469 6669   "context_modifi
+00011d20: 6361 7469 6f6e 223a 2022 434f 4e54 4558  cation": "CONTEX
+00011d30: 545f 4d4f 445f 4944 454e 5449 4649 4552  T_MOD_IDENTIFIER
+00011d40: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00011d50: 2020 2022 706f 7374 5f65 7665 6e74 5f6e     "post_event_n
+00011d60: 6f66 696e 6765 7222 3a20 2245 5645 4e54  ofinger": "EVENT
+00011d70: 5f49 4445 4e54 4946 4945 5222 2c0a 2020  _IDENTIFIER",.  
+00011d80: 2020 2020 2020 2020 2020 2020 2020 2266                "f
+00011d90: 756c 6c5f 6d61 726b 7570 223a 2022 4d41  ull_markup": "MA
+00011da0: 524b 5550 5f49 4445 4e54 4946 4945 5222  RKUP_IDENTIFIER"
+00011db0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00011dc0: 2020 2266 756c 6c5f 6d61 726b 7570 5f6c    "full_markup_l
+00011dd0: 6973 7422 3a20 224d 4152 4b55 504c 494e  ist": "MARKUPLIN
+00011de0: 4553 5f49 4445 4e54 4946 4945 5222 2c0a  ES_IDENTIFIER",.
+00011df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e00: 226d 7573 6963 223a 2022 4d55 5349 435f  "music": "MUSIC_
+00011e10: 4944 454e 5449 4649 4552 222c 0a20 2020  IDENTIFIER",.   
+00011e20: 2020 2020 2020 2020 2020 2020 2022 6e75               "nu
+00011e30: 6d62 6572 5f65 7870 7265 7373 696f 6e22  mber_expression"
+00011e40: 3a20 224e 554d 4245 525f 4944 454e 5449  : "NUMBER_IDENTI
+00011e50: 4649 4552 222c 0a20 2020 2020 2020 2020  FIER",.         
+00011e60: 2020 2020 2020 2022 6f75 7470 7574 5f64         "output_d
+00011e70: 6566 223a 2022 6f75 7470 7574 5f44 4546  ef": "output_DEF
+00011e80: 5f49 4445 4e54 4946 4945 5222 2c0a 2020  _IDENTIFIER",.  
+00011e90: 2020 2020 2020 2020 2020 2020 2020 2265                "e
+00011ea0: 6d62 6564 6465 645f 7363 6d22 3a20 2253  mbedded_scm": "S
+00011eb0: 434d 5f49 4445 4e54 4946 4945 5222 2c0a  CM_IDENTIFIER",.
+00011ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011ed0: 2273 636f 7265 5f62 6c6f 636b 223a 2022  "score_block": "
+00011ee0: 5343 4f52 455f 4944 454e 5449 4649 4552  SCORE_IDENTIFIER
+00011ef0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00011f00: 2020 2022 7374 7269 6e67 223a 2022 5354     "string": "ST
+00011f10: 5249 4e47 5f49 4445 4e54 4946 4945 5222  RING_IDENTIFIER"
+00011f20: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00011f30: 2020 2320 2750 4954 4348 5f49 4445 4e54    # 'PITCH_IDENT
+00011f40: 4946 4945 5227 203f 0a20 2020 2020 2020  IFIER' ?.       
+00011f50: 2020 2020 2020 2020 2023 2027 4455 5241           # 'DURA
+00011f60: 5449 4f4e 5f49 4445 4e54 4946 4945 5227  TION_IDENTIFIER'
+00011f70: 203f 0a20 2020 2020 2020 2020 2020 2020   ?.             
+00011f80: 2020 2023 2027 4c59 5249 435f 4d41 524b     # 'LYRIC_MARK
+00011f90: 5550 5f49 4445 4e54 4946 4945 5227 203f  UP_IDENTIFIER' ?
+00011fa0: 0a20 2020 2020 2020 2020 2020 207d 0a20  .            }. 
+00011fb0: 2020 2020 2020 2020 2020 2074 2e76 616c             t.val
+00011fc0: 7565 203d 2063 6f70 792e 6465 6570 636f  ue = copy.deepco
+00011fd0: 7079 286c 6f6f 6b75 702e 7661 6c75 6529  py(lookup.value)
+00011fe0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00011ff0: 7572 6e20 6964 656e 7469 6669 6572 5f6c  urn identifier_l
+00012000: 6f6f 6b75 705b 6c6f 6f6b 7570 2e74 7970  ookup[lookup.typ
+00012010: 655d 0a20 2020 2020 2020 2023 2074 6865  e].        # the
+00012020: 6e2c 2063 6865 636b 2066 6f72 2069 7420  n, check for it 
+00012030: 696e 2074 6865 2063 7572 7265 6e74 5f6d  in the current_m
+00012040: 6f64 756c 6520 6469 6374 696f 6e61 7279  odule dictionary
+00012050: 0a20 2020 2020 2020 2023 2077 6869 6368  .        # which
+00012060: 2077 6527 7665 2064 756d 7065 6420 6f75   we've dumped ou
+00012070: 7420 6f66 204c 696c 7950 6f6e 640a 2020  t of LilyPond.  
+00012080: 2020 2020 2020 6966 2069 6465 6e74 6966        if identif
+00012090: 6965 7220 6e6f 7420 696e 2073 656c 662e  ier not in self.
+000120a0: 636c 6965 6e74 2e5f 6375 7272 656e 745f  client._current_
+000120b0: 6d6f 6475 6c65 3a0a 2020 2020 2020 2020  module:.        
+000120c0: 2020 2020 7261 6973 6520 4578 6365 7074      raise Except
+000120d0: 696f 6e28 6622 756e 6b6e 6f77 6e20 6573  ion(f"unknown es
+000120e0: 6361 7065 6420 776f 7264 3a20 7b74 2e76  caped word: {t.v
+000120f0: 616c 7565 2172 7d2e 2229 0a20 2020 2020  alue!r}.").     
+00012100: 2020 206c 6f6f 6b75 7020 3d20 7365 6c66     lookup = self
+00012110: 2e63 6c69 656e 742e 5f63 7572 7265 6e74  .client._current
+00012120: 5f6d 6f64 756c 655b 6964 656e 7469 6669  _module[identifi
+00012130: 6572 5d0a 2020 2020 2020 2020 2320 6966  er].        # if
+00012140: 2074 6865 206c 6f6f 6b75 7020 7265 736f   the lookup reso
+00012150: 6c76 6573 2074 6f20 6120 6675 6e63 7469  lves to a functi
+00012160: 6f6e 2064 6566 696e 6974 696f 6e2c 0a20  on definition,. 
+00012170: 2020 2020 2020 2023 2077 6520 6861 7665         # we have
+00012180: 2074 6f20 7075 7368 2061 7274 6966 6963   to push artific
+00012190: 6961 6c20 746f 6b65 6e73 206f 6e74 6f20  ial tokens onto 
+000121a0: 7468 6520 746f 6b65 6e20 7374 6163 6b2e  the token stack.
+000121b0: 0a20 2020 2020 2020 2023 2074 6865 2074  .        # the t
+000121c0: 6f6b 656e 7320 6172 6520 7075 7368 6564  okens are pushed
+000121d0: 2069 6e20 7265 7665 7273 6520 6f72 6465   in reverse orde
+000121e0: 7220 284c 4946 4f29 2e0a 2020 2020 2020  r (LIFO)..      
+000121f0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00012200: 6c6f 6f6b 7570 2c20 6469 6374 2920 616e  lookup, dict) an
+00012210: 6420 2274 7970 6522 2069 6e20 6c6f 6f6b  d "type" in look
+00012220: 7570 3a0a 2020 2020 2020 2020 2020 2020  up:.            
+00012230: 6966 206c 6f6f 6b75 705b 2274 7970 6522  if lookup["type"
+00012240: 5d20 3d3d 2022 6c79 3a6d 7573 6963 2d66  ] == "ly:music-f
+00012250: 756e 6374 696f 6e3f 223a 0a20 2020 2020  unction?":.     
+00012260: 2020 2020 2020 2020 2020 2073 6967 6e61             signa
+00012270: 7475 7265 203d 206c 6f6f 6b75 705b 2273  ture = lookup["s
+00012280: 6967 6e61 7475 7265 225d 0a20 2020 2020  ignature"].     
+00012290: 2020 2020 2020 2020 2020 2066 756e 7479             funty
+000122a0: 7065 203d 2022 5343 4d5f 4655 4e43 5449  pe = "SCM_FUNCTI
+000122b0: 4f4e 220a 2020 2020 2020 2020 2020 2020  ON".            
+000122c0: 2020 2020 6966 2073 6967 6e61 7475 7265      if signature
+000122d0: 5b30 5d20 3d3d 2022 6c79 3a6d 7573 6963  [0] == "ly:music
+000122e0: 3f22 3a0a 2020 2020 2020 2020 2020 2020  ?":.            
+000122f0: 2020 2020 2020 2020 6675 6e74 7970 6520          funtype 
+00012300: 3d20 224d 5553 4943 5f46 554e 4354 494f  = "MUSIC_FUNCTIO
+00012310: 4e22 0a20 2020 2020 2020 2020 2020 2020  N".             
+00012320: 2020 2065 6c69 6620 7369 676e 6174 7572     elif signatur
+00012330: 655b 305d 203d 3d20 226c 793a 6576 656e  e[0] == "ly:even
+00012340: 743f 223a 0a20 2020 2020 2020 2020 2020  t?":.           
+00012350: 2020 2020 2020 2020 2066 756e 7479 7065           funtype
+00012360: 203d 2022 4556 454e 545f 4655 4e43 5449   = "EVENT_FUNCTI
+00012370: 4f4e 220a 2020 2020 2020 2020 2020 2020  ON".            
+00012380: 2020 2020 7365 6c66 2e70 7573 685f 7369      self.push_si
+00012390: 676e 6174 7572 6528 7369 676e 6174 7572  gnature(signatur
+000123a0: 655b 313a 5d2c 2074 290a 2020 2020 2020  e[1:], t).      
+000123b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000123c0: 2066 756e 7479 7065 0a20 2020 2020 2020   funtype.       
+000123d0: 2020 2020 2065 6c69 6620 6c6f 6f6b 7570       elif lookup
+000123e0: 5b22 7479 7065 225d 203d 3d20 226c 793a  ["type"] == "ly:
+000123f0: 7072 6f62 3f22 3a0a 2020 2020 2020 2020  prob?":.        
+00012400: 2020 2020 2020 2020 6966 2022 6576 656e          if "even
+00012410: 7422 2069 6e20 6c6f 6f6b 7570 5b22 7479  t" in lookup["ty
+00012420: 7065 7322 5d3a 0a20 2020 2020 2020 2020  pes"]:.         
+00012430: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00012440: 6e20 2245 5645 4e54 5f49 4445 4e54 4946  n "EVENT_IDENTIF
+00012450: 4945 5222 0a20 2020 2020 2020 2020 2020  IER".           
+00012460: 2020 2020 2065 6c69 6620 2263 6f6e 7465       elif "conte
+00012470: 7874 2d73 7065 6369 6669 6361 7469 6f6e  xt-specification
+00012480: 2220 696e 206c 6f6f 6b75 705b 2274 7970  " in lookup["typ
+00012490: 6573 225d 2061 6e64 2068 6173 6174 7472  es"] and hasattr
+000124a0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000124b0: 2020 2020 2020 7365 6c66 2e63 6c69 656e        self.clien
+000124c0: 742e 5f67 7569 6c65 2c20 6964 656e 7469  t._guile, identi
+000124d0: 6669 6572 0a20 2020 2020 2020 2020 2020  fier.           
+000124e0: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
+000124f0: 2020 2020 2020 2020 2020 2020 742e 7661              t.va
+00012500: 6c75 6520 3d20 6765 7461 7474 7228 7365  lue = getattr(se
+00012510: 6c66 2e63 6c69 656e 742e 5f67 7569 6c65  lf.client._guile
+00012520: 2c20 6964 656e 7469 6669 6572 2928 290a  , identifier)().
+00012530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012540: 2020 2020 7265 7475 726e 2022 4d55 5349      return "MUSI
+00012550: 435f 4944 454e 5449 4649 4552 220a 2020  C_IDENTIFIER".  
+00012560: 2020 2020 2020 2320 7765 2061 6c73 6f20        # we also 
+00012570: 6368 6563 6b20 666f 7220 6f74 6865 7220  check for other 
+00012580: 7479 7065 732c 2074 6f20 6861 6e64 6c65  types, to handle
+00012590: 205c 6c6f 6e67 612c 205c 6272 6576 6520   \longa, \breve 
+000125a0: 6574 632e 0a20 2020 2020 2020 2065 6c69  etc..        eli
+000125b0: 6620 6973 696e 7374 616e 6365 286c 6f6f  f isinstance(loo
+000125c0: 6b75 702c 204c 696c 7950 6f6e 6444 7572  kup, LilyPondDur
+000125d0: 6174 696f 6e29 3a0a 2020 2020 2020 2020  ation):.        
+000125e0: 2020 2020 742e 7661 6c75 6520 3d20 636f      t.value = co
+000125f0: 7079 2e63 6f70 7928 6c6f 6f6b 7570 290a  py.copy(lookup).
+00012600: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00012610: 726e 2022 4455 5241 5449 4f4e 5f49 4445  rn "DURATION_IDE
+00012620: 4e54 4946 4945 5222 0a20 2020 2020 2020  NTIFIER".       
+00012630: 2023 2065 6c73 652e 2e2e 0a20 2020 2020   # else....     
+00012640: 2020 2074 2e76 616c 7565 203d 2063 6f70     t.value = cop
+00012650: 792e 636f 7079 286c 6f6f 6b75 7029 0a20  y.copy(lookup). 
+00012660: 2020 2020 2020 2072 6574 7572 6e20 2253         return "S
+00012670: 434d 5f49 4445 4e54 4946 4945 5222 0a0a  CM_IDENTIFIER"..
+00012680: 2020 2020 6465 6620 7075 7368 5f73 6967      def push_sig
+00012690: 6e61 7475 7265 2873 656c 662c 2073 6967  nature(self, sig
+000126a0: 6e61 7475 7265 2c20 7429 3a0a 0a20 2020  nature, t):..   
+000126b0: 2020 2020 2074 6f6b 656e 203d 206c 6578       token = lex
+000126c0: 2e4c 6578 546f 6b65 6e28 290a 2020 2020  .LexToken().    
+000126d0: 2020 2020 746f 6b65 6e2e 7479 7065 203d      token.type =
+000126e0: 2022 4558 5045 4354 5f4e 4f5f 4d4f 5245   "EXPECT_NO_MORE
+000126f0: 5f41 5247 5322 0a20 2020 2020 2020 2074  _ARGS".        t
+00012700: 6f6b 656e 2e76 616c 7565 203d 204e 6f6e  oken.value = Non
+00012710: 650a 2020 2020 2020 2020 746f 6b65 6e2e  e.        token.
+00012720: 6c69 6e65 6e6f 203d 2074 2e6c 696e 656e  lineno = t.linen
+00012730: 6f0a 2020 2020 2020 2020 746f 6b65 6e2e  o.        token.
+00012740: 6c65 7870 6f73 203d 2074 2e6c 6578 706f  lexpos = t.lexpo
+00012750: 730a 2020 2020 2020 2020 7365 6c66 2e63  s.        self.c
+00012760: 6c69 656e 742e 5f70 7573 685f 6578 7472  lient._push_extr
+00012770: 615f 746f 6b65 6e28 746f 6b65 6e29 0a0a  a_token(token)..
+00012780: 2020 2020 2020 2020 6f70 7469 6f6e 616c          optional
+00012790: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
+000127a0: 2066 6f72 2070 7265 6469 6361 7465 2069   for predicate i
+000127b0: 6e20 7369 676e 6174 7572 653a 0a0a 2020  n signature:..  
+000127c0: 2020 2020 2020 2020 2020 6966 2070 7265            if pre
+000127d0: 6469 6361 7465 203d 3d20 226f 7074 696f  dicate == "optio
+000127e0: 6e61 6c3f 223a 0a20 2020 2020 2020 2020  nal?":.         
+000127f0: 2020 2020 2020 206f 7074 696f 6e61 6c20         optional 
+00012800: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
+00012810: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+00012820: 0a20 2020 2020 2020 2020 2020 2074 6f6b  .            tok
+00012830: 656e 203d 206c 6578 2e4c 6578 546f 6b65  en = lex.LexToke
+00012840: 6e28 290a 2020 2020 2020 2020 2020 2020  n().            
+00012850: 746f 6b65 6e2e 7661 6c75 6520 3d20 7072  token.value = pr
+00012860: 6564 6963 6174 650a 2020 2020 2020 2020  edicate.        
+00012870: 2020 2020 746f 6b65 6e2e 6c69 6e65 6e6f      token.lineno
+00012880: 203d 2074 2e6c 696e 656e 6f0a 2020 2020   = t.lineno.    
+00012890: 2020 2020 2020 2020 746f 6b65 6e2e 6c65          token.le
+000128a0: 7870 6f73 203d 2074 2e6c 6578 706f 730a  xpos = t.lexpos.
+000128b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000128c0: 7072 6564 6963 6174 6520 3d3d 2022 6c79  predicate == "ly
+000128d0: 3a6d 7573 6963 3f22 3a0a 2020 2020 2020  :music?":.      
+000128e0: 2020 2020 2020 2020 2020 746f 6b65 6e2e            token.
+000128f0: 7479 7065 203d 2022 4558 5045 4354 5f53  type = "EXPECT_S
+00012900: 434d 2220 2023 203f 213f 210a 2020 2020  CM"  # ?!?!.    
+00012910: 2020 2020 2020 2020 656c 6966 2070 7265          elif pre
+00012920: 6469 6361 7465 203d 3d20 226c 793a 7069  dicate == "ly:pi
+00012930: 7463 683f 223a 0a20 2020 2020 2020 2020  tch?":.         
+00012940: 2020 2020 2020 2074 6f6b 656e 2e74 7970         token.typ
+00012950: 6520 3d20 2245 5850 4543 545f 5049 5443  e = "EXPECT_PITC
+00012960: 4822 0a20 2020 2020 2020 2020 2020 2065  H".            e
+00012970: 6c69 6620 7072 6564 6963 6174 6520 3d3d  lif predicate ==
+00012980: 2022 6c79 3a64 7572 6174 696f 6e3f 223a   "ly:duration?":
+00012990: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000129a0: 2074 6f6b 656e 2e74 7970 6520 3d20 2245   token.type = "E
+000129b0: 5850 4543 545f 4455 5241 5449 4f4e 220a  XPECT_DURATION".
+000129c0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000129d0: 2070 7265 6469 6361 7465 2069 6e20 5b22   predicate in ["
+000129e0: 6d61 726b 7570 3f22 2c20 2263 6865 6170  markup?", "cheap
+000129f0: 2d6d 6172 6b75 703f 225d 3a0a 2020 2020  -markup?"]:.    
+00012a00: 2020 2020 2020 2020 2020 2020 746f 6b65              toke
+00012a10: 6e2e 7479 7065 203d 2022 4558 5045 4354  n.type = "EXPECT
+00012a20: 5f4d 4152 4b55 5022 0a20 2020 2020 2020  _MARKUP".       
+00012a30: 2020 2020 2065 6c69 6620 7072 6564 6963       elif predic
+00012a40: 6174 6520 3d3d 2022 6d61 726b 7570 2d6c  ate == "markup-l
+00012a50: 6973 743f 223a 0a20 2020 2020 2020 2020  ist?":.         
+00012a60: 2020 2020 2020 2074 6f6b 656e 2e74 7970         token.typ
+00012a70: 6520 3d20 2245 5850 4543 545f 4d41 524b  e = "EXPECT_MARK
+00012a80: 5550 5f4c 4953 5422 0a20 2020 2020 2020  UP_LIST".       
+00012a90: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00012aa0: 2020 2020 2020 2020 2020 2074 6f6b 656e             token
+00012ab0: 2e74 7970 6520 3d20 2245 5850 4543 545f  .type = "EXPECT_
+00012ac0: 5343 4d22 0a0a 2020 2020 2020 2020 2020  SCM"..          
+00012ad0: 2020 7365 6c66 2e63 6c69 656e 742e 5f70    self.client._p
+00012ae0: 7573 685f 6578 7472 615f 746f 6b65 6e28  ush_extra_token(
+00012af0: 746f 6b65 6e29 0a0a 2020 2020 2020 2020  token)..        
+00012b00: 2020 2020 6966 206f 7074 696f 6e61 6c3a      if optional:
+00012b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012b20: 206f 7074 696f 6e61 6c5f 746f 6b65 6e20   optional_token 
+00012b30: 3d20 6c65 782e 4c65 7854 6f6b 656e 2829  = lex.LexToken()
+00012b40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012b50: 206f 7074 696f 6e61 6c5f 746f 6b65 6e2e   optional_token.
+00012b60: 7661 6c75 6520 3d20 226f 7074 696f 6e61  value = "optiona
+00012b70: 6c3f 220a 2020 2020 2020 2020 2020 2020  l?".            
+00012b80: 2020 2020 6f70 7469 6f6e 616c 5f74 6f6b      optional_tok
+00012b90: 656e 2e6c 696e 656e 6f20 3d20 742e 6c69  en.lineno = t.li
+00012ba0: 6e65 6e6f 0a20 2020 2020 2020 2020 2020  neno.           
+00012bb0: 2020 2020 206f 7074 696f 6e61 6c5f 746f       optional_to
+00012bc0: 6b65 6e2e 6c65 7870 6f73 203d 2074 2e6c  ken.lexpos = t.l
+00012bd0: 6578 706f 730a 2020 2020 2020 2020 2020  expos.          
+00012be0: 2020 2020 2020 6f70 7469 6f6e 616c 5f74        optional_t
+00012bf0: 6f6b 656e 2e74 7970 6520 3d20 2245 5850  oken.type = "EXP
+00012c00: 4543 545f 4f50 5449 4f4e 414c 220a 2020  ECT_OPTIONAL".  
+00012c10: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00012c20: 6c66 2e63 6c69 656e 742e 5f70 7573 685f  lf.client._push_
+00012c30: 6578 7472 615f 746f 6b65 6e28 6f70 7469  extra_token(opti
+00012c40: 6f6e 616c 5f74 6f6b 656e 290a 2020 2020  onal_token).    
+00012c50: 2020 2020 2020 2020 2020 2020 6f70 7469              opti
+00012c60: 6f6e 616c 203d 2046 616c 7365 0a0a 0a23  onal = False...#
+00012c70: 2061 7070 6c79 206d 6f6e 6b65 7920 7061   apply monkey pa
+00012c80: 7463 680a 706c 792e 7961 6363 2e4c 5250  tch.ply.yacc.LRP
+00012c90: 6172 7365 722e 5f6c 696c 7970 6f6e 645f  arser._lilypond_
+00012ca0: 7061 7463 685f 7061 7273 6520 3d20 5f70  patch_parse = _p
+00012cb0: 6172 7365 0a70 6c79 2e79 6163 632e 4c52  arse.ply.yacc.LR
+00012cc0: 5061 7273 6572 2e5f 6c69 6c79 706f 6e64  Parser._lilypond
+00012cd0: 5f70 6174 6368 5f70 6172 7365 5f64 6562  _patch_parse_deb
+00012ce0: 7567 203d 205f 7061 7273 655f 6465 6275  ug = _parse_debu
+00012cf0: 670a 0a0a 636c 6173 7320 4c69 6c79 506f  g...class LilyPo
+00012d00: 6e64 5061 7273 6572 2850 6172 7365 7229  ndParser(Parser)
+00012d10: 3a0a 2020 2020 7222 2222 0a20 2020 2041  :.    r""".    A
+00012d20: 204c 696c 7950 6f6e 6420 7379 6e74 6178   LilyPond syntax
+00012d30: 2070 6172 7365 722e 0a0a 2020 2020 2e2e   parser...    ..
+00012d40: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
+00012d50: 616d 706c 650a 0a20 2020 2020 2020 203e  ample..        >
+00012d60: 3e3e 2070 6172 7365 7220 3d20 6162 6a61  >> parser = abja
+00012d70: 642e 7061 7273 6572 2e4c 696c 7950 6f6e  d.parser.LilyPon
+00012d80: 6450 6172 7365 7228 290a 2020 2020 2020  dParser().      
+00012d90: 2020 3e3e 3e20 7374 7269 6e67 203d 2072    >>> string = r
+00012da0: 225c 6e65 7720 5374 6166 6620 7b20 6327  "\new Staff { c'
+00012db0: 3420 2820 6427 3820 6527 2066 7327 3229  4 ( d'8 e' fs'2)
+00012dc0: 205c 6665 726d 6174 6120 7d22 0a20 2020   \fermata }".   
+00012dd0: 2020 2020 203e 3e3e 2073 7461 6666 203d       >>> staff =
+00012de0: 2070 6172 7365 7228 7374 7269 6e67 290a   parser(string).
+00012df0: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+00012e00: 642e 7368 6f77 2873 7461 6666 2920 2320  d.show(staff) # 
+00012e10: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+00012e20: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+00012e30: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+00012e40: 6f6e 6428 7374 6166 6629 0a20 2020 2020  ond(staff).     
+00012e50: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
+00012e60: 696e 6729 0a20 2020 2020 2020 205c 6e65  ing).        \ne
+00012e70: 7720 5374 6166 660a 2020 2020 2020 2020  w Staff.        
+00012e80: 7b0a 2020 2020 2020 2020 2020 2020 6327  {.            c'
+00012e90: 340a 2020 2020 2020 2020 2020 2020 280a  4.            (.
+00012ea0: 2020 2020 2020 2020 2020 2020 6427 380a              d'8.
+00012eb0: 2020 2020 2020 2020 2020 2020 6527 380a              e'8.
+00012ec0: 2020 2020 2020 2020 2020 2020 6673 2732              fs'2
+00012ed0: 0a20 2020 2020 2020 2020 2020 202d 205c  .            - \
+00012ee0: 6665 726d 6174 610a 2020 2020 2020 2020  fermata.        
+00012ef0: 2020 2020 290a 2020 2020 2020 2020 7d0a      ).        }.
+00012f00: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
+00012f10: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+00012f20: 2020 2020 2020 5468 6520 4c69 6c79 506f        The LilyPo
+00012f30: 6e64 2070 6172 7365 7220 756e 6465 7273  nd parser unders
+00012f40: 7461 6e64 7320 6d6f 7374 2073 7061 6e6e  tands most spann
+00012f50: 6572 732c 2061 7274 6963 756c 6174 696f  ers, articulatio
+00012f60: 6e73 2061 6e64 0a20 2020 2020 2020 2064  ns and.        d
+00012f70: 796e 616d 6963 733a 0a0a 2020 2020 2020  ynamics:..      
+00012f80: 2020 3e3e 3e20 7374 7269 6e67 203d 2072    >>> string = r
+00012f90: 2727 270a 2020 2020 2020 2020 2e2e 2e20  '''.        ... 
+00012fa0: 5c6e 6577 2053 7461 6666 207b 0a20 2020  \new Staff {.   
+00012fb0: 2020 2020 202e 2e2e 2020 2020 2063 2738       ...     c'8
+00012fc0: 205c 6620 5c3e 2028 0a20 2020 2020 2020   \f \> (.       
+00012fd0: 202e 2e2e 2020 2020 2064 2720 2d5f 205b   ...     d' -_ [
+00012fe0: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+00012ff0: 2065 2720 5e3e 0a20 2020 2020 2020 202e   e' ^>.        .
+00013000: 2e2e 2020 2020 2066 2720 5c70 7070 205c  ..     f' \ppp \
+00013010: 3c0a 2020 2020 2020 2020 2e2e 2e20 2020  <.        ...   
+00013020: 2020 6727 205c 7374 6172 7454 7269 6c6c    g' \startTrill
+00013030: 5370 616e 205c 280a 2020 2020 2020 2020  Span \(.        
+00013040: 2e2e 2e20 2020 2020 6127 205c 290a 2020  ...     a' \).  
+00013050: 2020 2020 2020 2e2e 2e20 2020 2020 6227        ...     b'
+00013060: 205d 205c 7374 6f70 5472 696c 6c53 7061   ] \stopTrillSpa
+00013070: 6e0a 2020 2020 2020 2020 2e2e 2e20 2020  n.        ...   
+00013080: 2020 6327 2720 2920 5c61 6363 656e 7420    c'' ) \accent 
+00013090: 5c73 667a 0a20 2020 2020 2020 202e 2e2e  \sfz.        ...
+000130a0: 207d 0a20 2020 2020 2020 202e 2e2e 2027   }.        ... '
+000130b0: 2727 0a20 2020 2020 2020 203e 3e3e 2073  ''.        >>> s
+000130c0: 7461 6666 203d 2070 6172 7365 7228 7374  taff = parser(st
+000130d0: 7269 6e67 290a 2020 2020 2020 2020 3e3e  ring).        >>
+000130e0: 3e20 6162 6a61 642e 7368 6f77 2873 7461  > abjad.show(sta
+000130f0: 6666 2920 2320 646f 6374 6573 743a 202b  ff) # doctest: +
+00013100: 534b 4950 0a0a 2020 2020 2020 2020 2e2e  SKIP..        ..
+00013110: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
+00013120: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
+00013130: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
+00013140: 6428 7374 6166 6629 0a20 2020 2020 2020  d(staff).       
+00013150: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
+00013160: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+00013170: 2020 205c 6e65 7720 5374 6166 660a 2020     \new Staff.  
+00013180: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+00013190: 2020 2020 2020 2020 2020 2020 6327 380a              c'8.
+000131a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000131b0: 5c66 0a20 2020 2020 2020 2020 2020 2020  \f.             
+000131c0: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
+000131d0: 2020 2020 205c 3e0a 2020 2020 2020 2020       \>.        
+000131e0: 2020 2020 2020 2020 6427 380a 2020 2020          d'8.    
+000131f0: 2020 2020 2020 2020 2020 2020 2d20 5c70              - \p
+00013200: 6f72 7461 746f 0a20 2020 2020 2020 2020  ortato.         
+00013210: 2020 2020 2020 205b 0a20 2020 2020 2020         [.       
+00013220: 2020 2020 2020 2020 2065 2738 0a20 2020           e'8.   
+00013230: 2020 2020 2020 2020 2020 2020 205e 205c               ^ \
+00013240: 6163 6365 6e74 0a20 2020 2020 2020 2020  accent.         
+00013250: 2020 2020 2020 2066 2738 0a20 2020 2020         f'8.     
+00013260: 2020 2020 2020 2020 2020 205c 7070 700a             \ppp.
+00013270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013280: 5c3c 0a20 2020 2020 2020 2020 2020 2020  \<.             
+00013290: 2020 2067 2738 0a20 2020 2020 2020 2020     g'8.         
+000132a0: 2020 2020 2020 205c 280a 2020 2020 2020         \(.      
+000132b0: 2020 2020 2020 2020 2020 5c73 7461 7274            \start
+000132c0: 5472 696c 6c53 7061 6e0a 2020 2020 2020  TrillSpan.      
+000132d0: 2020 2020 2020 2020 2020 6127 380a 2020            a'8.  
+000132e0: 2020 2020 2020 2020 2020 2020 2020 5c29                \)
+000132f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013300: 2062 2738 0a20 2020 2020 2020 2020 2020   b'8.           
+00013310: 2020 2020 205c 7374 6f70 5472 696c 6c53       \stopTrillS
+00013320: 7061 6e0a 2020 2020 2020 2020 2020 2020  pan.            
+00013330: 2020 2020 5d0a 2020 2020 2020 2020 2020      ].          
+00013340: 2020 2020 2020 6327 2738 0a20 2020 2020        c''8.     
+00013350: 2020 2020 2020 2020 2020 202d 205c 6163             - \ac
+00013360: 6365 6e74 0a20 2020 2020 2020 2020 2020  cent.           
+00013370: 2020 2020 205c 7366 7a0a 2020 2020 2020       \sfz.      
+00013380: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00013390: 2020 2020 2020 2020 7d0a 0a20 2020 202e          }..    .
+000133a0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+000133b0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+000133c0: 5468 6520 4c69 6c79 506f 6e64 2070 6172  The LilyPond par
+000133d0: 7365 7220 756e 6465 7273 7461 6e64 7320  ser understands 
+000133e0: 636f 6e74 6578 7473 2061 6e64 206d 6172  contexts and mar
+000133f0: 6b75 703a 0a0a 2020 2020 2020 2020 3e3e  kup:..        >>
+00013400: 3e20 7374 7269 6e67 203d 2072 2727 275c  > string = r'''\
+00013410: 6e65 7720 5363 6f72 6520 3c3c 0a20 2020  new Score <<.   
+00013420: 2020 2020 202e 2e2e 2020 2020 205c 6e65       ...     \ne
+00013430: 7720 5374 6166 6620 3d20 2254 7265 626c  w Staff = "Trebl
+00013440: 6520 5374 6166 6622 207b 0a20 2020 2020  e Staff" {.     
+00013450: 2020 202e 2e2e 2020 2020 2020 2020 205c     ...         \
+00013460: 6e65 7720 566f 6963 6520 3d20 2254 7265  new Voice = "Tre
+00013470: 626c 6520 566f 6963 6522 207b 0a20 2020  ble Voice" {.   
+00013480: 2020 2020 202e 2e2e 2020 2020 2020 2020       ...        
+00013490: 2020 2020 2063 2720 5e5c 6d61 726b 7570       c' ^\markup
+000134a0: 207b 205c 626f 6c64 2054 7265 626c 6521   { \bold Treble!
+000134b0: 207d 0a20 2020 2020 2020 202e 2e2e 2020   }.        ...  
+000134c0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+000134d0: 202e 2e2e 2020 2020 207d 0a20 2020 2020   ...     }.     
+000134e0: 2020 202e 2e2e 2020 2020 205c 6e65 7720     ...     \new 
+000134f0: 5374 6166 6620 3d20 2242 6173 7320 5374  Staff = "Bass St
+00013500: 6166 6622 207b 0a20 2020 2020 2020 202e  aff" {.        .
+00013510: 2e2e 2020 2020 2020 2020 205c 6e65 7720  ..         \new 
+00013520: 566f 6963 6520 3d20 2242 6173 7320 566f  Voice = "Bass Vo
+00013530: 6963 6522 207b 0a20 2020 2020 2020 202e  ice" {.        .
+00013540: 2e2e 2020 2020 2020 2020 2020 2020 205c  ..             \
+00013550: 636c 6566 2062 6173 730a 2020 2020 2020  clef bass.      
+00013560: 2020 2e2e 2e20 2020 2020 2020 2020 2020    ...           
+00013570: 2020 632c 205f 5c6d 6172 6b75 7020 7b20    c, _\markup { 
+00013580: 5c69 7461 6c69 6320 4261 7373 2120 7d0a  \italic Bass! }.
+00013590: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+000135a0: 2020 2020 7d0a 2020 2020 2020 2020 2e2e      }.        ..
+000135b0: 2e20 2020 2020 7d0a 2020 2020 2020 2020  .     }.        
+000135c0: 2e2e 2e20 3e3e 0a20 2020 2020 2020 202e  ... >>.        .
+000135d0: 2e2e 2027 2727 0a20 2020 2020 2020 203e  .. '''.        >
+000135e0: 3e3e 2073 636f 7265 203d 2070 6172 7365  >> score = parse
+000135f0: 7228 7374 7269 6e67 290a 2020 2020 2020  r(string).      
+00013600: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+00013610: 2873 636f 7265 2920 2320 646f 6374 6573  (score) # doctes
+00013620: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+00013630: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+00013640: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+00013650: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+00013660: 7970 6f6e 6428 7363 6f72 6529 0a20 2020  ypond(score).   
+00013670: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
+00013680: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
+00013690: 2020 2020 2020 205c 6e65 7720 5363 6f72         \new Scor
+000136a0: 650a 2020 2020 2020 2020 2020 2020 3c3c  e.            <<
+000136b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000136c0: 205c 636f 6e74 6578 7420 5374 6166 6620   \context Staff 
+000136d0: 3d20 2254 7265 626c 6520 5374 6166 6622  = "Treble Staff"
+000136e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000136f0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00013700: 2020 2020 2020 205c 636f 6e74 6578 7420         \context 
+00013710: 566f 6963 6520 3d20 2254 7265 626c 6520  Voice = "Treble 
+00013720: 566f 6963 6522 0a20 2020 2020 2020 2020  Voice".         
+00013730: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00013740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013750: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
+00013760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013770: 205e 205c 6d61 726b 7570 207b 0a20 2020   ^ \markup {.   
 00013780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013790: 2020 205c 626f 6c64 0a20 2020 2020 2020     \bold.       
+00013790: 2020 2020 2020 2020 205c 626f 6c64 0a20           \bold. 
 000137a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000137b0: 2020 2020 2020 2020 2054 7265 626c 6521           Treble!
-000137c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000137d0: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
-000137e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000137f0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00013800: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
-00013810: 2020 2020 2020 205c 636f 6e74 6578 7420         \context 
-00013820: 5374 6166 6620 3d20 2242 6173 7320 5374  Staff = "Bass St
-00013830: 6166 6622 0a20 2020 2020 2020 2020 2020  aff".           
-00013840: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00013850: 2020 2020 2020 2020 2020 205c 636f 6e74             \cont
-00013860: 6578 7420 566f 6963 6520 3d20 2242 6173  ext Voice = "Bas
-00013870: 7320 566f 6963 6522 0a20 2020 2020 2020  s Voice".       
-00013880: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-00013890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000138a0: 2020 2020 2020 205c 636c 6566 2022 6261         \clef "ba
-000138b0: 7373 220a 2020 2020 2020 2020 2020 2020  ss".            
-000138c0: 2020 2020 2020 2020 2020 2020 632c 340a              c,4.
-000138d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000138e0: 2020 2020 2020 2020 5f20 5c6d 6172 6b75          _ \marku
-000138f0: 7020 7b0a 2020 2020 2020 2020 2020 2020  p {.            
+000137b0: 2020 2020 2020 2020 2020 2020 2020 2054                 T
+000137c0: 7265 626c 6521 0a20 2020 2020 2020 2020  reble!.         
+000137d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000137e0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+000137f0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00013800: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00013810: 2020 2020 2020 2020 2020 2020 205c 636f               \co
+00013820: 6e74 6578 7420 5374 6166 6620 3d20 2242  ntext Staff = "B
+00013830: 6173 7320 5374 6166 6622 0a20 2020 2020  ass Staff".     
+00013840: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00013850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013860: 205c 636f 6e74 6578 7420 566f 6963 6520   \context Voice 
+00013870: 3d20 2242 6173 7320 566f 6963 6522 0a20  = "Bass Voice". 
+00013880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013890: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+000138a0: 2020 2020 2020 2020 2020 2020 205c 636c               \cl
+000138b0: 6566 2022 6261 7373 220a 2020 2020 2020  ef "bass".      
+000138c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000138d0: 2020 632c 340a 2020 2020 2020 2020 2020    c,4.          
+000138e0: 2020 2020 2020 2020 2020 2020 2020 5f20                _ 
+000138f0: 5c6d 6172 6b75 7020 7b0a 2020 2020 2020  \markup {.      
 00013900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013910: 5c69 7461 6c69 630a 2020 2020 2020 2020  \italic.        
+00013910: 2020 2020 2020 5c69 7461 6c69 630a 2020        \italic.  
 00013920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013930: 2020 2020 2020 2020 4261 7373 210a 2020          Bass!.  
-00013940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013950: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00013960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013970: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
-00013980: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-00013990: 3e3e 0a0a 2020 2020 2e2e 2020 636f 6e74  >>..    ..  cont
-000139a0: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-000139b0: 0a20 2020 2020 2020 2054 6865 204c 696c  .        The Lil
-000139c0: 7950 6f6e 6420 7061 7273 6572 2061 6c73  yPond parser als
-000139d0: 6f20 756e 6465 7273 7461 6e64 7320 6365  o understands ce
-000139e0: 7274 6169 6e20 6173 7065 6374 7320 6f66  rtain aspects of
-000139f0: 204c 696c 7950 6f6e 6420 6669 6c65 0a20   LilyPond file. 
-00013a00: 2020 2020 2020 206c 6179 6f75 7473 2c20         layouts, 
-00013a10: 7375 6368 2061 7320 6865 6164 6572 2062  such as header b
-00013a20: 6c6f 636b 733a 0a0a 2020 2020 2020 2020  locks:..        
-00013a30: 3e3e 3e20 7374 7269 6e67 203d 2072 2727  >>> string = r''
-00013a40: 270a 2020 2020 2020 2020 2e2e 2e20 5c68  '.        ... \h
-00013a50: 6561 6465 7220 7b0a 2020 2020 2020 2020  eader {.        
-00013a60: 2e2e 2e20 2020 2020 636f 6d70 6f73 6572  ...     composer
-00013a70: 203d 205c 6d61 726b 7570 207b 2062 7920   = \markup { by 
-00013a80: 5c62 6f6c 6420 2246 6f6f 2076 6f6e 2042  \bold "Foo von B
-00013a90: 6172 2220 7d0a 2020 2020 2020 2020 2e2e  ar" }.        ..
-00013aa0: 2e20 2020 2020 7469 746c 6520 3d20 5c6d  .     title = \m
-00013ab0: 6172 6b75 7020 7b20 5468 6520 6261 6c6c  arkup { The ball
-00013ac0: 6164 206f 6620 466f 6f20 766f 6e20 4261  ad of Foo von Ba
-00013ad0: 7220 7d0a 2020 2020 2020 2020 2e2e 2e20  r }.        ... 
-00013ae0: 2020 2020 7461 676c 696e 6520 3d20 5c6d      tagline = \m
-00013af0: 6172 6b75 7020 7b20 2222 207d 0a20 2020  arkup { "" }.   
-00013b00: 2020 2020 202e 2e2e 207d 0a20 2020 2020       ... }.     
-00013b10: 2020 202e 2e2e 205c 7363 6f72 6520 7b0a     ... \score {.
-00013b20: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-00013b30: 5c6e 6577 2053 7461 6666 207b 0a20 2020  \new Staff {.   
-00013b40: 2020 2020 202e 2e2e 2020 2020 2020 2020       ...        
-00013b50: 205c 7469 6d65 2033 2f34 0a20 2020 2020   \time 3/4.     
-00013b60: 2020 202e 2e2e 2020 2020 2020 2020 2067     ...         g
-00013b70: 2720 2820 6227 2064 2727 2029 0a20 2020  ' ( b' d'' ).   
-00013b80: 2020 2020 202e 2e2e 2020 2020 2020 2020       ...        
-00013b90: 2065 2727 342e 2028 2063 2727 3820 6327   e''4. ( c''8 c'
-00013ba0: 3420 290a 2020 2020 2020 2020 2e2e 2e20  4 ).        ... 
-00013bb0: 2020 2020 7d0a 2020 2020 2020 2020 2e2e      }.        ..
-00013bc0: 2e20 7d0a 2020 2020 2020 2020 2e2e 2e20  . }.        ... 
-00013bd0: 2727 270a 2020 2020 2020 2020 3e3e 3e20  '''.        >>> 
-00013be0: 626c 6f63 6b73 203d 2070 6172 7365 7228  blocks = parser(
-00013bf0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-00013c00: 3e3e 3e20 6162 6a61 642e 7368 6f77 2862  >>> abjad.show(b
-00013c10: 6c6f 636b 7329 2023 2064 6f63 7465 7374  locks) # doctest
-00013c20: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-00013c30: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
-00013c40: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
-00013c50: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
-00013c60: 706f 6e64 2862 6c6f 636b 7329 2023 2064  pond(blocks) # d
-00013c70: 6f63 7465 7374 3a20 2b53 4b49 500a 2020  octest: +SKIP.  
-00013c80: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-00013c90: 696e 7428 7374 7269 6e67 2920 2320 646f  int(string) # do
-00013ca0: 6374 6573 743a 202b 534b 4950 0a20 2020  ctest: +SKIP.   
-00013cb0: 2020 2020 2020 2020 2025 2032 3031 372d           % 2017-
-00013cc0: 3037 2d31 3120 3135 3a31 330a 2020 2020  07-11 15:13.    
-00013cd0: 2020 2020 2020 2020 3c42 4c41 4e4b 4c49          <BLANKLI
-00013ce0: 4e45 3e0a 2020 2020 2020 2020 2020 2020  NE>.            
-00013cf0: 5c76 6572 7369 6f6e 2022 322e 3139 2e36  \version "2.19.6
-00013d00: 3322 0a20 2020 2020 2020 2020 2020 205c  3".            \
-00013d10: 6c61 6e67 7561 6765 2022 656e 676c 6973  language "englis
-00013d20: 6822 0a20 2020 2020 2020 2020 2020 203c  h".            <
-00013d30: 424c 414e 4b4c 494e 453e 0a20 2020 2020  BLANKLINE>.     
-00013d40: 2020 2020 2020 205c 6865 6164 6572 207b         \header {
-00013d50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013d60: 2063 6f6d 706f 7365 726e 616d 6520 3d20   composername = 
-00013d70: 5c6d 6172 6b75 7020 7b0a 2020 2020 2020  \markup {.      
-00013d80: 2020 2020 2020 2020 2020 2020 2020 466f                Fo
-00013d90: 6f0a 2020 2020 2020 2020 2020 2020 2020  o.              
-00013da0: 2020 2020 2020 7661 6e0a 2020 2020 2020        van.      
-00013db0: 2020 2020 2020 2020 2020 2020 2020 4261                Ba
-00013dc0: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
-00013dd0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00013de0: 2020 2020 2020 2020 636f 6d70 6f73 6572          composer
-00013df0: 203d 205c 6d61 726b 7570 207b 0a20 2020   = \markup {.   
-00013e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013e10: 2062 790a 2020 2020 2020 2020 2020 2020   by.            
-00013e20: 2020 2020 2020 2020 5c62 6f6c 640a 2020          \bold.  
-00013e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013e40: 2020 2020 2020 2246 6f6f 2076 6f6e 2042        "Foo von B
-00013e50: 6172 220a 2020 2020 2020 2020 2020 2020  ar".            
-00013e60: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00013e70: 2020 2020 2020 2020 2020 7469 746c 6520            title 
-00013e80: 3d20 5c6d 6172 6b75 7020 7b0a 2020 2020  = \markup {.    
-00013e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013ea0: 5468 650a 2020 2020 2020 2020 2020 2020  The.            
-00013eb0: 2020 2020 2020 2020 6261 6c6c 6164 0a20          ballad. 
-00013ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013ed0: 2020 206f 660a 2020 2020 2020 2020 2020     of.          
-00013ee0: 2020 2020 2020 2020 2020 2246 6f6f 2076            "Foo v
-00013ef0: 6f6e 2042 6172 220a 2020 2020 2020 2020  on Bar".        
-00013f00: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-00013f10: 2020 2020 2020 2020 2020 2020 2020 7461                ta
-00013f20: 676c 696e 6520 3d20 5c6d 6172 6b75 7020  gline = \markup 
-00013f30: 7b7d 0a20 2020 2020 2020 2020 2020 207d  {}.            }
-00013f40: 0a20 2020 2020 2020 2020 2020 203c 424c  .            <BL
-00013f50: 414e 4b4c 494e 453e 0a20 2020 2020 2020  ANKLINE>.       
-00013f60: 2020 2020 205c 7363 6f72 6520 7b0a 2020       \score {.  
-00013f70: 2020 2020 2020 2020 2020 2020 2020 5c6e                \n
-00013f80: 6577 2053 7461 6666 207b 0a20 2020 2020  ew Staff {.     
-00013f90: 2020 2020 2020 2020 2020 2020 2020 205c                 \
-00013fa0: 7469 6d65 2033 2f34 0a20 2020 2020 2020  time 3/4.       
-00013fb0: 2020 2020 2020 2020 2020 2020 2067 2734               g'4
-00013fc0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
-00013fd0: 2020 2020 2020 2062 2734 0a20 2020 2020         b'4.     
-00013fe0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00013ff0: 2727 3420 290a 2020 2020 2020 2020 2020  ''4 ).          
-00014000: 2020 2020 2020 2020 2020 6527 2734 2e20            e''4. 
-00014010: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00014020: 2020 2020 2020 6327 2738 0a20 2020 2020        c''8.     
-00014030: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00014040: 2734 2029 0a20 2020 2020 2020 2020 2020  '4 ).           
-00014050: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
-00014060: 2020 207d 0a0a 2020 2020 2e2e 2020 636f     }..    ..  co
-00014070: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-00014080: 650a 0a20 2020 2020 2020 2054 6865 204c  e..        The L
-00014090: 696c 7950 6f6e 6420 7061 7273 6572 2073  ilyPond parser s
-000140a0: 7570 706f 7274 7320 6120 736d 616c 6c20  upports a small 
-000140b0: 6e75 6d62 6572 206f 6620 4c69 6c79 506f  number of LilyPo
-000140c0: 6e64 206d 7573 6963 0a20 2020 2020 2020  nd music.       
-000140d0: 2066 756e 6374 696f 6e73 2c20 7375 6368   functions, such
-000140e0: 2061 7320 5c72 656c 6174 6976 6520 616e   as \relative an
-000140f0: 6420 5c74 7261 6e73 706f 7365 2e0a 0a20  d \transpose... 
-00014100: 2020 2020 2020 202e 2e20 206e 6f74 653a         ..  note:
-00014110: 3a0a 0a20 2020 2020 2020 2020 2020 204d  :..            M
-00014120: 7573 6963 2066 756e 6374 696f 6e73 2077  usic functions w
-00014130: 6869 6368 206d 7574 6174 6520 7468 6520  hich mutate the 
-00014140: 7363 6f72 6520 6475 7269 6e67 2063 6f6d  score during com
-00014150: 7069 6c61 7469 6f6e 2072 6573 756c 7420  pilation result 
-00014160: 696e 2061 0a20 2020 2020 2020 2020 2020  in a.           
-00014170: 206e 6f72 6d61 6c69 7a65 6420 4162 6a61   normalized Abja
-00014180: 6420 7363 6f72 6520 7374 7275 6374 7572  d score structur
-00014190: 652e 2054 6865 2072 6573 756c 7469 6e67  e. The resulting
-000141a0: 2073 7472 7563 7475 7265 2063 6f72 7265   structure corre
-000141b0: 7370 6f6e 6473 0a20 2020 2020 2020 2020  sponds.         
-000141c0: 2020 2074 6f20 7468 6520 6d75 7369 6320     to the music 
-000141d0: 6173 2069 7420 6170 7065 6172 7320 6f6e  as it appears on
-000141e0: 2074 6865 2070 6167 652c 2072 6174 6865   the page, rathe
-000141f0: 7220 7468 616e 2061 7320 6974 2077 6173  r than as it was
-00014200: 2069 6e70 7574 2074 6f0a 2020 2020 2020   input to.      
-00014210: 2020 2020 2020 7468 6520 7061 7273 6572        the parser
-00014220: 3a0a 0a20 2020 2020 2020 203e 3e3e 2073  :..        >>> s
-00014230: 7472 696e 6720 3d20 7227 2727 0a20 2020  tring = r'''.   
-00014240: 2020 2020 202e 2e2e 205c 6e65 7720 5374       ... \new St
-00014250: 6166 6620 5c72 656c 6174 6976 6520 6320  aff \relative c 
-00014260: 7b0a 2020 2020 2020 2020 2e2e 2e20 2020  {.        ...   
-00014270: 2020 6333 3220 6420 6520 6620 6720 6120    c32 d e f g a 
-00014280: 6220 6320 6420 6520 6620 6720 6120 6220  b c d e f g a b 
-00014290: 6320 6420 6520 6620 6720 6120 6220 630a  c d e f g a b c.
-000142a0: 2020 2020 2020 2020 2e2e 2e20 7d0a 2020          ... }.  
-000142b0: 2020 2020 2020 2e2e 2e20 2727 270a 2020        ... '''.  
-000142c0: 2020 2020 2020 3e3e 3e20 7374 6166 6620        >>> staff 
-000142d0: 3d20 7061 7273 6572 2873 7472 696e 6729  = parser(string)
-000142e0: 0a20 2020 2020 2020 203e 3e3e 2061 626a  .        >>> abj
-000142f0: 6164 2e73 686f 7728 7374 6166 6629 2023  ad.show(staff) #
-00014300: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
-00014310: 0a20 2020 2020 2020 202e 2e20 2064 6f63  .        ..  doc
-00014320: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
-00014330: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-00014340: 6a61 642e 6c69 6c79 706f 6e64 2873 7461  jad.lilypond(sta
-00014350: 6666 290a 2020 2020 2020 2020 2020 2020  ff).            
-00014360: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-00014370: 290a 2020 2020 2020 2020 2020 2020 5c6e  ).            \n
-00014380: 6577 2053 7461 6666 0a20 2020 2020 2020  ew Staff.       
-00014390: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-000143a0: 2020 2020 2020 2063 3332 0a20 2020 2020         c32.     
-000143b0: 2020 2020 2020 2020 2020 2064 3332 0a20             d32. 
-000143c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000143d0: 3332 0a20 2020 2020 2020 2020 2020 2020  32.             
-000143e0: 2020 2066 3332 0a20 2020 2020 2020 2020     f32.         
-000143f0: 2020 2020 2020 2067 3332 0a20 2020 2020         g32.     
-00014400: 2020 2020 2020 2020 2020 2061 3332 0a20             a32. 
-00014410: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-00014420: 3332 0a20 2020 2020 2020 2020 2020 2020  32.             
-00014430: 2020 2063 2733 320a 2020 2020 2020 2020     c'32.        
-00014440: 2020 2020 2020 2020 6427 3332 0a20 2020          d'32.   
-00014450: 2020 2020 2020 2020 2020 2020 2065 2733               e'3
-00014460: 320a 2020 2020 2020 2020 2020 2020 2020  2.              
-00014470: 2020 6627 3332 0a20 2020 2020 2020 2020    f'32.         
-00014480: 2020 2020 2020 2067 2733 320a 2020 2020         g'32.    
-00014490: 2020 2020 2020 2020 2020 2020 6127 3332              a'32
-000144a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000144b0: 2062 2733 320a 2020 2020 2020 2020 2020   b'32.          
-000144c0: 2020 2020 2020 6327 2733 320a 2020 2020        c''32.    
-000144d0: 2020 2020 2020 2020 2020 2020 6427 2733              d''3
-000144e0: 320a 2020 2020 2020 2020 2020 2020 2020  2.              
-000144f0: 2020 6527 2733 320a 2020 2020 2020 2020    e''32.        
-00014500: 2020 2020 2020 2020 6627 2733 320a 2020          f''32.  
-00014510: 2020 2020 2020 2020 2020 2020 2020 6727                g'
-00014520: 2733 320a 2020 2020 2020 2020 2020 2020  '32.            
-00014530: 2020 2020 6127 2733 320a 2020 2020 2020      a''32.      
-00014540: 2020 2020 2020 2020 2020 6227 2733 320a            b''32.
-00014550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014560: 6327 2727 3332 0a20 2020 2020 2020 2020  c'''32.         
-00014570: 2020 207d 0a0a 2020 2020 2e2e 2020 636f     }..    ..  co
-00014580: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-00014590: 650a 0a20 2020 2020 2020 2054 6865 204c  e..        The L
-000145a0: 696c 7950 6f6e 6420 7061 7273 6572 2064  ilyPond parser d
-000145b0: 6566 6175 6c74 7320 746f 2045 6e67 6c69  efaults to Engli
-000145c0: 7368 206e 6f74 6520 6e61 6d65 732c 2062  sh note names, b
-000145d0: 7574 2061 6e79 206f 6620 7468 650a 2020  ut any of the.  
-000145e0: 2020 2020 2020 6f74 6865 7220 6c61 6e67        other lang
-000145f0: 7561 6765 7320 7375 7070 6f72 7465 6420  uages supported 
-00014600: 6279 204c 696c 7950 6f6e 6420 6d61 7920  by LilyPond may 
-00014610: 6265 2075 7365 643a 0a0a 2020 2020 2020  be used:..      
-00014620: 2020 3e3e 3e20 7061 7273 6572 203d 2061    >>> parser = a
-00014630: 626a 6164 2e70 6172 7365 722e 4c69 6c79  bjad.parser.Lily
-00014640: 506f 6e64 5061 7273 6572 2827 6e65 6465  PondParser('nede
-00014650: 726c 616e 6473 2729 0a20 2020 2020 2020  rlands').       
-00014660: 203e 3e3e 2073 7472 696e 6720 3d20 277b   >>> string = '{
-00014670: 2063 2064 6573 2065 2066 6973 207d 270a   c des e fis }'.
-00014680: 2020 2020 2020 2020 3e3e 3e20 636f 6e74          >>> cont
-00014690: 6169 6e65 7220 3d20 7061 7273 6572 2873  ainer = parser(s
-000146a0: 7472 696e 6729 0a20 2020 2020 2020 203e  tring).        >
-000146b0: 3e3e 2061 626a 6164 2e73 686f 7728 636f  >> abjad.show(co
-000146c0: 6e74 6169 6e65 7229 2023 2064 6f63 7465  ntainer) # docte
-000146d0: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-000146e0: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
-000146f0: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
-00014700: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
-00014710: 6c79 706f 6e64 2863 6f6e 7461 696e 6572  lypond(container
-00014720: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00014730: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-00014740: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-00014750: 2020 2020 2020 2020 2020 2020 2020 6334                c4
-00014760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014770: 2064 6634 0a20 2020 2020 2020 2020 2020   df4.           
-00014780: 2020 2020 2065 340a 2020 2020 2020 2020       e4.        
-00014790: 2020 2020 2020 2020 6673 340a 2020 2020          fs4.    
-000147a0: 2020 2020 2020 2020 7d0a 0a20 2020 2042          }..    B
-000147b0: 7269 6566 6c79 2c20 4c69 6c79 506f 6e64  riefly, LilyPond
-000147c0: 5061 7273 6572 2075 6e64 6572 7374 616e  Parser understan
-000147d0: 6473 2074 6865 7365 7320 6173 7065 6374  ds theses aspect
-000147e0: 7320 6f66 204c 696c 7950 6f6e 6420 7379  s of LilyPond sy
-000147f0: 6e74 6178 3a0a 0a20 2020 202d 204e 6f74  ntax:..    - Not
-00014800: 6573 2c20 6368 6f72 6473 2c20 7265 7374  es, chords, rest
-00014810: 732c 2073 6b69 7073 2061 6e64 206d 756c  s, skips and mul
-00014820: 7469 2d6d 6561 7375 7265 2072 6573 7473  ti-measure rests
-00014830: 0a20 2020 202d 2044 7572 6174 696f 6e73  .    - Durations
-00014840: 2c20 646f 7473 2c20 616e 6420 6d75 6c74  , dots, and mult
-00014850: 6970 6c69 6572 730a 2020 2020 2d20 416c  ipliers.    - Al
-00014860: 6c20 7069 7463 686e 616d 6573 2c20 616e  l pitchnames, an
-00014870: 6420 6f63 7461 7665 2074 6963 6b73 0a20  d octave ticks. 
-00014880: 2020 202d 2053 696d 706c 6520 6d61 726b     - Simple mark
-00014890: 7570 2028 692e 652e 2060 6063 2734 205e  up (i.e. ``c'4 ^
-000148a0: 2022 6865 6c6c 6f21 2260 6029 0a20 2020   "hello!"``).   
-000148b0: 202d 204d 6f73 7420 6172 7469 6375 6c61   - Most articula
-000148c0: 7469 6f6e 730a 2020 2020 2d20 4d6f 7374  tions.    - Most
-000148d0: 2073 7061 6e6e 6572 732c 2069 6e63 6c2e   spanners, incl.
-000148e0: 2062 6561 6d73 2c20 736c 7572 732c 2070   beams, slurs, p
-000148f0: 6872 6173 696e 6720 736c 7572 732c 2074  hrasing slurs, t
-00014900: 6965 732c 2061 6e64 2067 6c69 7373 616e  ies, and glissan
-00014910: 6469 0a20 2020 202d 204d 6f73 7420 636f  di.    - Most co
-00014920: 6e74 6578 7420 7479 7065 7320 7669 6120  ntext types via 
-00014930: 6060 5c6e 6577 6060 2061 6e64 2060 605c  ``\new`` and ``\
-00014940: 636f 6e74 6578 7460 602c 0a20 2020 2020  context``,.     
-00014950: 2061 7320 7765 6c6c 2061 7320 636f 6e74   as well as cont
-00014960: 6578 7420 6964 7320 2869 2e65 2e20 6060  ext ids (i.e. ``
-00014970: 5c6e 6577 2053 7461 6666 203d 2022 666f  \new Staff = "fo
-00014980: 6f22 207b 207d 6060 290a 2020 2020 2d20  o" { }``).    - 
-00014990: 5661 7269 6162 6c65 2061 7373 6967 6e73  Variable assigns
-000149a0: 2028 6965 2060 6067 6c6f 6261 6c20 3d20   (ie ``global = 
-000149b0: 7b20 5c74 696d 6520 332f 3420 7d20 5c6e  { \time 3/4 } \n
-000149c0: 6577 2053 7461 6666 207b 205c 676c 6f62  ew Staff { \glob
-000149d0: 616c 207d 6060 290a 2020 2020 2d20 4d61  al }``).    - Ma
-000149e0: 6e79 206d 7573 6963 2066 756e 6374 696f  ny music functio
-000149f0: 6e73 3a0a 2020 2020 2020 2020 2d20 6060  ns:.        - ``
-00014a00: 5c61 6363 6961 6363 6174 7572 6160 600a  \acciaccatura``.
-00014a10: 2020 2020 2020 2020 2d20 6060 5c61 7070          - ``\app
-00014a20: 6f67 6769 6174 7572 6160 600a 2020 2020  oggiatura``.    
-00014a30: 2020 2020 2d20 6060 5c62 6172 6060 0a20      - ``\bar``. 
-00014a40: 2020 2020 2020 202d 2060 605c 6272 6561         - ``\brea
-00014a50: 7468 6560 600a 2020 2020 2020 2020 2d20  the``.        - 
-00014a60: 6060 5c63 6c65 6660 600a 2020 2020 2020  ``\clef``.      
-00014a70: 2020 2d20 6060 5c67 7261 6365 6060 0a20    - ``\grace``. 
-00014a80: 2020 2020 2020 202d 2060 605c 6b65 7960         - ``\key`
-00014a90: 600a 2020 2020 2020 2020 2d20 6060 5c74  `.        - ``\t
-00014aa0: 7261 6e73 706f 7365 6060 0a20 2020 2020  ranspose``.     
-00014ab0: 2020 202d 2060 605c 6c61 6e67 7561 6765     - ``\language
-00014ac0: 6060 0a20 2020 2020 2020 202d 2060 605c  ``.        - ``\
-00014ad0: 6d61 6b65 436c 7573 7465 7273 6060 0a20  makeClusters``. 
-00014ae0: 2020 2020 2020 202d 2060 605c 6d61 726b         - ``\mark
-00014af0: 6060 0a20 2020 2020 2020 202d 2060 605c  ``.        - ``\
-00014b00: 6f6e 6556 6f69 6365 6060 0a20 2020 2020  oneVoice``.     
-00014b10: 2020 202d 2060 605c 7265 6c61 7469 7665     - ``\relative
-00014b20: 6060 0a20 2020 2020 2020 202d 2060 605c  ``.        - ``\
-00014b30: 736b 6970 6060 0a20 2020 2020 2020 202d  skip``.        -
-00014b40: 2060 605c 736c 6173 6865 6447 7261 6365   ``\slashedGrace
-00014b50: 6060 0a20 2020 2020 2020 202d 2060 605c  ``.        - ``\
-00014b60: 7469 6d65 6060 0a20 2020 2020 2020 202d  time``.        -
-00014b70: 2060 605c 7469 6d65 7360 600a 2020 2020   ``\times``.    
-00014b80: 2020 2020 2d20 6060 5c74 7261 6e73 706f      - ``\transpo
-00014b90: 7365 6060 0a20 2020 2020 2020 202d 2060  se``.        - `
-00014ba0: 605c 7475 706c 6574 6060 0a20 2020 2020  `\tuplet``.     
-00014bb0: 2020 202d 2060 605c 766f 6963 654f 6e65     - ``\voiceOne
-00014bc0: 6060 2c20 6060 5c76 6f69 6365 5477 6f60  ``, ``\voiceTwo`
-00014bd0: 602c 2060 605c 766f 6963 6554 6872 6565  `, ``\voiceThree
-00014be0: 6060 2c20 6060 5c76 6f69 6365 466f 7572  ``, ``\voiceFour
-00014bf0: 6060 0a0a 2020 2020 4c69 6c79 506f 6e64  ``..    LilyPond
-00014c00: 5061 7273 6572 2063 7572 7265 6e74 6c79  Parser currently
-00014c10: 202a 2a44 4f45 5320 4e4f 542a 2a20 756e   **DOES NOT** un
-00014c20: 6465 7273 7461 6e64 206d 616e 7920 6f74  derstand many ot
-00014c30: 6865 7220 6173 7065 6374 730a 2020 2020  her aspects.    
-00014c40: 6f66 204c 696c 7950 6f6e 6420 7379 6e74  of LilyPond synt
-00014c50: 6178 3a0a 0a20 2020 202d 2060 605c 6d61  ax:..    - ``\ma
-00014c60: 726b 7570 6060 0a20 2020 202d 2060 605c  rkup``.    - ``\
-00014c70: 626f 6f6b 6060 2c20 6060 5c62 6f6f 6b70  book``, ``\bookp
-00014c80: 6172 7460 602c 2060 605c 6865 6164 6572  art``, ``\header
-00014c90: 6060 2c20 6060 5c6c 6179 6f75 7460 602c  ``, ``\layout``,
-00014ca0: 2060 605c 6d69 6469 6060 2c20 6060 5c70   ``\midi``, ``\p
-00014cb0: 6170 6572 6060 0a20 2020 202d 2060 605c  aper``.    - ``\
-00014cc0: 7265 7065 6174 6060 2061 6e64 2060 605c  repeat`` and ``\
-00014cd0: 616c 7465 726e 6174 6976 6560 600a 2020  alternative``.  
-00014ce0: 2020 2d20 4c79 7269 6373 0a20 2020 202d    - Lyrics.    -
-00014cf0: 2060 605c 6368 6f72 646d 6f64 6560 602c   ``\chordmode``,
-00014d00: 2060 605c 6472 756d 6d6f 6465 6060 206f   ``\drummode`` o
-00014d10: 7220 6060 5c66 6967 7572 656d 6f64 6560  r ``\figuremode`
-00014d20: 600a 2020 2020 2d20 5072 6f70 6572 7479  `.    - Property
-00014d30: 206f 7065 7261 7469 6f6e 732c 2073 7563   operations, suc
-00014d40: 6820 6173 2060 605c 6f76 6572 7269 6465  h as ``\override
-00014d50: 6060 2c0a 2020 2020 2020 6060 5c72 6576  ``,.      ``\rev
-00014d60: 6572 7460 602c 2060 605c 7365 7460 602c  ert``, ``\set``,
-00014d70: 2060 605c 756e 7365 7460 602c 2061 6e64   ``\unset``, and
-00014d80: 2060 605c 6f6e 6365 6060 0a20 2020 202d   ``\once``.    -
-00014d90: 204d 7573 6963 2066 756e 6374 696f 6e73   Music functions
-00014da0: 2077 6869 6368 2067 656e 6572 6174 6520   which generate 
-00014db0: 6f72 2065 7874 656e 7369 7665 6c79 206d  or extensively m
-00014dc0: 7574 6174 6520 6d75 7369 6361 6c20 7374  utate musical st
-00014dd0: 7275 6374 7572 6573 0a20 2020 202d 2045  ructures.    - E
-00014de0: 6d62 6564 6465 6420 5363 6865 6d65 2073  mbedded Scheme s
-00014df0: 7461 7465 6d65 6e74 7320 2861 6e79 7468  tatements (anyth
-00014e00: 696e 6720 6265 6769 6e6e 696e 6720 7769  ing beginning wi
-00014e10: 7468 2060 6023 6060 290a 2020 2020 2222  th ``#``).    ""
-00014e20: 220a 0a20 2020 2023 2323 2043 4c41 5353  "..    ### CLASS
-00014e30: 2056 4152 4941 424c 4553 2023 2323 0a0a   VARIABLES ###..
-00014e40: 2020 2020 5f5f 736c 6f74 735f 5f20 3d20      __slots__ = 
-00014e50: 280a 2020 2020 2020 2020 225f 6368 6f72  (.        "_chor
-00014e60: 645f 7069 7463 685f 6f72 6465 7273 222c  d_pitch_orders",
-00014e70: 0a20 2020 2020 2020 2022 5f63 7572 7265  .        "_curre
-00014e80: 6e74 5f6d 6f64 756c 6522 2c0a 2020 2020  nt_module",.    
-00014e90: 2020 2020 225f 6465 6661 756c 745f 6475      "_default_du
-00014ea0: 7261 7469 6f6e 222c 0a20 2020 2020 2020  ration",.       
-00014eb0: 2022 5f64 6566 6175 6c74 5f6c 616e 6775   "_default_langu
-00014ec0: 6167 6522 2c0a 2020 2020 2020 2020 225f  age",.        "_
-00014ed0: 6775 696c 6522 2c0a 2020 2020 2020 2020  guile",.        
-00014ee0: 225f 6c61 6e67 7561 6765 5f70 6974 6368  "_language_pitch
-00014ef0: 5f6e 616d 6573 222c 0a20 2020 2020 2020  _names",.       
-00014f00: 2022 5f6c 6173 745f 6368 6f72 6422 2c0a   "_last_chord",.
-00014f10: 2020 2020 2020 2020 225f 6c65 7864 6566          "_lexdef
-00014f20: 222c 0a20 2020 2020 2020 2022 5f6d 6172  ",.        "_mar
-00014f30: 6b75 705f 6675 6e63 7469 6f6e 7322 2c0a  kup_functions",.
-00014f40: 2020 2020 2020 2020 225f 6d61 726b 7570          "_markup
-00014f50: 5f6c 6973 745f 6675 6e63 7469 6f6e 7322  _list_functions"
-00014f60: 2c0a 2020 2020 2020 2020 225f 7069 7463  ,.        "_pitc
-00014f70: 685f 6e61 6d65 7322 2c0a 2020 2020 2020  h_names",.      
-00014f80: 2020 225f 7265 7065 6174 6564 5f63 686f    "_repeated_cho
-00014f90: 7264 7322 2c0a 2020 2020 2020 2020 225f  rds",.        "_
-00014fa0: 7363 6f70 655f 7374 6163 6b22 2c0a 2020  scope_stack",.  
-00014fb0: 2020 2020 2020 225f 7379 6e64 6566 222c        "_syndef",
-00014fc0: 0a20 2020 2029 0a0a 2020 2020 2323 2320  .    )..    ### 
-00014fd0: 494e 4954 4941 4c49 5a45 5220 2323 230a  INITIALIZER ###.
-00014fe0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-00014ff0: 5f28 7365 6c66 2c20 6465 6661 756c 745f  _(self, default_
-00015000: 6c61 6e67 7561 6765 3d22 656e 676c 6973  language="englis
-00015010: 6822 2c20 6465 6275 673d 4661 6c73 6529  h", debug=False)
-00015020: 3a0a 2020 2020 2020 2020 2320 4c69 6c79  :.        # Lily
-00015030: 506f 6e64 2065 6d75 6c61 7469 6f6e 2064  Pond emulation d
-00015040: 6174 610a 2020 2020 2020 2020 7365 6c66  ata.        self
-00015050: 2e5f 6775 696c 6520 3d20 4775 696c 6550  ._guile = GuileP
-00015060: 726f 7879 2873 656c 6629 0a20 2020 2020  roxy(self).     
-00015070: 2020 2073 656c 662e 5f63 7572 7265 6e74     self._current
-00015080: 5f6d 6f64 756c 6520 3d20 5f6c 7965 6e76  _module = _lyenv
-00015090: 2e63 7572 7265 6e74 5f6d 6f64 756c 650a  .current_module.
-000150a0: 2020 2020 2020 2020 7365 6c66 2e5f 6c61          self._la
-000150b0: 6e67 7561 6765 5f70 6974 6368 5f6e 616d  nguage_pitch_nam
-000150c0: 6573 203d 205f 6c79 656e 762e 6c61 6e67  es = _lyenv.lang
-000150d0: 7561 6765 5f70 6974 6368 5f6e 616d 6573  uage_pitch_names
-000150e0: 0a20 2020 2020 2020 2073 656c 662e 5f6d  .        self._m
-000150f0: 6172 6b75 705f 6675 6e63 7469 6f6e 7320  arkup_functions 
-00015100: 3d20 5f6c 7965 6e76 2e6d 6172 6b75 705f  = _lyenv.markup_
-00015110: 6675 6e63 7469 6f6e 730a 2020 2020 2020  functions.      
-00015120: 2020 7365 6c66 2e5f 6d61 726b 7570 5f6c    self._markup_l
-00015130: 6973 745f 6675 6e63 7469 6f6e 7320 3d20  ist_functions = 
-00015140: 5f6c 7965 6e76 2e6d 6172 6b75 705f 6c69  _lyenv.markup_li
-00015150: 7374 5f66 756e 6374 696f 6e73 0a20 2020  st_functions.   
-00015160: 2020 2020 2073 656c 662e 6465 6661 756c       self.defaul
-00015170: 745f 6c61 6e67 7561 6765 203d 2064 6566  t_language = def
-00015180: 6175 6c74 5f6c 616e 6775 6167 650a 0a20  ault_language.. 
-00015190: 2020 2020 2020 2023 2061 7474 6163 6820         # attach 
-000151a0: 7061 7273 6572 2061 6e64 206c 6578 6572  parser and lexer
-000151b0: 2072 756c 6573 0a20 2020 2020 2020 2073   rules.        s
-000151c0: 656c 662e 5f6c 6578 6465 6620 3d20 4c69  elf._lexdef = Li
-000151d0: 6c79 506f 6e64 4c65 7869 6361 6c44 6566  lyPondLexicalDef
-000151e0: 696e 6974 696f 6e28 7365 6c66 290a 2020  inition(self).  
-000151f0: 2020 2020 2020 7365 6c66 2e5f 7379 6e64        self._synd
-00015200: 6566 203d 204c 696c 7950 6f6e 6453 796e  ef = LilyPondSyn
-00015210: 7461 6374 6963 616c 4465 6669 6e69 7469  tacticalDefiniti
-00015220: 6f6e 2873 656c 6629 0a0a 2020 2020 2020  on(self)..      
-00015230: 2020 2320 6275 696c 6420 504c 5920 7061    # build PLY pa
-00015240: 7273 6572 2061 6e64 206c 6578 6572 0a20  rser and lexer. 
-00015250: 2020 2020 2020 2050 6172 7365 722e 5f5f         Parser.__
-00015260: 696e 6974 5f5f 2873 656c 662c 2064 6562  init__(self, deb
-00015270: 7567 3d64 6562 7567 290a 0a20 2020 2020  ug=debug)..     
-00015280: 2020 2073 656c 662e 5f72 6573 6574 5f70     self._reset_p
-00015290: 6172 7365 725f 7661 7269 6162 6c65 7328  arser_variables(
-000152a0: 290a 0a20 2020 2023 2323 2053 5045 4349  )..    ### SPECI
-000152b0: 414c 204d 4554 484f 4453 2023 2323 0a0a  AL METHODS ###..
-000152c0: 2020 2020 6465 6620 5f5f 6361 6c6c 5f5f      def __call__
-000152d0: 2873 656c 662c 2069 6e70 7574 5f73 7472  (self, input_str
-000152e0: 696e 6729 3a0a 2020 2020 2020 2020 2222  ing):.        ""
-000152f0: 220a 2020 2020 2020 2020 4361 6c6c 7320  ".        Calls 
-00015300: 4c69 6c79 506f 6e64 2070 6172 7365 7220  LilyPond parser 
-00015310: 6f6e 2060 6069 6e70 7574 5f73 7472 696e  on ``input_strin
-00015320: 6760 602e 0a0a 2020 2020 2020 2020 5265  g``...        Re
-00015330: 7475 726e 7320 4162 6a61 6420 636f 6d70  turns Abjad comp
-00015340: 6f6e 656e 7473 2e0a 2020 2020 2020 2020  onents..        
-00015350: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-00015360: 2e5f 7265 7365 745f 7061 7273 6572 5f76  ._reset_parser_v
-00015370: 6172 6961 626c 6573 2829 0a20 2020 2020  ariables().     
-00015380: 2020 2069 6620 7365 6c66 2e5f 6465 6275     if self._debu
-00015390: 673a 0a20 2020 2020 2020 2020 2020 2072  g:.            r
-000153a0: 6573 756c 7420 3d20 7365 6c66 2e5f 7061  esult = self._pa
-000153b0: 7273 6572 2e5f 6c69 6c79 706f 6e64 5f70  rser._lilypond_p
-000153c0: 6174 6368 5f70 6172 7365 5f64 6562 7567  atch_parse_debug
-000153d0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000153e0: 2020 696e 7075 745f 7374 7269 6e67 2c20    input_string, 
-000153f0: 6c65 7865 723d 7365 6c66 2e5f 6c65 7865  lexer=self._lexe
-00015400: 722c 2064 6562 7567 3d73 656c 662e 5f6c  r, debug=self._l
-00015410: 6f67 6765 720a 2020 2020 2020 2020 2020  ogger.          
-00015420: 2020 290a 2020 2020 2020 2020 656c 7365    ).        else
-00015430: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00015440: 7375 6c74 203d 2073 656c 662e 5f70 6172  sult = self._par
-00015450: 7365 722e 5f6c 696c 7970 6f6e 645f 7061  ser._lilypond_pa
-00015460: 7463 685f 7061 7273 6528 696e 7075 745f  tch_parse(input_
-00015470: 7374 7269 6e67 2c20 6c65 7865 723d 7365  string, lexer=se
-00015480: 6c66 2e5f 6c65 7865 7229 0a20 2020 2020  lf._lexer).     
-00015490: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-000154a0: 0a0a 2020 2020 2323 2320 5052 4956 4154  ..    ### PRIVAT
-000154b0: 4520 4d45 5448 4f44 5320 2323 230a 0a20  E METHODS ###.. 
-000154c0: 2020 2064 6566 205f 6173 7369 676e 5f76     def _assign_v
-000154d0: 6172 6961 626c 6528 7365 6c66 2c20 6964  ariable(self, id
-000154e0: 656e 7469 6669 6572 2c20 7661 6c75 6529  entifier, value)
-000154f0: 3a0a 2020 2020 2020 2020 7365 6c66 2e5f  :.        self._
-00015500: 7363 6f70 655f 7374 6163 6b5b 2d31 5d5b  scope_stack[-1][
-00015510: 6964 656e 7469 6669 6572 5d20 3d20 7661  identifier] = va
-00015520: 6c75 650a 0a20 2020 2064 6566 205f 6261  lue..    def _ba
-00015530: 636b 7570 5f74 6f6b 656e 2873 656c 662c  ckup_token(self,
-00015540: 2074 6f6b 656e 5f74 7970 652c 2074 6f6b   token_type, tok
-00015550: 656e 5f76 616c 7565 293a 0a20 2020 2020  en_value):.     
-00015560: 2020 2069 6620 7365 6c66 2e5f 6465 6275     if self._debu
-00015570: 673a 0a20 2020 2020 2020 2020 2020 2073  g:.            s
-00015580: 656c 662e 5f6c 6f67 6765 722e 696e 666f  elf._logger.info
-00015590: 2822 4578 7472 6120 203a 2042 6163 6b69  ("Extra  : Backi
-000155a0: 6e67 2075 7022 290a 0a20 2020 2020 2020  ng up")..       
-000155b0: 2023 2070 7573 6820 7468 6520 6375 7272   # push the curr
-000155c0: 656e 7420 6c6f 6f6b 6168 6561 6420 6261  ent lookahead ba
-000155d0: 636b 206f 6e74 6f20 7468 6520 6c6f 6f6b  ck onto the look
-000155e0: 6168 6561 6473 7461 636b 0a20 2020 2020  aheadstack.     
-000155f0: 2020 2073 656c 662e 5f70 7573 685f 6578     self._push_ex
-00015600: 7472 615f 746f 6b65 6e28 7365 6c66 2e5f  tra_token(self._
-00015610: 7061 7273 6572 2e6c 6f6f 6b61 6865 6164  parser.lookahead
-00015620: 290a 0a20 2020 2020 2020 2023 2063 7265  )..        # cre
-00015630: 6174 6520 7468 6520 6261 636b 7570 2074  ate the backup t
-00015640: 6f6b 656e 2c20 7365 7420 6173 206e 6577  oken, set as new
-00015650: 206c 6f6f 6b61 6865 6164 0a20 2020 2020   lookahead.     
-00015660: 2020 2062 6163 6b75 7020 3d20 706c 792e     backup = ply.
-00015670: 6c65 782e 4c65 7854 6f6b 656e 2829 0a20  lex.LexToken(). 
-00015680: 2020 2020 2020 2062 6163 6b75 702e 7479         backup.ty
-00015690: 7065 203d 2022 4241 434b 5550 220a 2020  pe = "BACKUP".  
-000156a0: 2020 2020 2020 6261 636b 7570 2e76 616c        backup.val
-000156b0: 7565 203d 2022 2862 6163 6b65 642d 7570  ue = "(backed-up
-000156c0: 3f29 220a 2020 2020 2020 2020 6261 636b  ?)".        back
-000156d0: 7570 2e6c 6578 706f 7320 3d20 300a 2020  up.lexpos = 0.  
-000156e0: 2020 2020 2020 6261 636b 7570 2e6c 696e        backup.lin
-000156f0: 656e 6f20 3d20 300a 2020 2020 2020 2020  eno = 0.        
-00015700: 7365 6c66 2e5f 7061 7273 6572 2e6c 6f6f  self._parser.loo
-00015710: 6b61 6865 6164 203d 2062 6163 6b75 700a  kahead = backup.
-00015720: 0a20 2020 2020 2020 2069 6620 746f 6b65  .        if toke
-00015730: 6e5f 7479 7065 3a0a 2020 2020 2020 2020  n_type:.        
-00015740: 2020 2020 746f 6b65 6e20 3d20 706c 792e      token = ply.
-00015750: 6c65 782e 4c65 7854 6f6b 656e 2829 0a20  lex.LexToken(). 
-00015760: 2020 2020 2020 2020 2020 2074 6f6b 656e             token
-00015770: 2e74 7970 6520 3d20 746f 6b65 6e5f 7479  .type = token_ty
-00015780: 7065 0a20 2020 2020 2020 2020 2020 2074  pe.            t
-00015790: 6f6b 656e 2e76 616c 7565 203d 2074 6f6b  oken.value = tok
-000157a0: 656e 5f76 616c 7565 0a20 2020 2020 2020  en_value.       
-000157b0: 2020 2020 2074 6f6b 656e 2e6c 6578 706f       token.lexpo
-000157c0: 7320 3d20 300a 2020 2020 2020 2020 2020  s = 0.          
-000157d0: 2020 746f 6b65 6e2e 6c69 6e65 6e6f 203d    token.lineno =
-000157e0: 2030 0a20 2020 2020 2020 2020 2020 2073   0.            s
-000157f0: 656c 662e 5f70 7573 685f 6578 7472 615f  elf._push_extra_
-00015800: 746f 6b65 6e28 746f 6b65 6e29 0a0a 2020  token(token)..  
-00015810: 2020 6465 6620 5f63 6f6e 7374 7275 6374    def _construct
-00015820: 5f63 6f6e 7465 7874 5f73 7065 6363 6564  _context_specced
-00015830: 5f6d 7573 6963 280a 2020 2020 2020 2020  _music(.        
-00015840: 7365 6c66 2c20 636f 6e74 6578 742c 206f  self, context, o
-00015850: 7074 696f 6e61 6c5f 6964 2c20 6f70 7469  ptional_id, opti
-00015860: 6f6e 616c 5f63 6f6e 7465 7874 5f6d 6f64  onal_context_mod
-00015870: 2c20 6d75 7369 630a 2020 2020 293a 0a20  , music.    ):. 
-00015880: 2020 2020 2020 206b 6e6f 776e 5f63 6f6e         known_con
-00015890: 7465 7874 7320 3d20 7b0a 2020 2020 2020  texts = {.      
-000158a0: 2020 2020 2020 2243 686f 6972 5374 6166        "ChoirStaf
-000158b0: 6622 3a20 5f73 636f 7265 2e53 7461 6666  f": _score.Staff
-000158c0: 4772 6f75 702c 0a20 2020 2020 2020 2020  Group,.         
-000158d0: 2020 2022 4772 616e 6453 7461 6666 223a     "GrandStaff":
-000158e0: 205f 7363 6f72 652e 5374 6166 6647 726f   _score.StaffGro
-000158f0: 7570 2c0a 2020 2020 2020 2020 2020 2020  up,.            
-00015900: 2250 6961 6e6f 5374 6166 6622 3a20 5f73  "PianoStaff": _s
-00015910: 636f 7265 2e53 7461 6666 4772 6f75 702c  core.StaffGroup,
-00015920: 0a20 2020 2020 2020 2020 2020 2022 5363  .            "Sc
-00015930: 6f72 6522 3a20 5f73 636f 7265 2e53 636f  ore": _score.Sco
-00015940: 7265 2c0a 2020 2020 2020 2020 2020 2020  re,.            
-00015950: 2253 7461 6666 223a 205f 7363 6f72 652e  "Staff": _score.
-00015960: 5374 6166 662c 0a20 2020 2020 2020 2020  Staff,.         
-00015970: 2020 2022 5374 6166 6647 726f 7570 223a     "StaffGroup":
-00015980: 205f 7363 6f72 652e 5374 6166 6647 726f   _score.StaffGro
-00015990: 7570 2c0a 2020 2020 2020 2020 2020 2020  up,.            
-000159a0: 2256 6f69 6365 223a 205f 7363 6f72 652e  "Voice": _score.
-000159b0: 566f 6963 652c 0a20 2020 2020 2020 207d  Voice,.        }
-000159c0: 0a20 2020 2020 2020 206c 696c 7970 6f6e  .        lilypon
-000159d0: 645f 7479 7065 203d 2063 6f6e 7465 7874  d_type = context
-000159e0: 0a20 2020 2020 2020 2069 6620 636f 6e74  .        if cont
-000159f0: 6578 7420 696e 206b 6e6f 776e 5f63 6f6e  ext in known_con
-00015a00: 7465 7874 733a 0a20 2020 2020 2020 2020  texts:.         
-00015a10: 2020 2063 6f6e 7465 7874 203d 206b 6e6f     context = kno
-00015a20: 776e 5f63 6f6e 7465 7874 735b 636f 6e74  wn_contexts[cont
-00015a30: 6578 745d 285b 5d29 0a20 2020 2020 2020  ext]([]).       
-00015a40: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00015a50: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
-00015a60: 6f6e 2866 2263 6f6e 7465 7874 2074 7970  on(f"context typ
-00015a70: 6520 7b63 6f6e 7465 7874 2172 7d20 6e6f  e {context!r} no
-00015a80: 7420 7375 7070 6f72 7465 642e 2229 0a20  t supported."). 
-00015a90: 2020 2020 2020 2069 6620 6c69 6c79 706f         if lilypo
-00015aa0: 6e64 5f74 7970 6520 696e 2028 2247 7261  nd_type in ("Gra
-00015ab0: 6e64 5374 6166 6622 2c20 2250 6961 6e6f  ndStaff", "Piano
-00015ac0: 5374 6166 6622 293a 0a20 2020 2020 2020  Staff"):.       
-00015ad0: 2020 2020 2063 6f6e 7465 7874 2e6c 696c       context.lil
-00015ae0: 7970 6f6e 645f 7479 7065 203d 206c 696c  ypond_type = lil
-00015af0: 7970 6f6e 645f 7479 7065 0a20 2020 2020  ypond_type.     
-00015b00: 2020 2069 6620 6f70 7469 6f6e 616c 5f69     if optional_i
-00015b10: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
-00015b20: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
-00015b30: 7874 2e6e 616d 6520 3d20 6f70 7469 6f6e  xt.name = option
-00015b40: 616c 5f69 640a 2020 2020 2020 2020 6966  al_id.        if
-00015b50: 206f 7074 696f 6e61 6c5f 636f 6e74 6578   optional_contex
-00015b60: 745f 6d6f 6420 6973 206e 6f74 204e 6f6e  t_mod is not Non
-00015b70: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
-00015b80: 6f72 2078 2069 6e20 6f70 7469 6f6e 616c  or x in optional
-00015b90: 5f63 6f6e 7465 7874 5f6d 6f64 3a0a 2020  _context_mod:.  
-00015ba0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00015bb0: 696e 7428 7829 0a20 2020 2020 2020 2020  int(x).         
-00015bc0: 2020 2023 2054 4f44 4f3a 2069 6d70 656c     # TODO: impel
-00015bd0: 656d 656e 7420 636f 6e74 6578 7420 6d6f  ement context mo
-00015be0: 6473 206f 6e20 636f 6e74 6578 7473 0a20  ds on contexts. 
-00015bf0: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
-00015c00: 2020 2020 2020 2020 636f 6e74 6578 742e          context.
-00015c10: 7369 6d75 6c74 616e 656f 7573 203d 206d  simultaneous = m
-00015c20: 7573 6963 2e73 696d 756c 7461 6e65 6f75  usic.simultaneou
-00015c30: 730a 2020 2020 2020 2020 2320 6164 6420  s.        # add 
-00015c40: 6368 696c 6472 656e 0a20 2020 2020 2020  children.       
-00015c50: 2077 6869 6c65 206c 656e 286d 7573 6963   while len(music
-00015c60: 293a 0a20 2020 2020 2020 2020 2020 2063  ):.            c
-00015c70: 6f6d 706f 6e65 6e74 203d 206d 7573 6963  omponent = music
-00015c80: 2e70 6f70 2830 290a 2020 2020 2020 2020  .pop(0).        
-00015c90: 2020 2020 636f 6e74 6578 742e 6170 7065      context.appe
-00015ca0: 6e64 2863 6f6d 706f 6e65 6e74 290a 2020  nd(component).  
-00015cb0: 2020 2020 2020 666f 7220 7772 6170 7065        for wrappe
-00015cc0: 7220 696e 206d 7573 6963 2e5f 7772 6170  r in music._wrap
-00015cd0: 7065 7273 3a0a 2020 2020 2020 2020 2020  pers:.          
-00015ce0: 2020 5f62 696e 642e 6174 7461 6368 2877    _bind.attach(w
-00015cf0: 7261 7070 6572 2c20 636f 6e74 6578 7429  rapper, context)
-00015d00: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00015d10: 636f 6e74 6578 740a 0a20 2020 2064 6566  context..    def
-00015d20: 205f 636f 6e73 7472 7563 745f 7365 7175   _construct_sequ
-00015d30: 656e 7469 616c 5f6d 7573 6963 2873 656c  ential_music(sel
-00015d40: 662c 206d 7573 6963 293a 0a20 2020 2020  f, music):.     
-00015d50: 2020 2023 2069 6e64 6963 6174 6f72 2073     # indicator s
-00015d60: 6f72 7469 6e67 2063 6f75 6c64 2062 6520  orting could be 
-00015d70: 7265 7772 6974 7465 6e20 696e 746f 2061  rewritten into a
-00015d80: 2073 696e 676c 6520 6c69 7374 2075 7369   single list usi
-00015d90: 6e67 2074 7570 6c65 730a 2020 2020 2020  ng tuples.      
-00015da0: 2020 2320 7769 7468 2074 5b30 5d20 6265    # with t[0] be
-00015db0: 696e 6720 2766 6f72 7761 7264 2720 6f72  ing 'forward' or
-00015dc0: 2027 6261 636b 7761 7264 2720 616e 6420   'backward' and 
-00015dd0: 745b 315d 2062 6569 6e67 2074 6865 2069  t[1] being the i
-00015de0: 6e64 6963 6174 6f72 0a20 2020 2020 2020  ndicator.       
-00015df0: 2023 2061 7320 7468 6973 2062 6574 7465   # as this bette
-00015e00: 7220 7072 6573 6572 7665 7320 6174 7461  r preserves atta
-00015e10: 6368 6d65 6e74 206f 7264 6572 2e20 4e6f  chment order. No
-00015e20: 7420 636c 6561 7220 6966 2077 6520 6e65  t clear if we ne
-00015e30: 6564 2069 742e 0a20 2020 2020 2020 2063  ed it..        c
-00015e40: 6f6e 7461 696e 6572 203d 205f 7363 6f72  ontainer = _scor
-00015e50: 652e 436f 6e74 6169 6e65 7228 290a 2020  e.Container().  
-00015e60: 2020 2020 2020 7072 6576 696f 7573 5f6c        previous_l
-00015e70: 6561 6620 3d20 4e6f 6e65 0a20 2020 2020  eaf = None.     
-00015e80: 2020 2061 7070 6c79 5f66 6f72 7761 7264     apply_forward
-00015e90: 203d 205b 5d0a 2020 2020 2020 2020 6170   = [].        ap
-00015ea0: 706c 795f 6261 636b 7761 7264 203d 205b  ply_backward = [
-00015eb0: 5d0a 2020 2020 2020 2020 2320 736f 7274  ].        # sort
-00015ec0: 2065 7665 6e74 7320 696e 746f 2066 6f72   events into for
-00015ed0: 7761 7264 206f 7220 6261 636b 7761 7264  ward or backward
-00015ee0: 7320 6174 7461 6368 696e 670a 2020 2020  s attaching.    
-00015ef0: 2020 2020 2320 616e 6420 6174 7461 6368      # and attach
-00015f00: 2074 6865 6d20 746f 2074 6865 2070 726f   them to the pro
-00015f10: 7065 7220 6c65 6166 0a20 2020 2020 2020  per leaf.       
-00015f20: 2066 6f72 2078 2069 6e20 6d75 7369 633a   for x in music:
-00015f30: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00015f40: 6973 696e 7374 616e 6365 2878 2c20 5f73  isinstance(x, _s
-00015f50: 636f 7265 2e43 6f6d 706f 6e65 6e74 2920  core.Component) 
-00015f60: 616e 6420 6e6f 7420 6973 696e 7374 616e  and not isinstan
-00015f70: 6365 280a 2020 2020 2020 2020 2020 2020  ce(.            
-00015f80: 2020 2020 782c 205f 7363 6f72 652e 4265      x, _score.Be
-00015f90: 666f 7265 4772 6163 6543 6f6e 7461 696e  foreGraceContain
-00015fa0: 6572 0a20 2020 2020 2020 2020 2020 2029  er.            )
-00015fb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00015fc0: 2020 666f 7220 696e 6469 6361 746f 7220    for indicator 
-00015fd0: 696e 2061 7070 6c79 5f66 6f72 7761 7264  in apply_forward
-00015fe0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00015ff0: 2020 2020 2020 5f62 696e 642e 6174 7461        _bind.atta
-00016000: 6368 2869 6e64 6963 6174 6f72 2c20 7829  ch(indicator, x)
-00016010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016020: 2069 6620 7072 6576 696f 7573 5f6c 6561   if previous_lea
-00016030: 663a 0a20 2020 2020 2020 2020 2020 2020  f:.             
-00016040: 2020 2020 2020 2066 6f72 2069 6e64 6963         for indic
-00016050: 6174 6f72 2069 6e20 6170 706c 795f 6261  ator in apply_ba
-00016060: 636b 7761 7264 3a0a 2020 2020 2020 2020  ckward:.        
+00013930: 2020 2020 2020 2020 2020 2020 2020 4261                Ba
+00013940: 7373 210a 2020 2020 2020 2020 2020 2020  ss!.            
+00013950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013960: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
+00013970: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00013980: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00013990: 2020 2020 2020 3e3e 0a0a 2020 2020 2e2e        >>..    ..
+000139a0: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
+000139b0: 616d 706c 650a 0a20 2020 2020 2020 2054  ample..        T
+000139c0: 6865 204c 696c 7950 6f6e 6420 7061 7273  he LilyPond pars
+000139d0: 6572 2061 6c73 6f20 756e 6465 7273 7461  er also understa
+000139e0: 6e64 7320 6365 7274 6169 6e20 6173 7065  nds certain aspe
+000139f0: 6374 7320 6f66 204c 696c 7950 6f6e 6420  cts of LilyPond 
+00013a00: 6669 6c65 0a20 2020 2020 2020 206c 6179  file.        lay
+00013a10: 6f75 7473 2c20 7375 6368 2061 7320 6865  outs, such as he
+00013a20: 6164 6572 2062 6c6f 636b 733a 0a0a 2020  ader blocks:..  
+00013a30: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
+00013a40: 203d 2072 2727 270a 2020 2020 2020 2020   = r'''.        
+00013a50: 2e2e 2e20 5c68 6561 6465 7220 7b0a 2020  ... \header {.  
+00013a60: 2020 2020 2020 2e2e 2e20 2020 2020 636f        ...     co
+00013a70: 6d70 6f73 6572 203d 205c 6d61 726b 7570  mposer = \markup
+00013a80: 207b 2062 7920 5c62 6f6c 6420 2246 6f6f   { by \bold "Foo
+00013a90: 2076 6f6e 2042 6172 2220 7d0a 2020 2020   von Bar" }.    
+00013aa0: 2020 2020 2e2e 2e20 2020 2020 7469 746c      ...     titl
+00013ab0: 6520 3d20 5c6d 6172 6b75 7020 7b20 5468  e = \markup { Th
+00013ac0: 6520 6261 6c6c 6164 206f 6620 466f 6f20  e ballad of Foo 
+00013ad0: 766f 6e20 4261 7220 7d0a 2020 2020 2020  von Bar }.      
+00013ae0: 2020 2e2e 2e20 2020 2020 7461 676c 696e    ...     taglin
+00013af0: 6520 3d20 5c6d 6172 6b75 7020 7b20 2222  e = \markup { ""
+00013b00: 207d 0a20 2020 2020 2020 202e 2e2e 207d   }.        ... }
+00013b10: 0a20 2020 2020 2020 202e 2e2e 205c 7363  .        ... \sc
+00013b20: 6f72 6520 7b0a 2020 2020 2020 2020 2e2e  ore {.        ..
+00013b30: 2e20 2020 2020 5c6e 6577 2053 7461 6666  .     \new Staff
+00013b40: 207b 0a20 2020 2020 2020 202e 2e2e 2020   {.        ...  
+00013b50: 2020 2020 2020 205c 7469 6d65 2033 2f34         \time 3/4
+00013b60: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+00013b70: 2020 2020 2067 2720 2820 6227 2064 2727       g' ( b' d''
+00013b80: 2029 0a20 2020 2020 2020 202e 2e2e 2020   ).        ...  
+00013b90: 2020 2020 2020 2065 2727 342e 2028 2063         e''4. ( c
+00013ba0: 2727 3820 6327 3420 290a 2020 2020 2020  ''8 c'4 ).      
+00013bb0: 2020 2e2e 2e20 2020 2020 7d0a 2020 2020    ...     }.    
+00013bc0: 2020 2020 2e2e 2e20 7d0a 2020 2020 2020      ... }.      
+00013bd0: 2020 2e2e 2e20 2727 270a 2020 2020 2020    ... '''.      
+00013be0: 2020 3e3e 3e20 626c 6f63 6b73 203d 2070    >>> blocks = p
+00013bf0: 6172 7365 7228 7374 7269 6e67 290a 2020  arser(string).  
+00013c00: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+00013c10: 7368 6f77 2862 6c6f 636b 7329 2023 2064  show(blocks) # d
+00013c20: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+00013c30: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
+00013c40: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
+00013c50: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+00013c60: 642e 6c69 6c79 706f 6e64 2862 6c6f 636b  d.lilypond(block
+00013c70: 7329 2023 2064 6f63 7465 7374 3a20 2b53  s) # doctest: +S
+00013c80: 4b49 500a 2020 2020 2020 2020 2020 2020  KIP.            
+00013c90: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
+00013ca0: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
+00013cb0: 4950 0a20 2020 2020 2020 2020 2020 2025  IP.            %
+00013cc0: 2032 3031 372d 3037 2d31 3120 3135 3a31   2017-07-11 15:1
+00013cd0: 330a 2020 2020 2020 2020 2020 2020 3c42  3.            <B
+00013ce0: 4c41 4e4b 4c49 4e45 3e0a 2020 2020 2020  LANKLINE>.      
+00013cf0: 2020 2020 2020 5c76 6572 7369 6f6e 2022        \version "
+00013d00: 322e 3139 2e36 3322 0a20 2020 2020 2020  2.19.63".       
+00013d10: 2020 2020 205c 6c61 6e67 7561 6765 2022       \language "
+00013d20: 656e 676c 6973 6822 0a20 2020 2020 2020  english".       
+00013d30: 2020 2020 203c 424c 414e 4b4c 494e 453e       <BLANKLINE>
+00013d40: 0a20 2020 2020 2020 2020 2020 205c 6865  .            \he
+00013d50: 6164 6572 207b 0a20 2020 2020 2020 2020  ader {.         
+00013d60: 2020 2020 2020 2063 6f6d 706f 7365 726e         composern
+00013d70: 616d 6520 3d20 5c6d 6172 6b75 7020 7b0a  ame = \markup {.
+00013d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013d90: 2020 2020 466f 6f0a 2020 2020 2020 2020      Foo.        
+00013da0: 2020 2020 2020 2020 2020 2020 7661 6e0a              van.
+00013db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013dc0: 2020 2020 4261 720a 2020 2020 2020 2020      Bar.        
+00013dd0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00013de0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00013df0: 6d70 6f73 6572 203d 205c 6d61 726b 7570  mposer = \markup
+00013e00: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00013e10: 2020 2020 2020 2062 790a 2020 2020 2020         by.      
+00013e20: 2020 2020 2020 2020 2020 2020 2020 5c62                \b
+00013e30: 6f6c 640a 2020 2020 2020 2020 2020 2020  old.            
+00013e40: 2020 2020 2020 2020 2020 2020 2246 6f6f              "Foo
+00013e50: 2076 6f6e 2042 6172 220a 2020 2020 2020   von Bar".      
+00013e60: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+00013e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013e80: 7469 746c 6520 3d20 5c6d 6172 6b75 7020  title = \markup 
+00013e90: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00013ea0: 2020 2020 2020 5468 650a 2020 2020 2020        The.      
+00013eb0: 2020 2020 2020 2020 2020 2020 2020 6261                ba
+00013ec0: 6c6c 6164 0a20 2020 2020 2020 2020 2020  llad.           
+00013ed0: 2020 2020 2020 2020 206f 660a 2020 2020           of.    
+00013ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013ef0: 2246 6f6f 2076 6f6e 2042 6172 220a 2020  "Foo von Bar".  
+00013f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013f10: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+00013f20: 2020 2020 7461 676c 696e 6520 3d20 5c6d      tagline = \m
+00013f30: 6172 6b75 7020 7b7d 0a20 2020 2020 2020  arkup {}.       
+00013f40: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+00013f50: 2020 203c 424c 414e 4b4c 494e 453e 0a20     <BLANKLINE>. 
+00013f60: 2020 2020 2020 2020 2020 205c 7363 6f72             \scor
+00013f70: 6520 7b0a 2020 2020 2020 2020 2020 2020  e {.            
+00013f80: 2020 2020 5c6e 6577 2053 7461 6666 207b      \new Staff {
+00013f90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013fa0: 2020 2020 205c 7469 6d65 2033 2f34 0a20       \time 3/4. 
+00013fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013fc0: 2020 2067 2734 2028 0a20 2020 2020 2020     g'4 (.       
+00013fd0: 2020 2020 2020 2020 2020 2020 2062 2734               b'4
+00013fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013ff0: 2020 2020 2064 2727 3420 290a 2020 2020       d''4 ).    
+00014000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014010: 6527 2734 2e20 280a 2020 2020 2020 2020  e''4. (.        
+00014020: 2020 2020 2020 2020 2020 2020 6327 2738              c''8
+00014030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014040: 2020 2020 2063 2734 2029 0a20 2020 2020       c'4 ).     
+00014050: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00014060: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+00014070: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+00014080: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+00014090: 2054 6865 204c 696c 7950 6f6e 6420 7061   The LilyPond pa
+000140a0: 7273 6572 2073 7570 706f 7274 7320 6120  rser supports a 
+000140b0: 736d 616c 6c20 6e75 6d62 6572 206f 6620  small number of 
+000140c0: 4c69 6c79 506f 6e64 206d 7573 6963 0a20  LilyPond music. 
+000140d0: 2020 2020 2020 2066 756e 6374 696f 6e73         functions
+000140e0: 2c20 7375 6368 2061 7320 5c72 656c 6174  , such as \relat
+000140f0: 6976 6520 616e 6420 5c74 7261 6e73 706f  ive and \transpo
+00014100: 7365 2e0a 0a20 2020 2020 2020 202e 2e20  se...        .. 
+00014110: 206e 6f74 653a 3a0a 0a20 2020 2020 2020   note::..       
+00014120: 2020 2020 204d 7573 6963 2066 756e 6374       Music funct
+00014130: 696f 6e73 2077 6869 6368 206d 7574 6174  ions which mutat
+00014140: 6520 7468 6520 7363 6f72 6520 6475 7269  e the score duri
+00014150: 6e67 2063 6f6d 7069 6c61 7469 6f6e 2072  ng compilation r
+00014160: 6573 756c 7420 696e 2061 0a20 2020 2020  esult in a.     
+00014170: 2020 2020 2020 206e 6f72 6d61 6c69 7a65         normalize
+00014180: 6420 4162 6a61 6420 7363 6f72 6520 7374  d Abjad score st
+00014190: 7275 6374 7572 652e 2054 6865 2072 6573  ructure. The res
+000141a0: 756c 7469 6e67 2073 7472 7563 7475 7265  ulting structure
+000141b0: 2063 6f72 7265 7370 6f6e 6473 0a20 2020   corresponds.   
+000141c0: 2020 2020 2020 2020 2074 6f20 7468 6520           to the 
+000141d0: 6d75 7369 6320 6173 2069 7420 6170 7065  music as it appe
+000141e0: 6172 7320 6f6e 2074 6865 2070 6167 652c  ars on the page,
+000141f0: 2072 6174 6865 7220 7468 616e 2061 7320   rather than as 
+00014200: 6974 2077 6173 2069 6e70 7574 2074 6f0a  it was input to.
+00014210: 2020 2020 2020 2020 2020 2020 7468 6520              the 
+00014220: 7061 7273 6572 3a0a 0a20 2020 2020 2020  parser:..       
+00014230: 203e 3e3e 2073 7472 696e 6720 3d20 7227   >>> string = r'
+00014240: 2727 0a20 2020 2020 2020 202e 2e2e 205c  ''.        ... \
+00014250: 6e65 7720 5374 6166 6620 5c72 656c 6174  new Staff \relat
+00014260: 6976 6520 6320 7b0a 2020 2020 2020 2020  ive c {.        
+00014270: 2e2e 2e20 2020 2020 6333 3220 6420 6520  ...     c32 d e 
+00014280: 6620 6720 6120 6220 6320 6420 6520 6620  f g a b c d e f 
+00014290: 6720 6120 6220 6320 6420 6520 6620 6720  g a b c d e f g 
+000142a0: 6120 6220 630a 2020 2020 2020 2020 2e2e  a b c.        ..
+000142b0: 2e20 7d0a 2020 2020 2020 2020 2e2e 2e20  . }.        ... 
+000142c0: 2727 270a 2020 2020 2020 2020 3e3e 3e20  '''.        >>> 
+000142d0: 7374 6166 6620 3d20 7061 7273 6572 2873  staff = parser(s
+000142e0: 7472 696e 6729 0a20 2020 2020 2020 203e  tring).        >
+000142f0: 3e3e 2061 626a 6164 2e73 686f 7728 7374  >> abjad.show(st
+00014300: 6166 6629 2023 2064 6f63 7465 7374 3a20  aff) # doctest: 
+00014310: 2b53 4b49 500a 0a20 2020 2020 2020 202e  +SKIP..        .
+00014320: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
+00014330: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+00014340: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+00014350: 6e64 2873 7461 6666 290a 2020 2020 2020  nd(staff).      
+00014360: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+00014370: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+00014380: 2020 2020 5c6e 6577 2053 7461 6666 0a20      \new Staff. 
+00014390: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+000143a0: 2020 2020 2020 2020 2020 2020 2063 3332               c32
+000143b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000143c0: 2064 3332 0a20 2020 2020 2020 2020 2020   d32.           
+000143d0: 2020 2020 2065 3332 0a20 2020 2020 2020       e32.       
+000143e0: 2020 2020 2020 2020 2066 3332 0a20 2020           f32.   
+000143f0: 2020 2020 2020 2020 2020 2020 2067 3332               g32
+00014400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014410: 2061 3332 0a20 2020 2020 2020 2020 2020   a32.           
+00014420: 2020 2020 2062 3332 0a20 2020 2020 2020       b32.       
+00014430: 2020 2020 2020 2020 2063 2733 320a 2020           c'32.  
+00014440: 2020 2020 2020 2020 2020 2020 2020 6427                d'
+00014450: 3332 0a20 2020 2020 2020 2020 2020 2020  32.             
+00014460: 2020 2065 2733 320a 2020 2020 2020 2020     e'32.        
+00014470: 2020 2020 2020 2020 6627 3332 0a20 2020          f'32.   
+00014480: 2020 2020 2020 2020 2020 2020 2067 2733               g'3
+00014490: 320a 2020 2020 2020 2020 2020 2020 2020  2.              
+000144a0: 2020 6127 3332 0a20 2020 2020 2020 2020    a'32.         
+000144b0: 2020 2020 2020 2062 2733 320a 2020 2020         b'32.    
+000144c0: 2020 2020 2020 2020 2020 2020 6327 2733              c''3
+000144d0: 320a 2020 2020 2020 2020 2020 2020 2020  2.              
+000144e0: 2020 6427 2733 320a 2020 2020 2020 2020    d''32.        
+000144f0: 2020 2020 2020 2020 6527 2733 320a 2020          e''32.  
+00014500: 2020 2020 2020 2020 2020 2020 2020 6627                f'
+00014510: 2733 320a 2020 2020 2020 2020 2020 2020  '32.            
+00014520: 2020 2020 6727 2733 320a 2020 2020 2020      g''32.      
+00014530: 2020 2020 2020 2020 2020 6127 2733 320a            a''32.
+00014540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014550: 6227 2733 320a 2020 2020 2020 2020 2020  b''32.          
+00014560: 2020 2020 2020 6327 2727 3332 0a20 2020        c'''32.   
+00014570: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+00014580: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+00014590: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+000145a0: 2054 6865 204c 696c 7950 6f6e 6420 7061   The LilyPond pa
+000145b0: 7273 6572 2064 6566 6175 6c74 7320 746f  rser defaults to
+000145c0: 2045 6e67 6c69 7368 206e 6f74 6520 6e61   English note na
+000145d0: 6d65 732c 2062 7574 2061 6e79 206f 6620  mes, but any of 
+000145e0: 7468 650a 2020 2020 2020 2020 6f74 6865  the.        othe
+000145f0: 7220 6c61 6e67 7561 6765 7320 7375 7070  r languages supp
+00014600: 6f72 7465 6420 6279 204c 696c 7950 6f6e  orted by LilyPon
+00014610: 6420 6d61 7920 6265 2075 7365 643a 0a0a  d may be used:..
+00014620: 2020 2020 2020 2020 3e3e 3e20 7061 7273          >>> pars
+00014630: 6572 203d 2061 626a 6164 2e70 6172 7365  er = abjad.parse
+00014640: 722e 4c69 6c79 506f 6e64 5061 7273 6572  r.LilyPondParser
+00014650: 2827 6e65 6465 726c 616e 6473 2729 0a20  ('nederlands'). 
+00014660: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+00014670: 6720 3d20 277b 2063 2064 6573 2065 2066  g = '{ c des e f
+00014680: 6973 207d 270a 2020 2020 2020 2020 3e3e  is }'.        >>
+00014690: 3e20 636f 6e74 6169 6e65 7220 3d20 7061  > container = pa
+000146a0: 7273 6572 2873 7472 696e 6729 0a20 2020  rser(string).   
+000146b0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
+000146c0: 686f 7728 636f 6e74 6169 6e65 7229 2023  how(container) #
+000146d0: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
+000146e0: 0a20 2020 2020 2020 202e 2e20 2064 6f63  .        ..  doc
+000146f0: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
+00014700: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
+00014710: 6a61 642e 6c69 6c79 706f 6e64 2863 6f6e  jad.lilypond(con
+00014720: 7461 696e 6572 290a 2020 2020 2020 2020  tainer).        
+00014730: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+00014740: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+00014750: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+00014760: 2020 2020 6334 0a20 2020 2020 2020 2020      c4.         
+00014770: 2020 2020 2020 2064 6634 0a20 2020 2020         df4.     
+00014780: 2020 2020 2020 2020 2020 2065 340a 2020             e4.  
+00014790: 2020 2020 2020 2020 2020 2020 2020 6673                fs
+000147a0: 340a 2020 2020 2020 2020 2020 2020 7d0a  4.            }.
+000147b0: 0a20 2020 2042 7269 6566 6c79 2c20 4c69  .    Briefly, Li
+000147c0: 6c79 506f 6e64 5061 7273 6572 2075 6e64  lyPondParser und
+000147d0: 6572 7374 616e 6473 2074 6865 7365 7320  erstands theses 
+000147e0: 6173 7065 6374 7320 6f66 204c 696c 7950  aspects of LilyP
+000147f0: 6f6e 6420 7379 6e74 6178 3a0a 0a20 2020  ond syntax:..   
+00014800: 202d 204e 6f74 6573 2c20 6368 6f72 6473   - Notes, chords
+00014810: 2c20 7265 7374 732c 2073 6b69 7073 2061  , rests, skips a
+00014820: 6e64 206d 756c 7469 2d6d 6561 7375 7265  nd multi-measure
+00014830: 2072 6573 7473 0a20 2020 202d 2044 7572   rests.    - Dur
+00014840: 6174 696f 6e73 2c20 646f 7473 2c20 616e  ations, dots, an
+00014850: 6420 6d75 6c74 6970 6c69 6572 730a 2020  d multipliers.  
+00014860: 2020 2d20 416c 6c20 7069 7463 686e 616d    - All pitchnam
+00014870: 6573 2c20 616e 6420 6f63 7461 7665 2074  es, and octave t
+00014880: 6963 6b73 0a20 2020 202d 2053 696d 706c  icks.    - Simpl
+00014890: 6520 6d61 726b 7570 2028 692e 652e 2060  e markup (i.e. `
+000148a0: 6063 2734 205e 2022 6865 6c6c 6f21 2260  `c'4 ^ "hello!"`
+000148b0: 6029 0a20 2020 202d 204d 6f73 7420 6172  `).    - Most ar
+000148c0: 7469 6375 6c61 7469 6f6e 730a 2020 2020  ticulations.    
+000148d0: 2d20 4d6f 7374 2073 7061 6e6e 6572 732c  - Most spanners,
+000148e0: 2069 6e63 6c2e 2062 6561 6d73 2c20 736c   incl. beams, sl
+000148f0: 7572 732c 2070 6872 6173 696e 6720 736c  urs, phrasing sl
+00014900: 7572 732c 2074 6965 732c 2061 6e64 2067  urs, ties, and g
+00014910: 6c69 7373 616e 6469 0a20 2020 202d 204d  lissandi.    - M
+00014920: 6f73 7420 636f 6e74 6578 7420 7479 7065  ost context type
+00014930: 7320 7669 6120 6060 5c6e 6577 6060 2061  s via ``\new`` a
+00014940: 6e64 2060 605c 636f 6e74 6578 7460 602c  nd ``\context``,
+00014950: 0a20 2020 2020 2061 7320 7765 6c6c 2061  .      as well a
+00014960: 7320 636f 6e74 6578 7420 6964 7320 2869  s context ids (i
+00014970: 2e65 2e20 6060 5c6e 6577 2053 7461 6666  .e. ``\new Staff
+00014980: 203d 2022 666f 6f22 207b 207d 6060 290a   = "foo" { }``).
+00014990: 2020 2020 2d20 5661 7269 6162 6c65 2061      - Variable a
+000149a0: 7373 6967 6e73 2028 6965 2060 6067 6c6f  ssigns (ie ``glo
+000149b0: 6261 6c20 3d20 7b20 5c74 696d 6520 332f  bal = { \time 3/
+000149c0: 3420 7d20 5c6e 6577 2053 7461 6666 207b  4 } \new Staff {
+000149d0: 205c 676c 6f62 616c 207d 6060 290a 2020   \global }``).  
+000149e0: 2020 2d20 4d61 6e79 206d 7573 6963 2066    - Many music f
+000149f0: 756e 6374 696f 6e73 3a0a 2020 2020 2020  unctions:.      
+00014a00: 2020 2d20 6060 5c61 6363 6961 6363 6174    - ``\acciaccat
+00014a10: 7572 6160 600a 2020 2020 2020 2020 2d20  ura``.        - 
+00014a20: 6060 5c61 7070 6f67 6769 6174 7572 6160  ``\appoggiatura`
+00014a30: 600a 2020 2020 2020 2020 2d20 6060 5c62  `.        - ``\b
+00014a40: 6172 6060 0a20 2020 2020 2020 202d 2060  ar``.        - `
+00014a50: 605c 6272 6561 7468 6560 600a 2020 2020  `\breathe``.    
+00014a60: 2020 2020 2d20 6060 5c63 6c65 6660 600a      - ``\clef``.
+00014a70: 2020 2020 2020 2020 2d20 6060 5c67 7261          - ``\gra
+00014a80: 6365 6060 0a20 2020 2020 2020 202d 2060  ce``.        - `
+00014a90: 605c 6b65 7960 600a 2020 2020 2020 2020  `\key``.        
+00014aa0: 2d20 6060 5c74 7261 6e73 706f 7365 6060  - ``\transpose``
+00014ab0: 0a20 2020 2020 2020 202d 2060 605c 6c61  .        - ``\la
+00014ac0: 6e67 7561 6765 6060 0a20 2020 2020 2020  nguage``.       
+00014ad0: 202d 2060 605c 6d61 6b65 436c 7573 7465   - ``\makeCluste
+00014ae0: 7273 6060 0a20 2020 2020 2020 202d 2060  rs``.        - `
+00014af0: 605c 6d61 726b 6060 0a20 2020 2020 2020  `\mark``.       
+00014b00: 202d 2060 605c 6f6e 6556 6f69 6365 6060   - ``\oneVoice``
+00014b10: 0a20 2020 2020 2020 202d 2060 605c 7265  .        - ``\re
+00014b20: 6c61 7469 7665 6060 0a20 2020 2020 2020  lative``.       
+00014b30: 202d 2060 605c 736b 6970 6060 0a20 2020   - ``\skip``.   
+00014b40: 2020 2020 202d 2060 605c 736c 6173 6865       - ``\slashe
+00014b50: 6447 7261 6365 6060 0a20 2020 2020 2020  dGrace``.       
+00014b60: 202d 2060 605c 7469 6d65 6060 0a20 2020   - ``\time``.   
+00014b70: 2020 2020 202d 2060 605c 7469 6d65 7360       - ``\times`
+00014b80: 600a 2020 2020 2020 2020 2d20 6060 5c74  `.        - ``\t
+00014b90: 7261 6e73 706f 7365 6060 0a20 2020 2020  ranspose``.     
+00014ba0: 2020 202d 2060 605c 7475 706c 6574 6060     - ``\tuplet``
+00014bb0: 0a20 2020 2020 2020 202d 2060 605c 766f  .        - ``\vo
+00014bc0: 6963 654f 6e65 6060 2c20 6060 5c76 6f69  iceOne``, ``\voi
+00014bd0: 6365 5477 6f60 602c 2060 605c 766f 6963  ceTwo``, ``\voic
+00014be0: 6554 6872 6565 6060 2c20 6060 5c76 6f69  eThree``, ``\voi
+00014bf0: 6365 466f 7572 6060 0a0a 2020 2020 4c69  ceFour``..    Li
+00014c00: 6c79 506f 6e64 5061 7273 6572 2063 7572  lyPondParser cur
+00014c10: 7265 6e74 6c79 202a 2a44 4f45 5320 4e4f  rently **DOES NO
+00014c20: 542a 2a20 756e 6465 7273 7461 6e64 206d  T** understand m
+00014c30: 616e 7920 6f74 6865 7220 6173 7065 6374  any other aspect
+00014c40: 730a 2020 2020 6f66 204c 696c 7950 6f6e  s.    of LilyPon
+00014c50: 6420 7379 6e74 6178 3a0a 0a20 2020 202d  d syntax:..    -
+00014c60: 2060 605c 6d61 726b 7570 6060 0a20 2020   ``\markup``.   
+00014c70: 202d 2060 605c 626f 6f6b 6060 2c20 6060   - ``\book``, ``
+00014c80: 5c62 6f6f 6b70 6172 7460 602c 2060 605c  \bookpart``, ``\
+00014c90: 6865 6164 6572 6060 2c20 6060 5c6c 6179  header``, ``\lay
+00014ca0: 6f75 7460 602c 2060 605c 6d69 6469 6060  out``, ``\midi``
+00014cb0: 2c20 6060 5c70 6170 6572 6060 0a20 2020  , ``\paper``.   
+00014cc0: 202d 2060 605c 7265 7065 6174 6060 2061   - ``\repeat`` a
+00014cd0: 6e64 2060 605c 616c 7465 726e 6174 6976  nd ``\alternativ
+00014ce0: 6560 600a 2020 2020 2d20 4c79 7269 6373  e``.    - Lyrics
+00014cf0: 0a20 2020 202d 2060 605c 6368 6f72 646d  .    - ``\chordm
+00014d00: 6f64 6560 602c 2060 605c 6472 756d 6d6f  ode``, ``\drummo
+00014d10: 6465 6060 206f 7220 6060 5c66 6967 7572  de`` or ``\figur
+00014d20: 656d 6f64 6560 600a 2020 2020 2d20 5072  emode``.    - Pr
+00014d30: 6f70 6572 7479 206f 7065 7261 7469 6f6e  operty operation
+00014d40: 732c 2073 7563 6820 6173 2060 605c 6f76  s, such as ``\ov
+00014d50: 6572 7269 6465 6060 2c0a 2020 2020 2020  erride``,.      
+00014d60: 6060 5c72 6576 6572 7460 602c 2060 605c  ``\revert``, ``\
+00014d70: 7365 7460 602c 2060 605c 756e 7365 7460  set``, ``\unset`
+00014d80: 602c 2061 6e64 2060 605c 6f6e 6365 6060  `, and ``\once``
+00014d90: 0a20 2020 202d 204d 7573 6963 2066 756e  .    - Music fun
+00014da0: 6374 696f 6e73 2077 6869 6368 2067 656e  ctions which gen
+00014db0: 6572 6174 6520 6f72 2065 7874 656e 7369  erate or extensi
+00014dc0: 7665 6c79 206d 7574 6174 6520 6d75 7369  vely mutate musi
+00014dd0: 6361 6c20 7374 7275 6374 7572 6573 0a20  cal structures. 
+00014de0: 2020 202d 2045 6d62 6564 6465 6420 5363     - Embedded Sc
+00014df0: 6865 6d65 2073 7461 7465 6d65 6e74 7320  heme statements 
+00014e00: 2861 6e79 7468 696e 6720 6265 6769 6e6e  (anything beginn
+00014e10: 696e 6720 7769 7468 2060 6023 6060 290a  ing with ``#``).
+00014e20: 2020 2020 2222 220a 0a20 2020 2023 2323      """..    ###
+00014e30: 2043 4c41 5353 2056 4152 4941 424c 4553   CLASS VARIABLES
+00014e40: 2023 2323 0a0a 2020 2020 5f5f 736c 6f74   ###..    __slot
+00014e50: 735f 5f20 3d20 280a 2020 2020 2020 2020  s__ = (.        
+00014e60: 225f 6368 6f72 645f 7069 7463 685f 6f72  "_chord_pitch_or
+00014e70: 6465 7273 222c 0a20 2020 2020 2020 2022  ders",.        "
+00014e80: 5f63 7572 7265 6e74 5f6d 6f64 756c 6522  _current_module"
+00014e90: 2c0a 2020 2020 2020 2020 225f 6465 6661  ,.        "_defa
+00014ea0: 756c 745f 6475 7261 7469 6f6e 222c 0a20  ult_duration",. 
+00014eb0: 2020 2020 2020 2022 5f64 6566 6175 6c74         "_default
+00014ec0: 5f6c 616e 6775 6167 6522 2c0a 2020 2020  _language",.    
+00014ed0: 2020 2020 225f 6775 696c 6522 2c0a 2020      "_guile",.  
+00014ee0: 2020 2020 2020 225f 6c61 6e67 7561 6765        "_language
+00014ef0: 5f70 6974 6368 5f6e 616d 6573 222c 0a20  _pitch_names",. 
+00014f00: 2020 2020 2020 2022 5f6c 6173 745f 6368         "_last_ch
+00014f10: 6f72 6422 2c0a 2020 2020 2020 2020 225f  ord",.        "_
+00014f20: 6c65 7864 6566 222c 0a20 2020 2020 2020  lexdef",.       
+00014f30: 2022 5f6d 6172 6b75 705f 6675 6e63 7469   "_markup_functi
+00014f40: 6f6e 7322 2c0a 2020 2020 2020 2020 225f  ons",.        "_
+00014f50: 6d61 726b 7570 5f6c 6973 745f 6675 6e63  markup_list_func
+00014f60: 7469 6f6e 7322 2c0a 2020 2020 2020 2020  tions",.        
+00014f70: 225f 7069 7463 685f 6e61 6d65 7322 2c0a  "_pitch_names",.
+00014f80: 2020 2020 2020 2020 225f 7265 7065 6174          "_repeat
+00014f90: 6564 5f63 686f 7264 7322 2c0a 2020 2020  ed_chords",.    
+00014fa0: 2020 2020 225f 7363 6f70 655f 7374 6163      "_scope_stac
+00014fb0: 6b22 2c0a 2020 2020 2020 2020 225f 7379  k",.        "_sy
+00014fc0: 6e64 6566 222c 0a20 2020 2029 0a0a 2020  ndef",.    )..  
+00014fd0: 2020 2323 2320 494e 4954 4941 4c49 5a45    ### INITIALIZE
+00014fe0: 5220 2323 230a 0a20 2020 2064 6566 205f  R ###..    def _
+00014ff0: 5f69 6e69 745f 5f28 7365 6c66 2c20 6465  _init__(self, de
+00015000: 6661 756c 745f 6c61 6e67 7561 6765 3d22  fault_language="
+00015010: 656e 676c 6973 6822 2c20 6465 6275 673d  english", debug=
+00015020: 4661 6c73 6529 3a0a 2020 2020 2020 2020  False):.        
+00015030: 2320 4c69 6c79 506f 6e64 2065 6d75 6c61  # LilyPond emula
+00015040: 7469 6f6e 2064 6174 610a 2020 2020 2020  tion data.      
+00015050: 2020 7365 6c66 2e5f 6775 696c 6520 3d20    self._guile = 
+00015060: 4775 696c 6550 726f 7879 2873 656c 6629  GuileProxy(self)
+00015070: 0a20 2020 2020 2020 2073 656c 662e 5f63  .        self._c
+00015080: 7572 7265 6e74 5f6d 6f64 756c 6520 3d20  urrent_module = 
+00015090: 5f6c 7965 6e76 2e63 7572 7265 6e74 5f6d  _lyenv.current_m
+000150a0: 6f64 756c 650a 2020 2020 2020 2020 7365  odule.        se
+000150b0: 6c66 2e5f 6c61 6e67 7561 6765 5f70 6974  lf._language_pit
+000150c0: 6368 5f6e 616d 6573 203d 205f 6c79 656e  ch_names = _lyen
+000150d0: 762e 6c61 6e67 7561 6765 5f70 6974 6368  v.language_pitch
+000150e0: 5f6e 616d 6573 0a20 2020 2020 2020 2073  _names.        s
+000150f0: 656c 662e 5f6d 6172 6b75 705f 6675 6e63  elf._markup_func
+00015100: 7469 6f6e 7320 3d20 5f6c 7965 6e76 2e6d  tions = _lyenv.m
+00015110: 6172 6b75 705f 6675 6e63 7469 6f6e 730a  arkup_functions.
+00015120: 2020 2020 2020 2020 7365 6c66 2e5f 6d61          self._ma
+00015130: 726b 7570 5f6c 6973 745f 6675 6e63 7469  rkup_list_functi
+00015140: 6f6e 7320 3d20 5f6c 7965 6e76 2e6d 6172  ons = _lyenv.mar
+00015150: 6b75 705f 6c69 7374 5f66 756e 6374 696f  kup_list_functio
+00015160: 6e73 0a20 2020 2020 2020 2073 656c 662e  ns.        self.
+00015170: 6465 6661 756c 745f 6c61 6e67 7561 6765  default_language
+00015180: 203d 2064 6566 6175 6c74 5f6c 616e 6775   = default_langu
+00015190: 6167 650a 0a20 2020 2020 2020 2023 2061  age..        # a
+000151a0: 7474 6163 6820 7061 7273 6572 2061 6e64  ttach parser and
+000151b0: 206c 6578 6572 2072 756c 6573 0a20 2020   lexer rules.   
+000151c0: 2020 2020 2073 656c 662e 5f6c 6578 6465       self._lexde
+000151d0: 6620 3d20 4c69 6c79 506f 6e64 4c65 7869  f = LilyPondLexi
+000151e0: 6361 6c44 6566 696e 6974 696f 6e28 7365  calDefinition(se
+000151f0: 6c66 290a 2020 2020 2020 2020 7365 6c66  lf).        self
+00015200: 2e5f 7379 6e64 6566 203d 204c 696c 7950  ._syndef = LilyP
+00015210: 6f6e 6453 796e 7461 6374 6963 616c 4465  ondSyntacticalDe
+00015220: 6669 6e69 7469 6f6e 2873 656c 6629 0a0a  finition(self)..
+00015230: 2020 2020 2020 2020 2320 6275 696c 6420          # build 
+00015240: 504c 5920 7061 7273 6572 2061 6e64 206c  PLY parser and l
+00015250: 6578 6572 0a20 2020 2020 2020 2050 6172  exer.        Par
+00015260: 7365 722e 5f5f 696e 6974 5f5f 2873 656c  ser.__init__(sel
+00015270: 662c 2064 6562 7567 3d64 6562 7567 290a  f, debug=debug).
+00015280: 0a20 2020 2020 2020 2073 656c 662e 5f72  .        self._r
+00015290: 6573 6574 5f70 6172 7365 725f 7661 7269  eset_parser_vari
+000152a0: 6162 6c65 7328 290a 0a20 2020 2023 2323  ables()..    ###
+000152b0: 2053 5045 4349 414c 204d 4554 484f 4453   SPECIAL METHODS
+000152c0: 2023 2323 0a0a 2020 2020 6465 6620 5f5f   ###..    def __
+000152d0: 6361 6c6c 5f5f 2873 656c 662c 2069 6e70  call__(self, inp
+000152e0: 7574 5f73 7472 696e 6729 3a0a 2020 2020  ut_string):.    
+000152f0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00015300: 4361 6c6c 7320 4c69 6c79 506f 6e64 2070  Calls LilyPond p
+00015310: 6172 7365 7220 6f6e 2060 6069 6e70 7574  arser on ``input
+00015320: 5f73 7472 696e 6760 602e 0a0a 2020 2020  _string``...    
+00015330: 2020 2020 5265 7475 726e 7320 4162 6a61      Returns Abja
+00015340: 6420 636f 6d70 6f6e 656e 7473 2e0a 2020  d components..  
+00015350: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00015360: 2020 7365 6c66 2e5f 7265 7365 745f 7061    self._reset_pa
+00015370: 7273 6572 5f76 6172 6961 626c 6573 2829  rser_variables()
+00015380: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00015390: 2e5f 6465 6275 673a 0a20 2020 2020 2020  ._debug:.       
+000153a0: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+000153b0: 6c66 2e5f 7061 7273 6572 2e5f 6c69 6c79  lf._parser._lily
+000153c0: 706f 6e64 5f70 6174 6368 5f70 6172 7365  pond_patch_parse
+000153d0: 5f64 6562 7567 280a 2020 2020 2020 2020  _debug(.        
+000153e0: 2020 2020 2020 2020 696e 7075 745f 7374          input_st
+000153f0: 7269 6e67 2c20 6c65 7865 723d 7365 6c66  ring, lexer=self
+00015400: 2e5f 6c65 7865 722c 2064 6562 7567 3d73  ._lexer, debug=s
+00015410: 656c 662e 5f6c 6f67 6765 720a 2020 2020  elf._logger.    
+00015420: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00015430: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00015440: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
+00015450: 662e 5f70 6172 7365 722e 5f6c 696c 7970  f._parser._lilyp
+00015460: 6f6e 645f 7061 7463 685f 7061 7273 6528  ond_patch_parse(
+00015470: 696e 7075 745f 7374 7269 6e67 2c20 6c65  input_string, le
+00015480: 7865 723d 7365 6c66 2e5f 6c65 7865 7229  xer=self._lexer)
+00015490: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000154a0: 7265 7375 6c74 0a0a 2020 2020 2323 2320  result..    ### 
+000154b0: 5052 4956 4154 4520 4d45 5448 4f44 5320  PRIVATE METHODS 
+000154c0: 2323 230a 0a20 2020 2064 6566 205f 6173  ###..    def _as
+000154d0: 7369 676e 5f76 6172 6961 626c 6528 7365  sign_variable(se
+000154e0: 6c66 2c20 6964 656e 7469 6669 6572 2c20  lf, identifier, 
+000154f0: 7661 6c75 6529 3a0a 2020 2020 2020 2020  value):.        
+00015500: 7365 6c66 2e5f 7363 6f70 655f 7374 6163  self._scope_stac
+00015510: 6b5b 2d31 5d5b 6964 656e 7469 6669 6572  k[-1][identifier
+00015520: 5d20 3d20 7661 6c75 650a 0a20 2020 2064  ] = value..    d
+00015530: 6566 205f 6261 636b 7570 5f74 6f6b 656e  ef _backup_token
+00015540: 2873 656c 662c 2074 6f6b 656e 5f74 7970  (self, token_typ
+00015550: 652c 2074 6f6b 656e 5f76 616c 7565 293a  e, token_value):
+00015560: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00015570: 2e5f 6465 6275 673a 0a20 2020 2020 2020  ._debug:.       
+00015580: 2020 2020 2073 656c 662e 5f6c 6f67 6765       self._logge
+00015590: 722e 696e 666f 2822 4578 7472 6120 203a  r.info("Extra  :
+000155a0: 2042 6163 6b69 6e67 2075 7022 290a 0a20   Backing up").. 
+000155b0: 2020 2020 2020 2023 2070 7573 6820 7468         # push th
+000155c0: 6520 6375 7272 656e 7420 6c6f 6f6b 6168  e current lookah
+000155d0: 6561 6420 6261 636b 206f 6e74 6f20 7468  ead back onto th
+000155e0: 6520 6c6f 6f6b 6168 6561 6473 7461 636b  e lookaheadstack
+000155f0: 0a20 2020 2020 2020 2073 656c 662e 5f70  .        self._p
+00015600: 7573 685f 6578 7472 615f 746f 6b65 6e28  ush_extra_token(
+00015610: 7365 6c66 2e5f 7061 7273 6572 2e6c 6f6f  self._parser.loo
+00015620: 6b61 6865 6164 290a 0a20 2020 2020 2020  kahead)..       
+00015630: 2023 2063 7265 6174 6520 7468 6520 6261   # create the ba
+00015640: 636b 7570 2074 6f6b 656e 2c20 7365 7420  ckup token, set 
+00015650: 6173 206e 6577 206c 6f6f 6b61 6865 6164  as new lookahead
+00015660: 0a20 2020 2020 2020 2062 6163 6b75 7020  .        backup 
+00015670: 3d20 706c 792e 6c65 782e 4c65 7854 6f6b  = ply.lex.LexTok
+00015680: 656e 2829 0a20 2020 2020 2020 2062 6163  en().        bac
+00015690: 6b75 702e 7479 7065 203d 2022 4241 434b  kup.type = "BACK
+000156a0: 5550 220a 2020 2020 2020 2020 6261 636b  UP".        back
+000156b0: 7570 2e76 616c 7565 203d 2022 2862 6163  up.value = "(bac
+000156c0: 6b65 642d 7570 3f29 220a 2020 2020 2020  ked-up?)".      
+000156d0: 2020 6261 636b 7570 2e6c 6578 706f 7320    backup.lexpos 
+000156e0: 3d20 300a 2020 2020 2020 2020 6261 636b  = 0.        back
+000156f0: 7570 2e6c 696e 656e 6f20 3d20 300a 2020  up.lineno = 0.  
+00015700: 2020 2020 2020 7365 6c66 2e5f 7061 7273        self._pars
+00015710: 6572 2e6c 6f6f 6b61 6865 6164 203d 2062  er.lookahead = b
+00015720: 6163 6b75 700a 0a20 2020 2020 2020 2069  ackup..        i
+00015730: 6620 746f 6b65 6e5f 7479 7065 3a0a 2020  f token_type:.  
+00015740: 2020 2020 2020 2020 2020 746f 6b65 6e20            token 
+00015750: 3d20 706c 792e 6c65 782e 4c65 7854 6f6b  = ply.lex.LexTok
+00015760: 656e 2829 0a20 2020 2020 2020 2020 2020  en().           
+00015770: 2074 6f6b 656e 2e74 7970 6520 3d20 746f   token.type = to
+00015780: 6b65 6e5f 7479 7065 0a20 2020 2020 2020  ken_type.       
+00015790: 2020 2020 2074 6f6b 656e 2e76 616c 7565       token.value
+000157a0: 203d 2074 6f6b 656e 5f76 616c 7565 0a20   = token_value. 
+000157b0: 2020 2020 2020 2020 2020 2074 6f6b 656e             token
+000157c0: 2e6c 6578 706f 7320 3d20 300a 2020 2020  .lexpos = 0.    
+000157d0: 2020 2020 2020 2020 746f 6b65 6e2e 6c69          token.li
+000157e0: 6e65 6e6f 203d 2030 0a20 2020 2020 2020  neno = 0.       
+000157f0: 2020 2020 2073 656c 662e 5f70 7573 685f       self._push_
+00015800: 6578 7472 615f 746f 6b65 6e28 746f 6b65  extra_token(toke
+00015810: 6e29 0a0a 2020 2020 6465 6620 5f63 6f6e  n)..    def _con
+00015820: 7374 7275 6374 5f63 6f6e 7465 7874 5f73  struct_context_s
+00015830: 7065 6363 6564 5f6d 7573 6963 280a 2020  pecced_music(.  
+00015840: 2020 2020 2020 7365 6c66 2c20 636f 6e74        self, cont
+00015850: 6578 742c 206f 7074 696f 6e61 6c5f 6964  ext, optional_id
+00015860: 2c20 6f70 7469 6f6e 616c 5f63 6f6e 7465  , optional_conte
+00015870: 7874 5f6d 6f64 2c20 6d75 7369 630a 2020  xt_mod, music.  
+00015880: 2020 293a 0a20 2020 2020 2020 206b 6e6f    ):.        kno
+00015890: 776e 5f63 6f6e 7465 7874 7320 3d20 7b0a  wn_contexts = {.
+000158a0: 2020 2020 2020 2020 2020 2020 2243 686f              "Cho
+000158b0: 6972 5374 6166 6622 3a20 5f73 636f 7265  irStaff": _score
+000158c0: 2e53 7461 6666 4772 6f75 702c 0a20 2020  .StaffGroup,.   
+000158d0: 2020 2020 2020 2020 2022 4772 616e 6453           "GrandS
+000158e0: 7461 6666 223a 205f 7363 6f72 652e 5374  taff": _score.St
+000158f0: 6166 6647 726f 7570 2c0a 2020 2020 2020  affGroup,.      
+00015900: 2020 2020 2020 2250 6961 6e6f 5374 6166        "PianoStaf
+00015910: 6622 3a20 5f73 636f 7265 2e53 7461 6666  f": _score.Staff
+00015920: 4772 6f75 702c 0a20 2020 2020 2020 2020  Group,.         
+00015930: 2020 2022 5363 6f72 6522 3a20 5f73 636f     "Score": _sco
+00015940: 7265 2e53 636f 7265 2c0a 2020 2020 2020  re.Score,.      
+00015950: 2020 2020 2020 2253 7461 6666 223a 205f        "Staff": _
+00015960: 7363 6f72 652e 5374 6166 662c 0a20 2020  score.Staff,.   
+00015970: 2020 2020 2020 2020 2022 5374 6166 6647           "StaffG
+00015980: 726f 7570 223a 205f 7363 6f72 652e 5374  roup": _score.St
+00015990: 6166 6647 726f 7570 2c0a 2020 2020 2020  affGroup,.      
+000159a0: 2020 2020 2020 2256 6f69 6365 223a 205f        "Voice": _
+000159b0: 7363 6f72 652e 566f 6963 652c 0a20 2020  score.Voice,.   
+000159c0: 2020 2020 207d 0a20 2020 2020 2020 206c       }.        l
+000159d0: 696c 7970 6f6e 645f 7479 7065 203d 2063  ilypond_type = c
+000159e0: 6f6e 7465 7874 0a20 2020 2020 2020 2069  ontext.        i
+000159f0: 6620 636f 6e74 6578 7420 696e 206b 6e6f  f context in kno
+00015a00: 776e 5f63 6f6e 7465 7874 733a 0a20 2020  wn_contexts:.   
+00015a10: 2020 2020 2020 2020 2063 6f6e 7465 7874           context
+00015a20: 203d 206b 6e6f 776e 5f63 6f6e 7465 7874   = known_context
+00015a30: 735b 636f 6e74 6578 745d 285b 5d29 0a20  s[context]([]). 
+00015a40: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00015a50: 2020 2020 2020 2020 2072 6169 7365 2045           raise E
+00015a60: 7863 6570 7469 6f6e 2866 2263 6f6e 7465  xception(f"conte
+00015a70: 7874 2074 7970 6520 7b63 6f6e 7465 7874  xt type {context
+00015a80: 2172 7d20 6e6f 7420 7375 7070 6f72 7465  !r} not supporte
+00015a90: 642e 2229 0a20 2020 2020 2020 2069 6620  d.").        if 
+00015aa0: 6c69 6c79 706f 6e64 5f74 7970 6520 696e  lilypond_type in
+00015ab0: 2028 2247 7261 6e64 5374 6166 6622 2c20   ("GrandStaff", 
+00015ac0: 2250 6961 6e6f 5374 6166 6622 293a 0a20  "PianoStaff"):. 
+00015ad0: 2020 2020 2020 2020 2020 2063 6f6e 7465             conte
+00015ae0: 7874 2e6c 696c 7970 6f6e 645f 7479 7065  xt.lilypond_type
+00015af0: 203d 206c 696c 7970 6f6e 645f 7479 7065   = lilypond_type
+00015b00: 0a20 2020 2020 2020 2069 6620 6f70 7469  .        if opti
+00015b10: 6f6e 616c 5f69 6420 6973 206e 6f74 204e  onal_id is not N
+00015b20: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00015b30: 2063 6f6e 7465 7874 2e6e 616d 6520 3d20   context.name = 
+00015b40: 6f70 7469 6f6e 616c 5f69 640a 2020 2020  optional_id.    
+00015b50: 2020 2020 6966 206f 7074 696f 6e61 6c5f      if optional_
+00015b60: 636f 6e74 6578 745f 6d6f 6420 6973 206e  context_mod is n
+00015b70: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00015b80: 2020 2020 2066 6f72 2078 2069 6e20 6f70       for x in op
+00015b90: 7469 6f6e 616c 5f63 6f6e 7465 7874 5f6d  tional_context_m
+00015ba0: 6f64 3a0a 2020 2020 2020 2020 2020 2020  od:.            
+00015bb0: 2020 2020 7072 696e 7428 7829 0a20 2020      print(x).   
+00015bc0: 2020 2020 2020 2020 2023 2054 4f44 4f3a           # TODO:
+00015bd0: 2069 6d70 656c 656d 656e 7420 636f 6e74   impelement cont
+00015be0: 6578 7420 6d6f 6473 206f 6e20 636f 6e74  ext mods on cont
+00015bf0: 6578 7473 0a20 2020 2020 2020 2020 2020  exts.           
+00015c00: 2070 6173 730a 2020 2020 2020 2020 636f   pass.        co
+00015c10: 6e74 6578 742e 7369 6d75 6c74 616e 656f  ntext.simultaneo
+00015c20: 7573 203d 206d 7573 6963 2e73 696d 756c  us = music.simul
+00015c30: 7461 6e65 6f75 730a 2020 2020 2020 2020  taneous.        
+00015c40: 2320 6164 6420 6368 696c 6472 656e 0a20  # add children. 
+00015c50: 2020 2020 2020 2077 6869 6c65 206c 656e         while len
+00015c60: 286d 7573 6963 293a 0a20 2020 2020 2020  (music):.       
+00015c70: 2020 2020 2063 6f6d 706f 6e65 6e74 203d       component =
+00015c80: 206d 7573 6963 2e70 6f70 2830 290a 2020   music.pop(0).  
+00015c90: 2020 2020 2020 2020 2020 636f 6e74 6578            contex
+00015ca0: 742e 6170 7065 6e64 2863 6f6d 706f 6e65  t.append(compone
+00015cb0: 6e74 290a 2020 2020 2020 2020 666f 7220  nt).        for 
+00015cc0: 7772 6170 7065 7220 696e 206d 7573 6963  wrapper in music
+00015cd0: 2e5f 7772 6170 7065 7273 3a0a 2020 2020  ._wrappers:.    
+00015ce0: 2020 2020 2020 2020 5f62 696e 642e 6174          _bind.at
+00015cf0: 7461 6368 2877 7261 7070 6572 2c20 636f  tach(wrapper, co
+00015d00: 6e74 6578 7429 0a20 2020 2020 2020 2072  ntext).        r
+00015d10: 6574 7572 6e20 636f 6e74 6578 740a 0a20  eturn context.. 
+00015d20: 2020 2064 6566 205f 636f 6e73 7472 7563     def _construc
+00015d30: 745f 7365 7175 656e 7469 616c 5f6d 7573  t_sequential_mus
+00015d40: 6963 2873 656c 662c 206d 7573 6963 293a  ic(self, music):
+00015d50: 0a20 2020 2020 2020 2023 2069 6e64 6963  .        # indic
+00015d60: 6174 6f72 2073 6f72 7469 6e67 2063 6f75  ator sorting cou
+00015d70: 6c64 2062 6520 7265 7772 6974 7465 6e20  ld be rewritten 
+00015d80: 696e 746f 2061 2073 696e 676c 6520 6c69  into a single li
+00015d90: 7374 2075 7369 6e67 2074 7570 6c65 730a  st using tuples.
+00015da0: 2020 2020 2020 2020 2320 7769 7468 2074          # with t
+00015db0: 5b30 5d20 6265 696e 6720 2766 6f72 7761  [0] being 'forwa
+00015dc0: 7264 2720 6f72 2027 6261 636b 7761 7264  rd' or 'backward
+00015dd0: 2720 616e 6420 745b 315d 2062 6569 6e67  ' and t[1] being
+00015de0: 2074 6865 2069 6e64 6963 6174 6f72 0a20   the indicator. 
+00015df0: 2020 2020 2020 2023 2061 7320 7468 6973         # as this
+00015e00: 2062 6574 7465 7220 7072 6573 6572 7665   better preserve
+00015e10: 7320 6174 7461 6368 6d65 6e74 206f 7264  s attachment ord
+00015e20: 6572 2e20 4e6f 7420 636c 6561 7220 6966  er. Not clear if
+00015e30: 2077 6520 6e65 6564 2069 742e 0a20 2020   we need it..   
+00015e40: 2020 2020 2063 6f6e 7461 696e 6572 203d       container =
+00015e50: 205f 7363 6f72 652e 436f 6e74 6169 6e65   _score.Containe
+00015e60: 7228 290a 2020 2020 2020 2020 7072 6576  r().        prev
+00015e70: 696f 7573 5f6c 6561 6620 3d20 4e6f 6e65  ious_leaf = None
+00015e80: 0a20 2020 2020 2020 2061 7070 6c79 5f66  .        apply_f
+00015e90: 6f72 7761 7264 203d 205b 5d0a 2020 2020  orward = [].    
+00015ea0: 2020 2020 6170 706c 795f 6261 636b 7761      apply_backwa
+00015eb0: 7264 203d 205b 5d0a 2020 2020 2020 2020  rd = [].        
+00015ec0: 2320 736f 7274 2065 7665 6e74 7320 696e  # sort events in
+00015ed0: 746f 2066 6f72 7761 7264 206f 7220 6261  to forward or ba
+00015ee0: 636b 7761 7264 7320 6174 7461 6368 696e  ckwards attachin
+00015ef0: 670a 2020 2020 2020 2020 2320 616e 6420  g.        # and 
+00015f00: 6174 7461 6368 2074 6865 6d20 746f 2074  attach them to t
+00015f10: 6865 2070 726f 7065 7220 6c65 6166 0a20  he proper leaf. 
+00015f20: 2020 2020 2020 2066 6f72 2078 2069 6e20         for x in 
+00015f30: 6d75 7369 633a 0a20 2020 2020 2020 2020  music:.         
+00015f40: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00015f50: 2878 2c20 5f73 636f 7265 2e43 6f6d 706f  (x, _score.Compo
+00015f60: 6e65 6e74 2920 616e 6420 6e6f 7420 6973  nent) and not is
+00015f70: 696e 7374 616e 6365 280a 2020 2020 2020  instance(.      
+00015f80: 2020 2020 2020 2020 2020 782c 205f 7363            x, _sc
+00015f90: 6f72 652e 4265 666f 7265 4772 6163 6543  ore.BeforeGraceC
+00015fa0: 6f6e 7461 696e 6572 0a20 2020 2020 2020  ontainer.       
+00015fb0: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
+00015fc0: 2020 2020 2020 2020 666f 7220 696e 6469          for indi
+00015fd0: 6361 746f 7220 696e 2061 7070 6c79 5f66  cator in apply_f
+00015fe0: 6f72 7761 7264 3a0a 2020 2020 2020 2020  orward:.        
+00015ff0: 2020 2020 2020 2020 2020 2020 5f62 696e              _bin
+00016000: 642e 6174 7461 6368 2869 6e64 6963 6174  d.attach(indicat
+00016010: 6f72 2c20 7829 0a20 2020 2020 2020 2020  or, x).         
+00016020: 2020 2020 2020 2069 6620 7072 6576 696f         if previo
+00016030: 7573 5f6c 6561 663a 0a20 2020 2020 2020  us_leaf:.       
+00016040: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00016050: 2069 6e64 6963 6174 6f72 2069 6e20 6170   indicator in ap
+00016060: 706c 795f 6261 636b 7761 7264 3a0a 2020  ply_backward:.  
 00016070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016080: 5f62 696e 642e 6174 7461 6368 2869 6e64  _bind.attach(ind
-00016090: 6963 6174 6f72 2c20 7072 6576 696f 7573  icator, previous
-000160a0: 5f6c 6561 6629 0a20 2020 2020 2020 2020  _leaf).         
-000160b0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000160c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000160d0: 2066 6f72 2069 6e64 6963 6174 6f72 2069   for indicator i
-000160e0: 6e20 6170 706c 795f 6261 636b 7761 7264  n apply_backward
-000160f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00016100: 2020 2020 2020 2020 2020 5f62 696e 642e            _bind.
-00016110: 6174 7461 6368 2869 6e64 6963 6174 6f72  attach(indicator
-00016120: 2c20 7829 0a20 2020 2020 2020 2020 2020  , x).           
-00016130: 2020 2020 2061 7070 6c79 5f66 6f72 7761       apply_forwa
-00016140: 7264 5b3a 5d20 3d20 5b5d 0a20 2020 2020  rd[:] = [].     
-00016150: 2020 2020 2020 2020 2020 2061 7070 6c79             apply
-00016160: 5f62 6163 6b77 6172 645b 3a5d 203d 205b  _backward[:] = [
-00016170: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00016180: 2020 7072 6576 696f 7573 5f6c 6561 6620    previous_leaf 
-00016190: 3d20 780a 2020 2020 2020 2020 2020 2020  = x.            
-000161a0: 2020 2020 636f 6e74 6169 6e65 722e 6170      container.ap
-000161b0: 7065 6e64 2878 290a 2020 2020 2020 2020  pend(x).        
-000161c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000161d0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-000161e0: 6e73 7461 6e63 6528 782c 205f 696e 6469  nstance(x, _indi
-000161f0: 6361 746f 7273 2e42 6172 4c69 6e65 293a  cators.BarLine):
-00016200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016210: 2020 2020 2061 7070 6c79 5f62 6163 6b77       apply_backw
-00016220: 6172 642e 6170 7065 6e64 2878 290a 2020  ard.append(x).  
-00016230: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00016240: 6966 2069 7369 6e73 7461 6e63 6528 782c  if isinstance(x,
-00016250: 205f 696e 6469 6361 746f 7273 2e4c 696c   _indicators.Lil
-00016260: 7950 6f6e 644c 6974 6572 616c 2920 616e  yPondLiteral) an
-00016270: 6420 782e 6172 6775 6d65 6e74 2069 6e20  d x.argument in 
-00016280: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00016290: 2020 2020 2020 7222 5c62 7265 616b 222c        r"\break",
-000162a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000162b0: 2020 2020 2072 225c 6272 6561 7468 6522       r"\breathe"
-000162c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000162d0: 2020 2020 2020 7222 5c70 6167 6542 7265        r"\pageBre
-000162e0: 616b 222c 0a20 2020 2020 2020 2020 2020  ak",.           
-000162f0: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-00016300: 2020 2020 2020 2020 2020 2020 6170 706c              appl
-00016310: 795f 6261 636b 7761 7264 2e61 7070 656e  y_backward.appen
-00016320: 6428 7829 0a20 2020 2020 2020 2020 2020  d(x).           
-00016330: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00016340: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00016350: 7070 6c79 5f66 6f72 7761 7264 2e61 7070  pply_forward.app
-00016360: 656e 6428 7829 0a20 2020 2020 2020 2023  end(x).        #
-00016370: 2061 7474 6163 6820 7265 6d61 696e 696e   attach remainin
-00016380: 6720 6576 656e 7473 2074 6f20 6c61 7374  g events to last
-00016390: 206c 6561 660a 2020 2020 2020 2020 2320   leaf.        # 
-000163a0: 6f72 2074 6f20 7468 6520 636f 6e74 6169  or to the contai
-000163b0: 6e65 7220 6974 7365 6c66 2069 6620 7468  ner itself if th
-000163c0: 6572 6520 7765 7265 206e 6f20 6c65 6176  ere were no leav
-000163d0: 6573 0a20 2020 2020 2020 2069 6620 7072  es.        if pr
-000163e0: 6576 696f 7573 5f6c 6561 663a 0a20 2020  evious_leaf:.   
-000163f0: 2020 2020 2020 2020 2066 6f72 2069 6e64           for ind
-00016400: 6963 6174 6f72 2069 6e20 6170 706c 795f  icator in apply_
-00016410: 666f 7277 6172 643a 0a20 2020 2020 2020  forward:.       
-00016420: 2020 2020 2020 2020 205f 6269 6e64 2e61           _bind.a
-00016430: 7474 6163 6828 696e 6469 6361 746f 722c  ttach(indicator,
-00016440: 2070 7265 7669 6f75 735f 6c65 6166 290a   previous_leaf).
-00016450: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00016460: 696e 6469 6361 746f 7220 696e 2061 7070  indicator in app
-00016470: 6c79 5f62 6163 6b77 6172 643a 0a20 2020  ly_backward:.   
-00016480: 2020 2020 2020 2020 2020 2020 205f 6269               _bi
-00016490: 6e64 2e61 7474 6163 6828 696e 6469 6361  nd.attach(indica
-000164a0: 746f 722c 2070 7265 7669 6f75 735f 6c65  tor, previous_le
-000164b0: 6166 290a 2020 2020 2020 2020 656c 7365  af).        else
-000164c0: 3a0a 2020 2020 2020 2020 2020 2020 666f  :.            fo
-000164d0: 7220 696e 6469 6361 746f 7220 696e 2061  r indicator in a
-000164e0: 7070 6c79 5f66 6f72 7761 7264 3a0a 2020  pply_forward:.  
-000164f0: 2020 2020 2020 2020 2020 2020 2020 5f62                _b
-00016500: 696e 642e 6174 7461 6368 2869 6e64 6963  ind.attach(indic
-00016510: 6174 6f72 2c20 636f 6e74 6169 6e65 7229  ator, container)
-00016520: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00016530: 2069 6e64 6963 6174 6f72 2069 6e20 6170   indicator in ap
-00016540: 706c 795f 6261 636b 7761 7264 3a0a 2020  ply_backward:.  
-00016550: 2020 2020 2020 2020 2020 2020 2020 5f62                _b
-00016560: 696e 642e 6174 7461 6368 2869 6e64 6963  ind.attach(indic
-00016570: 6174 6f72 2c20 636f 6e74 6169 6e65 7229  ator, container)
-00016580: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00016590: 636f 6e74 6169 6e65 720a 0a20 2020 2064  container..    d
-000165a0: 6566 205f 636f 6e73 7472 7563 745f 7369  ef _construct_si
-000165b0: 6d75 6c74 616e 656f 7573 5f6d 7573 6963  multaneous_music
-000165c0: 2873 656c 662c 206d 7573 6963 293a 0a20  (self, music):. 
-000165d0: 2020 2020 2020 2064 6566 2069 735f 7365         def is_se
-000165e0: 7061 7261 746f 7228 7829 3a0a 2020 2020  parator(x):.    
-000165f0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00016600: 7461 6e63 6528 782c 204c 696c 7950 6f6e  tance(x, LilyPon
-00016610: 6445 7665 6e74 293a 0a20 2020 2020 2020  dEvent):.       
-00016620: 2020 2020 2020 2020 2069 6620 782e 6e61           if x.na
-00016630: 6d65 203d 3d20 2256 6f69 6365 5365 7061  me == "VoiceSepa
-00016640: 7261 746f 7222 3a0a 2020 2020 2020 2020  rator":.        
-00016650: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00016660: 726e 2054 7275 650a 2020 2020 2020 2020  rn True.        
-00016670: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-00016680: 0a0a 2020 2020 2020 2020 636f 6e74 6169  ..        contai
-00016690: 6e65 7220 3d20 5f73 636f 7265 2e43 6f6e  ner = _score.Con
-000166a0: 7461 696e 6572 2829 0a20 2020 2020 2020  tainer().       
-000166b0: 2063 6f6e 7461 696e 6572 2e73 696d 756c   container.simul
-000166c0: 7461 6e65 6f75 7320 3d20 5472 7565 0a20  taneous = True. 
-000166d0: 2020 2020 2020 2023 2063 6865 636b 2066         # check f
-000166e0: 6f72 2076 6f69 6365 2073 6570 6172 6174  or voice separat
-000166f0: 6f72 730a 2020 2020 2020 2020 6772 6f75  ors.        grou
-00016700: 7073 203d 205b 5d0a 2020 2020 2020 2020  ps = [].        
-00016710: 666f 7220 7661 6c75 652c 2067 726f 7570  for value, group
-00016720: 2069 6e20 6974 6572 746f 6f6c 732e 6772   in itertools.gr
-00016730: 6f75 7062 7928 6d75 7369 632c 2069 735f  oupby(music, is_
-00016740: 7365 7061 7261 746f 7229 3a0a 2020 2020  separator):.    
-00016750: 2020 2020 2020 2020 6966 206e 6f74 2076          if not v
-00016760: 616c 7565 3a0a 2020 2020 2020 2020 2020  alue:.          
-00016770: 2020 2020 2020 6772 6f75 7073 2e61 7070        groups.app
-00016780: 656e 6428 6c69 7374 2867 726f 7570 2929  end(list(group))
-00016790: 0a20 2020 2020 2020 2023 2077 6974 686f  .        # witho
-000167a0: 7574 2076 6f69 6365 2073 6570 6172 6174  ut voice separat
-000167b0: 6f72 730a 2020 2020 2020 2020 6966 2031  ors.        if 1
-000167c0: 203d 3d20 6c65 6e28 6772 6f75 7073 293a   == len(groups):
-000167d0: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
-000167e0: 7373 6572 7420 616c 6c28 6973 696e 7374  ssert all(isinst
-000167f0: 616e 6365 2878 2c20 5f73 636f 7265 2e43  ance(x, _score.C
-00016800: 6f6e 7465 7874 2920 666f 7220 7820 696e  ontext) for x in
-00016810: 2067 726f 7570 735b 305d 290a 2020 2020   groups[0]).    
-00016820: 2020 2020 2020 2020 636f 6e74 6169 6e65          containe
-00016830: 722e 6578 7465 6e64 2867 726f 7570 735b  r.extend(groups[
-00016840: 305d 290a 2020 2020 2020 2020 2320 7769  0]).        # wi
-00016850: 7468 2076 6f69 6365 2073 6570 6172 6174  th voice separat
-00016860: 6f72 730a 2020 2020 2020 2020 656c 7365  ors.        else
-00016870: 3a0a 2020 2020 2020 2020 2020 2020 666f  :.            fo
-00016880: 7220 6772 6f75 7020 696e 2067 726f 7570  r group in group
-00016890: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-000168a0: 2020 2063 6f6e 7461 696e 6572 2e61 7070     container.app
-000168b0: 656e 6428 0a20 2020 2020 2020 2020 2020  end(.           
-000168c0: 2020 2020 2020 2020 205f 7363 6f72 652e           _score.
-000168d0: 566f 6963 6528 7365 6c66 2e5f 636f 6e73  Voice(self._cons
-000168e0: 7472 7563 745f 7365 7175 656e 7469 616c  truct_sequential
-000168f0: 5f6d 7573 6963 2867 726f 7570 295b 3a5d  _music(group)[:]
-00016900: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00016910: 2020 290a 2020 2020 2020 2020 7265 7475    ).        retu
-00016920: 726e 2063 6f6e 7461 696e 6572 0a0a 2020  rn container..  
-00016930: 2020 4063 6c61 7373 6d65 7468 6f64 0a20    @classmethod. 
-00016940: 2020 2064 6566 205f 6765 745f 7363 6865     def _get_sche
-00016950: 6d65 5f70 7265 6469 6361 7465 7328 636c  me_predicates(cl
-00016960: 6173 735f 293a 0a20 2020 2020 2020 2072  ass_):.        r
-00016970: 6574 7572 6e20 7b0a 2020 2020 2020 2020  eturn {.        
-00016980: 2020 2020 2262 6f6f 6c65 616e 3f22 3a20      "boolean?": 
-00016990: 6c61 6d62 6461 2078 3a20 6973 696e 7374  lambda x: isinst
-000169a0: 616e 6365 2878 2c20 626f 6f6c 292c 0a20  ance(x, bool),. 
-000169b0: 2020 2020 2020 2020 2020 2022 6368 6561             "chea
-000169c0: 702d 6c69 7374 3f22 3a20 6c61 6d62 6461  p-list?": lambda
-000169d0: 2078 3a20 6973 696e 7374 616e 6365 2878   x: isinstance(x
-000169e0: 2c20 6c69 7374 207c 2074 7570 6c65 292c  , list | tuple),
-000169f0: 0a20 2020 2020 2020 2020 2020 2022 6368  .            "ch
-00016a00: 6561 702d 6d61 726b 7570 3f22 3a20 6c61  eap-markup?": la
-00016a10: 6d62 6461 2078 3a20 6973 696e 7374 616e  mbda x: isinstan
-00016a20: 6365 2878 2c20 4d61 726b 7570 436f 6d6d  ce(x, MarkupComm
-00016a30: 616e 6429 2c0a 2020 2020 2020 2020 2020  and),.          
-00016a40: 2020 2266 7261 6374 696f 6e3f 223a 206c    "fraction?": l
-00016a50: 616d 6264 6120 783a 2069 7369 6e73 7461  ambda x: isinsta
-00016a60: 6e63 6528 782c 204c 696c 7950 6f6e 6446  nce(x, LilyPondF
-00016a70: 7261 6374 696f 6e29 2c0a 2020 2020 2020  raction),.      
-00016a80: 2020 2020 2020 2269 6e74 6567 6572 3f22        "integer?"
-00016a90: 3a20 6c61 6d62 6461 2078 3a20 6973 696e  : lambda x: isin
-00016aa0: 7374 616e 6365 2878 2c20 696e 7429 2c0a  stance(x, int),.
-00016ab0: 2020 2020 2020 2020 2020 2020 226c 6973              "lis
-00016ac0: 743f 223a 206c 616d 6264 6120 783a 2069  t?": lambda x: i
-00016ad0: 7369 6e73 7461 6e63 6528 782c 206c 6973  sinstance(x, lis
-00016ae0: 7420 7c20 7475 706c 6529 2c0a 2020 2020  t | tuple),.    
-00016af0: 2020 2020 2020 2020 226c 793a 6475 7261          "ly:dura
-00016b00: 7469 6f6e 3f22 3a20 6c61 6d62 6461 2078  tion?": lambda x
-00016b10: 3a20 6973 696e 7374 616e 6365 2878 2c20  : isinstance(x, 
-00016b20: 4c69 6c79 506f 6e64 4475 7261 7469 6f6e  LilyPondDuration
-00016b30: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
-00016b40: 6c79 3a6d 7573 6963 3f22 3a20 6c61 6d62  ly:music?": lamb
-00016b50: 6461 2078 3a20 6973 696e 7374 616e 6365  da x: isinstance
-00016b60: 2878 2c20 5f73 636f 7265 2e43 6f6d 706f  (x, _score.Compo
-00016b70: 6e65 6e74 292c 0a20 2020 2020 2020 2020  nent),.         
-00016b80: 2020 2022 6c79 3a70 6974 6368 3f22 3a20     "ly:pitch?": 
-00016b90: 6c61 6d62 6461 2078 3a20 6973 696e 7374  lambda x: isinst
-00016ba0: 616e 6365 2878 2c20 5f70 6974 6368 2e4e  ance(x, _pitch.N
-00016bb0: 616d 6564 5069 7463 6829 2c0a 2020 2020  amedPitch),.    
-00016bc0: 2020 2020 2020 2020 226d 6172 6b75 703f          "markup?
-00016bd0: 223a 206c 616d 6264 6120 783a 2069 7369  ": lambda x: isi
-00016be0: 6e73 7461 6e63 6528 782c 204d 6172 6b75  nstance(x, Marku
-00016bf0: 7043 6f6d 6d61 6e64 292c 0a20 2020 2020  pCommand),.     
-00016c00: 2020 2020 2020 2022 6e75 6d62 6572 2d6c         "number-l
-00016c10: 6973 743f 223a 206c 616d 6264 6120 783a  ist?": lambda x:
-00016c20: 2069 7369 6e73 7461 6e63 6528 782c 206c   isinstance(x, l
-00016c30: 6973 7420 7c20 7475 706c 6529 0a20 2020  ist | tuple).   
-00016c40: 2020 2020 2020 2020 2061 6e64 2061 6c6c           and all
-00016c50: 2869 7369 6e73 7461 6e63 6528 792c 2069  (isinstance(y, i
-00016c60: 6e74 207c 2066 6c6f 6174 2920 666f 7220  nt | float) for 
-00016c70: 7920 696e 2078 292c 0a20 2020 2020 2020  y in x),.       
-00016c80: 2020 2020 2022 6e75 6d62 6572 3f22 3a20       "number?": 
-00016c90: 6c61 6d62 6461 2078 3a20 6973 696e 7374  lambda x: isinst
-00016ca0: 616e 6365 2878 2c20 696e 7420 7c20 666c  ance(x, int | fl
-00016cb0: 6f61 7429 2c0a 2020 2020 2020 2020 2020  oat),.          
-00016cc0: 2020 2272 6561 6c3f 223a 206c 616d 6264    "real?": lambd
-00016cd0: 6120 783a 2069 7369 6e73 7461 6e63 6528  a x: isinstance(
-00016ce0: 782c 2069 6e74 207c 2066 6c6f 6174 292c  x, int | float),
-00016cf0: 0a20 2020 2020 2020 2020 2020 2022 7374  .            "st
-00016d00: 7269 6e67 3f22 3a20 6c61 6d62 6461 2078  ring?": lambda x
-00016d10: 3a20 6973 696e 7374 616e 6365 2878 2c20  : isinstance(x, 
-00016d20: 7374 7229 2c0a 2020 2020 2020 2020 2020  str),.          
-00016d30: 2020 2276 6f69 643f 223a 206c 616d 6264    "void?": lambd
-00016d40: 6120 783a 2069 7369 6e73 7461 6e63 6528  a x: isinstance(
-00016d50: 782c 2074 7970 6528 4e6f 6e65 2929 2c0a  x, type(None)),.
-00016d60: 2020 2020 2020 2020 2020 2020 2320 7468              # th
-00016d70: 6520 666f 6c6c 6f77 696e 6720 7072 6564  e following pred
-00016d80: 6963 6174 6573 2068 6176 6520 6e6f 7420  icates have not 
-00016d90: 7965 7420 6265 656e 2069 6d70 6c65 6d65  yet been impleme
-00016da0: 6e74 6564 2069 6e20 4162 6a61 640a 2020  nted in Abjad.  
-00016db0: 2020 2020 2020 2020 2020 2268 6173 682d            "hash-
-00016dc0: 7461 626c 653f 223a 206c 616d 6264 6120  table?": lambda 
-00016dd0: 783a 2054 7275 652c 0a20 2020 2020 2020  x: True,.       
-00016de0: 2020 2020 2022 6c69 7374 2d6f 722d 7379       "list-or-sy
-00016df0: 6d62 6f6c 3f22 3a20 6c61 6d62 6461 2078  mbol?": lambda x
-00016e00: 3a20 5472 7565 2c0a 2020 2020 2020 2020  : True,.        
-00016e10: 2020 2020 226c 793a 6469 723f 223a 206c      "ly:dir?": l
-00016e20: 616d 6264 6120 783a 2054 7275 652c 0a20  ambda x: True,. 
-00016e30: 2020 2020 2020 2020 2020 2022 6c79 3a6d             "ly:m
-00016e40: 6f6d 656e 743f 223a 206c 616d 6264 6120  oment?": lambda 
-00016e50: 783a 2054 7275 652c 0a20 2020 2020 2020  x: True,.       
-00016e60: 2020 2020 2022 6e75 6d62 6572 2d6f 722d       "number-or-
-00016e70: 7374 7269 6e67 3f22 3a20 6c61 6d62 6461  string?": lambda
-00016e80: 2078 3a20 5472 7565 2c0a 2020 2020 2020   x: True,.      
-00016e90: 2020 2020 2020 226e 756d 6265 722d 7061        "number-pa
-00016ea0: 6972 3f22 3a20 6c61 6d62 6461 2078 3a20  ir?": lambda x: 
-00016eb0: 5472 7565 2c0a 2020 2020 2020 2020 2020  True,.          
-00016ec0: 2020 226f 7074 696f 6e61 6c3f 223a 206c    "optional?": l
-00016ed0: 616d 6264 6120 783a 2054 7275 652c 0a20  ambda x: True,. 
-00016ee0: 2020 2020 2020 2020 2020 2022 7061 6972             "pair
-00016ef0: 3f22 3a20 6c61 6d62 6461 2078 3a20 5472  ?": lambda x: Tr
-00016f00: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
-00016f10: 2270 726f 6365 6475 7265 3f22 3a20 6c61  "procedure?": la
-00016f20: 6d62 6461 2078 3a20 5472 7565 2c0a 2020  mbda x: True,.  
-00016f30: 2020 2020 2020 2020 2020 2273 6368 656d            "schem
-00016f40: 653f 223a 206c 616d 6264 6120 783a 2054  e?": lambda x: T
-00016f50: 7275 652c 0a20 2020 2020 2020 2020 2020  rue,.           
-00016f60: 2022 7374 7269 6e67 2d6f 722d 7061 6972   "string-or-pair
-00016f70: 3f22 3a20 6c61 6d62 6461 2078 3a20 5472  ?": lambda x: Tr
-00016f80: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
-00016f90: 2273 796d 626f 6c2d 6f72 2d62 6f6f 6c65  "symbol-or-boole
-00016fa0: 616e 3f22 3a20 6c61 6d62 6461 2078 3a20  an?": lambda x: 
-00016fb0: 5472 7565 2c0a 2020 2020 2020 2020 2020  True,.          
-00016fc0: 2020 2273 796d 626f 6c3f 223a 206c 616d    "symbol?": lam
-00016fd0: 6264 6120 783a 2054 7275 652c 0a20 2020  bda x: True,.   
-00016fe0: 2020 2020 207d 0a0a 2020 2020 6465 6620       }..    def 
-00016ff0: 5f70 6f70 5f76 6172 6961 626c 655f 7363  _pop_variable_sc
-00017000: 6f70 6528 7365 6c66 293a 0a20 2020 2020  ope(self):.     
-00017010: 2020 2069 6620 7365 6c66 2e5f 7363 6f70     if self._scop
-00017020: 655f 7374 6163 6b3a 0a20 2020 2020 2020  e_stack:.       
-00017030: 2020 2020 2073 656c 662e 5f73 636f 7065       self._scope
-00017040: 5f73 7461 636b 2e70 6f70 2829 0a0a 2020  _stack.pop()..  
-00017050: 2020 6465 6620 5f70 726f 6365 7373 5f70    def _process_p
-00017060: 6f73 745f 6576 656e 7473 2873 656c 662c  ost_events(self,
-00017070: 206c 6561 662c 2070 6f73 745f 6576 656e   leaf, post_even
-00017080: 7473 293a 0a20 2020 2020 2020 2070 726f  ts):.        pro
-00017090: 746f 7479 7065 203d 2028 0a20 2020 2020  totype = (.     
-000170a0: 2020 2020 2020 205f 6479 6e61 6d69 632e         _dynamic.
-000170b0: 4479 6e61 6d69 632c 0a20 2020 2020 2020  Dynamic,.       
-000170c0: 2020 2020 205f 696e 6469 6361 746f 7273       _indicators
-000170d0: 2e41 7274 6963 756c 6174 696f 6e2c 0a20  .Articulation,. 
-000170e0: 2020 2020 2020 2020 2020 205f 696e 6469             _indi
-000170f0: 6361 746f 7273 2e42 6172 4c69 6e65 2c0a  cators.BarLine,.
-00017100: 2020 2020 2020 2020 2020 2020 5f69 6e64              _ind
-00017110: 6963 6174 6f72 732e 476c 6973 7361 6e64  icators.Glissand
-00017120: 6f2c 0a20 2020 2020 2020 2020 2020 205f  o,.            _
-00017130: 696e 6469 6361 746f 7273 2e4c 696c 7950  indicators.LilyP
-00017140: 6f6e 644c 6974 6572 616c 2c0a 2020 2020  ondLiteral,.    
-00017150: 2020 2020 2020 2020 5f69 6e64 6963 6174          _indicat
-00017160: 6f72 732e 4d61 726b 7570 2c0a 2020 2020  ors.Markup,.    
-00017170: 2020 2020 2020 2020 5f69 6e64 6963 6174          _indicat
-00017180: 6f72 732e 5374 6172 7442 6561 6d2c 0a20  ors.StartBeam,. 
-00017190: 2020 2020 2020 2020 2020 205f 696e 6469             _indi
-000171a0: 6361 746f 7273 2e53 7461 7274 4772 6f75  cators.StartGrou
-000171b0: 702c 0a20 2020 2020 2020 2020 2020 205f  p,.            _
-000171c0: 696e 6469 6361 746f 7273 2e53 7461 7274  indicators.Start
-000171d0: 4861 6972 7069 6e2c 0a20 2020 2020 2020  Hairpin,.       
-000171e0: 2020 2020 205f 696e 6469 6361 746f 7273       _indicators
-000171f0: 2e53 7461 7274 5068 7261 7369 6e67 536c  .StartPhrasingSl
-00017200: 7572 2c0a 2020 2020 2020 2020 2020 2020  ur,.            
-00017210: 5f69 6e64 6963 6174 6f72 732e 5374 6172  _indicators.Star
-00017220: 7453 6c75 722c 0a20 2020 2020 2020 2020  tSlur,.         
-00017230: 2020 205f 696e 6469 6361 746f 7273 2e53     _indicators.S
-00017240: 7461 7274 5465 7874 5370 616e 2c0a 2020  tartTextSpan,.  
-00017250: 2020 2020 2020 2020 2020 5f69 6e64 6963            _indic
-00017260: 6174 6f72 732e 5374 6172 7454 7269 6c6c  ators.StartTrill
-00017270: 5370 616e 2c0a 2020 2020 2020 2020 2020  Span,.          
-00017280: 2020 5f69 6e64 6963 6174 6f72 732e 5374    _indicators.St
-00017290: 656d 5472 656d 6f6c 6f2c 0a20 2020 2020  emTremolo,.     
-000172a0: 2020 2020 2020 205f 696e 6469 6361 746f         _indicato
-000172b0: 7273 2e53 746f 7042 6561 6d2c 0a20 2020  rs.StopBeam,.   
-000172c0: 2020 2020 2020 2020 205f 696e 6469 6361           _indica
-000172d0: 746f 7273 2e53 746f 7047 726f 7570 2c0a  tors.StopGroup,.
-000172e0: 2020 2020 2020 2020 2020 2020 5f69 6e64              _ind
-000172f0: 6963 6174 6f72 732e 5374 6f70 4861 6972  icators.StopHair
-00017300: 7069 6e2c 0a20 2020 2020 2020 2020 2020  pin,.           
-00017310: 205f 696e 6469 6361 746f 7273 2e53 746f   _indicators.Sto
-00017320: 7050 6872 6173 696e 6753 6c75 722c 0a20  pPhrasingSlur,. 
-00017330: 2020 2020 2020 2020 2020 205f 696e 6469             _indi
-00017340: 6361 746f 7273 2e53 746f 7053 6c75 722c  cators.StopSlur,
-00017350: 0a20 2020 2020 2020 2020 2020 205f 696e  .            _in
-00017360: 6469 6361 746f 7273 2e53 746f 7054 6578  dicators.StopTex
-00017370: 7453 7061 6e2c 0a20 2020 2020 2020 2020  tSpan,.         
-00017380: 2020 205f 696e 6469 6361 746f 7273 2e53     _indicators.S
-00017390: 746f 7054 7269 6c6c 5370 616e 2c0a 2020  topTrillSpan,.  
-000173a0: 2020 2020 2020 2020 2020 5f69 6e64 6963            _indic
-000173b0: 6174 6f72 732e 5469 652c 0a20 2020 2020  ators.Tie,.     
-000173c0: 2020 2029 0a20 2020 2020 2020 2066 6f72     ).        for
-000173d0: 2070 6f73 745f 6576 656e 7420 696e 2070   post_event in p
-000173e0: 6f73 745f 6576 656e 7473 3a0a 2020 2020  ost_events:.    
-000173f0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00017400: 7461 6e63 6528 706f 7374 5f65 7665 6e74  tance(post_event
-00017410: 2c20 7072 6f74 6f74 7970 6529 3a0a 2020  , prototype):.  
-00017420: 2020 2020 2020 2020 2020 2020 2020 5f62                _b
-00017430: 696e 642e 6174 7461 6368 2870 6f73 745f  ind.attach(post_
-00017440: 6576 656e 742c 206c 6561 6629 0a20 2020  event, leaf).   
-00017450: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00017460: 7374 616e 6365 2870 6f73 745f 6576 656e  stance(post_even
-00017470: 742c 2074 7570 6c65 2920 616e 6420 6973  t, tuple) and is
-00017480: 696e 7374 616e 6365 2870 6f73 745f 6576  instance(post_ev
-00017490: 656e 745b 305d 2c20 7072 6f74 6f74 7970  ent[0], prototyp
-000174a0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-000174b0: 2020 2020 696e 6469 6361 746f 722c 2064      indicator, d
-000174c0: 6972 6563 7469 6f6e 203d 2070 6f73 745f  irection = post_
-000174d0: 6576 656e 740a 2020 2020 2020 2020 2020  event.          
-000174e0: 2020 2020 2020 5f62 696e 642e 6174 7461        _bind.atta
-000174f0: 6368 2869 6e64 6963 6174 6f72 2c20 6c65  ch(indicator, le
-00017500: 6166 2c20 6469 7265 6374 696f 6e3d 6469  af, direction=di
-00017510: 7265 6374 696f 6e29 0a0a 2020 2020 6465  rection)..    de
-00017520: 6620 5f70 7573 685f 6578 7472 615f 746f  f _push_extra_to
-00017530: 6b65 6e28 7365 6c66 2c20 746f 6b65 6e29  ken(self, token)
-00017540: 3a0a 2020 2020 2020 2020 7365 6c66 2e5f  :.        self._
-00017550: 7061 7273 6572 2e6c 6f6f 6b61 6865 6164  parser.lookahead
-00017560: 7374 6163 6b2e 6170 7065 6e64 2874 6f6b  stack.append(tok
-00017570: 656e 290a 0a20 2020 2064 6566 205f 7075  en)..    def _pu
-00017580: 7368 5f76 6172 6961 626c 655f 7363 6f70  sh_variable_scop
-00017590: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-000175a0: 2073 656c 662e 5f73 636f 7065 5f73 7461   self._scope_sta
-000175b0: 636b 2e61 7070 656e 6428 7b7d 290a 0a20  ck.append({}).. 
-000175c0: 2020 2064 6566 205f 7265 6c65 785f 6c6f     def _relex_lo
-000175d0: 6f6b 6168 6561 6428 7365 6c66 293a 0a20  okahead(self):. 
-000175e0: 2020 2020 2020 2069 6620 6e6f 7420 7374         if not st
-000175f0: 7228 7365 6c66 2e5f 7061 7273 6572 2e6c  r(self._parser.l
-00017600: 6f6f 6b61 6865 6164 2920 3d3d 2022 2465  ookahead) == "$e
-00017610: 6e64 223a 0a20 2020 2020 2020 2020 2020  nd":.           
-00017620: 2064 6966 6665 7265 6e63 6520 3d20 7365   difference = se
-00017630: 6c66 2e5f 7061 7273 6572 2e6c 6f6f 6b61  lf._parser.looka
-00017640: 6865 6164 2e6c 6578 706f 7320 2d20 7365  head.lexpos - se
-00017650: 6c66 2e5f 6c65 7865 722e 6c65 7870 6f73  lf._lexer.lexpos
-00017660: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00017670: 662e 5f6c 6578 6572 2e73 6b69 7028 6469  f._lexer.skip(di
-00017680: 6666 6572 656e 6365 290a 2020 2020 2020  fference).      
-00017690: 2020 2020 2020 7365 6c66 2e5f 7061 7273        self._pars
-000176a0: 6572 2e6c 6f6f 6b61 6865 6164 203d 204e  er.lookahead = N
-000176b0: 6f6e 650a 0a20 2020 2064 6566 205f 7265  one..    def _re
-000176c0: 7061 7273 655f 746f 6b65 6e28 7365 6c66  parse_token(self
-000176d0: 2c20 7072 6564 6963 6174 652c 2074 6f6b  , predicate, tok
-000176e0: 656e 5f74 7970 652c 2074 6f6b 656e 5f76  en_type, token_v
-000176f0: 616c 7565 293a 0a20 2020 2020 2020 2069  alue):.        i
-00017700: 6620 7365 6c66 2e5f 6465 6275 673a 0a20  f self._debug:. 
-00017710: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00017720: 5f6c 6f67 6765 722e 696e 666f 2822 4578  _logger.info("Ex
-00017730: 7472 6120 203a 2052 6570 6172 7369 6e67  tra  : Reparsing
-00017740: 2229 0a0a 2020 2020 2020 2020 2320 7075  ")..        # pu
-00017750: 7368 2074 6865 2063 7572 7265 6e74 206c  sh the current l
-00017760: 6f6f 6b61 6865 6164 2062 6163 6b20 6f6e  ookahead back on
-00017770: 746f 2074 6865 206c 6f6f 6b61 6865 6164  to the lookahead
-00017780: 7374 6163 6b0a 2020 2020 2020 2020 7365  stack.        se
-00017790: 6c66 2e5f 7075 7368 5f65 7874 7261 5f74  lf._push_extra_t
-000177a0: 6f6b 656e 2873 656c 662e 5f70 6172 7365  oken(self._parse
-000177b0: 722e 6c6f 6f6b 6168 6561 6429 0a0a 2020  r.lookahead)..  
-000177c0: 2020 2020 2020 746f 6b65 6e20 3d20 706c        token = pl
-000177d0: 792e 6c65 782e 4c65 7854 6f6b 656e 2829  y.lex.LexToken()
-000177e0: 0a20 2020 2020 2020 2074 6f6b 656e 2e74  .        token.t
-000177f0: 7970 6520 3d20 746f 6b65 6e5f 7479 7065  ype = token_type
-00017800: 0a20 2020 2020 2020 2074 6f6b 656e 2e76  .        token.v
-00017810: 616c 7565 203d 2074 6f6b 656e 5f76 616c  alue = token_val
-00017820: 7565 0a20 2020 2020 2020 2074 6f6b 656e  ue.        token
-00017830: 2e6c 6578 706f 7320 3d20 300a 2020 2020  .lexpos = 0.    
-00017840: 2020 2020 746f 6b65 6e2e 6c69 6e65 6e6f      token.lineno
-00017850: 203d 2030 0a20 2020 2020 2020 2073 656c   = 0.        sel
-00017860: 662e 5f70 7573 685f 6578 7472 615f 746f  f._push_extra_to
-00017870: 6b65 6e28 746f 6b65 6e29 0a0a 2020 2020  ken(token)..    
-00017880: 2020 2020 7265 7061 7273 6520 3d20 706c      reparse = pl
-00017890: 792e 6c65 782e 4c65 7854 6f6b 656e 2829  y.lex.LexToken()
-000178a0: 0a20 2020 2020 2020 2072 6570 6172 7365  .        reparse
-000178b0: 2e74 7970 6520 3d20 2252 4550 4152 5345  .type = "REPARSE
-000178c0: 220a 2020 2020 2020 2020 7265 7061 7273  ".        repars
-000178d0: 652e 7661 6c75 6520 3d20 7072 6564 6963  e.value = predic
-000178e0: 6174 650a 2020 2020 2020 2020 7265 7061  ate.        repa
-000178f0: 7273 652e 6c69 6e65 6e6f 203d 2030 0a20  rse.lineno = 0. 
-00017900: 2020 2020 2020 2072 6570 6172 7365 2e6c         reparse.l
-00017910: 6578 706f 7320 3d20 300a 2020 2020 2020  expos = 0.      
-00017920: 2020 7365 6c66 2e5f 7061 7273 6572 2e6c    self._parser.l
-00017930: 6f6f 6b61 6865 6164 203d 2072 6570 6172  ookahead = repar
-00017940: 7365 0a0a 2020 2020 6465 6620 5f72 6573  se..    def _res
-00017950: 6574 5f70 6172 7365 725f 7661 7269 6162  et_parser_variab
-00017960: 6c65 7328 7365 6c66 293a 0a20 2020 2020  les(self):.     
-00017970: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00017980: 2020 2020 7365 6c66 2e5f 7061 7273 6572      self._parser
-00017990: 2e72 6573 7461 7274 2829 0a20 2020 2020  .restart().     
-000179a0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-000179b0: 696f 6e3a 0a20 2020 2020 2020 2020 2020  ion:.           
-000179c0: 2070 6173 730a 2020 2020 2020 2020 7365   pass.        se
-000179d0: 6c66 2e5f 7363 6f70 655f 7374 6163 6b20  lf._scope_stack 
-000179e0: 3d20 5b7b 7d5d 0a20 2020 2020 2020 2073  = [{}].        s
-000179f0: 656c 662e 5f63 686f 7264 5f70 6974 6368  elf._chord_pitch
-00017a00: 5f6f 7264 6572 7320 3d20 7b7d 0a20 2020  _orders = {}.   
-00017a10: 2020 2020 2073 656c 662e 5f6c 6578 6572       self._lexer
-00017a20: 2e70 7573 685f 7374 6174 6528 226e 6f74  .push_state("not
-00017a30: 6573 2229 0a20 2020 2020 2020 2073 656c  es").        sel
-00017a40: 662e 5f64 6566 6175 6c74 5f64 7572 6174  f._default_durat
-00017a50: 696f 6e20 3d20 4c69 6c79 506f 6e64 4475  ion = LilyPondDu
-00017a60: 7261 7469 6f6e 2828 312c 2034 292c 204e  ration((1, 4), N
-00017a70: 6f6e 6529 0a20 2020 2020 2020 2073 656c  one).        sel
-00017a80: 662e 5f6c 6173 745f 6368 6f72 6420 3d20  f._last_chord = 
-00017a90: 4e6f 6e65 0a20 2020 2020 2020 2023 204c  None.        # L
-00017aa0: 696c 7950 6f6e 6427 7320 6465 6661 756c  ilyPond's defaul
-00017ab0: 7421 0a20 2020 2020 2020 2023 2073 656c  t!.        # sel
-00017ac0: 662e 5f6c 6173 745f 6368 6f72 6420 3d20  f._last_chord = 
-00017ad0: 5f73 636f 7265 2e43 686f 7264 285b 2763  _score.Chord(['c
-00017ae0: 272c 2027 6727 2c20 2263 2722 5d2c 2028  ', 'g', "c'"], (
-00017af0: 312c 2034 2929 0a20 2020 2020 2020 2073  1, 4)).        s
-00017b00: 656c 662e 5f70 6974 6368 5f6e 616d 6573  elf._pitch_names
-00017b10: 203d 2073 656c 662e 5f6c 616e 6775 6167   = self._languag
-00017b20: 655f 7069 7463 685f 6e61 6d65 735b 7365  e_pitch_names[se
-00017b30: 6c66 2e64 6566 6175 6c74 5f6c 616e 6775  lf.default_langu
-00017b40: 6167 655d 0a20 2020 2020 2020 2073 656c  age].        sel
-00017b50: 662e 5f72 6570 6561 7465 645f 6368 6f72  f._repeated_chor
-00017b60: 6473 203d 207b 7d0a 0a20 2020 2064 6566  ds = {}..    def
-00017b70: 205f 7265 736f 6c76 655f 6576 656e 745f   _resolve_event_
-00017b80: 6964 656e 7469 6669 6572 2873 656c 662c  identifier(self,
-00017b90: 2069 6465 6e74 6966 6965 7229 3a0a 2020   identifier):.  
-00017ba0: 2020 2020 2020 2320 7769 7468 6f75 7420        # without 
-00017bb0: 6c65 6164 696e 6720 736c 6173 680a 2020  leading slash.  
-00017bc0: 2020 2020 2020 6c6f 6f6b 7570 203d 2073        lookup = s
-00017bd0: 656c 662e 5f63 7572 7265 6e74 5f6d 6f64  elf._current_mod
-00017be0: 756c 655b 6964 656e 7469 6669 6572 5d0a  ule[identifier].
-00017bf0: 2020 2020 2020 2020 6e61 6d65 203d 206c          name = l
-00017c00: 6f6f 6b75 705b 226e 616d 6522 5d0a 2020  ookup["name"].  
-00017c10: 2020 2020 2020 6966 206e 616d 6520 3d3d        if name ==
-00017c20: 2022 4172 7469 6375 6c61 7469 6f6e 4576   "ArticulationEv
-00017c30: 656e 7422 3a0a 2020 2020 2020 2020 2020  ent":.          
-00017c40: 2020 7265 7475 726e 205f 696e 6469 6361    return _indica
-00017c50: 746f 7273 2e41 7274 6963 756c 6174 696f  tors.Articulatio
-00017c60: 6e28 6c6f 6f6b 7570 5b22 6172 7469 6375  n(lookup["articu
-00017c70: 6c61 7469 6f6e 2d74 7970 6522 5d29 0a20  lation-type"]). 
-00017c80: 2020 2020 2020 2065 6c69 6620 6e61 6d65         elif name
-00017c90: 203d 3d20 2241 6273 6f6c 7574 6544 796e   == "AbsoluteDyn
-00017ca0: 616d 6963 4576 656e 7422 3a0a 2020 2020  amicEvent":.    
-00017cb0: 2020 2020 2020 2020 7265 7475 726e 205f          return _
-00017cc0: 6479 6e61 6d69 632e 4479 6e61 6d69 6328  dynamic.Dynamic(
-00017cd0: 6c6f 6f6b 7570 5b22 7465 7874 225d 290a  lookup["text"]).
-00017ce0: 2020 2020 2020 2020 656c 6966 206e 616d          elif nam
-00017cf0: 6520 3d3d 2022 4265 616d 4576 656e 7422  e == "BeamEvent"
-00017d00: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00017d10: 206c 6f6f 6b75 705b 2273 7061 6e2d 6469   lookup["span-di
-00017d20: 7265 6374 696f 6e22 5d20 3d3d 202d 313a  rection"] == -1:
-00017d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017d40: 2072 6574 7572 6e20 5f69 6e64 6963 6174   return _indicat
-00017d50: 6f72 732e 5374 6172 7442 6561 6d28 290a  ors.StartBeam().
-00017d60: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00017d70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00017d80: 2020 7265 7475 726e 205f 696e 6469 6361    return _indica
-00017d90: 746f 7273 2e53 746f 7042 6561 6d28 290a  tors.StopBeam().
-00017da0: 2020 2020 2020 2020 656c 6966 206e 616d          elif nam
-00017db0: 6520 3d3d 2022 4372 6573 6365 6e64 6f45  e == "CrescendoE
-00017dc0: 7665 6e74 223a 0a20 2020 2020 2020 2020  vent":.         
-00017dd0: 2020 2069 6620 6c6f 6f6b 7570 5b22 7370     if lookup["sp
-00017de0: 616e 2d64 6972 6563 7469 6f6e 225d 203d  an-direction"] =
-00017df0: 3d20 2d31 3a0a 2020 2020 2020 2020 2020  = -1:.          
-00017e00: 2020 2020 2020 7265 7475 726e 205f 696e        return _in
-00017e10: 6469 6361 746f 7273 2e53 7461 7274 4861  dicators.StartHa
-00017e20: 6972 7069 6e28 223c 2229 0a20 2020 2020  irpin("<").     
-00017e30: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00017e40: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00017e50: 7572 6e20 5f69 6e64 6963 6174 6f72 732e  urn _indicators.
-00017e60: 5374 6f70 4861 6972 7069 6e28 290a 2020  StopHairpin().  
-00017e70: 2020 2020 2020 656c 6966 206e 616d 6520        elif name 
-00017e80: 3d3d 2022 4465 6372 6573 6365 6e64 6f45  == "DecrescendoE
-00017e90: 7665 6e74 223a 0a20 2020 2020 2020 2020  vent":.         
-00017ea0: 2020 2069 6620 6c6f 6f6b 7570 5b22 7370     if lookup["sp
-00017eb0: 616e 2d64 6972 6563 7469 6f6e 225d 203d  an-direction"] =
-00017ec0: 3d20 2d31 3a0a 2020 2020 2020 2020 2020  = -1:.          
-00017ed0: 2020 2020 2020 7265 7475 726e 205f 696e        return _in
-00017ee0: 6469 6361 746f 7273 2e53 7461 7274 4861  dicators.StartHa
-00017ef0: 6972 7069 6e28 223e 2229 0a20 2020 2020  irpin(">").     
-00017f00: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00017f10: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00017f20: 7572 6e20 5f69 6e64 6963 6174 6f72 732e  urn _indicators.
-00017f30: 5374 6f70 4861 6972 7069 6e28 290a 2020  StopHairpin().  
-00017f40: 2020 2020 2020 656c 6966 206e 616d 6520        elif name 
-00017f50: 3d3d 2022 476c 6973 7361 6e64 6f45 7665  == "GlissandoEve
-00017f60: 6e74 223a 0a20 2020 2020 2020 2020 2020  nt":.           
-00017f70: 2072 6574 7572 6e20 5f69 6e64 6963 6174   return _indicat
-00017f80: 6f72 732e 476c 6973 7361 6e64 6f28 290a  ors.Glissando().
-00017f90: 2020 2020 2020 2020 656c 6966 206e 616d          elif nam
-00017fa0: 6520 3d3d 2022 4c61 6973 7365 7a56 6962  e == "LaissezVib
-00017fb0: 7265 7245 7665 6e74 223a 0a20 2020 2020  rerEvent":.     
-00017fc0: 2020 2020 2020 2072 6574 7572 6e20 5f69         return _i
-00017fd0: 6e64 6963 6174 6f72 732e 4c69 6c79 506f  ndicators.LilyPo
-00017fe0: 6e64 4c69 7465 7261 6c28 7222 5c6c 6169  ndLiteral(r"\lai
-00017ff0: 7373 657a 5669 6272 6572 222c 2022 6166  ssezVibrer", "af
-00018000: 7465 7222 290a 2020 2020 2020 2020 656c  ter").        el
-00018010: 6966 206e 616d 6520 3d3d 2022 4c69 6e65  if name == "Line
-00018020: 4272 6561 6b45 7665 6e74 223a 0a20 2020  BreakEvent":.   
-00018030: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00018040: 5f69 6e64 6963 6174 6f72 732e 4c69 6c79  _indicators.Lily
-00018050: 506f 6e64 4c69 7465 7261 6c28 7222 5c62  PondLiteral(r"\b
-00018060: 7265 616b 2229 0a20 2020 2020 2020 2065  reak").        e
-00018070: 6c69 6620 6e61 6d65 203d 3d20 224e 6f74  lif name == "Not
-00018080: 6547 726f 7570 696e 6745 7665 6e74 223a  eGroupingEvent":
-00018090: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000180a0: 6c6f 6f6b 7570 5b22 7370 616e 2d64 6972  lookup["span-dir
-000180b0: 6563 7469 6f6e 225d 203d 3d20 2d31 3a0a  ection"] == -1:.
-000180c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000180d0: 7265 7475 726e 205f 696e 6469 6361 746f  return _indicato
-000180e0: 7273 2e53 7461 7274 4772 6f75 7028 290a  rs.StartGroup().
-000180f0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00018100: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018110: 2020 7265 7475 726e 205f 696e 6469 6361    return _indica
-00018120: 746f 7273 2e53 746f 7047 726f 7570 2829  tors.StopGroup()
-00018130: 0a20 2020 2020 2020 2065 6c69 6620 6e61  .        elif na
-00018140: 6d65 203d 3d20 2250 6872 6173 696e 6753  me == "PhrasingS
-00018150: 6c75 7245 7665 6e74 223a 0a20 2020 2020  lurEvent":.     
-00018160: 2020 2020 2020 2069 6620 6c6f 6f6b 7570         if lookup
-00018170: 5b22 7370 616e 2d64 6972 6563 7469 6f6e  ["span-direction
-00018180: 225d 203d 3d20 2d31 3a0a 2020 2020 2020  "] == -1:.      
-00018190: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000181a0: 205f 696e 6469 6361 746f 7273 2e53 7461   _indicators.Sta
-000181b0: 7274 5068 7261 7369 6e67 536c 7572 2829  rtPhrasingSlur()
-000181c0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-000181d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000181e0: 2020 2072 6574 7572 6e20 5f69 6e64 6963     return _indic
-000181f0: 6174 6f72 732e 5374 6f70 5068 7261 7369  ators.StopPhrasi
-00018200: 6e67 536c 7572 2829 0a20 2020 2020 2020  ngSlur().       
-00018210: 2065 6c69 6620 6e61 6d65 203d 3d20 2253   elif name == "S
-00018220: 6c75 7245 7665 6e74 223a 0a20 2020 2020  lurEvent":.     
-00018230: 2020 2020 2020 2069 6620 6c6f 6f6b 7570         if lookup
-00018240: 5b22 7370 616e 2d64 6972 6563 7469 6f6e  ["span-direction
-00018250: 225d 203d 3d20 2d31 3a0a 2020 2020 2020  "] == -1:.      
-00018260: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00018270: 205f 696e 6469 6361 746f 7273 2e53 7461   _indicators.Sta
-00018280: 7274 536c 7572 2829 0a20 2020 2020 2020  rtSlur().       
-00018290: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000182a0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000182b0: 6e20 5f69 6e64 6963 6174 6f72 732e 5374  n _indicators.St
-000182c0: 6f70 536c 7572 2829 0a20 2020 2020 2020  opSlur().       
-000182d0: 2065 6c69 6620 6e61 6d65 203d 3d20 2254   elif name == "T
-000182e0: 6578 7453 7061 6e45 7665 6e74 223a 0a20  extSpanEvent":. 
-000182f0: 2020 2020 2020 2020 2020 2069 6620 6c6f             if lo
-00018300: 6f6b 7570 5b22 7370 616e 2d64 6972 6563  okup["span-direc
-00018310: 7469 6f6e 225d 203d 3d20 2d31 3a0a 2020  tion"] == -1:.  
-00018320: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00018330: 7475 726e 205f 696e 6469 6361 746f 7273  turn _indicators
-00018340: 2e53 7461 7274 5465 7874 5370 616e 2829  .StartTextSpan()
-00018350: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00018360: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00018370: 2020 2072 6574 7572 6e20 5f69 6e64 6963     return _indic
-00018380: 6174 6f72 732e 5374 6f70 5465 7874 5370  ators.StopTextSp
-00018390: 616e 2829 0a20 2020 2020 2020 2065 6c69  an().        eli
-000183a0: 6620 6e61 6d65 203d 3d20 2254 6965 4576  f name == "TieEv
-000183b0: 656e 7422 3a0a 2020 2020 2020 2020 2020  ent":.          
-000183c0: 2020 7265 7475 726e 205f 696e 6469 6361    return _indica
-000183d0: 746f 7273 2e54 6965 2829 0a20 2020 2020  tors.Tie().     
-000183e0: 2020 2065 6c69 6620 6e61 6d65 203d 3d20     elif name == 
-000183f0: 2254 7269 6c6c 5370 616e 4576 656e 7422  "TrillSpanEvent"
-00018400: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00018410: 206c 6f6f 6b75 705b 2273 7061 6e2d 6469   lookup["span-di
-00018420: 7265 6374 696f 6e22 5d20 3d3d 202d 313a  rection"] == -1:
-00018430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018440: 2072 6574 7572 6e20 5f69 6e64 6963 6174   return _indicat
-00018450: 6f72 732e 5374 6172 7454 7269 6c6c 5370  ors.StartTrillSp
-00018460: 616e 2829 0a20 2020 2020 2020 2020 2020  an().           
-00018470: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00018480: 2020 2020 2020 2072 6574 7572 6e20 5f69         return _i
-00018490: 6e64 6963 6174 6f72 732e 5374 6f70 5472  ndicators.StopTr
-000184a0: 696c 6c53 7061 6e28 290a 2020 2020 2020  illSpan().      
-000184b0: 2020 6576 656e 7420 3d20 4c69 6c79 506f    event = LilyPo
-000184c0: 6e64 4576 656e 7428 6e61 6d65 290a 2020  ndEvent(name).  
-000184d0: 2020 2020 2020 6966 2022 7370 616e 2d64        if "span-d
-000184e0: 6972 6563 7469 6f6e 2220 696e 206c 6f6f  irection" in loo
-000184f0: 6b75 703a 0a20 2020 2020 2020 2020 2020  kup:.           
-00018500: 2069 6620 6c6f 6f6b 7570 5b22 7370 616e   if lookup["span
-00018510: 2d64 6972 6563 7469 6f6e 225d 203d 3d20  -direction"] == 
-00018520: 2d31 3a0a 2020 2020 2020 2020 2020 2020  -1:.            
-00018530: 2020 2020 6576 656e 742e 7370 616e 5f64      event.span_d
-00018540: 6972 6563 7469 6f6e 203d 2022 7374 6172  irection = "star
-00018550: 7422 0a20 2020 2020 2020 2020 2020 2065  t".            e
-00018560: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00018570: 2020 2020 2065 7665 6e74 2e73 7061 6e5f       event.span_
-00018580: 6469 7265 6374 696f 6e20 3d20 2273 746f  direction = "sto
-00018590: 7022 0a20 2020 2020 2020 2072 6574 7572  p".        retur
-000185a0: 6e20 6576 656e 740a 0a20 2020 2064 6566  n event..    def
-000185b0: 205f 7265 736f 6c76 655f 6964 656e 7469   _resolve_identi
-000185c0: 6669 6572 2873 656c 662c 2069 6465 6e74  fier(self, ident
-000185d0: 6966 6965 7229 3a0a 2020 2020 2020 2020  ifier):.        
-000185e0: 666f 7220 7363 6f70 6520 696e 2072 6576  for scope in rev
-000185f0: 6572 7365 6428 7365 6c66 2e5f 7363 6f70  ersed(self._scop
-00018600: 655f 7374 6163 6b29 3a0a 2020 2020 2020  e_stack):.      
-00018610: 2020 2020 2020 6966 2069 6465 6e74 6966        if identif
-00018620: 6965 7220 696e 2073 636f 7065 3a0a 2020  ier in scope:.  
-00018630: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00018640: 7475 726e 2073 636f 7065 5b69 6465 6e74  turn scope[ident
-00018650: 6966 6965 725d 0a20 2020 2020 2020 2072  ifier].        r
-00018660: 6574 7572 6e20 4e6f 6e65 0a0a 2020 2020  eturn None..    
-00018670: 6465 6620 5f74 6573 745f 7363 6865 6d65  def _test_scheme
-00018680: 5f70 7265 6469 6361 7465 2873 656c 662c  _predicate(self,
-00018690: 2070 7265 6469 6361 7465 2c20 7661 6c75   predicate, valu
-000186a0: 6529 3a0a 2020 2020 2020 2020 7072 6564  e):.        pred
-000186b0: 6963 6174 6573 203d 2073 656c 662e 5f67  icates = self._g
-000186c0: 6574 5f73 6368 656d 655f 7072 6564 6963  et_scheme_predic
-000186d0: 6174 6573 2829 0a20 2020 2020 2020 2069  ates().        i
-000186e0: 6620 7072 6564 6963 6174 6520 696e 2070  f predicate in p
-000186f0: 7265 6469 6361 7465 733a 0a20 2020 2020  redicates:.     
-00018700: 2020 2020 2020 2072 6574 7572 6e20 7072         return pr
-00018710: 6564 6963 6174 6573 5b70 7265 6469 6361  edicates[predica
-00018720: 7465 5d28 7661 6c75 6529 0a20 2020 2020  te](value).     
-00018730: 2020 2072 6574 7572 6e20 5472 7565 0a0a     return True..
-00018740: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-00018750: 640a 2020 2020 6465 6620 5f74 7261 6e73  d.    def _trans
-00018760: 706f 7365 5f65 6e68 6172 6d6f 6e69 6361  pose_enharmonica
-00018770: 6c6c 7928 7069 7463 685f 612c 2070 6974  lly(pitch_a, pit
-00018780: 6368 5f62 2c20 7069 7463 685f 6329 3a0a  ch_b, pitch_c):.
-00018790: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000187a0: 2020 2020 5472 616e 7370 6f73 6520 6060      Transpose ``
-000187b0: 7069 7463 685f 6360 6020 6279 2074 6865  pitch_c`` by the
-000187c0: 2064 6973 7461 6e63 6520 6265 7477 6565   distance betwee
-000187d0: 6e20 6060 7069 7463 685f 6260 600a 2020  n ``pitch_b``.  
-000187e0: 2020 2020 2020 616e 6420 6060 7069 7463        and ``pitc
-000187f0: 685f 6131 6060 2e0a 0a20 2020 2020 2020  h_a1``...       
-00018800: 2054 6869 7320 6675 6e63 7469 6f6e 2077   This function w
-00018810: 6173 2072 6576 6572 7365 2d65 6e67 696e  as reverse-engin
-00018820: 6565 7265 6420 6672 6f6d 204c 696c 7950  eered from LilyP
-00018830: 6f6e 6427 7320 736f 7572 6365 2063 6f64  ond's source cod
-00018840: 652e 0a0a 2020 2020 2020 2020 5265 7475  e...        Retu
-00018850: 726e 7320 6e61 6d65 6420 7069 7463 682e  rns named pitch.
-00018860: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
-00018870: 2020 2020 2020 6465 6620 6e6f 726d 616c        def normal
-00018880: 697a 655f 616c 7465 7261 7469 6f6e 2873  ize_alteration(s
-00018890: 7465 702c 2061 6c74 6572 6174 696f 6e29  tep, alteration)
-000188a0: 3a0a 2020 2020 2020 2020 2020 2020 7768  :.            wh
-000188b0: 696c 6520 322e 3020 3c20 616c 7465 7261  ile 2.0 < altera
-000188c0: 7469 6f6e 3a0a 2020 2020 2020 2020 2020  tion:.          
-000188d0: 2020 2020 2020 616c 7465 7261 7469 6f6e        alteration
-000188e0: 202d 3d20 7374 6570 5f73 697a 6528 7374   -= step_size(st
-000188f0: 6570 290a 2020 2020 2020 2020 2020 2020  ep).            
-00018900: 2020 2020 7374 6570 202b 3d20 312e 300a      step += 1.0.
-00018910: 2020 2020 2020 2020 2020 2020 7768 696c              whil
-00018920: 6520 616c 7465 7261 7469 6f6e 203c 202d  e alteration < -
-00018930: 322e 303a 0a20 2020 2020 2020 2020 2020  2.0:.           
-00018940: 2020 2020 2073 7465 7020 2d3d 2031 2e30       step -= 1.0
-00018950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018960: 2061 6c74 6572 6174 696f 6e20 2b3d 2073   alteration += s
-00018970: 7465 705f 7369 7a65 2873 7465 7029 0a20  tep_size(step). 
-00018980: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00018990: 6e20 7374 6570 2c20 616c 7465 7261 7469  n step, alterati
-000189a0: 6f6e 0a0a 2020 2020 2020 2020 6465 6620  on..        def 
-000189b0: 6e6f 726d 616c 697a 655f 6f63 7461 7665  normalize_octave
-000189c0: 286f 6374 6176 652c 2073 7465 7029 3a0a  (octave, step):.
-000189d0: 2020 2020 2020 2020 2020 2020 6e6f 726d              norm
-000189e0: 616c 697a 6564 5f73 7465 7020 3d20 7374  alized_step = st
-000189f0: 6570 2025 206c 656e 2873 6361 6c65 290a  ep % len(scale).
-00018a00: 2020 2020 2020 2020 2020 2020 6f63 7461              octa
-00018a10: 7665 202b 3d20 2873 7465 7020 2d20 6e6f  ve += (step - no
-00018a20: 726d 616c 697a 6564 5f73 7465 7029 202f  rmalized_step) /
-00018a30: 206c 656e 2873 6361 6c65 290a 2020 2020   len(scale).    
-00018a40: 2020 2020 2020 2020 7265 7475 726e 206f          return o
-00018a50: 6374 6176 652c 206e 6f72 6d61 6c69 7a65  ctave, normalize
-00018a60: 645f 7374 6570 0a0a 2020 2020 2020 2020  d_step..        
-00018a70: 6465 6620 7374 6570 5f73 697a 6528 7374  def step_size(st
-00018a80: 6570 293a 0a20 2020 2020 2020 2020 2020  ep):.           
-00018a90: 206e 6f72 6d61 6c69 7a65 645f 7374 6570   normalized_step
-00018aa0: 203d 2073 7465 7020 2520 6c65 6e28 7363   = step % len(sc
-00018ab0: 616c 6529 0a20 2020 2020 2020 2020 2020  ale).           
-00018ac0: 2069 6620 6e6f 726d 616c 697a 6564 5f73   if normalized_s
-00018ad0: 7465 7020 3d3d 2036 3a0a 2020 2020 2020  tep == 6:.      
-00018ae0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00018af0: 2031 2e30 2020 2320 6220 746f 2063 0a20   1.0  # b to c. 
-00018b00: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00018b10: 6e20 7363 616c 655b 6e6f 726d 616c 697a  n scale[normaliz
-00018b20: 6564 5f73 7465 7020 2b20 315d 202d 2073  ed_step + 1] - s
-00018b30: 6361 6c65 5b6e 6f72 6d61 6c69 7a65 645f  cale[normalized_
-00018b40: 7374 6570 5d0a 0a20 2020 2020 2020 2069  step]..        i
-00018b50: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-00018b60: 2870 6974 6368 5f61 2c20 5f70 6974 6368  (pitch_a, _pitch
-00018b70: 2e4e 616d 6564 5069 7463 6829 3a0a 2020  .NamedPitch):.  
-00018b80: 2020 2020 2020 2020 2020 7069 7463 685f            pitch_
-00018b90: 6120 3d20 5f70 6974 6368 2e4e 616d 6564  a = _pitch.Named
-00018ba0: 5069 7463 6828 7069 7463 685f 6129 0a20  Pitch(pitch_a). 
-00018bb0: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-00018bc0: 696e 7374 616e 6365 2870 6974 6368 5f62  instance(pitch_b
-00018bd0: 2c20 5f70 6974 6368 2e4e 616d 6564 5069  , _pitch.NamedPi
-00018be0: 7463 6829 3a0a 2020 2020 2020 2020 2020  tch):.          
-00018bf0: 2020 7069 7463 685f 6220 3d20 5f70 6974    pitch_b = _pit
-00018c00: 6368 2e4e 616d 6564 5069 7463 6828 7069  ch.NamedPitch(pi
-00018c10: 7463 685f 6229 0a20 2020 2020 2020 2069  tch_b).        i
-00018c20: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-00018c30: 2870 6974 6368 5f63 2c20 5f70 6974 6368  (pitch_c, _pitch
-00018c40: 2e4e 616d 6564 5069 7463 6829 3a0a 2020  .NamedPitch):.  
-00018c50: 2020 2020 2020 2020 2020 7069 7463 685f            pitch_
-00018c60: 6320 3d20 5f70 6974 6368 2e4e 616d 6564  c = _pitch.Named
-00018c70: 5069 7463 6828 7069 7463 685f 6329 0a20  Pitch(pitch_c). 
-00018c80: 2020 2020 2020 2073 6361 6c65 203d 205b         scale = [
-00018c90: 302e 302c 2032 2e30 2c20 342e 302c 2035  0.0, 2.0, 4.0, 5
-00018ca0: 2e30 2c20 372e 302c 2039 2e30 2c20 3131  .0, 7.0, 9.0, 11
-00018cb0: 2e30 5d0a 2020 2020 2020 2020 615f 6f63  .0].        a_oc
-00018cc0: 742c 2061 5f73 7465 7020 3d20 280a 2020  t, a_step = (.  
-00018cd0: 2020 2020 2020 2020 2020 7069 7463 685f            pitch_
-00018ce0: 612e 6f63 7461 7665 2e6e 756d 6265 722c  a.octave.number,
-00018cf0: 0a20 2020 2020 2020 2020 2020 2070 6974  .            pit
-00018d00: 6368 5f61 2e5f 6765 745f 6469 6174 6f6e  ch_a._get_diaton
-00018d10: 6963 5f70 635f 6e75 6d62 6572 2829 2c0a  ic_pc_number(),.
-00018d20: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00018d30: 2020 625f 6f63 742c 2062 5f73 7465 7020    b_oct, b_step 
-00018d40: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
-00018d50: 7069 7463 685f 622e 6f63 7461 7665 2e6e  pitch_b.octave.n
-00018d60: 756d 6265 722c 0a20 2020 2020 2020 2020  umber,.         
-00018d70: 2020 2070 6974 6368 5f62 2e5f 6765 745f     pitch_b._get_
-00018d80: 6469 6174 6f6e 6963 5f70 635f 6e75 6d62  diatonic_pc_numb
-00018d90: 6572 2829 2c0a 2020 2020 2020 2020 290a  er(),.        ).
-00018da0: 2020 2020 2020 2020 635f 6f63 742c 2063          c_oct, c
-00018db0: 5f73 7465 702c 2063 5f61 6c74 203d 2028  _step, c_alt = (
-00018dc0: 0a20 2020 2020 2020 2020 2020 2070 6974  .            pit
-00018dd0: 6368 5f63 2e6f 6374 6176 652e 6e75 6d62  ch_c.octave.numb
-00018de0: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
-00018df0: 7069 7463 685f 632e 5f67 6574 5f64 6961  pitch_c._get_dia
-00018e00: 746f 6e69 635f 7063 5f6e 756d 6265 7228  tonic_pc_number(
-00018e10: 292c 0a20 2020 2020 2020 2020 2020 2070  ),.            p
-00018e20: 6974 6368 5f63 2e61 6363 6964 656e 7461  itch_c.accidenta
-00018e30: 6c2e 7365 6d69 746f 6e65 732c 0a20 2020  l.semitones,.   
-00018e40: 2020 2020 2029 0a20 2020 2020 2020 2064       ).        d
-00018e50: 5f6f 6374 2c20 645f 7374 6570 2c20 645f  _oct, d_step, d_
-00018e60: 746f 6e65 7320 3d20 280a 2020 2020 2020  tones = (.      
-00018e70: 2020 2020 2020 625f 6f63 7420 2d20 615f        b_oct - a_
-00018e80: 6f63 742c 0a20 2020 2020 2020 2020 2020  oct,.           
-00018e90: 2062 5f73 7465 7020 2d20 615f 7374 6570   b_step - a_step
-00018ea0: 2c0a 2020 2020 2020 2020 2020 2020 666c  ,.            fl
-00018eb0: 6f61 7428 7069 7463 685f 622e 6e75 6d62  oat(pitch_b.numb
-00018ec0: 6572 2920 2d20 666c 6f61 7428 7069 7463  er) - float(pitc
-00018ed0: 685f 612e 6e75 6d62 6572 292c 0a20 2020  h_a.number),.   
-00018ee0: 2020 2020 2029 0a20 2020 2020 2020 2074       ).        t
-00018ef0: 6d70 5f61 6c74 203d 2066 6c6f 6174 2870  mp_alt = float(p
-00018f00: 6974 6368 5f63 2e6e 756d 6265 7229 202b  itch_c.number) +
-00018f10: 2064 5f74 6f6e 6573 0a20 2020 2020 2020   d_tones.       
-00018f20: 2023 2070 7269 6e74 2027 544d 505f 414c   # print 'TMP_AL
-00018f30: 543a 2025 6627 2025 2074 6d70 5f61 6c74  T: %f' % tmp_alt
-00018f40: 0a20 2020 2020 2020 206e 6577 5f6f 6374  .        new_oct
-00018f50: 203d 2063 5f6f 6374 202b 2064 5f6f 6374   = c_oct + d_oct
-00018f60: 0a20 2020 2020 2020 206e 6577 5f73 7465  .        new_ste
-00018f70: 7020 3d20 635f 7374 6570 202b 2064 5f73  p = c_step + d_s
-00018f80: 7465 700a 2020 2020 2020 2020 6e65 775f  tep.        new_
-00018f90: 616c 7420 3d20 635f 616c 740a 2020 2020  alt = c_alt.    
-00018fa0: 2020 2020 2320 7072 696e 7420 274e 4557      # print 'NEW
-00018fb0: 3a27 2c20 6e65 775f 6f63 742c 206e 6577  :', new_oct, new
-00018fc0: 5f73 7465 702c 206e 6577 5f61 6c74 0a20  _step, new_alt. 
-00018fd0: 2020 2020 2020 206e 6577 5f73 7465 702c         new_step,
-00018fe0: 206e 6577 5f61 6c74 203d 206e 6f72 6d61   new_alt = norma
-00018ff0: 6c69 7a65 5f61 6c74 6572 6174 696f 6e28  lize_alteration(
-00019000: 6e65 775f 7374 6570 2c20 6e65 775f 616c  new_step, new_al
-00019010: 7429 0a20 2020 2020 2020 206e 6577 5f6f  t).        new_o
-00019020: 6374 2c20 6e65 775f 7374 6570 203d 206e  ct, new_step = n
-00019030: 6f72 6d61 6c69 7a65 5f6f 6374 6176 6528  ormalize_octave(
-00019040: 6e65 775f 6f63 742c 206e 6577 5f73 7465  new_oct, new_ste
-00019050: 7029 0a20 2020 2020 2020 2023 2070 7269  p).        # pri
-00019060: 6e74 2027 4e45 5728 6e6f 726d 293a 272c  nt 'NEW(norm):',
-00019070: 206e 6577 5f6f 6374 2c20 6e65 775f 7374   new_oct, new_st
-00019080: 6570 2c20 6e65 775f 616c 740a 2020 2020  ep, new_alt.    
-00019090: 2020 2020 6f63 7461 7665 5f74 6963 6b73      octave_ticks
-000190a0: 203d 205f 7069 7463 682e 4f63 7461 7665   = _pitch.Octave
-000190b0: 286e 6577 5f6f 6374 292e 7469 636b 730a  (new_oct).ticks.
-000190c0: 2020 2020 2020 2020 7069 7463 685f 636c          pitch_cl
-000190d0: 6173 735f 6e61 6d65 203d 205f 7069 7463  ass_name = _pitc
-000190e0: 682e 5f64 6961 746f 6e69 635f 7063 5f6e  h._diatonic_pc_n
-000190f0: 756d 6265 725f 746f 5f64 6961 746f 6e69  umber_to_diatoni
-00019100: 635f 7063 5f6e 616d 655b 6e65 775f 7374  c_pc_name[new_st
-00019110: 6570 2025 2037 5d0a 2020 2020 2020 2020  ep % 7].        
-00019120: 6163 6369 6465 6e74 616c 203d 2073 7472  accidental = str
-00019130: 285f 7069 7463 682e 4163 6369 6465 6e74  (_pitch.Accident
-00019140: 616c 286e 6577 5f61 6c74 2929 0a20 2020  al(new_alt)).   
-00019150: 2020 2020 2074 6d70 5f70 6974 6368 203d       tmp_pitch =
-00019160: 205f 7069 7463 682e 4e61 6d65 6450 6974   _pitch.NamedPit
-00019170: 6368 2870 6974 6368 5f63 6c61 7373 5f6e  ch(pitch_class_n
-00019180: 616d 6520 2b20 6163 6369 6465 6e74 616c  ame + accidental
-00019190: 202b 206f 6374 6176 655f 7469 636b 7329   + octave_ticks)
-000191a0: 0a20 2020 2020 2020 2023 2070 7269 6e74  .        # print
-000191b0: 2027 544d 5028 7069 7463 6829 3a20 2572   'TMP(pitch): %r
-000191c0: 2720 2520 746d 705f 7069 7463 680a 2020  ' % tmp_pitch.  
-000191d0: 2020 2020 2020 6e65 775f 616c 7420 2b3d        new_alt +=
-000191e0: 2074 6d70 5f61 6c74 202d 2066 6c6f 6174   tmp_alt - float
-000191f0: 2874 6d70 5f70 6974 6368 2e6e 756d 6265  (tmp_pitch.numbe
-00019200: 7229 0a20 2020 2020 2020 2023 2070 7269  r).        # pri
-00019210: 6e74 2027 4e45 5728 616c 7429 3a20 2566  nt 'NEW(alt): %f
-00019220: 2720 2520 6e65 775f 616c 740a 2020 2020  ' % new_alt.    
-00019230: 2020 2020 6e65 775f 7374 6570 2c20 6e65      new_step, ne
-00019240: 775f 616c 7420 3d20 6e6f 726d 616c 697a  w_alt = normaliz
-00019250: 655f 616c 7465 7261 7469 6f6e 286e 6577  e_alteration(new
-00019260: 5f73 7465 702c 206e 6577 5f61 6c74 290a  _step, new_alt).
-00019270: 2020 2020 2020 2020 6e65 775f 6f63 742c          new_oct,
-00019280: 206e 6577 5f73 7465 7020 3d20 6e6f 726d   new_step = norm
-00019290: 616c 697a 655f 6f63 7461 7665 286e 6577  alize_octave(new
-000192a0: 5f6f 6374 2c20 6e65 775f 7374 6570 290a  _oct, new_step).
-000192b0: 2020 2020 2020 2020 2320 7072 696e 7420          # print 
-000192c0: 274e 4557 286e 6f72 6d29 3a27 2c20 6e65  'NEW(norm):', ne
-000192d0: 775f 6f63 742c 206e 6577 5f73 7465 702c  w_oct, new_step,
-000192e0: 206e 6577 5f61 6c74 0a20 2020 2020 2020   new_alt.       
-000192f0: 206f 6374 6176 655f 7469 636b 7320 3d20   octave_ticks = 
-00019300: 5f70 6974 6368 2e4f 6374 6176 6528 6e65  _pitch.Octave(ne
-00019310: 775f 6f63 7429 2e74 6963 6b73 0a20 2020  w_oct).ticks.   
-00019320: 2020 2020 2070 6974 6368 5f63 6c61 7373       pitch_class
-00019330: 5f6e 616d 6520 3d20 5f70 6974 6368 2e5f  _name = _pitch._
-00019340: 6469 6174 6f6e 6963 5f70 635f 6e75 6d62  diatonic_pc_numb
-00019350: 6572 5f74 6f5f 6469 6174 6f6e 6963 5f70  er_to_diatonic_p
-00019360: 635f 6e61 6d65 5b6e 6577 5f73 7465 7020  c_name[new_step 
-00019370: 2520 375d 0a20 2020 2020 2020 2061 6363  % 7].        acc
-00019380: 6964 656e 7461 6c20 3d20 7374 7228 5f70  idental = str(_p
-00019390: 6974 6368 2e41 6363 6964 656e 7461 6c28  itch.Accidental(
-000193a0: 6e65 775f 616c 7429 290a 2020 2020 2020  new_alt)).      
-000193b0: 2020 7265 7475 726e 205f 7069 7463 682e    return _pitch.
-000193c0: 4e61 6d65 6450 6974 6368 2870 6974 6368  NamedPitch(pitch
-000193d0: 5f63 6c61 7373 5f6e 616d 6520 2b20 6163  _class_name + ac
-000193e0: 6369 6465 6e74 616c 202b 206f 6374 6176  cidental + octav
-000193f0: 655f 7469 636b 7329 0a0a 2020 2020 2323  e_ticks)..    ##
-00019400: 2320 5055 424c 4943 204d 4554 484f 4453  # PUBLIC METHODS
-00019410: 2023 2323 0a0a 2020 2020 4073 7461 7469   ###..    @stati
-00019420: 636d 6574 686f 640a 2020 2020 6465 6620  cmethod.    def 
-00019430: 6c69 7374 5f6b 6e6f 776e 5f63 6f6e 7465  list_known_conte
-00019440: 7874 7328 2920 2d3e 206c 6973 745b 7374  xts() -> list[st
-00019450: 725d 3a0a 2020 2020 2020 2020 2222 220a  r]:.        """.
-00019460: 2020 2020 2020 2020 4c69 7374 7320 616c          Lists al
-00019470: 6c20 4c69 6c79 506f 6e64 2063 6f6e 7465  l LilyPond conte
-00019480: 7874 7320 7265 636f 676e 697a 6564 2062  xts recognized b
-00019490: 7920 4c69 6c79 506f 6e64 2070 6172 7365  y LilyPond parse
-000194a0: 722e 0a0a 2020 2020 2020 2020 2e2e 2020  r...        ..  
-000194b0: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-000194c0: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
-000194d0: 203e 3e3e 2063 6c61 7373 5f20 3d20 6162   >>> class_ = ab
-000194e0: 6a61 642e 7061 7273 6572 2e4c 696c 7950  jad.parser.LilyP
-000194f0: 6f6e 6450 6172 7365 720a 2020 2020 2020  ondParser.      
-00019500: 2020 2020 2020 3e3e 3e20 666f 7220 636f        >>> for co
-00019510: 6e74 6578 7420 696e 2063 6c61 7373 5f2e  ntext in class_.
-00019520: 6c69 7374 5f6b 6e6f 776e 5f63 6f6e 7465  list_known_conte
-00019530: 7874 7328 293a 0a20 2020 2020 2020 2020  xts():.         
-00019540: 2020 202e 2e2e 2020 2020 2070 7269 6e74     ...     print
-00019550: 2863 6f6e 7465 7874 290a 2020 2020 2020  (context).      
-00019560: 2020 2020 2020 2e2e 2e0a 2020 2020 2020        ....      
-00019570: 2020 2020 2020 4368 6f69 7253 7461 6666        ChoirStaff
-00019580: 0a20 2020 2020 2020 2020 2020 2043 686f  .            Cho
-00019590: 7264 4e61 6d65 730a 2020 2020 2020 2020  rdNames.        
-000195a0: 2020 2020 4375 6556 6f69 6365 0a20 2020      CueVoice.   
-000195b0: 2020 2020 2020 2020 2044 6576 6e75 6c6c           Devnull
-000195c0: 0a20 2020 2020 2020 2020 2020 2044 7275  .            Dru
-000195d0: 6d53 7461 6666 0a20 2020 2020 2020 2020  mStaff.         
-000195e0: 2020 2044 7275 6d56 6f69 6365 0a20 2020     DrumVoice.   
-000195f0: 2020 2020 2020 2020 2044 796e 616d 6963           Dynamic
-00019600: 730a 2020 2020 2020 2020 2020 2020 4669  s.            Fi
-00019610: 6775 7265 6442 6173 730a 2020 2020 2020  guredBass.      
-00019620: 2020 2020 2020 4672 6574 426f 6172 6473        FretBoards
-00019630: 0a20 2020 2020 2020 2020 2020 2047 6c6f  .            Glo
-00019640: 6261 6c0a 2020 2020 2020 2020 2020 2020  bal.            
-00019650: 4772 616e 6453 7461 6666 0a20 2020 2020  GrandStaff.     
-00019660: 2020 2020 2020 2047 7265 676f 7269 616e         Gregorian
-00019670: 5472 616e 7363 7269 7074 696f 6e53 7461  TranscriptionSta
-00019680: 6666 0a20 2020 2020 2020 2020 2020 2047  ff.            G
-00019690: 7265 676f 7269 616e 5472 616e 7363 7269  regorianTranscri
-000196a0: 7074 696f 6e56 6f69 6365 0a20 2020 2020  ptionVoice.     
-000196b0: 2020 2020 2020 204b 6965 7661 6e53 7461         KievanSta
-000196c0: 6666 0a20 2020 2020 2020 2020 2020 204b  ff.            K
-000196d0: 6965 7661 6e56 6f69 6365 0a20 2020 2020  ievanVoice.     
-000196e0: 2020 2020 2020 204c 7972 6963 730a 2020         Lyrics.  
-000196f0: 2020 2020 2020 2020 2020 4d65 6e73 7572            Mensur
-00019700: 616c 5374 6166 660a 2020 2020 2020 2020  alStaff.        
-00019710: 2020 2020 4d65 6e73 7572 616c 566f 6963      MensuralVoic
-00019720: 650a 2020 2020 2020 2020 2020 2020 4e6f  e.            No
-00019730: 7465 4e61 6d65 730a 2020 2020 2020 2020  teNames.        
-00019740: 2020 2020 4e75 6c6c 566f 6963 650a 2020      NullVoice.  
-00019750: 2020 2020 2020 2020 2020 4f6e 6553 7461            OneSta
-00019760: 6666 0a20 2020 2020 2020 2020 2020 2050  ff.            P
-00019770: 6574 7275 6363 6953 7461 6666 0a20 2020  etrucciStaff.   
-00019780: 2020 2020 2020 2020 2050 6574 7275 6363           Petrucc
-00019790: 6956 6f69 6365 0a20 2020 2020 2020 2020  iVoice.         
-000197a0: 2020 2050 6961 6e6f 5374 6166 660a 2020     PianoStaff.  
-000197b0: 2020 2020 2020 2020 2020 5268 7974 686d            Rhythm
-000197c0: 6963 5374 6166 660a 2020 2020 2020 2020  icStaff.        
-000197d0: 2020 2020 5363 6f72 650a 2020 2020 2020      Score.      
-000197e0: 2020 2020 2020 5374 6166 660a 2020 2020        Staff.    
-000197f0: 2020 2020 2020 2020 5374 6166 6647 726f          StaffGro
-00019800: 7570 0a20 2020 2020 2020 2020 2020 2054  up.            T
-00019810: 6162 5374 6166 660a 2020 2020 2020 2020  abStaff.        
-00019820: 2020 2020 5461 6256 6f69 6365 0a20 2020      TabVoice.   
-00019830: 2020 2020 2020 2020 2056 6174 6963 616e           Vatican
-00019840: 6153 7461 6666 0a20 2020 2020 2020 2020  aStaff.         
-00019850: 2020 2056 6174 6963 616e 6156 6f69 6365     VaticanaVoice
-00019860: 0a20 2020 2020 2020 2020 2020 2056 6f69  .            Voi
-00019870: 6365 0a0a 2020 2020 2020 2020 2222 220a  ce..        """.
-00019880: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00019890: 736f 7274 6564 285f 6c79 656e 762e 636f  sorted(_lyenv.co
-000198a0: 6e74 6578 7473 2e6b 6579 7328 2929 0a0a  ntexts.keys())..
-000198b0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-000198c0: 640a 2020 2020 6465 6620 6c69 7374 5f6b  d.    def list_k
-000198d0: 6e6f 776e 5f64 796e 616d 6963 7328 2920  nown_dynamics() 
-000198e0: 2d3e 2074 7570 6c65 5b73 7472 2c20 2e2e  -> tuple[str, ..
-000198f0: 2e5d 3a0a 2020 2020 2020 2020 2222 220a  .]:.        """.
-00019900: 2020 2020 2020 2020 4c69 7374 7320 616c          Lists al
-00019910: 6c20 6479 6e61 6d69 6373 2072 6563 6f67  l dynamics recog
-00019920: 6e69 7a65 6420 6279 204c 696c 7950 6f6e  nized by LilyPon
-00019930: 6420 7061 7273 6572 2e0a 0a20 2020 2020  d parser...     
-00019940: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
-00019950: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
-00019960: 2020 2020 2020 2020 3e3e 3e20 636c 6173          >>> clas
-00019970: 735f 203d 2061 626a 6164 2e70 6172 7365  s_ = abjad.parse
-00019980: 722e 4c69 6c79 506f 6e64 5061 7273 6572  r.LilyPondParser
-00019990: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-000199a0: 2066 6f72 2064 796e 616d 6963 2069 6e20   for dynamic in 
-000199b0: 636c 6173 735f 2e6c 6973 745f 6b6e 6f77  class_.list_know
-000199c0: 6e5f 6479 6e61 6d69 6373 2829 3a0a 2020  n_dynamics():.  
-000199d0: 2020 2020 2020 2020 2020 2e2e 2e20 2020            ...   
-000199e0: 2020 7072 696e 7428 6479 6e61 6d69 6329    print(dynamic)
-000199f0: 0a20 2020 2020 2020 2020 2020 202e 2e2e  .            ...
-00019a00: 0a20 2020 2020 2020 2020 2020 2066 0a20  .            f. 
-00019a10: 2020 2020 2020 2020 2020 2066 660a 2020             ff.  
-00019a20: 2020 2020 2020 2020 2020 6666 660a 2020            fff.  
-00019a30: 2020 2020 2020 2020 2020 6666 6666 0a20            ffff. 
-00019a40: 2020 2020 2020 2020 2020 2066 6666 6666             fffff
-00019a50: 0a20 2020 2020 2020 2020 2020 2066 700a  .            fp.
-00019a60: 2020 2020 2020 2020 2020 2020 667a 0a20              fz. 
-00019a70: 2020 2020 2020 2020 2020 206d 660a 2020             mf.  
-00019a80: 2020 2020 2020 2020 2020 6d70 0a20 2020            mp.   
-00019a90: 2020 2020 2020 2020 2070 0a20 2020 2020           p.     
-00019aa0: 2020 2020 2020 2070 700a 2020 2020 2020         pp.      
-00019ab0: 2020 2020 2020 7070 700a 2020 2020 2020        ppp.      
-00019ac0: 2020 2020 2020 7070 7070 0a20 2020 2020        pppp.     
-00019ad0: 2020 2020 2020 2070 7070 7070 0a20 2020         ppppp.   
-00019ae0: 2020 2020 2020 2020 2072 667a 0a20 2020           rfz.   
-00019af0: 2020 2020 2020 2020 2073 660a 2020 2020           sf.    
-00019b00: 2020 2020 2020 2020 7366 660a 2020 2020          sff.    
-00019b10: 2020 2020 2020 2020 7366 700a 2020 2020          sfp.    
-00019b20: 2020 2020 2020 2020 7366 7a0a 2020 2020          sfz.    
-00019b30: 2020 2020 2020 2020 7370 0a20 2020 2020          sp.     
-00019b40: 2020 2020 2020 2073 7070 0a0a 2020 2020         spp..    
-00019b50: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00019b60: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
-00019b70: 2020 2020 666f 7220 6b65 792c 2076 616c      for key, val
-00019b80: 7565 2069 6e20 5f6c 7965 6e76 2e63 7572  ue in _lyenv.cur
-00019b90: 7265 6e74 5f6d 6f64 756c 652e 6974 656d  rent_module.item
-00019ba0: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-00019bb0: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-00019bc0: 6365 2876 616c 7565 2c20 6469 6374 293a  ce(value, dict):
-00019bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019be0: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
-00019bf0: 2020 2020 2020 6966 2022 6479 6e61 6d69        if "dynami
-00019c00: 632d 6576 656e 7422 2069 6e20 7661 6c75  c-event" in valu
-00019c10: 652e 6765 7428 2274 7970 6573 222c 2028  e.get("types", (
-00019c20: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00019c30: 2020 2020 7265 7375 6c74 2e61 7070 656e      result.appen
-00019c40: 6428 6b65 7929 0a20 2020 2020 2020 2072  d(key).        r
-00019c50: 6573 756c 742e 736f 7274 2829 0a20 2020  esult.sort().   
-00019c60: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
-00019c70: 6528 7265 7375 6c74 290a 0a20 2020 2040  e(result)..    @
-00019c80: 7374 6174 6963 6d65 7468 6f64 0a20 2020  staticmethod.   
-00019c90: 2064 6566 206c 6973 745f 6b6e 6f77 6e5f   def list_known_
-00019ca0: 6772 6f62 7328 2920 2d3e 206c 6973 745b  grobs() -> list[
-00019cb0: 7374 725d 3a0a 2020 2020 2020 2020 2222  str]:.        ""
-00019cc0: 220a 2020 2020 2020 2020 4c69 7374 7320  ".        Lists 
-00019cd0: 616c 6c20 4c69 6c79 506f 6e64 2067 726f  all LilyPond gro
-00019ce0: 6273 2072 6563 6f67 6e69 7a65 6420 6279  bs recognized by
-00019cf0: 204c 696c 7950 6f6e 6420 7061 7273 6572   LilyPond parser
-00019d00: 2e0a 0a20 2020 2020 2020 202e 2e20 2063  ...        ..  c
-00019d10: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
-00019d20: 6c65 0a0a 2020 2020 2020 2020 2020 2020  le..            
-00019d30: 3e3e 3e20 636c 6173 735f 203d 2061 626a  >>> class_ = abj
-00019d40: 6164 2e70 6172 7365 722e 4c69 6c79 506f  ad.parser.LilyPo
-00019d50: 6e64 5061 7273 6572 0a20 2020 2020 2020  ndParser.       
-00019d60: 2020 2020 203e 3e3e 2066 6f72 2067 726f       >>> for gro
-00019d70: 6220 696e 2063 6c61 7373 5f2e 6c69 7374  b in class_.list
-00019d80: 5f6b 6e6f 776e 5f67 726f 6273 2829 3a0a  _known_grobs():.
-00019d90: 2020 2020 2020 2020 2020 2020 2e2e 2e20              ... 
-00019da0: 2020 2020 7072 696e 7428 6772 6f62 290a      print(grob).
-00019db0: 2020 2020 2020 2020 2020 2020 2e2e 2e0a              ....
-00019dc0: 2020 2020 2020 2020 2020 2020 4163 6369              Acci
-00019dd0: 6465 6e74 616c 0a20 2020 2020 2020 2020  dental.         
-00019de0: 2020 2041 6363 6964 656e 7461 6c43 6175     AccidentalCau
-00019df0: 7469 6f6e 6172 790a 2020 2020 2020 2020  tionary.        
-00019e00: 2020 2020 4163 6369 6465 6e74 616c 506c      AccidentalPl
-00019e10: 6163 656d 656e 740a 2020 2020 2020 2020  acement.        
-00019e20: 2020 2020 4163 6369 6465 6e74 616c 5375      AccidentalSu
-00019e30: 6767 6573 7469 6f6e 0a20 2020 2020 2020  ggestion.       
-00019e40: 2020 2020 2041 6d62 6974 7573 0a20 2020       Ambitus.   
-00019e50: 2020 2020 2020 2020 2041 6d62 6974 7573           Ambitus
-00019e60: 4163 6369 6465 6e74 616c 0a20 2020 2020  Accidental.     
-00019e70: 2020 2020 2020 2041 6d62 6974 7573 4c69         AmbitusLi
-00019e80: 6e65 0a20 2020 2020 2020 2020 2020 2041  ne.            A
-00019e90: 6d62 6974 7573 4e6f 7465 4865 6164 0a20  mbitusNoteHead. 
-00019ea0: 2020 2020 2020 2020 2020 2041 7270 6567             Arpeg
-00019eb0: 6769 6f0a 2020 2020 2020 2020 2020 2020  gio.            
-00019ec0: 4261 6c6c 6f6f 6e54 6578 7449 7465 6d0a  BalloonTextItem.
-00019ed0: 2020 2020 2020 2020 2020 2020 4261 724c              BarL
-00019ee0: 696e 650a 2020 2020 2020 2020 2020 2020  ine.            
-00019ef0: 4261 724e 756d 6265 720a 2020 2020 2020  BarNumber.      
-00019f00: 2020 2020 2020 4261 7373 4669 6775 7265        BassFigure
-00019f10: 0a20 2020 2020 2020 2020 2020 2042 6173  .            Bas
-00019f20: 7346 6967 7572 6541 6c69 676e 6d65 6e74  sFigureAlignment
-00019f30: 0a20 2020 2020 2020 2020 2020 2042 6173  .            Bas
-00019f40: 7346 6967 7572 6541 6c69 676e 6d65 6e74  sFigureAlignment
-00019f50: 506f 7369 7469 6f6e 696e 670a 2020 2020  Positioning.    
-00019f60: 2020 2020 2020 2020 4261 7373 4669 6775          BassFigu
-00019f70: 7265 4272 6163 6b65 740a 2020 2020 2020  reBracket.      
-00019f80: 2020 2020 2020 4261 7373 4669 6775 7265        BassFigure
-00019f90: 436f 6e74 696e 7561 7469 6f6e 0a20 2020  Continuation.   
-00019fa0: 2020 2020 2020 2020 2042 6173 7346 6967           BassFig
-00019fb0: 7572 654c 696e 650a 2020 2020 2020 2020  ureLine.        
-00019fc0: 2020 2020 4265 616d 0a20 2020 2020 2020      Beam.       
-00019fd0: 2020 2020 2042 656e 6441 6674 6572 0a20       BendAfter. 
-00019fe0: 2020 2020 2020 2020 2020 2042 7265 616b             Break
-00019ff0: 416c 6967 6e47 726f 7570 0a20 2020 2020  AlignGroup.     
-0001a000: 2020 2020 2020 2042 7265 616b 416c 6967         BreakAlig
-0001a010: 6e6d 656e 740a 2020 2020 2020 2020 2020  nment.          
-0001a020: 2020 4272 6561 7468 696e 6753 6967 6e0a    BreathingSign.
-0001a030: 2020 2020 2020 2020 2020 2020 4368 6f72              Chor
-0001a040: 644e 616d 650a 2020 2020 2020 2020 2020  dName.          
-0001a050: 2020 436c 6566 0a20 2020 2020 2020 2020    Clef.         
-0001a060: 2020 2043 6c65 664d 6f64 6966 6965 720a     ClefModifier.
-0001a070: 2020 2020 2020 2020 2020 2020 436c 7573              Clus
-0001a080: 7465 7253 7061 6e6e 6572 0a20 2020 2020  terSpanner.     
-0001a090: 2020 2020 2020 2043 6c75 7374 6572 5370         ClusterSp
-0001a0a0: 616e 6e65 7242 6561 636f 6e0a 2020 2020  annerBeacon.    
-0001a0b0: 2020 2020 2020 2020 436f 6d62 696e 6554          CombineT
-0001a0c0: 6578 7453 6372 6970 740a 2020 2020 2020  extScript.      
-0001a0d0: 2020 2020 2020 4375 6543 6c65 660a 2020        CueClef.  
-0001a0e0: 2020 2020 2020 2020 2020 4375 6545 6e64            CueEnd
-0001a0f0: 436c 6566 0a20 2020 2020 2020 2020 2020  Clef.           
-0001a100: 2043 7573 746f 730a 2020 2020 2020 2020   Custos.        
-0001a110: 2020 2020 446f 7443 6f6c 756d 6e0a 2020      DotColumn.  
-0001a120: 2020 2020 2020 2020 2020 446f 7473 0a20            Dots. 
-0001a130: 2020 2020 2020 2020 2020 2044 6f75 626c             Doubl
-0001a140: 6550 6572 6365 6e74 5265 7065 6174 0a20  ePercentRepeat. 
-0001a150: 2020 2020 2020 2020 2020 2044 6f75 626c             Doubl
-0001a160: 6550 6572 6365 6e74 5265 7065 6174 436f  ePercentRepeatCo
-0001a170: 756e 7465 720a 2020 2020 2020 2020 2020  unter.          
-0001a180: 2020 446f 7562 6c65 5265 7065 6174 536c    DoubleRepeatSl
-0001a190: 6173 680a 2020 2020 2020 2020 2020 2020  ash.            
-0001a1a0: 4479 6e61 6d69 634c 696e 6553 7061 6e6e  DynamicLineSpann
-0001a1b0: 6572 0a20 2020 2020 2020 2020 2020 2044  er.            D
-0001a1c0: 796e 616d 6963 5465 7874 0a20 2020 2020  ynamicText.     
-0001a1d0: 2020 2020 2020 2044 796e 616d 6963 5465         DynamicTe
-0001a1e0: 7874 5370 616e 6e65 720a 2020 2020 2020  xtSpanner.      
-0001a1f0: 2020 2020 2020 4570 6973 656d 610a 2020        Episema.  
-0001a200: 2020 2020 2020 2020 2020 4669 6e67 6572            Finger
-0001a210: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
-0001a220: 4669 6e67 6572 696e 6743 6f6c 756d 6e0a  FingeringColumn.
-0001a230: 2020 2020 2020 2020 2020 2020 466c 6167              Flag
-0001a240: 0a20 2020 2020 2020 2020 2020 2046 6f6f  .            Foo
-0001a250: 746e 6f74 6549 7465 6d0a 2020 2020 2020  tnoteItem.      
-0001a260: 2020 2020 2020 466f 6f74 6e6f 7465 5370        FootnoteSp
-0001a270: 616e 6e65 720a 2020 2020 2020 2020 2020  anner.          
-0001a280: 2020 4672 6574 426f 6172 640a 2020 2020    FretBoard.    
-0001a290: 2020 2020 2020 2020 476c 6973 7361 6e64          Glissand
-0001a2a0: 6f0a 2020 2020 2020 2020 2020 2020 4772  o.            Gr
-0001a2b0: 6163 6553 7061 6369 6e67 0a20 2020 2020  aceSpacing.     
-0001a2c0: 2020 2020 2020 2047 7269 644c 696e 650a         GridLine.
-0001a2d0: 2020 2020 2020 2020 2020 2020 4772 6964              Grid
-0001a2e0: 506f 696e 740a 2020 2020 2020 2020 2020  Point.          
-0001a2f0: 2020 4861 6972 7069 6e0a 2020 2020 2020    Hairpin.      
-0001a300: 2020 2020 2020 486f 7269 7a6f 6e74 616c        Horizontal
-0001a310: 4272 6163 6b65 740a 2020 2020 2020 2020  Bracket.        
-0001a320: 2020 2020 486f 7269 7a6f 6e74 616c 4272      HorizontalBr
-0001a330: 6163 6b65 7454 6578 740a 2020 2020 2020  acketText.      
-0001a340: 2020 2020 2020 496e 7374 7275 6d65 6e74        Instrument
-0001a350: 4e61 6d65 0a20 2020 2020 2020 2020 2020  Name.           
-0001a360: 2049 6e73 7472 756d 656e 7453 7769 7463   InstrumentSwitc
-0001a370: 680a 2020 2020 2020 2020 2020 2020 4b65  h.            Ke
-0001a380: 7943 616e 6365 6c6c 6174 696f 6e0a 2020  yCancellation.  
-0001a390: 2020 2020 2020 2020 2020 4b65 7953 6967            KeySig
-0001a3a0: 6e61 7475 7265 0a20 2020 2020 2020 2020  nature.         
-0001a3b0: 2020 204b 6965 7661 6e4c 6967 6174 7572     KievanLigatur
-0001a3c0: 650a 2020 2020 2020 2020 2020 2020 4c61  e.            La
-0001a3d0: 6973 7365 7a56 6962 7265 7254 6965 0a20  issezVibrerTie. 
-0001a3e0: 2020 2020 2020 2020 2020 204c 6169 7373             Laiss
-0001a3f0: 657a 5669 6272 6572 5469 6543 6f6c 756d  ezVibrerTieColum
-0001a400: 6e0a 2020 2020 2020 2020 2020 2020 4c65  n.            Le
-0001a410: 6467 6572 4c69 6e65 5370 616e 6e65 720a  dgerLineSpanner.
-0001a420: 2020 2020 2020 2020 2020 2020 4c65 6674              Left
-0001a430: 4564 6765 0a20 2020 2020 2020 2020 2020  Edge.           
-0001a440: 204c 6967 6174 7572 6542 7261 636b 6574   LigatureBracket
-0001a450: 0a20 2020 2020 2020 2020 2020 204c 7972  .            Lyr
-0001a460: 6963 4578 7465 6e64 6572 0a20 2020 2020  icExtender.     
-0001a470: 2020 2020 2020 204c 7972 6963 4879 7068         LyricHyph
-0001a480: 656e 0a20 2020 2020 2020 2020 2020 204c  en.            L
-0001a490: 7972 6963 5370 6163 650a 2020 2020 2020  yricSpace.      
-0001a4a0: 2020 2020 2020 4c79 7269 6354 6578 740a        LyricText.
-0001a4b0: 2020 2020 2020 2020 2020 2020 4d65 6173              Meas
-0001a4c0: 7572 6543 6f75 6e74 6572 0a20 2020 2020  ureCounter.     
-0001a4d0: 2020 2020 2020 204d 6561 7375 7265 4772         MeasureGr
-0001a4e0: 6f75 7069 6e67 0a20 2020 2020 2020 2020  ouping.         
-0001a4f0: 2020 204d 656c 6f64 7949 7465 6d0a 2020     MelodyItem.  
-0001a500: 2020 2020 2020 2020 2020 4d65 6e73 7572            Mensur
-0001a510: 616c 4c69 6761 7475 7265 0a20 2020 2020  alLigature.     
-0001a520: 2020 2020 2020 204d 6574 726f 6e6f 6d65         Metronome
-0001a530: 4d61 726b 0a20 2020 2020 2020 2020 2020  Mark.           
-0001a540: 204d 756c 7469 4d65 6173 7572 6552 6573   MultiMeasureRes
-0001a550: 740a 2020 2020 2020 2020 2020 2020 4d75  t.            Mu
-0001a560: 6c74 694d 6561 7375 7265 5265 7374 4e75  ltiMeasureRestNu
-0001a570: 6d62 6572 0a20 2020 2020 2020 2020 2020  mber.           
-0001a580: 204d 756c 7469 4d65 6173 7572 6552 6573   MultiMeasureRes
-0001a590: 7454 6578 740a 2020 2020 2020 2020 2020  tText.          
-0001a5a0: 2020 4e6f 6e4d 7573 6963 616c 5061 7065    NonMusicalPape
-0001a5b0: 7243 6f6c 756d 6e0a 2020 2020 2020 2020  rColumn.        
-0001a5c0: 2020 2020 4e6f 7465 436f 6c6c 6973 696f      NoteCollisio
-0001a5d0: 6e0a 2020 2020 2020 2020 2020 2020 4e6f  n.            No
-0001a5e0: 7465 436f 6c75 6d6e 0a20 2020 2020 2020  teColumn.       
-0001a5f0: 2020 2020 204e 6f74 6548 6561 640a 2020       NoteHead.  
-0001a600: 2020 2020 2020 2020 2020 4e6f 7465 4e61            NoteNa
-0001a610: 6d65 0a20 2020 2020 2020 2020 2020 204e  me.            N
-0001a620: 6f74 6553 7061 6369 6e67 0a20 2020 2020  oteSpacing.     
-0001a630: 2020 2020 2020 204f 7474 6176 6142 7261         OttavaBra
-0001a640: 636b 6574 0a20 2020 2020 2020 2020 2020  cket.           
-0001a650: 2050 6170 6572 436f 6c75 6d6e 0a20 2020   PaperColumn.   
-0001a660: 2020 2020 2020 2020 2050 6172 656e 7468           Parenth
-0001a670: 6573 6573 4974 656d 0a20 2020 2020 2020  esesItem.       
-0001a680: 2020 2020 2050 6572 6365 6e74 5265 7065       PercentRepe
-0001a690: 6174 0a20 2020 2020 2020 2020 2020 2050  at.            P
-0001a6a0: 6572 6365 6e74 5265 7065 6174 436f 756e  ercentRepeatCoun
-0001a6b0: 7465 720a 2020 2020 2020 2020 2020 2020  ter.            
-0001a6c0: 5068 7261 7369 6e67 536c 7572 0a20 2020  PhrasingSlur.   
-0001a6d0: 2020 2020 2020 2020 2050 6961 6e6f 5065           PianoPe
-0001a6e0: 6461 6c42 7261 636b 6574 0a20 2020 2020  dalBracket.     
-0001a6f0: 2020 2020 2020 2052 6568 6561 7273 616c         Rehearsal
-0001a700: 4d61 726b 0a20 2020 2020 2020 2020 2020  Mark.           
-0001a710: 2052 6570 6561 7453 6c61 7368 0a20 2020   RepeatSlash.   
-0001a720: 2020 2020 2020 2020 2052 6570 6561 7454           RepeatT
-0001a730: 6965 0a20 2020 2020 2020 2020 2020 2052  ie.            R
-0001a740: 6570 6561 7454 6965 436f 6c75 6d6e 0a20  epeatTieColumn. 
-0001a750: 2020 2020 2020 2020 2020 2052 6573 740a             Rest.
-0001a760: 2020 2020 2020 2020 2020 2020 5265 7374              Rest
-0001a770: 436f 6c6c 6973 696f 6e0a 2020 2020 2020  Collision.      
-0001a780: 2020 2020 2020 5363 7269 7074 0a20 2020        Script.   
-0001a790: 2020 2020 2020 2020 2053 6372 6970 7443           ScriptC
-0001a7a0: 6f6c 756d 6e0a 2020 2020 2020 2020 2020  olumn.          
-0001a7b0: 2020 5363 7269 7074 526f 770a 2020 2020    ScriptRow.    
-0001a7c0: 2020 2020 2020 2020 536c 7572 0a20 2020          Slur.   
-0001a7d0: 2020 2020 2020 2020 2053 6f73 7465 6e75           Sostenu
-0001a7e0: 746f 5065 6461 6c0a 2020 2020 2020 2020  toPedal.        
-0001a7f0: 2020 2020 536f 7374 656e 7574 6f50 6564      SostenutoPed
-0001a800: 616c 4c69 6e65 5370 616e 6e65 720a 2020  alLineSpanner.  
-0001a810: 2020 2020 2020 2020 2020 5370 6163 696e            Spacin
-0001a820: 6753 7061 6e6e 6572 0a20 2020 2020 2020  gSpanner.       
-0001a830: 2020 2020 2053 7061 6e42 6172 0a20 2020       SpanBar.   
-0001a840: 2020 2020 2020 2020 2053 7061 6e42 6172           SpanBar
-0001a850: 5374 7562 0a20 2020 2020 2020 2020 2020  Stub.           
-0001a860: 2053 7461 6666 4772 6f75 7065 720a 2020   StaffGrouper.  
-0001a870: 2020 2020 2020 2020 2020 5374 6166 6653            StaffS
-0001a880: 7061 6369 6e67 0a20 2020 2020 2020 2020  pacing.         
-0001a890: 2020 2053 7461 6666 5379 6d62 6f6c 0a20     StaffSymbol. 
-0001a8a0: 2020 2020 2020 2020 2020 2053 7461 6e7a             Stanz
-0001a8b0: 614e 756d 6265 720a 2020 2020 2020 2020  aNumber.        
-0001a8c0: 2020 2020 5374 656d 0a20 2020 2020 2020      Stem.       
-0001a8d0: 2020 2020 2053 7465 6d53 7475 620a 2020       StemStub.  
-0001a8e0: 2020 2020 2020 2020 2020 5374 656d 5472            StemTr
-0001a8f0: 656d 6f6c 6f0a 2020 2020 2020 2020 2020  emolo.          
-0001a900: 2020 5374 7269 6e67 4e75 6d62 6572 0a20    StringNumber. 
-0001a910: 2020 2020 2020 2020 2020 2053 7472 6f6b             Strok
-0001a920: 6546 696e 6765 720a 2020 2020 2020 2020  eFinger.        
-0001a930: 2020 2020 5375 7374 6169 6e50 6564 616c      SustainPedal
-0001a940: 0a20 2020 2020 2020 2020 2020 2053 7573  .            Sus
-0001a950: 7461 696e 5065 6461 6c4c 696e 6553 7061  tainPedalLineSpa
-0001a960: 6e6e 6572 0a20 2020 2020 2020 2020 2020  nner.           
-0001a970: 2053 7973 7465 6d0a 2020 2020 2020 2020   System.        
-0001a980: 2020 2020 5379 7374 656d 5374 6172 7442      SystemStartB
-0001a990: 6172 0a20 2020 2020 2020 2020 2020 2053  ar.            S
-0001a9a0: 7973 7465 6d53 7461 7274 4272 6163 650a  ystemStartBrace.
-0001a9b0: 2020 2020 2020 2020 2020 2020 5379 7374              Syst
-0001a9c0: 656d 5374 6172 7442 7261 636b 6574 0a20  emStartBracket. 
-0001a9d0: 2020 2020 2020 2020 2020 2053 7973 7465             Syste
-0001a9e0: 6d53 7461 7274 5371 7561 7265 0a20 2020  mStartSquare.   
-0001a9f0: 2020 2020 2020 2020 2054 6162 4e6f 7465           TabNote
-0001aa00: 4865 6164 0a20 2020 2020 2020 2020 2020  Head.           
-0001aa10: 2054 6578 7453 6372 6970 740a 2020 2020   TextScript.    
-0001aa20: 2020 2020 2020 2020 5465 7874 5370 616e          TextSpan
-0001aa30: 6e65 720a 2020 2020 2020 2020 2020 2020  ner.            
-0001aa40: 5469 650a 2020 2020 2020 2020 2020 2020  Tie.            
-0001aa50: 5469 6543 6f6c 756d 6e0a 2020 2020 2020  TieColumn.      
-0001aa60: 2020 2020 2020 5469 6d65 5369 676e 6174        TimeSignat
-0001aa70: 7572 650a 2020 2020 2020 2020 2020 2020  ure.            
-0001aa80: 5472 696c 6c50 6974 6368 4163 6369 6465  TrillPitchAccide
-0001aa90: 6e74 616c 0a20 2020 2020 2020 2020 2020  ntal.           
-0001aaa0: 2054 7269 6c6c 5069 7463 6847 726f 7570   TrillPitchGroup
-0001aab0: 0a20 2020 2020 2020 2020 2020 2054 7269  .            Tri
-0001aac0: 6c6c 5069 7463 6848 6561 640a 2020 2020  llPitchHead.    
-0001aad0: 2020 2020 2020 2020 5472 696c 6c53 7061          TrillSpa
-0001aae0: 6e6e 6572 0a20 2020 2020 2020 2020 2020  nner.           
-0001aaf0: 2054 7570 6c65 7442 7261 636b 6574 0a20   TupletBracket. 
-0001ab00: 2020 2020 2020 2020 2020 2054 7570 6c65             Tuple
-0001ab10: 744e 756d 6265 720a 2020 2020 2020 2020  tNumber.        
-0001ab20: 2020 2020 556e 6143 6f72 6461 5065 6461      UnaCordaPeda
-0001ab30: 6c0a 2020 2020 2020 2020 2020 2020 556e  l.            Un
-0001ab40: 6143 6f72 6461 5065 6461 6c4c 696e 6553  aCordaPedalLineS
-0001ab50: 7061 6e6e 6572 0a20 2020 2020 2020 2020  panner.         
-0001ab60: 2020 2056 6174 6963 616e 614c 6967 6174     VaticanaLigat
-0001ab70: 7572 650a 2020 2020 2020 2020 2020 2020  ure.            
-0001ab80: 5665 7274 6963 616c 0a20 2020 2020 2020  Vertical.       
-0001ab90: 2020 2020 2056 6572 7469 6361 6c41 7869       VerticalAxi
-0001aba0: 7347 726f 7570 0a20 2020 2020 2020 2020  sGroup.         
-0001abb0: 2020 2056 6f69 6365 466f 6c6c 6f77 6572     VoiceFollower
-0001abc0: 0a20 2020 2020 2020 2020 2020 2056 6f6c  .            Vol
-0001abd0: 7461 4272 6163 6b65 740a 2020 2020 2020  taBracket.      
-0001abe0: 2020 2020 2020 566f 6c74 6142 7261 636b        VoltaBrack
-0001abf0: 6574 5370 616e 6e65 720a 0a20 2020 2020  etSpanner..     
-0001ac00: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
-0001ac10: 7265 7475 726e 2073 6f72 7465 6428 5f6c  return sorted(_l
-0001ac20: 7965 6e76 2e67 726f 625f 696e 7465 7266  yenv.grob_interf
-0001ac30: 6163 6573 2e6b 6579 7328 2929 0a0a 2020  aces.keys())..  
-0001ac40: 2020 4073 7461 7469 636d 6574 686f 640a    @staticmethod.
-0001ac50: 2020 2020 6465 6620 6c69 7374 5f6b 6e6f      def list_kno
-0001ac60: 776e 5f6c 616e 6775 6167 6573 2829 202d  wn_languages() -
-0001ac70: 3e20 6c69 7374 5b73 7472 5d3a 0a20 2020  > list[str]:.   
-0001ac80: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0001ac90: 204c 6973 7473 2061 6c6c 206e 6f74 652d   Lists all note-
-0001aca0: 696e 7075 7420 6c61 6e67 7561 6765 7320  input languages 
-0001acb0: 7265 636f 676e 697a 6564 2062 7920 4c69  recognized by Li
-0001acc0: 6c79 506f 6e64 2070 6172 7365 722e 0a0a  lyPond parser...
-0001acd0: 2020 2020 2020 2020 2e2e 2020 636f 6e74          ..  cont
-0001ace0: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-0001acf0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001ad00: 2063 6c61 7373 5f20 3d20 6162 6a61 642e   class_ = abjad.
-0001ad10: 7061 7273 6572 2e4c 696c 7950 6f6e 6450  parser.LilyPondP
-0001ad20: 6172 7365 720a 2020 2020 2020 2020 2020  arser.          
-0001ad30: 2020 3e3e 3e20 666f 7220 6c61 6e67 7561    >>> for langua
-0001ad40: 6765 2069 6e20 636c 6173 735f 2e6c 6973  ge in class_.lis
-0001ad50: 745f 6b6e 6f77 6e5f 6c61 6e67 7561 6765  t_known_language
-0001ad60: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-0001ad70: 202e 2e2e 2020 2020 2070 7269 6e74 286c   ...     print(l
-0001ad80: 616e 6775 6167 6529 0a20 2020 2020 2020  anguage).       
-0001ad90: 2020 2020 202e 2e2e 0a20 2020 2020 2020       ....       
-0001ada0: 2020 2020 2063 6174 616c 616e 0a20 2020       catalan.   
-0001adb0: 2020 2020 2020 2020 2064 6575 7473 6368           deutsch
-0001adc0: 0a20 2020 2020 2020 2020 2020 2065 6e67  .            eng
-0001add0: 6c69 7368 0a20 2020 2020 2020 2020 2020  lish.           
-0001ade0: 2065 7370 616e 6f6c 0a20 2020 2020 2020   espanol.       
-0001adf0: 2020 2020 2065 7370 61c3 b16f 6c0a 2020       espa..ol.  
-0001ae00: 2020 2020 2020 2020 2020 6672 616e c3a7            fran..
-0001ae10: 6169 730a 2020 2020 2020 2020 2020 2020  ais.            
-0001ae20: 6974 616c 6961 6e6f 0a20 2020 2020 2020  italiano.       
-0001ae30: 2020 2020 206e 6564 6572 6c61 6e64 730a       nederlands.
-0001ae40: 2020 2020 2020 2020 2020 2020 6e6f 7273              nors
-0001ae50: 6b0a 2020 2020 2020 2020 2020 2020 706f  k.            po
-0001ae60: 7274 7567 7565 730a 2020 2020 2020 2020  rtugues.        
-0001ae70: 2020 2020 7375 6f6d 690a 2020 2020 2020      suomi.      
-0001ae80: 2020 2020 2020 7376 656e 736b 610a 2020        svenska.  
-0001ae90: 2020 2020 2020 2020 2020 766c 6161 6d73            vlaams
-0001aea0: 0a0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-0001aeb0: 2020 2020 2020 7265 7475 726e 2073 6f72        return sor
-0001aec0: 7465 6428 5f6c 7965 6e76 2e6c 616e 6775  ted(_lyenv.langu
-0001aed0: 6167 655f 7069 7463 685f 6e61 6d65 732e  age_pitch_names.
-0001aee0: 6b65 7973 2829 290a 0a20 2020 2040 7374  keys())..    @st
-0001aef0: 6174 6963 6d65 7468 6f64 0a20 2020 2064  aticmethod.    d
-0001af00: 6566 206c 6973 745f 6b6e 6f77 6e5f 6d61  ef list_known_ma
-0001af10: 726b 7570 5f66 756e 6374 696f 6e73 2829  rkup_functions()
-0001af20: 202d 3e20 6c69 7374 5b73 7472 5d3a 0a20   -> list[str]:. 
-0001af30: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0001af40: 2020 204c 6973 7473 2061 6c6c 206d 6172     Lists all mar
-0001af50: 6b75 7020 6675 6e63 7469 6f6e 7320 7265  kup functions re
-0001af60: 636f 676e 697a 6564 2062 7920 4c69 6c79  cognized by Lily
-0001af70: 506f 6e64 2070 6172 7365 722e 0a0a 2020  Pond parser...  
-0001af80: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
-0001af90: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-0001afa0: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
-0001afb0: 6c61 7373 5f20 203d 2061 626a 6164 2e70  lass_  = abjad.p
-0001afc0: 6172 7365 722e 4c69 6c79 506f 6e64 5061  arser.LilyPondPa
-0001afd0: 7273 6572 0a20 2020 2020 2020 2020 2020  rser.           
-0001afe0: 203e 3e3e 2066 6f72 206e 616d 6520 696e   >>> for name in
-0001aff0: 2063 6c61 7373 5f2e 6c69 7374 5f6b 6e6f   class_.list_kno
-0001b000: 776e 5f6d 6172 6b75 705f 6675 6e63 7469  wn_markup_functi
-0001b010: 6f6e 7328 293a 0a20 2020 2020 2020 2020  ons():.         
-0001b020: 2020 202e 2e2e 2020 2020 2070 7269 6e74     ...     print
-0001b030: 286e 616d 6529 0a20 2020 2020 2020 2020  (name).         
-0001b040: 2020 202e 2e2e 0a20 2020 2020 2020 2020     ....         
-0001b050: 2020 2061 6273 2d66 6f6e 7473 697a 650a     abs-fontsize.
-0001b060: 2020 2020 2020 2020 2020 2020 6172 726f              arro
-0001b070: 772d 6865 6164 0a20 2020 2020 2020 2020  w-head.         
-0001b080: 2020 2061 7574 6f2d 666f 6f74 6e6f 7465     auto-footnote
-0001b090: 0a20 2020 2020 2020 2020 2020 2062 6163  .            bac
-0001b0a0: 6b73 6c61 7368 6564 2d64 6967 6974 0a20  kslashed-digit. 
-0001b0b0: 2020 2020 2020 2020 2020 2062 6561 6d0a             beam.
-0001b0c0: 2020 2020 2020 2020 2020 2020 626f 6c64              bold
-0001b0d0: 0a20 2020 2020 2020 2020 2020 2062 6f78  .            box
-0001b0e0: 0a20 2020 2020 2020 2020 2020 2062 7261  .            bra
-0001b0f0: 636b 6574 0a20 2020 2020 2020 2020 2020  cket.           
-0001b100: 2063 6170 730a 2020 2020 2020 2020 2020   caps.          
-0001b110: 2020 6365 6e74 6572 2d61 6c69 676e 0a20    center-align. 
-0001b120: 2020 2020 2020 2020 2020 2063 656e 7465             cente
-0001b130: 722d 636f 6c75 6d6e 0a20 2020 2020 2020  r-column.       
-0001b140: 2020 2020 2063 6861 720a 2020 2020 2020       char.      
-0001b150: 2020 2020 2020 6369 7263 6c65 0a20 2020        circle.   
-0001b160: 2020 2020 2020 2020 2063 6f6c 756d 6e0a           column.
-0001b170: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
-0001b180: 6d6e 2d6c 696e 6573 0a20 2020 2020 2020  mn-lines.       
-0001b190: 2020 2020 2063 6f6d 6269 6e65 0a20 2020       combine.   
-0001b1a0: 2020 2020 2020 2020 2063 6f6d 706f 756e           compoun
-0001b1b0: 642d 6d65 7465 720a 2020 2020 2020 2020  d-meter.        
-0001b1c0: 2020 2020 636f 6e63 6174 0a20 2020 2020      concat.     
-0001b1d0: 2020 2020 2020 2063 7573 746f 6d54 6162         customTab
-0001b1e0: 436c 6566 0a20 2020 2020 2020 2020 2020  Clef.           
-0001b1f0: 2064 6972 2d63 6f6c 756d 6e0a 2020 2020   dir-column.    
-0001b200: 2020 2020 2020 2020 646f 7562 6c65 666c          doublefl
-0001b210: 6174 0a20 2020 2020 2020 2020 2020 2064  at.            d
-0001b220: 6f75 626c 6573 6861 7270 0a20 2020 2020  oublesharp.     
-0001b230: 2020 2020 2020 2064 7261 772d 6369 7263         draw-circ
-0001b240: 6c65 0a20 2020 2020 2020 2020 2020 2064  le.            d
-0001b250: 7261 772d 6461 7368 6564 2d6c 696e 650a  raw-dashed-line.
-0001b260: 2020 2020 2020 2020 2020 2020 6472 6177              draw
-0001b270: 2d64 6f74 7465 642d 6c69 6e65 0a20 2020  -dotted-line.   
-0001b280: 2020 2020 2020 2020 2064 7261 772d 686c           draw-hl
-0001b290: 696e 650a 2020 2020 2020 2020 2020 2020  ine.            
-0001b2a0: 6472 6177 2d6c 696e 650a 2020 2020 2020  draw-line.      
-0001b2b0: 2020 2020 2020 6479 6e61 6d69 630a 2020        dynamic.  
-0001b2c0: 2020 2020 2020 2020 2020 656c 6c69 7073            ellips
-0001b2d0: 650a 2020 2020 2020 2020 2020 2020 6570  e.            ep
-0001b2e0: 7366 696c 650a 2020 2020 2020 2020 2020  sfile.          
-0001b2f0: 2020 6579 6567 6c61 7373 6573 0a20 2020    eyeglasses.   
-0001b300: 2020 2020 2020 2020 2066 6572 6d61 7461           fermata
-0001b310: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
-0001b320: 6c2d 6c69 6e65 0a20 2020 2020 2020 2020  l-line.         
-0001b330: 2020 2066 696c 6c2d 7769 7468 2d70 6174     fill-with-pat
-0001b340: 7465 726e 0a20 2020 2020 2020 2020 2020  tern.           
-0001b350: 2066 696c 6c65 642d 626f 780a 2020 2020   filled-box.    
-0001b360: 2020 2020 2020 2020 6669 6e67 6572 0a20          finger. 
-0001b370: 2020 2020 2020 2020 2020 2066 6972 7374             first
-0001b380: 2d76 6973 6962 6c65 0a20 2020 2020 2020  -visible.       
-0001b390: 2020 2020 2066 6c61 740a 2020 2020 2020       flat.      
-0001b3a0: 2020 2020 2020 666f 6e74 4361 7073 0a20        fontCaps. 
-0001b3b0: 2020 2020 2020 2020 2020 2066 6f6e 7473             fonts
-0001b3c0: 697a 650a 2020 2020 2020 2020 2020 2020  ize.            
-0001b3d0: 666f 6f74 6e6f 7465 0a20 2020 2020 2020  footnote.       
-0001b3e0: 2020 2020 2066 7261 6374 696f 6e0a 2020       fraction.  
-0001b3f0: 2020 2020 2020 2020 2020 6672 6574 2d64            fret-d
-0001b400: 6961 6772 616d 0a20 2020 2020 2020 2020  iagram.         
-0001b410: 2020 2066 7265 742d 6469 6167 7261 6d2d     fret-diagram-
-0001b420: 7465 7273 650a 2020 2020 2020 2020 2020  terse.          
-0001b430: 2020 6672 6574 2d64 6961 6772 616d 2d76    fret-diagram-v
-0001b440: 6572 626f 7365 0a20 2020 2020 2020 2020  erbose.         
-0001b450: 2020 2066 726f 6d70 726f 7065 7274 790a     fromproperty.
-0001b460: 2020 2020 2020 2020 2020 2020 6765 6e65              gene
-0001b470: 7261 6c2d 616c 6967 6e0a 2020 2020 2020  ral-align.      
-0001b480: 2020 2020 2020 6861 6c69 676e 0a20 2020        halign.   
-0001b490: 2020 2020 2020 2020 2068 6172 702d 7065           harp-pe
-0001b4a0: 6461 6c0a 2020 2020 2020 2020 2020 2020  dal.            
-0001b4b0: 6862 7261 636b 6574 0a20 2020 2020 2020  hbracket.       
-0001b4c0: 2020 2020 2068 6365 6e74 6572 2d69 6e0a       hcenter-in.
-0001b4d0: 2020 2020 2020 2020 2020 2020 6873 7061              hspa
-0001b4e0: 6365 0a20 2020 2020 2020 2020 2020 2068  ce.            h
-0001b4f0: 7567 650a 2020 2020 2020 2020 2020 2020  uge.            
-0001b500: 6974 616c 6963 0a20 2020 2020 2020 2020  italic.         
-0001b510: 2020 206a 7573 7469 6669 6564 2d6c 696e     justified-lin
-0001b520: 6573 0a20 2020 2020 2020 2020 2020 206a  es.            j
-0001b530: 7573 7469 6679 0a20 2020 2020 2020 2020  ustify.         
-0001b540: 2020 206a 7573 7469 6679 2d66 6965 6c64     justify-field
-0001b550: 0a20 2020 2020 2020 2020 2020 206a 7573  .            jus
-0001b560: 7469 6679 2d6c 696e 650a 2020 2020 2020  tify-line.      
-0001b570: 2020 2020 2020 6a75 7374 6966 792d 7374        justify-st
-0001b580: 7269 6e67 0a20 2020 2020 2020 2020 2020  ring.           
-0001b590: 206c 6172 6765 0a20 2020 2020 2020 2020   large.         
-0001b5a0: 2020 206c 6172 6765 720a 2020 2020 2020     larger.      
-0001b5b0: 2020 2020 2020 6c65 6674 2d61 6c69 676e        left-align
-0001b5c0: 0a20 2020 2020 2020 2020 2020 206c 6566  .            lef
-0001b5d0: 742d 6272 6163 650a 2020 2020 2020 2020  t-brace.        
-0001b5e0: 2020 2020 6c65 6674 2d63 6f6c 756d 6e0a      left-column.
-0001b5f0: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
-0001b600: 0a20 2020 2020 2020 2020 2020 206c 6f6f  .            loo
-0001b610: 6b75 700a 2020 2020 2020 2020 2020 2020  kup.            
-0001b620: 6c6f 7765 720a 2020 2020 2020 2020 2020  lower.          
-0001b630: 2020 6d61 676e 6966 790a 2020 2020 2020    magnify.      
-0001b640: 2020 2020 2020 6d61 702d 6d61 726b 7570        map-markup
-0001b650: 2d63 6f6d 6d61 6e64 730a 2020 2020 2020  -commands.      
-0001b660: 2020 2020 2020 6d61 726b 616c 7068 6162        markalphab
-0001b670: 6574 0a20 2020 2020 2020 2020 2020 206d  et.            m
-0001b680: 6172 6b6c 6574 7465 720a 2020 2020 2020  arkletter.      
-0001b690: 2020 2020 2020 6d65 6469 756d 0a20 2020        medium.   
-0001b6a0: 2020 2020 2020 2020 206d 7573 6963 676c           musicgl
-0001b6b0: 7970 680a 2020 2020 2020 2020 2020 2020  yph.            
-0001b6c0: 6e61 7475 7261 6c0a 2020 2020 2020 2020  natural.        
-0001b6d0: 2020 2020 6e6f 726d 616c 2d73 697a 652d      normal-size-
-0001b6e0: 7375 620a 2020 2020 2020 2020 2020 2020  sub.            
-0001b6f0: 6e6f 726d 616c 2d73 697a 652d 7375 7065  normal-size-supe
-0001b700: 720a 2020 2020 2020 2020 2020 2020 6e6f  r.            no
-0001b710: 726d 616c 2d74 6578 740a 2020 2020 2020  rmal-text.      
-0001b720: 2020 2020 2020 6e6f 726d 616c 7369 7a65        normalsize
-0001b730: 0a20 2020 2020 2020 2020 2020 206e 6f74  .            not
-0001b740: 650a 2020 2020 2020 2020 2020 2020 6e6f  e.            no
-0001b750: 7465 2d62 792d 6e75 6d62 6572 0a20 2020  te-by-number.   
-0001b760: 2020 2020 2020 2020 206e 756c 6c0a 2020           null.  
-0001b770: 2020 2020 2020 2020 2020 6e75 6d62 6572            number
-0001b780: 0a20 2020 2020 2020 2020 2020 206f 6e2d  .            on-
-0001b790: 7468 652d 666c 790a 2020 2020 2020 2020  the-fly.        
-0001b7a0: 2020 2020 6f76 616c 0a20 2020 2020 2020      oval.       
-0001b7b0: 2020 2020 206f 7665 7272 6964 650a 2020       override.  
-0001b7c0: 2020 2020 2020 2020 2020 6f76 6572 7269            overri
-0001b7d0: 6465 2d6c 696e 6573 0a20 2020 2020 2020  de-lines.       
-0001b7e0: 2020 2020 2070 6164 0a20 2020 2020 2020       pad.       
-0001b7f0: 2020 2020 2070 6164 2d61 726f 756e 640a       pad-around.
-0001b800: 2020 2020 2020 2020 2020 2020 7061 642d              pad-
-0001b810: 746f 2d62 6f78 0a20 2020 2020 2020 2020  to-box.         
-0001b820: 2020 2070 6164 2d78 0a20 2020 2020 2020     pad-x.       
-0001b830: 2020 2020 2070 6167 652d 6c69 6e6b 0a20       page-link. 
-0001b840: 2020 2020 2020 2020 2020 2070 6167 652d             page-
-0001b850: 7265 660a 2020 2020 2020 2020 2020 2020  ref.            
-0001b860: 7061 7265 6e74 6865 7369 7a65 0a20 2020  parenthesize.   
-0001b870: 2020 2020 2020 2020 2070 6174 680a 2020           path.  
-0001b880: 2020 2020 2020 2020 2020 7061 7474 6572            patter
-0001b890: 6e0a 2020 2020 2020 2020 2020 2020 706f  n.            po
-0001b8a0: 7374 7363 7269 7074 0a20 2020 2020 2020  stscript.       
-0001b8b0: 2020 2020 2070 726f 7065 7274 792d 7265       property-re
-0001b8c0: 6375 7273 6976 650a 2020 2020 2020 2020  cursive.        
-0001b8d0: 2020 2020 7075 742d 6164 6a61 6365 6e74      put-adjacent
-0001b8e0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0001b8f0: 7365 0a20 2020 2020 2020 2020 2020 2072  se.            r
-0001b900: 6570 6c61 6365 0a20 2020 2020 2020 2020  eplace.         
-0001b910: 2020 2072 6573 740a 2020 2020 2020 2020     rest.        
-0001b920: 2020 2020 7265 7374 2d62 792d 6e75 6d62      rest-by-numb
-0001b930: 6572 0a20 2020 2020 2020 2020 2020 2072  er.            r
-0001b940: 6967 6874 2d61 6c69 676e 0a20 2020 2020  ight-align.     
-0001b950: 2020 2020 2020 2072 6967 6874 2d62 7261         right-bra
-0001b960: 6365 0a20 2020 2020 2020 2020 2020 2072  ce.            r
-0001b970: 6967 6874 2d63 6f6c 756d 6e0a 2020 2020  ight-column.    
-0001b980: 2020 2020 2020 2020 726f 6d61 6e0a 2020          roman.  
-0001b990: 2020 2020 2020 2020 2020 726f 7461 7465            rotate
-0001b9a0: 0a20 2020 2020 2020 2020 2020 2072 6f75  .            rou
-0001b9b0: 6e64 6564 2d62 6f78 0a20 2020 2020 2020  nded-box.       
-0001b9c0: 2020 2020 2073 616e 730a 2020 2020 2020       sans.      
-0001b9d0: 2020 2020 2020 7363 616c 650a 2020 2020        scale.    
-0001b9e0: 2020 2020 2020 2020 7363 6f72 650a 2020          score.  
-0001b9f0: 2020 2020 2020 2020 2020 7363 6f72 652d            score-
-0001ba00: 6c69 6e65 730a 2020 2020 2020 2020 2020  lines.          
-0001ba10: 2020 7365 6d69 666c 6174 0a20 2020 2020    semiflat.     
-0001ba20: 2020 2020 2020 2073 656d 6973 6861 7270         semisharp
-0001ba30: 0a20 2020 2020 2020 2020 2020 2073 6573  .            ses
-0001ba40: 7175 6966 6c61 740a 2020 2020 2020 2020  quiflat.        
-0001ba50: 2020 2020 7365 7371 7569 7368 6172 700a      sesquisharp.
-0001ba60: 2020 2020 2020 2020 2020 2020 7368 6172              shar
-0001ba70: 700a 2020 2020 2020 2020 2020 2020 7369  p.            si
-0001ba80: 6d70 6c65 0a20 2020 2020 2020 2020 2020  mple.           
-0001ba90: 2073 6c61 7368 6564 2d64 6967 6974 0a20   slashed-digit. 
-0001baa0: 2020 2020 2020 2020 2020 2073 6d61 6c6c             small
-0001bab0: 0a20 2020 2020 2020 2020 2020 2073 6d61  .            sma
-0001bac0: 6c6c 4361 7073 0a20 2020 2020 2020 2020  llCaps.         
-0001bad0: 2020 2073 6d61 6c6c 6572 0a20 2020 2020     smaller.     
-0001bae0: 2020 2020 2020 2073 7465 6e63 696c 0a20         stencil. 
-0001baf0: 2020 2020 2020 2020 2020 2073 7472 7574             strut
-0001bb00: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
-0001bb10: 0a20 2020 2020 2020 2020 2020 2073 7570  .            sup
-0001bb20: 6572 0a20 2020 2020 2020 2020 2020 2074  er.            t
-0001bb30: 6162 6c65 2d6f 662d 636f 6e74 656e 7473  able-of-contents
-0001bb40: 0a20 2020 2020 2020 2020 2020 2074 6565  .            tee
-0001bb50: 6e79 0a20 2020 2020 2020 2020 2020 2074  ny.            t
-0001bb60: 6578 740a 2020 2020 2020 2020 2020 2020  ext.            
-0001bb70: 7469 6564 2d6c 7972 6963 0a20 2020 2020  tied-lyric.     
-0001bb80: 2020 2020 2020 2074 696e 790a 2020 2020         tiny.    
-0001bb90: 2020 2020 2020 2020 7472 616e 736c 6174          translat
-0001bba0: 650a 2020 2020 2020 2020 2020 2020 7472  e.            tr
-0001bbb0: 616e 736c 6174 652d 7363 616c 6564 0a20  anslate-scaled. 
-0001bbc0: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
-0001bbd0: 7061 7265 6e74 0a20 2020 2020 2020 2020  parent.         
-0001bbe0: 2020 2074 7269 616e 676c 650a 2020 2020     triangle.    
-0001bbf0: 2020 2020 2020 2020 7479 7065 7772 6974          typewrit
-0001bc00: 6572 0a20 2020 2020 2020 2020 2020 2075  er.            u
-0001bc10: 6e64 6572 6c69 6e65 0a20 2020 2020 2020  nderline.       
-0001bc20: 2020 2020 2075 7072 6967 6874 0a20 2020       upright.   
-0001bc30: 2020 2020 2020 2020 2076 6365 6e74 6572           vcenter
-0001bc40: 0a20 2020 2020 2020 2020 2020 2076 6572  .            ver
-0001bc50: 6261 7469 6d2d 6669 6c65 0a20 2020 2020  batim-file.     
-0001bc60: 2020 2020 2020 2076 7370 6163 650a 2020         vspace.  
-0001bc70: 2020 2020 2020 2020 2020 7768 6974 656f            whiteo
-0001bc80: 7574 0a20 2020 2020 2020 2020 2020 2077  ut.            w
-0001bc90: 6869 7465 6f75 742d 626f 780a 2020 2020  hiteout-box.    
-0001bca0: 2020 2020 2020 2020 7769 7468 2d63 6f6c          with-col
-0001bcb0: 6f72 0a20 2020 2020 2020 2020 2020 2077  or.            w
-0001bcc0: 6974 682d 6469 6d65 6e73 696f 6e73 0a20  ith-dimensions. 
-0001bcd0: 2020 2020 2020 2020 2020 2077 6974 682d             with-
-0001bce0: 6c69 6e6b 0a20 2020 2020 2020 2020 2020  link.           
-0001bcf0: 2077 6974 682d 7572 6c0a 2020 2020 2020   with-url.      
-0001bd00: 2020 2020 2020 776f 6f64 7769 6e64 2d64        woodwind-d
-0001bd10: 6961 6772 616d 0a20 2020 2020 2020 2020  iagram.         
-0001bd20: 2020 2077 6f72 6477 7261 700a 2020 2020     wordwrap.    
-0001bd30: 2020 2020 2020 2020 776f 7264 7772 6170          wordwrap
-0001bd40: 2d66 6965 6c64 0a20 2020 2020 2020 2020  -field.         
-0001bd50: 2020 2077 6f72 6477 7261 702d 696e 7465     wordwrap-inte
-0001bd60: 726e 616c 0a20 2020 2020 2020 2020 2020  rnal.           
-0001bd70: 2077 6f72 6477 7261 702d 6c69 6e65 730a   wordwrap-lines.
-0001bd80: 2020 2020 2020 2020 2020 2020 776f 7264              word
-0001bd90: 7772 6170 2d73 7472 696e 670a 2020 2020  wrap-string.    
-0001bda0: 2020 2020 2020 2020 776f 7264 7772 6170          wordwrap
-0001bdb0: 2d73 7472 696e 672d 696e 7465 726e 616c  -string-internal
-0001bdc0: 0a0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-0001bdd0: 2020 2020 2020 7265 7475 726e 2073 6f72        return sor
-0001bde0: 7465 6428 0a20 2020 2020 2020 2020 2020  ted(.           
-0001bdf0: 206c 6973 7428 5f6c 7965 6e76 2e6d 6172   list(_lyenv.mar
-0001be00: 6b75 705f 6675 6e63 7469 6f6e 732e 6b65  kup_functions.ke
-0001be10: 7973 2829 290a 2020 2020 2020 2020 2020  ys()).          
-0001be20: 2020 2b20 6c69 7374 285f 6c79 656e 762e    + list(_lyenv.
-0001be30: 6d61 726b 7570 5f6c 6973 745f 6675 6e63  markup_list_func
-0001be40: 7469 6f6e 732e 6b65 7973 2829 290a 2020  tions.keys()).  
-0001be50: 2020 2020 2020 290a 0a20 2020 2040 7374        )..    @st
-0001be60: 6174 6963 6d65 7468 6f64 0a20 2020 2064  aticmethod.    d
-0001be70: 6566 206c 6973 745f 6b6e 6f77 6e5f 6d75  ef list_known_mu
-0001be80: 7369 635f 6675 6e63 7469 6f6e 7328 2920  sic_functions() 
-0001be90: 2d3e 206c 6973 745b 7374 725d 3a0a 2020  -> list[str]:.  
-0001bea0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001beb0: 2020 4c69 7374 7320 616c 6c20 6d75 7369    Lists all musi
-0001bec0: 6320 6675 6e63 7469 6f6e 7320 7265 636f  c functions reco
-0001bed0: 676e 697a 6564 2062 7920 4c69 6c79 506f  gnized by LilyPo
-0001bee0: 6e64 2070 6172 7365 722e 0a0a 2020 2020  nd parser...    
-0001bef0: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-0001bf00: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-0001bf10: 2020 2020 2020 2020 203e 3e3e 2063 6c61           >>> cla
-0001bf20: 7373 5f20 3d20 6162 6a61 642e 7061 7273  ss_ = abjad.pars
-0001bf30: 6572 2e4c 696c 7950 6f6e 6450 6172 7365  er.LilyPondParse
-0001bf40: 720a 2020 2020 2020 2020 2020 2020 3e3e  r.            >>
-0001bf50: 3e20 666f 7220 6e61 6d65 2069 6e20 636c  > for name in cl
-0001bf60: 6173 735f 2e6c 6973 745f 6b6e 6f77 6e5f  ass_.list_known_
-0001bf70: 6d75 7369 635f 6675 6e63 7469 6f6e 7328  music_functions(
-0001bf80: 293a 0a20 2020 2020 2020 2020 2020 202e  ):.            .
-0001bf90: 2e2e 2020 2020 2070 7269 6e74 286e 616d  ..     print(nam
-0001bfa0: 6529 0a20 2020 2020 2020 2020 2020 202e  e).            .
-0001bfb0: 2e2e 0a20 2020 2020 2020 2020 2020 2061  ...            a
-0001bfc0: 6363 6961 6363 6174 7572 610a 2020 2020  cciaccatura.    
-0001bfd0: 2020 2020 2020 2020 6170 706f 6767 6961          appoggia
-0001bfe0: 7475 7261 0a20 2020 2020 2020 2020 2020  tura.           
-0001bff0: 2062 6172 0a20 2020 2020 2020 2020 2020   bar.           
-0001c000: 2062 7265 6174 6865 0a20 2020 2020 2020   breathe.       
-0001c010: 2020 2020 2063 6c65 660a 2020 2020 2020       clef.      
-0001c020: 2020 2020 2020 6772 6163 650a 2020 2020        grace.    
-0001c030: 2020 2020 2020 2020 6b65 790a 2020 2020          key.    
-0001c040: 2020 2020 2020 2020 6c61 6e67 7561 6765          language
-0001c050: 0a20 2020 2020 2020 2020 2020 206d 616b  .            mak
-0001c060: 6543 6c75 7374 6572 730a 2020 2020 2020  eClusters.      
-0001c070: 2020 2020 2020 6d61 726b 0a20 2020 2020        mark.     
-0001c080: 2020 2020 2020 2072 656c 6174 6976 650a         relative.
-0001c090: 2020 2020 2020 2020 2020 2020 736b 6970              skip
-0001c0a0: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
-0001c0b0: 650a 2020 2020 2020 2020 2020 2020 7469  e.            ti
-0001c0c0: 6d65 730a 2020 2020 2020 2020 2020 2020  mes.            
-0001c0d0: 7472 616e 7370 6f73 650a 2020 2020 2020  transpose.      
-0001c0e0: 2020 2020 2020 7475 706c 6574 0a0a 2020        tuplet..  
-0001c0f0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001c100: 2020 6d75 7369 635f 6675 6e63 7469 6f6e    music_function
-0001c110: 7320 3d20 5b5d 0a20 2020 2020 2020 2066  s = [].        f
-0001c120: 6f72 206e 616d 6520 696e 205f 6c79 656e  or name in _lyen
-0001c130: 762e 6375 7272 656e 745f 6d6f 6475 6c65  v.current_module
-0001c140: 3a0a 2020 2020 2020 2020 2020 2020 6469  :.            di
-0001c150: 6374 696f 6e61 7279 203d 205f 6c79 656e  ctionary = _lyen
-0001c160: 762e 6375 7272 656e 745f 6d6f 6475 6c65  v.current_module
-0001c170: 5b6e 616d 655d 0a20 2020 2020 2020 2020  [name].         
-0001c180: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-0001c190: 616e 6365 2864 6963 7469 6f6e 6172 792c  ance(dictionary,
-0001c1a0: 2064 6963 7429 3a0a 2020 2020 2020 2020   dict):.        
-0001c1b0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-0001c1c0: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
-0001c1d0: 6572 7420 6973 696e 7374 616e 6365 2864  ert isinstance(d
-0001c1e0: 6963 7469 6f6e 6172 792c 2064 6963 7429  ictionary, dict)
-0001c1f0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001c200: 2274 7970 6522 206e 6f74 2069 6e20 6469  "type" not in di
-0001c210: 6374 696f 6e61 7279 3a0a 2020 2020 2020  ctionary:.      
-0001c220: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-0001c230: 7565 0a20 2020 2020 2020 2020 2020 2069  ue.            i
-0001c240: 6620 6e6f 7420 6469 6374 696f 6e61 7279  f not dictionary
-0001c250: 5b22 7479 7065 225d 203d 3d20 226c 793a  ["type"] == "ly:
-0001c260: 6d75 7369 632d 6675 6e63 7469 6f6e 3f22  music-function?"
-0001c270: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001c280: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
-0001c290: 2020 2020 2020 2069 6620 6e6f 7420 6861         if not ha
-0001c2a0: 7361 7474 7228 4775 696c 6550 726f 7879  sattr(GuileProxy
-0001c2b0: 2c20 6e61 6d65 293a 0a20 2020 2020 2020  , name):.       
-0001c2c0: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-0001c2d0: 650a 2020 2020 2020 2020 2020 2020 6d75  e.            mu
-0001c2e0: 7369 635f 6675 6e63 7469 6f6e 732e 6170  sic_functions.ap
-0001c2f0: 7065 6e64 286e 616d 6529 0a20 2020 2020  pend(name).     
-0001c300: 2020 2072 6574 7572 6e20 736f 7274 6564     return sorted
-0001c310: 286d 7573 6963 5f66 756e 6374 696f 6e73  (music_functions
-0001c320: 290a 0a20 2020 2040 636c 6173 736d 6574  )..    @classmet
-0001c330: 686f 640a 2020 2020 6465 6620 7265 6769  hod.    def regi
-0001c340: 7374 6572 5f6d 6172 6b75 705f 6675 6e63  ster_markup_func
-0001c350: 7469 6f6e 2863 6c61 7373 5f2c 206e 616d  tion(class_, nam
-0001c360: 652c 2073 6967 6e61 7475 7265 2c20 756e  e, signature, un
-0001c370: 646f 3d4e 6f6e 6529 202d 3e20 4e6f 6e65  do=None) -> None
-0001c380: 3a0a 2020 2020 2020 2020 7222 2222 0a20  :.        r""". 
-0001c390: 2020 2020 2020 2052 6567 6973 7465 7273         Registers
-0001c3a0: 2061 2063 7573 746f 6d20 6d61 726b 7570   a custom markup
-0001c3b0: 2066 756e 6374 696f 6e20 676c 6f62 616c   function global
-0001c3c0: 6c79 2077 6974 6820 4c69 6c79 506f 6e64  ly with LilyPond
-0001c3d0: 5061 7273 6572 2e0a 0a20 2020 2020 2020  Parser...       
-0001c3e0: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
-0001c3f0: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
-0001c400: 2020 2020 2020 3e3e 3e20 6e61 6d65 203d        >>> name =
-0001c410: 2027 6d79 2d63 7573 746f 6d2d 6d61 726b   'my-custom-mark
-0001c420: 7570 2d66 756e 6374 696f 6e27 0a20 2020  up-function'.   
-0001c430: 2020 2020 2020 2020 203e 3e3e 2073 6967           >>> sig
-0001c440: 6e61 7475 7265 203d 205b 276d 6172 6b75  nature = ['marku
-0001c450: 703f 275d 0a20 2020 2020 2020 2020 2020  p?'].           
-0001c460: 203e 3e3e 2061 626a 6164 2e70 6172 7365   >>> abjad.parse
-0001c470: 722e 4c69 6c79 506f 6e64 5061 7273 6572  r.LilyPondParser
-0001c480: 2e72 6567 6973 7465 725f 6d61 726b 7570  .register_markup
-0001c490: 5f66 756e 6374 696f 6e28 6e61 6d65 2c20  _function(name, 
-0001c4a0: 7369 676e 6174 7572 6529 0a0a 2020 2020  signature)..    
-0001c4b0: 2020 2020 2020 2020 3e3e 3e20 7061 7273          >>> pars
-0001c4c0: 6572 203d 2061 626a 6164 2e70 6172 7365  er = abjad.parse
-0001c4d0: 722e 4c69 6c79 506f 6e64 5061 7273 6572  r.LilyPondParser
-0001c4e0: 2829 0a20 2020 2020 2020 2020 2020 203e  ().            >
-0001c4f0: 3e3e 2073 7472 696e 6720 3d20 7222 5c6d  >> string = r"\m
-0001c500: 6172 6b75 7020 7b20 5c6d 792d 6375 7374  arkup { \my-cust
-0001c510: 6f6d 2d6d 6172 6b75 702d 6675 6e63 7469  om-markup-functi
-0001c520: 6f6e 207b 2066 6f6f 2062 6172 2062 617a  on { foo bar baz
-0001c530: 207d 207d 220a 2020 2020 2020 2020 2020   } }".          
-0001c540: 2020 3e3e 3e20 6d61 726b 7570 203d 2070    >>> markup = p
-0001c550: 6172 7365 7228 7374 7269 6e67 290a 2020  arser(string).  
-0001c560: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-0001c570: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-0001c580: 7970 6f6e 6428 6d61 726b 7570 290a 2020  ypond(markup).  
-0001c590: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-0001c5a0: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
-0001c5b0: 2020 2020 2020 2020 5c6d 6172 6b75 7020          \markup 
-0001c5c0: 7b20 5c6d 792d 6375 7374 6f6d 2d6d 6172  { \my-custom-mar
-0001c5d0: 6b75 702d 6675 6e63 7469 6f6e 0a20 2020  kup-function.   
-0001c5e0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0001c5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c600: 2020 2066 6f6f 0a20 2020 2020 2020 2020     foo.         
-0001c610: 2020 2020 2020 2020 2020 2062 6172 0a20             bar. 
-0001c620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c630: 2020 2062 617a 0a20 2020 2020 2020 2020     baz.         
-0001c640: 2020 2020 2020 207d 207d 0a0a 2020 2020         } }..    
-0001c650: 2020 2020 6060 7369 676e 6174 7572 6560      ``signature`
-0001c660: 6020 7368 6f75 6c64 2062 6520 6120 7365  ` should be a se
-0001c670: 7175 656e 6365 206f 6620 7a65 726f 206f  quence of zero o
-0001c680: 7220 6d6f 7265 2074 7970 652d 7072 6564  r more type-pred
-0001c690: 6963 6174 6520 6e61 6d65 732c 2061 730a  icate names, as.
-0001c6a0: 2020 2020 2020 2020 756e 6465 7273 746f          understo
-0001c6b0: 6f64 2062 7920 4c69 6c79 506f 6e64 2e20  od by LilyPond. 
-0001c6c0: 2043 6f6e 7375 6c74 204c 696c 7950 6f6e   Consult LilyPon
-0001c6d0: 6427 7320 646f 6375 6d65 6e74 6174 696f  d's documentatio
-0001c6e0: 6e20 666f 7220 6120 636f 6d70 6c65 7465  n for a complete
-0001c6f0: 206c 6973 7420 6f66 0a20 2020 2020 2020   list of.       
-0001c700: 2061 6c6c 2075 6e64 6572 7374 6f6f 6420   all understood 
-0001c710: 7479 7065 2d70 7265 6469 6361 7465 732e  type-predicates.
-0001c720: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
-0001c730: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-0001c740: 650a 0a20 2020 2020 2020 2020 2020 2053  e..            S
-0001c750: 6574 2060 6075 6e64 6f3d 5472 7565 6060  et ``undo=True``
-0001c760: 2074 6f20 756e 7265 6769 7374 6572 2e0a   to unregister..
-0001c770: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001c780: 206e 616d 6520 3d20 276d 792d 6375 7374   name = 'my-cust
-0001c790: 6f6d 2d6d 6172 6b75 702d 6675 6e63 7469  om-markup-functi
-0001c7a0: 6f6e 270a 2020 2020 2020 2020 2020 2020  on'.            
-0001c7b0: 3e3e 3e20 7369 676e 6174 7572 6520 3d20  >>> signature = 
-0001c7c0: 5b27 6d61 726b 7570 3f27 5d0a 2020 2020  ['markup?'].    
-0001c7d0: 2020 2020 2020 2020 3e3e 3e20 636c 6173          >>> clas
-0001c7e0: 735f 203d 2061 626a 6164 2e70 6172 7365  s_ = abjad.parse
-0001c7f0: 722e 4c69 6c79 506f 6e64 5061 7273 6572  r.LilyPondParser
-0001c800: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001c810: 2063 6c61 7373 5f2e 7265 6769 7374 6572   class_.register
-0001c820: 5f6d 6172 6b75 705f 6675 6e63 7469 6f6e  _markup_function
-0001c830: 286e 616d 652c 2073 6967 6e61 7475 7265  (name, signature
-0001c840: 2c20 756e 646f 3d54 7275 6529 0a0a 2020  , undo=True)..  
-0001c850: 2020 2020 2020 2020 2020 4e4f 5445 2e20            NOTE. 
-0001c860: 4164 6465 6420 746f 2061 6c6c 6f77 2064  Added to allow d
-0001c870: 6f63 7465 7374 7320 746f 2070 6173 7320  octests to pass 
-0001c880: 6f6e 2054 7261 7669 7343 492e 0a0a 2020  on TravisCI...  
-0001c890: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001c8a0: 2020 6966 2075 6e64 6f20 6973 2054 7275    if undo is Tru
-0001c8b0: 653a 0a20 2020 2020 2020 2020 2020 2064  e:.            d
-0001c8c0: 656c 205f 6c79 656e 762e 6d61 726b 7570  el _lyenv.markup
-0001c8d0: 5f66 756e 6374 696f 6e73 5b6e 616d 655d  _functions[name]
-0001c8e0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0001c8f0: 7572 6e0a 2020 2020 2020 2020 6173 7365  urn.        asse
-0001c900: 7274 2069 7369 6e73 7461 6e63 6528 6e61  rt isinstance(na
-0001c910: 6d65 2c20 7374 7229 0a20 2020 2020 2020  me, str).       
-0001c920: 2061 7373 6572 7420 616c 6c28 6e6f 7420   assert all(not 
-0001c930: 782e 6973 7370 6163 6528 2920 666f 7220  x.isspace() for 
-0001c940: 7820 696e 206e 616d 6529 0a20 2020 2020  x in name).     
-0001c950: 2020 2061 7373 6572 7420 6973 696e 7374     assert isinst
-0001c960: 616e 6365 2873 6967 6e61 7475 7265 2c20  ance(signature, 
-0001c970: 636f 6c6c 6563 7469 6f6e 732e 6162 632e  collections.abc.
-0001c980: 4974 6572 6162 6c65 290a 2020 2020 2020  Iterable).      
-0001c990: 2020 666f 7220 7072 6564 6963 6174 6520    for predicate 
-0001c9a0: 696e 2073 6967 6e61 7475 7265 3a0a 2020  in signature:.  
-0001c9b0: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-0001c9c0: 2069 7369 6e73 7461 6e63 6528 7072 6564   isinstance(pred
-0001c9d0: 6963 6174 652c 2073 7472 290a 2020 2020  icate, str).    
-0001c9e0: 2020 2020 2020 2020 6173 7365 7274 2061          assert a
-0001c9f0: 6c6c 286e 6f74 2078 2e69 7373 7061 6365  ll(not x.isspace
-0001ca00: 2829 2066 6f72 2078 2069 6e20 7072 6564  () for x in pred
-0001ca10: 6963 6174 6529 0a20 2020 2020 2020 2020  icate).         
-0001ca20: 2020 2061 7373 6572 7420 7072 6564 6963     assert predic
-0001ca30: 6174 652e 656e 6473 7769 7468 2822 3f22  ate.endswith("?"
-0001ca40: 290a 2020 2020 2020 2020 5f6c 7965 6e76  ).        _lyenv
-0001ca50: 2e6d 6172 6b75 705f 6675 6e63 7469 6f6e  .markup_function
-0001ca60: 735b 6e61 6d65 5d20 3d20 7475 706c 6528  s[name] = tuple(
-0001ca70: 7369 676e 6174 7572 6529 0a0a 2020 2020  signature)..    
-0001ca80: 2323 2320 5055 424c 4943 2050 524f 5045  ### PUBLIC PROPE
-0001ca90: 5254 4945 5320 2323 230a 0a20 2020 2040  RTIES ###..    @
-0001caa0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
-0001cab0: 2061 7661 696c 6162 6c65 5f6c 616e 6775   available_langu
-0001cac0: 6167 6573 2873 656c 6629 202d 3e20 7475  ages(self) -> tu
-0001cad0: 706c 655b 7374 722c 202e 2e2e 5d3a 0a20  ple[str, ...]:. 
-0001cae0: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
-0001caf0: 2020 2020 5475 706c 6520 6f66 2070 6974      Tuple of pit
-0001cb00: 6368 2d6e 616d 6520 6c61 6e67 7561 6765  ch-name language
-0001cb10: 7320 7375 7070 6f72 7465 6420 6279 204c  s supported by L
-0001cb20: 696c 7950 6f6e 6450 6172 7365 722e 0a0a  ilyPondParser...
-0001cb30: 2020 2020 2020 2020 2e2e 2020 636f 6e74          ..  cont
-0001cb40: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-0001cb50: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001cb60: 2070 6172 7365 7220 3d20 6162 6a61 642e   parser = abjad.
-0001cb70: 7061 7273 6572 2e4c 696c 7950 6f6e 6450  parser.LilyPondP
-0001cb80: 6172 7365 7228 290a 2020 2020 2020 2020  arser().        
-0001cb90: 2020 2020 3e3e 3e20 666f 7220 6c61 6e67      >>> for lang
-0001cba0: 7561 6765 2069 6e20 7061 7273 6572 2e61  uage in parser.a
-0001cbb0: 7661 696c 6162 6c65 5f6c 616e 6775 6167  vailable_languag
-0001cbc0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-0001cbd0: 2e2e 2e20 2020 2020 7072 696e 7428 6c61  ...     print(la
-0001cbe0: 6e67 7561 6765 290a 2020 2020 2020 2020  nguage).        
-0001cbf0: 2020 2020 2e2e 2e0a 2020 2020 2020 2020      ....        
-0001cc00: 2020 2020 6361 7461 6c61 6e0a 2020 2020      catalan.    
-0001cc10: 2020 2020 2020 2020 6465 7574 7363 680a          deutsch.
-0001cc20: 2020 2020 2020 2020 2020 2020 656e 676c              engl
-0001cc30: 6973 680a 2020 2020 2020 2020 2020 2020  ish.            
-0001cc40: 6573 7061 6e6f 6c0a 2020 2020 2020 2020  espanol.        
-0001cc50: 2020 2020 6573 7061 c3b1 6f6c 0a20 2020      espa..ol.   
-0001cc60: 2020 2020 2020 2020 2066 7261 6ec3 a761           fran..a
-0001cc70: 6973 0a20 2020 2020 2020 2020 2020 2069  is.            i
-0001cc80: 7461 6c69 616e 6f0a 2020 2020 2020 2020  taliano.        
-0001cc90: 2020 2020 6e65 6465 726c 616e 6473 0a20      nederlands. 
-0001cca0: 2020 2020 2020 2020 2020 206e 6f72 736b             norsk
-0001ccb0: 0a20 2020 2020 2020 2020 2020 2070 6f72  .            por
-0001ccc0: 7475 6775 6573 0a20 2020 2020 2020 2020  tugues.         
-0001ccd0: 2020 2073 756f 6d69 0a20 2020 2020 2020     suomi.       
-0001cce0: 2020 2020 2073 7665 6e73 6b61 0a20 2020       svenska.   
-0001ccf0: 2020 2020 2020 2020 2076 6c61 616d 730a           vlaams.
-0001cd00: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-0001cd10: 2074 7570 6c65 2e0a 2020 2020 2020 2020   tuple..        
-0001cd20: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
-0001cd30: 726e 2074 7570 6c65 2873 6f72 7465 6428  rn tuple(sorted(
-0001cd40: 7365 6c66 2e5f 6c61 6e67 7561 6765 5f70  self._language_p
-0001cd50: 6974 6368 5f6e 616d 6573 2e6b 6579 7328  itch_names.keys(
-0001cd60: 2929 290a 0a20 2020 2040 7072 6f70 6572  )))..    @proper
-0001cd70: 7479 0a20 2020 2064 6566 2064 6566 6175  ty.    def defau
-0001cd80: 6c74 5f6c 616e 6775 6167 6528 7365 6c66  lt_language(self
-0001cd90: 2920 2d3e 2073 7472 3a0a 2020 2020 2020  ) -> str:.      
-0001cda0: 2020 2222 220a 2020 2020 2020 2020 4765    """.        Ge
-0001cdb0: 7473 2061 6e64 2073 6574 7320 6465 6661  ts and sets defa
-0001cdc0: 756c 7420 6c61 6e67 7561 6765 206f 6620  ult language of 
-0001cdd0: 7061 7273 6572 2e0a 0a20 2020 2020 2020  parser...       
-0001cde0: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
-0001cdf0: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
-0001ce00: 2020 2020 2020 3e3e 3e20 7061 7273 6572        >>> parser
-0001ce10: 203d 2061 626a 6164 2e70 6172 7365 722e   = abjad.parser.
-0001ce20: 4c69 6c79 506f 6e64 5061 7273 6572 2829  LilyPondParser()
-0001ce30: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0001ce40: 3e20 7061 7273 6572 2e64 6566 6175 6c74  > parser.default
-0001ce50: 5f6c 616e 6775 6167 650a 2020 2020 2020  _language.      
-0001ce60: 2020 2020 2020 2765 6e67 6c69 7368 270a        'english'.
-0001ce70: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001ce80: 2070 6172 7365 7228 277b 2063 2064 6620   parser('{ c df 
-0001ce90: 6520 6673 207d 2729 0a20 2020 2020 2020  e fs }').       
-0001cea0: 2020 2020 2043 6f6e 7461 696e 6572 2827       Container('
-0001ceb0: 6334 2064 6634 2065 3420 6673 3427 290a  c4 df4 e4 fs4').
-0001cec0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001ced0: 2070 6172 7365 722e 6465 6661 756c 745f   parser.default_
-0001cee0: 6c61 6e67 7561 6765 203d 2027 6e65 6465  language = 'nede
-0001cef0: 726c 616e 6473 270a 2020 2020 2020 2020  rlands'.        
-0001cf00: 2020 2020 3e3e 3e20 7061 7273 6572 2e64      >>> parser.d
-0001cf10: 6566 6175 6c74 5f6c 616e 6775 6167 650a  efault_language.
-0001cf20: 2020 2020 2020 2020 2020 2020 276e 6564              'ned
-0001cf30: 6572 6c61 6e64 7327 0a0a 2020 2020 2020  erlands'..      
-0001cf40: 2020 2020 2020 3e3e 3e20 7061 7273 6572        >>> parser
-0001cf50: 2827 7b20 6320 6465 7320 6520 6669 7320  ('{ c des e fis 
-0001cf60: 7d27 290a 2020 2020 2020 2020 2020 2020  }').            
-0001cf70: 436f 6e74 6169 6e65 7228 2763 3420 6466  Container('c4 df
-0001cf80: 3420 6534 2066 7334 2729 0a0a 2020 2020  4 e4 fs4')..    
-0001cf90: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001cfa0: 7265 7475 726e 2073 656c 662e 5f64 6566  return self._def
-0001cfb0: 6175 6c74 5f6c 616e 6775 6167 650a 0a20  ault_language.. 
-0001cfc0: 2020 2040 6465 6661 756c 745f 6c61 6e67     @default_lang
-0001cfd0: 7561 6765 2e73 6574 7465 720a 2020 2020  uage.setter.    
-0001cfe0: 6465 6620 6465 6661 756c 745f 6c61 6e67  def default_lang
-0001cff0: 7561 6765 2873 656c 662c 2061 7267 756d  uage(self, argum
-0001d000: 656e 7429 3a0a 2020 2020 2020 2020 6173  ent):.        as
-0001d010: 7365 7274 2061 7267 756d 656e 7420 696e  sert argument in
-0001d020: 2073 656c 662e 6176 6169 6c61 626c 655f   self.available_
-0001d030: 6c61 6e67 7561 6765 730a 2020 2020 2020  languages.      
-0001d040: 2020 7365 6c66 2e5f 6465 6661 756c 745f    self._default_
-0001d050: 6c61 6e67 7561 6765 203d 2061 7267 756d  language = argum
-0001d060: 656e 740a 0a20 2020 2040 7072 6f70 6572  ent..    @proper
-0001d070: 7479 0a20 2020 2064 6566 206c 6578 6572  ty.    def lexer
-0001d080: 5f72 756c 6573 5f6f 626a 6563 7428 7365  _rules_object(se
-0001d090: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-0001d0a0: 0a20 2020 2020 2020 204c 6578 6572 2072  .        Lexer r
-0001d0b0: 756c 6573 206f 626a 6563 7420 6f66 204c  ules object of L
-0001d0c0: 696c 7950 6f6e 6420 7061 7273 6572 2e0a  ilyPond parser..
-0001d0d0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001d0e0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0001d0f0: 5f6c 6578 6465 660a 0a20 2020 2040 7072  _lexdef..    @pr
-0001d100: 6f70 6572 7479 0a20 2020 2064 6566 2070  operty.    def p
-0001d110: 6172 7365 725f 7275 6c65 735f 6f62 6a65  arser_rules_obje
-0001d120: 6374 2873 656c 6629 3a0a 2020 2020 2020  ct(self):.      
-0001d130: 2020 2222 220a 2020 2020 2020 2020 5061    """.        Pa
-0001d140: 7273 6572 2072 756c 6573 206f 626a 6563  rser rules objec
-0001d150: 7420 6f66 204c 696c 7950 6f6e 6420 7061  t of LilyPond pa
-0001d160: 7273 6572 2e0a 2020 2020 2020 2020 2222  rser..        ""
-0001d170: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
-0001d180: 2073 656c 662e 5f73 796e 6465 660a 0a0a   self._syndef...
-0001d190: 636c 6173 7320 4c69 6c79 506f 6e64 5379  class LilyPondSy
-0001d1a0: 6e74 6163 7469 6361 6c44 6566 696e 6974  ntacticalDefinit
-0001d1b0: 696f 6e3a 0a20 2020 2022 2222 0a20 2020  ion:.    """.   
-0001d1c0: 2054 6865 2073 796e 7461 6374 6963 616c   The syntactical
-0001d1d0: 2064 6566 696e 6974 696f 6e20 6f66 204c   definition of L
-0001d1e0: 696c 7950 6f6e 6427 7320 7379 6e74 6178  ilyPond's syntax
-0001d1f0: 2e0a 0a20 2020 2045 6666 6563 7469 7665  ...    Effective
-0001d200: 6c79 2065 7175 6976 616c 656e 7420 746f  ly equivalent to
-0001d210: 204c 696c 7950 6f6e 6427 7320 6060 7061   LilyPond's ``pa
-0001d220: 7273 6572 2e79 7960 6020 6669 6c65 2e0a  rser.yy`` file..
-0001d230: 0a20 2020 204e 6f74 2063 6f6d 706f 7365  .    Not compose
-0001d240: 722d 7361 6665 2e0a 0a20 2020 2055 7365  r-safe...    Use
-0001d250: 6420 696e 7465 726e 616c 6c79 2062 7920  d internally by 
-0001d260: 6060 4c69 6c79 506f 6e64 5061 7273 6572  ``LilyPondParser
-0001d270: 6060 2e0a 2020 2020 2222 220a 0a20 2020  ``..    """..   
-0001d280: 2073 7461 7274 203d 2022 7374 6172 745f   start = "start_
-0001d290: 7379 6d62 6f6c 220a 0a20 2020 2070 7265  symbol"..    pre
-0001d2a0: 6365 6465 6e63 6520 3d20 280a 2020 2020  cedence = (.    
-0001d2b0: 2020 2020 2320 2827 6e6f 6e61 7373 6f63      # ('nonassoc
-0001d2c0: 272c 2027 414c 5445 524e 4154 4956 4527  ', 'ALTERNATIVE'
-0001d2d0: 292c 0a20 2020 2020 2020 2028 226e 6f6e  ),.        ("non
-0001d2e0: 6173 736f 6322 2c20 2243 4f4d 504f 5349  assoc", "COMPOSI
-0001d2f0: 5445 2229 2c0a 2020 2020 2020 2020 2320  TE"),.        # 
-0001d300: 2827 6c65 6674 272c 2027 4144 444c 5952  ('left', 'ADDLYR
-0001d310: 4943 5327 292c 0a20 2020 2020 2020 2028  ICS'),.        (
-0001d320: 226e 6f6e 6173 736f 6322 2c20 2244 4546  "nonassoc", "DEF
-0001d330: 4155 4c54 2229 2c0a 2020 2020 2020 2020  AULT"),.        
-0001d340: 2822 6e6f 6e61 7373 6f63 222c 2022 4655  ("nonassoc", "FU
-0001d350: 4e43 5449 4f4e 5f41 5247 4c49 5354 2229  NCTION_ARGLIST")
-0001d360: 2c0a 2020 2020 2020 2020 280a 2020 2020  ,.        (.    
-0001d370: 2020 2020 2020 2020 2272 6967 6874 222c          "right",
-0001d380: 0a20 2020 2020 2020 2020 2020 2022 5049  .            "PI
-0001d390: 5443 485f 4944 454e 5449 4649 4552 222c  TCH_IDENTIFIER",
-0001d3a0: 0a20 2020 2020 2020 2020 2020 2022 4e4f  .            "NO
-0001d3b0: 5445 4e41 4d45 5f50 4954 4348 222c 0a20  TENAME_PITCH",. 
-0001d3c0: 2020 2020 2020 2020 2020 2022 544f 4e49             "TONI
-0001d3d0: 434e 414d 455f 5049 5443 4822 2c0a 2020  CNAME_PITCH",.  
-0001d3e0: 2020 2020 2020 2020 2020 2255 4e53 4947            "UNSIG
-0001d3f0: 4e45 4422 2c0a 2020 2020 2020 2020 2020  NED",.          
-0001d400: 2020 2252 4541 4c22 2c0a 2020 2020 2020    "REAL",.      
-0001d410: 2020 2020 2020 2244 5552 4154 494f 4e5f        "DURATION_
-0001d420: 4944 454e 5449 4649 4552 222c 0a20 2020  IDENTIFIER",.   
-0001d430: 2020 2020 2020 2020 2022 3a22 2c0a 2020           ":",.  
-0001d440: 2020 2020 2020 292c 0a20 2020 2020 2020        ),.       
-0001d450: 2028 226e 6f6e 6173 736f 6322 2c20 224e   ("nonassoc", "N
-0001d460: 554d 4245 525f 4944 454e 5449 4649 4552  UMBER_IDENTIFIER
-0001d470: 222c 2022 2f22 292c 0a20 2020 2020 2020  ", "/"),.       
-0001d480: 2028 226c 6566 7422 2c20 222b 222c 2022   ("left", "+", "
-0001d490: 2d22 292c 0a20 2020 2020 2020 2023 2028  -"),.        # (
-0001d4a0: 276c 6566 7427 2c20 2755 4e41 5259 5f4d  'left', 'UNARY_M
-0001d4b0: 494e 5553 2729 0a20 2020 2029 0a0a 2020  INUS').    )..  
-0001d4c0: 2020 2323 2320 494e 4954 4941 4c49 5a45    ### INITIALIZE
-0001d4d0: 5220 2323 230a 0a20 2020 2064 6566 205f  R ###..    def _
-0001d4e0: 5f69 6e69 745f 5f28 7365 6c66 2c20 636c  _init__(self, cl
-0001d4f0: 6965 6e74 3d4e 6f6e 6529 3a0a 2020 2020  ient=None):.    
-0001d500: 2020 2020 7365 6c66 2e63 6c69 656e 7420      self.client 
-0001d510: 3d20 636c 6965 6e74 0a20 2020 2020 2020  = client.       
-0001d520: 2069 6620 636c 6965 6e74 2069 7320 6e6f   if client is no
-0001d530: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0001d540: 2020 2020 7365 6c66 2e74 6f6b 656e 7320      self.tokens 
-0001d550: 3d20 7365 6c66 2e63 6c69 656e 742e 5f6c  = self.client._l
-0001d560: 6578 6465 662e 746f 6b65 6e73 0a20 2020  exdef.tokens.   
-0001d570: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0001d580: 2020 2020 2020 2073 656c 662e 746f 6b65         self.toke
-0001d590: 6e73 203d 205b 5d0a 0a20 2020 2023 2323  ns = []..    ###
-0001d5a0: 2053 594e 5441 4354 4943 414c 2052 554c   SYNTACTICAL RUL
-0001d5b0: 4553 2028 414c 5048 4142 4554 4943 414c  ES (ALPHABETICAL
-0001d5c0: 2920 2323 230a 0a20 2020 2023 2020 2020  ) ###..    #    
-0001d5d0: 6465 6620 705f 7374 6172 745f 7379 6d62  def p_start_symb
-0001d5e0: 6f6c 5f5f 454d 4245 4444 4544 5f4c 494c  ol__EMBEDDED_LIL
-0001d5f0: 595f 5f65 6d62 6564 6465 645f 6c69 6c79  Y__embedded_lily
-0001d600: 706f 6e64 2873 656c 662c 2070 293a 0a20  pond(self, p):. 
-0001d610: 2020 2023 2020 2020 2020 2020 2773 7461     #        'sta
-0001d620: 7274 5f73 796d 626f 6c20 3a20 454d 4245  rt_symbol : EMBE
-0001d630: 4444 4544 5f4c 494c 5920 656d 6265 6464  DDED_LILY embedd
-0001d640: 6564 5f6c 696c 7970 6f6e 6427 0a20 2020  ed_lilypond'.   
-0001d650: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-0001d660: 2053 796e 7461 784e 6f64 6528 2773 7461   SyntaxNode('sta
-0001d670: 7274 5f73 796d 626f 6c27 2c20 705b 313a  rt_symbol', p[1:
-0001d680: 5d29 0a0a 2020 2020 6465 6620 705f 7374  ])..    def p_st
-0001d690: 6172 745f 7379 6d62 6f6c 5f5f 6c69 6c79  art_symbol__lily
-0001d6a0: 706f 6e64 2873 656c 662c 2070 293a 0a20  pond(self, p):. 
-0001d6b0: 2020 2020 2020 2022 7374 6172 745f 7379         "start_sy
-0001d6c0: 6d62 6f6c 203a 206c 696c 7970 6f6e 6422  mbol : lilypond"
-0001d6d0: 0a20 2020 2020 2020 2069 6620 3120 3c20  .        if 1 < 
-0001d6e0: 6c65 6e28 705b 315d 293a 0a20 2020 2020  len(p[1]):.     
-0001d6f0: 2020 2020 2020 206c 696c 7970 6f6e 645f         lilypond_
-0001d700: 6669 6c65 203d 205f 6c69 6c79 706f 6e64  file = _lilypond
-0001d710: 6669 6c65 2e4c 696c 7950 6f6e 6446 696c  file.LilyPondFil
-0001d720: 6528 290a 2020 2020 2020 2020 2020 2020  e().            
-0001d730: 6c69 6c79 706f 6e64 5f66 696c 652e 6974  lilypond_file.it
-0001d740: 656d 732e 6578 7465 6e64 2870 5b31 5d29  ems.extend(p[1])
-0001d750: 0a20 2020 2020 2020 2020 2020 2070 5b30  .            p[0
-0001d760: 5d20 3d20 6c69 6c79 706f 6e64 5f66 696c  ] = lilypond_fil
-0001d770: 650a 2020 2020 2020 2020 656c 6966 2031  e.        elif 1
-0001d780: 203d 3d20 6c65 6e28 705b 315d 293a 0a20   == len(p[1]):. 
-0001d790: 2020 2020 2020 2020 2020 2070 5b30 5d20             p[0] 
-0001d7a0: 3d20 705b 315d 5b30 5d0a 2020 2020 2020  = p[1][0].      
-0001d7b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0001d7c0: 2020 2020 705b 305d 203d 204e 6f6e 650a      p[0] = None.
-0001d7d0: 0a20 2020 2023 2323 2061 7373 6967 6e6d  .    ### assignm
-0001d7e0: 656e 7420 2323 230a 0a20 2020 2064 6566  ent ###..    def
-0001d7f0: 2070 5f61 7373 6967 6e6d 656e 745f 5f61   p_assignment__a
-0001d800: 7373 6967 6e6d 656e 745f 6964 5f5f 4368  ssignment_id__Ch
-0001d810: 7236 315f 5f69 6465 6e74 6966 6965 725f  r61__identifier_
-0001d820: 696e 6974 2873 656c 662c 2070 293a 0a20  init(self, p):. 
-0001d830: 2020 2020 2020 2022 6173 7369 676e 6d65         "assignme
-0001d840: 6e74 203a 2061 7373 6967 6e6d 656e 745f  nt : assignment_
-0001d850: 6964 2027 3d27 2069 6465 6e74 6966 6965  id '=' identifie
-0001d860: 725f 696e 6974 220a 2020 2020 2020 2020  r_init".        
-0001d870: 705b 305d 203d 205b 705b 315d 2c20 705b  p[0] = [p[1], p[
-0001d880: 335d 5d0a 0a20 2020 2023 2020 2020 6465  3]]..    #    de
-0001d890: 6620 705f 6173 7369 676e 6d65 6e74 5f5f  f p_assignment__
-0001d8a0: 6173 7369 676e 6d65 6e74 5f69 645f 5f70  assignment_id__p
-0001d8b0: 726f 7065 7274 795f 7061 7468 5f5f 4368  roperty_path__Ch
-0001d8c0: 7236 315f 5f69 6465 6e74 6966 6965 725f  r61__identifier_
-0001d8d0: 696e 6974 2873 656c 662c 2070 293a 0a20  init(self, p):. 
-0001d8e0: 2020 2023 2020 2020 2020 2020 2261 7373     #        "ass
-0001d8f0: 6967 6e6d 656e 7420 3a20 6173 7369 676e  ignment : assign
-0001d900: 6d65 6e74 5f69 6420 7072 6f70 6572 7479  ment_id property
-0001d910: 5f70 6174 6820 273d 2720 6964 656e 7469  _path '=' identi
-0001d920: 6669 6572 5f69 6e69 7422 0a20 2020 2023  fier_init".    #
-0001d930: 2020 2020 2020 2020 705b 305d 203d 205b          p[0] = [
-0001d940: 705b 315d 2c20 705b 335d 5d0a 0a20 2020  p[1], p[3]]..   
-0001d950: 2064 6566 2070 5f61 7373 6967 6e6d 656e   def p_assignmen
-0001d960: 745f 5f65 6d62 6564 6465 645f 7363 6d28  t__embedded_scm(
-0001d970: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-0001d980: 2020 2261 7373 6967 6e6d 656e 7420 3a20    "assignment : 
-0001d990: 656d 6265 6464 6564 5f73 636d 220a 2020  embedded_scm".  
-0001d9a0: 2020 2020 2020 705b 305d 203d 204e 6f6e        p[0] = Non
-0001d9b0: 650a 0a20 2020 2023 2323 2061 7373 6967  e..    ### assig
-0001d9c0: 6e6d 656e 745f 6964 2023 2323 0a0a 2020  nment_id ###..  
-0001d9d0: 2020 2320 2020 2064 6566 2070 5f61 7373    #    def p_ass
-0001d9e0: 6967 6e6d 656e 745f 6964 5f5f 4c59 5249  ignment_id__LYRI
-0001d9f0: 4353 5f53 5452 494e 4728 7365 6c66 2c20  CS_STRING(self, 
-0001da00: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
-0001da10: 2027 6173 7369 676e 6d65 6e74 5f69 6420   'assignment_id 
-0001da20: 3a20 4c59 5249 4353 5f53 5452 494e 4727  : LYRICS_STRING'
-0001da30: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
-0001da40: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
-0001da50: 2761 7373 6967 6e6d 656e 745f 6964 272c  'assignment_id',
-0001da60: 2070 5b31 3a5d 290a 0a20 2020 2064 6566   p[1:])..    def
-0001da70: 2070 5f61 7373 6967 6e6d 656e 745f 6964   p_assignment_id
-0001da80: 5f5f 5354 5249 4e47 2873 656c 662c 2070  __STRING(self, p
-0001da90: 293a 0a20 2020 2020 2020 2022 6173 7369  ):.        "assi
-0001daa0: 676e 6d65 6e74 5f69 6420 3a20 5354 5249  gnment_id : STRI
-0001dab0: 4e47 220a 2020 2020 2020 2020 705b 305d  NG".        p[0]
-0001dac0: 203d 2070 5b31 5d0a 0a20 2020 2023 2323   = p[1]..    ###
-0001dad0: 2062 6172 655f 6e75 6d62 6572 2023 2323   bare_number ###
-0001dae0: 0a0a 2020 2020 6465 6620 705f 6261 7265  ..    def p_bare
-0001daf0: 5f6e 756d 6265 725f 5f52 4541 4c5f 5f4e  _number__REAL__N
-0001db00: 554d 4245 525f 4944 454e 5449 4649 4552  UMBER_IDENTIFIER
-0001db10: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-0001db20: 2020 2022 6261 7265 5f6e 756d 6265 7220     "bare_number 
-0001db30: 3a20 5245 414c 204e 554d 4245 525f 4944  : REAL NUMBER_ID
-0001db40: 454e 5449 4649 4552 220a 2020 2020 2020  ENTIFIER".      
-0001db50: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-0001db60: 2020 2064 6566 2070 5f62 6172 655f 6e75     def p_bare_nu
-0001db70: 6d62 6572 5f5f 554e 5349 474e 4544 5f5f  mber__UNSIGNED__
-0001db80: 4e55 4d42 4552 5f49 4445 4e54 4946 4945  NUMBER_IDENTIFIE
-0001db90: 5228 7365 6c66 2c20 7029 3a0a 2020 2020  R(self, p):.    
-0001dba0: 2020 2020 2262 6172 655f 6e75 6d62 6572      "bare_number
-0001dbb0: 203a 2055 4e53 4947 4e45 4420 4e55 4d42   : UNSIGNED NUMB
-0001dbc0: 4552 5f49 4445 4e54 4946 4945 5222 0a20  ER_IDENTIFIER". 
-0001dbd0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-0001dbe0: 315d 0a0a 2020 2020 6465 6620 705f 6261  1]..    def p_ba
-0001dbf0: 7265 5f6e 756d 6265 725f 5f62 6172 655f  re_number__bare_
-0001dc00: 6e75 6d62 6572 5f63 6c6f 7365 6428 7365  number_closed(se
-0001dc10: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-0001dc20: 2262 6172 655f 6e75 6d62 6572 203a 2062  "bare_number : b
-0001dc30: 6172 655f 6e75 6d62 6572 5f63 6c6f 7365  are_number_close
-0001dc40: 6422 0a20 2020 2020 2020 2070 5b30 5d20  d".        p[0] 
-0001dc50: 3d20 705b 315d 0a0a 2020 2020 2323 2320  = p[1]..    ### 
-0001dc60: 6261 7265 5f6e 756d 6265 725f 636c 6f73  bare_number_clos
-0001dc70: 6564 2023 2323 0a0a 2020 2020 6465 6620  ed ###..    def 
-0001dc80: 705f 6261 7265 5f6e 756d 6265 725f 636c  p_bare_number_cl
-0001dc90: 6f73 6564 5f5f 4e55 4d42 4552 5f49 4445  osed__NUMBER_IDE
-0001dca0: 4e54 4946 4945 5228 7365 6c66 2c20 7029  NTIFIER(self, p)
-0001dcb0: 3a0a 2020 2020 2020 2020 2262 6172 655f  :.        "bare_
-0001dcc0: 6e75 6d62 6572 5f63 6c6f 7365 6420 3a20  number_closed : 
-0001dcd0: 4e55 4d42 4552 5f49 4445 4e54 4946 4945  NUMBER_IDENTIFIE
-0001dce0: 5222 0a20 2020 2020 2020 2070 5b30 5d20  R".        p[0] 
-0001dcf0: 3d20 705b 315d 0a0a 2020 2020 6465 6620  = p[1]..    def 
-0001dd00: 705f 6261 7265 5f6e 756d 6265 725f 636c  p_bare_number_cl
-0001dd10: 6f73 6564 5f5f 5245 414c 2873 656c 662c  osed__REAL(self,
-0001dd20: 2070 293a 0a20 2020 2020 2020 2022 6261   p):.        "ba
-0001dd30: 7265 5f6e 756d 6265 725f 636c 6f73 6564  re_number_closed
-0001dd40: 203a 2052 4541 4c22 0a20 2020 2020 2020   : REAL".       
-0001dd50: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-0001dd60: 2020 6465 6620 705f 6261 7265 5f6e 756d    def p_bare_num
-0001dd70: 6265 725f 636c 6f73 6564 5f5f 554e 5349  ber_closed__UNSI
-0001dd80: 474e 4544 2873 656c 662c 2070 293a 0a20  GNED(self, p):. 
-0001dd90: 2020 2020 2020 2022 6261 7265 5f6e 756d         "bare_num
-0001dda0: 6265 725f 636c 6f73 6564 203a 2055 4e53  ber_closed : UNS
-0001ddb0: 4947 4e45 4422 0a20 2020 2020 2020 2070  IGNED".        p
-0001ddc0: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
-0001ddd0: 2323 2320 6261 7265 5f75 6e73 6967 6e65  ### bare_unsigne
-0001dde0: 6420 2323 230a 0a20 2020 2064 6566 2070  d ###..    def p
-0001ddf0: 5f62 6172 655f 756e 7369 676e 6564 5f5f  _bare_unsigned__
-0001de00: 554e 5349 474e 4544 2873 656c 662c 2070  UNSIGNED(self, p
-0001de10: 293a 0a20 2020 2020 2020 2022 6261 7265  ):.        "bare
-0001de20: 5f75 6e73 6967 6e65 6420 3a20 554e 5349  _unsigned : UNSI
-0001de30: 474e 4544 220a 2020 2020 2020 2020 705b  GNED".        p[
-0001de40: 305d 203d 2070 5b31 5d0a 0a20 2020 2023  0] = p[1]..    #
-0001de50: 2323 2062 6173 735f 6669 6775 7265 2023  ## bass_figure #
-0001de60: 2323 0a0a 2020 2020 2320 2020 2064 6566  ##..    #    def
-0001de70: 2070 5f62 6173 735f 6669 6775 7265 5f5f   p_bass_figure__
-0001de80: 4649 4755 5245 5f53 5041 4345 2873 656c  FIGURE_SPACE(sel
-0001de90: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
-0001dea0: 2020 2020 2762 6173 735f 6669 6775 7265      'bass_figure
-0001deb0: 203a 2046 4947 5552 455f 5350 4143 4527   : FIGURE_SPACE'
-0001dec0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
-0001ded0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
-0001dee0: 2762 6173 735f 6669 6775 7265 272c 2070  'bass_figure', p
-0001def0: 5b31 3a5d 290a 0a20 2020 2023 2020 2020  [1:])..    #    
-0001df00: 6465 6620 705f 6261 7373 5f66 6967 7572  def p_bass_figur
-0001df10: 655f 5f62 6173 735f 6669 6775 7265 5f5f  e__bass_figure__
-0001df20: 4368 7239 3328 7365 6c66 2c20 7029 3a0a  Chr93(self, p):.
-0001df30: 2020 2020 2320 2020 2020 2020 2022 6261      #        "ba
-0001df40: 7373 5f66 6967 7572 6520 3a20 6261 7373  ss_figure : bass
-0001df50: 5f66 6967 7572 6520 275d 2722 0a20 2020  _figure ']'".   
-0001df60: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-0001df70: 2053 796e 7461 784e 6f64 6528 2762 6173   SyntaxNode('bas
-0001df80: 735f 6669 6775 7265 272c 2070 5b31 3a5d  s_figure', p[1:]
-0001df90: 290a 0a20 2020 2023 2020 2020 6465 6620  )..    #    def 
-0001dfa0: 705f 6261 7373 5f66 6967 7572 655f 5f62  p_bass_figure__b
-0001dfb0: 6173 735f 6669 6775 7265 5f5f 6669 6775  ass_figure__figu
-0001dfc0: 7265 645f 6261 7373 5f61 6c74 6572 6174  red_bass_alterat
-0001dfd0: 696f 6e28 7365 6c66 2c20 7029 3a0a 2020  ion(self, p):.  
-0001dfe0: 2020 2320 2020 2020 2020 2027 6261 7373    #        'bass
-0001dff0: 5f66 6967 7572 6520 3a20 6261 7373 5f66  _figure : bass_f
-0001e000: 6967 7572 6520 6669 6775 7265 645f 6261  igure figured_ba
-0001e010: 7373 5f61 6c74 6572 6174 696f 6e27 0a20  ss_alteration'. 
-0001e020: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
-0001e030: 203d 2053 796e 7461 784e 6f64 6528 2762   = SyntaxNode('b
-0001e040: 6173 735f 6669 6775 7265 272c 2070 5b31  ass_figure', p[1
-0001e050: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
-0001e060: 6620 705f 6261 7373 5f66 6967 7572 655f  f p_bass_figure_
-0001e070: 5f62 6173 735f 6669 6775 7265 5f5f 6669  _bass_figure__fi
-0001e080: 6775 7265 645f 6261 7373 5f6d 6f64 6966  gured_bass_modif
-0001e090: 6963 6174 696f 6e28 7365 6c66 2c20 7029  ication(self, p)
-0001e0a0: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-0001e0b0: 6261 7373 5f66 6967 7572 6520 3a20 6261  bass_figure : ba
-0001e0c0: 7373 5f66 6967 7572 6520 6669 6775 7265  ss_figure figure
-0001e0d0: 645f 6261 7373 5f6d 6f64 6966 6963 6174  d_bass_modificat
-0001e0e0: 696f 6e27 0a20 2020 2023 2020 2020 2020  ion'.    #      
-0001e0f0: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-0001e100: 6f64 6528 2762 6173 735f 6669 6775 7265  ode('bass_figure
-0001e110: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
-0001e120: 2020 2020 6465 6620 705f 6261 7373 5f66      def p_bass_f
-0001e130: 6967 7572 655f 5f62 6173 735f 6e75 6d62  igure__bass_numb
-0001e140: 6572 2873 656c 662c 2070 293a 0a20 2020  er(self, p):.   
-0001e150: 2023 2020 2020 2020 2020 2762 6173 735f   #        'bass_
-0001e160: 6669 6775 7265 203a 2062 6173 735f 6e75  figure : bass_nu
-0001e170: 6d62 6572 270a 2020 2020 2320 2020 2020  mber'.    #     
-0001e180: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-0001e190: 4e6f 6465 2827 6261 7373 5f66 6967 7572  Node('bass_figur
-0001e1a0: 6527 2c20 705b 313a 5d29 0a0a 2020 2020  e', p[1:])..    
-0001e1b0: 2323 2320 6261 7373 5f6e 756d 6265 7220  ### bass_number 
-0001e1c0: 2323 230a 0a20 2020 2023 2020 2020 6465  ###..    #    de
-0001e1d0: 6620 705f 6261 7373 5f6e 756d 6265 725f  f p_bass_number_
-0001e1e0: 5f53 5452 494e 4728 7365 6c66 2c20 7029  _STRING(self, p)
-0001e1f0: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-0001e200: 6261 7373 5f6e 756d 6265 7220 3a20 5354  bass_number : ST
-0001e210: 5249 4e47 270a 2020 2020 2320 2020 2020  RING'.    #     
-0001e220: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-0001e230: 4e6f 6465 2827 6261 7373 5f6e 756d 6265  Node('bass_numbe
-0001e240: 7227 2c20 705b 313a 5d29 0a0a 2020 2020  r', p[1:])..    
-0001e250: 2320 2020 2064 6566 2070 5f62 6173 735f  #    def p_bass_
-0001e260: 6e75 6d62 6572 5f5f 554e 5349 474e 4544  number__UNSIGNED
-0001e270: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
-0001e280: 2020 2020 2020 2020 2762 6173 735f 6e75          'bass_nu
-0001e290: 6d62 6572 203a 2055 4e53 4947 4e45 4427  mber : UNSIGNED'
-0001e2a0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
-0001e2b0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
-0001e2c0: 2762 6173 735f 6e75 6d62 6572 272c 2070  'bass_number', p
-0001e2d0: 5b31 3a5d 290a 0a20 2020 2023 2020 2020  [1:])..    #    
-0001e2e0: 6465 6620 705f 6261 7373 5f6e 756d 6265  def p_bass_numbe
-0001e2f0: 725f 5f66 756c 6c5f 6d61 726b 7570 2873  r__full_markup(s
-0001e300: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
-0001e310: 2020 2020 2020 2762 6173 735f 6e75 6d62        'bass_numb
-0001e320: 6572 203a 2066 756c 6c5f 6d61 726b 7570  er : full_markup
-0001e330: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
-0001e340: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
-0001e350: 2827 6261 7373 5f6e 756d 6265 7227 2c20  ('bass_number', 
-0001e360: 705b 313a 5d29 0a0a 2020 2020 2323 2320  p[1:])..    ### 
-0001e370: 626f 6f6b 5f62 6c6f 636b 2023 2323 0a0a  book_block ###..
-0001e380: 2020 2020 2320 2020 2064 6566 2070 5f62      #    def p_b
-0001e390: 6f6f 6b5f 626c 6f63 6b5f 5f42 4f4f 4b5f  ook_block__BOOK_
-0001e3a0: 5f43 6872 3132 335f 5f62 6f6f 6b5f 626f  _Chr123__book_bo
-0001e3b0: 6479 5f5f 4368 7231 3235 2873 656c 662c  dy__Chr125(self,
-0001e3c0: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-0001e3d0: 2020 2262 6f6f 6b5f 626c 6f63 6b20 3a20    "book_block : 
-0001e3e0: 424f 4f4b 2027 7b27 2062 6f6f 6b5f 626f  BOOK '{' book_bo
-0001e3f0: 6479 2027 7d27 220a 2020 2020 2320 2020  dy '}'".    #   
-0001e400: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
-0001e410: 6178 4e6f 6465 2827 626f 6f6b 5f62 6c6f  axNode('book_blo
-0001e420: 636b 272c 2070 5b31 3a5d 290a 0a20 2020  ck', p[1:])..   
-0001e430: 2023 2323 2062 6f6f 6b5f 626f 6479 2023   ### book_body #
-0001e440: 2323 0a0a 2020 2020 2320 2020 2064 6566  ##..    #    def
-0001e450: 2070 5f62 6f6f 6b5f 626f 6479 5f5f 456d   p_book_body__Em
-0001e460: 7074 7928 7365 6c66 2c20 7029 3a0a 2020  pty(self, p):.  
-0001e470: 2020 2320 2020 2020 2020 2027 626f 6f6b    #        'book
-0001e480: 5f62 6f64 7920 3a20 270a 2020 2020 2320  _body : '.    # 
-0001e490: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
-0001e4a0: 6e74 6178 4e6f 6465 2827 626f 6f6b 5f62  ntaxNode('book_b
-0001e4b0: 6f64 7927 2c20 705b 313a 5d29 0a0a 2020  ody', p[1:])..  
-0001e4c0: 2020 2320 2020 2064 6566 2070 5f62 6f6f    #    def p_boo
-0001e4d0: 6b5f 626f 6479 5f5f 424f 4f4b 5f49 4445  k_body__BOOK_IDE
-0001e4e0: 4e54 4946 4945 5228 7365 6c66 2c20 7029  NTIFIER(self, p)
-0001e4f0: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-0001e500: 626f 6f6b 5f62 6f64 7920 3a20 424f 4f4b  book_body : BOOK
-0001e510: 5f49 4445 4e54 4946 4945 5227 0a20 2020  _IDENTIFIER'.   
-0001e520: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-0001e530: 2053 796e 7461 784e 6f64 6528 2762 6f6f   SyntaxNode('boo
-0001e540: 6b5f 626f 6479 272c 2070 5b31 3a5d 290a  k_body', p[1:]).
-0001e550: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
-0001e560: 626f 6f6b 5f62 6f64 795f 5f62 6f6f 6b5f  book_body__book_
-0001e570: 626f 6479 5f5f 626f 6f6b 7061 7274 5f62  body__bookpart_b
-0001e580: 6c6f 636b 2873 656c 662c 2070 293a 0a20  lock(self, p):. 
-0001e590: 2020 2023 2020 2020 2020 2020 2762 6f6f     #        'boo
-0001e5a0: 6b5f 626f 6479 203a 2062 6f6f 6b5f 626f  k_body : book_bo
-0001e5b0: 6479 2062 6f6f 6b70 6172 745f 626c 6f63  dy bookpart_bloc
-0001e5c0: 6b27 0a20 2020 2023 2020 2020 2020 2020  k'.    #        
-0001e5d0: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-0001e5e0: 6528 2762 6f6f 6b5f 626f 6479 272c 2070  e('book_body', p
-0001e5f0: 5b31 3a5d 290a 0a20 2020 2023 2020 2020  [1:])..    #    
-0001e600: 6465 6620 705f 626f 6f6b 5f62 6f64 795f  def p_book_body_
-0001e610: 5f62 6f6f 6b5f 626f 6479 5f5f 636f 6d70  _book_body__comp
-0001e620: 6f73 6974 655f 6d75 7369 6328 7365 6c66  osite_music(self
-0001e630: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
-0001e640: 2020 2027 626f 6f6b 5f62 6f64 7920 3a20     'book_body : 
-0001e650: 626f 6f6b 5f62 6f64 7920 636f 6d70 6f73  book_body compos
-0001e660: 6974 655f 6d75 7369 6327 0a20 2020 2023  ite_music'.    #
-0001e670: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-0001e680: 796e 7461 784e 6f64 6528 2762 6f6f 6b5f  yntaxNode('book_
-0001e690: 626f 6479 272c 2070 5b31 3a5d 290a 0a20  body', p[1:]).. 
-0001e6a0: 2020 2023 2020 2020 6465 6620 705f 626f     #    def p_bo
-0001e6b0: 6f6b 5f62 6f64 795f 5f62 6f6f 6b5f 626f  ok_body__book_bo
-0001e6c0: 6479 5f5f 656d 6265 6464 6564 5f73 636d  dy__embedded_scm
-0001e6d0: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
-0001e6e0: 2020 2020 2020 2020 2762 6f6f 6b5f 626f          'book_bo
-0001e6f0: 6479 203a 2062 6f6f 6b5f 626f 6479 2065  dy : book_body e
-0001e700: 6d62 6564 6465 645f 7363 6d27 0a20 2020  mbedded_scm'.   
-0001e710: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-0001e720: 2053 796e 7461 784e 6f64 6528 2762 6f6f   SyntaxNode('boo
-0001e730: 6b5f 626f 6479 272c 2070 5b31 3a5d 290a  k_body', p[1:]).
-0001e740: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
-0001e750: 626f 6f6b 5f62 6f64 795f 5f62 6f6f 6b5f  book_body__book_
-0001e760: 626f 6479 5f5f 6572 726f 7228 7365 6c66  body__error(self
-0001e770: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
-0001e780: 2020 2027 626f 6f6b 5f62 6f64 7920 3a20     'book_body : 
-0001e790: 626f 6f6b 5f62 6f64 7920 6572 726f 7227  book_body error'
-0001e7a0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
-0001e7b0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
-0001e7c0: 2762 6f6f 6b5f 626f 6479 272c 2070 5b31  'book_body', p[1
-0001e7d0: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
-0001e7e0: 6620 705f 626f 6f6b 5f62 6f64 795f 5f62  f p_book_body__b
-0001e7f0: 6f6f 6b5f 626f 6479 5f5f 6675 6c6c 5f6d  ook_body__full_m
-0001e800: 6172 6b75 7028 7365 6c66 2c20 7029 3a0a  arkup(self, p):.
-0001e810: 2020 2020 2320 2020 2020 2020 2027 626f      #        'bo
-0001e820: 6f6b 5f62 6f64 7920 3a20 626f 6f6b 5f62  ok_body : book_b
-0001e830: 6f64 7920 6675 6c6c 5f6d 6172 6b75 7027  ody full_markup'
-0001e840: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
-0001e850: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
-0001e860: 2762 6f6f 6b5f 626f 6479 272c 2070 5b31  'book_body', p[1
-0001e870: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
-0001e880: 6620 705f 626f 6f6b 5f62 6f64 795f 5f62  f p_book_body__b
-0001e890: 6f6f 6b5f 626f 6479 5f5f 6675 6c6c 5f6d  ook_body__full_m
-0001e8a0: 6172 6b75 705f 6c69 7374 2873 656c 662c  arkup_list(self,
-0001e8b0: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-0001e8c0: 2020 2762 6f6f 6b5f 626f 6479 203a 2062    'book_body : b
-0001e8d0: 6f6f 6b5f 626f 6479 2066 756c 6c5f 6d61  ook_body full_ma
-0001e8e0: 726b 7570 5f6c 6973 7427 0a20 2020 2023  rkup_list'.    #
-0001e8f0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-0001e900: 796e 7461 784e 6f64 6528 2762 6f6f 6b5f  yntaxNode('book_
-0001e910: 626f 6479 272c 2070 5b31 3a5d 290a 0a20  body', p[1:]).. 
-0001e920: 2020 2023 2020 2020 6465 6620 705f 626f     #    def p_bo
-0001e930: 6f6b 5f62 6f64 795f 5f62 6f6f 6b5f 626f  ok_body__book_bo
-0001e940: 6479 5f5f 6c69 6c79 706f 6e64 5f68 6561  dy__lilypond_hea
-0001e950: 6465 7228 7365 6c66 2c20 7029 3a0a 2020  der(self, p):.  
-0001e960: 2020 2320 2020 2020 2020 2027 626f 6f6b    #        'book
-0001e970: 5f62 6f64 7920 3a20 626f 6f6b 5f62 6f64  _body : book_bod
-0001e980: 7920 6c69 6c79 706f 6e64 5f68 6561 6465  y lilypond_heade
-0001e990: 7227 0a20 2020 2023 2020 2020 2020 2020  r'.    #        
-0001e9a0: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-0001e9b0: 6528 2762 6f6f 6b5f 626f 6479 272c 2070  e('book_body', p
-0001e9c0: 5b31 3a5d 290a 0a20 2020 2023 2020 2020  [1:])..    #    
-0001e9d0: 6465 6620 705f 626f 6f6b 5f62 6f64 795f  def p_book_body_
-0001e9e0: 5f62 6f6f 6b5f 626f 6479 5f5f 7061 7065  _book_body__pape
-0001e9f0: 725f 626c 6f63 6b28 7365 6c66 2c20 7029  r_block(self, p)
-0001ea00: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-0001ea10: 626f 6f6b 5f62 6f64 7920 3a20 626f 6f6b  book_body : book
-0001ea20: 5f62 6f64 7920 7061 7065 725f 626c 6f63  _body paper_bloc
-0001ea30: 6b27 0a20 2020 2023 2020 2020 2020 2020  k'.    #        
-0001ea40: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-0001ea50: 6528 2762 6f6f 6b5f 626f 6479 272c 2070  e('book_body', p
-0001ea60: 5b31 3a5d 290a 0a20 2020 2023 2020 2020  [1:])..    #    
-0001ea70: 6465 6620 705f 626f 6f6b 5f62 6f64 795f  def p_book_body_
-0001ea80: 5f62 6f6f 6b5f 626f 6479 5f5f 7363 6f72  _book_body__scor
-0001ea90: 655f 626c 6f63 6b28 7365 6c66 2c20 7029  e_block(self, p)
-0001eaa0: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-0001eab0: 626f 6f6b 5f62 6f64 7920 3a20 626f 6f6b  book_body : book
-0001eac0: 5f62 6f64 7920 7363 6f72 655f 626c 6f63  _body score_bloc
-0001ead0: 6b27 0a20 2020 2023 2020 2020 2020 2020  k'.    #        
-0001eae0: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-0001eaf0: 6528 2762 6f6f 6b5f 626f 6479 272c 2070  e('book_body', p
-0001eb00: 5b31 3a5d 290a 0a20 2020 2023 2323 2062  [1:])..    ### b
-0001eb10: 6f6f 6b70 6172 745f 626c 6f63 6b20 2323  ookpart_block ##
-0001eb20: 230a 0a20 2020 2023 2020 2020 6465 6620  #..    #    def 
-0001eb30: 705f 626f 6f6b 7061 7274 5f62 6c6f 636b  p_bookpart_block
-0001eb40: 5f5f 424f 4f4b 5041 5254 5f5f 4368 7231  __BOOKPART__Chr1
-0001eb50: 3233 5f5f 626f 6f6b 7061 7274 5f62 6f64  23__bookpart_bod
-0001eb60: 795f 5f43 6872 3132 3528 7365 6c66 2c20  y__Chr125(self, 
-0001eb70: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
-0001eb80: 2022 626f 6f6b 7061 7274 5f62 6c6f 636b   "bookpart_block
-0001eb90: 203a 2042 4f4f 4b50 4152 5420 277b 2720   : BOOKPART '{' 
-0001eba0: 626f 6f6b 7061 7274 5f62 6f64 7920 277d  bookpart_body '}
-0001ebb0: 2722 0a20 2020 2023 2020 2020 2020 2020  '".    #        
-0001ebc0: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-0001ebd0: 6528 2762 6f6f 6b70 6172 745f 626c 6f63  e('bookpart_bloc
-0001ebe0: 6b27 2c20 705b 313a 5d29 0a0a 2020 2020  k', p[1:])..    
-0001ebf0: 2323 2320 626f 6f6b 7061 7274 5f62 6f64  ### bookpart_bod
-0001ec00: 7920 2323 230a 0a20 2020 2023 2020 2020  y ###..    #    
-0001ec10: 6465 6620 705f 626f 6f6b 7061 7274 5f62  def p_bookpart_b
-0001ec20: 6f64 795f 5f45 6d70 7479 2873 656c 662c  ody__Empty(self,
-0001ec30: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-0001ec40: 2020 2762 6f6f 6b70 6172 745f 626f 6479    'bookpart_body
-0001ec50: 203a 2027 0a20 2020 2023 2020 2020 2020   : '.    #      
-0001ec60: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-0001ec70: 6f64 6528 2762 6f6f 6b70 6172 745f 626f  ode('bookpart_bo
-0001ec80: 6479 272c 2070 5b31 3a5d 290a 0a20 2020  dy', p[1:])..   
-0001ec90: 2023 2020 2020 6465 6620 705f 626f 6f6b   #    def p_book
-0001eca0: 7061 7274 5f62 6f64 795f 5f42 4f4f 4b5f  part_body__BOOK_
-0001ecb0: 4944 454e 5449 4649 4552 2873 656c 662c  IDENTIFIER(self,
-0001ecc0: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-0001ecd0: 2020 2762 6f6f 6b70 6172 745f 626f 6479    'bookpart_body
-0001ece0: 203a 2042 4f4f 4b5f 4944 454e 5449 4649   : BOOK_IDENTIFI
-0001ecf0: 4552 270a 2020 2020 2320 2020 2020 2020  ER'.    #       
-0001ed00: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-0001ed10: 6465 2827 626f 6f6b 7061 7274 5f62 6f64  de('bookpart_bod
-0001ed20: 7927 2c20 705b 313a 5d29 0a0a 2020 2020  y', p[1:])..    
-0001ed30: 2320 2020 2064 6566 2070 5f62 6f6f 6b70  #    def p_bookp
-0001ed40: 6172 745f 626f 6479 5f5f 626f 6f6b 7061  art_body__bookpa
-0001ed50: 7274 5f62 6f64 795f 5f63 6f6d 706f 7369  rt_body__composi
-0001ed60: 7465 5f6d 7573 6963 2873 656c 662c 2070  te_music(self, p
-0001ed70: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
-0001ed80: 2762 6f6f 6b70 6172 745f 626f 6479 203a  'bookpart_body :
-0001ed90: 2062 6f6f 6b70 6172 745f 626f 6479 2063   bookpart_body c
-0001eda0: 6f6d 706f 7369 7465 5f6d 7573 6963 270a  omposite_music'.
-0001edb0: 2020 2020 2320 2020 2020 2020 2070 5b30      #        p[0
-0001edc0: 5d20 3d20 5379 6e74 6178 4e6f 6465 2827  ] = SyntaxNode('
-0001edd0: 626f 6f6b 7061 7274 5f62 6f64 7927 2c20  bookpart_body', 
-0001ede0: 705b 313a 5d29 0a0a 2020 2020 2320 2020  p[1:])..    #   
-0001edf0: 2064 6566 2070 5f62 6f6f 6b70 6172 745f   def p_bookpart_
-0001ee00: 626f 6479 5f5f 626f 6f6b 7061 7274 5f62  body__bookpart_b
-0001ee10: 6f64 795f 5f65 6d62 6564 6465 645f 7363  ody__embedded_sc
-0001ee20: 6d28 7365 6c66 2c20 7029 3a0a 2020 2020  m(self, p):.    
-0001ee30: 2320 2020 2020 2020 2027 626f 6f6b 7061  #        'bookpa
-0001ee40: 7274 5f62 6f64 7920 3a20 626f 6f6b 7061  rt_body : bookpa
-0001ee50: 7274 5f62 6f64 7920 656d 6265 6464 6564  rt_body embedded
-0001ee60: 5f73 636d 270a 2020 2020 2320 2020 2020  _scm'.    #     
-0001ee70: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-0001ee80: 4e6f 6465 2827 626f 6f6b 7061 7274 5f62  Node('bookpart_b
-0001ee90: 6f64 7927 2c20 705b 313a 5d29 0a0a 2020  ody', p[1:])..  
-0001eea0: 2020 2320 2020 2064 6566 2070 5f62 6f6f    #    def p_boo
-0001eeb0: 6b70 6172 745f 626f 6479 5f5f 626f 6f6b  kpart_body__book
-0001eec0: 7061 7274 5f62 6f64 795f 5f65 7272 6f72  part_body__error
-0001eed0: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
-0001eee0: 2020 2020 2020 2020 2762 6f6f 6b70 6172          'bookpar
-0001eef0: 745f 626f 6479 203a 2062 6f6f 6b70 6172  t_body : bookpar
-0001ef00: 745f 626f 6479 2065 7272 6f72 270a 2020  t_body error'.  
-0001ef10: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
-0001ef20: 3d20 5379 6e74 6178 4e6f 6465 2827 626f  = SyntaxNode('bo
-0001ef30: 6f6b 7061 7274 5f62 6f64 7927 2c20 705b  okpart_body', p[
-0001ef40: 313a 5d29 0a0a 2020 2020 2320 2020 2064  1:])..    #    d
-0001ef50: 6566 2070 5f62 6f6f 6b70 6172 745f 626f  ef p_bookpart_bo
-0001ef60: 6479 5f5f 626f 6f6b 7061 7274 5f62 6f64  dy__bookpart_bod
-0001ef70: 795f 5f66 756c 6c5f 6d61 726b 7570 2873  y__full_markup(s
-0001ef80: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
-0001ef90: 2020 2020 2020 2762 6f6f 6b70 6172 745f        'bookpart_
-0001efa0: 626f 6479 203a 2062 6f6f 6b70 6172 745f  body : bookpart_
-0001efb0: 626f 6479 2066 756c 6c5f 6d61 726b 7570  body full_markup
-0001efc0: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
-0001efd0: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
-0001efe0: 2827 626f 6f6b 7061 7274 5f62 6f64 7927  ('bookpart_body'
-0001eff0: 2c20 705b 313a 5d29 0a0a 2020 2020 2320  , p[1:])..    # 
-0001f000: 2020 2064 6566 2070 5f62 6f6f 6b70 6172     def p_bookpar
-0001f010: 745f 626f 6479 5f5f 626f 6f6b 7061 7274  t_body__bookpart
-0001f020: 5f62 6f64 795f 5f66 756c 6c5f 6d61 726b  _body__full_mark
-0001f030: 7570 5f6c 6973 7428 7365 6c66 2c20 7029  up_list(self, p)
-0001f040: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-0001f050: 626f 6f6b 7061 7274 5f62 6f64 7920 3a20  bookpart_body : 
-0001f060: 626f 6f6b 7061 7274 5f62 6f64 7920 6675  bookpart_body fu
-0001f070: 6c6c 5f6d 6172 6b75 705f 6c69 7374 270a  ll_markup_list'.
-0001f080: 2020 2020 2320 2020 2020 2020 2070 5b30      #        p[0
-0001f090: 5d20 3d20 5379 6e74 6178 4e6f 6465 2827  ] = SyntaxNode('
-0001f0a0: 626f 6f6b 7061 7274 5f62 6f64 7927 2c20  bookpart_body', 
-0001f0b0: 705b 313a 5d29 0a0a 2020 2020 2320 2020  p[1:])..    #   
-0001f0c0: 2064 6566 2070 5f62 6f6f 6b70 6172 745f   def p_bookpart_
-0001f0d0: 626f 6479 5f5f 626f 6f6b 7061 7274 5f62  body__bookpart_b
-0001f0e0: 6f64 795f 5f6c 696c 7970 6f6e 645f 6865  ody__lilypond_he
-0001f0f0: 6164 6572 2873 656c 662c 2070 293a 0a20  ader(self, p):. 
-0001f100: 2020 2023 2020 2020 2020 2020 2762 6f6f     #        'boo
-0001f110: 6b70 6172 745f 626f 6479 203a 2062 6f6f  kpart_body : boo
-0001f120: 6b70 6172 745f 626f 6479 206c 696c 7970  kpart_body lilyp
-0001f130: 6f6e 645f 6865 6164 6572 270a 2020 2020  ond_header'.    
-0001f140: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
-0001f150: 5379 6e74 6178 4e6f 6465 2827 626f 6f6b  SyntaxNode('book
-0001f160: 7061 7274 5f62 6f64 7927 2c20 705b 313a  part_body', p[1:
-0001f170: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
-0001f180: 2070 5f62 6f6f 6b70 6172 745f 626f 6479   p_bookpart_body
-0001f190: 5f5f 626f 6f6b 7061 7274 5f62 6f64 795f  __bookpart_body_
-0001f1a0: 5f70 6170 6572 5f62 6c6f 636b 2873 656c  _paper_block(sel
-0001f1b0: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
-0001f1c0: 2020 2020 2762 6f6f 6b70 6172 745f 626f      'bookpart_bo
-0001f1d0: 6479 203a 2062 6f6f 6b70 6172 745f 626f  dy : bookpart_bo
-0001f1e0: 6479 2070 6170 6572 5f62 6c6f 636b 270a  dy paper_block'.
-0001f1f0: 2020 2020 2320 2020 2020 2020 2070 5b30      #        p[0
-0001f200: 5d20 3d20 5379 6e74 6178 4e6f 6465 2827  ] = SyntaxNode('
-0001f210: 626f 6f6b 7061 7274 5f62 6f64 7927 2c20  bookpart_body', 
-0001f220: 705b 313a 5d29 0a0a 2020 2020 2320 2020  p[1:])..    #   
-0001f230: 2064 6566 2070 5f62 6f6f 6b70 6172 745f   def p_bookpart_
-0001f240: 626f 6479 5f5f 626f 6f6b 7061 7274 5f62  body__bookpart_b
-0001f250: 6f64 795f 5f73 636f 7265 5f62 6c6f 636b  ody__score_block
-0001f260: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
-0001f270: 2020 2020 2020 2020 2762 6f6f 6b70 6172          'bookpar
-0001f280: 745f 626f 6479 203a 2062 6f6f 6b70 6172  t_body : bookpar
-0001f290: 745f 626f 6479 2073 636f 7265 5f62 6c6f  t_body score_blo
-0001f2a0: 636b 270a 2020 2020 2320 2020 2020 2020  ck'.    #       
-0001f2b0: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-0001f2c0: 6465 2827 626f 6f6b 7061 7274 5f62 6f64  de('bookpart_bod
-0001f2d0: 7927 2c20 705b 313a 5d29 0a0a 2020 2020  y', p[1:])..    
-0001f2e0: 2323 2320 6272 5f62 6173 735f 6669 6775  ### br_bass_figu
-0001f2f0: 7265 2023 2323 0a0a 2020 2020 2320 2020  re ###..    #   
-0001f300: 2064 6566 2070 5f62 725f 6261 7373 5f66   def p_br_bass_f
-0001f310: 6967 7572 655f 5f43 6872 3931 5f5f 6261  igure__Chr91__ba
-0001f320: 7373 5f66 6967 7572 6528 7365 6c66 2c20  ss_figure(self, 
-0001f330: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
-0001f340: 2022 6272 5f62 6173 735f 6669 6775 7265   "br_bass_figure
-0001f350: 203a 2027 5b27 2062 6173 735f 6669 6775   : '[' bass_figu
-0001f360: 7265 220a 2020 2020 2320 2020 2020 2020  re".    #       
-0001f370: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-0001f380: 6465 2827 6272 5f62 6173 735f 6669 6775  de('br_bass_figu
-0001f390: 7265 272c 2070 5b31 3a5d 290a 0a20 2020  re', p[1:])..   
-0001f3a0: 2023 2020 2020 6465 6620 705f 6272 5f62   #    def p_br_b
-0001f3b0: 6173 735f 6669 6775 7265 5f5f 6261 7373  ass_figure__bass
-0001f3c0: 5f66 6967 7572 6528 7365 6c66 2c20 7029  _figure(self, p)
-0001f3d0: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-0001f3e0: 6272 5f62 6173 735f 6669 6775 7265 203a  br_bass_figure :
-0001f3f0: 2062 6173 735f 6669 6775 7265 270a 2020   bass_figure'.  
-0001f400: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
-0001f410: 3d20 5379 6e74 6178 4e6f 6465 2827 6272  = SyntaxNode('br
-0001f420: 5f62 6173 735f 6669 6775 7265 272c 2070  _bass_figure', p
-0001f430: 5b31 3a5d 290a 0a20 2020 2023 2323 2062  [1:])..    ### b
-0001f440: 7261 6365 645f 6d75 7369 635f 6c69 7374  raced_music_list
-0001f450: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
-0001f460: 6272 6163 6564 5f6d 7573 6963 5f6c 6973  braced_music_lis
-0001f470: 745f 5f43 6872 3132 335f 5f6d 7573 6963  t__Chr123__music
-0001f480: 5f6c 6973 745f 5f43 6872 3132 3528 7365  _list__Chr125(se
-0001f490: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-0001f4a0: 2262 7261 6365 645f 6d75 7369 635f 6c69  "braced_music_li
-0001f4b0: 7374 203a 2027 7b27 206d 7573 6963 5f6c  st : '{' music_l
-0001f4c0: 6973 7420 277d 2722 0a20 2020 2020 2020  ist '}'".       
-0001f4d0: 2070 5b30 5d20 3d20 705b 325d 0a0a 2020   p[0] = p[2]..  
-0001f4e0: 2020 2323 2320 6368 6f72 645f 626f 6479    ### chord_body
-0001f4f0: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
-0001f500: 6368 6f72 645f 626f 6479 5f5f 414e 474c  chord_body__ANGL
-0001f510: 455f 4f50 454e 5f5f 6368 6f72 645f 626f  E_OPEN__chord_bo
-0001f520: 6479 5f65 6c65 6d65 6e74 735f 5f41 4e47  dy_elements__ANG
-0001f530: 4c45 5f43 4c4f 5345 2873 656c 662c 2070  LE_CLOSE(self, p
-0001f540: 293a 0a20 2020 2020 2020 2022 6368 6f72  ):.        "chor
-0001f550: 645f 626f 6479 203a 2041 4e47 4c45 5f4f  d_body : ANGLE_O
-0001f560: 5045 4e20 6368 6f72 645f 626f 6479 5f65  PEN chord_body_e
-0001f570: 6c65 6d65 6e74 7320 414e 474c 455f 434c  lements ANGLE_CL
-0001f580: 4f53 4522 0a20 2020 2020 2020 2070 5b30  OSE".        p[0
-0001f590: 5d20 3d20 705b 325d 0a0a 2020 2020 2323  ] = p[2]..    ##
-0001f5a0: 2320 6368 6f72 645f 626f 6479 5f65 6c65  # chord_body_ele
-0001f5b0: 6d65 6e74 2023 2323 0a0a 2020 2020 2320  ment ###..    # 
-0001f5c0: 2020 2064 6566 2070 5f63 686f 7264 5f62     def p_chord_b
-0001f5d0: 6f64 795f 656c 656d 656e 745f 5f44 5255  ody_element__DRU
-0001f5e0: 4d5f 5049 5443 485f 5f70 6f73 745f 6576  M_PITCH__post_ev
-0001f5f0: 656e 7473 2873 656c 662c 2070 293a 0a20  ents(self, p):. 
-0001f600: 2020 2023 2020 2020 2020 2020 2763 686f     #        'cho
-0001f610: 7264 5f62 6f64 795f 656c 656d 656e 7420  rd_body_element 
-0001f620: 3a20 4452 554d 5f50 4954 4348 2070 6f73  : DRUM_PITCH pos
-0001f630: 745f 6576 656e 7473 270a 2020 2020 2320  t_events'.    # 
-0001f640: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
-0001f650: 6e74 6178 4e6f 6465 2827 6368 6f72 645f  ntaxNode('chord_
-0001f660: 626f 6479 5f65 6c65 6d65 6e74 272c 2070  body_element', p
-0001f670: 5b31 3a5d 290a 0a20 2020 2064 6566 2070  [1:])..    def p
-0001f680: 5f63 686f 7264 5f62 6f64 795f 656c 656d  _chord_body_elem
-0001f690: 656e 745f 5f6d 7573 6963 5f66 756e 6374  ent__music_funct
-0001f6a0: 696f 6e5f 6368 6f72 645f 626f 6479 2873  ion_chord_body(s
-0001f6b0: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-0001f6c0: 2022 6368 6f72 645f 626f 6479 5f65 6c65   "chord_body_ele
-0001f6d0: 6d65 6e74 203a 206d 7573 6963 5f66 756e  ment : music_fun
-0001f6e0: 6374 696f 6e5f 6368 6f72 645f 626f 6479  ction_chord_body
-0001f6f0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-0001f700: 2053 796e 7461 784e 6f64 6528 2263 686f   SyntaxNode("cho
-0001f710: 7264 5f62 6f64 795f 656c 656d 656e 7422  rd_body_element"
-0001f720: 2c20 705b 313a 5d29 0a0a 2020 2020 6465  , p[1:])..    de
-0001f730: 6620 705f 6368 6f72 645f 626f 6479 5f65  f p_chord_body_e
-0001f740: 6c65 6d65 6e74 5f5f 7069 7463 685f 5f65  lement__pitch__e
-0001f750: 7863 6c61 6d61 7469 6f6e 735f 5f71 7565  xclamations__que
-0001f760: 7374 696f 6e73 5f5f 6f63 7461 7665 5f63  stions__octave_c
-0001f770: 6865 636b 5f5f 706f 7374 5f65 7665 6e74  heck__post_event
-0001f780: 7328 0a20 2020 2020 2020 2073 656c 662c  s(.        self,
-0001f790: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
-0001f7a0: 2020 2263 686f 7264 5f62 6f64 795f 656c    "chord_body_el
-0001f7b0: 656d 656e 7420 3a20 7069 7463 6820 6578  ement : pitch ex
-0001f7c0: 636c 616d 6174 696f 6e73 2071 7565 7374  clamations quest
-0001f7d0: 696f 6e73 206f 6374 6176 655f 6368 6563  ions octave_chec
-0001f7e0: 6b20 706f 7374 5f65 7665 6e74 7322 0a20  k post_events". 
-0001f7f0: 2020 2020 2020 2069 6620 705b 315d 206e         if p[1] n
-0001f800: 6f74 2069 6e20 5f6c 7963 6f6e 7374 2e64  ot in _lyconst.d
-0001f810: 7275 6d73 3a0a 2020 2020 2020 2020 2020  rums:.          
-0001f820: 2020 6e6f 7465 5f68 6561 6420 3d20 5f73    note_head = _s
-0001f830: 636f 7265 2e4e 6f74 6548 6561 6428 0a20  core.NoteHead(. 
-0001f840: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-0001f850: 7269 7474 656e 5f70 6974 6368 3d70 5b31  ritten_pitch=p[1
-0001f860: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
-0001f870: 2020 2069 735f 6361 7574 696f 6e61 7279     is_cautionary
-0001f880: 3d62 6f6f 6c28 705b 335d 292c 0a20 2020  =bool(p[3]),.   
-0001f890: 2020 2020 2020 2020 2020 2020 2069 735f               is_
-0001f8a0: 666f 7263 6564 3d62 6f6f 6c28 705b 325d  forced=bool(p[2]
-0001f8b0: 292c 0a20 2020 2020 2020 2020 2020 2029  ),.            )
-0001f8c0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-0001f8d0: 2020 2020 2020 2020 2020 206e 6f74 655f             note_
-0001f8e0: 6865 6164 203d 205f 7363 6f72 652e 4472  head = _score.Dr
-0001f8f0: 756d 4e6f 7465 4865 6164 280a 2020 2020  umNoteHead(.    
-0001f900: 2020 2020 2020 2020 2020 2020 7772 6974              writ
-0001f910: 7465 6e5f 7069 7463 683d 705b 315d 2c0a  ten_pitch=p[1],.
-0001f920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f930: 6973 5f63 6175 7469 6f6e 6172 793d 626f  is_cautionary=bo
-0001f940: 6f6c 2870 5b33 5d29 2c0a 2020 2020 2020  ol(p[3]),.      
-0001f950: 2020 2020 2020 2020 2020 6973 5f66 6f72            is_for
-0001f960: 6365 643d 626f 6f6c 2870 5b32 5d29 2c0a  ced=bool(p[2]),.
-0001f970: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0001f980: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
-0001f990: 7461 784e 6f64 6528 2263 686f 7264 5f62  taxNode("chord_b
-0001f9a0: 6f64 795f 656c 656d 656e 7422 2c20 286e  ody_element", (n
-0001f9b0: 6f74 655f 6865 6164 2c20 705b 355d 2929  ote_head, p[5]))
-0001f9c0: 0a0a 2020 2020 2323 2320 6368 6f72 645f  ..    ### chord_
-0001f9d0: 626f 6479 5f65 6c65 6d65 6e74 7320 2323  body_elements ##
-0001f9e0: 230a 0a20 2020 2064 6566 2070 5f63 686f  #..    def p_cho
-0001f9f0: 7264 5f62 6f64 795f 656c 656d 656e 7473  rd_body_elements
-0001fa00: 5f5f 456d 7074 7928 7365 6c66 2c20 7029  __Empty(self, p)
-0001fa10: 3a0a 2020 2020 2020 2020 2263 686f 7264  :.        "chord
-0001fa20: 5f62 6f64 795f 656c 656d 656e 7473 203a  _body_elements :
-0001fa30: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-0001fa40: 205b 5d0a 0a20 2020 2064 6566 2070 5f63   []..    def p_c
-0001fa50: 686f 7264 5f62 6f64 795f 656c 656d 656e  hord_body_elemen
-0001fa60: 7473 5f5f 6368 6f72 645f 626f 6479 5f65  ts__chord_body_e
-0001fa70: 6c65 6d65 6e74 735f 5f63 686f 7264 5f62  lements__chord_b
-0001fa80: 6f64 795f 656c 656d 656e 7428 7365 6c66  ody_element(self
-0001fa90: 2c20 7029 3a0a 2020 2020 2020 2020 2263  , p):.        "c
-0001faa0: 686f 7264 5f62 6f64 795f 656c 656d 656e  hord_body_elemen
-0001fab0: 7473 203a 2063 686f 7264 5f62 6f64 795f  ts : chord_body_
-0001fac0: 656c 656d 656e 7473 2063 686f 7264 5f62  elements chord_b
-0001fad0: 6f64 795f 656c 656d 656e 7422 0a20 2020  ody_element".   
-0001fae0: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
-0001faf0: 202b 205b 705b 325d 5d0a 0a20 2020 2023   + [p[2]]..    #
-0001fb00: 2323 2063 686f 7264 5f69 7465 6d20 2323  ## chord_item ##
-0001fb10: 230a 0a20 2020 2023 2020 2020 6465 6620  #..    #    def 
-0001fb20: 705f 6368 6f72 645f 6974 656d 5f5f 4348  p_chord_item__CH
-0001fb30: 4f52 445f 4d4f 4449 4649 4552 2873 656c  ORD_MODIFIER(sel
-0001fb40: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
-0001fb50: 2020 2020 2763 686f 7264 5f69 7465 6d20      'chord_item 
-0001fb60: 3a20 4348 4f52 445f 4d4f 4449 4649 4552  : CHORD_MODIFIER
-0001fb70: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
-0001fb80: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
-0001fb90: 2827 6368 6f72 645f 6974 656d 272c 2070  ('chord_item', p
-0001fba0: 5b31 3a5d 290a 0a20 2020 2023 2020 2020  [1:])..    #    
-0001fbb0: 6465 6620 705f 6368 6f72 645f 6974 656d  def p_chord_item
-0001fbc0: 5f5f 6368 6f72 645f 7365 7061 7261 746f  __chord_separato
-0001fbd0: 7228 7365 6c66 2c20 7029 3a0a 2020 2020  r(self, p):.    
-0001fbe0: 2320 2020 2020 2020 2027 6368 6f72 645f  #        'chord_
-0001fbf0: 6974 656d 203a 2063 686f 7264 5f73 6570  item : chord_sep
-0001fc00: 6172 6174 6f72 270a 2020 2020 2320 2020  arator'.    #   
-0001fc10: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
-0001fc20: 6178 4e6f 6465 2827 6368 6f72 645f 6974  axNode('chord_it
-0001fc30: 656d 272c 2070 5b31 3a5d 290a 0a20 2020  em', p[1:])..   
-0001fc40: 2023 2020 2020 6465 6620 705f 6368 6f72   #    def p_chor
-0001fc50: 645f 6974 656d 5f5f 7374 6570 5f6e 756d  d_item__step_num
-0001fc60: 6265 7273 2873 656c 662c 2070 293a 0a20  bers(self, p):. 
-0001fc70: 2020 2023 2020 2020 2020 2020 2763 686f     #        'cho
-0001fc80: 7264 5f69 7465 6d20 3a20 7374 6570 5f6e  rd_item : step_n
-0001fc90: 756d 6265 7273 270a 2020 2020 2320 2020  umbers'.    #   
-0001fca0: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
-0001fcb0: 6178 4e6f 6465 2827 6368 6f72 645f 6974  axNode('chord_it
-0001fcc0: 656d 272c 2070 5b31 3a5d 290a 0a20 2020  em', p[1:])..   
-0001fcd0: 2023 2323 2063 686f 7264 5f69 7465 6d73   ### chord_items
-0001fce0: 2023 2323 0a0a 2020 2020 2320 2020 2064   ###..    #    d
-0001fcf0: 6566 2070 5f63 686f 7264 5f69 7465 6d73  ef p_chord_items
-0001fd00: 5f5f 456d 7074 7928 7365 6c66 2c20 7029  __Empty(self, p)
-0001fd10: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-0001fd20: 6368 6f72 645f 6974 656d 7320 3a20 270a  chord_items : '.
-0001fd30: 2020 2020 2320 2020 2020 2020 2070 5b30      #        p[0
-0001fd40: 5d20 3d20 5379 6e74 6178 4e6f 6465 2827  ] = SyntaxNode('
-0001fd50: 6368 6f72 645f 6974 656d 7327 2c20 705b  chord_items', p[
-0001fd60: 313a 5d29 0a0a 2020 2020 2320 2020 2064  1:])..    #    d
-0001fd70: 6566 2070 5f63 686f 7264 5f69 7465 6d73  ef p_chord_items
-0001fd80: 5f5f 6368 6f72 645f 6974 656d 735f 5f63  __chord_items__c
-0001fd90: 686f 7264 5f69 7465 6d28 7365 6c66 2c20  hord_item(self, 
-0001fda0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
-0001fdb0: 2027 6368 6f72 645f 6974 656d 7320 3a20   'chord_items : 
-0001fdc0: 6368 6f72 645f 6974 656d 7320 6368 6f72  chord_items chor
-0001fdd0: 645f 6974 656d 270a 2020 2020 2320 2020  d_item'.    #   
-0001fde0: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
-0001fdf0: 6178 4e6f 6465 2827 6368 6f72 645f 6974  axNode('chord_it
-0001fe00: 656d 7327 2c20 705b 313a 5d29 0a0a 2020  ems', p[1:])..  
-0001fe10: 2020 2323 2320 6368 6f72 645f 7365 7061    ### chord_sepa
-0001fe20: 7261 746f 7220 2323 230a 0a20 2020 2023  rator ###..    #
-0001fe30: 2020 2020 6465 6620 705f 6368 6f72 645f      def p_chord_
-0001fe40: 7365 7061 7261 746f 725f 5f43 484f 5244  separator__CHORD
-0001fe50: 5f42 4153 535f 5f73 7465 6e6f 5f74 6f6e  _BASS__steno_ton
-0001fe60: 6963 5f70 6974 6368 2873 656c 662c 2070  ic_pitch(self, p
-0001fe70: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
-0001fe80: 2763 686f 7264 5f73 6570 6172 6174 6f72  'chord_separator
-0001fe90: 203a 2043 484f 5244 5f42 4153 5320 7374   : CHORD_BASS st
-0001fea0: 656e 6f5f 746f 6e69 635f 7069 7463 6827  eno_tonic_pitch'
-0001feb0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
-0001fec0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
-0001fed0: 2763 686f 7264 5f73 6570 6172 6174 6f72  'chord_separator
-0001fee0: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
-0001fef0: 2020 2020 6465 6620 705f 6368 6f72 645f      def p_chord_
-0001ff00: 7365 7061 7261 746f 725f 5f43 484f 5244  separator__CHORD
-0001ff10: 5f43 4152 4554 2873 656c 662c 2070 293a  _CARET(self, p):
-0001ff20: 0a20 2020 2023 2020 2020 2020 2020 2763  .    #        'c
-0001ff30: 686f 7264 5f73 6570 6172 6174 6f72 203a  hord_separator :
-0001ff40: 2043 484f 5244 5f43 4152 4554 270a 2020   CHORD_CARET'.  
-0001ff50: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
-0001ff60: 3d20 5379 6e74 6178 4e6f 6465 2827 6368  = SyntaxNode('ch
-0001ff70: 6f72 645f 7365 7061 7261 746f 7227 2c20  ord_separator', 
-0001ff80: 705b 313a 5d29 0a0a 2020 2020 2320 2020  p[1:])..    #   
-0001ff90: 2064 6566 2070 5f63 686f 7264 5f73 6570   def p_chord_sep
-0001ffa0: 6172 6174 6f72 5f5f 4348 4f52 445f 434f  arator__CHORD_CO
-0001ffb0: 4c4f 4e28 7365 6c66 2c20 7029 3a0a 2020  LON(self, p):.  
-0001ffc0: 2020 2320 2020 2020 2020 2027 6368 6f72    #        'chor
-0001ffd0: 645f 7365 7061 7261 746f 7220 3a20 4348  d_separator : CH
-0001ffe0: 4f52 445f 434f 4c4f 4e27 0a20 2020 2023  ORD_COLON'.    #
-0001fff0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-00020000: 796e 7461 784e 6f64 6528 2763 686f 7264  yntaxNode('chord
-00020010: 5f73 6570 6172 6174 6f72 272c 2070 5b31  _separator', p[1
-00020020: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
-00020030: 6620 705f 6368 6f72 645f 7365 7061 7261  f p_chord_separa
-00020040: 746f 725f 5f43 484f 5244 5f53 4c41 5348  tor__CHORD_SLASH
-00020050: 5f5f 7374 656e 6f5f 746f 6e69 635f 7069  __steno_tonic_pi
-00020060: 7463 6828 7365 6c66 2c20 7029 3a0a 2020  tch(self, p):.  
-00020070: 2020 2320 2020 2020 2020 2027 6368 6f72    #        'chor
-00020080: 645f 7365 7061 7261 746f 7220 3a20 4348  d_separator : CH
-00020090: 4f52 445f 534c 4153 4820 7374 656e 6f5f  ORD_SLASH steno_
-000200a0: 746f 6e69 635f 7069 7463 6827 0a20 2020  tonic_pitch'.   
-000200b0: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-000200c0: 2053 796e 7461 784e 6f64 6528 2763 686f   SyntaxNode('cho
-000200d0: 7264 5f73 6570 6172 6174 6f72 272c 2070  rd_separator', p
-000200e0: 5b31 3a5d 290a 0a20 2020 2023 2323 2063  [1:])..    ### c
-000200f0: 6c6f 7365 645f 6d75 7369 6320 2323 230a  losed_music ###.
-00020100: 0a20 2020 2064 6566 2070 5f63 6c6f 7365  .    def p_close
-00020110: 645f 6d75 7369 635f 5f63 6f6d 706c 6578  d_music__complex
-00020120: 5f6d 7573 6963 5f70 7265 6669 785f 5f63  _music_prefix__c
-00020130: 6c6f 7365 645f 6d75 7369 6328 7365 6c66  losed_music(self
-00020140: 2c20 7029 3a0a 2020 2020 2020 2020 2263  , p):.        "c
-00020150: 6c6f 7365 645f 6d75 7369 6320 3a20 636f  losed_music : co
-00020160: 6d70 6c65 785f 6d75 7369 635f 7072 6566  mplex_music_pref
-00020170: 6978 2063 6c6f 7365 645f 6d75 7369 6322  ix closed_music"
-00020180: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00020190: 5379 6e74 6178 4e6f 6465 2822 636c 6f73  SyntaxNode("clos
-000201a0: 6564 5f6d 7573 6963 222c 2070 5b31 3a5d  ed_music", p[1:]
-000201b0: 290a 0a20 2020 2064 6566 2070 5f63 6c6f  )..    def p_clo
-000201c0: 7365 645f 6d75 7369 635f 5f6d 7573 6963  sed_music__music
-000201d0: 5f62 6172 6528 7365 6c66 2c20 7029 3a0a  _bare(self, p):.
-000201e0: 2020 2020 2020 2020 2263 6c6f 7365 645f          "closed_
-000201f0: 6d75 7369 6320 3a20 6d75 7369 635f 6261  music : music_ba
-00020200: 7265 220a 2020 2020 2020 2020 705b 305d  re".        p[0]
-00020210: 203d 2053 796e 7461 784e 6f64 6528 2263   = SyntaxNode("c
-00020220: 6c6f 7365 645f 6d75 7369 6322 2c20 705b  losed_music", p[
-00020230: 313a 5d29 0a0a 2020 2020 2323 2320 636f  1:])..    ### co
-00020240: 6d6d 616e 645f 656c 656d 656e 7420 2323  mmand_element ##
-00020250: 230a 0a20 2020 2064 6566 2070 5f63 6f6d  #..    def p_com
-00020260: 6d61 6e64 5f65 6c65 6d65 6e74 5f5f 4368  mand_element__Ch
-00020270: 7231 3234 2873 656c 662c 2070 293a 0a20  r124(self, p):. 
-00020280: 2020 2020 2020 2022 636f 6d6d 616e 645f         "command_
-00020290: 656c 656d 656e 7420 3a20 277c 2722 0a20  element : '|'". 
-000202a0: 2020 2020 2020 2070 5b30 5d20 3d20 4c69         p[0] = Li
-000202b0: 6c79 506f 6e64 4576 656e 7428 2242 6172  lyPondEvent("Bar
-000202c0: 4368 6563 6b22 290a 0a20 2020 2064 6566  Check")..    def
-000202d0: 2070 5f63 6f6d 6d61 6e64 5f65 6c65 6d65   p_command_eleme
-000202e0: 6e74 5f5f 455f 4241 434b 534c 4153 4828  nt__E_BACKSLASH(
-000202f0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00020300: 2020 2263 6f6d 6d61 6e64 5f65 6c65 6d65    "command_eleme
-00020310: 6e74 203a 2045 5f42 4143 4b53 4c41 5348  nt : E_BACKSLASH
-00020320: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00020330: 204c 696c 7950 6f6e 6445 7665 6e74 2822   LilyPondEvent("
-00020340: 566f 6963 6553 6570 6172 6174 6f72 2229  VoiceSeparator")
-00020350: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
-00020360: 5f63 6f6d 6d61 6e64 5f65 6c65 6d65 6e74  _command_element
-00020370: 5f5f 455f 4252 4143 4b45 545f 434c 4f53  __E_BRACKET_CLOS
-00020380: 4528 7365 6c66 2c20 7029 3a0a 2020 2020  E(self, p):.    
-00020390: 2320 2020 2020 2020 2027 636f 6d6d 616e  #        'comman
-000203a0: 645f 656c 656d 656e 7420 3a20 455f 4252  d_element : E_BR
-000203b0: 4143 4b45 545f 434c 4f53 4527 0a20 2020  ACKET_CLOSE'.   
-000203c0: 2023 2020 2020 2020 2020 6d65 7373 6167   #        messag
-000203d0: 6520 3d20 276c 6967 6174 7572 6573 206e  e = 'ligatures n
-000203e0: 6f74 2073 7570 706f 7274 6564 2e27 0a20  ot supported.'. 
-000203f0: 2020 2023 2020 2020 2020 2020 7261 6973     #        rais
-00020400: 6520 4578 6365 7074 696f 6e28 6d65 7373  e Exception(mess
-00020410: 6167 6529 0a0a 2020 2020 2320 2020 2064  age)..    #    d
-00020420: 6566 2070 5f63 6f6d 6d61 6e64 5f65 6c65  ef p_command_ele
-00020430: 6d65 6e74 5f5f 455f 4252 4143 4b45 545f  ment__E_BRACKET_
-00020440: 4f50 454e 2873 656c 662c 2070 293a 0a20  OPEN(self, p):. 
-00020450: 2020 2023 2020 2020 2020 2020 2763 6f6d     #        'com
-00020460: 6d61 6e64 5f65 6c65 6d65 6e74 203a 2045  mand_element : E
-00020470: 5f42 5241 434b 4554 5f4f 5045 4e27 0a20  _BRACKET_OPEN'. 
-00020480: 2020 2023 2020 2020 2020 2020 6d65 7373     #        mess
-00020490: 6167 6520 3d20 276c 6967 6174 7572 6573  age = 'ligatures
-000204a0: 206e 6f74 2073 7570 706f 7274 6564 2e27   not supported.'
-000204b0: 0a20 2020 2023 2020 2020 2020 2020 7261  .    #        ra
-000204c0: 6973 6520 4578 6365 7074 696f 6e28 6d65  ise Exception(me
-000204d0: 7373 6167 6529 0a0a 2020 2020 6465 6620  ssage)..    def 
-000204e0: 705f 636f 6d6d 616e 645f 656c 656d 656e  p_command_elemen
-000204f0: 745f 5f63 6f6d 6d61 6e64 5f65 7665 6e74  t__command_event
-00020500: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-00020510: 2020 2022 636f 6d6d 616e 645f 656c 656d     "command_elem
-00020520: 656e 7420 3a20 636f 6d6d 616e 645f 6576  ent : command_ev
-00020530: 656e 7422 0a20 2020 2020 2020 2070 5b30  ent".        p[0
-00020540: 5d20 3d20 705b 315d 0a0a 2020 2020 2323  ] = p[1]..    ##
-00020550: 2320 636f 6d6d 616e 645f 6576 656e 7420  # command_event 
-00020560: 2323 230a 0a20 2020 2023 2020 2020 6465  ###..    #    de
-00020570: 6620 705f 636f 6d6d 616e 645f 6576 656e  f p_command_even
-00020580: 745f 5f45 5f54 494c 4445 2873 656c 662c  t__E_TILDE(self,
-00020590: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-000205a0: 2020 2763 6f6d 6d61 6e64 5f65 7665 6e74    'command_event
-000205b0: 203a 2045 5f54 494c 4445 270a 2020 2020   : E_TILDE'.    
-000205c0: 2320 2020 2020 2020 206d 6573 7361 6765  #        message
-000205d0: 203d 2027 7065 7320 616e 6420 666c 6578   = 'pes and flex
-000205e0: 6120 6576 656e 7473 206e 6f74 2073 7570  a events not sup
-000205f0: 706f 7274 6564 2e27 0a20 2020 2023 2020  ported.'.    #  
-00020600: 2020 2020 2020 7261 6973 6520 4578 6365        raise Exce
-00020610: 7074 696f 6e28 6d65 7373 6167 6529 0a0a  ption(message)..
-00020620: 2020 2020 6465 6620 705f 636f 6d6d 616e      def p_comman
-00020630: 645f 6576 656e 745f 5f74 656d 706f 5f65  d_event__tempo_e
-00020640: 7665 6e74 2873 656c 662c 2070 293a 0a20  vent(self, p):. 
-00020650: 2020 2020 2020 2022 636f 6d6d 616e 645f         "command_
-00020660: 6576 656e 7420 3a20 7465 6d70 6f5f 6576  event : tempo_ev
-00020670: 656e 7422 0a20 2020 2020 2020 2070 5b30  ent".        p[0
-00020680: 5d20 3d20 705b 315d 0a0a 2020 2020 2323  ] = p[1]..    ##
-00020690: 2320 636f 6d70 6c65 785f 6d75 7369 6320  # complex_music 
-000206a0: 2323 230a 0a20 2020 2064 6566 2070 5f63  ###..    def p_c
-000206b0: 6f6d 706c 6578 5f6d 7573 6963 5f5f 636f  omplex_music__co
-000206c0: 6d70 6c65 785f 6d75 7369 635f 7072 6566  mplex_music_pref
-000206d0: 6978 5f5f 6d75 7369 6328 7365 6c66 2c20  ix__music(self, 
-000206e0: 7029 3a0a 2020 2020 2020 2020 2263 6f6d  p):.        "com
-000206f0: 706c 6578 5f6d 7573 6963 203a 2063 6f6d  plex_music : com
-00020700: 706c 6578 5f6d 7573 6963 5f70 7265 6669  plex_music_prefi
-00020710: 7820 6d75 7369 6322 0a20 2020 2020 2020  x music".       
-00020720: 2063 6f6e 7465 7874 203d 2070 5b31 5d5b   context = p[1][
-00020730: 315d 0a20 2020 2020 2020 206f 7074 696f  1].        optio
-00020740: 6e61 6c5f 6964 203d 2070 5b31 5d5b 325d  nal_id = p[1][2]
-00020750: 0a20 2020 2020 2020 206f 7074 696f 6e61  .        optiona
-00020760: 6c5f 636f 6e74 6578 745f 6d6f 6420 3d20  l_context_mod = 
-00020770: 705b 315d 5b33 5d0a 2020 2020 2020 2020  p[1][3].        
-00020780: 6d75 7369 6320 3d20 705b 325d 0a20 2020  music = p[2].   
-00020790: 2020 2020 2070 5b30 5d20 3d20 7365 6c66       p[0] = self
-000207a0: 2e63 6c69 656e 742e 5f63 6f6e 7374 7275  .client._constru
-000207b0: 6374 5f63 6f6e 7465 7874 5f73 7065 6363  ct_context_specc
-000207c0: 6564 5f6d 7573 6963 280a 2020 2020 2020  ed_music(.      
-000207d0: 2020 2020 2020 636f 6e74 6578 742c 206f        context, o
-000207e0: 7074 696f 6e61 6c5f 6964 2c20 6f70 7469  ptional_id, opti
-000207f0: 6f6e 616c 5f63 6f6e 7465 7874 5f6d 6f64  onal_context_mod
-00020800: 2c20 6d75 7369 630a 2020 2020 2020 2020  , music.        
-00020810: 290a 0a20 2020 2064 6566 2070 5f63 6f6d  )..    def p_com
-00020820: 706c 6578 5f6d 7573 6963 5f5f 6d75 7369  plex_music__musi
-00020830: 635f 6675 6e63 7469 6f6e 5f63 616c 6c28  c_function_call(
-00020840: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00020850: 2020 2263 6f6d 706c 6578 5f6d 7573 6963    "complex_music
-00020860: 203a 206d 7573 6963 5f66 756e 6374 696f   : music_functio
-00020870: 6e5f 6361 6c6c 220a 2020 2020 2020 2020  n_call".        
-00020880: 705b 305d 203d 2070 5b31 5d0a 0a20 2020  p[0] = p[1]..   
-00020890: 2023 2020 2020 6465 6620 705f 636f 6d70   #    def p_comp
-000208a0: 6c65 785f 6d75 7369 635f 5f72 655f 7268  lex_music__re_rh
-000208b0: 7974 686d 6564 5f6d 7573 6963 2873 656c  ythmed_music(sel
-000208c0: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
-000208d0: 2020 2020 2763 6f6d 706c 6578 5f6d 7573      'complex_mus
-000208e0: 6963 203a 2072 655f 7268 7974 686d 6564  ic : re_rhythmed
-000208f0: 5f6d 7573 6963 270a 2020 2020 2320 2020  _music'.    #   
-00020900: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
-00020910: 6178 4e6f 6465 2827 636f 6d70 6c65 785f  axNode('complex_
-00020920: 6d75 7369 6327 2c20 705b 313a 5d29 0a0a  music', p[1:])..
-00020930: 2020 2020 2320 2020 2064 6566 2070 5f63      #    def p_c
-00020940: 6f6d 706c 6578 5f6d 7573 6963 5f5f 7265  omplex_music__re
-00020950: 7065 6174 6564 5f6d 7573 6963 2873 656c  peated_music(sel
-00020960: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
-00020970: 2020 2020 2763 6f6d 706c 6578 5f6d 7573      'complex_mus
-00020980: 6963 203a 2072 6570 6561 7465 645f 6d75  ic : repeated_mu
-00020990: 7369 6327 0a20 2020 2023 2020 2020 2020  sic'.    #      
-000209a0: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-000209b0: 6f64 6528 2763 6f6d 706c 6578 5f6d 7573  ode('complex_mus
-000209c0: 6963 272c 2070 5b31 3a5d 290a 0a20 2020  ic', p[1:])..   
-000209d0: 2023 2323 2063 6f6d 706c 6578 5f6d 7573   ### complex_mus
-000209e0: 6963 5f70 7265 6669 7820 2323 230a 0a20  ic_prefix ###.. 
-000209f0: 2020 2064 6566 2070 5f63 6f6d 706c 6578     def p_complex
-00020a00: 5f6d 7573 6963 5f70 7265 6669 785f 5f43  _music_prefix__C
-00020a10: 4f4e 5445 5854 5f5f 7369 6d70 6c65 5f73  ONTEXT__simple_s
-00020a20: 7472 696e 675f 5f6f 7074 696f 6e61 6c5f  tring__optional_
-00020a30: 6964 5f5f 6f70 7469 6f6e 616c 5f63 6f6e  id__optional_con
-00020a40: 7465 7874 5f6d 6f64 280a 2020 2020 2020  text_mod(.      
-00020a50: 2020 7365 6c66 2c20 700a 2020 2020 293a    self, p.    ):
-00020a60: 0a20 2020 2020 2020 2022 636f 6d70 6c65  .        "comple
-00020a70: 785f 6d75 7369 635f 7072 6566 6978 203a  x_music_prefix :
-00020a80: 2043 4f4e 5445 5854 2073 696d 706c 655f   CONTEXT simple_
-00020a90: 7374 7269 6e67 206f 7074 696f 6e61 6c5f  string optional_
-00020aa0: 6964 206f 7074 696f 6e61 6c5f 636f 6e74  id optional_cont
-00020ab0: 6578 745f 6d6f 6422 0a20 2020 2020 2020  ext_mod".       
-00020ac0: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-00020ad0: 6465 2822 636f 6d70 6c65 785f 6d75 7369  de("complex_musi
-00020ae0: 635f 7072 6566 6978 222c 2070 2e5f 5f67  c_prefix", p.__g
-00020af0: 6574 736c 6963 655f 5f28 312c 204e 6f6e  etslice__(1, Non
-00020b00: 6529 290a 0a20 2020 2064 6566 2070 5f63  e))..    def p_c
-00020b10: 6f6d 706c 6578 5f6d 7573 6963 5f70 7265  omplex_music_pre
-00020b20: 6669 785f 5f4e 4557 434f 4e54 4558 545f  fix__NEWCONTEXT_
-00020b30: 5f73 696d 706c 655f 7374 7269 6e67 5f5f  _simple_string__
-00020b40: 6f70 7469 6f6e 616c 5f69 645f 5f6f 7074  optional_id__opt
-00020b50: 696f 6e61 6c5f 636f 6e74 6578 745f 6d6f  ional_context_mo
-00020b60: 6428 0a20 2020 2020 2020 2073 656c 662c  d(.        self,
-00020b70: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
-00020b80: 2020 2263 6f6d 706c 6578 5f6d 7573 6963    "complex_music
-00020b90: 5f70 7265 6669 7820 3a20 4e45 5743 4f4e  _prefix : NEWCON
-00020ba0: 5445 5854 2073 696d 706c 655f 7374 7269  TEXT simple_stri
-00020bb0: 6e67 206f 7074 696f 6e61 6c5f 6964 206f  ng optional_id o
-00020bc0: 7074 696f 6e61 6c5f 636f 6e74 6578 745f  ptional_context_
-00020bd0: 6d6f 6422 0a20 2020 2020 2020 2070 5b30  mod".        p[0
-00020be0: 5d20 3d20 5379 6e74 6178 4e6f 6465 2822  ] = SyntaxNode("
-00020bf0: 636f 6d70 6c65 785f 6d75 7369 635f 7072  complex_music_pr
-00020c00: 6566 6978 222c 2070 2e5f 5f67 6574 736c  efix", p.__getsl
-00020c10: 6963 655f 5f28 312c 204e 6f6e 6529 290a  ice__(1, None)).
-00020c20: 0a20 2020 2023 2323 2063 6f6d 706f 7369  .    ### composi
-00020c30: 7465 5f6d 7573 6963 2023 2323 0a0a 2020  te_music ###..  
-00020c40: 2020 6465 6620 705f 636f 6d70 6f73 6974    def p_composit
-00020c50: 655f 6d75 7369 635f 5f63 6f6d 706c 6578  e_music__complex
-00020c60: 5f6d 7573 6963 2873 656c 662c 2070 293a  _music(self, p):
-00020c70: 0a20 2020 2020 2020 2022 636f 6d70 6f73  .        "compos
-00020c80: 6974 655f 6d75 7369 6320 3a20 636f 6d70  ite_music : comp
-00020c90: 6c65 785f 6d75 7369 6322 0a20 2020 2020  lex_music".     
-00020ca0: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-00020cb0: 2020 2020 6465 6620 705f 636f 6d70 6f73      def p_compos
-00020cc0: 6974 655f 6d75 7369 635f 5f6d 7573 6963  ite_music__music
-00020cd0: 5f62 6172 6528 7365 6c66 2c20 7029 3a0a  _bare(self, p):.
-00020ce0: 2020 2020 2020 2020 2263 6f6d 706f 7369          "composi
-00020cf0: 7465 5f6d 7573 6963 203a 206d 7573 6963  te_music : music
-00020d00: 5f62 6172 6522 0a20 2020 2020 2020 2070  _bare".        p
-00020d10: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
-00020d20: 2323 2320 636f 6e74 6578 745f 6368 616e  ### context_chan
-00020d30: 6765 2023 2323 0a0a 2020 2020 6465 6620  ge ###..    def 
-00020d40: 705f 636f 6e74 6578 745f 6368 616e 6765  p_context_change
-00020d50: 5f5f 4348 414e 4745 5f5f 5354 5249 4e47  __CHANGE__STRING
-00020d60: 5f5f 4368 7236 315f 5f53 5452 494e 4728  __Chr61__STRING(
-00020d70: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00020d80: 2020 2263 6f6e 7465 7874 5f63 6861 6e67    "context_chang
-00020d90: 6520 3a20 4348 414e 4745 2053 5452 494e  e : CHANGE STRIN
-00020da0: 4720 273d 2720 5354 5249 4e47 220a 2020  G '=' STRING".  
-00020db0: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
-00020dc0: 7461 784e 6f64 6528 2263 6f6e 7465 7874  taxNode("context
-00020dd0: 5f63 6861 6e67 6522 2c20 702e 5f5f 6765  _change", p.__ge
-00020de0: 7473 6c69 6365 5f5f 2831 2c20 4e6f 6e65  tslice__(1, None
-00020df0: 2929 0a0a 2020 2020 2323 2320 636f 6e74  ))..    ### cont
-00020e00: 6578 745f 6465 665f 6d6f 6420 2323 230a  ext_def_mod ###.
-00020e10: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
-00020e20: 636f 6e74 6578 745f 6465 665f 6d6f 645f  context_def_mod_
-00020e30: 5f41 4343 4550 5453 2873 656c 662c 2070  _ACCEPTS(self, p
-00020e40: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
-00020e50: 2763 6f6e 7465 7874 5f64 6566 5f6d 6f64  'context_def_mod
-00020e60: 203a 2041 4343 4550 5453 270a 2020 2020   : ACCEPTS'.    
-00020e70: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
-00020e80: 5379 6e74 6178 4e6f 6465 2827 636f 6e74  SyntaxNode('cont
-00020e90: 6578 745f 6465 665f 6d6f 6427 2c20 705b  ext_def_mod', p[
-00020ea0: 313a 5d29 0a0a 2020 2020 2320 2020 2064  1:])..    #    d
-00020eb0: 6566 2070 5f63 6f6e 7465 7874 5f64 6566  ef p_context_def
-00020ec0: 5f6d 6f64 5f5f 414c 4941 5328 7365 6c66  _mod__ALIAS(self
-00020ed0: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
-00020ee0: 2020 2027 636f 6e74 6578 745f 6465 665f     'context_def_
-00020ef0: 6d6f 6420 3a20 414c 4941 5327 0a20 2020  mod : ALIAS'.   
-00020f00: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-00020f10: 2053 796e 7461 784e 6f64 6528 2763 6f6e   SyntaxNode('con
-00020f20: 7465 7874 5f64 6566 5f6d 6f64 272c 2070  text_def_mod', p
-00020f30: 5b31 3a5d 290a 0a20 2020 2023 2020 2020  [1:])..    #    
-00020f40: 6465 6620 705f 636f 6e74 6578 745f 6465  def p_context_de
-00020f50: 665f 6d6f 645f 5f43 4f4e 5349 5354 5328  f_mod__CONSISTS(
-00020f60: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
-00020f70: 2020 2020 2020 2027 636f 6e74 6578 745f         'context_
-00020f80: 6465 665f 6d6f 6420 3a20 434f 4e53 4953  def_mod : CONSIS
-00020f90: 5453 270a 2020 2020 2320 2020 2020 2020  TS'.    #       
-00020fa0: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-00020fb0: 6465 2827 636f 6e74 6578 745f 6465 665f  de('context_def_
-00020fc0: 6d6f 6427 2c20 705b 313a 5d29 0a0a 2020  mod', p[1:])..  
-00020fd0: 2020 2320 2020 2064 6566 2070 5f63 6f6e    #    def p_con
-00020fe0: 7465 7874 5f64 6566 5f6d 6f64 5f5f 4445  text_def_mod__DE
-00020ff0: 4641 554c 5443 4849 4c44 2873 656c 662c  FAULTCHILD(self,
-00021000: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-00021010: 2020 2763 6f6e 7465 7874 5f64 6566 5f6d    'context_def_m
-00021020: 6f64 203a 2044 4546 4155 4c54 4348 494c  od : DEFAULTCHIL
-00021030: 4427 0a20 2020 2023 2020 2020 2020 2020  D'.    #        
-00021040: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-00021050: 6528 2763 6f6e 7465 7874 5f64 6566 5f6d  e('context_def_m
-00021060: 6f64 272c 2070 5b31 3a5d 290a 0a20 2020  od', p[1:])..   
-00021070: 2023 2020 2020 6465 6620 705f 636f 6e74   #    def p_cont
-00021080: 6578 745f 6465 665f 6d6f 645f 5f44 454e  ext_def_mod__DEN
-00021090: 4945 5328 7365 6c66 2c20 7029 3a0a 2020  IES(self, p):.  
-000210a0: 2020 2320 2020 2020 2020 2027 636f 6e74    #        'cont
-000210b0: 6578 745f 6465 665f 6d6f 6420 3a20 4445  ext_def_mod : DE
-000210c0: 4e49 4553 270a 2020 2020 2320 2020 2020  NIES'.    #     
-000210d0: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-000210e0: 4e6f 6465 2827 636f 6e74 6578 745f 6465  Node('context_de
-000210f0: 665f 6d6f 6427 2c20 705b 313a 5d29 0a0a  f_mod', p[1:])..
-00021100: 2020 2020 2320 2020 2064 6566 2070 5f63      #    def p_c
-00021110: 6f6e 7465 7874 5f64 6566 5f6d 6f64 5f5f  ontext_def_mod__
-00021120: 4445 5343 5249 5054 494f 4e28 7365 6c66  DESCRIPTION(self
-00021130: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
-00021140: 2020 2027 636f 6e74 6578 745f 6465 665f     'context_def_
-00021150: 6d6f 6420 3a20 4445 5343 5249 5054 494f  mod : DESCRIPTIO
-00021160: 4e27 0a20 2020 2023 2020 2020 2020 2020  N'.    #        
-00021170: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-00021180: 6528 2763 6f6e 7465 7874 5f64 6566 5f6d  e('context_def_m
-00021190: 6f64 272c 2070 5b31 3a5d 290a 0a20 2020  od', p[1:])..   
-000211a0: 2023 2020 2020 6465 6620 705f 636f 6e74   #    def p_cont
-000211b0: 6578 745f 6465 665f 6d6f 645f 5f4e 414d  ext_def_mod__NAM
-000211c0: 4528 7365 6c66 2c20 7029 3a0a 2020 2020  E(self, p):.    
-000211d0: 2320 2020 2020 2020 2027 636f 6e74 6578  #        'contex
-000211e0: 745f 6465 665f 6d6f 6420 3a20 4e41 4d45  t_def_mod : NAME
-000211f0: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
-00021200: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
-00021210: 2827 636f 6e74 6578 745f 6465 665f 6d6f  ('context_def_mo
-00021220: 6427 2c20 705b 313a 5d29 0a0a 2020 2020  d', p[1:])..    
-00021230: 2320 2020 2064 6566 2070 5f63 6f6e 7465  #    def p_conte
-00021240: 7874 5f64 6566 5f6d 6f64 5f5f 5245 4d4f  xt_def_mod__REMO
-00021250: 5645 2873 656c 662c 2070 293a 0a20 2020  VE(self, p):.   
-00021260: 2023 2020 2020 2020 2020 2763 6f6e 7465   #        'conte
-00021270: 7874 5f64 6566 5f6d 6f64 203a 2052 454d  xt_def_mod : REM
-00021280: 4f56 4527 0a20 2020 2023 2020 2020 2020  OVE'.    #      
-00021290: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-000212a0: 6f64 6528 2763 6f6e 7465 7874 5f64 6566  ode('context_def
-000212b0: 5f6d 6f64 272c 2070 5b31 3a5d 290a 0a20  _mod', p[1:]).. 
-000212c0: 2020 2023 2020 2020 6465 6620 705f 636f     #    def p_co
-000212d0: 6e74 6578 745f 6465 665f 6d6f 645f 5f54  ntext_def_mod__T
-000212e0: 5950 4528 7365 6c66 2c20 7029 3a0a 2020  YPE(self, p):.  
-000212f0: 2020 2320 2020 2020 2020 2027 636f 6e74    #        'cont
-00021300: 6578 745f 6465 665f 6d6f 6420 3a20 5459  ext_def_mod : TY
-00021310: 5045 270a 2020 2020 2320 2020 2020 2020  PE'.    #       
-00021320: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-00021330: 6465 2827 636f 6e74 6578 745f 6465 665f  de('context_def_
-00021340: 6d6f 6427 2c20 705b 313a 5d29 0a0a 2020  mod', p[1:])..  
-00021350: 2020 2323 2320 636f 6e74 6578 745f 6465    ### context_de
-00021360: 665f 7370 6563 5f62 6c6f 636b 2023 2323  f_spec_block ###
-00021370: 0a0a 2020 2020 6465 6620 705f 636f 6e74  ..    def p_cont
-00021380: 6578 745f 6465 665f 7370 6563 5f62 6c6f  ext_def_spec_blo
-00021390: 636b 5f5f 434f 4e54 4558 545f 5f43 6872  ck__CONTEXT__Chr
-000213a0: 3132 335f 5f63 6f6e 7465 7874 5f64 6566  123__context_def
-000213b0: 5f73 7065 635f 626f 6479 5f5f 4368 7231  _spec_body__Chr1
-000213c0: 3235 280a 2020 2020 2020 2020 7365 6c66  25(.        self
-000213d0: 2c20 700a 2020 2020 293a 0a20 2020 2020  , p.    ):.     
-000213e0: 2020 2022 636f 6e74 6578 745f 6465 665f     "context_def_
-000213f0: 7370 6563 5f62 6c6f 636b 203a 2043 4f4e  spec_block : CON
-00021400: 5445 5854 2027 7b27 2063 6f6e 7465 7874  TEXT '{' context
-00021410: 5f64 6566 5f73 7065 635f 626f 6479 2027  _def_spec_body '
-00021420: 7d27 220a 2020 2020 2020 2020 705b 305d  }'".        p[0]
-00021430: 203d 2053 796e 7461 784e 6f64 6528 2263   = SyntaxNode("c
-00021440: 6f6e 7465 7874 5f64 6566 5f73 7065 635f  ontext_def_spec_
-00021450: 626c 6f63 6b22 2c20 702e 5f5f 6765 7473  block", p.__gets
-00021460: 6c69 6365 5f5f 2831 2c20 4e6f 6e65 2929  lice__(1, None))
-00021470: 0a0a 2020 2020 2323 2320 636f 6e74 6578  ..    ### contex
-00021480: 745f 6465 665f 7370 6563 5f62 6f64 7920  t_def_spec_body 
-00021490: 2323 230a 0a20 2020 2064 6566 2070 5f63  ###..    def p_c
-000214a0: 6f6e 7465 7874 5f64 6566 5f73 7065 635f  ontext_def_spec_
-000214b0: 626f 6479 5f5f 434f 4e54 4558 545f 4445  body__CONTEXT_DE
-000214c0: 465f 4944 454e 5449 4649 4552 2873 656c  F_IDENTIFIER(sel
-000214d0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-000214e0: 636f 6e74 6578 745f 6465 665f 7370 6563  context_def_spec
-000214f0: 5f62 6f64 7920 3a20 434f 4e54 4558 545f  _body : CONTEXT_
-00021500: 4445 465f 4944 454e 5449 4649 4552 220a  DEF_IDENTIFIER".
-00021510: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-00021520: 796e 7461 784e 6f64 6528 2263 6f6e 7465  yntaxNode("conte
-00021530: 7874 5f64 6566 5f73 7065 635f 626f 6479  xt_def_spec_body
-00021540: 222c 2070 2e5f 5f67 6574 736c 6963 655f  ", p.__getslice_
-00021550: 5f28 312c 204e 6f6e 6529 290a 0a20 2020  _(1, None))..   
-00021560: 2064 6566 2070 5f63 6f6e 7465 7874 5f64   def p_context_d
-00021570: 6566 5f73 7065 635f 626f 6479 5f5f 456d  ef_spec_body__Em
-00021580: 7074 7928 7365 6c66 2c20 7029 3a0a 2020  pty(self, p):.  
-00021590: 2020 2020 2020 2263 6f6e 7465 7874 5f64        "context_d
-000215a0: 6566 5f73 7065 635f 626f 6479 203a 220a  ef_spec_body :".
-000215b0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-000215c0: 796e 7461 784e 6f64 6528 2263 6f6e 7465  yntaxNode("conte
-000215d0: 7874 5f64 6566 5f73 7065 635f 626f 6479  xt_def_spec_body
-000215e0: 222c 2070 2e5f 5f67 6574 736c 6963 655f  ", p.__getslice_
-000215f0: 5f28 312c 204e 6f6e 6529 290a 0a20 2020  _(1, None))..   
-00021600: 2064 6566 2070 5f63 6f6e 7465 7874 5f64   def p_context_d
-00021610: 6566 5f73 7065 635f 626f 6479 5f5f 636f  ef_spec_body__co
-00021620: 6e74 6578 745f 6465 665f 7370 6563 5f62  ntext_def_spec_b
-00021630: 6f64 795f 5f63 6f6e 7465 7874 5f6d 6f64  ody__context_mod
-00021640: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-00021650: 2020 2022 636f 6e74 6578 745f 6465 665f     "context_def_
-00021660: 7370 6563 5f62 6f64 7920 3a20 636f 6e74  spec_body : cont
-00021670: 6578 745f 6465 665f 7370 6563 5f62 6f64  ext_def_spec_bod
-00021680: 7920 636f 6e74 6578 745f 6d6f 6422 0a20  y context_mod". 
-00021690: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
-000216a0: 6e74 6178 4e6f 6465 2822 636f 6e74 6578  ntaxNode("contex
-000216b0: 745f 6465 665f 7370 6563 5f62 6f64 7922  t_def_spec_body"
-000216c0: 2c20 702e 5f5f 6765 7473 6c69 6365 5f5f  , p.__getslice__
-000216d0: 2831 2c20 4e6f 6e65 2929 0a0a 2020 2020  (1, None))..    
-000216e0: 6465 6620 705f 636f 6e74 6578 745f 6465  def p_context_de
-000216f0: 665f 7370 6563 5f62 6f64 795f 5f63 6f6e  f_spec_body__con
-00021700: 7465 7874 5f64 6566 5f73 7065 635f 626f  text_def_spec_bo
-00021710: 6479 5f5f 636f 6e74 6578 745f 6d6f 6469  dy__context_modi
-00021720: 6669 6361 7469 6f6e 2873 656c 662c 2070  fication(self, p
-00021730: 293a 0a20 2020 2020 2020 2022 636f 6e74  ):.        "cont
-00021740: 6578 745f 6465 665f 7370 6563 5f62 6f64  ext_def_spec_bod
-00021750: 7920 3a20 636f 6e74 6578 745f 6465 665f  y : context_def_
-00021760: 7370 6563 5f62 6f64 7920 636f 6e74 6578  spec_body contex
-00021770: 745f 6d6f 6469 6669 6361 7469 6f6e 220a  t_modification".
-00021780: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-00021790: 796e 7461 784e 6f64 6528 2263 6f6e 7465  yntaxNode("conte
-000217a0: 7874 5f64 6566 5f73 7065 635f 626f 6479  xt_def_spec_body
-000217b0: 222c 2070 2e5f 5f67 6574 736c 6963 655f  ", p.__getslice_
-000217c0: 5f28 312c 204e 6f6e 6529 290a 0a20 2020  _(1, None))..   
-000217d0: 2064 6566 2070 5f63 6f6e 7465 7874 5f64   def p_context_d
-000217e0: 6566 5f73 7065 635f 626f 6479 5f5f 636f  ef_spec_body__co
-000217f0: 6e74 6578 745f 6465 665f 7370 6563 5f62  ntext_def_spec_b
-00021800: 6f64 795f 5f65 6d62 6564 6465 645f 7363  ody__embedded_sc
-00021810: 6d28 7365 6c66 2c20 7029 3a0a 2020 2020  m(self, p):.    
-00021820: 2020 2020 2263 6f6e 7465 7874 5f64 6566      "context_def
-00021830: 5f73 7065 635f 626f 6479 203a 2063 6f6e  _spec_body : con
-00021840: 7465 7874 5f64 6566 5f73 7065 635f 626f  text_def_spec_bo
-00021850: 6479 2065 6d62 6564 6465 645f 7363 6d22  dy embedded_scm"
-00021860: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00021870: 5379 6e74 6178 4e6f 6465 2822 636f 6e74  SyntaxNode("cont
-00021880: 6578 745f 6465 665f 7370 6563 5f62 6f64  ext_def_spec_bod
-00021890: 7922 2c20 702e 5f5f 6765 7473 6c69 6365  y", p.__getslice
-000218a0: 5f5f 2831 2c20 4e6f 6e65 2929 0a0a 2020  __(1, None))..  
-000218b0: 2020 2323 2320 636f 6e74 6578 745f 6d6f    ### context_mo
-000218c0: 6420 2323 230a 0a20 2020 2023 2020 2020  d ###..    #    
-000218d0: 6465 6620 705f 636f 6e74 6578 745f 6d6f  def p_context_mo
-000218e0: 645f 5f63 6f6e 7465 7874 5f64 6566 5f6d  d__context_def_m
-000218f0: 6f64 5f5f 5354 5249 4e47 2873 656c 662c  od__STRING(self,
-00021900: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-00021910: 2020 2763 6f6e 7465 7874 5f6d 6f64 203a    'context_mod :
-00021920: 2063 6f6e 7465 7874 5f64 6566 5f6d 6f64   context_def_mod
-00021930: 2053 5452 494e 4727 0a20 2020 2023 2020   STRING'.    #  
-00021940: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
-00021950: 7461 784e 6f64 6528 2763 6f6e 7465 7874  taxNode('context
-00021960: 5f6d 6f64 272c 2070 5b31 3a5d 290a 0a20  _mod', p[1:]).. 
-00021970: 2020 2023 2020 2020 6465 6620 705f 636f     #    def p_co
-00021980: 6e74 6578 745f 6d6f 645f 5f63 6f6e 7465  ntext_mod__conte
-00021990: 7874 5f64 6566 5f6d 6f64 5f5f 656d 6265  xt_def_mod__embe
-000219a0: 6464 6564 5f73 636d 2873 656c 662c 2070  dded_scm(self, p
-000219b0: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
-000219c0: 2763 6f6e 7465 7874 5f6d 6f64 203a 2063  'context_mod : c
-000219d0: 6f6e 7465 7874 5f64 6566 5f6d 6f64 2065  ontext_def_mod e
-000219e0: 6d62 6564 6465 645f 7363 6d27 0a20 2020  mbedded_scm'.   
-000219f0: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-00021a00: 2053 796e 7461 784e 6f64 6528 2763 6f6e   SyntaxNode('con
-00021a10: 7465 7874 5f6d 6f64 272c 2070 5b31 3a5d  text_mod', p[1:]
-00021a20: 290a 0a20 2020 2064 6566 2070 5f63 6f6e  )..    def p_con
-00021a30: 7465 7874 5f6d 6f64 5f5f 7072 6f70 6572  text_mod__proper
-00021a40: 7479 5f6f 7065 7261 7469 6f6e 2873 656c  ty_operation(sel
-00021a50: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-00021a60: 636f 6e74 6578 745f 6d6f 6420 3a20 7072  context_mod : pr
-00021a70: 6f70 6572 7479 5f6f 7065 7261 7469 6f6e  operty_operation
-00021a80: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00021a90: 2070 5b31 5d0a 0a20 2020 2023 2323 2063   p[1]..    ### c
-00021aa0: 6f6e 7465 7874 5f6d 6f64 5f6c 6973 7420  ontext_mod_list 
-00021ab0: 2323 230a 0a20 2020 2064 6566 2070 5f63  ###..    def p_c
-00021ac0: 6f6e 7465 7874 5f6d 6f64 5f6c 6973 745f  ontext_mod_list_
-00021ad0: 5f45 6d70 7479 2873 656c 662c 2070 293a  _Empty(self, p):
-00021ae0: 0a20 2020 2020 2020 2022 636f 6e74 6578  .        "contex
-00021af0: 745f 6d6f 645f 6c69 7374 203a 220a 2020  t_mod_list :".  
-00021b00: 2020 2020 2020 705b 305d 203d 205b 5d0a        p[0] = [].
-00021b10: 0a20 2020 2064 6566 2070 5f63 6f6e 7465  .    def p_conte
-00021b20: 7874 5f6d 6f64 5f6c 6973 745f 5f63 6f6e  xt_mod_list__con
-00021b30: 7465 7874 5f6d 6f64 5f6c 6973 745f 5f43  text_mod_list__C
-00021b40: 4f4e 5445 5854 5f4d 4f44 5f49 4445 4e54  ONTEXT_MOD_IDENT
-00021b50: 4946 4945 5228 7365 6c66 2c20 7029 3a0a  IFIER(self, p):.
-00021b60: 2020 2020 2020 2020 2263 6f6e 7465 7874          "context
-00021b70: 5f6d 6f64 5f6c 6973 7420 3a20 636f 6e74  _mod_list : cont
-00021b80: 6578 745f 6d6f 645f 6c69 7374 2043 4f4e  ext_mod_list CON
-00021b90: 5445 5854 5f4d 4f44 5f49 4445 4e54 4946  TEXT_MOD_IDENTIF
-00021ba0: 4945 5222 0a20 2020 2020 2020 2070 5b30  IER".        p[0
-00021bb0: 5d20 3d20 705b 315d 202b 205b 705b 325d  ] = p[1] + [p[2]
-00021bc0: 5d0a 0a20 2020 2064 6566 2070 5f63 6f6e  ]..    def p_con
-00021bd0: 7465 7874 5f6d 6f64 5f6c 6973 745f 5f63  text_mod_list__c
-00021be0: 6f6e 7465 7874 5f6d 6f64 5f6c 6973 745f  ontext_mod_list_
-00021bf0: 5f63 6f6e 7465 7874 5f6d 6f64 2873 656c  _context_mod(sel
-00021c00: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-00021c10: 636f 6e74 6578 745f 6d6f 645f 6c69 7374  context_mod_list
-00021c20: 203a 2063 6f6e 7465 7874 5f6d 6f64 5f6c   : context_mod_l
-00021c30: 6973 7420 636f 6e74 6578 745f 6d6f 6422  ist context_mod"
-00021c40: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00021c50: 705b 315d 202b 205b 705b 325d 5d0a 0a20  p[1] + [p[2]].. 
-00021c60: 2020 2064 6566 2070 5f63 6f6e 7465 7874     def p_context
-00021c70: 5f6d 6f64 5f6c 6973 745f 5f63 6f6e 7465  _mod_list__conte
-00021c80: 7874 5f6d 6f64 5f6c 6973 745f 5f65 6d62  xt_mod_list__emb
-00021c90: 6564 6465 645f 7363 6d28 7365 6c66 2c20  edded_scm(self, 
-00021ca0: 7029 3a0a 2020 2020 2020 2020 2263 6f6e  p):.        "con
-00021cb0: 7465 7874 5f6d 6f64 5f6c 6973 7420 3a20  text_mod_list : 
-00021cc0: 636f 6e74 6578 745f 6d6f 645f 6c69 7374  context_mod_list
-00021cd0: 2065 6d62 6564 6465 645f 7363 6d22 0a20   embedded_scm". 
-00021ce0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-00021cf0: 315d 202b 205b 705b 325d 5d0a 0a20 2020  1] + [p[2]]..   
-00021d00: 2023 2323 2063 6f6e 7465 7874 5f6d 6f64   ### context_mod
-00021d10: 6966 6963 6174 696f 6e20 2323 230a 0a20  ification ###.. 
-00021d20: 2020 2064 6566 2070 5f63 6f6e 7465 7874     def p_context
-00021d30: 5f6d 6f64 6966 6963 6174 696f 6e5f 5f43  _modification__C
-00021d40: 4f4e 5445 5854 5f4d 4f44 5f49 4445 4e54  ONTEXT_MOD_IDENT
-00021d50: 4946 4945 5228 7365 6c66 2c20 7029 3a0a  IFIER(self, p):.
-00021d60: 2020 2020 2020 2020 2263 6f6e 7465 7874          "context
-00021d70: 5f6d 6f64 6966 6963 6174 696f 6e20 3a20  _modification : 
-00021d80: 434f 4e54 4558 545f 4d4f 445f 4944 454e  CONTEXT_MOD_IDEN
-00021d90: 5449 4649 4552 220a 2020 2020 2020 2020  TIFIER".        
-00021da0: 705b 305d 203d 205b 705b 315d 5d0a 0a20  p[0] = [p[1]].. 
-00021db0: 2020 2064 6566 2070 5f63 6f6e 7465 7874     def p_context
-00021dc0: 5f6d 6f64 6966 6963 6174 696f 6e5f 5f57  _modification__W
-00021dd0: 4954 485f 5f43 4f4e 5445 5854 5f4d 4f44  ITH__CONTEXT_MOD
-00021de0: 5f49 4445 4e54 4946 4945 5228 7365 6c66  _IDENTIFIER(self
-00021df0: 2c20 7029 3a0a 2020 2020 2020 2020 2263  , p):.        "c
-00021e00: 6f6e 7465 7874 5f6d 6f64 6966 6963 6174  ontext_modificat
-00021e10: 696f 6e20 3a20 5749 5448 2043 4f4e 5445  ion : WITH CONTE
-00021e20: 5854 5f4d 4f44 5f49 4445 4e54 4946 4945  XT_MOD_IDENTIFIE
-00021e30: 5222 0a20 2020 2020 2020 2070 5b30 5d20  R".        p[0] 
-00021e40: 3d20 5b70 5b32 5d5d 0a0a 2020 2020 6465  = [p[2]]..    de
-00021e50: 6620 705f 636f 6e74 6578 745f 6d6f 6469  f p_context_modi
-00021e60: 6669 6361 7469 6f6e 5f5f 5749 5448 5f5f  fication__WITH__
-00021e70: 4368 7231 3233 5f5f 636f 6e74 6578 745f  Chr123__context_
-00021e80: 6d6f 645f 6c69 7374 5f5f 4368 7231 3235  mod_list__Chr125
-00021e90: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-00021ea0: 2020 2022 636f 6e74 6578 745f 6d6f 6469     "context_modi
-00021eb0: 6669 6361 7469 6f6e 203a 2057 4954 4820  fication : WITH 
-00021ec0: 277b 2720 636f 6e74 6578 745f 6d6f 645f  '{' context_mod_
-00021ed0: 6c69 7374 2027 7d27 220a 2020 2020 2020  list '}'".      
-00021ee0: 2020 705b 305d 203d 2070 5b33 5d0a 2020    p[0] = p[3].  
-00021ef0: 2020 2020 2020 7365 6c66 2e63 6c69 656e        self.clien
-00021f00: 742e 5f6c 6578 6572 2e70 6f70 5f73 7461  t._lexer.pop_sta
-00021f10: 7465 2829 0a20 2020 2020 2020 2073 656c  te().        sel
-00021f20: 662e 636c 6965 6e74 2e5f 7265 6c65 785f  f.client._relex_
-00021f30: 6c6f 6f6b 6168 6561 6428 290a 0a20 2020  lookahead()..   
-00021f40: 2064 6566 2070 5f63 6f6e 7465 7874 5f6d   def p_context_m
-00021f50: 6f64 6966 6963 6174 696f 6e5f 5f57 4954  odification__WIT
-00021f60: 485f 5f65 6d62 6564 6465 645f 7363 6d5f  H__embedded_scm_
-00021f70: 636c 6f73 6564 2873 656c 662c 2070 293a  closed(self, p):
-00021f80: 0a20 2020 2020 2020 2022 636f 6e74 6578  .        "contex
-00021f90: 745f 6d6f 6469 6669 6361 7469 6f6e 203a  t_modification :
-00021fa0: 2057 4954 4820 656d 6265 6464 6564 5f73   WITH embedded_s
-00021fb0: 636d 5f63 6c6f 7365 6422 0a20 2020 2020  cm_closed".     
-00021fc0: 2020 2070 5b30 5d20 3d20 5b70 5b32 5d5d     p[0] = [p[2]]
-00021fd0: 0a0a 2020 2020 2323 2320 636f 6e74 6578  ..    ### contex
-00021fe0: 745f 7072 6f70 5f73 7065 6320 2323 230a  t_prop_spec ###.
-00021ff0: 0a20 2020 2064 6566 2070 5f63 6f6e 7465  .    def p_conte
-00022000: 7874 5f70 726f 705f 7370 6563 5f5f 7369  xt_prop_spec__si
-00022010: 6d70 6c65 5f73 7472 696e 6728 7365 6c66  mple_string(self
-00022020: 2c20 7029 3a0a 2020 2020 2020 2020 2263  , p):.        "c
-00022030: 6f6e 7465 7874 5f70 726f 705f 7370 6563  ontext_prop_spec
-00022040: 203a 2073 696d 706c 655f 7374 7269 6e67   : simple_string
-00022050: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00022060: 2053 796e 7461 784e 6f64 6528 2263 6f6e   SyntaxNode("con
-00022070: 7465 7874 5f70 726f 705f 7370 6563 222c  text_prop_spec",
-00022080: 2070 2e5f 5f67 6574 736c 6963 655f 5f28   p.__getslice__(
-00022090: 312c 204e 6f6e 6529 290a 0a20 2020 2064  1, None))..    d
-000220a0: 6566 2070 5f63 6f6e 7465 7874 5f70 726f  ef p_context_pro
-000220b0: 705f 7370 6563 5f5f 7369 6d70 6c65 5f73  p_spec__simple_s
-000220c0: 7472 696e 675f 5f43 6872 3436 5f5f 7369  tring__Chr46__si
-000220d0: 6d70 6c65 5f73 7472 696e 6728 7365 6c66  mple_string(self
-000220e0: 2c20 7029 3a0a 2020 2020 2020 2020 2263  , p):.        "c
-000220f0: 6f6e 7465 7874 5f70 726f 705f 7370 6563  ontext_prop_spec
-00022100: 203a 2073 696d 706c 655f 7374 7269 6e67   : simple_string
-00022110: 2027 2e27 2073 696d 706c 655f 7374 7269   '.' simple_stri
-00022120: 6e67 220a 2020 2020 2020 2020 705b 305d  ng".        p[0]
-00022130: 203d 2053 796e 7461 784e 6f64 6528 2263   = SyntaxNode("c
-00022140: 6f6e 7465 7874 5f70 726f 705f 7370 6563  ontext_prop_spec
-00022150: 222c 2070 2e5f 5f67 6574 736c 6963 655f  ", p.__getslice_
-00022160: 5f28 312c 204e 6f6e 6529 290a 0a20 2020  _(1, None))..   
-00022170: 2023 2323 2064 6972 6563 7469 6f6e 5f6c   ### direction_l
-00022180: 6573 735f 6368 6172 2023 2323 0a0a 2020  ess_char ###..  
-00022190: 2020 6465 6620 705f 6469 7265 6374 696f    def p_directio
-000221a0: 6e5f 6c65 7373 5f63 6861 725f 5f43 6872  n_less_char__Chr
-000221b0: 3132 3628 7365 6c66 2c20 7029 3a0a 2020  126(self, p):.  
-000221c0: 2020 2020 2020 2264 6972 6563 7469 6f6e        "direction
-000221d0: 5f6c 6573 735f 6368 6172 203a 2027 7e27  _less_char : '~'
-000221e0: 220a 2020 2020 2020 2020 2323 2320 705b  ".        ### p[
-000221f0: 305d 203d 2073 656c 662e 636c 6965 6e74  0] = self.client
-00022200: 2e5f 7265 736f 6c76 655f 6576 656e 745f  ._resolve_event_
-00022210: 6964 656e 7469 6669 6572 2822 7469 6c64  identifier("tild
-00022220: 6553 796d 626f 6c22 290a 2020 2020 2020  eSymbol").      
-00022230: 2020 705b 305d 203d 2073 656c 662e 636c    p[0] = self.cl
-00022240: 6965 6e74 2e5f 7265 736f 6c76 655f 6576  ient._resolve_ev
-00022250: 656e 745f 6964 656e 7469 6669 6572 2822  ent_identifier("
-00022260: 7e22 290a 0a20 2020 2064 6566 2070 5f64  ~")..    def p_d
-00022270: 6972 6563 7469 6f6e 5f6c 6573 735f 6368  irection_less_ch
-00022280: 6172 5f5f 4368 7234 3028 7365 6c66 2c20  ar__Chr40(self, 
-00022290: 7029 3a0a 2020 2020 2020 2020 2264 6972  p):.        "dir
-000222a0: 6563 7469 6f6e 5f6c 6573 735f 6368 6172  ection_less_char
-000222b0: 203a 2027 2827 220a 2020 2020 2020 2020   : '('".        
-000222c0: 2323 2320 705b 305d 203d 2073 656c 662e  ### p[0] = self.
-000222d0: 636c 6965 6e74 2e5f 7265 736f 6c76 655f  client._resolve_
-000222e0: 6576 656e 745f 6964 656e 7469 6669 6572  event_identifier
-000222f0: 2822 7061 7265 6e74 6865 7369 734f 7065  ("parenthesisOpe
-00022300: 6e53 796d 626f 6c22 290a 2020 2020 2020  nSymbol").      
-00022310: 2020 705b 305d 203d 2073 656c 662e 636c    p[0] = self.cl
-00022320: 6965 6e74 2e5f 7265 736f 6c76 655f 6576  ient._resolve_ev
-00022330: 656e 745f 6964 656e 7469 6669 6572 2822  ent_identifier("
-00022340: 2822 290a 0a20 2020 2064 6566 2070 5f64  (")..    def p_d
-00022350: 6972 6563 7469 6f6e 5f6c 6573 735f 6368  irection_less_ch
-00022360: 6172 5f5f 4368 7234 3128 7365 6c66 2c20  ar__Chr41(self, 
-00022370: 7029 3a0a 2020 2020 2020 2020 2264 6972  p):.        "dir
-00022380: 6563 7469 6f6e 5f6c 6573 735f 6368 6172  ection_less_char
-00022390: 203a 2027 2927 220a 2020 2020 2020 2020   : ')'".        
-000223a0: 2323 2320 705b 305d 203d 2073 656c 662e  ### p[0] = self.
-000223b0: 636c 6965 6e74 2e5f 7265 736f 6c76 655f  client._resolve_
-000223c0: 6576 656e 745f 6964 656e 7469 6669 6572  event_identifier
-000223d0: 2822 7061 7265 6e74 6865 7369 7343 6c6f  ("parenthesisClo
-000223e0: 7365 5379 6d62 6f6c 2229 0a20 2020 2020  seSymbol").     
-000223f0: 2020 2070 5b30 5d20 3d20 7365 6c66 2e63     p[0] = self.c
-00022400: 6c69 656e 742e 5f72 6573 6f6c 7665 5f65  lient._resolve_e
-00022410: 7665 6e74 5f69 6465 6e74 6966 6965 7228  vent_identifier(
-00022420: 2229 2229 0a0a 2020 2020 6465 6620 705f  ")")..    def p_
-00022430: 6469 7265 6374 696f 6e5f 6c65 7373 5f63  direction_less_c
-00022440: 6861 725f 5f43 6872 3931 2873 656c 662c  har__Chr91(self,
-00022450: 2070 293a 0a20 2020 2020 2020 2022 6469   p):.        "di
-00022460: 7265 6374 696f 6e5f 6c65 7373 5f63 6861  rection_less_cha
-00022470: 7220 3a20 275b 2722 0a20 2020 2020 2020  r : '['".       
-00022480: 2023 2070 5b30 5d20 3d20 7365 6c66 2e63   # p[0] = self.c
-00022490: 6c69 656e 742e 5f72 6573 6f6c 7665 5f65  lient._resolve_e
-000224a0: 7665 6e74 5f69 6465 6e74 6966 6965 7228  vent_identifier(
-000224b0: 2262 7261 636b 6574 4f70 656e 5379 6d62  "bracketOpenSymb
-000224c0: 6f6c 2229 0a20 2020 2020 2020 2070 5b30  ol").        p[0
-000224d0: 5d20 3d20 7365 6c66 2e63 6c69 656e 742e  ] = self.client.
-000224e0: 5f72 6573 6f6c 7665 5f65 7665 6e74 5f69  _resolve_event_i
-000224f0: 6465 6e74 6966 6965 7228 225b 2229 0a0a  dentifier("[")..
-00022500: 2020 2020 6465 6620 705f 6469 7265 6374      def p_direct
-00022510: 696f 6e5f 6c65 7373 5f63 6861 725f 5f43  ion_less_char__C
-00022520: 6872 3933 2873 656c 662c 2070 293a 0a20  hr93(self, p):. 
-00022530: 2020 2020 2020 2022 6469 7265 6374 696f         "directio
-00022540: 6e5f 6c65 7373 5f63 6861 7220 3a20 275d  n_less_char : ']
-00022550: 2722 0a20 2020 2020 2020 2023 2070 5b30  '".        # p[0
-00022560: 5d20 3d20 7365 6c66 2e63 6c69 656e 742e  ] = self.client.
-00022570: 5f72 6573 6f6c 7665 5f65 7665 6e74 5f69  _resolve_event_i
-00022580: 6465 6e74 6966 6965 7228 2262 7261 636b  dentifier("brack
-00022590: 6574 436c 6f73 6553 796d 626f 6c22 290a  etCloseSymbol").
-000225a0: 2020 2020 2020 2020 705b 305d 203d 2073          p[0] = s
-000225b0: 656c 662e 636c 6965 6e74 2e5f 7265 736f  elf.client._reso
-000225c0: 6c76 655f 6576 656e 745f 6964 656e 7469  lve_event_identi
-000225d0: 6669 6572 2822 5d22 290a 0a20 2020 2064  fier("]")..    d
-000225e0: 6566 2070 5f64 6972 6563 7469 6f6e 5f6c  ef p_direction_l
-000225f0: 6573 735f 6368 6172 5f5f 455f 414e 474c  ess_char__E_ANGL
-00022600: 455f 434c 4f53 4528 7365 6c66 2c20 7029  E_CLOSE(self, p)
-00022610: 3a0a 2020 2020 2020 2020 2264 6972 6563  :.        "direc
-00022620: 7469 6f6e 5f6c 6573 735f 6368 6172 203a  tion_less_char :
-00022630: 2045 5f41 4e47 4c45 5f43 4c4f 5345 220a   E_ANGLE_CLOSE".
-00022640: 2020 2020 2020 2020 2320 705b 305d 203d          # p[0] =
-00022650: 2073 656c 662e 636c 6965 6e74 2e5f 7265   self.client._re
-00022660: 736f 6c76 655f 6576 656e 745f 6964 656e  solve_event_iden
-00022670: 7469 6669 6572 2822 6573 6361 7065 6442  tifier("escapedB
-00022680: 6967 6765 7253 796d 626f 6c22 290a 2020  iggerSymbol").  
-00022690: 2020 2020 2020 705b 305d 203d 2073 656c        p[0] = sel
-000226a0: 662e 636c 6965 6e74 2e5f 7265 736f 6c76  f.client._resolv
-000226b0: 655f 6576 656e 745f 6964 656e 7469 6669  e_event_identifi
-000226c0: 6572 2872 225c 3e22 290a 0a20 2020 2064  er(r"\>")..    d
-000226d0: 6566 2070 5f64 6972 6563 7469 6f6e 5f6c  ef p_direction_l
-000226e0: 6573 735f 6368 6172 5f5f 455f 414e 474c  ess_char__E_ANGL
-000226f0: 455f 4f50 454e 2873 656c 662c 2070 293a  E_OPEN(self, p):
-00022700: 0a20 2020 2020 2020 2022 6469 7265 6374  .        "direct
-00022710: 696f 6e5f 6c65 7373 5f63 6861 7220 3a20  ion_less_char : 
-00022720: 455f 414e 474c 455f 4f50 454e 220a 2020  E_ANGLE_OPEN".  
-00022730: 2020 2020 2020 2320 705b 305d 203d 2073        # p[0] = s
-00022740: 656c 662e 636c 6965 6e74 2e5f 7265 736f  elf.client._reso
-00022750: 6c76 655f 6576 656e 745f 6964 656e 7469  lve_event_identi
-00022760: 6669 6572 2822 6573 6361 7065 6453 6d61  fier("escapedSma
-00022770: 6c6c 6572 5379 6d62 6f6c 2229 0a20 2020  llerSymbol").   
-00022780: 2020 2020 2070 5b30 5d20 3d20 7365 6c66       p[0] = self
-00022790: 2e63 6c69 656e 742e 5f72 6573 6f6c 7665  .client._resolve
-000227a0: 5f65 7665 6e74 5f69 6465 6e74 6966 6965  _event_identifie
-000227b0: 7228 7222 5c3c 2229 0a0a 2020 2020 6465  r(r"\<")..    de
-000227c0: 6620 705f 6469 7265 6374 696f 6e5f 6c65  f p_direction_le
-000227d0: 7373 5f63 6861 725f 5f45 5f43 4c4f 5345  ss_char__E_CLOSE
-000227e0: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-000227f0: 2020 2022 6469 7265 6374 696f 6e5f 6c65     "direction_le
-00022800: 7373 5f63 6861 7220 3a20 455f 434c 4f53  ss_char : E_CLOS
-00022810: 4522 0a20 2020 2020 2020 2023 2070 5b30  E".        # p[0
-00022820: 5d20 3d20 7365 6c66 2e63 6c69 656e 742e  ] = self.client.
-00022830: 5f72 6573 6f6c 7665 5f65 7665 6e74 5f69  _resolve_event_i
-00022840: 6465 6e74 6966 6965 7228 2265 7363 6170  dentifier("escap
-00022850: 6564 5061 7265 6e74 6865 7369 7343 6c6f  edParenthesisClo
-00022860: 7365 5379 6d62 6f6c 2229 0a20 2020 2020  seSymbol").     
-00022870: 2020 2070 5b30 5d20 3d20 7365 6c66 2e63     p[0] = self.c
-00022880: 6c69 656e 742e 5f72 6573 6f6c 7665 5f65  lient._resolve_e
-00022890: 7665 6e74 5f69 6465 6e74 6966 6965 7228  vent_identifier(
-000228a0: 7222 5c29 2229 0a0a 2020 2020 6465 6620  r"\)")..    def 
-000228b0: 705f 6469 7265 6374 696f 6e5f 6c65 7373  p_direction_less
-000228c0: 5f63 6861 725f 5f45 5f45 5843 4c41 4d41  _char__E_EXCLAMA
-000228d0: 5449 4f4e 2873 656c 662c 2070 293a 0a20  TION(self, p):. 
-000228e0: 2020 2020 2020 2022 6469 7265 6374 696f         "directio
-000228f0: 6e5f 6c65 7373 5f63 6861 7220 3a20 455f  n_less_char : E_
-00022900: 4558 434c 414d 4154 494f 4e22 0a20 2020  EXCLAMATION".   
-00022910: 2020 2020 2023 2070 5b30 5d20 3d20 7365       # p[0] = se
-00022920: 6c66 2e63 6c69 656e 742e 5f72 6573 6f6c  lf.client._resol
-00022930: 7665 5f65 7665 6e74 5f69 6465 6e74 6966  ve_event_identif
-00022940: 6965 7228 2265 7363 6170 6564 4578 636c  ier("escapedExcl
-00022950: 616d 6174 696f 6e53 796d 626f 6c22 290a  amationSymbol").
-00022960: 2020 2020 2020 2020 705b 305d 203d 2073          p[0] = s
-00022970: 656c 662e 636c 6965 6e74 2e5f 7265 736f  elf.client._reso
-00022980: 6c76 655f 6576 656e 745f 6964 656e 7469  lve_event_identi
-00022990: 6669 6572 2872 225c 2122 290a 0a20 2020  fier(r"\!")..   
-000229a0: 2064 6566 2070 5f64 6972 6563 7469 6f6e   def p_direction
-000229b0: 5f6c 6573 735f 6368 6172 5f5f 455f 4f50  _less_char__E_OP
-000229c0: 454e 2873 656c 662c 2070 293a 0a20 2020  EN(self, p):.   
-000229d0: 2020 2020 2022 6469 7265 6374 696f 6e5f       "direction_
-000229e0: 6c65 7373 5f63 6861 7220 3a20 455f 4f50  less_char : E_OP
-000229f0: 454e 220a 2020 2020 2020 2020 2320 705b  EN".        # p[
-00022a00: 305d 203d 2073 656c 662e 636c 6965 6e74  0] = self.client
-00022a10: 2e5f 7265 736f 6c76 655f 6576 656e 745f  ._resolve_event_
-00022a20: 6964 656e 7469 6669 6572 2822 6573 6361  identifier("esca
-00022a30: 7065 6450 6172 656e 7468 6573 6973 4f70  pedParenthesisOp
-00022a40: 656e 5379 6d62 6f6c 2229 0a20 2020 2020  enSymbol").     
-00022a50: 2020 2070 5b30 5d20 3d20 7365 6c66 2e63     p[0] = self.c
-00022a60: 6c69 656e 742e 5f72 6573 6f6c 7665 5f65  lient._resolve_e
-00022a70: 7665 6e74 5f69 6465 6e74 6966 6965 7228  vent_identifier(
-00022a80: 7222 5c28 2229 0a0a 2020 2020 2323 2320  r"\(")..    ### 
-00022a90: 6469 7265 6374 696f 6e5f 6c65 7373 5f65  direction_less_e
-00022aa0: 7665 6e74 2023 2323 0a0a 2020 2020 6465  vent ###..    de
-00022ab0: 6620 705f 6469 7265 6374 696f 6e5f 6c65  f p_direction_le
-00022ac0: 7373 5f65 7665 6e74 5f5f 4556 454e 545f  ss_event__EVENT_
-00022ad0: 4944 454e 5449 4649 4552 2873 656c 662c  IDENTIFIER(self,
-00022ae0: 2070 293a 0a20 2020 2020 2020 2022 6469   p):.        "di
-00022af0: 7265 6374 696f 6e5f 6c65 7373 5f65 7665  rection_less_eve
-00022b00: 6e74 203a 2045 5645 4e54 5f49 4445 4e54  nt : EVENT_IDENT
-00022b10: 4946 4945 5222 0a20 2020 2020 2020 2069  IFIER".        i
-00022b20: 6465 6e74 6966 6965 7220 3d20 705b 315d  dentifier = p[1]
-00022b30: 0a20 2020 2020 2020 2069 6620 6964 656e  .        if iden
-00022b40: 7469 6669 6572 2e73 7461 7274 7377 6974  tifier.startswit
-00022b50: 6828 225c 5c22 293a 0a20 2020 2020 2020  h("\\"):.       
-00022b60: 2020 2020 2069 6465 6e74 6966 6965 7220       identifier 
-00022b70: 3d20 6964 656e 7469 6669 6572 5b31 3a5d  = identifier[1:]
-00022b80: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00022b90: 7365 6c66 2e63 6c69 656e 742e 5f72 6573  self.client._res
-00022ba0: 6f6c 7665 5f65 7665 6e74 5f69 6465 6e74  olve_event_ident
-00022bb0: 6966 6965 7228 6964 656e 7469 6669 6572  ifier(identifier
-00022bc0: 290a 0a20 2020 2064 6566 2070 5f64 6972  )..    def p_dir
-00022bd0: 6563 7469 6f6e 5f6c 6573 735f 6576 656e  ection_less_even
-00022be0: 745f 5f64 6972 6563 7469 6f6e 5f6c 6573  t__direction_les
-00022bf0: 735f 6368 6172 2873 656c 662c 2070 293a  s_char(self, p):
-00022c00: 0a20 2020 2020 2020 2022 6469 7265 6374  .        "direct
-00022c10: 696f 6e5f 6c65 7373 5f65 7665 6e74 203a  ion_less_event :
-00022c20: 2064 6972 6563 7469 6f6e 5f6c 6573 735f   direction_less_
-00022c30: 6368 6172 220a 2020 2020 2020 2020 705b  char".        p[
-00022c40: 305d 203d 2070 5b31 5d0a 0a20 2020 2064  0] = p[1]..    d
-00022c50: 6566 2070 5f64 6972 6563 7469 6f6e 5f6c  ef p_direction_l
-00022c60: 6573 735f 6576 656e 745f 5f65 7665 6e74  ess_event__event
-00022c70: 5f66 756e 6374 696f 6e5f 6576 656e 7428  _function_event(
-00022c80: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00022c90: 2020 2264 6972 6563 7469 6f6e 5f6c 6573    "direction_les
-00022ca0: 735f 6576 656e 7420 3a20 6576 656e 745f  s_event : event_
-00022cb0: 6675 6e63 7469 6f6e 5f65 7665 6e74 220a  function_event".
-00022cc0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-00022cd0: 796e 7461 784e 6f64 6528 2264 6972 6563  yntaxNode("direc
-00022ce0: 7469 6f6e 5f6c 6573 735f 6576 656e 7422  tion_less_event"
-00022cf0: 2c20 702e 5f5f 6765 7473 6c69 6365 5f5f  , p.__getslice__
-00022d00: 2831 2c20 4e6f 6e65 2929 0a0a 2020 2020  (1, None))..    
-00022d10: 6465 6620 705f 6469 7265 6374 696f 6e5f  def p_direction_
-00022d20: 6c65 7373 5f65 7665 6e74 5f5f 7472 656d  less_event__trem
-00022d30: 6f6c 6f5f 7479 7065 2873 656c 662c 2070  olo_type(self, p
-00022d40: 293a 0a20 2020 2020 2020 2022 6469 7265  ):.        "dire
-00022d50: 6374 696f 6e5f 6c65 7373 5f65 7665 6e74  ction_less_event
-00022d60: 203a 2074 7265 6d6f 6c6f 5f74 7970 6522   : tremolo_type"
-00022d70: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00022d80: 705b 315d 0a0a 2020 2020 2323 2320 6469  p[1]..    ### di
-00022d90: 7265 6374 696f 6e5f 7265 7164 5f65 7665  rection_reqd_eve
-00022da0: 6e74 2023 2323 0a0a 2020 2020 6465 6620  nt ###..    def 
-00022db0: 705f 6469 7265 6374 696f 6e5f 7265 7164  p_direction_reqd
-00022dc0: 5f65 7665 6e74 5f5f 6765 6e5f 7465 7874  _event__gen_text
-00022dd0: 5f64 6566 2873 656c 662c 2070 293a 0a20  _def(self, p):. 
-00022de0: 2020 2020 2020 2022 6469 7265 6374 696f         "directio
-00022df0: 6e5f 7265 7164 5f65 7665 6e74 203a 2067  n_reqd_event : g
-00022e00: 656e 5f74 6578 745f 6465 6622 0a20 2020  en_text_def".   
-00022e10: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
-00022e20: 0a0a 2020 2020 6465 6620 705f 6469 7265  ..    def p_dire
-00022e30: 6374 696f 6e5f 7265 7164 5f65 7665 6e74  ction_reqd_event
-00022e40: 5f5f 7363 7269 7074 5f61 6262 7265 7669  __script_abbrevi
-00022e50: 6174 696f 6e28 7365 6c66 2c20 7029 3a0a  ation(self, p):.
-00022e60: 2020 2020 2020 2020 2264 6972 6563 7469          "directi
-00022e70: 6f6e 5f72 6571 645f 6576 656e 7420 3a20  on_reqd_event : 
-00022e80: 7363 7269 7074 5f61 6262 7265 7669 6174  script_abbreviat
-00022e90: 696f 6e22 0a20 2020 2020 2020 2070 5b30  ion".        p[0
-00022ea0: 5d20 3d20 705b 315d 0a0a 2020 2020 2323  ] = p[1]..    ##
-00022eb0: 2320 646f 7473 2023 2323 0a0a 2020 2020  # dots ###..    
-00022ec0: 6465 6620 705f 646f 7473 5f5f 456d 7074  def p_dots__Empt
-00022ed0: 7928 7365 6c66 2c20 7029 3a0a 2020 2020  y(self, p):.    
-00022ee0: 2020 2020 2264 6f74 7320 3a22 0a20 2020      "dots :".   
-00022ef0: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
-00022f00: 6178 4e6f 6465 2822 646f 7473 222c 2030  axNode("dots", 0
-00022f10: 290a 0a20 2020 2064 6566 2070 5f64 6f74  )..    def p_dot
-00022f20: 735f 5f64 6f74 735f 5f43 6872 3436 2873  s__dots__Chr46(s
-00022f30: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-00022f40: 2022 646f 7473 203a 2064 6f74 7320 272e   "dots : dots '.
-00022f50: 2722 0a20 2020 2020 2020 2070 5b30 5d20  '".        p[0] 
-00022f60: 3d20 5379 6e74 6178 4e6f 6465 2822 646f  = SyntaxNode("do
-00022f70: 7473 222c 2070 5b31 5d2e 7661 6c75 6520  ts", p[1].value 
-00022f80: 2b20 3129 0a0a 2020 2020 2323 2320 6475  + 1)..    ### du
-00022f90: 7261 7469 6f6e 5f6c 656e 6774 6820 2323  ration_length ##
-00022fa0: 230a 0a20 2020 2064 6566 2070 5f64 7572  #..    def p_dur
-00022fb0: 6174 696f 6e5f 6c65 6e67 7468 5f5f 6d75  ation_length__mu
-00022fc0: 6c74 6970 6c69 6564 5f64 7572 6174 696f  ltiplied_duratio
-00022fd0: 6e28 7365 6c66 2c20 7029 3a0a 2020 2020  n(self, p):.    
-00022fe0: 2020 2020 2264 7572 6174 696f 6e5f 6c65      "duration_le
-00022ff0: 6e67 7468 203a 206d 756c 7469 706c 6965  ngth : multiplie
-00023000: 645f 6475 7261 7469 6f6e 220a 2020 2020  d_duration".    
-00023010: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
-00023020: 0a20 2020 2023 2323 2065 6d62 6564 6465  .    ### embedde
-00023030: 645f 6c69 6c79 706f 6e64 2023 2323 0a0a  d_lilypond ###..
-00023040: 2020 2020 2320 2020 2064 6566 2070 5f65      #    def p_e
-00023050: 6d62 6564 6465 645f 6c69 6c79 706f 6e64  mbedded_lilypond
-00023060: 5f5f 456d 7074 7928 7365 6c66 2c20 7029  __Empty(self, p)
-00023070: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-00023080: 656d 6265 6464 6564 5f6c 696c 7970 6f6e  embedded_lilypon
-00023090: 6420 3a20 270a 2020 2020 2320 2020 2020  d : '.    #     
-000230a0: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-000230b0: 4e6f 6465 2827 656d 6265 6464 6564 5f6c  Node('embedded_l
-000230c0: 696c 7970 6f6e 6427 2c20 705b 313a 5d29  ilypond', p[1:])
-000230d0: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
-000230e0: 5f65 6d62 6564 6465 645f 6c69 6c79 706f  _embedded_lilypo
-000230f0: 6e64 5f5f 494e 5641 4c49 445f 5f65 6d62  nd__INVALID__emb
-00023100: 6564 6465 645f 6c69 6c79 706f 6e64 2873  edded_lilypond(s
-00023110: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
-00023120: 2020 2020 2020 2765 6d62 6564 6465 645f        'embedded_
-00023130: 6c69 6c79 706f 6e64 203a 2049 4e56 414c  lilypond : INVAL
-00023140: 4944 2065 6d62 6564 6465 645f 6c69 6c79  ID embedded_lily
-00023150: 706f 6e64 270a 2020 2020 2320 2020 2020  pond'.    #     
-00023160: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-00023170: 4e6f 6465 2827 656d 6265 6464 6564 5f6c  Node('embedded_l
-00023180: 696c 7970 6f6e 6427 2c20 705b 313a 5d29  ilypond', p[1:])
-00023190: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
-000231a0: 5f65 6d62 6564 6465 645f 6c69 6c79 706f  _embedded_lilypo
-000231b0: 6e64 5f5f 6572 726f 7228 7365 6c66 2c20  nd__error(self, 
-000231c0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
-000231d0: 2027 656d 6265 6464 6564 5f6c 696c 7970   'embedded_lilyp
-000231e0: 6f6e 6420 3a20 6572 726f 7227 0a20 2020  ond : error'.   
-000231f0: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-00023200: 2053 796e 7461 784e 6f64 6528 2765 6d62   SyntaxNode('emb
-00023210: 6564 6465 645f 6c69 6c79 706f 6e64 272c  edded_lilypond',
-00023220: 2070 5b31 3a5d 290a 0a20 2020 2023 2020   p[1:])..    #  
-00023230: 2020 6465 6620 705f 656d 6265 6464 6564    def p_embedded
-00023240: 5f6c 696c 7970 6f6e 645f 5f69 6465 6e74  _lilypond__ident
-00023250: 6966 6965 725f 696e 6974 2873 656c 662c  ifier_init(self,
-00023260: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-00023270: 2020 2765 6d62 6564 6465 645f 6c69 6c79    'embedded_lily
-00023280: 706f 6e64 203a 2069 6465 6e74 6966 6965  pond : identifie
-00023290: 725f 696e 6974 270a 2020 2020 2320 2020  r_init'.    #   
-000232a0: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
-000232b0: 6178 4e6f 6465 2827 656d 6265 6464 6564  axNode('embedded
-000232c0: 5f6c 696c 7970 6f6e 6427 2c20 705b 313a  _lilypond', p[1:
-000232d0: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
-000232e0: 2070 5f65 6d62 6564 6465 645f 6c69 6c79   p_embedded_lily
-000232f0: 706f 6e64 5f5f 6d75 7369 635f 5f6d 7573  pond__music__mus
-00023300: 6963 5f5f 6d75 7369 635f 6c69 7374 2873  ic__music_list(s
-00023310: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
-00023320: 2020 2020 2020 2765 6d62 6564 6465 645f        'embedded_
-00023330: 6c69 6c79 706f 6e64 203a 206d 7573 6963  lilypond : music
-00023340: 206d 7573 6963 206d 7573 6963 5f6c 6973   music music_lis
-00023350: 7427 0a20 2020 2023 2020 2020 2020 2020  t'.    #        
-00023360: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-00023370: 6528 2765 6d62 6564 6465 645f 6c69 6c79  e('embedded_lily
-00023380: 706f 6e64 272c 2070 5b31 3a5d 290a 0a20  pond', p[1:]).. 
-00023390: 2020 2023 2323 2065 6d62 6564 6465 645f     ### embedded_
-000233a0: 7363 6d20 2323 230a 0a20 2020 2064 6566  scm ###..    def
-000233b0: 2070 5f65 6d62 6564 6465 645f 7363 6d5f   p_embedded_scm_
-000233c0: 5f65 6d62 6564 6465 645f 7363 6d5f 6261  _embedded_scm_ba
-000233d0: 7265 2873 656c 662c 2070 293a 0a20 2020  re(self, p):.   
-000233e0: 2020 2020 2022 656d 6265 6464 6564 5f73       "embedded_s
-000233f0: 636d 203a 2065 6d62 6564 6465 645f 7363  cm : embedded_sc
-00023400: 6d5f 6261 7265 220a 2020 2020 2020 2020  m_bare".        
-00023410: 705b 305d 203d 2070 5b31 5d0a 0a20 2020  p[0] = p[1]..   
-00023420: 2064 6566 2070 5f65 6d62 6564 6465 645f   def p_embedded_
-00023430: 7363 6d5f 5f73 636d 5f66 756e 6374 696f  scm__scm_functio
-00023440: 6e5f 6361 6c6c 2873 656c 662c 2070 293a  n_call(self, p):
-00023450: 0a20 2020 2020 2020 2022 656d 6265 6464  .        "embedd
-00023460: 6564 5f73 636d 203a 2073 636d 5f66 756e  ed_scm : scm_fun
-00023470: 6374 696f 6e5f 6361 6c6c 220a 2020 2020  ction_call".    
-00023480: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
-00023490: 0a20 2020 2023 2323 2065 6d62 6564 6465  .    ### embedde
-000234a0: 645f 7363 6d5f 6172 6720 2323 230a 0a20  d_scm_arg ###.. 
-000234b0: 2020 2064 6566 2070 5f65 6d62 6564 6465     def p_embedde
-000234c0: 645f 7363 6d5f 6172 675f 5f65 6d62 6564  d_scm_arg__embed
-000234d0: 6465 645f 7363 6d5f 6261 7265 5f61 7267  ded_scm_bare_arg
-000234e0: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-000234f0: 2020 2022 656d 6265 6464 6564 5f73 636d     "embedded_scm
-00023500: 5f61 7267 203a 2065 6d62 6564 6465 645f  _arg : embedded_
-00023510: 7363 6d5f 6261 7265 5f61 7267 220a 2020  scm_bare_arg".  
-00023520: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-00023530: 5d0a 0a20 2020 2064 6566 2070 5f65 6d62  ]..    def p_emb
-00023540: 6564 6465 645f 7363 6d5f 6172 675f 5f6d  edded_scm_arg__m
-00023550: 7573 6963 5f61 7267 2873 656c 662c 2070  usic_arg(self, p
-00023560: 293a 0a20 2020 2020 2020 2022 656d 6265  ):.        "embe
-00023570: 6464 6564 5f73 636d 5f61 7267 203a 206d  dded_scm_arg : m
-00023580: 7573 6963 5f61 7267 220a 2020 2020 2020  usic_arg".      
-00023590: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-000235a0: 2020 2064 6566 2070 5f65 6d62 6564 6465     def p_embedde
-000235b0: 645f 7363 6d5f 6172 675f 5f73 636d 5f66  d_scm_arg__scm_f
-000235c0: 756e 6374 696f 6e5f 6361 6c6c 2873 656c  unction_call(sel
-000235d0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-000235e0: 656d 6265 6464 6564 5f73 636d 5f61 7267  embedded_scm_arg
-000235f0: 203a 2073 636d 5f66 756e 6374 696f 6e5f   : scm_function_
-00023600: 6361 6c6c 220a 2020 2020 2020 2020 705b  call".        p[
-00023610: 305d 203d 2070 5b31 5d0a 0a20 2020 2023  0] = p[1]..    #
-00023620: 2323 2065 6d62 6564 6465 645f 7363 6d5f  ## embedded_scm_
-00023630: 6172 675f 636c 6f73 6564 2023 2323 0a0a  arg_closed ###..
-00023640: 2020 2020 6465 6620 705f 656d 6265 6464      def p_embedd
-00023650: 6564 5f73 636d 5f61 7267 5f63 6c6f 7365  ed_scm_arg_close
-00023660: 645f 5f63 6c6f 7365 645f 6d75 7369 6328  d__closed_music(
-00023670: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00023680: 2020 2265 6d62 6564 6465 645f 7363 6d5f    "embedded_scm_
-00023690: 6172 675f 636c 6f73 6564 203a 2063 6c6f  arg_closed : clo
-000236a0: 7365 645f 6d75 7369 6322 0a20 2020 2020  sed_music".     
-000236b0: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-000236c0: 2020 2020 6465 6620 705f 656d 6265 6464      def p_embedd
-000236d0: 6564 5f73 636d 5f61 7267 5f63 6c6f 7365  ed_scm_arg_close
-000236e0: 645f 5f65 6d62 6564 6465 645f 7363 6d5f  d__embedded_scm_
-000236f0: 6261 7265 5f61 7267 2873 656c 662c 2070  bare_arg(self, p
-00023700: 293a 0a20 2020 2020 2020 2022 656d 6265  ):.        "embe
-00023710: 6464 6564 5f73 636d 5f61 7267 5f63 6c6f  dded_scm_arg_clo
-00023720: 7365 6420 3a20 656d 6265 6464 6564 5f73  sed : embedded_s
-00023730: 636d 5f62 6172 655f 6172 6722 0a20 2020  cm_bare_arg".   
-00023740: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
-00023750: 0a0a 2020 2020 6465 6620 705f 656d 6265  ..    def p_embe
-00023760: 6464 6564 5f73 636d 5f61 7267 5f63 6c6f  dded_scm_arg_clo
-00023770: 7365 645f 5f73 636d 5f66 756e 6374 696f  sed__scm_functio
-00023780: 6e5f 6361 6c6c 5f63 6c6f 7365 6428 7365  n_call_closed(se
-00023790: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-000237a0: 2265 6d62 6564 6465 645f 7363 6d5f 6172  "embedded_scm_ar
-000237b0: 675f 636c 6f73 6564 203a 2073 636d 5f66  g_closed : scm_f
-000237c0: 756e 6374 696f 6e5f 6361 6c6c 5f63 6c6f  unction_call_clo
-000237d0: 7365 6422 0a20 2020 2020 2020 2070 5b30  sed".        p[0
-000237e0: 5d20 3d20 705b 315d 0a0a 2020 2020 2323  ] = p[1]..    ##
-000237f0: 2320 656d 6265 6464 6564 5f73 636d 5f62  # embedded_scm_b
-00023800: 6172 6520 2323 230a 0a20 2020 2064 6566  are ###..    def
-00023810: 2070 5f65 6d62 6564 6465 645f 7363 6d5f   p_embedded_scm_
-00023820: 6261 7265 5f5f 5343 4d5f 4944 454e 5449  bare__SCM_IDENTI
-00023830: 4649 4552 2873 656c 662c 2070 293a 0a20  FIER(self, p):. 
-00023840: 2020 2020 2020 2022 656d 6265 6464 6564         "embedded
-00023850: 5f73 636d 5f62 6172 6520 3a20 5343 4d5f  _scm_bare : SCM_
-00023860: 4944 454e 5449 4649 4552 220a 2020 2020  IDENTIFIER".    
-00023870: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
-00023880: 0a20 2020 2064 6566 2070 5f65 6d62 6564  .    def p_embed
-00023890: 6465 645f 7363 6d5f 6261 7265 5f5f 5343  ded_scm_bare__SC
-000238a0: 4d5f 544f 4b45 4e28 7365 6c66 2c20 7029  M_TOKEN(self, p)
-000238b0: 3a0a 2020 2020 2020 2020 2265 6d62 6564  :.        "embed
-000238c0: 6465 645f 7363 6d5f 6261 7265 203a 2053  ded_scm_bare : S
-000238d0: 434d 5f54 4f4b 454e 220a 2020 2020 2020  CM_TOKEN".      
-000238e0: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-000238f0: 2020 2023 2323 2065 6d62 6564 6465 645f     ### embedded_
-00023900: 7363 6d5f 6261 7265 5f61 7267 2023 2323  scm_bare_arg ###
-00023910: 0a0a 2020 2020 6465 6620 705f 656d 6265  ..    def p_embe
-00023920: 6464 6564 5f73 636d 5f62 6172 655f 6172  dded_scm_bare_ar
-00023930: 675f 5f53 5452 494e 4728 7365 6c66 2c20  g__STRING(self, 
-00023940: 7029 3a0a 2020 2020 2020 2020 2265 6d62  p):.        "emb
-00023950: 6564 6465 645f 7363 6d5f 6261 7265 5f61  edded_scm_bare_a
-00023960: 7267 203a 2053 5452 494e 4722 0a20 2020  rg : STRING".   
-00023970: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
-00023980: 0a0a 2020 2020 6465 6620 705f 656d 6265  ..    def p_embe
-00023990: 6464 6564 5f73 636d 5f62 6172 655f 6172  dded_scm_bare_ar
-000239a0: 675f 5f53 5452 494e 475f 4944 454e 5449  g__STRING_IDENTI
-000239b0: 4649 4552 2873 656c 662c 2070 293a 0a20  FIER(self, p):. 
-000239c0: 2020 2020 2020 2022 656d 6265 6464 6564         "embedded
-000239d0: 5f73 636d 5f62 6172 655f 6172 6720 3a20  _scm_bare_arg : 
-000239e0: 5354 5249 4e47 5f49 4445 4e54 4946 4945  STRING_IDENTIFIE
-000239f0: 5222 0a20 2020 2020 2020 2070 5b30 5d20  R".        p[0] 
-00023a00: 3d20 705b 315d 0a0a 2020 2020 2320 2020  = p[1]..    #   
-00023a10: 2064 6566 2070 5f65 6d62 6564 6465 645f   def p_embedded_
-00023a20: 7363 6d5f 6261 7265 5f61 7267 5f5f 626f  scm_bare_arg__bo
-00023a30: 6f6b 5f62 6c6f 636b 2873 656c 662c 2070  ok_block(self, p
-00023a40: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
-00023a50: 2765 6d62 6564 6465 645f 7363 6d5f 6261  'embedded_scm_ba
-00023a60: 7265 5f61 7267 203a 2062 6f6f 6b5f 626c  re_arg : book_bl
-00023a70: 6f63 6b27 0a20 2020 2023 2020 2020 2020  ock'.    #      
-00023a80: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-00023a90: 2020 2023 2020 2020 6465 6620 705f 656d     #    def p_em
-00023aa0: 6265 6464 6564 5f73 636d 5f62 6172 655f  bedded_scm_bare_
-00023ab0: 6172 675f 5f62 6f6f 6b70 6172 745f 626c  arg__bookpart_bl
-00023ac0: 6f63 6b28 7365 6c66 2c20 7029 3a0a 2020  ock(self, p):.  
-00023ad0: 2020 2320 2020 2020 2020 2027 656d 6265    #        'embe
-00023ae0: 6464 6564 5f73 636d 5f62 6172 655f 6172  dded_scm_bare_ar
-00023af0: 6720 3a20 626f 6f6b 7061 7274 5f62 6c6f  g : bookpart_blo
-00023b00: 636b 270a 2020 2020 2320 2020 2020 2020  ck'.    #       
-00023b10: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-00023b20: 2020 6465 6620 705f 656d 6265 6464 6564    def p_embedded
-00023b30: 5f73 636d 5f62 6172 655f 6172 675f 5f63  _scm_bare_arg__c
-00023b40: 6f6e 7465 7874 5f64 6566 5f73 7065 635f  ontext_def_spec_
-00023b50: 626c 6f63 6b28 7365 6c66 2c20 7029 3a0a  block(self, p):.
-00023b60: 2020 2020 2020 2020 2265 6d62 6564 6465          "embedde
-00023b70: 645f 7363 6d5f 6261 7265 5f61 7267 203a  d_scm_bare_arg :
-00023b80: 2063 6f6e 7465 7874 5f64 6566 5f73 7065   context_def_spe
-00023b90: 635f 626c 6f63 6b22 0a20 2020 2020 2020  c_block".       
-00023ba0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-00023bb0: 2020 6465 6620 705f 656d 6265 6464 6564    def p_embedded
-00023bc0: 5f73 636d 5f62 6172 655f 6172 675f 5f63  _scm_bare_arg__c
-00023bd0: 6f6e 7465 7874 5f6d 6f64 6966 6963 6174  ontext_modificat
-00023be0: 696f 6e28 7365 6c66 2c20 7029 3a0a 2020  ion(self, p):.  
-00023bf0: 2020 2020 2020 2265 6d62 6564 6465 645f        "embedded_
-00023c00: 7363 6d5f 6261 7265 5f61 7267 203a 2063  scm_bare_arg : c
-00023c10: 6f6e 7465 7874 5f6d 6f64 6966 6963 6174  ontext_modificat
-00023c20: 696f 6e22 0a20 2020 2020 2020 2070 5b30  ion".        p[0
-00023c30: 5d20 3d20 705b 315d 0a0a 2020 2020 6465  ] = p[1]..    de
-00023c40: 6620 705f 656d 6265 6464 6564 5f73 636d  f p_embedded_scm
-00023c50: 5f62 6172 655f 6172 675f 5f65 6d62 6564  _bare_arg__embed
-00023c60: 6465 645f 7363 6d5f 6261 7265 2873 656c  ded_scm_bare(sel
-00023c70: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-00023c80: 656d 6265 6464 6564 5f73 636d 5f62 6172  embedded_scm_bar
-00023c90: 655f 6172 6720 3a20 656d 6265 6464 6564  e_arg : embedded
-00023ca0: 5f73 636d 5f62 6172 6522 0a20 2020 2020  _scm_bare".     
-00023cb0: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-00023cc0: 2020 2020 6465 6620 705f 656d 6265 6464      def p_embedd
-00023cd0: 6564 5f73 636d 5f62 6172 655f 6172 675f  ed_scm_bare_arg_
-00023ce0: 5f66 756c 6c5f 6d61 726b 7570 2873 656c  _full_markup(sel
-00023cf0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-00023d00: 656d 6265 6464 6564 5f73 636d 5f62 6172  embedded_scm_bar
-00023d10: 655f 6172 6720 3a20 6675 6c6c 5f6d 6172  e_arg : full_mar
-00023d20: 6b75 7022 0a20 2020 2020 2020 2070 5b30  kup".        p[0
-00023d30: 5d20 3d20 705b 315d 0a0a 2020 2020 6465  ] = p[1]..    de
-00023d40: 6620 705f 656d 6265 6464 6564 5f73 636d  f p_embedded_scm
-00023d50: 5f62 6172 655f 6172 675f 5f66 756c 6c5f  _bare_arg__full_
-00023d60: 6d61 726b 7570 5f6c 6973 7428 7365 6c66  markup_list(self
-00023d70: 2c20 7029 3a0a 2020 2020 2020 2020 2265  , p):.        "e
-00023d80: 6d62 6564 6465 645f 7363 6d5f 6261 7265  mbedded_scm_bare
-00023d90: 5f61 7267 203a 2066 756c 6c5f 6d61 726b  _arg : full_mark
-00023da0: 7570 5f6c 6973 7422 0a20 2020 2020 2020  up_list".       
-00023db0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-00023dc0: 2020 6465 6620 705f 656d 6265 6464 6564    def p_embedded
-00023dd0: 5f73 636d 5f62 6172 655f 6172 675f 5f6f  _scm_bare_arg__o
-00023de0: 7574 7075 745f 6465 6628 7365 6c66 2c20  utput_def(self, 
-00023df0: 7029 3a0a 2020 2020 2020 2020 2265 6d62  p):.        "emb
-00023e00: 6564 6465 645f 7363 6d5f 6261 7265 5f61  edded_scm_bare_a
-00023e10: 7267 203a 206f 7574 7075 745f 6465 6622  rg : output_def"
-00023e20: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00023e30: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
-00023e40: 656d 6265 6464 6564 5f73 636d 5f62 6172  embedded_scm_bar
-00023e50: 655f 6172 675f 5f73 636f 7265 5f62 6c6f  e_arg__score_blo
-00023e60: 636b 2873 656c 662c 2070 293a 0a20 2020  ck(self, p):.   
-00023e70: 2020 2020 2022 656d 6265 6464 6564 5f73       "embedded_s
-00023e80: 636d 5f62 6172 655f 6172 6720 3a20 7363  cm_bare_arg : sc
-00023e90: 6f72 655f 626c 6f63 6b22 0a20 2020 2020  ore_block".     
-00023ea0: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-00023eb0: 2020 2020 2323 2320 656d 6265 6464 6564      ### embedded
-00023ec0: 5f73 636d 5f63 686f 7264 5f62 6f64 7920  _scm_chord_body 
-00023ed0: 2323 230a 0a20 2020 2064 6566 2070 5f65  ###..    def p_e
-00023ee0: 6d62 6564 6465 645f 7363 6d5f 6368 6f72  mbedded_scm_chor
-00023ef0: 645f 626f 6479 5f5f 5343 4d5f 4655 4e43  d_body__SCM_FUNC
-00023f00: 5449 4f4e 5f5f 6d75 7369 635f 6675 6e63  TION__music_func
-00023f10: 7469 6f6e 5f63 686f 7264 5f62 6f64 795f  tion_chord_body_
-00023f20: 6172 676c 6973 7428 0a20 2020 2020 2020  arglist(.       
-00023f30: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
-00023f40: 2020 2020 2020 2020 2265 6d62 6564 6465          "embedde
-00023f50: 645f 7363 6d5f 6368 6f72 645f 626f 6479  d_scm_chord_body
-00023f60: 203a 2053 434d 5f46 554e 4354 494f 4e20   : SCM_FUNCTION 
-00023f70: 6d75 7369 635f 6675 6e63 7469 6f6e 5f63  music_function_c
-00023f80: 686f 7264 5f62 6f64 795f 6172 676c 6973  hord_body_arglis
-00023f90: 7422 0a20 2020 2020 2020 2070 5b30 5d20  t".        p[0] 
-00023fa0: 3d20 5379 6e74 6178 4e6f 6465 2822 656d  = SyntaxNode("em
-00023fb0: 6265 6464 6564 5f73 636d 5f63 686f 7264  bedded_scm_chord
-00023fc0: 5f62 6f64 7922 2c20 705b 313a 5d29 0a0a  _body", p[1:])..
-00023fd0: 2020 2020 6465 6620 705f 656d 6265 6464      def p_embedd
-00023fe0: 6564 5f73 636d 5f63 686f 7264 5f62 6f64  ed_scm_chord_bod
-00023ff0: 795f 5f62 6172 655f 6e75 6d62 6572 2873  y__bare_number(s
-00024000: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-00024010: 2022 656d 6265 6464 6564 5f73 636d 5f63   "embedded_scm_c
-00024020: 686f 7264 5f62 6f64 7920 3a20 6261 7265  hord_body : bare
-00024030: 5f6e 756d 6265 7222 0a20 2020 2020 2020  _number".       
-00024040: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-00024050: 2020 6465 6620 705f 656d 6265 6464 6564    def p_embedded
-00024060: 5f73 636d 5f63 686f 7264 5f62 6f64 795f  _scm_chord_body_
-00024070: 5f63 686f 7264 5f62 6f64 795f 656c 656d  _chord_body_elem
-00024080: 656e 7428 7365 6c66 2c20 7029 3a0a 2020  ent(self, p):.  
-00024090: 2020 2020 2020 2265 6d62 6564 6465 645f        "embedded_
-000240a0: 7363 6d5f 6368 6f72 645f 626f 6479 203a  scm_chord_body :
-000240b0: 2063 686f 7264 5f62 6f64 795f 656c 656d   chord_body_elem
-000240c0: 656e 7422 0a20 2020 2020 2020 2070 5b30  ent".        p[0
-000240d0: 5d20 3d20 705b 315d 0a0a 2020 2020 6465  ] = p[1]..    de
-000240e0: 6620 705f 656d 6265 6464 6564 5f73 636d  f p_embedded_scm
-000240f0: 5f63 686f 7264 5f62 6f64 795f 5f65 6d62  _chord_body__emb
-00024100: 6564 6465 645f 7363 6d5f 6261 7265 5f61  edded_scm_bare_a
-00024110: 7267 2873 656c 662c 2070 293a 0a20 2020  rg(self, p):.   
-00024120: 2020 2020 2022 656d 6265 6464 6564 5f73       "embedded_s
-00024130: 636d 5f63 686f 7264 5f62 6f64 7920 3a20  cm_chord_body : 
-00024140: 656d 6265 6464 6564 5f73 636d 5f62 6172  embedded_scm_bar
-00024150: 655f 6172 6722 0a20 2020 2020 2020 2070  e_arg".        p
-00024160: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
-00024170: 6465 6620 705f 656d 6265 6464 6564 5f73  def p_embedded_s
-00024180: 636d 5f63 686f 7264 5f62 6f64 795f 5f66  cm_chord_body__f
-00024190: 7261 6374 696f 6e28 7365 6c66 2c20 7029  raction(self, p)
-000241a0: 3a0a 2020 2020 2020 2020 2265 6d62 6564  :.        "embed
-000241b0: 6465 645f 7363 6d5f 6368 6f72 645f 626f  ded_scm_chord_bo
-000241c0: 6479 203a 2066 7261 6374 696f 6e22 0a20  dy : fraction". 
-000241d0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-000241e0: 315d 0a0a 2020 2020 2320 2020 2064 6566  1]..    #    def
-000241f0: 2070 5f65 6d62 6564 6465 645f 7363 6d5f   p_embedded_scm_
-00024200: 6368 6f72 645f 626f 6479 5f5f 6c79 7269  chord_body__lyri
-00024210: 635f 656c 656d 656e 7428 7365 6c66 2c20  c_element(self, 
-00024220: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
-00024230: 2027 656d 6265 6464 6564 5f73 636d 5f63   'embedded_scm_c
-00024240: 686f 7264 5f62 6f64 7920 3a20 6c79 7269  hord_body : lyri
-00024250: 635f 656c 656d 656e 7427 0a20 2020 2023  c_element'.    #
-00024260: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
-00024270: 5b31 5d0a 0a20 2020 2023 2323 2065 6d62  [1]..    ### emb
-00024280: 6564 6465 645f 7363 6d5f 636c 6f73 6564  edded_scm_closed
-00024290: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
-000242a0: 656d 6265 6464 6564 5f73 636d 5f63 6c6f  embedded_scm_clo
-000242b0: 7365 645f 5f65 6d62 6564 6465 645f 7363  sed__embedded_sc
-000242c0: 6d5f 6261 7265 2873 656c 662c 2070 293a  m_bare(self, p):
-000242d0: 0a20 2020 2020 2020 2022 656d 6265 6464  .        "embedd
-000242e0: 6564 5f73 636d 5f63 6c6f 7365 6420 3a20  ed_scm_closed : 
-000242f0: 656d 6265 6464 6564 5f73 636d 5f62 6172  embedded_scm_bar
-00024300: 6522 0a20 2020 2020 2020 2070 5b30 5d20  e".        p[0] 
-00024310: 3d20 705b 315d 0a0a 2020 2020 6465 6620  = p[1]..    def 
-00024320: 705f 656d 6265 6464 6564 5f73 636d 5f63  p_embedded_scm_c
-00024330: 6c6f 7365 645f 5f73 636d 5f66 756e 6374  losed__scm_funct
-00024340: 696f 6e5f 6361 6c6c 5f63 6c6f 7365 6428  ion_call_closed(
-00024350: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00024360: 2020 2265 6d62 6564 6465 645f 7363 6d5f    "embedded_scm_
-00024370: 636c 6f73 6564 203a 2073 636d 5f66 756e  closed : scm_fun
-00024380: 6374 696f 6e5f 6361 6c6c 5f63 6c6f 7365  ction_call_close
-00024390: 6422 0a20 2020 2020 2020 2070 5b30 5d20  d".        p[0] 
-000243a0: 3d20 705b 315d 0a0a 2020 2020 2323 2320  = p[1]..    ### 
-000243b0: 6576 656e 745f 6368 6f72 6420 2323 230a  event_chord ###.
-000243c0: 0a20 2020 2064 6566 2070 5f65 7665 6e74  .    def p_event
-000243d0: 5f63 686f 7264 5f5f 4348 4f52 445f 5245  _chord__CHORD_RE
-000243e0: 5045 5449 5449 4f4e 5f5f 6f70 7469 6f6e  PETITION__option
-000243f0: 616c 5f6e 6f74 656d 6f64 655f 6475 7261  al_notemode_dura
-00024400: 7469 6f6e 5f5f 706f 7374 5f65 7665 6e74  tion__post_event
-00024410: 7328 0a20 2020 2020 2020 2073 656c 662c  s(.        self,
-00024420: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
-00024430: 2020 2265 7665 6e74 5f63 686f 7264 203a    "event_chord :
-00024440: 2043 484f 5244 5f52 4550 4554 4954 494f   CHORD_REPETITIO
-00024450: 4e20 6f70 7469 6f6e 616c 5f6e 6f74 656d  N optional_notem
-00024460: 6f64 655f 6475 7261 7469 6f6e 2070 6f73  ode_duration pos
-00024470: 745f 6576 656e 7473 220a 2020 2020 2020  t_events".      
-00024480: 2020 7069 7463 6865 7320 3d20 7365 6c66    pitches = self
-00024490: 2e63 6c69 656e 742e 5f6c 6173 745f 6368  .client._last_ch
-000244a0: 6f72 642e 7772 6974 7465 6e5f 7069 7463  ord.written_pitc
-000244b0: 6865 730a 2020 2020 2020 2020 6475 7261  hes.        dura
-000244c0: 7469 6f6e 203d 2070 5b32 5d2e 6475 7261  tion = p[2].dura
-000244d0: 7469 6f6e 0a20 2020 2020 2020 2063 686f  tion.        cho
-000244e0: 7264 203d 205f 7363 6f72 652e 4368 6f72  rd = _score.Chor
-000244f0: 6428 7069 7463 6865 732c 2064 7572 6174  d(pitches, durat
-00024500: 696f 6e29 0a20 2020 2020 2020 2073 656c  ion).        sel
-00024510: 662e 636c 6965 6e74 2e5f 6368 6f72 645f  f.client._chord_
-00024520: 7069 7463 685f 6f72 6465 7273 5b63 686f  pitch_orders[cho
-00024530: 7264 5d20 3d20 7069 7463 6865 730a 2020  rd] = pitches.  
-00024540: 2020 2020 2020 6966 2070 5b32 5d2e 6d75        if p[2].mu
-00024550: 6c74 6970 6c69 6572 2069 7320 6e6f 7420  ltiplier is not 
-00024560: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00024570: 2020 6d75 6c74 6970 6c69 6572 203d 205f    multiplier = _
-00024580: 6475 7261 7469 6f6e 2e4d 756c 7469 706c  duration.Multipl
-00024590: 6965 7228 705b 325d 2e6d 756c 7469 706c  ier(p[2].multipl
-000245a0: 6965 7229 0a20 2020 2020 2020 2020 2020  ier).           
-000245b0: 2063 686f 7264 2e6d 756c 7469 706c 6965   chord.multiplie
-000245c0: 7220 3d20 6d75 6c74 6970 6c69 6572 0a20  r = multiplier. 
-000245d0: 2020 2020 2020 2073 656c 662e 636c 6965         self.clie
-000245e0: 6e74 2e5f 7072 6f63 6573 735f 706f 7374  nt._process_post
-000245f0: 5f65 7665 6e74 7328 6368 6f72 642c 2070  _events(chord, p
-00024600: 5b33 5d29 0a20 2020 2020 2020 2061 6e6e  [3]).        ann
-00024610: 6f74 6174 696f 6e20 3d20 7b22 556e 7265  otation = {"Unre
-00024620: 6c61 7469 7661 626c 654d 7573 6963 223a  lativableMusic":
-00024630: 2054 7275 657d 0a20 2020 2020 2020 205f   True}.        _
-00024640: 6269 6e64 2e61 7474 6163 6828 616e 6e6f  bind.attach(anno
-00024650: 7461 7469 6f6e 2c20 6368 6f72 6429 0a20  tation, chord). 
-00024660: 2020 2020 2020 2069 6620 7365 6c66 2e63         if self.c
-00024670: 6c69 656e 742e 5f6c 6173 745f 6368 6f72  lient._last_chor
-00024680: 6420 6e6f 7420 696e 2073 656c 662e 636c  d not in self.cl
-00024690: 6965 6e74 2e5f 7265 7065 6174 6564 5f63  ient._repeated_c
-000246a0: 686f 7264 733a 0a20 2020 2020 2020 2020  hords:.         
-000246b0: 2020 2073 656c 662e 636c 6965 6e74 2e5f     self.client._
-000246c0: 7265 7065 6174 6564 5f63 686f 7264 735b  repeated_chords[
-000246d0: 7365 6c66 2e63 6c69 656e 742e 5f6c 6173  self.client._las
-000246e0: 745f 6368 6f72 645d 203d 205b 5d0a 2020  t_chord] = [].  
-000246f0: 2020 2020 2020 7365 6c66 2e63 6c69 656e        self.clien
-00024700: 742e 5f72 6570 6561 7465 645f 6368 6f72  t._repeated_chor
-00024710: 6473 5b73 656c 662e 636c 6965 6e74 2e5f  ds[self.client._
-00024720: 6c61 7374 5f63 686f 7264 5d2e 6170 7065  last_chord].appe
-00024730: 6e64 2863 686f 7264 290a 2020 2020 2020  nd(chord).      
-00024740: 2020 705b 305d 203d 2063 686f 7264 0a0a    p[0] = chord..
-00024750: 2020 2020 6465 6620 705f 6576 656e 745f      def p_event_
-00024760: 6368 6f72 645f 5f4d 554c 5449 5f4d 4541  chord__MULTI_MEA
-00024770: 5355 5245 5f52 4553 545f 5f6f 7074 696f  SURE_REST__optio
-00024780: 6e61 6c5f 6e6f 7465 6d6f 6465 5f64 7572  nal_notemode_dur
-00024790: 6174 696f 6e5f 5f70 6f73 745f 6576 656e  ation__post_even
-000247a0: 7473 280a 2020 2020 2020 2020 7365 6c66  ts(.        self
-000247b0: 2c20 700a 2020 2020 293a 0a20 2020 2020  , p.    ):.     
-000247c0: 2020 2022 6576 656e 745f 6368 6f72 6420     "event_chord 
-000247d0: 3a20 4d55 4c54 495f 4d45 4153 5552 455f  : MULTI_MEASURE_
-000247e0: 5245 5354 206f 7074 696f 6e61 6c5f 6e6f  REST optional_no
-000247f0: 7465 6d6f 6465 5f64 7572 6174 696f 6e20  temode_duration 
-00024800: 706f 7374 5f65 7665 6e74 7322 0a20 2020  post_events".   
-00024810: 2020 2020 2072 6573 7420 3d20 5f73 636f       rest = _sco
-00024820: 7265 2e4d 756c 7469 6d65 6173 7572 6552  re.MultimeasureR
-00024830: 6573 7428 705b 325d 2e64 7572 6174 696f  est(p[2].duratio
-00024840: 6e29 0a20 2020 2020 2020 2069 6620 705b  n).        if p[
-00024850: 325d 2e6d 756c 7469 706c 6965 7220 6973  2].multiplier is
-00024860: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00024870: 2020 2020 2020 206d 756c 7469 706c 6965         multiplie
-00024880: 7220 3d20 5f64 7572 6174 696f 6e2e 4d75  r = _duration.Mu
-00024890: 6c74 6970 6c69 6572 2870 5b32 5d2e 6d75  ltiplier(p[2].mu
-000248a0: 6c74 6970 6c69 6572 290a 2020 2020 2020  ltiplier).      
-000248b0: 2020 2020 2020 7265 7374 2e6d 756c 7469        rest.multi
-000248c0: 706c 6965 7220 3d20 6d75 6c74 6970 6c69  plier = multipli
-000248d0: 6572 0a20 2020 2020 2020 2073 656c 662e  er.        self.
-000248e0: 636c 6965 6e74 2e5f 7072 6f63 6573 735f  client._process_
-000248f0: 706f 7374 5f65 7665 6e74 7328 7265 7374  post_events(rest
-00024900: 2c20 705b 335d 290a 2020 2020 2020 2020  , p[3]).        
-00024910: 705b 305d 203d 2072 6573 740a 0a20 2020  p[0] = rest..   
-00024920: 2064 6566 2070 5f65 7665 6e74 5f63 686f   def p_event_cho
-00024930: 7264 5f5f 636f 6d6d 616e 645f 656c 656d  rd__command_elem
-00024940: 656e 7428 7365 6c66 2c20 7029 3a0a 2020  ent(self, p):.  
-00024950: 2020 2020 2020 2265 7665 6e74 5f63 686f        "event_cho
-00024960: 7264 203a 2063 6f6d 6d61 6e64 5f65 6c65  rd : command_ele
-00024970: 6d65 6e74 220a 2020 2020 2020 2020 705b  ment".        p[
-00024980: 305d 203d 2070 5b31 5d0a 0a20 2020 2064  0] = p[1]..    d
-00024990: 6566 2070 5f65 7665 6e74 5f63 686f 7264  ef p_event_chord
-000249a0: 5f5f 6e6f 7465 5f63 686f 7264 5f65 6c65  __note_chord_ele
-000249b0: 6d65 6e74 2873 656c 662c 2070 293a 0a20  ment(self, p):. 
-000249c0: 2020 2020 2020 2022 6576 656e 745f 6368         "event_ch
-000249d0: 6f72 6420 3a20 6e6f 7465 5f63 686f 7264  ord : note_chord
-000249e0: 5f65 6c65 6d65 6e74 220a 2020 2020 2020  _element".      
-000249f0: 2020 7365 6c66 2e63 6c69 656e 742e 5f6c    self.client._l
-00024a00: 6173 745f 6368 6f72 6420 3d20 705b 315d  ast_chord = p[1]
-00024a10: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00024a20: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
-00024a30: 6576 656e 745f 6368 6f72 645f 5f73 696d  event_chord__sim
-00024a40: 706c 655f 6368 6f72 645f 656c 656d 656e  ple_chord_elemen
-00024a50: 7473 5f5f 706f 7374 5f65 7665 6e74 7328  ts__post_events(
-00024a60: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00024a70: 2020 2265 7665 6e74 5f63 686f 7264 203a    "event_chord :
-00024a80: 2073 696d 706c 655f 6368 6f72 645f 656c   simple_chord_el
-00024a90: 656d 656e 7473 2070 6f73 745f 6576 656e  ements post_even
-00024aa0: 7473 220a 2020 2020 2020 2020 7365 6c66  ts".        self
-00024ab0: 2e63 6c69 656e 742e 5f70 726f 6365 7373  .client._process
-00024ac0: 5f70 6f73 745f 6576 656e 7473 2870 5b31  _post_events(p[1
-00024ad0: 5d2c 2070 5b32 5d29 0a20 2020 2020 2020  ], p[2]).       
-00024ae0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-00024af0: 2020 2323 2320 6576 656e 745f 6675 6e63    ### event_func
-00024b00: 7469 6f6e 5f65 7665 6e74 2023 2323 0a0a  tion_event ###..
-00024b10: 2020 2020 6465 6620 705f 6576 656e 745f      def p_event_
-00024b20: 6675 6e63 7469 6f6e 5f65 7665 6e74 5f5f  function_event__
-00024b30: 4556 454e 545f 4655 4e43 5449 4f4e 5f5f  EVENT_FUNCTION__
-00024b40: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-00024b50: 5f63 6c6f 7365 6428 7365 6c66 2c20 7029  _closed(self, p)
-00024b60: 3a0a 2020 2020 2020 2020 2265 7665 6e74  :.        "event
-00024b70: 5f66 756e 6374 696f 6e5f 6576 656e 7420  _function_event 
-00024b80: 3a20 4556 454e 545f 4655 4e43 5449 4f4e  : EVENT_FUNCTION
-00024b90: 2066 756e 6374 696f 6e5f 6172 676c 6973   function_arglis
-00024ba0: 745f 636c 6f73 6564 220a 2020 2020 2020  t_closed".      
-00024bb0: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-00024bc0: 6f64 6528 2265 7665 6e74 5f66 756e 6374  ode("event_funct
-00024bd0: 696f 6e5f 6576 656e 7422 2c20 705b 313a  ion_event", p[1:
-00024be0: 5d29 0a0a 2020 2020 2323 2320 6578 636c  ])..    ### excl
-00024bf0: 616d 6174 696f 6e73 2023 2323 0a0a 2020  amations ###..  
-00024c00: 2020 6465 6620 705f 6578 636c 616d 6174    def p_exclamat
-00024c10: 696f 6e73 5f5f 456d 7074 7928 7365 6c66  ions__Empty(self
-00024c20: 2c20 7029 3a0a 2020 2020 2020 2020 2265  , p):.        "e
-00024c30: 7863 6c61 6d61 7469 6f6e 7320 3a22 0a20  xclamations :". 
-00024c40: 2020 2020 2020 2070 5b30 5d20 3d20 300a         p[0] = 0.
-00024c50: 0a20 2020 2064 6566 2070 5f65 7863 6c61  .    def p_excla
-00024c60: 6d61 7469 6f6e 735f 5f65 7863 6c61 6d61  mations__exclama
-00024c70: 7469 6f6e 735f 5f43 6872 3333 2873 656c  tions__Chr33(sel
-00024c80: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-00024c90: 6578 636c 616d 6174 696f 6e73 203a 2065  exclamations : e
-00024ca0: 7863 6c61 6d61 7469 6f6e 7320 2721 2722  xclamations '!'"
-00024cb0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00024cc0: 705b 315d 202b 2031 0a0a 2020 2020 2323  p[1] + 1..    ##
-00024cd0: 2320 6669 6775 7265 5f6c 6973 7420 2323  # figure_list ##
-00024ce0: 230a 0a20 2020 2023 2020 2020 6465 6620  #..    #    def 
-00024cf0: 705f 6669 6775 7265 5f6c 6973 745f 5f45  p_figure_list__E
-00024d00: 6d70 7479 2873 656c 662c 2070 293a 0a20  mpty(self, p):. 
-00024d10: 2020 2023 2020 2020 2020 2020 2766 6967     #        'fig
-00024d20: 7572 655f 6c69 7374 203a 2027 0a20 2020  ure_list : '.   
-00024d30: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-00024d40: 2053 796e 7461 784e 6f64 6528 2766 6967   SyntaxNode('fig
-00024d50: 7572 655f 6c69 7374 272c 2070 5b31 3a5d  ure_list', p[1:]
-00024d60: 290a 0a20 2020 2023 2020 2020 6465 6620  )..    #    def 
-00024d70: 705f 6669 6775 7265 5f6c 6973 745f 5f66  p_figure_list__f
-00024d80: 6967 7572 655f 6c69 7374 5f5f 6272 5f62  igure_list__br_b
-00024d90: 6173 735f 6669 6775 7265 2873 656c 662c  ass_figure(self,
-00024da0: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-00024db0: 2020 2766 6967 7572 655f 6c69 7374 203a    'figure_list :
-00024dc0: 2066 6967 7572 655f 6c69 7374 2062 725f   figure_list br_
-00024dd0: 6261 7373 5f66 6967 7572 6527 0a20 2020  bass_figure'.   
-00024de0: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-00024df0: 2053 796e 7461 784e 6f64 6528 2766 6967   SyntaxNode('fig
-00024e00: 7572 655f 6c69 7374 272c 2070 5b31 3a5d  ure_list', p[1:]
-00024e10: 290a 0a20 2020 2023 2323 2066 6967 7572  )..    ### figur
-00024e20: 655f 7370 6563 2023 2323 0a0a 2020 2020  e_spec ###..    
-00024e30: 2320 2020 2064 6566 2070 5f66 6967 7572  #    def p_figur
-00024e40: 655f 7370 6563 5f5f 4649 4755 5245 5f4f  e_spec__FIGURE_O
-00024e50: 5045 4e5f 5f66 6967 7572 655f 6c69 7374  PEN__figure_list
-00024e60: 5f5f 4649 4755 5245 5f43 4c4f 5345 2873  __FIGURE_CLOSE(s
-00024e70: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
-00024e80: 2020 2020 2020 2766 6967 7572 655f 7370        'figure_sp
-00024e90: 6563 203a 2046 4947 5552 455f 4f50 454e  ec : FIGURE_OPEN
-00024ea0: 2066 6967 7572 655f 6c69 7374 2046 4947   figure_list FIG
-00024eb0: 5552 455f 434c 4f53 4527 0a20 2020 2023  URE_CLOSE'.    #
-00024ec0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-00024ed0: 796e 7461 784e 6f64 6528 2766 6967 7572  yntaxNode('figur
-00024ee0: 655f 7370 6563 272c 2070 5b31 3a5d 290a  e_spec', p[1:]).
-00024ef0: 0a20 2020 2023 2323 2066 6967 7572 6564  .    ### figured
-00024f00: 5f62 6173 735f 616c 7465 7261 7469 6f6e  _bass_alteration
-00024f10: 2023 2323 0a0a 2020 2020 2320 2020 2064   ###..    #    d
-00024f20: 6566 2070 5f66 6967 7572 6564 5f62 6173  ef p_figured_bas
-00024f30: 735f 616c 7465 7261 7469 6f6e 5f5f 4368  s_alteration__Ch
-00024f40: 7233 3328 7365 6c66 2c20 7029 3a0a 2020  r33(self, p):.  
-00024f50: 2020 2320 2020 2020 2020 2022 6669 6775    #        "figu
-00024f60: 7265 645f 6261 7373 5f61 6c74 6572 6174  red_bass_alterat
-00024f70: 696f 6e20 3a20 2721 2722 0a20 2020 2023  ion : '!'".    #
-00024f80: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-00024f90: 796e 7461 784e 6f64 6528 2766 6967 7572  yntaxNode('figur
-00024fa0: 6564 5f62 6173 735f 616c 7465 7261 7469  ed_bass_alterati
-00024fb0: 6f6e 272c 2070 5b31 3a5d 290a 0a20 2020  on', p[1:])..   
-00024fc0: 2023 2020 2020 6465 6620 705f 6669 6775   #    def p_figu
-00024fd0: 7265 645f 6261 7373 5f61 6c74 6572 6174  red_bass_alterat
-00024fe0: 696f 6e5f 5f43 6872 3433 2873 656c 662c  ion__Chr43(self,
-00024ff0: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-00025000: 2020 2266 6967 7572 6564 5f62 6173 735f    "figured_bass_
-00025010: 616c 7465 7261 7469 6f6e 203a 2027 2b27  alteration : '+'
-00025020: 220a 2020 2020 2320 2020 2020 2020 2070  ".    #        p
-00025030: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
-00025040: 2827 6669 6775 7265 645f 6261 7373 5f61  ('figured_bass_a
-00025050: 6c74 6572 6174 696f 6e27 2c20 705b 313a  lteration', p[1:
-00025060: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
-00025070: 2070 5f66 6967 7572 6564 5f62 6173 735f   p_figured_bass_
-00025080: 616c 7465 7261 7469 6f6e 5f5f 4368 7234  alteration__Chr4
-00025090: 3528 7365 6c66 2c20 7029 3a0a 2020 2020  5(self, p):.    
-000250a0: 2320 2020 2020 2020 2022 6669 6775 7265  #        "figure
-000250b0: 645f 6261 7373 5f61 6c74 6572 6174 696f  d_bass_alteratio
-000250c0: 6e20 3a20 272d 2722 0a20 2020 2023 2020  n : '-'".    #  
-000250d0: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
-000250e0: 7461 784e 6f64 6528 2766 6967 7572 6564  taxNode('figured
-000250f0: 5f62 6173 735f 616c 7465 7261 7469 6f6e  _bass_alteration
-00025100: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
-00025110: 2323 2066 6967 7572 6564 5f62 6173 735f  ## figured_bass_
-00025120: 6d6f 6469 6669 6361 7469 6f6e 2023 2323  modification ###
-00025130: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
-00025140: 5f66 6967 7572 6564 5f62 6173 735f 6d6f  _figured_bass_mo
-00025150: 6469 6669 6361 7469 6f6e 5f5f 4368 7234  dification__Chr4
-00025160: 3728 7365 6c66 2c20 7029 3a0a 2020 2020  7(self, p):.    
-00025170: 2320 2020 2020 2020 2022 6669 6775 7265  #        "figure
-00025180: 645f 6261 7373 5f6d 6f64 6966 6963 6174  d_bass_modificat
-00025190: 696f 6e20 3a20 272f 2722 0a20 2020 2023  ion : '/'".    #
-000251a0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-000251b0: 796e 7461 784e 6f64 6528 2766 6967 7572  yntaxNode('figur
-000251c0: 6564 5f62 6173 735f 6d6f 6469 6669 6361  ed_bass_modifica
-000251d0: 7469 6f6e 272c 2070 5b31 3a5d 290a 0a20  tion', p[1:]).. 
-000251e0: 2020 2023 2020 2020 6465 6620 705f 6669     #    def p_fi
-000251f0: 6775 7265 645f 6261 7373 5f6d 6f64 6966  gured_bass_modif
-00025200: 6963 6174 696f 6e5f 5f45 5f42 4143 4b53  ication__E_BACKS
-00025210: 4c41 5348 2873 656c 662c 2070 293a 0a20  LASH(self, p):. 
-00025220: 2020 2023 2020 2020 2020 2020 2766 6967     #        'fig
-00025230: 7572 6564 5f62 6173 735f 6d6f 6469 6669  ured_bass_modifi
-00025240: 6361 7469 6f6e 203a 2045 5f42 4143 4b53  cation : E_BACKS
-00025250: 4c41 5348 270a 2020 2020 2320 2020 2020  LASH'.    #     
-00025260: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-00025270: 4e6f 6465 2827 6669 6775 7265 645f 6261  Node('figured_ba
-00025280: 7373 5f6d 6f64 6966 6963 6174 696f 6e27  ss_modification'
-00025290: 2c20 705b 313a 5d29 0a0a 2020 2020 2320  , p[1:])..    # 
-000252a0: 2020 2064 6566 2070 5f66 6967 7572 6564     def p_figured
-000252b0: 5f62 6173 735f 6d6f 6469 6669 6361 7469  _bass_modificati
-000252c0: 6f6e 5f5f 455f 4558 434c 414d 4154 494f  on__E_EXCLAMATIO
-000252d0: 4e28 7365 6c66 2c20 7029 3a0a 2020 2020  N(self, p):.    
-000252e0: 2320 2020 2020 2020 2027 6669 6775 7265  #        'figure
-000252f0: 645f 6261 7373 5f6d 6f64 6966 6963 6174  d_bass_modificat
-00025300: 696f 6e20 3a20 455f 4558 434c 414d 4154  ion : E_EXCLAMAT
-00025310: 494f 4e27 0a20 2020 2023 2020 2020 2020  ION'.    #      
-00025320: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-00025330: 6f64 6528 2766 6967 7572 6564 5f62 6173  ode('figured_bas
-00025340: 735f 6d6f 6469 6669 6361 7469 6f6e 272c  s_modification',
-00025350: 2070 5b31 3a5d 290a 0a20 2020 2023 2020   p[1:])..    #  
-00025360: 2020 6465 6620 705f 6669 6775 7265 645f    def p_figured_
-00025370: 6261 7373 5f6d 6f64 6966 6963 6174 696f  bass_modificatio
-00025380: 6e5f 5f45 5f50 4c55 5328 7365 6c66 2c20  n__E_PLUS(self, 
-00025390: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
-000253a0: 2027 6669 6775 7265 645f 6261 7373 5f6d   'figured_bass_m
-000253b0: 6f64 6966 6963 6174 696f 6e20 3a20 455f  odification : E_
-000253c0: 504c 5553 270a 2020 2020 2320 2020 2020  PLUS'.    #     
-000253d0: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-000253e0: 4e6f 6465 2827 6669 6775 7265 645f 6261  Node('figured_ba
-000253f0: 7373 5f6d 6f64 6966 6963 6174 696f 6e27  ss_modification'
-00025400: 2c20 705b 313a 5d29 0a0a 2020 2020 2323  , p[1:])..    ##
-00025410: 2320 6669 6e67 6572 696e 6720 2323 230a  # fingering ###.
-00025420: 0a20 2020 2064 6566 2070 5f66 696e 6765  .    def p_finge
-00025430: 7269 6e67 5f5f 554e 5349 474e 4544 2873  ring__UNSIGNED(s
-00025440: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-00025450: 2022 6669 6e67 6572 696e 6720 3a20 554e   "fingering : UN
-00025460: 5349 474e 4544 220a 2020 2020 2020 2020  SIGNED".        
-00025470: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-00025480: 6528 2266 696e 6765 7269 6e67 222c 2070  e("fingering", p
-00025490: 5b31 3a5d 290a 0a20 2020 2023 2323 2066  [1:])..    ### f
-000254a0: 7261 6374 696f 6e20 2323 230a 0a20 2020  raction ###..   
-000254b0: 2064 6566 2070 5f66 7261 6374 696f 6e5f   def p_fraction_
-000254c0: 5f46 5241 4354 494f 4e28 7365 6c66 2c20  _FRACTION(self, 
-000254d0: 7029 3a0a 2020 2020 2020 2020 2266 7261  p):.        "fra
-000254e0: 6374 696f 6e20 3a20 4652 4143 5449 4f4e  ction : FRACTION
-000254f0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00025500: 2070 5b31 5d0a 0a20 2020 2064 6566 2070   p[1]..    def p
-00025510: 5f66 7261 6374 696f 6e5f 5f55 4e53 4947  _fraction__UNSIG
-00025520: 4e45 445f 5f43 6872 3437 5f5f 554e 5349  NED__Chr47__UNSI
-00025530: 474e 4544 2873 656c 662c 2070 293a 0a20  GNED(self, p):. 
-00025540: 2020 2020 2020 2022 6672 6163 7469 6f6e         "fraction
-00025550: 203a 2055 4e53 4947 4e45 4420 272f 2720   : UNSIGNED '/' 
-00025560: 554e 5349 474e 4544 220a 2020 2020 2020  UNSIGNED".      
-00025570: 2020 705b 305d 203d 2071 7569 636b 7469    p[0] = quickti
-00025580: 6f6e 732e 4672 6163 7469 6f6e 2870 5b31  ons.Fraction(p[1
-00025590: 5d2c 2070 5b33 5d29 0a0a 2020 2020 2323  ], p[3])..    ##
-000255a0: 2320 6675 6c6c 5f6d 6172 6b75 7020 2323  # full_markup ##
-000255b0: 230a 0a20 2020 2064 6566 2070 5f66 756c  #..    def p_ful
-000255c0: 6c5f 6d61 726b 7570 5f5f 4d41 524b 5550  l_markup__MARKUP
-000255d0: 5f49 4445 4e54 4946 4945 5228 7365 6c66  _IDENTIFIER(self
-000255e0: 2c20 7029 3a0a 2020 2020 2020 2020 2266  , p):.        "f
-000255f0: 756c 6c5f 6d61 726b 7570 203a 204d 4152  ull_markup : MAR
-00025600: 4b55 505f 4944 454e 5449 4649 4552 220a  KUP_IDENTIFIER".
-00025610: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-00025620: 796e 7461 784e 6f64 6528 2266 756c 6c5f  yntaxNode("full_
-00025630: 6d61 726b 7570 222c 2070 2e5f 5f67 6574  markup", p.__get
-00025640: 736c 6963 655f 5f28 312c 204e 6f6e 6529  slice__(1, None)
-00025650: 290a 0a20 2020 2064 6566 2070 5f66 756c  )..    def p_ful
-00025660: 6c5f 6d61 726b 7570 5f5f 4d41 524b 5550  l_markup__MARKUP
-00025670: 5f5f 6d61 726b 7570 5f74 6f70 2873 656c  __markup_top(sel
-00025680: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-00025690: 6675 6c6c 5f6d 6172 6b75 7020 3a20 4d41  full_markup : MA
-000256a0: 524b 5550 206d 6172 6b75 705f 746f 7022  RKUP markup_top"
-000256b0: 0a20 2020 2020 2020 2070 6172 7473 203d  .        parts =
-000256c0: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
-000256d0: 6974 656d 2069 6e20 705b 325d 3a0a 2020  item in p[2]:.  
-000256e0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-000256f0: 6e73 7461 6e63 6528 6974 656d 2c20 4d61  nstance(item, Ma
-00025700: 726b 7570 436f 6d6d 616e 6429 3a0a 2020  rkupCommand):.  
-00025710: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-00025720: 7274 732e 6170 7065 6e64 2869 7465 6d2e  rts.append(item.
-00025730: 5f67 6574 5f6c 696c 7970 6f6e 645f 666f  _get_lilypond_fo
-00025740: 726d 6174 2829 290a 2020 2020 2020 2020  rmat()).        
-00025750: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00025760: 2020 2020 2020 2020 2020 7061 7274 732e            parts.
-00025770: 6170 7065 6e64 2869 7465 6d29 0a20 2020  append(item).   
-00025780: 2020 2020 2073 7472 696e 6720 3d20 2220       string = " 
-00025790: 222e 6a6f 696e 2870 6172 7473 290a 2020  ".join(parts).  
-000257a0: 2020 2020 2020 7374 7269 6e67 203d 2072        string = r
-000257b0: 6622 5c6d 6172 6b75 7020 7b7b 207b 7374  f"\markup {{ {st
-000257c0: 7269 6e67 7d20 7d7d 220a 2020 2020 2020  ring} }}".      
-000257d0: 2020 705b 305d 203d 205f 696e 6469 6361    p[0] = _indica
-000257e0: 746f 7273 2e4d 6172 6b75 7028 7374 7269  tors.Markup(stri
-000257f0: 6e67 290a 2020 2020 2020 2020 7365 6c66  ng).        self
-00025800: 2e63 6c69 656e 742e 5f6c 6578 6572 2e70  .client._lexer.p
-00025810: 6f70 5f73 7461 7465 2829 0a20 2020 2020  op_state().     
-00025820: 2020 2073 656c 662e 636c 6965 6e74 2e5f     self.client._
-00025830: 7265 6c65 785f 6c6f 6f6b 6168 6561 6428  relex_lookahead(
-00025840: 290a 0a20 2020 2023 2323 2066 756c 6c5f  )..    ### full_
-00025850: 6d61 726b 7570 5f6c 6973 7420 2323 230a  markup_list ###.
-00025860: 0a20 2020 2064 6566 2070 5f66 756c 6c5f  .    def p_full_
-00025870: 6d61 726b 7570 5f6c 6973 745f 5f4d 4152  markup_list__MAR
-00025880: 4b55 504c 4953 545f 4944 454e 5449 4649  KUPLIST_IDENTIFI
-00025890: 4552 2873 656c 662c 2070 293a 0a20 2020  ER(self, p):.   
-000258a0: 2020 2020 2022 6675 6c6c 5f6d 6172 6b75       "full_marku
-000258b0: 705f 6c69 7374 203a 204d 4152 4b55 504c  p_list : MARKUPL
-000258c0: 4953 545f 4944 454e 5449 4649 4552 220a  IST_IDENTIFIER".
-000258d0: 2020 2020 2020 2020 2320 705b 305d 203d          # p[0] =
-000258e0: 2053 796e 7461 784e 6f64 6528 2766 756c   SyntaxNode('ful
-000258f0: 6c5f 6d61 726b 7570 5f6c 6973 7427 2c20  l_markup_list', 
-00025900: 705b 313a 5d29 0a20 2020 2020 2020 2070  p[1:]).        p
-00025910: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
-00025920: 6465 6620 705f 6675 6c6c 5f6d 6172 6b75  def p_full_marku
-00025930: 705f 6c69 7374 5f5f 4d41 524b 5550 4c49  p_list__MARKUPLI
-00025940: 5354 5f5f 6d61 726b 7570 5f6c 6973 7428  ST__markup_list(
-00025950: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00025960: 2020 2266 756c 6c5f 6d61 726b 7570 5f6c    "full_markup_l
-00025970: 6973 7420 3a20 4d41 524b 5550 4c49 5354  ist : MARKUPLIST
-00025980: 206d 6172 6b75 705f 6c69 7374 220a 2020   markup_list".  
-00025990: 2020 2020 2020 2320 705b 305d 203d 2053        # p[0] = S
-000259a0: 796e 7461 784e 6f64 6528 2766 756c 6c5f  yntaxNode('full_
-000259b0: 6d61 726b 7570 5f6c 6973 7427 2c20 705b  markup_list', p[
-000259c0: 313a 5d29 0a20 2020 2020 2020 2070 5b30  1:]).        p[0
-000259d0: 5d20 3d20 705b 325d 0a0a 2020 2020 2323  ] = p[2]..    ##
-000259e0: 2320 6675 6e63 7469 6f6e 5f61 7267 6c69  # function_argli
-000259f0: 7374 2023 2323 0a0a 2020 2020 6465 6620  st ###..    def 
-00025a00: 705f 6675 6e63 7469 6f6e 5f61 7267 6c69  p_function_argli
-00025a10: 7374 5f5f 6675 6e63 7469 6f6e 5f61 7267  st__function_arg
-00025a20: 6c69 7374 5f63 6f6d 6d6f 6e28 7365 6c66  list_common(self
-00025a30: 2c20 7029 3a0a 2020 2020 2020 2020 2266  , p):.        "f
-00025a40: 756e 6374 696f 6e5f 6172 676c 6973 7420  unction_arglist 
-00025a50: 3a20 6675 6e63 7469 6f6e 5f61 7267 6c69  : function_argli
-00025a60: 7374 5f63 6f6d 6d6f 6e22 0a20 2020 2020  st_common".     
-00025a70: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-00025a80: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
-00025a90: 6f6e 5f61 7267 6c69 7374 5f5f 6675 6e63  on_arglist__func
-00025aa0: 7469 6f6e 5f61 7267 6c69 7374 5f6e 6f6e  tion_arglist_non
-00025ab0: 6261 636b 7570 2873 656c 662c 2070 293a  backup(self, p):
-00025ac0: 0a20 2020 2020 2020 2022 6675 6e63 7469  .        "functi
-00025ad0: 6f6e 5f61 7267 6c69 7374 203a 2066 756e  on_arglist : fun
-00025ae0: 6374 696f 6e5f 6172 676c 6973 745f 6e6f  ction_arglist_no
-00025af0: 6e62 6163 6b75 7022 0a20 2020 2020 2020  nbackup".       
-00025b00: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-00025b10: 2020 2323 2320 6675 6e63 7469 6f6e 5f61    ### function_a
-00025b20: 7267 6c69 7374 5f62 6163 6b75 7020 2323  rglist_backup ##
-00025b30: 230a 0a20 2020 2064 6566 2070 5f66 756e  #..    def p_fun
-00025b40: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
-00025b50: 636b 7570 5f5f 4558 5045 4354 5f4f 5054  ckup__EXPECT_OPT
-00025b60: 494f 4e41 4c5f 5f45 5850 4543 545f 4455  IONAL__EXPECT_DU
-00025b70: 5241 5449 4f4e 5f5f 6675 6e63 7469 6f6e  RATION__function
-00025b80: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
-00025b90: 6b65 6570 5f5f 6475 7261 7469 6f6e 5f6c  keep__duration_l
-00025ba0: 656e 6774 6828 0a20 2020 2020 2020 2073  ength(.        s
-00025bb0: 656c 662c 2070 0a20 2020 2029 3a0a 2020  elf, p.    ):.  
-00025bc0: 2020 2020 2020 2266 756e 6374 696f 6e5f        "function_
-00025bd0: 6172 676c 6973 745f 6261 636b 7570 203a  arglist_backup :
-00025be0: 2045 5850 4543 545f 4f50 5449 4f4e 414c   EXPECT_OPTIONAL
-00025bf0: 2045 5850 4543 545f 4455 5241 5449 4f4e   EXPECT_DURATION
-00025c00: 2066 756e 6374 696f 6e5f 6172 676c 6973   function_arglis
-00025c10: 745f 636c 6f73 6564 5f6b 6565 7020 6475  t_closed_keep du
-00025c20: 7261 7469 6f6e 5f6c 656e 6774 6822 0a20  ration_length". 
-00025c30: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-00025c40: 335d 202b 205b 705b 345d 5d0a 0a20 2020  3] + [p[4]]..   
-00025c50: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
-00025c60: 6172 676c 6973 745f 6261 636b 7570 5f5f  arglist_backup__
-00025c70: 4558 5045 4354 5f4f 5054 494f 4e41 4c5f  EXPECT_OPTIONAL_
-00025c80: 5f45 5850 4543 545f 5049 5443 485f 5f66  _EXPECT_PITCH__f
-00025c90: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00025ca0: 6b65 6570 5f5f 7069 7463 685f 616c 736f  keep__pitch_also
-00025cb0: 5f69 6e5f 6368 6f72 6473 280a 2020 2020  _in_chords(.    
-00025cc0: 2020 2020 7365 6c66 2c20 700a 2020 2020      self, p.    
-00025cd0: 293a 0a20 2020 2020 2020 2022 6675 6e63  ):.        "func
-00025ce0: 7469 6f6e 5f61 7267 6c69 7374 5f62 6163  tion_arglist_bac
-00025cf0: 6b75 7020 3a20 4558 5045 4354 5f4f 5054  kup : EXPECT_OPT
-00025d00: 494f 4e41 4c20 4558 5045 4354 5f50 4954  IONAL EXPECT_PIT
-00025d10: 4348 2066 756e 6374 696f 6e5f 6172 676c  CH function_argl
-00025d20: 6973 745f 6b65 6570 2070 6974 6368 5f61  ist_keep pitch_a
-00025d30: 6c73 6f5f 696e 5f63 686f 7264 7322 0a20  lso_in_chords". 
-00025d40: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-00025d50: 335d 202b 205b 705b 345d 5d0a 0a20 2020  3] + [p[4]]..   
-00025d60: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
-00025d70: 6172 676c 6973 745f 6261 636b 7570 5f5f  arglist_backup__
-00025d80: 4558 5045 4354 5f4f 5054 494f 4e41 4c5f  EXPECT_OPTIONAL_
-00025d90: 5f45 5850 4543 545f 5343 4d5f 5f66 756e  _EXPECT_SCM__fun
-00025da0: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
-00025db0: 636b 7570 5f5f 4241 434b 5550 280a 2020  ckup__BACKUP(.  
-00025dc0: 2020 2020 2020 7365 6c66 2c20 700a 2020        self, p.  
-00025dd0: 2020 293a 0a20 2020 2020 2020 2022 6675    ):.        "fu
-00025de0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f62  nction_arglist_b
-00025df0: 6163 6b75 7020 3a20 4558 5045 4354 5f4f  ackup : EXPECT_O
-00025e00: 5054 494f 4e41 4c20 4558 5045 4354 5f53  PTIONAL EXPECT_S
-00025e10: 434d 2066 756e 6374 696f 6e5f 6172 676c  CM function_argl
-00025e20: 6973 745f 6261 636b 7570 2042 4143 4b55  ist_backup BACKU
-00025e30: 5022 0a20 2020 2020 2020 2070 5b30 5d20  P".        p[0] 
-00025e40: 3d20 705b 335d 202b 205b 705b 315d 5d0a  = p[3] + [p[1]].
-00025e50: 2020 2020 2020 2020 7365 6c66 2e63 6c69          self.cli
-00025e60: 656e 742e 5f62 6163 6b75 705f 746f 6b65  ent._backup_toke
-00025e70: 6e28 4661 6c73 652c 204e 6f6e 6529 0a0a  n(False, None)..
-00025e80: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
-00025e90: 6f6e 5f61 7267 6c69 7374 5f62 6163 6b75  on_arglist_backu
-00025ea0: 705f 5f45 5850 4543 545f 4f50 5449 4f4e  p__EXPECT_OPTION
-00025eb0: 414c 5f5f 4558 5045 4354 5f53 434d 5f5f  AL__EXPECT_SCM__
-00025ec0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-00025ed0: 5f63 6c6f 7365 645f 6b65 6570 5f5f 4368  _closed_keep__Ch
-00025ee0: 7234 355f 5f4e 554d 4245 525f 4944 454e  r45__NUMBER_IDEN
-00025ef0: 5449 4649 4552 280a 2020 2020 2020 2020  TIFIER(.        
-00025f00: 7365 6c66 2c20 700a 2020 2020 293a 0a20  self, p.    ):. 
-00025f10: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
-00025f20: 5f61 7267 6c69 7374 5f62 6163 6b75 7020  _arglist_backup 
-00025f30: 3a20 4558 5045 4354 5f4f 5054 494f 4e41  : EXPECT_OPTIONA
-00025f40: 4c20 4558 5045 4354 5f53 434d 2066 756e  L EXPECT_SCM fun
-00025f50: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
-00025f60: 6f73 6564 5f6b 6565 7020 272d 2720 4e55  osed_keep '-' NU
-00025f70: 4d42 4552 5f49 4445 4e54 4946 4945 5222  MBER_IDENTIFIER"
-00025f80: 0a20 2020 2020 2020 206e 203d 202d 3120  .        n = -1 
-00025f90: 2a20 705b 355d 0a20 2020 2020 2020 2069  * p[5].        i
-00025fa0: 6620 7365 6c66 2e63 6c69 656e 742e 5f74  f self.client._t
-00025fb0: 6573 745f 7363 6865 6d65 5f70 7265 6469  est_scheme_predi
-00025fc0: 6361 7465 2870 5b32 5d2c 206e 293a 0a20  cate(p[2], n):. 
-00025fd0: 2020 2020 2020 2020 2020 2070 5b30 5d20             p[0] 
-00025fe0: 3d20 705b 335d 202b 205b 705b 315d 5d0a  = p[3] + [p[1]].
-00025ff0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00026000: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-00026010: 6c69 656e 742e 5f62 6163 6b75 705f 746f  lient._backup_to
-00026020: 6b65 6e28 224e 554d 4245 525f 4944 454e  ken("NUMBER_IDEN
-00026030: 5449 4649 4552 222c 206e 290a 0a20 2020  TIFIER", n)..   
-00026040: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
-00026050: 6172 676c 6973 745f 6261 636b 7570 5f5f  arglist_backup__
-00026060: 4558 5045 4354 5f4f 5054 494f 4e41 4c5f  EXPECT_OPTIONAL_
-00026070: 5f45 5850 4543 545f 5343 4d5f 5f66 756e  _EXPECT_SCM__fun
-00026080: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
-00026090: 6f73 6564 5f6b 6565 705f 5f43 6872 3435  osed_keep__Chr45
-000260a0: 5f5f 5245 414c 280a 2020 2020 2020 2020  __REAL(.        
-000260b0: 7365 6c66 2c20 700a 2020 2020 293a 0a20  self, p.    ):. 
-000260c0: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
-000260d0: 5f61 7267 6c69 7374 5f62 6163 6b75 7020  _arglist_backup 
-000260e0: 3a20 4558 5045 4354 5f4f 5054 494f 4e41  : EXPECT_OPTIONA
-000260f0: 4c20 4558 5045 4354 5f53 434d 2066 756e  L EXPECT_SCM fun
-00026100: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
-00026110: 6f73 6564 5f6b 6565 7020 272d 2720 5245  osed_keep '-' RE
-00026120: 414c 220a 2020 2020 2020 2020 6e20 3d20  AL".        n = 
-00026130: 2d31 202a 2070 5b35 5d0a 2020 2020 2020  -1 * p[5].      
-00026140: 2020 6966 2073 656c 662e 636c 6965 6e74    if self.client
-00026150: 2e5f 7465 7374 5f73 6368 656d 655f 7072  ._test_scheme_pr
-00026160: 6564 6963 6174 6528 705b 325d 2c20 6e29  edicate(p[2], n)
-00026170: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-00026180: 6c66 2e63 6c69 656e 742e 5f72 6570 6172  lf.client._repar
-00026190: 7365 5f74 6f6b 656e 2870 5b32 5d2c 2022  se_token(p[2], "
-000261a0: 5245 414c 222c 206e 290a 2020 2020 2020  REAL", n).      
-000261b0: 2020 2020 2020 705b 305d 203d 2070 5b33        p[0] = p[3
-000261c0: 5d0a 2020 2020 2020 2020 656c 7365 3a0a  ].        else:.
-000261d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000261e0: 2e63 6c69 656e 742e 5f62 6163 6b75 705f  .client._backup_
-000261f0: 746f 6b65 6e28 2252 4541 4c22 2c20 6e29  token("REAL", n)
-00026200: 0a0a 2020 2020 6465 6620 705f 6675 6e63  ..    def p_func
-00026210: 7469 6f6e 5f61 7267 6c69 7374 5f62 6163  tion_arglist_bac
-00026220: 6b75 705f 5f45 5850 4543 545f 4f50 5449  kup__EXPECT_OPTI
-00026230: 4f4e 414c 5f5f 4558 5045 4354 5f53 434d  ONAL__EXPECT_SCM
-00026240: 5f5f 6675 6e63 7469 6f6e 5f61 7267 6c69  __function_argli
-00026250: 7374 5f63 6c6f 7365 645f 6b65 6570 5f5f  st_closed_keep__
-00026260: 4368 7234 355f 5f55 4e53 4947 4e45 4428  Chr45__UNSIGNED(
-00026270: 0a20 2020 2020 2020 2073 656c 662c 2070  .        self, p
-00026280: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
-00026290: 2266 756e 6374 696f 6e5f 6172 676c 6973  "function_arglis
-000262a0: 745f 6261 636b 7570 203a 2045 5850 4543  t_backup : EXPEC
-000262b0: 545f 4f50 5449 4f4e 414c 2045 5850 4543  T_OPTIONAL EXPEC
-000262c0: 545f 5343 4d20 6675 6e63 7469 6f6e 5f61  T_SCM function_a
-000262d0: 7267 6c69 7374 5f63 6c6f 7365 645f 6b65  rglist_closed_ke
-000262e0: 6570 2027 2d27 2055 4e53 4947 4e45 4422  ep '-' UNSIGNED"
-000262f0: 0a20 2020 2020 2020 206e 203d 202d 3120  .        n = -1 
-00026300: 2a20 705b 355d 0a20 2020 2020 2020 2069  * p[5].        i
-00026310: 6620 7365 6c66 2e63 6c69 656e 742e 5f74  f self.client._t
-00026320: 6573 745f 7363 6865 6d65 5f70 7265 6469  est_scheme_predi
-00026330: 6361 7465 7328 705b 325d 2c20 6e29 3a0a  cates(p[2], n):.
-00026340: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00026350: 2e63 6c69 656e 742e 5f72 6570 6172 7365  .client._reparse
-00026360: 5f74 6f6b 656e 2870 5b32 5d2c 2022 5245  _token(p[2], "RE
-00026370: 414c 222c 206e 290a 2020 2020 2020 2020  AL", n).        
-00026380: 2020 2020 705b 305d 203d 2070 5b33 5d0a      p[0] = p[3].
-00026390: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000263a0: 2020 2020 2020 2020 2020 2320 5468 6973            # This
-000263b0: 2077 6f75 6c64 206e 6f72 6d61 6c6c 7920   would normally 
-000263c0: 6372 6561 7465 2061 2046 696e 6765 7269  create a Fingeri
-000263d0: 6e67 4576 656e 742c 2061 6e64 2074 6573  ngEvent, and tes
-000263e0: 7420 7468 6174 2061 6761 696e 7374 2074  t that against t
-000263f0: 6865 2070 7265 6469 6361 7465 0a20 2020  he predicate.   
-00026400: 2020 2020 2020 2020 2073 656c 662e 636c           self.cl
-00026410: 6965 6e74 2e5f 6261 636b 7570 5f74 6f6b  ient._backup_tok
-00026420: 656e 2822 5245 414c 222c 206e 290a 2020  en("REAL", n).  
-00026430: 2020 2020 2020 2020 2020 705b 305d 203d            p[0] =
-00026440: 2070 5b33 5d20 2b20 5b70 5b31 5d5d 0a0a   p[3] + [p[1]]..
-00026450: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
-00026460: 6f6e 5f61 7267 6c69 7374 5f62 6163 6b75  on_arglist_backu
-00026470: 705f 5f45 5850 4543 545f 4f50 5449 4f4e  p__EXPECT_OPTION
-00026480: 414c 5f5f 4558 5045 4354 5f53 434d 5f5f  AL__EXPECT_SCM__
-00026490: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-000264a0: 5f63 6c6f 7365 645f 6b65 6570 5f5f 4652  _closed_keep__FR
-000264b0: 4143 5449 4f4e 280a 2020 2020 2020 2020  ACTION(.        
-000264c0: 7365 6c66 2c20 700a 2020 2020 293a 0a20  self, p.    ):. 
-000264d0: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
-000264e0: 5f61 7267 6c69 7374 5f62 6163 6b75 7020  _arglist_backup 
-000264f0: 3a20 4558 5045 4354 5f4f 5054 494f 4e41  : EXPECT_OPTIONA
-00026500: 4c20 4558 5045 4354 5f53 434d 2066 756e  L EXPECT_SCM fun
-00026510: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
-00026520: 6f73 6564 5f6b 6565 7020 4652 4143 5449  osed_keep FRACTI
-00026530: 4f4e 220a 2020 2020 2020 2020 6966 2073  ON".        if s
-00026540: 656c 662e 636c 6965 6e74 2e5f 7465 7374  elf.client._test
-00026550: 5f73 6368 656d 655f 7072 6564 6963 6174  _scheme_predicat
-00026560: 6528 705b 325d 2c20 705b 345d 293a 0a20  e(p[2], p[4]):. 
-00026570: 2020 2020 2020 2020 2020 2070 5b30 5d20             p[0] 
-00026580: 3d20 705b 335d 202b 205b 705b 345d 5d0a  = p[3] + [p[4]].
-00026590: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000265a0: 2020 2020 2020 2020 2020 705b 305d 203d            p[0] =
-000265b0: 2070 5b33 5d20 2b20 5b70 5b31 5d5d 0a20   p[3] + [p[1]]. 
-000265c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000265d0: 636c 6965 6e74 2e5f 6261 636b 7570 5f74  client._backup_t
-000265e0: 6f6b 656e 2822 4652 4143 5449 4f4e 222c  oken("FRACTION",
-000265f0: 2070 5b34 5d29 0a0a 2020 2020 6465 6620   p[4])..    def 
-00026600: 705f 6675 6e63 7469 6f6e 5f61 7267 6c69  p_function_argli
-00026610: 7374 5f62 6163 6b75 705f 5f45 5850 4543  st_backup__EXPEC
-00026620: 545f 4f50 5449 4f4e 414c 5f5f 4558 5045  T_OPTIONAL__EXPE
-00026630: 4354 5f53 434d 5f5f 6675 6e63 7469 6f6e  CT_SCM__function
-00026640: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
-00026650: 6b65 6570 5f5f 4e55 4d42 4552 5f49 4445  keep__NUMBER_IDE
-00026660: 4e54 4946 4945 5228 0a20 2020 2020 2020  NTIFIER(.       
-00026670: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
-00026680: 2020 2020 2020 2020 2266 756e 6374 696f          "functio
-00026690: 6e5f 6172 676c 6973 745f 6261 636b 7570  n_arglist_backup
-000266a0: 203a 2045 5850 4543 545f 4f50 5449 4f4e   : EXPECT_OPTION
-000266b0: 414c 2045 5850 4543 545f 5343 4d20 6675  AL EXPECT_SCM fu
-000266c0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
-000266d0: 6c6f 7365 645f 6b65 6570 204e 554d 4245  losed_keep NUMBE
-000266e0: 525f 4944 454e 5449 4649 4552 220a 2020  R_IDENTIFIER".  
-000266f0: 2020 2020 2020 6966 2073 656c 662e 636c        if self.cl
-00026700: 6965 6e74 2e5f 7465 7374 5f73 6368 656d  ient._test_schem
-00026710: 655f 7072 6564 6963 6174 6528 705b 325d  e_predicate(p[2]
-00026720: 2c20 705b 345d 293a 0a20 2020 2020 2020  , p[4]):.       
-00026730: 2020 2020 2070 5b30 5d20 3d20 705b 335d       p[0] = p[3]
-00026740: 202b 205b 705b 345d 5d0a 2020 2020 2020   + [p[4]].      
-00026750: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00026760: 2020 2020 705b 305d 203d 2070 5b33 5d20      p[0] = p[3] 
-00026770: 2b20 5b70 5b31 5d5d 0a20 2020 2020 2020  + [p[1]].       
-00026780: 2020 2020 2073 656c 662e 636c 6965 6e74       self.client
-00026790: 2e5f 6261 636b 7570 5f74 6f6b 656e 2822  ._backup_token("
-000267a0: 4e55 4d42 4552 5f49 4445 4e54 4946 4945  NUMBER_IDENTIFIE
-000267b0: 5222 2c20 705b 345d 290a 0a20 2020 2064  R", p[4])..    d
-000267c0: 6566 2070 5f66 756e 6374 696f 6e5f 6172  ef p_function_ar
-000267d0: 676c 6973 745f 6261 636b 7570 5f5f 4558  glist_backup__EX
-000267e0: 5045 4354 5f4f 5054 494f 4e41 4c5f 5f45  PECT_OPTIONAL__E
-000267f0: 5850 4543 545f 5343 4d5f 5f66 756e 6374  XPECT_SCM__funct
-00026800: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
-00026810: 6564 5f6b 6565 705f 5f52 4541 4c28 0a20  ed_keep__REAL(. 
-00026820: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
-00026830: 2020 2029 3a0a 2020 2020 2020 2020 2266     ):.        "f
-00026840: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00026850: 6261 636b 7570 203a 2045 5850 4543 545f  backup : EXPECT_
-00026860: 4f50 5449 4f4e 414c 2045 5850 4543 545f  OPTIONAL EXPECT_
-00026870: 5343 4d20 6675 6e63 7469 6f6e 5f61 7267  SCM function_arg
-00026880: 6c69 7374 5f63 6c6f 7365 645f 6b65 6570  list_closed_keep
-00026890: 2052 4541 4c22 0a20 2020 2020 2020 2069   REAL".        i
-000268a0: 6620 7365 6c66 2e63 6c69 656e 742e 5f74  f self.client._t
-000268b0: 6573 745f 7363 6865 6d65 5f70 7265 6469  est_scheme_predi
-000268c0: 6361 7465 2870 5b32 5d2c 2070 5b34 5d29  cate(p[2], p[4])
-000268d0: 3a0a 2020 2020 2020 2020 2020 2020 705b  :.            p[
-000268e0: 305d 203d 2070 5b33 5d0a 2020 2020 2020  0] = p[3].      
-000268f0: 2020 2020 2020 7365 6c66 2e63 6c69 656e        self.clien
-00026900: 742e 5f72 6570 6172 7365 5f74 6f6b 656e  t._reparse_token
-00026910: 2870 5b32 5d2c 2022 5245 414c 222c 2070  (p[2], "REAL", p
-00026920: 5b34 5d29 0a20 2020 2020 2020 2065 6c73  [4]).        els
-00026930: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
-00026940: 5b30 5d20 3d20 705b 335d 202b 205b 705b  [0] = p[3] + [p[
-00026950: 315d 5d0a 2020 2020 2020 2020 2020 2020  1]].            
-00026960: 7365 6c66 2e63 6c69 656e 742e 5f62 6163  self.client._bac
-00026970: 6b75 705f 746f 6b65 6e28 2252 4541 4c22  kup_token("REAL"
-00026980: 2c20 705b 345d 290a 0a20 2020 2064 6566  , p[4])..    def
-00026990: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
-000269a0: 6973 745f 6261 636b 7570 5f5f 4558 5045  ist_backup__EXPE
-000269b0: 4354 5f4f 5054 494f 4e41 4c5f 5f45 5850  CT_OPTIONAL__EXP
-000269c0: 4543 545f 5343 4d5f 5f66 756e 6374 696f  ECT_SCM__functio
-000269d0: 6e5f 6172 676c 6973 745f 636c 6f73 6564  n_arglist_closed
-000269e0: 5f6b 6565 705f 5f55 4e53 4947 4e45 4428  _keep__UNSIGNED(
-000269f0: 0a20 2020 2020 2020 2073 656c 662c 2070  .        self, p
-00026a00: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
-00026a10: 2266 756e 6374 696f 6e5f 6172 676c 6973  "function_arglis
-00026a20: 745f 6261 636b 7570 203a 2045 5850 4543  t_backup : EXPEC
-00026a30: 545f 4f50 5449 4f4e 414c 2045 5850 4543  T_OPTIONAL EXPEC
-00026a40: 545f 5343 4d20 6675 6e63 7469 6f6e 5f61  T_SCM function_a
-00026a50: 7267 6c69 7374 5f63 6c6f 7365 645f 6b65  rglist_closed_ke
-00026a60: 6570 2055 4e53 4947 4e45 4422 0a20 2020  ep UNSIGNED".   
-00026a70: 2020 2020 2069 6620 7365 6c66 2e63 6c69       if self.cli
-00026a80: 656e 742e 5f74 6573 745f 7363 6865 6d65  ent._test_scheme
-00026a90: 5f70 7265 6469 6361 7465 2870 5b32 5d2c  _predicate(p[2],
-00026aa0: 2070 5b34 5d29 3a0a 2020 2020 2020 2020   p[4]):.        
-00026ab0: 2020 2020 705b 305d 203d 2070 5b33 5d0a      p[0] = p[3].
-00026ac0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00026ad0: 2e63 6c69 656e 742e 5f72 6570 6172 7365  .client._reparse
-00026ae0: 5f74 6f6b 656e 2870 5b32 5d2c 2022 554e  _token(p[2], "UN
-00026af0: 5349 474e 4544 222c 2070 5b34 5d29 0a20  SIGNED", p[4]). 
-00026b00: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00026b10: 2020 2020 2020 2020 2070 5b30 5d20 3d20           p[0] = 
-00026b20: 705b 335d 202b 205b 705b 315d 5d0a 2020  p[3] + [p[1]].  
-00026b30: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-00026b40: 6c69 656e 742e 5f62 6163 6b75 705f 746f  lient._backup_to
-00026b50: 6b65 6e28 2255 4e53 4947 4e45 4422 2c20  ken("UNSIGNED", 
-00026b60: 705b 345d 290a 0a20 2020 2064 6566 2070  p[4])..    def p
-00026b70: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-00026b80: 745f 6261 636b 7570 5f5f 4558 5045 4354  t_backup__EXPECT
-00026b90: 5f4f 5054 494f 4e41 4c5f 5f45 5850 4543  _OPTIONAL__EXPEC
-00026ba0: 545f 5343 4d5f 5f66 756e 6374 696f 6e5f  T_SCM__function_
-00026bb0: 6172 676c 6973 745f 636c 6f73 6564 5f6b  arglist_closed_k
-00026bc0: 6565 705f 5f70 6f73 745f 6576 656e 745f  eep__post_event_
-00026bd0: 6e6f 6669 6e67 6572 280a 2020 2020 2020  nofinger(.      
-00026be0: 2020 7365 6c66 2c20 700a 2020 2020 293a    self, p.    ):
-00026bf0: 0a20 2020 2020 2020 2022 6675 6e63 7469  .        "functi
-00026c00: 6f6e 5f61 7267 6c69 7374 5f62 6163 6b75  on_arglist_backu
-00026c10: 7020 3a20 4558 5045 4354 5f4f 5054 494f  p : EXPECT_OPTIO
-00026c20: 4e41 4c20 4558 5045 4354 5f53 434d 2066  NAL EXPECT_SCM f
-00026c30: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00026c40: 636c 6f73 6564 5f6b 6565 7020 706f 7374  closed_keep post
-00026c50: 5f65 7665 6e74 5f6e 6f66 696e 6765 7222  _event_nofinger"
-00026c60: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00026c70: 2e63 6c69 656e 742e 5f74 6573 745f 7363  .client._test_sc
-00026c80: 6865 6d65 5f70 7265 6469 6361 7465 2870  heme_predicate(p
-00026c90: 5b32 5d2c 2070 5b34 5d29 3a0a 2020 2020  [2], p[4]):.    
-00026ca0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
-00026cb0: 5b33 5d20 2b20 5b70 5b34 5d5d 0a20 2020  [3] + [p[4]].   
-00026cc0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00026cd0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-00026ce0: 335d 202b 205b 705b 315d 5d0a 2020 2020  3] + [p[1]].    
-00026cf0: 2020 2020 2020 2020 7365 6c66 2e63 6c69          self.cli
-00026d00: 656e 742e 5f62 6163 6b75 705f 746f 6b65  ent._backup_toke
-00026d10: 6e28 2245 5645 4e54 5f49 4445 4e54 4946  n("EVENT_IDENTIF
-00026d20: 4945 5222 2c20 705b 345d 290a 0a20 2020  IER", p[4])..   
-00026d30: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
-00026d40: 6172 676c 6973 745f 6261 636b 7570 5f5f  arglist_backup__
-00026d50: 4558 5045 4354 5f4f 5054 494f 4e41 4c5f  EXPECT_OPTIONAL_
-00026d60: 5f45 5850 4543 545f 5343 4d5f 5f66 756e  _EXPECT_SCM__fun
-00026d70: 6374 696f 6e5f 6172 676c 6973 745f 6b65  ction_arglist_ke
-00026d80: 6570 5f5f 656d 6265 6464 6564 5f73 636d  ep__embedded_scm
-00026d90: 5f61 7267 5f63 6c6f 7365 6428 0a20 2020  _arg_closed(.   
-00026da0: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
-00026db0: 2029 3a0a 2020 2020 2020 2020 2266 756e   ):.        "fun
-00026dc0: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
-00026dd0: 636b 7570 203a 2045 5850 4543 545f 4f50  ckup : EXPECT_OP
-00026de0: 5449 4f4e 414c 2045 5850 4543 545f 5343  TIONAL EXPECT_SC
-00026df0: 4d20 6675 6e63 7469 6f6e 5f61 7267 6c69  M function_argli
-00026e00: 7374 5f6b 6565 7020 656d 6265 6464 6564  st_keep embedded
-00026e10: 5f73 636d 5f61 7267 5f63 6c6f 7365 6422  _scm_arg_closed"
-00026e20: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00026e30: 2e63 6c69 656e 742e 5f74 6573 745f 7363  .client._test_sc
-00026e40: 6865 6d65 5f70 7265 6469 6361 7465 2870  heme_predicate(p
-00026e50: 5b32 5d2c 2070 5b34 5d29 3a0a 2020 2020  [2], p[4]):.    
-00026e60: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
-00026e70: 5b33 5d20 2b20 5b70 5b34 5d5d 0a20 2020  [3] + [p[4]].   
-00026e80: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00026e90: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-00026ea0: 335d 202b 205b 705b 315d 5d0a 2020 2020  3] + [p[1]].    
-00026eb0: 2020 2020 2020 2020 7365 6c66 2e63 6c69          self.cli
-00026ec0: 656e 742e 5f62 6163 6b75 705f 746f 6b65  ent._backup_toke
-00026ed0: 6e28 2253 434d 5f49 4445 4e54 4946 4945  n("SCM_IDENTIFIE
-00026ee0: 5222 2c20 705b 345d 290a 0a20 2020 2023  R", p[4])..    #
-00026ef0: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
-00026f00: 6f6e 5f61 7267 6c69 7374 5f62 6163 6b75  on_arglist_backu
-00026f10: 705f 5f45 5850 4543 545f 4f50 5449 4f4e  p__EXPECT_OPTION
-00026f20: 414c 5f5f 4558 5045 4354 5f53 434d 5f5f  AL__EXPECT_SCM__
-00026f30: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-00026f40: 5f6b 6565 705f 5f6c 7972 6963 5f65 6c65  _keep__lyric_ele
-00026f50: 6d65 6e74 2873 656c 662c 2070 293a 0a20  ment(self, p):. 
-00026f60: 2020 2023 2020 2020 2020 2020 2766 756e     #        'fun
-00026f70: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
-00026f80: 636b 7570 203a 2045 5850 4543 545f 4f50  ckup : EXPECT_OP
-00026f90: 5449 4f4e 414c 2045 5850 4543 545f 5343  TIONAL EXPECT_SC
-00026fa0: 4d20 6675 6e63 7469 6f6e 5f61 7267 6c69  M function_argli
-00026fb0: 7374 5f6b 6565 7020 6c79 7269 635f 656c  st_keep lyric_el
-00026fc0: 656d 656e 7427 0a20 2020 2023 2020 2020  ement'.    #    
-00026fd0: 2020 2020 6966 2073 656c 662e 636c 6965      if self.clie
-00026fe0: 6e74 2e5f 7465 7374 5f73 6368 656d 655f  nt._test_scheme_
-00026ff0: 7072 6564 6963 6174 6528 705b 325d 2c20  predicate(p[2], 
-00027000: 705b 345d 293a 0a20 2020 2023 2020 2020  p[4]):.    #    
-00027010: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
-00027020: 5b33 5d20 2b20 5b70 5b34 5d5d 0a20 2020  [3] + [p[4]].   
-00027030: 2023 2020 2020 2020 2020 656c 7365 3a0a   #        else:.
-00027040: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00027050: 2070 5b30 5d20 3d20 705b 335d 202b 205b   p[0] = p[3] + [
-00027060: 705b 315d 5d0a 2020 2020 2320 2020 2020  p[1]].    #     
-00027070: 2020 2020 2020 2073 656c 662e 636c 6965         self.clie
-00027080: 6e74 2e5f 6261 636b 7570 5f74 6f6b 656e  nt._backup_token
-00027090: 2827 4c59 5249 4353 5f53 5452 494e 4727  ('LYRICS_STRING'
-000270a0: 2c20 705b 345d 290a 0a20 2020 2064 6566  , p[4])..    def
-000270b0: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
-000270c0: 6973 745f 6261 636b 7570 5f5f 6675 6e63  ist_backup__func
-000270d0: 7469 6f6e 5f61 7267 6c69 7374 5f62 6163  tion_arglist_bac
-000270e0: 6b75 705f 5f52 4550 4152 5345 5f5f 6261  kup__REPARSE__ba
-000270f0: 7265 5f6e 756d 6265 7228 0a20 2020 2020  re_number(.     
-00027100: 2020 2073 656c 662c 2070 0a20 2020 2029     self, p.    )
-00027110: 3a0a 2020 2020 2020 2020 2266 756e 6374  :.        "funct
-00027120: 696f 6e5f 6172 676c 6973 745f 6261 636b  ion_arglist_back
-00027130: 7570 203a 2066 756e 6374 696f 6e5f 6172  up : function_ar
-00027140: 676c 6973 745f 6261 636b 7570 2052 4550  glist_backup REP
-00027150: 4152 5345 2062 6172 655f 6e75 6d62 6572  ARSE bare_number
-00027160: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00027170: 2073 656c 662e 636c 6965 6e74 2e5f 6368   self.client._ch
-00027180: 6563 6b5f 7363 6865 6d65 5f61 7267 756d  eck_scheme_argum
-00027190: 656e 7428 705b 315d 2c20 705b 335d 2c20  ent(p[1], p[3], 
-000271a0: 705b 325d 290a 0a20 2020 2064 6566 2070  p[2])..    def p
-000271b0: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-000271c0: 745f 6261 636b 7570 5f5f 6675 6e63 7469  t_backup__functi
-000271d0: 6f6e 5f61 7267 6c69 7374 5f62 6163 6b75  on_arglist_backu
-000271e0: 705f 5f52 4550 4152 5345 5f5f 656d 6265  p__REPARSE__embe
-000271f0: 6464 6564 5f73 636d 5f61 7267 5f63 6c6f  dded_scm_arg_clo
-00027200: 7365 6428 0a20 2020 2020 2020 2073 656c  sed(.        sel
-00027210: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
-00027220: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
-00027230: 676c 6973 745f 6261 636b 7570 203a 2066  glist_backup : f
-00027240: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00027250: 6261 636b 7570 2052 4550 4152 5345 2065  backup REPARSE e
-00027260: 6d62 6564 6465 645f 7363 6d5f 6172 675f  mbedded_scm_arg_
-00027270: 636c 6f73 6564 220a 2020 2020 2020 2020  closed".        
-00027280: 705b 305d 203d 2073 656c 662e 636c 6965  p[0] = self.clie
-00027290: 6e74 2e5f 6368 6563 6b5f 7363 6865 6d65  nt._check_scheme
-000272a0: 5f61 7267 756d 656e 7428 705b 315d 2c20  _argument(p[1], 
-000272b0: 705b 335d 2c20 705b 325d 290a 0a20 2020  p[3], p[2])..   
-000272c0: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
-000272d0: 6172 676c 6973 745f 6261 636b 7570 5f5f  arglist_backup__
-000272e0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-000272f0: 5f62 6163 6b75 705f 5f52 4550 4152 5345  _backup__REPARSE
-00027300: 5f5f 6672 6163 7469 6f6e 2873 656c 662c  __fraction(self,
-00027310: 2070 293a 0a20 2020 2020 2020 2022 6675   p):.        "fu
-00027320: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f62  nction_arglist_b
-00027330: 6163 6b75 7020 3a20 6675 6e63 7469 6f6e  ackup : function
-00027340: 5f61 7267 6c69 7374 5f62 6163 6b75 7020  _arglist_backup 
-00027350: 5245 5041 5253 4520 6672 6163 7469 6f6e  REPARSE fraction
-00027360: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00027370: 2073 656c 662e 636c 6965 6e74 2e5f 6368   self.client._ch
-00027380: 6563 6b5f 7363 6865 6d65 5f61 7267 756d  eck_scheme_argum
-00027390: 656e 7428 705b 315d 2c20 705b 335d 2c20  ent(p[1], p[3], 
-000273a0: 705b 325d 290a 0a20 2020 2023 2323 2066  p[2])..    ### f
-000273b0: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-000273c0: 6261 7265 2023 2323 0a0a 2020 2020 6465  bare ###..    de
-000273d0: 6620 705f 6675 6e63 7469 6f6e 5f61 7267  f p_function_arg
-000273e0: 6c69 7374 5f62 6172 655f 5f45 5850 4543  list_bare__EXPEC
-000273f0: 545f 4455 5241 5449 4f4e 5f5f 6675 6e63  T_DURATION__func
-00027400: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
-00027410: 7365 645f 6f70 7469 6f6e 616c 5f5f 6475  sed_optional__du
-00027420: 7261 7469 6f6e 5f6c 656e 6774 6828 0a20  ration_length(. 
-00027430: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
-00027440: 2020 2029 3a0a 2020 2020 2020 2020 2266     ):.        "f
-00027450: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00027460: 6261 7265 203a 2045 5850 4543 545f 4455  bare : EXPECT_DU
-00027470: 5241 5449 4f4e 2066 756e 6374 696f 6e5f  RATION function_
-00027480: 6172 676c 6973 745f 636c 6f73 6564 5f6f  arglist_closed_o
-00027490: 7074 696f 6e61 6c20 6475 7261 7469 6f6e  ptional duration
-000274a0: 5f6c 656e 6774 6822 0a20 2020 2020 2020  _length".       
-000274b0: 2070 5b30 5d20 3d20 705b 325d 202b 205b   p[0] = p[2] + [
-000274c0: 705b 335d 5d0a 0a20 2020 2064 6566 2070  p[3]]..    def p
-000274d0: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-000274e0: 745f 6261 7265 5f5f 4558 5045 4354 5f4e  t_bare__EXPECT_N
-000274f0: 4f5f 4d4f 5245 5f41 5247 5328 7365 6c66  O_MORE_ARGS(self
-00027500: 2c20 7029 3a0a 2020 2020 2020 2020 2266  , p):.        "f
-00027510: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00027520: 6261 7265 203a 2045 5850 4543 545f 4e4f  bare : EXPECT_NO
-00027530: 5f4d 4f52 455f 4152 4753 220a 2020 2020  _MORE_ARGS".    
-00027540: 2020 2020 705b 305d 203d 205b 5d0a 0a20      p[0] = [].. 
-00027550: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
-00027560: 6e5f 6172 676c 6973 745f 6261 7265 5f5f  n_arglist_bare__
-00027570: 4558 5045 4354 5f4f 5054 494f 4e41 4c5f  EXPECT_OPTIONAL_
-00027580: 5f45 5850 4543 545f 4455 5241 5449 4f4e  _EXPECT_DURATION
-00027590: 5f5f 6675 6e63 7469 6f6e 5f61 7267 6c69  __function_argli
-000275a0: 7374 5f73 6b69 705f 5f44 4546 4155 4c54  st_skip__DEFAULT
-000275b0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-000275c0: 700a 2020 2020 293a 0a20 2020 2020 2020  p.    ):.       
-000275d0: 2022 6675 6e63 7469 6f6e 5f61 7267 6c69   "function_argli
-000275e0: 7374 5f62 6172 6520 3a20 4558 5045 4354  st_bare : EXPECT
-000275f0: 5f4f 5054 494f 4e41 4c20 4558 5045 4354  _OPTIONAL EXPECT
-00027600: 5f44 5552 4154 494f 4e20 6675 6e63 7469  _DURATION functi
-00027610: 6f6e 5f61 7267 6c69 7374 5f73 6b69 7020  on_arglist_skip 
-00027620: 4445 4641 554c 5422 0a20 2020 2020 2020  DEFAULT".       
-00027630: 2070 5b30 5d20 3d20 705b 335d 202b 205b   p[0] = p[3] + [
-00027640: 705b 315d 5d0a 0a20 2020 2064 6566 2070  p[1]]..    def p
-00027650: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-00027660: 745f 6261 7265 5f5f 4558 5045 4354 5f4f  t_bare__EXPECT_O
-00027670: 5054 494f 4e41 4c5f 5f45 5850 4543 545f  PTIONAL__EXPECT_
-00027680: 5049 5443 485f 5f66 756e 6374 696f 6e5f  PITCH__function_
-00027690: 6172 676c 6973 745f 736b 6970 5f5f 4445  arglist_skip__DE
-000276a0: 4641 554c 5428 0a20 2020 2020 2020 2073  FAULT(.        s
-000276b0: 656c 662c 2070 0a20 2020 2029 3a0a 2020  elf, p.    ):.  
-000276c0: 2020 2020 2020 2266 756e 6374 696f 6e5f        "function_
-000276d0: 6172 676c 6973 745f 6261 7265 203a 2045  arglist_bare : E
-000276e0: 5850 4543 545f 4f50 5449 4f4e 414c 2045  XPECT_OPTIONAL E
-000276f0: 5850 4543 545f 5049 5443 4820 6675 6e63  XPECT_PITCH func
-00027700: 7469 6f6e 5f61 7267 6c69 7374 5f73 6b69  tion_arglist_ski
-00027710: 7020 4445 4641 554c 5422 0a20 2020 2020  p DEFAULT".     
-00027720: 2020 2070 5b30 5d20 3d20 705b 335d 202b     p[0] = p[3] +
-00027730: 205b 705b 315d 5d0a 0a20 2020 2064 6566   [p[1]]..    def
-00027740: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
-00027750: 6973 745f 6261 7265 5f5f 4558 5045 4354  ist_bare__EXPECT
-00027760: 5f4f 5054 494f 4e41 4c5f 5f45 5850 4543  _OPTIONAL__EXPEC
-00027770: 545f 5343 4d5f 5f66 756e 6374 696f 6e5f  T_SCM__function_
-00027780: 6172 676c 6973 745f 736b 6970 5f5f 4445  arglist_skip__DE
-00027790: 4641 554c 5428 0a20 2020 2020 2020 2073  FAULT(.        s
-000277a0: 656c 662c 2070 0a20 2020 2029 3a0a 2020  elf, p.    ):.  
-000277b0: 2020 2020 2020 2266 756e 6374 696f 6e5f        "function_
-000277c0: 6172 676c 6973 745f 6261 7265 203a 2045  arglist_bare : E
-000277d0: 5850 4543 545f 4f50 5449 4f4e 414c 2045  XPECT_OPTIONAL E
-000277e0: 5850 4543 545f 5343 4d20 6675 6e63 7469  XPECT_SCM functi
-000277f0: 6f6e 5f61 7267 6c69 7374 5f73 6b69 7020  on_arglist_skip 
-00027800: 4445 4641 554c 5422 0a20 2020 2020 2020  DEFAULT".       
-00027810: 2070 5b30 5d20 3d20 705b 335d 202b 205b   p[0] = p[3] + [
-00027820: 705b 315d 5d0a 0a20 2020 2064 6566 2070  p[1]]..    def p
-00027830: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-00027840: 745f 6261 7265 5f5f 4558 5045 4354 5f50  t_bare__EXPECT_P
-00027850: 4954 4348 5f5f 6675 6e63 7469 6f6e 5f61  ITCH__function_a
-00027860: 7267 6c69 7374 5f6f 7074 696f 6e61 6c5f  rglist_optional_
-00027870: 5f70 6974 6368 5f61 6c73 6f5f 696e 5f63  _pitch_also_in_c
-00027880: 686f 7264 7328 0a20 2020 2020 2020 2073  hords(.        s
-00027890: 656c 662c 2070 0a20 2020 2029 3a0a 2020  elf, p.    ):.  
-000278a0: 2020 2020 2020 2266 756e 6374 696f 6e5f        "function_
-000278b0: 6172 676c 6973 745f 6261 7265 203a 2045  arglist_bare : E
-000278c0: 5850 4543 545f 5049 5443 4820 6675 6e63  XPECT_PITCH func
-000278d0: 7469 6f6e 5f61 7267 6c69 7374 5f6f 7074  tion_arglist_opt
-000278e0: 696f 6e61 6c20 7069 7463 685f 616c 736f  ional pitch_also
-000278f0: 5f69 6e5f 6368 6f72 6473 220a 2020 2020  _in_chords".    
-00027900: 2020 2020 705b 305d 203d 2070 5b32 5d20      p[0] = p[2] 
-00027910: 2b20 5b70 5b33 5d5d 0a0a 2020 2020 2323  + [p[3]]..    ##
-00027920: 2320 6675 6e63 7469 6f6e 5f61 7267 6c69  # function_argli
-00027930: 7374 5f63 6c6f 7365 6420 2323 230a 0a20  st_closed ###.. 
-00027940: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
-00027950: 6e5f 6172 676c 6973 745f 636c 6f73 6564  n_arglist_closed
-00027960: 5f5f 6675 6e63 7469 6f6e 5f61 7267 6c69  __function_argli
-00027970: 7374 5f63 6c6f 7365 645f 636f 6d6d 6f6e  st_closed_common
-00027980: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-00027990: 2020 2022 6675 6e63 7469 6f6e 5f61 7267     "function_arg
-000279a0: 6c69 7374 5f63 6c6f 7365 6420 3a20 6675  list_closed : fu
-000279b0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
-000279c0: 6c6f 7365 645f 636f 6d6d 6f6e 220a 2020  losed_common".  
-000279d0: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-000279e0: 5d0a 0a20 2020 2064 6566 2070 5f66 756e  ]..    def p_fun
-000279f0: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
-00027a00: 6f73 6564 5f5f 6675 6e63 7469 6f6e 5f61  osed__function_a
-00027a10: 7267 6c69 7374 5f6e 6f6e 6261 636b 7570  rglist_nonbackup
-00027a20: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-00027a30: 2020 2022 6675 6e63 7469 6f6e 5f61 7267     "function_arg
-00027a40: 6c69 7374 5f63 6c6f 7365 6420 3a20 6675  list_closed : fu
-00027a50: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f6e  nction_arglist_n
-00027a60: 6f6e 6261 636b 7570 220a 2020 2020 2020  onbackup".      
-00027a70: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-00027a80: 2020 2023 2323 2066 756e 6374 696f 6e5f     ### function_
-00027a90: 6172 676c 6973 745f 636c 6f73 6564 5f63  arglist_closed_c
-00027aa0: 6f6d 6d6f 6e20 2323 230a 0a20 2020 2064  ommon ###..    d
-00027ab0: 6566 2070 5f66 756e 6374 696f 6e5f 6172  ef p_function_ar
-00027ac0: 676c 6973 745f 636c 6f73 6564 5f63 6f6d  glist_closed_com
-00027ad0: 6d6f 6e5f 5f45 5850 4543 545f 5343 4d5f  mon__EXPECT_SCM_
-00027ae0: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-00027af0: 745f 636c 6f73 6564 5f6f 7074 696f 6e61  t_closed_optiona
-00027b00: 6c5f 5f43 6872 3435 5f5f 4e55 4d42 4552  l__Chr45__NUMBER
-00027b10: 5f49 4445 4e54 4946 4945 5228 0a20 2020  _IDENTIFIER(.   
-00027b20: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
-00027b30: 2029 3a0a 2020 2020 2020 2020 2266 756e   ):.        "fun
-00027b40: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
-00027b50: 6f73 6564 5f63 6f6d 6d6f 6e20 3a20 4558  osed_common : EX
-00027b60: 5045 4354 5f53 434d 2066 756e 6374 696f  PECT_SCM functio
-00027b70: 6e5f 6172 676c 6973 745f 636c 6f73 6564  n_arglist_closed
-00027b80: 5f6f 7074 696f 6e61 6c20 272d 2720 4e55  _optional '-' NU
-00027b90: 4d42 4552 5f49 4445 4e54 4946 4945 5222  MBER_IDENTIFIER"
-00027ba0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00027bb0: 705b 325d 202b 205b 2d31 202a 2070 5b34  p[2] + [-1 * p[4
-00027bc0: 5d5d 0a0a 2020 2020 6465 6620 705f 6675  ]]..    def p_fu
-00027bd0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
-00027be0: 6c6f 7365 645f 636f 6d6d 6f6e 5f5f 4558  losed_common__EX
-00027bf0: 5045 4354 5f53 434d 5f5f 6675 6e63 7469  PECT_SCM__functi
-00027c00: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
-00027c10: 645f 6f70 7469 6f6e 616c 5f5f 4368 7234  d_optional__Chr4
-00027c20: 355f 5f52 4541 4c28 0a20 2020 2020 2020  5__REAL(.       
-00027c30: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
-00027c40: 2020 2020 2020 2020 2266 756e 6374 696f          "functio
-00027c50: 6e5f 6172 676c 6973 745f 636c 6f73 6564  n_arglist_closed
-00027c60: 5f63 6f6d 6d6f 6e20 3a20 4558 5045 4354  _common : EXPECT
-00027c70: 5f53 434d 2066 756e 6374 696f 6e5f 6172  _SCM function_ar
-00027c80: 676c 6973 745f 636c 6f73 6564 5f6f 7074  glist_closed_opt
-00027c90: 696f 6e61 6c20 272d 2720 5245 414c 220a  ional '-' REAL".
-00027ca0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
-00027cb0: 5b32 5d20 2b20 5b2d 3120 2a20 705b 345d  [2] + [-1 * p[4]
-00027cc0: 5d0a 0a20 2020 2064 6566 2070 5f66 756e  ]..    def p_fun
-00027cd0: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
-00027ce0: 6f73 6564 5f63 6f6d 6d6f 6e5f 5f45 5850  osed_common__EXP
-00027cf0: 4543 545f 5343 4d5f 5f66 756e 6374 696f  ECT_SCM__functio
-00027d00: 6e5f 6172 676c 6973 745f 636c 6f73 6564  n_arglist_closed
-00027d10: 5f6f 7074 696f 6e61 6c5f 5f43 6872 3435  _optional__Chr45
-00027d20: 5f5f 554e 5349 474e 4544 280a 2020 2020  __UNSIGNED(.    
-00027d30: 2020 2020 7365 6c66 2c20 700a 2020 2020      self, p.    
-00027d40: 293a 0a20 2020 2020 2020 2022 6675 6e63  ):.        "func
-00027d50: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
-00027d60: 7365 645f 636f 6d6d 6f6e 203a 2045 5850  sed_common : EXP
-00027d70: 4543 545f 5343 4d20 6675 6e63 7469 6f6e  ECT_SCM function
-00027d80: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
-00027d90: 6f70 7469 6f6e 616c 2027 2d27 2055 4e53  optional '-' UNS
-00027da0: 4947 4e45 4422 0a20 2020 2020 2020 2070  IGNED".        p
-00027db0: 5b30 5d20 3d20 705b 325d 202b 205b 2d31  [0] = p[2] + [-1
-00027dc0: 202a 2070 5b34 5d5d 0a0a 2020 2020 6465   * p[4]]..    de
-00027dd0: 6620 705f 6675 6e63 7469 6f6e 5f61 7267  f p_function_arg
-00027de0: 6c69 7374 5f63 6c6f 7365 645f 636f 6d6d  list_closed_comm
-00027df0: 6f6e 5f5f 4558 5045 4354 5f53 434d 5f5f  on__EXPECT_SCM__
-00027e00: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-00027e10: 5f63 6c6f 7365 645f 6f70 7469 6f6e 616c  _closed_optional
-00027e20: 5f5f 6261 7265 5f6e 756d 6265 7228 0a20  __bare_number(. 
-00027e30: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
-00027e40: 2020 2029 3a0a 2020 2020 2020 2020 2266     ):.        "f
-00027e50: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00027e60: 636c 6f73 6564 5f63 6f6d 6d6f 6e20 3a20  closed_common : 
-00027e70: 4558 5045 4354 5f53 434d 2066 756e 6374  EXPECT_SCM funct
-00027e80: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
-00027e90: 6564 5f6f 7074 696f 6e61 6c20 6261 7265  ed_optional bare
-00027ea0: 5f6e 756d 6265 7222 0a20 2020 2020 2020  _number".       
-00027eb0: 2070 5b30 5d20 3d20 705b 325d 202b 205b   p[0] = p[2] + [
-00027ec0: 705b 335d 5d0a 0a20 2020 2064 6566 2070  p[3]]..    def p
-00027ed0: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-00027ee0: 745f 636c 6f73 6564 5f63 6f6d 6d6f 6e5f  t_closed_common_
-00027ef0: 5f45 5850 4543 545f 5343 4d5f 5f66 756e  _EXPECT_SCM__fun
-00027f00: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
-00027f10: 6f73 6564 5f6f 7074 696f 6e61 6c5f 5f66  osed_optional__f
-00027f20: 7261 6374 696f 6e28 0a20 2020 2020 2020  raction(.       
-00027f30: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
-00027f40: 2020 2020 2020 2020 2266 756e 6374 696f          "functio
-00027f50: 6e5f 6172 676c 6973 745f 636c 6f73 6564  n_arglist_closed
-00027f60: 5f63 6f6d 6d6f 6e20 3a20 4558 5045 4354  _common : EXPECT
-00027f70: 5f53 434d 2066 756e 6374 696f 6e5f 6172  _SCM function_ar
-00027f80: 676c 6973 745f 636c 6f73 6564 5f6f 7074  glist_closed_opt
-00027f90: 696f 6e61 6c20 6672 6163 7469 6f6e 220a  ional fraction".
-00027fa0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
-00027fb0: 5b32 5d20 2b20 5b70 5b33 5d5d 0a0a 2020  [2] + [p[3]]..  
-00027fc0: 2020 6465 6620 705f 6675 6e63 7469 6f6e    def p_function
-00027fd0: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
-00027fe0: 636f 6d6d 6f6e 5f5f 4558 5045 4354 5f53  common__EXPECT_S
-00027ff0: 434d 5f5f 6675 6e63 7469 6f6e 5f61 7267  CM__function_arg
-00028000: 6c69 7374 5f63 6c6f 7365 645f 6f70 7469  list_closed_opti
-00028010: 6f6e 616c 5f5f 706f 7374 5f65 7665 6e74  onal__post_event
-00028020: 5f6e 6f66 696e 6765 7228 0a20 2020 2020  _nofinger(.     
-00028030: 2020 2073 656c 662c 2070 0a20 2020 2029     self, p.    )
-00028040: 3a0a 2020 2020 2020 2020 2266 756e 6374  :.        "funct
-00028050: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
-00028060: 6564 5f63 6f6d 6d6f 6e20 3a20 4558 5045  ed_common : EXPE
-00028070: 4354 5f53 434d 2066 756e 6374 696f 6e5f  CT_SCM function_
-00028080: 6172 676c 6973 745f 636c 6f73 6564 5f6f  arglist_closed_o
-00028090: 7074 696f 6e61 6c20 706f 7374 5f65 7665  ptional post_eve
-000280a0: 6e74 5f6e 6f66 696e 6765 7222 0a20 2020  nt_nofinger".   
-000280b0: 2020 2020 2070 5b30 5d20 3d20 705b 325d       p[0] = p[2]
-000280c0: 202b 205b 705b 335d 5d0a 0a20 2020 2064   + [p[3]]..    d
-000280d0: 6566 2070 5f66 756e 6374 696f 6e5f 6172  ef p_function_ar
-000280e0: 676c 6973 745f 636c 6f73 6564 5f63 6f6d  glist_closed_com
-000280f0: 6d6f 6e5f 5f45 5850 4543 545f 5343 4d5f  mon__EXPECT_SCM_
-00028100: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-00028110: 745f 6f70 7469 6f6e 616c 5f5f 656d 6265  t_optional__embe
-00028120: 6464 6564 5f73 636d 5f61 7267 5f63 6c6f  dded_scm_arg_clo
-00028130: 7365 6428 0a20 2020 2020 2020 2073 656c  sed(.        sel
-00028140: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
-00028150: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
-00028160: 676c 6973 745f 636c 6f73 6564 5f63 6f6d  glist_closed_com
-00028170: 6d6f 6e20 3a20 4558 5045 4354 5f53 434d  mon : EXPECT_SCM
-00028180: 2066 756e 6374 696f 6e5f 6172 676c 6973   function_arglis
-00028190: 745f 6f70 7469 6f6e 616c 2065 6d62 6564  t_optional embed
-000281a0: 6465 645f 7363 6d5f 6172 675f 636c 6f73  ded_scm_arg_clos
-000281b0: 6564 220a 2020 2020 2020 2020 705b 305d  ed".        p[0]
-000281c0: 203d 2070 5b32 5d20 2b20 5b70 5b33 5d5d   = p[2] + [p[3]]
-000281d0: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
-000281e0: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-000281f0: 745f 636c 6f73 6564 5f63 6f6d 6d6f 6e5f  t_closed_common_
-00028200: 5f45 5850 4543 545f 5343 4d5f 5f66 756e  _EXPECT_SCM__fun
-00028210: 6374 696f 6e5f 6172 676c 6973 745f 6f70  ction_arglist_op
-00028220: 7469 6f6e 616c 5f5f 6c79 7269 635f 656c  tional__lyric_el
-00028230: 656d 656e 7428 7365 6c66 2c20 7029 3a0a  ement(self, p):.
-00028240: 2020 2020 2320 2020 2020 2020 2027 6675      #        'fu
-00028250: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
-00028260: 6c6f 7365 645f 636f 6d6d 6f6e 203a 2045  losed_common : E
-00028270: 5850 4543 545f 5343 4d20 6675 6e63 7469  XPECT_SCM functi
-00028280: 6f6e 5f61 7267 6c69 7374 5f6f 7074 696f  on_arglist_optio
-00028290: 6e61 6c20 6c79 7269 635f 656c 656d 656e  nal lyric_elemen
-000282a0: 7427 0a20 2020 2023 2020 2020 2020 2020  t'.    #        
-000282b0: 705b 305d 203d 2070 5b32 5d20 2b20 5b70  p[0] = p[2] + [p
-000282c0: 5b33 5d5d 0a0a 2020 2020 6465 6620 705f  [3]]..    def p_
-000282d0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-000282e0: 5f63 6c6f 7365 645f 636f 6d6d 6f6e 5f5f  _closed_common__
-000282f0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-00028300: 5f62 6172 6528 7365 6c66 2c20 7029 3a0a  _bare(self, p):.
-00028310: 2020 2020 2020 2020 2266 756e 6374 696f          "functio
-00028320: 6e5f 6172 676c 6973 745f 636c 6f73 6564  n_arglist_closed
-00028330: 5f63 6f6d 6d6f 6e20 3a20 6675 6e63 7469  _common : functi
-00028340: 6f6e 5f61 7267 6c69 7374 5f62 6172 6522  on_arglist_bare"
-00028350: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00028360: 705b 315d 0a0a 2020 2020 2323 2320 6675  p[1]..    ### fu
-00028370: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
-00028380: 6c6f 7365 645f 6b65 6570 2023 2323 0a0a  losed_keep ###..
-00028390: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
-000283a0: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
-000283b0: 645f 6b65 6570 5f5f 6675 6e63 7469 6f6e  d_keep__function
-000283c0: 5f61 7267 6c69 7374 5f62 6163 6b75 7028  _arglist_backup(
-000283d0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-000283e0: 2020 2266 756e 6374 696f 6e5f 6172 676c    "function_argl
-000283f0: 6973 745f 636c 6f73 6564 5f6b 6565 7020  ist_closed_keep 
-00028400: 3a20 6675 6e63 7469 6f6e 5f61 7267 6c69  : function_argli
-00028410: 7374 5f62 6163 6b75 7022 0a20 2020 2020  st_backup".     
-00028420: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-00028430: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
-00028440: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
-00028450: 645f 6b65 6570 5f5f 6675 6e63 7469 6f6e  d_keep__function
-00028460: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
-00028470: 636f 6d6d 6f6e 2873 656c 662c 2070 293a  common(self, p):
-00028480: 0a20 2020 2020 2020 2022 6675 6e63 7469  .        "functi
-00028490: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
-000284a0: 645f 6b65 6570 203a 2066 756e 6374 696f  d_keep : functio
-000284b0: 6e5f 6172 676c 6973 745f 636c 6f73 6564  n_arglist_closed
-000284c0: 5f63 6f6d 6d6f 6e22 0a20 2020 2020 2020  _common".       
-000284d0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-000284e0: 2020 2323 2320 6675 6e63 7469 6f6e 5f61    ### function_a
-000284f0: 7267 6c69 7374 5f63 6c6f 7365 645f 6f70  rglist_closed_op
-00028500: 7469 6f6e 616c 2023 2323 0a0a 2020 2020  tional ###..    
-00028510: 6465 6620 705f 6675 6e63 7469 6f6e 5f61  def p_function_a
-00028520: 7267 6c69 7374 5f63 6c6f 7365 645f 6f70  rglist_closed_op
-00028530: 7469 6f6e 616c 5f5f 4558 5045 4354 5f4f  tional__EXPECT_O
-00028540: 5054 494f 4e41 4c5f 5f45 5850 4543 545f  PTIONAL__EXPECT_
-00028550: 4455 5241 5449 4f4e 5f5f 6675 6e63 7469  DURATION__functi
-00028560: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
-00028570: 645f 6f70 7469 6f6e 616c 280a 2020 2020  d_optional(.    
-00028580: 2020 2020 7365 6c66 2c20 700a 2020 2020      self, p.    
-00028590: 293a 0a20 2020 2020 2020 2022 6675 6e63  ):.        "func
-000285a0: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
-000285b0: 7365 645f 6f70 7469 6f6e 616c 203a 2045  sed_optional : E
-000285c0: 5850 4543 545f 4f50 5449 4f4e 414c 2045  XPECT_OPTIONAL E
-000285d0: 5850 4543 545f 4455 5241 5449 4f4e 2066  XPECT_DURATION f
-000285e0: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-000285f0: 636c 6f73 6564 5f6f 7074 696f 6e61 6c22  closed_optional"
-00028600: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00028610: 705b 335d 202b 205b 705b 315d 5d0a 0a20  p[3] + [p[1]].. 
-00028620: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
-00028630: 6e5f 6172 676c 6973 745f 636c 6f73 6564  n_arglist_closed
-00028640: 5f6f 7074 696f 6e61 6c5f 5f45 5850 4543  _optional__EXPEC
-00028650: 545f 4f50 5449 4f4e 414c 5f5f 4558 5045  T_OPTIONAL__EXPE
-00028660: 4354 5f50 4954 4348 5f5f 6675 6e63 7469  CT_PITCH__functi
-00028670: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
-00028680: 645f 6f70 7469 6f6e 616c 280a 2020 2020  d_optional(.    
-00028690: 2020 2020 7365 6c66 2c20 700a 2020 2020      self, p.    
-000286a0: 293a 0a20 2020 2020 2020 2022 6675 6e63  ):.        "func
-000286b0: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
-000286c0: 7365 645f 6f70 7469 6f6e 616c 203a 2045  sed_optional : E
-000286d0: 5850 4543 545f 4f50 5449 4f4e 414c 2045  XPECT_OPTIONAL E
-000286e0: 5850 4543 545f 5049 5443 4820 6675 6e63  XPECT_PITCH func
-000286f0: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
-00028700: 7365 645f 6f70 7469 6f6e 616c 220a 2020  sed_optional".  
-00028710: 2020 2020 2020 705b 305d 203d 2070 5b33        p[0] = p[3
-00028720: 5d20 2b20 5b70 5b31 5d5d 0a0a 2020 2020  ] + [p[1]]..    
-00028730: 6465 6620 705f 6675 6e63 7469 6f6e 5f61  def p_function_a
-00028740: 7267 6c69 7374 5f63 6c6f 7365 645f 6f70  rglist_closed_op
-00028750: 7469 6f6e 616c 5f5f 6675 6e63 7469 6f6e  tional__function
-00028760: 5f61 7267 6c69 7374 5f62 6163 6b75 705f  _arglist_backup_
-00028770: 5f42 4143 4b55 5028 7365 6c66 2c20 7029  _BACKUP(self, p)
-00028780: 3a0a 2020 2020 2020 2020 2266 756e 6374  :.        "funct
-00028790: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
-000287a0: 6564 5f6f 7074 696f 6e61 6c20 3a20 6675  ed_optional : fu
-000287b0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f62  nction_arglist_b
-000287c0: 6163 6b75 7020 4241 434b 5550 220a 2020  ackup BACKUP".  
-000287d0: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-000287e0: 5d0a 0a20 2020 2064 6566 2070 5f66 756e  ]..    def p_fun
-000287f0: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
-00028800: 6f73 6564 5f6f 7074 696f 6e61 6c5f 5f66  osed_optional__f
-00028810: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00028820: 636c 6f73 6564 5f6b 6565 7028 7365 6c66  closed_keep(self
-00028830: 2c20 7029 3a0a 2020 2020 2020 2020 2266  , p):.        "f
-00028840: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00028850: 636c 6f73 6564 5f6f 7074 696f 6e61 6c20  closed_optional 
-00028860: 3a20 6675 6e63 7469 6f6e 5f61 7267 6c69  : function_argli
-00028870: 7374 5f63 6c6f 7365 645f 6b65 6570 2025  st_closed_keep %
-00028880: 7072 6563 2046 554e 4354 494f 4e5f 4152  prec FUNCTION_AR
-00028890: 474c 4953 5422 0a20 2020 2020 2020 2070  GLIST".        p
-000288a0: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
-000288b0: 2323 2320 6675 6e63 7469 6f6e 5f61 7267  ### function_arg
-000288c0: 6c69 7374 5f63 6f6d 6d6f 6e20 2323 230a  list_common ###.
-000288d0: 0a20 2020 2064 6566 2070 5f66 756e 6374  .    def p_funct
-000288e0: 696f 6e5f 6172 676c 6973 745f 636f 6d6d  ion_arglist_comm
-000288f0: 6f6e 5f5f 4558 5045 4354 5f53 434d 5f5f  on__EXPECT_SCM__
-00028900: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-00028910: 5f63 6c6f 7365 645f 6f70 7469 6f6e 616c  _closed_optional
-00028920: 5f5f 6261 7265 5f6e 756d 6265 7228 0a20  __bare_number(. 
-00028930: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
-00028940: 2020 2029 3a0a 2020 2020 2020 2020 2266     ):.        "f
-00028950: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00028960: 636f 6d6d 6f6e 203a 2045 5850 4543 545f  common : EXPECT_
-00028970: 5343 4d20 6675 6e63 7469 6f6e 5f61 7267  SCM function_arg
-00028980: 6c69 7374 5f63 6c6f 7365 645f 6f70 7469  list_closed_opti
-00028990: 6f6e 616c 2062 6172 655f 6e75 6d62 6572  onal bare_number
-000289a0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-000289b0: 2070 5b32 5d20 2b20 5b70 5b33 5d5d 0a0a   p[2] + [p[3]]..
-000289c0: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
-000289d0: 6f6e 5f61 7267 6c69 7374 5f63 6f6d 6d6f  on_arglist_commo
-000289e0: 6e5f 5f45 5850 4543 545f 5343 4d5f 5f66  n__EXPECT_SCM__f
-000289f0: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00028a00: 636c 6f73 6564 5f6f 7074 696f 6e61 6c5f  closed_optional_
-00028a10: 5f66 7261 6374 696f 6e28 0a20 2020 2020  _fraction(.     
-00028a20: 2020 2073 656c 662c 2070 0a20 2020 2029     self, p.    )
-00028a30: 3a0a 2020 2020 2020 2020 2266 756e 6374  :.        "funct
-00028a40: 696f 6e5f 6172 676c 6973 745f 636f 6d6d  ion_arglist_comm
-00028a50: 6f6e 203a 2045 5850 4543 545f 5343 4d20  on : EXPECT_SCM 
-00028a60: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-00028a70: 5f63 6c6f 7365 645f 6f70 7469 6f6e 616c  _closed_optional
-00028a80: 2066 7261 6374 696f 6e22 0a20 2020 2020   fraction".     
-00028a90: 2020 2070 5b30 5d20 3d20 705b 325d 202b     p[0] = p[2] +
-00028aa0: 205b 705b 335d 5d0a 0a20 2020 2064 6566   [p[3]]..    def
-00028ab0: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
-00028ac0: 6973 745f 636f 6d6d 6f6e 5f5f 4558 5045  ist_common__EXPE
-00028ad0: 4354 5f53 434d 5f5f 6675 6e63 7469 6f6e  CT_SCM__function
-00028ae0: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
-00028af0: 6f70 7469 6f6e 616c 5f5f 706f 7374 5f65  optional__post_e
-00028b00: 7665 6e74 5f6e 6f66 696e 6765 7228 0a20  vent_nofinger(. 
-00028b10: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
-00028b20: 2020 2029 3a0a 2020 2020 2020 2020 2266     ):.        "f
-00028b30: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00028b40: 636f 6d6d 6f6e 203a 2045 5850 4543 545f  common : EXPECT_
-00028b50: 5343 4d20 6675 6e63 7469 6f6e 5f61 7267  SCM function_arg
-00028b60: 6c69 7374 5f63 6c6f 7365 645f 6f70 7469  list_closed_opti
-00028b70: 6f6e 616c 2070 6f73 745f 6576 656e 745f  onal post_event_
-00028b80: 6e6f 6669 6e67 6572 220a 2020 2020 2020  nofinger".      
-00028b90: 2020 705b 305d 203d 2070 5b32 5d20 2b20    p[0] = p[2] + 
-00028ba0: 5b70 5b33 5d5d 0a0a 2020 2020 6465 6620  [p[3]]..    def 
-00028bb0: 705f 6675 6e63 7469 6f6e 5f61 7267 6c69  p_function_argli
-00028bc0: 7374 5f63 6f6d 6d6f 6e5f 5f45 5850 4543  st_common__EXPEC
-00028bd0: 545f 5343 4d5f 5f66 756e 6374 696f 6e5f  T_SCM__function_
-00028be0: 6172 676c 6973 745f 6f70 7469 6f6e 616c  arglist_optional
-00028bf0: 5f5f 656d 6265 6464 6564 5f73 636d 5f61  __embedded_scm_a
-00028c00: 7267 280a 2020 2020 2020 2020 7365 6c66  rg(.        self
-00028c10: 2c20 700a 2020 2020 293a 0a20 2020 2020  , p.    ):.     
-00028c20: 2020 2022 6675 6e63 7469 6f6e 5f61 7267     "function_arg
-00028c30: 6c69 7374 5f63 6f6d 6d6f 6e20 3a20 4558  list_common : EX
-00028c40: 5045 4354 5f53 434d 2066 756e 6374 696f  PECT_SCM functio
-00028c50: 6e5f 6172 676c 6973 745f 6f70 7469 6f6e  n_arglist_option
-00028c60: 616c 2065 6d62 6564 6465 645f 7363 6d5f  al embedded_scm_
-00028c70: 6172 6722 0a20 2020 2020 2020 2070 5b30  arg".        p[0
-00028c80: 5d20 3d20 705b 325d 202b 205b 705b 335d  ] = p[2] + [p[3]
-00028c90: 5d0a 0a20 2020 2064 6566 2070 5f66 756e  ]..    def p_fun
-00028ca0: 6374 696f 6e5f 6172 676c 6973 745f 636f  ction_arglist_co
-00028cb0: 6d6d 6f6e 5f5f 6675 6e63 7469 6f6e 5f61  mmon__function_a
-00028cc0: 7267 6c69 7374 5f62 6172 6528 7365 6c66  rglist_bare(self
-00028cd0: 2c20 7029 3a0a 2020 2020 2020 2020 2266  , p):.        "f
-00028ce0: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00028cf0: 636f 6d6d 6f6e 203a 2066 756e 6374 696f  common : functio
-00028d00: 6e5f 6172 676c 6973 745f 6261 7265 220a  n_arglist_bare".
-00028d10: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
-00028d20: 5b31 5d0a 0a20 2020 2023 2020 2020 6465  [1]..    #    de
-00028d30: 6620 705f 6675 6e63 7469 6f6e 5f61 7267  f p_function_arg
-00028d40: 6c69 7374 5f63 6f6d 6d6f 6e5f 5f66 756e  list_common__fun
-00028d50: 6374 696f 6e5f 6172 676c 6973 745f 636f  ction_arglist_co
-00028d60: 6d6d 6f6e 5f6c 7972 6963 2873 656c 662c  mmon_lyric(self,
-00028d70: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-00028d80: 2020 2766 756e 6374 696f 6e5f 6172 676c    'function_argl
-00028d90: 6973 745f 636f 6d6d 6f6e 203a 2066 756e  ist_common : fun
-00028da0: 6374 696f 6e5f 6172 676c 6973 745f 636f  ction_arglist_co
-00028db0: 6d6d 6f6e 5f6c 7972 6963 270a 2020 2020  mmon_lyric'.    
-00028dc0: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
-00028dd0: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
-00028de0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-00028df0: 5f63 6f6d 6d6f 6e5f 5f66 756e 6374 696f  _common__functio
-00028e00: 6e5f 6172 676c 6973 745f 636f 6d6d 6f6e  n_arglist_common
-00028e10: 5f6d 696e 7573 2873 656c 662c 2070 293a  _minus(self, p):
-00028e20: 0a20 2020 2020 2020 2022 6675 6e63 7469  .        "functi
-00028e30: 6f6e 5f61 7267 6c69 7374 5f63 6f6d 6d6f  on_arglist_commo
-00028e40: 6e20 3a20 6675 6e63 7469 6f6e 5f61 7267  n : function_arg
-00028e50: 6c69 7374 5f63 6f6d 6d6f 6e5f 6d69 6e75  list_common_minu
-00028e60: 7322 0a20 2020 2020 2020 2070 5b30 5d20  s".        p[0] 
-00028e70: 3d20 705b 315d 0a0a 2020 2020 2323 2320  = p[1]..    ### 
-00028e80: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-00028e90: 5f63 6f6d 6d6f 6e5f 6c79 7269 6320 2323  _common_lyric ##
-00028ea0: 230a 0a20 2020 2023 2020 2020 6465 6620  #..    #    def 
-00028eb0: 705f 6675 6e63 7469 6f6e 5f61 7267 6c69  p_function_argli
-00028ec0: 7374 5f63 6f6d 6d6f 6e5f 6c79 7269 635f  st_common_lyric_
-00028ed0: 5f45 5850 4543 545f 5343 4d5f 5f66 756e  _EXPECT_SCM__fun
-00028ee0: 6374 696f 6e5f 6172 676c 6973 745f 6f70  ction_arglist_op
-00028ef0: 7469 6f6e 616c 5f5f 6c79 7269 635f 656c  tional__lyric_el
-00028f00: 656d 656e 7428 7365 6c66 2c20 7029 3a0a  ement(self, p):.
-00028f10: 2020 2020 2320 2020 2020 2020 2027 6675      #        'fu
-00028f20: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
-00028f30: 6f6d 6d6f 6e5f 6c79 7269 6320 3a20 4558  ommon_lyric : EX
-00028f40: 5045 4354 5f53 434d 2066 756e 6374 696f  PECT_SCM functio
-00028f50: 6e5f 6172 676c 6973 745f 6f70 7469 6f6e  n_arglist_option
-00028f60: 616c 206c 7972 6963 5f65 6c65 6d65 6e74  al lyric_element
-00028f70: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
-00028f80: 5b30 5d20 3d20 705b 325d 202b 205b 705b  [0] = p[2] + [p[
-00028f90: 335d 5d0a 0a20 2020 2023 2020 2020 6465  3]]..    #    de
-00028fa0: 6620 705f 6675 6e63 7469 6f6e 5f61 7267  f p_function_arg
-00028fb0: 6c69 7374 5f63 6f6d 6d6f 6e5f 6c79 7269  list_common_lyri
-00028fc0: 635f 5f66 756e 6374 696f 6e5f 6172 676c  c__function_argl
-00028fd0: 6973 745f 636f 6d6d 6f6e 5f6c 7972 6963  ist_common_lyric
-00028fe0: 5f5f 5245 5041 5253 455f 5f6c 7972 6963  __REPARSE__lyric
-00028ff0: 5f65 6c65 6d65 6e74 5f61 7267 2873 656c  _element_arg(sel
-00029000: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
-00029010: 2020 2020 2766 756e 6374 696f 6e5f 6172      'function_ar
-00029020: 676c 6973 745f 636f 6d6d 6f6e 5f6c 7972  glist_common_lyr
-00029030: 6963 203a 2066 756e 6374 696f 6e5f 6172  ic : function_ar
-00029040: 676c 6973 745f 636f 6d6d 6f6e 5f6c 7972  glist_common_lyr
-00029050: 6963 2052 4550 4152 5345 206c 7972 6963  ic REPARSE lyric
-00029060: 5f65 6c65 6d65 6e74 5f61 7267 270a 2020  _element_arg'.  
-00029070: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
-00029080: 3d20 705b 315d 202b 205b 705b 335d 5d0a  = p[1] + [p[3]].
-00029090: 0a20 2020 2023 2323 2066 756e 6374 696f  .    ### functio
-000290a0: 6e5f 6172 676c 6973 745f 636f 6d6d 6f6e  n_arglist_common
-000290b0: 5f6d 696e 7573 2023 2323 0a0a 2020 2020  _minus ###..    
-000290c0: 6465 6620 705f 6675 6e63 7469 6f6e 5f61  def p_function_a
-000290d0: 7267 6c69 7374 5f63 6f6d 6d6f 6e5f 6d69  rglist_common_mi
-000290e0: 6e75 735f 5f45 5850 4543 545f 5343 4d5f  nus__EXPECT_SCM_
-000290f0: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-00029100: 745f 636c 6f73 6564 5f6f 7074 696f 6e61  t_closed_optiona
-00029110: 6c5f 5f43 6872 3435 5f5f 4e55 4d42 4552  l__Chr45__NUMBER
-00029120: 5f49 4445 4e54 4946 4945 5228 0a20 2020  _IDENTIFIER(.   
-00029130: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
-00029140: 2029 3a0a 2020 2020 2020 2020 2266 756e   ):.        "fun
-00029150: 6374 696f 6e5f 6172 676c 6973 745f 636f  ction_arglist_co
-00029160: 6d6d 6f6e 5f6d 696e 7573 203a 2045 5850  mmon_minus : EXP
-00029170: 4543 545f 5343 4d20 6675 6e63 7469 6f6e  ECT_SCM function
-00029180: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
-00029190: 6f70 7469 6f6e 616c 2027 2d27 204e 554d  optional '-' NUM
-000291a0: 4245 525f 4944 454e 5449 4649 4552 220a  BER_IDENTIFIER".
-000291b0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
-000291c0: 5b32 5d20 2b20 5b2d 3120 2a20 705b 345d  [2] + [-1 * p[4]
-000291d0: 5d0a 0a20 2020 2064 6566 2070 5f66 756e  ]..    def p_fun
-000291e0: 6374 696f 6e5f 6172 676c 6973 745f 636f  ction_arglist_co
-000291f0: 6d6d 6f6e 5f6d 696e 7573 5f5f 4558 5045  mmon_minus__EXPE
-00029200: 4354 5f53 434d 5f5f 6675 6e63 7469 6f6e  CT_SCM__function
-00029210: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
-00029220: 6f70 7469 6f6e 616c 5f5f 4368 7234 355f  optional__Chr45_
-00029230: 5f52 4541 4c28 0a20 2020 2020 2020 2073  _REAL(.        s
-00029240: 656c 662c 2070 0a20 2020 2029 3a0a 2020  elf, p.    ):.  
-00029250: 2020 2020 2020 2266 756e 6374 696f 6e5f        "function_
-00029260: 6172 676c 6973 745f 636f 6d6d 6f6e 5f6d  arglist_common_m
-00029270: 696e 7573 203a 2045 5850 4543 545f 5343  inus : EXPECT_SC
-00029280: 4d20 6675 6e63 7469 6f6e 5f61 7267 6c69  M function_argli
-00029290: 7374 5f63 6c6f 7365 645f 6f70 7469 6f6e  st_closed_option
-000292a0: 616c 2027 2d27 2052 4541 4c22 0a20 2020  al '-' REAL".   
-000292b0: 2020 2020 2070 5b30 5d20 3d20 705b 325d       p[0] = p[2]
-000292c0: 202b 205b 2d31 202a 2070 5b33 5d5d 0a0a   + [-1 * p[3]]..
-000292d0: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
-000292e0: 6f6e 5f61 7267 6c69 7374 5f63 6f6d 6d6f  on_arglist_commo
-000292f0: 6e5f 6d69 6e75 735f 5f45 5850 4543 545f  n_minus__EXPECT_
-00029300: 5343 4d5f 5f66 756e 6374 696f 6e5f 6172  SCM__function_ar
-00029310: 676c 6973 745f 636c 6f73 6564 5f6f 7074  glist_closed_opt
-00029320: 696f 6e61 6c5f 5f43 6872 3435 5f5f 554e  ional__Chr45__UN
-00029330: 5349 474e 4544 280a 2020 2020 2020 2020  SIGNED(.        
-00029340: 7365 6c66 2c20 700a 2020 2020 293a 0a20  self, p.    ):. 
-00029350: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
-00029360: 5f61 7267 6c69 7374 5f63 6f6d 6d6f 6e5f  _arglist_common_
-00029370: 6d69 6e75 7320 3a20 4558 5045 4354 5f53  minus : EXPECT_S
-00029380: 434d 2066 756e 6374 696f 6e5f 6172 676c  CM function_argl
-00029390: 6973 745f 636c 6f73 6564 5f6f 7074 696f  ist_closed_optio
-000293a0: 6e61 6c20 272d 2720 554e 5349 474e 4544  nal '-' UNSIGNED
-000293b0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-000293c0: 2070 5b32 5d20 2b20 5b2d 3120 2a20 705b   p[2] + [-1 * p[
-000293d0: 335d 5d0a 0a20 2020 2064 6566 2070 5f66  3]]..    def p_f
-000293e0: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-000293f0: 636f 6d6d 6f6e 5f6d 696e 7573 5f5f 6675  common_minus__fu
-00029400: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
-00029410: 6f6d 6d6f 6e5f 6d69 6e75 735f 5f52 4550  ommon_minus__REP
-00029420: 4152 5345 5f5f 6261 7265 5f6e 756d 6265  ARSE__bare_numbe
-00029430: 7228 0a20 2020 2020 2020 2073 656c 662c  r(.        self,
-00029440: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
-00029450: 2020 2266 756e 6374 696f 6e5f 6172 676c    "function_argl
-00029460: 6973 745f 636f 6d6d 6f6e 5f6d 696e 7573  ist_common_minus
-00029470: 203a 2066 756e 6374 696f 6e5f 6172 676c   : function_argl
-00029480: 6973 745f 636f 6d6d 6f6e 5f6d 696e 7573  ist_common_minus
-00029490: 2052 4550 4152 5345 2062 6172 655f 6e75   REPARSE bare_nu
-000294a0: 6d62 6572 220a 2020 2020 2020 2020 705b  mber".        p[
-000294b0: 305d 203d 2070 5b31 5d20 2b20 5b70 5b33  0] = p[1] + [p[3
-000294c0: 5d5d 0a0a 2020 2020 2323 2320 6675 6e63  ]]..    ### func
-000294d0: 7469 6f6e 5f61 7267 6c69 7374 5f6b 6565  tion_arglist_kee
-000294e0: 7020 2323 230a 0a20 2020 2064 6566 2070  p ###..    def p
-000294f0: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-00029500: 745f 6b65 6570 5f5f 6675 6e63 7469 6f6e  t_keep__function
-00029510: 5f61 7267 6c69 7374 5f62 6163 6b75 7028  _arglist_backup(
-00029520: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00029530: 2020 2266 756e 6374 696f 6e5f 6172 676c    "function_argl
-00029540: 6973 745f 6b65 6570 203a 2066 756e 6374  ist_keep : funct
-00029550: 696f 6e5f 6172 676c 6973 745f 6261 636b  ion_arglist_back
-00029560: 7570 220a 2020 2020 2020 2020 705b 305d  up".        p[0]
-00029570: 203d 2070 5b31 5d0a 0a20 2020 2064 6566   = p[1]..    def
-00029580: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
-00029590: 6973 745f 6b65 6570 5f5f 6675 6e63 7469  ist_keep__functi
-000295a0: 6f6e 5f61 7267 6c69 7374 5f63 6f6d 6d6f  on_arglist_commo
-000295b0: 6e28 7365 6c66 2c20 7029 3a0a 2020 2020  n(self, p):.    
-000295c0: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
-000295d0: 676c 6973 745f 6b65 6570 203a 2066 756e  glist_keep : fun
-000295e0: 6374 696f 6e5f 6172 676c 6973 745f 636f  ction_arglist_co
-000295f0: 6d6d 6f6e 220a 2020 2020 2020 2020 705b  mmon".        p[
-00029600: 305d 203d 2070 5b31 5d0a 0a20 2020 2023  0] = p[1]..    #
-00029610: 2323 2066 756e 6374 696f 6e5f 6172 676c  ## function_argl
-00029620: 6973 745f 6e6f 6e62 6163 6b75 7020 2323  ist_nonbackup ##
-00029630: 230a 0a20 2020 2064 6566 2070 5f66 756e  #..    def p_fun
-00029640: 6374 696f 6e5f 6172 676c 6973 745f 6e6f  ction_arglist_no
-00029650: 6e62 6163 6b75 705f 5f45 5850 4543 545f  nbackup__EXPECT_
-00029660: 4f50 5449 4f4e 414c 5f5f 4558 5045 4354  OPTIONAL__EXPECT
-00029670: 5f44 5552 4154 494f 4e5f 5f66 756e 6374  _DURATION__funct
-00029680: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
-00029690: 6564 5f5f 6475 7261 7469 6f6e 5f6c 656e  ed__duration_len
-000296a0: 6774 6828 0a20 2020 2020 2020 2073 656c  gth(.        sel
-000296b0: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
-000296c0: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
-000296d0: 676c 6973 745f 6e6f 6e62 6163 6b75 7020  glist_nonbackup 
-000296e0: 3a20 4558 5045 4354 5f4f 5054 494f 4e41  : EXPECT_OPTIONA
-000296f0: 4c20 4558 5045 4354 5f44 5552 4154 494f  L EXPECT_DURATIO
-00029700: 4e20 6675 6e63 7469 6f6e 5f61 7267 6c69  N function_argli
-00029710: 7374 5f63 6c6f 7365 6420 6475 7261 7469  st_closed durati
-00029720: 6f6e 5f6c 656e 6774 6822 0a20 2020 2020  on_length".     
-00029730: 2020 2070 5b30 5d20 3d20 705b 335d 202b     p[0] = p[3] +
-00029740: 205b 705b 345d 5d0a 0a20 2020 2064 6566   [p[4]]..    def
-00029750: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
-00029760: 6973 745f 6e6f 6e62 6163 6b75 705f 5f45  ist_nonbackup__E
-00029770: 5850 4543 545f 4f50 5449 4f4e 414c 5f5f  XPECT_OPTIONAL__
-00029780: 4558 5045 4354 5f50 4954 4348 5f5f 6675  EXPECT_PITCH__fu
-00029790: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f5f  nction_arglist__
-000297a0: 7069 7463 685f 616c 736f 5f69 6e5f 6368  pitch_also_in_ch
-000297b0: 6f72 6473 280a 2020 2020 2020 2020 7365  ords(.        se
-000297c0: 6c66 2c20 700a 2020 2020 293a 0a20 2020  lf, p.    ):.   
-000297d0: 2020 2020 2022 6675 6e63 7469 6f6e 5f61       "function_a
-000297e0: 7267 6c69 7374 5f6e 6f6e 6261 636b 7570  rglist_nonbackup
-000297f0: 203a 2045 5850 4543 545f 4f50 5449 4f4e   : EXPECT_OPTION
-00029800: 414c 2045 5850 4543 545f 5049 5443 4820  AL EXPECT_PITCH 
-00029810: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-00029820: 2070 6974 6368 5f61 6c73 6f5f 696e 5f63   pitch_also_in_c
-00029830: 686f 7264 7322 0a20 2020 2020 2020 2070  hords".        p
-00029840: 5b30 5d20 3d20 705b 335d 202b 205b 705b  [0] = p[3] + [p[
-00029850: 345d 5d0a 0a20 2020 2064 6566 2070 5f66  4]]..    def p_f
-00029860: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00029870: 6e6f 6e62 6163 6b75 705f 5f45 5850 4543  nonbackup__EXPEC
-00029880: 545f 4f50 5449 4f4e 414c 5f5f 4558 5045  T_OPTIONAL__EXPE
-00029890: 4354 5f53 434d 5f5f 6675 6e63 7469 6f6e  CT_SCM__function
-000298a0: 5f61 7267 6c69 7374 5f5f 656d 6265 6464  _arglist__embedd
-000298b0: 6564 5f73 636d 5f61 7267 5f63 6c6f 7365  ed_scm_arg_close
-000298c0: 6428 0a20 2020 2020 2020 2073 656c 662c  d(.        self,
-000298d0: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
-000298e0: 2020 2266 756e 6374 696f 6e5f 6172 676c    "function_argl
-000298f0: 6973 745f 6e6f 6e62 6163 6b75 7020 3a20  ist_nonbackup : 
-00029900: 4558 5045 4354 5f4f 5054 494f 4e41 4c20  EXPECT_OPTIONAL 
-00029910: 4558 5045 4354 5f53 434d 2066 756e 6374  EXPECT_SCM funct
-00029920: 696f 6e5f 6172 676c 6973 7420 656d 6265  ion_arglist embe
-00029930: 6464 6564 5f73 636d 5f61 7267 5f63 6c6f  dded_scm_arg_clo
-00029940: 7365 6422 0a20 2020 2020 2020 2070 5b30  sed".        p[0
-00029950: 5d20 3d20 705b 335d 202b 205b 705b 345d  ] = p[3] + [p[4]
-00029960: 5d0a 0a20 2020 2064 6566 2070 5f66 756e  ]..    def p_fun
-00029970: 6374 696f 6e5f 6172 676c 6973 745f 6e6f  ction_arglist_no
-00029980: 6e62 6163 6b75 705f 5f45 5850 4543 545f  nbackup__EXPECT_
-00029990: 4f50 5449 4f4e 414c 5f5f 4558 5045 4354  OPTIONAL__EXPECT
-000299a0: 5f53 434d 5f5f 6675 6e63 7469 6f6e 5f61  _SCM__function_a
-000299b0: 7267 6c69 7374 5f63 6c6f 7365 645f 5f43  rglist_closed__C
-000299c0: 6872 3435 5f5f 4e55 4d42 4552 5f49 4445  hr45__NUMBER_IDE
-000299d0: 4e54 4946 4945 5228 0a20 2020 2020 2020  NTIFIER(.       
-000299e0: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
-000299f0: 2020 2020 2020 2020 2266 756e 6374 696f          "functio
-00029a00: 6e5f 6172 676c 6973 745f 6e6f 6e62 6163  n_arglist_nonbac
-00029a10: 6b75 7020 3a20 4558 5045 4354 5f4f 5054  kup : EXPECT_OPT
-00029a20: 494f 4e41 4c20 4558 5045 4354 5f53 434d  IONAL EXPECT_SCM
-00029a30: 2066 756e 6374 696f 6e5f 6172 676c 6973   function_arglis
-00029a40: 745f 636c 6f73 6564 2027 2d27 204e 554d  t_closed '-' NUM
-00029a50: 4245 525f 4944 454e 5449 4649 4552 220a  BER_IDENTIFIER".
-00029a60: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
-00029a70: 5b33 5d20 2b20 5b2d 3120 2a20 705b 345d  [3] + [-1 * p[4]
-00029a80: 5d0a 0a20 2020 2064 6566 2070 5f66 756e  ]..    def p_fun
-00029a90: 6374 696f 6e5f 6172 676c 6973 745f 6e6f  ction_arglist_no
-00029aa0: 6e62 6163 6b75 705f 5f45 5850 4543 545f  nbackup__EXPECT_
-00029ab0: 4f50 5449 4f4e 414c 5f5f 4558 5045 4354  OPTIONAL__EXPECT
-00029ac0: 5f53 434d 5f5f 6675 6e63 7469 6f6e 5f61  _SCM__function_a
-00029ad0: 7267 6c69 7374 5f63 6c6f 7365 645f 5f43  rglist_closed__C
-00029ae0: 6872 3435 5f5f 5245 414c 280a 2020 2020  hr45__REAL(.    
-00029af0: 2020 2020 7365 6c66 2c20 700a 2020 2020      self, p.    
-00029b00: 293a 0a20 2020 2020 2020 2022 6675 6e63  ):.        "func
-00029b10: 7469 6f6e 5f61 7267 6c69 7374 5f6e 6f6e  tion_arglist_non
-00029b20: 6261 636b 7570 203a 2045 5850 4543 545f  backup : EXPECT_
-00029b30: 4f50 5449 4f4e 414c 2045 5850 4543 545f  OPTIONAL EXPECT_
-00029b40: 5343 4d20 6675 6e63 7469 6f6e 5f61 7267  SCM function_arg
-00029b50: 6c69 7374 5f63 6c6f 7365 6420 272d 2720  list_closed '-' 
-00029b60: 5245 414c 220a 2020 2020 2020 2020 705b  REAL".        p[
-00029b70: 305d 203d 2070 5b33 5d20 2b20 5b2d 3120  0] = p[3] + [-1 
-00029b80: 2a20 705b 345d 5d0a 0a20 2020 2064 6566  * p[4]]..    def
-00029b90: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
-00029ba0: 6973 745f 6e6f 6e62 6163 6b75 705f 5f45  ist_nonbackup__E
-00029bb0: 5850 4543 545f 4f50 5449 4f4e 414c 5f5f  XPECT_OPTIONAL__
-00029bc0: 4558 5045 4354 5f53 434d 5f5f 6675 6e63  EXPECT_SCM__func
-00029bd0: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
-00029be0: 7365 645f 5f43 6872 3435 5f5f 554e 5349  sed__Chr45__UNSI
-00029bf0: 474e 4544 280a 2020 2020 2020 2020 7365  GNED(.        se
-00029c00: 6c66 2c20 700a 2020 2020 293a 0a20 2020  lf, p.    ):.   
-00029c10: 2020 2020 2022 6675 6e63 7469 6f6e 5f61       "function_a
-00029c20: 7267 6c69 7374 5f6e 6f6e 6261 636b 7570  rglist_nonbackup
-00029c30: 203a 2045 5850 4543 545f 4f50 5449 4f4e   : EXPECT_OPTION
-00029c40: 414c 2045 5850 4543 545f 5343 4d20 6675  AL EXPECT_SCM fu
-00029c50: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
-00029c60: 6c6f 7365 6420 272d 2720 554e 5349 474e  losed '-' UNSIGN
-00029c70: 4544 220a 2020 2020 2020 2020 705b 305d  ED".        p[0]
-00029c80: 203d 2070 5b33 5d20 2b20 5b2d 3120 2a20   = p[3] + [-1 * 
-00029c90: 705b 345d 5d0a 0a20 2020 2064 6566 2070  p[4]]..    def p
-00029ca0: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-00029cb0: 745f 6e6f 6e62 6163 6b75 705f 5f45 5850  t_nonbackup__EXP
-00029cc0: 4543 545f 4f50 5449 4f4e 414c 5f5f 4558  ECT_OPTIONAL__EX
-00029cd0: 5045 4354 5f53 434d 5f5f 6675 6e63 7469  PECT_SCM__functi
-00029ce0: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
-00029cf0: 645f 5f46 5241 4354 494f 4e28 0a20 2020  d__FRACTION(.   
-00029d00: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
-00029d10: 2029 3a0a 2020 2020 2020 2020 2266 756e   ):.        "fun
-00029d20: 6374 696f 6e5f 6172 676c 6973 745f 6e6f  ction_arglist_no
-00029d30: 6e62 6163 6b75 7020 3a20 4558 5045 4354  nbackup : EXPECT
-00029d40: 5f4f 5054 494f 4e41 4c20 4558 5045 4354  _OPTIONAL EXPECT
-00029d50: 5f53 434d 2066 756e 6374 696f 6e5f 6172  _SCM function_ar
-00029d60: 676c 6973 745f 636c 6f73 6564 2046 5241  glist_closed FRA
-00029d70: 4354 494f 4e22 0a20 2020 2020 2020 2070  CTION".        p
-00029d80: 5b30 5d20 3d20 705b 335d 202b 205b 705b  [0] = p[3] + [p[
-00029d90: 345d 5d0a 0a20 2020 2064 6566 2070 5f66  4]]..    def p_f
-00029da0: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-00029db0: 6e6f 6e62 6163 6b75 705f 5f45 5850 4543  nonbackup__EXPEC
-00029dc0: 545f 4f50 5449 4f4e 414c 5f5f 4558 5045  T_OPTIONAL__EXPE
-00029dd0: 4354 5f53 434d 5f5f 6675 6e63 7469 6f6e  CT_SCM__function
-00029de0: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
-00029df0: 5f62 6172 655f 6e75 6d62 6572 5f63 6c6f  _bare_number_clo
-00029e00: 7365 6428 0a20 2020 2020 2020 2073 656c  sed(.        sel
-00029e10: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
-00029e20: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
-00029e30: 676c 6973 745f 6e6f 6e62 6163 6b75 7020  glist_nonbackup 
-00029e40: 3a20 4558 5045 4354 5f4f 5054 494f 4e41  : EXPECT_OPTIONA
-00029e50: 4c20 4558 5045 4354 5f53 434d 2066 756e  L EXPECT_SCM fun
-00029e60: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
-00029e70: 6f73 6564 2062 6172 655f 6e75 6d62 6572  osed bare_number
-00029e80: 5f63 6c6f 7365 6422 0a20 2020 2020 2020  _closed".       
-00029e90: 2070 5b30 5d20 3d20 705b 335d 202b 205b   p[0] = p[3] + [
-00029ea0: 705b 345d 5d0a 0a20 2020 2064 6566 2070  p[4]]..    def p
-00029eb0: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-00029ec0: 745f 6e6f 6e62 6163 6b75 705f 5f45 5850  t_nonbackup__EXP
-00029ed0: 4543 545f 4f50 5449 4f4e 414c 5f5f 4558  ECT_OPTIONAL__EX
-00029ee0: 5045 4354 5f53 434d 5f5f 6675 6e63 7469  PECT_SCM__functi
-00029ef0: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
-00029f00: 645f 5f70 6f73 745f 6576 656e 745f 6e6f  d__post_event_no
-00029f10: 6669 6e67 6572 280a 2020 2020 2020 2020  finger(.        
-00029f20: 7365 6c66 2c20 700a 2020 2020 293a 0a20  self, p.    ):. 
-00029f30: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
-00029f40: 5f61 7267 6c69 7374 5f6e 6f6e 6261 636b  _arglist_nonback
-00029f50: 7570 203a 2045 5850 4543 545f 4f50 5449  up : EXPECT_OPTI
-00029f60: 4f4e 414c 2045 5850 4543 545f 5343 4d20  ONAL EXPECT_SCM 
-00029f70: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-00029f80: 5f63 6c6f 7365 6420 706f 7374 5f65 7665  _closed post_eve
-00029f90: 6e74 5f6e 6f66 696e 6765 7222 0a20 2020  nt_nofinger".   
-00029fa0: 2020 2020 2070 5b30 5d20 3d20 705b 335d       p[0] = p[3]
-00029fb0: 202b 205b 705b 345d 5d0a 0a20 2020 2023   + [p[4]]..    #
-00029fc0: 2323 2066 756e 6374 696f 6e5f 6172 676c  ## function_argl
-00029fd0: 6973 745f 6f70 7469 6f6e 616c 2023 2323  ist_optional ###
-00029fe0: 0a0a 2020 2020 6465 6620 705f 6675 6e63  ..    def p_func
-00029ff0: 7469 6f6e 5f61 7267 6c69 7374 5f6f 7074  tion_arglist_opt
-0002a000: 696f 6e61 6c5f 5f45 5850 4543 545f 4f50  ional__EXPECT_OP
-0002a010: 5449 4f4e 414c 5f5f 4558 5045 4354 5f44  TIONAL__EXPECT_D
-0002a020: 5552 4154 494f 4e5f 5f66 756e 6374 696f  URATION__functio
-0002a030: 6e5f 6172 676c 6973 745f 6f70 7469 6f6e  n_arglist_option
-0002a040: 616c 280a 2020 2020 2020 2020 7365 6c66  al(.        self
-0002a050: 2c20 700a 2020 2020 293a 0a20 2020 2020  , p.    ):.     
-0002a060: 2020 2022 6675 6e63 7469 6f6e 5f61 7267     "function_arg
-0002a070: 6c69 7374 5f6f 7074 696f 6e61 6c20 3a20  list_optional : 
-0002a080: 4558 5045 4354 5f4f 5054 494f 4e41 4c20  EXPECT_OPTIONAL 
-0002a090: 4558 5045 4354 5f44 5552 4154 494f 4e20  EXPECT_DURATION 
-0002a0a0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-0002a0b0: 5f6f 7074 696f 6e61 6c22 0a20 2020 2020  _optional".     
-0002a0c0: 2020 2070 5b30 5d20 3d20 705b 335d 202b     p[0] = p[3] +
-0002a0d0: 205b 705b 315d 5d0a 0a20 2020 2064 6566   [p[1]]..    def
-0002a0e0: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
-0002a0f0: 6973 745f 6f70 7469 6f6e 616c 5f5f 4558  ist_optional__EX
-0002a100: 5045 4354 5f4f 5054 494f 4e41 4c5f 5f45  PECT_OPTIONAL__E
-0002a110: 5850 4543 545f 5049 5443 485f 5f66 756e  XPECT_PITCH__fun
-0002a120: 6374 696f 6e5f 6172 676c 6973 745f 6f70  ction_arglist_op
-0002a130: 7469 6f6e 616c 280a 2020 2020 2020 2020  tional(.        
-0002a140: 7365 6c66 2c20 700a 2020 2020 293a 0a20  self, p.    ):. 
-0002a150: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
-0002a160: 5f61 7267 6c69 7374 5f6f 7074 696f 6e61  _arglist_optiona
-0002a170: 6c20 3a20 4558 5045 4354 5f4f 5054 494f  l : EXPECT_OPTIO
-0002a180: 4e41 4c20 4558 5045 4354 5f50 4954 4348  NAL EXPECT_PITCH
-0002a190: 2066 756e 6374 696f 6e5f 6172 676c 6973   function_arglis
-0002a1a0: 745f 6f70 7469 6f6e 616c 220a 2020 2020  t_optional".    
-0002a1b0: 2020 2020 705b 305d 203d 2070 5b33 5d20      p[0] = p[3] 
-0002a1c0: 2b20 5b70 5b31 5d5d 0a0a 2020 2020 6465  + [p[1]]..    de
-0002a1d0: 6620 705f 6675 6e63 7469 6f6e 5f61 7267  f p_function_arg
-0002a1e0: 6c69 7374 5f6f 7074 696f 6e61 6c5f 5f66  list_optional__f
-0002a1f0: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
-0002a200: 6261 636b 7570 5f5f 4241 434b 5550 2873  backup__BACKUP(s
-0002a210: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-0002a220: 2022 6675 6e63 7469 6f6e 5f61 7267 6c69   "function_argli
-0002a230: 7374 5f6f 7074 696f 6e61 6c20 3a20 6675  st_optional : fu
-0002a240: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f62  nction_arglist_b
-0002a250: 6163 6b75 7020 4241 434b 5550 220a 2020  ackup BACKUP".  
-0002a260: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-0002a270: 5d0a 0a20 2020 2064 6566 2070 5f66 756e  ]..    def p_fun
-0002a280: 6374 696f 6e5f 6172 676c 6973 745f 6f70  ction_arglist_op
-0002a290: 7469 6f6e 616c 5f5f 6675 6e63 7469 6f6e  tional__function
-0002a2a0: 5f61 7267 6c69 7374 5f6b 6565 7028 7365  _arglist_keep(se
-0002a2b0: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-0002a2c0: 2266 756e 6374 696f 6e5f 6172 676c 6973  "function_arglis
-0002a2d0: 745f 6f70 7469 6f6e 616c 203a 2066 756e  t_optional : fun
-0002a2e0: 6374 696f 6e5f 6172 676c 6973 745f 6b65  ction_arglist_ke
-0002a2f0: 6570 2025 7072 6563 2046 554e 4354 494f  ep %prec FUNCTIO
-0002a300: 4e5f 4152 474c 4953 5422 0a20 2020 2020  N_ARGLIST".     
-0002a310: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-0002a320: 2020 2020 2323 2320 6675 6e63 7469 6f6e      ### function
-0002a330: 5f61 7267 6c69 7374 5f73 6b69 7020 2323  _arglist_skip ##
-0002a340: 230a 0a20 2020 2064 6566 2070 5f66 756e  #..    def p_fun
-0002a350: 6374 696f 6e5f 6172 676c 6973 745f 736b  ction_arglist_sk
-0002a360: 6970 5f5f 4558 5045 4354 5f4f 5054 494f  ip__EXPECT_OPTIO
-0002a370: 4e41 4c5f 5f45 5850 4543 545f 4455 5241  NAL__EXPECT_DURA
-0002a380: 5449 4f4e 5f5f 6675 6e63 7469 6f6e 5f61  TION__function_a
-0002a390: 7267 6c69 7374 5f73 6b69 7028 0a20 2020  rglist_skip(.   
-0002a3a0: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
-0002a3b0: 2029 3a0a 2020 2020 2020 2020 2266 756e   ):.        "fun
-0002a3c0: 6374 696f 6e5f 6172 676c 6973 745f 736b  ction_arglist_sk
-0002a3d0: 6970 203a 2045 5850 4543 545f 4f50 5449  ip : EXPECT_OPTI
-0002a3e0: 4f4e 414c 2045 5850 4543 545f 4455 5241  ONAL EXPECT_DURA
-0002a3f0: 5449 4f4e 2066 756e 6374 696f 6e5f 6172  TION function_ar
-0002a400: 676c 6973 745f 736b 6970 2025 7072 6563  glist_skip %prec
-0002a410: 2046 554e 4354 494f 4e5f 4152 474c 4953   FUNCTION_ARGLIS
-0002a420: 5422 0a20 2020 2020 2020 2070 5b30 5d20  T".        p[0] 
-0002a430: 3d20 705b 335d 202b 205b 705b 315d 5d0a  = p[3] + [p[1]].
-0002a440: 0a20 2020 2064 6566 2070 5f66 756e 6374  .    def p_funct
-0002a450: 696f 6e5f 6172 676c 6973 745f 736b 6970  ion_arglist_skip
-0002a460: 5f5f 4558 5045 4354 5f4f 5054 494f 4e41  __EXPECT_OPTIONA
-0002a470: 4c5f 5f45 5850 4543 545f 5049 5443 485f  L__EXPECT_PITCH_
-0002a480: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
-0002a490: 745f 736b 6970 280a 2020 2020 2020 2020  t_skip(.        
-0002a4a0: 7365 6c66 2c20 700a 2020 2020 293a 0a20  self, p.    ):. 
-0002a4b0: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
-0002a4c0: 5f61 7267 6c69 7374 5f73 6b69 7020 3a20  _arglist_skip : 
-0002a4d0: 4558 5045 4354 5f4f 5054 494f 4e41 4c20  EXPECT_OPTIONAL 
-0002a4e0: 4558 5045 4354 5f50 4954 4348 2066 756e  EXPECT_PITCH fun
-0002a4f0: 6374 696f 6e5f 6172 676c 6973 745f 736b  ction_arglist_sk
-0002a500: 6970 2025 7072 6563 2046 554e 4354 494f  ip %prec FUNCTIO
-0002a510: 4e5f 4152 474c 4953 5422 0a20 2020 2020  N_ARGLIST".     
-0002a520: 2020 2070 5b30 5d20 3d20 705b 335d 202b     p[0] = p[3] +
-0002a530: 205b 705b 315d 5d0a 0a20 2020 2064 6566   [p[1]]..    def
-0002a540: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
-0002a550: 6973 745f 736b 6970 5f5f 4558 5045 4354  ist_skip__EXPECT
-0002a560: 5f4f 5054 494f 4e41 4c5f 5f45 5850 4543  _OPTIONAL__EXPEC
-0002a570: 545f 5343 4d5f 5f66 756e 6374 696f 6e5f  T_SCM__function_
-0002a580: 6172 676c 6973 745f 736b 6970 280a 2020  arglist_skip(.  
-0002a590: 2020 2020 2020 7365 6c66 2c20 700a 2020        self, p.  
-0002a5a0: 2020 293a 0a20 2020 2020 2020 2022 6675    ):.        "fu
-0002a5b0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f73  nction_arglist_s
-0002a5c0: 6b69 7020 3a20 4558 5045 4354 5f4f 5054  kip : EXPECT_OPT
-0002a5d0: 494f 4e41 4c20 4558 5045 4354 5f53 434d  IONAL EXPECT_SCM
-0002a5e0: 2066 756e 6374 696f 6e5f 6172 676c 6973   function_arglis
-0002a5f0: 745f 736b 6970 2025 7072 6563 2046 554e  t_skip %prec FUN
-0002a600: 4354 494f 4e5f 4152 474c 4953 5422 0a20  CTION_ARGLIST". 
-0002a610: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-0002a620: 335d 202b 205b 705b 315d 5d0a 0a20 2020  3] + [p[1]]..   
-0002a630: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
-0002a640: 6172 676c 6973 745f 736b 6970 5f5f 6675  arglist_skip__fu
-0002a650: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
-0002a660: 6f6d 6d6f 6e28 7365 6c66 2c20 7029 3a0a  ommon(self, p):.
-0002a670: 2020 2020 2020 2020 2266 756e 6374 696f          "functio
-0002a680: 6e5f 6172 676c 6973 745f 736b 6970 203a  n_arglist_skip :
-0002a690: 2066 756e 6374 696f 6e5f 6172 676c 6973   function_arglis
-0002a6a0: 745f 636f 6d6d 6f6e 220a 2020 2020 2020  t_common".      
-0002a6b0: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-0002a6c0: 2020 2023 2323 2067 656e 5f74 6578 745f     ### gen_text_
-0002a6d0: 6465 6620 2323 230a 0a20 2020 2064 6566  def ###..    def
-0002a6e0: 2070 5f67 656e 5f74 6578 745f 6465 665f   p_gen_text_def_
-0002a6f0: 5f66 756c 6c5f 6d61 726b 7570 2873 656c  _full_markup(sel
-0002a700: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-0002a710: 6765 6e5f 7465 7874 5f64 6566 203a 2066  gen_text_def : f
-0002a720: 756c 6c5f 6d61 726b 7570 220a 2020 2020  ull_markup".    
-0002a730: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
-0002a740: 0a20 2020 2064 6566 2070 5f67 656e 5f74  .    def p_gen_t
-0002a750: 6578 745f 6465 665f 5f73 696d 706c 655f  ext_def__simple_
-0002a760: 7374 7269 6e67 2873 656c 662c 2070 293a  string(self, p):
-0002a770: 0a20 2020 2020 2020 2022 6765 6e5f 7465  .        "gen_te
-0002a780: 7874 5f64 6566 203a 2073 696d 706c 655f  xt_def : simple_
-0002a790: 7374 7269 6e67 220a 2020 2020 2020 2020  string".        
-0002a7a0: 2320 6173 7365 7274 2069 7369 6e73 7461  # assert isinsta
-0002a7b0: 6e63 6528 705b 315d 2c20 7374 7229 2c20  nce(p[1], str), 
-0002a7c0: 7265 7072 2870 5b31 5d29 0a20 2020 2020  repr(p[1]).     
-0002a7d0: 2020 2070 5b30 5d20 3d20 5f69 6e64 6963     p[0] = _indic
-0002a7e0: 6174 6f72 732e 4d61 726b 7570 2872 6622  ators.Markup(rf"
-0002a7f0: 5c6d 6172 6b75 7020 7b7b 207b 705b 315d  \markup {{ {p[1]
-0002a800: 7d20 7d7d 2229 0a0a 2020 2020 2323 2320  } }}")..    ### 
-0002a810: 6772 6f75 7065 645f 6d75 7369 635f 6c69  grouped_music_li
-0002a820: 7374 2023 2323 0a0a 2020 2020 6465 6620  st ###..    def 
-0002a830: 705f 6772 6f75 7065 645f 6d75 7369 635f  p_grouped_music_
-0002a840: 6c69 7374 5f5f 7365 7175 656e 7469 616c  list__sequential
-0002a850: 5f6d 7573 6963 2873 656c 662c 2070 293a  _music(self, p):
-0002a860: 0a20 2020 2020 2020 2022 6772 6f75 7065  .        "groupe
-0002a870: 645f 6d75 7369 635f 6c69 7374 203a 2073  d_music_list : s
-0002a880: 6571 7565 6e74 6961 6c5f 6d75 7369 6322  equential_music"
-0002a890: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-0002a8a0: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
-0002a8b0: 6772 6f75 7065 645f 6d75 7369 635f 6c69  grouped_music_li
-0002a8c0: 7374 5f5f 7369 6d75 6c74 616e 656f 7573  st__simultaneous
-0002a8d0: 5f6d 7573 6963 2873 656c 662c 2070 293a  _music(self, p):
-0002a8e0: 0a20 2020 2020 2020 2022 6772 6f75 7065  .        "groupe
-0002a8f0: 645f 6d75 7369 635f 6c69 7374 203a 2073  d_music_list : s
-0002a900: 696d 756c 7461 6e65 6f75 735f 6d75 7369  imultaneous_musi
-0002a910: 6322 0a20 2020 2020 2020 2070 5b30 5d20  c".        p[0] 
-0002a920: 3d20 705b 315d 0a0a 2020 2020 2323 2320  = p[1]..    ### 
-0002a930: 6964 656e 7469 6669 6572 5f69 6e69 7420  identifier_init 
-0002a940: 2323 230a 0a20 2020 2023 2020 2020 6465  ###..    #    de
-0002a950: 6620 705f 6964 656e 7469 6669 6572 5f69  f p_identifier_i
-0002a960: 6e69 745f 5f62 6f6f 6b5f 626c 6f63 6b28  nit__book_block(
-0002a970: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
-0002a980: 2020 2020 2020 2027 6964 656e 7469 6669         'identifi
-0002a990: 6572 5f69 6e69 7420 3a20 626f 6f6b 5f62  er_init : book_b
-0002a9a0: 6c6f 636b 270a 2020 2020 2320 2020 2020  lock'.    #     
-0002a9b0: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-0002a9c0: 4e6f 6465 2827 626f 6f6b 5f62 6c6f 636b  Node('book_block
-0002a9d0: 272c 2070 5b31 5d29 0a0a 2020 2020 2320  ', p[1])..    # 
-0002a9e0: 2020 2064 6566 2070 5f69 6465 6e74 6966     def p_identif
-0002a9f0: 6965 725f 696e 6974 5f5f 626f 6f6b 7061  ier_init__bookpa
-0002aa00: 7274 5f62 6c6f 636b 2873 656c 662c 2070  rt_block(self, p
-0002aa10: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
-0002aa20: 2769 6465 6e74 6966 6965 725f 696e 6974  'identifier_init
-0002aa30: 203a 2062 6f6f 6b70 6172 745f 626c 6f63   : bookpart_bloc
-0002aa40: 6b27 0a20 2020 2023 2020 2020 2020 2020  k'.    #        
-0002aa50: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-0002aa60: 6528 2762 6f6f 6b70 6172 745f 626c 6f63  e('bookpart_bloc
-0002aa70: 6b27 2c20 705b 315d 290a 0a20 2020 2064  k', p[1])..    d
-0002aa80: 6566 2070 5f69 6465 6e74 6966 6965 725f  ef p_identifier_
-0002aa90: 696e 6974 5f5f 636f 6e74 6578 745f 6465  init__context_de
-0002aaa0: 665f 7370 6563 5f62 6c6f 636b 2873 656c  f_spec_block(sel
-0002aab0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-0002aac0: 6964 656e 7469 6669 6572 5f69 6e69 7420  identifier_init 
-0002aad0: 3a20 636f 6e74 6578 745f 6465 665f 7370  : context_def_sp
-0002aae0: 6563 5f62 6c6f 636b 220a 2020 2020 2020  ec_block".      
-0002aaf0: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-0002ab00: 6f64 6528 2263 6f6e 7465 7874 5f64 6566  ode("context_def
-0002ab10: 5f73 7065 635f 626c 6f63 6b22 2c20 705b  _spec_block", p[
-0002ab20: 315d 290a 0a20 2020 2064 6566 2070 5f69  1])..    def p_i
-0002ab30: 6465 6e74 6966 6965 725f 696e 6974 5f5f  dentifier_init__
-0002ab40: 636f 6e74 6578 745f 6d6f 6469 6669 6361  context_modifica
-0002ab50: 7469 6f6e 2873 656c 662c 2070 293a 0a20  tion(self, p):. 
-0002ab60: 2020 2020 2020 2022 6964 656e 7469 6669         "identifi
-0002ab70: 6572 5f69 6e69 7420 3a20 636f 6e74 6578  er_init : contex
-0002ab80: 745f 6d6f 6469 6669 6361 7469 6f6e 220a  t_modification".
-0002ab90: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-0002aba0: 796e 7461 784e 6f64 6528 2263 6f6e 7465  yntaxNode("conte
-0002abb0: 7874 5f6d 6f64 6966 6963 6174 696f 6e22  xt_modification"
-0002abc0: 2c20 705b 315d 290a 0a20 2020 2064 6566  , p[1])..    def
-0002abd0: 2070 5f69 6465 6e74 6966 6965 725f 696e   p_identifier_in
-0002abe0: 6974 5f5f 656d 6265 6464 6564 5f73 636d  it__embedded_scm
-0002abf0: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-0002ac00: 2020 2022 6964 656e 7469 6669 6572 5f69     "identifier_i
-0002ac10: 6e69 7420 3a20 656d 6265 6464 6564 5f73  nit : embedded_s
-0002ac20: 636d 220a 2020 2020 2020 2020 705b 305d  cm".        p[0]
-0002ac30: 203d 2053 796e 7461 784e 6f64 6528 2265   = SyntaxNode("e
-0002ac40: 6d62 6564 6465 645f 7363 6d22 2c20 705b  mbedded_scm", p[
-0002ac50: 315d 290a 0a20 2020 2064 6566 2070 5f69  1])..    def p_i
-0002ac60: 6465 6e74 6966 6965 725f 696e 6974 5f5f  dentifier_init__
-0002ac70: 6675 6c6c 5f6d 6172 6b75 7028 7365 6c66  full_markup(self
-0002ac80: 2c20 7029 3a0a 2020 2020 2020 2020 2269  , p):.        "i
-0002ac90: 6465 6e74 6966 6965 725f 696e 6974 203a  dentifier_init :
-0002aca0: 2066 756c 6c5f 6d61 726b 7570 220a 2020   full_markup".  
-0002acb0: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
-0002acc0: 7461 784e 6f64 6528 2266 756c 6c5f 6d61  taxNode("full_ma
-0002acd0: 726b 7570 222c 2070 5b31 5d29 0a0a 2020  rkup", p[1])..  
-0002ace0: 2020 6465 6620 705f 6964 656e 7469 6669    def p_identifi
-0002acf0: 6572 5f69 6e69 745f 5f66 756c 6c5f 6d61  er_init__full_ma
-0002ad00: 726b 7570 5f6c 6973 7428 7365 6c66 2c20  rkup_list(self, 
-0002ad10: 7029 3a0a 2020 2020 2020 2020 2269 6465  p):.        "ide
-0002ad20: 6e74 6966 6965 725f 696e 6974 203a 2066  ntifier_init : f
-0002ad30: 756c 6c5f 6d61 726b 7570 5f6c 6973 7422  ull_markup_list"
-0002ad40: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-0002ad50: 5379 6e74 6178 4e6f 6465 2822 6675 6c6c  SyntaxNode("full
-0002ad60: 5f6d 6172 6b75 705f 6c69 7374 222c 2070  _markup_list", p
-0002ad70: 5b31 5d29 0a0a 2020 2020 6465 6620 705f  [1])..    def p_
-0002ad80: 6964 656e 7469 6669 6572 5f69 6e69 745f  identifier_init_
-0002ad90: 5f6d 7573 6963 2873 656c 662c 2070 293a  _music(self, p):
-0002ada0: 0a20 2020 2020 2020 2022 6964 656e 7469  .        "identi
-0002adb0: 6669 6572 5f69 6e69 7420 3a20 6d75 7369  fier_init : musi
-0002adc0: 6322 0a20 2020 2020 2020 2070 5b30 5d20  c".        p[0] 
-0002add0: 3d20 5379 6e74 6178 4e6f 6465 2822 6d75  = SyntaxNode("mu
-0002ade0: 7369 6322 2c20 705b 315d 290a 0a20 2020  sic", p[1])..   
-0002adf0: 2064 6566 2070 5f69 6465 6e74 6966 6965   def p_identifie
-0002ae00: 725f 696e 6974 5f5f 6e75 6d62 6572 5f65  r_init__number_e
-0002ae10: 7870 7265 7373 696f 6e28 7365 6c66 2c20  xpression(self, 
-0002ae20: 7029 3a0a 2020 2020 2020 2020 2269 6465  p):.        "ide
-0002ae30: 6e74 6966 6965 725f 696e 6974 203a 206e  ntifier_init : n
-0002ae40: 756d 6265 725f 6578 7072 6573 7369 6f6e  umber_expression
-0002ae50: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-0002ae60: 2053 796e 7461 784e 6f64 6528 226e 756d   SyntaxNode("num
-0002ae70: 6265 725f 6578 7072 6573 7369 6f6e 222c  ber_expression",
-0002ae80: 2070 5b31 5d29 0a0a 2020 2020 6465 6620   p[1])..    def 
-0002ae90: 705f 6964 656e 7469 6669 6572 5f69 6e69  p_identifier_ini
-0002aea0: 745f 5f6f 7574 7075 745f 6465 6628 7365  t__output_def(se
-0002aeb0: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-0002aec0: 2269 6465 6e74 6966 6965 725f 696e 6974  "identifier_init
-0002aed0: 203a 206f 7574 7075 745f 6465 6622 0a20   : output_def". 
-0002aee0: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
-0002aef0: 6e74 6178 4e6f 6465 2822 6f75 7470 7574  ntaxNode("output
-0002af00: 5f64 6566 222c 2070 5b31 5d29 0a0a 2020  _def", p[1])..  
-0002af10: 2020 6465 6620 705f 6964 656e 7469 6669    def p_identifi
-0002af20: 6572 5f69 6e69 745f 5f70 6f73 745f 6576  er_init__post_ev
-0002af30: 656e 745f 6e6f 6669 6e67 6572 2873 656c  ent_nofinger(sel
-0002af40: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-0002af50: 6964 656e 7469 6669 6572 5f69 6e69 7420  identifier_init 
-0002af60: 3a20 706f 7374 5f65 7665 6e74 5f6e 6f66  : post_event_nof
-0002af70: 696e 6765 7222 0a20 2020 2020 2020 2070  inger".        p
-0002af80: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
-0002af90: 2822 706f 7374 5f65 7665 6e74 5f6e 6f66  ("post_event_nof
-0002afa0: 696e 6765 7222 2c20 705b 315d 290a 0a20  inger", p[1]).. 
-0002afb0: 2020 2064 6566 2070 5f69 6465 6e74 6966     def p_identif
-0002afc0: 6965 725f 696e 6974 5f5f 7363 6f72 655f  ier_init__score_
-0002afd0: 626c 6f63 6b28 7365 6c66 2c20 7029 3a0a  block(self, p):.
-0002afe0: 2020 2020 2020 2020 2269 6465 6e74 6966          "identif
-0002aff0: 6965 725f 696e 6974 203a 2073 636f 7265  ier_init : score
-0002b000: 5f62 6c6f 636b 220a 2020 2020 2020 2020  _block".        
-0002b010: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-0002b020: 6528 2273 636f 7265 5f62 6c6f 636b 222c  e("score_block",
-0002b030: 2070 5b31 5d29 0a0a 2020 2020 6465 6620   p[1])..    def 
-0002b040: 705f 6964 656e 7469 6669 6572 5f69 6e69  p_identifier_ini
-0002b050: 745f 5f73 7472 696e 6728 7365 6c66 2c20  t__string(self, 
-0002b060: 7029 3a0a 2020 2020 2020 2020 2269 6465  p):.        "ide
-0002b070: 6e74 6966 6965 725f 696e 6974 203a 2073  ntifier_init : s
-0002b080: 7472 696e 6722 0a20 2020 2020 2020 2070  tring".        p
-0002b090: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
-0002b0a0: 2822 7374 7269 6e67 222c 2070 5b31 5d29  ("string", p[1])
-0002b0b0: 0a0a 2020 2020 2323 2320 6c69 6c79 706f  ..    ### lilypo
-0002b0c0: 6e64 2023 2323 0a0a 2020 2020 6465 6620  nd ###..    def 
-0002b0d0: 705f 6c69 6c79 706f 6e64 5f5f 456d 7074  p_lilypond__Empt
-0002b0e0: 7928 7365 6c66 2c20 7029 3a0a 2020 2020  y(self, p):.    
-0002b0f0: 2020 2020 226c 696c 7970 6f6e 6420 3a22      "lilypond :"
-0002b100: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-0002b110: 5b5d 0a0a 2020 2020 2320 2020 2064 6566  []..    #    def
-0002b120: 2070 5f6c 696c 7970 6f6e 645f 5f6c 696c   p_lilypond__lil
-0002b130: 7970 6f6e 645f 5f49 4e56 414c 4944 2873  ypond__INVALID(s
-0002b140: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
-0002b150: 2020 2020 2020 276c 696c 7970 6f6e 6420        'lilypond 
-0002b160: 3a20 6c69 6c79 706f 6e64 2049 4e56 414c  : lilypond INVAL
-0002b170: 4944 270a 2020 2020 2320 2020 2020 2020  ID'.    #       
-0002b180: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-0002b190: 2020 6465 6620 705f 6c69 6c79 706f 6e64    def p_lilypond
-0002b1a0: 5f5f 6c69 6c79 706f 6e64 5f5f 6173 7369  __lilypond__assi
-0002b1b0: 676e 6d65 6e74 2873 656c 662c 2070 293a  gnment(self, p):
-0002b1c0: 0a20 2020 2020 2020 2022 6c69 6c79 706f  .        "lilypo
-0002b1d0: 6e64 203a 206c 696c 7970 6f6e 6420 6173  nd : lilypond as
-0002b1e0: 7369 676e 6d65 6e74 220a 2020 2020 2020  signment".      
-0002b1f0: 2020 705b 305d 203d 2070 5b31 5d0a 2020    p[0] = p[1].  
-0002b200: 2020 2020 2020 6966 2070 5b32 5d20 6973        if p[2] is
-0002b210: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0002b220: 2020 2020 2020 2073 656c 662e 636c 6965         self.clie
-0002b230: 6e74 2e5f 6173 7369 676e 5f76 6172 6961  nt._assign_varia
-0002b240: 626c 6528 705b 325d 5b30 5d2c 2070 5b32  ble(p[2][0], p[2
-0002b250: 5d5b 315d 290a 0a20 2020 2064 6566 2070  ][1])..    def p
-0002b260: 5f6c 696c 7970 6f6e 645f 5f6c 696c 7970  _lilypond__lilyp
-0002b270: 6f6e 645f 5f65 7272 6f72 2873 656c 662c  ond__error(self,
-0002b280: 2070 293a 0a20 2020 2020 2020 2022 6c69   p):.        "li
-0002b290: 6c79 706f 6e64 203a 206c 696c 7970 6f6e  lypond : lilypon
-0002b2a0: 6420 6572 726f 7222 0a20 2020 2020 2020  d error".       
-0002b2b0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-0002b2c0: 2020 6465 6620 705f 6c69 6c79 706f 6e64    def p_lilypond
-0002b2d0: 5f5f 6c69 6c79 706f 6e64 5f5f 746f 706c  __lilypond__topl
-0002b2e0: 6576 656c 5f65 7870 7265 7373 696f 6e28  evel_expression(
-0002b2f0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-0002b300: 2020 226c 696c 7970 6f6e 6420 3a20 6c69    "lilypond : li
-0002b310: 6c79 706f 6e64 2074 6f70 6c65 7665 6c5f  lypond toplevel_
-0002b320: 6578 7072 6573 7369 6f6e 220a 2020 2020  expression".    
-0002b330: 2020 2020 705b 305d 203d 2070 5b31 5d20      p[0] = p[1] 
-0002b340: 2b20 5b70 5b32 5d5d 0a0a 2020 2020 2323  + [p[2]]..    ##
-0002b350: 2320 6c69 6c79 706f 6e64 5f68 6561 6465  # lilypond_heade
-0002b360: 7220 2323 230a 0a20 2020 2064 6566 2070  r ###..    def p
-0002b370: 5f6c 696c 7970 6f6e 645f 6865 6164 6572  _lilypond_header
-0002b380: 5f5f 4845 4144 4552 5f5f 4368 7231 3233  __HEADER__Chr123
-0002b390: 5f5f 6c69 6c79 706f 6e64 5f68 6561 6465  __lilypond_heade
-0002b3a0: 725f 626f 6479 5f5f 4368 7231 3235 2873  r_body__Chr125(s
-0002b3b0: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-0002b3c0: 2022 6c69 6c79 706f 6e64 5f68 6561 6465   "lilypond_heade
-0002b3d0: 7220 3a20 4845 4144 4552 2027 7b27 206c  r : HEADER '{' l
-0002b3e0: 696c 7970 6f6e 645f 6865 6164 6572 5f62  ilypond_header_b
-0002b3f0: 6f64 7920 277d 2722 0a20 2020 2020 2020  ody '}'".       
-0002b400: 2073 656c 662e 636c 6965 6e74 2e5f 706f   self.client._po
-0002b410: 705f 7661 7269 6162 6c65 5f73 636f 7065  p_variable_scope
-0002b420: 2829 0a20 2020 2020 2020 2070 5b30 5d20  ().        p[0] 
-0002b430: 3d20 705b 335d 0a0a 2020 2020 2323 2320  = p[3]..    ### 
-0002b440: 6c69 6c79 706f 6e64 5f68 6561 6465 725f  lilypond_header_
-0002b450: 626f 6479 2023 2323 0a0a 2020 2020 6465  body ###..    de
-0002b460: 6620 705f 6c69 6c79 706f 6e64 5f68 6561  f p_lilypond_hea
-0002b470: 6465 725f 626f 6479 5f5f 456d 7074 7928  der_body__Empty(
-0002b480: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-0002b490: 2020 226c 696c 7970 6f6e 645f 6865 6164    "lilypond_head
-0002b4a0: 6572 5f62 6f64 7920 3a22 0a20 2020 2020  er_body :".     
-0002b4b0: 2020 2073 656c 662e 636c 6965 6e74 2e5f     self.client._
-0002b4c0: 7075 7368 5f76 6172 6961 626c 655f 7363  push_variable_sc
-0002b4d0: 6f70 6528 290a 2020 2020 2020 2020 705b  ope().        p[
-0002b4e0: 305d 203d 205f 6c69 6c79 706f 6e64 6669  0] = _lilypondfi
-0002b4f0: 6c65 2e42 6c6f 636b 286e 616d 653d 2268  le.Block(name="h
-0002b500: 6561 6465 7222 290a 0a20 2020 2064 6566  eader")..    def
-0002b510: 2070 5f6c 696c 7970 6f6e 645f 6865 6164   p_lilypond_head
-0002b520: 6572 5f62 6f64 795f 5f6c 696c 7970 6f6e  er_body__lilypon
-0002b530: 645f 6865 6164 6572 5f62 6f64 795f 5f61  d_header_body__a
-0002b540: 7373 6967 6e6d 656e 7428 7365 6c66 2c20  ssignment(self, 
-0002b550: 7029 3a0a 2020 2020 2020 2020 226c 696c  p):.        "lil
-0002b560: 7970 6f6e 645f 6865 6164 6572 5f62 6f64  ypond_header_bod
-0002b570: 7920 3a20 6c69 6c79 706f 6e64 5f68 6561  y : lilypond_hea
-0002b580: 6465 725f 626f 6479 2061 7373 6967 6e6d  der_body assignm
-0002b590: 656e 7422 0a20 2020 2020 2020 2073 656c  ent".        sel
-0002b5a0: 662e 636c 6965 6e74 2e5f 6173 7369 676e  f.client._assign
-0002b5b0: 5f76 6172 6961 626c 6528 705b 325d 5b30  _variable(p[2][0
-0002b5c0: 5d2c 2070 5b32 5d5b 315d 290a 2020 2020  ], p[2][1]).    
-0002b5d0: 2020 2020 7365 7461 7474 7228 705b 315d      setattr(p[1]
-0002b5e0: 2c20 705b 325d 5b30 5d2c 2070 5b32 5d5b  , p[2][0], p[2][
-0002b5f0: 315d 2e76 616c 7565 290a 2020 2020 2020  1].value).      
-0002b600: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-0002b610: 2020 2023 2323 206c 7972 6963 5f65 6c65     ### lyric_ele
-0002b620: 6d65 6e74 2023 2323 0a0a 2020 2020 2320  ment ###..    # 
-0002b630: 2020 2064 6566 2070 5f6c 7972 6963 5f65     def p_lyric_e
-0002b640: 6c65 6d65 6e74 5f5f 4c59 5249 4353 5f53  lement__LYRICS_S
-0002b650: 5452 494e 4728 7365 6c66 2c20 7029 3a0a  TRING(self, p):.
-0002b660: 2020 2020 2320 2020 2020 2020 2027 6c79      #        'ly
-0002b670: 7269 635f 656c 656d 656e 7420 3a20 4c59  ric_element : LY
-0002b680: 5249 4353 5f53 5452 494e 4727 0a20 2020  RICS_STRING'.   
-0002b690: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-0002b6a0: 2053 796e 7461 784e 6f64 6528 276c 7972   SyntaxNode('lyr
-0002b6b0: 6963 5f65 6c65 6d65 6e74 272c 2070 5b31  ic_element', p[1
-0002b6c0: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
-0002b6d0: 6620 705f 6c79 7269 635f 656c 656d 656e  f p_lyric_elemen
-0002b6e0: 745f 5f6c 7972 6963 5f6d 6172 6b75 7028  t__lyric_markup(
-0002b6f0: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
-0002b700: 2020 2020 2020 2027 6c79 7269 635f 656c         'lyric_el
-0002b710: 656d 656e 7420 3a20 6c79 7269 635f 6d61  ement : lyric_ma
-0002b720: 726b 7570 270a 2020 2020 2320 2020 2020  rkup'.    #     
-0002b730: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-0002b740: 4e6f 6465 2827 6c79 7269 635f 656c 656d  Node('lyric_elem
-0002b750: 656e 7427 2c20 705b 313a 5d29 0a0a 2020  ent', p[1:])..  
-0002b760: 2020 2323 2320 6c79 7269 635f 656c 656d    ### lyric_elem
-0002b770: 656e 745f 6172 6720 2323 230a 0a20 2020  ent_arg ###..   
-0002b780: 2023 2020 2020 6465 6620 705f 6c79 7269   #    def p_lyri
-0002b790: 635f 656c 656d 656e 745f 6172 675f 5f4c  c_element_arg__L
-0002b7a0: 5952 4943 5f45 4c45 4d45 4e54 5f5f 6f70  YRIC_ELEMENT__op
-0002b7b0: 7469 6f6e 616c 5f6e 6f74 656d 6f64 655f  tional_notemode_
-0002b7c0: 6475 7261 7469 6f6e 5f5f 706f 7374 5f65  duration__post_e
-0002b7d0: 7665 6e74 7328 7365 6c66 2c20 7029 3a0a  vents(self, p):.
-0002b7e0: 2020 2020 2320 2020 2020 2020 2027 6c79      #        'ly
-0002b7f0: 7269 635f 656c 656d 656e 745f 6172 6720  ric_element_arg 
-0002b800: 3a20 4c59 5249 435f 454c 454d 454e 5420  : LYRIC_ELEMENT 
-0002b810: 6f70 7469 6f6e 616c 5f6e 6f74 656d 6f64  optional_notemod
-0002b820: 655f 6475 7261 7469 6f6e 2070 6f73 745f  e_duration post_
-0002b830: 6576 656e 7473 270a 2020 2020 2320 2020  events'.    #   
-0002b840: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
-0002b850: 6178 4e6f 6465 2827 6c79 7269 635f 656c  axNode('lyric_el
-0002b860: 656d 656e 745f 6172 6727 2c20 705b 313a  ement_arg', p[1:
-0002b870: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
-0002b880: 2070 5f6c 7972 6963 5f65 6c65 6d65 6e74   p_lyric_element
-0002b890: 5f61 7267 5f5f 6c79 7269 635f 656c 656d  _arg__lyric_elem
-0002b8a0: 656e 7428 7365 6c66 2c20 7029 3a0a 2020  ent(self, p):.  
-0002b8b0: 2020 2320 2020 2020 2020 2027 6c79 7269    #        'lyri
-0002b8c0: 635f 656c 656d 656e 745f 6172 6720 3a20  c_element_arg : 
-0002b8d0: 6c79 7269 635f 656c 656d 656e 7427 0a20  lyric_element'. 
-0002b8e0: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
-0002b8f0: 203d 2053 796e 7461 784e 6f64 6528 276c   = SyntaxNode('l
-0002b900: 7972 6963 5f65 6c65 6d65 6e74 5f61 7267  yric_element_arg
-0002b910: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
-0002b920: 2020 2020 6465 6620 705f 6c79 7269 635f      def p_lyric_
-0002b930: 656c 656d 656e 745f 6172 675f 5f6c 7972  element_arg__lyr
-0002b940: 6963 5f65 6c65 6d65 6e74 5f5f 6d75 6c74  ic_element__mult
-0002b950: 6970 6c69 6564 5f64 7572 6174 696f 6e5f  iplied_duration_
-0002b960: 5f70 6f73 745f 6576 656e 7473 2873 656c  _post_events(sel
-0002b970: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
-0002b980: 2020 2020 276c 7972 6963 5f65 6c65 6d65      'lyric_eleme
-0002b990: 6e74 5f61 7267 203a 206c 7972 6963 5f65  nt_arg : lyric_e
-0002b9a0: 6c65 6d65 6e74 206d 756c 7469 706c 6965  lement multiplie
-0002b9b0: 645f 6475 7261 7469 6f6e 2070 6f73 745f  d_duration post_
-0002b9c0: 6576 656e 7473 270a 2020 2020 2320 2020  events'.    #   
-0002b9d0: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
-0002b9e0: 6178 4e6f 6465 2827 6c79 7269 635f 656c  axNode('lyric_el
-0002b9f0: 656d 656e 745f 6172 6727 2c20 705b 313a  ement_arg', p[1:
-0002ba00: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
-0002ba10: 2070 5f6c 7972 6963 5f65 6c65 6d65 6e74   p_lyric_element
-0002ba20: 5f61 7267 5f5f 6c79 7269 635f 656c 656d  _arg__lyric_elem
-0002ba30: 656e 745f 5f70 6f73 745f 6576 656e 745f  ent__post_event_
-0002ba40: 5f70 6f73 745f 6576 656e 7473 2873 656c  _post_events(sel
-0002ba50: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
-0002ba60: 2020 2020 276c 7972 6963 5f65 6c65 6d65      'lyric_eleme
-0002ba70: 6e74 5f61 7267 203a 206c 7972 6963 5f65  nt_arg : lyric_e
-0002ba80: 6c65 6d65 6e74 2070 6f73 745f 6576 656e  lement post_even
-0002ba90: 7420 706f 7374 5f65 7665 6e74 7327 0a20  t post_events'. 
-0002baa0: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
-0002bab0: 203d 2053 796e 7461 784e 6f64 6528 276c   = SyntaxNode('l
-0002bac0: 7972 6963 5f65 6c65 6d65 6e74 5f61 7267  yric_element_arg
-0002bad0: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
-0002bae0: 2323 206c 7972 6963 5f65 6c65 6d65 6e74  ## lyric_element
-0002baf0: 5f6d 7573 6963 2023 2323 0a0a 2020 2020  _music ###..    
-0002bb00: 2320 2020 2064 6566 2070 5f6c 7972 6963  #    def p_lyric
-0002bb10: 5f65 6c65 6d65 6e74 5f6d 7573 6963 5f5f  _element_music__
-0002bb20: 6c79 7269 635f 656c 656d 656e 745f 5f6f  lyric_element__o
-0002bb30: 7074 696f 6e61 6c5f 6e6f 7465 6d6f 6465  ptional_notemode
-0002bb40: 5f64 7572 6174 696f 6e5f 5f70 6f73 745f  _duration__post_
-0002bb50: 6576 656e 7473 2873 656c 662c 2070 293a  events(self, p):
-0002bb60: 0a20 2020 2023 2020 2020 2020 2020 276c  .    #        'l
-0002bb70: 7972 6963 5f65 6c65 6d65 6e74 5f6d 7573  yric_element_mus
-0002bb80: 6963 203a 206c 7972 6963 5f65 6c65 6d65  ic : lyric_eleme
-0002bb90: 6e74 206f 7074 696f 6e61 6c5f 6e6f 7465  nt optional_note
-0002bba0: 6d6f 6465 5f64 7572 6174 696f 6e20 706f  mode_duration po
-0002bbb0: 7374 5f65 7665 6e74 7327 0a20 2020 2023  st_events'.    #
-0002bbc0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-0002bbd0: 796e 7461 784e 6f64 6528 276c 7972 6963  yntaxNode('lyric
-0002bbe0: 5f65 6c65 6d65 6e74 5f6d 7573 6963 272c  _element_music',
-0002bbf0: 2070 5b31 3a5d 290a 0a20 2020 2023 2323   p[1:])..    ###
-0002bc00: 206c 7972 6963 5f6d 6172 6b75 7020 2323   lyric_markup ##
-0002bc10: 230a 0a20 2020 2023 2020 2020 6465 6620  #..    #    def 
-0002bc20: 705f 6c79 7269 635f 6d61 726b 7570 5f5f  p_lyric_markup__
-0002bc30: 4c59 5249 435f 4d41 524b 5550 5f49 4445  LYRIC_MARKUP_IDE
-0002bc40: 4e54 4946 4945 5228 7365 6c66 2c20 7029  NTIFIER(self, p)
-0002bc50: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-0002bc60: 6c79 7269 635f 6d61 726b 7570 203a 204c  lyric_markup : L
-0002bc70: 5952 4943 5f4d 4152 4b55 505f 4944 454e  YRIC_MARKUP_IDEN
-0002bc80: 5449 4649 4552 270a 2020 2020 2320 2020  TIFIER'.    #   
-0002bc90: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
-0002bca0: 6178 4e6f 6465 2827 6c79 7269 635f 6d61  axNode('lyric_ma
-0002bcb0: 726b 7570 272c 2070 5b31 3a5d 290a 0a20  rkup', p[1:]).. 
-0002bcc0: 2020 2023 2020 2020 6465 6620 705f 6c79     #    def p_ly
-0002bcd0: 7269 635f 6d61 726b 7570 5f5f 4c59 5249  ric_markup__LYRI
-0002bce0: 435f 4d41 524b 5550 5f5f 6d61 726b 7570  C_MARKUP__markup
-0002bcf0: 5f74 6f70 2873 656c 662c 2070 293a 0a20  _top(self, p):. 
-0002bd00: 2020 2023 2020 2020 2020 2020 276c 7972     #        'lyr
-0002bd10: 6963 5f6d 6172 6b75 7020 3a20 4c59 5249  ic_markup : LYRI
-0002bd20: 435f 4d41 524b 5550 206d 6172 6b75 705f  C_MARKUP markup_
-0002bd30: 746f 7027 0a20 2020 2023 2020 2020 2020  top'.    #      
-0002bd40: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-0002bd50: 6f64 6528 276c 7972 6963 5f6d 6172 6b75  ode('lyric_marku
-0002bd60: 7027 2c20 705b 313a 5d29 0a0a 2020 2020  p', p[1:])..    
-0002bd70: 2323 2320 6d61 726b 7570 2023 2323 0a0a  ### markup ###..
-0002bd80: 2020 2020 6465 6620 705f 6d61 726b 7570      def p_markup
-0002bd90: 5f5f 6d61 726b 7570 5f68 6561 645f 315f  __markup_head_1_
-0002bda0: 6c69 7374 5f5f 7369 6d70 6c65 5f6d 6172  list__simple_mar
-0002bdb0: 6b75 7028 7365 6c66 2c20 7029 3a0a 2020  kup(self, p):.  
-0002bdc0: 2020 2020 2020 226d 6172 6b75 7020 3a20        "markup : 
-0002bdd0: 6d61 726b 7570 5f68 6561 645f 315f 6c69  markup_head_1_li
-0002bde0: 7374 2073 696d 706c 655f 6d61 726b 7570  st simple_markup
-0002bdf0: 220a 2020 2020 2020 2020 6d61 726b 7570  ".        markup
-0002be00: 203d 2070 5b32 5d0a 2020 2020 2020 2020   = p[2].        
-0002be10: 666f 7220 6974 656d 2069 6e20 7265 7665  for item in reve
-0002be20: 7273 6564 2870 5b31 5d29 3a0a 2020 2020  rsed(p[1]):.    
-0002be30: 2020 2020 2020 2020 636f 6d6d 616e 6420          command 
-0002be40: 3d20 6974 656d 5b30 5d5b 313a 5d0a 2020  = item[0][1:].  
-0002be50: 2020 2020 2020 2020 2020 6172 6775 6d65            argume
-0002be60: 6e74 7320 3d20 6974 656d 5b31 3a5d 0a20  nts = item[1:]. 
-0002be70: 2020 2020 2020 2020 2020 2061 7267 756d             argum
-0002be80: 656e 7473 2e61 7070 656e 6428 6d61 726b  ents.append(mark
-0002be90: 7570 290a 2020 2020 2020 2020 2020 2020  up).            
-0002bea0: 6d61 726b 7570 203d 204d 6172 6b75 7043  markup = MarkupC
-0002beb0: 6f6d 6d61 6e64 2863 6f6d 6d61 6e64 2c20  ommand(command, 
-0002bec0: 2a61 7267 756d 656e 7473 290a 2020 2020  *arguments).    
-0002bed0: 2020 2020 705b 305d 203d 206d 6172 6b75      p[0] = marku
-0002bee0: 700a 0a20 2020 2064 6566 2070 5f6d 6172  p..    def p_mar
-0002bef0: 6b75 705f 5f73 696d 706c 655f 6d61 726b  kup__simple_mark
-0002bf00: 7570 2873 656c 662c 2070 293a 0a20 2020  up(self, p):.   
-0002bf10: 2020 2020 2022 6d61 726b 7570 203a 2073       "markup : s
-0002bf20: 696d 706c 655f 6d61 726b 7570 220a 2020  imple_markup".  
-0002bf30: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-0002bf40: 5d0a 0a20 2020 2023 2323 206d 6172 6b75  ]..    ### marku
-0002bf50: 705f 6272 6163 6564 5f6c 6973 7420 2323  p_braced_list ##
-0002bf60: 230a 0a20 2020 2064 6566 2070 5f6d 6172  #..    def p_mar
-0002bf70: 6b75 705f 6272 6163 6564 5f6c 6973 745f  kup_braced_list_
-0002bf80: 5f43 6872 3132 335f 5f6d 6172 6b75 705f  _Chr123__markup_
-0002bf90: 6272 6163 6564 5f6c 6973 745f 626f 6479  braced_list_body
-0002bfa0: 5f5f 4368 7231 3235 2873 656c 662c 2070  __Chr125(self, p
-0002bfb0: 293a 0a20 2020 2020 2020 2022 6d61 726b  ):.        "mark
-0002bfc0: 7570 5f62 7261 6365 645f 6c69 7374 203a  up_braced_list :
-0002bfd0: 2027 7b27 206d 6172 6b75 705f 6272 6163   '{' markup_brac
-0002bfe0: 6564 5f6c 6973 745f 626f 6479 2027 7d27  ed_list_body '}'
-0002bff0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-0002c000: 2070 5b32 5d0a 0a20 2020 2023 2323 206d   p[2]..    ### m
-0002c010: 6172 6b75 705f 6272 6163 6564 5f6c 6973  arkup_braced_lis
-0002c020: 745f 626f 6479 2023 2323 0a0a 2020 2020  t_body ###..    
-0002c030: 6465 6620 705f 6d61 726b 7570 5f62 7261  def p_markup_bra
-0002c040: 6365 645f 6c69 7374 5f62 6f64 795f 5f45  ced_list_body__E
-0002c050: 6d70 7479 2873 656c 662c 2070 293a 0a20  mpty(self, p):. 
-0002c060: 2020 2020 2020 2022 6d61 726b 7570 5f62         "markup_b
-0002c070: 7261 6365 645f 6c69 7374 5f62 6f64 7920  raced_list_body 
-0002c080: 3a22 0a20 2020 2020 2020 2070 5b30 5d20  :".        p[0] 
-0002c090: 3d20 5b5d 0a0a 2020 2020 6465 6620 705f  = []..    def p_
-0002c0a0: 6d61 726b 7570 5f62 7261 6365 645f 6c69  markup_braced_li
-0002c0b0: 7374 5f62 6f64 795f 5f6d 6172 6b75 705f  st_body__markup_
-0002c0c0: 6272 6163 6564 5f6c 6973 745f 626f 6479  braced_list_body
-0002c0d0: 5f5f 6d61 726b 7570 2873 656c 662c 2070  __markup(self, p
-0002c0e0: 293a 0a20 2020 2020 2020 2022 6d61 726b  ):.        "mark
-0002c0f0: 7570 5f62 7261 6365 645f 6c69 7374 5f62  up_braced_list_b
-0002c100: 6f64 7920 3a20 6d61 726b 7570 5f62 7261  ody : markup_bra
-0002c110: 6365 645f 6c69 7374 5f62 6f64 7920 6d61  ced_list_body ma
-0002c120: 726b 7570 220a 2020 2020 2020 2020 705b  rkup".        p[
-0002c130: 305d 203d 2070 5b31 5d20 2b20 5b70 5b32  0] = p[1] + [p[2
-0002c140: 5d5d 0a0a 2020 2020 6465 6620 705f 6d61  ]]..    def p_ma
-0002c150: 726b 7570 5f62 7261 6365 645f 6c69 7374  rkup_braced_list
-0002c160: 5f62 6f64 795f 5f6d 6172 6b75 705f 6272  _body__markup_br
-0002c170: 6163 6564 5f6c 6973 745f 626f 6479 5f5f  aced_list_body__
-0002c180: 6d61 726b 7570 5f6c 6973 7428 7365 6c66  markup_list(self
-0002c190: 2c20 7029 3a0a 2020 2020 2020 2020 226d  , p):.        "m
-0002c1a0: 6172 6b75 705f 6272 6163 6564 5f6c 6973  arkup_braced_lis
-0002c1b0: 745f 626f 6479 203a 206d 6172 6b75 705f  t_body : markup_
-0002c1c0: 6272 6163 6564 5f6c 6973 745f 626f 6479  braced_list_body
-0002c1d0: 206d 6172 6b75 705f 6c69 7374 220a 2020   markup_list".  
-0002c1e0: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-0002c1f0: 5d20 2b20 5b70 5b32 5d5d 0a0a 2020 2020  ] + [p[2]]..    
-0002c200: 2323 2320 6d61 726b 7570 5f63 6f6d 6d61  ### markup_comma
-0002c210: 6e64 5f62 6173 6963 5f61 7267 756d 656e  nd_basic_argumen
-0002c220: 7473 2023 2323 0a0a 2020 2020 6465 6620  ts ###..    def 
-0002c230: 705f 6d61 726b 7570 5f63 6f6d 6d61 6e64  p_markup_command
-0002c240: 5f62 6173 6963 5f61 7267 756d 656e 7473  _basic_arguments
-0002c250: 5f5f 4558 5045 4354 5f4d 4152 4b55 505f  __EXPECT_MARKUP_
-0002c260: 4c49 5354 5f5f 6d61 726b 7570 5f63 6f6d  LIST__markup_com
-0002c270: 6d61 6e64 5f6c 6973 745f 6172 6775 6d65  mand_list_argume
-0002c280: 6e74 735f 5f6d 6172 6b75 705f 6c69 7374  nts__markup_list
-0002c290: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-0002c2a0: 700a 2020 2020 293a 0a20 2020 2020 2020  p.    ):.       
-0002c2b0: 2022 6d61 726b 7570 5f63 6f6d 6d61 6e64   "markup_command
-0002c2c0: 5f62 6173 6963 5f61 7267 756d 656e 7473  _basic_arguments
-0002c2d0: 203a 2045 5850 4543 545f 4d41 524b 5550   : EXPECT_MARKUP
-0002c2e0: 5f4c 4953 5420 6d61 726b 7570 5f63 6f6d  _LIST markup_com
-0002c2f0: 6d61 6e64 5f6c 6973 745f 6172 6775 6d65  mand_list_argume
-0002c300: 6e74 7320 6d61 726b 7570 5f6c 6973 7422  nts markup_list"
-0002c310: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-0002c320: 705b 325d 202b 205b 705b 335d 5d0a 0a20  p[2] + [p[3]].. 
-0002c330: 2020 2064 6566 2070 5f6d 6172 6b75 705f     def p_markup_
-0002c340: 636f 6d6d 616e 645f 6261 7369 635f 6172  command_basic_ar
-0002c350: 6775 6d65 6e74 735f 5f45 5850 4543 545f  guments__EXPECT_
-0002c360: 4e4f 5f4d 4f52 455f 4152 4753 2873 656c  NO_MORE_ARGS(sel
-0002c370: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-0002c380: 6d61 726b 7570 5f63 6f6d 6d61 6e64 5f62  markup_command_b
-0002c390: 6173 6963 5f61 7267 756d 656e 7473 203a  asic_arguments :
-0002c3a0: 2045 5850 4543 545f 4e4f 5f4d 4f52 455f   EXPECT_NO_MORE_
-0002c3b0: 4152 4753 220a 2020 2020 2020 2020 705b  ARGS".        p[
-0002c3c0: 305d 203d 205b 5d0a 0a20 2020 2064 6566  0] = []..    def
-0002c3d0: 2070 5f6d 6172 6b75 705f 636f 6d6d 616e   p_markup_comman
-0002c3e0: 645f 6261 7369 635f 6172 6775 6d65 6e74  d_basic_argument
-0002c3f0: 735f 5f45 5850 4543 545f 5343 4d5f 5f6d  s__EXPECT_SCM__m
-0002c400: 6172 6b75 705f 636f 6d6d 616e 645f 6c69  arkup_command_li
-0002c410: 7374 5f61 7267 756d 656e 7473 5f5f 656d  st_arguments__em
-0002c420: 6265 6464 6564 5f73 636d 5f63 6c6f 7365  bedded_scm_close
-0002c430: 6428 0a20 2020 2020 2020 2073 656c 662c  d(.        self,
-0002c440: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
-0002c450: 2020 226d 6172 6b75 705f 636f 6d6d 616e    "markup_comman
-0002c460: 645f 6261 7369 635f 6172 6775 6d65 6e74  d_basic_argument
-0002c470: 7320 3a20 4558 5045 4354 5f53 434d 206d  s : EXPECT_SCM m
-0002c480: 6172 6b75 705f 636f 6d6d 616e 645f 6c69  arkup_command_li
-0002c490: 7374 5f61 7267 756d 656e 7473 2065 6d62  st_arguments emb
-0002c4a0: 6564 6465 645f 7363 6d5f 636c 6f73 6564  edded_scm_closed
-0002c4b0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-0002c4c0: 2070 5b32 5d20 2b20 5b70 5b33 5d5d 0a0a   p[2] + [p[3]]..
-0002c4d0: 2020 2020 2323 2320 6d61 726b 7570 5f63      ### markup_c
-0002c4e0: 6f6d 6d61 6e64 5f6c 6973 7420 2323 230a  ommand_list ###.
-0002c4f0: 0a20 2020 2064 6566 2070 5f6d 6172 6b75  .    def p_marku
-0002c500: 705f 636f 6d6d 616e 645f 6c69 7374 5f5f  p_command_list__
-0002c510: 4d41 524b 5550 5f4c 4953 545f 4655 4e43  MARKUP_LIST_FUNC
-0002c520: 5449 4f4e 5f5f 6d61 726b 7570 5f63 6f6d  TION__markup_com
-0002c530: 6d61 6e64 5f6c 6973 745f 6172 6775 6d65  mand_list_argume
-0002c540: 6e74 7328 0a20 2020 2020 2020 2073 656c  nts(.        sel
-0002c550: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
-0002c560: 2020 2020 226d 6172 6b75 705f 636f 6d6d      "markup_comm
-0002c570: 616e 645f 6c69 7374 203a 204d 4152 4b55  and_list : MARKU
-0002c580: 505f 4c49 5354 5f46 554e 4354 494f 4e20  P_LIST_FUNCTION 
-0002c590: 6d61 726b 7570 5f63 6f6d 6d61 6e64 5f6c  markup_command_l
-0002c5a0: 6973 745f 6172 6775 6d65 6e74 7322 0a20  ist_arguments". 
-0002c5b0: 2020 2020 2020 2070 5b30 5d20 3d20 4d61         p[0] = Ma
-0002c5c0: 726b 7570 436f 6d6d 616e 6428 705b 315d  rkupCommand(p[1]
-0002c5d0: 5b31 3a5d 2c20 2a70 5b32 5d29 0a0a 2020  [1:], *p[2])..  
-0002c5e0: 2020 2323 2320 6d61 726b 7570 5f63 6f6d    ### markup_com
-0002c5f0: 6d61 6e64 5f6c 6973 745f 6172 6775 6d65  mand_list_argume
-0002c600: 6e74 7320 2323 230a 0a20 2020 2064 6566  nts ###..    def
-0002c610: 2070 5f6d 6172 6b75 705f 636f 6d6d 616e   p_markup_comman
-0002c620: 645f 6c69 7374 5f61 7267 756d 656e 7473  d_list_arguments
-0002c630: 5f5f 4558 5045 4354 5f4d 4152 4b55 505f  __EXPECT_MARKUP_
-0002c640: 5f6d 6172 6b75 705f 636f 6d6d 616e 645f  _markup_command_
-0002c650: 6c69 7374 5f61 7267 756d 656e 7473 5f5f  list_arguments__
-0002c660: 6d61 726b 7570 280a 2020 2020 2020 2020  markup(.        
-0002c670: 7365 6c66 2c20 700a 2020 2020 293a 0a20  self, p.    ):. 
-0002c680: 2020 2020 2020 2022 6d61 726b 7570 5f63         "markup_c
-0002c690: 6f6d 6d61 6e64 5f6c 6973 745f 6172 6775  ommand_list_argu
-0002c6a0: 6d65 6e74 7320 3a20 4558 5045 4354 5f4d  ments : EXPECT_M
-0002c6b0: 4152 4b55 5020 6d61 726b 7570 5f63 6f6d  ARKUP markup_com
-0002c6c0: 6d61 6e64 5f6c 6973 745f 6172 6775 6d65  mand_list_argume
-0002c6d0: 6e74 7320 6d61 726b 7570 220a 2020 2020  nts markup".    
-0002c6e0: 2020 2020 705b 305d 203d 2070 5b32 5d20      p[0] = p[2] 
-0002c6f0: 2b20 5b70 5b33 5d5d 0a0a 2020 2020 6465  + [p[3]]..    de
-0002c700: 6620 705f 6d61 726b 7570 5f63 6f6d 6d61  f p_markup_comma
-0002c710: 6e64 5f6c 6973 745f 6172 6775 6d65 6e74  nd_list_argument
-0002c720: 735f 5f6d 6172 6b75 705f 636f 6d6d 616e  s__markup_comman
-0002c730: 645f 6261 7369 635f 6172 6775 6d65 6e74  d_basic_argument
-0002c740: 7328 7365 6c66 2c20 7029 3a0a 2020 2020  s(self, p):.    
-0002c750: 2020 2020 226d 6172 6b75 705f 636f 6d6d      "markup_comm
-0002c760: 616e 645f 6c69 7374 5f61 7267 756d 656e  and_list_argumen
-0002c770: 7473 203a 206d 6172 6b75 705f 636f 6d6d  ts : markup_comm
-0002c780: 616e 645f 6261 7369 635f 6172 6775 6d65  and_basic_argume
-0002c790: 6e74 7322 0a20 2020 2020 2020 2070 5b30  nts".        p[0
-0002c7a0: 5d20 3d20 705b 315d 0a0a 2020 2020 2323  ] = p[1]..    ##
-0002c7b0: 2320 6d61 726b 7570 5f63 6f6d 706f 7365  # markup_compose
-0002c7c0: 645f 6c69 7374 2023 2323 0a0a 2020 2020  d_list ###..    
-0002c7d0: 6465 6620 705f 6d61 726b 7570 5f63 6f6d  def p_markup_com
-0002c7e0: 706f 7365 645f 6c69 7374 5f5f 6d61 726b  posed_list__mark
-0002c7f0: 7570 5f68 6561 645f 315f 6c69 7374 5f5f  up_head_1_list__
-0002c800: 6d61 726b 7570 5f62 7261 6365 645f 6c69  markup_braced_li
-0002c810: 7374 2873 656c 662c 2070 293a 0a20 2020  st(self, p):.   
-0002c820: 2020 2020 2022 6d61 726b 7570 5f63 6f6d       "markup_com
-0002c830: 706f 7365 645f 6c69 7374 203a 206d 6172  posed_list : mar
-0002c840: 6b75 705f 6865 6164 5f31 5f6c 6973 7420  kup_head_1_list 
-0002c850: 6d61 726b 7570 5f62 7261 6365 645f 6c69  markup_braced_li
-0002c860: 7374 220a 2020 2020 2020 2020 6d61 726b  st".        mark
-0002c870: 7570 203d 2070 5b32 5d0a 2020 2020 2020  up = p[2].      
-0002c880: 2020 666f 7220 6974 656d 2069 6e20 7265    for item in re
-0002c890: 7665 7273 6564 2870 5b31 5d29 3a0a 2020  versed(p[1]):.  
-0002c8a0: 2020 2020 2020 2020 2020 636f 6d6d 616e            comman
-0002c8b0: 6420 3d20 6974 656d 5b30 5d5b 313a 5d0a  d = item[0][1:].
-0002c8c0: 2020 2020 2020 2020 2020 2020 6172 6775              argu
-0002c8d0: 6d65 6e74 7320 3d20 6974 656d 5b31 3a5d  ments = item[1:]
-0002c8e0: 0a20 2020 2020 2020 2020 2020 2061 7267  .            arg
-0002c8f0: 756d 656e 7473 2e61 7070 656e 6428 6d61  uments.append(ma
-0002c900: 726b 7570 290a 2020 2020 2020 2020 2020  rkup).          
-0002c910: 2020 6d61 726b 7570 203d 204d 6172 6b75    markup = Marku
-0002c920: 7043 6f6d 6d61 6e64 2863 6f6d 6d61 6e64  pCommand(command
-0002c930: 2c20 2a61 7267 756d 656e 7473 290a 2020  , *arguments).  
-0002c940: 2020 2020 2020 705b 305d 203d 206d 6172        p[0] = mar
-0002c950: 6b75 700a 0a20 2020 2023 2323 206d 6172  kup..    ### mar
-0002c960: 6b75 705f 6865 6164 5f31 5f69 7465 6d20  kup_head_1_item 
-0002c970: 2323 230a 0a20 2020 2064 6566 2070 5f6d  ###..    def p_m
-0002c980: 6172 6b75 705f 6865 6164 5f31 5f69 7465  arkup_head_1_ite
-0002c990: 6d5f 5f4d 4152 4b55 505f 4655 4e43 5449  m__MARKUP_FUNCTI
-0002c9a0: 4f4e 5f5f 4558 5045 4354 5f4d 4152 4b55  ON__EXPECT_MARKU
-0002c9b0: 505f 5f6d 6172 6b75 705f 636f 6d6d 616e  P__markup_comman
-0002c9c0: 645f 6c69 7374 5f61 7267 756d 656e 7473  d_list_arguments
-0002c9d0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-0002c9e0: 700a 2020 2020 293a 0a20 2020 2020 2020  p.    ):.       
-0002c9f0: 2022 6d61 726b 7570 5f68 6561 645f 315f   "markup_head_1_
-0002ca00: 6974 656d 203a 204d 4152 4b55 505f 4655  item : MARKUP_FU
-0002ca10: 4e43 5449 4f4e 2045 5850 4543 545f 4d41  NCTION EXPECT_MA
-0002ca20: 524b 5550 206d 6172 6b75 705f 636f 6d6d  RKUP markup_comm
-0002ca30: 616e 645f 6c69 7374 5f61 7267 756d 656e  and_list_argumen
-0002ca40: 7473 220a 2020 2020 2020 2020 705b 305d  ts".        p[0]
-0002ca50: 203d 205b 705b 315d 5d20 2b20 705b 335d   = [p[1]] + p[3]
-0002ca60: 0a0a 2020 2020 2323 2320 6d61 726b 7570  ..    ### markup
-0002ca70: 5f68 6561 645f 315f 6c69 7374 2023 2323  _head_1_list ###
-0002ca80: 0a0a 2020 2020 6465 6620 705f 6d61 726b  ..    def p_mark
-0002ca90: 7570 5f68 6561 645f 315f 6c69 7374 5f5f  up_head_1_list__
-0002caa0: 6d61 726b 7570 5f68 6561 645f 315f 6974  markup_head_1_it
-0002cab0: 656d 2873 656c 662c 2070 293a 0a20 2020  em(self, p):.   
-0002cac0: 2020 2020 2022 6d61 726b 7570 5f68 6561       "markup_hea
-0002cad0: 645f 315f 6c69 7374 203a 206d 6172 6b75  d_1_list : marku
-0002cae0: 705f 6865 6164 5f31 5f69 7465 6d22 0a20  p_head_1_item". 
-0002caf0: 2020 2020 2020 2070 5b30 5d20 3d20 5b70         p[0] = [p
-0002cb00: 5b31 5d5d 0a0a 2020 2020 6465 6620 705f  [1]]..    def p_
-0002cb10: 6d61 726b 7570 5f68 6561 645f 315f 6c69  markup_head_1_li
-0002cb20: 7374 5f5f 6d61 726b 7570 5f68 6561 645f  st__markup_head_
-0002cb30: 315f 6c69 7374 5f5f 6d61 726b 7570 5f68  1_list__markup_h
-0002cb40: 6561 645f 315f 6974 656d 2873 656c 662c  ead_1_item(self,
-0002cb50: 2070 293a 0a20 2020 2020 2020 2022 6d61   p):.        "ma
-0002cb60: 726b 7570 5f68 6561 645f 315f 6c69 7374  rkup_head_1_list
-0002cb70: 203a 206d 6172 6b75 705f 6865 6164 5f31   : markup_head_1
-0002cb80: 5f6c 6973 7420 6d61 726b 7570 5f68 6561  _list markup_hea
-0002cb90: 645f 315f 6974 656d 220a 2020 2020 2020  d_1_item".      
-0002cba0: 2020 705b 305d 203d 2070 5b31 5d20 2b20    p[0] = p[1] + 
-0002cbb0: 5b70 5b32 5d5d 0a0a 2020 2020 2323 2320  [p[2]]..    ### 
-0002cbc0: 6d61 726b 7570 5f6c 6973 7420 2323 230a  markup_list ###.
-0002cbd0: 0a20 2020 2064 6566 2070 5f6d 6172 6b75  .    def p_marku
-0002cbe0: 705f 6c69 7374 5f5f 4d41 524b 5550 4c49  p_list__MARKUPLI
-0002cbf0: 5354 5f49 4445 4e54 4946 4945 5228 7365  ST_IDENTIFIER(se
-0002cc00: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-0002cc10: 226d 6172 6b75 705f 6c69 7374 203a 204d  "markup_list : M
-0002cc20: 4152 4b55 504c 4953 545f 4944 454e 5449  ARKUPLIST_IDENTI
-0002cc30: 4649 4552 220a 2020 2020 2020 2020 705b  FIER".        p[
-0002cc40: 305d 203d 2070 5b31 5d0a 0a20 2020 2064  0] = p[1]..    d
-0002cc50: 6566 2070 5f6d 6172 6b75 705f 6c69 7374  ef p_markup_list
-0002cc60: 5f5f 6d61 726b 7570 5f62 7261 6365 645f  __markup_braced_
-0002cc70: 6c69 7374 2873 656c 662c 2070 293a 0a20  list(self, p):. 
-0002cc80: 2020 2020 2020 2022 6d61 726b 7570 5f6c         "markup_l
-0002cc90: 6973 7420 3a20 6d61 726b 7570 5f62 7261  ist : markup_bra
-0002cca0: 6365 645f 6c69 7374 220a 2020 2020 2020  ced_list".      
-0002ccb0: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-0002ccc0: 2020 2064 6566 2070 5f6d 6172 6b75 705f     def p_markup_
-0002ccd0: 6c69 7374 5f5f 6d61 726b 7570 5f63 6f6d  list__markup_com
-0002cce0: 6d61 6e64 5f6c 6973 7428 7365 6c66 2c20  mand_list(self, 
-0002ccf0: 7029 3a0a 2020 2020 2020 2020 226d 6172  p):.        "mar
-0002cd00: 6b75 705f 6c69 7374 203a 206d 6172 6b75  kup_list : marku
-0002cd10: 705f 636f 6d6d 616e 645f 6c69 7374 220a  p_command_list".
-0002cd20: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
-0002cd30: 5b31 5d0a 0a20 2020 2064 6566 2070 5f6d  [1]..    def p_m
-0002cd40: 6172 6b75 705f 6c69 7374 5f5f 6d61 726b  arkup_list__mark
-0002cd50: 7570 5f63 6f6d 706f 7365 645f 6c69 7374  up_composed_list
-0002cd60: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-0002cd70: 2020 2022 6d61 726b 7570 5f6c 6973 7420     "markup_list 
-0002cd80: 3a20 6d61 726b 7570 5f63 6f6d 706f 7365  : markup_compose
-0002cd90: 645f 6c69 7374 220a 2020 2020 2020 2020  d_list".        
-0002cda0: 705b 305d 203d 2070 5b31 5d0a 0a20 2020  p[0] = p[1]..   
-0002cdb0: 2064 6566 2070 5f6d 6172 6b75 705f 6c69   def p_markup_li
-0002cdc0: 7374 5f5f 6d61 726b 7570 5f73 636d 5f5f  st__markup_scm__
-0002cdd0: 4d41 524b 5550 4c49 5354 5f49 4445 4e54  MARKUPLIST_IDENT
-0002cde0: 4946 4945 5228 7365 6c66 2c20 7029 3a0a  IFIER(self, p):.
-0002cdf0: 2020 2020 2020 2020 226d 6172 6b75 705f          "markup_
-0002ce00: 6c69 7374 203a 206d 6172 6b75 705f 7363  list : markup_sc
-0002ce10: 6d20 4d41 524b 5550 4c49 5354 5f49 4445  m MARKUPLIST_IDE
-0002ce20: 4e54 4946 4945 5222 0a20 2020 2020 2020  NTIFIER".       
-0002ce30: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-0002ce40: 6465 2822 6d61 726b 7570 5f6c 6973 7422  de("markup_list"
-0002ce50: 2c20 702e 5f5f 6765 7473 6c69 6365 5f5f  , p.__getslice__
-0002ce60: 2831 2c20 4e6f 6e65 2929 0a0a 2020 2020  (1, None))..    
-0002ce70: 2323 2320 6d61 726b 7570 5f73 636d 2023  ### markup_scm #
-0002ce80: 2323 0a0a 2020 2020 6465 6620 705f 6d61  ##..    def p_ma
-0002ce90: 726b 7570 5f73 636d 5f5f 656d 6265 6464  rkup_scm__embedd
-0002cea0: 6564 5f73 636d 5f62 6172 655f 5f42 4143  ed_scm_bare__BAC
-0002ceb0: 4b55 5028 7365 6c66 2c20 7029 3a0a 2020  KUP(self, p):.  
-0002cec0: 2020 2020 2020 226d 6172 6b75 705f 7363        "markup_sc
-0002ced0: 6d20 3a20 656d 6265 6464 6564 5f73 636d  m : embedded_scm
-0002cee0: 5f62 6172 6520 4241 434b 5550 220a 0a20  _bare BACKUP".. 
-0002cef0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-0002cf00: 315d 0a0a 2020 2020 2020 2020 746f 6b65  1]..        toke
-0002cf10: 6e20 3d20 6c65 782e 4c65 7854 6f6b 656e  n = lex.LexToken
-0002cf20: 2829 0a20 2020 2020 2020 2074 6f6b 656e  ().        token
-0002cf30: 2e74 7970 6520 3d20 224d 4152 4b55 505f  .type = "MARKUP_
-0002cf40: 4944 454e 5449 4649 4552 220a 2020 2020  IDENTIFIER".    
-0002cf50: 2020 2020 746f 6b65 6e2e 7661 6c75 6520      token.value 
-0002cf60: 3d20 705b 315d 0a20 2020 2020 2020 2074  = p[1].        t
-0002cf70: 6f6b 656e 2e6c 6578 706f 7320 3d20 300a  oken.lexpos = 0.
-0002cf80: 2020 2020 2020 2020 746f 6b65 6e2e 6c69          token.li
-0002cf90: 6e65 6e6f 203d 2030 0a0a 2020 2020 2020  neno = 0..      
-0002cfa0: 2020 7365 6c66 2e63 6c69 656e 742e 5f70    self.client._p
-0002cfb0: 7573 685f 6578 7472 615f 746f 6b65 6e28  ush_extra_token(
-0002cfc0: 7365 6c66 2e63 6c69 656e 742e 5f70 6172  self.client._par
-0002cfd0: 7365 722e 6c6f 6f6b 6168 6561 6429 0a20  ser.lookahead). 
-0002cfe0: 2020 2020 2020 2073 656c 662e 636c 6965         self.clie
-0002cff0: 6e74 2e5f 7075 7368 5f65 7874 7261 5f74  nt._push_extra_t
-0002d000: 6f6b 656e 2870 2e73 6c69 6365 5b32 5d29  oken(p.slice[2])
-0002d010: 0a20 2020 2020 2020 2073 656c 662e 636c  .        self.cl
-0002d020: 6965 6e74 2e5f 7075 7368 5f65 7874 7261  ient._push_extra
-0002d030: 5f74 6f6b 656e 2874 6f6b 656e 290a 2020  _token(token).  
-0002d040: 2020 2020 2020 7365 6c66 2e63 6c69 656e        self.clien
-0002d050: 742e 5f70 6172 7365 722e 6c6f 6f6b 6168  t._parser.lookah
-0002d060: 6561 6420 3d20 4e6f 6e65 0a0a 2020 2020  ead = None..    
-0002d070: 2323 2320 6d61 726b 7570 5f74 6f70 2023  ### markup_top #
-0002d080: 2323 0a0a 2020 2020 6465 6620 705f 6d61  ##..    def p_ma
-0002d090: 726b 7570 5f74 6f70 5f5f 6d61 726b 7570  rkup_top__markup
-0002d0a0: 5f68 6561 645f 315f 6c69 7374 5f5f 7369  _head_1_list__si
-0002d0b0: 6d70 6c65 5f6d 6172 6b75 7028 7365 6c66  mple_markup(self
-0002d0c0: 2c20 7029 3a0a 2020 2020 2020 2020 226d  , p):.        "m
-0002d0d0: 6172 6b75 705f 746f 7020 3a20 6d61 726b  arkup_top : mark
-0002d0e0: 7570 5f68 6561 645f 315f 6c69 7374 2073  up_head_1_list s
-0002d0f0: 696d 706c 655f 6d61 726b 7570 220a 2020  imple_markup".  
-0002d100: 2020 2020 2020 6d61 726b 7570 203d 2070        markup = p
-0002d110: 5b32 5d0a 2020 2020 2020 2020 666f 7220  [2].        for 
-0002d120: 6974 656d 2069 6e20 7265 7665 7273 6564  item in reversed
-0002d130: 2870 5b31 5d29 3a0a 2020 2020 2020 2020  (p[1]):.        
-0002d140: 2020 2020 636f 6d6d 616e 6420 3d20 6974      command = it
-0002d150: 656d 5b30 5d5b 313a 5d0a 2020 2020 2020  em[0][1:].      
-0002d160: 2020 2020 2020 6172 6775 6d65 6e74 7320        arguments 
-0002d170: 3d20 6974 656d 5b31 3a5d 0a20 2020 2020  = item[1:].     
-0002d180: 2020 2020 2020 2061 7267 756d 656e 7473         arguments
-0002d190: 2e61 7070 656e 6428 6d61 726b 7570 290a  .append(markup).
-0002d1a0: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
-0002d1b0: 7570 203d 204d 6172 6b75 7043 6f6d 6d61  up = MarkupComma
-0002d1c0: 6e64 2863 6f6d 6d61 6e64 2c20 2a61 7267  nd(command, *arg
-0002d1d0: 756d 656e 7473 290a 2020 2020 2020 2020  uments).        
-0002d1e0: 705b 305d 203d 206d 6172 6b75 700a 0a20  p[0] = markup.. 
-0002d1f0: 2020 2064 6566 2070 5f6d 6172 6b75 705f     def p_markup_
-0002d200: 746f 705f 5f6d 6172 6b75 705f 6c69 7374  top__markup_list
-0002d210: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-0002d220: 2020 2022 6d61 726b 7570 5f74 6f70 203a     "markup_top :
-0002d230: 206d 6172 6b75 705f 6c69 7374 220a 2020   markup_list".  
-0002d240: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-0002d250: 5d0a 0a20 2020 2064 6566 2070 5f6d 6172  ]..    def p_mar
-0002d260: 6b75 705f 746f 705f 5f73 696d 706c 655f  kup_top__simple_
-0002d270: 6d61 726b 7570 2873 656c 662c 2070 293a  markup(self, p):
-0002d280: 0a20 2020 2020 2020 2022 6d61 726b 7570  .        "markup
-0002d290: 5f74 6f70 203a 2073 696d 706c 655f 6d61  _top : simple_ma
-0002d2a0: 726b 7570 220a 2020 2020 2020 2020 705b  rkup".        p[
-0002d2b0: 305d 203d 2070 5b31 5d0a 0a20 2020 2023  0] = p[1]..    #
-0002d2c0: 2323 206d 6f64 655f 6368 616e 6765 645f  ## mode_changed_
-0002d2d0: 6d75 7369 6320 2323 230a 0a20 2020 2023  music ###..    #
-0002d2e0: 2020 2020 6465 6620 705f 6d6f 6465 5f63      def p_mode_c
-0002d2f0: 6861 6e67 6564 5f6d 7573 6963 5f5f 6d6f  hanged_music__mo
-0002d300: 6465 5f63 6861 6e67 696e 675f 6865 6164  de_changing_head
-0002d310: 5f5f 6772 6f75 7065 645f 6d75 7369 635f  __grouped_music_
-0002d320: 6c69 7374 2873 656c 662c 2070 293a 0a20  list(self, p):. 
-0002d330: 2020 2023 2020 2020 2020 2020 276d 6f64     #        'mod
-0002d340: 655f 6368 616e 6765 645f 6d75 7369 6320  e_changed_music 
-0002d350: 3a20 6d6f 6465 5f63 6861 6e67 696e 675f  : mode_changing_
-0002d360: 6865 6164 2067 726f 7570 6564 5f6d 7573  head grouped_mus
-0002d370: 6963 5f6c 6973 7427 0a20 2020 2023 2020  ic_list'.    #  
-0002d380: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
-0002d390: 7461 784e 6f64 6528 276d 6f64 655f 6368  taxNode('mode_ch
-0002d3a0: 616e 6765 645f 6d75 7369 6327 2c20 705b  anged_music', p[
-0002d3b0: 313a 5d29 0a0a 2020 2020 2320 2020 2064  1:])..    #    d
-0002d3c0: 6566 2070 5f6d 6f64 655f 6368 616e 6765  ef p_mode_change
-0002d3d0: 645f 6d75 7369 635f 5f6d 6f64 655f 6368  d_music__mode_ch
-0002d3e0: 616e 6769 6e67 5f68 6561 645f 7769 7468  anging_head_with
-0002d3f0: 5f63 6f6e 7465 7874 5f5f 6f70 7469 6f6e  _context__option
-0002d400: 616c 5f63 6f6e 7465 7874 5f6d 6f64 5f5f  al_context_mod__
-0002d410: 6772 6f75 7065 645f 6d75 7369 635f 6c69  grouped_music_li
-0002d420: 7374 2873 656c 662c 2070 293a 0a20 2020  st(self, p):.   
-0002d430: 2023 2020 2020 2020 2020 276d 6f64 655f   #        'mode_
-0002d440: 6368 616e 6765 645f 6d75 7369 6320 3a20  changed_music : 
-0002d450: 6d6f 6465 5f63 6861 6e67 696e 675f 6865  mode_changing_he
-0002d460: 6164 5f77 6974 685f 636f 6e74 6578 7420  ad_with_context 
-0002d470: 6f70 7469 6f6e 616c 5f63 6f6e 7465 7874  optional_context
-0002d480: 5f6d 6f64 2067 726f 7570 6564 5f6d 7573  _mod grouped_mus
-0002d490: 6963 5f6c 6973 7427 0a20 2020 2023 2020  ic_list'.    #  
-0002d4a0: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
-0002d4b0: 7461 784e 6f64 6528 276d 6f64 655f 6368  taxNode('mode_ch
-0002d4c0: 616e 6765 645f 6d75 7369 6327 2c20 705b  anged_music', p[
-0002d4d0: 313a 5d29 0a0a 2020 2020 2323 2320 6d6f  1:])..    ### mo
-0002d4e0: 6465 5f63 6861 6e67 696e 675f 6865 6164  de_changing_head
-0002d4f0: 2023 2323 0a0a 2020 2020 2320 2020 2064   ###..    #    d
-0002d500: 6566 2070 5f6d 6f64 655f 6368 616e 6769  ef p_mode_changi
-0002d510: 6e67 5f68 6561 645f 5f43 484f 5244 4d4f  ng_head__CHORDMO
-0002d520: 4445 2873 656c 662c 2070 293a 0a20 2020  DE(self, p):.   
-0002d530: 2023 2020 2020 2020 2020 276d 6f64 655f   #        'mode_
-0002d540: 6368 616e 6769 6e67 5f68 6561 6420 3a20  changing_head : 
-0002d550: 4348 4f52 444d 4f44 4527 0a20 2020 2023  CHORDMODE'.    #
-0002d560: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-0002d570: 796e 7461 784e 6f64 6528 276d 6f64 655f  yntaxNode('mode_
-0002d580: 6368 616e 6769 6e67 5f68 6561 6427 2c20  changing_head', 
-0002d590: 705b 313a 5d29 0a0a 2020 2020 2320 2020  p[1:])..    #   
-0002d5a0: 2064 6566 2070 5f6d 6f64 655f 6368 616e   def p_mode_chan
-0002d5b0: 6769 6e67 5f68 6561 645f 5f44 5255 4d4d  ging_head__DRUMM
-0002d5c0: 4f44 4528 7365 6c66 2c20 7029 3a0a 2020  ODE(self, p):.  
-0002d5d0: 2020 2320 2020 2020 2020 2027 6d6f 6465    #        'mode
-0002d5e0: 5f63 6861 6e67 696e 675f 6865 6164 203a  _changing_head :
-0002d5f0: 2044 5255 4d4d 4f44 4527 0a20 2020 2023   DRUMMODE'.    #
-0002d600: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-0002d610: 796e 7461 784e 6f64 6528 276d 6f64 655f  yntaxNode('mode_
-0002d620: 6368 616e 6769 6e67 5f68 6561 6427 2c20  changing_head', 
-0002d630: 705b 313a 5d29 0a0a 2020 2020 2320 2020  p[1:])..    #   
-0002d640: 2064 6566 2070 5f6d 6f64 655f 6368 616e   def p_mode_chan
-0002d650: 6769 6e67 5f68 6561 645f 5f46 4947 5552  ging_head__FIGUR
-0002d660: 454d 4f44 4528 7365 6c66 2c20 7029 3a0a  EMODE(self, p):.
-0002d670: 2020 2020 2320 2020 2020 2020 2027 6d6f      #        'mo
-0002d680: 6465 5f63 6861 6e67 696e 675f 6865 6164  de_changing_head
-0002d690: 203a 2046 4947 5552 454d 4f44 4527 0a20   : FIGUREMODE'. 
-0002d6a0: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
-0002d6b0: 203d 2053 796e 7461 784e 6f64 6528 276d   = SyntaxNode('m
-0002d6c0: 6f64 655f 6368 616e 6769 6e67 5f68 6561  ode_changing_hea
-0002d6d0: 6427 2c20 705b 313a 5d29 0a0a 2020 2020  d', p[1:])..    
-0002d6e0: 2320 2020 2064 6566 2070 5f6d 6f64 655f  #    def p_mode_
-0002d6f0: 6368 616e 6769 6e67 5f68 6561 645f 5f4c  changing_head__L
-0002d700: 5952 4943 4d4f 4445 2873 656c 662c 2070  YRICMODE(self, p
-0002d710: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
-0002d720: 276d 6f64 655f 6368 616e 6769 6e67 5f68  'mode_changing_h
-0002d730: 6561 6420 3a20 4c59 5249 434d 4f44 4527  ead : LYRICMODE'
-0002d740: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
-0002d750: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
-0002d760: 276d 6f64 655f 6368 616e 6769 6e67 5f68  'mode_changing_h
-0002d770: 6561 6427 2c20 705b 313a 5d29 0a0a 2020  ead', p[1:])..  
-0002d780: 2020 2320 2020 2064 6566 2070 5f6d 6f64    #    def p_mod
-0002d790: 655f 6368 616e 6769 6e67 5f68 6561 645f  e_changing_head_
-0002d7a0: 5f4e 4f54 454d 4f44 4528 7365 6c66 2c20  _NOTEMODE(self, 
-0002d7b0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
-0002d7c0: 2027 6d6f 6465 5f63 6861 6e67 696e 675f   'mode_changing_
-0002d7d0: 6865 6164 203a 204e 4f54 454d 4f44 4527  head : NOTEMODE'
-0002d7e0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
-0002d7f0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
-0002d800: 276d 6f64 655f 6368 616e 6769 6e67 5f68  'mode_changing_h
-0002d810: 6561 6427 2c20 705b 313a 5d29 0a0a 2020  ead', p[1:])..  
-0002d820: 2020 2323 2320 6d6f 6465 5f63 6861 6e67    ### mode_chang
-0002d830: 696e 675f 6865 6164 5f77 6974 685f 636f  ing_head_with_co
-0002d840: 6e74 6578 7420 2323 230a 0a20 2020 2023  ntext ###..    #
-0002d850: 2020 2020 6465 6620 705f 6d6f 6465 5f63      def p_mode_c
-0002d860: 6861 6e67 696e 675f 6865 6164 5f77 6974  hanging_head_wit
-0002d870: 685f 636f 6e74 6578 745f 5f43 484f 5244  h_context__CHORD
-0002d880: 5328 7365 6c66 2c20 7029 3a0a 2020 2020  S(self, p):.    
-0002d890: 2320 2020 2020 2020 2027 6d6f 6465 5f63  #        'mode_c
-0002d8a0: 6861 6e67 696e 675f 6865 6164 5f77 6974  hanging_head_wit
-0002d8b0: 685f 636f 6e74 6578 7420 3a20 4348 4f52  h_context : CHOR
-0002d8c0: 4453 270a 2020 2020 2320 2020 2020 2020  DS'.    #       
-0002d8d0: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-0002d8e0: 6465 2827 6d6f 6465 5f63 6861 6e67 696e  de('mode_changin
-0002d8f0: 675f 6865 6164 5f77 6974 685f 636f 6e74  g_head_with_cont
-0002d900: 6578 7427 2c20 705b 313a 5d29 0a0a 2020  ext', p[1:])..  
-0002d910: 2020 2320 2020 2064 6566 2070 5f6d 6f64    #    def p_mod
-0002d920: 655f 6368 616e 6769 6e67 5f68 6561 645f  e_changing_head_
-0002d930: 7769 7468 5f63 6f6e 7465 7874 5f5f 4452  with_context__DR
-0002d940: 554d 5328 7365 6c66 2c20 7029 3a0a 2020  UMS(self, p):.  
-0002d950: 2020 2320 2020 2020 2020 2027 6d6f 6465    #        'mode
-0002d960: 5f63 6861 6e67 696e 675f 6865 6164 5f77  _changing_head_w
-0002d970: 6974 685f 636f 6e74 6578 7420 3a20 4452  ith_context : DR
-0002d980: 554d 5327 0a20 2020 2023 2020 2020 2020  UMS'.    #      
-0002d990: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-0002d9a0: 6f64 6528 276d 6f64 655f 6368 616e 6769  ode('mode_changi
-0002d9b0: 6e67 5f68 6561 645f 7769 7468 5f63 6f6e  ng_head_with_con
-0002d9c0: 7465 7874 272c 2070 5b31 3a5d 290a 0a20  text', p[1:]).. 
-0002d9d0: 2020 2023 2020 2020 6465 6620 705f 6d6f     #    def p_mo
-0002d9e0: 6465 5f63 6861 6e67 696e 675f 6865 6164  de_changing_head
-0002d9f0: 5f77 6974 685f 636f 6e74 6578 745f 5f46  _with_context__F
-0002da00: 4947 5552 4553 2873 656c 662c 2070 293a  IGURES(self, p):
-0002da10: 0a20 2020 2023 2020 2020 2020 2020 276d  .    #        'm
-0002da20: 6f64 655f 6368 616e 6769 6e67 5f68 6561  ode_changing_hea
-0002da30: 645f 7769 7468 5f63 6f6e 7465 7874 203a  d_with_context :
-0002da40: 2046 4947 5552 4553 270a 2020 2020 2320   FIGURES'.    # 
-0002da50: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
-0002da60: 6e74 6178 4e6f 6465 2827 6d6f 6465 5f63  ntaxNode('mode_c
-0002da70: 6861 6e67 696e 675f 6865 6164 5f77 6974  hanging_head_wit
-0002da80: 685f 636f 6e74 6578 7427 2c20 705b 313a  h_context', p[1:
-0002da90: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
-0002daa0: 2070 5f6d 6f64 655f 6368 616e 6769 6e67   p_mode_changing
-0002dab0: 5f68 6561 645f 7769 7468 5f63 6f6e 7465  _head_with_conte
-0002dac0: 7874 5f5f 4c59 5249 4353 2873 656c 662c  xt__LYRICS(self,
-0002dad0: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-0002dae0: 2020 276d 6f64 655f 6368 616e 6769 6e67    'mode_changing
-0002daf0: 5f68 6561 645f 7769 7468 5f63 6f6e 7465  _head_with_conte
-0002db00: 7874 203a 204c 5952 4943 5327 0a20 2020  xt : LYRICS'.   
-0002db10: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
-0002db20: 2053 796e 7461 784e 6f64 6528 276d 6f64   SyntaxNode('mod
-0002db30: 655f 6368 616e 6769 6e67 5f68 6561 645f  e_changing_head_
-0002db40: 7769 7468 5f63 6f6e 7465 7874 272c 2070  with_context', p
-0002db50: 5b31 3a5d 290a 0a20 2020 2023 2323 206d  [1:])..    ### m
-0002db60: 756c 7469 706c 6965 645f 6475 7261 7469  ultiplied_durati
-0002db70: 6f6e 2023 2323 0a0a 2020 2020 6465 6620  on ###..    def 
-0002db80: 705f 6d75 6c74 6970 6c69 6564 5f64 7572  p_multiplied_dur
-0002db90: 6174 696f 6e5f 5f6d 756c 7469 706c 6965  ation__multiplie
-0002dba0: 645f 6475 7261 7469 6f6e 5f5f 4368 7234  d_duration__Chr4
-0002dbb0: 325f 5f46 5241 4354 494f 4e28 7365 6c66  2__FRACTION(self
-0002dbc0: 2c20 7029 3a0a 2020 2020 2020 2020 226d  , p):.        "m
-0002dbd0: 756c 7469 706c 6965 645f 6475 7261 7469  ultiplied_durati
-0002dbe0: 6f6e 203a 206d 756c 7469 706c 6965 645f  on : multiplied_
-0002dbf0: 6475 7261 7469 6f6e 2027 2a27 2046 5241  duration '*' FRA
-0002dc00: 4354 494f 4e22 0a20 2020 2020 2020 2069  CTION".        i
-0002dc10: 6620 705b 315d 2e6d 756c 7469 706c 6965  f p[1].multiplie
-0002dc20: 7220 6973 206e 6f74 204e 6f6e 653a 0a20  r is not None:. 
-0002dc30: 2020 2020 2020 2020 2020 2070 5b30 5d20             p[0] 
-0002dc40: 3d20 4c69 6c79 506f 6e64 4475 7261 7469  = LilyPondDurati
-0002dc50: 6f6e 2870 5b31 5d2e 6475 7261 7469 6f6e  on(p[1].duration
-0002dc60: 2c20 705b 315d 2e6d 756c 7469 706c 6965  , p[1].multiplie
-0002dc70: 7220 2a20 705b 335d 290a 2020 2020 2020  r * p[3]).      
-0002dc80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0002dc90: 2020 2020 705b 305d 203d 204c 696c 7950      p[0] = LilyP
-0002dca0: 6f6e 6444 7572 6174 696f 6e28 0a20 2020  ondDuration(.   
-0002dcb0: 2020 2020 2020 2020 2020 2020 2070 5b31               p[1
-0002dcc0: 5d2e 6475 7261 7469 6f6e 2c20 7175 6963  ].duration, quic
-0002dcd0: 6b74 696f 6e73 2e46 7261 6374 696f 6e28  ktions.Fraction(
-0002dce0: 705b 335d 2e6e 756d 6572 6174 6f72 2c20  p[3].numerator, 
-0002dcf0: 705b 335d 2e64 656e 6f6d 696e 6174 6f72  p[3].denominator
-0002dd00: 290a 2020 2020 2020 2020 2020 2020 290a  ).            ).
-0002dd10: 0a20 2020 2064 6566 2070 5f6d 756c 7469  .    def p_multi
-0002dd20: 706c 6965 645f 6475 7261 7469 6f6e 5f5f  plied_duration__
-0002dd30: 6d75 6c74 6970 6c69 6564 5f64 7572 6174  multiplied_durat
-0002dd40: 696f 6e5f 5f43 6872 3432 5f5f 6261 7265  ion__Chr42__bare
-0002dd50: 5f75 6e73 6967 6e65 6428 7365 6c66 2c20  _unsigned(self, 
-0002dd60: 7029 3a0a 2020 2020 2020 2020 226d 756c  p):.        "mul
-0002dd70: 7469 706c 6965 645f 6475 7261 7469 6f6e  tiplied_duration
-0002dd80: 203a 206d 756c 7469 706c 6965 645f 6475   : multiplied_du
-0002dd90: 7261 7469 6f6e 2027 2a27 2062 6172 655f  ration '*' bare_
-0002dda0: 756e 7369 676e 6564 220a 2020 2020 2020  unsigned".      
-0002ddb0: 2020 6966 2070 5b31 5d2e 6d75 6c74 6970    if p[1].multip
-0002ddc0: 6c69 6572 2069 7320 6e6f 7420 4e6f 6e65  lier is not None
-0002ddd0: 3a0a 2020 2020 2020 2020 2020 2020 705b  :.            p[
-0002dde0: 305d 203d 204c 696c 7950 6f6e 6444 7572  0] = LilyPondDur
-0002ddf0: 6174 696f 6e28 705b 315d 2e64 7572 6174  ation(p[1].durat
-0002de00: 696f 6e2c 2070 5b31 5d2e 6d75 6c74 6970  ion, p[1].multip
-0002de10: 6c69 6572 202a 2070 5b33 5d29 0a20 2020  lier * p[3]).   
-0002de20: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0002de30: 2020 2020 2020 2070 5b30 5d20 3d20 4c69         p[0] = Li
-0002de40: 6c79 506f 6e64 4475 7261 7469 6f6e 2870  lyPondDuration(p
-0002de50: 5b31 5d2e 6475 7261 7469 6f6e 2c20 705b  [1].duration, p[
-0002de60: 335d 290a 0a20 2020 2064 6566 2070 5f6d  3])..    def p_m
-0002de70: 756c 7469 706c 6965 645f 6475 7261 7469  ultiplied_durati
-0002de80: 6f6e 5f5f 7374 656e 6f5f 6475 7261 7469  on__steno_durati
-0002de90: 6f6e 2873 656c 662c 2070 293a 0a20 2020  on(self, p):.   
-0002dea0: 2020 2020 2022 6d75 6c74 6970 6c69 6564       "multiplied
-0002deb0: 5f64 7572 6174 696f 6e20 3a20 7374 656e  _duration : sten
-0002dec0: 6f5f 6475 7261 7469 6f6e 220a 2020 2020  o_duration".    
-0002ded0: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
-0002dee0: 0a20 2020 2023 2323 206d 7573 6963 2023  .    ### music #
-0002def0: 2323 0a0a 2020 2020 6465 6620 705f 6d75  ##..    def p_mu
-0002df00: 7369 635f 5f63 6f6d 706f 7369 7465 5f6d  sic__composite_m
-0002df10: 7573 6963 2873 656c 662c 2070 293a 0a20  usic(self, p):. 
-0002df20: 2020 2020 2020 2022 6d75 7369 6320 3a20         "music : 
-0002df30: 636f 6d70 6f73 6974 655f 6d75 7369 6320  composite_music 
-0002df40: 2570 7265 6320 434f 4d50 4f53 4954 4522  %prec COMPOSITE"
-0002df50: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-0002df60: 705b 315d 0a0a 2020 2020 2320 2020 2064  p[1]..    #    d
-0002df70: 6566 2070 5f6d 7573 6963 5f5f 6c79 7269  ef p_music__lyri
-0002df80: 635f 656c 656d 656e 745f 6d75 7369 6328  c_element_music(
-0002df90: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
-0002dfa0: 2020 2020 2020 2027 6d75 7369 6320 3a20         'music : 
-0002dfb0: 6c79 7269 635f 656c 656d 656e 745f 6d75  lyric_element_mu
-0002dfc0: 7369 6327 0a20 2020 2023 2020 2020 2020  sic'.    #      
-0002dfd0: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-0002dfe0: 2020 2064 6566 2070 5f6d 7573 6963 5f5f     def p_music__
-0002dff0: 7369 6d70 6c65 5f6d 7573 6963 2873 656c  simple_music(sel
-0002e000: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-0002e010: 6d75 7369 6320 3a20 7369 6d70 6c65 5f6d  music : simple_m
-0002e020: 7573 6963 220a 2020 2020 2020 2020 705b  usic".        p[
-0002e030: 305d 203d 2070 5b31 5d0a 0a20 2020 2023  0] = p[1]..    #
-0002e040: 2323 206d 7573 6963 5f61 7267 2023 2323  ## music_arg ###
-0002e050: 0a0a 2020 2020 6465 6620 705f 6d75 7369  ..    def p_musi
-0002e060: 635f 6172 675f 5f63 6f6d 706f 7369 7465  c_arg__composite
-0002e070: 5f6d 7573 6963 2873 656c 662c 2070 293a  _music(self, p):
-0002e080: 0a20 2020 2020 2020 2022 6d75 7369 635f  .        "music_
-0002e090: 6172 6720 3a20 636f 6d70 6f73 6974 655f  arg : composite_
-0002e0a0: 6d75 7369 6320 2570 7265 6320 434f 4d50  music %prec COMP
-0002e0b0: 4f53 4954 4522 0a20 2020 2020 2020 2070  OSITE".        p
-0002e0c0: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
-0002e0d0: 6465 6620 705f 6d75 7369 635f 6172 675f  def p_music_arg_
-0002e0e0: 5f73 696d 706c 655f 6d75 7369 6328 7365  _simple_music(se
-0002e0f0: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-0002e100: 226d 7573 6963 5f61 7267 203a 2073 696d  "music_arg : sim
-0002e110: 706c 655f 6d75 7369 6322 0a20 2020 2020  ple_music".     
-0002e120: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-0002e130: 2020 2020 2323 2320 6d75 7369 635f 6261      ### music_ba
-0002e140: 7265 2023 2323 0a0a 2020 2020 6465 6620  re ###..    def 
-0002e150: 705f 6d75 7369 635f 6261 7265 5f5f 4d55  p_music_bare__MU
-0002e160: 5349 435f 4944 454e 5449 4649 4552 2873  SIC_IDENTIFIER(s
-0002e170: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-0002e180: 2022 6d75 7369 635f 6261 7265 203a 204d   "music_bare : M
-0002e190: 5553 4943 5f49 4445 4e54 4946 4945 5222  USIC_IDENTIFIER"
-0002e1a0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-0002e1b0: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
-0002e1c0: 6d75 7369 635f 6261 7265 5f5f 6772 6f75  music_bare__grou
-0002e1d0: 7065 645f 6d75 7369 635f 6c69 7374 2873  ped_music_list(s
-0002e1e0: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-0002e1f0: 2022 6d75 7369 635f 6261 7265 203a 2067   "music_bare : g
-0002e200: 726f 7570 6564 5f6d 7573 6963 5f6c 6973  rouped_music_lis
-0002e210: 7422 0a20 2020 2020 2020 2070 5b30 5d20  t".        p[0] 
-0002e220: 3d20 705b 315d 0a0a 2020 2020 2320 2020  = p[1]..    #   
-0002e230: 2064 6566 2070 5f6d 7573 6963 5f62 6172   def p_music_bar
-0002e240: 655f 5f6d 6f64 655f 6368 616e 6765 645f  e__mode_changed_
-0002e250: 6d75 7369 6328 7365 6c66 2c20 7029 3a0a  music(self, p):.
-0002e260: 2020 2020 2320 2020 2020 2020 2027 6d75      #        'mu
-0002e270: 7369 635f 6261 7265 203a 206d 6f64 655f  sic_bare : mode_
-0002e280: 6368 616e 6765 645f 6d75 7369 6327 0a20  changed_music'. 
-0002e290: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
-0002e2a0: 203d 2053 796e 7461 784e 6f64 6528 276d   = SyntaxNode('m
-0002e2b0: 7573 6963 5f62 6172 6527 2c20 705b 313a  usic_bare', p[1:
-0002e2c0: 5d29 0a0a 2020 2020 2323 2320 6d75 7369  ])..    ### musi
-0002e2d0: 635f 6675 6e63 7469 6f6e 5f63 616c 6c20  c_function_call 
-0002e2e0: 2323 230a 0a20 2020 2064 6566 2070 5f6d  ###..    def p_m
-0002e2f0: 7573 6963 5f66 756e 6374 696f 6e5f 6361  usic_function_ca
-0002e300: 6c6c 5f5f 4d55 5349 435f 4655 4e43 5449  ll__MUSIC_FUNCTI
-0002e310: 4f4e 5f5f 6675 6e63 7469 6f6e 5f61 7267  ON__function_arg
-0002e320: 6c69 7374 2873 656c 662c 2070 293a 0a20  list(self, p):. 
-0002e330: 2020 2020 2020 2022 6d75 7369 635f 6675         "music_fu
-0002e340: 6e63 7469 6f6e 5f63 616c 6c20 3a20 4d55  nction_call : MU
-0002e350: 5349 435f 4655 4e43 5449 4f4e 2066 756e  SIC_FUNCTION fun
-0002e360: 6374 696f 6e5f 6172 676c 6973 7422 0a20  ction_arglist". 
-0002e370: 2020 2020 2020 2070 5b30 5d20 3d20 7365         p[0] = se
-0002e380: 6c66 2e63 6c69 656e 742e 5f67 7569 6c65  lf.client._guile
-0002e390: 2870 5b31 5d2c 2070 5b32 5d29 0a0a 2020  (p[1], p[2])..  
-0002e3a0: 2020 2323 2320 6d75 7369 635f 6675 6e63    ### music_func
-0002e3b0: 7469 6f6e 5f63 686f 7264 5f62 6f64 7920  tion_chord_body 
-0002e3c0: 2323 230a 0a20 2020 2064 6566 2070 5f6d  ###..    def p_m
-0002e3d0: 7573 6963 5f66 756e 6374 696f 6e5f 6368  usic_function_ch
-0002e3e0: 6f72 645f 626f 6479 5f5f 4d55 5349 435f  ord_body__MUSIC_
-0002e3f0: 4655 4e43 5449 4f4e 5f5f 6d75 7369 635f  FUNCTION__music_
-0002e400: 6675 6e63 7469 6f6e 5f63 686f 7264 5f62  function_chord_b
-0002e410: 6f64 795f 6172 676c 6973 7428 0a20 2020  ody_arglist(.   
-0002e420: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
-0002e430: 2029 3a0a 2020 2020 2020 2020 226d 7573   ):.        "mus
-0002e440: 6963 5f66 756e 6374 696f 6e5f 6368 6f72  ic_function_chor
-0002e450: 645f 626f 6479 203a 204d 5553 4943 5f46  d_body : MUSIC_F
-0002e460: 554e 4354 494f 4e20 6d75 7369 635f 6675  UNCTION music_fu
-0002e470: 6e63 7469 6f6e 5f63 686f 7264 5f62 6f64  nction_chord_bod
-0002e480: 795f 6172 676c 6973 7422 0a20 2020 2020  y_arglist".     
-0002e490: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-0002e4a0: 4e6f 6465 2822 6d75 7369 635f 6675 6e63  Node("music_func
-0002e4b0: 7469 6f6e 5f63 686f 7264 5f62 6f64 7922  tion_chord_body"
-0002e4c0: 2c20 702e 5f5f 6765 7473 6c69 6365 5f5f  , p.__getslice__
-0002e4d0: 2831 2c20 4e6f 6e65 2929 0a0a 2020 2020  (1, None))..    
-0002e4e0: 2323 2320 6d75 7369 635f 6675 6e63 7469  ### music_functi
-0002e4f0: 6f6e 5f63 686f 7264 5f62 6f64 795f 6172  on_chord_body_ar
-0002e500: 676c 6973 7420 2323 230a 0a20 2020 2064  glist ###..    d
-0002e510: 6566 2070 5f6d 7573 6963 5f66 756e 6374  ef p_music_funct
-0002e520: 696f 6e5f 6368 6f72 645f 626f 6479 5f61  ion_chord_body_a
-0002e530: 7267 6c69 7374 5f5f 4558 5045 4354 5f53  rglist__EXPECT_S
-0002e540: 434d 5f5f 6d75 7369 635f 6675 6e63 7469  CM__music_functi
-0002e550: 6f6e 5f63 686f 7264 5f62 6f64 795f 6172  on_chord_body_ar
-0002e560: 676c 6973 745f 5f65 6d62 6564 6465 645f  glist__embedded_
-0002e570: 7363 6d5f 6368 6f72 645f 626f 6479 280a  scm_chord_body(.
-0002e580: 2020 2020 2020 2020 7365 6c66 2c20 700a          self, p.
-0002e590: 2020 2020 293a 0a20 2020 2020 2020 2022      ):.        "
-0002e5a0: 6d75 7369 635f 6675 6e63 7469 6f6e 5f63  music_function_c
-0002e5b0: 686f 7264 5f62 6f64 795f 6172 676c 6973  hord_body_arglis
-0002e5c0: 7420 3a20 4558 5045 4354 5f53 434d 206d  t : EXPECT_SCM m
-0002e5d0: 7573 6963 5f66 756e 6374 696f 6e5f 6368  usic_function_ch
-0002e5e0: 6f72 645f 626f 6479 5f61 7267 6c69 7374  ord_body_arglist
-0002e5f0: 2065 6d62 6564 6465 645f 7363 6d5f 6368   embedded_scm_ch
-0002e600: 6f72 645f 626f 6479 220a 2020 2020 2020  ord_body".      
-0002e610: 2020 705b 305d 203d 2070 5b32 5d20 2b20    p[0] = p[2] + 
-0002e620: 5b70 5b33 5d5d 0a0a 2020 2020 6465 6620  [p[3]]..    def 
-0002e630: 705f 6d75 7369 635f 6675 6e63 7469 6f6e  p_music_function
-0002e640: 5f63 686f 7264 5f62 6f64 795f 6172 676c  _chord_body_argl
-0002e650: 6973 745f 5f66 756e 6374 696f 6e5f 6172  ist__function_ar
-0002e660: 676c 6973 745f 6261 7265 2873 656c 662c  glist_bare(self,
-0002e670: 2070 293a 0a20 2020 2020 2020 2022 6d75   p):.        "mu
-0002e680: 7369 635f 6675 6e63 7469 6f6e 5f63 686f  sic_function_cho
-0002e690: 7264 5f62 6f64 795f 6172 676c 6973 7420  rd_body_arglist 
-0002e6a0: 3a20 6675 6e63 7469 6f6e 5f61 7267 6c69  : function_argli
-0002e6b0: 7374 5f62 6172 6522 0a20 2020 2020 2020  st_bare".       
-0002e6c0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-0002e6d0: 2020 2323 2320 6d75 7369 635f 6675 6e63    ### music_func
-0002e6e0: 7469 6f6e 5f65 7665 6e74 2023 2323 0a0a  tion_event ###..
-0002e6f0: 2020 2020 6465 6620 705f 6d75 7369 635f      def p_music_
-0002e700: 6675 6e63 7469 6f6e 5f65 7665 6e74 5f5f  function_event__
-0002e710: 4d55 5349 435f 4655 4e43 5449 4f4e 5f5f  MUSIC_FUNCTION__
-0002e720: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
-0002e730: 5f63 6c6f 7365 6428 7365 6c66 2c20 7029  _closed(self, p)
-0002e740: 3a0a 2020 2020 2020 2020 226d 7573 6963  :.        "music
-0002e750: 5f66 756e 6374 696f 6e5f 6576 656e 7420  _function_event 
-0002e760: 3a20 4d55 5349 435f 4655 4e43 5449 4f4e  : MUSIC_FUNCTION
-0002e770: 2066 756e 6374 696f 6e5f 6172 676c 6973   function_arglis
-0002e780: 745f 636c 6f73 6564 220a 2020 2020 2020  t_closed".      
-0002e790: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-0002e7a0: 6f64 6528 226d 7573 6963 5f66 756e 6374  ode("music_funct
-0002e7b0: 696f 6e5f 6576 656e 7422 2c20 702e 5f5f  ion_event", p.__
-0002e7c0: 6765 7473 6c69 6365 5f5f 2831 2c20 4e6f  getslice__(1, No
-0002e7d0: 6e65 2929 0a0a 2020 2020 2323 2320 6d75  ne))..    ### mu
-0002e7e0: 7369 635f 6c69 7374 2023 2323 0a0a 2020  sic_list ###..  
-0002e7f0: 2020 6465 6620 705f 6d75 7369 635f 6c69    def p_music_li
-0002e800: 7374 5f5f 456d 7074 7928 7365 6c66 2c20  st__Empty(self, 
-0002e810: 7029 3a0a 2020 2020 2020 2020 226d 7573  p):.        "mus
-0002e820: 6963 5f6c 6973 7420 3a22 0a20 2020 2020  ic_list :".     
-0002e830: 2020 2070 5b30 5d20 3d20 5b5d 0a0a 2020     p[0] = []..  
-0002e840: 2020 6465 6620 705f 6d75 7369 635f 6c69    def p_music_li
-0002e850: 7374 5f5f 6d75 7369 635f 6c69 7374 5f5f  st__music_list__
-0002e860: 656d 6265 6464 6564 5f73 636d 2873 656c  embedded_scm(sel
-0002e870: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-0002e880: 6d75 7369 635f 6c69 7374 203a 206d 7573  music_list : mus
-0002e890: 6963 5f6c 6973 7420 656d 6265 6464 6564  ic_list embedded
-0002e8a0: 5f73 636d 220a 2020 2020 2020 2020 705b  _scm".        p[
-0002e8b0: 305d 203d 2070 5b31 5d20 2b20 5b70 5b32  0] = p[1] + [p[2
-0002e8c0: 5d5d 0a0a 2020 2020 6465 6620 705f 6d75  ]]..    def p_mu
-0002e8d0: 7369 635f 6c69 7374 5f5f 6d75 7369 635f  sic_list__music_
-0002e8e0: 6c69 7374 5f5f 6572 726f 7228 7365 6c66  list__error(self
-0002e8f0: 2c20 7029 3a0a 2020 2020 2020 2020 226d  , p):.        "m
-0002e900: 7573 6963 5f6c 6973 7420 3a20 6d75 7369  usic_list : musi
-0002e910: 635f 6c69 7374 2065 7272 6f72 220a 2020  c_list error".  
-0002e920: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-0002e930: 5d20 2b20 5b70 5b32 5d5d 0a0a 2020 2020  ] + [p[2]]..    
-0002e940: 6465 6620 705f 6d75 7369 635f 6c69 7374  def p_music_list
-0002e950: 5f5f 6d75 7369 635f 6c69 7374 5f5f 6d75  __music_list__mu
-0002e960: 7369 6328 7365 6c66 2c20 7029 3a0a 2020  sic(self, p):.  
-0002e970: 2020 2020 2020 226d 7573 6963 5f6c 6973        "music_lis
-0002e980: 7420 3a20 6d75 7369 635f 6c69 7374 206d  t : music_list m
-0002e990: 7573 6963 220a 2020 2020 2020 2020 705b  usic".        p[
-0002e9a0: 305d 203d 2070 5b31 5d20 2b20 5b70 5b32  0] = p[1] + [p[2
-0002e9b0: 5d5d 0a0a 2020 2020 2323 2320 6d75 7369  ]]..    ### musi
-0002e9c0: 635f 7072 6f70 6572 7479 5f64 6566 2023  c_property_def #
-0002e9d0: 2323 0a0a 2020 2020 6465 6620 705f 6d75  ##..    def p_mu
-0002e9e0: 7369 635f 7072 6f70 6572 7479 5f64 6566  sic_property_def
-0002e9f0: 5f5f 7369 6d70 6c65 5f6d 7573 6963 5f70  __simple_music_p
-0002ea00: 726f 7065 7274 795f 6465 6628 7365 6c66  roperty_def(self
-0002ea10: 2c20 7029 3a0a 2020 2020 2020 2020 226d  , p):.        "m
-0002ea20: 7573 6963 5f70 726f 7065 7274 795f 6465  usic_property_de
-0002ea30: 6620 3a20 7369 6d70 6c65 5f6d 7573 6963  f : simple_music
-0002ea40: 5f70 726f 7065 7274 795f 6465 6622 0a20  _property_def". 
-0002ea50: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
-0002ea60: 6e74 6178 4e6f 6465 2822 6d75 7369 635f  ntaxNode("music_
-0002ea70: 7072 6f70 6572 7479 5f64 6566 222c 2070  property_def", p
-0002ea80: 2e5f 5f67 6574 736c 6963 655f 5f28 312c  .__getslice__(1,
-0002ea90: 204e 6f6e 6529 290a 0a20 2020 2023 2323   None))..    ###
-0002eaa0: 206e 6577 5f63 686f 7264 2023 2323 0a0a   new_chord ###..
-0002eab0: 2020 2020 2320 2020 2064 6566 2070 5f6e      #    def p_n
-0002eac0: 6577 5f63 686f 7264 5f5f 7374 656e 6f5f  ew_chord__steno_
-0002ead0: 746f 6e69 635f 7069 7463 685f 5f6f 7074  tonic_pitch__opt
-0002eae0: 696f 6e61 6c5f 6e6f 7465 6d6f 6465 5f64  ional_notemode_d
-0002eaf0: 7572 6174 696f 6e28 7365 6c66 2c20 7029  uration(self, p)
-0002eb00: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-0002eb10: 6e65 775f 6368 6f72 6420 3a20 7374 656e  new_chord : sten
-0002eb20: 6f5f 746f 6e69 635f 7069 7463 6820 6f70  o_tonic_pitch op
-0002eb30: 7469 6f6e 616c 5f6e 6f74 656d 6f64 655f  tional_notemode_
-0002eb40: 6475 7261 7469 6f6e 270a 2020 2020 2320  duration'.    # 
-0002eb50: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
-0002eb60: 6e74 6178 4e6f 6465 2827 6e65 775f 6368  ntaxNode('new_ch
-0002eb70: 6f72 6427 2c20 705b 313a 5d29 0a0a 2020  ord', p[1:])..  
-0002eb80: 2020 2320 2020 2064 6566 2070 5f6e 6577    #    def p_new
-0002eb90: 5f63 686f 7264 5f5f 7374 656e 6f5f 746f  _chord__steno_to
-0002eba0: 6e69 635f 7069 7463 685f 5f6f 7074 696f  nic_pitch__optio
-0002ebb0: 6e61 6c5f 6e6f 7465 6d6f 6465 5f64 7572  nal_notemode_dur
-0002ebc0: 6174 696f 6e5f 5f63 686f 7264 5f73 6570  ation__chord_sep
-0002ebd0: 6172 6174 6f72 5f5f 6368 6f72 645f 6974  arator__chord_it
-0002ebe0: 656d 7328 7365 6c66 2c20 7029 3a0a 2020  ems(self, p):.  
-0002ebf0: 2020 2320 2020 2020 2020 2027 6e65 775f    #        'new_
-0002ec00: 6368 6f72 6420 3a20 7374 656e 6f5f 746f  chord : steno_to
-0002ec10: 6e69 635f 7069 7463 6820 6f70 7469 6f6e  nic_pitch option
-0002ec20: 616c 5f6e 6f74 656d 6f64 655f 6475 7261  al_notemode_dura
-0002ec30: 7469 6f6e 2063 686f 7264 5f73 6570 6172  tion chord_separ
-0002ec40: 6174 6f72 2063 686f 7264 5f69 7465 6d73  ator chord_items
-0002ec50: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
-0002ec60: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
-0002ec70: 2827 6e65 775f 6368 6f72 6427 2c20 705b  ('new_chord', p[
-0002ec80: 313a 5d29 0a0a 2020 2020 2323 2320 6e65  1:])..    ### ne
-0002ec90: 775f 6c79 7269 6373 2023 2323 0a0a 2020  w_lyrics ###..  
-0002eca0: 2020 2320 2020 2064 6566 2070 5f6e 6577    #    def p_new
-0002ecb0: 5f6c 7972 6963 735f 5f41 4444 4c59 5249  _lyrics__ADDLYRI
-0002ecc0: 4353 5f5f 636f 6d70 6f73 6974 655f 6d75  CS__composite_mu
-0002ecd0: 7369 6328 7365 6c66 2c20 7029 3a0a 2020  sic(self, p):.  
-0002ece0: 2020 2320 2020 2020 2020 2027 6e65 775f    #        'new_
-0002ecf0: 6c79 7269 6373 203a 2041 4444 4c59 5249  lyrics : ADDLYRI
-0002ed00: 4353 2063 6f6d 706f 7369 7465 5f6d 7573  CS composite_mus
-0002ed10: 6963 270a 2020 2020 2320 2020 2020 2020  ic'.    #       
-0002ed20: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-0002ed30: 6465 2827 6e65 775f 6c79 7269 6373 272c  de('new_lyrics',
-0002ed40: 2070 5b31 3a5d 290a 0a20 2020 2023 2020   p[1:])..    #  
-0002ed50: 2020 6465 6620 705f 6e65 775f 6c79 7269    def p_new_lyri
-0002ed60: 6373 5f5f 6e65 775f 6c79 7269 6373 5f5f  cs__new_lyrics__
-0002ed70: 4144 444c 5952 4943 535f 5f63 6f6d 706f  ADDLYRICS__compo
-0002ed80: 7369 7465 5f6d 7573 6963 2873 656c 662c  site_music(self,
-0002ed90: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-0002eda0: 2020 276e 6577 5f6c 7972 6963 7320 3a20    'new_lyrics : 
-0002edb0: 6e65 775f 6c79 7269 6373 2041 4444 4c59  new_lyrics ADDLY
-0002edc0: 5249 4353 2063 6f6d 706f 7369 7465 5f6d  RICS composite_m
-0002edd0: 7573 6963 270a 2020 2020 2320 2020 2020  usic'.    #     
-0002ede0: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-0002edf0: 4e6f 6465 2827 6e65 775f 6c79 7269 6373  Node('new_lyrics
-0002ee00: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
-0002ee10: 2323 206e 6f74 655f 6368 6f72 645f 656c  ## note_chord_el
-0002ee20: 656d 656e 7420 2323 230a 0a20 2020 2064  ement ###..    d
-0002ee30: 6566 2070 5f6e 6f74 655f 6368 6f72 645f  ef p_note_chord_
-0002ee40: 656c 656d 656e 745f 5f63 686f 7264 5f62  element__chord_b
-0002ee50: 6f64 795f 5f6f 7074 696f 6e61 6c5f 6e6f  ody__optional_no
-0002ee60: 7465 6d6f 6465 5f64 7572 6174 696f 6e5f  temode_duration_
-0002ee70: 5f70 6f73 745f 6576 656e 7473 280a 2020  _post_events(.  
-0002ee80: 2020 2020 2020 7365 6c66 2c20 700a 2020        self, p.  
-0002ee90: 2020 293a 0a20 2020 2020 2020 2022 6e6f    ):.        "no
-0002eea0: 7465 5f63 686f 7264 5f65 6c65 6d65 6e74  te_chord_element
-0002eeb0: 203a 2063 686f 7264 5f62 6f64 7920 6f70   : chord_body op
-0002eec0: 7469 6f6e 616c 5f6e 6f74 656d 6f64 655f  tional_notemode_
-0002eed0: 6475 7261 7469 6f6e 2070 6f73 745f 6576  duration post_ev
-0002eee0: 656e 7473 220a 2020 2020 2020 2020 6368  ents".        ch
-0002eef0: 6f72 6420 3d20 5f73 636f 7265 2e43 686f  ord = _score.Cho
-0002ef00: 7264 285b 5d2c 2070 5b32 5d2e 6475 7261  rd([], p[2].dura
-0002ef10: 7469 6f6e 290a 2020 2020 2020 2020 7069  tion).        pi
-0002ef20: 7463 6865 7320 3d20 5b5d 0a20 2020 2020  tches = [].     
-0002ef30: 2020 2070 6f73 745f 6576 656e 7473 203d     post_events =
-0002ef40: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
-0002ef50: 6e6f 6465 2069 6e20 705b 315d 3a0a 2020  node in p[1]:.  
-0002ef60: 2020 2020 2020 2020 2020 7069 7463 6865            pitche
-0002ef70: 732e 6170 7065 6e64 286e 6f64 655b 305d  s.append(node[0]
-0002ef80: 2e77 7269 7474 656e 5f70 6974 6368 290a  .written_pitch).
-0002ef90: 2020 2020 2020 2020 2020 2020 6368 6f72              chor
-0002efa0: 642e 6e6f 7465 5f68 6561 6473 2e61 7070  d.note_heads.app
-0002efb0: 656e 6428 6e6f 6465 5b30 5d29 0a20 2020  end(node[0]).   
-0002efc0: 2020 2020 2020 2020 2070 6f73 745f 6576           post_ev
-0002efd0: 656e 7473 2e65 7874 656e 6428 6e6f 6465  ents.extend(node
-0002efe0: 5b31 5d29 0a20 2020 2020 2020 2070 6f73  [1]).        pos
-0002eff0: 745f 6576 656e 7473 2e65 7874 656e 6428  t_events.extend(
-0002f000: 705b 335d 290a 2020 2020 2020 2020 7365  p[3]).        se
-0002f010: 6c66 2e63 6c69 656e 742e 5f63 686f 7264  lf.client._chord
-0002f020: 5f70 6974 6368 5f6f 7264 6572 735b 6368  _pitch_orders[ch
-0002f030: 6f72 645d 203d 2070 6974 6368 6573 0a20  ord] = pitches. 
-0002f040: 2020 2020 2020 2069 6620 705b 325d 2e6d         if p[2].m
-0002f050: 756c 7469 706c 6965 7220 6973 206e 6f74  ultiplier is not
-0002f060: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0002f070: 2020 206d 756c 7469 706c 6965 7220 3d20     multiplier = 
-0002f080: 5f64 7572 6174 696f 6e2e 4d75 6c74 6970  _duration.Multip
-0002f090: 6c69 6572 2870 5b32 5d2e 6d75 6c74 6970  lier(p[2].multip
-0002f0a0: 6c69 6572 290a 2020 2020 2020 2020 2020  lier).          
-0002f0b0: 2020 6368 6f72 642e 6d75 6c74 6970 6c69    chord.multipli
-0002f0c0: 6572 203d 206d 756c 7469 706c 6965 720a  er = multiplier.
-0002f0d0: 2020 2020 2020 2020 7365 6c66 2e63 6c69          self.cli
-0002f0e0: 656e 742e 5f70 726f 6365 7373 5f70 6f73  ent._process_pos
-0002f0f0: 745f 6576 656e 7473 2863 686f 7264 2c20  t_events(chord, 
-0002f100: 706f 7374 5f65 7665 6e74 7329 0a20 2020  post_events).   
-0002f110: 2020 2020 2070 5b30 5d20 3d20 6368 6f72       p[0] = chor
-0002f120: 640a 0a20 2020 2023 2323 206e 756d 6265  d..    ### numbe
-0002f130: 725f 6578 7072 6573 7369 6f6e 2023 2323  r_expression ###
-0002f140: 0a0a 2020 2020 6465 6620 705f 6e75 6d62  ..    def p_numb
-0002f150: 6572 5f65 7870 7265 7373 696f 6e5f 5f6e  er_expression__n
-0002f160: 756d 6265 725f 6578 7072 6573 7369 6f6e  umber_expression
-0002f170: 5f5f 4368 7234 335f 5f6e 756d 6265 725f  __Chr43__number_
-0002f180: 7465 726d 2873 656c 662c 2070 293a 0a20  term(self, p):. 
-0002f190: 2020 2020 2020 2022 6e75 6d62 6572 5f65         "number_e
-0002f1a0: 7870 7265 7373 696f 6e20 3a20 6e75 6d62  xpression : numb
-0002f1b0: 6572 5f65 7870 7265 7373 696f 6e20 272b  er_expression '+
-0002f1c0: 2720 6e75 6d62 6572 5f74 6572 6d22 0a20  ' number_term". 
-0002f1d0: 2020 2020 2020 2070 5b30 5d20 3d20 666c         p[0] = fl
-0002f1e0: 6f61 7428 705b 315d 2920 2b20 705b 335d  oat(p[1]) + p[3]
-0002f1f0: 0a0a 2020 2020 6465 6620 705f 6e75 6d62  ..    def p_numb
-0002f200: 6572 5f65 7870 7265 7373 696f 6e5f 5f6e  er_expression__n
-0002f210: 756d 6265 725f 6578 7072 6573 7369 6f6e  umber_expression
-0002f220: 5f5f 4368 7234 355f 5f6e 756d 6265 725f  __Chr45__number_
-0002f230: 7465 726d 2873 656c 662c 2070 293a 0a20  term(self, p):. 
-0002f240: 2020 2020 2020 2022 6e75 6d62 6572 5f65         "number_e
-0002f250: 7870 7265 7373 696f 6e20 3a20 6e75 6d62  xpression : numb
-0002f260: 6572 5f65 7870 7265 7373 696f 6e20 272d  er_expression '-
-0002f270: 2720 6e75 6d62 6572 5f74 6572 6d22 0a20  ' number_term". 
-0002f280: 2020 2020 2020 2070 5b30 5d20 3d20 666c         p[0] = fl
-0002f290: 6f61 7428 705b 315d 2920 2d20 705b 335d  oat(p[1]) - p[3]
-0002f2a0: 0a0a 2020 2020 6465 6620 705f 6e75 6d62  ..    def p_numb
-0002f2b0: 6572 5f65 7870 7265 7373 696f 6e5f 5f6e  er_expression__n
-0002f2c0: 756d 6265 725f 7465 726d 2873 656c 662c  umber_term(self,
-0002f2d0: 2070 293a 0a20 2020 2020 2020 2022 6e75   p):.        "nu
-0002f2e0: 6d62 6572 5f65 7870 7265 7373 696f 6e20  mber_expression 
-0002f2f0: 3a20 6e75 6d62 6572 5f74 6572 6d22 0a20  : number_term". 
-0002f300: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-0002f310: 315d 0a0a 2020 2020 2323 2320 6e75 6d62  1]..    ### numb
-0002f320: 6572 5f66 6163 746f 7220 2323 230a 0a20  er_factor ###.. 
-0002f330: 2020 2064 6566 2070 5f6e 756d 6265 725f     def p_number_
-0002f340: 6661 6374 6f72 5f5f 4368 7234 355f 5f6e  factor__Chr45__n
-0002f350: 756d 6265 725f 6661 6374 6f72 2873 656c  umber_factor(sel
-0002f360: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-0002f370: 6e75 6d62 6572 5f66 6163 746f 7220 3a20  number_factor : 
-0002f380: 272d 2720 6e75 6d62 6572 5f66 6163 746f  '-' number_facto
-0002f390: 7222 0a20 2020 2020 2020 2070 5b30 5d20  r".        p[0] 
-0002f3a0: 3d20 2d31 202a 2070 5b32 5d0a 0a20 2020  = -1 * p[2]..   
-0002f3b0: 2064 6566 2070 5f6e 756d 6265 725f 6661   def p_number_fa
-0002f3c0: 6374 6f72 5f5f 6261 7265 5f6e 756d 6265  ctor__bare_numbe
-0002f3d0: 7228 7365 6c66 2c20 7029 3a0a 2020 2020  r(self, p):.    
-0002f3e0: 2020 2020 226e 756d 6265 725f 6661 6374      "number_fact
-0002f3f0: 6f72 203a 2062 6172 655f 6e75 6d62 6572  or : bare_number
-0002f400: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-0002f410: 2070 5b31 5d0a 0a20 2020 2023 2323 206e   p[1]..    ### n
-0002f420: 756d 6265 725f 7465 726d 2023 2323 0a0a  umber_term ###..
-0002f430: 2020 2020 6465 6620 705f 6e75 6d62 6572      def p_number
-0002f440: 5f74 6572 6d5f 5f6e 756d 6265 725f 6661  _term__number_fa
-0002f450: 6374 6f72 2873 656c 662c 2070 293a 0a20  ctor(self, p):. 
-0002f460: 2020 2020 2020 2022 6e75 6d62 6572 5f74         "number_t
-0002f470: 6572 6d20 3a20 6e75 6d62 6572 5f66 6163  erm : number_fac
-0002f480: 746f 7222 0a20 2020 2020 2020 2070 5b30  tor".        p[0
-0002f490: 5d20 3d20 705b 315d 0a0a 2020 2020 6465  ] = p[1]..    de
-0002f4a0: 6620 705f 6e75 6d62 6572 5f74 6572 6d5f  f p_number_term_
-0002f4b0: 5f6e 756d 6265 725f 6661 6374 6f72 5f5f  _number_factor__
-0002f4c0: 4368 7234 325f 5f6e 756d 6265 725f 6661  Chr42__number_fa
-0002f4d0: 6374 6f72 2873 656c 662c 2070 293a 0a20  ctor(self, p):. 
-0002f4e0: 2020 2020 2020 2022 6e75 6d62 6572 5f74         "number_t
-0002f4f0: 6572 6d20 3a20 6e75 6d62 6572 5f66 6163  erm : number_fac
-0002f500: 746f 7220 272a 2720 6e75 6d62 6572 5f66  tor '*' number_f
-0002f510: 6163 746f 7222 0a20 2020 2020 2020 2070  actor".        p
-0002f520: 5b30 5d20 3d20 666c 6f61 7428 705b 315d  [0] = float(p[1]
-0002f530: 2920 2a20 705b 335d 0a0a 2020 2020 6465  ) * p[3]..    de
-0002f540: 6620 705f 6e75 6d62 6572 5f74 6572 6d5f  f p_number_term_
-0002f550: 5f6e 756d 6265 725f 6661 6374 6f72 5f5f  _number_factor__
-0002f560: 4368 7234 375f 5f6e 756d 6265 725f 6661  Chr47__number_fa
-0002f570: 6374 6f72 2873 656c 662c 2070 293a 0a20  ctor(self, p):. 
-0002f580: 2020 2020 2020 2022 6e75 6d62 6572 5f74         "number_t
-0002f590: 6572 6d20 3a20 6e75 6d62 6572 5f66 6163  erm : number_fac
-0002f5a0: 746f 7220 272f 2720 6e75 6d62 6572 5f66  tor '/' number_f
-0002f5b0: 6163 746f 7222 0a20 2020 2020 2020 2070  actor".        p
-0002f5c0: 5b30 5d20 3d20 666c 6f61 7428 705b 315d  [0] = float(p[1]
-0002f5d0: 2920 2f20 705b 335d 0a0a 2020 2020 2323  ) / p[3]..    ##
-0002f5e0: 2320 6f63 7461 7665 5f63 6865 636b 2023  # octave_check #
-0002f5f0: 2323 0a0a 2020 2020 6465 6620 705f 6f63  ##..    def p_oc
-0002f600: 7461 7665 5f63 6865 636b 5f5f 4368 7236  tave_check__Chr6
-0002f610: 3128 7365 6c66 2c20 7029 3a0a 2020 2020  1(self, p):.    
-0002f620: 2020 2020 226f 6374 6176 655f 6368 6563      "octave_chec
-0002f630: 6b20 3a20 273d 2722 0a20 2020 2020 2020  k : '='".       
-0002f640: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-0002f650: 6465 2822 6f63 7461 7665 5f63 6865 636b  de("octave_check
-0002f660: 222c 2070 2e5f 5f67 6574 736c 6963 655f  ", p.__getslice_
-0002f670: 5f28 312c 204e 6f6e 6529 290a 0a20 2020  _(1, None))..   
-0002f680: 2064 6566 2070 5f6f 6374 6176 655f 6368   def p_octave_ch
-0002f690: 6563 6b5f 5f43 6872 3631 5f5f 7375 625f  eck__Chr61__sub_
-0002f6a0: 7175 6f74 6573 2873 656c 662c 2070 293a  quotes(self, p):
-0002f6b0: 0a20 2020 2020 2020 2022 6f63 7461 7665  .        "octave
-0002f6c0: 5f63 6865 636b 203a 2027 3d27 2073 7562  _check : '=' sub
-0002f6d0: 5f71 756f 7465 7322 0a20 2020 2020 2020  _quotes".       
-0002f6e0: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-0002f6f0: 6465 2822 6f63 7461 7665 5f63 6865 636b  de("octave_check
-0002f700: 222c 2070 2e5f 5f67 6574 736c 6963 655f  ", p.__getslice_
-0002f710: 5f28 312c 204e 6f6e 6529 290a 0a20 2020  _(1, None))..   
-0002f720: 2064 6566 2070 5f6f 6374 6176 655f 6368   def p_octave_ch
-0002f730: 6563 6b5f 5f43 6872 3631 5f5f 7375 705f  eck__Chr61__sup_
-0002f740: 7175 6f74 6573 2873 656c 662c 2070 293a  quotes(self, p):
-0002f750: 0a20 2020 2020 2020 2022 6f63 7461 7665  .        "octave
-0002f760: 5f63 6865 636b 203a 2027 3d27 2073 7570  _check : '=' sup
-0002f770: 5f71 756f 7465 7322 0a20 2020 2020 2020  _quotes".       
-0002f780: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
-0002f790: 6465 2822 6f63 7461 7665 5f63 6865 636b  de("octave_check
-0002f7a0: 222c 2070 2e5f 5f67 6574 736c 6963 655f  ", p.__getslice_
-0002f7b0: 5f28 312c 204e 6f6e 6529 290a 0a20 2020  _(1, None))..   
-0002f7c0: 2064 6566 2070 5f6f 6374 6176 655f 6368   def p_octave_ch
-0002f7d0: 6563 6b5f 5f45 6d70 7479 2873 656c 662c  eck__Empty(self,
-0002f7e0: 2070 293a 0a20 2020 2020 2020 2022 6f63   p):.        "oc
-0002f7f0: 7461 7665 5f63 6865 636b 203a 220a 2020  tave_check :".  
-0002f800: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
-0002f810: 7461 784e 6f64 6528 226f 6374 6176 655f  taxNode("octave_
-0002f820: 6368 6563 6b22 2c20 702e 5f5f 6765 7473  check", p.__gets
-0002f830: 6c69 6365 5f5f 2831 2c20 4e6f 6e65 2929  lice__(1, None))
-0002f840: 0a0a 2020 2020 2323 2320 6f70 7469 6f6e  ..    ### option
-0002f850: 616c 5f63 6f6e 7465 7874 5f6d 6f64 2023  al_context_mod #
-0002f860: 2323 0a0a 2020 2020 6465 6620 705f 6f70  ##..    def p_op
-0002f870: 7469 6f6e 616c 5f63 6f6e 7465 7874 5f6d  tional_context_m
-0002f880: 6f64 5f5f 456d 7074 7928 7365 6c66 2c20  od__Empty(self, 
-0002f890: 7029 3a0a 2020 2020 2020 2020 226f 7074  p):.        "opt
-0002f8a0: 696f 6e61 6c5f 636f 6e74 6578 745f 6d6f  ional_context_mo
-0002f8b0: 6420 3a22 0a20 2020 2020 2020 2070 5b30  d :".        p[0
-0002f8c0: 5d20 3d20 5b5d 0a0a 2020 2020 6465 6620  ] = []..    def 
-0002f8d0: 705f 6f70 7469 6f6e 616c 5f63 6f6e 7465  p_optional_conte
-0002f8e0: 7874 5f6d 6f64 5f5f 636f 6e74 6578 745f  xt_mod__context_
-0002f8f0: 6d6f 6469 6669 6361 7469 6f6e 2873 656c  modification(sel
-0002f900: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-0002f910: 6f70 7469 6f6e 616c 5f63 6f6e 7465 7874  optional_context
-0002f920: 5f6d 6f64 203a 2063 6f6e 7465 7874 5f6d  _mod : context_m
-0002f930: 6f64 6966 6963 6174 696f 6e22 0a20 2020  odification".   
-0002f940: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
-0002f950: 0a0a 2020 2020 2323 2320 6f70 7469 6f6e  ..    ### option
-0002f960: 616c 5f69 6420 2323 230a 0a20 2020 2064  al_id ###..    d
-0002f970: 6566 2070 5f6f 7074 696f 6e61 6c5f 6964  ef p_optional_id
-0002f980: 5f5f 4368 7236 315f 5f73 696d 706c 655f  __Chr61__simple_
-0002f990: 7374 7269 6e67 2873 656c 662c 2070 293a  string(self, p):
-0002f9a0: 0a20 2020 2020 2020 2022 6f70 7469 6f6e  .        "option
-0002f9b0: 616c 5f69 6420 3a20 273d 2720 7369 6d70  al_id : '=' simp
-0002f9c0: 6c65 5f73 7472 696e 6722 0a20 2020 2020  le_string".     
-0002f9d0: 2020 2070 5b30 5d20 3d20 705b 325d 0a0a     p[0] = p[2]..
-0002f9e0: 2020 2020 6465 6620 705f 6f70 7469 6f6e      def p_option
-0002f9f0: 616c 5f69 645f 5f45 6d70 7479 2873 656c  al_id__Empty(sel
-0002fa00: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-0002fa10: 6f70 7469 6f6e 616c 5f69 6420 3a22 0a20  optional_id :". 
-0002fa20: 2020 2020 2020 2070 5b30 5d20 3d20 4e6f         p[0] = No
-0002fa30: 6e65 0a0a 2020 2020 2323 2320 6f70 7469  ne..    ### opti
-0002fa40: 6f6e 616c 5f6e 6f74 656d 6f64 655f 6475  onal_notemode_du
-0002fa50: 7261 7469 6f6e 2023 2323 0a0a 2020 2020  ration ###..    
-0002fa60: 6465 6620 705f 6f70 7469 6f6e 616c 5f6e  def p_optional_n
-0002fa70: 6f74 656d 6f64 655f 6475 7261 7469 6f6e  otemode_duration
-0002fa80: 5f5f 456d 7074 7928 7365 6c66 2c20 7029  __Empty(self, p)
-0002fa90: 3a0a 2020 2020 2020 2020 226f 7074 696f  :.        "optio
-0002faa0: 6e61 6c5f 6e6f 7465 6d6f 6465 5f64 7572  nal_notemode_dur
-0002fab0: 6174 696f 6e20 3a22 0a20 2020 2020 2020  ation :".       
-0002fac0: 2070 5b30 5d20 3d20 7365 6c66 2e63 6c69   p[0] = self.cli
-0002fad0: 656e 742e 5f64 6566 6175 6c74 5f64 7572  ent._default_dur
-0002fae0: 6174 696f 6e0a 0a20 2020 2064 6566 2070  ation..    def p
-0002faf0: 5f6f 7074 696f 6e61 6c5f 6e6f 7465 6d6f  _optional_notemo
-0002fb00: 6465 5f64 7572 6174 696f 6e5f 5f6d 756c  de_duration__mul
-0002fb10: 7469 706c 6965 645f 6475 7261 7469 6f6e  tiplied_duration
-0002fb20: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-0002fb30: 2020 2022 6f70 7469 6f6e 616c 5f6e 6f74     "optional_not
-0002fb40: 656d 6f64 655f 6475 7261 7469 6f6e 203a  emode_duration :
-0002fb50: 206d 756c 7469 706c 6965 645f 6475 7261   multiplied_dura
-0002fb60: 7469 6f6e 220a 2020 2020 2020 2020 705b  tion".        p[
-0002fb70: 305d 203d 2070 5b31 5d0a 2020 2020 2020  0] = p[1].      
-0002fb80: 2020 7365 6c66 2e63 6c69 656e 742e 5f64    self.client._d
-0002fb90: 6566 6175 6c74 5f64 7572 6174 696f 6e20  efault_duration 
-0002fba0: 3d20 705b 315d 0a0a 2020 2020 2323 2320  = p[1]..    ### 
-0002fbb0: 6f70 7469 6f6e 616c 5f72 6573 7420 2323  optional_rest ##
-0002fbc0: 230a 0a20 2020 2064 6566 2070 5f6f 7074  #..    def p_opt
-0002fbd0: 696f 6e61 6c5f 7265 7374 5f5f 456d 7074  ional_rest__Empt
-0002fbe0: 7928 7365 6c66 2c20 7029 3a0a 2020 2020  y(self, p):.    
-0002fbf0: 2020 2020 226f 7074 696f 6e61 6c5f 7265      "optional_re
-0002fc00: 7374 203a 220a 2020 2020 2020 2020 705b  st :".        p[
-0002fc10: 305d 203d 2046 616c 7365 0a0a 2020 2020  0] = False..    
-0002fc20: 6465 6620 705f 6f70 7469 6f6e 616c 5f72  def p_optional_r
-0002fc30: 6573 745f 5f52 4553 5428 7365 6c66 2c20  est__REST(self, 
-0002fc40: 7029 3a0a 2020 2020 2020 2020 226f 7074  p):.        "opt
-0002fc50: 696f 6e61 6c5f 7265 7374 203a 2052 4553  ional_rest : RES
-0002fc60: 5422 0a20 2020 2020 2020 2070 5b30 5d20  T".        p[0] 
-0002fc70: 3d20 5472 7565 0a0a 2020 2020 2323 2320  = True..    ### 
-0002fc80: 6f75 7470 7574 5f64 6566 2023 2323 0a0a  output_def ###..
-0002fc90: 2020 2020 6465 6620 705f 6f75 7470 7574      def p_output
-0002fca0: 5f64 6566 5f5f 6f75 7470 7574 5f64 6566  _def__output_def
-0002fcb0: 5f62 6f64 795f 5f43 6872 3132 3528 7365  _body__Chr125(se
-0002fcc0: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-0002fcd0: 226f 7574 7075 745f 6465 6620 3a20 6f75  "output_def : ou
-0002fce0: 7470 7574 5f64 6566 5f62 6f64 7920 277d  tput_def_body '}
-0002fcf0: 2722 0a20 2020 2020 2020 2070 5b30 5d20  '".        p[0] 
-0002fd00: 3d20 705b 315d 0a20 2020 2020 2020 2073  = p[1].        s
-0002fd10: 656c 662e 636c 6965 6e74 2e5f 706f 705f  elf.client._pop_
-0002fd20: 7661 7269 6162 6c65 5f73 636f 7065 2829  variable_scope()
-0002fd30: 0a20 2020 2020 2020 2073 656c 662e 636c  .        self.cl
-0002fd40: 6965 6e74 2e5f 6c65 7865 722e 706f 705f  ient._lexer.pop_
-0002fd50: 7374 6174 6528 290a 2020 2020 2020 2020  state().        
-0002fd60: 7365 6c66 2e63 6c69 656e 742e 5f72 656c  self.client._rel
-0002fd70: 6578 5f6c 6f6f 6b61 6865 6164 2829 0a0a  ex_lookahead()..
-0002fd80: 2020 2020 2323 2320 6f75 7470 7574 5f64      ### output_d
-0002fd90: 6566 5f62 6f64 7920 2323 230a 0a20 2020  ef_body ###..   
-0002fda0: 2064 6566 2070 5f6f 7574 7075 745f 6465   def p_output_de
-0002fdb0: 665f 626f 6479 5f5f 6f75 7470 7574 5f64  f_body__output_d
-0002fdc0: 6566 5f62 6f64 795f 5f61 7373 6967 6e6d  ef_body__assignm
-0002fdd0: 656e 7428 7365 6c66 2c20 7029 3a0a 2020  ent(self, p):.  
-0002fde0: 2020 2020 2020 226f 7574 7075 745f 6465        "output_de
-0002fdf0: 665f 626f 6479 203a 206f 7574 7075 745f  f_body : output_
-0002fe00: 6465 665f 626f 6479 2061 7373 6967 6e6d  def_body assignm
-0002fe10: 656e 7422 0a20 2020 2020 2020 2073 656c  ent".        sel
-0002fe20: 662e 636c 6965 6e74 2e5f 6173 7369 676e  f.client._assign
-0002fe30: 5f76 6172 6961 626c 6528 705b 325d 5b30  _variable(p[2][0
-0002fe40: 5d2c 2070 5b32 5d5b 315d 290a 2020 2020  ], p[2][1]).    
-0002fe50: 2020 2020 7365 7461 7474 7228 705b 315d      setattr(p[1]
-0002fe60: 2c20 705b 325d 5b30 5d2c 2070 5b32 5d5b  , p[2][0], p[2][
-0002fe70: 315d 2e76 616c 7565 290a 2020 2020 2020  1].value).      
-0002fe80: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-0002fe90: 2020 2023 2020 2020 6465 6620 705f 6f75     #    def p_ou
-0002fea0: 7470 7574 5f64 6566 5f62 6f64 795f 5f6f  tput_def_body__o
-0002feb0: 7574 7075 745f 6465 665f 626f 6479 5f5f  utput_def_body__
-0002fec0: 636f 6e74 6578 745f 6465 665f 7370 6563  context_def_spec
-0002fed0: 5f62 6c6f 636b 2873 656c 662c 2070 293a  _block(self, p):
-0002fee0: 0a20 2020 2023 2020 2020 2020 2020 276f  .    #        'o
-0002fef0: 7574 7075 745f 6465 665f 626f 6479 203a  utput_def_body :
-0002ff00: 206f 7574 7075 745f 6465 665f 626f 6479   output_def_body
-0002ff10: 2063 6f6e 7465 7874 5f64 6566 5f73 7065   context_def_spe
-0002ff20: 635f 626c 6f63 6b27 0a20 2020 2023 2020  c_block'.    #  
-0002ff30: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
-0002ff40: 7461 784e 6f64 6528 276f 7574 7075 745f  taxNode('output_
-0002ff50: 6465 665f 626f 6479 272c 2070 5b31 3a5d  def_body', p[1:]
-0002ff60: 290a 0a20 2020 2023 2020 2020 6465 6620  )..    #    def 
-0002ff70: 705f 6f75 7470 7574 5f64 6566 5f62 6f64  p_output_def_bod
-0002ff80: 795f 5f6f 7574 7075 745f 6465 665f 626f  y__output_def_bo
-0002ff90: 6479 5f5f 6572 726f 7228 7365 6c66 2c20  dy__error(self, 
-0002ffa0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
-0002ffb0: 2027 6f75 7470 7574 5f64 6566 5f62 6f64   'output_def_bod
-0002ffc0: 7920 3a20 6f75 7470 7574 5f64 6566 5f62  y : output_def_b
-0002ffd0: 6f64 7920 6572 726f 7227 0a20 2020 2023  ody error'.    #
-0002ffe0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-0002fff0: 796e 7461 784e 6f64 6528 276f 7574 7075  yntaxNode('outpu
-00030000: 745f 6465 665f 626f 6479 272c 2070 5b31  t_def_body', p[1
-00030010: 3a5d 290a 0a20 2020 2064 6566 2070 5f6f  :])..    def p_o
-00030020: 7574 7075 745f 6465 665f 626f 6479 5f5f  utput_def_body__
-00030030: 6f75 7470 7574 5f64 6566 5f68 6561 645f  output_def_head_
-00030040: 7769 7468 5f6d 6f64 655f 7377 6974 6368  with_mode_switch
-00030050: 5f5f 4368 7231 3233 2873 656c 662c 2070  __Chr123(self, p
-00030060: 293a 0a20 2020 2020 2020 2022 6f75 7470  ):.        "outp
-00030070: 7574 5f64 6566 5f62 6f64 7920 3a20 6f75  ut_def_body : ou
-00030080: 7470 7574 5f64 6566 5f68 6561 645f 7769  tput_def_head_wi
-00030090: 7468 5f6d 6f64 655f 7377 6974 6368 2027  th_mode_switch '
-000300a0: 7b27 220a 2020 2020 2020 2020 705b 305d  {'".        p[0]
-000300b0: 203d 2070 5b31 5d0a 0a20 2020 2064 6566   = p[1]..    def
-000300c0: 2070 5f6f 7574 7075 745f 6465 665f 626f   p_output_def_bo
-000300d0: 6479 5f5f 6f75 7470 7574 5f64 6566 5f68  dy__output_def_h
-000300e0: 6561 645f 7769 7468 5f6d 6f64 655f 7377  ead_with_mode_sw
-000300f0: 6974 6368 5f5f 4368 7231 3233 5f5f 4f55  itch__Chr123__OU
-00030100: 5450 5554 5f44 4546 5f49 4445 4e54 4946  TPUT_DEF_IDENTIF
-00030110: 4945 5228 0a20 2020 2020 2020 2073 656c  IER(.        sel
-00030120: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
-00030130: 2020 2020 226f 7574 7075 745f 6465 665f      "output_def_
-00030140: 626f 6479 203a 206f 7574 7075 745f 6465  body : output_de
-00030150: 665f 6865 6164 5f77 6974 685f 6d6f 6465  f_head_with_mode
-00030160: 5f73 7769 7463 6820 277b 2720 4f55 5450  _switch '{' OUTP
-00030170: 5554 5f44 4546 5f49 4445 4e54 4946 4945  UT_DEF_IDENTIFIE
-00030180: 5222 0a20 2020 2020 2020 2070 5b30 5d20  R".        p[0] 
-00030190: 3d20 705b 325d 0a0a 2020 2020 2323 2320  = p[2]..    ### 
-000301a0: 6f75 7470 7574 5f64 6566 5f68 6561 6420  output_def_head 
-000301b0: 2323 230a 0a20 2020 2064 6566 2070 5f6f  ###..    def p_o
-000301c0: 7574 7075 745f 6465 665f 6865 6164 5f5f  utput_def_head__
-000301d0: 4c41 594f 5554 2873 656c 662c 2070 293a  LAYOUT(self, p):
-000301e0: 0a20 2020 2020 2020 2022 6f75 7470 7574  .        "output
-000301f0: 5f64 6566 5f68 6561 6420 3a20 4c41 594f  _def_head : LAYO
-00030200: 5554 220a 2020 2020 2020 2020 705b 305d  UT".        p[0]
-00030210: 203d 205f 6c69 6c79 706f 6e64 6669 6c65   = _lilypondfile
-00030220: 2e42 6c6f 636b 286e 616d 653d 226c 6179  .Block(name="lay
-00030230: 6f75 7422 290a 2020 2020 2020 2020 7365  out").        se
-00030240: 6c66 2e63 6c69 656e 742e 5f70 7573 685f  lf.client._push_
-00030250: 7661 7269 6162 6c65 5f73 636f 7065 2829  variable_scope()
-00030260: 0a0a 2020 2020 6465 6620 705f 6f75 7470  ..    def p_outp
-00030270: 7574 5f64 6566 5f68 6561 645f 5f4d 4944  ut_def_head__MID
-00030280: 4928 7365 6c66 2c20 7029 3a0a 2020 2020  I(self, p):.    
-00030290: 2020 2020 226f 7574 7075 745f 6465 665f      "output_def_
-000302a0: 6865 6164 203a 204d 4944 4922 0a20 2020  head : MIDI".   
-000302b0: 2020 2020 2070 5b30 5d20 3d20 5f6c 696c       p[0] = _lil
-000302c0: 7970 6f6e 6466 696c 652e 426c 6f63 6b28  ypondfile.Block(
-000302d0: 6e61 6d65 3d22 6d69 6469 2229 0a20 2020  name="midi").   
-000302e0: 2020 2020 2073 656c 662e 636c 6965 6e74       self.client
-000302f0: 2e5f 7075 7368 5f76 6172 6961 626c 655f  ._push_variable_
-00030300: 7363 6f70 6528 290a 0a20 2020 2064 6566  scope()..    def
-00030310: 2070 5f6f 7574 7075 745f 6465 665f 6865   p_output_def_he
-00030320: 6164 5f5f 5041 5045 5228 7365 6c66 2c20  ad__PAPER(self, 
-00030330: 7029 3a0a 2020 2020 2020 2020 226f 7574  p):.        "out
-00030340: 7075 745f 6465 665f 6865 6164 203a 2050  put_def_head : P
-00030350: 4150 4552 220a 2020 2020 2020 2020 705b  APER".        p[
-00030360: 305d 203d 205f 6c69 6c79 706f 6e64 6669  0] = _lilypondfi
-00030370: 6c65 2e42 6c6f 636b 286e 616d 653d 2270  le.Block(name="p
-00030380: 6170 6572 2229 0a20 2020 2020 2020 2073  aper").        s
-00030390: 656c 662e 636c 6965 6e74 2e5f 7075 7368  elf.client._push
-000303a0: 5f76 6172 6961 626c 655f 7363 6f70 6528  _variable_scope(
-000303b0: 290a 0a20 2020 2023 2323 206f 7574 7075  )..    ### outpu
-000303c0: 745f 6465 665f 6865 6164 5f77 6974 685f  t_def_head_with_
-000303d0: 6d6f 6465 5f73 7769 7463 6820 2323 230a  mode_switch ###.
-000303e0: 0a20 2020 2064 6566 2070 5f6f 7574 7075  .    def p_outpu
-000303f0: 745f 6465 665f 6865 6164 5f77 6974 685f  t_def_head_with_
-00030400: 6d6f 6465 5f73 7769 7463 685f 5f6f 7574  mode_switch__out
-00030410: 7075 745f 6465 665f 6865 6164 2873 656c  put_def_head(sel
-00030420: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-00030430: 6f75 7470 7574 5f64 6566 5f68 6561 645f  output_def_head_
-00030440: 7769 7468 5f6d 6f64 655f 7377 6974 6368  with_mode_switch
-00030450: 203a 206f 7574 7075 745f 6465 665f 6865   : output_def_he
-00030460: 6164 220a 2020 2020 2020 2020 705b 305d  ad".        p[0]
-00030470: 203d 2070 5b31 5d0a 2020 2020 2020 2020   = p[1].        
-00030480: 7365 6c66 2e63 6c69 656e 742e 5f6c 6578  self.client._lex
-00030490: 6572 2e70 7573 685f 7374 6174 6528 2249  er.push_state("I
-000304a0: 4e49 5449 414c 2229 0a0a 2020 2020 2323  NITIAL")..    ##
-000304b0: 2320 7061 7065 725f 626c 6f63 6b20 2323  # paper_block ##
-000304c0: 230a 0a20 2020 2023 2020 2020 6465 6620  #..    #    def 
-000304d0: 705f 7061 7065 725f 626c 6f63 6b5f 5f6f  p_paper_block__o
-000304e0: 7574 7075 745f 6465 6628 7365 6c66 2c20  utput_def(self, 
-000304f0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
-00030500: 2027 7061 7065 725f 626c 6f63 6b20 3a20   'paper_block : 
-00030510: 6f75 7470 7574 5f64 6566 270a 2020 2020  output_def'.    
-00030520: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
-00030530: 705b 315d 0a0a 2020 2020 2323 2320 7069  p[1]..    ### pi
-00030540: 7463 6820 2323 230a 0a20 2020 2064 6566  tch ###..    def
-00030550: 2070 5f70 6974 6368 5f5f 5049 5443 485f   p_pitch__PITCH_
-00030560: 4944 454e 5449 4649 4552 2873 656c 662c  IDENTIFIER(self,
-00030570: 2070 293a 0a20 2020 2020 2020 2022 7069   p):.        "pi
-00030580: 7463 6820 3a20 5049 5443 485f 4944 454e  tch : PITCH_IDEN
-00030590: 5449 4649 4552 220a 2020 2020 2020 2020  TIFIER".        
-000305a0: 705b 305d 203d 2070 5b31 5d0a 0a20 2020  p[0] = p[1]..   
-000305b0: 2064 6566 2070 5f70 6974 6368 5f5f 7374   def p_pitch__st
-000305c0: 656e 6f5f 7069 7463 6828 7365 6c66 2c20  eno_pitch(self, 
-000305d0: 7029 3a0a 2020 2020 2020 2020 2270 6974  p):.        "pit
-000305e0: 6368 203a 2073 7465 6e6f 5f70 6974 6368  ch : steno_pitch
-000305f0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00030600: 2070 5b31 5d0a 0a20 2020 2023 2323 2070   p[1]..    ### p
-00030610: 6974 6368 5f61 6c73 6f5f 696e 5f63 686f  itch_also_in_cho
-00030620: 7264 7320 2323 230a 0a20 2020 2064 6566  rds ###..    def
-00030630: 2070 5f70 6974 6368 5f61 6c73 6f5f 696e   p_pitch_also_in
-00030640: 5f63 686f 7264 735f 5f70 6974 6368 2873  _chords__pitch(s
-00030650: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-00030660: 2022 7069 7463 685f 616c 736f 5f69 6e5f   "pitch_also_in_
-00030670: 6368 6f72 6473 203a 2070 6974 6368 220a  chords : pitch".
-00030680: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
-00030690: 5b31 5d0a 0a20 2020 2064 6566 2070 5f70  [1]..    def p_p
-000306a0: 6974 6368 5f61 6c73 6f5f 696e 5f63 686f  itch_also_in_cho
-000306b0: 7264 735f 5f73 7465 6e6f 5f74 6f6e 6963  rds__steno_tonic
-000306c0: 5f70 6974 6368 2873 656c 662c 2070 293a  _pitch(self, p):
-000306d0: 0a20 2020 2020 2020 2022 7069 7463 685f  .        "pitch_
-000306e0: 616c 736f 5f69 6e5f 6368 6f72 6473 203a  also_in_chords :
-000306f0: 2073 7465 6e6f 5f74 6f6e 6963 5f70 6974   steno_tonic_pit
-00030700: 6368 220a 2020 2020 2020 2020 705b 305d  ch".        p[0]
-00030710: 203d 2070 5b31 5d0a 0a20 2020 2023 2323   = p[1]..    ###
-00030720: 2070 6f73 745f 6576 656e 7420 2323 230a   post_event ###.
-00030730: 0a20 2020 2064 6566 2070 5f70 6f73 745f  .    def p_post_
-00030740: 6576 656e 745f 5f43 6872 3435 5f5f 6669  event__Chr45__fi
-00030750: 6e67 6572 696e 6728 7365 6c66 2c20 7029  ngering(self, p)
-00030760: 3a0a 2020 2020 2020 2020 2270 6f73 745f  :.        "post_
-00030770: 6576 656e 7420 3a20 272d 2720 6669 6e67  event : '-' fing
-00030780: 6572 696e 6722 0a20 2020 2020 2020 2070  ering".        p
-00030790: 5b30 5d20 3d20 4e6f 6e65 0a0a 2020 2020  [0] = None..    
-000307a0: 6465 6620 705f 706f 7374 5f65 7665 6e74  def p_post_event
-000307b0: 5f5f 706f 7374 5f65 7665 6e74 5f6e 6f66  __post_event_nof
-000307c0: 696e 6765 7228 7365 6c66 2c20 7029 3a0a  inger(self, p):.
-000307d0: 2020 2020 2020 2020 2270 6f73 745f 6576          "post_ev
-000307e0: 656e 7420 3a20 706f 7374 5f65 7665 6e74  ent : post_event
-000307f0: 5f6e 6f66 696e 6765 7222 0a20 2020 2020  _nofinger".     
-00030800: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-00030810: 2020 2020 2323 2320 706f 7374 5f65 7665      ### post_eve
-00030820: 6e74 5f6e 6f66 696e 6765 7220 2323 230a  nt_nofinger ###.
-00030830: 0a20 2020 2064 6566 2070 5f70 6f73 745f  .    def p_post_
-00030840: 6576 656e 745f 6e6f 6669 6e67 6572 5f5f  event_nofinger__
-00030850: 4368 7239 345f 5f66 696e 6765 7269 6e67  Chr94__fingering
-00030860: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-00030870: 2020 2022 706f 7374 5f65 7665 6e74 5f6e     "post_event_n
-00030880: 6f66 696e 6765 7220 3a20 275e 2720 6669  ofinger : '^' fi
-00030890: 6e67 6572 696e 6722 0a20 2020 2020 2020  ngering".       
-000308a0: 2070 5b30 5d20 3d20 4e6f 6e65 0a0a 2020   p[0] = None..  
-000308b0: 2020 6465 6620 705f 706f 7374 5f65 7665    def p_post_eve
-000308c0: 6e74 5f6e 6f66 696e 6765 725f 5f43 6872  nt_nofinger__Chr
-000308d0: 3935 5f5f 6669 6e67 6572 696e 6728 7365  95__fingering(se
-000308e0: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-000308f0: 2270 6f73 745f 6576 656e 745f 6e6f 6669  "post_event_nofi
-00030900: 6e67 6572 203a 2027 5f27 2066 696e 6765  nger : '_' finge
-00030910: 7269 6e67 220a 2020 2020 2020 2020 705b  ring".        p[
-00030920: 305d 203d 204e 6f6e 650a 0a20 2020 2064  0] = None..    d
-00030930: 6566 2070 5f70 6f73 745f 6576 656e 745f  ef p_post_event_
-00030940: 6e6f 6669 6e67 6572 5f5f 4558 5445 4e44  nofinger__EXTEND
-00030950: 4552 2873 656c 662c 2070 293a 0a20 2020  ER(self, p):.   
-00030960: 2020 2020 2022 706f 7374 5f65 7665 6e74       "post_event
-00030970: 5f6e 6f66 696e 6765 7220 3a20 4558 5445  _nofinger : EXTE
-00030980: 4e44 4552 220a 2020 2020 2020 2020 705b  NDER".        p[
-00030990: 305d 203d 204e 6f6e 650a 0a20 2020 2064  0] = None..    d
-000309a0: 6566 2070 5f70 6f73 745f 6576 656e 745f  ef p_post_event_
-000309b0: 6e6f 6669 6e67 6572 5f5f 4859 5048 454e  nofinger__HYPHEN
-000309c0: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-000309d0: 2020 2022 706f 7374 5f65 7665 6e74 5f6e     "post_event_n
-000309e0: 6f66 696e 6765 7220 3a20 4859 5048 454e  ofinger : HYPHEN
-000309f0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00030a00: 204e 6f6e 650a 0a20 2020 2064 6566 2070   None..    def p
-00030a10: 5f70 6f73 745f 6576 656e 745f 6e6f 6669  _post_event_nofi
-00030a20: 6e67 6572 5f5f 6469 7265 6374 696f 6e5f  nger__direction_
-00030a30: 6c65 7373 5f65 7665 6e74 2873 656c 662c  less_event(self,
-00030a40: 2070 293a 0a20 2020 2020 2020 2022 706f   p):.        "po
-00030a50: 7374 5f65 7665 6e74 5f6e 6f66 696e 6765  st_event_nofinge
-00030a60: 7220 3a20 6469 7265 6374 696f 6e5f 6c65  r : direction_le
-00030a70: 7373 5f65 7665 6e74 220a 2020 2020 2020  ss_event".      
-00030a80: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-00030a90: 2020 2064 6566 2070 5f70 6f73 745f 6576     def p_post_ev
-00030aa0: 656e 745f 6e6f 6669 6e67 6572 5f5f 7363  ent_nofinger__sc
-00030ab0: 7269 7074 5f64 6972 5f5f 6469 7265 6374  ript_dir__direct
-00030ac0: 696f 6e5f 6c65 7373 5f65 7665 6e74 2873  ion_less_event(s
-00030ad0: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-00030ae0: 2022 706f 7374 5f65 7665 6e74 5f6e 6f66   "post_event_nof
-00030af0: 696e 6765 7220 3a20 7363 7269 7074 5f64  inger : script_d
-00030b00: 6972 2064 6972 6563 7469 6f6e 5f6c 6573  ir direction_les
-00030b10: 735f 6576 656e 7422 0a20 2020 2020 2020  s_event".       
-00030b20: 2023 2020 2020 2020 2020 7472 793a 0a20   #        try:. 
-00030b30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00030b40: 2020 2020 705b 325d 2e64 6972 6563 7469      p[2].directi
-00030b50: 6f6e 203d 2070 5b31 5d0a 2020 2020 2020  on = p[1].      
-00030b60: 2020 2320 2020 2020 2020 2020 2020 2064    #            d
-00030b70: 6972 6563 7469 6f6e 203d 205f 7374 7269  irection = _stri
-00030b80: 6e67 2e74 6f5f 7472 6964 6972 6563 7469  ng.to_tridirecti
-00030b90: 6f6e 616c 5f6c 696c 7970 6f6e 645f 7379  onal_lilypond_sy
-00030ba0: 6d62 6f6c 2870 5b31 5d29 0a20 2020 2020  mbol(p[1]).     
-00030bb0: 2020 2023 2020 2020 2020 2020 6578 6365     #        exce
-00030bc0: 7074 2041 7474 7269 6275 7465 4572 726f  pt AttributeErro
-00030bd0: 723a 0a20 2020 2020 2020 2023 2020 2020  r:.        #    
-00030be0: 2020 2020 2020 2020 6469 7265 6374 696f          directio
-00030bf0: 6e20 3d20 5f73 7472 696e 672e 746f 5f74  n = _string.to_t
-00030c00: 7269 6469 7265 6374 696f 6e61 6c5f 6c69  ridirectional_li
-00030c10: 6c79 706f 6e64 5f73 796d 626f 6c28 705b  lypond_symbol(p[
-00030c20: 315d 290a 2020 2020 2020 2020 2320 2020  1]).        #   
-00030c30: 2020 2020 2020 2020 2023 2061 7373 6572           # asser
-00030c40: 7420 6861 7361 7474 7228 705b 325d 2c20  t hasattr(p[2], 
-00030c50: 225f 6469 7265 6374 696f 6e22 290a 2020  "_direction").  
-00030c60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00030c70: 2020 2023 2070 5b32 5d2e 5f64 6972 6563     # p[2]._direc
-00030c80: 7469 6f6e 203d 2064 6972 6563 7469 6f6e  tion = direction
-00030c90: 0a20 2020 2020 2020 2023 2070 5b30 5d20  .        # p[0] 
-00030ca0: 3d20 705b 325d 0a20 2020 2020 2020 2064  = p[2].        d
-00030cb0: 6972 6563 7469 6f6e 203d 205f 7374 7269  irection = _stri
-00030cc0: 6e67 2e74 6f5f 7472 6964 6972 6563 7469  ng.to_tridirecti
-00030cd0: 6f6e 616c 5f6c 696c 7970 6f6e 645f 7379  onal_lilypond_sy
-00030ce0: 6d62 6f6c 2870 5b31 5d29 0a20 2020 2020  mbol(p[1]).     
-00030cf0: 2020 2070 5b30 5d20 3d20 2870 5b32 5d2c     p[0] = (p[2],
-00030d00: 2064 6972 6563 7469 6f6e 290a 0a20 2020   direction)..   
-00030d10: 2064 6566 2070 5f70 6f73 745f 6576 656e   def p_post_even
-00030d20: 745f 6e6f 6669 6e67 6572 5f5f 7363 7269  t_nofinger__scri
-00030d30: 7074 5f64 6972 5f5f 6469 7265 6374 696f  pt_dir__directio
-00030d40: 6e5f 7265 7164 5f65 7665 6e74 2873 656c  n_reqd_event(sel
-00030d50: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-00030d60: 706f 7374 5f65 7665 6e74 5f6e 6f66 696e  post_event_nofin
-00030d70: 6765 7220 3a20 7363 7269 7074 5f64 6972  ger : script_dir
-00030d80: 2064 6972 6563 7469 6f6e 5f72 6571 645f   direction_reqd_
-00030d90: 6576 656e 7422 0a20 2020 2020 2020 2023  event".        #
-00030da0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00030db0: 7461 6e63 6528 705b 325d 2c20 5f69 6e64  tance(p[2], _ind
-00030dc0: 6963 6174 6f72 732e 4d61 726b 7570 293a  icators.Markup):
-00030dd0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00030de0: 2020 2020 2020 6469 7265 6374 696f 6e20        direction 
-00030df0: 3d20 5f73 7472 696e 672e 746f 5f74 7269  = _string.to_tri
-00030e00: 6469 7265 6374 696f 6e61 6c5f 6f72 6469  directional_ordi
-00030e10: 6e61 6c5f 636f 6e73 7461 6e74 2870 5b31  nal_constant(p[1
-00030e20: 5d29 0a20 2020 2020 2020 2023 2020 2020  ]).        #    
-00030e30: 2020 2020 2020 2020 705b 325d 2e64 6972          p[2].dir
-00030e40: 6563 7469 6f6e 203d 2064 6972 6563 7469  ection = directi
-00030e50: 6f6e 0a20 2020 2020 2020 2023 2020 2020  on.        #    
-00030e60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00030e70: 2020 2320 2020 2020 2020 2020 2020 2074    #            t
-00030e80: 7279 3a0a 2020 2020 2020 2020 2320 2020  ry:.        #   
-00030e90: 2020 2020 2020 2020 2020 2020 2070 5b32               p[2
-00030ea0: 5d2e 6469 7265 6374 696f 6e20 3d20 705b  ].direction = p[
-00030eb0: 315d 0a20 2020 2020 2020 2023 2020 2020  1].        #    
-00030ec0: 2020 2020 2020 2020 6578 6365 7074 2041          except A
-00030ed0: 7474 7269 6275 7465 4572 726f 723a 0a20  ttributeError:. 
-00030ee0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00030ef0: 2020 2020 2020 2020 6469 7265 6374 696f          directio
-00030f00: 6e20 3d20 5f73 7472 696e 672e 746f 5f74  n = _string.to_t
-00030f10: 7269 6469 7265 6374 696f 6e61 6c5f 6f72  ridirectional_or
-00030f20: 6469 6e61 6c5f 636f 6e73 7461 6e74 2870  dinal_constant(p
-00030f30: 5b31 5d29 0a20 2020 2020 2020 2023 2020  [1]).        #  
-00030f40: 2020 2020 2020 2020 2020 2020 2020 6173                as
-00030f50: 7365 7274 2068 6173 6174 7472 2870 5b32  sert hasattr(p[2
-00030f60: 5d2c 2022 5f64 6972 6563 7469 6f6e 2229  ], "_direction")
-00030f70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00030f80: 2020 2020 2020 2020 2020 705b 325d 2e5f            p[2]._
-00030f90: 6469 7265 6374 696f 6e20 3d20 6469 7265  direction = dire
-00030fa0: 6374 696f 6e0a 2020 2020 2020 2020 2320  ction.        # 
-00030fb0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-00030fc0: 325d 0a20 2020 2020 2020 2064 6972 6563  2].        direc
-00030fd0: 7469 6f6e 203d 205f 7374 7269 6e67 2e74  tion = _string.t
-00030fe0: 6f5f 7472 6964 6972 6563 7469 6f6e 616c  o_tridirectional
-00030ff0: 5f6f 7264 696e 616c 5f63 6f6e 7374 616e  _ordinal_constan
-00031000: 7428 705b 315d 290a 2020 2020 2020 2020  t(p[1]).        
-00031010: 705b 305d 203d 2028 705b 325d 2c20 6469  p[0] = (p[2], di
-00031020: 7265 6374 696f 6e29 0a0a 2020 2020 6465  rection)..    de
-00031030: 6620 705f 706f 7374 5f65 7665 6e74 5f6e  f p_post_event_n
-00031040: 6f66 696e 6765 725f 5f73 6372 6970 745f  ofinger__script_
-00031050: 6469 725f 5f6d 7573 6963 5f66 756e 6374  dir__music_funct
-00031060: 696f 6e5f 6576 656e 7428 7365 6c66 2c20  ion_event(self, 
-00031070: 7029 3a0a 2020 2020 2020 2020 2270 6f73  p):.        "pos
-00031080: 745f 6576 656e 745f 6e6f 6669 6e67 6572  t_event_nofinger
-00031090: 203a 2073 6372 6970 745f 6469 7220 6d75   : script_dir mu
-000310a0: 7369 635f 6675 6e63 7469 6f6e 5f65 7665  sic_function_eve
-000310b0: 6e74 220a 2020 2020 2020 2020 705b 305d  nt".        p[0]
-000310c0: 203d 2070 5b32 5d0a 0a20 2020 2064 6566   = p[2]..    def
-000310d0: 2070 5f70 6f73 745f 6576 656e 745f 6e6f   p_post_event_no
-000310e0: 6669 6e67 6572 5f5f 7374 7269 6e67 5f6e  finger__string_n
-000310f0: 756d 6265 725f 6576 656e 7428 7365 6c66  umber_event(self
-00031100: 2c20 7029 3a0a 2020 2020 2020 2020 2270  , p):.        "p
-00031110: 6f73 745f 6576 656e 745f 6e6f 6669 6e67  ost_event_nofing
-00031120: 6572 203a 2073 7472 696e 675f 6e75 6d62  er : string_numb
-00031130: 6572 5f65 7665 6e74 220a 2020 2020 2020  er_event".      
-00031140: 2020 705b 305d 203d 204e 6f6e 650a 0a20    p[0] = None.. 
-00031150: 2020 2023 2323 2070 6f73 745f 6576 656e     ### post_even
-00031160: 7473 2023 2323 0a0a 2020 2020 6465 6620  ts ###..    def 
-00031170: 705f 706f 7374 5f65 7665 6e74 735f 5f45  p_post_events__E
-00031180: 6d70 7479 2873 656c 662c 2070 293a 0a20  mpty(self, p):. 
-00031190: 2020 2020 2020 2022 706f 7374 5f65 7665         "post_eve
-000311a0: 6e74 7320 3a22 0a20 2020 2020 2020 2070  nts :".        p
-000311b0: 5b30 5d20 3d20 5b5d 0a0a 2020 2020 6465  [0] = []..    de
-000311c0: 6620 705f 706f 7374 5f65 7665 6e74 735f  f p_post_events_
-000311d0: 5f70 6f73 745f 6576 656e 7473 5f5f 706f  _post_events__po
-000311e0: 7374 5f65 7665 6e74 2873 656c 662c 2070  st_event(self, p
-000311f0: 293a 0a20 2020 2020 2020 2022 706f 7374  ):.        "post
-00031200: 5f65 7665 6e74 7320 3a20 706f 7374 5f65  _events : post_e
-00031210: 7665 6e74 7320 706f 7374 5f65 7665 6e74  vents post_event
-00031220: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00031230: 2070 5b31 5d20 2b20 5b70 5b32 5d5d 0a0a   p[1] + [p[2]]..
-00031240: 2020 2020 2323 2320 7072 6f70 6572 7479      ### property
-00031250: 5f6f 7065 7261 7469 6f6e 2023 2323 0a0a  _operation ###..
-00031260: 2020 2020 6465 6620 705f 7072 6f70 6572      def p_proper
-00031270: 7479 5f6f 7065 7261 7469 6f6e 5f5f 4f56  ty_operation__OV
-00031280: 4552 5249 4445 5f5f 7369 6d70 6c65 5f73  ERRIDE__simple_s
-00031290: 7472 696e 675f 5f70 726f 7065 7274 795f  tring__property_
-000312a0: 7061 7468 5f5f 4368 7236 315f 5f73 6361  path__Chr61__sca
-000312b0: 6c61 7228 0a20 2020 2020 2020 2073 656c  lar(.        sel
-000312c0: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
-000312d0: 2020 2020 2270 726f 7065 7274 795f 6f70      "property_op
-000312e0: 6572 6174 696f 6e20 3a20 4f56 4552 5249  eration : OVERRI
-000312f0: 4445 2073 696d 706c 655f 7374 7269 6e67  DE simple_string
-00031300: 2070 726f 7065 7274 795f 7061 7468 2027   property_path '
-00031310: 3d27 2073 6361 6c61 7222 0a20 2020 2020  =' scalar".     
-00031320: 2020 2070 5b30 5d20 3d20 4c69 6c79 506f     p[0] = LilyPo
-00031330: 6e64 4576 656e 7428 0a20 2020 2020 2020  ndEvent(.       
-00031340: 2020 2020 2022 5072 6f70 6572 7479 4f70       "PropertyOp
-00031350: 6572 6174 696f 6e22 2c0a 2020 2020 2020  eration",.      
-00031360: 2020 2020 2020 6b65 7977 6f72 643d 226f        keyword="o
-00031370: 7665 7272 6964 6522 2c0a 2020 2020 2020  verride",.      
-00031380: 2020 2020 2020 636f 6e74 6578 743d 705b        context=p[
-00031390: 325d 2c0a 2020 2020 2020 2020 2020 2020  2],.            
-000313a0: 7072 6f70 6572 7479 3d70 5b33 5d2c 0a20  property=p[3],. 
-000313b0: 2020 2020 2020 2020 2020 2076 616c 7565             value
-000313c0: 3d70 5b35 5d2c 0a20 2020 2020 2020 2029  =p[5],.        )
-000313d0: 0a0a 2020 2020 6465 6620 705f 7072 6f70  ..    def p_prop
-000313e0: 6572 7479 5f6f 7065 7261 7469 6f6e 5f5f  erty_operation__
-000313f0: 5245 5645 5254 5f5f 7369 6d70 6c65 5f73  REVERT__simple_s
-00031400: 7472 696e 675f 5f65 6d62 6564 6465 645f  tring__embedded_
-00031410: 7363 6d28 7365 6c66 2c20 7029 3a0a 2020  scm(self, p):.  
-00031420: 2020 2020 2020 2270 726f 7065 7274 795f        "property_
-00031430: 6f70 6572 6174 696f 6e20 3a20 5245 5645  operation : REVE
-00031440: 5254 2073 696d 706c 655f 7374 7269 6e67  RT simple_string
-00031450: 2065 6d62 6564 6465 645f 7363 6d22 0a20   embedded_scm". 
-00031460: 2020 2020 2020 2070 5b30 5d20 3d20 4c69         p[0] = Li
-00031470: 6c79 506f 6e64 4576 656e 7428 0a20 2020  lyPondEvent(.   
-00031480: 2020 2020 2020 2020 2022 5072 6f70 6572           "Proper
-00031490: 7479 4f70 6572 6174 696f 6e22 2c20 6b65  tyOperation", ke
-000314a0: 7977 6f72 643d 2272 6576 6572 7422 2c20  yword="revert", 
-000314b0: 636f 6e74 6578 743d 705b 325d 2c20 7072  context=p[2], pr
-000314c0: 6f70 6572 7479 3d70 5b33 5d0a 2020 2020  operty=p[3].    
-000314d0: 2020 2020 290a 0a20 2020 2064 6566 2070      )..    def p
-000314e0: 5f70 726f 7065 7274 795f 6f70 6572 6174  _property_operat
-000314f0: 696f 6e5f 5f53 5452 494e 475f 5f43 6872  ion__STRING__Chr
-00031500: 3631 5f5f 7363 616c 6172 2873 656c 662c  61__scalar(self,
-00031510: 2070 293a 0a20 2020 2020 2020 2022 7072   p):.        "pr
-00031520: 6f70 6572 7479 5f6f 7065 7261 7469 6f6e  operty_operation
-00031530: 203a 2053 5452 494e 4720 273d 2720 7363   : STRING '=' sc
-00031540: 616c 6172 220a 2020 2020 2020 2020 705b  alar".        p[
-00031550: 305d 203d 204c 696c 7950 6f6e 6445 7665  0] = LilyPondEve
-00031560: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
-00031570: 2250 726f 7065 7274 794f 7065 7261 7469  "PropertyOperati
-00031580: 6f6e 222c 206b 6579 776f 7264 3d22 7365  on", keyword="se
-00031590: 7422 2c20 7072 6f70 6572 7479 3d70 5b31  t", property=p[1
-000315a0: 5d2c 2076 616c 7565 3d70 5b32 5d0a 2020  ], value=p[2].  
-000315b0: 2020 2020 2020 290a 0a20 2020 2064 6566        )..    def
-000315c0: 2070 5f70 726f 7065 7274 795f 6f70 6572   p_property_oper
-000315d0: 6174 696f 6e5f 5f55 4e53 4554 5f5f 7369  ation__UNSET__si
-000315e0: 6d70 6c65 5f73 7472 696e 6728 7365 6c66  mple_string(self
-000315f0: 2c20 7029 3a0a 2020 2020 2020 2020 2270  , p):.        "p
-00031600: 726f 7065 7274 795f 6f70 6572 6174 696f  roperty_operatio
-00031610: 6e20 3a20 554e 5345 5420 7369 6d70 6c65  n : UNSET simple
-00031620: 5f73 7472 696e 6722 0a20 2020 2020 2020  _string".       
-00031630: 2070 5b30 5d20 3d20 4c69 6c79 506f 6e64   p[0] = LilyPond
-00031640: 4576 656e 7428 2250 726f 7065 7274 794f  Event("PropertyO
-00031650: 7065 7261 7469 6f6e 222c 206b 6579 776f  peration", keywo
-00031660: 7264 3d22 756e 7365 7422 2c20 7072 6f70  rd="unset", prop
-00031670: 6572 7479 3d70 5b32 5d29 0a0a 2020 2020  erty=p[2])..    
-00031680: 2323 2320 7072 6f70 6572 7479 5f70 6174  ### property_pat
-00031690: 6820 2323 230a 0a20 2020 2064 6566 2070  h ###..    def p
-000316a0: 5f70 726f 7065 7274 795f 7061 7468 5f5f  _property_path__
-000316b0: 7072 6f70 6572 7479 5f70 6174 685f 7265  property_path_re
-000316c0: 7676 6564 2873 656c 662c 2070 293a 0a20  vved(self, p):. 
-000316d0: 2020 2020 2020 2022 7072 6f70 6572 7479         "property
-000316e0: 5f70 6174 6820 3a20 7072 6f70 6572 7479  _path : property
-000316f0: 5f70 6174 685f 7265 7676 6564 220a 2020  _path_revved".  
-00031700: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-00031710: 5d0a 0a20 2020 2023 2323 2070 726f 7065  ]..    ### prope
-00031720: 7274 795f 7061 7468 5f72 6576 7665 6420  rty_path_revved 
-00031730: 2323 230a 0a20 2020 2064 6566 2070 5f70  ###..    def p_p
-00031740: 726f 7065 7274 795f 7061 7468 5f72 6576  roperty_path_rev
-00031750: 7665 645f 5f65 6d62 6564 6465 645f 7363  ved__embedded_sc
-00031760: 6d5f 636c 6f73 6564 2873 656c 662c 2070  m_closed(self, p
-00031770: 293a 0a20 2020 2020 2020 2022 7072 6f70  ):.        "prop
-00031780: 6572 7479 5f70 6174 685f 7265 7676 6564  erty_path_revved
-00031790: 203a 2065 6d62 6564 6465 645f 7363 6d5f   : embedded_scm_
-000317a0: 636c 6f73 6564 220a 2020 2020 2020 2020  closed".        
-000317b0: 705b 305d 203d 205b 705b 315d 5d0a 0a20  p[0] = [p[1]].. 
-000317c0: 2020 2064 6566 2070 5f70 726f 7065 7274     def p_propert
-000317d0: 795f 7061 7468 5f72 6576 7665 645f 5f70  y_path_revved__p
-000317e0: 726f 7065 7274 795f 7061 7468 5f72 6576  roperty_path_rev
-000317f0: 7665 645f 5f65 6d62 6564 6465 645f 7363  ved__embedded_sc
-00031800: 6d5f 636c 6f73 6564 2873 656c 662c 2070  m_closed(self, p
-00031810: 293a 0a20 2020 2020 2020 2022 7072 6f70  ):.        "prop
-00031820: 6572 7479 5f70 6174 685f 7265 7676 6564  erty_path_revved
-00031830: 203a 2070 726f 7065 7274 795f 7061 7468   : property_path
-00031840: 5f72 6576 7665 6420 656d 6265 6464 6564  _revved embedded
-00031850: 5f73 636d 5f63 6c6f 7365 6422 0a20 2020  _scm_closed".   
-00031860: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
-00031870: 202b 205b 705b 325d 5d0a 0a20 2020 2023   + [p[2]]..    #
-00031880: 2323 2071 7565 7374 696f 6e73 2023 2323  ## questions ###
-00031890: 0a0a 2020 2020 6465 6620 705f 7175 6573  ..    def p_ques
-000318a0: 7469 6f6e 735f 5f45 6d70 7479 2873 656c  tions__Empty(sel
-000318b0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-000318c0: 7175 6573 7469 6f6e 7320 3a22 0a20 2020  questions :".   
-000318d0: 2020 2020 2070 5b30 5d20 3d20 300a 0a20       p[0] = 0.. 
-000318e0: 2020 2064 6566 2070 5f71 7565 7374 696f     def p_questio
-000318f0: 6e73 5f5f 7175 6573 7469 6f6e 735f 5f43  ns__questions__C
-00031900: 6872 3633 2873 656c 662c 2070 293a 0a20  hr63(self, p):. 
-00031910: 2020 2020 2020 2022 7175 6573 7469 6f6e         "question
-00031920: 7320 3a20 7175 6573 7469 6f6e 7320 273f  s : questions '?
-00031930: 2722 0a20 2020 2020 2020 2070 5b30 5d20  '".        p[0] 
-00031940: 3d20 705b 315d 202b 2031 0a0a 2020 2020  = p[1] + 1..    
-00031950: 2323 2320 7265 5f72 6879 7468 6d65 645f  ### re_rhythmed_
-00031960: 6d75 7369 6320 2323 230a 0a20 2020 2023  music ###..    #
-00031970: 2020 2020 6465 6620 705f 7265 5f72 6879      def p_re_rhy
-00031980: 7468 6d65 645f 6d75 7369 635f 5f4c 5952  thmed_music__LYR
-00031990: 4943 5354 4f5f 5f73 696d 706c 655f 7374  ICSTO__simple_st
-000319a0: 7269 6e67 5f5f 6d75 7369 6328 7365 6c66  ring__music(self
-000319b0: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
-000319c0: 2020 2027 7265 5f72 6879 7468 6d65 645f     're_rhythmed_
-000319d0: 6d75 7369 6320 3a20 4c59 5249 4353 544f  music : LYRICSTO
-000319e0: 2073 696d 706c 655f 7374 7269 6e67 206d   simple_string m
-000319f0: 7573 6963 270a 2020 2020 2320 2020 2020  usic'.    #     
-00031a00: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-00031a10: 4e6f 6465 2827 7265 5f72 6879 7468 6d65  Node('re_rhythme
-00031a20: 645f 6d75 7369 6327 2c20 705b 313a 5d29  d_music', p[1:])
-00031a30: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
-00031a40: 5f72 655f 7268 7974 686d 6564 5f6d 7573  _re_rhythmed_mus
-00031a50: 6963 5f5f 636f 6d70 6f73 6974 655f 6d75  ic__composite_mu
-00031a60: 7369 635f 5f6e 6577 5f6c 7972 6963 7328  sic__new_lyrics(
-00031a70: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
-00031a80: 2020 2020 2020 2027 7265 5f72 6879 7468         're_rhyth
-00031a90: 6d65 645f 6d75 7369 6320 3a20 636f 6d70  med_music : comp
-00031aa0: 6f73 6974 655f 6d75 7369 6320 6e65 775f  osite_music new_
-00031ab0: 6c79 7269 6373 2025 7072 6563 2043 4f4d  lyrics %prec COM
-00031ac0: 504f 5349 5445 270a 2020 2020 2320 2020  POSITE'.    #   
-00031ad0: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
-00031ae0: 6178 4e6f 6465 2827 7265 5f72 6879 7468  axNode('re_rhyth
-00031af0: 6d65 645f 6d75 7369 6327 2c20 705b 313a  med_music', p[1:
-00031b00: 5d29 0a0a 2020 2020 2323 2320 7265 7065  ])..    ### repe
-00031b10: 6174 6564 5f6d 7573 6963 2023 2323 0a0a  ated_music ###..
-00031b20: 2020 2020 2320 2020 2064 6566 2070 5f72      #    def p_r
-00031b30: 6570 6561 7465 645f 6d75 7369 635f 5f52  epeated_music__R
-00031b40: 4550 4541 545f 5f73 696d 706c 655f 7374  EPEAT__simple_st
-00031b50: 7269 6e67 5f5f 756e 7369 676e 6564 5f6e  ring__unsigned_n
-00031b60: 756d 6265 725f 5f6d 7573 6963 2873 656c  umber__music(sel
-00031b70: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
-00031b80: 2020 2020 2772 6570 6561 7465 645f 6d75      'repeated_mu
-00031b90: 7369 6320 3a20 5245 5045 4154 2073 696d  sic : REPEAT sim
-00031ba0: 706c 655f 7374 7269 6e67 2075 6e73 6967  ple_string unsig
-00031bb0: 6e65 645f 6e75 6d62 6572 206d 7573 6963  ned_number music
-00031bc0: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
-00031bd0: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
-00031be0: 2827 7265 7065 6174 6564 5f6d 7573 6963  ('repeated_music
-00031bf0: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
-00031c00: 2020 2020 6465 6620 705f 7265 7065 6174      def p_repeat
-00031c10: 6564 5f6d 7573 6963 5f5f 5245 5045 4154  ed_music__REPEAT
-00031c20: 5f5f 7369 6d70 6c65 5f73 7472 696e 675f  __simple_string_
-00031c30: 5f75 6e73 6967 6e65 645f 6e75 6d62 6572  _unsigned_number
-00031c40: 5f5f 6d75 7369 635f 5f41 4c54 4552 4e41  __music__ALTERNA
-00031c50: 5449 5645 5f5f 6272 6163 6564 5f6d 7573  TIVE__braced_mus
-00031c60: 6963 5f6c 6973 7428 7365 6c66 2c20 7029  ic_list(self, p)
-00031c70: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
-00031c80: 7265 7065 6174 6564 5f6d 7573 6963 203a  repeated_music :
-00031c90: 2052 4550 4541 5420 7369 6d70 6c65 5f73   REPEAT simple_s
-00031ca0: 7472 696e 6720 756e 7369 676e 6564 5f6e  tring unsigned_n
-00031cb0: 756d 6265 7220 6d75 7369 6320 414c 5445  umber music ALTE
-00031cc0: 524e 4154 4956 4520 6272 6163 6564 5f6d  RNATIVE braced_m
-00031cd0: 7573 6963 5f6c 6973 7427 0a20 2020 2023  usic_list'.    #
-00031ce0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
-00031cf0: 796e 7461 784e 6f64 6528 2772 6570 6561  yntaxNode('repea
-00031d00: 7465 645f 6d75 7369 6327 2c20 705b 313a  ted_music', p[1:
-00031d10: 5d29 0a0a 2020 2020 2323 2320 7363 616c  ])..    ### scal
-00031d20: 6172 2023 2323 0a0a 2020 2020 6465 6620  ar ###..    def 
-00031d30: 705f 7363 616c 6172 5f5f 6261 7265 5f6e  p_scalar__bare_n
-00031d40: 756d 6265 7228 7365 6c66 2c20 7029 3a0a  umber(self, p):.
-00031d50: 2020 2020 2020 2020 2273 6361 6c61 7220          "scalar 
-00031d60: 3a20 6261 7265 5f6e 756d 6265 7222 0a20  : bare_number". 
-00031d70: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
-00031d80: 315d 0a0a 2020 2020 6465 6620 705f 7363  1]..    def p_sc
-00031d90: 616c 6172 5f5f 656d 6265 6464 6564 5f73  alar__embedded_s
-00031da0: 636d 5f61 7267 2873 656c 662c 2070 293a  cm_arg(self, p):
-00031db0: 0a20 2020 2020 2020 2022 7363 616c 6172  .        "scalar
-00031dc0: 203a 2065 6d62 6564 6465 645f 7363 6d5f   : embedded_scm_
-00031dd0: 6172 6722 0a20 2020 2020 2020 2070 5b30  arg".        p[0
-00031de0: 5d20 3d20 705b 315d 0a0a 2020 2020 2320  ] = p[1]..    # 
-00031df0: 2020 2064 6566 2070 5f73 6361 6c61 725f     def p_scalar_
-00031e00: 5f6c 7972 6963 5f65 6c65 6d65 6e74 2873  _lyric_element(s
-00031e10: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
-00031e20: 2020 2020 2020 2773 6361 6c61 7220 3a20        'scalar : 
-00031e30: 6c79 7269 635f 656c 656d 656e 7427 0a20  lyric_element'. 
-00031e40: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
-00031e50: 203d 2070 5b31 5d0a 0a20 2020 2023 2323   = p[1]..    ###
-00031e60: 2073 6361 6c61 725f 636c 6f73 6564 2023   scalar_closed #
-00031e70: 2323 0a0a 2020 2020 6465 6620 705f 7363  ##..    def p_sc
-00031e80: 616c 6172 5f63 6c6f 7365 645f 5f62 6172  alar_closed__bar
-00031e90: 655f 6e75 6d62 6572 2873 656c 662c 2070  e_number(self, p
-00031ea0: 293a 0a20 2020 2020 2020 2022 7363 616c  ):.        "scal
-00031eb0: 6172 5f63 6c6f 7365 6420 3a20 6261 7265  ar_closed : bare
-00031ec0: 5f6e 756d 6265 7222 0a20 2020 2020 2020  _number".       
-00031ed0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-00031ee0: 2020 6465 6620 705f 7363 616c 6172 5f63    def p_scalar_c
-00031ef0: 6c6f 7365 645f 5f65 6d62 6564 6465 645f  losed__embedded_
-00031f00: 7363 6d5f 6172 675f 636c 6f73 6564 2873  scm_arg_closed(s
-00031f10: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-00031f20: 2022 7363 616c 6172 5f63 6c6f 7365 6420   "scalar_closed 
-00031f30: 3a20 656d 6265 6464 6564 5f73 636d 5f61  : embedded_scm_a
-00031f40: 7267 5f63 6c6f 7365 6422 0a20 2020 2020  rg_closed".     
-00031f50: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-00031f60: 2020 2020 2320 2020 2064 6566 2070 5f73      #    def p_s
-00031f70: 6361 6c61 725f 636c 6f73 6564 5f5f 6c79  calar_closed__ly
-00031f80: 7269 635f 656c 656d 656e 7428 7365 6c66  ric_element(self
-00031f90: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
-00031fa0: 2020 2027 7363 616c 6172 5f63 6c6f 7365     'scalar_close
-00031fb0: 6420 3a20 6c79 7269 635f 656c 656d 656e  d : lyric_elemen
-00031fc0: 7427 0a20 2020 2023 2020 2020 2020 2020  t'.    #        
-00031fd0: 705b 305d 203d 2070 5b31 5d0a 0a20 2020  p[0] = p[1]..   
-00031fe0: 2023 2323 2073 636d 5f66 756e 6374 696f   ### scm_functio
-00031ff0: 6e5f 6361 6c6c 2023 2323 0a0a 2020 2020  n_call ###..    
-00032000: 6465 6620 705f 7363 6d5f 6675 6e63 7469  def p_scm_functi
-00032010: 6f6e 5f63 616c 6c5f 5f53 434d 5f46 554e  on_call__SCM_FUN
-00032020: 4354 494f 4e5f 5f66 756e 6374 696f 6e5f  CTION__function_
-00032030: 6172 676c 6973 7428 7365 6c66 2c20 7029  arglist(self, p)
-00032040: 3a0a 2020 2020 2020 2020 2273 636d 5f66  :.        "scm_f
-00032050: 756e 6374 696f 6e5f 6361 6c6c 203a 2053  unction_call : S
-00032060: 434d 5f46 554e 4354 494f 4e20 6675 6e63  CM_FUNCTION func
-00032070: 7469 6f6e 5f61 7267 6c69 7374 220a 2020  tion_arglist".  
-00032080: 2020 2020 2020 705b 305d 203d 2073 656c        p[0] = sel
-00032090: 662e 636c 6965 6e74 2e5f 6775 696c 6528  f.client._guile(
-000320a0: 705b 315d 2c20 705b 325d 290a 0a20 2020  p[1], p[2])..   
-000320b0: 2023 2323 2073 636d 5f66 756e 6374 696f   ### scm_functio
-000320c0: 6e5f 6361 6c6c 5f63 6c6f 7365 6420 2323  n_call_closed ##
-000320d0: 230a 0a20 2020 2064 6566 2070 5f73 636d  #..    def p_scm
-000320e0: 5f66 756e 6374 696f 6e5f 6361 6c6c 5f63  _function_call_c
-000320f0: 6c6f 7365 645f 5f53 434d 5f46 554e 4354  losed__SCM_FUNCT
-00032100: 494f 4e5f 5f66 756e 6374 696f 6e5f 6172  ION__function_ar
-00032110: 676c 6973 745f 636c 6f73 6564 2873 656c  glist_closed(sel
-00032120: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-00032130: 7363 6d5f 6675 6e63 7469 6f6e 5f63 616c  scm_function_cal
-00032140: 6c5f 636c 6f73 6564 203a 2053 434d 5f46  l_closed : SCM_F
-00032150: 554e 4354 494f 4e20 6675 6e63 7469 6f6e  UNCTION function
-00032160: 5f61 7267 6c69 7374 5f63 6c6f 7365 6420  _arglist_closed 
-00032170: 2570 7265 6320 4655 4e43 5449 4f4e 5f41  %prec FUNCTION_A
-00032180: 5247 4c49 5354 220a 2020 2020 2020 2020  RGLIST".        
-00032190: 705b 305d 203d 2073 656c 662e 636c 6965  p[0] = self.clie
-000321a0: 6e74 2e5f 6775 696c 6528 705b 315d 2c20  nt._guile(p[1], 
-000321b0: 705b 325d 290a 0a20 2020 2023 2323 2073  p[2])..    ### s
-000321c0: 636f 7265 5f62 6c6f 636b 2023 2323 0a0a  core_block ###..
-000321d0: 2020 2020 6465 6620 705f 7363 6f72 655f      def p_score_
-000321e0: 626c 6f63 6b5f 5f53 434f 5245 5f5f 4368  block__SCORE__Ch
-000321f0: 7231 3233 5f5f 7363 6f72 655f 626f 6479  r123__score_body
-00032200: 5f5f 4368 7231 3235 2873 656c 662c 2070  __Chr125(self, p
-00032210: 293a 0a20 2020 2020 2020 2022 7363 6f72  ):.        "scor
-00032220: 655f 626c 6f63 6b20 3a20 5343 4f52 4520  e_block : SCORE 
-00032230: 277b 2720 7363 6f72 655f 626f 6479 2027  '{' score_body '
-00032240: 7d27 220a 2020 2020 2020 2020 7363 6f72  }'".        scor
-00032250: 655f 626c 6f63 6b20 3d20 5f6c 696c 7970  e_block = _lilyp
-00032260: 6f6e 6466 696c 652e 426c 6f63 6b28 6e61  ondfile.Block(na
-00032270: 6d65 3d22 7363 6f72 6522 290a 2020 2020  me="score").    
-00032280: 2020 2020 7363 6f72 655f 626c 6f63 6b2e      score_block.
-00032290: 6974 656d 732e 6578 7465 6e64 2870 5b33  items.extend(p[3
-000322a0: 5d29 0a20 2020 2020 2020 2070 5b30 5d20  ]).        p[0] 
-000322b0: 3d20 7363 6f72 655f 626c 6f63 6b0a 0a20  = score_block.. 
-000322c0: 2020 2023 2323 2073 636f 7265 5f62 6f64     ### score_bod
-000322d0: 7920 2323 230a 0a20 2020 2064 6566 2070  y ###..    def p
-000322e0: 5f73 636f 7265 5f62 6f64 795f 5f53 434f  _score_body__SCO
-000322f0: 5245 5f49 4445 4e54 4946 4945 5228 7365  RE_IDENTIFIER(se
-00032300: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-00032310: 2273 636f 7265 5f62 6f64 7920 3a20 5343  "score_body : SC
-00032320: 4f52 455f 4944 454e 5449 4649 4552 220a  ORE_IDENTIFIER".
-00032330: 2020 2020 2020 2020 705b 305d 203d 205b          p[0] = [
-00032340: 705b 315d 5d0a 0a20 2020 2064 6566 2070  p[1]]..    def p
-00032350: 5f73 636f 7265 5f62 6f64 795f 5f6d 7573  _score_body__mus
-00032360: 6963 2873 656c 662c 2070 293a 0a20 2020  ic(self, p):.   
-00032370: 2020 2020 2022 7363 6f72 655f 626f 6479       "score_body
-00032380: 203a 206d 7573 6963 220a 2020 2020 2020   : music".      
-00032390: 2020 705b 305d 203d 205b 705b 315d 5d0a    p[0] = [p[1]].
-000323a0: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
-000323b0: 7363 6f72 655f 626f 6479 5f5f 7363 6f72  score_body__scor
-000323c0: 655f 626f 6479 5f5f 6572 726f 7228 7365  e_body__error(se
-000323d0: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
-000323e0: 2020 2020 2027 7363 6f72 655f 626f 6479       'score_body
-000323f0: 203a 2073 636f 7265 5f62 6f64 7920 6572   : score_body er
-00032400: 726f 7227 0a20 2020 2023 2020 2020 2020  ror'.    #      
-00032410: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-00032420: 6f64 6528 2773 636f 7265 5f62 6f64 7927  ode('score_body'
-00032430: 2c20 705b 313a 5d29 0a0a 2020 2020 6465  , p[1:])..    de
-00032440: 6620 705f 7363 6f72 655f 626f 6479 5f5f  f p_score_body__
-00032450: 7363 6f72 655f 626f 6479 5f5f 6c69 6c79  score_body__lily
-00032460: 706f 6e64 5f68 6561 6465 7228 7365 6c66  pond_header(self
-00032470: 2c20 7029 3a0a 2020 2020 2020 2020 2273  , p):.        "s
-00032480: 636f 7265 5f62 6f64 7920 3a20 7363 6f72  core_body : scor
-00032490: 655f 626f 6479 206c 696c 7970 6f6e 645f  e_body lilypond_
-000324a0: 6865 6164 6572 220a 2020 2020 2020 2020  header".        
-000324b0: 705b 305d 203d 2070 5b31 5d20 2b20 5b70  p[0] = p[1] + [p
-000324c0: 5b32 5d5d 0a0a 2020 2020 6465 6620 705f  [2]]..    def p_
-000324d0: 7363 6f72 655f 626f 6479 5f5f 7363 6f72  score_body__scor
-000324e0: 655f 626f 6479 5f5f 6f75 7470 7574 5f64  e_body__output_d
-000324f0: 6566 2873 656c 662c 2070 293a 0a20 2020  ef(self, p):.   
-00032500: 2020 2020 2022 7363 6f72 655f 626f 6479       "score_body
-00032510: 203a 2073 636f 7265 5f62 6f64 7920 6f75   : score_body ou
-00032520: 7470 7574 5f64 6566 220a 2020 2020 2020  tput_def".      
-00032530: 2020 705b 305d 203d 2070 5b31 5d20 2b20    p[0] = p[1] + 
-00032540: 5b70 5b32 5d5d 0a0a 2020 2020 2323 2320  [p[2]]..    ### 
-00032550: 7363 7269 7074 5f61 6262 7265 7669 6174  script_abbreviat
-00032560: 696f 6e20 2323 230a 0a20 2020 2064 6566  ion ###..    def
-00032570: 2070 5f73 6372 6970 745f 6162 6272 6576   p_script_abbrev
-00032580: 6961 7469 6f6e 5f5f 414e 474c 455f 434c  iation__ANGLE_CL
-00032590: 4f53 4528 7365 6c66 2c20 7029 3a0a 2020  OSE(self, p):.  
-000325a0: 2020 2020 2020 2273 6372 6970 745f 6162        "script_ab
-000325b0: 6272 6576 6961 7469 6f6e 203a 2041 4e47  breviation : ANG
-000325c0: 4c45 5f43 4c4f 5345 220a 2020 2020 2020  LE_CLOSE".      
-000325d0: 2020 6b69 6e64 203d 2073 656c 662e 636c    kind = self.cl
-000325e0: 6965 6e74 2e5f 6375 7272 656e 745f 6d6f  ient._current_mo
-000325f0: 6475 6c65 5b22 6461 7368 4c61 7267 6572  dule["dashLarger
-00032600: 225d 5b22 6172 7469 6375 6c61 7469 6f6e  "]["articulation
-00032610: 2d74 7970 6522 5d0a 2020 2020 2020 2020  -type"].        
-00032620: 705b 305d 203d 205f 696e 6469 6361 746f  p[0] = _indicato
-00032630: 7273 2e41 7274 6963 756c 6174 696f 6e28  rs.Articulation(
-00032640: 6b69 6e64 290a 0a20 2020 2064 6566 2070  kind)..    def p
-00032650: 5f73 6372 6970 745f 6162 6272 6576 6961  _script_abbrevia
-00032660: 7469 6f6e 5f5f 4368 7233 3328 7365 6c66  tion__Chr33(self
-00032670: 2c20 7029 3a0a 2020 2020 2020 2020 2273  , p):.        "s
-00032680: 6372 6970 745f 6162 6272 6576 6961 7469  cript_abbreviati
-00032690: 6f6e 203a 2027 2127 220a 2020 2020 2020  on : '!'".      
-000326a0: 2020 2320 6b69 6e64 203d 2073 656c 662e    # kind = self.
-000326b0: 636c 6965 6e74 2e5f 6375 7272 656e 745f  client._current_
-000326c0: 6d6f 6475 6c65 5b22 6461 7368 4261 7222  module["dashBar"
-000326d0: 5d5b 2261 7274 6963 756c 6174 696f 6e2d  ]["articulation-
-000326e0: 7479 7065 225d 0a20 2020 2020 2020 206b  type"].        k
-000326f0: 696e 6420 3d20 7365 6c66 2e63 6c69 656e  ind = self.clien
-00032700: 742e 5f63 7572 7265 6e74 5f6d 6f64 756c  t._current_modul
-00032710: 655b 2264 6173 6842 616e 6722 5d5b 2261  e["dashBang"]["a
-00032720: 7274 6963 756c 6174 696f 6e2d 7479 7065  rticulation-type
-00032730: 225d 0a20 2020 2020 2020 2070 5b30 5d20  "].        p[0] 
-00032740: 3d20 5f69 6e64 6963 6174 6f72 732e 4172  = _indicators.Ar
-00032750: 7469 6375 6c61 7469 6f6e 286b 696e 6429  ticulation(kind)
-00032760: 0a0a 2020 2020 6465 6620 705f 7363 7269  ..    def p_scri
-00032770: 7074 5f61 6262 7265 7669 6174 696f 6e5f  pt_abbreviation_
-00032780: 5f43 6872 3433 2873 656c 662c 2070 293a  _Chr43(self, p):
-00032790: 0a20 2020 2020 2020 2022 7363 7269 7074  .        "script
-000327a0: 5f61 6262 7265 7669 6174 696f 6e20 3a20  _abbreviation : 
-000327b0: 272b 2722 0a20 2020 2020 2020 206b 696e  '+'".        kin
-000327c0: 6420 3d20 7365 6c66 2e63 6c69 656e 742e  d = self.client.
-000327d0: 5f63 7572 7265 6e74 5f6d 6f64 756c 655b  _current_module[
-000327e0: 2264 6173 6850 6c75 7322 5d5b 2261 7274  "dashPlus"]["art
-000327f0: 6963 756c 6174 696f 6e2d 7479 7065 225d  iculation-type"]
-00032800: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00032810: 5f69 6e64 6963 6174 6f72 732e 4172 7469  _indicators.Arti
-00032820: 6375 6c61 7469 6f6e 286b 696e 6429 0a0a  culation(kind)..
-00032830: 2020 2020 6465 6620 705f 7363 7269 7074      def p_script
-00032840: 5f61 6262 7265 7669 6174 696f 6e5f 5f43  _abbreviation__C
-00032850: 6872 3435 2873 656c 662c 2070 293a 0a20  hr45(self, p):. 
-00032860: 2020 2020 2020 2022 7363 7269 7074 5f61         "script_a
-00032870: 6262 7265 7669 6174 696f 6e20 3a20 272d  bbreviation : '-
-00032880: 2722 0a20 2020 2020 2020 206b 696e 6420  '".        kind 
-00032890: 3d20 7365 6c66 2e63 6c69 656e 742e 5f63  = self.client._c
-000328a0: 7572 7265 6e74 5f6d 6f64 756c 655b 2264  urrent_module["d
-000328b0: 6173 6844 6173 6822 5d5b 2261 7274 6963  ashDash"]["artic
-000328c0: 756c 6174 696f 6e2d 7479 7065 225d 0a20  ulation-type"]. 
-000328d0: 2020 2020 2020 2070 5b30 5d20 3d20 5f69         p[0] = _i
-000328e0: 6e64 6963 6174 6f72 732e 4172 7469 6375  ndicators.Articu
-000328f0: 6c61 7469 6f6e 286b 696e 6429 0a0a 2020  lation(kind)..  
-00032900: 2020 6465 6620 705f 7363 7269 7074 5f61    def p_script_a
-00032910: 6262 7265 7669 6174 696f 6e5f 5f43 6872  bbreviation__Chr
-00032920: 3436 2873 656c 662c 2070 293a 0a20 2020  46(self, p):.   
-00032930: 2020 2020 2022 7363 7269 7074 5f61 6262       "script_abb
-00032940: 7265 7669 6174 696f 6e20 3a20 272e 2722  reviation : '.'"
-00032950: 0a20 2020 2020 2020 206b 696e 6420 3d20  .        kind = 
-00032960: 7365 6c66 2e63 6c69 656e 742e 5f63 7572  self.client._cur
-00032970: 7265 6e74 5f6d 6f64 756c 655b 2264 6173  rent_module["das
-00032980: 6844 6f74 225d 5b22 6172 7469 6375 6c61  hDot"]["articula
-00032990: 7469 6f6e 2d74 7970 6522 5d0a 2020 2020  tion-type"].    
-000329a0: 2020 2020 705b 305d 203d 205f 696e 6469      p[0] = _indi
-000329b0: 6361 746f 7273 2e41 7274 6963 756c 6174  cators.Articulat
-000329c0: 696f 6e28 6b69 6e64 290a 0a20 2020 2064  ion(kind)..    d
-000329d0: 6566 2070 5f73 6372 6970 745f 6162 6272  ef p_script_abbr
-000329e0: 6576 6961 7469 6f6e 5f5f 4368 7239 3428  eviation__Chr94(
-000329f0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00032a00: 2020 2273 6372 6970 745f 6162 6272 6576    "script_abbrev
-00032a10: 6961 7469 6f6e 203a 2027 5e27 220a 2020  iation : '^'".  
-00032a20: 2020 2020 2020 6b69 6e64 203d 2073 656c        kind = sel
-00032a30: 662e 636c 6965 6e74 2e5f 6375 7272 656e  f.client._curren
-00032a40: 745f 6d6f 6475 6c65 5b22 6461 7368 4861  t_module["dashHa
-00032a50: 7422 5d5b 2261 7274 6963 756c 6174 696f  t"]["articulatio
-00032a60: 6e2d 7479 7065 225d 0a20 2020 2020 2020  n-type"].       
-00032a70: 2070 5b30 5d20 3d20 5f69 6e64 6963 6174   p[0] = _indicat
-00032a80: 6f72 732e 4172 7469 6375 6c61 7469 6f6e  ors.Articulation
-00032a90: 286b 696e 6429 0a0a 2020 2020 6465 6620  (kind)..    def 
-00032aa0: 705f 7363 7269 7074 5f61 6262 7265 7669  p_script_abbrevi
-00032ab0: 6174 696f 6e5f 5f43 6872 3935 2873 656c  ation__Chr95(sel
-00032ac0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-00032ad0: 7363 7269 7074 5f61 6262 7265 7669 6174  script_abbreviat
-00032ae0: 696f 6e20 3a20 275f 2722 0a20 2020 2020  ion : '_'".     
-00032af0: 2020 206b 696e 6420 3d20 7365 6c66 2e63     kind = self.c
-00032b00: 6c69 656e 742e 5f63 7572 7265 6e74 5f6d  lient._current_m
-00032b10: 6f64 756c 655b 2264 6173 6855 6e64 6572  odule["dashUnder
-00032b20: 7363 6f72 6522 5d5b 2261 7274 6963 756c  score"]["articul
-00032b30: 6174 696f 6e2d 7479 7065 225d 0a20 2020  ation-type"].   
-00032b40: 2020 2020 2070 5b30 5d20 3d20 5f69 6e64       p[0] = _ind
-00032b50: 6963 6174 6f72 732e 4172 7469 6375 6c61  icators.Articula
-00032b60: 7469 6f6e 286b 696e 6429 0a0a 2020 2020  tion(kind)..    
-00032b70: 2323 2320 7363 7269 7074 5f64 6972 2023  ### script_dir #
-00032b80: 2323 0a0a 2020 2020 6465 6620 705f 7363  ##..    def p_sc
-00032b90: 7269 7074 5f64 6972 5f5f 4368 7234 3528  ript_dir__Chr45(
-00032ba0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00032bb0: 2020 2273 6372 6970 745f 6469 7220 3a20    "script_dir : 
-00032bc0: 272d 2722 0a20 2020 2020 2020 2070 5b30  '-'".        p[0
-00032bd0: 5d20 3d20 705b 315d 0a0a 2020 2020 6465  ] = p[1]..    de
-00032be0: 6620 705f 7363 7269 7074 5f64 6972 5f5f  f p_script_dir__
-00032bf0: 4368 7239 3428 7365 6c66 2c20 7029 3a0a  Chr94(self, p):.
-00032c00: 2020 2020 2020 2020 2273 6372 6970 745f          "script_
-00032c10: 6469 7220 3a20 275e 2722 0a20 2020 2020  dir : '^'".     
-00032c20: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-00032c30: 2020 2020 6465 6620 705f 7363 7269 7074      def p_script
-00032c40: 5f64 6972 5f5f 4368 7239 3528 7365 6c66  _dir__Chr95(self
-00032c50: 2c20 7029 3a0a 2020 2020 2020 2020 2273  , p):.        "s
-00032c60: 6372 6970 745f 6469 7220 3a20 275f 2722  cript_dir : '_'"
-00032c70: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00032c80: 705b 315d 0a0a 2020 2020 2323 2320 7365  p[1]..    ### se
-00032c90: 7175 656e 7469 616c 5f6d 7573 6963 2023  quential_music #
-00032ca0: 2323 0a0a 2020 2020 6465 6620 705f 7365  ##..    def p_se
-00032cb0: 7175 656e 7469 616c 5f6d 7573 6963 5f5f  quential_music__
-00032cc0: 5345 5155 454e 5449 414c 5f5f 6272 6163  SEQUENTIAL__brac
-00032cd0: 6564 5f6d 7573 6963 5f6c 6973 7428 7365  ed_music_list(se
-00032ce0: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-00032cf0: 2273 6571 7565 6e74 6961 6c5f 6d75 7369  "sequential_musi
-00032d00: 6320 3a20 5345 5155 454e 5449 414c 2062  c : SEQUENTIAL b
-00032d10: 7261 6365 645f 6d75 7369 635f 6c69 7374  raced_music_list
-00032d20: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00032d30: 2073 656c 662e 636c 6965 6e74 2e5f 636f   self.client._co
-00032d40: 6e73 7472 7563 745f 7365 7175 656e 7469  nstruct_sequenti
-00032d50: 616c 5f6d 7573 6963 2870 5b32 5d29 0a0a  al_music(p[2])..
-00032d60: 2020 2020 6465 6620 705f 7365 7175 656e      def p_sequen
-00032d70: 7469 616c 5f6d 7573 6963 5f5f 6272 6163  tial_music__brac
-00032d80: 6564 5f6d 7573 6963 5f6c 6973 7428 7365  ed_music_list(se
-00032d90: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-00032da0: 2273 6571 7565 6e74 6961 6c5f 6d75 7369  "sequential_musi
-00032db0: 6320 3a20 6272 6163 6564 5f6d 7573 6963  c : braced_music
-00032dc0: 5f6c 6973 7422 0a20 2020 2020 2020 2070  _list".        p
-00032dd0: 5b30 5d20 3d20 7365 6c66 2e63 6c69 656e  [0] = self.clien
-00032de0: 742e 5f63 6f6e 7374 7275 6374 5f73 6571  t._construct_seq
-00032df0: 7565 6e74 6961 6c5f 6d75 7369 6328 705b  uential_music(p[
-00032e00: 315d 290a 0a20 2020 2023 2323 2073 696d  1])..    ### sim
-00032e10: 706c 655f 6368 6f72 645f 656c 656d 656e  ple_chord_elemen
-00032e20: 7473 2023 2323 0a0a 2020 2020 2320 2020  ts ###..    #   
-00032e30: 2064 6566 2070 5f73 696d 706c 655f 6368   def p_simple_ch
-00032e40: 6f72 645f 656c 656d 656e 7473 5f5f 6669  ord_elements__fi
-00032e50: 6775 7265 5f73 7065 635f 5f6f 7074 696f  gure_spec__optio
-00032e60: 6e61 6c5f 6e6f 7465 6d6f 6465 5f64 7572  nal_notemode_dur
-00032e70: 6174 696f 6e28 7365 6c66 2c20 7029 3a0a  ation(self, p):.
-00032e80: 2020 2020 2320 2020 2020 2020 2027 7369      #        'si
-00032e90: 6d70 6c65 5f63 686f 7264 5f65 6c65 6d65  mple_chord_eleme
-00032ea0: 6e74 7320 3a20 6669 6775 7265 5f73 7065  nts : figure_spe
-00032eb0: 6320 6f70 7469 6f6e 616c 5f6e 6f74 656d  c optional_notem
-00032ec0: 6f64 655f 6475 7261 7469 6f6e 270a 2020  ode_duration'.  
-00032ed0: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
-00032ee0: 3d20 5379 6e74 6178 4e6f 6465 2827 7369  = SyntaxNode('si
-00032ef0: 6d70 6c65 5f63 686f 7264 5f65 6c65 6d65  mple_chord_eleme
-00032f00: 6e74 7327 2c20 705b 313a 5d29 0a0a 2020  nts', p[1:])..  
-00032f10: 2020 2320 2020 2064 6566 2070 5f73 696d    #    def p_sim
-00032f20: 706c 655f 6368 6f72 645f 656c 656d 656e  ple_chord_elemen
-00032f30: 7473 5f5f 6e65 775f 6368 6f72 6428 7365  ts__new_chord(se
-00032f40: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
-00032f50: 2020 2020 2027 7369 6d70 6c65 5f63 686f       'simple_cho
-00032f60: 7264 5f65 6c65 6d65 6e74 7320 3a20 6e65  rd_elements : ne
-00032f70: 775f 6368 6f72 6427 0a20 2020 2023 2020  w_chord'.    #  
-00032f80: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
-00032f90: 7461 784e 6f64 6528 2773 696d 706c 655f  taxNode('simple_
-00032fa0: 6368 6f72 645f 656c 656d 656e 7473 272c  chord_elements',
-00032fb0: 2070 5b31 3a5d 290a 0a20 2020 2064 6566   p[1:])..    def
-00032fc0: 2070 5f73 696d 706c 655f 6368 6f72 645f   p_simple_chord_
-00032fd0: 656c 656d 656e 7473 5f5f 7369 6d70 6c65  elements__simple
-00032fe0: 5f65 6c65 6d65 6e74 2873 656c 662c 2070  _element(self, p
-00032ff0: 293a 0a20 2020 2020 2020 2022 7369 6d70  ):.        "simp
-00033000: 6c65 5f63 686f 7264 5f65 6c65 6d65 6e74  le_chord_element
-00033010: 7320 3a20 7369 6d70 6c65 5f65 6c65 6d65  s : simple_eleme
-00033020: 6e74 220a 2020 2020 2020 2020 705b 305d  nt".        p[0]
-00033030: 203d 2070 5b31 5d0a 0a20 2020 2023 2323   = p[1]..    ###
-00033040: 2073 696d 706c 655f 656c 656d 656e 7420   simple_element 
-00033050: 2323 230a 0a20 2020 2023 2020 2020 6465  ###..    #    de
-00033060: 6620 705f 7369 6d70 6c65 5f65 6c65 6d65  f p_simple_eleme
-00033070: 6e74 5f5f 4452 554d 5f50 4954 4348 5f5f  nt__DRUM_PITCH__
-00033080: 6f70 7469 6f6e 616c 5f6e 6f74 656d 6f64  optional_notemod
-00033090: 655f 6475 7261 7469 6f6e 2873 656c 662c  e_duration(self,
-000330a0: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-000330b0: 2020 2773 696d 706c 655f 656c 656d 656e    'simple_elemen
-000330c0: 7420 3a20 4452 554d 5f50 4954 4348 206f  t : DRUM_PITCH o
-000330d0: 7074 696f 6e61 6c5f 6e6f 7465 6d6f 6465  ptional_notemode
-000330e0: 5f64 7572 6174 696f 6e27 0a20 2020 2023  _duration'.    #
-000330f0: 2020 2020 2020 2020 6d65 7373 6167 6520          message 
-00033100: 3d20 2764 7275 6d20 7069 7463 6865 7320  = 'drum pitches 
-00033110: 6e6f 7420 7375 7070 6f72 7465 642e 270a  not supported.'.
-00033120: 2020 2020 2320 2020 2020 2020 2072 6169      #        rai
-00033130: 7365 2045 7863 6570 7469 6f6e 286d 6573  se Exception(mes
-00033140: 7361 6765 290a 0a20 2020 2064 6566 2070  sage)..    def p
-00033150: 5f73 696d 706c 655f 656c 656d 656e 745f  _simple_element_
-00033160: 5f52 4553 544e 414d 455f 5f6f 7074 696f  _RESTNAME__optio
-00033170: 6e61 6c5f 6e6f 7465 6d6f 6465 5f64 7572  nal_notemode_dur
-00033180: 6174 696f 6e28 7365 6c66 2c20 7029 3a0a  ation(self, p):.
-00033190: 2020 2020 2020 2020 2273 696d 706c 655f          "simple_
-000331a0: 656c 656d 656e 7420 3a20 5245 5354 4e41  element : RESTNA
-000331b0: 4d45 206f 7074 696f 6e61 6c5f 6e6f 7465  ME optional_note
-000331c0: 6d6f 6465 5f64 7572 6174 696f 6e22 0a20  mode_duration". 
-000331d0: 2020 2020 2020 2069 6620 705b 315d 203d         if p[1] =
-000331e0: 3d20 2272 223a 0a20 2020 2020 2020 2020  = "r":.         
-000331f0: 2020 2072 6573 7420 3d20 5f73 636f 7265     rest = _score
-00033200: 2e52 6573 7428 705b 325d 2e64 7572 6174  .Rest(p[2].durat
-00033210: 696f 6e29 0a20 2020 2020 2020 2065 6c73  ion).        els
-00033220: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00033230: 6573 7420 3d20 5f73 636f 7265 2e53 6b69  est = _score.Ski
-00033240: 7028 705b 325d 2e64 7572 6174 696f 6e29  p(p[2].duration)
-00033250: 0a20 2020 2020 2020 2069 6620 705b 325d  .        if p[2]
-00033260: 2e6d 756c 7469 706c 6965 7220 6973 206e  .multiplier is n
-00033270: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00033280: 2020 2020 206d 756c 7469 706c 6965 7220       multiplier 
-00033290: 3d20 5f64 7572 6174 696f 6e2e 4d75 6c74  = _duration.Mult
-000332a0: 6970 6c69 6572 2870 5b32 5d2e 6d75 6c74  iplier(p[2].mult
-000332b0: 6970 6c69 6572 290a 2020 2020 2020 2020  iplier).        
-000332c0: 2020 2020 7265 7374 2e6d 756c 7469 706c      rest.multipl
-000332d0: 6965 7220 3d20 6d75 6c74 6970 6c69 6572  ier = multiplier
-000332e0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-000332f0: 7265 7374 0a0a 2020 2020 6465 6620 705f  rest..    def p_
-00033300: 7369 6d70 6c65 5f65 6c65 6d65 6e74 5f5f  simple_element__
-00033310: 7069 7463 685f 5f65 7863 6c61 6d61 7469  pitch__exclamati
-00033320: 6f6e 735f 5f71 7565 7374 696f 6e73 5f5f  ons__questions__
-00033330: 6f63 7461 7665 5f63 6865 636b 5f5f 6f70  octave_check__op
-00033340: 7469 6f6e 616c 5f6e 6f74 656d 6f64 655f  tional_notemode_
-00033350: 6475 7261 7469 6f6e 5f5f 6f70 7469 6f6e  duration__option
-00033360: 616c 5f72 6573 7428 0a20 2020 2020 2020  al_rest(.       
-00033370: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
-00033380: 2020 2020 2020 2020 2273 696d 706c 655f          "simple_
-00033390: 656c 656d 656e 7420 3a20 7069 7463 6820  element : pitch 
-000333a0: 6578 636c 616d 6174 696f 6e73 2071 7565  exclamations que
-000333b0: 7374 696f 6e73 206f 6374 6176 655f 6368  stions octave_ch
-000333c0: 6563 6b20 6f70 7469 6f6e 616c 5f6e 6f74  eck optional_not
-000333d0: 656d 6f64 655f 6475 7261 7469 6f6e 206f  emode_duration o
-000333e0: 7074 696f 6e61 6c5f 7265 7374 220a 2020  ptional_rest".  
-000333f0: 2020 2020 2020 6966 206e 6f74 2070 5b36        if not p[6
-00033400: 5d3a 0a20 2020 2020 2020 2020 2020 206c  ]:.            l
-00033410: 6561 6620 3d20 5f73 636f 7265 2e4e 6f74  eaf = _score.Not
-00033420: 6528 705b 315d 2c20 705b 355d 2e64 7572  e(p[1], p[5].dur
-00033430: 6174 696f 6e29 0a20 2020 2020 2020 2020  ation).         
-00033440: 2020 206c 6561 662e 6e6f 7465 5f68 6561     leaf.note_hea
-00033450: 642e 6973 5f66 6f72 6365 6420 3d20 626f  d.is_forced = bo
-00033460: 6f6c 2870 5b32 5d29 0a20 2020 2020 2020  ol(p[2]).       
-00033470: 2020 2020 206c 6561 662e 6e6f 7465 5f68       leaf.note_h
-00033480: 6561 642e 6973 5f63 6175 7469 6f6e 6172  ead.is_cautionar
-00033490: 7920 3d20 626f 6f6c 2870 5b33 5d29 0a20  y = bool(p[3]). 
-000334a0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000334b0: 2020 2020 2020 2020 206c 6561 6620 3d20           leaf = 
-000334c0: 5f73 636f 7265 2e52 6573 7428 705b 355d  _score.Rest(p[5]
-000334d0: 2e64 7572 6174 696f 6e29 0a20 2020 2020  .duration).     
-000334e0: 2020 2069 6620 705b 355d 2e6d 756c 7469     if p[5].multi
-000334f0: 706c 6965 7220 6973 206e 6f74 204e 6f6e  plier is not Non
-00033500: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
-00033510: 756c 7469 706c 6965 7220 3d20 5f64 7572  ultiplier = _dur
-00033520: 6174 696f 6e2e 4d75 6c74 6970 6c69 6572  ation.Multiplier
-00033530: 2870 5b35 5d2e 6d75 6c74 6970 6c69 6572  (p[5].multiplier
-00033540: 290a 2020 2020 2020 2020 2020 2020 6c65  ).            le
-00033550: 6166 2e6d 756c 7469 706c 6965 7220 3d20  af.multiplier = 
-00033560: 6d75 6c74 6970 6c69 6572 0a20 2020 2020  multiplier.     
-00033570: 2020 2023 2054 4f44 4f3a 2068 616e 646c     # TODO: handl
-00033580: 6520 6578 636c 616d 6174 696f 6e73 2c20  e exclamations, 
-00033590: 7175 6573 7469 6f6e 732c 206f 6374 6176  questions, octav
-000335a0: 655f 6368 6563 6b0a 2020 2020 2020 2020  e_check.        
-000335b0: 705b 305d 203d 206c 6561 660a 0a20 2020  p[0] = leaf..   
-000335c0: 2023 2323 2073 696d 706c 655f 6d61 726b   ### simple_mark
-000335d0: 7570 2023 2323 0a0a 2020 2020 2320 2020  up ###..    #   
-000335e0: 2064 6566 2070 5f73 696d 706c 655f 6d61   def p_simple_ma
-000335f0: 726b 7570 5f5f 4c59 5249 435f 4d41 524b  rkup__LYRIC_MARK
-00033600: 5550 5f49 4445 4e54 4946 4945 5228 7365  UP_IDENTIFIER(se
-00033610: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
-00033620: 2020 2020 2027 7369 6d70 6c65 5f6d 6172       'simple_mar
-00033630: 6b75 7020 3a20 4c59 5249 435f 4d41 524b  kup : LYRIC_MARK
-00033640: 5550 5f49 4445 4e54 4946 4945 5227 0a20  UP_IDENTIFIER'. 
-00033650: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
-00033660: 203d 2053 796e 7461 784e 6f64 6528 2773   = SyntaxNode('s
-00033670: 696d 706c 655f 6d61 726b 7570 272c 2070  imple_markup', p
-00033680: 5b31 3a5d 290a 0a20 2020 2064 6566 2070  [1:])..    def p
-00033690: 5f73 696d 706c 655f 6d61 726b 7570 5f5f  _simple_markup__
-000336a0: 4d41 524b 5550 5f46 554e 4354 494f 4e5f  MARKUP_FUNCTION_
-000336b0: 5f6d 6172 6b75 705f 636f 6d6d 616e 645f  _markup_command_
-000336c0: 6261 7369 635f 6172 6775 6d65 6e74 7328  basic_arguments(
-000336d0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-000336e0: 2020 2273 696d 706c 655f 6d61 726b 7570    "simple_markup
-000336f0: 203a 204d 4152 4b55 505f 4655 4e43 5449   : MARKUP_FUNCTI
-00033700: 4f4e 206d 6172 6b75 705f 636f 6d6d 616e  ON markup_comman
-00033710: 645f 6261 7369 635f 6172 6775 6d65 6e74  d_basic_argument
-00033720: 7322 0a20 2020 2020 2020 2063 6f6d 6d61  s".        comma
-00033730: 6e64 203d 2070 5b31 5d5b 313a 5d0a 2020  nd = p[1][1:].  
-00033740: 2020 2020 2020 6172 6775 6d65 6e74 7320        arguments 
-00033750: 3d20 705b 325d 0a20 2020 2020 2020 2070  = p[2].        p
-00033760: 5b30 5d20 3d20 4d61 726b 7570 436f 6d6d  [0] = MarkupComm
-00033770: 616e 6428 636f 6d6d 616e 642c 202a 6172  and(command, *ar
-00033780: 6775 6d65 6e74 7329 0a0a 2020 2020 6465  guments)..    de
-00033790: 6620 705f 7369 6d70 6c65 5f6d 6172 6b75  f p_simple_marku
-000337a0: 705f 5f4d 4152 4b55 505f 4944 454e 5449  p__MARKUP_IDENTI
-000337b0: 4649 4552 2873 656c 662c 2070 293a 0a20  FIER(self, p):. 
-000337c0: 2020 2020 2020 2022 7369 6d70 6c65 5f6d         "simple_m
-000337d0: 6172 6b75 7020 3a20 4d41 524b 5550 5f49  arkup : MARKUP_I
-000337e0: 4445 4e54 4946 4945 5222 0a20 2020 2020  DENTIFIER".     
-000337f0: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-00033800: 2020 2020 6465 6620 705f 7369 6d70 6c65      def p_simple
-00033810: 5f6d 6172 6b75 705f 5f53 434f 5245 5f5f  _markup__SCORE__
-00033820: 4368 7231 3233 5f5f 7363 6f72 655f 626f  Chr123__score_bo
-00033830: 6479 5f5f 4368 7231 3235 2873 656c 662c  dy__Chr125(self,
-00033840: 2070 293a 0a20 2020 2020 2020 2022 7369   p):.        "si
-00033850: 6d70 6c65 5f6d 6172 6b75 7020 3a20 5343  mple_markup : SC
-00033860: 4f52 4520 277b 2720 7363 6f72 655f 626f  ORE '{' score_bo
-00033870: 6479 2027 7d27 220a 2020 2020 2020 2020  dy '}'".        
-00033880: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-00033890: 6528 2273 696d 706c 655f 6d61 726b 7570  e("simple_markup
-000338a0: 222c 2070 2e5f 5f67 6574 736c 6963 655f  ", p.__getslice_
-000338b0: 5f28 312c 204e 6f6e 6529 290a 0a20 2020  _(1, None))..   
-000338c0: 2064 6566 2070 5f73 696d 706c 655f 6d61   def p_simple_ma
-000338d0: 726b 7570 5f5f 5354 5249 4e47 2873 656c  rkup__STRING(sel
-000338e0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-000338f0: 7369 6d70 6c65 5f6d 6172 6b75 7020 3a20  simple_markup : 
-00033900: 5354 5249 4e47 220a 2020 2020 2020 2020  STRING".        
-00033910: 705b 305d 203d 2070 5b31 5d0a 0a20 2020  p[0] = p[1]..   
-00033920: 2064 6566 2070 5f73 696d 706c 655f 6d61   def p_simple_ma
-00033930: 726b 7570 5f5f 5354 5249 4e47 5f49 4445  rkup__STRING_IDE
-00033940: 4e54 4946 4945 5228 7365 6c66 2c20 7029  NTIFIER(self, p)
-00033950: 3a0a 2020 2020 2020 2020 2273 696d 706c  :.        "simpl
-00033960: 655f 6d61 726b 7570 203a 2053 5452 494e  e_markup : STRIN
-00033970: 475f 4944 454e 5449 4649 4552 220a 2020  G_IDENTIFIER".  
-00033980: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-00033990: 5d0a 0a20 2020 2023 2323 2073 696d 706c  ]..    ### simpl
-000339a0: 655f 6d75 7369 6320 2323 230a 0a20 2020  e_music ###..   
-000339b0: 2064 6566 2070 5f73 696d 706c 655f 6d75   def p_simple_mu
-000339c0: 7369 635f 5f63 6f6e 7465 7874 5f63 6861  sic__context_cha
-000339d0: 6e67 6528 7365 6c66 2c20 7029 3a0a 2020  nge(self, p):.  
-000339e0: 2020 2020 2020 2273 696d 706c 655f 6d75        "simple_mu
-000339f0: 7369 6320 3a20 636f 6e74 6578 745f 6368  sic : context_ch
-00033a00: 616e 6765 220a 2020 2020 2020 2020 705b  ange".        p[
-00033a10: 305d 203d 2070 5b31 5d0a 0a20 2020 2064  0] = p[1]..    d
-00033a20: 6566 2070 5f73 696d 706c 655f 6d75 7369  ef p_simple_musi
-00033a30: 635f 5f65 7665 6e74 5f63 686f 7264 2873  c__event_chord(s
-00033a40: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-00033a50: 2022 7369 6d70 6c65 5f6d 7573 6963 203a   "simple_music :
-00033a60: 2065 7665 6e74 5f63 686f 7264 220a 2020   event_chord".  
-00033a70: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-00033a80: 5d0a 0a20 2020 2064 6566 2070 5f73 696d  ]..    def p_sim
-00033a90: 706c 655f 6d75 7369 635f 5f6d 7573 6963  ple_music__music
-00033aa0: 5f70 726f 7065 7274 795f 6465 6628 7365  _property_def(se
-00033ab0: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-00033ac0: 2273 696d 706c 655f 6d75 7369 6320 3a20  "simple_music : 
-00033ad0: 6d75 7369 635f 7072 6f70 6572 7479 5f64  music_property_d
-00033ae0: 6566 220a 2020 2020 2020 2020 705b 305d  ef".        p[0]
-00033af0: 203d 2070 5b31 5d0a 0a20 2020 2023 2323   = p[1]..    ###
-00033b00: 2073 696d 706c 655f 6d75 7369 635f 7072   simple_music_pr
-00033b10: 6f70 6572 7479 5f64 6566 2023 2323 0a0a  operty_def ###..
-00033b20: 2020 2020 6465 6620 705f 7369 6d70 6c65      def p_simple
-00033b30: 5f6d 7573 6963 5f70 726f 7065 7274 795f  _music_property_
-00033b40: 6465 665f 5f4f 5645 5252 4944 455f 5f63  def__OVERRIDE__c
-00033b50: 6f6e 7465 7874 5f70 726f 705f 7370 6563  ontext_prop_spec
-00033b60: 5f5f 7072 6f70 6572 7479 5f70 6174 685f  __property_path_
-00033b70: 5f43 6872 3631 5f5f 7363 616c 6172 280a  _Chr61__scalar(.
-00033b80: 2020 2020 2020 2020 7365 6c66 2c20 700a          self, p.
-00033b90: 2020 2020 293a 0a20 2020 2020 2020 2022      ):.        "
-00033ba0: 7369 6d70 6c65 5f6d 7573 6963 5f70 726f  simple_music_pro
-00033bb0: 7065 7274 795f 6465 6620 3a20 4f56 4552  perty_def : OVER
-00033bc0: 5249 4445 2063 6f6e 7465 7874 5f70 726f  RIDE context_pro
-00033bd0: 705f 7370 6563 2070 726f 7065 7274 795f  p_spec property_
-00033be0: 7061 7468 2027 3d27 2073 6361 6c61 7222  path '=' scalar"
-00033bf0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
-00033c00: 4c69 6c79 506f 6e64 4576 656e 7428 0a20  LilyPondEvent(. 
-00033c10: 2020 2020 2020 2020 2020 2022 5072 6f70             "Prop
-00033c20: 6572 7479 4f70 6572 6174 696f 6e22 2c0a  ertyOperation",.
-00033c30: 2020 2020 2020 2020 2020 2020 6b65 7977              keyw
-00033c40: 6f72 643d 226f 7665 7272 6964 6522 2c0a  ord="override",.
-00033c50: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-00033c60: 6578 743d 705b 325d 2c0a 2020 2020 2020  ext=p[2],.      
-00033c70: 2020 2020 2020 7072 6f70 6572 7479 3d70        property=p
-00033c80: 5b33 5d2c 0a20 2020 2020 2020 2020 2020  [3],.           
-00033c90: 2076 616c 7565 3d70 5b35 5d2c 0a20 2020   value=p[5],.   
-00033ca0: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
-00033cb0: 705f 7369 6d70 6c65 5f6d 7573 6963 5f70  p_simple_music_p
-00033cc0: 726f 7065 7274 795f 6465 665f 5f52 4556  roperty_def__REV
-00033cd0: 4552 545f 5f63 6f6e 7465 7874 5f70 726f  ERT__context_pro
-00033ce0: 705f 7370 6563 5f5f 656d 6265 6464 6564  p_spec__embedded
-00033cf0: 5f73 636d 2873 656c 662c 2070 293a 0a20  _scm(self, p):. 
-00033d00: 2020 2020 2020 2022 7369 6d70 6c65 5f6d         "simple_m
-00033d10: 7573 6963 5f70 726f 7065 7274 795f 6465  usic_property_de
-00033d20: 6620 3a20 5245 5645 5254 2063 6f6e 7465  f : REVERT conte
-00033d30: 7874 5f70 726f 705f 7370 6563 2065 6d62  xt_prop_spec emb
-00033d40: 6564 6465 645f 7363 6d22 0a20 2020 2020  edded_scm".     
-00033d50: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
-00033d60: 4e6f 6465 2822 7369 6d70 6c65 5f6d 7573  Node("simple_mus
-00033d70: 6963 5f70 726f 7065 7274 795f 6465 6622  ic_property_def"
-00033d80: 2c20 702e 5f5f 6765 7473 6c69 6365 5f5f  , p.__getslice__
-00033d90: 2831 2c20 4e6f 6e65 2929 0a0a 2020 2020  (1, None))..    
-00033da0: 6465 6620 705f 7369 6d70 6c65 5f6d 7573  def p_simple_mus
-00033db0: 6963 5f70 726f 7065 7274 795f 6465 665f  ic_property_def_
-00033dc0: 5f53 4554 5f5f 636f 6e74 6578 745f 7072  _SET__context_pr
-00033dd0: 6f70 5f73 7065 635f 5f43 6872 3631 5f5f  op_spec__Chr61__
-00033de0: 7363 616c 6172 2873 656c 662c 2070 293a  scalar(self, p):
-00033df0: 0a20 2020 2020 2020 2022 7369 6d70 6c65  .        "simple
-00033e00: 5f6d 7573 6963 5f70 726f 7065 7274 795f  _music_property_
-00033e10: 6465 6620 3a20 5345 5420 636f 6e74 6578  def : SET contex
-00033e20: 745f 7072 6f70 5f73 7065 6320 273d 2720  t_prop_spec '=' 
-00033e30: 7363 616c 6172 220a 2020 2020 2020 2020  scalar".        
-00033e40: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-00033e50: 6528 2273 696d 706c 655f 6d75 7369 635f  e("simple_music_
-00033e60: 7072 6f70 6572 7479 5f64 6566 222c 2070  property_def", p
-00033e70: 2e5f 5f67 6574 736c 6963 655f 5f28 312c  .__getslice__(1,
-00033e80: 204e 6f6e 6529 290a 0a20 2020 2064 6566   None))..    def
-00033e90: 2070 5f73 696d 706c 655f 6d75 7369 635f   p_simple_music_
-00033ea0: 7072 6f70 6572 7479 5f64 6566 5f5f 554e  property_def__UN
-00033eb0: 5345 545f 5f63 6f6e 7465 7874 5f70 726f  SET__context_pro
-00033ec0: 705f 7370 6563 2873 656c 662c 2070 293a  p_spec(self, p):
-00033ed0: 0a20 2020 2020 2020 2022 7369 6d70 6c65  .        "simple
-00033ee0: 5f6d 7573 6963 5f70 726f 7065 7274 795f  _music_property_
-00033ef0: 6465 6620 3a20 554e 5345 5420 636f 6e74  def : UNSET cont
-00033f00: 6578 745f 7072 6f70 5f73 7065 6322 0a20  ext_prop_spec". 
-00033f10: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
-00033f20: 6e74 6178 4e6f 6465 2822 7369 6d70 6c65  ntaxNode("simple
-00033f30: 5f6d 7573 6963 5f70 726f 7065 7274 795f  _music_property_
-00033f40: 6465 6622 2c20 702e 5f5f 6765 7473 6c69  def", p.__getsli
-00033f50: 6365 5f5f 2831 2c20 4e6f 6e65 2929 0a0a  ce__(1, None))..
-00033f60: 2020 2020 2323 2320 7369 6d70 6c65 5f73      ### simple_s
-00033f70: 7472 696e 6720 2323 230a 0a20 2020 2023  tring ###..    #
-00033f80: 2020 2020 6465 6620 705f 7369 6d70 6c65      def p_simple
-00033f90: 5f73 7472 696e 675f 5f4c 5952 4943 535f  _string__LYRICS_
-00033fa0: 5354 5249 4e47 2873 656c 662c 2070 293a  STRING(self, p):
-00033fb0: 0a20 2020 2023 2020 2020 2020 2020 2773  .    #        's
-00033fc0: 696d 706c 655f 7374 7269 6e67 203a 204c  imple_string : L
-00033fd0: 5952 4943 535f 5354 5249 4e47 270a 2020  YRICS_STRING'.  
-00033fe0: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
-00033ff0: 3d20 705b 315d 0a0a 2020 2020 6465 6620  = p[1]..    def 
-00034000: 705f 7369 6d70 6c65 5f73 7472 696e 675f  p_simple_string_
-00034010: 5f53 5452 494e 4728 7365 6c66 2c20 7029  _STRING(self, p)
-00034020: 3a0a 2020 2020 2020 2020 2273 696d 706c  :.        "simpl
-00034030: 655f 7374 7269 6e67 203a 2053 5452 494e  e_string : STRIN
-00034040: 4722 0a20 2020 2020 2020 2070 5b30 5d20  G".        p[0] 
-00034050: 3d20 705b 315d 0a0a 2020 2020 6465 6620  = p[1]..    def 
-00034060: 705f 7369 6d70 6c65 5f73 7472 696e 675f  p_simple_string_
-00034070: 5f53 5452 494e 475f 4944 454e 5449 4649  _STRING_IDENTIFI
-00034080: 4552 2873 656c 662c 2070 293a 0a20 2020  ER(self, p):.   
-00034090: 2020 2020 2022 7369 6d70 6c65 5f73 7472       "simple_str
-000340a0: 696e 6720 3a20 5354 5249 4e47 5f49 4445  ing : STRING_IDE
-000340b0: 4e54 4946 4945 5222 0a20 2020 2020 2020  NTIFIER".       
-000340c0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-000340d0: 2020 2323 2320 7369 6d75 6c74 616e 656f    ### simultaneo
-000340e0: 7573 5f6d 7573 6963 2023 2323 0a0a 2020  us_music ###..  
-000340f0: 2020 6465 6620 705f 7369 6d75 6c74 616e    def p_simultan
-00034100: 656f 7573 5f6d 7573 6963 5f5f 444f 5542  eous_music__DOUB
-00034110: 4c45 5f41 4e47 4c45 5f4f 5045 4e5f 5f6d  LE_ANGLE_OPEN__m
-00034120: 7573 6963 5f6c 6973 745f 5f44 4f55 424c  usic_list__DOUBL
-00034130: 455f 414e 474c 455f 434c 4f53 4528 0a20  E_ANGLE_CLOSE(. 
-00034140: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
-00034150: 2020 2029 3a0a 2020 2020 2020 2020 2273     ):.        "s
-00034160: 696d 756c 7461 6e65 6f75 735f 6d75 7369  imultaneous_musi
-00034170: 6320 3a20 444f 5542 4c45 5f41 4e47 4c45  c : DOUBLE_ANGLE
-00034180: 5f4f 5045 4e20 6d75 7369 635f 6c69 7374  _OPEN music_list
-00034190: 2044 4f55 424c 455f 414e 474c 455f 434c   DOUBLE_ANGLE_CL
-000341a0: 4f53 4522 0a20 2020 2020 2020 2070 5b30  OSE".        p[0
-000341b0: 5d20 3d20 7365 6c66 2e63 6c69 656e 742e  ] = self.client.
-000341c0: 5f63 6f6e 7374 7275 6374 5f73 696d 756c  _construct_simul
-000341d0: 7461 6e65 6f75 735f 6d75 7369 6328 705b  taneous_music(p[
-000341e0: 325d 290a 0a20 2020 2064 6566 2070 5f73  2])..    def p_s
-000341f0: 696d 756c 7461 6e65 6f75 735f 6d75 7369  imultaneous_musi
-00034200: 635f 5f53 494d 554c 5441 4e45 4f55 535f  c__SIMULTANEOUS_
-00034210: 5f62 7261 6365 645f 6d75 7369 635f 6c69  _braced_music_li
-00034220: 7374 2873 656c 662c 2070 293a 0a20 2020  st(self, p):.   
-00034230: 2020 2020 2022 7369 6d75 6c74 616e 656f       "simultaneo
-00034240: 7573 5f6d 7573 6963 203a 2053 494d 554c  us_music : SIMUL
-00034250: 5441 4e45 4f55 5320 6272 6163 6564 5f6d  TANEOUS braced_m
-00034260: 7573 6963 5f6c 6973 7422 0a20 2020 2020  usic_list".     
-00034270: 2020 2070 5b30 5d20 3d20 7365 6c66 2e63     p[0] = self.c
-00034280: 6c69 656e 742e 5f63 6f6e 7374 7275 6374  lient._construct
-00034290: 5f73 696d 756c 7461 6e65 6f75 735f 6d75  _simultaneous_mu
-000342a0: 7369 6328 705b 325d 290a 0a20 2020 2023  sic(p[2])..    #
-000342b0: 2323 2073 7465 6e6f 5f64 7572 6174 696f  ## steno_duratio
-000342c0: 6e20 2323 230a 0a20 2020 2064 6566 2070  n ###..    def p
-000342d0: 5f73 7465 6e6f 5f64 7572 6174 696f 6e5f  _steno_duration_
-000342e0: 5f44 5552 4154 494f 4e5f 4944 454e 5449  _DURATION_IDENTI
-000342f0: 4649 4552 5f5f 646f 7473 2873 656c 662c  FIER__dots(self,
-00034300: 2070 293a 0a20 2020 2020 2020 2022 7374   p):.        "st
-00034310: 656e 6f5f 6475 7261 7469 6f6e 203a 2044  eno_duration : D
-00034320: 5552 4154 494f 4e5f 4944 454e 5449 4649  URATION_IDENTIFI
-00034330: 4552 2064 6f74 7322 0a20 2020 2020 2020  ER dots".       
-00034340: 2064 6f74 7320 3d20 705b 325d 2e76 616c   dots = p[2].val
-00034350: 7565 0a20 2020 2020 2020 2064 7572 6174  ue.        durat
-00034360: 696f 6e20 3d20 705b 315d 2e64 7572 6174  ion = p[1].durat
-00034370: 696f 6e0a 2020 2020 2020 2020 6d75 6c74  ion.        mult
-00034380: 6970 6c69 6572 203d 2070 5b31 5d2e 6d75  iplier = p[1].mu
-00034390: 6c74 6970 6c69 6572 0a20 2020 2020 2020  ltiplier.       
-000343a0: 2069 6620 646f 7473 3a0a 2020 2020 2020   if dots:.      
-000343b0: 2020 2020 2020 6475 7261 7469 6f6e 203d        duration =
-000343c0: 2064 7572 6174 696f 6e2e 6c69 6c79 706f   duration.lilypo
-000343d0: 6e64 5f64 7572 6174 696f 6e5f 7374 7269  nd_duration_stri
-000343e0: 6e67 0a20 2020 2020 2020 2020 2020 2064  ng.            d
-000343f0: 7572 6174 696f 6e20 2b3d 2022 2e22 202a  uration += "." *
-00034400: 2064 6f74 730a 2020 2020 2020 2020 2020   dots.          
-00034410: 2020 6475 7261 7469 6f6e 203d 205f 6475    duration = _du
-00034420: 7261 7469 6f6e 2e44 7572 6174 696f 6e2e  ration.Duration.
-00034430: 6672 6f6d 5f6c 696c 7970 6f6e 645f 6475  from_lilypond_du
-00034440: 7261 7469 6f6e 5f73 7472 696e 6728 6475  ration_string(du
-00034450: 7261 7469 6f6e 290a 2020 2020 2020 2020  ration).        
-00034460: 705b 305d 203d 204c 696c 7950 6f6e 6444  p[0] = LilyPondD
-00034470: 7572 6174 696f 6e28 6475 7261 7469 6f6e  uration(duration
-00034480: 2c20 6d75 6c74 6970 6c69 6572 290a 0a20  , multiplier).. 
-00034490: 2020 2064 6566 2070 5f73 7465 6e6f 5f64     def p_steno_d
-000344a0: 7572 6174 696f 6e5f 5f62 6172 655f 756e  uration__bare_un
-000344b0: 7369 676e 6564 5f5f 646f 7473 2873 656c  signed__dots(sel
-000344c0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-000344d0: 7374 656e 6f5f 6475 7261 7469 6f6e 203a  steno_duration :
-000344e0: 2062 6172 655f 756e 7369 676e 6564 2064   bare_unsigned d
-000344f0: 6f74 7322 0a20 2020 2020 2020 2061 7373  ots".        ass
-00034500: 6572 7420 5f64 7572 6174 696f 6e2e 4475  ert _duration.Du
-00034510: 7261 7469 6f6e 2e69 735f 746f 6b65 6e28  ration.is_token(
-00034520: 705b 315d 290a 2020 2020 2020 2020 646f  p[1]).        do
-00034530: 7473 203d 2070 5b32 5d2e 7661 6c75 650a  ts = p[2].value.
-00034540: 2020 2020 2020 2020 746f 6b65 6e20 3d20          token = 
-00034550: 7374 7228 705b 315d 2920 2b20 222e 2220  str(p[1]) + "." 
-00034560: 2a20 646f 7473 0a20 2020 2020 2020 2064  * dots.        d
-00034570: 7572 6174 696f 6e20 3d20 5f64 7572 6174  uration = _durat
-00034580: 696f 6e2e 4475 7261 7469 6f6e 2e66 726f  ion.Duration.fro
-00034590: 6d5f 6c69 6c79 706f 6e64 5f64 7572 6174  m_lilypond_durat
-000345a0: 696f 6e5f 7374 7269 6e67 2874 6f6b 656e  ion_string(token
-000345b0: 290a 2020 2020 2020 2020 705b 305d 203d  ).        p[0] =
-000345c0: 204c 696c 7950 6f6e 6444 7572 6174 696f   LilyPondDuratio
-000345d0: 6e28 6475 7261 7469 6f6e 2c20 4e6f 6e65  n(duration, None
-000345e0: 290a 0a20 2020 2023 2323 2073 7465 6e6f  )..    ### steno
-000345f0: 5f70 6974 6368 2023 2323 0a0a 2020 2020  _pitch ###..    
-00034600: 6465 6620 705f 7374 656e 6f5f 7069 7463  def p_steno_pitc
-00034610: 685f 5f4e 4f54 454e 414d 455f 5049 5443  h__NOTENAME_PITC
-00034620: 4828 7365 6c66 2c20 7029 3a0a 2020 2020  H(self, p):.    
-00034630: 2020 2020 2273 7465 6e6f 5f70 6974 6368      "steno_pitch
-00034640: 203a 204e 4f54 454e 414d 455f 5049 5443   : NOTENAME_PITC
-00034650: 4822 0a20 2020 2020 2020 2069 6620 6973  H".        if is
-00034660: 696e 7374 616e 6365 2870 5b31 5d2c 205f  instance(p[1], _
-00034670: 7069 7463 682e 4e61 6d65 6450 6974 6368  pitch.NamedPitch
-00034680: 436c 6173 7329 3a0a 2020 2020 2020 2020  Class):.        
-00034690: 2020 2020 705b 305d 203d 205f 7069 7463      p[0] = _pitc
-000346a0: 682e 4e61 6d65 6450 6974 6368 2870 5b31  h.NamedPitch(p[1
-000346b0: 5d2e 6e61 6d65 290a 2020 2020 2020 2020  ].name).        
-000346c0: 656c 6966 2070 5b31 5d20 696e 205f 6c79  elif p[1] in _ly
-000346d0: 636f 6e73 742e 6472 756d 733a 0a20 2020  const.drums:.   
-000346e0: 2020 2020 2020 2020 2070 5b30 5d20 3d20           p[0] = 
-000346f0: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
-00034700: 7374 656e 6f5f 7069 7463 685f 5f4e 4f54  steno_pitch__NOT
-00034710: 454e 414d 455f 5049 5443 485f 5f73 7562  ENAME_PITCH__sub
-00034720: 5f71 756f 7465 7328 7365 6c66 2c20 7029  _quotes(self, p)
-00034730: 3a0a 2020 2020 2020 2020 2273 7465 6e6f  :.        "steno
-00034740: 5f70 6974 6368 203a 204e 4f54 454e 414d  _pitch : NOTENAM
-00034750: 455f 5049 5443 4820 7375 625f 7175 6f74  E_PITCH sub_quot
-00034760: 6573 220a 2020 2020 2020 2020 705b 305d  es".        p[0]
-00034770: 203d 205f 7069 7463 682e 4e61 6d65 6450   = _pitch.NamedP
-00034780: 6974 6368 2870 5b31 5d2e 6e61 6d65 202b  itch(p[1].name +
-00034790: 2022 2c22 202a 2070 5b32 5d29 0a0a 2020   "," * p[2])..  
-000347a0: 2020 6465 6620 705f 7374 656e 6f5f 7069    def p_steno_pi
-000347b0: 7463 685f 5f4e 4f54 454e 414d 455f 5049  tch__NOTENAME_PI
-000347c0: 5443 485f 5f73 7570 5f71 756f 7465 7328  TCH__sup_quotes(
-000347d0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-000347e0: 2020 2273 7465 6e6f 5f70 6974 6368 203a    "steno_pitch :
-000347f0: 204e 4f54 454e 414d 455f 5049 5443 4820   NOTENAME_PITCH 
-00034800: 7375 705f 7175 6f74 6573 220a 2020 2020  sup_quotes".    
-00034810: 2020 2020 705b 305d 203d 205f 7069 7463      p[0] = _pitc
-00034820: 682e 4e61 6d65 6450 6974 6368 2870 5b31  h.NamedPitch(p[1
-00034830: 5d2e 6e61 6d65 202b 2022 2722 202a 2070  ].name + "'" * p
-00034840: 5b32 5d29 0a0a 2020 2020 2323 2320 7374  [2])..    ### st
-00034850: 656e 6f5f 746f 6e69 635f 7069 7463 6820  eno_tonic_pitch 
-00034860: 2323 230a 0a20 2020 2064 6566 2070 5f73  ###..    def p_s
-00034870: 7465 6e6f 5f74 6f6e 6963 5f70 6974 6368  teno_tonic_pitch
-00034880: 5f5f 544f 4e49 434e 414d 455f 5049 5443  __TONICNAME_PITC
-00034890: 4828 7365 6c66 2c20 7029 3a0a 2020 2020  H(self, p):.    
-000348a0: 2020 2020 2273 7465 6e6f 5f74 6f6e 6963      "steno_tonic
-000348b0: 5f70 6974 6368 203a 2054 4f4e 4943 4e41  _pitch : TONICNA
-000348c0: 4d45 5f50 4954 4348 220a 2020 2020 2020  ME_PITCH".      
-000348d0: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-000348e0: 6f64 6528 2273 7465 6e6f 5f74 6f6e 6963  ode("steno_tonic
-000348f0: 5f70 6974 6368 222c 2070 2e5f 5f67 6574  _pitch", p.__get
-00034900: 736c 6963 655f 5f28 312c 204e 6f6e 6529  slice__(1, None)
-00034910: 290a 0a20 2020 2064 6566 2070 5f73 7465  )..    def p_ste
-00034920: 6e6f 5f74 6f6e 6963 5f70 6974 6368 5f5f  no_tonic_pitch__
-00034930: 544f 4e49 434e 414d 455f 5049 5443 485f  TONICNAME_PITCH_
-00034940: 5f73 7562 5f71 756f 7465 7328 7365 6c66  _sub_quotes(self
-00034950: 2c20 7029 3a0a 2020 2020 2020 2020 2273  , p):.        "s
-00034960: 7465 6e6f 5f74 6f6e 6963 5f70 6974 6368  teno_tonic_pitch
-00034970: 203a 2054 4f4e 4943 4e41 4d45 5f50 4954   : TONICNAME_PIT
-00034980: 4348 2073 7562 5f71 756f 7465 7322 0a20  CH sub_quotes". 
-00034990: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
-000349a0: 6e74 6178 4e6f 6465 2822 7374 656e 6f5f  ntaxNode("steno_
-000349b0: 746f 6e69 635f 7069 7463 6822 2c20 702e  tonic_pitch", p.
-000349c0: 5f5f 6765 7473 6c69 6365 5f5f 2831 2c20  __getslice__(1, 
-000349d0: 4e6f 6e65 2929 0a0a 2020 2020 6465 6620  None))..    def 
-000349e0: 705f 7374 656e 6f5f 746f 6e69 635f 7069  p_steno_tonic_pi
-000349f0: 7463 685f 5f54 4f4e 4943 4e41 4d45 5f50  tch__TONICNAME_P
-00034a00: 4954 4348 5f5f 7375 705f 7175 6f74 6573  ITCH__sup_quotes
-00034a10: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
-00034a20: 2020 2022 7374 656e 6f5f 746f 6e69 635f     "steno_tonic_
-00034a30: 7069 7463 6820 3a20 544f 4e49 434e 414d  pitch : TONICNAM
-00034a40: 455f 5049 5443 4820 7375 705f 7175 6f74  E_PITCH sup_quot
-00034a50: 6573 220a 2020 2020 2020 2020 705b 305d  es".        p[0]
-00034a60: 203d 2053 796e 7461 784e 6f64 6528 2273   = SyntaxNode("s
-00034a70: 7465 6e6f 5f74 6f6e 6963 5f70 6974 6368  teno_tonic_pitch
-00034a80: 222c 2070 2e5f 5f67 6574 736c 6963 655f  ", p.__getslice_
-00034a90: 5f28 312c 204e 6f6e 6529 290a 0a20 2020  _(1, None))..   
-00034aa0: 2023 2323 2073 7465 705f 6e75 6d62 6572   ### step_number
-00034ab0: 2023 2323 0a0a 2020 2020 2320 2020 2064   ###..    #    d
-00034ac0: 6566 2070 5f73 7465 705f 6e75 6d62 6572  ef p_step_number
-00034ad0: 5f5f 6261 7265 5f75 6e73 6967 6e65 6428  __bare_unsigned(
-00034ae0: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
-00034af0: 2020 2020 2020 2027 7374 6570 5f6e 756d         'step_num
-00034b00: 6265 7220 3a20 6261 7265 5f75 6e73 6967  ber : bare_unsig
-00034b10: 6e65 6427 0a20 2020 2023 2020 2020 2020  ned'.    #      
-00034b20: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
-00034b30: 6f64 6528 2773 7465 705f 6e75 6d62 6572  ode('step_number
-00034b40: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
-00034b50: 2020 2020 6465 6620 705f 7374 6570 5f6e      def p_step_n
-00034b60: 756d 6265 725f 5f62 6172 655f 756e 7369  umber__bare_unsi
-00034b70: 676e 6564 5f5f 4348 4f52 445f 4d49 4e55  gned__CHORD_MINU
-00034b80: 5328 7365 6c66 2c20 7029 3a0a 2020 2020  S(self, p):.    
-00034b90: 2320 2020 2020 2020 2027 7374 6570 5f6e  #        'step_n
-00034ba0: 756d 6265 7220 3a20 6261 7265 5f75 6e73  umber : bare_uns
-00034bb0: 6967 6e65 6420 4348 4f52 445f 4d49 4e55  igned CHORD_MINU
-00034bc0: 5327 0a20 2020 2023 2020 2020 2020 2020  S'.    #        
-00034bd0: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-00034be0: 6528 2773 7465 705f 6e75 6d62 6572 272c  e('step_number',
-00034bf0: 2070 5b31 3a5d 290a 0a20 2020 2023 2020   p[1:])..    #  
-00034c00: 2020 6465 6620 705f 7374 6570 5f6e 756d    def p_step_num
-00034c10: 6265 725f 5f62 6172 655f 756e 7369 676e  ber__bare_unsign
-00034c20: 6564 5f5f 4368 7234 3328 7365 6c66 2c20  ed__Chr43(self, 
-00034c30: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
-00034c40: 2022 7374 6570 5f6e 756d 6265 7220 3a20   "step_number : 
-00034c50: 6261 7265 5f75 6e73 6967 6e65 6420 272b  bare_unsigned '+
-00034c60: 2722 0a20 2020 2023 2020 2020 2020 2020  '".    #        
-00034c70: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
-00034c80: 6528 2773 7465 705f 6e75 6d62 6572 272c  e('step_number',
-00034c90: 2070 5b31 3a5d 290a 0a20 2020 2023 2323   p[1:])..    ###
-00034ca0: 2073 7465 705f 6e75 6d62 6572 7320 2323   step_numbers ##
-00034cb0: 230a 0a20 2020 2023 2020 2020 6465 6620  #..    #    def 
-00034cc0: 705f 7374 6570 5f6e 756d 6265 7273 5f5f  p_step_numbers__
-00034cd0: 7374 6570 5f6e 756d 6265 7228 7365 6c66  step_number(self
-00034ce0: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
-00034cf0: 2020 2027 7374 6570 5f6e 756d 6265 7273     'step_numbers
-00034d00: 203a 2073 7465 705f 6e75 6d62 6572 270a   : step_number'.
-00034d10: 2020 2020 2320 2020 2020 2020 2070 5b30      #        p[0
-00034d20: 5d20 3d20 5379 6e74 6178 4e6f 6465 2827  ] = SyntaxNode('
-00034d30: 7374 6570 5f6e 756d 6265 7273 272c 2070  step_numbers', p
-00034d40: 5b31 3a5d 290a 0a20 2020 2023 2020 2020  [1:])..    #    
-00034d50: 6465 6620 705f 7374 6570 5f6e 756d 6265  def p_step_numbe
-00034d60: 7273 5f5f 7374 6570 5f6e 756d 6265 7273  rs__step_numbers
-00034d70: 5f5f 4368 7234 365f 5f73 7465 705f 6e75  __Chr46__step_nu
-00034d80: 6d62 6572 2873 656c 662c 2070 293a 0a20  mber(self, p):. 
-00034d90: 2020 2023 2020 2020 2020 2020 2273 7465     #        "ste
-00034da0: 705f 6e75 6d62 6572 7320 3a20 7374 6570  p_numbers : step
-00034db0: 5f6e 756d 6265 7273 2027 2e27 2073 7465  _numbers '.' ste
-00034dc0: 705f 6e75 6d62 6572 220a 2020 2020 2320  p_number".    # 
-00034dd0: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
-00034de0: 6e74 6178 4e6f 6465 2827 7374 6570 5f6e  ntaxNode('step_n
-00034df0: 756d 6265 7273 272c 2070 5b31 3a5d 290a  umbers', p[1:]).
-00034e00: 0a20 2020 2023 2323 2073 7472 696e 6720  .    ### string 
-00034e10: 2323 230a 0a20 2020 2064 6566 2070 5f73  ###..    def p_s
-00034e20: 7472 696e 675f 5f53 5452 494e 4728 7365  tring__STRING(se
-00034e30: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-00034e40: 2273 7472 696e 6720 3a20 5354 5249 4e47  "string : STRING
-00034e50: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00034e60: 2070 5b31 5d0a 0a20 2020 2064 6566 2070   p[1]..    def p
-00034e70: 5f73 7472 696e 675f 5f53 5452 494e 475f  _string__STRING_
-00034e80: 4944 454e 5449 4649 4552 2873 656c 662c  IDENTIFIER(self,
-00034e90: 2070 293a 0a20 2020 2020 2020 2022 7374   p):.        "st
-00034ea0: 7269 6e67 203a 2053 5452 494e 475f 4944  ring : STRING_ID
-00034eb0: 454e 5449 4649 4552 220a 2020 2020 2020  ENTIFIER".      
-00034ec0: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
-00034ed0: 2020 2064 6566 2070 5f73 7472 696e 675f     def p_string_
-00034ee0: 5f73 7472 696e 675f 5f43 6872 3433 5f5f  _string__Chr43__
-00034ef0: 7374 7269 6e67 2873 656c 662c 2070 293a  string(self, p):
-00034f00: 0a20 2020 2020 2020 2022 7374 7269 6e67  .        "string
-00034f10: 203a 2073 7472 696e 6720 272b 2720 7374   : string '+' st
-00034f20: 7269 6e67 220a 2020 2020 2020 2020 705b  ring".        p[
-00034f30: 305d 203d 2070 5b31 5d20 2b20 705b 335d  0] = p[1] + p[3]
-00034f40: 0a0a 2020 2020 2323 2320 7374 7269 6e67  ..    ### string
-00034f50: 5f6e 756d 6265 725f 6576 656e 7420 2323  _number_event ##
-00034f60: 230a 0a20 2020 2064 6566 2070 5f73 7472  #..    def p_str
-00034f70: 696e 675f 6e75 6d62 6572 5f65 7665 6e74  ing_number_event
-00034f80: 5f5f 455f 554e 5349 474e 4544 2873 656c  __E_UNSIGNED(sel
-00034f90: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-00034fa0: 7374 7269 6e67 5f6e 756d 6265 725f 6576  string_number_ev
-00034fb0: 656e 7420 3a20 455f 554e 5349 474e 4544  ent : E_UNSIGNED
-00034fc0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00034fd0: 2053 796e 7461 784e 6f64 6528 2273 7472   SyntaxNode("str
-00034fe0: 696e 675f 6e75 6d62 6572 5f65 7665 6e74  ing_number_event
-00034ff0: 222c 2070 5b31 3a5d 290a 0a20 2020 2023  ", p[1:])..    #
-00035000: 2323 2073 7562 5f71 756f 7465 7320 2323  ## sub_quotes ##
-00035010: 230a 0a20 2020 2064 6566 2070 5f73 7562  #..    def p_sub
-00035020: 5f71 756f 7465 735f 5f43 6872 3434 2873  _quotes__Chr44(s
-00035030: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-00035040: 2022 7375 625f 7175 6f74 6573 203a 2027   "sub_quotes : '
-00035050: 2c27 220a 2020 2020 2020 2020 705b 305d  ,'".        p[0]
-00035060: 203d 2031 0a0a 2020 2020 6465 6620 705f   = 1..    def p_
-00035070: 7375 625f 7175 6f74 6573 5f5f 7375 625f  sub_quotes__sub_
-00035080: 7175 6f74 6573 5f5f 4368 7234 3428 7365  quotes__Chr44(se
-00035090: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-000350a0: 2273 7562 5f71 756f 7465 7320 3a20 7375  "sub_quotes : su
-000350b0: 625f 7175 6f74 6573 2027 2c27 220a 2020  b_quotes ','".  
-000350c0: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-000350d0: 5d20 2b20 310a 0a20 2020 2023 2323 2073  ] + 1..    ### s
-000350e0: 7570 5f71 756f 7465 7320 2323 230a 0a20  up_quotes ###.. 
-000350f0: 2020 2064 6566 2070 5f73 7570 5f71 756f     def p_sup_quo
-00035100: 7465 735f 5f43 6872 3339 2873 656c 662c  tes__Chr39(self,
-00035110: 2070 293a 0a20 2020 2020 2020 2022 7375   p):.        "su
-00035120: 705f 7175 6f74 6573 203a 2027 5c5c 2727  p_quotes : '\\''
-00035130: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
-00035140: 2031 0a0a 2020 2020 6465 6620 705f 7375   1..    def p_su
-00035150: 705f 7175 6f74 6573 5f5f 7375 705f 7175  p_quotes__sup_qu
-00035160: 6f74 6573 5f5f 4368 7233 3928 7365 6c66  otes__Chr39(self
-00035170: 2c20 7029 3a0a 2020 2020 2020 2020 2273  , p):.        "s
-00035180: 7570 5f71 756f 7465 7320 3a20 7375 705f  up_quotes : sup_
-00035190: 7175 6f74 6573 2027 5c5c 2727 220a 2020  quotes '\\''".  
-000351a0: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-000351b0: 5d20 2b20 310a 0a20 2020 2023 2323 2074  ] + 1..    ### t
-000351c0: 656d 706f 5f65 7665 6e74 2023 2323 0a0a  empo_event ###..
-000351d0: 2020 2020 6465 6620 705f 7465 6d70 6f5f      def p_tempo_
-000351e0: 6576 656e 745f 5f54 454d 504f 5f5f 7363  event__TEMPO__sc
-000351f0: 616c 6172 2873 656c 662c 2070 293a 0a20  alar(self, p):. 
-00035200: 2020 2020 2020 2022 7465 6d70 6f5f 6576         "tempo_ev
-00035210: 656e 7420 3a20 5445 4d50 4f20 7363 616c  ent : TEMPO scal
-00035220: 6172 220a 2020 2020 2020 2020 705b 305d  ar".        p[0]
-00035230: 203d 205f 696e 6469 6361 746f 7273 2e4d   = _indicators.M
-00035240: 6574 726f 6e6f 6d65 4d61 726b 2874 6578  etronomeMark(tex
-00035250: 7475 616c 5f69 6e64 6963 6174 696f 6e3d  tual_indication=
-00035260: 7374 7228 705b 325d 2929 0a0a 2020 2020  str(p[2]))..    
-00035270: 6465 6620 705f 7465 6d70 6f5f 6576 656e  def p_tempo_even
-00035280: 745f 5f54 454d 504f 5f5f 7363 616c 6172  t__TEMPO__scalar
-00035290: 5f63 6c6f 7365 645f 5f73 7465 6e6f 5f64  _closed__steno_d
-000352a0: 7572 6174 696f 6e5f 5f43 6872 3631 5f5f  uration__Chr61__
-000352b0: 7465 6d70 6f5f 7261 6e67 6528 0a20 2020  tempo_range(.   
-000352c0: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
-000352d0: 2029 3a0a 2020 2020 2020 2020 2274 656d   ):.        "tem
-000352e0: 706f 5f65 7665 6e74 203a 2054 454d 504f  po_event : TEMPO
-000352f0: 2073 6361 6c61 725f 636c 6f73 6564 2073   scalar_closed s
-00035300: 7465 6e6f 5f64 7572 6174 696f 6e20 273d  teno_duration '=
-00035310: 2720 7465 6d70 6f5f 7261 6e67 6522 0a20  ' tempo_range". 
-00035320: 2020 2020 2020 2070 5b30 5d20 3d20 5f69         p[0] = _i
-00035330: 6e64 6963 6174 6f72 732e 4d65 7472 6f6e  ndicators.Metron
-00035340: 6f6d 654d 6172 6b28 0a20 2020 2020 2020  omeMark(.       
-00035350: 2020 2020 2072 6566 6572 656e 6365 5f64       reference_d
-00035360: 7572 6174 696f 6e3d 705b 335d 2e64 7572  uration=p[3].dur
-00035370: 6174 696f 6e2c 0a20 2020 2020 2020 2020  ation,.         
-00035380: 2020 2075 6e69 7473 5f70 6572 5f6d 696e     units_per_min
-00035390: 7574 653d 705b 355d 2c0a 2020 2020 2020  ute=p[5],.      
-000353a0: 2020 2020 2020 7465 7874 7561 6c5f 696e        textual_in
-000353b0: 6469 6361 7469 6f6e 3d73 7472 2870 5b32  dication=str(p[2
-000353c0: 5d29 2c0a 2020 2020 2020 2020 290a 0a20  ]),.        ).. 
-000353d0: 2020 2064 6566 2070 5f74 656d 706f 5f65     def p_tempo_e
-000353e0: 7665 6e74 5f5f 5445 4d50 4f5f 5f73 7465  vent__TEMPO__ste
-000353f0: 6e6f 5f64 7572 6174 696f 6e5f 5f43 6872  no_duration__Chr
-00035400: 3631 5f5f 7465 6d70 6f5f 7261 6e67 6528  61__tempo_range(
-00035410: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00035420: 2020 2274 656d 706f 5f65 7665 6e74 203a    "tempo_event :
-00035430: 2054 454d 504f 2073 7465 6e6f 5f64 7572   TEMPO steno_dur
-00035440: 6174 696f 6e20 273d 2720 7465 6d70 6f5f  ation '=' tempo_
-00035450: 7261 6e67 6522 0a20 2020 2020 2020 2070  range".        p
-00035460: 5b30 5d20 3d20 5f69 6e64 6963 6174 6f72  [0] = _indicator
-00035470: 732e 4d65 7472 6f6e 6f6d 654d 6172 6b28  s.MetronomeMark(
-00035480: 0a20 2020 2020 2020 2020 2020 2072 6566  .            ref
-00035490: 6572 656e 6365 5f64 7572 6174 696f 6e3d  erence_duration=
-000354a0: 705b 325d 2e64 7572 6174 696f 6e2c 2075  p[2].duration, u
-000354b0: 6e69 7473 5f70 6572 5f6d 696e 7574 653d  nits_per_minute=
-000354c0: 705b 345d 0a20 2020 2020 2020 2029 0a0a  p[4].        )..
-000354d0: 2020 2020 2323 2320 7465 6d70 6f5f 7261      ### tempo_ra
-000354e0: 6e67 6520 2323 230a 0a20 2020 2064 6566  nge ###..    def
-000354f0: 2070 5f74 656d 706f 5f72 616e 6765 5f5f   p_tempo_range__
-00035500: 6261 7265 5f75 6e73 6967 6e65 6428 7365  bare_unsigned(se
-00035510: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-00035520: 2274 656d 706f 5f72 616e 6765 203a 2062  "tempo_range : b
-00035530: 6172 655f 756e 7369 676e 6564 220a 2020  are_unsigned".  
-00035540: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
-00035550: 5d0a 0a20 2020 2064 6566 2070 5f74 656d  ]..    def p_tem
-00035560: 706f 5f72 616e 6765 5f5f 6261 7265 5f75  po_range__bare_u
-00035570: 6e73 6967 6e65 645f 5f43 6872 3435 5f5f  nsigned__Chr45__
-00035580: 6261 7265 5f75 6e73 6967 6e65 6428 7365  bare_unsigned(se
-00035590: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
-000355a0: 2274 656d 706f 5f72 616e 6765 203a 2062  "tempo_range : b
-000355b0: 6172 655f 756e 7369 676e 6564 2027 2d27  are_unsigned '-'
-000355c0: 2062 6172 655f 756e 7369 676e 6564 220a   bare_unsigned".
-000355d0: 2020 2020 2020 2020 705b 305d 203d 2028          p[0] = (
-000355e0: 705b 315d 2c20 705b 335d 290a 0a20 2020  p[1], p[3])..   
-000355f0: 2023 2323 2074 6f70 6c65 7665 6c5f 6578   ### toplevel_ex
-00035600: 7072 6573 7369 6f6e 2023 2323 0a0a 2020  pression ###..  
-00035610: 2020 2320 2020 2064 6566 2070 5f74 6f70    #    def p_top
-00035620: 6c65 7665 6c5f 6578 7072 6573 7369 6f6e  level_expression
-00035630: 5f5f 626f 6f6b 5f62 6c6f 636b 2873 656c  __book_block(sel
-00035640: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
-00035650: 2020 2020 2774 6f70 6c65 7665 6c5f 6578      'toplevel_ex
-00035660: 7072 6573 7369 6f6e 203a 2062 6f6f 6b5f  pression : book_
-00035670: 626c 6f63 6b27 0a20 2020 2023 2020 2020  block'.    #    
-00035680: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
-00035690: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
-000356a0: 746f 706c 6576 656c 5f65 7870 7265 7373  toplevel_express
-000356b0: 696f 6e5f 5f62 6f6f 6b70 6172 745f 626c  ion__bookpart_bl
-000356c0: 6f63 6b28 7365 6c66 2c20 7029 3a0a 2020  ock(self, p):.  
-000356d0: 2020 2320 2020 2020 2020 2027 746f 706c    #        'topl
-000356e0: 6576 656c 5f65 7870 7265 7373 696f 6e20  evel_expression 
-000356f0: 3a20 626f 6f6b 7061 7274 5f62 6c6f 636b  : bookpart_block
-00035700: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
-00035710: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
-00035720: 6465 6620 705f 746f 706c 6576 656c 5f65  def p_toplevel_e
-00035730: 7870 7265 7373 696f 6e5f 5f63 6f6d 706f  xpression__compo
-00035740: 7369 7465 5f6d 7573 6963 2873 656c 662c  site_music(self,
-00035750: 2070 293a 0a20 2020 2020 2020 2022 746f   p):.        "to
-00035760: 706c 6576 656c 5f65 7870 7265 7373 696f  plevel_expressio
-00035770: 6e20 3a20 636f 6d70 6f73 6974 655f 6d75  n : composite_mu
-00035780: 7369 6322 0a20 2020 2020 2020 2070 5b30  sic".        p[0
-00035790: 5d20 3d20 705b 315d 0a0a 2020 2020 6465  ] = p[1]..    de
-000357a0: 6620 705f 746f 706c 6576 656c 5f65 7870  f p_toplevel_exp
-000357b0: 7265 7373 696f 6e5f 5f66 756c 6c5f 6d61  ression__full_ma
-000357c0: 726b 7570 2873 656c 662c 2070 293a 0a20  rkup(self, p):. 
-000357d0: 2020 2020 2020 2022 746f 706c 6576 656c         "toplevel
-000357e0: 5f65 7870 7265 7373 696f 6e20 3a20 6675  _expression : fu
-000357f0: 6c6c 5f6d 6172 6b75 7022 0a20 2020 2020  ll_markup".     
-00035800: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-00035810: 2020 2020 6465 6620 705f 746f 706c 6576      def p_toplev
-00035820: 656c 5f65 7870 7265 7373 696f 6e5f 5f66  el_expression__f
-00035830: 756c 6c5f 6d61 726b 7570 5f6c 6973 7428  ull_markup_list(
-00035840: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00035850: 2020 2274 6f70 6c65 7665 6c5f 6578 7072    "toplevel_expr
-00035860: 6573 7369 6f6e 203a 2066 756c 6c5f 6d61  ession : full_ma
-00035870: 726b 7570 5f6c 6973 7422 0a20 2020 2020  rkup_list".     
-00035880: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
-00035890: 2020 2020 6465 6620 705f 746f 706c 6576      def p_toplev
-000358a0: 656c 5f65 7870 7265 7373 696f 6e5f 5f6c  el_expression__l
-000358b0: 696c 7970 6f6e 645f 6865 6164 6572 2873  ilypond_header(s
-000358c0: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
-000358d0: 2022 746f 706c 6576 656c 5f65 7870 7265   "toplevel_expre
-000358e0: 7373 696f 6e20 3a20 6c69 6c79 706f 6e64  ssion : lilypond
-000358f0: 5f68 6561 6465 7222 0a20 2020 2020 2020  _header".       
-00035900: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
-00035910: 2020 6465 6620 705f 746f 706c 6576 656c    def p_toplevel
-00035920: 5f65 7870 7265 7373 696f 6e5f 5f6f 7574  _expression__out
-00035930: 7075 745f 6465 6628 7365 6c66 2c20 7029  put_def(self, p)
-00035940: 3a0a 2020 2020 2020 2020 2274 6f70 6c65  :.        "tople
-00035950: 7665 6c5f 6578 7072 6573 7369 6f6e 203a  vel_expression :
-00035960: 206f 7574 7075 745f 6465 6622 0a20 2020   output_def".   
-00035970: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
-00035980: 0a0a 2020 2020 6465 6620 705f 746f 706c  ..    def p_topl
-00035990: 6576 656c 5f65 7870 7265 7373 696f 6e5f  evel_expression_
-000359a0: 5f73 636f 7265 5f62 6c6f 636b 2873 656c  _score_block(sel
-000359b0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
-000359c0: 746f 706c 6576 656c 5f65 7870 7265 7373  toplevel_express
-000359d0: 696f 6e20 3a20 7363 6f72 655f 626c 6f63  ion : score_bloc
-000359e0: 6b22 0a20 2020 2020 2020 2070 5b30 5d20  k".        p[0] 
-000359f0: 3d20 705b 315d 0a0a 2020 2020 2323 2320  = p[1]..    ### 
-00035a00: 7472 656d 6f6c 6f5f 7479 7065 2023 2323  tremolo_type ###
-00035a10: 0a0a 2020 2020 6465 6620 705f 7472 656d  ..    def p_trem
-00035a20: 6f6c 6f5f 7479 7065 5f5f 4368 7235 3828  olo_type__Chr58(
-00035a30: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00035a40: 2020 2274 7265 6d6f 6c6f 5f74 7970 6520    "tremolo_type 
-00035a50: 3a20 273a 2722 0a20 2020 2020 2020 2070  : ':'".        p
-00035a60: 5b30 5d20 3d20 4e6f 6e65 0a0a 2020 2020  [0] = None..    
-00035a70: 6465 6620 705f 7472 656d 6f6c 6f5f 7479  def p_tremolo_ty
-00035a80: 7065 5f5f 4368 7235 385f 5f62 6172 655f  pe__Chr58__bare_
-00035a90: 756e 7369 676e 6564 2873 656c 662c 2070  unsigned(self, p
-00035aa0: 293a 0a20 2020 2020 2020 2022 7472 656d  ):.        "trem
-00035ab0: 6f6c 6f5f 7479 7065 203a 2027 3a27 2062  olo_type : ':' b
-00035ac0: 6172 655f 756e 7369 676e 6564 220a 2020  are_unsigned".  
-00035ad0: 2020 2020 2020 705b 305d 203d 205f 696e        p[0] = _in
-00035ae0: 6469 6361 746f 7273 2e53 7465 6d54 7265  dicators.StemTre
-00035af0: 6d6f 6c6f 2870 5b32 5d29 0a0a 2020 2020  molo(p[2])..    
-00035b00: 2323 2320 756e 7369 676e 6564 5f6e 756d  ### unsigned_num
-00035b10: 6265 7220 2323 230a 0a20 2020 2023 2020  ber ###..    #  
-00035b20: 2020 6465 6620 705f 756e 7369 676e 6564    def p_unsigned
-00035b30: 5f6e 756d 6265 725f 5f4e 554d 4245 525f  _number__NUMBER_
-00035b40: 4944 454e 5449 4649 4552 2873 656c 662c  IDENTIFIER(self,
-00035b50: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-00035b60: 2020 2775 6e73 6967 6e65 645f 6e75 6d62    'unsigned_numb
-00035b70: 6572 203a 204e 554d 4245 525f 4944 454e  er : NUMBER_IDEN
-00035b80: 5449 4649 4552 270a 2020 2020 2320 2020  TIFIER'.    #   
-00035b90: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
-00035ba0: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
-00035bb0: 5f75 6e73 6967 6e65 645f 6e75 6d62 6572  _unsigned_number
-00035bc0: 5f5f 554e 5349 474e 4544 2873 656c 662c  __UNSIGNED(self,
-00035bd0: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
-00035be0: 2020 2775 6e73 6967 6e65 645f 6e75 6d62    'unsigned_numb
-00035bf0: 6572 203a 2055 4e53 4947 4e45 4427 0a20  er : UNSIGNED'. 
-00035c00: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
-00035c10: 203d 2070 5b31 5d0a 0a20 2020 2023 2323   = p[1]..    ###
-00035c20: 2050 4c59 2065 7272 6f72 2023 2323 0a0a   PLY error ###..
-00035c30: 2020 2020 6465 6620 705f 6572 726f 7228      def p_error(
-00035c40: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
-00035c50: 2020 2320 7072 696e 7420 700a 2020 2020    # print p.    
-00035c60: 2020 2020 7261 6973 6520 5f65 7863 6570      raise _excep
-00035c70: 7469 6f6e 732e 4c69 6c79 506f 6e64 5061  tions.LilyPondPa
-00035c80: 7273 6572 4572 726f 7228 7029 0a0a 0a63  rserError(p)...c
-00035c90: 6c61 7373 2053 6571 7565 6e74 6961 6c4d  lass SequentialM
-00035ca0: 7573 6963 284d 7573 6963 293a 0a20 2020  usic(Music):.   
-00035cb0: 2022 2222 0a20 2020 2041 626a 6164 206d   """.    Abjad m
-00035cc0: 6f64 656c 206f 6620 7468 6520 4c69 6c79  odel of the Lily
-00035cd0: 506f 6e64 2041 5354 2073 6571 7565 6e74  Pond AST sequent
-00035ce0: 6961 6c20 6d75 7369 6320 6e6f 6465 2e0a  ial music node..
-00035cf0: 2020 2020 2222 220a 0a20 2020 205f 5f73      """..    __s
-00035d00: 6c6f 7473 5f5f 203d 2028 290a 0a20 2020  lots__ = ()..   
-00035d10: 2064 6566 2063 6f6e 7374 7275 6374 2873   def construct(s
-00035d20: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-00035d30: 220a 2020 2020 2020 2020 436f 6e73 7472  ".        Constr
-00035d40: 7563 7473 2073 6571 7565 6e74 6961 6c20  ucts sequential 
-00035d50: 6d75 7369 632e 0a0a 2020 2020 2020 2020  music...        
-00035d60: 5265 7475 726e 7320 4162 6a61 6420 636f  Returns Abjad co
-00035d70: 6e74 6169 6e65 722e 0a20 2020 2020 2020  ntainer..       
-00035d80: 2022 2222 0a20 2020 2020 2020 2063 6f6e   """.        con
-00035d90: 7461 696e 6572 203d 205f 7363 6f72 652e  tainer = _score.
-00035da0: 436f 6e74 6169 6e65 7228 290a 2020 2020  Container().    
-00035db0: 2020 2020 666f 7220 7820 696e 2073 656c      for x in sel
-00035dc0: 662e 6d75 7369 633a 0a20 2020 2020 2020  f.music:.       
-00035dd0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00035de0: 6365 2878 2c20 5f73 636f 7265 2e43 6f6d  ce(x, _score.Com
-00035df0: 706f 6e65 6e74 293a 0a20 2020 2020 2020  ponent):.       
-00035e00: 2020 2020 2020 2020 2063 6f6e 7461 696e           contain
-00035e10: 6572 2e61 7070 656e 6428 7829 0a20 2020  er.append(x).   
-00035e20: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
-00035e30: 696e 7374 616e 6365 2878 2c20 7479 7065  instance(x, type
-00035e40: 2873 656c 6629 293a 0a20 2020 2020 2020  (self)):.       
-00035e50: 2020 2020 2020 2020 2063 6f6e 7461 696e           contain
-00035e60: 6572 2e65 7874 656e 6428 782e 636f 6e73  er.extend(x.cons
-00035e70: 7472 7563 7428 2929 0a20 2020 2020 2020  truct()).       
-00035e80: 2072 6574 7572 6e20 636f 6e74 6169 6e65   return containe
-00035e90: 720a 0a0a 636c 6173 7320 5369 6d75 6c74  r...class Simult
-00035ea0: 616e 656f 7573 4d75 7369 6328 4d75 7369  aneousMusic(Musi
-00035eb0: 6329 3a0a 2020 2020 2222 220a 2020 2020  c):.    """.    
-00035ec0: 4162 6a61 6420 6d6f 6465 6c20 6f66 2074  Abjad model of t
-00035ed0: 6865 204c 696c 7950 6f6e 6420 4153 5420  he LilyPond AST 
-00035ee0: 7369 6d75 6c74 616e 656f 7573 206d 7573  simultaneous mus
-00035ef0: 6963 206e 6f64 652e 0a20 2020 2022 2222  ic node..    """
-00035f00: 0a0a 2020 2020 5f5f 736c 6f74 735f 5f20  ..    __slots__ 
-00035f10: 3d20 2829 0a0a 0a63 6c61 7373 2053 796e  = ()...class Syn
-00035f20: 7461 784e 6f64 653a 0a20 2020 2022 2222  taxNode:.    """
-00035f30: 0a20 2020 2041 206e 6f64 6520 696e 2061  .    A node in a
-00035f40: 6e20 6162 7374 7261 6374 2073 796e 7461  n abstract synta
-00035f50: 7820 7472 6565 2028 4153 5429 2e0a 0a20  x tree (AST)... 
-00035f60: 2020 204e 6f74 2063 6f6d 706f 7365 722d     Not composer-
-00035f70: 7361 6665 2e0a 0a20 2020 2055 7365 6420  safe...    Used 
-00035f80: 696e 7465 726e 616c 6c79 2062 7920 4c69  internally by Li
-00035f90: 6c79 506f 6e64 5061 7273 6572 2e0a 2020  lyPondParser..  
-00035fa0: 2020 2222 220a 0a20 2020 205f 5f73 6c6f    """..    __slo
-00035fb0: 7473 5f5f 203d 2028 2274 7970 6522 2c20  ts__ = ("type", 
-00035fc0: 2276 616c 7565 2229 0a0a 2020 2020 6465  "value")..    de
-00035fd0: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-00035fe0: 2074 7970 653d 4e6f 6e65 2c20 7661 6c75   type=None, valu
-00035ff0: 653d 4e6f 6e65 293a 0a20 2020 2020 2020  e=None):.       
-00036000: 2073 656c 662e 7479 7065 203d 2074 7970   self.type = typ
-00036010: 650a 2020 2020 2020 2020 7365 6c66 2e76  e.        self.v
-00036020: 616c 7565 203d 2076 616c 7565 0a0a 2020  alue = value..  
-00036030: 2020 6465 6620 5f5f 6765 7469 7465 6d5f    def __getitem_
-00036040: 5f28 7365 6c66 2c20 6172 6775 6d65 6e74  _(self, argument
-00036050: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-00036060: 2020 2020 2020 2047 6574 7320 6974 656d         Gets item
-00036070: 206f 7220 736c 6963 6520 6964 656e 7469   or slice identi
-00036080: 6669 6564 2062 7920 6060 6172 6775 6d65  fied by ``argume
-00036090: 6e74 6060 2e0a 0a20 2020 2020 2020 2052  nt``...        R
-000360a0: 6574 7572 6e73 2069 7465 6d20 6f72 2073  eturns item or s
-000360b0: 6c69 6365 2e0a 2020 2020 2020 2020 2222  lice..        ""
-000360c0: 220a 2020 2020 2020 2020 6966 2069 7369  ".        if isi
-000360d0: 6e73 7461 6e63 6528 7365 6c66 2e76 616c  nstance(self.val
-000360e0: 7565 2c20 6c69 7374 207c 2074 7570 6c65  ue, list | tuple
-000360f0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00036100: 6574 7572 6e20 7365 6c66 2e76 616c 7565  eturn self.value
-00036110: 2e5f 5f67 6574 6974 656d 5f5f 2861 7267  .__getitem__(arg
-00036120: 756d 656e 7429 0a20 2020 2020 2020 2072  ument).        r
-00036130: 6169 7365 2045 7863 6570 7469 6f6e 2866  aise Exception(f
-00036140: 2263 616e 206e 6f74 2067 6574 3a20 7b61  "can not get: {a
-00036150: 7267 756d 656e 7421 727d 2e22 290a 0a20  rgument!r}.").. 
-00036160: 2020 2064 6566 205f 5f6c 656e 5f5f 2873     def __len__(s
-00036170: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-00036180: 220a 2020 2020 2020 2020 4765 7473 206c  ".        Gets l
-00036190: 656e 6774 682e 0a20 2020 2020 2020 2022  ength..        "
-000361a0: 2222 0a20 2020 2020 2020 2069 6620 6973  "".        if is
-000361b0: 696e 7374 616e 6365 2873 656c 662e 7661  instance(self.va
-000361c0: 6c75 652c 206c 6973 7420 7c20 7475 706c  lue, list | tupl
-000361d0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-000361e0: 7265 7475 726e 206c 656e 2873 656c 662e  return len(self.
-000361f0: 7661 6c75 6529 0a20 2020 2020 2020 2072  value).        r
-00036200: 6169 7365 2045 7863 6570 7469 6f6e 2822  aise Exception("
-00036210: 7661 6c75 6520 6d75 7374 2062 6520 6c69  value must be li
-00036220: 7374 206f 7220 7475 706c 652e 2229 0a0a  st or tuple.")..
-00036230: 2020 2020 6465 6620 5f5f 7265 7072 5f5f      def __repr__
-00036240: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00036250: 2222 220a 2020 2020 2020 2020 4765 7473  """.        Gets
-00036260: 2072 6570 722e 0a20 2020 2020 2020 2022   repr..        "
-00036270: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
-00036280: 6e20 6622 7b74 7970 6528 7365 6c66 292e  n f"{type(self).
-00036290: 5f5f 6e61 6d65 5f5f 7d28 7b73 656c 662e  __name__}({self.
-000362a0: 7479 7065 7d2c 207b 7479 7065 2873 656c  type}, {type(sel
-000362b0: 662e 7661 6c75 6529 7d29 220a 0a20 2020  f.value)})"..   
-000362c0: 2064 6566 205f 666f 726d 6174 2873 656c   def _format(sel
-000362d0: 662c 206f 626a 2c20 696e 6465 6e74 3d30  f, obj, indent=0
-000362e0: 293a 0a20 2020 2020 2020 2073 7061 6365  ):.        space
-000362f0: 203d 2022 2e20 2022 202a 2069 6e64 656e   = ".  " * inden
-00036300: 740a 2020 2020 2020 2020 7265 7375 6c74  t.        result
-00036310: 203d 205b 5d0a 2020 2020 2020 2020 6966   = [].        if
-00036320: 2069 7369 6e73 7461 6e63 6528 6f62 6a2c   isinstance(obj,
-00036330: 2074 7970 6528 7365 6c66 2929 3a0a 2020   type(self)):.  
-00036340: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00036350: 6e73 7461 6e63 6528 6f62 6a2e 7661 6c75  nstance(obj.valu
-00036360: 652c 206c 6973 7420 7c20 7475 706c 6529  e, list | tuple)
-00036370: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00036380: 2020 7265 7375 6c74 2e61 7070 656e 6428    result.append(
-00036390: 6622 7b73 7061 6365 7d3c 7b6f 626a 2e74  f"{space}<{obj.t
-000363a0: 7970 657d 3e3a 205b 2229 0a20 2020 2020  ype}>: [").     
-000363b0: 2020 2020 2020 2020 2020 2066 6f72 2078             for x
-000363c0: 2069 6e20 6f62 6a2e 7661 6c75 653a 0a20   in obj.value:. 
-000363d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000363e0: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
-000363f0: 2873 656c 662e 5f66 6f72 6d61 7428 782c  (self._format(x,
-00036400: 2069 6e64 656e 7420 2b20 3129 290a 2020   indent + 1)).  
-00036410: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00036420: 7375 6c74 5b2d 315d 202b 3d20 2220 5d22  sult[-1] += " ]"
-00036430: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00036440: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00036450: 2020 2072 6573 756c 742e 6170 7065 6e64     result.append
-00036460: 2866 227b 7370 6163 657d 3c7b 6f62 6a2e  (f"{space}<{obj.
-00036470: 7479 7065 7d3e 3a20 7b6f 626a 2e76 616c  type}>: {obj.val
-00036480: 7565 2172 7d22 290a 2020 2020 2020 2020  ue!r}").        
-00036490: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-000364a0: 6f62 6a2c 2028 6c69 7374 2c20 7475 706c  obj, (list, tupl
-000364b0: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
-000364c0: 2072 6573 756c 742e 6170 7065 6e64 2866   result.append(f
-000364d0: 227b 7370 6163 657d 5b22 290a 2020 2020  "{space}[").    
-000364e0: 2020 2020 2020 2020 666f 7220 7820 696e          for x in
-000364f0: 206f 626a 3a0a 2020 2020 2020 2020 2020   obj:.          
-00036500: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
-00036510: 656e 6428 7365 6c66 2e5f 666f 726d 6174  end(self._format
-00036520: 2878 2c20 696e 6465 6e74 202b 2031 2929  (x, indent + 1))
-00036530: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00036540: 756c 745b 2d31 5d20 2b3d 2022 205d 220a  ult[-1] += " ]".
-00036550: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00036560: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00036570: 2e61 7070 656e 6428 6622 7b73 7061 6365  .append(f"{space
-00036580: 7d7b 6f62 6a21 727d 2229 0a20 2020 2020  }{obj!r}").     
-00036590: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-000365a0: 0a                                       .
+00016080: 2020 2020 2020 5f62 696e 642e 6174 7461        _bind.atta
+00016090: 6368 2869 6e64 6963 6174 6f72 2c20 7072  ch(indicator, pr
+000160a0: 6576 696f 7573 5f6c 6561 6629 0a20 2020  evious_leaf).   
+000160b0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+000160c0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000160d0: 2020 2020 2020 2066 6f72 2069 6e64 6963         for indic
+000160e0: 6174 6f72 2069 6e20 6170 706c 795f 6261  ator in apply_ba
+000160f0: 636b 7761 7264 3a0a 2020 2020 2020 2020  ckward:.        
+00016100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016110: 5f62 696e 642e 6174 7461 6368 2869 6e64  _bind.attach(ind
+00016120: 6963 6174 6f72 2c20 7829 0a20 2020 2020  icator, x).     
+00016130: 2020 2020 2020 2020 2020 2061 7070 6c79             apply
+00016140: 5f66 6f72 7761 7264 5b3a 5d20 3d20 5b5d  _forward[:] = []
+00016150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016160: 2061 7070 6c79 5f62 6163 6b77 6172 645b   apply_backward[
+00016170: 3a5d 203d 205b 5d0a 2020 2020 2020 2020  :] = [].        
+00016180: 2020 2020 2020 2020 7072 6576 696f 7573          previous
+00016190: 5f6c 6561 6620 3d20 780a 2020 2020 2020  _leaf = x.      
+000161a0: 2020 2020 2020 2020 2020 636f 6e74 6169            contai
+000161b0: 6e65 722e 6170 7065 6e64 2878 290a 2020  ner.append(x).  
+000161c0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000161d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000161e0: 6966 2069 7369 6e73 7461 6e63 6528 782c  if isinstance(x,
+000161f0: 205f 696e 6469 6361 746f 7273 2e42 6172   _indicators.Bar
+00016200: 4c69 6e65 293a 0a20 2020 2020 2020 2020  Line):.         
+00016210: 2020 2020 2020 2020 2020 2061 7070 6c79             apply
+00016220: 5f62 6163 6b77 6172 642e 6170 7065 6e64  _backward.append
+00016230: 2878 290a 2020 2020 2020 2020 2020 2020  (x).            
+00016240: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+00016250: 6e63 6528 782c 205f 696e 6469 6361 746f  nce(x, _indicato
+00016260: 7273 2e4c 696c 7950 6f6e 644c 6974 6572  rs.LilyPondLiter
+00016270: 616c 2920 616e 6420 782e 6172 6775 6d65  al) and x.argume
+00016280: 6e74 2069 6e20 280a 2020 2020 2020 2020  nt in (.        
+00016290: 2020 2020 2020 2020 2020 2020 7222 5c62              r"\b
+000162a0: 7265 616b 222c 0a20 2020 2020 2020 2020  reak",.         
+000162b0: 2020 2020 2020 2020 2020 2072 225c 6272             r"\br
+000162c0: 6561 7468 6522 2c0a 2020 2020 2020 2020  eathe",.        
+000162d0: 2020 2020 2020 2020 2020 2020 7222 5c70              r"\p
+000162e0: 6167 6542 7265 616b 222c 0a20 2020 2020  ageBreak",.     
+000162f0: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
+00016300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016310: 2020 6170 706c 795f 6261 636b 7761 7264    apply_backward
+00016320: 2e61 7070 656e 6428 7829 0a20 2020 2020  .append(x).     
+00016330: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00016340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016350: 2020 2020 2061 7070 6c79 5f66 6f72 7761       apply_forwa
+00016360: 7264 2e61 7070 656e 6428 7829 0a20 2020  rd.append(x).   
+00016370: 2020 2020 2023 2061 7474 6163 6820 7265       # attach re
+00016380: 6d61 696e 696e 6720 6576 656e 7473 2074  maining events t
+00016390: 6f20 6c61 7374 206c 6561 660a 2020 2020  o last leaf.    
+000163a0: 2020 2020 2320 6f72 2074 6f20 7468 6520      # or to the 
+000163b0: 636f 6e74 6169 6e65 7220 6974 7365 6c66  container itself
+000163c0: 2069 6620 7468 6572 6520 7765 7265 206e   if there were n
+000163d0: 6f20 6c65 6176 6573 0a20 2020 2020 2020  o leaves.       
+000163e0: 2069 6620 7072 6576 696f 7573 5f6c 6561   if previous_lea
+000163f0: 663a 0a20 2020 2020 2020 2020 2020 2066  f:.            f
+00016400: 6f72 2069 6e64 6963 6174 6f72 2069 6e20  or indicator in 
+00016410: 6170 706c 795f 666f 7277 6172 643a 0a20  apply_forward:. 
+00016420: 2020 2020 2020 2020 2020 2020 2020 205f                 _
+00016430: 6269 6e64 2e61 7474 6163 6828 696e 6469  bind.attach(indi
+00016440: 6361 746f 722c 2070 7265 7669 6f75 735f  cator, previous_
+00016450: 6c65 6166 290a 2020 2020 2020 2020 2020  leaf).          
+00016460: 2020 666f 7220 696e 6469 6361 746f 7220    for indicator 
+00016470: 696e 2061 7070 6c79 5f62 6163 6b77 6172  in apply_backwar
+00016480: 643a 0a20 2020 2020 2020 2020 2020 2020  d:.             
+00016490: 2020 205f 6269 6e64 2e61 7474 6163 6828     _bind.attach(
+000164a0: 696e 6469 6361 746f 722c 2070 7265 7669  indicator, previ
+000164b0: 6f75 735f 6c65 6166 290a 2020 2020 2020  ous_leaf).      
+000164c0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000164d0: 2020 2020 666f 7220 696e 6469 6361 746f      for indicato
+000164e0: 7220 696e 2061 7070 6c79 5f66 6f72 7761  r in apply_forwa
+000164f0: 7264 3a0a 2020 2020 2020 2020 2020 2020  rd:.            
+00016500: 2020 2020 5f62 696e 642e 6174 7461 6368      _bind.attach
+00016510: 2869 6e64 6963 6174 6f72 2c20 636f 6e74  (indicator, cont
+00016520: 6169 6e65 7229 0a20 2020 2020 2020 2020  ainer).         
+00016530: 2020 2066 6f72 2069 6e64 6963 6174 6f72     for indicator
+00016540: 2069 6e20 6170 706c 795f 6261 636b 7761   in apply_backwa
+00016550: 7264 3a0a 2020 2020 2020 2020 2020 2020  rd:.            
+00016560: 2020 2020 5f62 696e 642e 6174 7461 6368      _bind.attach
+00016570: 2869 6e64 6963 6174 6f72 2c20 636f 6e74  (indicator, cont
+00016580: 6169 6e65 7229 0a20 2020 2020 2020 2072  ainer).        r
+00016590: 6574 7572 6e20 636f 6e74 6169 6e65 720a  eturn container.
+000165a0: 0a20 2020 2064 6566 205f 636f 6e73 7472  .    def _constr
+000165b0: 7563 745f 7369 6d75 6c74 616e 656f 7573  uct_simultaneous
+000165c0: 5f6d 7573 6963 2873 656c 662c 206d 7573  _music(self, mus
+000165d0: 6963 293a 0a20 2020 2020 2020 2064 6566  ic):.        def
+000165e0: 2069 735f 7365 7061 7261 746f 7228 7829   is_separator(x)
+000165f0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00016600: 2069 7369 6e73 7461 6e63 6528 782c 204c   isinstance(x, L
+00016610: 696c 7950 6f6e 6445 7665 6e74 293a 0a20  ilyPondEvent):. 
+00016620: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00016630: 6620 782e 6e61 6d65 203d 3d20 2256 6f69  f x.name == "Voi
+00016640: 6365 5365 7061 7261 746f 7222 3a0a 2020  ceSeparator":.  
+00016650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016660: 2020 7265 7475 726e 2054 7275 650a 2020    return True.  
+00016670: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00016680: 2046 616c 7365 0a0a 2020 2020 2020 2020   False..        
+00016690: 636f 6e74 6169 6e65 7220 3d20 5f73 636f  container = _sco
+000166a0: 7265 2e43 6f6e 7461 696e 6572 2829 0a20  re.Container(). 
+000166b0: 2020 2020 2020 2063 6f6e 7461 696e 6572         container
+000166c0: 2e73 696d 756c 7461 6e65 6f75 7320 3d20  .simultaneous = 
+000166d0: 5472 7565 0a20 2020 2020 2020 2023 2063  True.        # c
+000166e0: 6865 636b 2066 6f72 2076 6f69 6365 2073  heck for voice s
+000166f0: 6570 6172 6174 6f72 730a 2020 2020 2020  eparators.      
+00016700: 2020 6772 6f75 7073 203d 205b 5d0a 2020    groups = [].  
+00016710: 2020 2020 2020 666f 7220 7661 6c75 652c        for value,
+00016720: 2067 726f 7570 2069 6e20 6974 6572 746f   group in iterto
+00016730: 6f6c 732e 6772 6f75 7062 7928 6d75 7369  ols.groupby(musi
+00016740: 632c 2069 735f 7365 7061 7261 746f 7229  c, is_separator)
+00016750: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00016760: 206e 6f74 2076 616c 7565 3a0a 2020 2020   not value:.    
+00016770: 2020 2020 2020 2020 2020 2020 6772 6f75              grou
+00016780: 7073 2e61 7070 656e 6428 6c69 7374 2867  ps.append(list(g
+00016790: 726f 7570 2929 0a20 2020 2020 2020 2023  roup)).        #
+000167a0: 2077 6974 686f 7574 2076 6f69 6365 2073   without voice s
+000167b0: 6570 6172 6174 6f72 730a 2020 2020 2020  eparators.      
+000167c0: 2020 6966 2031 203d 3d20 6c65 6e28 6772    if 1 == len(gr
+000167d0: 6f75 7073 293a 0a20 2020 2020 2020 2020  oups):.         
+000167e0: 2020 2023 2061 7373 6572 7420 616c 6c28     # assert all(
+000167f0: 6973 696e 7374 616e 6365 2878 2c20 5f73  isinstance(x, _s
+00016800: 636f 7265 2e43 6f6e 7465 7874 2920 666f  core.Context) fo
+00016810: 7220 7820 696e 2067 726f 7570 735b 305d  r x in groups[0]
+00016820: 290a 2020 2020 2020 2020 2020 2020 636f  ).            co
+00016830: 6e74 6169 6e65 722e 6578 7465 6e64 2867  ntainer.extend(g
+00016840: 726f 7570 735b 305d 290a 2020 2020 2020  roups[0]).      
+00016850: 2020 2320 7769 7468 2076 6f69 6365 2073    # with voice s
+00016860: 6570 6172 6174 6f72 730a 2020 2020 2020  eparators.      
+00016870: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00016880: 2020 2020 666f 7220 6772 6f75 7020 696e      for group in
+00016890: 2067 726f 7570 733a 0a20 2020 2020 2020   groups:.       
+000168a0: 2020 2020 2020 2020 2063 6f6e 7461 696e           contain
+000168b0: 6572 2e61 7070 656e 6428 0a20 2020 2020  er.append(.     
+000168c0: 2020 2020 2020 2020 2020 2020 2020 205f                 _
+000168d0: 7363 6f72 652e 566f 6963 6528 7365 6c66  score.Voice(self
+000168e0: 2e5f 636f 6e73 7472 7563 745f 7365 7175  ._construct_sequ
+000168f0: 656e 7469 616c 5f6d 7573 6963 2867 726f  ential_music(gro
+00016900: 7570 295b 3a5d 290a 2020 2020 2020 2020  up)[:]).        
+00016910: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00016920: 2020 7265 7475 726e 2063 6f6e 7461 696e    return contain
+00016930: 6572 0a0a 2020 2020 4063 6c61 7373 6d65  er..    @classme
+00016940: 7468 6f64 0a20 2020 2064 6566 205f 6765  thod.    def _ge
+00016950: 745f 7363 6865 6d65 5f70 7265 6469 6361  t_scheme_predica
+00016960: 7465 7328 636c 6173 735f 293a 0a20 2020  tes(class_):.   
+00016970: 2020 2020 2072 6574 7572 6e20 7b0a 2020       return {.  
+00016980: 2020 2020 2020 2020 2020 2262 6f6f 6c65            "boole
+00016990: 616e 3f22 3a20 6c61 6d62 6461 2078 3a20  an?": lambda x: 
+000169a0: 6973 696e 7374 616e 6365 2878 2c20 626f  isinstance(x, bo
+000169b0: 6f6c 292c 0a20 2020 2020 2020 2020 2020  ol),.           
+000169c0: 2022 6368 6561 702d 6c69 7374 3f22 3a20   "cheap-list?": 
+000169d0: 6c61 6d62 6461 2078 3a20 6973 696e 7374  lambda x: isinst
+000169e0: 616e 6365 2878 2c20 6c69 7374 207c 2074  ance(x, list | t
+000169f0: 7570 6c65 292c 0a20 2020 2020 2020 2020  uple),.         
+00016a00: 2020 2022 6368 6561 702d 6d61 726b 7570     "cheap-markup
+00016a10: 3f22 3a20 6c61 6d62 6461 2078 3a20 6973  ?": lambda x: is
+00016a20: 696e 7374 616e 6365 2878 2c20 4d61 726b  instance(x, Mark
+00016a30: 7570 436f 6d6d 616e 6429 2c0a 2020 2020  upCommand),.    
+00016a40: 2020 2020 2020 2020 2266 7261 6374 696f          "fractio
+00016a50: 6e3f 223a 206c 616d 6264 6120 783a 2069  n?": lambda x: i
+00016a60: 7369 6e73 7461 6e63 6528 782c 204c 696c  sinstance(x, Lil
+00016a70: 7950 6f6e 6446 7261 6374 696f 6e29 2c0a  yPondFraction),.
+00016a80: 2020 2020 2020 2020 2020 2020 2269 6e74              "int
+00016a90: 6567 6572 3f22 3a20 6c61 6d62 6461 2078  eger?": lambda x
+00016aa0: 3a20 6973 696e 7374 616e 6365 2878 2c20  : isinstance(x, 
+00016ab0: 696e 7429 2c0a 2020 2020 2020 2020 2020  int),.          
+00016ac0: 2020 226c 6973 743f 223a 206c 616d 6264    "list?": lambd
+00016ad0: 6120 783a 2069 7369 6e73 7461 6e63 6528  a x: isinstance(
+00016ae0: 782c 206c 6973 7420 7c20 7475 706c 6529  x, list | tuple)
+00016af0: 2c0a 2020 2020 2020 2020 2020 2020 226c  ,.            "l
+00016b00: 793a 6475 7261 7469 6f6e 3f22 3a20 6c61  y:duration?": la
+00016b10: 6d62 6461 2078 3a20 6973 696e 7374 616e  mbda x: isinstan
+00016b20: 6365 2878 2c20 4c69 6c79 506f 6e64 4475  ce(x, LilyPondDu
+00016b30: 7261 7469 6f6e 292c 0a20 2020 2020 2020  ration),.       
+00016b40: 2020 2020 2022 6c79 3a6d 7573 6963 3f22       "ly:music?"
+00016b50: 3a20 6c61 6d62 6461 2078 3a20 6973 696e  : lambda x: isin
+00016b60: 7374 616e 6365 2878 2c20 5f73 636f 7265  stance(x, _score
+00016b70: 2e43 6f6d 706f 6e65 6e74 292c 0a20 2020  .Component),.   
+00016b80: 2020 2020 2020 2020 2022 6c79 3a70 6974           "ly:pit
+00016b90: 6368 3f22 3a20 6c61 6d62 6461 2078 3a20  ch?": lambda x: 
+00016ba0: 6973 696e 7374 616e 6365 2878 2c20 5f70  isinstance(x, _p
+00016bb0: 6974 6368 2e4e 616d 6564 5069 7463 6829  itch.NamedPitch)
+00016bc0: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
+00016bd0: 6172 6b75 703f 223a 206c 616d 6264 6120  arkup?": lambda 
+00016be0: 783a 2069 7369 6e73 7461 6e63 6528 782c  x: isinstance(x,
+00016bf0: 204d 6172 6b75 7043 6f6d 6d61 6e64 292c   MarkupCommand),
+00016c00: 0a20 2020 2020 2020 2020 2020 2022 6e75  .            "nu
+00016c10: 6d62 6572 2d6c 6973 743f 223a 206c 616d  mber-list?": lam
+00016c20: 6264 6120 783a 2069 7369 6e73 7461 6e63  bda x: isinstanc
+00016c30: 6528 782c 206c 6973 7420 7c20 7475 706c  e(x, list | tupl
+00016c40: 6529 0a20 2020 2020 2020 2020 2020 2061  e).            a
+00016c50: 6e64 2061 6c6c 2869 7369 6e73 7461 6e63  nd all(isinstanc
+00016c60: 6528 792c 2069 6e74 207c 2066 6c6f 6174  e(y, int | float
+00016c70: 2920 666f 7220 7920 696e 2078 292c 0a20  ) for y in x),. 
+00016c80: 2020 2020 2020 2020 2020 2022 6e75 6d62             "numb
+00016c90: 6572 3f22 3a20 6c61 6d62 6461 2078 3a20  er?": lambda x: 
+00016ca0: 6973 696e 7374 616e 6365 2878 2c20 696e  isinstance(x, in
+00016cb0: 7420 7c20 666c 6f61 7429 2c0a 2020 2020  t | float),.    
+00016cc0: 2020 2020 2020 2020 2272 6561 6c3f 223a          "real?":
+00016cd0: 206c 616d 6264 6120 783a 2069 7369 6e73   lambda x: isins
+00016ce0: 7461 6e63 6528 782c 2069 6e74 207c 2066  tance(x, int | f
+00016cf0: 6c6f 6174 292c 0a20 2020 2020 2020 2020  loat),.         
+00016d00: 2020 2022 7374 7269 6e67 3f22 3a20 6c61     "string?": la
+00016d10: 6d62 6461 2078 3a20 6973 696e 7374 616e  mbda x: isinstan
+00016d20: 6365 2878 2c20 7374 7229 2c0a 2020 2020  ce(x, str),.    
+00016d30: 2020 2020 2020 2020 2276 6f69 643f 223a          "void?":
+00016d40: 206c 616d 6264 6120 783a 2069 7369 6e73   lambda x: isins
+00016d50: 7461 6e63 6528 782c 2074 7970 6528 4e6f  tance(x, type(No
+00016d60: 6e65 2929 2c0a 2020 2020 2020 2020 2020  ne)),.          
+00016d70: 2020 2320 7468 6520 666f 6c6c 6f77 696e    # the followin
+00016d80: 6720 7072 6564 6963 6174 6573 2068 6176  g predicates hav
+00016d90: 6520 6e6f 7420 7965 7420 6265 656e 2069  e not yet been i
+00016da0: 6d70 6c65 6d65 6e74 6564 2069 6e20 4162  mplemented in Ab
+00016db0: 6a61 640a 2020 2020 2020 2020 2020 2020  jad.            
+00016dc0: 2268 6173 682d 7461 626c 653f 223a 206c  "hash-table?": l
+00016dd0: 616d 6264 6120 783a 2054 7275 652c 0a20  ambda x: True,. 
+00016de0: 2020 2020 2020 2020 2020 2022 6c69 7374             "list
+00016df0: 2d6f 722d 7379 6d62 6f6c 3f22 3a20 6c61  -or-symbol?": la
+00016e00: 6d62 6461 2078 3a20 5472 7565 2c0a 2020  mbda x: True,.  
+00016e10: 2020 2020 2020 2020 2020 226c 793a 6469            "ly:di
+00016e20: 723f 223a 206c 616d 6264 6120 783a 2054  r?": lambda x: T
+00016e30: 7275 652c 0a20 2020 2020 2020 2020 2020  rue,.           
+00016e40: 2022 6c79 3a6d 6f6d 656e 743f 223a 206c   "ly:moment?": l
+00016e50: 616d 6264 6120 783a 2054 7275 652c 0a20  ambda x: True,. 
+00016e60: 2020 2020 2020 2020 2020 2022 6e75 6d62             "numb
+00016e70: 6572 2d6f 722d 7374 7269 6e67 3f22 3a20  er-or-string?": 
+00016e80: 6c61 6d62 6461 2078 3a20 5472 7565 2c0a  lambda x: True,.
+00016e90: 2020 2020 2020 2020 2020 2020 226e 756d              "num
+00016ea0: 6265 722d 7061 6972 3f22 3a20 6c61 6d62  ber-pair?": lamb
+00016eb0: 6461 2078 3a20 5472 7565 2c0a 2020 2020  da x: True,.    
+00016ec0: 2020 2020 2020 2020 226f 7074 696f 6e61          "optiona
+00016ed0: 6c3f 223a 206c 616d 6264 6120 783a 2054  l?": lambda x: T
+00016ee0: 7275 652c 0a20 2020 2020 2020 2020 2020  rue,.           
+00016ef0: 2022 7061 6972 3f22 3a20 6c61 6d62 6461   "pair?": lambda
+00016f00: 2078 3a20 5472 7565 2c0a 2020 2020 2020   x: True,.      
+00016f10: 2020 2020 2020 2270 726f 6365 6475 7265        "procedure
+00016f20: 3f22 3a20 6c61 6d62 6461 2078 3a20 5472  ?": lambda x: Tr
+00016f30: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+00016f40: 2273 6368 656d 653f 223a 206c 616d 6264  "scheme?": lambd
+00016f50: 6120 783a 2054 7275 652c 0a20 2020 2020  a x: True,.     
+00016f60: 2020 2020 2020 2022 7374 7269 6e67 2d6f         "string-o
+00016f70: 722d 7061 6972 3f22 3a20 6c61 6d62 6461  r-pair?": lambda
+00016f80: 2078 3a20 5472 7565 2c0a 2020 2020 2020   x: True,.      
+00016f90: 2020 2020 2020 2273 796d 626f 6c2d 6f72        "symbol-or
+00016fa0: 2d62 6f6f 6c65 616e 3f22 3a20 6c61 6d62  -boolean?": lamb
+00016fb0: 6461 2078 3a20 5472 7565 2c0a 2020 2020  da x: True,.    
+00016fc0: 2020 2020 2020 2020 2273 796d 626f 6c3f          "symbol?
+00016fd0: 223a 206c 616d 6264 6120 783a 2054 7275  ": lambda x: Tru
+00016fe0: 652c 0a20 2020 2020 2020 207d 0a0a 2020  e,.        }..  
+00016ff0: 2020 6465 6620 5f70 6f70 5f76 6172 6961    def _pop_varia
+00017000: 626c 655f 7363 6f70 6528 7365 6c66 293a  ble_scope(self):
+00017010: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00017020: 2e5f 7363 6f70 655f 7374 6163 6b3a 0a20  ._scope_stack:. 
+00017030: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00017040: 5f73 636f 7065 5f73 7461 636b 2e70 6f70  _scope_stack.pop
+00017050: 2829 0a0a 2020 2020 6465 6620 5f70 726f  ()..    def _pro
+00017060: 6365 7373 5f70 6f73 745f 6576 656e 7473  cess_post_events
+00017070: 2873 656c 662c 206c 6561 662c 2070 6f73  (self, leaf, pos
+00017080: 745f 6576 656e 7473 293a 0a20 2020 2020  t_events):.     
+00017090: 2020 2070 726f 746f 7479 7065 203d 2028     prototype = (
+000170a0: 0a20 2020 2020 2020 2020 2020 205f 6479  .            _dy
+000170b0: 6e61 6d69 632e 4479 6e61 6d69 632c 0a20  namic.Dynamic,. 
+000170c0: 2020 2020 2020 2020 2020 205f 696e 6469             _indi
+000170d0: 6361 746f 7273 2e41 7274 6963 756c 6174  cators.Articulat
+000170e0: 696f 6e2c 0a20 2020 2020 2020 2020 2020  ion,.           
+000170f0: 205f 696e 6469 6361 746f 7273 2e42 6172   _indicators.Bar
+00017100: 4c69 6e65 2c0a 2020 2020 2020 2020 2020  Line,.          
+00017110: 2020 5f69 6e64 6963 6174 6f72 732e 476c    _indicators.Gl
+00017120: 6973 7361 6e64 6f2c 0a20 2020 2020 2020  issando,.       
+00017130: 2020 2020 205f 696e 6469 6361 746f 7273       _indicators
+00017140: 2e4c 696c 7950 6f6e 644c 6974 6572 616c  .LilyPondLiteral
+00017150: 2c0a 2020 2020 2020 2020 2020 2020 5f69  ,.            _i
+00017160: 6e64 6963 6174 6f72 732e 4d61 726b 7570  ndicators.Markup
+00017170: 2c0a 2020 2020 2020 2020 2020 2020 5f69  ,.            _i
+00017180: 6e64 6963 6174 6f72 732e 5374 6172 7442  ndicators.StartB
+00017190: 6561 6d2c 0a20 2020 2020 2020 2020 2020  eam,.           
+000171a0: 205f 696e 6469 6361 746f 7273 2e53 7461   _indicators.Sta
+000171b0: 7274 4772 6f75 702c 0a20 2020 2020 2020  rtGroup,.       
+000171c0: 2020 2020 205f 696e 6469 6361 746f 7273       _indicators
+000171d0: 2e53 7461 7274 4861 6972 7069 6e2c 0a20  .StartHairpin,. 
+000171e0: 2020 2020 2020 2020 2020 205f 696e 6469             _indi
+000171f0: 6361 746f 7273 2e53 7461 7274 5068 7261  cators.StartPhra
+00017200: 7369 6e67 536c 7572 2c0a 2020 2020 2020  singSlur,.      
+00017210: 2020 2020 2020 5f69 6e64 6963 6174 6f72        _indicator
+00017220: 732e 5374 6172 7453 6c75 722c 0a20 2020  s.StartSlur,.   
+00017230: 2020 2020 2020 2020 205f 696e 6469 6361           _indica
+00017240: 746f 7273 2e53 7461 7274 5465 7874 5370  tors.StartTextSp
+00017250: 616e 2c0a 2020 2020 2020 2020 2020 2020  an,.            
+00017260: 5f69 6e64 6963 6174 6f72 732e 5374 6172  _indicators.Star
+00017270: 7454 7269 6c6c 5370 616e 2c0a 2020 2020  tTrillSpan,.    
+00017280: 2020 2020 2020 2020 5f69 6e64 6963 6174          _indicat
+00017290: 6f72 732e 5374 656d 5472 656d 6f6c 6f2c  ors.StemTremolo,
+000172a0: 0a20 2020 2020 2020 2020 2020 205f 696e  .            _in
+000172b0: 6469 6361 746f 7273 2e53 746f 7042 6561  dicators.StopBea
+000172c0: 6d2c 0a20 2020 2020 2020 2020 2020 205f  m,.            _
+000172d0: 696e 6469 6361 746f 7273 2e53 746f 7047  indicators.StopG
+000172e0: 726f 7570 2c0a 2020 2020 2020 2020 2020  roup,.          
+000172f0: 2020 5f69 6e64 6963 6174 6f72 732e 5374    _indicators.St
+00017300: 6f70 4861 6972 7069 6e2c 0a20 2020 2020  opHairpin,.     
+00017310: 2020 2020 2020 205f 696e 6469 6361 746f         _indicato
+00017320: 7273 2e53 746f 7050 6872 6173 696e 6753  rs.StopPhrasingS
+00017330: 6c75 722c 0a20 2020 2020 2020 2020 2020  lur,.           
+00017340: 205f 696e 6469 6361 746f 7273 2e53 746f   _indicators.Sto
+00017350: 7053 6c75 722c 0a20 2020 2020 2020 2020  pSlur,.         
+00017360: 2020 205f 696e 6469 6361 746f 7273 2e53     _indicators.S
+00017370: 746f 7054 6578 7453 7061 6e2c 0a20 2020  topTextSpan,.   
+00017380: 2020 2020 2020 2020 205f 696e 6469 6361           _indica
+00017390: 746f 7273 2e53 746f 7054 7269 6c6c 5370  tors.StopTrillSp
+000173a0: 616e 2c0a 2020 2020 2020 2020 2020 2020  an,.            
+000173b0: 5f69 6e64 6963 6174 6f72 732e 5469 652c  _indicators.Tie,
+000173c0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+000173d0: 2020 2066 6f72 2070 6f73 745f 6576 656e     for post_even
+000173e0: 7420 696e 2070 6f73 745f 6576 656e 7473  t in post_events
+000173f0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00017400: 2069 7369 6e73 7461 6e63 6528 706f 7374   isinstance(post
+00017410: 5f65 7665 6e74 2c20 7072 6f74 6f74 7970  _event, prototyp
+00017420: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+00017430: 2020 2020 5f62 696e 642e 6174 7461 6368      _bind.attach
+00017440: 2870 6f73 745f 6576 656e 742c 206c 6561  (post_event, lea
+00017450: 6629 0a20 2020 2020 2020 2020 2020 2069  f).            i
+00017460: 6620 6973 696e 7374 616e 6365 2870 6f73  f isinstance(pos
+00017470: 745f 6576 656e 742c 2074 7570 6c65 2920  t_event, tuple) 
+00017480: 616e 6420 6973 696e 7374 616e 6365 2870  and isinstance(p
+00017490: 6f73 745f 6576 656e 745b 305d 2c20 7072  ost_event[0], pr
+000174a0: 6f74 6f74 7970 6529 3a0a 2020 2020 2020  ototype):.      
+000174b0: 2020 2020 2020 2020 2020 696e 6469 6361            indica
+000174c0: 746f 722c 2064 6972 6563 7469 6f6e 203d  tor, direction =
+000174d0: 2070 6f73 745f 6576 656e 740a 2020 2020   post_event.    
+000174e0: 2020 2020 2020 2020 2020 2020 5f62 696e              _bin
+000174f0: 642e 6174 7461 6368 2869 6e64 6963 6174  d.attach(indicat
+00017500: 6f72 2c20 6c65 6166 2c20 6469 7265 6374  or, leaf, direct
+00017510: 696f 6e3d 6469 7265 6374 696f 6e29 0a0a  ion=direction)..
+00017520: 2020 2020 6465 6620 5f70 7573 685f 6578      def _push_ex
+00017530: 7472 615f 746f 6b65 6e28 7365 6c66 2c20  tra_token(self, 
+00017540: 746f 6b65 6e29 3a0a 2020 2020 2020 2020  token):.        
+00017550: 7365 6c66 2e5f 7061 7273 6572 2e6c 6f6f  self._parser.loo
+00017560: 6b61 6865 6164 7374 6163 6b2e 6170 7065  kaheadstack.appe
+00017570: 6e64 2874 6f6b 656e 290a 0a20 2020 2064  nd(token)..    d
+00017580: 6566 205f 7075 7368 5f76 6172 6961 626c  ef _push_variabl
+00017590: 655f 7363 6f70 6528 7365 6c66 293a 0a20  e_scope(self):. 
+000175a0: 2020 2020 2020 2073 656c 662e 5f73 636f         self._sco
+000175b0: 7065 5f73 7461 636b 2e61 7070 656e 6428  pe_stack.append(
+000175c0: 7b7d 290a 0a20 2020 2064 6566 205f 7265  {})..    def _re
+000175d0: 6c65 785f 6c6f 6f6b 6168 6561 6428 7365  lex_lookahead(se
+000175e0: 6c66 293a 0a20 2020 2020 2020 2069 6620  lf):.        if 
+000175f0: 6e6f 7420 7374 7228 7365 6c66 2e5f 7061  not str(self._pa
+00017600: 7273 6572 2e6c 6f6f 6b61 6865 6164 2920  rser.lookahead) 
+00017610: 3d3d 2022 2465 6e64 223a 0a20 2020 2020  == "$end":.     
+00017620: 2020 2020 2020 2064 6966 6665 7265 6e63         differenc
+00017630: 6520 3d20 7365 6c66 2e5f 7061 7273 6572  e = self._parser
+00017640: 2e6c 6f6f 6b61 6865 6164 2e6c 6578 706f  .lookahead.lexpo
+00017650: 7320 2d20 7365 6c66 2e5f 6c65 7865 722e  s - self._lexer.
+00017660: 6c65 7870 6f73 0a20 2020 2020 2020 2020  lexpos.         
+00017670: 2020 2073 656c 662e 5f6c 6578 6572 2e73     self._lexer.s
+00017680: 6b69 7028 6469 6666 6572 656e 6365 290a  kip(difference).
+00017690: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000176a0: 2e5f 7061 7273 6572 2e6c 6f6f 6b61 6865  ._parser.lookahe
+000176b0: 6164 203d 204e 6f6e 650a 0a20 2020 2064  ad = None..    d
+000176c0: 6566 205f 7265 7061 7273 655f 746f 6b65  ef _reparse_toke
+000176d0: 6e28 7365 6c66 2c20 7072 6564 6963 6174  n(self, predicat
+000176e0: 652c 2074 6f6b 656e 5f74 7970 652c 2074  e, token_type, t
+000176f0: 6f6b 656e 5f76 616c 7565 293a 0a20 2020  oken_value):.   
+00017700: 2020 2020 2069 6620 7365 6c66 2e5f 6465       if self._de
+00017710: 6275 673a 0a20 2020 2020 2020 2020 2020  bug:.           
+00017720: 2073 656c 662e 5f6c 6f67 6765 722e 696e   self._logger.in
+00017730: 666f 2822 4578 7472 6120 203a 2052 6570  fo("Extra  : Rep
+00017740: 6172 7369 6e67 2229 0a0a 2020 2020 2020  arsing")..      
+00017750: 2020 2320 7075 7368 2074 6865 2063 7572    # push the cur
+00017760: 7265 6e74 206c 6f6f 6b61 6865 6164 2062  rent lookahead b
+00017770: 6163 6b20 6f6e 746f 2074 6865 206c 6f6f  ack onto the loo
+00017780: 6b61 6865 6164 7374 6163 6b0a 2020 2020  kaheadstack.    
+00017790: 2020 2020 7365 6c66 2e5f 7075 7368 5f65      self._push_e
+000177a0: 7874 7261 5f74 6f6b 656e 2873 656c 662e  xtra_token(self.
+000177b0: 5f70 6172 7365 722e 6c6f 6f6b 6168 6561  _parser.lookahea
+000177c0: 6429 0a0a 2020 2020 2020 2020 746f 6b65  d)..        toke
+000177d0: 6e20 3d20 706c 792e 6c65 782e 4c65 7854  n = ply.lex.LexT
+000177e0: 6f6b 656e 2829 0a20 2020 2020 2020 2074  oken().        t
+000177f0: 6f6b 656e 2e74 7970 6520 3d20 746f 6b65  oken.type = toke
+00017800: 6e5f 7479 7065 0a20 2020 2020 2020 2074  n_type.        t
+00017810: 6f6b 656e 2e76 616c 7565 203d 2074 6f6b  oken.value = tok
+00017820: 656e 5f76 616c 7565 0a20 2020 2020 2020  en_value.       
+00017830: 2074 6f6b 656e 2e6c 6578 706f 7320 3d20   token.lexpos = 
+00017840: 300a 2020 2020 2020 2020 746f 6b65 6e2e  0.        token.
+00017850: 6c69 6e65 6e6f 203d 2030 0a20 2020 2020  lineno = 0.     
+00017860: 2020 2073 656c 662e 5f70 7573 685f 6578     self._push_ex
+00017870: 7472 615f 746f 6b65 6e28 746f 6b65 6e29  tra_token(token)
+00017880: 0a0a 2020 2020 2020 2020 7265 7061 7273  ..        repars
+00017890: 6520 3d20 706c 792e 6c65 782e 4c65 7854  e = ply.lex.LexT
+000178a0: 6f6b 656e 2829 0a20 2020 2020 2020 2072  oken().        r
+000178b0: 6570 6172 7365 2e74 7970 6520 3d20 2252  eparse.type = "R
+000178c0: 4550 4152 5345 220a 2020 2020 2020 2020  EPARSE".        
+000178d0: 7265 7061 7273 652e 7661 6c75 6520 3d20  reparse.value = 
+000178e0: 7072 6564 6963 6174 650a 2020 2020 2020  predicate.      
+000178f0: 2020 7265 7061 7273 652e 6c69 6e65 6e6f    reparse.lineno
+00017900: 203d 2030 0a20 2020 2020 2020 2072 6570   = 0.        rep
+00017910: 6172 7365 2e6c 6578 706f 7320 3d20 300a  arse.lexpos = 0.
+00017920: 2020 2020 2020 2020 7365 6c66 2e5f 7061          self._pa
+00017930: 7273 6572 2e6c 6f6f 6b61 6865 6164 203d  rser.lookahead =
+00017940: 2072 6570 6172 7365 0a0a 2020 2020 6465   reparse..    de
+00017950: 6620 5f72 6573 6574 5f70 6172 7365 725f  f _reset_parser_
+00017960: 7661 7269 6162 6c65 7328 7365 6c66 293a  variables(self):
+00017970: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+00017980: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+00017990: 7061 7273 6572 2e72 6573 7461 7274 2829  parser.restart()
+000179a0: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+000179b0: 4578 6365 7074 696f 6e3a 0a20 2020 2020  Exception:.     
+000179c0: 2020 2020 2020 2070 6173 730a 2020 2020         pass.    
+000179d0: 2020 2020 7365 6c66 2e5f 7363 6f70 655f      self._scope_
+000179e0: 7374 6163 6b20 3d20 5b7b 7d5d 0a20 2020  stack = [{}].   
+000179f0: 2020 2020 2073 656c 662e 5f63 686f 7264       self._chord
+00017a00: 5f70 6974 6368 5f6f 7264 6572 7320 3d20  _pitch_orders = 
+00017a10: 7b7d 0a20 2020 2020 2020 2073 656c 662e  {}.        self.
+00017a20: 5f6c 6578 6572 2e70 7573 685f 7374 6174  _lexer.push_stat
+00017a30: 6528 226e 6f74 6573 2229 0a20 2020 2020  e("notes").     
+00017a40: 2020 2073 656c 662e 5f64 6566 6175 6c74     self._default
+00017a50: 5f64 7572 6174 696f 6e20 3d20 4c69 6c79  _duration = Lily
+00017a60: 506f 6e64 4475 7261 7469 6f6e 2828 312c  PondDuration((1,
+00017a70: 2034 292c 204e 6f6e 6529 0a20 2020 2020   4), None).     
+00017a80: 2020 2073 656c 662e 5f6c 6173 745f 6368     self._last_ch
+00017a90: 6f72 6420 3d20 4e6f 6e65 0a20 2020 2020  ord = None.     
+00017aa0: 2020 2023 204c 696c 7950 6f6e 6427 7320     # LilyPond's 
+00017ab0: 6465 6661 756c 7421 0a20 2020 2020 2020  default!.       
+00017ac0: 2023 2073 656c 662e 5f6c 6173 745f 6368   # self._last_ch
+00017ad0: 6f72 6420 3d20 5f73 636f 7265 2e43 686f  ord = _score.Cho
+00017ae0: 7264 285b 2763 272c 2027 6727 2c20 2263  rd(['c', 'g', "c
+00017af0: 2722 5d2c 2028 312c 2034 2929 0a20 2020  '"], (1, 4)).   
+00017b00: 2020 2020 2073 656c 662e 5f70 6974 6368       self._pitch
+00017b10: 5f6e 616d 6573 203d 2073 656c 662e 5f6c  _names = self._l
+00017b20: 616e 6775 6167 655f 7069 7463 685f 6e61  anguage_pitch_na
+00017b30: 6d65 735b 7365 6c66 2e64 6566 6175 6c74  mes[self.default
+00017b40: 5f6c 616e 6775 6167 655d 0a20 2020 2020  _language].     
+00017b50: 2020 2073 656c 662e 5f72 6570 6561 7465     self._repeate
+00017b60: 645f 6368 6f72 6473 203d 207b 7d0a 0a20  d_chords = {}.. 
+00017b70: 2020 2064 6566 205f 7265 736f 6c76 655f     def _resolve_
+00017b80: 6576 656e 745f 6964 656e 7469 6669 6572  event_identifier
+00017b90: 2873 656c 662c 2069 6465 6e74 6966 6965  (self, identifie
+00017ba0: 7229 3a0a 2020 2020 2020 2020 2320 7769  r):.        # wi
+00017bb0: 7468 6f75 7420 6c65 6164 696e 6720 736c  thout leading sl
+00017bc0: 6173 680a 2020 2020 2020 2020 6c6f 6f6b  ash.        look
+00017bd0: 7570 203d 2073 656c 662e 5f63 7572 7265  up = self._curre
+00017be0: 6e74 5f6d 6f64 756c 655b 6964 656e 7469  nt_module[identi
+00017bf0: 6669 6572 5d0a 2020 2020 2020 2020 6e61  fier].        na
+00017c00: 6d65 203d 206c 6f6f 6b75 705b 226e 616d  me = lookup["nam
+00017c10: 6522 5d0a 2020 2020 2020 2020 6966 206e  e"].        if n
+00017c20: 616d 6520 3d3d 2022 4172 7469 6375 6c61  ame == "Articula
+00017c30: 7469 6f6e 4576 656e 7422 3a0a 2020 2020  tionEvent":.    
+00017c40: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+00017c50: 696e 6469 6361 746f 7273 2e41 7274 6963  indicators.Artic
+00017c60: 756c 6174 696f 6e28 6c6f 6f6b 7570 5b22  ulation(lookup["
+00017c70: 6172 7469 6375 6c61 7469 6f6e 2d74 7970  articulation-typ
+00017c80: 6522 5d29 0a20 2020 2020 2020 2065 6c69  e"]).        eli
+00017c90: 6620 6e61 6d65 203d 3d20 2241 6273 6f6c  f name == "Absol
+00017ca0: 7574 6544 796e 616d 6963 4576 656e 7422  uteDynamicEvent"
+00017cb0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00017cc0: 7475 726e 205f 6479 6e61 6d69 632e 4479  turn _dynamic.Dy
+00017cd0: 6e61 6d69 6328 6c6f 6f6b 7570 5b22 7465  namic(lookup["te
+00017ce0: 7874 225d 290a 2020 2020 2020 2020 656c  xt"]).        el
+00017cf0: 6966 206e 616d 6520 3d3d 2022 4265 616d  if name == "Beam
+00017d00: 4576 656e 7422 3a0a 2020 2020 2020 2020  Event":.        
+00017d10: 2020 2020 6966 206c 6f6f 6b75 705b 2273      if lookup["s
+00017d20: 7061 6e2d 6469 7265 6374 696f 6e22 5d20  pan-direction"] 
+00017d30: 3d3d 202d 313a 0a20 2020 2020 2020 2020  == -1:.         
+00017d40: 2020 2020 2020 2072 6574 7572 6e20 5f69         return _i
+00017d50: 6e64 6963 6174 6f72 732e 5374 6172 7442  ndicators.StartB
+00017d60: 6561 6d28 290a 2020 2020 2020 2020 2020  eam().          
+00017d70: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00017d80: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+00017d90: 696e 6469 6361 746f 7273 2e53 746f 7042  indicators.StopB
+00017da0: 6561 6d28 290a 2020 2020 2020 2020 656c  eam().        el
+00017db0: 6966 206e 616d 6520 3d3d 2022 4372 6573  if name == "Cres
+00017dc0: 6365 6e64 6f45 7665 6e74 223a 0a20 2020  cendoEvent":.   
+00017dd0: 2020 2020 2020 2020 2069 6620 6c6f 6f6b           if look
+00017de0: 7570 5b22 7370 616e 2d64 6972 6563 7469  up["span-directi
+00017df0: 6f6e 225d 203d 3d20 2d31 3a0a 2020 2020  on"] == -1:.    
+00017e00: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00017e10: 726e 205f 696e 6469 6361 746f 7273 2e53  rn _indicators.S
+00017e20: 7461 7274 4861 6972 7069 6e28 223c 2229  tartHairpin("<")
+00017e30: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00017e40: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00017e50: 2020 2072 6574 7572 6e20 5f69 6e64 6963     return _indic
+00017e60: 6174 6f72 732e 5374 6f70 4861 6972 7069  ators.StopHairpi
+00017e70: 6e28 290a 2020 2020 2020 2020 656c 6966  n().        elif
+00017e80: 206e 616d 6520 3d3d 2022 4465 6372 6573   name == "Decres
+00017e90: 6365 6e64 6f45 7665 6e74 223a 0a20 2020  cendoEvent":.   
+00017ea0: 2020 2020 2020 2020 2069 6620 6c6f 6f6b           if look
+00017eb0: 7570 5b22 7370 616e 2d64 6972 6563 7469  up["span-directi
+00017ec0: 6f6e 225d 203d 3d20 2d31 3a0a 2020 2020  on"] == -1:.    
+00017ed0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00017ee0: 726e 205f 696e 6469 6361 746f 7273 2e53  rn _indicators.S
+00017ef0: 7461 7274 4861 6972 7069 6e28 223e 2229  tartHairpin(">")
+00017f00: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00017f10: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00017f20: 2020 2072 6574 7572 6e20 5f69 6e64 6963     return _indic
+00017f30: 6174 6f72 732e 5374 6f70 4861 6972 7069  ators.StopHairpi
+00017f40: 6e28 290a 2020 2020 2020 2020 656c 6966  n().        elif
+00017f50: 206e 616d 6520 3d3d 2022 476c 6973 7361   name == "Glissa
+00017f60: 6e64 6f45 7665 6e74 223a 0a20 2020 2020  ndoEvent":.     
+00017f70: 2020 2020 2020 2072 6574 7572 6e20 5f69         return _i
+00017f80: 6e64 6963 6174 6f72 732e 476c 6973 7361  ndicators.Glissa
+00017f90: 6e64 6f28 290a 2020 2020 2020 2020 656c  ndo().        el
+00017fa0: 6966 206e 616d 6520 3d3d 2022 4c61 6973  if name == "Lais
+00017fb0: 7365 7a56 6962 7265 7245 7665 6e74 223a  sezVibrerEvent":
+00017fc0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00017fd0: 7572 6e20 5f69 6e64 6963 6174 6f72 732e  urn _indicators.
+00017fe0: 4c69 6c79 506f 6e64 4c69 7465 7261 6c28  LilyPondLiteral(
+00017ff0: 7222 5c6c 6169 7373 657a 5669 6272 6572  r"\laissezVibrer
+00018000: 222c 2022 6166 7465 7222 290a 2020 2020  ", "after").    
+00018010: 2020 2020 656c 6966 206e 616d 6520 3d3d      elif name ==
+00018020: 2022 4c69 6e65 4272 6561 6b45 7665 6e74   "LineBreakEvent
+00018030: 223a 0a20 2020 2020 2020 2020 2020 2072  ":.            r
+00018040: 6574 7572 6e20 5f69 6e64 6963 6174 6f72  eturn _indicator
+00018050: 732e 4c69 6c79 506f 6e64 4c69 7465 7261  s.LilyPondLitera
+00018060: 6c28 7222 5c62 7265 616b 2229 0a20 2020  l(r"\break").   
+00018070: 2020 2020 2065 6c69 6620 6e61 6d65 203d       elif name =
+00018080: 3d20 224e 6f74 6547 726f 7570 696e 6745  = "NoteGroupingE
+00018090: 7665 6e74 223a 0a20 2020 2020 2020 2020  vent":.         
+000180a0: 2020 2069 6620 6c6f 6f6b 7570 5b22 7370     if lookup["sp
+000180b0: 616e 2d64 6972 6563 7469 6f6e 225d 203d  an-direction"] =
+000180c0: 3d20 2d31 3a0a 2020 2020 2020 2020 2020  = -1:.          
+000180d0: 2020 2020 2020 7265 7475 726e 205f 696e        return _in
+000180e0: 6469 6361 746f 7273 2e53 7461 7274 4772  dicators.StartGr
+000180f0: 6f75 7028 290a 2020 2020 2020 2020 2020  oup().          
+00018100: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00018110: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+00018120: 696e 6469 6361 746f 7273 2e53 746f 7047  indicators.StopG
+00018130: 726f 7570 2829 0a20 2020 2020 2020 2065  roup().        e
+00018140: 6c69 6620 6e61 6d65 203d 3d20 2250 6872  lif name == "Phr
+00018150: 6173 696e 6753 6c75 7245 7665 6e74 223a  asingSlurEvent":
+00018160: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00018170: 6c6f 6f6b 7570 5b22 7370 616e 2d64 6972  lookup["span-dir
+00018180: 6563 7469 6f6e 225d 203d 3d20 2d31 3a0a  ection"] == -1:.
+00018190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000181a0: 7265 7475 726e 205f 696e 6469 6361 746f  return _indicato
+000181b0: 7273 2e53 7461 7274 5068 7261 7369 6e67  rs.StartPhrasing
+000181c0: 536c 7572 2829 0a20 2020 2020 2020 2020  Slur().         
+000181d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000181e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000181f0: 5f69 6e64 6963 6174 6f72 732e 5374 6f70  _indicators.Stop
+00018200: 5068 7261 7369 6e67 536c 7572 2829 0a20  PhrasingSlur(). 
+00018210: 2020 2020 2020 2065 6c69 6620 6e61 6d65         elif name
+00018220: 203d 3d20 2253 6c75 7245 7665 6e74 223a   == "SlurEvent":
+00018230: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00018240: 6c6f 6f6b 7570 5b22 7370 616e 2d64 6972  lookup["span-dir
+00018250: 6563 7469 6f6e 225d 203d 3d20 2d31 3a0a  ection"] == -1:.
+00018260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018270: 7265 7475 726e 205f 696e 6469 6361 746f  return _indicato
+00018280: 7273 2e53 7461 7274 536c 7572 2829 0a20  rs.StartSlur(). 
+00018290: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000182a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000182b0: 2072 6574 7572 6e20 5f69 6e64 6963 6174   return _indicat
+000182c0: 6f72 732e 5374 6f70 536c 7572 2829 0a20  ors.StopSlur(). 
+000182d0: 2020 2020 2020 2065 6c69 6620 6e61 6d65         elif name
+000182e0: 203d 3d20 2254 6578 7453 7061 6e45 7665   == "TextSpanEve
+000182f0: 6e74 223a 0a20 2020 2020 2020 2020 2020  nt":.           
+00018300: 2069 6620 6c6f 6f6b 7570 5b22 7370 616e   if lookup["span
+00018310: 2d64 6972 6563 7469 6f6e 225d 203d 3d20  -direction"] == 
+00018320: 2d31 3a0a 2020 2020 2020 2020 2020 2020  -1:.            
+00018330: 2020 2020 7265 7475 726e 205f 696e 6469      return _indi
+00018340: 6361 746f 7273 2e53 7461 7274 5465 7874  cators.StartText
+00018350: 5370 616e 2829 0a20 2020 2020 2020 2020  Span().         
+00018360: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00018370: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00018380: 5f69 6e64 6963 6174 6f72 732e 5374 6f70  _indicators.Stop
+00018390: 5465 7874 5370 616e 2829 0a20 2020 2020  TextSpan().     
+000183a0: 2020 2065 6c69 6620 6e61 6d65 203d 3d20     elif name == 
+000183b0: 2254 6965 4576 656e 7422 3a0a 2020 2020  "TieEvent":.    
+000183c0: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+000183d0: 696e 6469 6361 746f 7273 2e54 6965 2829  indicators.Tie()
+000183e0: 0a20 2020 2020 2020 2065 6c69 6620 6e61  .        elif na
+000183f0: 6d65 203d 3d20 2254 7269 6c6c 5370 616e  me == "TrillSpan
+00018400: 4576 656e 7422 3a0a 2020 2020 2020 2020  Event":.        
+00018410: 2020 2020 6966 206c 6f6f 6b75 705b 2273      if lookup["s
+00018420: 7061 6e2d 6469 7265 6374 696f 6e22 5d20  pan-direction"] 
+00018430: 3d3d 202d 313a 0a20 2020 2020 2020 2020  == -1:.         
+00018440: 2020 2020 2020 2072 6574 7572 6e20 5f69         return _i
+00018450: 6e64 6963 6174 6f72 732e 5374 6172 7454  ndicators.StartT
+00018460: 7269 6c6c 5370 616e 2829 0a20 2020 2020  rillSpan().     
+00018470: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00018480: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00018490: 7572 6e20 5f69 6e64 6963 6174 6f72 732e  urn _indicators.
+000184a0: 5374 6f70 5472 696c 6c53 7061 6e28 290a  StopTrillSpan().
+000184b0: 2020 2020 2020 2020 6576 656e 7420 3d20          event = 
+000184c0: 4c69 6c79 506f 6e64 4576 656e 7428 6e61  LilyPondEvent(na
+000184d0: 6d65 290a 2020 2020 2020 2020 6966 2022  me).        if "
+000184e0: 7370 616e 2d64 6972 6563 7469 6f6e 2220  span-direction" 
+000184f0: 696e 206c 6f6f 6b75 703a 0a20 2020 2020  in lookup:.     
+00018500: 2020 2020 2020 2069 6620 6c6f 6f6b 7570         if lookup
+00018510: 5b22 7370 616e 2d64 6972 6563 7469 6f6e  ["span-direction
+00018520: 225d 203d 3d20 2d31 3a0a 2020 2020 2020  "] == -1:.      
+00018530: 2020 2020 2020 2020 2020 6576 656e 742e            event.
+00018540: 7370 616e 5f64 6972 6563 7469 6f6e 203d  span_direction =
+00018550: 2022 7374 6172 7422 0a20 2020 2020 2020   "start".       
+00018560: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00018570: 2020 2020 2020 2020 2020 2065 7665 6e74             event
+00018580: 2e73 7061 6e5f 6469 7265 6374 696f 6e20  .span_direction 
+00018590: 3d20 2273 746f 7022 0a20 2020 2020 2020  = "stop".       
+000185a0: 2072 6574 7572 6e20 6576 656e 740a 0a20   return event.. 
+000185b0: 2020 2064 6566 205f 7265 736f 6c76 655f     def _resolve_
+000185c0: 6964 656e 7469 6669 6572 2873 656c 662c  identifier(self,
+000185d0: 2069 6465 6e74 6966 6965 7229 3a0a 2020   identifier):.  
+000185e0: 2020 2020 2020 666f 7220 7363 6f70 6520        for scope 
+000185f0: 696e 2072 6576 6572 7365 6428 7365 6c66  in reversed(self
+00018600: 2e5f 7363 6f70 655f 7374 6163 6b29 3a0a  ._scope_stack):.
+00018610: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00018620: 6465 6e74 6966 6965 7220 696e 2073 636f  dentifier in sco
+00018630: 7065 3a0a 2020 2020 2020 2020 2020 2020  pe:.            
+00018640: 2020 2020 7265 7475 726e 2073 636f 7065      return scope
+00018650: 5b69 6465 6e74 6966 6965 725d 0a20 2020  [identifier].   
+00018660: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+00018670: 0a0a 2020 2020 6465 6620 5f74 6573 745f  ..    def _test_
+00018680: 7363 6865 6d65 5f70 7265 6469 6361 7465  scheme_predicate
+00018690: 2873 656c 662c 2070 7265 6469 6361 7465  (self, predicate
+000186a0: 2c20 7661 6c75 6529 3a0a 2020 2020 2020  , value):.      
+000186b0: 2020 7072 6564 6963 6174 6573 203d 2073    predicates = s
+000186c0: 656c 662e 5f67 6574 5f73 6368 656d 655f  elf._get_scheme_
+000186d0: 7072 6564 6963 6174 6573 2829 0a20 2020  predicates().   
+000186e0: 2020 2020 2069 6620 7072 6564 6963 6174       if predicat
+000186f0: 6520 696e 2070 7265 6469 6361 7465 733a  e in predicates:
+00018700: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00018710: 7572 6e20 7072 6564 6963 6174 6573 5b70  urn predicates[p
+00018720: 7265 6469 6361 7465 5d28 7661 6c75 6529  redicate](value)
+00018730: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00018740: 5472 7565 0a0a 2020 2020 4073 7461 7469  True..    @stati
+00018750: 636d 6574 686f 640a 2020 2020 6465 6620  cmethod.    def 
+00018760: 5f74 7261 6e73 706f 7365 5f65 6e68 6172  _transpose_enhar
+00018770: 6d6f 6e69 6361 6c6c 7928 7069 7463 685f  monically(pitch_
+00018780: 612c 2070 6974 6368 5f62 2c20 7069 7463  a, pitch_b, pitc
+00018790: 685f 6329 3a0a 2020 2020 2020 2020 2222  h_c):.        ""
+000187a0: 220a 2020 2020 2020 2020 5472 616e 7370  ".        Transp
+000187b0: 6f73 6520 6060 7069 7463 685f 6360 6020  ose ``pitch_c`` 
+000187c0: 6279 2074 6865 2064 6973 7461 6e63 6520  by the distance 
+000187d0: 6265 7477 6565 6e20 6060 7069 7463 685f  between ``pitch_
+000187e0: 6260 600a 2020 2020 2020 2020 616e 6420  b``.        and 
+000187f0: 6060 7069 7463 685f 6131 6060 2e0a 0a20  ``pitch_a1``... 
+00018800: 2020 2020 2020 2054 6869 7320 6675 6e63         This func
+00018810: 7469 6f6e 2077 6173 2072 6576 6572 7365  tion was reverse
+00018820: 2d65 6e67 696e 6565 7265 6420 6672 6f6d  -engineered from
+00018830: 204c 696c 7950 6f6e 6427 7320 736f 7572   LilyPond's sour
+00018840: 6365 2063 6f64 652e 0a0a 2020 2020 2020  ce code...      
+00018850: 2020 5265 7475 726e 7320 6e61 6d65 6420    Returns named 
+00018860: 7069 7463 682e 0a20 2020 2020 2020 2022  pitch..        "
+00018870: 2222 0a0a 2020 2020 2020 2020 6465 6620  ""..        def 
+00018880: 6e6f 726d 616c 697a 655f 616c 7465 7261  normalize_altera
+00018890: 7469 6f6e 2873 7465 702c 2061 6c74 6572  tion(step, alter
+000188a0: 6174 696f 6e29 3a0a 2020 2020 2020 2020  ation):.        
+000188b0: 2020 2020 7768 696c 6520 322e 3020 3c20      while 2.0 < 
+000188c0: 616c 7465 7261 7469 6f6e 3a0a 2020 2020  alteration:.    
+000188d0: 2020 2020 2020 2020 2020 2020 616c 7465              alte
+000188e0: 7261 7469 6f6e 202d 3d20 7374 6570 5f73  ration -= step_s
+000188f0: 697a 6528 7374 6570 290a 2020 2020 2020  ize(step).      
+00018900: 2020 2020 2020 2020 2020 7374 6570 202b            step +
+00018910: 3d20 312e 300a 2020 2020 2020 2020 2020  = 1.0.          
+00018920: 2020 7768 696c 6520 616c 7465 7261 7469    while alterati
+00018930: 6f6e 203c 202d 322e 303a 0a20 2020 2020  on < -2.0:.     
+00018940: 2020 2020 2020 2020 2020 2073 7465 7020             step 
+00018950: 2d3d 2031 2e30 0a20 2020 2020 2020 2020  -= 1.0.         
+00018960: 2020 2020 2020 2061 6c74 6572 6174 696f         alteratio
+00018970: 6e20 2b3d 2073 7465 705f 7369 7a65 2873  n += step_size(s
+00018980: 7465 7029 0a20 2020 2020 2020 2020 2020  tep).           
+00018990: 2072 6574 7572 6e20 7374 6570 2c20 616c   return step, al
+000189a0: 7465 7261 7469 6f6e 0a0a 2020 2020 2020  teration..      
+000189b0: 2020 6465 6620 6e6f 726d 616c 697a 655f    def normalize_
+000189c0: 6f63 7461 7665 286f 6374 6176 652c 2073  octave(octave, s
+000189d0: 7465 7029 3a0a 2020 2020 2020 2020 2020  tep):.          
+000189e0: 2020 6e6f 726d 616c 697a 6564 5f73 7465    normalized_ste
+000189f0: 7020 3d20 7374 6570 2025 206c 656e 2873  p = step % len(s
+00018a00: 6361 6c65 290a 2020 2020 2020 2020 2020  cale).          
+00018a10: 2020 6f63 7461 7665 202b 3d20 2873 7465    octave += (ste
+00018a20: 7020 2d20 6e6f 726d 616c 697a 6564 5f73  p - normalized_s
+00018a30: 7465 7029 202f 206c 656e 2873 6361 6c65  tep) / len(scale
+00018a40: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+00018a50: 7475 726e 206f 6374 6176 652c 206e 6f72  turn octave, nor
+00018a60: 6d61 6c69 7a65 645f 7374 6570 0a0a 2020  malized_step..  
+00018a70: 2020 2020 2020 6465 6620 7374 6570 5f73        def step_s
+00018a80: 697a 6528 7374 6570 293a 0a20 2020 2020  ize(step):.     
+00018a90: 2020 2020 2020 206e 6f72 6d61 6c69 7a65         normalize
+00018aa0: 645f 7374 6570 203d 2073 7465 7020 2520  d_step = step % 
+00018ab0: 6c65 6e28 7363 616c 6529 0a20 2020 2020  len(scale).     
+00018ac0: 2020 2020 2020 2069 6620 6e6f 726d 616c         if normal
+00018ad0: 697a 6564 5f73 7465 7020 3d3d 2036 3a0a  ized_step == 6:.
+00018ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018af0: 7265 7475 726e 2031 2e30 2020 2320 6220  return 1.0  # b 
+00018b00: 746f 2063 0a20 2020 2020 2020 2020 2020  to c.           
+00018b10: 2072 6574 7572 6e20 7363 616c 655b 6e6f   return scale[no
+00018b20: 726d 616c 697a 6564 5f73 7465 7020 2b20  rmalized_step + 
+00018b30: 315d 202d 2073 6361 6c65 5b6e 6f72 6d61  1] - scale[norma
+00018b40: 6c69 7a65 645f 7374 6570 5d0a 0a20 2020  lized_step]..   
+00018b50: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+00018b60: 7374 616e 6365 2870 6974 6368 5f61 2c20  stance(pitch_a, 
+00018b70: 5f70 6974 6368 2e4e 616d 6564 5069 7463  _pitch.NamedPitc
+00018b80: 6829 3a0a 2020 2020 2020 2020 2020 2020  h):.            
+00018b90: 7069 7463 685f 6120 3d20 5f70 6974 6368  pitch_a = _pitch
+00018ba0: 2e4e 616d 6564 5069 7463 6828 7069 7463  .NamedPitch(pitc
+00018bb0: 685f 6129 0a20 2020 2020 2020 2069 6620  h_a).        if 
+00018bc0: 6e6f 7420 6973 696e 7374 616e 6365 2870  not isinstance(p
+00018bd0: 6974 6368 5f62 2c20 5f70 6974 6368 2e4e  itch_b, _pitch.N
+00018be0: 616d 6564 5069 7463 6829 3a0a 2020 2020  amedPitch):.    
+00018bf0: 2020 2020 2020 2020 7069 7463 685f 6220          pitch_b 
+00018c00: 3d20 5f70 6974 6368 2e4e 616d 6564 5069  = _pitch.NamedPi
+00018c10: 7463 6828 7069 7463 685f 6229 0a20 2020  tch(pitch_b).   
+00018c20: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+00018c30: 7374 616e 6365 2870 6974 6368 5f63 2c20  stance(pitch_c, 
+00018c40: 5f70 6974 6368 2e4e 616d 6564 5069 7463  _pitch.NamedPitc
+00018c50: 6829 3a0a 2020 2020 2020 2020 2020 2020  h):.            
+00018c60: 7069 7463 685f 6320 3d20 5f70 6974 6368  pitch_c = _pitch
+00018c70: 2e4e 616d 6564 5069 7463 6828 7069 7463  .NamedPitch(pitc
+00018c80: 685f 6329 0a20 2020 2020 2020 2073 6361  h_c).        sca
+00018c90: 6c65 203d 205b 302e 302c 2032 2e30 2c20  le = [0.0, 2.0, 
+00018ca0: 342e 302c 2035 2e30 2c20 372e 302c 2039  4.0, 5.0, 7.0, 9
+00018cb0: 2e30 2c20 3131 2e30 5d0a 2020 2020 2020  .0, 11.0].      
+00018cc0: 2020 615f 6f63 742c 2061 5f73 7465 7020    a_oct, a_step 
+00018cd0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+00018ce0: 7069 7463 685f 612e 6f63 7461 7665 2e6e  pitch_a.octave.n
+00018cf0: 756d 6265 722c 0a20 2020 2020 2020 2020  umber,.         
+00018d00: 2020 2070 6974 6368 5f61 2e5f 6765 745f     pitch_a._get_
+00018d10: 6469 6174 6f6e 6963 5f70 635f 6e75 6d62  diatonic_pc_numb
+00018d20: 6572 2829 2c0a 2020 2020 2020 2020 290a  er(),.        ).
+00018d30: 2020 2020 2020 2020 625f 6f63 742c 2062          b_oct, b
+00018d40: 5f73 7465 7020 3d20 280a 2020 2020 2020  _step = (.      
+00018d50: 2020 2020 2020 7069 7463 685f 622e 6f63        pitch_b.oc
+00018d60: 7461 7665 2e6e 756d 6265 722c 0a20 2020  tave.number,.   
+00018d70: 2020 2020 2020 2020 2070 6974 6368 5f62           pitch_b
+00018d80: 2e5f 6765 745f 6469 6174 6f6e 6963 5f70  ._get_diatonic_p
+00018d90: 635f 6e75 6d62 6572 2829 2c0a 2020 2020  c_number(),.    
+00018da0: 2020 2020 290a 2020 2020 2020 2020 635f      ).        c_
+00018db0: 6f63 742c 2063 5f73 7465 702c 2063 5f61  oct, c_step, c_a
+00018dc0: 6c74 203d 2028 0a20 2020 2020 2020 2020  lt = (.         
+00018dd0: 2020 2070 6974 6368 5f63 2e6f 6374 6176     pitch_c.octav
+00018de0: 652e 6e75 6d62 6572 2c0a 2020 2020 2020  e.number,.      
+00018df0: 2020 2020 2020 7069 7463 685f 632e 5f67        pitch_c._g
+00018e00: 6574 5f64 6961 746f 6e69 635f 7063 5f6e  et_diatonic_pc_n
+00018e10: 756d 6265 7228 292c 0a20 2020 2020 2020  umber(),.       
+00018e20: 2020 2020 2070 6974 6368 5f63 2e61 6363       pitch_c.acc
+00018e30: 6964 656e 7461 6c2e 7365 6d69 746f 6e65  idental.semitone
+00018e40: 732c 0a20 2020 2020 2020 2029 0a20 2020  s,.        ).   
+00018e50: 2020 2020 2064 5f6f 6374 2c20 645f 7374       d_oct, d_st
+00018e60: 6570 2c20 645f 746f 6e65 7320 3d20 280a  ep, d_tones = (.
+00018e70: 2020 2020 2020 2020 2020 2020 625f 6f63              b_oc
+00018e80: 7420 2d20 615f 6f63 742c 0a20 2020 2020  t - a_oct,.     
+00018e90: 2020 2020 2020 2062 5f73 7465 7020 2d20         b_step - 
+00018ea0: 615f 7374 6570 2c0a 2020 2020 2020 2020  a_step,.        
+00018eb0: 2020 2020 666c 6f61 7428 7069 7463 685f      float(pitch_
+00018ec0: 622e 6e75 6d62 6572 2920 2d20 666c 6f61  b.number) - floa
+00018ed0: 7428 7069 7463 685f 612e 6e75 6d62 6572  t(pitch_a.number
+00018ee0: 292c 0a20 2020 2020 2020 2029 0a20 2020  ),.        ).   
+00018ef0: 2020 2020 2074 6d70 5f61 6c74 203d 2066       tmp_alt = f
+00018f00: 6c6f 6174 2870 6974 6368 5f63 2e6e 756d  loat(pitch_c.num
+00018f10: 6265 7229 202b 2064 5f74 6f6e 6573 0a20  ber) + d_tones. 
+00018f20: 2020 2020 2020 2023 2070 7269 6e74 2027         # print '
+00018f30: 544d 505f 414c 543a 2025 6627 2025 2074  TMP_ALT: %f' % t
+00018f40: 6d70 5f61 6c74 0a20 2020 2020 2020 206e  mp_alt.        n
+00018f50: 6577 5f6f 6374 203d 2063 5f6f 6374 202b  ew_oct = c_oct +
+00018f60: 2064 5f6f 6374 0a20 2020 2020 2020 206e   d_oct.        n
+00018f70: 6577 5f73 7465 7020 3d20 635f 7374 6570  ew_step = c_step
+00018f80: 202b 2064 5f73 7465 700a 2020 2020 2020   + d_step.      
+00018f90: 2020 6e65 775f 616c 7420 3d20 635f 616c    new_alt = c_al
+00018fa0: 740a 2020 2020 2020 2020 2320 7072 696e  t.        # prin
+00018fb0: 7420 274e 4557 3a27 2c20 6e65 775f 6f63  t 'NEW:', new_oc
+00018fc0: 742c 206e 6577 5f73 7465 702c 206e 6577  t, new_step, new
+00018fd0: 5f61 6c74 0a20 2020 2020 2020 206e 6577  _alt.        new
+00018fe0: 5f73 7465 702c 206e 6577 5f61 6c74 203d  _step, new_alt =
+00018ff0: 206e 6f72 6d61 6c69 7a65 5f61 6c74 6572   normalize_alter
+00019000: 6174 696f 6e28 6e65 775f 7374 6570 2c20  ation(new_step, 
+00019010: 6e65 775f 616c 7429 0a20 2020 2020 2020  new_alt).       
+00019020: 206e 6577 5f6f 6374 2c20 6e65 775f 7374   new_oct, new_st
+00019030: 6570 203d 206e 6f72 6d61 6c69 7a65 5f6f  ep = normalize_o
+00019040: 6374 6176 6528 6e65 775f 6f63 742c 206e  ctave(new_oct, n
+00019050: 6577 5f73 7465 7029 0a20 2020 2020 2020  ew_step).       
+00019060: 2023 2070 7269 6e74 2027 4e45 5728 6e6f   # print 'NEW(no
+00019070: 726d 293a 272c 206e 6577 5f6f 6374 2c20  rm):', new_oct, 
+00019080: 6e65 775f 7374 6570 2c20 6e65 775f 616c  new_step, new_al
+00019090: 740a 2020 2020 2020 2020 6f63 7461 7665  t.        octave
+000190a0: 5f74 6963 6b73 203d 205f 7069 7463 682e  _ticks = _pitch.
+000190b0: 4f63 7461 7665 286e 6577 5f6f 6374 292e  Octave(new_oct).
+000190c0: 7469 636b 730a 2020 2020 2020 2020 7069  ticks.        pi
+000190d0: 7463 685f 636c 6173 735f 6e61 6d65 203d  tch_class_name =
+000190e0: 205f 7069 7463 682e 5f64 6961 746f 6e69   _pitch._diatoni
+000190f0: 635f 7063 5f6e 756d 6265 725f 746f 5f64  c_pc_number_to_d
+00019100: 6961 746f 6e69 635f 7063 5f6e 616d 655b  iatonic_pc_name[
+00019110: 6e65 775f 7374 6570 2025 2037 5d0a 2020  new_step % 7].  
+00019120: 2020 2020 2020 6163 6369 6465 6e74 616c        accidental
+00019130: 203d 2073 7472 285f 7069 7463 682e 4163   = str(_pitch.Ac
+00019140: 6369 6465 6e74 616c 286e 6577 5f61 6c74  cidental(new_alt
+00019150: 2929 0a20 2020 2020 2020 2074 6d70 5f70  )).        tmp_p
+00019160: 6974 6368 203d 205f 7069 7463 682e 4e61  itch = _pitch.Na
+00019170: 6d65 6450 6974 6368 2870 6974 6368 5f63  medPitch(pitch_c
+00019180: 6c61 7373 5f6e 616d 6520 2b20 6163 6369  lass_name + acci
+00019190: 6465 6e74 616c 202b 206f 6374 6176 655f  dental + octave_
+000191a0: 7469 636b 7329 0a20 2020 2020 2020 2023  ticks).        #
+000191b0: 2070 7269 6e74 2027 544d 5028 7069 7463   print 'TMP(pitc
+000191c0: 6829 3a20 2572 2720 2520 746d 705f 7069  h): %r' % tmp_pi
+000191d0: 7463 680a 2020 2020 2020 2020 6e65 775f  tch.        new_
+000191e0: 616c 7420 2b3d 2074 6d70 5f61 6c74 202d  alt += tmp_alt -
+000191f0: 2066 6c6f 6174 2874 6d70 5f70 6974 6368   float(tmp_pitch
+00019200: 2e6e 756d 6265 7229 0a20 2020 2020 2020  .number).       
+00019210: 2023 2070 7269 6e74 2027 4e45 5728 616c   # print 'NEW(al
+00019220: 7429 3a20 2566 2720 2520 6e65 775f 616c  t): %f' % new_al
+00019230: 740a 2020 2020 2020 2020 6e65 775f 7374  t.        new_st
+00019240: 6570 2c20 6e65 775f 616c 7420 3d20 6e6f  ep, new_alt = no
+00019250: 726d 616c 697a 655f 616c 7465 7261 7469  rmalize_alterati
+00019260: 6f6e 286e 6577 5f73 7465 702c 206e 6577  on(new_step, new
+00019270: 5f61 6c74 290a 2020 2020 2020 2020 6e65  _alt).        ne
+00019280: 775f 6f63 742c 206e 6577 5f73 7465 7020  w_oct, new_step 
+00019290: 3d20 6e6f 726d 616c 697a 655f 6f63 7461  = normalize_octa
+000192a0: 7665 286e 6577 5f6f 6374 2c20 6e65 775f  ve(new_oct, new_
+000192b0: 7374 6570 290a 2020 2020 2020 2020 2320  step).        # 
+000192c0: 7072 696e 7420 274e 4557 286e 6f72 6d29  print 'NEW(norm)
+000192d0: 3a27 2c20 6e65 775f 6f63 742c 206e 6577  :', new_oct, new
+000192e0: 5f73 7465 702c 206e 6577 5f61 6c74 0a20  _step, new_alt. 
+000192f0: 2020 2020 2020 206f 6374 6176 655f 7469         octave_ti
+00019300: 636b 7320 3d20 5f70 6974 6368 2e4f 6374  cks = _pitch.Oct
+00019310: 6176 6528 6e65 775f 6f63 7429 2e74 6963  ave(new_oct).tic
+00019320: 6b73 0a20 2020 2020 2020 2070 6974 6368  ks.        pitch
+00019330: 5f63 6c61 7373 5f6e 616d 6520 3d20 5f70  _class_name = _p
+00019340: 6974 6368 2e5f 6469 6174 6f6e 6963 5f70  itch._diatonic_p
+00019350: 635f 6e75 6d62 6572 5f74 6f5f 6469 6174  c_number_to_diat
+00019360: 6f6e 6963 5f70 635f 6e61 6d65 5b6e 6577  onic_pc_name[new
+00019370: 5f73 7465 7020 2520 375d 0a20 2020 2020  _step % 7].     
+00019380: 2020 2061 6363 6964 656e 7461 6c20 3d20     accidental = 
+00019390: 7374 7228 5f70 6974 6368 2e41 6363 6964  str(_pitch.Accid
+000193a0: 656e 7461 6c28 6e65 775f 616c 7429 290a  ental(new_alt)).
+000193b0: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+000193c0: 7069 7463 682e 4e61 6d65 6450 6974 6368  pitch.NamedPitch
+000193d0: 2870 6974 6368 5f63 6c61 7373 5f6e 616d  (pitch_class_nam
+000193e0: 6520 2b20 6163 6369 6465 6e74 616c 202b  e + accidental +
+000193f0: 206f 6374 6176 655f 7469 636b 7329 0a0a   octave_ticks)..
+00019400: 2020 2020 2323 2320 5055 424c 4943 204d      ### PUBLIC M
+00019410: 4554 484f 4453 2023 2323 0a0a 2020 2020  ETHODS ###..    
+00019420: 4073 7461 7469 636d 6574 686f 640a 2020  @staticmethod.  
+00019430: 2020 6465 6620 6c69 7374 5f6b 6e6f 776e    def list_known
+00019440: 5f63 6f6e 7465 7874 7328 2920 2d3e 206c  _contexts() -> l
+00019450: 6973 745b 7374 725d 3a0a 2020 2020 2020  ist[str]:.      
+00019460: 2020 2222 220a 2020 2020 2020 2020 4c69    """.        Li
+00019470: 7374 7320 616c 6c20 4c69 6c79 506f 6e64  sts all LilyPond
+00019480: 2063 6f6e 7465 7874 7320 7265 636f 676e   contexts recogn
+00019490: 697a 6564 2062 7920 4c69 6c79 506f 6e64  ized by LilyPond
+000194a0: 2070 6172 7365 722e 0a0a 2020 2020 2020   parser...      
+000194b0: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
+000194c0: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
+000194d0: 2020 2020 2020 203e 3e3e 2063 6c61 7373         >>> class
+000194e0: 5f20 3d20 6162 6a61 642e 7061 7273 6572  _ = abjad.parser
+000194f0: 2e4c 696c 7950 6f6e 6450 6172 7365 720a  .LilyPondParser.
+00019500: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00019510: 666f 7220 636f 6e74 6578 7420 696e 2063  for context in c
+00019520: 6c61 7373 5f2e 6c69 7374 5f6b 6e6f 776e  lass_.list_known
+00019530: 5f63 6f6e 7465 7874 7328 293a 0a20 2020  _contexts():.   
+00019540: 2020 2020 2020 2020 202e 2e2e 2020 2020           ...    
+00019550: 2070 7269 6e74 2863 6f6e 7465 7874 290a   print(context).
+00019560: 2020 2020 2020 2020 2020 2020 2e2e 2e0a              ....
+00019570: 2020 2020 2020 2020 2020 2020 4368 6f69              Choi
+00019580: 7253 7461 6666 0a20 2020 2020 2020 2020  rStaff.         
+00019590: 2020 2043 686f 7264 4e61 6d65 730a 2020     ChordNames.  
+000195a0: 2020 2020 2020 2020 2020 4375 6556 6f69            CueVoi
+000195b0: 6365 0a20 2020 2020 2020 2020 2020 2044  ce.            D
+000195c0: 6576 6e75 6c6c 0a20 2020 2020 2020 2020  evnull.         
+000195d0: 2020 2044 7275 6d53 7461 6666 0a20 2020     DrumStaff.   
+000195e0: 2020 2020 2020 2020 2044 7275 6d56 6f69           DrumVoi
+000195f0: 6365 0a20 2020 2020 2020 2020 2020 2044  ce.            D
+00019600: 796e 616d 6963 730a 2020 2020 2020 2020  ynamics.        
+00019610: 2020 2020 4669 6775 7265 6442 6173 730a      FiguredBass.
+00019620: 2020 2020 2020 2020 2020 2020 4672 6574              Fret
+00019630: 426f 6172 6473 0a20 2020 2020 2020 2020  Boards.         
+00019640: 2020 2047 6c6f 6261 6c0a 2020 2020 2020     Global.      
+00019650: 2020 2020 2020 4772 616e 6453 7461 6666        GrandStaff
+00019660: 0a20 2020 2020 2020 2020 2020 2047 7265  .            Gre
+00019670: 676f 7269 616e 5472 616e 7363 7269 7074  gorianTranscript
+00019680: 696f 6e53 7461 6666 0a20 2020 2020 2020  ionStaff.       
+00019690: 2020 2020 2047 7265 676f 7269 616e 5472       GregorianTr
+000196a0: 616e 7363 7269 7074 696f 6e56 6f69 6365  anscriptionVoice
+000196b0: 0a20 2020 2020 2020 2020 2020 204b 6965  .            Kie
+000196c0: 7661 6e53 7461 6666 0a20 2020 2020 2020  vanStaff.       
+000196d0: 2020 2020 204b 6965 7661 6e56 6f69 6365       KievanVoice
+000196e0: 0a20 2020 2020 2020 2020 2020 204c 7972  .            Lyr
+000196f0: 6963 730a 2020 2020 2020 2020 2020 2020  ics.            
+00019700: 4d65 6e73 7572 616c 5374 6166 660a 2020  MensuralStaff.  
+00019710: 2020 2020 2020 2020 2020 4d65 6e73 7572            Mensur
+00019720: 616c 566f 6963 650a 2020 2020 2020 2020  alVoice.        
+00019730: 2020 2020 4e6f 7465 4e61 6d65 730a 2020      NoteNames.  
+00019740: 2020 2020 2020 2020 2020 4e75 6c6c 566f            NullVo
+00019750: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
+00019760: 4f6e 6553 7461 6666 0a20 2020 2020 2020  OneStaff.       
+00019770: 2020 2020 2050 6574 7275 6363 6953 7461       PetrucciSta
+00019780: 6666 0a20 2020 2020 2020 2020 2020 2050  ff.            P
+00019790: 6574 7275 6363 6956 6f69 6365 0a20 2020  etrucciVoice.   
+000197a0: 2020 2020 2020 2020 2050 6961 6e6f 5374           PianoSt
+000197b0: 6166 660a 2020 2020 2020 2020 2020 2020  aff.            
+000197c0: 5268 7974 686d 6963 5374 6166 660a 2020  RhythmicStaff.  
+000197d0: 2020 2020 2020 2020 2020 5363 6f72 650a            Score.
+000197e0: 2020 2020 2020 2020 2020 2020 5374 6166              Staf
+000197f0: 660a 2020 2020 2020 2020 2020 2020 5374  f.            St
+00019800: 6166 6647 726f 7570 0a20 2020 2020 2020  affGroup.       
+00019810: 2020 2020 2054 6162 5374 6166 660a 2020       TabStaff.  
+00019820: 2020 2020 2020 2020 2020 5461 6256 6f69            TabVoi
+00019830: 6365 0a20 2020 2020 2020 2020 2020 2056  ce.            V
+00019840: 6174 6963 616e 6153 7461 6666 0a20 2020  aticanaStaff.   
+00019850: 2020 2020 2020 2020 2056 6174 6963 616e           Vatican
+00019860: 6156 6f69 6365 0a20 2020 2020 2020 2020  aVoice.         
+00019870: 2020 2056 6f69 6365 0a0a 2020 2020 2020     Voice..      
+00019880: 2020 2222 220a 0a20 2020 2020 2020 2072    """..        r
+00019890: 6574 7572 6e20 736f 7274 6564 285f 6c79  eturn sorted(_ly
+000198a0: 656e 762e 636f 6e74 6578 7473 2e6b 6579  env.contexts.key
+000198b0: 7328 2929 0a0a 2020 2020 4073 7461 7469  s())..    @stati
+000198c0: 636d 6574 686f 640a 2020 2020 6465 6620  cmethod.    def 
+000198d0: 6c69 7374 5f6b 6e6f 776e 5f64 796e 616d  list_known_dynam
+000198e0: 6963 7328 2920 2d3e 2074 7570 6c65 5b73  ics() -> tuple[s
+000198f0: 7472 2c20 2e2e 2e5d 3a0a 2020 2020 2020  tr, ...]:.      
+00019900: 2020 2222 220a 2020 2020 2020 2020 4c69    """.        Li
+00019910: 7374 7320 616c 6c20 6479 6e61 6d69 6373  sts all dynamics
+00019920: 2072 6563 6f67 6e69 7a65 6420 6279 204c   recognized by L
+00019930: 696c 7950 6f6e 6420 7061 7273 6572 2e0a  ilyPond parser..
+00019940: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
+00019950: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
+00019960: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+00019970: 3e20 636c 6173 735f 203d 2061 626a 6164  > class_ = abjad
+00019980: 2e70 6172 7365 722e 4c69 6c79 506f 6e64  .parser.LilyPond
+00019990: 5061 7273 6572 0a20 2020 2020 2020 2020  Parser.         
+000199a0: 2020 203e 3e3e 2066 6f72 2064 796e 616d     >>> for dynam
+000199b0: 6963 2069 6e20 636c 6173 735f 2e6c 6973  ic in class_.lis
+000199c0: 745f 6b6e 6f77 6e5f 6479 6e61 6d69 6373  t_known_dynamics
+000199d0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+000199e0: 2e2e 2e20 2020 2020 7072 696e 7428 6479  ...     print(dy
+000199f0: 6e61 6d69 6329 0a20 2020 2020 2020 2020  namic).         
+00019a00: 2020 202e 2e2e 0a20 2020 2020 2020 2020     ....         
+00019a10: 2020 2066 0a20 2020 2020 2020 2020 2020     f.           
+00019a20: 2066 660a 2020 2020 2020 2020 2020 2020   ff.            
+00019a30: 6666 660a 2020 2020 2020 2020 2020 2020  fff.            
+00019a40: 6666 6666 0a20 2020 2020 2020 2020 2020  ffff.           
+00019a50: 2066 6666 6666 0a20 2020 2020 2020 2020   fffff.         
+00019a60: 2020 2066 700a 2020 2020 2020 2020 2020     fp.          
+00019a70: 2020 667a 0a20 2020 2020 2020 2020 2020    fz.           
+00019a80: 206d 660a 2020 2020 2020 2020 2020 2020   mf.            
+00019a90: 6d70 0a20 2020 2020 2020 2020 2020 2070  mp.            p
+00019aa0: 0a20 2020 2020 2020 2020 2020 2070 700a  .            pp.
+00019ab0: 2020 2020 2020 2020 2020 2020 7070 700a              ppp.
+00019ac0: 2020 2020 2020 2020 2020 2020 7070 7070              pppp
+00019ad0: 0a20 2020 2020 2020 2020 2020 2070 7070  .            ppp
+00019ae0: 7070 0a20 2020 2020 2020 2020 2020 2072  pp.            r
+00019af0: 667a 0a20 2020 2020 2020 2020 2020 2073  fz.            s
+00019b00: 660a 2020 2020 2020 2020 2020 2020 7366  f.            sf
+00019b10: 660a 2020 2020 2020 2020 2020 2020 7366  f.            sf
+00019b20: 700a 2020 2020 2020 2020 2020 2020 7366  p.            sf
+00019b30: 7a0a 2020 2020 2020 2020 2020 2020 7370  z.            sp
+00019b40: 0a20 2020 2020 2020 2020 2020 2073 7070  .            spp
+00019b50: 0a0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00019b60: 2020 2020 2020 7265 7375 6c74 203d 205b        result = [
+00019b70: 5d0a 2020 2020 2020 2020 666f 7220 6b65  ].        for ke
+00019b80: 792c 2076 616c 7565 2069 6e20 5f6c 7965  y, value in _lye
+00019b90: 6e76 2e63 7572 7265 6e74 5f6d 6f64 756c  nv.current_modul
+00019ba0: 652e 6974 656d 7328 293a 0a20 2020 2020  e.items():.     
+00019bb0: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
+00019bc0: 696e 7374 616e 6365 2876 616c 7565 2c20  instance(value, 
+00019bd0: 6469 6374 293a 0a20 2020 2020 2020 2020  dict):.         
+00019be0: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+00019bf0: 2020 2020 2020 2020 2020 2020 6966 2022              if "
+00019c00: 6479 6e61 6d69 632d 6576 656e 7422 2069  dynamic-event" i
+00019c10: 6e20 7661 6c75 652e 6765 7428 2274 7970  n value.get("typ
+00019c20: 6573 222c 2028 2929 3a0a 2020 2020 2020  es", ()):.      
+00019c30: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00019c40: 2e61 7070 656e 6428 6b65 7929 0a20 2020  .append(key).   
+00019c50: 2020 2020 2072 6573 756c 742e 736f 7274       result.sort
+00019c60: 2829 0a20 2020 2020 2020 2072 6574 7572  ().        retur
+00019c70: 6e20 7475 706c 6528 7265 7375 6c74 290a  n tuple(result).
+00019c80: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+00019c90: 6f64 0a20 2020 2064 6566 206c 6973 745f  od.    def list_
+00019ca0: 6b6e 6f77 6e5f 6772 6f62 7328 2920 2d3e  known_grobs() ->
+00019cb0: 206c 6973 745b 7374 725d 3a0a 2020 2020   list[str]:.    
+00019cc0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00019cd0: 4c69 7374 7320 616c 6c20 4c69 6c79 506f  Lists all LilyPo
+00019ce0: 6e64 2067 726f 6273 2072 6563 6f67 6e69  nd grobs recogni
+00019cf0: 7a65 6420 6279 204c 696c 7950 6f6e 6420  zed by LilyPond 
+00019d00: 7061 7273 6572 2e0a 0a20 2020 2020 2020  parser...       
+00019d10: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
+00019d20: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
+00019d30: 2020 2020 2020 3e3e 3e20 636c 6173 735f        >>> class_
+00019d40: 203d 2061 626a 6164 2e70 6172 7365 722e   = abjad.parser.
+00019d50: 4c69 6c79 506f 6e64 5061 7273 6572 0a20  LilyPondParser. 
+00019d60: 2020 2020 2020 2020 2020 203e 3e3e 2066             >>> f
+00019d70: 6f72 2067 726f 6220 696e 2063 6c61 7373  or grob in class
+00019d80: 5f2e 6c69 7374 5f6b 6e6f 776e 5f67 726f  _.list_known_gro
+00019d90: 6273 2829 3a0a 2020 2020 2020 2020 2020  bs():.          
+00019da0: 2020 2e2e 2e20 2020 2020 7072 696e 7428    ...     print(
+00019db0: 6772 6f62 290a 2020 2020 2020 2020 2020  grob).          
+00019dc0: 2020 2e2e 2e0a 2020 2020 2020 2020 2020    ....          
+00019dd0: 2020 4163 6369 6465 6e74 616c 0a20 2020    Accidental.   
+00019de0: 2020 2020 2020 2020 2041 6363 6964 656e           Acciden
+00019df0: 7461 6c43 6175 7469 6f6e 6172 790a 2020  talCautionary.  
+00019e00: 2020 2020 2020 2020 2020 4163 6369 6465            Accide
+00019e10: 6e74 616c 506c 6163 656d 656e 740a 2020  ntalPlacement.  
+00019e20: 2020 2020 2020 2020 2020 4163 6369 6465            Accide
+00019e30: 6e74 616c 5375 6767 6573 7469 6f6e 0a20  ntalSuggestion. 
+00019e40: 2020 2020 2020 2020 2020 2041 6d62 6974             Ambit
+00019e50: 7573 0a20 2020 2020 2020 2020 2020 2041  us.            A
+00019e60: 6d62 6974 7573 4163 6369 6465 6e74 616c  mbitusAccidental
+00019e70: 0a20 2020 2020 2020 2020 2020 2041 6d62  .            Amb
+00019e80: 6974 7573 4c69 6e65 0a20 2020 2020 2020  itusLine.       
+00019e90: 2020 2020 2041 6d62 6974 7573 4e6f 7465       AmbitusNote
+00019ea0: 4865 6164 0a20 2020 2020 2020 2020 2020  Head.           
+00019eb0: 2041 7270 6567 6769 6f0a 2020 2020 2020   Arpeggio.      
+00019ec0: 2020 2020 2020 4261 6c6c 6f6f 6e54 6578        BalloonTex
+00019ed0: 7449 7465 6d0a 2020 2020 2020 2020 2020  tItem.          
+00019ee0: 2020 4261 724c 696e 650a 2020 2020 2020    BarLine.      
+00019ef0: 2020 2020 2020 4261 724e 756d 6265 720a        BarNumber.
+00019f00: 2020 2020 2020 2020 2020 2020 4261 7373              Bass
+00019f10: 4669 6775 7265 0a20 2020 2020 2020 2020  Figure.         
+00019f20: 2020 2042 6173 7346 6967 7572 6541 6c69     BassFigureAli
+00019f30: 676e 6d65 6e74 0a20 2020 2020 2020 2020  gnment.         
+00019f40: 2020 2042 6173 7346 6967 7572 6541 6c69     BassFigureAli
+00019f50: 676e 6d65 6e74 506f 7369 7469 6f6e 696e  gnmentPositionin
+00019f60: 670a 2020 2020 2020 2020 2020 2020 4261  g.            Ba
+00019f70: 7373 4669 6775 7265 4272 6163 6b65 740a  ssFigureBracket.
+00019f80: 2020 2020 2020 2020 2020 2020 4261 7373              Bass
+00019f90: 4669 6775 7265 436f 6e74 696e 7561 7469  FigureContinuati
+00019fa0: 6f6e 0a20 2020 2020 2020 2020 2020 2042  on.            B
+00019fb0: 6173 7346 6967 7572 654c 696e 650a 2020  assFigureLine.  
+00019fc0: 2020 2020 2020 2020 2020 4265 616d 0a20            Beam. 
+00019fd0: 2020 2020 2020 2020 2020 2042 656e 6441             BendA
+00019fe0: 6674 6572 0a20 2020 2020 2020 2020 2020  fter.           
+00019ff0: 2042 7265 616b 416c 6967 6e47 726f 7570   BreakAlignGroup
+0001a000: 0a20 2020 2020 2020 2020 2020 2042 7265  .            Bre
+0001a010: 616b 416c 6967 6e6d 656e 740a 2020 2020  akAlignment.    
+0001a020: 2020 2020 2020 2020 4272 6561 7468 696e          Breathin
+0001a030: 6753 6967 6e0a 2020 2020 2020 2020 2020  gSign.          
+0001a040: 2020 4368 6f72 644e 616d 650a 2020 2020    ChordName.    
+0001a050: 2020 2020 2020 2020 436c 6566 0a20 2020          Clef.   
+0001a060: 2020 2020 2020 2020 2043 6c65 664d 6f64           ClefMod
+0001a070: 6966 6965 720a 2020 2020 2020 2020 2020  ifier.          
+0001a080: 2020 436c 7573 7465 7253 7061 6e6e 6572    ClusterSpanner
+0001a090: 0a20 2020 2020 2020 2020 2020 2043 6c75  .            Clu
+0001a0a0: 7374 6572 5370 616e 6e65 7242 6561 636f  sterSpannerBeaco
+0001a0b0: 6e0a 2020 2020 2020 2020 2020 2020 436f  n.            Co
+0001a0c0: 6d62 696e 6554 6578 7453 6372 6970 740a  mbineTextScript.
+0001a0d0: 2020 2020 2020 2020 2020 2020 4375 6543              CueC
+0001a0e0: 6c65 660a 2020 2020 2020 2020 2020 2020  lef.            
+0001a0f0: 4375 6545 6e64 436c 6566 0a20 2020 2020  CueEndClef.     
+0001a100: 2020 2020 2020 2043 7573 746f 730a 2020         Custos.  
+0001a110: 2020 2020 2020 2020 2020 446f 7443 6f6c            DotCol
+0001a120: 756d 6e0a 2020 2020 2020 2020 2020 2020  umn.            
+0001a130: 446f 7473 0a20 2020 2020 2020 2020 2020  Dots.           
+0001a140: 2044 6f75 626c 6550 6572 6365 6e74 5265   DoublePercentRe
+0001a150: 7065 6174 0a20 2020 2020 2020 2020 2020  peat.           
+0001a160: 2044 6f75 626c 6550 6572 6365 6e74 5265   DoublePercentRe
+0001a170: 7065 6174 436f 756e 7465 720a 2020 2020  peatCounter.    
+0001a180: 2020 2020 2020 2020 446f 7562 6c65 5265          DoubleRe
+0001a190: 7065 6174 536c 6173 680a 2020 2020 2020  peatSlash.      
+0001a1a0: 2020 2020 2020 4479 6e61 6d69 634c 696e        DynamicLin
+0001a1b0: 6553 7061 6e6e 6572 0a20 2020 2020 2020  eSpanner.       
+0001a1c0: 2020 2020 2044 796e 616d 6963 5465 7874       DynamicText
+0001a1d0: 0a20 2020 2020 2020 2020 2020 2044 796e  .            Dyn
+0001a1e0: 616d 6963 5465 7874 5370 616e 6e65 720a  amicTextSpanner.
+0001a1f0: 2020 2020 2020 2020 2020 2020 4570 6973              Epis
+0001a200: 656d 610a 2020 2020 2020 2020 2020 2020  ema.            
+0001a210: 4669 6e67 6572 696e 670a 2020 2020 2020  Fingering.      
+0001a220: 2020 2020 2020 4669 6e67 6572 696e 6743        FingeringC
+0001a230: 6f6c 756d 6e0a 2020 2020 2020 2020 2020  olumn.          
+0001a240: 2020 466c 6167 0a20 2020 2020 2020 2020    Flag.         
+0001a250: 2020 2046 6f6f 746e 6f74 6549 7465 6d0a     FootnoteItem.
+0001a260: 2020 2020 2020 2020 2020 2020 466f 6f74              Foot
+0001a270: 6e6f 7465 5370 616e 6e65 720a 2020 2020  noteSpanner.    
+0001a280: 2020 2020 2020 2020 4672 6574 426f 6172          FretBoar
+0001a290: 640a 2020 2020 2020 2020 2020 2020 476c  d.            Gl
+0001a2a0: 6973 7361 6e64 6f0a 2020 2020 2020 2020  issando.        
+0001a2b0: 2020 2020 4772 6163 6553 7061 6369 6e67      GraceSpacing
+0001a2c0: 0a20 2020 2020 2020 2020 2020 2047 7269  .            Gri
+0001a2d0: 644c 696e 650a 2020 2020 2020 2020 2020  dLine.          
+0001a2e0: 2020 4772 6964 506f 696e 740a 2020 2020    GridPoint.    
+0001a2f0: 2020 2020 2020 2020 4861 6972 7069 6e0a          Hairpin.
+0001a300: 2020 2020 2020 2020 2020 2020 486f 7269              Hori
+0001a310: 7a6f 6e74 616c 4272 6163 6b65 740a 2020  zontalBracket.  
+0001a320: 2020 2020 2020 2020 2020 486f 7269 7a6f            Horizo
+0001a330: 6e74 616c 4272 6163 6b65 7454 6578 740a  ntalBracketText.
+0001a340: 2020 2020 2020 2020 2020 2020 496e 7374              Inst
+0001a350: 7275 6d65 6e74 4e61 6d65 0a20 2020 2020  rumentName.     
+0001a360: 2020 2020 2020 2049 6e73 7472 756d 656e         Instrumen
+0001a370: 7453 7769 7463 680a 2020 2020 2020 2020  tSwitch.        
+0001a380: 2020 2020 4b65 7943 616e 6365 6c6c 6174      KeyCancellat
+0001a390: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
+0001a3a0: 4b65 7953 6967 6e61 7475 7265 0a20 2020  KeySignature.   
+0001a3b0: 2020 2020 2020 2020 204b 6965 7661 6e4c           KievanL
+0001a3c0: 6967 6174 7572 650a 2020 2020 2020 2020  igature.        
+0001a3d0: 2020 2020 4c61 6973 7365 7a56 6962 7265      LaissezVibre
+0001a3e0: 7254 6965 0a20 2020 2020 2020 2020 2020  rTie.           
+0001a3f0: 204c 6169 7373 657a 5669 6272 6572 5469   LaissezVibrerTi
+0001a400: 6543 6f6c 756d 6e0a 2020 2020 2020 2020  eColumn.        
+0001a410: 2020 2020 4c65 6467 6572 4c69 6e65 5370      LedgerLineSp
+0001a420: 616e 6e65 720a 2020 2020 2020 2020 2020  anner.          
+0001a430: 2020 4c65 6674 4564 6765 0a20 2020 2020    LeftEdge.     
+0001a440: 2020 2020 2020 204c 6967 6174 7572 6542         LigatureB
+0001a450: 7261 636b 6574 0a20 2020 2020 2020 2020  racket.         
+0001a460: 2020 204c 7972 6963 4578 7465 6e64 6572     LyricExtender
+0001a470: 0a20 2020 2020 2020 2020 2020 204c 7972  .            Lyr
+0001a480: 6963 4879 7068 656e 0a20 2020 2020 2020  icHyphen.       
+0001a490: 2020 2020 204c 7972 6963 5370 6163 650a       LyricSpace.
+0001a4a0: 2020 2020 2020 2020 2020 2020 4c79 7269              Lyri
+0001a4b0: 6354 6578 740a 2020 2020 2020 2020 2020  cText.          
+0001a4c0: 2020 4d65 6173 7572 6543 6f75 6e74 6572    MeasureCounter
+0001a4d0: 0a20 2020 2020 2020 2020 2020 204d 6561  .            Mea
+0001a4e0: 7375 7265 4772 6f75 7069 6e67 0a20 2020  sureGrouping.   
+0001a4f0: 2020 2020 2020 2020 204d 656c 6f64 7949           MelodyI
+0001a500: 7465 6d0a 2020 2020 2020 2020 2020 2020  tem.            
+0001a510: 4d65 6e73 7572 616c 4c69 6761 7475 7265  MensuralLigature
+0001a520: 0a20 2020 2020 2020 2020 2020 204d 6574  .            Met
+0001a530: 726f 6e6f 6d65 4d61 726b 0a20 2020 2020  ronomeMark.     
+0001a540: 2020 2020 2020 204d 756c 7469 4d65 6173         MultiMeas
+0001a550: 7572 6552 6573 740a 2020 2020 2020 2020  ureRest.        
+0001a560: 2020 2020 4d75 6c74 694d 6561 7375 7265      MultiMeasure
+0001a570: 5265 7374 4e75 6d62 6572 0a20 2020 2020  RestNumber.     
+0001a580: 2020 2020 2020 204d 756c 7469 4d65 6173         MultiMeas
+0001a590: 7572 6552 6573 7454 6578 740a 2020 2020  ureRestText.    
+0001a5a0: 2020 2020 2020 2020 4e6f 6e4d 7573 6963          NonMusic
+0001a5b0: 616c 5061 7065 7243 6f6c 756d 6e0a 2020  alPaperColumn.  
+0001a5c0: 2020 2020 2020 2020 2020 4e6f 7465 436f            NoteCo
+0001a5d0: 6c6c 6973 696f 6e0a 2020 2020 2020 2020  llision.        
+0001a5e0: 2020 2020 4e6f 7465 436f 6c75 6d6e 0a20      NoteColumn. 
+0001a5f0: 2020 2020 2020 2020 2020 204e 6f74 6548             NoteH
+0001a600: 6561 640a 2020 2020 2020 2020 2020 2020  ead.            
+0001a610: 4e6f 7465 4e61 6d65 0a20 2020 2020 2020  NoteName.       
+0001a620: 2020 2020 204e 6f74 6553 7061 6369 6e67       NoteSpacing
+0001a630: 0a20 2020 2020 2020 2020 2020 204f 7474  .            Ott
+0001a640: 6176 6142 7261 636b 6574 0a20 2020 2020  avaBracket.     
+0001a650: 2020 2020 2020 2050 6170 6572 436f 6c75         PaperColu
+0001a660: 6d6e 0a20 2020 2020 2020 2020 2020 2050  mn.            P
+0001a670: 6172 656e 7468 6573 6573 4974 656d 0a20  arenthesesItem. 
+0001a680: 2020 2020 2020 2020 2020 2050 6572 6365             Perce
+0001a690: 6e74 5265 7065 6174 0a20 2020 2020 2020  ntRepeat.       
+0001a6a0: 2020 2020 2050 6572 6365 6e74 5265 7065       PercentRepe
+0001a6b0: 6174 436f 756e 7465 720a 2020 2020 2020  atCounter.      
+0001a6c0: 2020 2020 2020 5068 7261 7369 6e67 536c        PhrasingSl
+0001a6d0: 7572 0a20 2020 2020 2020 2020 2020 2050  ur.            P
+0001a6e0: 6961 6e6f 5065 6461 6c42 7261 636b 6574  ianoPedalBracket
+0001a6f0: 0a20 2020 2020 2020 2020 2020 2052 6568  .            Reh
+0001a700: 6561 7273 616c 4d61 726b 0a20 2020 2020  earsalMark.     
+0001a710: 2020 2020 2020 2052 6570 6561 7453 6c61         RepeatSla
+0001a720: 7368 0a20 2020 2020 2020 2020 2020 2052  sh.            R
+0001a730: 6570 6561 7454 6965 0a20 2020 2020 2020  epeatTie.       
+0001a740: 2020 2020 2052 6570 6561 7454 6965 436f       RepeatTieCo
+0001a750: 6c75 6d6e 0a20 2020 2020 2020 2020 2020  lumn.           
+0001a760: 2052 6573 740a 2020 2020 2020 2020 2020   Rest.          
+0001a770: 2020 5265 7374 436f 6c6c 6973 696f 6e0a    RestCollision.
+0001a780: 2020 2020 2020 2020 2020 2020 5363 7269              Scri
+0001a790: 7074 0a20 2020 2020 2020 2020 2020 2053  pt.            S
+0001a7a0: 6372 6970 7443 6f6c 756d 6e0a 2020 2020  criptColumn.    
+0001a7b0: 2020 2020 2020 2020 5363 7269 7074 526f          ScriptRo
+0001a7c0: 770a 2020 2020 2020 2020 2020 2020 536c  w.            Sl
+0001a7d0: 7572 0a20 2020 2020 2020 2020 2020 2053  ur.            S
+0001a7e0: 6f73 7465 6e75 746f 5065 6461 6c0a 2020  ostenutoPedal.  
+0001a7f0: 2020 2020 2020 2020 2020 536f 7374 656e            Sosten
+0001a800: 7574 6f50 6564 616c 4c69 6e65 5370 616e  utoPedalLineSpan
+0001a810: 6e65 720a 2020 2020 2020 2020 2020 2020  ner.            
+0001a820: 5370 6163 696e 6753 7061 6e6e 6572 0a20  SpacingSpanner. 
+0001a830: 2020 2020 2020 2020 2020 2053 7061 6e42             SpanB
+0001a840: 6172 0a20 2020 2020 2020 2020 2020 2053  ar.            S
+0001a850: 7061 6e42 6172 5374 7562 0a20 2020 2020  panBarStub.     
+0001a860: 2020 2020 2020 2053 7461 6666 4772 6f75         StaffGrou
+0001a870: 7065 720a 2020 2020 2020 2020 2020 2020  per.            
+0001a880: 5374 6166 6653 7061 6369 6e67 0a20 2020  StaffSpacing.   
+0001a890: 2020 2020 2020 2020 2053 7461 6666 5379           StaffSy
+0001a8a0: 6d62 6f6c 0a20 2020 2020 2020 2020 2020  mbol.           
+0001a8b0: 2053 7461 6e7a 614e 756d 6265 720a 2020   StanzaNumber.  
+0001a8c0: 2020 2020 2020 2020 2020 5374 656d 0a20            Stem. 
+0001a8d0: 2020 2020 2020 2020 2020 2053 7465 6d53             StemS
+0001a8e0: 7475 620a 2020 2020 2020 2020 2020 2020  tub.            
+0001a8f0: 5374 656d 5472 656d 6f6c 6f0a 2020 2020  StemTremolo.    
+0001a900: 2020 2020 2020 2020 5374 7269 6e67 4e75          StringNu
+0001a910: 6d62 6572 0a20 2020 2020 2020 2020 2020  mber.           
+0001a920: 2053 7472 6f6b 6546 696e 6765 720a 2020   StrokeFinger.  
+0001a930: 2020 2020 2020 2020 2020 5375 7374 6169            Sustai
+0001a940: 6e50 6564 616c 0a20 2020 2020 2020 2020  nPedal.         
+0001a950: 2020 2053 7573 7461 696e 5065 6461 6c4c     SustainPedalL
+0001a960: 696e 6553 7061 6e6e 6572 0a20 2020 2020  ineSpanner.     
+0001a970: 2020 2020 2020 2053 7973 7465 6d0a 2020         System.  
+0001a980: 2020 2020 2020 2020 2020 5379 7374 656d            System
+0001a990: 5374 6172 7442 6172 0a20 2020 2020 2020  StartBar.       
+0001a9a0: 2020 2020 2053 7973 7465 6d53 7461 7274       SystemStart
+0001a9b0: 4272 6163 650a 2020 2020 2020 2020 2020  Brace.          
+0001a9c0: 2020 5379 7374 656d 5374 6172 7442 7261    SystemStartBra
+0001a9d0: 636b 6574 0a20 2020 2020 2020 2020 2020  cket.           
+0001a9e0: 2053 7973 7465 6d53 7461 7274 5371 7561   SystemStartSqua
+0001a9f0: 7265 0a20 2020 2020 2020 2020 2020 2054  re.            T
+0001aa00: 6162 4e6f 7465 4865 6164 0a20 2020 2020  abNoteHead.     
+0001aa10: 2020 2020 2020 2054 6578 7453 6372 6970         TextScrip
+0001aa20: 740a 2020 2020 2020 2020 2020 2020 5465  t.            Te
+0001aa30: 7874 5370 616e 6e65 720a 2020 2020 2020  xtSpanner.      
+0001aa40: 2020 2020 2020 5469 650a 2020 2020 2020        Tie.      
+0001aa50: 2020 2020 2020 5469 6543 6f6c 756d 6e0a        TieColumn.
+0001aa60: 2020 2020 2020 2020 2020 2020 5469 6d65              Time
+0001aa70: 5369 676e 6174 7572 650a 2020 2020 2020  Signature.      
+0001aa80: 2020 2020 2020 5472 696c 6c50 6974 6368        TrillPitch
+0001aa90: 4163 6369 6465 6e74 616c 0a20 2020 2020  Accidental.     
+0001aaa0: 2020 2020 2020 2054 7269 6c6c 5069 7463         TrillPitc
+0001aab0: 6847 726f 7570 0a20 2020 2020 2020 2020  hGroup.         
+0001aac0: 2020 2054 7269 6c6c 5069 7463 6848 6561     TrillPitchHea
+0001aad0: 640a 2020 2020 2020 2020 2020 2020 5472  d.            Tr
+0001aae0: 696c 6c53 7061 6e6e 6572 0a20 2020 2020  illSpanner.     
+0001aaf0: 2020 2020 2020 2054 7570 6c65 7442 7261         TupletBra
+0001ab00: 636b 6574 0a20 2020 2020 2020 2020 2020  cket.           
+0001ab10: 2054 7570 6c65 744e 756d 6265 720a 2020   TupletNumber.  
+0001ab20: 2020 2020 2020 2020 2020 556e 6143 6f72            UnaCor
+0001ab30: 6461 5065 6461 6c0a 2020 2020 2020 2020  daPedal.        
+0001ab40: 2020 2020 556e 6143 6f72 6461 5065 6461      UnaCordaPeda
+0001ab50: 6c4c 696e 6553 7061 6e6e 6572 0a20 2020  lLineSpanner.   
+0001ab60: 2020 2020 2020 2020 2056 6174 6963 616e           Vatican
+0001ab70: 614c 6967 6174 7572 650a 2020 2020 2020  aLigature.      
+0001ab80: 2020 2020 2020 5665 7274 6963 616c 0a20        Vertical. 
+0001ab90: 2020 2020 2020 2020 2020 2056 6572 7469             Verti
+0001aba0: 6361 6c41 7869 7347 726f 7570 0a20 2020  calAxisGroup.   
+0001abb0: 2020 2020 2020 2020 2056 6f69 6365 466f           VoiceFo
+0001abc0: 6c6c 6f77 6572 0a20 2020 2020 2020 2020  llower.         
+0001abd0: 2020 2056 6f6c 7461 4272 6163 6b65 740a     VoltaBracket.
+0001abe0: 2020 2020 2020 2020 2020 2020 566f 6c74              Volt
+0001abf0: 6142 7261 636b 6574 5370 616e 6e65 720a  aBracketSpanner.
+0001ac00: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+0001ac10: 2020 2020 2020 7265 7475 726e 2073 6f72        return sor
+0001ac20: 7465 6428 5f6c 7965 6e76 2e67 726f 625f  ted(_lyenv.grob_
+0001ac30: 696e 7465 7266 6163 6573 2e6b 6579 7328  interfaces.keys(
+0001ac40: 2929 0a0a 2020 2020 4073 7461 7469 636d  ))..    @staticm
+0001ac50: 6574 686f 640a 2020 2020 6465 6620 6c69  ethod.    def li
+0001ac60: 7374 5f6b 6e6f 776e 5f6c 616e 6775 6167  st_known_languag
+0001ac70: 6573 2829 202d 3e20 6c69 7374 5b73 7472  es() -> list[str
+0001ac80: 5d3a 0a20 2020 2020 2020 2022 2222 0a20  ]:.        """. 
+0001ac90: 2020 2020 2020 204c 6973 7473 2061 6c6c         Lists all
+0001aca0: 206e 6f74 652d 696e 7075 7420 6c61 6e67   note-input lang
+0001acb0: 7561 6765 7320 7265 636f 676e 697a 6564  uages recognized
+0001acc0: 2062 7920 4c69 6c79 506f 6e64 2070 6172   by LilyPond par
+0001acd0: 7365 722e 0a0a 2020 2020 2020 2020 2e2e  ser...        ..
+0001ace0: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
+0001acf0: 616d 706c 650a 0a20 2020 2020 2020 2020  ample..         
+0001ad00: 2020 203e 3e3e 2063 6c61 7373 5f20 3d20     >>> class_ = 
+0001ad10: 6162 6a61 642e 7061 7273 6572 2e4c 696c  abjad.parser.Lil
+0001ad20: 7950 6f6e 6450 6172 7365 720a 2020 2020  yPondParser.    
+0001ad30: 2020 2020 2020 2020 3e3e 3e20 666f 7220          >>> for 
+0001ad40: 6c61 6e67 7561 6765 2069 6e20 636c 6173  language in clas
+0001ad50: 735f 2e6c 6973 745f 6b6e 6f77 6e5f 6c61  s_.list_known_la
+0001ad60: 6e67 7561 6765 7328 293a 0a20 2020 2020  nguages():.     
+0001ad70: 2020 2020 2020 202e 2e2e 2020 2020 2070         ...     p
+0001ad80: 7269 6e74 286c 616e 6775 6167 6529 0a20  rint(language). 
+0001ad90: 2020 2020 2020 2020 2020 202e 2e2e 0a20             .... 
+0001ada0: 2020 2020 2020 2020 2020 2063 6174 616c             catal
+0001adb0: 616e 0a20 2020 2020 2020 2020 2020 2064  an.            d
+0001adc0: 6575 7473 6368 0a20 2020 2020 2020 2020  eutsch.         
+0001add0: 2020 2065 6e67 6c69 7368 0a20 2020 2020     english.     
+0001ade0: 2020 2020 2020 2065 7370 616e 6f6c 0a20         espanol. 
+0001adf0: 2020 2020 2020 2020 2020 2065 7370 61c3             espa.
+0001ae00: b16f 6c0a 2020 2020 2020 2020 2020 2020  .ol.            
+0001ae10: 6672 616e c3a7 6169 730a 2020 2020 2020  fran..ais.      
+0001ae20: 2020 2020 2020 6974 616c 6961 6e6f 0a20        italiano. 
+0001ae30: 2020 2020 2020 2020 2020 206e 6564 6572             neder
+0001ae40: 6c61 6e64 730a 2020 2020 2020 2020 2020  lands.          
+0001ae50: 2020 6e6f 7273 6b0a 2020 2020 2020 2020    norsk.        
+0001ae60: 2020 2020 706f 7274 7567 7565 730a 2020      portugues.  
+0001ae70: 2020 2020 2020 2020 2020 7375 6f6d 690a            suomi.
+0001ae80: 2020 2020 2020 2020 2020 2020 7376 656e              sven
+0001ae90: 736b 610a 2020 2020 2020 2020 2020 2020  ska.            
+0001aea0: 766c 6161 6d73 0a0a 2020 2020 2020 2020  vlaams..        
+0001aeb0: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+0001aec0: 726e 2073 6f72 7465 6428 5f6c 7965 6e76  rn sorted(_lyenv
+0001aed0: 2e6c 616e 6775 6167 655f 7069 7463 685f  .language_pitch_
+0001aee0: 6e61 6d65 732e 6b65 7973 2829 290a 0a20  names.keys()).. 
+0001aef0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+0001af00: 0a20 2020 2064 6566 206c 6973 745f 6b6e  .    def list_kn
+0001af10: 6f77 6e5f 6d61 726b 7570 5f66 756e 6374  own_markup_funct
+0001af20: 696f 6e73 2829 202d 3e20 6c69 7374 5b73  ions() -> list[s
+0001af30: 7472 5d3a 0a20 2020 2020 2020 2022 2222  tr]:.        """
+0001af40: 0a20 2020 2020 2020 204c 6973 7473 2061  .        Lists a
+0001af50: 6c6c 206d 6172 6b75 7020 6675 6e63 7469  ll markup functi
+0001af60: 6f6e 7320 7265 636f 676e 697a 6564 2062  ons recognized b
+0001af70: 7920 4c69 6c79 506f 6e64 2070 6172 7365  y LilyPond parse
+0001af80: 722e 0a0a 2020 2020 2020 2020 2e2e 2020  r...        ..  
+0001af90: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
+0001afa0: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
+0001afb0: 203e 3e3e 2063 6c61 7373 5f20 203d 2061   >>> class_  = a
+0001afc0: 626a 6164 2e70 6172 7365 722e 4c69 6c79  bjad.parser.Lily
+0001afd0: 506f 6e64 5061 7273 6572 0a20 2020 2020  PondParser.     
+0001afe0: 2020 2020 2020 203e 3e3e 2066 6f72 206e         >>> for n
+0001aff0: 616d 6520 696e 2063 6c61 7373 5f2e 6c69  ame in class_.li
+0001b000: 7374 5f6b 6e6f 776e 5f6d 6172 6b75 705f  st_known_markup_
+0001b010: 6675 6e63 7469 6f6e 7328 293a 0a20 2020  functions():.   
+0001b020: 2020 2020 2020 2020 202e 2e2e 2020 2020           ...    
+0001b030: 2070 7269 6e74 286e 616d 6529 0a20 2020   print(name).   
+0001b040: 2020 2020 2020 2020 202e 2e2e 0a20 2020           ....   
+0001b050: 2020 2020 2020 2020 2061 6273 2d66 6f6e           abs-fon
+0001b060: 7473 697a 650a 2020 2020 2020 2020 2020  tsize.          
+0001b070: 2020 6172 726f 772d 6865 6164 0a20 2020    arrow-head.   
+0001b080: 2020 2020 2020 2020 2061 7574 6f2d 666f           auto-fo
+0001b090: 6f74 6e6f 7465 0a20 2020 2020 2020 2020  otnote.         
+0001b0a0: 2020 2062 6163 6b73 6c61 7368 6564 2d64     backslashed-d
+0001b0b0: 6967 6974 0a20 2020 2020 2020 2020 2020  igit.           
+0001b0c0: 2062 6561 6d0a 2020 2020 2020 2020 2020   beam.          
+0001b0d0: 2020 626f 6c64 0a20 2020 2020 2020 2020    bold.         
+0001b0e0: 2020 2062 6f78 0a20 2020 2020 2020 2020     box.         
+0001b0f0: 2020 2062 7261 636b 6574 0a20 2020 2020     bracket.     
+0001b100: 2020 2020 2020 2063 6170 730a 2020 2020         caps.    
+0001b110: 2020 2020 2020 2020 6365 6e74 6572 2d61          center-a
+0001b120: 6c69 676e 0a20 2020 2020 2020 2020 2020  lign.           
+0001b130: 2063 656e 7465 722d 636f 6c75 6d6e 0a20   center-column. 
+0001b140: 2020 2020 2020 2020 2020 2063 6861 720a             char.
+0001b150: 2020 2020 2020 2020 2020 2020 6369 7263              circ
+0001b160: 6c65 0a20 2020 2020 2020 2020 2020 2063  le.            c
+0001b170: 6f6c 756d 6e0a 2020 2020 2020 2020 2020  olumn.          
+0001b180: 2020 636f 6c75 6d6e 2d6c 696e 6573 0a20    column-lines. 
+0001b190: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+0001b1a0: 6e65 0a20 2020 2020 2020 2020 2020 2063  ne.            c
+0001b1b0: 6f6d 706f 756e 642d 6d65 7465 720a 2020  ompound-meter.  
+0001b1c0: 2020 2020 2020 2020 2020 636f 6e63 6174            concat
+0001b1d0: 0a20 2020 2020 2020 2020 2020 2063 7573  .            cus
+0001b1e0: 746f 6d54 6162 436c 6566 0a20 2020 2020  tomTabClef.     
+0001b1f0: 2020 2020 2020 2064 6972 2d63 6f6c 756d         dir-colum
+0001b200: 6e0a 2020 2020 2020 2020 2020 2020 646f  n.            do
+0001b210: 7562 6c65 666c 6174 0a20 2020 2020 2020  ubleflat.       
+0001b220: 2020 2020 2064 6f75 626c 6573 6861 7270       doublesharp
+0001b230: 0a20 2020 2020 2020 2020 2020 2064 7261  .            dra
+0001b240: 772d 6369 7263 6c65 0a20 2020 2020 2020  w-circle.       
+0001b250: 2020 2020 2064 7261 772d 6461 7368 6564       draw-dashed
+0001b260: 2d6c 696e 650a 2020 2020 2020 2020 2020  -line.          
+0001b270: 2020 6472 6177 2d64 6f74 7465 642d 6c69    draw-dotted-li
+0001b280: 6e65 0a20 2020 2020 2020 2020 2020 2064  ne.            d
+0001b290: 7261 772d 686c 696e 650a 2020 2020 2020  raw-hline.      
+0001b2a0: 2020 2020 2020 6472 6177 2d6c 696e 650a        draw-line.
+0001b2b0: 2020 2020 2020 2020 2020 2020 6479 6e61              dyna
+0001b2c0: 6d69 630a 2020 2020 2020 2020 2020 2020  mic.            
+0001b2d0: 656c 6c69 7073 650a 2020 2020 2020 2020  ellipse.        
+0001b2e0: 2020 2020 6570 7366 696c 650a 2020 2020      epsfile.    
+0001b2f0: 2020 2020 2020 2020 6579 6567 6c61 7373          eyeglass
+0001b300: 6573 0a20 2020 2020 2020 2020 2020 2066  es.            f
+0001b310: 6572 6d61 7461 0a20 2020 2020 2020 2020  ermata.         
+0001b320: 2020 2066 696c 6c2d 6c69 6e65 0a20 2020     fill-line.   
+0001b330: 2020 2020 2020 2020 2066 696c 6c2d 7769           fill-wi
+0001b340: 7468 2d70 6174 7465 726e 0a20 2020 2020  th-pattern.     
+0001b350: 2020 2020 2020 2066 696c 6c65 642d 626f         filled-bo
+0001b360: 780a 2020 2020 2020 2020 2020 2020 6669  x.            fi
+0001b370: 6e67 6572 0a20 2020 2020 2020 2020 2020  nger.           
+0001b380: 2066 6972 7374 2d76 6973 6962 6c65 0a20   first-visible. 
+0001b390: 2020 2020 2020 2020 2020 2066 6c61 740a             flat.
+0001b3a0: 2020 2020 2020 2020 2020 2020 666f 6e74              font
+0001b3b0: 4361 7073 0a20 2020 2020 2020 2020 2020  Caps.           
+0001b3c0: 2066 6f6e 7473 697a 650a 2020 2020 2020   fontsize.      
+0001b3d0: 2020 2020 2020 666f 6f74 6e6f 7465 0a20        footnote. 
+0001b3e0: 2020 2020 2020 2020 2020 2066 7261 6374             fract
+0001b3f0: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
+0001b400: 6672 6574 2d64 6961 6772 616d 0a20 2020  fret-diagram.   
+0001b410: 2020 2020 2020 2020 2066 7265 742d 6469           fret-di
+0001b420: 6167 7261 6d2d 7465 7273 650a 2020 2020  agram-terse.    
+0001b430: 2020 2020 2020 2020 6672 6574 2d64 6961          fret-dia
+0001b440: 6772 616d 2d76 6572 626f 7365 0a20 2020  gram-verbose.   
+0001b450: 2020 2020 2020 2020 2066 726f 6d70 726f           frompro
+0001b460: 7065 7274 790a 2020 2020 2020 2020 2020  perty.          
+0001b470: 2020 6765 6e65 7261 6c2d 616c 6967 6e0a    general-align.
+0001b480: 2020 2020 2020 2020 2020 2020 6861 6c69              hali
+0001b490: 676e 0a20 2020 2020 2020 2020 2020 2068  gn.            h
+0001b4a0: 6172 702d 7065 6461 6c0a 2020 2020 2020  arp-pedal.      
+0001b4b0: 2020 2020 2020 6862 7261 636b 6574 0a20        hbracket. 
+0001b4c0: 2020 2020 2020 2020 2020 2068 6365 6e74             hcent
+0001b4d0: 6572 2d69 6e0a 2020 2020 2020 2020 2020  er-in.          
+0001b4e0: 2020 6873 7061 6365 0a20 2020 2020 2020    hspace.       
+0001b4f0: 2020 2020 2068 7567 650a 2020 2020 2020       huge.      
+0001b500: 2020 2020 2020 6974 616c 6963 0a20 2020        italic.   
+0001b510: 2020 2020 2020 2020 206a 7573 7469 6669           justifi
+0001b520: 6564 2d6c 696e 6573 0a20 2020 2020 2020  ed-lines.       
+0001b530: 2020 2020 206a 7573 7469 6679 0a20 2020       justify.   
+0001b540: 2020 2020 2020 2020 206a 7573 7469 6679           justify
+0001b550: 2d66 6965 6c64 0a20 2020 2020 2020 2020  -field.         
+0001b560: 2020 206a 7573 7469 6679 2d6c 696e 650a     justify-line.
+0001b570: 2020 2020 2020 2020 2020 2020 6a75 7374              just
+0001b580: 6966 792d 7374 7269 6e67 0a20 2020 2020  ify-string.     
+0001b590: 2020 2020 2020 206c 6172 6765 0a20 2020         large.   
+0001b5a0: 2020 2020 2020 2020 206c 6172 6765 720a           larger.
+0001b5b0: 2020 2020 2020 2020 2020 2020 6c65 6674              left
+0001b5c0: 2d61 6c69 676e 0a20 2020 2020 2020 2020  -align.         
+0001b5d0: 2020 206c 6566 742d 6272 6163 650a 2020     left-brace.  
+0001b5e0: 2020 2020 2020 2020 2020 6c65 6674 2d63            left-c
+0001b5f0: 6f6c 756d 6e0a 2020 2020 2020 2020 2020  olumn.          
+0001b600: 2020 6c69 6e65 0a20 2020 2020 2020 2020    line.         
+0001b610: 2020 206c 6f6f 6b75 700a 2020 2020 2020     lookup.      
+0001b620: 2020 2020 2020 6c6f 7765 720a 2020 2020        lower.    
+0001b630: 2020 2020 2020 2020 6d61 676e 6966 790a          magnify.
+0001b640: 2020 2020 2020 2020 2020 2020 6d61 702d              map-
+0001b650: 6d61 726b 7570 2d63 6f6d 6d61 6e64 730a  markup-commands.
+0001b660: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
+0001b670: 616c 7068 6162 6574 0a20 2020 2020 2020  alphabet.       
+0001b680: 2020 2020 206d 6172 6b6c 6574 7465 720a       markletter.
+0001b690: 2020 2020 2020 2020 2020 2020 6d65 6469              medi
+0001b6a0: 756d 0a20 2020 2020 2020 2020 2020 206d  um.            m
+0001b6b0: 7573 6963 676c 7970 680a 2020 2020 2020  usicglyph.      
+0001b6c0: 2020 2020 2020 6e61 7475 7261 6c0a 2020        natural.  
+0001b6d0: 2020 2020 2020 2020 2020 6e6f 726d 616c            normal
+0001b6e0: 2d73 697a 652d 7375 620a 2020 2020 2020  -size-sub.      
+0001b6f0: 2020 2020 2020 6e6f 726d 616c 2d73 697a        normal-siz
+0001b700: 652d 7375 7065 720a 2020 2020 2020 2020  e-super.        
+0001b710: 2020 2020 6e6f 726d 616c 2d74 6578 740a      normal-text.
+0001b720: 2020 2020 2020 2020 2020 2020 6e6f 726d              norm
+0001b730: 616c 7369 7a65 0a20 2020 2020 2020 2020  alsize.         
+0001b740: 2020 206e 6f74 650a 2020 2020 2020 2020     note.        
+0001b750: 2020 2020 6e6f 7465 2d62 792d 6e75 6d62      note-by-numb
+0001b760: 6572 0a20 2020 2020 2020 2020 2020 206e  er.            n
+0001b770: 756c 6c0a 2020 2020 2020 2020 2020 2020  ull.            
+0001b780: 6e75 6d62 6572 0a20 2020 2020 2020 2020  number.         
+0001b790: 2020 206f 6e2d 7468 652d 666c 790a 2020     on-the-fly.  
+0001b7a0: 2020 2020 2020 2020 2020 6f76 616c 0a20            oval. 
+0001b7b0: 2020 2020 2020 2020 2020 206f 7665 7272             overr
+0001b7c0: 6964 650a 2020 2020 2020 2020 2020 2020  ide.            
+0001b7d0: 6f76 6572 7269 6465 2d6c 696e 6573 0a20  override-lines. 
+0001b7e0: 2020 2020 2020 2020 2020 2070 6164 0a20             pad. 
+0001b7f0: 2020 2020 2020 2020 2020 2070 6164 2d61             pad-a
+0001b800: 726f 756e 640a 2020 2020 2020 2020 2020  round.          
+0001b810: 2020 7061 642d 746f 2d62 6f78 0a20 2020    pad-to-box.   
+0001b820: 2020 2020 2020 2020 2070 6164 2d78 0a20           pad-x. 
+0001b830: 2020 2020 2020 2020 2020 2070 6167 652d             page-
+0001b840: 6c69 6e6b 0a20 2020 2020 2020 2020 2020  link.           
+0001b850: 2070 6167 652d 7265 660a 2020 2020 2020   page-ref.      
+0001b860: 2020 2020 2020 7061 7265 6e74 6865 7369        parenthesi
+0001b870: 7a65 0a20 2020 2020 2020 2020 2020 2070  ze.            p
+0001b880: 6174 680a 2020 2020 2020 2020 2020 2020  ath.            
+0001b890: 7061 7474 6572 6e0a 2020 2020 2020 2020  pattern.        
+0001b8a0: 2020 2020 706f 7374 7363 7269 7074 0a20      postscript. 
+0001b8b0: 2020 2020 2020 2020 2020 2070 726f 7065             prope
+0001b8c0: 7274 792d 7265 6375 7273 6976 650a 2020  rty-recursive.  
+0001b8d0: 2020 2020 2020 2020 2020 7075 742d 6164            put-ad
+0001b8e0: 6a61 6365 6e74 0a20 2020 2020 2020 2020  jacent.         
+0001b8f0: 2020 2072 6169 7365 0a20 2020 2020 2020     raise.       
+0001b900: 2020 2020 2072 6570 6c61 6365 0a20 2020       replace.   
+0001b910: 2020 2020 2020 2020 2072 6573 740a 2020           rest.  
+0001b920: 2020 2020 2020 2020 2020 7265 7374 2d62            rest-b
+0001b930: 792d 6e75 6d62 6572 0a20 2020 2020 2020  y-number.       
+0001b940: 2020 2020 2072 6967 6874 2d61 6c69 676e       right-align
+0001b950: 0a20 2020 2020 2020 2020 2020 2072 6967  .            rig
+0001b960: 6874 2d62 7261 6365 0a20 2020 2020 2020  ht-brace.       
+0001b970: 2020 2020 2072 6967 6874 2d63 6f6c 756d       right-colum
+0001b980: 6e0a 2020 2020 2020 2020 2020 2020 726f  n.            ro
+0001b990: 6d61 6e0a 2020 2020 2020 2020 2020 2020  man.            
+0001b9a0: 726f 7461 7465 0a20 2020 2020 2020 2020  rotate.         
+0001b9b0: 2020 2072 6f75 6e64 6564 2d62 6f78 0a20     rounded-box. 
+0001b9c0: 2020 2020 2020 2020 2020 2073 616e 730a             sans.
+0001b9d0: 2020 2020 2020 2020 2020 2020 7363 616c              scal
+0001b9e0: 650a 2020 2020 2020 2020 2020 2020 7363  e.            sc
+0001b9f0: 6f72 650a 2020 2020 2020 2020 2020 2020  ore.            
+0001ba00: 7363 6f72 652d 6c69 6e65 730a 2020 2020  score-lines.    
+0001ba10: 2020 2020 2020 2020 7365 6d69 666c 6174          semiflat
+0001ba20: 0a20 2020 2020 2020 2020 2020 2073 656d  .            sem
+0001ba30: 6973 6861 7270 0a20 2020 2020 2020 2020  isharp.         
+0001ba40: 2020 2073 6573 7175 6966 6c61 740a 2020     sesquiflat.  
+0001ba50: 2020 2020 2020 2020 2020 7365 7371 7569            sesqui
+0001ba60: 7368 6172 700a 2020 2020 2020 2020 2020  sharp.          
+0001ba70: 2020 7368 6172 700a 2020 2020 2020 2020    sharp.        
+0001ba80: 2020 2020 7369 6d70 6c65 0a20 2020 2020      simple.     
+0001ba90: 2020 2020 2020 2073 6c61 7368 6564 2d64         slashed-d
+0001baa0: 6967 6974 0a20 2020 2020 2020 2020 2020  igit.           
+0001bab0: 2073 6d61 6c6c 0a20 2020 2020 2020 2020   small.         
+0001bac0: 2020 2073 6d61 6c6c 4361 7073 0a20 2020     smallCaps.   
+0001bad0: 2020 2020 2020 2020 2073 6d61 6c6c 6572           smaller
+0001bae0: 0a20 2020 2020 2020 2020 2020 2073 7465  .            ste
+0001baf0: 6e63 696c 0a20 2020 2020 2020 2020 2020  ncil.           
+0001bb00: 2073 7472 7574 0a20 2020 2020 2020 2020   strut.         
+0001bb10: 2020 2073 7562 0a20 2020 2020 2020 2020     sub.         
+0001bb20: 2020 2073 7570 6572 0a20 2020 2020 2020     super.       
+0001bb30: 2020 2020 2074 6162 6c65 2d6f 662d 636f       table-of-co
+0001bb40: 6e74 656e 7473 0a20 2020 2020 2020 2020  ntents.         
+0001bb50: 2020 2074 6565 6e79 0a20 2020 2020 2020     teeny.       
+0001bb60: 2020 2020 2074 6578 740a 2020 2020 2020       text.      
+0001bb70: 2020 2020 2020 7469 6564 2d6c 7972 6963        tied-lyric
+0001bb80: 0a20 2020 2020 2020 2020 2020 2074 696e  .            tin
+0001bb90: 790a 2020 2020 2020 2020 2020 2020 7472  y.            tr
+0001bba0: 616e 736c 6174 650a 2020 2020 2020 2020  anslate.        
+0001bbb0: 2020 2020 7472 616e 736c 6174 652d 7363      translate-sc
+0001bbc0: 616c 6564 0a20 2020 2020 2020 2020 2020  aled.           
+0001bbd0: 2074 7261 6e73 7061 7265 6e74 0a20 2020   transparent.   
+0001bbe0: 2020 2020 2020 2020 2074 7269 616e 676c           triangl
+0001bbf0: 650a 2020 2020 2020 2020 2020 2020 7479  e.            ty
+0001bc00: 7065 7772 6974 6572 0a20 2020 2020 2020  pewriter.       
+0001bc10: 2020 2020 2075 6e64 6572 6c69 6e65 0a20       underline. 
+0001bc20: 2020 2020 2020 2020 2020 2075 7072 6967             uprig
+0001bc30: 6874 0a20 2020 2020 2020 2020 2020 2076  ht.            v
+0001bc40: 6365 6e74 6572 0a20 2020 2020 2020 2020  center.         
+0001bc50: 2020 2076 6572 6261 7469 6d2d 6669 6c65     verbatim-file
+0001bc60: 0a20 2020 2020 2020 2020 2020 2076 7370  .            vsp
+0001bc70: 6163 650a 2020 2020 2020 2020 2020 2020  ace.            
+0001bc80: 7768 6974 656f 7574 0a20 2020 2020 2020  whiteout.       
+0001bc90: 2020 2020 2077 6869 7465 6f75 742d 626f       whiteout-bo
+0001bca0: 780a 2020 2020 2020 2020 2020 2020 7769  x.            wi
+0001bcb0: 7468 2d63 6f6c 6f72 0a20 2020 2020 2020  th-color.       
+0001bcc0: 2020 2020 2077 6974 682d 6469 6d65 6e73       with-dimens
+0001bcd0: 696f 6e73 0a20 2020 2020 2020 2020 2020  ions.           
+0001bce0: 2077 6974 682d 6c69 6e6b 0a20 2020 2020   with-link.     
+0001bcf0: 2020 2020 2020 2077 6974 682d 7572 6c0a         with-url.
+0001bd00: 2020 2020 2020 2020 2020 2020 776f 6f64              wood
+0001bd10: 7769 6e64 2d64 6961 6772 616d 0a20 2020  wind-diagram.   
+0001bd20: 2020 2020 2020 2020 2077 6f72 6477 7261           wordwra
+0001bd30: 700a 2020 2020 2020 2020 2020 2020 776f  p.            wo
+0001bd40: 7264 7772 6170 2d66 6965 6c64 0a20 2020  rdwrap-field.   
+0001bd50: 2020 2020 2020 2020 2077 6f72 6477 7261           wordwra
+0001bd60: 702d 696e 7465 726e 616c 0a20 2020 2020  p-internal.     
+0001bd70: 2020 2020 2020 2077 6f72 6477 7261 702d         wordwrap-
+0001bd80: 6c69 6e65 730a 2020 2020 2020 2020 2020  lines.          
+0001bd90: 2020 776f 7264 7772 6170 2d73 7472 696e    wordwrap-strin
+0001bda0: 670a 2020 2020 2020 2020 2020 2020 776f  g.            wo
+0001bdb0: 7264 7772 6170 2d73 7472 696e 672d 696e  rdwrap-string-in
+0001bdc0: 7465 726e 616c 0a0a 2020 2020 2020 2020  ternal..        
+0001bdd0: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+0001bde0: 726e 2073 6f72 7465 6428 0a20 2020 2020  rn sorted(.     
+0001bdf0: 2020 2020 2020 206c 6973 7428 5f6c 7965         list(_lye
+0001be00: 6e76 2e6d 6172 6b75 705f 6675 6e63 7469  nv.markup_functi
+0001be10: 6f6e 732e 6b65 7973 2829 290a 2020 2020  ons.keys()).    
+0001be20: 2020 2020 2020 2020 2b20 6c69 7374 285f          + list(_
+0001be30: 6c79 656e 762e 6d61 726b 7570 5f6c 6973  lyenv.markup_lis
+0001be40: 745f 6675 6e63 7469 6f6e 732e 6b65 7973  t_functions.keys
+0001be50: 2829 290a 2020 2020 2020 2020 290a 0a20  ()).        ).. 
+0001be60: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+0001be70: 0a20 2020 2064 6566 206c 6973 745f 6b6e  .    def list_kn
+0001be80: 6f77 6e5f 6d75 7369 635f 6675 6e63 7469  own_music_functi
+0001be90: 6f6e 7328 2920 2d3e 206c 6973 745b 7374  ons() -> list[st
+0001bea0: 725d 3a0a 2020 2020 2020 2020 2222 220a  r]:.        """.
+0001beb0: 2020 2020 2020 2020 4c69 7374 7320 616c          Lists al
+0001bec0: 6c20 6d75 7369 6320 6675 6e63 7469 6f6e  l music function
+0001bed0: 7320 7265 636f 676e 697a 6564 2062 7920  s recognized by 
+0001bee0: 4c69 6c79 506f 6e64 2070 6172 7365 722e  LilyPond parser.
+0001bef0: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
+0001bf00: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
+0001bf10: 650a 0a20 2020 2020 2020 2020 2020 203e  e..            >
+0001bf20: 3e3e 2063 6c61 7373 5f20 3d20 6162 6a61  >> class_ = abja
+0001bf30: 642e 7061 7273 6572 2e4c 696c 7950 6f6e  d.parser.LilyPon
+0001bf40: 6450 6172 7365 720a 2020 2020 2020 2020  dParser.        
+0001bf50: 2020 2020 3e3e 3e20 666f 7220 6e61 6d65      >>> for name
+0001bf60: 2069 6e20 636c 6173 735f 2e6c 6973 745f   in class_.list_
+0001bf70: 6b6e 6f77 6e5f 6d75 7369 635f 6675 6e63  known_music_func
+0001bf80: 7469 6f6e 7328 293a 0a20 2020 2020 2020  tions():.       
+0001bf90: 2020 2020 202e 2e2e 2020 2020 2070 7269       ...     pri
+0001bfa0: 6e74 286e 616d 6529 0a20 2020 2020 2020  nt(name).       
+0001bfb0: 2020 2020 202e 2e2e 0a20 2020 2020 2020       ....       
+0001bfc0: 2020 2020 2061 6363 6961 6363 6174 7572       acciaccatur
+0001bfd0: 610a 2020 2020 2020 2020 2020 2020 6170  a.            ap
+0001bfe0: 706f 6767 6961 7475 7261 0a20 2020 2020  poggiatura.     
+0001bff0: 2020 2020 2020 2062 6172 0a20 2020 2020         bar.     
+0001c000: 2020 2020 2020 2062 7265 6174 6865 0a20         breathe. 
+0001c010: 2020 2020 2020 2020 2020 2063 6c65 660a             clef.
+0001c020: 2020 2020 2020 2020 2020 2020 6772 6163              grac
+0001c030: 650a 2020 2020 2020 2020 2020 2020 6b65  e.            ke
+0001c040: 790a 2020 2020 2020 2020 2020 2020 6c61  y.            la
+0001c050: 6e67 7561 6765 0a20 2020 2020 2020 2020  nguage.         
+0001c060: 2020 206d 616b 6543 6c75 7374 6572 730a     makeClusters.
+0001c070: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
+0001c080: 0a20 2020 2020 2020 2020 2020 2072 656c  .            rel
+0001c090: 6174 6976 650a 2020 2020 2020 2020 2020  ative.          
+0001c0a0: 2020 736b 6970 0a20 2020 2020 2020 2020    skip.         
+0001c0b0: 2020 2074 696d 650a 2020 2020 2020 2020     time.        
+0001c0c0: 2020 2020 7469 6d65 730a 2020 2020 2020      times.      
+0001c0d0: 2020 2020 2020 7472 616e 7370 6f73 650a        transpose.
+0001c0e0: 2020 2020 2020 2020 2020 2020 7475 706c              tupl
+0001c0f0: 6574 0a0a 2020 2020 2020 2020 2222 220a  et..        """.
+0001c100: 2020 2020 2020 2020 6d75 7369 635f 6675          music_fu
+0001c110: 6e63 7469 6f6e 7320 3d20 5b5d 0a20 2020  nctions = [].   
+0001c120: 2020 2020 2066 6f72 206e 616d 6520 696e       for name in
+0001c130: 205f 6c79 656e 762e 6375 7272 656e 745f   _lyenv.current_
+0001c140: 6d6f 6475 6c65 3a0a 2020 2020 2020 2020  module:.        
+0001c150: 2020 2020 6469 6374 696f 6e61 7279 203d      dictionary =
+0001c160: 205f 6c79 656e 762e 6375 7272 656e 745f   _lyenv.current_
+0001c170: 6d6f 6475 6c65 5b6e 616d 655d 0a20 2020  module[name].   
+0001c180: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+0001c190: 6973 696e 7374 616e 6365 2864 6963 7469  isinstance(dicti
+0001c1a0: 6f6e 6172 792c 2064 6963 7429 3a0a 2020  onary, dict):.  
+0001c1b0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0001c1c0: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+0001c1d0: 2020 2061 7373 6572 7420 6973 696e 7374     assert isinst
+0001c1e0: 616e 6365 2864 6963 7469 6f6e 6172 792c  ance(dictionary,
+0001c1f0: 2064 6963 7429 0a20 2020 2020 2020 2020   dict).         
+0001c200: 2020 2069 6620 2274 7970 6522 206e 6f74     if "type" not
+0001c210: 2069 6e20 6469 6374 696f 6e61 7279 3a0a   in dictionary:.
+0001c220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c230: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
+0001c240: 2020 2020 2069 6620 6e6f 7420 6469 6374       if not dict
+0001c250: 696f 6e61 7279 5b22 7479 7065 225d 203d  ionary["type"] =
+0001c260: 3d20 226c 793a 6d75 7369 632d 6675 6e63  = "ly:music-func
+0001c270: 7469 6f6e 3f22 3a0a 2020 2020 2020 2020  tion?":.        
+0001c280: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
+0001c290: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001c2a0: 6e6f 7420 6861 7361 7474 7228 4775 696c  not hasattr(Guil
+0001c2b0: 6550 726f 7879 2c20 6e61 6d65 293a 0a20  eProxy, name):. 
+0001c2c0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0001c2d0: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+0001c2e0: 2020 2020 6d75 7369 635f 6675 6e63 7469      music_functi
+0001c2f0: 6f6e 732e 6170 7065 6e64 286e 616d 6529  ons.append(name)
+0001c300: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001c310: 736f 7274 6564 286d 7573 6963 5f66 756e  sorted(music_fun
+0001c320: 6374 696f 6e73 290a 0a20 2020 2040 636c  ctions)..    @cl
+0001c330: 6173 736d 6574 686f 640a 2020 2020 6465  assmethod.    de
+0001c340: 6620 7265 6769 7374 6572 5f6d 6172 6b75  f register_marku
+0001c350: 705f 6675 6e63 7469 6f6e 2863 6c61 7373  p_function(class
+0001c360: 5f2c 206e 616d 652c 2073 6967 6e61 7475  _, name, signatu
+0001c370: 7265 2c20 756e 646f 3d4e 6f6e 6529 202d  re, undo=None) -
+0001c380: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+0001c390: 7222 2222 0a20 2020 2020 2020 2052 6567  r""".        Reg
+0001c3a0: 6973 7465 7273 2061 2063 7573 746f 6d20  isters a custom 
+0001c3b0: 6d61 726b 7570 2066 756e 6374 696f 6e20  markup function 
+0001c3c0: 676c 6f62 616c 6c79 2077 6974 6820 4c69  globally with Li
+0001c3d0: 6c79 506f 6e64 5061 7273 6572 2e0a 0a20  lyPondParser... 
+0001c3e0: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
+0001c3f0: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+0001c400: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001c410: 6e61 6d65 203d 2027 6d79 2d63 7573 746f  name = 'my-custo
+0001c420: 6d2d 6d61 726b 7570 2d66 756e 6374 696f  m-markup-functio
+0001c430: 6e27 0a20 2020 2020 2020 2020 2020 203e  n'.            >
+0001c440: 3e3e 2073 6967 6e61 7475 7265 203d 205b  >> signature = [
+0001c450: 276d 6172 6b75 703f 275d 0a20 2020 2020  'markup?'].     
+0001c460: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0001c470: 2e70 6172 7365 722e 4c69 6c79 506f 6e64  .parser.LilyPond
+0001c480: 5061 7273 6572 2e72 6567 6973 7465 725f  Parser.register_
+0001c490: 6d61 726b 7570 5f66 756e 6374 696f 6e28  markup_function(
+0001c4a0: 6e61 6d65 2c20 7369 676e 6174 7572 6529  name, signature)
+0001c4b0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0001c4c0: 3e20 7061 7273 6572 203d 2061 626a 6164  > parser = abjad
+0001c4d0: 2e70 6172 7365 722e 4c69 6c79 506f 6e64  .parser.LilyPond
+0001c4e0: 5061 7273 6572 2829 0a20 2020 2020 2020  Parser().       
+0001c4f0: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+0001c500: 3d20 7222 5c6d 6172 6b75 7020 7b20 5c6d  = r"\markup { \m
+0001c510: 792d 6375 7374 6f6d 2d6d 6172 6b75 702d  y-custom-markup-
+0001c520: 6675 6e63 7469 6f6e 207b 2066 6f6f 2062  function { foo b
+0001c530: 6172 2062 617a 207d 207d 220a 2020 2020  ar baz } }".    
+0001c540: 2020 2020 2020 2020 3e3e 3e20 6d61 726b          >>> mark
+0001c550: 7570 203d 2070 6172 7365 7228 7374 7269  up = parser(stri
+0001c560: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0001c570: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+0001c580: 6164 2e6c 696c 7970 6f6e 6428 6d61 726b  ad.lilypond(mark
+0001c590: 7570 290a 2020 2020 2020 2020 2020 2020  up).            
+0001c5a0: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
+0001c5b0: 290a 2020 2020 2020 2020 2020 2020 5c6d  ).            \m
+0001c5c0: 6172 6b75 7020 7b20 5c6d 792d 6375 7374  arkup { \my-cust
+0001c5d0: 6f6d 2d6d 6172 6b75 702d 6675 6e63 7469  om-markup-functi
+0001c5e0: 6f6e 0a20 2020 2020 2020 2020 2020 2020  on.             
+0001c5f0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+0001c600: 2020 2020 2020 2020 2066 6f6f 0a20 2020           foo.   
+0001c610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c620: 2062 6172 0a20 2020 2020 2020 2020 2020   bar.           
+0001c630: 2020 2020 2020 2020 2062 617a 0a20 2020           baz.   
+0001c640: 2020 2020 2020 2020 2020 2020 207d 207d               } }
+0001c650: 0a0a 2020 2020 2020 2020 6060 7369 676e  ..        ``sign
+0001c660: 6174 7572 6560 6020 7368 6f75 6c64 2062  ature`` should b
+0001c670: 6520 6120 7365 7175 656e 6365 206f 6620  e a sequence of 
+0001c680: 7a65 726f 206f 7220 6d6f 7265 2074 7970  zero or more typ
+0001c690: 652d 7072 6564 6963 6174 6520 6e61 6d65  e-predicate name
+0001c6a0: 732c 2061 730a 2020 2020 2020 2020 756e  s, as.        un
+0001c6b0: 6465 7273 746f 6f64 2062 7920 4c69 6c79  derstood by Lily
+0001c6c0: 506f 6e64 2e20 2043 6f6e 7375 6c74 204c  Pond.  Consult L
+0001c6d0: 696c 7950 6f6e 6427 7320 646f 6375 6d65  ilyPond's docume
+0001c6e0: 6e74 6174 696f 6e20 666f 7220 6120 636f  ntation for a co
+0001c6f0: 6d70 6c65 7465 206c 6973 7420 6f66 0a20  mplete list of. 
+0001c700: 2020 2020 2020 2061 6c6c 2075 6e64 6572         all under
+0001c710: 7374 6f6f 6420 7479 7065 2d70 7265 6469  stood type-predi
+0001c720: 6361 7465 732e 0a0a 2020 2020 2020 2020  cates...        
+0001c730: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+0001c740: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+0001c750: 2020 2020 2053 6574 2060 6075 6e64 6f3d       Set ``undo=
+0001c760: 5472 7565 6060 2074 6f20 756e 7265 6769  True`` to unregi
+0001c770: 7374 6572 2e0a 0a20 2020 2020 2020 2020  ster...         
+0001c780: 2020 203e 3e3e 206e 616d 6520 3d20 276d     >>> name = 'm
+0001c790: 792d 6375 7374 6f6d 2d6d 6172 6b75 702d  y-custom-markup-
+0001c7a0: 6675 6e63 7469 6f6e 270a 2020 2020 2020  function'.      
+0001c7b0: 2020 2020 2020 3e3e 3e20 7369 676e 6174        >>> signat
+0001c7c0: 7572 6520 3d20 5b27 6d61 726b 7570 3f27  ure = ['markup?'
+0001c7d0: 5d0a 2020 2020 2020 2020 2020 2020 3e3e  ].            >>
+0001c7e0: 3e20 636c 6173 735f 203d 2061 626a 6164  > class_ = abjad
+0001c7f0: 2e70 6172 7365 722e 4c69 6c79 506f 6e64  .parser.LilyPond
+0001c800: 5061 7273 6572 0a20 2020 2020 2020 2020  Parser.         
+0001c810: 2020 203e 3e3e 2063 6c61 7373 5f2e 7265     >>> class_.re
+0001c820: 6769 7374 6572 5f6d 6172 6b75 705f 6675  gister_markup_fu
+0001c830: 6e63 7469 6f6e 286e 616d 652c 2073 6967  nction(name, sig
+0001c840: 6e61 7475 7265 2c20 756e 646f 3d54 7275  nature, undo=Tru
+0001c850: 6529 0a0a 2020 2020 2020 2020 2020 2020  e)..            
+0001c860: 4e4f 5445 2e20 4164 6465 6420 746f 2061  NOTE. Added to a
+0001c870: 6c6c 6f77 2064 6f63 7465 7374 7320 746f  llow doctests to
+0001c880: 2070 6173 7320 6f6e 2054 7261 7669 7343   pass on TravisC
+0001c890: 492e 0a0a 2020 2020 2020 2020 2222 220a  I...        """.
+0001c8a0: 2020 2020 2020 2020 6966 2075 6e64 6f20          if undo 
+0001c8b0: 6973 2054 7275 653a 0a20 2020 2020 2020  is True:.       
+0001c8c0: 2020 2020 2064 656c 205f 6c79 656e 762e       del _lyenv.
+0001c8d0: 6d61 726b 7570 5f66 756e 6374 696f 6e73  markup_functions
+0001c8e0: 5b6e 616d 655d 0a20 2020 2020 2020 2020  [name].         
+0001c8f0: 2020 2072 6574 7572 6e0a 2020 2020 2020     return.      
+0001c900: 2020 6173 7365 7274 2069 7369 6e73 7461    assert isinsta
+0001c910: 6e63 6528 6e61 6d65 2c20 7374 7229 0a20  nce(name, str). 
+0001c920: 2020 2020 2020 2061 7373 6572 7420 616c         assert al
+0001c930: 6c28 6e6f 7420 782e 6973 7370 6163 6528  l(not x.isspace(
+0001c940: 2920 666f 7220 7820 696e 206e 616d 6529  ) for x in name)
+0001c950: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0001c960: 6973 696e 7374 616e 6365 2873 6967 6e61  isinstance(signa
+0001c970: 7475 7265 2c20 636f 6c6c 6563 7469 6f6e  ture, collection
+0001c980: 732e 6162 632e 4974 6572 6162 6c65 290a  s.abc.Iterable).
+0001c990: 2020 2020 2020 2020 666f 7220 7072 6564          for pred
+0001c9a0: 6963 6174 6520 696e 2073 6967 6e61 7475  icate in signatu
+0001c9b0: 7265 3a0a 2020 2020 2020 2020 2020 2020  re:.            
+0001c9c0: 6173 7365 7274 2069 7369 6e73 7461 6e63  assert isinstanc
+0001c9d0: 6528 7072 6564 6963 6174 652c 2073 7472  e(predicate, str
+0001c9e0: 290a 2020 2020 2020 2020 2020 2020 6173  ).            as
+0001c9f0: 7365 7274 2061 6c6c 286e 6f74 2078 2e69  sert all(not x.i
+0001ca00: 7373 7061 6365 2829 2066 6f72 2078 2069  sspace() for x i
+0001ca10: 6e20 7072 6564 6963 6174 6529 0a20 2020  n predicate).   
+0001ca20: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+0001ca30: 7072 6564 6963 6174 652e 656e 6473 7769  predicate.endswi
+0001ca40: 7468 2822 3f22 290a 2020 2020 2020 2020  th("?").        
+0001ca50: 5f6c 7965 6e76 2e6d 6172 6b75 705f 6675  _lyenv.markup_fu
+0001ca60: 6e63 7469 6f6e 735b 6e61 6d65 5d20 3d20  nctions[name] = 
+0001ca70: 7475 706c 6528 7369 676e 6174 7572 6529  tuple(signature)
+0001ca80: 0a0a 2020 2020 2323 2320 5055 424c 4943  ..    ### PUBLIC
+0001ca90: 2050 524f 5045 5254 4945 5320 2323 230a   PROPERTIES ###.
+0001caa0: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
+0001cab0: 2020 2064 6566 2061 7661 696c 6162 6c65     def available
+0001cac0: 5f6c 616e 6775 6167 6573 2873 656c 6629  _languages(self)
+0001cad0: 202d 3e20 7475 706c 655b 7374 722c 202e   -> tuple[str, .
+0001cae0: 2e2e 5d3a 0a20 2020 2020 2020 2072 2222  ..]:.        r""
+0001caf0: 220a 2020 2020 2020 2020 5475 706c 6520  ".        Tuple 
+0001cb00: 6f66 2070 6974 6368 2d6e 616d 6520 6c61  of pitch-name la
+0001cb10: 6e67 7561 6765 7320 7375 7070 6f72 7465  nguages supporte
+0001cb20: 6420 6279 204c 696c 7950 6f6e 6450 6172  d by LilyPondPar
+0001cb30: 7365 722e 0a0a 2020 2020 2020 2020 2e2e  ser...        ..
+0001cb40: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
+0001cb50: 616d 706c 650a 0a20 2020 2020 2020 2020  ample..         
+0001cb60: 2020 203e 3e3e 2070 6172 7365 7220 3d20     >>> parser = 
+0001cb70: 6162 6a61 642e 7061 7273 6572 2e4c 696c  abjad.parser.Lil
+0001cb80: 7950 6f6e 6450 6172 7365 7228 290a 2020  yPondParser().  
+0001cb90: 2020 2020 2020 2020 2020 3e3e 3e20 666f            >>> fo
+0001cba0: 7220 6c61 6e67 7561 6765 2069 6e20 7061  r language in pa
+0001cbb0: 7273 6572 2e61 7661 696c 6162 6c65 5f6c  rser.available_l
+0001cbc0: 616e 6775 6167 6573 3a0a 2020 2020 2020  anguages:.      
+0001cbd0: 2020 2020 2020 2e2e 2e20 2020 2020 7072        ...     pr
+0001cbe0: 696e 7428 6c61 6e67 7561 6765 290a 2020  int(language).  
+0001cbf0: 2020 2020 2020 2020 2020 2e2e 2e0a 2020            ....  
+0001cc00: 2020 2020 2020 2020 2020 6361 7461 6c61            catala
+0001cc10: 6e0a 2020 2020 2020 2020 2020 2020 6465  n.            de
+0001cc20: 7574 7363 680a 2020 2020 2020 2020 2020  utsch.          
+0001cc30: 2020 656e 676c 6973 680a 2020 2020 2020    english.      
+0001cc40: 2020 2020 2020 6573 7061 6e6f 6c0a 2020        espanol.  
+0001cc50: 2020 2020 2020 2020 2020 6573 7061 c3b1            espa..
+0001cc60: 6f6c 0a20 2020 2020 2020 2020 2020 2066  ol.            f
+0001cc70: 7261 6ec3 a761 6973 0a20 2020 2020 2020  ran..ais.       
+0001cc80: 2020 2020 2069 7461 6c69 616e 6f0a 2020       italiano.  
+0001cc90: 2020 2020 2020 2020 2020 6e65 6465 726c            nederl
+0001cca0: 616e 6473 0a20 2020 2020 2020 2020 2020  ands.           
+0001ccb0: 206e 6f72 736b 0a20 2020 2020 2020 2020   norsk.         
+0001ccc0: 2020 2070 6f72 7475 6775 6573 0a20 2020     portugues.   
+0001ccd0: 2020 2020 2020 2020 2073 756f 6d69 0a20           suomi. 
+0001cce0: 2020 2020 2020 2020 2020 2073 7665 6e73             svens
+0001ccf0: 6b61 0a20 2020 2020 2020 2020 2020 2076  ka.            v
+0001cd00: 6c61 616d 730a 0a20 2020 2020 2020 2052  laams..        R
+0001cd10: 6574 7572 6e73 2074 7570 6c65 2e0a 2020  eturns tuple..  
+0001cd20: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0001cd30: 2020 7265 7475 726e 2074 7570 6c65 2873    return tuple(s
+0001cd40: 6f72 7465 6428 7365 6c66 2e5f 6c61 6e67  orted(self._lang
+0001cd50: 7561 6765 5f70 6974 6368 5f6e 616d 6573  uage_pitch_names
+0001cd60: 2e6b 6579 7328 2929 290a 0a20 2020 2040  .keys()))..    @
+0001cd70: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+0001cd80: 2064 6566 6175 6c74 5f6c 616e 6775 6167   default_languag
+0001cd90: 6528 7365 6c66 2920 2d3e 2073 7472 3a0a  e(self) -> str:.
+0001cda0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001cdb0: 2020 2020 4765 7473 2061 6e64 2073 6574      Gets and set
+0001cdc0: 7320 6465 6661 756c 7420 6c61 6e67 7561  s default langua
+0001cdd0: 6765 206f 6620 7061 7273 6572 2e0a 0a20  ge of parser... 
+0001cde0: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
+0001cdf0: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+0001ce00: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001ce10: 7061 7273 6572 203d 2061 626a 6164 2e70  parser = abjad.p
+0001ce20: 6172 7365 722e 4c69 6c79 506f 6e64 5061  arser.LilyPondPa
+0001ce30: 7273 6572 2829 0a0a 2020 2020 2020 2020  rser()..        
+0001ce40: 2020 2020 3e3e 3e20 7061 7273 6572 2e64      >>> parser.d
+0001ce50: 6566 6175 6c74 5f6c 616e 6775 6167 650a  efault_language.
+0001ce60: 2020 2020 2020 2020 2020 2020 2765 6e67              'eng
+0001ce70: 6c69 7368 270a 0a20 2020 2020 2020 2020  lish'..         
+0001ce80: 2020 203e 3e3e 2070 6172 7365 7228 277b     >>> parser('{
+0001ce90: 2063 2064 6620 6520 6673 207d 2729 0a20   c df e fs }'). 
+0001cea0: 2020 2020 2020 2020 2020 2043 6f6e 7461             Conta
+0001ceb0: 696e 6572 2827 6334 2064 6634 2065 3420  iner('c4 df4 e4 
+0001cec0: 6673 3427 290a 0a20 2020 2020 2020 2020  fs4')..         
+0001ced0: 2020 203e 3e3e 2070 6172 7365 722e 6465     >>> parser.de
+0001cee0: 6661 756c 745f 6c61 6e67 7561 6765 203d  fault_language =
+0001cef0: 2027 6e65 6465 726c 616e 6473 270a 2020   'nederlands'.  
+0001cf00: 2020 2020 2020 2020 2020 3e3e 3e20 7061            >>> pa
+0001cf10: 7273 6572 2e64 6566 6175 6c74 5f6c 616e  rser.default_lan
+0001cf20: 6775 6167 650a 2020 2020 2020 2020 2020  guage.          
+0001cf30: 2020 276e 6564 6572 6c61 6e64 7327 0a0a    'nederlands'..
+0001cf40: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001cf50: 7061 7273 6572 2827 7b20 6320 6465 7320  parser('{ c des 
+0001cf60: 6520 6669 7320 7d27 290a 2020 2020 2020  e fis }').      
+0001cf70: 2020 2020 2020 436f 6e74 6169 6e65 7228        Container(
+0001cf80: 2763 3420 6466 3420 6534 2066 7334 2729  'c4 df4 e4 fs4')
+0001cf90: 0a0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+0001cfa0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0001cfb0: 662e 5f64 6566 6175 6c74 5f6c 616e 6775  f._default_langu
+0001cfc0: 6167 650a 0a20 2020 2040 6465 6661 756c  age..    @defaul
+0001cfd0: 745f 6c61 6e67 7561 6765 2e73 6574 7465  t_language.sette
+0001cfe0: 720a 2020 2020 6465 6620 6465 6661 756c  r.    def defaul
+0001cff0: 745f 6c61 6e67 7561 6765 2873 656c 662c  t_language(self,
+0001d000: 2061 7267 756d 656e 7429 3a0a 2020 2020   argument):.    
+0001d010: 2020 2020 6173 7365 7274 2061 7267 756d      assert argum
+0001d020: 656e 7420 696e 2073 656c 662e 6176 6169  ent in self.avai
+0001d030: 6c61 626c 655f 6c61 6e67 7561 6765 730a  lable_languages.
+0001d040: 2020 2020 2020 2020 7365 6c66 2e5f 6465          self._de
+0001d050: 6661 756c 745f 6c61 6e67 7561 6765 203d  fault_language =
+0001d060: 2061 7267 756d 656e 740a 0a20 2020 2040   argument..    @
+0001d070: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+0001d080: 206c 6578 6572 5f72 756c 6573 5f6f 626a   lexer_rules_obj
+0001d090: 6563 7428 7365 6c66 293a 0a20 2020 2020  ect(self):.     
+0001d0a0: 2020 2022 2222 0a20 2020 2020 2020 204c     """.        L
+0001d0b0: 6578 6572 2072 756c 6573 206f 626a 6563  exer rules objec
+0001d0c0: 7420 6f66 204c 696c 7950 6f6e 6420 7061  t of LilyPond pa
+0001d0d0: 7273 6572 2e0a 2020 2020 2020 2020 2222  rser..        ""
+0001d0e0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+0001d0f0: 2073 656c 662e 5f6c 6578 6465 660a 0a20   self._lexdef.. 
+0001d100: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
+0001d110: 2064 6566 2070 6172 7365 725f 7275 6c65   def parser_rule
+0001d120: 735f 6f62 6a65 6374 2873 656c 6629 3a0a  s_object(self):.
+0001d130: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001d140: 2020 2020 5061 7273 6572 2072 756c 6573      Parser rules
+0001d150: 206f 626a 6563 7420 6f66 204c 696c 7950   object of LilyP
+0001d160: 6f6e 6420 7061 7273 6572 2e0a 2020 2020  ond parser..    
+0001d170: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0001d180: 7265 7475 726e 2073 656c 662e 5f73 796e  return self._syn
+0001d190: 6465 660a 0a0a 636c 6173 7320 4c69 6c79  def...class Lily
+0001d1a0: 506f 6e64 5379 6e74 6163 7469 6361 6c44  PondSyntacticalD
+0001d1b0: 6566 696e 6974 696f 6e3a 0a20 2020 2022  efinition:.    "
+0001d1c0: 2222 0a20 2020 2054 6865 2073 796e 7461  "".    The synta
+0001d1d0: 6374 6963 616c 2064 6566 696e 6974 696f  ctical definitio
+0001d1e0: 6e20 6f66 204c 696c 7950 6f6e 6427 7320  n of LilyPond's 
+0001d1f0: 7379 6e74 6178 2e0a 0a20 2020 2045 6666  syntax...    Eff
+0001d200: 6563 7469 7665 6c79 2065 7175 6976 616c  ectively equival
+0001d210: 656e 7420 746f 204c 696c 7950 6f6e 6427  ent to LilyPond'
+0001d220: 7320 6060 7061 7273 6572 2e79 7960 6020  s ``parser.yy`` 
+0001d230: 6669 6c65 2e0a 0a20 2020 204e 6f74 2063  file...    Not c
+0001d240: 6f6d 706f 7365 722d 7361 6665 2e0a 0a20  omposer-safe... 
+0001d250: 2020 2055 7365 6420 696e 7465 726e 616c     Used internal
+0001d260: 6c79 2062 7920 6060 4c69 6c79 506f 6e64  ly by ``LilyPond
+0001d270: 5061 7273 6572 6060 2e0a 2020 2020 2222  Parser``..    ""
+0001d280: 220a 0a20 2020 2073 7461 7274 203d 2022  "..    start = "
+0001d290: 7374 6172 745f 7379 6d62 6f6c 220a 0a20  start_symbol".. 
+0001d2a0: 2020 2070 7265 6365 6465 6e63 6520 3d20     precedence = 
+0001d2b0: 280a 2020 2020 2020 2020 2320 2827 6e6f  (.        # ('no
+0001d2c0: 6e61 7373 6f63 272c 2027 414c 5445 524e  nassoc', 'ALTERN
+0001d2d0: 4154 4956 4527 292c 0a20 2020 2020 2020  ATIVE'),.       
+0001d2e0: 2028 226e 6f6e 6173 736f 6322 2c20 2243   ("nonassoc", "C
+0001d2f0: 4f4d 504f 5349 5445 2229 2c0a 2020 2020  OMPOSITE"),.    
+0001d300: 2020 2020 2320 2827 6c65 6674 272c 2027      # ('left', '
+0001d310: 4144 444c 5952 4943 5327 292c 0a20 2020  ADDLYRICS'),.   
+0001d320: 2020 2020 2028 226e 6f6e 6173 736f 6322       ("nonassoc"
+0001d330: 2c20 2244 4546 4155 4c54 2229 2c0a 2020  , "DEFAULT"),.  
+0001d340: 2020 2020 2020 2822 6e6f 6e61 7373 6f63        ("nonassoc
+0001d350: 222c 2022 4655 4e43 5449 4f4e 5f41 5247  ", "FUNCTION_ARG
+0001d360: 4c49 5354 2229 2c0a 2020 2020 2020 2020  LIST"),.        
+0001d370: 280a 2020 2020 2020 2020 2020 2020 2272  (.            "r
+0001d380: 6967 6874 222c 0a20 2020 2020 2020 2020  ight",.         
+0001d390: 2020 2022 5049 5443 485f 4944 454e 5449     "PITCH_IDENTI
+0001d3a0: 4649 4552 222c 0a20 2020 2020 2020 2020  FIER",.         
+0001d3b0: 2020 2022 4e4f 5445 4e41 4d45 5f50 4954     "NOTENAME_PIT
+0001d3c0: 4348 222c 0a20 2020 2020 2020 2020 2020  CH",.           
+0001d3d0: 2022 544f 4e49 434e 414d 455f 5049 5443   "TONICNAME_PITC
+0001d3e0: 4822 2c0a 2020 2020 2020 2020 2020 2020  H",.            
+0001d3f0: 2255 4e53 4947 4e45 4422 2c0a 2020 2020  "UNSIGNED",.    
+0001d400: 2020 2020 2020 2020 2252 4541 4c22 2c0a          "REAL",.
+0001d410: 2020 2020 2020 2020 2020 2020 2244 5552              "DUR
+0001d420: 4154 494f 4e5f 4944 454e 5449 4649 4552  ATION_IDENTIFIER
+0001d430: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+0001d440: 3a22 2c0a 2020 2020 2020 2020 292c 0a20  :",.        ),. 
+0001d450: 2020 2020 2020 2028 226e 6f6e 6173 736f         ("nonasso
+0001d460: 6322 2c20 224e 554d 4245 525f 4944 454e  c", "NUMBER_IDEN
+0001d470: 5449 4649 4552 222c 2022 2f22 292c 0a20  TIFIER", "/"),. 
+0001d480: 2020 2020 2020 2028 226c 6566 7422 2c20         ("left", 
+0001d490: 222b 222c 2022 2d22 292c 0a20 2020 2020  "+", "-"),.     
+0001d4a0: 2020 2023 2028 276c 6566 7427 2c20 2755     # ('left', 'U
+0001d4b0: 4e41 5259 5f4d 494e 5553 2729 0a20 2020  NARY_MINUS').   
+0001d4c0: 2029 0a0a 2020 2020 2323 2320 494e 4954   )..    ### INIT
+0001d4d0: 4941 4c49 5a45 5220 2323 230a 0a20 2020  IALIZER ###..   
+0001d4e0: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
+0001d4f0: 6c66 2c20 636c 6965 6e74 3d4e 6f6e 6529  lf, client=None)
+0001d500: 3a0a 2020 2020 2020 2020 7365 6c66 2e63  :.        self.c
+0001d510: 6c69 656e 7420 3d20 636c 6965 6e74 0a20  lient = client. 
+0001d520: 2020 2020 2020 2069 6620 636c 6965 6e74         if client
+0001d530: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0001d540: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+0001d550: 6f6b 656e 7320 3d20 7365 6c66 2e63 6c69  okens = self.cli
+0001d560: 656e 742e 5f6c 6578 6465 662e 746f 6b65  ent._lexdef.toke
+0001d570: 6e73 0a20 2020 2020 2020 2065 6c73 653a  ns.        else:
+0001d580: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0001d590: 662e 746f 6b65 6e73 203d 205b 5d0a 0a20  f.tokens = [].. 
+0001d5a0: 2020 2023 2323 2053 594e 5441 4354 4943     ### SYNTACTIC
+0001d5b0: 414c 2052 554c 4553 2028 414c 5048 4142  AL RULES (ALPHAB
+0001d5c0: 4554 4943 414c 2920 2323 230a 0a20 2020  ETICAL) ###..   
+0001d5d0: 2023 2020 2020 6465 6620 705f 7374 6172   #    def p_star
+0001d5e0: 745f 7379 6d62 6f6c 5f5f 454d 4245 4444  t_symbol__EMBEDD
+0001d5f0: 4544 5f4c 494c 595f 5f65 6d62 6564 6465  ED_LILY__embedde
+0001d600: 645f 6c69 6c79 706f 6e64 2873 656c 662c  d_lilypond(self,
+0001d610: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+0001d620: 2020 2773 7461 7274 5f73 796d 626f 6c20    'start_symbol 
+0001d630: 3a20 454d 4245 4444 4544 5f4c 494c 5920  : EMBEDDED_LILY 
+0001d640: 656d 6265 6464 6564 5f6c 696c 7970 6f6e  embedded_lilypon
+0001d650: 6427 0a20 2020 2023 2020 2020 2020 2020  d'.    #        
+0001d660: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+0001d670: 6528 2773 7461 7274 5f73 796d 626f 6c27  e('start_symbol'
+0001d680: 2c20 705b 313a 5d29 0a0a 2020 2020 6465  , p[1:])..    de
+0001d690: 6620 705f 7374 6172 745f 7379 6d62 6f6c  f p_start_symbol
+0001d6a0: 5f5f 6c69 6c79 706f 6e64 2873 656c 662c  __lilypond(self,
+0001d6b0: 2070 293a 0a20 2020 2020 2020 2022 7374   p):.        "st
+0001d6c0: 6172 745f 7379 6d62 6f6c 203a 206c 696c  art_symbol : lil
+0001d6d0: 7970 6f6e 6422 0a20 2020 2020 2020 2069  ypond".        i
+0001d6e0: 6620 3120 3c20 6c65 6e28 705b 315d 293a  f 1 < len(p[1]):
+0001d6f0: 0a20 2020 2020 2020 2020 2020 206c 696c  .            lil
+0001d700: 7970 6f6e 645f 6669 6c65 203d 205f 6c69  ypond_file = _li
+0001d710: 6c79 706f 6e64 6669 6c65 2e4c 696c 7950  lypondfile.LilyP
+0001d720: 6f6e 6446 696c 6528 290a 2020 2020 2020  ondFile().      
+0001d730: 2020 2020 2020 6c69 6c79 706f 6e64 5f66        lilypond_f
+0001d740: 696c 652e 6974 656d 732e 6578 7465 6e64  ile.items.extend
+0001d750: 2870 5b31 5d29 0a20 2020 2020 2020 2020  (p[1]).         
+0001d760: 2020 2070 5b30 5d20 3d20 6c69 6c79 706f     p[0] = lilypo
+0001d770: 6e64 5f66 696c 650a 2020 2020 2020 2020  nd_file.        
+0001d780: 656c 6966 2031 203d 3d20 6c65 6e28 705b  elif 1 == len(p[
+0001d790: 315d 293a 0a20 2020 2020 2020 2020 2020  1]):.           
+0001d7a0: 2070 5b30 5d20 3d20 705b 315d 5b30 5d0a   p[0] = p[1][0].
+0001d7b0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0001d7c0: 2020 2020 2020 2020 2020 705b 305d 203d            p[0] =
+0001d7d0: 204e 6f6e 650a 0a20 2020 2023 2323 2061   None..    ### a
+0001d7e0: 7373 6967 6e6d 656e 7420 2323 230a 0a20  ssignment ###.. 
+0001d7f0: 2020 2064 6566 2070 5f61 7373 6967 6e6d     def p_assignm
+0001d800: 656e 745f 5f61 7373 6967 6e6d 656e 745f  ent__assignment_
+0001d810: 6964 5f5f 4368 7236 315f 5f69 6465 6e74  id__Chr61__ident
+0001d820: 6966 6965 725f 696e 6974 2873 656c 662c  ifier_init(self,
+0001d830: 2070 293a 0a20 2020 2020 2020 2022 6173   p):.        "as
+0001d840: 7369 676e 6d65 6e74 203a 2061 7373 6967  signment : assig
+0001d850: 6e6d 656e 745f 6964 2027 3d27 2069 6465  nment_id '=' ide
+0001d860: 6e74 6966 6965 725f 696e 6974 220a 2020  ntifier_init".  
+0001d870: 2020 2020 2020 705b 305d 203d 205b 705b        p[0] = [p[
+0001d880: 315d 2c20 705b 335d 5d0a 0a20 2020 2023  1], p[3]]..    #
+0001d890: 2020 2020 6465 6620 705f 6173 7369 676e      def p_assign
+0001d8a0: 6d65 6e74 5f5f 6173 7369 676e 6d65 6e74  ment__assignment
+0001d8b0: 5f69 645f 5f70 726f 7065 7274 795f 7061  _id__property_pa
+0001d8c0: 7468 5f5f 4368 7236 315f 5f69 6465 6e74  th__Chr61__ident
+0001d8d0: 6966 6965 725f 696e 6974 2873 656c 662c  ifier_init(self,
+0001d8e0: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+0001d8f0: 2020 2261 7373 6967 6e6d 656e 7420 3a20    "assignment : 
+0001d900: 6173 7369 676e 6d65 6e74 5f69 6420 7072  assignment_id pr
+0001d910: 6f70 6572 7479 5f70 6174 6820 273d 2720  operty_path '=' 
+0001d920: 6964 656e 7469 6669 6572 5f69 6e69 7422  identifier_init"
+0001d930: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+0001d940: 305d 203d 205b 705b 315d 2c20 705b 335d  0] = [p[1], p[3]
+0001d950: 5d0a 0a20 2020 2064 6566 2070 5f61 7373  ]..    def p_ass
+0001d960: 6967 6e6d 656e 745f 5f65 6d62 6564 6465  ignment__embedde
+0001d970: 645f 7363 6d28 7365 6c66 2c20 7029 3a0a  d_scm(self, p):.
+0001d980: 2020 2020 2020 2020 2261 7373 6967 6e6d          "assignm
+0001d990: 656e 7420 3a20 656d 6265 6464 6564 5f73  ent : embedded_s
+0001d9a0: 636d 220a 2020 2020 2020 2020 705b 305d  cm".        p[0]
+0001d9b0: 203d 204e 6f6e 650a 0a20 2020 2023 2323   = None..    ###
+0001d9c0: 2061 7373 6967 6e6d 656e 745f 6964 2023   assignment_id #
+0001d9d0: 2323 0a0a 2020 2020 2320 2020 2064 6566  ##..    #    def
+0001d9e0: 2070 5f61 7373 6967 6e6d 656e 745f 6964   p_assignment_id
+0001d9f0: 5f5f 4c59 5249 4353 5f53 5452 494e 4728  __LYRICS_STRING(
+0001da00: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
+0001da10: 2020 2020 2020 2027 6173 7369 676e 6d65         'assignme
+0001da20: 6e74 5f69 6420 3a20 4c59 5249 4353 5f53  nt_id : LYRICS_S
+0001da30: 5452 494e 4727 0a20 2020 2023 2020 2020  TRING'.    #    
+0001da40: 2020 2020 705b 305d 203d 2053 796e 7461      p[0] = Synta
+0001da50: 784e 6f64 6528 2761 7373 6967 6e6d 656e  xNode('assignmen
+0001da60: 745f 6964 272c 2070 5b31 3a5d 290a 0a20  t_id', p[1:]).. 
+0001da70: 2020 2064 6566 2070 5f61 7373 6967 6e6d     def p_assignm
+0001da80: 656e 745f 6964 5f5f 5354 5249 4e47 2873  ent_id__STRING(s
+0001da90: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+0001daa0: 2022 6173 7369 676e 6d65 6e74 5f69 6420   "assignment_id 
+0001dab0: 3a20 5354 5249 4e47 220a 2020 2020 2020  : STRING".      
+0001dac0: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
+0001dad0: 2020 2023 2323 2062 6172 655f 6e75 6d62     ### bare_numb
+0001dae0: 6572 2023 2323 0a0a 2020 2020 6465 6620  er ###..    def 
+0001daf0: 705f 6261 7265 5f6e 756d 6265 725f 5f52  p_bare_number__R
+0001db00: 4541 4c5f 5f4e 554d 4245 525f 4944 454e  EAL__NUMBER_IDEN
+0001db10: 5449 4649 4552 2873 656c 662c 2070 293a  TIFIER(self, p):
+0001db20: 0a20 2020 2020 2020 2022 6261 7265 5f6e  .        "bare_n
+0001db30: 756d 6265 7220 3a20 5245 414c 204e 554d  umber : REAL NUM
+0001db40: 4245 525f 4944 454e 5449 4649 4552 220a  BER_IDENTIFIER".
+0001db50: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+0001db60: 5b31 5d0a 0a20 2020 2064 6566 2070 5f62  [1]..    def p_b
+0001db70: 6172 655f 6e75 6d62 6572 5f5f 554e 5349  are_number__UNSI
+0001db80: 474e 4544 5f5f 4e55 4d42 4552 5f49 4445  GNED__NUMBER_IDE
+0001db90: 4e54 4946 4945 5228 7365 6c66 2c20 7029  NTIFIER(self, p)
+0001dba0: 3a0a 2020 2020 2020 2020 2262 6172 655f  :.        "bare_
+0001dbb0: 6e75 6d62 6572 203a 2055 4e53 4947 4e45  number : UNSIGNE
+0001dbc0: 4420 4e55 4d42 4552 5f49 4445 4e54 4946  D NUMBER_IDENTIF
+0001dbd0: 4945 5222 0a20 2020 2020 2020 2070 5b30  IER".        p[0
+0001dbe0: 5d20 3d20 705b 315d 0a0a 2020 2020 6465  ] = p[1]..    de
+0001dbf0: 6620 705f 6261 7265 5f6e 756d 6265 725f  f p_bare_number_
+0001dc00: 5f62 6172 655f 6e75 6d62 6572 5f63 6c6f  _bare_number_clo
+0001dc10: 7365 6428 7365 6c66 2c20 7029 3a0a 2020  sed(self, p):.  
+0001dc20: 2020 2020 2020 2262 6172 655f 6e75 6d62        "bare_numb
+0001dc30: 6572 203a 2062 6172 655f 6e75 6d62 6572  er : bare_number
+0001dc40: 5f63 6c6f 7365 6422 0a20 2020 2020 2020  _closed".       
+0001dc50: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
+0001dc60: 2020 2323 2320 6261 7265 5f6e 756d 6265    ### bare_numbe
+0001dc70: 725f 636c 6f73 6564 2023 2323 0a0a 2020  r_closed ###..  
+0001dc80: 2020 6465 6620 705f 6261 7265 5f6e 756d    def p_bare_num
+0001dc90: 6265 725f 636c 6f73 6564 5f5f 4e55 4d42  ber_closed__NUMB
+0001dca0: 4552 5f49 4445 4e54 4946 4945 5228 7365  ER_IDENTIFIER(se
+0001dcb0: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+0001dcc0: 2262 6172 655f 6e75 6d62 6572 5f63 6c6f  "bare_number_clo
+0001dcd0: 7365 6420 3a20 4e55 4d42 4552 5f49 4445  sed : NUMBER_IDE
+0001dce0: 4e54 4946 4945 5222 0a20 2020 2020 2020  NTIFIER".       
+0001dcf0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
+0001dd00: 2020 6465 6620 705f 6261 7265 5f6e 756d    def p_bare_num
+0001dd10: 6265 725f 636c 6f73 6564 5f5f 5245 414c  ber_closed__REAL
+0001dd20: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+0001dd30: 2020 2022 6261 7265 5f6e 756d 6265 725f     "bare_number_
+0001dd40: 636c 6f73 6564 203a 2052 4541 4c22 0a20  closed : REAL". 
+0001dd50: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+0001dd60: 315d 0a0a 2020 2020 6465 6620 705f 6261  1]..    def p_ba
+0001dd70: 7265 5f6e 756d 6265 725f 636c 6f73 6564  re_number_closed
+0001dd80: 5f5f 554e 5349 474e 4544 2873 656c 662c  __UNSIGNED(self,
+0001dd90: 2070 293a 0a20 2020 2020 2020 2022 6261   p):.        "ba
+0001dda0: 7265 5f6e 756d 6265 725f 636c 6f73 6564  re_number_closed
+0001ddb0: 203a 2055 4e53 4947 4e45 4422 0a20 2020   : UNSIGNED".   
+0001ddc0: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
+0001ddd0: 0a0a 2020 2020 2323 2320 6261 7265 5f75  ..    ### bare_u
+0001dde0: 6e73 6967 6e65 6420 2323 230a 0a20 2020  nsigned ###..   
+0001ddf0: 2064 6566 2070 5f62 6172 655f 756e 7369   def p_bare_unsi
+0001de00: 676e 6564 5f5f 554e 5349 474e 4544 2873  gned__UNSIGNED(s
+0001de10: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+0001de20: 2022 6261 7265 5f75 6e73 6967 6e65 6420   "bare_unsigned 
+0001de30: 3a20 554e 5349 474e 4544 220a 2020 2020  : UNSIGNED".    
+0001de40: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
+0001de50: 0a20 2020 2023 2323 2062 6173 735f 6669  .    ### bass_fi
+0001de60: 6775 7265 2023 2323 0a0a 2020 2020 2320  gure ###..    # 
+0001de70: 2020 2064 6566 2070 5f62 6173 735f 6669     def p_bass_fi
+0001de80: 6775 7265 5f5f 4649 4755 5245 5f53 5041  gure__FIGURE_SPA
+0001de90: 4345 2873 656c 662c 2070 293a 0a20 2020  CE(self, p):.   
+0001dea0: 2023 2020 2020 2020 2020 2762 6173 735f   #        'bass_
+0001deb0: 6669 6775 7265 203a 2046 4947 5552 455f  figure : FIGURE_
+0001dec0: 5350 4143 4527 0a20 2020 2023 2020 2020  SPACE'.    #    
+0001ded0: 2020 2020 705b 305d 203d 2053 796e 7461      p[0] = Synta
+0001dee0: 784e 6f64 6528 2762 6173 735f 6669 6775  xNode('bass_figu
+0001def0: 7265 272c 2070 5b31 3a5d 290a 0a20 2020  re', p[1:])..   
+0001df00: 2023 2020 2020 6465 6620 705f 6261 7373   #    def p_bass
+0001df10: 5f66 6967 7572 655f 5f62 6173 735f 6669  _figure__bass_fi
+0001df20: 6775 7265 5f5f 4368 7239 3328 7365 6c66  gure__Chr93(self
+0001df30: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
+0001df40: 2020 2022 6261 7373 5f66 6967 7572 6520     "bass_figure 
+0001df50: 3a20 6261 7373 5f66 6967 7572 6520 275d  : bass_figure ']
+0001df60: 2722 0a20 2020 2023 2020 2020 2020 2020  '".    #        
+0001df70: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+0001df80: 6528 2762 6173 735f 6669 6775 7265 272c  e('bass_figure',
+0001df90: 2070 5b31 3a5d 290a 0a20 2020 2023 2020   p[1:])..    #  
+0001dfa0: 2020 6465 6620 705f 6261 7373 5f66 6967    def p_bass_fig
+0001dfb0: 7572 655f 5f62 6173 735f 6669 6775 7265  ure__bass_figure
+0001dfc0: 5f5f 6669 6775 7265 645f 6261 7373 5f61  __figured_bass_a
+0001dfd0: 6c74 6572 6174 696f 6e28 7365 6c66 2c20  lteration(self, 
+0001dfe0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+0001dff0: 2027 6261 7373 5f66 6967 7572 6520 3a20   'bass_figure : 
+0001e000: 6261 7373 5f66 6967 7572 6520 6669 6775  bass_figure figu
+0001e010: 7265 645f 6261 7373 5f61 6c74 6572 6174  red_bass_alterat
+0001e020: 696f 6e27 0a20 2020 2023 2020 2020 2020  ion'.    #      
+0001e030: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
+0001e040: 6f64 6528 2762 6173 735f 6669 6775 7265  ode('bass_figure
+0001e050: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
+0001e060: 2020 2020 6465 6620 705f 6261 7373 5f66      def p_bass_f
+0001e070: 6967 7572 655f 5f62 6173 735f 6669 6775  igure__bass_figu
+0001e080: 7265 5f5f 6669 6775 7265 645f 6261 7373  re__figured_bass
+0001e090: 5f6d 6f64 6966 6963 6174 696f 6e28 7365  _modification(se
+0001e0a0: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+0001e0b0: 2020 2020 2027 6261 7373 5f66 6967 7572       'bass_figur
+0001e0c0: 6520 3a20 6261 7373 5f66 6967 7572 6520  e : bass_figure 
+0001e0d0: 6669 6775 7265 645f 6261 7373 5f6d 6f64  figured_bass_mod
+0001e0e0: 6966 6963 6174 696f 6e27 0a20 2020 2023  ification'.    #
+0001e0f0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+0001e100: 796e 7461 784e 6f64 6528 2762 6173 735f  yntaxNode('bass_
+0001e110: 6669 6775 7265 272c 2070 5b31 3a5d 290a  figure', p[1:]).
+0001e120: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
+0001e130: 6261 7373 5f66 6967 7572 655f 5f62 6173  bass_figure__bas
+0001e140: 735f 6e75 6d62 6572 2873 656c 662c 2070  s_number(self, p
+0001e150: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
+0001e160: 2762 6173 735f 6669 6775 7265 203a 2062  'bass_figure : b
+0001e170: 6173 735f 6e75 6d62 6572 270a 2020 2020  ass_number'.    
+0001e180: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+0001e190: 5379 6e74 6178 4e6f 6465 2827 6261 7373  SyntaxNode('bass
+0001e1a0: 5f66 6967 7572 6527 2c20 705b 313a 5d29  _figure', p[1:])
+0001e1b0: 0a0a 2020 2020 2323 2320 6261 7373 5f6e  ..    ### bass_n
+0001e1c0: 756d 6265 7220 2323 230a 0a20 2020 2023  umber ###..    #
+0001e1d0: 2020 2020 6465 6620 705f 6261 7373 5f6e      def p_bass_n
+0001e1e0: 756d 6265 725f 5f53 5452 494e 4728 7365  umber__STRING(se
+0001e1f0: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+0001e200: 2020 2020 2027 6261 7373 5f6e 756d 6265       'bass_numbe
+0001e210: 7220 3a20 5354 5249 4e47 270a 2020 2020  r : STRING'.    
+0001e220: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+0001e230: 5379 6e74 6178 4e6f 6465 2827 6261 7373  SyntaxNode('bass
+0001e240: 5f6e 756d 6265 7227 2c20 705b 313a 5d29  _number', p[1:])
+0001e250: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
+0001e260: 5f62 6173 735f 6e75 6d62 6572 5f5f 554e  _bass_number__UN
+0001e270: 5349 474e 4544 2873 656c 662c 2070 293a  SIGNED(self, p):
+0001e280: 0a20 2020 2023 2020 2020 2020 2020 2762  .    #        'b
+0001e290: 6173 735f 6e75 6d62 6572 203a 2055 4e53  ass_number : UNS
+0001e2a0: 4947 4e45 4427 0a20 2020 2023 2020 2020  IGNED'.    #    
+0001e2b0: 2020 2020 705b 305d 203d 2053 796e 7461      p[0] = Synta
+0001e2c0: 784e 6f64 6528 2762 6173 735f 6e75 6d62  xNode('bass_numb
+0001e2d0: 6572 272c 2070 5b31 3a5d 290a 0a20 2020  er', p[1:])..   
+0001e2e0: 2023 2020 2020 6465 6620 705f 6261 7373   #    def p_bass
+0001e2f0: 5f6e 756d 6265 725f 5f66 756c 6c5f 6d61  _number__full_ma
+0001e300: 726b 7570 2873 656c 662c 2070 293a 0a20  rkup(self, p):. 
+0001e310: 2020 2023 2020 2020 2020 2020 2762 6173     #        'bas
+0001e320: 735f 6e75 6d62 6572 203a 2066 756c 6c5f  s_number : full_
+0001e330: 6d61 726b 7570 270a 2020 2020 2320 2020  markup'.    #   
+0001e340: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
+0001e350: 6178 4e6f 6465 2827 6261 7373 5f6e 756d  axNode('bass_num
+0001e360: 6265 7227 2c20 705b 313a 5d29 0a0a 2020  ber', p[1:])..  
+0001e370: 2020 2323 2320 626f 6f6b 5f62 6c6f 636b    ### book_block
+0001e380: 2023 2323 0a0a 2020 2020 2320 2020 2064   ###..    #    d
+0001e390: 6566 2070 5f62 6f6f 6b5f 626c 6f63 6b5f  ef p_book_block_
+0001e3a0: 5f42 4f4f 4b5f 5f43 6872 3132 335f 5f62  _BOOK__Chr123__b
+0001e3b0: 6f6f 6b5f 626f 6479 5f5f 4368 7231 3235  ook_body__Chr125
+0001e3c0: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+0001e3d0: 2020 2020 2020 2020 2262 6f6f 6b5f 626c          "book_bl
+0001e3e0: 6f63 6b20 3a20 424f 4f4b 2027 7b27 2062  ock : BOOK '{' b
+0001e3f0: 6f6f 6b5f 626f 6479 2027 7d27 220a 2020  ook_body '}'".  
+0001e400: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
+0001e410: 3d20 5379 6e74 6178 4e6f 6465 2827 626f  = SyntaxNode('bo
+0001e420: 6f6b 5f62 6c6f 636b 272c 2070 5b31 3a5d  ok_block', p[1:]
+0001e430: 290a 0a20 2020 2023 2323 2062 6f6f 6b5f  )..    ### book_
+0001e440: 626f 6479 2023 2323 0a0a 2020 2020 2320  body ###..    # 
+0001e450: 2020 2064 6566 2070 5f62 6f6f 6b5f 626f     def p_book_bo
+0001e460: 6479 5f5f 456d 7074 7928 7365 6c66 2c20  dy__Empty(self, 
+0001e470: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+0001e480: 2027 626f 6f6b 5f62 6f64 7920 3a20 270a   'book_body : '.
+0001e490: 2020 2020 2320 2020 2020 2020 2070 5b30      #        p[0
+0001e4a0: 5d20 3d20 5379 6e74 6178 4e6f 6465 2827  ] = SyntaxNode('
+0001e4b0: 626f 6f6b 5f62 6f64 7927 2c20 705b 313a  book_body', p[1:
+0001e4c0: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
+0001e4d0: 2070 5f62 6f6f 6b5f 626f 6479 5f5f 424f   p_book_body__BO
+0001e4e0: 4f4b 5f49 4445 4e54 4946 4945 5228 7365  OK_IDENTIFIER(se
+0001e4f0: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+0001e500: 2020 2020 2027 626f 6f6b 5f62 6f64 7920       'book_body 
+0001e510: 3a20 424f 4f4b 5f49 4445 4e54 4946 4945  : BOOK_IDENTIFIE
+0001e520: 5227 0a20 2020 2023 2020 2020 2020 2020  R'.    #        
+0001e530: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+0001e540: 6528 2762 6f6f 6b5f 626f 6479 272c 2070  e('book_body', p
+0001e550: 5b31 3a5d 290a 0a20 2020 2023 2020 2020  [1:])..    #    
+0001e560: 6465 6620 705f 626f 6f6b 5f62 6f64 795f  def p_book_body_
+0001e570: 5f62 6f6f 6b5f 626f 6479 5f5f 626f 6f6b  _book_body__book
+0001e580: 7061 7274 5f62 6c6f 636b 2873 656c 662c  part_block(self,
+0001e590: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+0001e5a0: 2020 2762 6f6f 6b5f 626f 6479 203a 2062    'book_body : b
+0001e5b0: 6f6f 6b5f 626f 6479 2062 6f6f 6b70 6172  ook_body bookpar
+0001e5c0: 745f 626c 6f63 6b27 0a20 2020 2023 2020  t_block'.    #  
+0001e5d0: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+0001e5e0: 7461 784e 6f64 6528 2762 6f6f 6b5f 626f  taxNode('book_bo
+0001e5f0: 6479 272c 2070 5b31 3a5d 290a 0a20 2020  dy', p[1:])..   
+0001e600: 2023 2020 2020 6465 6620 705f 626f 6f6b   #    def p_book
+0001e610: 5f62 6f64 795f 5f62 6f6f 6b5f 626f 6479  _body__book_body
+0001e620: 5f5f 636f 6d70 6f73 6974 655f 6d75 7369  __composite_musi
+0001e630: 6328 7365 6c66 2c20 7029 3a0a 2020 2020  c(self, p):.    
+0001e640: 2320 2020 2020 2020 2027 626f 6f6b 5f62  #        'book_b
+0001e650: 6f64 7920 3a20 626f 6f6b 5f62 6f64 7920  ody : book_body 
+0001e660: 636f 6d70 6f73 6974 655f 6d75 7369 6327  composite_music'
+0001e670: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+0001e680: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+0001e690: 2762 6f6f 6b5f 626f 6479 272c 2070 5b31  'book_body', p[1
+0001e6a0: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
+0001e6b0: 6620 705f 626f 6f6b 5f62 6f64 795f 5f62  f p_book_body__b
+0001e6c0: 6f6f 6b5f 626f 6479 5f5f 656d 6265 6464  ook_body__embedd
+0001e6d0: 6564 5f73 636d 2873 656c 662c 2070 293a  ed_scm(self, p):
+0001e6e0: 0a20 2020 2023 2020 2020 2020 2020 2762  .    #        'b
+0001e6f0: 6f6f 6b5f 626f 6479 203a 2062 6f6f 6b5f  ook_body : book_
+0001e700: 626f 6479 2065 6d62 6564 6465 645f 7363  body embedded_sc
+0001e710: 6d27 0a20 2020 2023 2020 2020 2020 2020  m'.    #        
+0001e720: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+0001e730: 6528 2762 6f6f 6b5f 626f 6479 272c 2070  e('book_body', p
+0001e740: 5b31 3a5d 290a 0a20 2020 2023 2020 2020  [1:])..    #    
+0001e750: 6465 6620 705f 626f 6f6b 5f62 6f64 795f  def p_book_body_
+0001e760: 5f62 6f6f 6b5f 626f 6479 5f5f 6572 726f  _book_body__erro
+0001e770: 7228 7365 6c66 2c20 7029 3a0a 2020 2020  r(self, p):.    
+0001e780: 2320 2020 2020 2020 2027 626f 6f6b 5f62  #        'book_b
+0001e790: 6f64 7920 3a20 626f 6f6b 5f62 6f64 7920  ody : book_body 
+0001e7a0: 6572 726f 7227 0a20 2020 2023 2020 2020  error'.    #    
+0001e7b0: 2020 2020 705b 305d 203d 2053 796e 7461      p[0] = Synta
+0001e7c0: 784e 6f64 6528 2762 6f6f 6b5f 626f 6479  xNode('book_body
+0001e7d0: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
+0001e7e0: 2020 2020 6465 6620 705f 626f 6f6b 5f62      def p_book_b
+0001e7f0: 6f64 795f 5f62 6f6f 6b5f 626f 6479 5f5f  ody__book_body__
+0001e800: 6675 6c6c 5f6d 6172 6b75 7028 7365 6c66  full_markup(self
+0001e810: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
+0001e820: 2020 2027 626f 6f6b 5f62 6f64 7920 3a20     'book_body : 
+0001e830: 626f 6f6b 5f62 6f64 7920 6675 6c6c 5f6d  book_body full_m
+0001e840: 6172 6b75 7027 0a20 2020 2023 2020 2020  arkup'.    #    
+0001e850: 2020 2020 705b 305d 203d 2053 796e 7461      p[0] = Synta
+0001e860: 784e 6f64 6528 2762 6f6f 6b5f 626f 6479  xNode('book_body
+0001e870: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
+0001e880: 2020 2020 6465 6620 705f 626f 6f6b 5f62      def p_book_b
+0001e890: 6f64 795f 5f62 6f6f 6b5f 626f 6479 5f5f  ody__book_body__
+0001e8a0: 6675 6c6c 5f6d 6172 6b75 705f 6c69 7374  full_markup_list
+0001e8b0: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+0001e8c0: 2020 2020 2020 2020 2762 6f6f 6b5f 626f          'book_bo
+0001e8d0: 6479 203a 2062 6f6f 6b5f 626f 6479 2066  dy : book_body f
+0001e8e0: 756c 6c5f 6d61 726b 7570 5f6c 6973 7427  ull_markup_list'
+0001e8f0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+0001e900: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+0001e910: 2762 6f6f 6b5f 626f 6479 272c 2070 5b31  'book_body', p[1
+0001e920: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
+0001e930: 6620 705f 626f 6f6b 5f62 6f64 795f 5f62  f p_book_body__b
+0001e940: 6f6f 6b5f 626f 6479 5f5f 6c69 6c79 706f  ook_body__lilypo
+0001e950: 6e64 5f68 6561 6465 7228 7365 6c66 2c20  nd_header(self, 
+0001e960: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+0001e970: 2027 626f 6f6b 5f62 6f64 7920 3a20 626f   'book_body : bo
+0001e980: 6f6b 5f62 6f64 7920 6c69 6c79 706f 6e64  ok_body lilypond
+0001e990: 5f68 6561 6465 7227 0a20 2020 2023 2020  _header'.    #  
+0001e9a0: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+0001e9b0: 7461 784e 6f64 6528 2762 6f6f 6b5f 626f  taxNode('book_bo
+0001e9c0: 6479 272c 2070 5b31 3a5d 290a 0a20 2020  dy', p[1:])..   
+0001e9d0: 2023 2020 2020 6465 6620 705f 626f 6f6b   #    def p_book
+0001e9e0: 5f62 6f64 795f 5f62 6f6f 6b5f 626f 6479  _body__book_body
+0001e9f0: 5f5f 7061 7065 725f 626c 6f63 6b28 7365  __paper_block(se
+0001ea00: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+0001ea10: 2020 2020 2027 626f 6f6b 5f62 6f64 7920       'book_body 
+0001ea20: 3a20 626f 6f6b 5f62 6f64 7920 7061 7065  : book_body pape
+0001ea30: 725f 626c 6f63 6b27 0a20 2020 2023 2020  r_block'.    #  
+0001ea40: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+0001ea50: 7461 784e 6f64 6528 2762 6f6f 6b5f 626f  taxNode('book_bo
+0001ea60: 6479 272c 2070 5b31 3a5d 290a 0a20 2020  dy', p[1:])..   
+0001ea70: 2023 2020 2020 6465 6620 705f 626f 6f6b   #    def p_book
+0001ea80: 5f62 6f64 795f 5f62 6f6f 6b5f 626f 6479  _body__book_body
+0001ea90: 5f5f 7363 6f72 655f 626c 6f63 6b28 7365  __score_block(se
+0001eaa0: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+0001eab0: 2020 2020 2027 626f 6f6b 5f62 6f64 7920       'book_body 
+0001eac0: 3a20 626f 6f6b 5f62 6f64 7920 7363 6f72  : book_body scor
+0001ead0: 655f 626c 6f63 6b27 0a20 2020 2023 2020  e_block'.    #  
+0001eae0: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+0001eaf0: 7461 784e 6f64 6528 2762 6f6f 6b5f 626f  taxNode('book_bo
+0001eb00: 6479 272c 2070 5b31 3a5d 290a 0a20 2020  dy', p[1:])..   
+0001eb10: 2023 2323 2062 6f6f 6b70 6172 745f 626c   ### bookpart_bl
+0001eb20: 6f63 6b20 2323 230a 0a20 2020 2023 2020  ock ###..    #  
+0001eb30: 2020 6465 6620 705f 626f 6f6b 7061 7274    def p_bookpart
+0001eb40: 5f62 6c6f 636b 5f5f 424f 4f4b 5041 5254  _block__BOOKPART
+0001eb50: 5f5f 4368 7231 3233 5f5f 626f 6f6b 7061  __Chr123__bookpa
+0001eb60: 7274 5f62 6f64 795f 5f43 6872 3132 3528  rt_body__Chr125(
+0001eb70: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
+0001eb80: 2020 2020 2020 2022 626f 6f6b 7061 7274         "bookpart
+0001eb90: 5f62 6c6f 636b 203a 2042 4f4f 4b50 4152  _block : BOOKPAR
+0001eba0: 5420 277b 2720 626f 6f6b 7061 7274 5f62  T '{' bookpart_b
+0001ebb0: 6f64 7920 277d 2722 0a20 2020 2023 2020  ody '}'".    #  
+0001ebc0: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+0001ebd0: 7461 784e 6f64 6528 2762 6f6f 6b70 6172  taxNode('bookpar
+0001ebe0: 745f 626c 6f63 6b27 2c20 705b 313a 5d29  t_block', p[1:])
+0001ebf0: 0a0a 2020 2020 2323 2320 626f 6f6b 7061  ..    ### bookpa
+0001ec00: 7274 5f62 6f64 7920 2323 230a 0a20 2020  rt_body ###..   
+0001ec10: 2023 2020 2020 6465 6620 705f 626f 6f6b   #    def p_book
+0001ec20: 7061 7274 5f62 6f64 795f 5f45 6d70 7479  part_body__Empty
+0001ec30: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+0001ec40: 2020 2020 2020 2020 2762 6f6f 6b70 6172          'bookpar
+0001ec50: 745f 626f 6479 203a 2027 0a20 2020 2023  t_body : '.    #
+0001ec60: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+0001ec70: 796e 7461 784e 6f64 6528 2762 6f6f 6b70  yntaxNode('bookp
+0001ec80: 6172 745f 626f 6479 272c 2070 5b31 3a5d  art_body', p[1:]
+0001ec90: 290a 0a20 2020 2023 2020 2020 6465 6620  )..    #    def 
+0001eca0: 705f 626f 6f6b 7061 7274 5f62 6f64 795f  p_bookpart_body_
+0001ecb0: 5f42 4f4f 4b5f 4944 454e 5449 4649 4552  _BOOK_IDENTIFIER
+0001ecc0: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+0001ecd0: 2020 2020 2020 2020 2762 6f6f 6b70 6172          'bookpar
+0001ece0: 745f 626f 6479 203a 2042 4f4f 4b5f 4944  t_body : BOOK_ID
+0001ecf0: 454e 5449 4649 4552 270a 2020 2020 2320  ENTIFIER'.    # 
+0001ed00: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+0001ed10: 6e74 6178 4e6f 6465 2827 626f 6f6b 7061  ntaxNode('bookpa
+0001ed20: 7274 5f62 6f64 7927 2c20 705b 313a 5d29  rt_body', p[1:])
+0001ed30: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
+0001ed40: 5f62 6f6f 6b70 6172 745f 626f 6479 5f5f  _bookpart_body__
+0001ed50: 626f 6f6b 7061 7274 5f62 6f64 795f 5f63  bookpart_body__c
+0001ed60: 6f6d 706f 7369 7465 5f6d 7573 6963 2873  omposite_music(s
+0001ed70: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
+0001ed80: 2020 2020 2020 2762 6f6f 6b70 6172 745f        'bookpart_
+0001ed90: 626f 6479 203a 2062 6f6f 6b70 6172 745f  body : bookpart_
+0001eda0: 626f 6479 2063 6f6d 706f 7369 7465 5f6d  body composite_m
+0001edb0: 7573 6963 270a 2020 2020 2320 2020 2020  usic'.    #     
+0001edc0: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
+0001edd0: 4e6f 6465 2827 626f 6f6b 7061 7274 5f62  Node('bookpart_b
+0001ede0: 6f64 7927 2c20 705b 313a 5d29 0a0a 2020  ody', p[1:])..  
+0001edf0: 2020 2320 2020 2064 6566 2070 5f62 6f6f    #    def p_boo
+0001ee00: 6b70 6172 745f 626f 6479 5f5f 626f 6f6b  kpart_body__book
+0001ee10: 7061 7274 5f62 6f64 795f 5f65 6d62 6564  part_body__embed
+0001ee20: 6465 645f 7363 6d28 7365 6c66 2c20 7029  ded_scm(self, p)
+0001ee30: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
+0001ee40: 626f 6f6b 7061 7274 5f62 6f64 7920 3a20  bookpart_body : 
+0001ee50: 626f 6f6b 7061 7274 5f62 6f64 7920 656d  bookpart_body em
+0001ee60: 6265 6464 6564 5f73 636d 270a 2020 2020  bedded_scm'.    
+0001ee70: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+0001ee80: 5379 6e74 6178 4e6f 6465 2827 626f 6f6b  SyntaxNode('book
+0001ee90: 7061 7274 5f62 6f64 7927 2c20 705b 313a  part_body', p[1:
+0001eea0: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
+0001eeb0: 2070 5f62 6f6f 6b70 6172 745f 626f 6479   p_bookpart_body
+0001eec0: 5f5f 626f 6f6b 7061 7274 5f62 6f64 795f  __bookpart_body_
+0001eed0: 5f65 7272 6f72 2873 656c 662c 2070 293a  _error(self, p):
+0001eee0: 0a20 2020 2023 2020 2020 2020 2020 2762  .    #        'b
+0001eef0: 6f6f 6b70 6172 745f 626f 6479 203a 2062  ookpart_body : b
+0001ef00: 6f6f 6b70 6172 745f 626f 6479 2065 7272  ookpart_body err
+0001ef10: 6f72 270a 2020 2020 2320 2020 2020 2020  or'.    #       
+0001ef20: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
+0001ef30: 6465 2827 626f 6f6b 7061 7274 5f62 6f64  de('bookpart_bod
+0001ef40: 7927 2c20 705b 313a 5d29 0a0a 2020 2020  y', p[1:])..    
+0001ef50: 2320 2020 2064 6566 2070 5f62 6f6f 6b70  #    def p_bookp
+0001ef60: 6172 745f 626f 6479 5f5f 626f 6f6b 7061  art_body__bookpa
+0001ef70: 7274 5f62 6f64 795f 5f66 756c 6c5f 6d61  rt_body__full_ma
+0001ef80: 726b 7570 2873 656c 662c 2070 293a 0a20  rkup(self, p):. 
+0001ef90: 2020 2023 2020 2020 2020 2020 2762 6f6f     #        'boo
+0001efa0: 6b70 6172 745f 626f 6479 203a 2062 6f6f  kpart_body : boo
+0001efb0: 6b70 6172 745f 626f 6479 2066 756c 6c5f  kpart_body full_
+0001efc0: 6d61 726b 7570 270a 2020 2020 2320 2020  markup'.    #   
+0001efd0: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
+0001efe0: 6178 4e6f 6465 2827 626f 6f6b 7061 7274  axNode('bookpart
+0001eff0: 5f62 6f64 7927 2c20 705b 313a 5d29 0a0a  _body', p[1:])..
+0001f000: 2020 2020 2320 2020 2064 6566 2070 5f62      #    def p_b
+0001f010: 6f6f 6b70 6172 745f 626f 6479 5f5f 626f  ookpart_body__bo
+0001f020: 6f6b 7061 7274 5f62 6f64 795f 5f66 756c  okpart_body__ful
+0001f030: 6c5f 6d61 726b 7570 5f6c 6973 7428 7365  l_markup_list(se
+0001f040: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+0001f050: 2020 2020 2027 626f 6f6b 7061 7274 5f62       'bookpart_b
+0001f060: 6f64 7920 3a20 626f 6f6b 7061 7274 5f62  ody : bookpart_b
+0001f070: 6f64 7920 6675 6c6c 5f6d 6172 6b75 705f  ody full_markup_
+0001f080: 6c69 7374 270a 2020 2020 2320 2020 2020  list'.    #     
+0001f090: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
+0001f0a0: 4e6f 6465 2827 626f 6f6b 7061 7274 5f62  Node('bookpart_b
+0001f0b0: 6f64 7927 2c20 705b 313a 5d29 0a0a 2020  ody', p[1:])..  
+0001f0c0: 2020 2320 2020 2064 6566 2070 5f62 6f6f    #    def p_boo
+0001f0d0: 6b70 6172 745f 626f 6479 5f5f 626f 6f6b  kpart_body__book
+0001f0e0: 7061 7274 5f62 6f64 795f 5f6c 696c 7970  part_body__lilyp
+0001f0f0: 6f6e 645f 6865 6164 6572 2873 656c 662c  ond_header(self,
+0001f100: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+0001f110: 2020 2762 6f6f 6b70 6172 745f 626f 6479    'bookpart_body
+0001f120: 203a 2062 6f6f 6b70 6172 745f 626f 6479   : bookpart_body
+0001f130: 206c 696c 7970 6f6e 645f 6865 6164 6572   lilypond_header
+0001f140: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
+0001f150: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
+0001f160: 2827 626f 6f6b 7061 7274 5f62 6f64 7927  ('bookpart_body'
+0001f170: 2c20 705b 313a 5d29 0a0a 2020 2020 2320  , p[1:])..    # 
+0001f180: 2020 2064 6566 2070 5f62 6f6f 6b70 6172     def p_bookpar
+0001f190: 745f 626f 6479 5f5f 626f 6f6b 7061 7274  t_body__bookpart
+0001f1a0: 5f62 6f64 795f 5f70 6170 6572 5f62 6c6f  _body__paper_blo
+0001f1b0: 636b 2873 656c 662c 2070 293a 0a20 2020  ck(self, p):.   
+0001f1c0: 2023 2020 2020 2020 2020 2762 6f6f 6b70   #        'bookp
+0001f1d0: 6172 745f 626f 6479 203a 2062 6f6f 6b70  art_body : bookp
+0001f1e0: 6172 745f 626f 6479 2070 6170 6572 5f62  art_body paper_b
+0001f1f0: 6c6f 636b 270a 2020 2020 2320 2020 2020  lock'.    #     
+0001f200: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
+0001f210: 4e6f 6465 2827 626f 6f6b 7061 7274 5f62  Node('bookpart_b
+0001f220: 6f64 7927 2c20 705b 313a 5d29 0a0a 2020  ody', p[1:])..  
+0001f230: 2020 2320 2020 2064 6566 2070 5f62 6f6f    #    def p_boo
+0001f240: 6b70 6172 745f 626f 6479 5f5f 626f 6f6b  kpart_body__book
+0001f250: 7061 7274 5f62 6f64 795f 5f73 636f 7265  part_body__score
+0001f260: 5f62 6c6f 636b 2873 656c 662c 2070 293a  _block(self, p):
+0001f270: 0a20 2020 2023 2020 2020 2020 2020 2762  .    #        'b
+0001f280: 6f6f 6b70 6172 745f 626f 6479 203a 2062  ookpart_body : b
+0001f290: 6f6f 6b70 6172 745f 626f 6479 2073 636f  ookpart_body sco
+0001f2a0: 7265 5f62 6c6f 636b 270a 2020 2020 2320  re_block'.    # 
+0001f2b0: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+0001f2c0: 6e74 6178 4e6f 6465 2827 626f 6f6b 7061  ntaxNode('bookpa
+0001f2d0: 7274 5f62 6f64 7927 2c20 705b 313a 5d29  rt_body', p[1:])
+0001f2e0: 0a0a 2020 2020 2323 2320 6272 5f62 6173  ..    ### br_bas
+0001f2f0: 735f 6669 6775 7265 2023 2323 0a0a 2020  s_figure ###..  
+0001f300: 2020 2320 2020 2064 6566 2070 5f62 725f    #    def p_br_
+0001f310: 6261 7373 5f66 6967 7572 655f 5f43 6872  bass_figure__Chr
+0001f320: 3931 5f5f 6261 7373 5f66 6967 7572 6528  91__bass_figure(
+0001f330: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
+0001f340: 2020 2020 2020 2022 6272 5f62 6173 735f         "br_bass_
+0001f350: 6669 6775 7265 203a 2027 5b27 2062 6173  figure : '[' bas
+0001f360: 735f 6669 6775 7265 220a 2020 2020 2320  s_figure".    # 
+0001f370: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+0001f380: 6e74 6178 4e6f 6465 2827 6272 5f62 6173  ntaxNode('br_bas
+0001f390: 735f 6669 6775 7265 272c 2070 5b31 3a5d  s_figure', p[1:]
+0001f3a0: 290a 0a20 2020 2023 2020 2020 6465 6620  )..    #    def 
+0001f3b0: 705f 6272 5f62 6173 735f 6669 6775 7265  p_br_bass_figure
+0001f3c0: 5f5f 6261 7373 5f66 6967 7572 6528 7365  __bass_figure(se
+0001f3d0: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+0001f3e0: 2020 2020 2027 6272 5f62 6173 735f 6669       'br_bass_fi
+0001f3f0: 6775 7265 203a 2062 6173 735f 6669 6775  gure : bass_figu
+0001f400: 7265 270a 2020 2020 2320 2020 2020 2020  re'.    #       
+0001f410: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
+0001f420: 6465 2827 6272 5f62 6173 735f 6669 6775  de('br_bass_figu
+0001f430: 7265 272c 2070 5b31 3a5d 290a 0a20 2020  re', p[1:])..   
+0001f440: 2023 2323 2062 7261 6365 645f 6d75 7369   ### braced_musi
+0001f450: 635f 6c69 7374 2023 2323 0a0a 2020 2020  c_list ###..    
+0001f460: 6465 6620 705f 6272 6163 6564 5f6d 7573  def p_braced_mus
+0001f470: 6963 5f6c 6973 745f 5f43 6872 3132 335f  ic_list__Chr123_
+0001f480: 5f6d 7573 6963 5f6c 6973 745f 5f43 6872  _music_list__Chr
+0001f490: 3132 3528 7365 6c66 2c20 7029 3a0a 2020  125(self, p):.  
+0001f4a0: 2020 2020 2020 2262 7261 6365 645f 6d75        "braced_mu
+0001f4b0: 7369 635f 6c69 7374 203a 2027 7b27 206d  sic_list : '{' m
+0001f4c0: 7573 6963 5f6c 6973 7420 277d 2722 0a20  usic_list '}'". 
+0001f4d0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+0001f4e0: 325d 0a0a 2020 2020 2323 2320 6368 6f72  2]..    ### chor
+0001f4f0: 645f 626f 6479 2023 2323 0a0a 2020 2020  d_body ###..    
+0001f500: 6465 6620 705f 6368 6f72 645f 626f 6479  def p_chord_body
+0001f510: 5f5f 414e 474c 455f 4f50 454e 5f5f 6368  __ANGLE_OPEN__ch
+0001f520: 6f72 645f 626f 6479 5f65 6c65 6d65 6e74  ord_body_element
+0001f530: 735f 5f41 4e47 4c45 5f43 4c4f 5345 2873  s__ANGLE_CLOSE(s
+0001f540: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+0001f550: 2022 6368 6f72 645f 626f 6479 203a 2041   "chord_body : A
+0001f560: 4e47 4c45 5f4f 5045 4e20 6368 6f72 645f  NGLE_OPEN chord_
+0001f570: 626f 6479 5f65 6c65 6d65 6e74 7320 414e  body_elements AN
+0001f580: 474c 455f 434c 4f53 4522 0a20 2020 2020  GLE_CLOSE".     
+0001f590: 2020 2070 5b30 5d20 3d20 705b 325d 0a0a     p[0] = p[2]..
+0001f5a0: 2020 2020 2323 2320 6368 6f72 645f 626f      ### chord_bo
+0001f5b0: 6479 5f65 6c65 6d65 6e74 2023 2323 0a0a  dy_element ###..
+0001f5c0: 2020 2020 2320 2020 2064 6566 2070 5f63      #    def p_c
+0001f5d0: 686f 7264 5f62 6f64 795f 656c 656d 656e  hord_body_elemen
+0001f5e0: 745f 5f44 5255 4d5f 5049 5443 485f 5f70  t__DRUM_PITCH__p
+0001f5f0: 6f73 745f 6576 656e 7473 2873 656c 662c  ost_events(self,
+0001f600: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+0001f610: 2020 2763 686f 7264 5f62 6f64 795f 656c    'chord_body_el
+0001f620: 656d 656e 7420 3a20 4452 554d 5f50 4954  ement : DRUM_PIT
+0001f630: 4348 2070 6f73 745f 6576 656e 7473 270a  CH post_events'.
+0001f640: 2020 2020 2320 2020 2020 2020 2070 5b30      #        p[0
+0001f650: 5d20 3d20 5379 6e74 6178 4e6f 6465 2827  ] = SyntaxNode('
+0001f660: 6368 6f72 645f 626f 6479 5f65 6c65 6d65  chord_body_eleme
+0001f670: 6e74 272c 2070 5b31 3a5d 290a 0a20 2020  nt', p[1:])..   
+0001f680: 2064 6566 2070 5f63 686f 7264 5f62 6f64   def p_chord_bod
+0001f690: 795f 656c 656d 656e 745f 5f6d 7573 6963  y_element__music
+0001f6a0: 5f66 756e 6374 696f 6e5f 6368 6f72 645f  _function_chord_
+0001f6b0: 626f 6479 2873 656c 662c 2070 293a 0a20  body(self, p):. 
+0001f6c0: 2020 2020 2020 2022 6368 6f72 645f 626f         "chord_bo
+0001f6d0: 6479 5f65 6c65 6d65 6e74 203a 206d 7573  dy_element : mus
+0001f6e0: 6963 5f66 756e 6374 696f 6e5f 6368 6f72  ic_function_chor
+0001f6f0: 645f 626f 6479 220a 2020 2020 2020 2020  d_body".        
+0001f700: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+0001f710: 6528 2263 686f 7264 5f62 6f64 795f 656c  e("chord_body_el
+0001f720: 656d 656e 7422 2c20 705b 313a 5d29 0a0a  ement", p[1:])..
+0001f730: 2020 2020 6465 6620 705f 6368 6f72 645f      def p_chord_
+0001f740: 626f 6479 5f65 6c65 6d65 6e74 5f5f 7069  body_element__pi
+0001f750: 7463 685f 5f65 7863 6c61 6d61 7469 6f6e  tch__exclamation
+0001f760: 735f 5f71 7565 7374 696f 6e73 5f5f 6f63  s__questions__oc
+0001f770: 7461 7665 5f63 6865 636b 5f5f 706f 7374  tave_check__post
+0001f780: 5f65 7665 6e74 7328 0a20 2020 2020 2020  _events(.       
+0001f790: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
+0001f7a0: 2020 2020 2020 2020 2263 686f 7264 5f62          "chord_b
+0001f7b0: 6f64 795f 656c 656d 656e 7420 3a20 7069  ody_element : pi
+0001f7c0: 7463 6820 6578 636c 616d 6174 696f 6e73  tch exclamations
+0001f7d0: 2071 7565 7374 696f 6e73 206f 6374 6176   questions octav
+0001f7e0: 655f 6368 6563 6b20 706f 7374 5f65 7665  e_check post_eve
+0001f7f0: 6e74 7322 0a20 2020 2020 2020 2069 6620  nts".        if 
+0001f800: 705b 315d 206e 6f74 2069 6e20 5f6c 7963  p[1] not in _lyc
+0001f810: 6f6e 7374 2e64 7275 6d73 3a0a 2020 2020  onst.drums:.    
+0001f820: 2020 2020 2020 2020 6e6f 7465 5f68 6561          note_hea
+0001f830: 6420 3d20 5f73 636f 7265 2e4e 6f74 6548  d = _score.NoteH
+0001f840: 6561 6428 0a20 2020 2020 2020 2020 2020  ead(.           
+0001f850: 2020 2020 2077 7269 7474 656e 5f70 6974       written_pit
+0001f860: 6368 3d70 5b31 5d2c 0a20 2020 2020 2020  ch=p[1],.       
+0001f870: 2020 2020 2020 2020 2069 735f 6361 7574           is_caut
+0001f880: 696f 6e61 7279 3d62 6f6f 6c28 705b 335d  ionary=bool(p[3]
+0001f890: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+0001f8a0: 2020 2069 735f 666f 7263 6564 3d62 6f6f     is_forced=boo
+0001f8b0: 6c28 705b 325d 292c 0a20 2020 2020 2020  l(p[2]),.       
+0001f8c0: 2020 2020 2029 0a20 2020 2020 2020 2065       ).        e
+0001f8d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001f8e0: 206e 6f74 655f 6865 6164 203d 205f 7363   note_head = _sc
+0001f8f0: 6f72 652e 4472 756d 4e6f 7465 4865 6164  ore.DrumNoteHead
+0001f900: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001f910: 2020 7772 6974 7465 6e5f 7069 7463 683d    written_pitch=
+0001f920: 705b 315d 2c0a 2020 2020 2020 2020 2020  p[1],.          
+0001f930: 2020 2020 2020 6973 5f63 6175 7469 6f6e        is_caution
+0001f940: 6172 793d 626f 6f6c 2870 5b33 5d29 2c0a  ary=bool(p[3]),.
+0001f950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f960: 6973 5f66 6f72 6365 643d 626f 6f6c 2870  is_forced=bool(p
+0001f970: 5b32 5d29 2c0a 2020 2020 2020 2020 2020  [2]),.          
+0001f980: 2020 290a 2020 2020 2020 2020 705b 305d    ).        p[0]
+0001f990: 203d 2053 796e 7461 784e 6f64 6528 2263   = SyntaxNode("c
+0001f9a0: 686f 7264 5f62 6f64 795f 656c 656d 656e  hord_body_elemen
+0001f9b0: 7422 2c20 286e 6f74 655f 6865 6164 2c20  t", (note_head, 
+0001f9c0: 705b 355d 2929 0a0a 2020 2020 2323 2320  p[5]))..    ### 
+0001f9d0: 6368 6f72 645f 626f 6479 5f65 6c65 6d65  chord_body_eleme
+0001f9e0: 6e74 7320 2323 230a 0a20 2020 2064 6566  nts ###..    def
+0001f9f0: 2070 5f63 686f 7264 5f62 6f64 795f 656c   p_chord_body_el
+0001fa00: 656d 656e 7473 5f5f 456d 7074 7928 7365  ements__Empty(se
+0001fa10: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+0001fa20: 2263 686f 7264 5f62 6f64 795f 656c 656d  "chord_body_elem
+0001fa30: 656e 7473 203a 220a 2020 2020 2020 2020  ents :".        
+0001fa40: 705b 305d 203d 205b 5d0a 0a20 2020 2064  p[0] = []..    d
+0001fa50: 6566 2070 5f63 686f 7264 5f62 6f64 795f  ef p_chord_body_
+0001fa60: 656c 656d 656e 7473 5f5f 6368 6f72 645f  elements__chord_
+0001fa70: 626f 6479 5f65 6c65 6d65 6e74 735f 5f63  body_elements__c
+0001fa80: 686f 7264 5f62 6f64 795f 656c 656d 656e  hord_body_elemen
+0001fa90: 7428 7365 6c66 2c20 7029 3a0a 2020 2020  t(self, p):.    
+0001faa0: 2020 2020 2263 686f 7264 5f62 6f64 795f      "chord_body_
+0001fab0: 656c 656d 656e 7473 203a 2063 686f 7264  elements : chord
+0001fac0: 5f62 6f64 795f 656c 656d 656e 7473 2063  _body_elements c
+0001fad0: 686f 7264 5f62 6f64 795f 656c 656d 656e  hord_body_elemen
+0001fae0: 7422 0a20 2020 2020 2020 2070 5b30 5d20  t".        p[0] 
+0001faf0: 3d20 705b 315d 202b 205b 705b 325d 5d0a  = p[1] + [p[2]].
+0001fb00: 0a20 2020 2023 2323 2063 686f 7264 5f69  .    ### chord_i
+0001fb10: 7465 6d20 2323 230a 0a20 2020 2023 2020  tem ###..    #  
+0001fb20: 2020 6465 6620 705f 6368 6f72 645f 6974    def p_chord_it
+0001fb30: 656d 5f5f 4348 4f52 445f 4d4f 4449 4649  em__CHORD_MODIFI
+0001fb40: 4552 2873 656c 662c 2070 293a 0a20 2020  ER(self, p):.   
+0001fb50: 2023 2020 2020 2020 2020 2763 686f 7264   #        'chord
+0001fb60: 5f69 7465 6d20 3a20 4348 4f52 445f 4d4f  _item : CHORD_MO
+0001fb70: 4449 4649 4552 270a 2020 2020 2320 2020  DIFIER'.    #   
+0001fb80: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
+0001fb90: 6178 4e6f 6465 2827 6368 6f72 645f 6974  axNode('chord_it
+0001fba0: 656d 272c 2070 5b31 3a5d 290a 0a20 2020  em', p[1:])..   
+0001fbb0: 2023 2020 2020 6465 6620 705f 6368 6f72   #    def p_chor
+0001fbc0: 645f 6974 656d 5f5f 6368 6f72 645f 7365  d_item__chord_se
+0001fbd0: 7061 7261 746f 7228 7365 6c66 2c20 7029  parator(self, p)
+0001fbe0: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
+0001fbf0: 6368 6f72 645f 6974 656d 203a 2063 686f  chord_item : cho
+0001fc00: 7264 5f73 6570 6172 6174 6f72 270a 2020  rd_separator'.  
+0001fc10: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
+0001fc20: 3d20 5379 6e74 6178 4e6f 6465 2827 6368  = SyntaxNode('ch
+0001fc30: 6f72 645f 6974 656d 272c 2070 5b31 3a5d  ord_item', p[1:]
+0001fc40: 290a 0a20 2020 2023 2020 2020 6465 6620  )..    #    def 
+0001fc50: 705f 6368 6f72 645f 6974 656d 5f5f 7374  p_chord_item__st
+0001fc60: 6570 5f6e 756d 6265 7273 2873 656c 662c  ep_numbers(self,
+0001fc70: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+0001fc80: 2020 2763 686f 7264 5f69 7465 6d20 3a20    'chord_item : 
+0001fc90: 7374 6570 5f6e 756d 6265 7273 270a 2020  step_numbers'.  
+0001fca0: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
+0001fcb0: 3d20 5379 6e74 6178 4e6f 6465 2827 6368  = SyntaxNode('ch
+0001fcc0: 6f72 645f 6974 656d 272c 2070 5b31 3a5d  ord_item', p[1:]
+0001fcd0: 290a 0a20 2020 2023 2323 2063 686f 7264  )..    ### chord
+0001fce0: 5f69 7465 6d73 2023 2323 0a0a 2020 2020  _items ###..    
+0001fcf0: 2320 2020 2064 6566 2070 5f63 686f 7264  #    def p_chord
+0001fd00: 5f69 7465 6d73 5f5f 456d 7074 7928 7365  _items__Empty(se
+0001fd10: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+0001fd20: 2020 2020 2027 6368 6f72 645f 6974 656d       'chord_item
+0001fd30: 7320 3a20 270a 2020 2020 2320 2020 2020  s : '.    #     
+0001fd40: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
+0001fd50: 4e6f 6465 2827 6368 6f72 645f 6974 656d  Node('chord_item
+0001fd60: 7327 2c20 705b 313a 5d29 0a0a 2020 2020  s', p[1:])..    
+0001fd70: 2320 2020 2064 6566 2070 5f63 686f 7264  #    def p_chord
+0001fd80: 5f69 7465 6d73 5f5f 6368 6f72 645f 6974  _items__chord_it
+0001fd90: 656d 735f 5f63 686f 7264 5f69 7465 6d28  ems__chord_item(
+0001fda0: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
+0001fdb0: 2020 2020 2020 2027 6368 6f72 645f 6974         'chord_it
+0001fdc0: 656d 7320 3a20 6368 6f72 645f 6974 656d  ems : chord_item
+0001fdd0: 7320 6368 6f72 645f 6974 656d 270a 2020  s chord_item'.  
+0001fde0: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
+0001fdf0: 3d20 5379 6e74 6178 4e6f 6465 2827 6368  = SyntaxNode('ch
+0001fe00: 6f72 645f 6974 656d 7327 2c20 705b 313a  ord_items', p[1:
+0001fe10: 5d29 0a0a 2020 2020 2323 2320 6368 6f72  ])..    ### chor
+0001fe20: 645f 7365 7061 7261 746f 7220 2323 230a  d_separator ###.
+0001fe30: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
+0001fe40: 6368 6f72 645f 7365 7061 7261 746f 725f  chord_separator_
+0001fe50: 5f43 484f 5244 5f42 4153 535f 5f73 7465  _CHORD_BASS__ste
+0001fe60: 6e6f 5f74 6f6e 6963 5f70 6974 6368 2873  no_tonic_pitch(s
+0001fe70: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
+0001fe80: 2020 2020 2020 2763 686f 7264 5f73 6570        'chord_sep
+0001fe90: 6172 6174 6f72 203a 2043 484f 5244 5f42  arator : CHORD_B
+0001fea0: 4153 5320 7374 656e 6f5f 746f 6e69 635f  ASS steno_tonic_
+0001feb0: 7069 7463 6827 0a20 2020 2023 2020 2020  pitch'.    #    
+0001fec0: 2020 2020 705b 305d 203d 2053 796e 7461      p[0] = Synta
+0001fed0: 784e 6f64 6528 2763 686f 7264 5f73 6570  xNode('chord_sep
+0001fee0: 6172 6174 6f72 272c 2070 5b31 3a5d 290a  arator', p[1:]).
+0001fef0: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
+0001ff00: 6368 6f72 645f 7365 7061 7261 746f 725f  chord_separator_
+0001ff10: 5f43 484f 5244 5f43 4152 4554 2873 656c  _CHORD_CARET(sel
+0001ff20: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
+0001ff30: 2020 2020 2763 686f 7264 5f73 6570 6172      'chord_separ
+0001ff40: 6174 6f72 203a 2043 484f 5244 5f43 4152  ator : CHORD_CAR
+0001ff50: 4554 270a 2020 2020 2320 2020 2020 2020  ET'.    #       
+0001ff60: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
+0001ff70: 6465 2827 6368 6f72 645f 7365 7061 7261  de('chord_separa
+0001ff80: 746f 7227 2c20 705b 313a 5d29 0a0a 2020  tor', p[1:])..  
+0001ff90: 2020 2320 2020 2064 6566 2070 5f63 686f    #    def p_cho
+0001ffa0: 7264 5f73 6570 6172 6174 6f72 5f5f 4348  rd_separator__CH
+0001ffb0: 4f52 445f 434f 4c4f 4e28 7365 6c66 2c20  ORD_COLON(self, 
+0001ffc0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+0001ffd0: 2027 6368 6f72 645f 7365 7061 7261 746f   'chord_separato
+0001ffe0: 7220 3a20 4348 4f52 445f 434f 4c4f 4e27  r : CHORD_COLON'
+0001fff0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+00020000: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+00020010: 2763 686f 7264 5f73 6570 6172 6174 6f72  'chord_separator
+00020020: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
+00020030: 2020 2020 6465 6620 705f 6368 6f72 645f      def p_chord_
+00020040: 7365 7061 7261 746f 725f 5f43 484f 5244  separator__CHORD
+00020050: 5f53 4c41 5348 5f5f 7374 656e 6f5f 746f  _SLASH__steno_to
+00020060: 6e69 635f 7069 7463 6828 7365 6c66 2c20  nic_pitch(self, 
+00020070: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+00020080: 2027 6368 6f72 645f 7365 7061 7261 746f   'chord_separato
+00020090: 7220 3a20 4348 4f52 445f 534c 4153 4820  r : CHORD_SLASH 
+000200a0: 7374 656e 6f5f 746f 6e69 635f 7069 7463  steno_tonic_pitc
+000200b0: 6827 0a20 2020 2023 2020 2020 2020 2020  h'.    #        
+000200c0: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+000200d0: 6528 2763 686f 7264 5f73 6570 6172 6174  e('chord_separat
+000200e0: 6f72 272c 2070 5b31 3a5d 290a 0a20 2020  or', p[1:])..   
+000200f0: 2023 2323 2063 6c6f 7365 645f 6d75 7369   ### closed_musi
+00020100: 6320 2323 230a 0a20 2020 2064 6566 2070  c ###..    def p
+00020110: 5f63 6c6f 7365 645f 6d75 7369 635f 5f63  _closed_music__c
+00020120: 6f6d 706c 6578 5f6d 7573 6963 5f70 7265  omplex_music_pre
+00020130: 6669 785f 5f63 6c6f 7365 645f 6d75 7369  fix__closed_musi
+00020140: 6328 7365 6c66 2c20 7029 3a0a 2020 2020  c(self, p):.    
+00020150: 2020 2020 2263 6c6f 7365 645f 6d75 7369      "closed_musi
+00020160: 6320 3a20 636f 6d70 6c65 785f 6d75 7369  c : complex_musi
+00020170: 635f 7072 6566 6978 2063 6c6f 7365 645f  c_prefix closed_
+00020180: 6d75 7369 6322 0a20 2020 2020 2020 2070  music".        p
+00020190: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
+000201a0: 2822 636c 6f73 6564 5f6d 7573 6963 222c  ("closed_music",
+000201b0: 2070 5b31 3a5d 290a 0a20 2020 2064 6566   p[1:])..    def
+000201c0: 2070 5f63 6c6f 7365 645f 6d75 7369 635f   p_closed_music_
+000201d0: 5f6d 7573 6963 5f62 6172 6528 7365 6c66  _music_bare(self
+000201e0: 2c20 7029 3a0a 2020 2020 2020 2020 2263  , p):.        "c
+000201f0: 6c6f 7365 645f 6d75 7369 6320 3a20 6d75  losed_music : mu
+00020200: 7369 635f 6261 7265 220a 2020 2020 2020  sic_bare".      
+00020210: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
+00020220: 6f64 6528 2263 6c6f 7365 645f 6d75 7369  ode("closed_musi
+00020230: 6322 2c20 705b 313a 5d29 0a0a 2020 2020  c", p[1:])..    
+00020240: 2323 2320 636f 6d6d 616e 645f 656c 656d  ### command_elem
+00020250: 656e 7420 2323 230a 0a20 2020 2064 6566  ent ###..    def
+00020260: 2070 5f63 6f6d 6d61 6e64 5f65 6c65 6d65   p_command_eleme
+00020270: 6e74 5f5f 4368 7231 3234 2873 656c 662c  nt__Chr124(self,
+00020280: 2070 293a 0a20 2020 2020 2020 2022 636f   p):.        "co
+00020290: 6d6d 616e 645f 656c 656d 656e 7420 3a20  mmand_element : 
+000202a0: 277c 2722 0a20 2020 2020 2020 2070 5b30  '|'".        p[0
+000202b0: 5d20 3d20 4c69 6c79 506f 6e64 4576 656e  ] = LilyPondEven
+000202c0: 7428 2242 6172 4368 6563 6b22 290a 0a20  t("BarCheck").. 
+000202d0: 2020 2064 6566 2070 5f63 6f6d 6d61 6e64     def p_command
+000202e0: 5f65 6c65 6d65 6e74 5f5f 455f 4241 434b  _element__E_BACK
+000202f0: 534c 4153 4828 7365 6c66 2c20 7029 3a0a  SLASH(self, p):.
+00020300: 2020 2020 2020 2020 2263 6f6d 6d61 6e64          "command
+00020310: 5f65 6c65 6d65 6e74 203a 2045 5f42 4143  _element : E_BAC
+00020320: 4b53 4c41 5348 220a 2020 2020 2020 2020  KSLASH".        
+00020330: 705b 305d 203d 204c 696c 7950 6f6e 6445  p[0] = LilyPondE
+00020340: 7665 6e74 2822 566f 6963 6553 6570 6172  vent("VoiceSepar
+00020350: 6174 6f72 2229 0a0a 2020 2020 2320 2020  ator")..    #   
+00020360: 2064 6566 2070 5f63 6f6d 6d61 6e64 5f65   def p_command_e
+00020370: 6c65 6d65 6e74 5f5f 455f 4252 4143 4b45  lement__E_BRACKE
+00020380: 545f 434c 4f53 4528 7365 6c66 2c20 7029  T_CLOSE(self, p)
+00020390: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
+000203a0: 636f 6d6d 616e 645f 656c 656d 656e 7420  command_element 
+000203b0: 3a20 455f 4252 4143 4b45 545f 434c 4f53  : E_BRACKET_CLOS
+000203c0: 4527 0a20 2020 2023 2020 2020 2020 2020  E'.    #        
+000203d0: 6d65 7373 6167 6520 3d20 276c 6967 6174  message = 'ligat
+000203e0: 7572 6573 206e 6f74 2073 7570 706f 7274  ures not support
+000203f0: 6564 2e27 0a20 2020 2023 2020 2020 2020  ed.'.    #      
+00020400: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
+00020410: 6e28 6d65 7373 6167 6529 0a0a 2020 2020  n(message)..    
+00020420: 2320 2020 2064 6566 2070 5f63 6f6d 6d61  #    def p_comma
+00020430: 6e64 5f65 6c65 6d65 6e74 5f5f 455f 4252  nd_element__E_BR
+00020440: 4143 4b45 545f 4f50 454e 2873 656c 662c  ACKET_OPEN(self,
+00020450: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+00020460: 2020 2763 6f6d 6d61 6e64 5f65 6c65 6d65    'command_eleme
+00020470: 6e74 203a 2045 5f42 5241 434b 4554 5f4f  nt : E_BRACKET_O
+00020480: 5045 4e27 0a20 2020 2023 2020 2020 2020  PEN'.    #      
+00020490: 2020 6d65 7373 6167 6520 3d20 276c 6967    message = 'lig
+000204a0: 6174 7572 6573 206e 6f74 2073 7570 706f  atures not suppo
+000204b0: 7274 6564 2e27 0a20 2020 2023 2020 2020  rted.'.    #    
+000204c0: 2020 2020 7261 6973 6520 4578 6365 7074      raise Except
+000204d0: 696f 6e28 6d65 7373 6167 6529 0a0a 2020  ion(message)..  
+000204e0: 2020 6465 6620 705f 636f 6d6d 616e 645f    def p_command_
+000204f0: 656c 656d 656e 745f 5f63 6f6d 6d61 6e64  element__command
+00020500: 5f65 7665 6e74 2873 656c 662c 2070 293a  _event(self, p):
+00020510: 0a20 2020 2020 2020 2022 636f 6d6d 616e  .        "comman
+00020520: 645f 656c 656d 656e 7420 3a20 636f 6d6d  d_element : comm
+00020530: 616e 645f 6576 656e 7422 0a20 2020 2020  and_event".     
+00020540: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+00020550: 2020 2020 2323 2320 636f 6d6d 616e 645f      ### command_
+00020560: 6576 656e 7420 2323 230a 0a20 2020 2023  event ###..    #
+00020570: 2020 2020 6465 6620 705f 636f 6d6d 616e      def p_comman
+00020580: 645f 6576 656e 745f 5f45 5f54 494c 4445  d_event__E_TILDE
+00020590: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+000205a0: 2020 2020 2020 2020 2763 6f6d 6d61 6e64          'command
+000205b0: 5f65 7665 6e74 203a 2045 5f54 494c 4445  _event : E_TILDE
+000205c0: 270a 2020 2020 2320 2020 2020 2020 206d  '.    #        m
+000205d0: 6573 7361 6765 203d 2027 7065 7320 616e  essage = 'pes an
+000205e0: 6420 666c 6578 6120 6576 656e 7473 206e  d flexa events n
+000205f0: 6f74 2073 7570 706f 7274 6564 2e27 0a20  ot supported.'. 
+00020600: 2020 2023 2020 2020 2020 2020 7261 6973     #        rais
+00020610: 6520 4578 6365 7074 696f 6e28 6d65 7373  e Exception(mess
+00020620: 6167 6529 0a0a 2020 2020 6465 6620 705f  age)..    def p_
+00020630: 636f 6d6d 616e 645f 6576 656e 745f 5f74  command_event__t
+00020640: 656d 706f 5f65 7665 6e74 2873 656c 662c  empo_event(self,
+00020650: 2070 293a 0a20 2020 2020 2020 2022 636f   p):.        "co
+00020660: 6d6d 616e 645f 6576 656e 7420 3a20 7465  mmand_event : te
+00020670: 6d70 6f5f 6576 656e 7422 0a20 2020 2020  mpo_event".     
+00020680: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+00020690: 2020 2020 2323 2320 636f 6d70 6c65 785f      ### complex_
+000206a0: 6d75 7369 6320 2323 230a 0a20 2020 2064  music ###..    d
+000206b0: 6566 2070 5f63 6f6d 706c 6578 5f6d 7573  ef p_complex_mus
+000206c0: 6963 5f5f 636f 6d70 6c65 785f 6d75 7369  ic__complex_musi
+000206d0: 635f 7072 6566 6978 5f5f 6d75 7369 6328  c_prefix__music(
+000206e0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+000206f0: 2020 2263 6f6d 706c 6578 5f6d 7573 6963    "complex_music
+00020700: 203a 2063 6f6d 706c 6578 5f6d 7573 6963   : complex_music
+00020710: 5f70 7265 6669 7820 6d75 7369 6322 0a20  _prefix music". 
+00020720: 2020 2020 2020 2063 6f6e 7465 7874 203d         context =
+00020730: 2070 5b31 5d5b 315d 0a20 2020 2020 2020   p[1][1].       
+00020740: 206f 7074 696f 6e61 6c5f 6964 203d 2070   optional_id = p
+00020750: 5b31 5d5b 325d 0a20 2020 2020 2020 206f  [1][2].        o
+00020760: 7074 696f 6e61 6c5f 636f 6e74 6578 745f  ptional_context_
+00020770: 6d6f 6420 3d20 705b 315d 5b33 5d0a 2020  mod = p[1][3].  
+00020780: 2020 2020 2020 6d75 7369 6320 3d20 705b        music = p[
+00020790: 325d 0a20 2020 2020 2020 2070 5b30 5d20  2].        p[0] 
+000207a0: 3d20 7365 6c66 2e63 6c69 656e 742e 5f63  = self.client._c
+000207b0: 6f6e 7374 7275 6374 5f63 6f6e 7465 7874  onstruct_context
+000207c0: 5f73 7065 6363 6564 5f6d 7573 6963 280a  _specced_music(.
+000207d0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+000207e0: 6578 742c 206f 7074 696f 6e61 6c5f 6964  ext, optional_id
+000207f0: 2c20 6f70 7469 6f6e 616c 5f63 6f6e 7465  , optional_conte
+00020800: 7874 5f6d 6f64 2c20 6d75 7369 630a 2020  xt_mod, music.  
+00020810: 2020 2020 2020 290a 0a20 2020 2064 6566        )..    def
+00020820: 2070 5f63 6f6d 706c 6578 5f6d 7573 6963   p_complex_music
+00020830: 5f5f 6d75 7369 635f 6675 6e63 7469 6f6e  __music_function
+00020840: 5f63 616c 6c28 7365 6c66 2c20 7029 3a0a  _call(self, p):.
+00020850: 2020 2020 2020 2020 2263 6f6d 706c 6578          "complex
+00020860: 5f6d 7573 6963 203a 206d 7573 6963 5f66  _music : music_f
+00020870: 756e 6374 696f 6e5f 6361 6c6c 220a 2020  unction_call".  
+00020880: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
+00020890: 5d0a 0a20 2020 2023 2020 2020 6465 6620  ]..    #    def 
+000208a0: 705f 636f 6d70 6c65 785f 6d75 7369 635f  p_complex_music_
+000208b0: 5f72 655f 7268 7974 686d 6564 5f6d 7573  _re_rhythmed_mus
+000208c0: 6963 2873 656c 662c 2070 293a 0a20 2020  ic(self, p):.   
+000208d0: 2023 2020 2020 2020 2020 2763 6f6d 706c   #        'compl
+000208e0: 6578 5f6d 7573 6963 203a 2072 655f 7268  ex_music : re_rh
+000208f0: 7974 686d 6564 5f6d 7573 6963 270a 2020  ythmed_music'.  
+00020900: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
+00020910: 3d20 5379 6e74 6178 4e6f 6465 2827 636f  = SyntaxNode('co
+00020920: 6d70 6c65 785f 6d75 7369 6327 2c20 705b  mplex_music', p[
+00020930: 313a 5d29 0a0a 2020 2020 2320 2020 2064  1:])..    #    d
+00020940: 6566 2070 5f63 6f6d 706c 6578 5f6d 7573  ef p_complex_mus
+00020950: 6963 5f5f 7265 7065 6174 6564 5f6d 7573  ic__repeated_mus
+00020960: 6963 2873 656c 662c 2070 293a 0a20 2020  ic(self, p):.   
+00020970: 2023 2020 2020 2020 2020 2763 6f6d 706c   #        'compl
+00020980: 6578 5f6d 7573 6963 203a 2072 6570 6561  ex_music : repea
+00020990: 7465 645f 6d75 7369 6327 0a20 2020 2023  ted_music'.    #
+000209a0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+000209b0: 796e 7461 784e 6f64 6528 2763 6f6d 706c  yntaxNode('compl
+000209c0: 6578 5f6d 7573 6963 272c 2070 5b31 3a5d  ex_music', p[1:]
+000209d0: 290a 0a20 2020 2023 2323 2063 6f6d 706c  )..    ### compl
+000209e0: 6578 5f6d 7573 6963 5f70 7265 6669 7820  ex_music_prefix 
+000209f0: 2323 230a 0a20 2020 2064 6566 2070 5f63  ###..    def p_c
+00020a00: 6f6d 706c 6578 5f6d 7573 6963 5f70 7265  omplex_music_pre
+00020a10: 6669 785f 5f43 4f4e 5445 5854 5f5f 7369  fix__CONTEXT__si
+00020a20: 6d70 6c65 5f73 7472 696e 675f 5f6f 7074  mple_string__opt
+00020a30: 696f 6e61 6c5f 6964 5f5f 6f70 7469 6f6e  ional_id__option
+00020a40: 616c 5f63 6f6e 7465 7874 5f6d 6f64 280a  al_context_mod(.
+00020a50: 2020 2020 2020 2020 7365 6c66 2c20 700a          self, p.
+00020a60: 2020 2020 293a 0a20 2020 2020 2020 2022      ):.        "
+00020a70: 636f 6d70 6c65 785f 6d75 7369 635f 7072  complex_music_pr
+00020a80: 6566 6978 203a 2043 4f4e 5445 5854 2073  efix : CONTEXT s
+00020a90: 696d 706c 655f 7374 7269 6e67 206f 7074  imple_string opt
+00020aa0: 696f 6e61 6c5f 6964 206f 7074 696f 6e61  ional_id optiona
+00020ab0: 6c5f 636f 6e74 6578 745f 6d6f 6422 0a20  l_context_mod". 
+00020ac0: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+00020ad0: 6e74 6178 4e6f 6465 2822 636f 6d70 6c65  ntaxNode("comple
+00020ae0: 785f 6d75 7369 635f 7072 6566 6978 222c  x_music_prefix",
+00020af0: 2070 2e5f 5f67 6574 736c 6963 655f 5f28   p.__getslice__(
+00020b00: 312c 204e 6f6e 6529 290a 0a20 2020 2064  1, None))..    d
+00020b10: 6566 2070 5f63 6f6d 706c 6578 5f6d 7573  ef p_complex_mus
+00020b20: 6963 5f70 7265 6669 785f 5f4e 4557 434f  ic_prefix__NEWCO
+00020b30: 4e54 4558 545f 5f73 696d 706c 655f 7374  NTEXT__simple_st
+00020b40: 7269 6e67 5f5f 6f70 7469 6f6e 616c 5f69  ring__optional_i
+00020b50: 645f 5f6f 7074 696f 6e61 6c5f 636f 6e74  d__optional_cont
+00020b60: 6578 745f 6d6f 6428 0a20 2020 2020 2020  ext_mod(.       
+00020b70: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
+00020b80: 2020 2020 2020 2020 2263 6f6d 706c 6578          "complex
+00020b90: 5f6d 7573 6963 5f70 7265 6669 7820 3a20  _music_prefix : 
+00020ba0: 4e45 5743 4f4e 5445 5854 2073 696d 706c  NEWCONTEXT simpl
+00020bb0: 655f 7374 7269 6e67 206f 7074 696f 6e61  e_string optiona
+00020bc0: 6c5f 6964 206f 7074 696f 6e61 6c5f 636f  l_id optional_co
+00020bd0: 6e74 6578 745f 6d6f 6422 0a20 2020 2020  ntext_mod".     
+00020be0: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
+00020bf0: 4e6f 6465 2822 636f 6d70 6c65 785f 6d75  Node("complex_mu
+00020c00: 7369 635f 7072 6566 6978 222c 2070 2e5f  sic_prefix", p._
+00020c10: 5f67 6574 736c 6963 655f 5f28 312c 204e  _getslice__(1, N
+00020c20: 6f6e 6529 290a 0a20 2020 2023 2323 2063  one))..    ### c
+00020c30: 6f6d 706f 7369 7465 5f6d 7573 6963 2023  omposite_music #
+00020c40: 2323 0a0a 2020 2020 6465 6620 705f 636f  ##..    def p_co
+00020c50: 6d70 6f73 6974 655f 6d75 7369 635f 5f63  mposite_music__c
+00020c60: 6f6d 706c 6578 5f6d 7573 6963 2873 656c  omplex_music(sel
+00020c70: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00020c80: 636f 6d70 6f73 6974 655f 6d75 7369 6320  composite_music 
+00020c90: 3a20 636f 6d70 6c65 785f 6d75 7369 6322  : complex_music"
+00020ca0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00020cb0: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
+00020cc0: 636f 6d70 6f73 6974 655f 6d75 7369 635f  composite_music_
+00020cd0: 5f6d 7573 6963 5f62 6172 6528 7365 6c66  _music_bare(self
+00020ce0: 2c20 7029 3a0a 2020 2020 2020 2020 2263  , p):.        "c
+00020cf0: 6f6d 706f 7369 7465 5f6d 7573 6963 203a  omposite_music :
+00020d00: 206d 7573 6963 5f62 6172 6522 0a20 2020   music_bare".   
+00020d10: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
+00020d20: 0a0a 2020 2020 2323 2320 636f 6e74 6578  ..    ### contex
+00020d30: 745f 6368 616e 6765 2023 2323 0a0a 2020  t_change ###..  
+00020d40: 2020 6465 6620 705f 636f 6e74 6578 745f    def p_context_
+00020d50: 6368 616e 6765 5f5f 4348 414e 4745 5f5f  change__CHANGE__
+00020d60: 5354 5249 4e47 5f5f 4368 7236 315f 5f53  STRING__Chr61__S
+00020d70: 5452 494e 4728 7365 6c66 2c20 7029 3a0a  TRING(self, p):.
+00020d80: 2020 2020 2020 2020 2263 6f6e 7465 7874          "context
+00020d90: 5f63 6861 6e67 6520 3a20 4348 414e 4745  _change : CHANGE
+00020da0: 2053 5452 494e 4720 273d 2720 5354 5249   STRING '=' STRI
+00020db0: 4e47 220a 2020 2020 2020 2020 705b 305d  NG".        p[0]
+00020dc0: 203d 2053 796e 7461 784e 6f64 6528 2263   = SyntaxNode("c
+00020dd0: 6f6e 7465 7874 5f63 6861 6e67 6522 2c20  ontext_change", 
+00020de0: 702e 5f5f 6765 7473 6c69 6365 5f5f 2831  p.__getslice__(1
+00020df0: 2c20 4e6f 6e65 2929 0a0a 2020 2020 2323  , None))..    ##
+00020e00: 2320 636f 6e74 6578 745f 6465 665f 6d6f  # context_def_mo
+00020e10: 6420 2323 230a 0a20 2020 2023 2020 2020  d ###..    #    
+00020e20: 6465 6620 705f 636f 6e74 6578 745f 6465  def p_context_de
+00020e30: 665f 6d6f 645f 5f41 4343 4550 5453 2873  f_mod__ACCEPTS(s
+00020e40: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
+00020e50: 2020 2020 2020 2763 6f6e 7465 7874 5f64        'context_d
+00020e60: 6566 5f6d 6f64 203a 2041 4343 4550 5453  ef_mod : ACCEPTS
+00020e70: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
+00020e80: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
+00020e90: 2827 636f 6e74 6578 745f 6465 665f 6d6f  ('context_def_mo
+00020ea0: 6427 2c20 705b 313a 5d29 0a0a 2020 2020  d', p[1:])..    
+00020eb0: 2320 2020 2064 6566 2070 5f63 6f6e 7465  #    def p_conte
+00020ec0: 7874 5f64 6566 5f6d 6f64 5f5f 414c 4941  xt_def_mod__ALIA
+00020ed0: 5328 7365 6c66 2c20 7029 3a0a 2020 2020  S(self, p):.    
+00020ee0: 2320 2020 2020 2020 2027 636f 6e74 6578  #        'contex
+00020ef0: 745f 6465 665f 6d6f 6420 3a20 414c 4941  t_def_mod : ALIA
+00020f00: 5327 0a20 2020 2023 2020 2020 2020 2020  S'.    #        
+00020f10: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+00020f20: 6528 2763 6f6e 7465 7874 5f64 6566 5f6d  e('context_def_m
+00020f30: 6f64 272c 2070 5b31 3a5d 290a 0a20 2020  od', p[1:])..   
+00020f40: 2023 2020 2020 6465 6620 705f 636f 6e74   #    def p_cont
+00020f50: 6578 745f 6465 665f 6d6f 645f 5f43 4f4e  ext_def_mod__CON
+00020f60: 5349 5354 5328 7365 6c66 2c20 7029 3a0a  SISTS(self, p):.
+00020f70: 2020 2020 2320 2020 2020 2020 2027 636f      #        'co
+00020f80: 6e74 6578 745f 6465 665f 6d6f 6420 3a20  ntext_def_mod : 
+00020f90: 434f 4e53 4953 5453 270a 2020 2020 2320  CONSISTS'.    # 
+00020fa0: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+00020fb0: 6e74 6178 4e6f 6465 2827 636f 6e74 6578  ntaxNode('contex
+00020fc0: 745f 6465 665f 6d6f 6427 2c20 705b 313a  t_def_mod', p[1:
+00020fd0: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
+00020fe0: 2070 5f63 6f6e 7465 7874 5f64 6566 5f6d   p_context_def_m
+00020ff0: 6f64 5f5f 4445 4641 554c 5443 4849 4c44  od__DEFAULTCHILD
+00021000: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+00021010: 2020 2020 2020 2020 2763 6f6e 7465 7874          'context
+00021020: 5f64 6566 5f6d 6f64 203a 2044 4546 4155  _def_mod : DEFAU
+00021030: 4c54 4348 494c 4427 0a20 2020 2023 2020  LTCHILD'.    #  
+00021040: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+00021050: 7461 784e 6f64 6528 2763 6f6e 7465 7874  taxNode('context
+00021060: 5f64 6566 5f6d 6f64 272c 2070 5b31 3a5d  _def_mod', p[1:]
+00021070: 290a 0a20 2020 2023 2020 2020 6465 6620  )..    #    def 
+00021080: 705f 636f 6e74 6578 745f 6465 665f 6d6f  p_context_def_mo
+00021090: 645f 5f44 454e 4945 5328 7365 6c66 2c20  d__DENIES(self, 
+000210a0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+000210b0: 2027 636f 6e74 6578 745f 6465 665f 6d6f   'context_def_mo
+000210c0: 6420 3a20 4445 4e49 4553 270a 2020 2020  d : DENIES'.    
+000210d0: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+000210e0: 5379 6e74 6178 4e6f 6465 2827 636f 6e74  SyntaxNode('cont
+000210f0: 6578 745f 6465 665f 6d6f 6427 2c20 705b  ext_def_mod', p[
+00021100: 313a 5d29 0a0a 2020 2020 2320 2020 2064  1:])..    #    d
+00021110: 6566 2070 5f63 6f6e 7465 7874 5f64 6566  ef p_context_def
+00021120: 5f6d 6f64 5f5f 4445 5343 5249 5054 494f  _mod__DESCRIPTIO
+00021130: 4e28 7365 6c66 2c20 7029 3a0a 2020 2020  N(self, p):.    
+00021140: 2320 2020 2020 2020 2027 636f 6e74 6578  #        'contex
+00021150: 745f 6465 665f 6d6f 6420 3a20 4445 5343  t_def_mod : DESC
+00021160: 5249 5054 494f 4e27 0a20 2020 2023 2020  RIPTION'.    #  
+00021170: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+00021180: 7461 784e 6f64 6528 2763 6f6e 7465 7874  taxNode('context
+00021190: 5f64 6566 5f6d 6f64 272c 2070 5b31 3a5d  _def_mod', p[1:]
+000211a0: 290a 0a20 2020 2023 2020 2020 6465 6620  )..    #    def 
+000211b0: 705f 636f 6e74 6578 745f 6465 665f 6d6f  p_context_def_mo
+000211c0: 645f 5f4e 414d 4528 7365 6c66 2c20 7029  d__NAME(self, p)
+000211d0: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
+000211e0: 636f 6e74 6578 745f 6465 665f 6d6f 6420  context_def_mod 
+000211f0: 3a20 4e41 4d45 270a 2020 2020 2320 2020  : NAME'.    #   
+00021200: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
+00021210: 6178 4e6f 6465 2827 636f 6e74 6578 745f  axNode('context_
+00021220: 6465 665f 6d6f 6427 2c20 705b 313a 5d29  def_mod', p[1:])
+00021230: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
+00021240: 5f63 6f6e 7465 7874 5f64 6566 5f6d 6f64  _context_def_mod
+00021250: 5f5f 5245 4d4f 5645 2873 656c 662c 2070  __REMOVE(self, p
+00021260: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
+00021270: 2763 6f6e 7465 7874 5f64 6566 5f6d 6f64  'context_def_mod
+00021280: 203a 2052 454d 4f56 4527 0a20 2020 2023   : REMOVE'.    #
+00021290: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+000212a0: 796e 7461 784e 6f64 6528 2763 6f6e 7465  yntaxNode('conte
+000212b0: 7874 5f64 6566 5f6d 6f64 272c 2070 5b31  xt_def_mod', p[1
+000212c0: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
+000212d0: 6620 705f 636f 6e74 6578 745f 6465 665f  f p_context_def_
+000212e0: 6d6f 645f 5f54 5950 4528 7365 6c66 2c20  mod__TYPE(self, 
+000212f0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+00021300: 2027 636f 6e74 6578 745f 6465 665f 6d6f   'context_def_mo
+00021310: 6420 3a20 5459 5045 270a 2020 2020 2320  d : TYPE'.    # 
+00021320: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+00021330: 6e74 6178 4e6f 6465 2827 636f 6e74 6578  ntaxNode('contex
+00021340: 745f 6465 665f 6d6f 6427 2c20 705b 313a  t_def_mod', p[1:
+00021350: 5d29 0a0a 2020 2020 2323 2320 636f 6e74  ])..    ### cont
+00021360: 6578 745f 6465 665f 7370 6563 5f62 6c6f  ext_def_spec_blo
+00021370: 636b 2023 2323 0a0a 2020 2020 6465 6620  ck ###..    def 
+00021380: 705f 636f 6e74 6578 745f 6465 665f 7370  p_context_def_sp
+00021390: 6563 5f62 6c6f 636b 5f5f 434f 4e54 4558  ec_block__CONTEX
+000213a0: 545f 5f43 6872 3132 335f 5f63 6f6e 7465  T__Chr123__conte
+000213b0: 7874 5f64 6566 5f73 7065 635f 626f 6479  xt_def_spec_body
+000213c0: 5f5f 4368 7231 3235 280a 2020 2020 2020  __Chr125(.      
+000213d0: 2020 7365 6c66 2c20 700a 2020 2020 293a    self, p.    ):
+000213e0: 0a20 2020 2020 2020 2022 636f 6e74 6578  .        "contex
+000213f0: 745f 6465 665f 7370 6563 5f62 6c6f 636b  t_def_spec_block
+00021400: 203a 2043 4f4e 5445 5854 2027 7b27 2063   : CONTEXT '{' c
+00021410: 6f6e 7465 7874 5f64 6566 5f73 7065 635f  ontext_def_spec_
+00021420: 626f 6479 2027 7d27 220a 2020 2020 2020  body '}'".      
+00021430: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
+00021440: 6f64 6528 2263 6f6e 7465 7874 5f64 6566  ode("context_def
+00021450: 5f73 7065 635f 626c 6f63 6b22 2c20 702e  _spec_block", p.
+00021460: 5f5f 6765 7473 6c69 6365 5f5f 2831 2c20  __getslice__(1, 
+00021470: 4e6f 6e65 2929 0a0a 2020 2020 2323 2320  None))..    ### 
+00021480: 636f 6e74 6578 745f 6465 665f 7370 6563  context_def_spec
+00021490: 5f62 6f64 7920 2323 230a 0a20 2020 2064  _body ###..    d
+000214a0: 6566 2070 5f63 6f6e 7465 7874 5f64 6566  ef p_context_def
+000214b0: 5f73 7065 635f 626f 6479 5f5f 434f 4e54  _spec_body__CONT
+000214c0: 4558 545f 4445 465f 4944 454e 5449 4649  EXT_DEF_IDENTIFI
+000214d0: 4552 2873 656c 662c 2070 293a 0a20 2020  ER(self, p):.   
+000214e0: 2020 2020 2022 636f 6e74 6578 745f 6465       "context_de
+000214f0: 665f 7370 6563 5f62 6f64 7920 3a20 434f  f_spec_body : CO
+00021500: 4e54 4558 545f 4445 465f 4944 454e 5449  NTEXT_DEF_IDENTI
+00021510: 4649 4552 220a 2020 2020 2020 2020 705b  FIER".        p[
+00021520: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+00021530: 2263 6f6e 7465 7874 5f64 6566 5f73 7065  "context_def_spe
+00021540: 635f 626f 6479 222c 2070 2e5f 5f67 6574  c_body", p.__get
+00021550: 736c 6963 655f 5f28 312c 204e 6f6e 6529  slice__(1, None)
+00021560: 290a 0a20 2020 2064 6566 2070 5f63 6f6e  )..    def p_con
+00021570: 7465 7874 5f64 6566 5f73 7065 635f 626f  text_def_spec_bo
+00021580: 6479 5f5f 456d 7074 7928 7365 6c66 2c20  dy__Empty(self, 
+00021590: 7029 3a0a 2020 2020 2020 2020 2263 6f6e  p):.        "con
+000215a0: 7465 7874 5f64 6566 5f73 7065 635f 626f  text_def_spec_bo
+000215b0: 6479 203a 220a 2020 2020 2020 2020 705b  dy :".        p[
+000215c0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+000215d0: 2263 6f6e 7465 7874 5f64 6566 5f73 7065  "context_def_spe
+000215e0: 635f 626f 6479 222c 2070 2e5f 5f67 6574  c_body", p.__get
+000215f0: 736c 6963 655f 5f28 312c 204e 6f6e 6529  slice__(1, None)
+00021600: 290a 0a20 2020 2064 6566 2070 5f63 6f6e  )..    def p_con
+00021610: 7465 7874 5f64 6566 5f73 7065 635f 626f  text_def_spec_bo
+00021620: 6479 5f5f 636f 6e74 6578 745f 6465 665f  dy__context_def_
+00021630: 7370 6563 5f62 6f64 795f 5f63 6f6e 7465  spec_body__conte
+00021640: 7874 5f6d 6f64 2873 656c 662c 2070 293a  xt_mod(self, p):
+00021650: 0a20 2020 2020 2020 2022 636f 6e74 6578  .        "contex
+00021660: 745f 6465 665f 7370 6563 5f62 6f64 7920  t_def_spec_body 
+00021670: 3a20 636f 6e74 6578 745f 6465 665f 7370  : context_def_sp
+00021680: 6563 5f62 6f64 7920 636f 6e74 6578 745f  ec_body context_
+00021690: 6d6f 6422 0a20 2020 2020 2020 2070 5b30  mod".        p[0
+000216a0: 5d20 3d20 5379 6e74 6178 4e6f 6465 2822  ] = SyntaxNode("
+000216b0: 636f 6e74 6578 745f 6465 665f 7370 6563  context_def_spec
+000216c0: 5f62 6f64 7922 2c20 702e 5f5f 6765 7473  _body", p.__gets
+000216d0: 6c69 6365 5f5f 2831 2c20 4e6f 6e65 2929  lice__(1, None))
+000216e0: 0a0a 2020 2020 6465 6620 705f 636f 6e74  ..    def p_cont
+000216f0: 6578 745f 6465 665f 7370 6563 5f62 6f64  ext_def_spec_bod
+00021700: 795f 5f63 6f6e 7465 7874 5f64 6566 5f73  y__context_def_s
+00021710: 7065 635f 626f 6479 5f5f 636f 6e74 6578  pec_body__contex
+00021720: 745f 6d6f 6469 6669 6361 7469 6f6e 2873  t_modification(s
+00021730: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00021740: 2022 636f 6e74 6578 745f 6465 665f 7370   "context_def_sp
+00021750: 6563 5f62 6f64 7920 3a20 636f 6e74 6578  ec_body : contex
+00021760: 745f 6465 665f 7370 6563 5f62 6f64 7920  t_def_spec_body 
+00021770: 636f 6e74 6578 745f 6d6f 6469 6669 6361  context_modifica
+00021780: 7469 6f6e 220a 2020 2020 2020 2020 705b  tion".        p[
+00021790: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+000217a0: 2263 6f6e 7465 7874 5f64 6566 5f73 7065  "context_def_spe
+000217b0: 635f 626f 6479 222c 2070 2e5f 5f67 6574  c_body", p.__get
+000217c0: 736c 6963 655f 5f28 312c 204e 6f6e 6529  slice__(1, None)
+000217d0: 290a 0a20 2020 2064 6566 2070 5f63 6f6e  )..    def p_con
+000217e0: 7465 7874 5f64 6566 5f73 7065 635f 626f  text_def_spec_bo
+000217f0: 6479 5f5f 636f 6e74 6578 745f 6465 665f  dy__context_def_
+00021800: 7370 6563 5f62 6f64 795f 5f65 6d62 6564  spec_body__embed
+00021810: 6465 645f 7363 6d28 7365 6c66 2c20 7029  ded_scm(self, p)
+00021820: 3a0a 2020 2020 2020 2020 2263 6f6e 7465  :.        "conte
+00021830: 7874 5f64 6566 5f73 7065 635f 626f 6479  xt_def_spec_body
+00021840: 203a 2063 6f6e 7465 7874 5f64 6566 5f73   : context_def_s
+00021850: 7065 635f 626f 6479 2065 6d62 6564 6465  pec_body embedde
+00021860: 645f 7363 6d22 0a20 2020 2020 2020 2070  d_scm".        p
+00021870: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
+00021880: 2822 636f 6e74 6578 745f 6465 665f 7370  ("context_def_sp
+00021890: 6563 5f62 6f64 7922 2c20 702e 5f5f 6765  ec_body", p.__ge
+000218a0: 7473 6c69 6365 5f5f 2831 2c20 4e6f 6e65  tslice__(1, None
+000218b0: 2929 0a0a 2020 2020 2323 2320 636f 6e74  ))..    ### cont
+000218c0: 6578 745f 6d6f 6420 2323 230a 0a20 2020  ext_mod ###..   
+000218d0: 2023 2020 2020 6465 6620 705f 636f 6e74   #    def p_cont
+000218e0: 6578 745f 6d6f 645f 5f63 6f6e 7465 7874  ext_mod__context
+000218f0: 5f64 6566 5f6d 6f64 5f5f 5354 5249 4e47  _def_mod__STRING
+00021900: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+00021910: 2020 2020 2020 2020 2763 6f6e 7465 7874          'context
+00021920: 5f6d 6f64 203a 2063 6f6e 7465 7874 5f64  _mod : context_d
+00021930: 6566 5f6d 6f64 2053 5452 494e 4727 0a20  ef_mod STRING'. 
+00021940: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
+00021950: 203d 2053 796e 7461 784e 6f64 6528 2763   = SyntaxNode('c
+00021960: 6f6e 7465 7874 5f6d 6f64 272c 2070 5b31  ontext_mod', p[1
+00021970: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
+00021980: 6620 705f 636f 6e74 6578 745f 6d6f 645f  f p_context_mod_
+00021990: 5f63 6f6e 7465 7874 5f64 6566 5f6d 6f64  _context_def_mod
+000219a0: 5f5f 656d 6265 6464 6564 5f73 636d 2873  __embedded_scm(s
+000219b0: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
+000219c0: 2020 2020 2020 2763 6f6e 7465 7874 5f6d        'context_m
+000219d0: 6f64 203a 2063 6f6e 7465 7874 5f64 6566  od : context_def
+000219e0: 5f6d 6f64 2065 6d62 6564 6465 645f 7363  _mod embedded_sc
+000219f0: 6d27 0a20 2020 2023 2020 2020 2020 2020  m'.    #        
+00021a00: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+00021a10: 6528 2763 6f6e 7465 7874 5f6d 6f64 272c  e('context_mod',
+00021a20: 2070 5b31 3a5d 290a 0a20 2020 2064 6566   p[1:])..    def
+00021a30: 2070 5f63 6f6e 7465 7874 5f6d 6f64 5f5f   p_context_mod__
+00021a40: 7072 6f70 6572 7479 5f6f 7065 7261 7469  property_operati
+00021a50: 6f6e 2873 656c 662c 2070 293a 0a20 2020  on(self, p):.   
+00021a60: 2020 2020 2022 636f 6e74 6578 745f 6d6f       "context_mo
+00021a70: 6420 3a20 7072 6f70 6572 7479 5f6f 7065  d : property_ope
+00021a80: 7261 7469 6f6e 220a 2020 2020 2020 2020  ration".        
+00021a90: 705b 305d 203d 2070 5b31 5d0a 0a20 2020  p[0] = p[1]..   
+00021aa0: 2023 2323 2063 6f6e 7465 7874 5f6d 6f64   ### context_mod
+00021ab0: 5f6c 6973 7420 2323 230a 0a20 2020 2064  _list ###..    d
+00021ac0: 6566 2070 5f63 6f6e 7465 7874 5f6d 6f64  ef p_context_mod
+00021ad0: 5f6c 6973 745f 5f45 6d70 7479 2873 656c  _list__Empty(sel
+00021ae0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00021af0: 636f 6e74 6578 745f 6d6f 645f 6c69 7374  context_mod_list
+00021b00: 203a 220a 2020 2020 2020 2020 705b 305d   :".        p[0]
+00021b10: 203d 205b 5d0a 0a20 2020 2064 6566 2070   = []..    def p
+00021b20: 5f63 6f6e 7465 7874 5f6d 6f64 5f6c 6973  _context_mod_lis
+00021b30: 745f 5f63 6f6e 7465 7874 5f6d 6f64 5f6c  t__context_mod_l
+00021b40: 6973 745f 5f43 4f4e 5445 5854 5f4d 4f44  ist__CONTEXT_MOD
+00021b50: 5f49 4445 4e54 4946 4945 5228 7365 6c66  _IDENTIFIER(self
+00021b60: 2c20 7029 3a0a 2020 2020 2020 2020 2263  , p):.        "c
+00021b70: 6f6e 7465 7874 5f6d 6f64 5f6c 6973 7420  ontext_mod_list 
+00021b80: 3a20 636f 6e74 6578 745f 6d6f 645f 6c69  : context_mod_li
+00021b90: 7374 2043 4f4e 5445 5854 5f4d 4f44 5f49  st CONTEXT_MOD_I
+00021ba0: 4445 4e54 4946 4945 5222 0a20 2020 2020  DENTIFIER".     
+00021bb0: 2020 2070 5b30 5d20 3d20 705b 315d 202b     p[0] = p[1] +
+00021bc0: 205b 705b 325d 5d0a 0a20 2020 2064 6566   [p[2]]..    def
+00021bd0: 2070 5f63 6f6e 7465 7874 5f6d 6f64 5f6c   p_context_mod_l
+00021be0: 6973 745f 5f63 6f6e 7465 7874 5f6d 6f64  ist__context_mod
+00021bf0: 5f6c 6973 745f 5f63 6f6e 7465 7874 5f6d  _list__context_m
+00021c00: 6f64 2873 656c 662c 2070 293a 0a20 2020  od(self, p):.   
+00021c10: 2020 2020 2022 636f 6e74 6578 745f 6d6f       "context_mo
+00021c20: 645f 6c69 7374 203a 2063 6f6e 7465 7874  d_list : context
+00021c30: 5f6d 6f64 5f6c 6973 7420 636f 6e74 6578  _mod_list contex
+00021c40: 745f 6d6f 6422 0a20 2020 2020 2020 2070  t_mod".        p
+00021c50: 5b30 5d20 3d20 705b 315d 202b 205b 705b  [0] = p[1] + [p[
+00021c60: 325d 5d0a 0a20 2020 2064 6566 2070 5f63  2]]..    def p_c
+00021c70: 6f6e 7465 7874 5f6d 6f64 5f6c 6973 745f  ontext_mod_list_
+00021c80: 5f63 6f6e 7465 7874 5f6d 6f64 5f6c 6973  _context_mod_lis
+00021c90: 745f 5f65 6d62 6564 6465 645f 7363 6d28  t__embedded_scm(
+00021ca0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+00021cb0: 2020 2263 6f6e 7465 7874 5f6d 6f64 5f6c    "context_mod_l
+00021cc0: 6973 7420 3a20 636f 6e74 6578 745f 6d6f  ist : context_mo
+00021cd0: 645f 6c69 7374 2065 6d62 6564 6465 645f  d_list embedded_
+00021ce0: 7363 6d22 0a20 2020 2020 2020 2070 5b30  scm".        p[0
+00021cf0: 5d20 3d20 705b 315d 202b 205b 705b 325d  ] = p[1] + [p[2]
+00021d00: 5d0a 0a20 2020 2023 2323 2063 6f6e 7465  ]..    ### conte
+00021d10: 7874 5f6d 6f64 6966 6963 6174 696f 6e20  xt_modification 
+00021d20: 2323 230a 0a20 2020 2064 6566 2070 5f63  ###..    def p_c
+00021d30: 6f6e 7465 7874 5f6d 6f64 6966 6963 6174  ontext_modificat
+00021d40: 696f 6e5f 5f43 4f4e 5445 5854 5f4d 4f44  ion__CONTEXT_MOD
+00021d50: 5f49 4445 4e54 4946 4945 5228 7365 6c66  _IDENTIFIER(self
+00021d60: 2c20 7029 3a0a 2020 2020 2020 2020 2263  , p):.        "c
+00021d70: 6f6e 7465 7874 5f6d 6f64 6966 6963 6174  ontext_modificat
+00021d80: 696f 6e20 3a20 434f 4e54 4558 545f 4d4f  ion : CONTEXT_MO
+00021d90: 445f 4944 454e 5449 4649 4552 220a 2020  D_IDENTIFIER".  
+00021da0: 2020 2020 2020 705b 305d 203d 205b 705b        p[0] = [p[
+00021db0: 315d 5d0a 0a20 2020 2064 6566 2070 5f63  1]]..    def p_c
+00021dc0: 6f6e 7465 7874 5f6d 6f64 6966 6963 6174  ontext_modificat
+00021dd0: 696f 6e5f 5f57 4954 485f 5f43 4f4e 5445  ion__WITH__CONTE
+00021de0: 5854 5f4d 4f44 5f49 4445 4e54 4946 4945  XT_MOD_IDENTIFIE
+00021df0: 5228 7365 6c66 2c20 7029 3a0a 2020 2020  R(self, p):.    
+00021e00: 2020 2020 2263 6f6e 7465 7874 5f6d 6f64      "context_mod
+00021e10: 6966 6963 6174 696f 6e20 3a20 5749 5448  ification : WITH
+00021e20: 2043 4f4e 5445 5854 5f4d 4f44 5f49 4445   CONTEXT_MOD_IDE
+00021e30: 4e54 4946 4945 5222 0a20 2020 2020 2020  NTIFIER".       
+00021e40: 2070 5b30 5d20 3d20 5b70 5b32 5d5d 0a0a   p[0] = [p[2]]..
+00021e50: 2020 2020 6465 6620 705f 636f 6e74 6578      def p_contex
+00021e60: 745f 6d6f 6469 6669 6361 7469 6f6e 5f5f  t_modification__
+00021e70: 5749 5448 5f5f 4368 7231 3233 5f5f 636f  WITH__Chr123__co
+00021e80: 6e74 6578 745f 6d6f 645f 6c69 7374 5f5f  ntext_mod_list__
+00021e90: 4368 7231 3235 2873 656c 662c 2070 293a  Chr125(self, p):
+00021ea0: 0a20 2020 2020 2020 2022 636f 6e74 6578  .        "contex
+00021eb0: 745f 6d6f 6469 6669 6361 7469 6f6e 203a  t_modification :
+00021ec0: 2057 4954 4820 277b 2720 636f 6e74 6578   WITH '{' contex
+00021ed0: 745f 6d6f 645f 6c69 7374 2027 7d27 220a  t_mod_list '}'".
+00021ee0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+00021ef0: 5b33 5d0a 2020 2020 2020 2020 7365 6c66  [3].        self
+00021f00: 2e63 6c69 656e 742e 5f6c 6578 6572 2e70  .client._lexer.p
+00021f10: 6f70 5f73 7461 7465 2829 0a20 2020 2020  op_state().     
+00021f20: 2020 2073 656c 662e 636c 6965 6e74 2e5f     self.client._
+00021f30: 7265 6c65 785f 6c6f 6f6b 6168 6561 6428  relex_lookahead(
+00021f40: 290a 0a20 2020 2064 6566 2070 5f63 6f6e  )..    def p_con
+00021f50: 7465 7874 5f6d 6f64 6966 6963 6174 696f  text_modificatio
+00021f60: 6e5f 5f57 4954 485f 5f65 6d62 6564 6465  n__WITH__embedde
+00021f70: 645f 7363 6d5f 636c 6f73 6564 2873 656c  d_scm_closed(sel
+00021f80: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00021f90: 636f 6e74 6578 745f 6d6f 6469 6669 6361  context_modifica
+00021fa0: 7469 6f6e 203a 2057 4954 4820 656d 6265  tion : WITH embe
+00021fb0: 6464 6564 5f73 636d 5f63 6c6f 7365 6422  dded_scm_closed"
+00021fc0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00021fd0: 5b70 5b32 5d5d 0a0a 2020 2020 2323 2320  [p[2]]..    ### 
+00021fe0: 636f 6e74 6578 745f 7072 6f70 5f73 7065  context_prop_spe
+00021ff0: 6320 2323 230a 0a20 2020 2064 6566 2070  c ###..    def p
+00022000: 5f63 6f6e 7465 7874 5f70 726f 705f 7370  _context_prop_sp
+00022010: 6563 5f5f 7369 6d70 6c65 5f73 7472 696e  ec__simple_strin
+00022020: 6728 7365 6c66 2c20 7029 3a0a 2020 2020  g(self, p):.    
+00022030: 2020 2020 2263 6f6e 7465 7874 5f70 726f      "context_pro
+00022040: 705f 7370 6563 203a 2073 696d 706c 655f  p_spec : simple_
+00022050: 7374 7269 6e67 220a 2020 2020 2020 2020  string".        
+00022060: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+00022070: 6528 2263 6f6e 7465 7874 5f70 726f 705f  e("context_prop_
+00022080: 7370 6563 222c 2070 2e5f 5f67 6574 736c  spec", p.__getsl
+00022090: 6963 655f 5f28 312c 204e 6f6e 6529 290a  ice__(1, None)).
+000220a0: 0a20 2020 2064 6566 2070 5f63 6f6e 7465  .    def p_conte
+000220b0: 7874 5f70 726f 705f 7370 6563 5f5f 7369  xt_prop_spec__si
+000220c0: 6d70 6c65 5f73 7472 696e 675f 5f43 6872  mple_string__Chr
+000220d0: 3436 5f5f 7369 6d70 6c65 5f73 7472 696e  46__simple_strin
+000220e0: 6728 7365 6c66 2c20 7029 3a0a 2020 2020  g(self, p):.    
+000220f0: 2020 2020 2263 6f6e 7465 7874 5f70 726f      "context_pro
+00022100: 705f 7370 6563 203a 2073 696d 706c 655f  p_spec : simple_
+00022110: 7374 7269 6e67 2027 2e27 2073 696d 706c  string '.' simpl
+00022120: 655f 7374 7269 6e67 220a 2020 2020 2020  e_string".      
+00022130: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
+00022140: 6f64 6528 2263 6f6e 7465 7874 5f70 726f  ode("context_pro
+00022150: 705f 7370 6563 222c 2070 2e5f 5f67 6574  p_spec", p.__get
+00022160: 736c 6963 655f 5f28 312c 204e 6f6e 6529  slice__(1, None)
+00022170: 290a 0a20 2020 2023 2323 2064 6972 6563  )..    ### direc
+00022180: 7469 6f6e 5f6c 6573 735f 6368 6172 2023  tion_less_char #
+00022190: 2323 0a0a 2020 2020 6465 6620 705f 6469  ##..    def p_di
+000221a0: 7265 6374 696f 6e5f 6c65 7373 5f63 6861  rection_less_cha
+000221b0: 725f 5f43 6872 3132 3628 7365 6c66 2c20  r__Chr126(self, 
+000221c0: 7029 3a0a 2020 2020 2020 2020 2264 6972  p):.        "dir
+000221d0: 6563 7469 6f6e 5f6c 6573 735f 6368 6172  ection_less_char
+000221e0: 203a 2027 7e27 220a 2020 2020 2020 2020   : '~'".        
+000221f0: 2323 2320 705b 305d 203d 2073 656c 662e  ### p[0] = self.
+00022200: 636c 6965 6e74 2e5f 7265 736f 6c76 655f  client._resolve_
+00022210: 6576 656e 745f 6964 656e 7469 6669 6572  event_identifier
+00022220: 2822 7469 6c64 6553 796d 626f 6c22 290a  ("tildeSymbol").
+00022230: 2020 2020 2020 2020 705b 305d 203d 2073          p[0] = s
+00022240: 656c 662e 636c 6965 6e74 2e5f 7265 736f  elf.client._reso
+00022250: 6c76 655f 6576 656e 745f 6964 656e 7469  lve_event_identi
+00022260: 6669 6572 2822 7e22 290a 0a20 2020 2064  fier("~")..    d
+00022270: 6566 2070 5f64 6972 6563 7469 6f6e 5f6c  ef p_direction_l
+00022280: 6573 735f 6368 6172 5f5f 4368 7234 3028  ess_char__Chr40(
+00022290: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+000222a0: 2020 2264 6972 6563 7469 6f6e 5f6c 6573    "direction_les
+000222b0: 735f 6368 6172 203a 2027 2827 220a 2020  s_char : '('".  
+000222c0: 2020 2020 2020 2323 2320 705b 305d 203d        ### p[0] =
+000222d0: 2073 656c 662e 636c 6965 6e74 2e5f 7265   self.client._re
+000222e0: 736f 6c76 655f 6576 656e 745f 6964 656e  solve_event_iden
+000222f0: 7469 6669 6572 2822 7061 7265 6e74 6865  tifier("parenthe
+00022300: 7369 734f 7065 6e53 796d 626f 6c22 290a  sisOpenSymbol").
+00022310: 2020 2020 2020 2020 705b 305d 203d 2073          p[0] = s
+00022320: 656c 662e 636c 6965 6e74 2e5f 7265 736f  elf.client._reso
+00022330: 6c76 655f 6576 656e 745f 6964 656e 7469  lve_event_identi
+00022340: 6669 6572 2822 2822 290a 0a20 2020 2064  fier("(")..    d
+00022350: 6566 2070 5f64 6972 6563 7469 6f6e 5f6c  ef p_direction_l
+00022360: 6573 735f 6368 6172 5f5f 4368 7234 3128  ess_char__Chr41(
+00022370: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+00022380: 2020 2264 6972 6563 7469 6f6e 5f6c 6573    "direction_les
+00022390: 735f 6368 6172 203a 2027 2927 220a 2020  s_char : ')'".  
+000223a0: 2020 2020 2020 2323 2320 705b 305d 203d        ### p[0] =
+000223b0: 2073 656c 662e 636c 6965 6e74 2e5f 7265   self.client._re
+000223c0: 736f 6c76 655f 6576 656e 745f 6964 656e  solve_event_iden
+000223d0: 7469 6669 6572 2822 7061 7265 6e74 6865  tifier("parenthe
+000223e0: 7369 7343 6c6f 7365 5379 6d62 6f6c 2229  sisCloseSymbol")
+000223f0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00022400: 7365 6c66 2e63 6c69 656e 742e 5f72 6573  self.client._res
+00022410: 6f6c 7665 5f65 7665 6e74 5f69 6465 6e74  olve_event_ident
+00022420: 6966 6965 7228 2229 2229 0a0a 2020 2020  ifier(")")..    
+00022430: 6465 6620 705f 6469 7265 6374 696f 6e5f  def p_direction_
+00022440: 6c65 7373 5f63 6861 725f 5f43 6872 3931  less_char__Chr91
+00022450: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+00022460: 2020 2022 6469 7265 6374 696f 6e5f 6c65     "direction_le
+00022470: 7373 5f63 6861 7220 3a20 275b 2722 0a20  ss_char : '['". 
+00022480: 2020 2020 2020 2023 2070 5b30 5d20 3d20         # p[0] = 
+00022490: 7365 6c66 2e63 6c69 656e 742e 5f72 6573  self.client._res
+000224a0: 6f6c 7665 5f65 7665 6e74 5f69 6465 6e74  olve_event_ident
+000224b0: 6966 6965 7228 2262 7261 636b 6574 4f70  ifier("bracketOp
+000224c0: 656e 5379 6d62 6f6c 2229 0a20 2020 2020  enSymbol").     
+000224d0: 2020 2070 5b30 5d20 3d20 7365 6c66 2e63     p[0] = self.c
+000224e0: 6c69 656e 742e 5f72 6573 6f6c 7665 5f65  lient._resolve_e
+000224f0: 7665 6e74 5f69 6465 6e74 6966 6965 7228  vent_identifier(
+00022500: 225b 2229 0a0a 2020 2020 6465 6620 705f  "[")..    def p_
+00022510: 6469 7265 6374 696f 6e5f 6c65 7373 5f63  direction_less_c
+00022520: 6861 725f 5f43 6872 3933 2873 656c 662c  har__Chr93(self,
+00022530: 2070 293a 0a20 2020 2020 2020 2022 6469   p):.        "di
+00022540: 7265 6374 696f 6e5f 6c65 7373 5f63 6861  rection_less_cha
+00022550: 7220 3a20 275d 2722 0a20 2020 2020 2020  r : ']'".       
+00022560: 2023 2070 5b30 5d20 3d20 7365 6c66 2e63   # p[0] = self.c
+00022570: 6c69 656e 742e 5f72 6573 6f6c 7665 5f65  lient._resolve_e
+00022580: 7665 6e74 5f69 6465 6e74 6966 6965 7228  vent_identifier(
+00022590: 2262 7261 636b 6574 436c 6f73 6553 796d  "bracketCloseSym
+000225a0: 626f 6c22 290a 2020 2020 2020 2020 705b  bol").        p[
+000225b0: 305d 203d 2073 656c 662e 636c 6965 6e74  0] = self.client
+000225c0: 2e5f 7265 736f 6c76 655f 6576 656e 745f  ._resolve_event_
+000225d0: 6964 656e 7469 6669 6572 2822 5d22 290a  identifier("]").
+000225e0: 0a20 2020 2064 6566 2070 5f64 6972 6563  .    def p_direc
+000225f0: 7469 6f6e 5f6c 6573 735f 6368 6172 5f5f  tion_less_char__
+00022600: 455f 414e 474c 455f 434c 4f53 4528 7365  E_ANGLE_CLOSE(se
+00022610: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+00022620: 2264 6972 6563 7469 6f6e 5f6c 6573 735f  "direction_less_
+00022630: 6368 6172 203a 2045 5f41 4e47 4c45 5f43  char : E_ANGLE_C
+00022640: 4c4f 5345 220a 2020 2020 2020 2020 2320  LOSE".        # 
+00022650: 705b 305d 203d 2073 656c 662e 636c 6965  p[0] = self.clie
+00022660: 6e74 2e5f 7265 736f 6c76 655f 6576 656e  nt._resolve_even
+00022670: 745f 6964 656e 7469 6669 6572 2822 6573  t_identifier("es
+00022680: 6361 7065 6442 6967 6765 7253 796d 626f  capedBiggerSymbo
+00022690: 6c22 290a 2020 2020 2020 2020 705b 305d  l").        p[0]
+000226a0: 203d 2073 656c 662e 636c 6965 6e74 2e5f   = self.client._
+000226b0: 7265 736f 6c76 655f 6576 656e 745f 6964  resolve_event_id
+000226c0: 656e 7469 6669 6572 2872 225c 3e22 290a  entifier(r"\>").
+000226d0: 0a20 2020 2064 6566 2070 5f64 6972 6563  .    def p_direc
+000226e0: 7469 6f6e 5f6c 6573 735f 6368 6172 5f5f  tion_less_char__
+000226f0: 455f 414e 474c 455f 4f50 454e 2873 656c  E_ANGLE_OPEN(sel
+00022700: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00022710: 6469 7265 6374 696f 6e5f 6c65 7373 5f63  direction_less_c
+00022720: 6861 7220 3a20 455f 414e 474c 455f 4f50  har : E_ANGLE_OP
+00022730: 454e 220a 2020 2020 2020 2020 2320 705b  EN".        # p[
+00022740: 305d 203d 2073 656c 662e 636c 6965 6e74  0] = self.client
+00022750: 2e5f 7265 736f 6c76 655f 6576 656e 745f  ._resolve_event_
+00022760: 6964 656e 7469 6669 6572 2822 6573 6361  identifier("esca
+00022770: 7065 6453 6d61 6c6c 6572 5379 6d62 6f6c  pedSmallerSymbol
+00022780: 2229 0a20 2020 2020 2020 2070 5b30 5d20  ").        p[0] 
+00022790: 3d20 7365 6c66 2e63 6c69 656e 742e 5f72  = self.client._r
+000227a0: 6573 6f6c 7665 5f65 7665 6e74 5f69 6465  esolve_event_ide
+000227b0: 6e74 6966 6965 7228 7222 5c3c 2229 0a0a  ntifier(r"\<")..
+000227c0: 2020 2020 6465 6620 705f 6469 7265 6374      def p_direct
+000227d0: 696f 6e5f 6c65 7373 5f63 6861 725f 5f45  ion_less_char__E
+000227e0: 5f43 4c4f 5345 2873 656c 662c 2070 293a  _CLOSE(self, p):
+000227f0: 0a20 2020 2020 2020 2022 6469 7265 6374  .        "direct
+00022800: 696f 6e5f 6c65 7373 5f63 6861 7220 3a20  ion_less_char : 
+00022810: 455f 434c 4f53 4522 0a20 2020 2020 2020  E_CLOSE".       
+00022820: 2023 2070 5b30 5d20 3d20 7365 6c66 2e63   # p[0] = self.c
+00022830: 6c69 656e 742e 5f72 6573 6f6c 7665 5f65  lient._resolve_e
+00022840: 7665 6e74 5f69 6465 6e74 6966 6965 7228  vent_identifier(
+00022850: 2265 7363 6170 6564 5061 7265 6e74 6865  "escapedParenthe
+00022860: 7369 7343 6c6f 7365 5379 6d62 6f6c 2229  sisCloseSymbol")
+00022870: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00022880: 7365 6c66 2e63 6c69 656e 742e 5f72 6573  self.client._res
+00022890: 6f6c 7665 5f65 7665 6e74 5f69 6465 6e74  olve_event_ident
+000228a0: 6966 6965 7228 7222 5c29 2229 0a0a 2020  ifier(r"\)")..  
+000228b0: 2020 6465 6620 705f 6469 7265 6374 696f    def p_directio
+000228c0: 6e5f 6c65 7373 5f63 6861 725f 5f45 5f45  n_less_char__E_E
+000228d0: 5843 4c41 4d41 5449 4f4e 2873 656c 662c  XCLAMATION(self,
+000228e0: 2070 293a 0a20 2020 2020 2020 2022 6469   p):.        "di
+000228f0: 7265 6374 696f 6e5f 6c65 7373 5f63 6861  rection_less_cha
+00022900: 7220 3a20 455f 4558 434c 414d 4154 494f  r : E_EXCLAMATIO
+00022910: 4e22 0a20 2020 2020 2020 2023 2070 5b30  N".        # p[0
+00022920: 5d20 3d20 7365 6c66 2e63 6c69 656e 742e  ] = self.client.
+00022930: 5f72 6573 6f6c 7665 5f65 7665 6e74 5f69  _resolve_event_i
+00022940: 6465 6e74 6966 6965 7228 2265 7363 6170  dentifier("escap
+00022950: 6564 4578 636c 616d 6174 696f 6e53 796d  edExclamationSym
+00022960: 626f 6c22 290a 2020 2020 2020 2020 705b  bol").        p[
+00022970: 305d 203d 2073 656c 662e 636c 6965 6e74  0] = self.client
+00022980: 2e5f 7265 736f 6c76 655f 6576 656e 745f  ._resolve_event_
+00022990: 6964 656e 7469 6669 6572 2872 225c 2122  identifier(r"\!"
+000229a0: 290a 0a20 2020 2064 6566 2070 5f64 6972  )..    def p_dir
+000229b0: 6563 7469 6f6e 5f6c 6573 735f 6368 6172  ection_less_char
+000229c0: 5f5f 455f 4f50 454e 2873 656c 662c 2070  __E_OPEN(self, p
+000229d0: 293a 0a20 2020 2020 2020 2022 6469 7265  ):.        "dire
+000229e0: 6374 696f 6e5f 6c65 7373 5f63 6861 7220  ction_less_char 
+000229f0: 3a20 455f 4f50 454e 220a 2020 2020 2020  : E_OPEN".      
+00022a00: 2020 2320 705b 305d 203d 2073 656c 662e    # p[0] = self.
+00022a10: 636c 6965 6e74 2e5f 7265 736f 6c76 655f  client._resolve_
+00022a20: 6576 656e 745f 6964 656e 7469 6669 6572  event_identifier
+00022a30: 2822 6573 6361 7065 6450 6172 656e 7468  ("escapedParenth
+00022a40: 6573 6973 4f70 656e 5379 6d62 6f6c 2229  esisOpenSymbol")
+00022a50: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00022a60: 7365 6c66 2e63 6c69 656e 742e 5f72 6573  self.client._res
+00022a70: 6f6c 7665 5f65 7665 6e74 5f69 6465 6e74  olve_event_ident
+00022a80: 6966 6965 7228 7222 5c28 2229 0a0a 2020  ifier(r"\(")..  
+00022a90: 2020 2323 2320 6469 7265 6374 696f 6e5f    ### direction_
+00022aa0: 6c65 7373 5f65 7665 6e74 2023 2323 0a0a  less_event ###..
+00022ab0: 2020 2020 6465 6620 705f 6469 7265 6374      def p_direct
+00022ac0: 696f 6e5f 6c65 7373 5f65 7665 6e74 5f5f  ion_less_event__
+00022ad0: 4556 454e 545f 4944 454e 5449 4649 4552  EVENT_IDENTIFIER
+00022ae0: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+00022af0: 2020 2022 6469 7265 6374 696f 6e5f 6c65     "direction_le
+00022b00: 7373 5f65 7665 6e74 203a 2045 5645 4e54  ss_event : EVENT
+00022b10: 5f49 4445 4e54 4946 4945 5222 0a20 2020  _IDENTIFIER".   
+00022b20: 2020 2020 2069 6465 6e74 6966 6965 7220       identifier 
+00022b30: 3d20 705b 315d 0a20 2020 2020 2020 2069  = p[1].        i
+00022b40: 6620 6964 656e 7469 6669 6572 2e73 7461  f identifier.sta
+00022b50: 7274 7377 6974 6828 225c 5c22 293a 0a20  rtswith("\\"):. 
+00022b60: 2020 2020 2020 2020 2020 2069 6465 6e74             ident
+00022b70: 6966 6965 7220 3d20 6964 656e 7469 6669  ifier = identifi
+00022b80: 6572 5b31 3a5d 0a20 2020 2020 2020 2070  er[1:].        p
+00022b90: 5b30 5d20 3d20 7365 6c66 2e63 6c69 656e  [0] = self.clien
+00022ba0: 742e 5f72 6573 6f6c 7665 5f65 7665 6e74  t._resolve_event
+00022bb0: 5f69 6465 6e74 6966 6965 7228 6964 656e  _identifier(iden
+00022bc0: 7469 6669 6572 290a 0a20 2020 2064 6566  tifier)..    def
+00022bd0: 2070 5f64 6972 6563 7469 6f6e 5f6c 6573   p_direction_les
+00022be0: 735f 6576 656e 745f 5f64 6972 6563 7469  s_event__directi
+00022bf0: 6f6e 5f6c 6573 735f 6368 6172 2873 656c  on_less_char(sel
+00022c00: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00022c10: 6469 7265 6374 696f 6e5f 6c65 7373 5f65  direction_less_e
+00022c20: 7665 6e74 203a 2064 6972 6563 7469 6f6e  vent : direction
+00022c30: 5f6c 6573 735f 6368 6172 220a 2020 2020  _less_char".    
+00022c40: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
+00022c50: 0a20 2020 2064 6566 2070 5f64 6972 6563  .    def p_direc
+00022c60: 7469 6f6e 5f6c 6573 735f 6576 656e 745f  tion_less_event_
+00022c70: 5f65 7665 6e74 5f66 756e 6374 696f 6e5f  _event_function_
+00022c80: 6576 656e 7428 7365 6c66 2c20 7029 3a0a  event(self, p):.
+00022c90: 2020 2020 2020 2020 2264 6972 6563 7469          "directi
+00022ca0: 6f6e 5f6c 6573 735f 6576 656e 7420 3a20  on_less_event : 
+00022cb0: 6576 656e 745f 6675 6e63 7469 6f6e 5f65  event_function_e
+00022cc0: 7665 6e74 220a 2020 2020 2020 2020 705b  vent".        p[
+00022cd0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+00022ce0: 2264 6972 6563 7469 6f6e 5f6c 6573 735f  "direction_less_
+00022cf0: 6576 656e 7422 2c20 702e 5f5f 6765 7473  event", p.__gets
+00022d00: 6c69 6365 5f5f 2831 2c20 4e6f 6e65 2929  lice__(1, None))
+00022d10: 0a0a 2020 2020 6465 6620 705f 6469 7265  ..    def p_dire
+00022d20: 6374 696f 6e5f 6c65 7373 5f65 7665 6e74  ction_less_event
+00022d30: 5f5f 7472 656d 6f6c 6f5f 7479 7065 2873  __tremolo_type(s
+00022d40: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00022d50: 2022 6469 7265 6374 696f 6e5f 6c65 7373   "direction_less
+00022d60: 5f65 7665 6e74 203a 2074 7265 6d6f 6c6f  _event : tremolo
+00022d70: 5f74 7970 6522 0a20 2020 2020 2020 2070  _type".        p
+00022d80: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
+00022d90: 2323 2320 6469 7265 6374 696f 6e5f 7265  ### direction_re
+00022da0: 7164 5f65 7665 6e74 2023 2323 0a0a 2020  qd_event ###..  
+00022db0: 2020 6465 6620 705f 6469 7265 6374 696f    def p_directio
+00022dc0: 6e5f 7265 7164 5f65 7665 6e74 5f5f 6765  n_reqd_event__ge
+00022dd0: 6e5f 7465 7874 5f64 6566 2873 656c 662c  n_text_def(self,
+00022de0: 2070 293a 0a20 2020 2020 2020 2022 6469   p):.        "di
+00022df0: 7265 6374 696f 6e5f 7265 7164 5f65 7665  rection_reqd_eve
+00022e00: 6e74 203a 2067 656e 5f74 6578 745f 6465  nt : gen_text_de
+00022e10: 6622 0a20 2020 2020 2020 2070 5b30 5d20  f".        p[0] 
+00022e20: 3d20 705b 315d 0a0a 2020 2020 6465 6620  = p[1]..    def 
+00022e30: 705f 6469 7265 6374 696f 6e5f 7265 7164  p_direction_reqd
+00022e40: 5f65 7665 6e74 5f5f 7363 7269 7074 5f61  _event__script_a
+00022e50: 6262 7265 7669 6174 696f 6e28 7365 6c66  bbreviation(self
+00022e60: 2c20 7029 3a0a 2020 2020 2020 2020 2264  , p):.        "d
+00022e70: 6972 6563 7469 6f6e 5f72 6571 645f 6576  irection_reqd_ev
+00022e80: 656e 7420 3a20 7363 7269 7074 5f61 6262  ent : script_abb
+00022e90: 7265 7669 6174 696f 6e22 0a20 2020 2020  reviation".     
+00022ea0: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+00022eb0: 2020 2020 2323 2320 646f 7473 2023 2323      ### dots ###
+00022ec0: 0a0a 2020 2020 6465 6620 705f 646f 7473  ..    def p_dots
+00022ed0: 5f5f 456d 7074 7928 7365 6c66 2c20 7029  __Empty(self, p)
+00022ee0: 3a0a 2020 2020 2020 2020 2264 6f74 7320  :.        "dots 
+00022ef0: 3a22 0a20 2020 2020 2020 2070 5b30 5d20  :".        p[0] 
+00022f00: 3d20 5379 6e74 6178 4e6f 6465 2822 646f  = SyntaxNode("do
+00022f10: 7473 222c 2030 290a 0a20 2020 2064 6566  ts", 0)..    def
+00022f20: 2070 5f64 6f74 735f 5f64 6f74 735f 5f43   p_dots__dots__C
+00022f30: 6872 3436 2873 656c 662c 2070 293a 0a20  hr46(self, p):. 
+00022f40: 2020 2020 2020 2022 646f 7473 203a 2064         "dots : d
+00022f50: 6f74 7320 272e 2722 0a20 2020 2020 2020  ots '.'".       
+00022f60: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
+00022f70: 6465 2822 646f 7473 222c 2070 5b31 5d2e  de("dots", p[1].
+00022f80: 7661 6c75 6520 2b20 3129 0a0a 2020 2020  value + 1)..    
+00022f90: 2323 2320 6475 7261 7469 6f6e 5f6c 656e  ### duration_len
+00022fa0: 6774 6820 2323 230a 0a20 2020 2064 6566  gth ###..    def
+00022fb0: 2070 5f64 7572 6174 696f 6e5f 6c65 6e67   p_duration_leng
+00022fc0: 7468 5f5f 6d75 6c74 6970 6c69 6564 5f64  th__multiplied_d
+00022fd0: 7572 6174 696f 6e28 7365 6c66 2c20 7029  uration(self, p)
+00022fe0: 3a0a 2020 2020 2020 2020 2264 7572 6174  :.        "durat
+00022ff0: 696f 6e5f 6c65 6e67 7468 203a 206d 756c  ion_length : mul
+00023000: 7469 706c 6965 645f 6475 7261 7469 6f6e  tiplied_duration
+00023010: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
+00023020: 2070 5b31 5d0a 0a20 2020 2023 2323 2065   p[1]..    ### e
+00023030: 6d62 6564 6465 645f 6c69 6c79 706f 6e64  mbedded_lilypond
+00023040: 2023 2323 0a0a 2020 2020 2320 2020 2064   ###..    #    d
+00023050: 6566 2070 5f65 6d62 6564 6465 645f 6c69  ef p_embedded_li
+00023060: 6c79 706f 6e64 5f5f 456d 7074 7928 7365  lypond__Empty(se
+00023070: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+00023080: 2020 2020 2027 656d 6265 6464 6564 5f6c       'embedded_l
+00023090: 696c 7970 6f6e 6420 3a20 270a 2020 2020  ilypond : '.    
+000230a0: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+000230b0: 5379 6e74 6178 4e6f 6465 2827 656d 6265  SyntaxNode('embe
+000230c0: 6464 6564 5f6c 696c 7970 6f6e 6427 2c20  dded_lilypond', 
+000230d0: 705b 313a 5d29 0a0a 2020 2020 2320 2020  p[1:])..    #   
+000230e0: 2064 6566 2070 5f65 6d62 6564 6465 645f   def p_embedded_
+000230f0: 6c69 6c79 706f 6e64 5f5f 494e 5641 4c49  lilypond__INVALI
+00023100: 445f 5f65 6d62 6564 6465 645f 6c69 6c79  D__embedded_lily
+00023110: 706f 6e64 2873 656c 662c 2070 293a 0a20  pond(self, p):. 
+00023120: 2020 2023 2020 2020 2020 2020 2765 6d62     #        'emb
+00023130: 6564 6465 645f 6c69 6c79 706f 6e64 203a  edded_lilypond :
+00023140: 2049 4e56 414c 4944 2065 6d62 6564 6465   INVALID embedde
+00023150: 645f 6c69 6c79 706f 6e64 270a 2020 2020  d_lilypond'.    
+00023160: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+00023170: 5379 6e74 6178 4e6f 6465 2827 656d 6265  SyntaxNode('embe
+00023180: 6464 6564 5f6c 696c 7970 6f6e 6427 2c20  dded_lilypond', 
+00023190: 705b 313a 5d29 0a0a 2020 2020 2320 2020  p[1:])..    #   
+000231a0: 2064 6566 2070 5f65 6d62 6564 6465 645f   def p_embedded_
+000231b0: 6c69 6c79 706f 6e64 5f5f 6572 726f 7228  lilypond__error(
+000231c0: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
+000231d0: 2020 2020 2020 2027 656d 6265 6464 6564         'embedded
+000231e0: 5f6c 696c 7970 6f6e 6420 3a20 6572 726f  _lilypond : erro
+000231f0: 7227 0a20 2020 2023 2020 2020 2020 2020  r'.    #        
+00023200: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+00023210: 6528 2765 6d62 6564 6465 645f 6c69 6c79  e('embedded_lily
+00023220: 706f 6e64 272c 2070 5b31 3a5d 290a 0a20  pond', p[1:]).. 
+00023230: 2020 2023 2020 2020 6465 6620 705f 656d     #    def p_em
+00023240: 6265 6464 6564 5f6c 696c 7970 6f6e 645f  bedded_lilypond_
+00023250: 5f69 6465 6e74 6966 6965 725f 696e 6974  _identifier_init
+00023260: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+00023270: 2020 2020 2020 2020 2765 6d62 6564 6465          'embedde
+00023280: 645f 6c69 6c79 706f 6e64 203a 2069 6465  d_lilypond : ide
+00023290: 6e74 6966 6965 725f 696e 6974 270a 2020  ntifier_init'.  
+000232a0: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
+000232b0: 3d20 5379 6e74 6178 4e6f 6465 2827 656d  = SyntaxNode('em
+000232c0: 6265 6464 6564 5f6c 696c 7970 6f6e 6427  bedded_lilypond'
+000232d0: 2c20 705b 313a 5d29 0a0a 2020 2020 2320  , p[1:])..    # 
+000232e0: 2020 2064 6566 2070 5f65 6d62 6564 6465     def p_embedde
+000232f0: 645f 6c69 6c79 706f 6e64 5f5f 6d75 7369  d_lilypond__musi
+00023300: 635f 5f6d 7573 6963 5f5f 6d75 7369 635f  c__music__music_
+00023310: 6c69 7374 2873 656c 662c 2070 293a 0a20  list(self, p):. 
+00023320: 2020 2023 2020 2020 2020 2020 2765 6d62     #        'emb
+00023330: 6564 6465 645f 6c69 6c79 706f 6e64 203a  edded_lilypond :
+00023340: 206d 7573 6963 206d 7573 6963 206d 7573   music music mus
+00023350: 6963 5f6c 6973 7427 0a20 2020 2023 2020  ic_list'.    #  
+00023360: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+00023370: 7461 784e 6f64 6528 2765 6d62 6564 6465  taxNode('embedde
+00023380: 645f 6c69 6c79 706f 6e64 272c 2070 5b31  d_lilypond', p[1
+00023390: 3a5d 290a 0a20 2020 2023 2323 2065 6d62  :])..    ### emb
+000233a0: 6564 6465 645f 7363 6d20 2323 230a 0a20  edded_scm ###.. 
+000233b0: 2020 2064 6566 2070 5f65 6d62 6564 6465     def p_embedde
+000233c0: 645f 7363 6d5f 5f65 6d62 6564 6465 645f  d_scm__embedded_
+000233d0: 7363 6d5f 6261 7265 2873 656c 662c 2070  scm_bare(self, p
+000233e0: 293a 0a20 2020 2020 2020 2022 656d 6265  ):.        "embe
+000233f0: 6464 6564 5f73 636d 203a 2065 6d62 6564  dded_scm : embed
+00023400: 6465 645f 7363 6d5f 6261 7265 220a 2020  ded_scm_bare".  
+00023410: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
+00023420: 5d0a 0a20 2020 2064 6566 2070 5f65 6d62  ]..    def p_emb
+00023430: 6564 6465 645f 7363 6d5f 5f73 636d 5f66  edded_scm__scm_f
+00023440: 756e 6374 696f 6e5f 6361 6c6c 2873 656c  unction_call(sel
+00023450: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00023460: 656d 6265 6464 6564 5f73 636d 203a 2073  embedded_scm : s
+00023470: 636d 5f66 756e 6374 696f 6e5f 6361 6c6c  cm_function_call
+00023480: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
+00023490: 2070 5b31 5d0a 0a20 2020 2023 2323 2065   p[1]..    ### e
+000234a0: 6d62 6564 6465 645f 7363 6d5f 6172 6720  mbedded_scm_arg 
+000234b0: 2323 230a 0a20 2020 2064 6566 2070 5f65  ###..    def p_e
+000234c0: 6d62 6564 6465 645f 7363 6d5f 6172 675f  mbedded_scm_arg_
+000234d0: 5f65 6d62 6564 6465 645f 7363 6d5f 6261  _embedded_scm_ba
+000234e0: 7265 5f61 7267 2873 656c 662c 2070 293a  re_arg(self, p):
+000234f0: 0a20 2020 2020 2020 2022 656d 6265 6464  .        "embedd
+00023500: 6564 5f73 636d 5f61 7267 203a 2065 6d62  ed_scm_arg : emb
+00023510: 6564 6465 645f 7363 6d5f 6261 7265 5f61  edded_scm_bare_a
+00023520: 7267 220a 2020 2020 2020 2020 705b 305d  rg".        p[0]
+00023530: 203d 2070 5b31 5d0a 0a20 2020 2064 6566   = p[1]..    def
+00023540: 2070 5f65 6d62 6564 6465 645f 7363 6d5f   p_embedded_scm_
+00023550: 6172 675f 5f6d 7573 6963 5f61 7267 2873  arg__music_arg(s
+00023560: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00023570: 2022 656d 6265 6464 6564 5f73 636d 5f61   "embedded_scm_a
+00023580: 7267 203a 206d 7573 6963 5f61 7267 220a  rg : music_arg".
+00023590: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+000235a0: 5b31 5d0a 0a20 2020 2064 6566 2070 5f65  [1]..    def p_e
+000235b0: 6d62 6564 6465 645f 7363 6d5f 6172 675f  mbedded_scm_arg_
+000235c0: 5f73 636d 5f66 756e 6374 696f 6e5f 6361  _scm_function_ca
+000235d0: 6c6c 2873 656c 662c 2070 293a 0a20 2020  ll(self, p):.   
+000235e0: 2020 2020 2022 656d 6265 6464 6564 5f73       "embedded_s
+000235f0: 636d 5f61 7267 203a 2073 636d 5f66 756e  cm_arg : scm_fun
+00023600: 6374 696f 6e5f 6361 6c6c 220a 2020 2020  ction_call".    
+00023610: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
+00023620: 0a20 2020 2023 2323 2065 6d62 6564 6465  .    ### embedde
+00023630: 645f 7363 6d5f 6172 675f 636c 6f73 6564  d_scm_arg_closed
+00023640: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+00023650: 656d 6265 6464 6564 5f73 636d 5f61 7267  embedded_scm_arg
+00023660: 5f63 6c6f 7365 645f 5f63 6c6f 7365 645f  _closed__closed_
+00023670: 6d75 7369 6328 7365 6c66 2c20 7029 3a0a  music(self, p):.
+00023680: 2020 2020 2020 2020 2265 6d62 6564 6465          "embedde
+00023690: 645f 7363 6d5f 6172 675f 636c 6f73 6564  d_scm_arg_closed
+000236a0: 203a 2063 6c6f 7365 645f 6d75 7369 6322   : closed_music"
+000236b0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+000236c0: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
+000236d0: 656d 6265 6464 6564 5f73 636d 5f61 7267  embedded_scm_arg
+000236e0: 5f63 6c6f 7365 645f 5f65 6d62 6564 6465  _closed__embedde
+000236f0: 645f 7363 6d5f 6261 7265 5f61 7267 2873  d_scm_bare_arg(s
+00023700: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00023710: 2022 656d 6265 6464 6564 5f73 636d 5f61   "embedded_scm_a
+00023720: 7267 5f63 6c6f 7365 6420 3a20 656d 6265  rg_closed : embe
+00023730: 6464 6564 5f73 636d 5f62 6172 655f 6172  dded_scm_bare_ar
+00023740: 6722 0a20 2020 2020 2020 2070 5b30 5d20  g".        p[0] 
+00023750: 3d20 705b 315d 0a0a 2020 2020 6465 6620  = p[1]..    def 
+00023760: 705f 656d 6265 6464 6564 5f73 636d 5f61  p_embedded_scm_a
+00023770: 7267 5f63 6c6f 7365 645f 5f73 636d 5f66  rg_closed__scm_f
+00023780: 756e 6374 696f 6e5f 6361 6c6c 5f63 6c6f  unction_call_clo
+00023790: 7365 6428 7365 6c66 2c20 7029 3a0a 2020  sed(self, p):.  
+000237a0: 2020 2020 2020 2265 6d62 6564 6465 645f        "embedded_
+000237b0: 7363 6d5f 6172 675f 636c 6f73 6564 203a  scm_arg_closed :
+000237c0: 2073 636d 5f66 756e 6374 696f 6e5f 6361   scm_function_ca
+000237d0: 6c6c 5f63 6c6f 7365 6422 0a20 2020 2020  ll_closed".     
+000237e0: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+000237f0: 2020 2020 2323 2320 656d 6265 6464 6564      ### embedded
+00023800: 5f73 636d 5f62 6172 6520 2323 230a 0a20  _scm_bare ###.. 
+00023810: 2020 2064 6566 2070 5f65 6d62 6564 6465     def p_embedde
+00023820: 645f 7363 6d5f 6261 7265 5f5f 5343 4d5f  d_scm_bare__SCM_
+00023830: 4944 454e 5449 4649 4552 2873 656c 662c  IDENTIFIER(self,
+00023840: 2070 293a 0a20 2020 2020 2020 2022 656d   p):.        "em
+00023850: 6265 6464 6564 5f73 636d 5f62 6172 6520  bedded_scm_bare 
+00023860: 3a20 5343 4d5f 4944 454e 5449 4649 4552  : SCM_IDENTIFIER
+00023870: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
+00023880: 2070 5b31 5d0a 0a20 2020 2064 6566 2070   p[1]..    def p
+00023890: 5f65 6d62 6564 6465 645f 7363 6d5f 6261  _embedded_scm_ba
+000238a0: 7265 5f5f 5343 4d5f 544f 4b45 4e28 7365  re__SCM_TOKEN(se
+000238b0: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+000238c0: 2265 6d62 6564 6465 645f 7363 6d5f 6261  "embedded_scm_ba
+000238d0: 7265 203a 2053 434d 5f54 4f4b 454e 220a  re : SCM_TOKEN".
+000238e0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+000238f0: 5b31 5d0a 0a20 2020 2023 2323 2065 6d62  [1]..    ### emb
+00023900: 6564 6465 645f 7363 6d5f 6261 7265 5f61  edded_scm_bare_a
+00023910: 7267 2023 2323 0a0a 2020 2020 6465 6620  rg ###..    def 
+00023920: 705f 656d 6265 6464 6564 5f73 636d 5f62  p_embedded_scm_b
+00023930: 6172 655f 6172 675f 5f53 5452 494e 4728  are_arg__STRING(
+00023940: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+00023950: 2020 2265 6d62 6564 6465 645f 7363 6d5f    "embedded_scm_
+00023960: 6261 7265 5f61 7267 203a 2053 5452 494e  bare_arg : STRIN
+00023970: 4722 0a20 2020 2020 2020 2070 5b30 5d20  G".        p[0] 
+00023980: 3d20 705b 315d 0a0a 2020 2020 6465 6620  = p[1]..    def 
+00023990: 705f 656d 6265 6464 6564 5f73 636d 5f62  p_embedded_scm_b
+000239a0: 6172 655f 6172 675f 5f53 5452 494e 475f  are_arg__STRING_
+000239b0: 4944 454e 5449 4649 4552 2873 656c 662c  IDENTIFIER(self,
+000239c0: 2070 293a 0a20 2020 2020 2020 2022 656d   p):.        "em
+000239d0: 6265 6464 6564 5f73 636d 5f62 6172 655f  bedded_scm_bare_
+000239e0: 6172 6720 3a20 5354 5249 4e47 5f49 4445  arg : STRING_IDE
+000239f0: 4e54 4946 4945 5222 0a20 2020 2020 2020  NTIFIER".       
+00023a00: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
+00023a10: 2020 2320 2020 2064 6566 2070 5f65 6d62    #    def p_emb
+00023a20: 6564 6465 645f 7363 6d5f 6261 7265 5f61  edded_scm_bare_a
+00023a30: 7267 5f5f 626f 6f6b 5f62 6c6f 636b 2873  rg__book_block(s
+00023a40: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
+00023a50: 2020 2020 2020 2765 6d62 6564 6465 645f        'embedded_
+00023a60: 7363 6d5f 6261 7265 5f61 7267 203a 2062  scm_bare_arg : b
+00023a70: 6f6f 6b5f 626c 6f63 6b27 0a20 2020 2023  ook_block'.    #
+00023a80: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+00023a90: 5b31 5d0a 0a20 2020 2023 2020 2020 6465  [1]..    #    de
+00023aa0: 6620 705f 656d 6265 6464 6564 5f73 636d  f p_embedded_scm
+00023ab0: 5f62 6172 655f 6172 675f 5f62 6f6f 6b70  _bare_arg__bookp
+00023ac0: 6172 745f 626c 6f63 6b28 7365 6c66 2c20  art_block(self, 
+00023ad0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+00023ae0: 2027 656d 6265 6464 6564 5f73 636d 5f62   'embedded_scm_b
+00023af0: 6172 655f 6172 6720 3a20 626f 6f6b 7061  are_arg : bookpa
+00023b00: 7274 5f62 6c6f 636b 270a 2020 2020 2320  rt_block'.    # 
+00023b10: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00023b20: 315d 0a0a 2020 2020 6465 6620 705f 656d  1]..    def p_em
+00023b30: 6265 6464 6564 5f73 636d 5f62 6172 655f  bedded_scm_bare_
+00023b40: 6172 675f 5f63 6f6e 7465 7874 5f64 6566  arg__context_def
+00023b50: 5f73 7065 635f 626c 6f63 6b28 7365 6c66  _spec_block(self
+00023b60: 2c20 7029 3a0a 2020 2020 2020 2020 2265  , p):.        "e
+00023b70: 6d62 6564 6465 645f 7363 6d5f 6261 7265  mbedded_scm_bare
+00023b80: 5f61 7267 203a 2063 6f6e 7465 7874 5f64  _arg : context_d
+00023b90: 6566 5f73 7065 635f 626c 6f63 6b22 0a20  ef_spec_block". 
+00023ba0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00023bb0: 315d 0a0a 2020 2020 6465 6620 705f 656d  1]..    def p_em
+00023bc0: 6265 6464 6564 5f73 636d 5f62 6172 655f  bedded_scm_bare_
+00023bd0: 6172 675f 5f63 6f6e 7465 7874 5f6d 6f64  arg__context_mod
+00023be0: 6966 6963 6174 696f 6e28 7365 6c66 2c20  ification(self, 
+00023bf0: 7029 3a0a 2020 2020 2020 2020 2265 6d62  p):.        "emb
+00023c00: 6564 6465 645f 7363 6d5f 6261 7265 5f61  edded_scm_bare_a
+00023c10: 7267 203a 2063 6f6e 7465 7874 5f6d 6f64  rg : context_mod
+00023c20: 6966 6963 6174 696f 6e22 0a20 2020 2020  ification".     
+00023c30: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+00023c40: 2020 2020 6465 6620 705f 656d 6265 6464      def p_embedd
+00023c50: 6564 5f73 636d 5f62 6172 655f 6172 675f  ed_scm_bare_arg_
+00023c60: 5f65 6d62 6564 6465 645f 7363 6d5f 6261  _embedded_scm_ba
+00023c70: 7265 2873 656c 662c 2070 293a 0a20 2020  re(self, p):.   
+00023c80: 2020 2020 2022 656d 6265 6464 6564 5f73       "embedded_s
+00023c90: 636d 5f62 6172 655f 6172 6720 3a20 656d  cm_bare_arg : em
+00023ca0: 6265 6464 6564 5f73 636d 5f62 6172 6522  bedded_scm_bare"
+00023cb0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00023cc0: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
+00023cd0: 656d 6265 6464 6564 5f73 636d 5f62 6172  embedded_scm_bar
+00023ce0: 655f 6172 675f 5f66 756c 6c5f 6d61 726b  e_arg__full_mark
+00023cf0: 7570 2873 656c 662c 2070 293a 0a20 2020  up(self, p):.   
+00023d00: 2020 2020 2022 656d 6265 6464 6564 5f73       "embedded_s
+00023d10: 636d 5f62 6172 655f 6172 6720 3a20 6675  cm_bare_arg : fu
+00023d20: 6c6c 5f6d 6172 6b75 7022 0a20 2020 2020  ll_markup".     
+00023d30: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+00023d40: 2020 2020 6465 6620 705f 656d 6265 6464      def p_embedd
+00023d50: 6564 5f73 636d 5f62 6172 655f 6172 675f  ed_scm_bare_arg_
+00023d60: 5f66 756c 6c5f 6d61 726b 7570 5f6c 6973  _full_markup_lis
+00023d70: 7428 7365 6c66 2c20 7029 3a0a 2020 2020  t(self, p):.    
+00023d80: 2020 2020 2265 6d62 6564 6465 645f 7363      "embedded_sc
+00023d90: 6d5f 6261 7265 5f61 7267 203a 2066 756c  m_bare_arg : ful
+00023da0: 6c5f 6d61 726b 7570 5f6c 6973 7422 0a20  l_markup_list". 
+00023db0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00023dc0: 315d 0a0a 2020 2020 6465 6620 705f 656d  1]..    def p_em
+00023dd0: 6265 6464 6564 5f73 636d 5f62 6172 655f  bedded_scm_bare_
+00023de0: 6172 675f 5f6f 7574 7075 745f 6465 6628  arg__output_def(
+00023df0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+00023e00: 2020 2265 6d62 6564 6465 645f 7363 6d5f    "embedded_scm_
+00023e10: 6261 7265 5f61 7267 203a 206f 7574 7075  bare_arg : outpu
+00023e20: 745f 6465 6622 0a20 2020 2020 2020 2070  t_def".        p
+00023e30: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
+00023e40: 6465 6620 705f 656d 6265 6464 6564 5f73  def p_embedded_s
+00023e50: 636d 5f62 6172 655f 6172 675f 5f73 636f  cm_bare_arg__sco
+00023e60: 7265 5f62 6c6f 636b 2873 656c 662c 2070  re_block(self, p
+00023e70: 293a 0a20 2020 2020 2020 2022 656d 6265  ):.        "embe
+00023e80: 6464 6564 5f73 636d 5f62 6172 655f 6172  dded_scm_bare_ar
+00023e90: 6720 3a20 7363 6f72 655f 626c 6f63 6b22  g : score_block"
+00023ea0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00023eb0: 705b 315d 0a0a 2020 2020 2323 2320 656d  p[1]..    ### em
+00023ec0: 6265 6464 6564 5f73 636d 5f63 686f 7264  bedded_scm_chord
+00023ed0: 5f62 6f64 7920 2323 230a 0a20 2020 2064  _body ###..    d
+00023ee0: 6566 2070 5f65 6d62 6564 6465 645f 7363  ef p_embedded_sc
+00023ef0: 6d5f 6368 6f72 645f 626f 6479 5f5f 5343  m_chord_body__SC
+00023f00: 4d5f 4655 4e43 5449 4f4e 5f5f 6d75 7369  M_FUNCTION__musi
+00023f10: 635f 6675 6e63 7469 6f6e 5f63 686f 7264  c_function_chord
+00023f20: 5f62 6f64 795f 6172 676c 6973 7428 0a20  _body_arglist(. 
+00023f30: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
+00023f40: 2020 2029 3a0a 2020 2020 2020 2020 2265     ):.        "e
+00023f50: 6d62 6564 6465 645f 7363 6d5f 6368 6f72  mbedded_scm_chor
+00023f60: 645f 626f 6479 203a 2053 434d 5f46 554e  d_body : SCM_FUN
+00023f70: 4354 494f 4e20 6d75 7369 635f 6675 6e63  CTION music_func
+00023f80: 7469 6f6e 5f63 686f 7264 5f62 6f64 795f  tion_chord_body_
+00023f90: 6172 676c 6973 7422 0a20 2020 2020 2020  arglist".       
+00023fa0: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
+00023fb0: 6465 2822 656d 6265 6464 6564 5f73 636d  de("embedded_scm
+00023fc0: 5f63 686f 7264 5f62 6f64 7922 2c20 705b  _chord_body", p[
+00023fd0: 313a 5d29 0a0a 2020 2020 6465 6620 705f  1:])..    def p_
+00023fe0: 656d 6265 6464 6564 5f73 636d 5f63 686f  embedded_scm_cho
+00023ff0: 7264 5f62 6f64 795f 5f62 6172 655f 6e75  rd_body__bare_nu
+00024000: 6d62 6572 2873 656c 662c 2070 293a 0a20  mber(self, p):. 
+00024010: 2020 2020 2020 2022 656d 6265 6464 6564         "embedded
+00024020: 5f73 636d 5f63 686f 7264 5f62 6f64 7920  _scm_chord_body 
+00024030: 3a20 6261 7265 5f6e 756d 6265 7222 0a20  : bare_number". 
+00024040: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00024050: 315d 0a0a 2020 2020 6465 6620 705f 656d  1]..    def p_em
+00024060: 6265 6464 6564 5f73 636d 5f63 686f 7264  bedded_scm_chord
+00024070: 5f62 6f64 795f 5f63 686f 7264 5f62 6f64  _body__chord_bod
+00024080: 795f 656c 656d 656e 7428 7365 6c66 2c20  y_element(self, 
+00024090: 7029 3a0a 2020 2020 2020 2020 2265 6d62  p):.        "emb
+000240a0: 6564 6465 645f 7363 6d5f 6368 6f72 645f  edded_scm_chord_
+000240b0: 626f 6479 203a 2063 686f 7264 5f62 6f64  body : chord_bod
+000240c0: 795f 656c 656d 656e 7422 0a20 2020 2020  y_element".     
+000240d0: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+000240e0: 2020 2020 6465 6620 705f 656d 6265 6464      def p_embedd
+000240f0: 6564 5f73 636d 5f63 686f 7264 5f62 6f64  ed_scm_chord_bod
+00024100: 795f 5f65 6d62 6564 6465 645f 7363 6d5f  y__embedded_scm_
+00024110: 6261 7265 5f61 7267 2873 656c 662c 2070  bare_arg(self, p
+00024120: 293a 0a20 2020 2020 2020 2022 656d 6265  ):.        "embe
+00024130: 6464 6564 5f73 636d 5f63 686f 7264 5f62  dded_scm_chord_b
+00024140: 6f64 7920 3a20 656d 6265 6464 6564 5f73  ody : embedded_s
+00024150: 636d 5f62 6172 655f 6172 6722 0a20 2020  cm_bare_arg".   
+00024160: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
+00024170: 0a0a 2020 2020 6465 6620 705f 656d 6265  ..    def p_embe
+00024180: 6464 6564 5f73 636d 5f63 686f 7264 5f62  dded_scm_chord_b
+00024190: 6f64 795f 5f66 7261 6374 696f 6e28 7365  ody__fraction(se
+000241a0: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+000241b0: 2265 6d62 6564 6465 645f 7363 6d5f 6368  "embedded_scm_ch
+000241c0: 6f72 645f 626f 6479 203a 2066 7261 6374  ord_body : fract
+000241d0: 696f 6e22 0a20 2020 2020 2020 2070 5b30  ion".        p[0
+000241e0: 5d20 3d20 705b 315d 0a0a 2020 2020 2320  ] = p[1]..    # 
+000241f0: 2020 2064 6566 2070 5f65 6d62 6564 6465     def p_embedde
+00024200: 645f 7363 6d5f 6368 6f72 645f 626f 6479  d_scm_chord_body
+00024210: 5f5f 6c79 7269 635f 656c 656d 656e 7428  __lyric_element(
+00024220: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
+00024230: 2020 2020 2020 2027 656d 6265 6464 6564         'embedded
+00024240: 5f73 636d 5f63 686f 7264 5f62 6f64 7920  _scm_chord_body 
+00024250: 3a20 6c79 7269 635f 656c 656d 656e 7427  : lyric_element'
+00024260: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+00024270: 305d 203d 2070 5b31 5d0a 0a20 2020 2023  0] = p[1]..    #
+00024280: 2323 2065 6d62 6564 6465 645f 7363 6d5f  ## embedded_scm_
+00024290: 636c 6f73 6564 2023 2323 0a0a 2020 2020  closed ###..    
+000242a0: 6465 6620 705f 656d 6265 6464 6564 5f73  def p_embedded_s
+000242b0: 636d 5f63 6c6f 7365 645f 5f65 6d62 6564  cm_closed__embed
+000242c0: 6465 645f 7363 6d5f 6261 7265 2873 656c  ded_scm_bare(sel
+000242d0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+000242e0: 656d 6265 6464 6564 5f73 636d 5f63 6c6f  embedded_scm_clo
+000242f0: 7365 6420 3a20 656d 6265 6464 6564 5f73  sed : embedded_s
+00024300: 636d 5f62 6172 6522 0a20 2020 2020 2020  cm_bare".       
+00024310: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
+00024320: 2020 6465 6620 705f 656d 6265 6464 6564    def p_embedded
+00024330: 5f73 636d 5f63 6c6f 7365 645f 5f73 636d  _scm_closed__scm
+00024340: 5f66 756e 6374 696f 6e5f 6361 6c6c 5f63  _function_call_c
+00024350: 6c6f 7365 6428 7365 6c66 2c20 7029 3a0a  losed(self, p):.
+00024360: 2020 2020 2020 2020 2265 6d62 6564 6465          "embedde
+00024370: 645f 7363 6d5f 636c 6f73 6564 203a 2073  d_scm_closed : s
+00024380: 636d 5f66 756e 6374 696f 6e5f 6361 6c6c  cm_function_call
+00024390: 5f63 6c6f 7365 6422 0a20 2020 2020 2020  _closed".       
+000243a0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
+000243b0: 2020 2323 2320 6576 656e 745f 6368 6f72    ### event_chor
+000243c0: 6420 2323 230a 0a20 2020 2064 6566 2070  d ###..    def p
+000243d0: 5f65 7665 6e74 5f63 686f 7264 5f5f 4348  _event_chord__CH
+000243e0: 4f52 445f 5245 5045 5449 5449 4f4e 5f5f  ORD_REPETITION__
+000243f0: 6f70 7469 6f6e 616c 5f6e 6f74 656d 6f64  optional_notemod
+00024400: 655f 6475 7261 7469 6f6e 5f5f 706f 7374  e_duration__post
+00024410: 5f65 7665 6e74 7328 0a20 2020 2020 2020  _events(.       
+00024420: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
+00024430: 2020 2020 2020 2020 2265 7665 6e74 5f63          "event_c
+00024440: 686f 7264 203a 2043 484f 5244 5f52 4550  hord : CHORD_REP
+00024450: 4554 4954 494f 4e20 6f70 7469 6f6e 616c  ETITION optional
+00024460: 5f6e 6f74 656d 6f64 655f 6475 7261 7469  _notemode_durati
+00024470: 6f6e 2070 6f73 745f 6576 656e 7473 220a  on post_events".
+00024480: 2020 2020 2020 2020 7069 7463 6865 7320          pitches 
+00024490: 3d20 7365 6c66 2e63 6c69 656e 742e 5f6c  = self.client._l
+000244a0: 6173 745f 6368 6f72 642e 7772 6974 7465  ast_chord.writte
+000244b0: 6e5f 7069 7463 6865 730a 2020 2020 2020  n_pitches.      
+000244c0: 2020 6475 7261 7469 6f6e 203d 2070 5b32    duration = p[2
+000244d0: 5d2e 6475 7261 7469 6f6e 0a20 2020 2020  ].duration.     
+000244e0: 2020 2063 686f 7264 203d 205f 7363 6f72     chord = _scor
+000244f0: 652e 4368 6f72 6428 7069 7463 6865 732c  e.Chord(pitches,
+00024500: 2064 7572 6174 696f 6e29 0a20 2020 2020   duration).     
+00024510: 2020 2073 656c 662e 636c 6965 6e74 2e5f     self.client._
+00024520: 6368 6f72 645f 7069 7463 685f 6f72 6465  chord_pitch_orde
+00024530: 7273 5b63 686f 7264 5d20 3d20 7069 7463  rs[chord] = pitc
+00024540: 6865 730a 2020 2020 2020 2020 6966 2070  hes.        if p
+00024550: 5b32 5d2e 6d75 6c74 6970 6c69 6572 2069  [2].multiplier i
+00024560: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00024570: 2020 2020 2020 2020 6d75 6c74 6970 6c69          multipli
+00024580: 6572 203d 205f 6475 7261 7469 6f6e 2e4d  er = _duration.M
+00024590: 756c 7469 706c 6965 7228 705b 325d 2e6d  ultiplier(p[2].m
+000245a0: 756c 7469 706c 6965 7229 0a20 2020 2020  ultiplier).     
+000245b0: 2020 2020 2020 2063 686f 7264 2e6d 756c         chord.mul
+000245c0: 7469 706c 6965 7220 3d20 6d75 6c74 6970  tiplier = multip
+000245d0: 6c69 6572 0a20 2020 2020 2020 2073 656c  lier.        sel
+000245e0: 662e 636c 6965 6e74 2e5f 7072 6f63 6573  f.client._proces
+000245f0: 735f 706f 7374 5f65 7665 6e74 7328 6368  s_post_events(ch
+00024600: 6f72 642c 2070 5b33 5d29 0a20 2020 2020  ord, p[3]).     
+00024610: 2020 2061 6e6e 6f74 6174 696f 6e20 3d20     annotation = 
+00024620: 7b22 556e 7265 6c61 7469 7661 626c 654d  {"UnrelativableM
+00024630: 7573 6963 223a 2054 7275 657d 0a20 2020  usic": True}.   
+00024640: 2020 2020 205f 6269 6e64 2e61 7474 6163       _bind.attac
+00024650: 6828 616e 6e6f 7461 7469 6f6e 2c20 6368  h(annotation, ch
+00024660: 6f72 6429 0a20 2020 2020 2020 2069 6620  ord).        if 
+00024670: 7365 6c66 2e63 6c69 656e 742e 5f6c 6173  self.client._las
+00024680: 745f 6368 6f72 6420 6e6f 7420 696e 2073  t_chord not in s
+00024690: 656c 662e 636c 6965 6e74 2e5f 7265 7065  elf.client._repe
+000246a0: 6174 6564 5f63 686f 7264 733a 0a20 2020  ated_chords:.   
+000246b0: 2020 2020 2020 2020 2073 656c 662e 636c           self.cl
+000246c0: 6965 6e74 2e5f 7265 7065 6174 6564 5f63  ient._repeated_c
+000246d0: 686f 7264 735b 7365 6c66 2e63 6c69 656e  hords[self.clien
+000246e0: 742e 5f6c 6173 745f 6368 6f72 645d 203d  t._last_chord] =
+000246f0: 205b 5d0a 2020 2020 2020 2020 7365 6c66   [].        self
+00024700: 2e63 6c69 656e 742e 5f72 6570 6561 7465  .client._repeate
+00024710: 645f 6368 6f72 6473 5b73 656c 662e 636c  d_chords[self.cl
+00024720: 6965 6e74 2e5f 6c61 7374 5f63 686f 7264  ient._last_chord
+00024730: 5d2e 6170 7065 6e64 2863 686f 7264 290a  ].append(chord).
+00024740: 2020 2020 2020 2020 705b 305d 203d 2063          p[0] = c
+00024750: 686f 7264 0a0a 2020 2020 6465 6620 705f  hord..    def p_
+00024760: 6576 656e 745f 6368 6f72 645f 5f4d 554c  event_chord__MUL
+00024770: 5449 5f4d 4541 5355 5245 5f52 4553 545f  TI_MEASURE_REST_
+00024780: 5f6f 7074 696f 6e61 6c5f 6e6f 7465 6d6f  _optional_notemo
+00024790: 6465 5f64 7572 6174 696f 6e5f 5f70 6f73  de_duration__pos
+000247a0: 745f 6576 656e 7473 280a 2020 2020 2020  t_events(.      
+000247b0: 2020 7365 6c66 2c20 700a 2020 2020 293a    self, p.    ):
+000247c0: 0a20 2020 2020 2020 2022 6576 656e 745f  .        "event_
+000247d0: 6368 6f72 6420 3a20 4d55 4c54 495f 4d45  chord : MULTI_ME
+000247e0: 4153 5552 455f 5245 5354 206f 7074 696f  ASURE_REST optio
+000247f0: 6e61 6c5f 6e6f 7465 6d6f 6465 5f64 7572  nal_notemode_dur
+00024800: 6174 696f 6e20 706f 7374 5f65 7665 6e74  ation post_event
+00024810: 7322 0a20 2020 2020 2020 2072 6573 7420  s".        rest 
+00024820: 3d20 5f73 636f 7265 2e4d 756c 7469 6d65  = _score.Multime
+00024830: 6173 7572 6552 6573 7428 705b 325d 2e64  asureRest(p[2].d
+00024840: 7572 6174 696f 6e29 0a20 2020 2020 2020  uration).       
+00024850: 2069 6620 705b 325d 2e6d 756c 7469 706c   if p[2].multipl
+00024860: 6965 7220 6973 206e 6f74 204e 6f6e 653a  ier is not None:
+00024870: 0a20 2020 2020 2020 2020 2020 206d 756c  .            mul
+00024880: 7469 706c 6965 7220 3d20 5f64 7572 6174  tiplier = _durat
+00024890: 696f 6e2e 4d75 6c74 6970 6c69 6572 2870  ion.Multiplier(p
+000248a0: 5b32 5d2e 6d75 6c74 6970 6c69 6572 290a  [2].multiplier).
+000248b0: 2020 2020 2020 2020 2020 2020 7265 7374              rest
+000248c0: 2e6d 756c 7469 706c 6965 7220 3d20 6d75  .multiplier = mu
+000248d0: 6c74 6970 6c69 6572 0a20 2020 2020 2020  ltiplier.       
+000248e0: 2073 656c 662e 636c 6965 6e74 2e5f 7072   self.client._pr
+000248f0: 6f63 6573 735f 706f 7374 5f65 7665 6e74  ocess_post_event
+00024900: 7328 7265 7374 2c20 705b 335d 290a 2020  s(rest, p[3]).  
+00024910: 2020 2020 2020 705b 305d 203d 2072 6573        p[0] = res
+00024920: 740a 0a20 2020 2064 6566 2070 5f65 7665  t..    def p_eve
+00024930: 6e74 5f63 686f 7264 5f5f 636f 6d6d 616e  nt_chord__comman
+00024940: 645f 656c 656d 656e 7428 7365 6c66 2c20  d_element(self, 
+00024950: 7029 3a0a 2020 2020 2020 2020 2265 7665  p):.        "eve
+00024960: 6e74 5f63 686f 7264 203a 2063 6f6d 6d61  nt_chord : comma
+00024970: 6e64 5f65 6c65 6d65 6e74 220a 2020 2020  nd_element".    
+00024980: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
+00024990: 0a20 2020 2064 6566 2070 5f65 7665 6e74  .    def p_event
+000249a0: 5f63 686f 7264 5f5f 6e6f 7465 5f63 686f  _chord__note_cho
+000249b0: 7264 5f65 6c65 6d65 6e74 2873 656c 662c  rd_element(self,
+000249c0: 2070 293a 0a20 2020 2020 2020 2022 6576   p):.        "ev
+000249d0: 656e 745f 6368 6f72 6420 3a20 6e6f 7465  ent_chord : note
+000249e0: 5f63 686f 7264 5f65 6c65 6d65 6e74 220a  _chord_element".
+000249f0: 2020 2020 2020 2020 7365 6c66 2e63 6c69          self.cli
+00024a00: 656e 742e 5f6c 6173 745f 6368 6f72 6420  ent._last_chord 
+00024a10: 3d20 705b 315d 0a20 2020 2020 2020 2070  = p[1].        p
+00024a20: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
+00024a30: 6465 6620 705f 6576 656e 745f 6368 6f72  def p_event_chor
+00024a40: 645f 5f73 696d 706c 655f 6368 6f72 645f  d__simple_chord_
+00024a50: 656c 656d 656e 7473 5f5f 706f 7374 5f65  elements__post_e
+00024a60: 7665 6e74 7328 7365 6c66 2c20 7029 3a0a  vents(self, p):.
+00024a70: 2020 2020 2020 2020 2265 7665 6e74 5f63          "event_c
+00024a80: 686f 7264 203a 2073 696d 706c 655f 6368  hord : simple_ch
+00024a90: 6f72 645f 656c 656d 656e 7473 2070 6f73  ord_elements pos
+00024aa0: 745f 6576 656e 7473 220a 2020 2020 2020  t_events".      
+00024ab0: 2020 7365 6c66 2e63 6c69 656e 742e 5f70    self.client._p
+00024ac0: 726f 6365 7373 5f70 6f73 745f 6576 656e  rocess_post_even
+00024ad0: 7473 2870 5b31 5d2c 2070 5b32 5d29 0a20  ts(p[1], p[2]). 
+00024ae0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00024af0: 315d 0a0a 2020 2020 2323 2320 6576 656e  1]..    ### even
+00024b00: 745f 6675 6e63 7469 6f6e 5f65 7665 6e74  t_function_event
+00024b10: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+00024b20: 6576 656e 745f 6675 6e63 7469 6f6e 5f65  event_function_e
+00024b30: 7665 6e74 5f5f 4556 454e 545f 4655 4e43  vent__EVENT_FUNC
+00024b40: 5449 4f4e 5f5f 6675 6e63 7469 6f6e 5f61  TION__function_a
+00024b50: 7267 6c69 7374 5f63 6c6f 7365 6428 7365  rglist_closed(se
+00024b60: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+00024b70: 2265 7665 6e74 5f66 756e 6374 696f 6e5f  "event_function_
+00024b80: 6576 656e 7420 3a20 4556 454e 545f 4655  event : EVENT_FU
+00024b90: 4e43 5449 4f4e 2066 756e 6374 696f 6e5f  NCTION function_
+00024ba0: 6172 676c 6973 745f 636c 6f73 6564 220a  arglist_closed".
+00024bb0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+00024bc0: 796e 7461 784e 6f64 6528 2265 7665 6e74  yntaxNode("event
+00024bd0: 5f66 756e 6374 696f 6e5f 6576 656e 7422  _function_event"
+00024be0: 2c20 705b 313a 5d29 0a0a 2020 2020 2323  , p[1:])..    ##
+00024bf0: 2320 6578 636c 616d 6174 696f 6e73 2023  # exclamations #
+00024c00: 2323 0a0a 2020 2020 6465 6620 705f 6578  ##..    def p_ex
+00024c10: 636c 616d 6174 696f 6e73 5f5f 456d 7074  clamations__Empt
+00024c20: 7928 7365 6c66 2c20 7029 3a0a 2020 2020  y(self, p):.    
+00024c30: 2020 2020 2265 7863 6c61 6d61 7469 6f6e      "exclamation
+00024c40: 7320 3a22 0a20 2020 2020 2020 2070 5b30  s :".        p[0
+00024c50: 5d20 3d20 300a 0a20 2020 2064 6566 2070  ] = 0..    def p
+00024c60: 5f65 7863 6c61 6d61 7469 6f6e 735f 5f65  _exclamations__e
+00024c70: 7863 6c61 6d61 7469 6f6e 735f 5f43 6872  xclamations__Chr
+00024c80: 3333 2873 656c 662c 2070 293a 0a20 2020  33(self, p):.   
+00024c90: 2020 2020 2022 6578 636c 616d 6174 696f       "exclamatio
+00024ca0: 6e73 203a 2065 7863 6c61 6d61 7469 6f6e  ns : exclamation
+00024cb0: 7320 2721 2722 0a20 2020 2020 2020 2070  s '!'".        p
+00024cc0: 5b30 5d20 3d20 705b 315d 202b 2031 0a0a  [0] = p[1] + 1..
+00024cd0: 2020 2020 2323 2320 6669 6775 7265 5f6c      ### figure_l
+00024ce0: 6973 7420 2323 230a 0a20 2020 2023 2020  ist ###..    #  
+00024cf0: 2020 6465 6620 705f 6669 6775 7265 5f6c    def p_figure_l
+00024d00: 6973 745f 5f45 6d70 7479 2873 656c 662c  ist__Empty(self,
+00024d10: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+00024d20: 2020 2766 6967 7572 655f 6c69 7374 203a    'figure_list :
+00024d30: 2027 0a20 2020 2023 2020 2020 2020 2020   '.    #        
+00024d40: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+00024d50: 6528 2766 6967 7572 655f 6c69 7374 272c  e('figure_list',
+00024d60: 2070 5b31 3a5d 290a 0a20 2020 2023 2020   p[1:])..    #  
+00024d70: 2020 6465 6620 705f 6669 6775 7265 5f6c    def p_figure_l
+00024d80: 6973 745f 5f66 6967 7572 655f 6c69 7374  ist__figure_list
+00024d90: 5f5f 6272 5f62 6173 735f 6669 6775 7265  __br_bass_figure
+00024da0: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+00024db0: 2020 2020 2020 2020 2766 6967 7572 655f          'figure_
+00024dc0: 6c69 7374 203a 2066 6967 7572 655f 6c69  list : figure_li
+00024dd0: 7374 2062 725f 6261 7373 5f66 6967 7572  st br_bass_figur
+00024de0: 6527 0a20 2020 2023 2020 2020 2020 2020  e'.    #        
+00024df0: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+00024e00: 6528 2766 6967 7572 655f 6c69 7374 272c  e('figure_list',
+00024e10: 2070 5b31 3a5d 290a 0a20 2020 2023 2323   p[1:])..    ###
+00024e20: 2066 6967 7572 655f 7370 6563 2023 2323   figure_spec ###
+00024e30: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
+00024e40: 5f66 6967 7572 655f 7370 6563 5f5f 4649  _figure_spec__FI
+00024e50: 4755 5245 5f4f 5045 4e5f 5f66 6967 7572  GURE_OPEN__figur
+00024e60: 655f 6c69 7374 5f5f 4649 4755 5245 5f43  e_list__FIGURE_C
+00024e70: 4c4f 5345 2873 656c 662c 2070 293a 0a20  LOSE(self, p):. 
+00024e80: 2020 2023 2020 2020 2020 2020 2766 6967     #        'fig
+00024e90: 7572 655f 7370 6563 203a 2046 4947 5552  ure_spec : FIGUR
+00024ea0: 455f 4f50 454e 2066 6967 7572 655f 6c69  E_OPEN figure_li
+00024eb0: 7374 2046 4947 5552 455f 434c 4f53 4527  st FIGURE_CLOSE'
+00024ec0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+00024ed0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+00024ee0: 2766 6967 7572 655f 7370 6563 272c 2070  'figure_spec', p
+00024ef0: 5b31 3a5d 290a 0a20 2020 2023 2323 2066  [1:])..    ### f
+00024f00: 6967 7572 6564 5f62 6173 735f 616c 7465  igured_bass_alte
+00024f10: 7261 7469 6f6e 2023 2323 0a0a 2020 2020  ration ###..    
+00024f20: 2320 2020 2064 6566 2070 5f66 6967 7572  #    def p_figur
+00024f30: 6564 5f62 6173 735f 616c 7465 7261 7469  ed_bass_alterati
+00024f40: 6f6e 5f5f 4368 7233 3328 7365 6c66 2c20  on__Chr33(self, 
+00024f50: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+00024f60: 2022 6669 6775 7265 645f 6261 7373 5f61   "figured_bass_a
+00024f70: 6c74 6572 6174 696f 6e20 3a20 2721 2722  lteration : '!'"
+00024f80: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+00024f90: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+00024fa0: 2766 6967 7572 6564 5f62 6173 735f 616c  'figured_bass_al
+00024fb0: 7465 7261 7469 6f6e 272c 2070 5b31 3a5d  teration', p[1:]
+00024fc0: 290a 0a20 2020 2023 2020 2020 6465 6620  )..    #    def 
+00024fd0: 705f 6669 6775 7265 645f 6261 7373 5f61  p_figured_bass_a
+00024fe0: 6c74 6572 6174 696f 6e5f 5f43 6872 3433  lteration__Chr43
+00024ff0: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+00025000: 2020 2020 2020 2020 2266 6967 7572 6564          "figured
+00025010: 5f62 6173 735f 616c 7465 7261 7469 6f6e  _bass_alteration
+00025020: 203a 2027 2b27 220a 2020 2020 2320 2020   : '+'".    #   
+00025030: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
+00025040: 6178 4e6f 6465 2827 6669 6775 7265 645f  axNode('figured_
+00025050: 6261 7373 5f61 6c74 6572 6174 696f 6e27  bass_alteration'
+00025060: 2c20 705b 313a 5d29 0a0a 2020 2020 2320  , p[1:])..    # 
+00025070: 2020 2064 6566 2070 5f66 6967 7572 6564     def p_figured
+00025080: 5f62 6173 735f 616c 7465 7261 7469 6f6e  _bass_alteration
+00025090: 5f5f 4368 7234 3528 7365 6c66 2c20 7029  __Chr45(self, p)
+000250a0: 3a0a 2020 2020 2320 2020 2020 2020 2022  :.    #        "
+000250b0: 6669 6775 7265 645f 6261 7373 5f61 6c74  figured_bass_alt
+000250c0: 6572 6174 696f 6e20 3a20 272d 2722 0a20  eration : '-'". 
+000250d0: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
+000250e0: 203d 2053 796e 7461 784e 6f64 6528 2766   = SyntaxNode('f
+000250f0: 6967 7572 6564 5f62 6173 735f 616c 7465  igured_bass_alte
+00025100: 7261 7469 6f6e 272c 2070 5b31 3a5d 290a  ration', p[1:]).
+00025110: 0a20 2020 2023 2323 2066 6967 7572 6564  .    ### figured
+00025120: 5f62 6173 735f 6d6f 6469 6669 6361 7469  _bass_modificati
+00025130: 6f6e 2023 2323 0a0a 2020 2020 2320 2020  on ###..    #   
+00025140: 2064 6566 2070 5f66 6967 7572 6564 5f62   def p_figured_b
+00025150: 6173 735f 6d6f 6469 6669 6361 7469 6f6e  ass_modification
+00025160: 5f5f 4368 7234 3728 7365 6c66 2c20 7029  __Chr47(self, p)
+00025170: 3a0a 2020 2020 2320 2020 2020 2020 2022  :.    #        "
+00025180: 6669 6775 7265 645f 6261 7373 5f6d 6f64  figured_bass_mod
+00025190: 6966 6963 6174 696f 6e20 3a20 272f 2722  ification : '/'"
+000251a0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+000251b0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+000251c0: 2766 6967 7572 6564 5f62 6173 735f 6d6f  'figured_bass_mo
+000251d0: 6469 6669 6361 7469 6f6e 272c 2070 5b31  dification', p[1
+000251e0: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
+000251f0: 6620 705f 6669 6775 7265 645f 6261 7373  f p_figured_bass
+00025200: 5f6d 6f64 6966 6963 6174 696f 6e5f 5f45  _modification__E
+00025210: 5f42 4143 4b53 4c41 5348 2873 656c 662c  _BACKSLASH(self,
+00025220: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+00025230: 2020 2766 6967 7572 6564 5f62 6173 735f    'figured_bass_
+00025240: 6d6f 6469 6669 6361 7469 6f6e 203a 2045  modification : E
+00025250: 5f42 4143 4b53 4c41 5348 270a 2020 2020  _BACKSLASH'.    
+00025260: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+00025270: 5379 6e74 6178 4e6f 6465 2827 6669 6775  SyntaxNode('figu
+00025280: 7265 645f 6261 7373 5f6d 6f64 6966 6963  red_bass_modific
+00025290: 6174 696f 6e27 2c20 705b 313a 5d29 0a0a  ation', p[1:])..
+000252a0: 2020 2020 2320 2020 2064 6566 2070 5f66      #    def p_f
+000252b0: 6967 7572 6564 5f62 6173 735f 6d6f 6469  igured_bass_modi
+000252c0: 6669 6361 7469 6f6e 5f5f 455f 4558 434c  fication__E_EXCL
+000252d0: 414d 4154 494f 4e28 7365 6c66 2c20 7029  AMATION(self, p)
+000252e0: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
+000252f0: 6669 6775 7265 645f 6261 7373 5f6d 6f64  figured_bass_mod
+00025300: 6966 6963 6174 696f 6e20 3a20 455f 4558  ification : E_EX
+00025310: 434c 414d 4154 494f 4e27 0a20 2020 2023  CLAMATION'.    #
+00025320: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+00025330: 796e 7461 784e 6f64 6528 2766 6967 7572  yntaxNode('figur
+00025340: 6564 5f62 6173 735f 6d6f 6469 6669 6361  ed_bass_modifica
+00025350: 7469 6f6e 272c 2070 5b31 3a5d 290a 0a20  tion', p[1:]).. 
+00025360: 2020 2023 2020 2020 6465 6620 705f 6669     #    def p_fi
+00025370: 6775 7265 645f 6261 7373 5f6d 6f64 6966  gured_bass_modif
+00025380: 6963 6174 696f 6e5f 5f45 5f50 4c55 5328  ication__E_PLUS(
+00025390: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
+000253a0: 2020 2020 2020 2027 6669 6775 7265 645f         'figured_
+000253b0: 6261 7373 5f6d 6f64 6966 6963 6174 696f  bass_modificatio
+000253c0: 6e20 3a20 455f 504c 5553 270a 2020 2020  n : E_PLUS'.    
+000253d0: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+000253e0: 5379 6e74 6178 4e6f 6465 2827 6669 6775  SyntaxNode('figu
+000253f0: 7265 645f 6261 7373 5f6d 6f64 6966 6963  red_bass_modific
+00025400: 6174 696f 6e27 2c20 705b 313a 5d29 0a0a  ation', p[1:])..
+00025410: 2020 2020 2323 2320 6669 6e67 6572 696e      ### fingerin
+00025420: 6720 2323 230a 0a20 2020 2064 6566 2070  g ###..    def p
+00025430: 5f66 696e 6765 7269 6e67 5f5f 554e 5349  _fingering__UNSI
+00025440: 474e 4544 2873 656c 662c 2070 293a 0a20  GNED(self, p):. 
+00025450: 2020 2020 2020 2022 6669 6e67 6572 696e         "fingerin
+00025460: 6720 3a20 554e 5349 474e 4544 220a 2020  g : UNSIGNED".  
+00025470: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+00025480: 7461 784e 6f64 6528 2266 696e 6765 7269  taxNode("fingeri
+00025490: 6e67 222c 2070 5b31 3a5d 290a 0a20 2020  ng", p[1:])..   
+000254a0: 2023 2323 2066 7261 6374 696f 6e20 2323   ### fraction ##
+000254b0: 230a 0a20 2020 2064 6566 2070 5f66 7261  #..    def p_fra
+000254c0: 6374 696f 6e5f 5f46 5241 4354 494f 4e28  ction__FRACTION(
+000254d0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+000254e0: 2020 2266 7261 6374 696f 6e20 3a20 4652    "fraction : FR
+000254f0: 4143 5449 4f4e 220a 2020 2020 2020 2020  ACTION".        
+00025500: 705b 305d 203d 2070 5b31 5d0a 0a20 2020  p[0] = p[1]..   
+00025510: 2064 6566 2070 5f66 7261 6374 696f 6e5f   def p_fraction_
+00025520: 5f55 4e53 4947 4e45 445f 5f43 6872 3437  _UNSIGNED__Chr47
+00025530: 5f5f 554e 5349 474e 4544 2873 656c 662c  __UNSIGNED(self,
+00025540: 2070 293a 0a20 2020 2020 2020 2022 6672   p):.        "fr
+00025550: 6163 7469 6f6e 203a 2055 4e53 4947 4e45  action : UNSIGNE
+00025560: 4420 272f 2720 554e 5349 474e 4544 220a  D '/' UNSIGNED".
+00025570: 2020 2020 2020 2020 705b 305d 203d 2071          p[0] = q
+00025580: 7569 636b 7469 6f6e 732e 4672 6163 7469  uicktions.Fracti
+00025590: 6f6e 2870 5b31 5d2c 2070 5b33 5d29 0a0a  on(p[1], p[3])..
+000255a0: 2020 2020 2323 2320 6675 6c6c 5f6d 6172      ### full_mar
+000255b0: 6b75 7020 2323 230a 0a20 2020 2064 6566  kup ###..    def
+000255c0: 2070 5f66 756c 6c5f 6d61 726b 7570 5f5f   p_full_markup__
+000255d0: 4d41 524b 5550 5f49 4445 4e54 4946 4945  MARKUP_IDENTIFIE
+000255e0: 5228 7365 6c66 2c20 7029 3a0a 2020 2020  R(self, p):.    
+000255f0: 2020 2020 2266 756c 6c5f 6d61 726b 7570      "full_markup
+00025600: 203a 204d 4152 4b55 505f 4944 454e 5449   : MARKUP_IDENTI
+00025610: 4649 4552 220a 2020 2020 2020 2020 705b  FIER".        p[
+00025620: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+00025630: 2266 756c 6c5f 6d61 726b 7570 222c 2070  "full_markup", p
+00025640: 2e5f 5f67 6574 736c 6963 655f 5f28 312c  .__getslice__(1,
+00025650: 204e 6f6e 6529 290a 0a20 2020 2064 6566   None))..    def
+00025660: 2070 5f66 756c 6c5f 6d61 726b 7570 5f5f   p_full_markup__
+00025670: 4d41 524b 5550 5f5f 6d61 726b 7570 5f74  MARKUP__markup_t
+00025680: 6f70 2873 656c 662c 2070 293a 0a20 2020  op(self, p):.   
+00025690: 2020 2020 2022 6675 6c6c 5f6d 6172 6b75       "full_marku
+000256a0: 7020 3a20 4d41 524b 5550 206d 6172 6b75  p : MARKUP marku
+000256b0: 705f 746f 7022 0a20 2020 2020 2020 2070  p_top".        p
+000256c0: 6172 7473 203d 205b 5d0a 2020 2020 2020  arts = [].      
+000256d0: 2020 666f 7220 6974 656d 2069 6e20 705b    for item in p[
+000256e0: 325d 3a0a 2020 2020 2020 2020 2020 2020  2]:.            
+000256f0: 6966 2069 7369 6e73 7461 6e63 6528 6974  if isinstance(it
+00025700: 656d 2c20 4d61 726b 7570 436f 6d6d 616e  em, MarkupComman
+00025710: 6429 3a0a 2020 2020 2020 2020 2020 2020  d):.            
+00025720: 2020 2020 7061 7274 732e 6170 7065 6e64      parts.append
+00025730: 2869 7465 6d2e 5f67 6574 5f6c 696c 7970  (item._get_lilyp
+00025740: 6f6e 645f 666f 726d 6174 2829 290a 2020  ond_format()).  
+00025750: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00025760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025770: 7061 7274 732e 6170 7065 6e64 2869 7465  parts.append(ite
+00025780: 6d29 0a20 2020 2020 2020 2073 7472 696e  m).        strin
+00025790: 6720 3d20 2220 222e 6a6f 696e 2870 6172  g = " ".join(par
+000257a0: 7473 290a 2020 2020 2020 2020 7374 7269  ts).        stri
+000257b0: 6e67 203d 2072 6622 5c6d 6172 6b75 7020  ng = rf"\markup 
+000257c0: 7b7b 207b 7374 7269 6e67 7d20 7d7d 220a  {{ {string} }}".
+000257d0: 2020 2020 2020 2020 705b 305d 203d 205f          p[0] = _
+000257e0: 696e 6469 6361 746f 7273 2e4d 6172 6b75  indicators.Marku
+000257f0: 7028 7374 7269 6e67 290a 2020 2020 2020  p(string).      
+00025800: 2020 7365 6c66 2e63 6c69 656e 742e 5f6c    self.client._l
+00025810: 6578 6572 2e70 6f70 5f73 7461 7465 2829  exer.pop_state()
+00025820: 0a20 2020 2020 2020 2073 656c 662e 636c  .        self.cl
+00025830: 6965 6e74 2e5f 7265 6c65 785f 6c6f 6f6b  ient._relex_look
+00025840: 6168 6561 6428 290a 0a20 2020 2023 2323  ahead()..    ###
+00025850: 2066 756c 6c5f 6d61 726b 7570 5f6c 6973   full_markup_lis
+00025860: 7420 2323 230a 0a20 2020 2064 6566 2070  t ###..    def p
+00025870: 5f66 756c 6c5f 6d61 726b 7570 5f6c 6973  _full_markup_lis
+00025880: 745f 5f4d 4152 4b55 504c 4953 545f 4944  t__MARKUPLIST_ID
+00025890: 454e 5449 4649 4552 2873 656c 662c 2070  ENTIFIER(self, p
+000258a0: 293a 0a20 2020 2020 2020 2022 6675 6c6c  ):.        "full
+000258b0: 5f6d 6172 6b75 705f 6c69 7374 203a 204d  _markup_list : M
+000258c0: 4152 4b55 504c 4953 545f 4944 454e 5449  ARKUPLIST_IDENTI
+000258d0: 4649 4552 220a 2020 2020 2020 2020 2320  FIER".        # 
+000258e0: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+000258f0: 6528 2766 756c 6c5f 6d61 726b 7570 5f6c  e('full_markup_l
+00025900: 6973 7427 2c20 705b 313a 5d29 0a20 2020  ist', p[1:]).   
+00025910: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
+00025920: 0a0a 2020 2020 6465 6620 705f 6675 6c6c  ..    def p_full
+00025930: 5f6d 6172 6b75 705f 6c69 7374 5f5f 4d41  _markup_list__MA
+00025940: 524b 5550 4c49 5354 5f5f 6d61 726b 7570  RKUPLIST__markup
+00025950: 5f6c 6973 7428 7365 6c66 2c20 7029 3a0a  _list(self, p):.
+00025960: 2020 2020 2020 2020 2266 756c 6c5f 6d61          "full_ma
+00025970: 726b 7570 5f6c 6973 7420 3a20 4d41 524b  rkup_list : MARK
+00025980: 5550 4c49 5354 206d 6172 6b75 705f 6c69  UPLIST markup_li
+00025990: 7374 220a 2020 2020 2020 2020 2320 705b  st".        # p[
+000259a0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+000259b0: 2766 756c 6c5f 6d61 726b 7570 5f6c 6973  'full_markup_lis
+000259c0: 7427 2c20 705b 313a 5d29 0a20 2020 2020  t', p[1:]).     
+000259d0: 2020 2070 5b30 5d20 3d20 705b 325d 0a0a     p[0] = p[2]..
+000259e0: 2020 2020 2323 2320 6675 6e63 7469 6f6e      ### function
+000259f0: 5f61 7267 6c69 7374 2023 2323 0a0a 2020  _arglist ###..  
+00025a00: 2020 6465 6620 705f 6675 6e63 7469 6f6e    def p_function
+00025a10: 5f61 7267 6c69 7374 5f5f 6675 6e63 7469  _arglist__functi
+00025a20: 6f6e 5f61 7267 6c69 7374 5f63 6f6d 6d6f  on_arglist_commo
+00025a30: 6e28 7365 6c66 2c20 7029 3a0a 2020 2020  n(self, p):.    
+00025a40: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
+00025a50: 676c 6973 7420 3a20 6675 6e63 7469 6f6e  glist : function
+00025a60: 5f61 7267 6c69 7374 5f63 6f6d 6d6f 6e22  _arglist_common"
+00025a70: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00025a80: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
+00025a90: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00025aa0: 5f5f 6675 6e63 7469 6f6e 5f61 7267 6c69  __function_argli
+00025ab0: 7374 5f6e 6f6e 6261 636b 7570 2873 656c  st_nonbackup(sel
+00025ac0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00025ad0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00025ae0: 203a 2066 756e 6374 696f 6e5f 6172 676c   : function_argl
+00025af0: 6973 745f 6e6f 6e62 6163 6b75 7022 0a20  ist_nonbackup". 
+00025b00: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00025b10: 315d 0a0a 2020 2020 2323 2320 6675 6e63  1]..    ### func
+00025b20: 7469 6f6e 5f61 7267 6c69 7374 5f62 6163  tion_arglist_bac
+00025b30: 6b75 7020 2323 230a 0a20 2020 2064 6566  kup ###..    def
+00025b40: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
+00025b50: 6973 745f 6261 636b 7570 5f5f 4558 5045  ist_backup__EXPE
+00025b60: 4354 5f4f 5054 494f 4e41 4c5f 5f45 5850  CT_OPTIONAL__EXP
+00025b70: 4543 545f 4455 5241 5449 4f4e 5f5f 6675  ECT_DURATION__fu
+00025b80: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
+00025b90: 6c6f 7365 645f 6b65 6570 5f5f 6475 7261  losed_keep__dura
+00025ba0: 7469 6f6e 5f6c 656e 6774 6828 0a20 2020  tion_length(.   
+00025bb0: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
+00025bc0: 2029 3a0a 2020 2020 2020 2020 2266 756e   ):.        "fun
+00025bd0: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
+00025be0: 636b 7570 203a 2045 5850 4543 545f 4f50  ckup : EXPECT_OP
+00025bf0: 5449 4f4e 414c 2045 5850 4543 545f 4455  TIONAL EXPECT_DU
+00025c00: 5241 5449 4f4e 2066 756e 6374 696f 6e5f  RATION function_
+00025c10: 6172 676c 6973 745f 636c 6f73 6564 5f6b  arglist_closed_k
+00025c20: 6565 7020 6475 7261 7469 6f6e 5f6c 656e  eep duration_len
+00025c30: 6774 6822 0a20 2020 2020 2020 2070 5b30  gth".        p[0
+00025c40: 5d20 3d20 705b 335d 202b 205b 705b 345d  ] = p[3] + [p[4]
+00025c50: 5d0a 0a20 2020 2064 6566 2070 5f66 756e  ]..    def p_fun
+00025c60: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
+00025c70: 636b 7570 5f5f 4558 5045 4354 5f4f 5054  ckup__EXPECT_OPT
+00025c80: 494f 4e41 4c5f 5f45 5850 4543 545f 5049  IONAL__EXPECT_PI
+00025c90: 5443 485f 5f66 756e 6374 696f 6e5f 6172  TCH__function_ar
+00025ca0: 676c 6973 745f 6b65 6570 5f5f 7069 7463  glist_keep__pitc
+00025cb0: 685f 616c 736f 5f69 6e5f 6368 6f72 6473  h_also_in_chords
+00025cc0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00025cd0: 700a 2020 2020 293a 0a20 2020 2020 2020  p.    ):.       
+00025ce0: 2022 6675 6e63 7469 6f6e 5f61 7267 6c69   "function_argli
+00025cf0: 7374 5f62 6163 6b75 7020 3a20 4558 5045  st_backup : EXPE
+00025d00: 4354 5f4f 5054 494f 4e41 4c20 4558 5045  CT_OPTIONAL EXPE
+00025d10: 4354 5f50 4954 4348 2066 756e 6374 696f  CT_PITCH functio
+00025d20: 6e5f 6172 676c 6973 745f 6b65 6570 2070  n_arglist_keep p
+00025d30: 6974 6368 5f61 6c73 6f5f 696e 5f63 686f  itch_also_in_cho
+00025d40: 7264 7322 0a20 2020 2020 2020 2070 5b30  rds".        p[0
+00025d50: 5d20 3d20 705b 335d 202b 205b 705b 345d  ] = p[3] + [p[4]
+00025d60: 5d0a 0a20 2020 2064 6566 2070 5f66 756e  ]..    def p_fun
+00025d70: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
+00025d80: 636b 7570 5f5f 4558 5045 4354 5f4f 5054  ckup__EXPECT_OPT
+00025d90: 494f 4e41 4c5f 5f45 5850 4543 545f 5343  IONAL__EXPECT_SC
+00025da0: 4d5f 5f66 756e 6374 696f 6e5f 6172 676c  M__function_argl
+00025db0: 6973 745f 6261 636b 7570 5f5f 4241 434b  ist_backup__BACK
+00025dc0: 5550 280a 2020 2020 2020 2020 7365 6c66  UP(.        self
+00025dd0: 2c20 700a 2020 2020 293a 0a20 2020 2020  , p.    ):.     
+00025de0: 2020 2022 6675 6e63 7469 6f6e 5f61 7267     "function_arg
+00025df0: 6c69 7374 5f62 6163 6b75 7020 3a20 4558  list_backup : EX
+00025e00: 5045 4354 5f4f 5054 494f 4e41 4c20 4558  PECT_OPTIONAL EX
+00025e10: 5045 4354 5f53 434d 2066 756e 6374 696f  PECT_SCM functio
+00025e20: 6e5f 6172 676c 6973 745f 6261 636b 7570  n_arglist_backup
+00025e30: 2042 4143 4b55 5022 0a20 2020 2020 2020   BACKUP".       
+00025e40: 2070 5b30 5d20 3d20 705b 335d 202b 205b   p[0] = p[3] + [
+00025e50: 705b 315d 5d0a 2020 2020 2020 2020 7365  p[1]].        se
+00025e60: 6c66 2e63 6c69 656e 742e 5f62 6163 6b75  lf.client._backu
+00025e70: 705f 746f 6b65 6e28 4661 6c73 652c 204e  p_token(False, N
+00025e80: 6f6e 6529 0a0a 2020 2020 6465 6620 705f  one)..    def p_
+00025e90: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00025ea0: 5f62 6163 6b75 705f 5f45 5850 4543 545f  _backup__EXPECT_
+00025eb0: 4f50 5449 4f4e 414c 5f5f 4558 5045 4354  OPTIONAL__EXPECT
+00025ec0: 5f53 434d 5f5f 6675 6e63 7469 6f6e 5f61  _SCM__function_a
+00025ed0: 7267 6c69 7374 5f63 6c6f 7365 645f 6b65  rglist_closed_ke
+00025ee0: 6570 5f5f 4368 7234 355f 5f4e 554d 4245  ep__Chr45__NUMBE
+00025ef0: 525f 4944 454e 5449 4649 4552 280a 2020  R_IDENTIFIER(.  
+00025f00: 2020 2020 2020 7365 6c66 2c20 700a 2020        self, p.  
+00025f10: 2020 293a 0a20 2020 2020 2020 2022 6675    ):.        "fu
+00025f20: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f62  nction_arglist_b
+00025f30: 6163 6b75 7020 3a20 4558 5045 4354 5f4f  ackup : EXPECT_O
+00025f40: 5054 494f 4e41 4c20 4558 5045 4354 5f53  PTIONAL EXPECT_S
+00025f50: 434d 2066 756e 6374 696f 6e5f 6172 676c  CM function_argl
+00025f60: 6973 745f 636c 6f73 6564 5f6b 6565 7020  ist_closed_keep 
+00025f70: 272d 2720 4e55 4d42 4552 5f49 4445 4e54  '-' NUMBER_IDENT
+00025f80: 4946 4945 5222 0a20 2020 2020 2020 206e  IFIER".        n
+00025f90: 203d 202d 3120 2a20 705b 355d 0a20 2020   = -1 * p[5].   
+00025fa0: 2020 2020 2069 6620 7365 6c66 2e63 6c69       if self.cli
+00025fb0: 656e 742e 5f74 6573 745f 7363 6865 6d65  ent._test_scheme
+00025fc0: 5f70 7265 6469 6361 7465 2870 5b32 5d2c  _predicate(p[2],
+00025fd0: 206e 293a 0a20 2020 2020 2020 2020 2020   n):.           
+00025fe0: 2070 5b30 5d20 3d20 705b 335d 202b 205b   p[0] = p[3] + [
+00025ff0: 705b 315d 5d0a 2020 2020 2020 2020 656c  p[1]].        el
+00026000: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00026010: 7365 6c66 2e63 6c69 656e 742e 5f62 6163  self.client._bac
+00026020: 6b75 705f 746f 6b65 6e28 224e 554d 4245  kup_token("NUMBE
+00026030: 525f 4944 454e 5449 4649 4552 222c 206e  R_IDENTIFIER", n
+00026040: 290a 0a20 2020 2064 6566 2070 5f66 756e  )..    def p_fun
+00026050: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
+00026060: 636b 7570 5f5f 4558 5045 4354 5f4f 5054  ckup__EXPECT_OPT
+00026070: 494f 4e41 4c5f 5f45 5850 4543 545f 5343  IONAL__EXPECT_SC
+00026080: 4d5f 5f66 756e 6374 696f 6e5f 6172 676c  M__function_argl
+00026090: 6973 745f 636c 6f73 6564 5f6b 6565 705f  ist_closed_keep_
+000260a0: 5f43 6872 3435 5f5f 5245 414c 280a 2020  _Chr45__REAL(.  
+000260b0: 2020 2020 2020 7365 6c66 2c20 700a 2020        self, p.  
+000260c0: 2020 293a 0a20 2020 2020 2020 2022 6675    ):.        "fu
+000260d0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f62  nction_arglist_b
+000260e0: 6163 6b75 7020 3a20 4558 5045 4354 5f4f  ackup : EXPECT_O
+000260f0: 5054 494f 4e41 4c20 4558 5045 4354 5f53  PTIONAL EXPECT_S
+00026100: 434d 2066 756e 6374 696f 6e5f 6172 676c  CM function_argl
+00026110: 6973 745f 636c 6f73 6564 5f6b 6565 7020  ist_closed_keep 
+00026120: 272d 2720 5245 414c 220a 2020 2020 2020  '-' REAL".      
+00026130: 2020 6e20 3d20 2d31 202a 2070 5b35 5d0a    n = -1 * p[5].
+00026140: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00026150: 636c 6965 6e74 2e5f 7465 7374 5f73 6368  client._test_sch
+00026160: 656d 655f 7072 6564 6963 6174 6528 705b  eme_predicate(p[
+00026170: 325d 2c20 6e29 3a0a 2020 2020 2020 2020  2], n):.        
+00026180: 2020 2020 7365 6c66 2e63 6c69 656e 742e      self.client.
+00026190: 5f72 6570 6172 7365 5f74 6f6b 656e 2870  _reparse_token(p
+000261a0: 5b32 5d2c 2022 5245 414c 222c 206e 290a  [2], "REAL", n).
+000261b0: 2020 2020 2020 2020 2020 2020 705b 305d              p[0]
+000261c0: 203d 2070 5b33 5d0a 2020 2020 2020 2020   = p[3].        
+000261d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000261e0: 2020 7365 6c66 2e63 6c69 656e 742e 5f62    self.client._b
+000261f0: 6163 6b75 705f 746f 6b65 6e28 2252 4541  ackup_token("REA
+00026200: 4c22 2c20 6e29 0a0a 2020 2020 6465 6620  L", n)..    def 
+00026210: 705f 6675 6e63 7469 6f6e 5f61 7267 6c69  p_function_argli
+00026220: 7374 5f62 6163 6b75 705f 5f45 5850 4543  st_backup__EXPEC
+00026230: 545f 4f50 5449 4f4e 414c 5f5f 4558 5045  T_OPTIONAL__EXPE
+00026240: 4354 5f53 434d 5f5f 6675 6e63 7469 6f6e  CT_SCM__function
+00026250: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
+00026260: 6b65 6570 5f5f 4368 7234 355f 5f55 4e53  keep__Chr45__UNS
+00026270: 4947 4e45 4428 0a20 2020 2020 2020 2073  IGNED(.        s
+00026280: 656c 662c 2070 0a20 2020 2029 3a0a 2020  elf, p.    ):.  
+00026290: 2020 2020 2020 2266 756e 6374 696f 6e5f        "function_
+000262a0: 6172 676c 6973 745f 6261 636b 7570 203a  arglist_backup :
+000262b0: 2045 5850 4543 545f 4f50 5449 4f4e 414c   EXPECT_OPTIONAL
+000262c0: 2045 5850 4543 545f 5343 4d20 6675 6e63   EXPECT_SCM func
+000262d0: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
+000262e0: 7365 645f 6b65 6570 2027 2d27 2055 4e53  sed_keep '-' UNS
+000262f0: 4947 4e45 4422 0a20 2020 2020 2020 206e  IGNED".        n
+00026300: 203d 202d 3120 2a20 705b 355d 0a20 2020   = -1 * p[5].   
+00026310: 2020 2020 2069 6620 7365 6c66 2e63 6c69       if self.cli
+00026320: 656e 742e 5f74 6573 745f 7363 6865 6d65  ent._test_scheme
+00026330: 5f70 7265 6469 6361 7465 7328 705b 325d  _predicates(p[2]
+00026340: 2c20 6e29 3a0a 2020 2020 2020 2020 2020  , n):.          
+00026350: 2020 7365 6c66 2e63 6c69 656e 742e 5f72    self.client._r
+00026360: 6570 6172 7365 5f74 6f6b 656e 2870 5b32  eparse_token(p[2
+00026370: 5d2c 2022 5245 414c 222c 206e 290a 2020  ], "REAL", n).  
+00026380: 2020 2020 2020 2020 2020 705b 305d 203d            p[0] =
+00026390: 2070 5b33 5d0a 2020 2020 2020 2020 656c   p[3].        el
+000263a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000263b0: 2320 5468 6973 2077 6f75 6c64 206e 6f72  # This would nor
+000263c0: 6d61 6c6c 7920 6372 6561 7465 2061 2046  mally create a F
+000263d0: 696e 6765 7269 6e67 4576 656e 742c 2061  ingeringEvent, a
+000263e0: 6e64 2074 6573 7420 7468 6174 2061 6761  nd test that aga
+000263f0: 696e 7374 2074 6865 2070 7265 6469 6361  inst the predica
+00026400: 7465 0a20 2020 2020 2020 2020 2020 2073  te.            s
+00026410: 656c 662e 636c 6965 6e74 2e5f 6261 636b  elf.client._back
+00026420: 7570 5f74 6f6b 656e 2822 5245 414c 222c  up_token("REAL",
+00026430: 206e 290a 2020 2020 2020 2020 2020 2020   n).            
+00026440: 705b 305d 203d 2070 5b33 5d20 2b20 5b70  p[0] = p[3] + [p
+00026450: 5b31 5d5d 0a0a 2020 2020 6465 6620 705f  [1]]..    def p_
+00026460: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00026470: 5f62 6163 6b75 705f 5f45 5850 4543 545f  _backup__EXPECT_
+00026480: 4f50 5449 4f4e 414c 5f5f 4558 5045 4354  OPTIONAL__EXPECT
+00026490: 5f53 434d 5f5f 6675 6e63 7469 6f6e 5f61  _SCM__function_a
+000264a0: 7267 6c69 7374 5f63 6c6f 7365 645f 6b65  rglist_closed_ke
+000264b0: 6570 5f5f 4652 4143 5449 4f4e 280a 2020  ep__FRACTION(.  
+000264c0: 2020 2020 2020 7365 6c66 2c20 700a 2020        self, p.  
+000264d0: 2020 293a 0a20 2020 2020 2020 2022 6675    ):.        "fu
+000264e0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f62  nction_arglist_b
+000264f0: 6163 6b75 7020 3a20 4558 5045 4354 5f4f  ackup : EXPECT_O
+00026500: 5054 494f 4e41 4c20 4558 5045 4354 5f53  PTIONAL EXPECT_S
+00026510: 434d 2066 756e 6374 696f 6e5f 6172 676c  CM function_argl
+00026520: 6973 745f 636c 6f73 6564 5f6b 6565 7020  ist_closed_keep 
+00026530: 4652 4143 5449 4f4e 220a 2020 2020 2020  FRACTION".      
+00026540: 2020 6966 2073 656c 662e 636c 6965 6e74    if self.client
+00026550: 2e5f 7465 7374 5f73 6368 656d 655f 7072  ._test_scheme_pr
+00026560: 6564 6963 6174 6528 705b 325d 2c20 705b  edicate(p[2], p[
+00026570: 345d 293a 0a20 2020 2020 2020 2020 2020  4]):.           
+00026580: 2070 5b30 5d20 3d20 705b 335d 202b 205b   p[0] = p[3] + [
+00026590: 705b 345d 5d0a 2020 2020 2020 2020 656c  p[4]].        el
+000265a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000265b0: 705b 305d 203d 2070 5b33 5d20 2b20 5b70  p[0] = p[3] + [p
+000265c0: 5b31 5d5d 0a20 2020 2020 2020 2020 2020  [1]].           
+000265d0: 2073 656c 662e 636c 6965 6e74 2e5f 6261   self.client._ba
+000265e0: 636b 7570 5f74 6f6b 656e 2822 4652 4143  ckup_token("FRAC
+000265f0: 5449 4f4e 222c 2070 5b34 5d29 0a0a 2020  TION", p[4])..  
+00026600: 2020 6465 6620 705f 6675 6e63 7469 6f6e    def p_function
+00026610: 5f61 7267 6c69 7374 5f62 6163 6b75 705f  _arglist_backup_
+00026620: 5f45 5850 4543 545f 4f50 5449 4f4e 414c  _EXPECT_OPTIONAL
+00026630: 5f5f 4558 5045 4354 5f53 434d 5f5f 6675  __EXPECT_SCM__fu
+00026640: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
+00026650: 6c6f 7365 645f 6b65 6570 5f5f 4e55 4d42  losed_keep__NUMB
+00026660: 4552 5f49 4445 4e54 4946 4945 5228 0a20  ER_IDENTIFIER(. 
+00026670: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
+00026680: 2020 2029 3a0a 2020 2020 2020 2020 2266     ):.        "f
+00026690: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+000266a0: 6261 636b 7570 203a 2045 5850 4543 545f  backup : EXPECT_
+000266b0: 4f50 5449 4f4e 414c 2045 5850 4543 545f  OPTIONAL EXPECT_
+000266c0: 5343 4d20 6675 6e63 7469 6f6e 5f61 7267  SCM function_arg
+000266d0: 6c69 7374 5f63 6c6f 7365 645f 6b65 6570  list_closed_keep
+000266e0: 204e 554d 4245 525f 4944 454e 5449 4649   NUMBER_IDENTIFI
+000266f0: 4552 220a 2020 2020 2020 2020 6966 2073  ER".        if s
+00026700: 656c 662e 636c 6965 6e74 2e5f 7465 7374  elf.client._test
+00026710: 5f73 6368 656d 655f 7072 6564 6963 6174  _scheme_predicat
+00026720: 6528 705b 325d 2c20 705b 345d 293a 0a20  e(p[2], p[4]):. 
+00026730: 2020 2020 2020 2020 2020 2070 5b30 5d20             p[0] 
+00026740: 3d20 705b 335d 202b 205b 705b 345d 5d0a  = p[3] + [p[4]].
+00026750: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00026760: 2020 2020 2020 2020 2020 705b 305d 203d            p[0] =
+00026770: 2070 5b33 5d20 2b20 5b70 5b31 5d5d 0a20   p[3] + [p[1]]. 
+00026780: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00026790: 636c 6965 6e74 2e5f 6261 636b 7570 5f74  client._backup_t
+000267a0: 6f6b 656e 2822 4e55 4d42 4552 5f49 4445  oken("NUMBER_IDE
+000267b0: 4e54 4946 4945 5222 2c20 705b 345d 290a  NTIFIER", p[4]).
+000267c0: 0a20 2020 2064 6566 2070 5f66 756e 6374  .    def p_funct
+000267d0: 696f 6e5f 6172 676c 6973 745f 6261 636b  ion_arglist_back
+000267e0: 7570 5f5f 4558 5045 4354 5f4f 5054 494f  up__EXPECT_OPTIO
+000267f0: 4e41 4c5f 5f45 5850 4543 545f 5343 4d5f  NAL__EXPECT_SCM_
+00026800: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
+00026810: 745f 636c 6f73 6564 5f6b 6565 705f 5f52  t_closed_keep__R
+00026820: 4541 4c28 0a20 2020 2020 2020 2073 656c  EAL(.        sel
+00026830: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
+00026840: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
+00026850: 676c 6973 745f 6261 636b 7570 203a 2045  glist_backup : E
+00026860: 5850 4543 545f 4f50 5449 4f4e 414c 2045  XPECT_OPTIONAL E
+00026870: 5850 4543 545f 5343 4d20 6675 6e63 7469  XPECT_SCM functi
+00026880: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
+00026890: 645f 6b65 6570 2052 4541 4c22 0a20 2020  d_keep REAL".   
+000268a0: 2020 2020 2069 6620 7365 6c66 2e63 6c69       if self.cli
+000268b0: 656e 742e 5f74 6573 745f 7363 6865 6d65  ent._test_scheme
+000268c0: 5f70 7265 6469 6361 7465 2870 5b32 5d2c  _predicate(p[2],
+000268d0: 2070 5b34 5d29 3a0a 2020 2020 2020 2020   p[4]):.        
+000268e0: 2020 2020 705b 305d 203d 2070 5b33 5d0a      p[0] = p[3].
+000268f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00026900: 2e63 6c69 656e 742e 5f72 6570 6172 7365  .client._reparse
+00026910: 5f74 6f6b 656e 2870 5b32 5d2c 2022 5245  _token(p[2], "RE
+00026920: 414c 222c 2070 5b34 5d29 0a20 2020 2020  AL", p[4]).     
+00026930: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00026940: 2020 2020 2070 5b30 5d20 3d20 705b 335d       p[0] = p[3]
+00026950: 202b 205b 705b 315d 5d0a 2020 2020 2020   + [p[1]].      
+00026960: 2020 2020 2020 7365 6c66 2e63 6c69 656e        self.clien
+00026970: 742e 5f62 6163 6b75 705f 746f 6b65 6e28  t._backup_token(
+00026980: 2252 4541 4c22 2c20 705b 345d 290a 0a20  "REAL", p[4]).. 
+00026990: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
+000269a0: 6e5f 6172 676c 6973 745f 6261 636b 7570  n_arglist_backup
+000269b0: 5f5f 4558 5045 4354 5f4f 5054 494f 4e41  __EXPECT_OPTIONA
+000269c0: 4c5f 5f45 5850 4543 545f 5343 4d5f 5f66  L__EXPECT_SCM__f
+000269d0: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+000269e0: 636c 6f73 6564 5f6b 6565 705f 5f55 4e53  closed_keep__UNS
+000269f0: 4947 4e45 4428 0a20 2020 2020 2020 2073  IGNED(.        s
+00026a00: 656c 662c 2070 0a20 2020 2029 3a0a 2020  elf, p.    ):.  
+00026a10: 2020 2020 2020 2266 756e 6374 696f 6e5f        "function_
+00026a20: 6172 676c 6973 745f 6261 636b 7570 203a  arglist_backup :
+00026a30: 2045 5850 4543 545f 4f50 5449 4f4e 414c   EXPECT_OPTIONAL
+00026a40: 2045 5850 4543 545f 5343 4d20 6675 6e63   EXPECT_SCM func
+00026a50: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
+00026a60: 7365 645f 6b65 6570 2055 4e53 4947 4e45  sed_keep UNSIGNE
+00026a70: 4422 0a20 2020 2020 2020 2069 6620 7365  D".        if se
+00026a80: 6c66 2e63 6c69 656e 742e 5f74 6573 745f  lf.client._test_
+00026a90: 7363 6865 6d65 5f70 7265 6469 6361 7465  scheme_predicate
+00026aa0: 2870 5b32 5d2c 2070 5b34 5d29 3a0a 2020  (p[2], p[4]):.  
+00026ab0: 2020 2020 2020 2020 2020 705b 305d 203d            p[0] =
+00026ac0: 2070 5b33 5d0a 2020 2020 2020 2020 2020   p[3].          
+00026ad0: 2020 7365 6c66 2e63 6c69 656e 742e 5f72    self.client._r
+00026ae0: 6570 6172 7365 5f74 6f6b 656e 2870 5b32  eparse_token(p[2
+00026af0: 5d2c 2022 554e 5349 474e 4544 222c 2070  ], "UNSIGNED", p
+00026b00: 5b34 5d29 0a20 2020 2020 2020 2065 6c73  [4]).        els
+00026b10: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
+00026b20: 5b30 5d20 3d20 705b 335d 202b 205b 705b  [0] = p[3] + [p[
+00026b30: 315d 5d0a 2020 2020 2020 2020 2020 2020  1]].            
+00026b40: 7365 6c66 2e63 6c69 656e 742e 5f62 6163  self.client._bac
+00026b50: 6b75 705f 746f 6b65 6e28 2255 4e53 4947  kup_token("UNSIG
+00026b60: 4e45 4422 2c20 705b 345d 290a 0a20 2020  NED", p[4])..   
+00026b70: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
+00026b80: 6172 676c 6973 745f 6261 636b 7570 5f5f  arglist_backup__
+00026b90: 4558 5045 4354 5f4f 5054 494f 4e41 4c5f  EXPECT_OPTIONAL_
+00026ba0: 5f45 5850 4543 545f 5343 4d5f 5f66 756e  _EXPECT_SCM__fun
+00026bb0: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
+00026bc0: 6f73 6564 5f6b 6565 705f 5f70 6f73 745f  osed_keep__post_
+00026bd0: 6576 656e 745f 6e6f 6669 6e67 6572 280a  event_nofinger(.
+00026be0: 2020 2020 2020 2020 7365 6c66 2c20 700a          self, p.
+00026bf0: 2020 2020 293a 0a20 2020 2020 2020 2022      ):.        "
+00026c00: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00026c10: 5f62 6163 6b75 7020 3a20 4558 5045 4354  _backup : EXPECT
+00026c20: 5f4f 5054 494f 4e41 4c20 4558 5045 4354  _OPTIONAL EXPECT
+00026c30: 5f53 434d 2066 756e 6374 696f 6e5f 6172  _SCM function_ar
+00026c40: 676c 6973 745f 636c 6f73 6564 5f6b 6565  glist_closed_kee
+00026c50: 7020 706f 7374 5f65 7665 6e74 5f6e 6f66  p post_event_nof
+00026c60: 696e 6765 7222 0a20 2020 2020 2020 2069  inger".        i
+00026c70: 6620 7365 6c66 2e63 6c69 656e 742e 5f74  f self.client._t
+00026c80: 6573 745f 7363 6865 6d65 5f70 7265 6469  est_scheme_predi
+00026c90: 6361 7465 2870 5b32 5d2c 2070 5b34 5d29  cate(p[2], p[4])
+00026ca0: 3a0a 2020 2020 2020 2020 2020 2020 705b  :.            p[
+00026cb0: 305d 203d 2070 5b33 5d20 2b20 5b70 5b34  0] = p[3] + [p[4
+00026cc0: 5d5d 0a20 2020 2020 2020 2065 6c73 653a  ]].        else:
+00026cd0: 0a20 2020 2020 2020 2020 2020 2070 5b30  .            p[0
+00026ce0: 5d20 3d20 705b 335d 202b 205b 705b 315d  ] = p[3] + [p[1]
+00026cf0: 5d0a 2020 2020 2020 2020 2020 2020 7365  ].            se
+00026d00: 6c66 2e63 6c69 656e 742e 5f62 6163 6b75  lf.client._backu
+00026d10: 705f 746f 6b65 6e28 2245 5645 4e54 5f49  p_token("EVENT_I
+00026d20: 4445 4e54 4946 4945 5222 2c20 705b 345d  DENTIFIER", p[4]
+00026d30: 290a 0a20 2020 2064 6566 2070 5f66 756e  )..    def p_fun
+00026d40: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
+00026d50: 636b 7570 5f5f 4558 5045 4354 5f4f 5054  ckup__EXPECT_OPT
+00026d60: 494f 4e41 4c5f 5f45 5850 4543 545f 5343  IONAL__EXPECT_SC
+00026d70: 4d5f 5f66 756e 6374 696f 6e5f 6172 676c  M__function_argl
+00026d80: 6973 745f 6b65 6570 5f5f 656d 6265 6464  ist_keep__embedd
+00026d90: 6564 5f73 636d 5f61 7267 5f63 6c6f 7365  ed_scm_arg_close
+00026da0: 6428 0a20 2020 2020 2020 2073 656c 662c  d(.        self,
+00026db0: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
+00026dc0: 2020 2266 756e 6374 696f 6e5f 6172 676c    "function_argl
+00026dd0: 6973 745f 6261 636b 7570 203a 2045 5850  ist_backup : EXP
+00026de0: 4543 545f 4f50 5449 4f4e 414c 2045 5850  ECT_OPTIONAL EXP
+00026df0: 4543 545f 5343 4d20 6675 6e63 7469 6f6e  ECT_SCM function
+00026e00: 5f61 7267 6c69 7374 5f6b 6565 7020 656d  _arglist_keep em
+00026e10: 6265 6464 6564 5f73 636d 5f61 7267 5f63  bedded_scm_arg_c
+00026e20: 6c6f 7365 6422 0a20 2020 2020 2020 2069  losed".        i
+00026e30: 6620 7365 6c66 2e63 6c69 656e 742e 5f74  f self.client._t
+00026e40: 6573 745f 7363 6865 6d65 5f70 7265 6469  est_scheme_predi
+00026e50: 6361 7465 2870 5b32 5d2c 2070 5b34 5d29  cate(p[2], p[4])
+00026e60: 3a0a 2020 2020 2020 2020 2020 2020 705b  :.            p[
+00026e70: 305d 203d 2070 5b33 5d20 2b20 5b70 5b34  0] = p[3] + [p[4
+00026e80: 5d5d 0a20 2020 2020 2020 2065 6c73 653a  ]].        else:
+00026e90: 0a20 2020 2020 2020 2020 2020 2070 5b30  .            p[0
+00026ea0: 5d20 3d20 705b 335d 202b 205b 705b 315d  ] = p[3] + [p[1]
+00026eb0: 5d0a 2020 2020 2020 2020 2020 2020 7365  ].            se
+00026ec0: 6c66 2e63 6c69 656e 742e 5f62 6163 6b75  lf.client._backu
+00026ed0: 705f 746f 6b65 6e28 2253 434d 5f49 4445  p_token("SCM_IDE
+00026ee0: 4e54 4946 4945 5222 2c20 705b 345d 290a  NTIFIER", p[4]).
+00026ef0: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
+00026f00: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00026f10: 5f62 6163 6b75 705f 5f45 5850 4543 545f  _backup__EXPECT_
+00026f20: 4f50 5449 4f4e 414c 5f5f 4558 5045 4354  OPTIONAL__EXPECT
+00026f30: 5f53 434d 5f5f 6675 6e63 7469 6f6e 5f61  _SCM__function_a
+00026f40: 7267 6c69 7374 5f6b 6565 705f 5f6c 7972  rglist_keep__lyr
+00026f50: 6963 5f65 6c65 6d65 6e74 2873 656c 662c  ic_element(self,
+00026f60: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+00026f70: 2020 2766 756e 6374 696f 6e5f 6172 676c    'function_argl
+00026f80: 6973 745f 6261 636b 7570 203a 2045 5850  ist_backup : EXP
+00026f90: 4543 545f 4f50 5449 4f4e 414c 2045 5850  ECT_OPTIONAL EXP
+00026fa0: 4543 545f 5343 4d20 6675 6e63 7469 6f6e  ECT_SCM function
+00026fb0: 5f61 7267 6c69 7374 5f6b 6565 7020 6c79  _arglist_keep ly
+00026fc0: 7269 635f 656c 656d 656e 7427 0a20 2020  ric_element'.   
+00026fd0: 2023 2020 2020 2020 2020 6966 2073 656c   #        if sel
+00026fe0: 662e 636c 6965 6e74 2e5f 7465 7374 5f73  f.client._test_s
+00026ff0: 6368 656d 655f 7072 6564 6963 6174 6528  cheme_predicate(
+00027000: 705b 325d 2c20 705b 345d 293a 0a20 2020  p[2], p[4]):.   
+00027010: 2023 2020 2020 2020 2020 2020 2020 705b   #            p[
+00027020: 305d 203d 2070 5b33 5d20 2b20 5b70 5b34  0] = p[3] + [p[4
+00027030: 5d5d 0a20 2020 2023 2020 2020 2020 2020  ]].    #        
+00027040: 656c 7365 3a0a 2020 2020 2320 2020 2020  else:.    #     
+00027050: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00027060: 335d 202b 205b 705b 315d 5d0a 2020 2020  3] + [p[1]].    
+00027070: 2320 2020 2020 2020 2020 2020 2073 656c  #            sel
+00027080: 662e 636c 6965 6e74 2e5f 6261 636b 7570  f.client._backup
+00027090: 5f74 6f6b 656e 2827 4c59 5249 4353 5f53  _token('LYRICS_S
+000270a0: 5452 494e 4727 2c20 705b 345d 290a 0a20  TRING', p[4]).. 
+000270b0: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
+000270c0: 6e5f 6172 676c 6973 745f 6261 636b 7570  n_arglist_backup
+000270d0: 5f5f 6675 6e63 7469 6f6e 5f61 7267 6c69  __function_argli
+000270e0: 7374 5f62 6163 6b75 705f 5f52 4550 4152  st_backup__REPAR
+000270f0: 5345 5f5f 6261 7265 5f6e 756d 6265 7228  SE__bare_number(
+00027100: 0a20 2020 2020 2020 2073 656c 662c 2070  .        self, p
+00027110: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00027120: 2266 756e 6374 696f 6e5f 6172 676c 6973  "function_arglis
+00027130: 745f 6261 636b 7570 203a 2066 756e 6374  t_backup : funct
+00027140: 696f 6e5f 6172 676c 6973 745f 6261 636b  ion_arglist_back
+00027150: 7570 2052 4550 4152 5345 2062 6172 655f  up REPARSE bare_
+00027160: 6e75 6d62 6572 220a 2020 2020 2020 2020  number".        
+00027170: 705b 305d 203d 2073 656c 662e 636c 6965  p[0] = self.clie
+00027180: 6e74 2e5f 6368 6563 6b5f 7363 6865 6d65  nt._check_scheme
+00027190: 5f61 7267 756d 656e 7428 705b 315d 2c20  _argument(p[1], 
+000271a0: 705b 335d 2c20 705b 325d 290a 0a20 2020  p[3], p[2])..   
+000271b0: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
+000271c0: 6172 676c 6973 745f 6261 636b 7570 5f5f  arglist_backup__
+000271d0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+000271e0: 5f62 6163 6b75 705f 5f52 4550 4152 5345  _backup__REPARSE
+000271f0: 5f5f 656d 6265 6464 6564 5f73 636d 5f61  __embedded_scm_a
+00027200: 7267 5f63 6c6f 7365 6428 0a20 2020 2020  rg_closed(.     
+00027210: 2020 2073 656c 662c 2070 0a20 2020 2029     self, p.    )
+00027220: 3a0a 2020 2020 2020 2020 2266 756e 6374  :.        "funct
+00027230: 696f 6e5f 6172 676c 6973 745f 6261 636b  ion_arglist_back
+00027240: 7570 203a 2066 756e 6374 696f 6e5f 6172  up : function_ar
+00027250: 676c 6973 745f 6261 636b 7570 2052 4550  glist_backup REP
+00027260: 4152 5345 2065 6d62 6564 6465 645f 7363  ARSE embedded_sc
+00027270: 6d5f 6172 675f 636c 6f73 6564 220a 2020  m_arg_closed".  
+00027280: 2020 2020 2020 705b 305d 203d 2073 656c        p[0] = sel
+00027290: 662e 636c 6965 6e74 2e5f 6368 6563 6b5f  f.client._check_
+000272a0: 7363 6865 6d65 5f61 7267 756d 656e 7428  scheme_argument(
+000272b0: 705b 315d 2c20 705b 335d 2c20 705b 325d  p[1], p[3], p[2]
+000272c0: 290a 0a20 2020 2064 6566 2070 5f66 756e  )..    def p_fun
+000272d0: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
+000272e0: 636b 7570 5f5f 6675 6e63 7469 6f6e 5f61  ckup__function_a
+000272f0: 7267 6c69 7374 5f62 6163 6b75 705f 5f52  rglist_backup__R
+00027300: 4550 4152 5345 5f5f 6672 6163 7469 6f6e  EPARSE__fraction
+00027310: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+00027320: 2020 2022 6675 6e63 7469 6f6e 5f61 7267     "function_arg
+00027330: 6c69 7374 5f62 6163 6b75 7020 3a20 6675  list_backup : fu
+00027340: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f62  nction_arglist_b
+00027350: 6163 6b75 7020 5245 5041 5253 4520 6672  ackup REPARSE fr
+00027360: 6163 7469 6f6e 220a 2020 2020 2020 2020  action".        
+00027370: 705b 305d 203d 2073 656c 662e 636c 6965  p[0] = self.clie
+00027380: 6e74 2e5f 6368 6563 6b5f 7363 6865 6d65  nt._check_scheme
+00027390: 5f61 7267 756d 656e 7428 705b 315d 2c20  _argument(p[1], 
+000273a0: 705b 335d 2c20 705b 325d 290a 0a20 2020  p[3], p[2])..   
+000273b0: 2023 2323 2066 756e 6374 696f 6e5f 6172   ### function_ar
+000273c0: 676c 6973 745f 6261 7265 2023 2323 0a0a  glist_bare ###..
+000273d0: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
+000273e0: 6f6e 5f61 7267 6c69 7374 5f62 6172 655f  on_arglist_bare_
+000273f0: 5f45 5850 4543 545f 4455 5241 5449 4f4e  _EXPECT_DURATION
+00027400: 5f5f 6675 6e63 7469 6f6e 5f61 7267 6c69  __function_argli
+00027410: 7374 5f63 6c6f 7365 645f 6f70 7469 6f6e  st_closed_option
+00027420: 616c 5f5f 6475 7261 7469 6f6e 5f6c 656e  al__duration_len
+00027430: 6774 6828 0a20 2020 2020 2020 2073 656c  gth(.        sel
+00027440: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
+00027450: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
+00027460: 676c 6973 745f 6261 7265 203a 2045 5850  glist_bare : EXP
+00027470: 4543 545f 4455 5241 5449 4f4e 2066 756e  ECT_DURATION fun
+00027480: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
+00027490: 6f73 6564 5f6f 7074 696f 6e61 6c20 6475  osed_optional du
+000274a0: 7261 7469 6f6e 5f6c 656e 6774 6822 0a20  ration_length". 
+000274b0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+000274c0: 325d 202b 205b 705b 335d 5d0a 0a20 2020  2] + [p[3]]..   
+000274d0: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
+000274e0: 6172 676c 6973 745f 6261 7265 5f5f 4558  arglist_bare__EX
+000274f0: 5045 4354 5f4e 4f5f 4d4f 5245 5f41 5247  PECT_NO_MORE_ARG
+00027500: 5328 7365 6c66 2c20 7029 3a0a 2020 2020  S(self, p):.    
+00027510: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
+00027520: 676c 6973 745f 6261 7265 203a 2045 5850  glist_bare : EXP
+00027530: 4543 545f 4e4f 5f4d 4f52 455f 4152 4753  ECT_NO_MORE_ARGS
+00027540: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
+00027550: 205b 5d0a 0a20 2020 2064 6566 2070 5f66   []..    def p_f
+00027560: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00027570: 6261 7265 5f5f 4558 5045 4354 5f4f 5054  bare__EXPECT_OPT
+00027580: 494f 4e41 4c5f 5f45 5850 4543 545f 4455  IONAL__EXPECT_DU
+00027590: 5241 5449 4f4e 5f5f 6675 6e63 7469 6f6e  RATION__function
+000275a0: 5f61 7267 6c69 7374 5f73 6b69 705f 5f44  _arglist_skip__D
+000275b0: 4546 4155 4c54 280a 2020 2020 2020 2020  EFAULT(.        
+000275c0: 7365 6c66 2c20 700a 2020 2020 293a 0a20  self, p.    ):. 
+000275d0: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
+000275e0: 5f61 7267 6c69 7374 5f62 6172 6520 3a20  _arglist_bare : 
+000275f0: 4558 5045 4354 5f4f 5054 494f 4e41 4c20  EXPECT_OPTIONAL 
+00027600: 4558 5045 4354 5f44 5552 4154 494f 4e20  EXPECT_DURATION 
+00027610: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00027620: 5f73 6b69 7020 4445 4641 554c 5422 0a20  _skip DEFAULT". 
+00027630: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00027640: 335d 202b 205b 705b 315d 5d0a 0a20 2020  3] + [p[1]]..   
+00027650: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
+00027660: 6172 676c 6973 745f 6261 7265 5f5f 4558  arglist_bare__EX
+00027670: 5045 4354 5f4f 5054 494f 4e41 4c5f 5f45  PECT_OPTIONAL__E
+00027680: 5850 4543 545f 5049 5443 485f 5f66 756e  XPECT_PITCH__fun
+00027690: 6374 696f 6e5f 6172 676c 6973 745f 736b  ction_arglist_sk
+000276a0: 6970 5f5f 4445 4641 554c 5428 0a20 2020  ip__DEFAULT(.   
+000276b0: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
+000276c0: 2029 3a0a 2020 2020 2020 2020 2266 756e   ):.        "fun
+000276d0: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
+000276e0: 7265 203a 2045 5850 4543 545f 4f50 5449  re : EXPECT_OPTI
+000276f0: 4f4e 414c 2045 5850 4543 545f 5049 5443  ONAL EXPECT_PITC
+00027700: 4820 6675 6e63 7469 6f6e 5f61 7267 6c69  H function_argli
+00027710: 7374 5f73 6b69 7020 4445 4641 554c 5422  st_skip DEFAULT"
+00027720: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00027730: 705b 335d 202b 205b 705b 315d 5d0a 0a20  p[3] + [p[1]].. 
+00027740: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
+00027750: 6e5f 6172 676c 6973 745f 6261 7265 5f5f  n_arglist_bare__
+00027760: 4558 5045 4354 5f4f 5054 494f 4e41 4c5f  EXPECT_OPTIONAL_
+00027770: 5f45 5850 4543 545f 5343 4d5f 5f66 756e  _EXPECT_SCM__fun
+00027780: 6374 696f 6e5f 6172 676c 6973 745f 736b  ction_arglist_sk
+00027790: 6970 5f5f 4445 4641 554c 5428 0a20 2020  ip__DEFAULT(.   
+000277a0: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
+000277b0: 2029 3a0a 2020 2020 2020 2020 2266 756e   ):.        "fun
+000277c0: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
+000277d0: 7265 203a 2045 5850 4543 545f 4f50 5449  re : EXPECT_OPTI
+000277e0: 4f4e 414c 2045 5850 4543 545f 5343 4d20  ONAL EXPECT_SCM 
+000277f0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00027800: 5f73 6b69 7020 4445 4641 554c 5422 0a20  _skip DEFAULT". 
+00027810: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00027820: 335d 202b 205b 705b 315d 5d0a 0a20 2020  3] + [p[1]]..   
+00027830: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
+00027840: 6172 676c 6973 745f 6261 7265 5f5f 4558  arglist_bare__EX
+00027850: 5045 4354 5f50 4954 4348 5f5f 6675 6e63  PECT_PITCH__func
+00027860: 7469 6f6e 5f61 7267 6c69 7374 5f6f 7074  tion_arglist_opt
+00027870: 696f 6e61 6c5f 5f70 6974 6368 5f61 6c73  ional__pitch_als
+00027880: 6f5f 696e 5f63 686f 7264 7328 0a20 2020  o_in_chords(.   
+00027890: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
+000278a0: 2029 3a0a 2020 2020 2020 2020 2266 756e   ):.        "fun
+000278b0: 6374 696f 6e5f 6172 676c 6973 745f 6261  ction_arglist_ba
+000278c0: 7265 203a 2045 5850 4543 545f 5049 5443  re : EXPECT_PITC
+000278d0: 4820 6675 6e63 7469 6f6e 5f61 7267 6c69  H function_argli
+000278e0: 7374 5f6f 7074 696f 6e61 6c20 7069 7463  st_optional pitc
+000278f0: 685f 616c 736f 5f69 6e5f 6368 6f72 6473  h_also_in_chords
+00027900: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
+00027910: 2070 5b32 5d20 2b20 5b70 5b33 5d5d 0a0a   p[2] + [p[3]]..
+00027920: 2020 2020 2323 2320 6675 6e63 7469 6f6e      ### function
+00027930: 5f61 7267 6c69 7374 5f63 6c6f 7365 6420  _arglist_closed 
+00027940: 2323 230a 0a20 2020 2064 6566 2070 5f66  ###..    def p_f
+00027950: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00027960: 636c 6f73 6564 5f5f 6675 6e63 7469 6f6e  closed__function
+00027970: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
+00027980: 636f 6d6d 6f6e 2873 656c 662c 2070 293a  common(self, p):
+00027990: 0a20 2020 2020 2020 2022 6675 6e63 7469  .        "functi
+000279a0: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
+000279b0: 6420 3a20 6675 6e63 7469 6f6e 5f61 7267  d : function_arg
+000279c0: 6c69 7374 5f63 6c6f 7365 645f 636f 6d6d  list_closed_comm
+000279d0: 6f6e 220a 2020 2020 2020 2020 705b 305d  on".        p[0]
+000279e0: 203d 2070 5b31 5d0a 0a20 2020 2064 6566   = p[1]..    def
+000279f0: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
+00027a00: 6973 745f 636c 6f73 6564 5f5f 6675 6e63  ist_closed__func
+00027a10: 7469 6f6e 5f61 7267 6c69 7374 5f6e 6f6e  tion_arglist_non
+00027a20: 6261 636b 7570 2873 656c 662c 2070 293a  backup(self, p):
+00027a30: 0a20 2020 2020 2020 2022 6675 6e63 7469  .        "functi
+00027a40: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
+00027a50: 6420 3a20 6675 6e63 7469 6f6e 5f61 7267  d : function_arg
+00027a60: 6c69 7374 5f6e 6f6e 6261 636b 7570 220a  list_nonbackup".
+00027a70: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+00027a80: 5b31 5d0a 0a20 2020 2023 2323 2066 756e  [1]..    ### fun
+00027a90: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
+00027aa0: 6f73 6564 5f63 6f6d 6d6f 6e20 2323 230a  osed_common ###.
+00027ab0: 0a20 2020 2064 6566 2070 5f66 756e 6374  .    def p_funct
+00027ac0: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
+00027ad0: 6564 5f63 6f6d 6d6f 6e5f 5f45 5850 4543  ed_common__EXPEC
+00027ae0: 545f 5343 4d5f 5f66 756e 6374 696f 6e5f  T_SCM__function_
+00027af0: 6172 676c 6973 745f 636c 6f73 6564 5f6f  arglist_closed_o
+00027b00: 7074 696f 6e61 6c5f 5f43 6872 3435 5f5f  ptional__Chr45__
+00027b10: 4e55 4d42 4552 5f49 4445 4e54 4946 4945  NUMBER_IDENTIFIE
+00027b20: 5228 0a20 2020 2020 2020 2073 656c 662c  R(.        self,
+00027b30: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
+00027b40: 2020 2266 756e 6374 696f 6e5f 6172 676c    "function_argl
+00027b50: 6973 745f 636c 6f73 6564 5f63 6f6d 6d6f  ist_closed_commo
+00027b60: 6e20 3a20 4558 5045 4354 5f53 434d 2066  n : EXPECT_SCM f
+00027b70: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00027b80: 636c 6f73 6564 5f6f 7074 696f 6e61 6c20  closed_optional 
+00027b90: 272d 2720 4e55 4d42 4552 5f49 4445 4e54  '-' NUMBER_IDENT
+00027ba0: 4946 4945 5222 0a20 2020 2020 2020 2070  IFIER".        p
+00027bb0: 5b30 5d20 3d20 705b 325d 202b 205b 2d31  [0] = p[2] + [-1
+00027bc0: 202a 2070 5b34 5d5d 0a0a 2020 2020 6465   * p[4]]..    de
+00027bd0: 6620 705f 6675 6e63 7469 6f6e 5f61 7267  f p_function_arg
+00027be0: 6c69 7374 5f63 6c6f 7365 645f 636f 6d6d  list_closed_comm
+00027bf0: 6f6e 5f5f 4558 5045 4354 5f53 434d 5f5f  on__EXPECT_SCM__
+00027c00: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00027c10: 5f63 6c6f 7365 645f 6f70 7469 6f6e 616c  _closed_optional
+00027c20: 5f5f 4368 7234 355f 5f52 4541 4c28 0a20  __Chr45__REAL(. 
+00027c30: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
+00027c40: 2020 2029 3a0a 2020 2020 2020 2020 2266     ):.        "f
+00027c50: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00027c60: 636c 6f73 6564 5f63 6f6d 6d6f 6e20 3a20  closed_common : 
+00027c70: 4558 5045 4354 5f53 434d 2066 756e 6374  EXPECT_SCM funct
+00027c80: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
+00027c90: 6564 5f6f 7074 696f 6e61 6c20 272d 2720  ed_optional '-' 
+00027ca0: 5245 414c 220a 2020 2020 2020 2020 705b  REAL".        p[
+00027cb0: 305d 203d 2070 5b32 5d20 2b20 5b2d 3120  0] = p[2] + [-1 
+00027cc0: 2a20 705b 345d 5d0a 0a20 2020 2064 6566  * p[4]]..    def
+00027cd0: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
+00027ce0: 6973 745f 636c 6f73 6564 5f63 6f6d 6d6f  ist_closed_commo
+00027cf0: 6e5f 5f45 5850 4543 545f 5343 4d5f 5f66  n__EXPECT_SCM__f
+00027d00: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00027d10: 636c 6f73 6564 5f6f 7074 696f 6e61 6c5f  closed_optional_
+00027d20: 5f43 6872 3435 5f5f 554e 5349 474e 4544  _Chr45__UNSIGNED
+00027d30: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00027d40: 700a 2020 2020 293a 0a20 2020 2020 2020  p.    ):.       
+00027d50: 2022 6675 6e63 7469 6f6e 5f61 7267 6c69   "function_argli
+00027d60: 7374 5f63 6c6f 7365 645f 636f 6d6d 6f6e  st_closed_common
+00027d70: 203a 2045 5850 4543 545f 5343 4d20 6675   : EXPECT_SCM fu
+00027d80: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
+00027d90: 6c6f 7365 645f 6f70 7469 6f6e 616c 2027  losed_optional '
+00027da0: 2d27 2055 4e53 4947 4e45 4422 0a20 2020  -' UNSIGNED".   
+00027db0: 2020 2020 2070 5b30 5d20 3d20 705b 325d       p[0] = p[2]
+00027dc0: 202b 205b 2d31 202a 2070 5b34 5d5d 0a0a   + [-1 * p[4]]..
+00027dd0: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
+00027de0: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
+00027df0: 645f 636f 6d6d 6f6e 5f5f 4558 5045 4354  d_common__EXPECT
+00027e00: 5f53 434d 5f5f 6675 6e63 7469 6f6e 5f61  _SCM__function_a
+00027e10: 7267 6c69 7374 5f63 6c6f 7365 645f 6f70  rglist_closed_op
+00027e20: 7469 6f6e 616c 5f5f 6261 7265 5f6e 756d  tional__bare_num
+00027e30: 6265 7228 0a20 2020 2020 2020 2073 656c  ber(.        sel
+00027e40: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
+00027e50: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
+00027e60: 676c 6973 745f 636c 6f73 6564 5f63 6f6d  glist_closed_com
+00027e70: 6d6f 6e20 3a20 4558 5045 4354 5f53 434d  mon : EXPECT_SCM
+00027e80: 2066 756e 6374 696f 6e5f 6172 676c 6973   function_arglis
+00027e90: 745f 636c 6f73 6564 5f6f 7074 696f 6e61  t_closed_optiona
+00027ea0: 6c20 6261 7265 5f6e 756d 6265 7222 0a20  l bare_number". 
+00027eb0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00027ec0: 325d 202b 205b 705b 335d 5d0a 0a20 2020  2] + [p[3]]..   
+00027ed0: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
+00027ee0: 6172 676c 6973 745f 636c 6f73 6564 5f63  arglist_closed_c
+00027ef0: 6f6d 6d6f 6e5f 5f45 5850 4543 545f 5343  ommon__EXPECT_SC
+00027f00: 4d5f 5f66 756e 6374 696f 6e5f 6172 676c  M__function_argl
+00027f10: 6973 745f 636c 6f73 6564 5f6f 7074 696f  ist_closed_optio
+00027f20: 6e61 6c5f 5f66 7261 6374 696f 6e28 0a20  nal__fraction(. 
+00027f30: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
+00027f40: 2020 2029 3a0a 2020 2020 2020 2020 2266     ):.        "f
+00027f50: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00027f60: 636c 6f73 6564 5f63 6f6d 6d6f 6e20 3a20  closed_common : 
+00027f70: 4558 5045 4354 5f53 434d 2066 756e 6374  EXPECT_SCM funct
+00027f80: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
+00027f90: 6564 5f6f 7074 696f 6e61 6c20 6672 6163  ed_optional frac
+00027fa0: 7469 6f6e 220a 2020 2020 2020 2020 705b  tion".        p[
+00027fb0: 305d 203d 2070 5b32 5d20 2b20 5b70 5b33  0] = p[2] + [p[3
+00027fc0: 5d5d 0a0a 2020 2020 6465 6620 705f 6675  ]]..    def p_fu
+00027fd0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
+00027fe0: 6c6f 7365 645f 636f 6d6d 6f6e 5f5f 4558  losed_common__EX
+00027ff0: 5045 4354 5f53 434d 5f5f 6675 6e63 7469  PECT_SCM__functi
+00028000: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
+00028010: 645f 6f70 7469 6f6e 616c 5f5f 706f 7374  d_optional__post
+00028020: 5f65 7665 6e74 5f6e 6f66 696e 6765 7228  _event_nofinger(
+00028030: 0a20 2020 2020 2020 2073 656c 662c 2070  .        self, p
+00028040: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00028050: 2266 756e 6374 696f 6e5f 6172 676c 6973  "function_arglis
+00028060: 745f 636c 6f73 6564 5f63 6f6d 6d6f 6e20  t_closed_common 
+00028070: 3a20 4558 5045 4354 5f53 434d 2066 756e  : EXPECT_SCM fun
+00028080: 6374 696f 6e5f 6172 676c 6973 745f 636c  ction_arglist_cl
+00028090: 6f73 6564 5f6f 7074 696f 6e61 6c20 706f  osed_optional po
+000280a0: 7374 5f65 7665 6e74 5f6e 6f66 696e 6765  st_event_nofinge
+000280b0: 7222 0a20 2020 2020 2020 2070 5b30 5d20  r".        p[0] 
+000280c0: 3d20 705b 325d 202b 205b 705b 335d 5d0a  = p[2] + [p[3]].
+000280d0: 0a20 2020 2064 6566 2070 5f66 756e 6374  .    def p_funct
+000280e0: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
+000280f0: 6564 5f63 6f6d 6d6f 6e5f 5f45 5850 4543  ed_common__EXPEC
+00028100: 545f 5343 4d5f 5f66 756e 6374 696f 6e5f  T_SCM__function_
+00028110: 6172 676c 6973 745f 6f70 7469 6f6e 616c  arglist_optional
+00028120: 5f5f 656d 6265 6464 6564 5f73 636d 5f61  __embedded_scm_a
+00028130: 7267 5f63 6c6f 7365 6428 0a20 2020 2020  rg_closed(.     
+00028140: 2020 2073 656c 662c 2070 0a20 2020 2029     self, p.    )
+00028150: 3a0a 2020 2020 2020 2020 2266 756e 6374  :.        "funct
+00028160: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
+00028170: 6564 5f63 6f6d 6d6f 6e20 3a20 4558 5045  ed_common : EXPE
+00028180: 4354 5f53 434d 2066 756e 6374 696f 6e5f  CT_SCM function_
+00028190: 6172 676c 6973 745f 6f70 7469 6f6e 616c  arglist_optional
+000281a0: 2065 6d62 6564 6465 645f 7363 6d5f 6172   embedded_scm_ar
+000281b0: 675f 636c 6f73 6564 220a 2020 2020 2020  g_closed".      
+000281c0: 2020 705b 305d 203d 2070 5b32 5d20 2b20    p[0] = p[2] + 
+000281d0: 5b70 5b33 5d5d 0a0a 2020 2020 2320 2020  [p[3]]..    #   
+000281e0: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
+000281f0: 6172 676c 6973 745f 636c 6f73 6564 5f63  arglist_closed_c
+00028200: 6f6d 6d6f 6e5f 5f45 5850 4543 545f 5343  ommon__EXPECT_SC
+00028210: 4d5f 5f66 756e 6374 696f 6e5f 6172 676c  M__function_argl
+00028220: 6973 745f 6f70 7469 6f6e 616c 5f5f 6c79  ist_optional__ly
+00028230: 7269 635f 656c 656d 656e 7428 7365 6c66  ric_element(self
+00028240: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
+00028250: 2020 2027 6675 6e63 7469 6f6e 5f61 7267     'function_arg
+00028260: 6c69 7374 5f63 6c6f 7365 645f 636f 6d6d  list_closed_comm
+00028270: 6f6e 203a 2045 5850 4543 545f 5343 4d20  on : EXPECT_SCM 
+00028280: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00028290: 5f6f 7074 696f 6e61 6c20 6c79 7269 635f  _optional lyric_
+000282a0: 656c 656d 656e 7427 0a20 2020 2023 2020  element'.    #  
+000282b0: 2020 2020 2020 705b 305d 203d 2070 5b32        p[0] = p[2
+000282c0: 5d20 2b20 5b70 5b33 5d5d 0a0a 2020 2020  ] + [p[3]]..    
+000282d0: 6465 6620 705f 6675 6e63 7469 6f6e 5f61  def p_function_a
+000282e0: 7267 6c69 7374 5f63 6c6f 7365 645f 636f  rglist_closed_co
+000282f0: 6d6d 6f6e 5f5f 6675 6e63 7469 6f6e 5f61  mmon__function_a
+00028300: 7267 6c69 7374 5f62 6172 6528 7365 6c66  rglist_bare(self
+00028310: 2c20 7029 3a0a 2020 2020 2020 2020 2266  , p):.        "f
+00028320: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00028330: 636c 6f73 6564 5f63 6f6d 6d6f 6e20 3a20  closed_common : 
+00028340: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00028350: 5f62 6172 6522 0a20 2020 2020 2020 2070  _bare".        p
+00028360: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
+00028370: 2323 2320 6675 6e63 7469 6f6e 5f61 7267  ### function_arg
+00028380: 6c69 7374 5f63 6c6f 7365 645f 6b65 6570  list_closed_keep
+00028390: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+000283a0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+000283b0: 5f63 6c6f 7365 645f 6b65 6570 5f5f 6675  _closed_keep__fu
+000283c0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f62  nction_arglist_b
+000283d0: 6163 6b75 7028 7365 6c66 2c20 7029 3a0a  ackup(self, p):.
+000283e0: 2020 2020 2020 2020 2266 756e 6374 696f          "functio
+000283f0: 6e5f 6172 676c 6973 745f 636c 6f73 6564  n_arglist_closed
+00028400: 5f6b 6565 7020 3a20 6675 6e63 7469 6f6e  _keep : function
+00028410: 5f61 7267 6c69 7374 5f62 6163 6b75 7022  _arglist_backup"
+00028420: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00028430: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
+00028440: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00028450: 5f63 6c6f 7365 645f 6b65 6570 5f5f 6675  _closed_keep__fu
+00028460: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
+00028470: 6c6f 7365 645f 636f 6d6d 6f6e 2873 656c  losed_common(sel
+00028480: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00028490: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+000284a0: 5f63 6c6f 7365 645f 6b65 6570 203a 2066  _closed_keep : f
+000284b0: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+000284c0: 636c 6f73 6564 5f63 6f6d 6d6f 6e22 0a20  closed_common". 
+000284d0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+000284e0: 315d 0a0a 2020 2020 2323 2320 6675 6e63  1]..    ### func
+000284f0: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
+00028500: 7365 645f 6f70 7469 6f6e 616c 2023 2323  sed_optional ###
+00028510: 0a0a 2020 2020 6465 6620 705f 6675 6e63  ..    def p_func
+00028520: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
+00028530: 7365 645f 6f70 7469 6f6e 616c 5f5f 4558  sed_optional__EX
+00028540: 5045 4354 5f4f 5054 494f 4e41 4c5f 5f45  PECT_OPTIONAL__E
+00028550: 5850 4543 545f 4455 5241 5449 4f4e 5f5f  XPECT_DURATION__
+00028560: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00028570: 5f63 6c6f 7365 645f 6f70 7469 6f6e 616c  _closed_optional
+00028580: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00028590: 700a 2020 2020 293a 0a20 2020 2020 2020  p.    ):.       
+000285a0: 2022 6675 6e63 7469 6f6e 5f61 7267 6c69   "function_argli
+000285b0: 7374 5f63 6c6f 7365 645f 6f70 7469 6f6e  st_closed_option
+000285c0: 616c 203a 2045 5850 4543 545f 4f50 5449  al : EXPECT_OPTI
+000285d0: 4f4e 414c 2045 5850 4543 545f 4455 5241  ONAL EXPECT_DURA
+000285e0: 5449 4f4e 2066 756e 6374 696f 6e5f 6172  TION function_ar
+000285f0: 676c 6973 745f 636c 6f73 6564 5f6f 7074  glist_closed_opt
+00028600: 696f 6e61 6c22 0a20 2020 2020 2020 2070  ional".        p
+00028610: 5b30 5d20 3d20 705b 335d 202b 205b 705b  [0] = p[3] + [p[
+00028620: 315d 5d0a 0a20 2020 2064 6566 2070 5f66  1]]..    def p_f
+00028630: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00028640: 636c 6f73 6564 5f6f 7074 696f 6e61 6c5f  closed_optional_
+00028650: 5f45 5850 4543 545f 4f50 5449 4f4e 414c  _EXPECT_OPTIONAL
+00028660: 5f5f 4558 5045 4354 5f50 4954 4348 5f5f  __EXPECT_PITCH__
+00028670: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00028680: 5f63 6c6f 7365 645f 6f70 7469 6f6e 616c  _closed_optional
+00028690: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+000286a0: 700a 2020 2020 293a 0a20 2020 2020 2020  p.    ):.       
+000286b0: 2022 6675 6e63 7469 6f6e 5f61 7267 6c69   "function_argli
+000286c0: 7374 5f63 6c6f 7365 645f 6f70 7469 6f6e  st_closed_option
+000286d0: 616c 203a 2045 5850 4543 545f 4f50 5449  al : EXPECT_OPTI
+000286e0: 4f4e 414c 2045 5850 4543 545f 5049 5443  ONAL EXPECT_PITC
+000286f0: 4820 6675 6e63 7469 6f6e 5f61 7267 6c69  H function_argli
+00028700: 7374 5f63 6c6f 7365 645f 6f70 7469 6f6e  st_closed_option
+00028710: 616c 220a 2020 2020 2020 2020 705b 305d  al".        p[0]
+00028720: 203d 2070 5b33 5d20 2b20 5b70 5b31 5d5d   = p[3] + [p[1]]
+00028730: 0a0a 2020 2020 6465 6620 705f 6675 6e63  ..    def p_func
+00028740: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
+00028750: 7365 645f 6f70 7469 6f6e 616c 5f5f 6675  sed_optional__fu
+00028760: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f62  nction_arglist_b
+00028770: 6163 6b75 705f 5f42 4143 4b55 5028 7365  ackup__BACKUP(se
+00028780: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+00028790: 2266 756e 6374 696f 6e5f 6172 676c 6973  "function_arglis
+000287a0: 745f 636c 6f73 6564 5f6f 7074 696f 6e61  t_closed_optiona
+000287b0: 6c20 3a20 6675 6e63 7469 6f6e 5f61 7267  l : function_arg
+000287c0: 6c69 7374 5f62 6163 6b75 7020 4241 434b  list_backup BACK
+000287d0: 5550 220a 2020 2020 2020 2020 705b 305d  UP".        p[0]
+000287e0: 203d 2070 5b31 5d0a 0a20 2020 2064 6566   = p[1]..    def
+000287f0: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
+00028800: 6973 745f 636c 6f73 6564 5f6f 7074 696f  ist_closed_optio
+00028810: 6e61 6c5f 5f66 756e 6374 696f 6e5f 6172  nal__function_ar
+00028820: 676c 6973 745f 636c 6f73 6564 5f6b 6565  glist_closed_kee
+00028830: 7028 7365 6c66 2c20 7029 3a0a 2020 2020  p(self, p):.    
+00028840: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
+00028850: 676c 6973 745f 636c 6f73 6564 5f6f 7074  glist_closed_opt
+00028860: 696f 6e61 6c20 3a20 6675 6e63 7469 6f6e  ional : function
+00028870: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
+00028880: 6b65 6570 2025 7072 6563 2046 554e 4354  keep %prec FUNCT
+00028890: 494f 4e5f 4152 474c 4953 5422 0a20 2020  ION_ARGLIST".   
+000288a0: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
+000288b0: 0a0a 2020 2020 2323 2320 6675 6e63 7469  ..    ### functi
+000288c0: 6f6e 5f61 7267 6c69 7374 5f63 6f6d 6d6f  on_arglist_commo
+000288d0: 6e20 2323 230a 0a20 2020 2064 6566 2070  n ###..    def p
+000288e0: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
+000288f0: 745f 636f 6d6d 6f6e 5f5f 4558 5045 4354  t_common__EXPECT
+00028900: 5f53 434d 5f5f 6675 6e63 7469 6f6e 5f61  _SCM__function_a
+00028910: 7267 6c69 7374 5f63 6c6f 7365 645f 6f70  rglist_closed_op
+00028920: 7469 6f6e 616c 5f5f 6261 7265 5f6e 756d  tional__bare_num
+00028930: 6265 7228 0a20 2020 2020 2020 2073 656c  ber(.        sel
+00028940: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
+00028950: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
+00028960: 676c 6973 745f 636f 6d6d 6f6e 203a 2045  glist_common : E
+00028970: 5850 4543 545f 5343 4d20 6675 6e63 7469  XPECT_SCM functi
+00028980: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
+00028990: 645f 6f70 7469 6f6e 616c 2062 6172 655f  d_optional bare_
+000289a0: 6e75 6d62 6572 220a 2020 2020 2020 2020  number".        
+000289b0: 705b 305d 203d 2070 5b32 5d20 2b20 5b70  p[0] = p[2] + [p
+000289c0: 5b33 5d5d 0a0a 2020 2020 6465 6620 705f  [3]]..    def p_
+000289d0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+000289e0: 5f63 6f6d 6d6f 6e5f 5f45 5850 4543 545f  _common__EXPECT_
+000289f0: 5343 4d5f 5f66 756e 6374 696f 6e5f 6172  SCM__function_ar
+00028a00: 676c 6973 745f 636c 6f73 6564 5f6f 7074  glist_closed_opt
+00028a10: 696f 6e61 6c5f 5f66 7261 6374 696f 6e28  ional__fraction(
+00028a20: 0a20 2020 2020 2020 2073 656c 662c 2070  .        self, p
+00028a30: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00028a40: 2266 756e 6374 696f 6e5f 6172 676c 6973  "function_arglis
+00028a50: 745f 636f 6d6d 6f6e 203a 2045 5850 4543  t_common : EXPEC
+00028a60: 545f 5343 4d20 6675 6e63 7469 6f6e 5f61  T_SCM function_a
+00028a70: 7267 6c69 7374 5f63 6c6f 7365 645f 6f70  rglist_closed_op
+00028a80: 7469 6f6e 616c 2066 7261 6374 696f 6e22  tional fraction"
+00028a90: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00028aa0: 705b 325d 202b 205b 705b 335d 5d0a 0a20  p[2] + [p[3]].. 
+00028ab0: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
+00028ac0: 6e5f 6172 676c 6973 745f 636f 6d6d 6f6e  n_arglist_common
+00028ad0: 5f5f 4558 5045 4354 5f53 434d 5f5f 6675  __EXPECT_SCM__fu
+00028ae0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
+00028af0: 6c6f 7365 645f 6f70 7469 6f6e 616c 5f5f  losed_optional__
+00028b00: 706f 7374 5f65 7665 6e74 5f6e 6f66 696e  post_event_nofin
+00028b10: 6765 7228 0a20 2020 2020 2020 2073 656c  ger(.        sel
+00028b20: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
+00028b30: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
+00028b40: 676c 6973 745f 636f 6d6d 6f6e 203a 2045  glist_common : E
+00028b50: 5850 4543 545f 5343 4d20 6675 6e63 7469  XPECT_SCM functi
+00028b60: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
+00028b70: 645f 6f70 7469 6f6e 616c 2070 6f73 745f  d_optional post_
+00028b80: 6576 656e 745f 6e6f 6669 6e67 6572 220a  event_nofinger".
+00028b90: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+00028ba0: 5b32 5d20 2b20 5b70 5b33 5d5d 0a0a 2020  [2] + [p[3]]..  
+00028bb0: 2020 6465 6620 705f 6675 6e63 7469 6f6e    def p_function
+00028bc0: 5f61 7267 6c69 7374 5f63 6f6d 6d6f 6e5f  _arglist_common_
+00028bd0: 5f45 5850 4543 545f 5343 4d5f 5f66 756e  _EXPECT_SCM__fun
+00028be0: 6374 696f 6e5f 6172 676c 6973 745f 6f70  ction_arglist_op
+00028bf0: 7469 6f6e 616c 5f5f 656d 6265 6464 6564  tional__embedded
+00028c00: 5f73 636d 5f61 7267 280a 2020 2020 2020  _scm_arg(.      
+00028c10: 2020 7365 6c66 2c20 700a 2020 2020 293a    self, p.    ):
+00028c20: 0a20 2020 2020 2020 2022 6675 6e63 7469  .        "functi
+00028c30: 6f6e 5f61 7267 6c69 7374 5f63 6f6d 6d6f  on_arglist_commo
+00028c40: 6e20 3a20 4558 5045 4354 5f53 434d 2066  n : EXPECT_SCM f
+00028c50: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00028c60: 6f70 7469 6f6e 616c 2065 6d62 6564 6465  optional embedde
+00028c70: 645f 7363 6d5f 6172 6722 0a20 2020 2020  d_scm_arg".     
+00028c80: 2020 2070 5b30 5d20 3d20 705b 325d 202b     p[0] = p[2] +
+00028c90: 205b 705b 335d 5d0a 0a20 2020 2064 6566   [p[3]]..    def
+00028ca0: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
+00028cb0: 6973 745f 636f 6d6d 6f6e 5f5f 6675 6e63  ist_common__func
+00028cc0: 7469 6f6e 5f61 7267 6c69 7374 5f62 6172  tion_arglist_bar
+00028cd0: 6528 7365 6c66 2c20 7029 3a0a 2020 2020  e(self, p):.    
+00028ce0: 2020 2020 2266 756e 6374 696f 6e5f 6172      "function_ar
+00028cf0: 676c 6973 745f 636f 6d6d 6f6e 203a 2066  glist_common : f
+00028d00: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00028d10: 6261 7265 220a 2020 2020 2020 2020 705b  bare".        p[
+00028d20: 305d 203d 2070 5b31 5d0a 0a20 2020 2023  0] = p[1]..    #
+00028d30: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
+00028d40: 6f6e 5f61 7267 6c69 7374 5f63 6f6d 6d6f  on_arglist_commo
+00028d50: 6e5f 5f66 756e 6374 696f 6e5f 6172 676c  n__function_argl
+00028d60: 6973 745f 636f 6d6d 6f6e 5f6c 7972 6963  ist_common_lyric
+00028d70: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+00028d80: 2020 2020 2020 2020 2766 756e 6374 696f          'functio
+00028d90: 6e5f 6172 676c 6973 745f 636f 6d6d 6f6e  n_arglist_common
+00028da0: 203a 2066 756e 6374 696f 6e5f 6172 676c   : function_argl
+00028db0: 6973 745f 636f 6d6d 6f6e 5f6c 7972 6963  ist_common_lyric
+00028dc0: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
+00028dd0: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
+00028de0: 6465 6620 705f 6675 6e63 7469 6f6e 5f61  def p_function_a
+00028df0: 7267 6c69 7374 5f63 6f6d 6d6f 6e5f 5f66  rglist_common__f
+00028e00: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00028e10: 636f 6d6d 6f6e 5f6d 696e 7573 2873 656c  common_minus(sel
+00028e20: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00028e30: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00028e40: 5f63 6f6d 6d6f 6e20 3a20 6675 6e63 7469  _common : functi
+00028e50: 6f6e 5f61 7267 6c69 7374 5f63 6f6d 6d6f  on_arglist_commo
+00028e60: 6e5f 6d69 6e75 7322 0a20 2020 2020 2020  n_minus".       
+00028e70: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
+00028e80: 2020 2323 2320 6675 6e63 7469 6f6e 5f61    ### function_a
+00028e90: 7267 6c69 7374 5f63 6f6d 6d6f 6e5f 6c79  rglist_common_ly
+00028ea0: 7269 6320 2323 230a 0a20 2020 2023 2020  ric ###..    #  
+00028eb0: 2020 6465 6620 705f 6675 6e63 7469 6f6e    def p_function
+00028ec0: 5f61 7267 6c69 7374 5f63 6f6d 6d6f 6e5f  _arglist_common_
+00028ed0: 6c79 7269 635f 5f45 5850 4543 545f 5343  lyric__EXPECT_SC
+00028ee0: 4d5f 5f66 756e 6374 696f 6e5f 6172 676c  M__function_argl
+00028ef0: 6973 745f 6f70 7469 6f6e 616c 5f5f 6c79  ist_optional__ly
+00028f00: 7269 635f 656c 656d 656e 7428 7365 6c66  ric_element(self
+00028f10: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
+00028f20: 2020 2027 6675 6e63 7469 6f6e 5f61 7267     'function_arg
+00028f30: 6c69 7374 5f63 6f6d 6d6f 6e5f 6c79 7269  list_common_lyri
+00028f40: 6320 3a20 4558 5045 4354 5f53 434d 2066  c : EXPECT_SCM f
+00028f50: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00028f60: 6f70 7469 6f6e 616c 206c 7972 6963 5f65  optional lyric_e
+00028f70: 6c65 6d65 6e74 270a 2020 2020 2320 2020  lement'.    #   
+00028f80: 2020 2020 2070 5b30 5d20 3d20 705b 325d       p[0] = p[2]
+00028f90: 202b 205b 705b 335d 5d0a 0a20 2020 2023   + [p[3]]..    #
+00028fa0: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
+00028fb0: 6f6e 5f61 7267 6c69 7374 5f63 6f6d 6d6f  on_arglist_commo
+00028fc0: 6e5f 6c79 7269 635f 5f66 756e 6374 696f  n_lyric__functio
+00028fd0: 6e5f 6172 676c 6973 745f 636f 6d6d 6f6e  n_arglist_common
+00028fe0: 5f6c 7972 6963 5f5f 5245 5041 5253 455f  _lyric__REPARSE_
+00028ff0: 5f6c 7972 6963 5f65 6c65 6d65 6e74 5f61  _lyric_element_a
+00029000: 7267 2873 656c 662c 2070 293a 0a20 2020  rg(self, p):.   
+00029010: 2023 2020 2020 2020 2020 2766 756e 6374   #        'funct
+00029020: 696f 6e5f 6172 676c 6973 745f 636f 6d6d  ion_arglist_comm
+00029030: 6f6e 5f6c 7972 6963 203a 2066 756e 6374  on_lyric : funct
+00029040: 696f 6e5f 6172 676c 6973 745f 636f 6d6d  ion_arglist_comm
+00029050: 6f6e 5f6c 7972 6963 2052 4550 4152 5345  on_lyric REPARSE
+00029060: 206c 7972 6963 5f65 6c65 6d65 6e74 5f61   lyric_element_a
+00029070: 7267 270a 2020 2020 2320 2020 2020 2020  rg'.    #       
+00029080: 2070 5b30 5d20 3d20 705b 315d 202b 205b   p[0] = p[1] + [
+00029090: 705b 335d 5d0a 0a20 2020 2023 2323 2066  p[3]]..    ### f
+000290a0: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+000290b0: 636f 6d6d 6f6e 5f6d 696e 7573 2023 2323  common_minus ###
+000290c0: 0a0a 2020 2020 6465 6620 705f 6675 6e63  ..    def p_func
+000290d0: 7469 6f6e 5f61 7267 6c69 7374 5f63 6f6d  tion_arglist_com
+000290e0: 6d6f 6e5f 6d69 6e75 735f 5f45 5850 4543  mon_minus__EXPEC
+000290f0: 545f 5343 4d5f 5f66 756e 6374 696f 6e5f  T_SCM__function_
+00029100: 6172 676c 6973 745f 636c 6f73 6564 5f6f  arglist_closed_o
+00029110: 7074 696f 6e61 6c5f 5f43 6872 3435 5f5f  ptional__Chr45__
+00029120: 4e55 4d42 4552 5f49 4445 4e54 4946 4945  NUMBER_IDENTIFIE
+00029130: 5228 0a20 2020 2020 2020 2073 656c 662c  R(.        self,
+00029140: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
+00029150: 2020 2266 756e 6374 696f 6e5f 6172 676c    "function_argl
+00029160: 6973 745f 636f 6d6d 6f6e 5f6d 696e 7573  ist_common_minus
+00029170: 203a 2045 5850 4543 545f 5343 4d20 6675   : EXPECT_SCM fu
+00029180: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
+00029190: 6c6f 7365 645f 6f70 7469 6f6e 616c 2027  losed_optional '
+000291a0: 2d27 204e 554d 4245 525f 4944 454e 5449  -' NUMBER_IDENTI
+000291b0: 4649 4552 220a 2020 2020 2020 2020 705b  FIER".        p[
+000291c0: 305d 203d 2070 5b32 5d20 2b20 5b2d 3120  0] = p[2] + [-1 
+000291d0: 2a20 705b 345d 5d0a 0a20 2020 2064 6566  * p[4]]..    def
+000291e0: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
+000291f0: 6973 745f 636f 6d6d 6f6e 5f6d 696e 7573  ist_common_minus
+00029200: 5f5f 4558 5045 4354 5f53 434d 5f5f 6675  __EXPECT_SCM__fu
+00029210: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
+00029220: 6c6f 7365 645f 6f70 7469 6f6e 616c 5f5f  losed_optional__
+00029230: 4368 7234 355f 5f52 4541 4c28 0a20 2020  Chr45__REAL(.   
+00029240: 2020 2020 2073 656c 662c 2070 0a20 2020       self, p.   
+00029250: 2029 3a0a 2020 2020 2020 2020 2266 756e   ):.        "fun
+00029260: 6374 696f 6e5f 6172 676c 6973 745f 636f  ction_arglist_co
+00029270: 6d6d 6f6e 5f6d 696e 7573 203a 2045 5850  mmon_minus : EXP
+00029280: 4543 545f 5343 4d20 6675 6e63 7469 6f6e  ECT_SCM function
+00029290: 5f61 7267 6c69 7374 5f63 6c6f 7365 645f  _arglist_closed_
+000292a0: 6f70 7469 6f6e 616c 2027 2d27 2052 4541  optional '-' REA
+000292b0: 4c22 0a20 2020 2020 2020 2070 5b30 5d20  L".        p[0] 
+000292c0: 3d20 705b 325d 202b 205b 2d31 202a 2070  = p[2] + [-1 * p
+000292d0: 5b33 5d5d 0a0a 2020 2020 6465 6620 705f  [3]]..    def p_
+000292e0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+000292f0: 5f63 6f6d 6d6f 6e5f 6d69 6e75 735f 5f45  _common_minus__E
+00029300: 5850 4543 545f 5343 4d5f 5f66 756e 6374  XPECT_SCM__funct
+00029310: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
+00029320: 6564 5f6f 7074 696f 6e61 6c5f 5f43 6872  ed_optional__Chr
+00029330: 3435 5f5f 554e 5349 474e 4544 280a 2020  45__UNSIGNED(.  
+00029340: 2020 2020 2020 7365 6c66 2c20 700a 2020        self, p.  
+00029350: 2020 293a 0a20 2020 2020 2020 2022 6675    ):.        "fu
+00029360: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
+00029370: 6f6d 6d6f 6e5f 6d69 6e75 7320 3a20 4558  ommon_minus : EX
+00029380: 5045 4354 5f53 434d 2066 756e 6374 696f  PECT_SCM functio
+00029390: 6e5f 6172 676c 6973 745f 636c 6f73 6564  n_arglist_closed
+000293a0: 5f6f 7074 696f 6e61 6c20 272d 2720 554e  _optional '-' UN
+000293b0: 5349 474e 4544 220a 2020 2020 2020 2020  SIGNED".        
+000293c0: 705b 305d 203d 2070 5b32 5d20 2b20 5b2d  p[0] = p[2] + [-
+000293d0: 3120 2a20 705b 335d 5d0a 0a20 2020 2064  1 * p[3]]..    d
+000293e0: 6566 2070 5f66 756e 6374 696f 6e5f 6172  ef p_function_ar
+000293f0: 676c 6973 745f 636f 6d6d 6f6e 5f6d 696e  glist_common_min
+00029400: 7573 5f5f 6675 6e63 7469 6f6e 5f61 7267  us__function_arg
+00029410: 6c69 7374 5f63 6f6d 6d6f 6e5f 6d69 6e75  list_common_minu
+00029420: 735f 5f52 4550 4152 5345 5f5f 6261 7265  s__REPARSE__bare
+00029430: 5f6e 756d 6265 7228 0a20 2020 2020 2020  _number(.       
+00029440: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
+00029450: 2020 2020 2020 2020 2266 756e 6374 696f          "functio
+00029460: 6e5f 6172 676c 6973 745f 636f 6d6d 6f6e  n_arglist_common
+00029470: 5f6d 696e 7573 203a 2066 756e 6374 696f  _minus : functio
+00029480: 6e5f 6172 676c 6973 745f 636f 6d6d 6f6e  n_arglist_common
+00029490: 5f6d 696e 7573 2052 4550 4152 5345 2062  _minus REPARSE b
+000294a0: 6172 655f 6e75 6d62 6572 220a 2020 2020  are_number".    
+000294b0: 2020 2020 705b 305d 203d 2070 5b31 5d20      p[0] = p[1] 
+000294c0: 2b20 5b70 5b33 5d5d 0a0a 2020 2020 2323  + [p[3]]..    ##
+000294d0: 2320 6675 6e63 7469 6f6e 5f61 7267 6c69  # function_argli
+000294e0: 7374 5f6b 6565 7020 2323 230a 0a20 2020  st_keep ###..   
+000294f0: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
+00029500: 6172 676c 6973 745f 6b65 6570 5f5f 6675  arglist_keep__fu
+00029510: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f62  nction_arglist_b
+00029520: 6163 6b75 7028 7365 6c66 2c20 7029 3a0a  ackup(self, p):.
+00029530: 2020 2020 2020 2020 2266 756e 6374 696f          "functio
+00029540: 6e5f 6172 676c 6973 745f 6b65 6570 203a  n_arglist_keep :
+00029550: 2066 756e 6374 696f 6e5f 6172 676c 6973   function_arglis
+00029560: 745f 6261 636b 7570 220a 2020 2020 2020  t_backup".      
+00029570: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
+00029580: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
+00029590: 6e5f 6172 676c 6973 745f 6b65 6570 5f5f  n_arglist_keep__
+000295a0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+000295b0: 5f63 6f6d 6d6f 6e28 7365 6c66 2c20 7029  _common(self, p)
+000295c0: 3a0a 2020 2020 2020 2020 2266 756e 6374  :.        "funct
+000295d0: 696f 6e5f 6172 676c 6973 745f 6b65 6570  ion_arglist_keep
+000295e0: 203a 2066 756e 6374 696f 6e5f 6172 676c   : function_argl
+000295f0: 6973 745f 636f 6d6d 6f6e 220a 2020 2020  ist_common".    
+00029600: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
+00029610: 0a20 2020 2023 2323 2066 756e 6374 696f  .    ### functio
+00029620: 6e5f 6172 676c 6973 745f 6e6f 6e62 6163  n_arglist_nonbac
+00029630: 6b75 7020 2323 230a 0a20 2020 2064 6566  kup ###..    def
+00029640: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
+00029650: 6973 745f 6e6f 6e62 6163 6b75 705f 5f45  ist_nonbackup__E
+00029660: 5850 4543 545f 4f50 5449 4f4e 414c 5f5f  XPECT_OPTIONAL__
+00029670: 4558 5045 4354 5f44 5552 4154 494f 4e5f  EXPECT_DURATION_
+00029680: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
+00029690: 745f 636c 6f73 6564 5f5f 6475 7261 7469  t_closed__durati
+000296a0: 6f6e 5f6c 656e 6774 6828 0a20 2020 2020  on_length(.     
+000296b0: 2020 2073 656c 662c 2070 0a20 2020 2029     self, p.    )
+000296c0: 3a0a 2020 2020 2020 2020 2266 756e 6374  :.        "funct
+000296d0: 696f 6e5f 6172 676c 6973 745f 6e6f 6e62  ion_arglist_nonb
+000296e0: 6163 6b75 7020 3a20 4558 5045 4354 5f4f  ackup : EXPECT_O
+000296f0: 5054 494f 4e41 4c20 4558 5045 4354 5f44  PTIONAL EXPECT_D
+00029700: 5552 4154 494f 4e20 6675 6e63 7469 6f6e  URATION function
+00029710: 5f61 7267 6c69 7374 5f63 6c6f 7365 6420  _arglist_closed 
+00029720: 6475 7261 7469 6f6e 5f6c 656e 6774 6822  duration_length"
+00029730: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00029740: 705b 335d 202b 205b 705b 345d 5d0a 0a20  p[3] + [p[4]].. 
+00029750: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
+00029760: 6e5f 6172 676c 6973 745f 6e6f 6e62 6163  n_arglist_nonbac
+00029770: 6b75 705f 5f45 5850 4543 545f 4f50 5449  kup__EXPECT_OPTI
+00029780: 4f4e 414c 5f5f 4558 5045 4354 5f50 4954  ONAL__EXPECT_PIT
+00029790: 4348 5f5f 6675 6e63 7469 6f6e 5f61 7267  CH__function_arg
+000297a0: 6c69 7374 5f5f 7069 7463 685f 616c 736f  list__pitch_also
+000297b0: 5f69 6e5f 6368 6f72 6473 280a 2020 2020  _in_chords(.    
+000297c0: 2020 2020 7365 6c66 2c20 700a 2020 2020      self, p.    
+000297d0: 293a 0a20 2020 2020 2020 2022 6675 6e63  ):.        "func
+000297e0: 7469 6f6e 5f61 7267 6c69 7374 5f6e 6f6e  tion_arglist_non
+000297f0: 6261 636b 7570 203a 2045 5850 4543 545f  backup : EXPECT_
+00029800: 4f50 5449 4f4e 414c 2045 5850 4543 545f  OPTIONAL EXPECT_
+00029810: 5049 5443 4820 6675 6e63 7469 6f6e 5f61  PITCH function_a
+00029820: 7267 6c69 7374 2070 6974 6368 5f61 6c73  rglist pitch_als
+00029830: 6f5f 696e 5f63 686f 7264 7322 0a20 2020  o_in_chords".   
+00029840: 2020 2020 2070 5b30 5d20 3d20 705b 335d       p[0] = p[3]
+00029850: 202b 205b 705b 345d 5d0a 0a20 2020 2064   + [p[4]]..    d
+00029860: 6566 2070 5f66 756e 6374 696f 6e5f 6172  ef p_function_ar
+00029870: 676c 6973 745f 6e6f 6e62 6163 6b75 705f  glist_nonbackup_
+00029880: 5f45 5850 4543 545f 4f50 5449 4f4e 414c  _EXPECT_OPTIONAL
+00029890: 5f5f 4558 5045 4354 5f53 434d 5f5f 6675  __EXPECT_SCM__fu
+000298a0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f5f  nction_arglist__
+000298b0: 656d 6265 6464 6564 5f73 636d 5f61 7267  embedded_scm_arg
+000298c0: 5f63 6c6f 7365 6428 0a20 2020 2020 2020  _closed(.       
+000298d0: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
+000298e0: 2020 2020 2020 2020 2266 756e 6374 696f          "functio
+000298f0: 6e5f 6172 676c 6973 745f 6e6f 6e62 6163  n_arglist_nonbac
+00029900: 6b75 7020 3a20 4558 5045 4354 5f4f 5054  kup : EXPECT_OPT
+00029910: 494f 4e41 4c20 4558 5045 4354 5f53 434d  IONAL EXPECT_SCM
+00029920: 2066 756e 6374 696f 6e5f 6172 676c 6973   function_arglis
+00029930: 7420 656d 6265 6464 6564 5f73 636d 5f61  t embedded_scm_a
+00029940: 7267 5f63 6c6f 7365 6422 0a20 2020 2020  rg_closed".     
+00029950: 2020 2070 5b30 5d20 3d20 705b 335d 202b     p[0] = p[3] +
+00029960: 205b 705b 345d 5d0a 0a20 2020 2064 6566   [p[4]]..    def
+00029970: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
+00029980: 6973 745f 6e6f 6e62 6163 6b75 705f 5f45  ist_nonbackup__E
+00029990: 5850 4543 545f 4f50 5449 4f4e 414c 5f5f  XPECT_OPTIONAL__
+000299a0: 4558 5045 4354 5f53 434d 5f5f 6675 6e63  EXPECT_SCM__func
+000299b0: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
+000299c0: 7365 645f 5f43 6872 3435 5f5f 4e55 4d42  sed__Chr45__NUMB
+000299d0: 4552 5f49 4445 4e54 4946 4945 5228 0a20  ER_IDENTIFIER(. 
+000299e0: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
+000299f0: 2020 2029 3a0a 2020 2020 2020 2020 2266     ):.        "f
+00029a00: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+00029a10: 6e6f 6e62 6163 6b75 7020 3a20 4558 5045  nonbackup : EXPE
+00029a20: 4354 5f4f 5054 494f 4e41 4c20 4558 5045  CT_OPTIONAL EXPE
+00029a30: 4354 5f53 434d 2066 756e 6374 696f 6e5f  CT_SCM function_
+00029a40: 6172 676c 6973 745f 636c 6f73 6564 2027  arglist_closed '
+00029a50: 2d27 204e 554d 4245 525f 4944 454e 5449  -' NUMBER_IDENTI
+00029a60: 4649 4552 220a 2020 2020 2020 2020 705b  FIER".        p[
+00029a70: 305d 203d 2070 5b33 5d20 2b20 5b2d 3120  0] = p[3] + [-1 
+00029a80: 2a20 705b 345d 5d0a 0a20 2020 2064 6566  * p[4]]..    def
+00029a90: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
+00029aa0: 6973 745f 6e6f 6e62 6163 6b75 705f 5f45  ist_nonbackup__E
+00029ab0: 5850 4543 545f 4f50 5449 4f4e 414c 5f5f  XPECT_OPTIONAL__
+00029ac0: 4558 5045 4354 5f53 434d 5f5f 6675 6e63  EXPECT_SCM__func
+00029ad0: 7469 6f6e 5f61 7267 6c69 7374 5f63 6c6f  tion_arglist_clo
+00029ae0: 7365 645f 5f43 6872 3435 5f5f 5245 414c  sed__Chr45__REAL
+00029af0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00029b00: 700a 2020 2020 293a 0a20 2020 2020 2020  p.    ):.       
+00029b10: 2022 6675 6e63 7469 6f6e 5f61 7267 6c69   "function_argli
+00029b20: 7374 5f6e 6f6e 6261 636b 7570 203a 2045  st_nonbackup : E
+00029b30: 5850 4543 545f 4f50 5449 4f4e 414c 2045  XPECT_OPTIONAL E
+00029b40: 5850 4543 545f 5343 4d20 6675 6e63 7469  XPECT_SCM functi
+00029b50: 6f6e 5f61 7267 6c69 7374 5f63 6c6f 7365  on_arglist_close
+00029b60: 6420 272d 2720 5245 414c 220a 2020 2020  d '-' REAL".    
+00029b70: 2020 2020 705b 305d 203d 2070 5b33 5d20      p[0] = p[3] 
+00029b80: 2b20 5b2d 3120 2a20 705b 345d 5d0a 0a20  + [-1 * p[4]].. 
+00029b90: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
+00029ba0: 6e5f 6172 676c 6973 745f 6e6f 6e62 6163  n_arglist_nonbac
+00029bb0: 6b75 705f 5f45 5850 4543 545f 4f50 5449  kup__EXPECT_OPTI
+00029bc0: 4f4e 414c 5f5f 4558 5045 4354 5f53 434d  ONAL__EXPECT_SCM
+00029bd0: 5f5f 6675 6e63 7469 6f6e 5f61 7267 6c69  __function_argli
+00029be0: 7374 5f63 6c6f 7365 645f 5f43 6872 3435  st_closed__Chr45
+00029bf0: 5f5f 554e 5349 474e 4544 280a 2020 2020  __UNSIGNED(.    
+00029c00: 2020 2020 7365 6c66 2c20 700a 2020 2020      self, p.    
+00029c10: 293a 0a20 2020 2020 2020 2022 6675 6e63  ):.        "func
+00029c20: 7469 6f6e 5f61 7267 6c69 7374 5f6e 6f6e  tion_arglist_non
+00029c30: 6261 636b 7570 203a 2045 5850 4543 545f  backup : EXPECT_
+00029c40: 4f50 5449 4f4e 414c 2045 5850 4543 545f  OPTIONAL EXPECT_
+00029c50: 5343 4d20 6675 6e63 7469 6f6e 5f61 7267  SCM function_arg
+00029c60: 6c69 7374 5f63 6c6f 7365 6420 272d 2720  list_closed '-' 
+00029c70: 554e 5349 474e 4544 220a 2020 2020 2020  UNSIGNED".      
+00029c80: 2020 705b 305d 203d 2070 5b33 5d20 2b20    p[0] = p[3] + 
+00029c90: 5b2d 3120 2a20 705b 345d 5d0a 0a20 2020  [-1 * p[4]]..   
+00029ca0: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
+00029cb0: 6172 676c 6973 745f 6e6f 6e62 6163 6b75  arglist_nonbacku
+00029cc0: 705f 5f45 5850 4543 545f 4f50 5449 4f4e  p__EXPECT_OPTION
+00029cd0: 414c 5f5f 4558 5045 4354 5f53 434d 5f5f  AL__EXPECT_SCM__
+00029ce0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00029cf0: 5f63 6c6f 7365 645f 5f46 5241 4354 494f  _closed__FRACTIO
+00029d00: 4e28 0a20 2020 2020 2020 2073 656c 662c  N(.        self,
+00029d10: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
+00029d20: 2020 2266 756e 6374 696f 6e5f 6172 676c    "function_argl
+00029d30: 6973 745f 6e6f 6e62 6163 6b75 7020 3a20  ist_nonbackup : 
+00029d40: 4558 5045 4354 5f4f 5054 494f 4e41 4c20  EXPECT_OPTIONAL 
+00029d50: 4558 5045 4354 5f53 434d 2066 756e 6374  EXPECT_SCM funct
+00029d60: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
+00029d70: 6564 2046 5241 4354 494f 4e22 0a20 2020  ed FRACTION".   
+00029d80: 2020 2020 2070 5b30 5d20 3d20 705b 335d       p[0] = p[3]
+00029d90: 202b 205b 705b 345d 5d0a 0a20 2020 2064   + [p[4]]..    d
+00029da0: 6566 2070 5f66 756e 6374 696f 6e5f 6172  ef p_function_ar
+00029db0: 676c 6973 745f 6e6f 6e62 6163 6b75 705f  glist_nonbackup_
+00029dc0: 5f45 5850 4543 545f 4f50 5449 4f4e 414c  _EXPECT_OPTIONAL
+00029dd0: 5f5f 4558 5045 4354 5f53 434d 5f5f 6675  __EXPECT_SCM__fu
+00029de0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
+00029df0: 6c6f 7365 645f 5f62 6172 655f 6e75 6d62  losed__bare_numb
+00029e00: 6572 5f63 6c6f 7365 6428 0a20 2020 2020  er_closed(.     
+00029e10: 2020 2073 656c 662c 2070 0a20 2020 2029     self, p.    )
+00029e20: 3a0a 2020 2020 2020 2020 2266 756e 6374  :.        "funct
+00029e30: 696f 6e5f 6172 676c 6973 745f 6e6f 6e62  ion_arglist_nonb
+00029e40: 6163 6b75 7020 3a20 4558 5045 4354 5f4f  ackup : EXPECT_O
+00029e50: 5054 494f 4e41 4c20 4558 5045 4354 5f53  PTIONAL EXPECT_S
+00029e60: 434d 2066 756e 6374 696f 6e5f 6172 676c  CM function_argl
+00029e70: 6973 745f 636c 6f73 6564 2062 6172 655f  ist_closed bare_
+00029e80: 6e75 6d62 6572 5f63 6c6f 7365 6422 0a20  number_closed". 
+00029e90: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00029ea0: 335d 202b 205b 705b 345d 5d0a 0a20 2020  3] + [p[4]]..   
+00029eb0: 2064 6566 2070 5f66 756e 6374 696f 6e5f   def p_function_
+00029ec0: 6172 676c 6973 745f 6e6f 6e62 6163 6b75  arglist_nonbacku
+00029ed0: 705f 5f45 5850 4543 545f 4f50 5449 4f4e  p__EXPECT_OPTION
+00029ee0: 414c 5f5f 4558 5045 4354 5f53 434d 5f5f  AL__EXPECT_SCM__
+00029ef0: 6675 6e63 7469 6f6e 5f61 7267 6c69 7374  function_arglist
+00029f00: 5f63 6c6f 7365 645f 5f70 6f73 745f 6576  _closed__post_ev
+00029f10: 656e 745f 6e6f 6669 6e67 6572 280a 2020  ent_nofinger(.  
+00029f20: 2020 2020 2020 7365 6c66 2c20 700a 2020        self, p.  
+00029f30: 2020 293a 0a20 2020 2020 2020 2022 6675    ):.        "fu
+00029f40: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f6e  nction_arglist_n
+00029f50: 6f6e 6261 636b 7570 203a 2045 5850 4543  onbackup : EXPEC
+00029f60: 545f 4f50 5449 4f4e 414c 2045 5850 4543  T_OPTIONAL EXPEC
+00029f70: 545f 5343 4d20 6675 6e63 7469 6f6e 5f61  T_SCM function_a
+00029f80: 7267 6c69 7374 5f63 6c6f 7365 6420 706f  rglist_closed po
+00029f90: 7374 5f65 7665 6e74 5f6e 6f66 696e 6765  st_event_nofinge
+00029fa0: 7222 0a20 2020 2020 2020 2070 5b30 5d20  r".        p[0] 
+00029fb0: 3d20 705b 335d 202b 205b 705b 345d 5d0a  = p[3] + [p[4]].
+00029fc0: 0a20 2020 2023 2323 2066 756e 6374 696f  .    ### functio
+00029fd0: 6e5f 6172 676c 6973 745f 6f70 7469 6f6e  n_arglist_option
+00029fe0: 616c 2023 2323 0a0a 2020 2020 6465 6620  al ###..    def 
+00029ff0: 705f 6675 6e63 7469 6f6e 5f61 7267 6c69  p_function_argli
+0002a000: 7374 5f6f 7074 696f 6e61 6c5f 5f45 5850  st_optional__EXP
+0002a010: 4543 545f 4f50 5449 4f4e 414c 5f5f 4558  ECT_OPTIONAL__EX
+0002a020: 5045 4354 5f44 5552 4154 494f 4e5f 5f66  PECT_DURATION__f
+0002a030: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+0002a040: 6f70 7469 6f6e 616c 280a 2020 2020 2020  optional(.      
+0002a050: 2020 7365 6c66 2c20 700a 2020 2020 293a    self, p.    ):
+0002a060: 0a20 2020 2020 2020 2022 6675 6e63 7469  .        "functi
+0002a070: 6f6e 5f61 7267 6c69 7374 5f6f 7074 696f  on_arglist_optio
+0002a080: 6e61 6c20 3a20 4558 5045 4354 5f4f 5054  nal : EXPECT_OPT
+0002a090: 494f 4e41 4c20 4558 5045 4354 5f44 5552  IONAL EXPECT_DUR
+0002a0a0: 4154 494f 4e20 6675 6e63 7469 6f6e 5f61  ATION function_a
+0002a0b0: 7267 6c69 7374 5f6f 7074 696f 6e61 6c22  rglist_optional"
+0002a0c0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+0002a0d0: 705b 335d 202b 205b 705b 315d 5d0a 0a20  p[3] + [p[1]].. 
+0002a0e0: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
+0002a0f0: 6e5f 6172 676c 6973 745f 6f70 7469 6f6e  n_arglist_option
+0002a100: 616c 5f5f 4558 5045 4354 5f4f 5054 494f  al__EXPECT_OPTIO
+0002a110: 4e41 4c5f 5f45 5850 4543 545f 5049 5443  NAL__EXPECT_PITC
+0002a120: 485f 5f66 756e 6374 696f 6e5f 6172 676c  H__function_argl
+0002a130: 6973 745f 6f70 7469 6f6e 616c 280a 2020  ist_optional(.  
+0002a140: 2020 2020 2020 7365 6c66 2c20 700a 2020        self, p.  
+0002a150: 2020 293a 0a20 2020 2020 2020 2022 6675    ):.        "fu
+0002a160: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f6f  nction_arglist_o
+0002a170: 7074 696f 6e61 6c20 3a20 4558 5045 4354  ptional : EXPECT
+0002a180: 5f4f 5054 494f 4e41 4c20 4558 5045 4354  _OPTIONAL EXPECT
+0002a190: 5f50 4954 4348 2066 756e 6374 696f 6e5f  _PITCH function_
+0002a1a0: 6172 676c 6973 745f 6f70 7469 6f6e 616c  arglist_optional
+0002a1b0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
+0002a1c0: 2070 5b33 5d20 2b20 5b70 5b31 5d5d 0a0a   p[3] + [p[1]]..
+0002a1d0: 2020 2020 6465 6620 705f 6675 6e63 7469      def p_functi
+0002a1e0: 6f6e 5f61 7267 6c69 7374 5f6f 7074 696f  on_arglist_optio
+0002a1f0: 6e61 6c5f 5f66 756e 6374 696f 6e5f 6172  nal__function_ar
+0002a200: 676c 6973 745f 6261 636b 7570 5f5f 4241  glist_backup__BA
+0002a210: 434b 5550 2873 656c 662c 2070 293a 0a20  CKUP(self, p):. 
+0002a220: 2020 2020 2020 2022 6675 6e63 7469 6f6e         "function
+0002a230: 5f61 7267 6c69 7374 5f6f 7074 696f 6e61  _arglist_optiona
+0002a240: 6c20 3a20 6675 6e63 7469 6f6e 5f61 7267  l : function_arg
+0002a250: 6c69 7374 5f62 6163 6b75 7020 4241 434b  list_backup BACK
+0002a260: 5550 220a 2020 2020 2020 2020 705b 305d  UP".        p[0]
+0002a270: 203d 2070 5b31 5d0a 0a20 2020 2064 6566   = p[1]..    def
+0002a280: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
+0002a290: 6973 745f 6f70 7469 6f6e 616c 5f5f 6675  ist_optional__fu
+0002a2a0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f6b  nction_arglist_k
+0002a2b0: 6565 7028 7365 6c66 2c20 7029 3a0a 2020  eep(self, p):.  
+0002a2c0: 2020 2020 2020 2266 756e 6374 696f 6e5f        "function_
+0002a2d0: 6172 676c 6973 745f 6f70 7469 6f6e 616c  arglist_optional
+0002a2e0: 203a 2066 756e 6374 696f 6e5f 6172 676c   : function_argl
+0002a2f0: 6973 745f 6b65 6570 2025 7072 6563 2046  ist_keep %prec F
+0002a300: 554e 4354 494f 4e5f 4152 474c 4953 5422  UNCTION_ARGLIST"
+0002a310: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+0002a320: 705b 315d 0a0a 2020 2020 2323 2320 6675  p[1]..    ### fu
+0002a330: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f73  nction_arglist_s
+0002a340: 6b69 7020 2323 230a 0a20 2020 2064 6566  kip ###..    def
+0002a350: 2070 5f66 756e 6374 696f 6e5f 6172 676c   p_function_argl
+0002a360: 6973 745f 736b 6970 5f5f 4558 5045 4354  ist_skip__EXPECT
+0002a370: 5f4f 5054 494f 4e41 4c5f 5f45 5850 4543  _OPTIONAL__EXPEC
+0002a380: 545f 4455 5241 5449 4f4e 5f5f 6675 6e63  T_DURATION__func
+0002a390: 7469 6f6e 5f61 7267 6c69 7374 5f73 6b69  tion_arglist_ski
+0002a3a0: 7028 0a20 2020 2020 2020 2073 656c 662c  p(.        self,
+0002a3b0: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
+0002a3c0: 2020 2266 756e 6374 696f 6e5f 6172 676c    "function_argl
+0002a3d0: 6973 745f 736b 6970 203a 2045 5850 4543  ist_skip : EXPEC
+0002a3e0: 545f 4f50 5449 4f4e 414c 2045 5850 4543  T_OPTIONAL EXPEC
+0002a3f0: 545f 4455 5241 5449 4f4e 2066 756e 6374  T_DURATION funct
+0002a400: 696f 6e5f 6172 676c 6973 745f 736b 6970  ion_arglist_skip
+0002a410: 2025 7072 6563 2046 554e 4354 494f 4e5f   %prec FUNCTION_
+0002a420: 4152 474c 4953 5422 0a20 2020 2020 2020  ARGLIST".       
+0002a430: 2070 5b30 5d20 3d20 705b 335d 202b 205b   p[0] = p[3] + [
+0002a440: 705b 315d 5d0a 0a20 2020 2064 6566 2070  p[1]]..    def p
+0002a450: 5f66 756e 6374 696f 6e5f 6172 676c 6973  _function_arglis
+0002a460: 745f 736b 6970 5f5f 4558 5045 4354 5f4f  t_skip__EXPECT_O
+0002a470: 5054 494f 4e41 4c5f 5f45 5850 4543 545f  PTIONAL__EXPECT_
+0002a480: 5049 5443 485f 5f66 756e 6374 696f 6e5f  PITCH__function_
+0002a490: 6172 676c 6973 745f 736b 6970 280a 2020  arglist_skip(.  
+0002a4a0: 2020 2020 2020 7365 6c66 2c20 700a 2020        self, p.  
+0002a4b0: 2020 293a 0a20 2020 2020 2020 2022 6675    ):.        "fu
+0002a4c0: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f73  nction_arglist_s
+0002a4d0: 6b69 7020 3a20 4558 5045 4354 5f4f 5054  kip : EXPECT_OPT
+0002a4e0: 494f 4e41 4c20 4558 5045 4354 5f50 4954  IONAL EXPECT_PIT
+0002a4f0: 4348 2066 756e 6374 696f 6e5f 6172 676c  CH function_argl
+0002a500: 6973 745f 736b 6970 2025 7072 6563 2046  ist_skip %prec F
+0002a510: 554e 4354 494f 4e5f 4152 474c 4953 5422  UNCTION_ARGLIST"
+0002a520: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+0002a530: 705b 335d 202b 205b 705b 315d 5d0a 0a20  p[3] + [p[1]].. 
+0002a540: 2020 2064 6566 2070 5f66 756e 6374 696f     def p_functio
+0002a550: 6e5f 6172 676c 6973 745f 736b 6970 5f5f  n_arglist_skip__
+0002a560: 4558 5045 4354 5f4f 5054 494f 4e41 4c5f  EXPECT_OPTIONAL_
+0002a570: 5f45 5850 4543 545f 5343 4d5f 5f66 756e  _EXPECT_SCM__fun
+0002a580: 6374 696f 6e5f 6172 676c 6973 745f 736b  ction_arglist_sk
+0002a590: 6970 280a 2020 2020 2020 2020 7365 6c66  ip(.        self
+0002a5a0: 2c20 700a 2020 2020 293a 0a20 2020 2020  , p.    ):.     
+0002a5b0: 2020 2022 6675 6e63 7469 6f6e 5f61 7267     "function_arg
+0002a5c0: 6c69 7374 5f73 6b69 7020 3a20 4558 5045  list_skip : EXPE
+0002a5d0: 4354 5f4f 5054 494f 4e41 4c20 4558 5045  CT_OPTIONAL EXPE
+0002a5e0: 4354 5f53 434d 2066 756e 6374 696f 6e5f  CT_SCM function_
+0002a5f0: 6172 676c 6973 745f 736b 6970 2025 7072  arglist_skip %pr
+0002a600: 6563 2046 554e 4354 494f 4e5f 4152 474c  ec FUNCTION_ARGL
+0002a610: 4953 5422 0a20 2020 2020 2020 2070 5b30  IST".        p[0
+0002a620: 5d20 3d20 705b 335d 202b 205b 705b 315d  ] = p[3] + [p[1]
+0002a630: 5d0a 0a20 2020 2064 6566 2070 5f66 756e  ]..    def p_fun
+0002a640: 6374 696f 6e5f 6172 676c 6973 745f 736b  ction_arglist_sk
+0002a650: 6970 5f5f 6675 6e63 7469 6f6e 5f61 7267  ip__function_arg
+0002a660: 6c69 7374 5f63 6f6d 6d6f 6e28 7365 6c66  list_common(self
+0002a670: 2c20 7029 3a0a 2020 2020 2020 2020 2266  , p):.        "f
+0002a680: 756e 6374 696f 6e5f 6172 676c 6973 745f  unction_arglist_
+0002a690: 736b 6970 203a 2066 756e 6374 696f 6e5f  skip : function_
+0002a6a0: 6172 676c 6973 745f 636f 6d6d 6f6e 220a  arglist_common".
+0002a6b0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+0002a6c0: 5b31 5d0a 0a20 2020 2023 2323 2067 656e  [1]..    ### gen
+0002a6d0: 5f74 6578 745f 6465 6620 2323 230a 0a20  _text_def ###.. 
+0002a6e0: 2020 2064 6566 2070 5f67 656e 5f74 6578     def p_gen_tex
+0002a6f0: 745f 6465 665f 5f66 756c 6c5f 6d61 726b  t_def__full_mark
+0002a700: 7570 2873 656c 662c 2070 293a 0a20 2020  up(self, p):.   
+0002a710: 2020 2020 2022 6765 6e5f 7465 7874 5f64       "gen_text_d
+0002a720: 6566 203a 2066 756c 6c5f 6d61 726b 7570  ef : full_markup
+0002a730: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
+0002a740: 2070 5b31 5d0a 0a20 2020 2064 6566 2070   p[1]..    def p
+0002a750: 5f67 656e 5f74 6578 745f 6465 665f 5f73  _gen_text_def__s
+0002a760: 696d 706c 655f 7374 7269 6e67 2873 656c  imple_string(sel
+0002a770: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+0002a780: 6765 6e5f 7465 7874 5f64 6566 203a 2073  gen_text_def : s
+0002a790: 696d 706c 655f 7374 7269 6e67 220a 2020  imple_string".  
+0002a7a0: 2020 2020 2020 2320 6173 7365 7274 2069        # assert i
+0002a7b0: 7369 6e73 7461 6e63 6528 705b 315d 2c20  sinstance(p[1], 
+0002a7c0: 7374 7229 2c20 7265 7072 2870 5b31 5d29  str), repr(p[1])
+0002a7d0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+0002a7e0: 5f69 6e64 6963 6174 6f72 732e 4d61 726b  _indicators.Mark
+0002a7f0: 7570 2872 6622 5c6d 6172 6b75 7020 7b7b  up(rf"\markup {{
+0002a800: 207b 705b 315d 7d20 7d7d 2229 0a0a 2020   {p[1]} }}")..  
+0002a810: 2020 2323 2320 6772 6f75 7065 645f 6d75    ### grouped_mu
+0002a820: 7369 635f 6c69 7374 2023 2323 0a0a 2020  sic_list ###..  
+0002a830: 2020 6465 6620 705f 6772 6f75 7065 645f    def p_grouped_
+0002a840: 6d75 7369 635f 6c69 7374 5f5f 7365 7175  music_list__sequ
+0002a850: 656e 7469 616c 5f6d 7573 6963 2873 656c  ential_music(sel
+0002a860: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+0002a870: 6772 6f75 7065 645f 6d75 7369 635f 6c69  grouped_music_li
+0002a880: 7374 203a 2073 6571 7565 6e74 6961 6c5f  st : sequential_
+0002a890: 6d75 7369 6322 0a20 2020 2020 2020 2070  music".        p
+0002a8a0: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
+0002a8b0: 6465 6620 705f 6772 6f75 7065 645f 6d75  def p_grouped_mu
+0002a8c0: 7369 635f 6c69 7374 5f5f 7369 6d75 6c74  sic_list__simult
+0002a8d0: 616e 656f 7573 5f6d 7573 6963 2873 656c  aneous_music(sel
+0002a8e0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+0002a8f0: 6772 6f75 7065 645f 6d75 7369 635f 6c69  grouped_music_li
+0002a900: 7374 203a 2073 696d 756c 7461 6e65 6f75  st : simultaneou
+0002a910: 735f 6d75 7369 6322 0a20 2020 2020 2020  s_music".       
+0002a920: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
+0002a930: 2020 2323 2320 6964 656e 7469 6669 6572    ### identifier
+0002a940: 5f69 6e69 7420 2323 230a 0a20 2020 2023  _init ###..    #
+0002a950: 2020 2020 6465 6620 705f 6964 656e 7469      def p_identi
+0002a960: 6669 6572 5f69 6e69 745f 5f62 6f6f 6b5f  fier_init__book_
+0002a970: 626c 6f63 6b28 7365 6c66 2c20 7029 3a0a  block(self, p):.
+0002a980: 2020 2020 2320 2020 2020 2020 2027 6964      #        'id
+0002a990: 656e 7469 6669 6572 5f69 6e69 7420 3a20  entifier_init : 
+0002a9a0: 626f 6f6b 5f62 6c6f 636b 270a 2020 2020  book_block'.    
+0002a9b0: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+0002a9c0: 5379 6e74 6178 4e6f 6465 2827 626f 6f6b  SyntaxNode('book
+0002a9d0: 5f62 6c6f 636b 272c 2070 5b31 5d29 0a0a  _block', p[1])..
+0002a9e0: 2020 2020 2320 2020 2064 6566 2070 5f69      #    def p_i
+0002a9f0: 6465 6e74 6966 6965 725f 696e 6974 5f5f  dentifier_init__
+0002aa00: 626f 6f6b 7061 7274 5f62 6c6f 636b 2873  bookpart_block(s
+0002aa10: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
+0002aa20: 2020 2020 2020 2769 6465 6e74 6966 6965        'identifie
+0002aa30: 725f 696e 6974 203a 2062 6f6f 6b70 6172  r_init : bookpar
+0002aa40: 745f 626c 6f63 6b27 0a20 2020 2023 2020  t_block'.    #  
+0002aa50: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+0002aa60: 7461 784e 6f64 6528 2762 6f6f 6b70 6172  taxNode('bookpar
+0002aa70: 745f 626c 6f63 6b27 2c20 705b 315d 290a  t_block', p[1]).
+0002aa80: 0a20 2020 2064 6566 2070 5f69 6465 6e74  .    def p_ident
+0002aa90: 6966 6965 725f 696e 6974 5f5f 636f 6e74  ifier_init__cont
+0002aaa0: 6578 745f 6465 665f 7370 6563 5f62 6c6f  ext_def_spec_blo
+0002aab0: 636b 2873 656c 662c 2070 293a 0a20 2020  ck(self, p):.   
+0002aac0: 2020 2020 2022 6964 656e 7469 6669 6572       "identifier
+0002aad0: 5f69 6e69 7420 3a20 636f 6e74 6578 745f  _init : context_
+0002aae0: 6465 665f 7370 6563 5f62 6c6f 636b 220a  def_spec_block".
+0002aaf0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+0002ab00: 796e 7461 784e 6f64 6528 2263 6f6e 7465  yntaxNode("conte
+0002ab10: 7874 5f64 6566 5f73 7065 635f 626c 6f63  xt_def_spec_bloc
+0002ab20: 6b22 2c20 705b 315d 290a 0a20 2020 2064  k", p[1])..    d
+0002ab30: 6566 2070 5f69 6465 6e74 6966 6965 725f  ef p_identifier_
+0002ab40: 696e 6974 5f5f 636f 6e74 6578 745f 6d6f  init__context_mo
+0002ab50: 6469 6669 6361 7469 6f6e 2873 656c 662c  dification(self,
+0002ab60: 2070 293a 0a20 2020 2020 2020 2022 6964   p):.        "id
+0002ab70: 656e 7469 6669 6572 5f69 6e69 7420 3a20  entifier_init : 
+0002ab80: 636f 6e74 6578 745f 6d6f 6469 6669 6361  context_modifica
+0002ab90: 7469 6f6e 220a 2020 2020 2020 2020 705b  tion".        p[
+0002aba0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+0002abb0: 2263 6f6e 7465 7874 5f6d 6f64 6966 6963  "context_modific
+0002abc0: 6174 696f 6e22 2c20 705b 315d 290a 0a20  ation", p[1]).. 
+0002abd0: 2020 2064 6566 2070 5f69 6465 6e74 6966     def p_identif
+0002abe0: 6965 725f 696e 6974 5f5f 656d 6265 6464  ier_init__embedd
+0002abf0: 6564 5f73 636d 2873 656c 662c 2070 293a  ed_scm(self, p):
+0002ac00: 0a20 2020 2020 2020 2022 6964 656e 7469  .        "identi
+0002ac10: 6669 6572 5f69 6e69 7420 3a20 656d 6265  fier_init : embe
+0002ac20: 6464 6564 5f73 636d 220a 2020 2020 2020  dded_scm".      
+0002ac30: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
+0002ac40: 6f64 6528 2265 6d62 6564 6465 645f 7363  ode("embedded_sc
+0002ac50: 6d22 2c20 705b 315d 290a 0a20 2020 2064  m", p[1])..    d
+0002ac60: 6566 2070 5f69 6465 6e74 6966 6965 725f  ef p_identifier_
+0002ac70: 696e 6974 5f5f 6675 6c6c 5f6d 6172 6b75  init__full_marku
+0002ac80: 7028 7365 6c66 2c20 7029 3a0a 2020 2020  p(self, p):.    
+0002ac90: 2020 2020 2269 6465 6e74 6966 6965 725f      "identifier_
+0002aca0: 696e 6974 203a 2066 756c 6c5f 6d61 726b  init : full_mark
+0002acb0: 7570 220a 2020 2020 2020 2020 705b 305d  up".        p[0]
+0002acc0: 203d 2053 796e 7461 784e 6f64 6528 2266   = SyntaxNode("f
+0002acd0: 756c 6c5f 6d61 726b 7570 222c 2070 5b31  ull_markup", p[1
+0002ace0: 5d29 0a0a 2020 2020 6465 6620 705f 6964  ])..    def p_id
+0002acf0: 656e 7469 6669 6572 5f69 6e69 745f 5f66  entifier_init__f
+0002ad00: 756c 6c5f 6d61 726b 7570 5f6c 6973 7428  ull_markup_list(
+0002ad10: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+0002ad20: 2020 2269 6465 6e74 6966 6965 725f 696e    "identifier_in
+0002ad30: 6974 203a 2066 756c 6c5f 6d61 726b 7570  it : full_markup
+0002ad40: 5f6c 6973 7422 0a20 2020 2020 2020 2070  _list".        p
+0002ad50: 5b30 5d20 3d20 5379 6e74 6178 4e6f 6465  [0] = SyntaxNode
+0002ad60: 2822 6675 6c6c 5f6d 6172 6b75 705f 6c69  ("full_markup_li
+0002ad70: 7374 222c 2070 5b31 5d29 0a0a 2020 2020  st", p[1])..    
+0002ad80: 6465 6620 705f 6964 656e 7469 6669 6572  def p_identifier
+0002ad90: 5f69 6e69 745f 5f6d 7573 6963 2873 656c  _init__music(sel
+0002ada0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+0002adb0: 6964 656e 7469 6669 6572 5f69 6e69 7420  identifier_init 
+0002adc0: 3a20 6d75 7369 6322 0a20 2020 2020 2020  : music".       
+0002add0: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
+0002ade0: 6465 2822 6d75 7369 6322 2c20 705b 315d  de("music", p[1]
+0002adf0: 290a 0a20 2020 2064 6566 2070 5f69 6465  )..    def p_ide
+0002ae00: 6e74 6966 6965 725f 696e 6974 5f5f 6e75  ntifier_init__nu
+0002ae10: 6d62 6572 5f65 7870 7265 7373 696f 6e28  mber_expression(
+0002ae20: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+0002ae30: 2020 2269 6465 6e74 6966 6965 725f 696e    "identifier_in
+0002ae40: 6974 203a 206e 756d 6265 725f 6578 7072  it : number_expr
+0002ae50: 6573 7369 6f6e 220a 2020 2020 2020 2020  ession".        
+0002ae60: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+0002ae70: 6528 226e 756d 6265 725f 6578 7072 6573  e("number_expres
+0002ae80: 7369 6f6e 222c 2070 5b31 5d29 0a0a 2020  sion", p[1])..  
+0002ae90: 2020 6465 6620 705f 6964 656e 7469 6669    def p_identifi
+0002aea0: 6572 5f69 6e69 745f 5f6f 7574 7075 745f  er_init__output_
+0002aeb0: 6465 6628 7365 6c66 2c20 7029 3a0a 2020  def(self, p):.  
+0002aec0: 2020 2020 2020 2269 6465 6e74 6966 6965        "identifie
+0002aed0: 725f 696e 6974 203a 206f 7574 7075 745f  r_init : output_
+0002aee0: 6465 6622 0a20 2020 2020 2020 2070 5b30  def".        p[0
+0002aef0: 5d20 3d20 5379 6e74 6178 4e6f 6465 2822  ] = SyntaxNode("
+0002af00: 6f75 7470 7574 5f64 6566 222c 2070 5b31  output_def", p[1
+0002af10: 5d29 0a0a 2020 2020 6465 6620 705f 6964  ])..    def p_id
+0002af20: 656e 7469 6669 6572 5f69 6e69 745f 5f70  entifier_init__p
+0002af30: 6f73 745f 6576 656e 745f 6e6f 6669 6e67  ost_event_nofing
+0002af40: 6572 2873 656c 662c 2070 293a 0a20 2020  er(self, p):.   
+0002af50: 2020 2020 2022 6964 656e 7469 6669 6572       "identifier
+0002af60: 5f69 6e69 7420 3a20 706f 7374 5f65 7665  _init : post_eve
+0002af70: 6e74 5f6e 6f66 696e 6765 7222 0a20 2020  nt_nofinger".   
+0002af80: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
+0002af90: 6178 4e6f 6465 2822 706f 7374 5f65 7665  axNode("post_eve
+0002afa0: 6e74 5f6e 6f66 696e 6765 7222 2c20 705b  nt_nofinger", p[
+0002afb0: 315d 290a 0a20 2020 2064 6566 2070 5f69  1])..    def p_i
+0002afc0: 6465 6e74 6966 6965 725f 696e 6974 5f5f  dentifier_init__
+0002afd0: 7363 6f72 655f 626c 6f63 6b28 7365 6c66  score_block(self
+0002afe0: 2c20 7029 3a0a 2020 2020 2020 2020 2269  , p):.        "i
+0002aff0: 6465 6e74 6966 6965 725f 696e 6974 203a  dentifier_init :
+0002b000: 2073 636f 7265 5f62 6c6f 636b 220a 2020   score_block".  
+0002b010: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+0002b020: 7461 784e 6f64 6528 2273 636f 7265 5f62  taxNode("score_b
+0002b030: 6c6f 636b 222c 2070 5b31 5d29 0a0a 2020  lock", p[1])..  
+0002b040: 2020 6465 6620 705f 6964 656e 7469 6669    def p_identifi
+0002b050: 6572 5f69 6e69 745f 5f73 7472 696e 6728  er_init__string(
+0002b060: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+0002b070: 2020 2269 6465 6e74 6966 6965 725f 696e    "identifier_in
+0002b080: 6974 203a 2073 7472 696e 6722 0a20 2020  it : string".   
+0002b090: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
+0002b0a0: 6178 4e6f 6465 2822 7374 7269 6e67 222c  axNode("string",
+0002b0b0: 2070 5b31 5d29 0a0a 2020 2020 2323 2320   p[1])..    ### 
+0002b0c0: 6c69 6c79 706f 6e64 2023 2323 0a0a 2020  lilypond ###..  
+0002b0d0: 2020 6465 6620 705f 6c69 6c79 706f 6e64    def p_lilypond
+0002b0e0: 5f5f 456d 7074 7928 7365 6c66 2c20 7029  __Empty(self, p)
+0002b0f0: 3a0a 2020 2020 2020 2020 226c 696c 7970  :.        "lilyp
+0002b100: 6f6e 6420 3a22 0a20 2020 2020 2020 2070  ond :".        p
+0002b110: 5b30 5d20 3d20 5b5d 0a0a 2020 2020 2320  [0] = []..    # 
+0002b120: 2020 2064 6566 2070 5f6c 696c 7970 6f6e     def p_lilypon
+0002b130: 645f 5f6c 696c 7970 6f6e 645f 5f49 4e56  d__lilypond__INV
+0002b140: 414c 4944 2873 656c 662c 2070 293a 0a20  ALID(self, p):. 
+0002b150: 2020 2023 2020 2020 2020 2020 276c 696c     #        'lil
+0002b160: 7970 6f6e 6420 3a20 6c69 6c79 706f 6e64  ypond : lilypond
+0002b170: 2049 4e56 414c 4944 270a 2020 2020 2320   INVALID'.    # 
+0002b180: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+0002b190: 315d 0a0a 2020 2020 6465 6620 705f 6c69  1]..    def p_li
+0002b1a0: 6c79 706f 6e64 5f5f 6c69 6c79 706f 6e64  lypond__lilypond
+0002b1b0: 5f5f 6173 7369 676e 6d65 6e74 2873 656c  __assignment(sel
+0002b1c0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+0002b1d0: 6c69 6c79 706f 6e64 203a 206c 696c 7970  lilypond : lilyp
+0002b1e0: 6f6e 6420 6173 7369 676e 6d65 6e74 220a  ond assignment".
+0002b1f0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+0002b200: 5b31 5d0a 2020 2020 2020 2020 6966 2070  [1].        if p
+0002b210: 5b32 5d20 6973 206e 6f74 204e 6f6e 653a  [2] is not None:
+0002b220: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0002b230: 662e 636c 6965 6e74 2e5f 6173 7369 676e  f.client._assign
+0002b240: 5f76 6172 6961 626c 6528 705b 325d 5b30  _variable(p[2][0
+0002b250: 5d2c 2070 5b32 5d5b 315d 290a 0a20 2020  ], p[2][1])..   
+0002b260: 2064 6566 2070 5f6c 696c 7970 6f6e 645f   def p_lilypond_
+0002b270: 5f6c 696c 7970 6f6e 645f 5f65 7272 6f72  _lilypond__error
+0002b280: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+0002b290: 2020 2022 6c69 6c79 706f 6e64 203a 206c     "lilypond : l
+0002b2a0: 696c 7970 6f6e 6420 6572 726f 7222 0a20  ilypond error". 
+0002b2b0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+0002b2c0: 315d 0a0a 2020 2020 6465 6620 705f 6c69  1]..    def p_li
+0002b2d0: 6c79 706f 6e64 5f5f 6c69 6c79 706f 6e64  lypond__lilypond
+0002b2e0: 5f5f 746f 706c 6576 656c 5f65 7870 7265  __toplevel_expre
+0002b2f0: 7373 696f 6e28 7365 6c66 2c20 7029 3a0a  ssion(self, p):.
+0002b300: 2020 2020 2020 2020 226c 696c 7970 6f6e          "lilypon
+0002b310: 6420 3a20 6c69 6c79 706f 6e64 2074 6f70  d : lilypond top
+0002b320: 6c65 7665 6c5f 6578 7072 6573 7369 6f6e  level_expression
+0002b330: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
+0002b340: 2070 5b31 5d20 2b20 5b70 5b32 5d5d 0a0a   p[1] + [p[2]]..
+0002b350: 2020 2020 2323 2320 6c69 6c79 706f 6e64      ### lilypond
+0002b360: 5f68 6561 6465 7220 2323 230a 0a20 2020  _header ###..   
+0002b370: 2064 6566 2070 5f6c 696c 7970 6f6e 645f   def p_lilypond_
+0002b380: 6865 6164 6572 5f5f 4845 4144 4552 5f5f  header__HEADER__
+0002b390: 4368 7231 3233 5f5f 6c69 6c79 706f 6e64  Chr123__lilypond
+0002b3a0: 5f68 6561 6465 725f 626f 6479 5f5f 4368  _header_body__Ch
+0002b3b0: 7231 3235 2873 656c 662c 2070 293a 0a20  r125(self, p):. 
+0002b3c0: 2020 2020 2020 2022 6c69 6c79 706f 6e64         "lilypond
+0002b3d0: 5f68 6561 6465 7220 3a20 4845 4144 4552  _header : HEADER
+0002b3e0: 2027 7b27 206c 696c 7970 6f6e 645f 6865   '{' lilypond_he
+0002b3f0: 6164 6572 5f62 6f64 7920 277d 2722 0a20  ader_body '}'". 
+0002b400: 2020 2020 2020 2073 656c 662e 636c 6965         self.clie
+0002b410: 6e74 2e5f 706f 705f 7661 7269 6162 6c65  nt._pop_variable
+0002b420: 5f73 636f 7065 2829 0a20 2020 2020 2020  _scope().       
+0002b430: 2070 5b30 5d20 3d20 705b 335d 0a0a 2020   p[0] = p[3]..  
+0002b440: 2020 2323 2320 6c69 6c79 706f 6e64 5f68    ### lilypond_h
+0002b450: 6561 6465 725f 626f 6479 2023 2323 0a0a  eader_body ###..
+0002b460: 2020 2020 6465 6620 705f 6c69 6c79 706f      def p_lilypo
+0002b470: 6e64 5f68 6561 6465 725f 626f 6479 5f5f  nd_header_body__
+0002b480: 456d 7074 7928 7365 6c66 2c20 7029 3a0a  Empty(self, p):.
+0002b490: 2020 2020 2020 2020 226c 696c 7970 6f6e          "lilypon
+0002b4a0: 645f 6865 6164 6572 5f62 6f64 7920 3a22  d_header_body :"
+0002b4b0: 0a20 2020 2020 2020 2073 656c 662e 636c  .        self.cl
+0002b4c0: 6965 6e74 2e5f 7075 7368 5f76 6172 6961  ient._push_varia
+0002b4d0: 626c 655f 7363 6f70 6528 290a 2020 2020  ble_scope().    
+0002b4e0: 2020 2020 705b 305d 203d 205f 6c69 6c79      p[0] = _lily
+0002b4f0: 706f 6e64 6669 6c65 2e42 6c6f 636b 286e  pondfile.Block(n
+0002b500: 616d 653d 2268 6561 6465 7222 290a 0a20  ame="header").. 
+0002b510: 2020 2064 6566 2070 5f6c 696c 7970 6f6e     def p_lilypon
+0002b520: 645f 6865 6164 6572 5f62 6f64 795f 5f6c  d_header_body__l
+0002b530: 696c 7970 6f6e 645f 6865 6164 6572 5f62  ilypond_header_b
+0002b540: 6f64 795f 5f61 7373 6967 6e6d 656e 7428  ody__assignment(
+0002b550: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+0002b560: 2020 226c 696c 7970 6f6e 645f 6865 6164    "lilypond_head
+0002b570: 6572 5f62 6f64 7920 3a20 6c69 6c79 706f  er_body : lilypo
+0002b580: 6e64 5f68 6561 6465 725f 626f 6479 2061  nd_header_body a
+0002b590: 7373 6967 6e6d 656e 7422 0a20 2020 2020  ssignment".     
+0002b5a0: 2020 2073 656c 662e 636c 6965 6e74 2e5f     self.client._
+0002b5b0: 6173 7369 676e 5f76 6172 6961 626c 6528  assign_variable(
+0002b5c0: 705b 325d 5b30 5d2c 2070 5b32 5d5b 315d  p[2][0], p[2][1]
+0002b5d0: 290a 2020 2020 2020 2020 7365 7461 7474  ).        setatt
+0002b5e0: 7228 705b 315d 2c20 705b 325d 5b30 5d2c  r(p[1], p[2][0],
+0002b5f0: 2070 5b32 5d5b 315d 2e76 616c 7565 290a   p[2][1].value).
+0002b600: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+0002b610: 5b31 5d0a 0a20 2020 2023 2323 206c 7972  [1]..    ### lyr
+0002b620: 6963 5f65 6c65 6d65 6e74 2023 2323 0a0a  ic_element ###..
+0002b630: 2020 2020 2320 2020 2064 6566 2070 5f6c      #    def p_l
+0002b640: 7972 6963 5f65 6c65 6d65 6e74 5f5f 4c59  yric_element__LY
+0002b650: 5249 4353 5f53 5452 494e 4728 7365 6c66  RICS_STRING(self
+0002b660: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
+0002b670: 2020 2027 6c79 7269 635f 656c 656d 656e     'lyric_elemen
+0002b680: 7420 3a20 4c59 5249 4353 5f53 5452 494e  t : LYRICS_STRIN
+0002b690: 4727 0a20 2020 2023 2020 2020 2020 2020  G'.    #        
+0002b6a0: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+0002b6b0: 6528 276c 7972 6963 5f65 6c65 6d65 6e74  e('lyric_element
+0002b6c0: 272c 2070 5b31 3a5d 290a 0a20 2020 2023  ', p[1:])..    #
+0002b6d0: 2020 2020 6465 6620 705f 6c79 7269 635f      def p_lyric_
+0002b6e0: 656c 656d 656e 745f 5f6c 7972 6963 5f6d  element__lyric_m
+0002b6f0: 6172 6b75 7028 7365 6c66 2c20 7029 3a0a  arkup(self, p):.
+0002b700: 2020 2020 2320 2020 2020 2020 2027 6c79      #        'ly
+0002b710: 7269 635f 656c 656d 656e 7420 3a20 6c79  ric_element : ly
+0002b720: 7269 635f 6d61 726b 7570 270a 2020 2020  ric_markup'.    
+0002b730: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+0002b740: 5379 6e74 6178 4e6f 6465 2827 6c79 7269  SyntaxNode('lyri
+0002b750: 635f 656c 656d 656e 7427 2c20 705b 313a  c_element', p[1:
+0002b760: 5d29 0a0a 2020 2020 2323 2320 6c79 7269  ])..    ### lyri
+0002b770: 635f 656c 656d 656e 745f 6172 6720 2323  c_element_arg ##
+0002b780: 230a 0a20 2020 2023 2020 2020 6465 6620  #..    #    def 
+0002b790: 705f 6c79 7269 635f 656c 656d 656e 745f  p_lyric_element_
+0002b7a0: 6172 675f 5f4c 5952 4943 5f45 4c45 4d45  arg__LYRIC_ELEME
+0002b7b0: 4e54 5f5f 6f70 7469 6f6e 616c 5f6e 6f74  NT__optional_not
+0002b7c0: 656d 6f64 655f 6475 7261 7469 6f6e 5f5f  emode_duration__
+0002b7d0: 706f 7374 5f65 7665 6e74 7328 7365 6c66  post_events(self
+0002b7e0: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
+0002b7f0: 2020 2027 6c79 7269 635f 656c 656d 656e     'lyric_elemen
+0002b800: 745f 6172 6720 3a20 4c59 5249 435f 454c  t_arg : LYRIC_EL
+0002b810: 454d 454e 5420 6f70 7469 6f6e 616c 5f6e  EMENT optional_n
+0002b820: 6f74 656d 6f64 655f 6475 7261 7469 6f6e  otemode_duration
+0002b830: 2070 6f73 745f 6576 656e 7473 270a 2020   post_events'.  
+0002b840: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
+0002b850: 3d20 5379 6e74 6178 4e6f 6465 2827 6c79  = SyntaxNode('ly
+0002b860: 7269 635f 656c 656d 656e 745f 6172 6727  ric_element_arg'
+0002b870: 2c20 705b 313a 5d29 0a0a 2020 2020 2320  , p[1:])..    # 
+0002b880: 2020 2064 6566 2070 5f6c 7972 6963 5f65     def p_lyric_e
+0002b890: 6c65 6d65 6e74 5f61 7267 5f5f 6c79 7269  lement_arg__lyri
+0002b8a0: 635f 656c 656d 656e 7428 7365 6c66 2c20  c_element(self, 
+0002b8b0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+0002b8c0: 2027 6c79 7269 635f 656c 656d 656e 745f   'lyric_element_
+0002b8d0: 6172 6720 3a20 6c79 7269 635f 656c 656d  arg : lyric_elem
+0002b8e0: 656e 7427 0a20 2020 2023 2020 2020 2020  ent'.    #      
+0002b8f0: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
+0002b900: 6f64 6528 276c 7972 6963 5f65 6c65 6d65  ode('lyric_eleme
+0002b910: 6e74 5f61 7267 272c 2070 5b31 3a5d 290a  nt_arg', p[1:]).
+0002b920: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
+0002b930: 6c79 7269 635f 656c 656d 656e 745f 6172  lyric_element_ar
+0002b940: 675f 5f6c 7972 6963 5f65 6c65 6d65 6e74  g__lyric_element
+0002b950: 5f5f 6d75 6c74 6970 6c69 6564 5f64 7572  __multiplied_dur
+0002b960: 6174 696f 6e5f 5f70 6f73 745f 6576 656e  ation__post_even
+0002b970: 7473 2873 656c 662c 2070 293a 0a20 2020  ts(self, p):.   
+0002b980: 2023 2020 2020 2020 2020 276c 7972 6963   #        'lyric
+0002b990: 5f65 6c65 6d65 6e74 5f61 7267 203a 206c  _element_arg : l
+0002b9a0: 7972 6963 5f65 6c65 6d65 6e74 206d 756c  yric_element mul
+0002b9b0: 7469 706c 6965 645f 6475 7261 7469 6f6e  tiplied_duration
+0002b9c0: 2070 6f73 745f 6576 656e 7473 270a 2020   post_events'.  
+0002b9d0: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
+0002b9e0: 3d20 5379 6e74 6178 4e6f 6465 2827 6c79  = SyntaxNode('ly
+0002b9f0: 7269 635f 656c 656d 656e 745f 6172 6727  ric_element_arg'
+0002ba00: 2c20 705b 313a 5d29 0a0a 2020 2020 2320  , p[1:])..    # 
+0002ba10: 2020 2064 6566 2070 5f6c 7972 6963 5f65     def p_lyric_e
+0002ba20: 6c65 6d65 6e74 5f61 7267 5f5f 6c79 7269  lement_arg__lyri
+0002ba30: 635f 656c 656d 656e 745f 5f70 6f73 745f  c_element__post_
+0002ba40: 6576 656e 745f 5f70 6f73 745f 6576 656e  event__post_even
+0002ba50: 7473 2873 656c 662c 2070 293a 0a20 2020  ts(self, p):.   
+0002ba60: 2023 2020 2020 2020 2020 276c 7972 6963   #        'lyric
+0002ba70: 5f65 6c65 6d65 6e74 5f61 7267 203a 206c  _element_arg : l
+0002ba80: 7972 6963 5f65 6c65 6d65 6e74 2070 6f73  yric_element pos
+0002ba90: 745f 6576 656e 7420 706f 7374 5f65 7665  t_event post_eve
+0002baa0: 6e74 7327 0a20 2020 2023 2020 2020 2020  nts'.    #      
+0002bab0: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
+0002bac0: 6f64 6528 276c 7972 6963 5f65 6c65 6d65  ode('lyric_eleme
+0002bad0: 6e74 5f61 7267 272c 2070 5b31 3a5d 290a  nt_arg', p[1:]).
+0002bae0: 0a20 2020 2023 2323 206c 7972 6963 5f65  .    ### lyric_e
+0002baf0: 6c65 6d65 6e74 5f6d 7573 6963 2023 2323  lement_music ###
+0002bb00: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
+0002bb10: 5f6c 7972 6963 5f65 6c65 6d65 6e74 5f6d  _lyric_element_m
+0002bb20: 7573 6963 5f5f 6c79 7269 635f 656c 656d  usic__lyric_elem
+0002bb30: 656e 745f 5f6f 7074 696f 6e61 6c5f 6e6f  ent__optional_no
+0002bb40: 7465 6d6f 6465 5f64 7572 6174 696f 6e5f  temode_duration_
+0002bb50: 5f70 6f73 745f 6576 656e 7473 2873 656c  _post_events(sel
+0002bb60: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
+0002bb70: 2020 2020 276c 7972 6963 5f65 6c65 6d65      'lyric_eleme
+0002bb80: 6e74 5f6d 7573 6963 203a 206c 7972 6963  nt_music : lyric
+0002bb90: 5f65 6c65 6d65 6e74 206f 7074 696f 6e61  _element optiona
+0002bba0: 6c5f 6e6f 7465 6d6f 6465 5f64 7572 6174  l_notemode_durat
+0002bbb0: 696f 6e20 706f 7374 5f65 7665 6e74 7327  ion post_events'
+0002bbc0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+0002bbd0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+0002bbe0: 276c 7972 6963 5f65 6c65 6d65 6e74 5f6d  'lyric_element_m
+0002bbf0: 7573 6963 272c 2070 5b31 3a5d 290a 0a20  usic', p[1:]).. 
+0002bc00: 2020 2023 2323 206c 7972 6963 5f6d 6172     ### lyric_mar
+0002bc10: 6b75 7020 2323 230a 0a20 2020 2023 2020  kup ###..    #  
+0002bc20: 2020 6465 6620 705f 6c79 7269 635f 6d61    def p_lyric_ma
+0002bc30: 726b 7570 5f5f 4c59 5249 435f 4d41 524b  rkup__LYRIC_MARK
+0002bc40: 5550 5f49 4445 4e54 4946 4945 5228 7365  UP_IDENTIFIER(se
+0002bc50: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+0002bc60: 2020 2020 2027 6c79 7269 635f 6d61 726b       'lyric_mark
+0002bc70: 7570 203a 204c 5952 4943 5f4d 4152 4b55  up : LYRIC_MARKU
+0002bc80: 505f 4944 454e 5449 4649 4552 270a 2020  P_IDENTIFIER'.  
+0002bc90: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
+0002bca0: 3d20 5379 6e74 6178 4e6f 6465 2827 6c79  = SyntaxNode('ly
+0002bcb0: 7269 635f 6d61 726b 7570 272c 2070 5b31  ric_markup', p[1
+0002bcc0: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
+0002bcd0: 6620 705f 6c79 7269 635f 6d61 726b 7570  f p_lyric_markup
+0002bce0: 5f5f 4c59 5249 435f 4d41 524b 5550 5f5f  __LYRIC_MARKUP__
+0002bcf0: 6d61 726b 7570 5f74 6f70 2873 656c 662c  markup_top(self,
+0002bd00: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+0002bd10: 2020 276c 7972 6963 5f6d 6172 6b75 7020    'lyric_markup 
+0002bd20: 3a20 4c59 5249 435f 4d41 524b 5550 206d  : LYRIC_MARKUP m
+0002bd30: 6172 6b75 705f 746f 7027 0a20 2020 2023  arkup_top'.    #
+0002bd40: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+0002bd50: 796e 7461 784e 6f64 6528 276c 7972 6963  yntaxNode('lyric
+0002bd60: 5f6d 6172 6b75 7027 2c20 705b 313a 5d29  _markup', p[1:])
+0002bd70: 0a0a 2020 2020 2323 2320 6d61 726b 7570  ..    ### markup
+0002bd80: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+0002bd90: 6d61 726b 7570 5f5f 6d61 726b 7570 5f68  markup__markup_h
+0002bda0: 6561 645f 315f 6c69 7374 5f5f 7369 6d70  ead_1_list__simp
+0002bdb0: 6c65 5f6d 6172 6b75 7028 7365 6c66 2c20  le_markup(self, 
+0002bdc0: 7029 3a0a 2020 2020 2020 2020 226d 6172  p):.        "mar
+0002bdd0: 6b75 7020 3a20 6d61 726b 7570 5f68 6561  kup : markup_hea
+0002bde0: 645f 315f 6c69 7374 2073 696d 706c 655f  d_1_list simple_
+0002bdf0: 6d61 726b 7570 220a 2020 2020 2020 2020  markup".        
+0002be00: 6d61 726b 7570 203d 2070 5b32 5d0a 2020  markup = p[2].  
+0002be10: 2020 2020 2020 666f 7220 6974 656d 2069        for item i
+0002be20: 6e20 7265 7665 7273 6564 2870 5b31 5d29  n reversed(p[1])
+0002be30: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
+0002be40: 6d6d 616e 6420 3d20 6974 656d 5b30 5d5b  mmand = item[0][
+0002be50: 313a 5d0a 2020 2020 2020 2020 2020 2020  1:].            
+0002be60: 6172 6775 6d65 6e74 7320 3d20 6974 656d  arguments = item
+0002be70: 5b31 3a5d 0a20 2020 2020 2020 2020 2020  [1:].           
+0002be80: 2061 7267 756d 656e 7473 2e61 7070 656e   arguments.appen
+0002be90: 6428 6d61 726b 7570 290a 2020 2020 2020  d(markup).      
+0002bea0: 2020 2020 2020 6d61 726b 7570 203d 204d        markup = M
+0002beb0: 6172 6b75 7043 6f6d 6d61 6e64 2863 6f6d  arkupCommand(com
+0002bec0: 6d61 6e64 2c20 2a61 7267 756d 656e 7473  mand, *arguments
+0002bed0: 290a 2020 2020 2020 2020 705b 305d 203d  ).        p[0] =
+0002bee0: 206d 6172 6b75 700a 0a20 2020 2064 6566   markup..    def
+0002bef0: 2070 5f6d 6172 6b75 705f 5f73 696d 706c   p_markup__simpl
+0002bf00: 655f 6d61 726b 7570 2873 656c 662c 2070  e_markup(self, p
+0002bf10: 293a 0a20 2020 2020 2020 2022 6d61 726b  ):.        "mark
+0002bf20: 7570 203a 2073 696d 706c 655f 6d61 726b  up : simple_mark
+0002bf30: 7570 220a 2020 2020 2020 2020 705b 305d  up".        p[0]
+0002bf40: 203d 2070 5b31 5d0a 0a20 2020 2023 2323   = p[1]..    ###
+0002bf50: 206d 6172 6b75 705f 6272 6163 6564 5f6c   markup_braced_l
+0002bf60: 6973 7420 2323 230a 0a20 2020 2064 6566  ist ###..    def
+0002bf70: 2070 5f6d 6172 6b75 705f 6272 6163 6564   p_markup_braced
+0002bf80: 5f6c 6973 745f 5f43 6872 3132 335f 5f6d  _list__Chr123__m
+0002bf90: 6172 6b75 705f 6272 6163 6564 5f6c 6973  arkup_braced_lis
+0002bfa0: 745f 626f 6479 5f5f 4368 7231 3235 2873  t_body__Chr125(s
+0002bfb0: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+0002bfc0: 2022 6d61 726b 7570 5f62 7261 6365 645f   "markup_braced_
+0002bfd0: 6c69 7374 203a 2027 7b27 206d 6172 6b75  list : '{' marku
+0002bfe0: 705f 6272 6163 6564 5f6c 6973 745f 626f  p_braced_list_bo
+0002bff0: 6479 2027 7d27 220a 2020 2020 2020 2020  dy '}'".        
+0002c000: 705b 305d 203d 2070 5b32 5d0a 0a20 2020  p[0] = p[2]..   
+0002c010: 2023 2323 206d 6172 6b75 705f 6272 6163   ### markup_brac
+0002c020: 6564 5f6c 6973 745f 626f 6479 2023 2323  ed_list_body ###
+0002c030: 0a0a 2020 2020 6465 6620 705f 6d61 726b  ..    def p_mark
+0002c040: 7570 5f62 7261 6365 645f 6c69 7374 5f62  up_braced_list_b
+0002c050: 6f64 795f 5f45 6d70 7479 2873 656c 662c  ody__Empty(self,
+0002c060: 2070 293a 0a20 2020 2020 2020 2022 6d61   p):.        "ma
+0002c070: 726b 7570 5f62 7261 6365 645f 6c69 7374  rkup_braced_list
+0002c080: 5f62 6f64 7920 3a22 0a20 2020 2020 2020  _body :".       
+0002c090: 2070 5b30 5d20 3d20 5b5d 0a0a 2020 2020   p[0] = []..    
+0002c0a0: 6465 6620 705f 6d61 726b 7570 5f62 7261  def p_markup_bra
+0002c0b0: 6365 645f 6c69 7374 5f62 6f64 795f 5f6d  ced_list_body__m
+0002c0c0: 6172 6b75 705f 6272 6163 6564 5f6c 6973  arkup_braced_lis
+0002c0d0: 745f 626f 6479 5f5f 6d61 726b 7570 2873  t_body__markup(s
+0002c0e0: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+0002c0f0: 2022 6d61 726b 7570 5f62 7261 6365 645f   "markup_braced_
+0002c100: 6c69 7374 5f62 6f64 7920 3a20 6d61 726b  list_body : mark
+0002c110: 7570 5f62 7261 6365 645f 6c69 7374 5f62  up_braced_list_b
+0002c120: 6f64 7920 6d61 726b 7570 220a 2020 2020  ody markup".    
+0002c130: 2020 2020 705b 305d 203d 2070 5b31 5d20      p[0] = p[1] 
+0002c140: 2b20 5b70 5b32 5d5d 0a0a 2020 2020 6465  + [p[2]]..    de
+0002c150: 6620 705f 6d61 726b 7570 5f62 7261 6365  f p_markup_brace
+0002c160: 645f 6c69 7374 5f62 6f64 795f 5f6d 6172  d_list_body__mar
+0002c170: 6b75 705f 6272 6163 6564 5f6c 6973 745f  kup_braced_list_
+0002c180: 626f 6479 5f5f 6d61 726b 7570 5f6c 6973  body__markup_lis
+0002c190: 7428 7365 6c66 2c20 7029 3a0a 2020 2020  t(self, p):.    
+0002c1a0: 2020 2020 226d 6172 6b75 705f 6272 6163      "markup_brac
+0002c1b0: 6564 5f6c 6973 745f 626f 6479 203a 206d  ed_list_body : m
+0002c1c0: 6172 6b75 705f 6272 6163 6564 5f6c 6973  arkup_braced_lis
+0002c1d0: 745f 626f 6479 206d 6172 6b75 705f 6c69  t_body markup_li
+0002c1e0: 7374 220a 2020 2020 2020 2020 705b 305d  st".        p[0]
+0002c1f0: 203d 2070 5b31 5d20 2b20 5b70 5b32 5d5d   = p[1] + [p[2]]
+0002c200: 0a0a 2020 2020 2323 2320 6d61 726b 7570  ..    ### markup
+0002c210: 5f63 6f6d 6d61 6e64 5f62 6173 6963 5f61  _command_basic_a
+0002c220: 7267 756d 656e 7473 2023 2323 0a0a 2020  rguments ###..  
+0002c230: 2020 6465 6620 705f 6d61 726b 7570 5f63    def p_markup_c
+0002c240: 6f6d 6d61 6e64 5f62 6173 6963 5f61 7267  ommand_basic_arg
+0002c250: 756d 656e 7473 5f5f 4558 5045 4354 5f4d  uments__EXPECT_M
+0002c260: 4152 4b55 505f 4c49 5354 5f5f 6d61 726b  ARKUP_LIST__mark
+0002c270: 7570 5f63 6f6d 6d61 6e64 5f6c 6973 745f  up_command_list_
+0002c280: 6172 6775 6d65 6e74 735f 5f6d 6172 6b75  arguments__marku
+0002c290: 705f 6c69 7374 280a 2020 2020 2020 2020  p_list(.        
+0002c2a0: 7365 6c66 2c20 700a 2020 2020 293a 0a20  self, p.    ):. 
+0002c2b0: 2020 2020 2020 2022 6d61 726b 7570 5f63         "markup_c
+0002c2c0: 6f6d 6d61 6e64 5f62 6173 6963 5f61 7267  ommand_basic_arg
+0002c2d0: 756d 656e 7473 203a 2045 5850 4543 545f  uments : EXPECT_
+0002c2e0: 4d41 524b 5550 5f4c 4953 5420 6d61 726b  MARKUP_LIST mark
+0002c2f0: 7570 5f63 6f6d 6d61 6e64 5f6c 6973 745f  up_command_list_
+0002c300: 6172 6775 6d65 6e74 7320 6d61 726b 7570  arguments markup
+0002c310: 5f6c 6973 7422 0a20 2020 2020 2020 2070  _list".        p
+0002c320: 5b30 5d20 3d20 705b 325d 202b 205b 705b  [0] = p[2] + [p[
+0002c330: 335d 5d0a 0a20 2020 2064 6566 2070 5f6d  3]]..    def p_m
+0002c340: 6172 6b75 705f 636f 6d6d 616e 645f 6261  arkup_command_ba
+0002c350: 7369 635f 6172 6775 6d65 6e74 735f 5f45  sic_arguments__E
+0002c360: 5850 4543 545f 4e4f 5f4d 4f52 455f 4152  XPECT_NO_MORE_AR
+0002c370: 4753 2873 656c 662c 2070 293a 0a20 2020  GS(self, p):.   
+0002c380: 2020 2020 2022 6d61 726b 7570 5f63 6f6d       "markup_com
+0002c390: 6d61 6e64 5f62 6173 6963 5f61 7267 756d  mand_basic_argum
+0002c3a0: 656e 7473 203a 2045 5850 4543 545f 4e4f  ents : EXPECT_NO
+0002c3b0: 5f4d 4f52 455f 4152 4753 220a 2020 2020  _MORE_ARGS".    
+0002c3c0: 2020 2020 705b 305d 203d 205b 5d0a 0a20      p[0] = [].. 
+0002c3d0: 2020 2064 6566 2070 5f6d 6172 6b75 705f     def p_markup_
+0002c3e0: 636f 6d6d 616e 645f 6261 7369 635f 6172  command_basic_ar
+0002c3f0: 6775 6d65 6e74 735f 5f45 5850 4543 545f  guments__EXPECT_
+0002c400: 5343 4d5f 5f6d 6172 6b75 705f 636f 6d6d  SCM__markup_comm
+0002c410: 616e 645f 6c69 7374 5f61 7267 756d 656e  and_list_argumen
+0002c420: 7473 5f5f 656d 6265 6464 6564 5f73 636d  ts__embedded_scm
+0002c430: 5f63 6c6f 7365 6428 0a20 2020 2020 2020  _closed(.       
+0002c440: 2073 656c 662c 2070 0a20 2020 2029 3a0a   self, p.    ):.
+0002c450: 2020 2020 2020 2020 226d 6172 6b75 705f          "markup_
+0002c460: 636f 6d6d 616e 645f 6261 7369 635f 6172  command_basic_ar
+0002c470: 6775 6d65 6e74 7320 3a20 4558 5045 4354  guments : EXPECT
+0002c480: 5f53 434d 206d 6172 6b75 705f 636f 6d6d  _SCM markup_comm
+0002c490: 616e 645f 6c69 7374 5f61 7267 756d 656e  and_list_argumen
+0002c4a0: 7473 2065 6d62 6564 6465 645f 7363 6d5f  ts embedded_scm_
+0002c4b0: 636c 6f73 6564 220a 2020 2020 2020 2020  closed".        
+0002c4c0: 705b 305d 203d 2070 5b32 5d20 2b20 5b70  p[0] = p[2] + [p
+0002c4d0: 5b33 5d5d 0a0a 2020 2020 2323 2320 6d61  [3]]..    ### ma
+0002c4e0: 726b 7570 5f63 6f6d 6d61 6e64 5f6c 6973  rkup_command_lis
+0002c4f0: 7420 2323 230a 0a20 2020 2064 6566 2070  t ###..    def p
+0002c500: 5f6d 6172 6b75 705f 636f 6d6d 616e 645f  _markup_command_
+0002c510: 6c69 7374 5f5f 4d41 524b 5550 5f4c 4953  list__MARKUP_LIS
+0002c520: 545f 4655 4e43 5449 4f4e 5f5f 6d61 726b  T_FUNCTION__mark
+0002c530: 7570 5f63 6f6d 6d61 6e64 5f6c 6973 745f  up_command_list_
+0002c540: 6172 6775 6d65 6e74 7328 0a20 2020 2020  arguments(.     
+0002c550: 2020 2073 656c 662c 2070 0a20 2020 2029     self, p.    )
+0002c560: 3a0a 2020 2020 2020 2020 226d 6172 6b75  :.        "marku
+0002c570: 705f 636f 6d6d 616e 645f 6c69 7374 203a  p_command_list :
+0002c580: 204d 4152 4b55 505f 4c49 5354 5f46 554e   MARKUP_LIST_FUN
+0002c590: 4354 494f 4e20 6d61 726b 7570 5f63 6f6d  CTION markup_com
+0002c5a0: 6d61 6e64 5f6c 6973 745f 6172 6775 6d65  mand_list_argume
+0002c5b0: 6e74 7322 0a20 2020 2020 2020 2070 5b30  nts".        p[0
+0002c5c0: 5d20 3d20 4d61 726b 7570 436f 6d6d 616e  ] = MarkupComman
+0002c5d0: 6428 705b 315d 5b31 3a5d 2c20 2a70 5b32  d(p[1][1:], *p[2
+0002c5e0: 5d29 0a0a 2020 2020 2323 2320 6d61 726b  ])..    ### mark
+0002c5f0: 7570 5f63 6f6d 6d61 6e64 5f6c 6973 745f  up_command_list_
+0002c600: 6172 6775 6d65 6e74 7320 2323 230a 0a20  arguments ###.. 
+0002c610: 2020 2064 6566 2070 5f6d 6172 6b75 705f     def p_markup_
+0002c620: 636f 6d6d 616e 645f 6c69 7374 5f61 7267  command_list_arg
+0002c630: 756d 656e 7473 5f5f 4558 5045 4354 5f4d  uments__EXPECT_M
+0002c640: 4152 4b55 505f 5f6d 6172 6b75 705f 636f  ARKUP__markup_co
+0002c650: 6d6d 616e 645f 6c69 7374 5f61 7267 756d  mmand_list_argum
+0002c660: 656e 7473 5f5f 6d61 726b 7570 280a 2020  ents__markup(.  
+0002c670: 2020 2020 2020 7365 6c66 2c20 700a 2020        self, p.  
+0002c680: 2020 293a 0a20 2020 2020 2020 2022 6d61    ):.        "ma
+0002c690: 726b 7570 5f63 6f6d 6d61 6e64 5f6c 6973  rkup_command_lis
+0002c6a0: 745f 6172 6775 6d65 6e74 7320 3a20 4558  t_arguments : EX
+0002c6b0: 5045 4354 5f4d 4152 4b55 5020 6d61 726b  PECT_MARKUP mark
+0002c6c0: 7570 5f63 6f6d 6d61 6e64 5f6c 6973 745f  up_command_list_
+0002c6d0: 6172 6775 6d65 6e74 7320 6d61 726b 7570  arguments markup
+0002c6e0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
+0002c6f0: 2070 5b32 5d20 2b20 5b70 5b33 5d5d 0a0a   p[2] + [p[3]]..
+0002c700: 2020 2020 6465 6620 705f 6d61 726b 7570      def p_markup
+0002c710: 5f63 6f6d 6d61 6e64 5f6c 6973 745f 6172  _command_list_ar
+0002c720: 6775 6d65 6e74 735f 5f6d 6172 6b75 705f  guments__markup_
+0002c730: 636f 6d6d 616e 645f 6261 7369 635f 6172  command_basic_ar
+0002c740: 6775 6d65 6e74 7328 7365 6c66 2c20 7029  guments(self, p)
+0002c750: 3a0a 2020 2020 2020 2020 226d 6172 6b75  :.        "marku
+0002c760: 705f 636f 6d6d 616e 645f 6c69 7374 5f61  p_command_list_a
+0002c770: 7267 756d 656e 7473 203a 206d 6172 6b75  rguments : marku
+0002c780: 705f 636f 6d6d 616e 645f 6261 7369 635f  p_command_basic_
+0002c790: 6172 6775 6d65 6e74 7322 0a20 2020 2020  arguments".     
+0002c7a0: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+0002c7b0: 2020 2020 2323 2320 6d61 726b 7570 5f63      ### markup_c
+0002c7c0: 6f6d 706f 7365 645f 6c69 7374 2023 2323  omposed_list ###
+0002c7d0: 0a0a 2020 2020 6465 6620 705f 6d61 726b  ..    def p_mark
+0002c7e0: 7570 5f63 6f6d 706f 7365 645f 6c69 7374  up_composed_list
+0002c7f0: 5f5f 6d61 726b 7570 5f68 6561 645f 315f  __markup_head_1_
+0002c800: 6c69 7374 5f5f 6d61 726b 7570 5f62 7261  list__markup_bra
+0002c810: 6365 645f 6c69 7374 2873 656c 662c 2070  ced_list(self, p
+0002c820: 293a 0a20 2020 2020 2020 2022 6d61 726b  ):.        "mark
+0002c830: 7570 5f63 6f6d 706f 7365 645f 6c69 7374  up_composed_list
+0002c840: 203a 206d 6172 6b75 705f 6865 6164 5f31   : markup_head_1
+0002c850: 5f6c 6973 7420 6d61 726b 7570 5f62 7261  _list markup_bra
+0002c860: 6365 645f 6c69 7374 220a 2020 2020 2020  ced_list".      
+0002c870: 2020 6d61 726b 7570 203d 2070 5b32 5d0a    markup = p[2].
+0002c880: 2020 2020 2020 2020 666f 7220 6974 656d          for item
+0002c890: 2069 6e20 7265 7665 7273 6564 2870 5b31   in reversed(p[1
+0002c8a0: 5d29 3a0a 2020 2020 2020 2020 2020 2020  ]):.            
+0002c8b0: 636f 6d6d 616e 6420 3d20 6974 656d 5b30  command = item[0
+0002c8c0: 5d5b 313a 5d0a 2020 2020 2020 2020 2020  ][1:].          
+0002c8d0: 2020 6172 6775 6d65 6e74 7320 3d20 6974    arguments = it
+0002c8e0: 656d 5b31 3a5d 0a20 2020 2020 2020 2020  em[1:].         
+0002c8f0: 2020 2061 7267 756d 656e 7473 2e61 7070     arguments.app
+0002c900: 656e 6428 6d61 726b 7570 290a 2020 2020  end(markup).    
+0002c910: 2020 2020 2020 2020 6d61 726b 7570 203d          markup =
+0002c920: 204d 6172 6b75 7043 6f6d 6d61 6e64 2863   MarkupCommand(c
+0002c930: 6f6d 6d61 6e64 2c20 2a61 7267 756d 656e  ommand, *argumen
+0002c940: 7473 290a 2020 2020 2020 2020 705b 305d  ts).        p[0]
+0002c950: 203d 206d 6172 6b75 700a 0a20 2020 2023   = markup..    #
+0002c960: 2323 206d 6172 6b75 705f 6865 6164 5f31  ## markup_head_1
+0002c970: 5f69 7465 6d20 2323 230a 0a20 2020 2064  _item ###..    d
+0002c980: 6566 2070 5f6d 6172 6b75 705f 6865 6164  ef p_markup_head
+0002c990: 5f31 5f69 7465 6d5f 5f4d 4152 4b55 505f  _1_item__MARKUP_
+0002c9a0: 4655 4e43 5449 4f4e 5f5f 4558 5045 4354  FUNCTION__EXPECT
+0002c9b0: 5f4d 4152 4b55 505f 5f6d 6172 6b75 705f  _MARKUP__markup_
+0002c9c0: 636f 6d6d 616e 645f 6c69 7374 5f61 7267  command_list_arg
+0002c9d0: 756d 656e 7473 280a 2020 2020 2020 2020  uments(.        
+0002c9e0: 7365 6c66 2c20 700a 2020 2020 293a 0a20  self, p.    ):. 
+0002c9f0: 2020 2020 2020 2022 6d61 726b 7570 5f68         "markup_h
+0002ca00: 6561 645f 315f 6974 656d 203a 204d 4152  ead_1_item : MAR
+0002ca10: 4b55 505f 4655 4e43 5449 4f4e 2045 5850  KUP_FUNCTION EXP
+0002ca20: 4543 545f 4d41 524b 5550 206d 6172 6b75  ECT_MARKUP marku
+0002ca30: 705f 636f 6d6d 616e 645f 6c69 7374 5f61  p_command_list_a
+0002ca40: 7267 756d 656e 7473 220a 2020 2020 2020  rguments".      
+0002ca50: 2020 705b 305d 203d 205b 705b 315d 5d20    p[0] = [p[1]] 
+0002ca60: 2b20 705b 335d 0a0a 2020 2020 2323 2320  + p[3]..    ### 
+0002ca70: 6d61 726b 7570 5f68 6561 645f 315f 6c69  markup_head_1_li
+0002ca80: 7374 2023 2323 0a0a 2020 2020 6465 6620  st ###..    def 
+0002ca90: 705f 6d61 726b 7570 5f68 6561 645f 315f  p_markup_head_1_
+0002caa0: 6c69 7374 5f5f 6d61 726b 7570 5f68 6561  list__markup_hea
+0002cab0: 645f 315f 6974 656d 2873 656c 662c 2070  d_1_item(self, p
+0002cac0: 293a 0a20 2020 2020 2020 2022 6d61 726b  ):.        "mark
+0002cad0: 7570 5f68 6561 645f 315f 6c69 7374 203a  up_head_1_list :
+0002cae0: 206d 6172 6b75 705f 6865 6164 5f31 5f69   markup_head_1_i
+0002caf0: 7465 6d22 0a20 2020 2020 2020 2070 5b30  tem".        p[0
+0002cb00: 5d20 3d20 5b70 5b31 5d5d 0a0a 2020 2020  ] = [p[1]]..    
+0002cb10: 6465 6620 705f 6d61 726b 7570 5f68 6561  def p_markup_hea
+0002cb20: 645f 315f 6c69 7374 5f5f 6d61 726b 7570  d_1_list__markup
+0002cb30: 5f68 6561 645f 315f 6c69 7374 5f5f 6d61  _head_1_list__ma
+0002cb40: 726b 7570 5f68 6561 645f 315f 6974 656d  rkup_head_1_item
+0002cb50: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+0002cb60: 2020 2022 6d61 726b 7570 5f68 6561 645f     "markup_head_
+0002cb70: 315f 6c69 7374 203a 206d 6172 6b75 705f  1_list : markup_
+0002cb80: 6865 6164 5f31 5f6c 6973 7420 6d61 726b  head_1_list mark
+0002cb90: 7570 5f68 6561 645f 315f 6974 656d 220a  up_head_1_item".
+0002cba0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+0002cbb0: 5b31 5d20 2b20 5b70 5b32 5d5d 0a0a 2020  [1] + [p[2]]..  
+0002cbc0: 2020 2323 2320 6d61 726b 7570 5f6c 6973    ### markup_lis
+0002cbd0: 7420 2323 230a 0a20 2020 2064 6566 2070  t ###..    def p
+0002cbe0: 5f6d 6172 6b75 705f 6c69 7374 5f5f 4d41  _markup_list__MA
+0002cbf0: 524b 5550 4c49 5354 5f49 4445 4e54 4946  RKUPLIST_IDENTIF
+0002cc00: 4945 5228 7365 6c66 2c20 7029 3a0a 2020  IER(self, p):.  
+0002cc10: 2020 2020 2020 226d 6172 6b75 705f 6c69        "markup_li
+0002cc20: 7374 203a 204d 4152 4b55 504c 4953 545f  st : MARKUPLIST_
+0002cc30: 4944 454e 5449 4649 4552 220a 2020 2020  IDENTIFIER".    
+0002cc40: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
+0002cc50: 0a20 2020 2064 6566 2070 5f6d 6172 6b75  .    def p_marku
+0002cc60: 705f 6c69 7374 5f5f 6d61 726b 7570 5f62  p_list__markup_b
+0002cc70: 7261 6365 645f 6c69 7374 2873 656c 662c  raced_list(self,
+0002cc80: 2070 293a 0a20 2020 2020 2020 2022 6d61   p):.        "ma
+0002cc90: 726b 7570 5f6c 6973 7420 3a20 6d61 726b  rkup_list : mark
+0002cca0: 7570 5f62 7261 6365 645f 6c69 7374 220a  up_braced_list".
+0002ccb0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+0002ccc0: 5b31 5d0a 0a20 2020 2064 6566 2070 5f6d  [1]..    def p_m
+0002ccd0: 6172 6b75 705f 6c69 7374 5f5f 6d61 726b  arkup_list__mark
+0002cce0: 7570 5f63 6f6d 6d61 6e64 5f6c 6973 7428  up_command_list(
+0002ccf0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+0002cd00: 2020 226d 6172 6b75 705f 6c69 7374 203a    "markup_list :
+0002cd10: 206d 6172 6b75 705f 636f 6d6d 616e 645f   markup_command_
+0002cd20: 6c69 7374 220a 2020 2020 2020 2020 705b  list".        p[
+0002cd30: 305d 203d 2070 5b31 5d0a 0a20 2020 2064  0] = p[1]..    d
+0002cd40: 6566 2070 5f6d 6172 6b75 705f 6c69 7374  ef p_markup_list
+0002cd50: 5f5f 6d61 726b 7570 5f63 6f6d 706f 7365  __markup_compose
+0002cd60: 645f 6c69 7374 2873 656c 662c 2070 293a  d_list(self, p):
+0002cd70: 0a20 2020 2020 2020 2022 6d61 726b 7570  .        "markup
+0002cd80: 5f6c 6973 7420 3a20 6d61 726b 7570 5f63  _list : markup_c
+0002cd90: 6f6d 706f 7365 645f 6c69 7374 220a 2020  omposed_list".  
+0002cda0: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
+0002cdb0: 5d0a 0a20 2020 2064 6566 2070 5f6d 6172  ]..    def p_mar
+0002cdc0: 6b75 705f 6c69 7374 5f5f 6d61 726b 7570  kup_list__markup
+0002cdd0: 5f73 636d 5f5f 4d41 524b 5550 4c49 5354  _scm__MARKUPLIST
+0002cde0: 5f49 4445 4e54 4946 4945 5228 7365 6c66  _IDENTIFIER(self
+0002cdf0: 2c20 7029 3a0a 2020 2020 2020 2020 226d  , p):.        "m
+0002ce00: 6172 6b75 705f 6c69 7374 203a 206d 6172  arkup_list : mar
+0002ce10: 6b75 705f 7363 6d20 4d41 524b 5550 4c49  kup_scm MARKUPLI
+0002ce20: 5354 5f49 4445 4e54 4946 4945 5222 0a20  ST_IDENTIFIER". 
+0002ce30: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+0002ce40: 6e74 6178 4e6f 6465 2822 6d61 726b 7570  ntaxNode("markup
+0002ce50: 5f6c 6973 7422 2c20 702e 5f5f 6765 7473  _list", p.__gets
+0002ce60: 6c69 6365 5f5f 2831 2c20 4e6f 6e65 2929  lice__(1, None))
+0002ce70: 0a0a 2020 2020 2323 2320 6d61 726b 7570  ..    ### markup
+0002ce80: 5f73 636d 2023 2323 0a0a 2020 2020 6465  _scm ###..    de
+0002ce90: 6620 705f 6d61 726b 7570 5f73 636d 5f5f  f p_markup_scm__
+0002cea0: 656d 6265 6464 6564 5f73 636d 5f62 6172  embedded_scm_bar
+0002ceb0: 655f 5f42 4143 4b55 5028 7365 6c66 2c20  e__BACKUP(self, 
+0002cec0: 7029 3a0a 2020 2020 2020 2020 226d 6172  p):.        "mar
+0002ced0: 6b75 705f 7363 6d20 3a20 656d 6265 6464  kup_scm : embedd
+0002cee0: 6564 5f73 636d 5f62 6172 6520 4241 434b  ed_scm_bare BACK
+0002cef0: 5550 220a 0a20 2020 2020 2020 2070 5b30  UP"..        p[0
+0002cf00: 5d20 3d20 705b 315d 0a0a 2020 2020 2020  ] = p[1]..      
+0002cf10: 2020 746f 6b65 6e20 3d20 6c65 782e 4c65    token = lex.Le
+0002cf20: 7854 6f6b 656e 2829 0a20 2020 2020 2020  xToken().       
+0002cf30: 2074 6f6b 656e 2e74 7970 6520 3d20 224d   token.type = "M
+0002cf40: 4152 4b55 505f 4944 454e 5449 4649 4552  ARKUP_IDENTIFIER
+0002cf50: 220a 2020 2020 2020 2020 746f 6b65 6e2e  ".        token.
+0002cf60: 7661 6c75 6520 3d20 705b 315d 0a20 2020  value = p[1].   
+0002cf70: 2020 2020 2074 6f6b 656e 2e6c 6578 706f       token.lexpo
+0002cf80: 7320 3d20 300a 2020 2020 2020 2020 746f  s = 0.        to
+0002cf90: 6b65 6e2e 6c69 6e65 6e6f 203d 2030 0a0a  ken.lineno = 0..
+0002cfa0: 2020 2020 2020 2020 7365 6c66 2e63 6c69          self.cli
+0002cfb0: 656e 742e 5f70 7573 685f 6578 7472 615f  ent._push_extra_
+0002cfc0: 746f 6b65 6e28 7365 6c66 2e63 6c69 656e  token(self.clien
+0002cfd0: 742e 5f70 6172 7365 722e 6c6f 6f6b 6168  t._parser.lookah
+0002cfe0: 6561 6429 0a20 2020 2020 2020 2073 656c  ead).        sel
+0002cff0: 662e 636c 6965 6e74 2e5f 7075 7368 5f65  f.client._push_e
+0002d000: 7874 7261 5f74 6f6b 656e 2870 2e73 6c69  xtra_token(p.sli
+0002d010: 6365 5b32 5d29 0a20 2020 2020 2020 2073  ce[2]).        s
+0002d020: 656c 662e 636c 6965 6e74 2e5f 7075 7368  elf.client._push
+0002d030: 5f65 7874 7261 5f74 6f6b 656e 2874 6f6b  _extra_token(tok
+0002d040: 656e 290a 2020 2020 2020 2020 7365 6c66  en).        self
+0002d050: 2e63 6c69 656e 742e 5f70 6172 7365 722e  .client._parser.
+0002d060: 6c6f 6f6b 6168 6561 6420 3d20 4e6f 6e65  lookahead = None
+0002d070: 0a0a 2020 2020 2323 2320 6d61 726b 7570  ..    ### markup
+0002d080: 5f74 6f70 2023 2323 0a0a 2020 2020 6465  _top ###..    de
+0002d090: 6620 705f 6d61 726b 7570 5f74 6f70 5f5f  f p_markup_top__
+0002d0a0: 6d61 726b 7570 5f68 6561 645f 315f 6c69  markup_head_1_li
+0002d0b0: 7374 5f5f 7369 6d70 6c65 5f6d 6172 6b75  st__simple_marku
+0002d0c0: 7028 7365 6c66 2c20 7029 3a0a 2020 2020  p(self, p):.    
+0002d0d0: 2020 2020 226d 6172 6b75 705f 746f 7020      "markup_top 
+0002d0e0: 3a20 6d61 726b 7570 5f68 6561 645f 315f  : markup_head_1_
+0002d0f0: 6c69 7374 2073 696d 706c 655f 6d61 726b  list simple_mark
+0002d100: 7570 220a 2020 2020 2020 2020 6d61 726b  up".        mark
+0002d110: 7570 203d 2070 5b32 5d0a 2020 2020 2020  up = p[2].      
+0002d120: 2020 666f 7220 6974 656d 2069 6e20 7265    for item in re
+0002d130: 7665 7273 6564 2870 5b31 5d29 3a0a 2020  versed(p[1]):.  
+0002d140: 2020 2020 2020 2020 2020 636f 6d6d 616e            comman
+0002d150: 6420 3d20 6974 656d 5b30 5d5b 313a 5d0a  d = item[0][1:].
+0002d160: 2020 2020 2020 2020 2020 2020 6172 6775              argu
+0002d170: 6d65 6e74 7320 3d20 6974 656d 5b31 3a5d  ments = item[1:]
+0002d180: 0a20 2020 2020 2020 2020 2020 2061 7267  .            arg
+0002d190: 756d 656e 7473 2e61 7070 656e 6428 6d61  uments.append(ma
+0002d1a0: 726b 7570 290a 2020 2020 2020 2020 2020  rkup).          
+0002d1b0: 2020 6d61 726b 7570 203d 204d 6172 6b75    markup = Marku
+0002d1c0: 7043 6f6d 6d61 6e64 2863 6f6d 6d61 6e64  pCommand(command
+0002d1d0: 2c20 2a61 7267 756d 656e 7473 290a 2020  , *arguments).  
+0002d1e0: 2020 2020 2020 705b 305d 203d 206d 6172        p[0] = mar
+0002d1f0: 6b75 700a 0a20 2020 2064 6566 2070 5f6d  kup..    def p_m
+0002d200: 6172 6b75 705f 746f 705f 5f6d 6172 6b75  arkup_top__marku
+0002d210: 705f 6c69 7374 2873 656c 662c 2070 293a  p_list(self, p):
+0002d220: 0a20 2020 2020 2020 2022 6d61 726b 7570  .        "markup
+0002d230: 5f74 6f70 203a 206d 6172 6b75 705f 6c69  _top : markup_li
+0002d240: 7374 220a 2020 2020 2020 2020 705b 305d  st".        p[0]
+0002d250: 203d 2070 5b31 5d0a 0a20 2020 2064 6566   = p[1]..    def
+0002d260: 2070 5f6d 6172 6b75 705f 746f 705f 5f73   p_markup_top__s
+0002d270: 696d 706c 655f 6d61 726b 7570 2873 656c  imple_markup(sel
+0002d280: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+0002d290: 6d61 726b 7570 5f74 6f70 203a 2073 696d  markup_top : sim
+0002d2a0: 706c 655f 6d61 726b 7570 220a 2020 2020  ple_markup".    
+0002d2b0: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
+0002d2c0: 0a20 2020 2023 2323 206d 6f64 655f 6368  .    ### mode_ch
+0002d2d0: 616e 6765 645f 6d75 7369 6320 2323 230a  anged_music ###.
+0002d2e0: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
+0002d2f0: 6d6f 6465 5f63 6861 6e67 6564 5f6d 7573  mode_changed_mus
+0002d300: 6963 5f5f 6d6f 6465 5f63 6861 6e67 696e  ic__mode_changin
+0002d310: 675f 6865 6164 5f5f 6772 6f75 7065 645f  g_head__grouped_
+0002d320: 6d75 7369 635f 6c69 7374 2873 656c 662c  music_list(self,
+0002d330: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+0002d340: 2020 276d 6f64 655f 6368 616e 6765 645f    'mode_changed_
+0002d350: 6d75 7369 6320 3a20 6d6f 6465 5f63 6861  music : mode_cha
+0002d360: 6e67 696e 675f 6865 6164 2067 726f 7570  nging_head group
+0002d370: 6564 5f6d 7573 6963 5f6c 6973 7427 0a20  ed_music_list'. 
+0002d380: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
+0002d390: 203d 2053 796e 7461 784e 6f64 6528 276d   = SyntaxNode('m
+0002d3a0: 6f64 655f 6368 616e 6765 645f 6d75 7369  ode_changed_musi
+0002d3b0: 6327 2c20 705b 313a 5d29 0a0a 2020 2020  c', p[1:])..    
+0002d3c0: 2320 2020 2064 6566 2070 5f6d 6f64 655f  #    def p_mode_
+0002d3d0: 6368 616e 6765 645f 6d75 7369 635f 5f6d  changed_music__m
+0002d3e0: 6f64 655f 6368 616e 6769 6e67 5f68 6561  ode_changing_hea
+0002d3f0: 645f 7769 7468 5f63 6f6e 7465 7874 5f5f  d_with_context__
+0002d400: 6f70 7469 6f6e 616c 5f63 6f6e 7465 7874  optional_context
+0002d410: 5f6d 6f64 5f5f 6772 6f75 7065 645f 6d75  _mod__grouped_mu
+0002d420: 7369 635f 6c69 7374 2873 656c 662c 2070  sic_list(self, p
+0002d430: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
+0002d440: 276d 6f64 655f 6368 616e 6765 645f 6d75  'mode_changed_mu
+0002d450: 7369 6320 3a20 6d6f 6465 5f63 6861 6e67  sic : mode_chang
+0002d460: 696e 675f 6865 6164 5f77 6974 685f 636f  ing_head_with_co
+0002d470: 6e74 6578 7420 6f70 7469 6f6e 616c 5f63  ntext optional_c
+0002d480: 6f6e 7465 7874 5f6d 6f64 2067 726f 7570  ontext_mod group
+0002d490: 6564 5f6d 7573 6963 5f6c 6973 7427 0a20  ed_music_list'. 
+0002d4a0: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
+0002d4b0: 203d 2053 796e 7461 784e 6f64 6528 276d   = SyntaxNode('m
+0002d4c0: 6f64 655f 6368 616e 6765 645f 6d75 7369  ode_changed_musi
+0002d4d0: 6327 2c20 705b 313a 5d29 0a0a 2020 2020  c', p[1:])..    
+0002d4e0: 2323 2320 6d6f 6465 5f63 6861 6e67 696e  ### mode_changin
+0002d4f0: 675f 6865 6164 2023 2323 0a0a 2020 2020  g_head ###..    
+0002d500: 2320 2020 2064 6566 2070 5f6d 6f64 655f  #    def p_mode_
+0002d510: 6368 616e 6769 6e67 5f68 6561 645f 5f43  changing_head__C
+0002d520: 484f 5244 4d4f 4445 2873 656c 662c 2070  HORDMODE(self, p
+0002d530: 293a 0a20 2020 2023 2020 2020 2020 2020  ):.    #        
+0002d540: 276d 6f64 655f 6368 616e 6769 6e67 5f68  'mode_changing_h
+0002d550: 6561 6420 3a20 4348 4f52 444d 4f44 4527  ead : CHORDMODE'
+0002d560: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+0002d570: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+0002d580: 276d 6f64 655f 6368 616e 6769 6e67 5f68  'mode_changing_h
+0002d590: 6561 6427 2c20 705b 313a 5d29 0a0a 2020  ead', p[1:])..  
+0002d5a0: 2020 2320 2020 2064 6566 2070 5f6d 6f64    #    def p_mod
+0002d5b0: 655f 6368 616e 6769 6e67 5f68 6561 645f  e_changing_head_
+0002d5c0: 5f44 5255 4d4d 4f44 4528 7365 6c66 2c20  _DRUMMODE(self, 
+0002d5d0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+0002d5e0: 2027 6d6f 6465 5f63 6861 6e67 696e 675f   'mode_changing_
+0002d5f0: 6865 6164 203a 2044 5255 4d4d 4f44 4527  head : DRUMMODE'
+0002d600: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+0002d610: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+0002d620: 276d 6f64 655f 6368 616e 6769 6e67 5f68  'mode_changing_h
+0002d630: 6561 6427 2c20 705b 313a 5d29 0a0a 2020  ead', p[1:])..  
+0002d640: 2020 2320 2020 2064 6566 2070 5f6d 6f64    #    def p_mod
+0002d650: 655f 6368 616e 6769 6e67 5f68 6561 645f  e_changing_head_
+0002d660: 5f46 4947 5552 454d 4f44 4528 7365 6c66  _FIGUREMODE(self
+0002d670: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
+0002d680: 2020 2027 6d6f 6465 5f63 6861 6e67 696e     'mode_changin
+0002d690: 675f 6865 6164 203a 2046 4947 5552 454d  g_head : FIGUREM
+0002d6a0: 4f44 4527 0a20 2020 2023 2020 2020 2020  ODE'.    #      
+0002d6b0: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
+0002d6c0: 6f64 6528 276d 6f64 655f 6368 616e 6769  ode('mode_changi
+0002d6d0: 6e67 5f68 6561 6427 2c20 705b 313a 5d29  ng_head', p[1:])
+0002d6e0: 0a0a 2020 2020 2320 2020 2064 6566 2070  ..    #    def p
+0002d6f0: 5f6d 6f64 655f 6368 616e 6769 6e67 5f68  _mode_changing_h
+0002d700: 6561 645f 5f4c 5952 4943 4d4f 4445 2873  ead__LYRICMODE(s
+0002d710: 656c 662c 2070 293a 0a20 2020 2023 2020  elf, p):.    #  
+0002d720: 2020 2020 2020 276d 6f64 655f 6368 616e        'mode_chan
+0002d730: 6769 6e67 5f68 6561 6420 3a20 4c59 5249  ging_head : LYRI
+0002d740: 434d 4f44 4527 0a20 2020 2023 2020 2020  CMODE'.    #    
+0002d750: 2020 2020 705b 305d 203d 2053 796e 7461      p[0] = Synta
+0002d760: 784e 6f64 6528 276d 6f64 655f 6368 616e  xNode('mode_chan
+0002d770: 6769 6e67 5f68 6561 6427 2c20 705b 313a  ging_head', p[1:
+0002d780: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
+0002d790: 2070 5f6d 6f64 655f 6368 616e 6769 6e67   p_mode_changing
+0002d7a0: 5f68 6561 645f 5f4e 4f54 454d 4f44 4528  _head__NOTEMODE(
+0002d7b0: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
+0002d7c0: 2020 2020 2020 2027 6d6f 6465 5f63 6861         'mode_cha
+0002d7d0: 6e67 696e 675f 6865 6164 203a 204e 4f54  nging_head : NOT
+0002d7e0: 454d 4f44 4527 0a20 2020 2023 2020 2020  EMODE'.    #    
+0002d7f0: 2020 2020 705b 305d 203d 2053 796e 7461      p[0] = Synta
+0002d800: 784e 6f64 6528 276d 6f64 655f 6368 616e  xNode('mode_chan
+0002d810: 6769 6e67 5f68 6561 6427 2c20 705b 313a  ging_head', p[1:
+0002d820: 5d29 0a0a 2020 2020 2323 2320 6d6f 6465  ])..    ### mode
+0002d830: 5f63 6861 6e67 696e 675f 6865 6164 5f77  _changing_head_w
+0002d840: 6974 685f 636f 6e74 6578 7420 2323 230a  ith_context ###.
+0002d850: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
+0002d860: 6d6f 6465 5f63 6861 6e67 696e 675f 6865  mode_changing_he
+0002d870: 6164 5f77 6974 685f 636f 6e74 6578 745f  ad_with_context_
+0002d880: 5f43 484f 5244 5328 7365 6c66 2c20 7029  _CHORDS(self, p)
+0002d890: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
+0002d8a0: 6d6f 6465 5f63 6861 6e67 696e 675f 6865  mode_changing_he
+0002d8b0: 6164 5f77 6974 685f 636f 6e74 6578 7420  ad_with_context 
+0002d8c0: 3a20 4348 4f52 4453 270a 2020 2020 2320  : CHORDS'.    # 
+0002d8d0: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+0002d8e0: 6e74 6178 4e6f 6465 2827 6d6f 6465 5f63  ntaxNode('mode_c
+0002d8f0: 6861 6e67 696e 675f 6865 6164 5f77 6974  hanging_head_wit
+0002d900: 685f 636f 6e74 6578 7427 2c20 705b 313a  h_context', p[1:
+0002d910: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
+0002d920: 2070 5f6d 6f64 655f 6368 616e 6769 6e67   p_mode_changing
+0002d930: 5f68 6561 645f 7769 7468 5f63 6f6e 7465  _head_with_conte
+0002d940: 7874 5f5f 4452 554d 5328 7365 6c66 2c20  xt__DRUMS(self, 
+0002d950: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+0002d960: 2027 6d6f 6465 5f63 6861 6e67 696e 675f   'mode_changing_
+0002d970: 6865 6164 5f77 6974 685f 636f 6e74 6578  head_with_contex
+0002d980: 7420 3a20 4452 554d 5327 0a20 2020 2023  t : DRUMS'.    #
+0002d990: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+0002d9a0: 796e 7461 784e 6f64 6528 276d 6f64 655f  yntaxNode('mode_
+0002d9b0: 6368 616e 6769 6e67 5f68 6561 645f 7769  changing_head_wi
+0002d9c0: 7468 5f63 6f6e 7465 7874 272c 2070 5b31  th_context', p[1
+0002d9d0: 3a5d 290a 0a20 2020 2023 2020 2020 6465  :])..    #    de
+0002d9e0: 6620 705f 6d6f 6465 5f63 6861 6e67 696e  f p_mode_changin
+0002d9f0: 675f 6865 6164 5f77 6974 685f 636f 6e74  g_head_with_cont
+0002da00: 6578 745f 5f46 4947 5552 4553 2873 656c  ext__FIGURES(sel
+0002da10: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
+0002da20: 2020 2020 276d 6f64 655f 6368 616e 6769      'mode_changi
+0002da30: 6e67 5f68 6561 645f 7769 7468 5f63 6f6e  ng_head_with_con
+0002da40: 7465 7874 203a 2046 4947 5552 4553 270a  text : FIGURES'.
+0002da50: 2020 2020 2320 2020 2020 2020 2070 5b30      #        p[0
+0002da60: 5d20 3d20 5379 6e74 6178 4e6f 6465 2827  ] = SyntaxNode('
+0002da70: 6d6f 6465 5f63 6861 6e67 696e 675f 6865  mode_changing_he
+0002da80: 6164 5f77 6974 685f 636f 6e74 6578 7427  ad_with_context'
+0002da90: 2c20 705b 313a 5d29 0a0a 2020 2020 2320  , p[1:])..    # 
+0002daa0: 2020 2064 6566 2070 5f6d 6f64 655f 6368     def p_mode_ch
+0002dab0: 616e 6769 6e67 5f68 6561 645f 7769 7468  anging_head_with
+0002dac0: 5f63 6f6e 7465 7874 5f5f 4c59 5249 4353  _context__LYRICS
+0002dad0: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+0002dae0: 2020 2020 2020 2020 276d 6f64 655f 6368          'mode_ch
+0002daf0: 616e 6769 6e67 5f68 6561 645f 7769 7468  anging_head_with
+0002db00: 5f63 6f6e 7465 7874 203a 204c 5952 4943  _context : LYRIC
+0002db10: 5327 0a20 2020 2023 2020 2020 2020 2020  S'.    #        
+0002db20: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+0002db30: 6528 276d 6f64 655f 6368 616e 6769 6e67  e('mode_changing
+0002db40: 5f68 6561 645f 7769 7468 5f63 6f6e 7465  _head_with_conte
+0002db50: 7874 272c 2070 5b31 3a5d 290a 0a20 2020  xt', p[1:])..   
+0002db60: 2023 2323 206d 756c 7469 706c 6965 645f   ### multiplied_
+0002db70: 6475 7261 7469 6f6e 2023 2323 0a0a 2020  duration ###..  
+0002db80: 2020 6465 6620 705f 6d75 6c74 6970 6c69    def p_multipli
+0002db90: 6564 5f64 7572 6174 696f 6e5f 5f6d 756c  ed_duration__mul
+0002dba0: 7469 706c 6965 645f 6475 7261 7469 6f6e  tiplied_duration
+0002dbb0: 5f5f 4368 7234 325f 5f46 5241 4354 494f  __Chr42__FRACTIO
+0002dbc0: 4e28 7365 6c66 2c20 7029 3a0a 2020 2020  N(self, p):.    
+0002dbd0: 2020 2020 226d 756c 7469 706c 6965 645f      "multiplied_
+0002dbe0: 6475 7261 7469 6f6e 203a 206d 756c 7469  duration : multi
+0002dbf0: 706c 6965 645f 6475 7261 7469 6f6e 2027  plied_duration '
+0002dc00: 2a27 2046 5241 4354 494f 4e22 0a20 2020  *' FRACTION".   
+0002dc10: 2020 2020 2069 6620 705b 315d 2e6d 756c       if p[1].mul
+0002dc20: 7469 706c 6965 7220 6973 206e 6f74 204e  tiplier is not N
+0002dc30: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0002dc40: 2070 5b30 5d20 3d20 4c69 6c79 506f 6e64   p[0] = LilyPond
+0002dc50: 4475 7261 7469 6f6e 2870 5b31 5d2e 6475  Duration(p[1].du
+0002dc60: 7261 7469 6f6e 2c20 705b 315d 2e6d 756c  ration, p[1].mul
+0002dc70: 7469 706c 6965 7220 2a20 705b 335d 290a  tiplier * p[3]).
+0002dc80: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0002dc90: 2020 2020 2020 2020 2020 705b 305d 203d            p[0] =
+0002dca0: 204c 696c 7950 6f6e 6444 7572 6174 696f   LilyPondDuratio
+0002dcb0: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+0002dcc0: 2020 2070 5b31 5d2e 6475 7261 7469 6f6e     p[1].duration
+0002dcd0: 2c20 7175 6963 6b74 696f 6e73 2e46 7261  , quicktions.Fra
+0002dce0: 6374 696f 6e28 705b 335d 2e6e 756d 6572  ction(p[3].numer
+0002dcf0: 6174 6f72 2c20 705b 335d 2e64 656e 6f6d  ator, p[3].denom
+0002dd00: 696e 6174 6f72 290a 2020 2020 2020 2020  inator).        
+0002dd10: 2020 2020 290a 0a20 2020 2064 6566 2070      )..    def p
+0002dd20: 5f6d 756c 7469 706c 6965 645f 6475 7261  _multiplied_dura
+0002dd30: 7469 6f6e 5f5f 6d75 6c74 6970 6c69 6564  tion__multiplied
+0002dd40: 5f64 7572 6174 696f 6e5f 5f43 6872 3432  _duration__Chr42
+0002dd50: 5f5f 6261 7265 5f75 6e73 6967 6e65 6428  __bare_unsigned(
+0002dd60: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+0002dd70: 2020 226d 756c 7469 706c 6965 645f 6475    "multiplied_du
+0002dd80: 7261 7469 6f6e 203a 206d 756c 7469 706c  ration : multipl
+0002dd90: 6965 645f 6475 7261 7469 6f6e 2027 2a27  ied_duration '*'
+0002dda0: 2062 6172 655f 756e 7369 676e 6564 220a   bare_unsigned".
+0002ddb0: 2020 2020 2020 2020 6966 2070 5b31 5d2e          if p[1].
+0002ddc0: 6d75 6c74 6970 6c69 6572 2069 7320 6e6f  multiplier is no
+0002ddd0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0002dde0: 2020 2020 705b 305d 203d 204c 696c 7950      p[0] = LilyP
+0002ddf0: 6f6e 6444 7572 6174 696f 6e28 705b 315d  ondDuration(p[1]
+0002de00: 2e64 7572 6174 696f 6e2c 2070 5b31 5d2e  .duration, p[1].
+0002de10: 6d75 6c74 6970 6c69 6572 202a 2070 5b33  multiplier * p[3
+0002de20: 5d29 0a20 2020 2020 2020 2065 6c73 653a  ]).        else:
+0002de30: 0a20 2020 2020 2020 2020 2020 2070 5b30  .            p[0
+0002de40: 5d20 3d20 4c69 6c79 506f 6e64 4475 7261  ] = LilyPondDura
+0002de50: 7469 6f6e 2870 5b31 5d2e 6475 7261 7469  tion(p[1].durati
+0002de60: 6f6e 2c20 705b 335d 290a 0a20 2020 2064  on, p[3])..    d
+0002de70: 6566 2070 5f6d 756c 7469 706c 6965 645f  ef p_multiplied_
+0002de80: 6475 7261 7469 6f6e 5f5f 7374 656e 6f5f  duration__steno_
+0002de90: 6475 7261 7469 6f6e 2873 656c 662c 2070  duration(self, p
+0002dea0: 293a 0a20 2020 2020 2020 2022 6d75 6c74  ):.        "mult
+0002deb0: 6970 6c69 6564 5f64 7572 6174 696f 6e20  iplied_duration 
+0002dec0: 3a20 7374 656e 6f5f 6475 7261 7469 6f6e  : steno_duration
+0002ded0: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
+0002dee0: 2070 5b31 5d0a 0a20 2020 2023 2323 206d   p[1]..    ### m
+0002def0: 7573 6963 2023 2323 0a0a 2020 2020 6465  usic ###..    de
+0002df00: 6620 705f 6d75 7369 635f 5f63 6f6d 706f  f p_music__compo
+0002df10: 7369 7465 5f6d 7573 6963 2873 656c 662c  site_music(self,
+0002df20: 2070 293a 0a20 2020 2020 2020 2022 6d75   p):.        "mu
+0002df30: 7369 6320 3a20 636f 6d70 6f73 6974 655f  sic : composite_
+0002df40: 6d75 7369 6320 2570 7265 6320 434f 4d50  music %prec COMP
+0002df50: 4f53 4954 4522 0a20 2020 2020 2020 2070  OSITE".        p
+0002df60: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
+0002df70: 2320 2020 2064 6566 2070 5f6d 7573 6963  #    def p_music
+0002df80: 5f5f 6c79 7269 635f 656c 656d 656e 745f  __lyric_element_
+0002df90: 6d75 7369 6328 7365 6c66 2c20 7029 3a0a  music(self, p):.
+0002dfa0: 2020 2020 2320 2020 2020 2020 2027 6d75      #        'mu
+0002dfb0: 7369 6320 3a20 6c79 7269 635f 656c 656d  sic : lyric_elem
+0002dfc0: 656e 745f 6d75 7369 6327 0a20 2020 2023  ent_music'.    #
+0002dfd0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+0002dfe0: 5b31 5d0a 0a20 2020 2064 6566 2070 5f6d  [1]..    def p_m
+0002dff0: 7573 6963 5f5f 7369 6d70 6c65 5f6d 7573  usic__simple_mus
+0002e000: 6963 2873 656c 662c 2070 293a 0a20 2020  ic(self, p):.   
+0002e010: 2020 2020 2022 6d75 7369 6320 3a20 7369       "music : si
+0002e020: 6d70 6c65 5f6d 7573 6963 220a 2020 2020  mple_music".    
+0002e030: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
+0002e040: 0a20 2020 2023 2323 206d 7573 6963 5f61  .    ### music_a
+0002e050: 7267 2023 2323 0a0a 2020 2020 6465 6620  rg ###..    def 
+0002e060: 705f 6d75 7369 635f 6172 675f 5f63 6f6d  p_music_arg__com
+0002e070: 706f 7369 7465 5f6d 7573 6963 2873 656c  posite_music(sel
+0002e080: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+0002e090: 6d75 7369 635f 6172 6720 3a20 636f 6d70  music_arg : comp
+0002e0a0: 6f73 6974 655f 6d75 7369 6320 2570 7265  osite_music %pre
+0002e0b0: 6320 434f 4d50 4f53 4954 4522 0a20 2020  c COMPOSITE".   
+0002e0c0: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
+0002e0d0: 0a0a 2020 2020 6465 6620 705f 6d75 7369  ..    def p_musi
+0002e0e0: 635f 6172 675f 5f73 696d 706c 655f 6d75  c_arg__simple_mu
+0002e0f0: 7369 6328 7365 6c66 2c20 7029 3a0a 2020  sic(self, p):.  
+0002e100: 2020 2020 2020 226d 7573 6963 5f61 7267        "music_arg
+0002e110: 203a 2073 696d 706c 655f 6d75 7369 6322   : simple_music"
+0002e120: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+0002e130: 705b 315d 0a0a 2020 2020 2323 2320 6d75  p[1]..    ### mu
+0002e140: 7369 635f 6261 7265 2023 2323 0a0a 2020  sic_bare ###..  
+0002e150: 2020 6465 6620 705f 6d75 7369 635f 6261    def p_music_ba
+0002e160: 7265 5f5f 4d55 5349 435f 4944 454e 5449  re__MUSIC_IDENTI
+0002e170: 4649 4552 2873 656c 662c 2070 293a 0a20  FIER(self, p):. 
+0002e180: 2020 2020 2020 2022 6d75 7369 635f 6261         "music_ba
+0002e190: 7265 203a 204d 5553 4943 5f49 4445 4e54  re : MUSIC_IDENT
+0002e1a0: 4946 4945 5222 0a20 2020 2020 2020 2070  IFIER".        p
+0002e1b0: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
+0002e1c0: 6465 6620 705f 6d75 7369 635f 6261 7265  def p_music_bare
+0002e1d0: 5f5f 6772 6f75 7065 645f 6d75 7369 635f  __grouped_music_
+0002e1e0: 6c69 7374 2873 656c 662c 2070 293a 0a20  list(self, p):. 
+0002e1f0: 2020 2020 2020 2022 6d75 7369 635f 6261         "music_ba
+0002e200: 7265 203a 2067 726f 7570 6564 5f6d 7573  re : grouped_mus
+0002e210: 6963 5f6c 6973 7422 0a20 2020 2020 2020  ic_list".       
+0002e220: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
+0002e230: 2020 2320 2020 2064 6566 2070 5f6d 7573    #    def p_mus
+0002e240: 6963 5f62 6172 655f 5f6d 6f64 655f 6368  ic_bare__mode_ch
+0002e250: 616e 6765 645f 6d75 7369 6328 7365 6c66  anged_music(self
+0002e260: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
+0002e270: 2020 2027 6d75 7369 635f 6261 7265 203a     'music_bare :
+0002e280: 206d 6f64 655f 6368 616e 6765 645f 6d75   mode_changed_mu
+0002e290: 7369 6327 0a20 2020 2023 2020 2020 2020  sic'.    #      
+0002e2a0: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
+0002e2b0: 6f64 6528 276d 7573 6963 5f62 6172 6527  ode('music_bare'
+0002e2c0: 2c20 705b 313a 5d29 0a0a 2020 2020 2323  , p[1:])..    ##
+0002e2d0: 2320 6d75 7369 635f 6675 6e63 7469 6f6e  # music_function
+0002e2e0: 5f63 616c 6c20 2323 230a 0a20 2020 2064  _call ###..    d
+0002e2f0: 6566 2070 5f6d 7573 6963 5f66 756e 6374  ef p_music_funct
+0002e300: 696f 6e5f 6361 6c6c 5f5f 4d55 5349 435f  ion_call__MUSIC_
+0002e310: 4655 4e43 5449 4f4e 5f5f 6675 6e63 7469  FUNCTION__functi
+0002e320: 6f6e 5f61 7267 6c69 7374 2873 656c 662c  on_arglist(self,
+0002e330: 2070 293a 0a20 2020 2020 2020 2022 6d75   p):.        "mu
+0002e340: 7369 635f 6675 6e63 7469 6f6e 5f63 616c  sic_function_cal
+0002e350: 6c20 3a20 4d55 5349 435f 4655 4e43 5449  l : MUSIC_FUNCTI
+0002e360: 4f4e 2066 756e 6374 696f 6e5f 6172 676c  ON function_argl
+0002e370: 6973 7422 0a20 2020 2020 2020 2070 5b30  ist".        p[0
+0002e380: 5d20 3d20 7365 6c66 2e63 6c69 656e 742e  ] = self.client.
+0002e390: 5f67 7569 6c65 2870 5b31 5d2c 2070 5b32  _guile(p[1], p[2
+0002e3a0: 5d29 0a0a 2020 2020 2323 2320 6d75 7369  ])..    ### musi
+0002e3b0: 635f 6675 6e63 7469 6f6e 5f63 686f 7264  c_function_chord
+0002e3c0: 5f62 6f64 7920 2323 230a 0a20 2020 2064  _body ###..    d
+0002e3d0: 6566 2070 5f6d 7573 6963 5f66 756e 6374  ef p_music_funct
+0002e3e0: 696f 6e5f 6368 6f72 645f 626f 6479 5f5f  ion_chord_body__
+0002e3f0: 4d55 5349 435f 4655 4e43 5449 4f4e 5f5f  MUSIC_FUNCTION__
+0002e400: 6d75 7369 635f 6675 6e63 7469 6f6e 5f63  music_function_c
+0002e410: 686f 7264 5f62 6f64 795f 6172 676c 6973  hord_body_arglis
+0002e420: 7428 0a20 2020 2020 2020 2073 656c 662c  t(.        self,
+0002e430: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
+0002e440: 2020 226d 7573 6963 5f66 756e 6374 696f    "music_functio
+0002e450: 6e5f 6368 6f72 645f 626f 6479 203a 204d  n_chord_body : M
+0002e460: 5553 4943 5f46 554e 4354 494f 4e20 6d75  USIC_FUNCTION mu
+0002e470: 7369 635f 6675 6e63 7469 6f6e 5f63 686f  sic_function_cho
+0002e480: 7264 5f62 6f64 795f 6172 676c 6973 7422  rd_body_arglist"
+0002e490: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+0002e4a0: 5379 6e74 6178 4e6f 6465 2822 6d75 7369  SyntaxNode("musi
+0002e4b0: 635f 6675 6e63 7469 6f6e 5f63 686f 7264  c_function_chord
+0002e4c0: 5f62 6f64 7922 2c20 702e 5f5f 6765 7473  _body", p.__gets
+0002e4d0: 6c69 6365 5f5f 2831 2c20 4e6f 6e65 2929  lice__(1, None))
+0002e4e0: 0a0a 2020 2020 2323 2320 6d75 7369 635f  ..    ### music_
+0002e4f0: 6675 6e63 7469 6f6e 5f63 686f 7264 5f62  function_chord_b
+0002e500: 6f64 795f 6172 676c 6973 7420 2323 230a  ody_arglist ###.
+0002e510: 0a20 2020 2064 6566 2070 5f6d 7573 6963  .    def p_music
+0002e520: 5f66 756e 6374 696f 6e5f 6368 6f72 645f  _function_chord_
+0002e530: 626f 6479 5f61 7267 6c69 7374 5f5f 4558  body_arglist__EX
+0002e540: 5045 4354 5f53 434d 5f5f 6d75 7369 635f  PECT_SCM__music_
+0002e550: 6675 6e63 7469 6f6e 5f63 686f 7264 5f62  function_chord_b
+0002e560: 6f64 795f 6172 676c 6973 745f 5f65 6d62  ody_arglist__emb
+0002e570: 6564 6465 645f 7363 6d5f 6368 6f72 645f  edded_scm_chord_
+0002e580: 626f 6479 280a 2020 2020 2020 2020 7365  body(.        se
+0002e590: 6c66 2c20 700a 2020 2020 293a 0a20 2020  lf, p.    ):.   
+0002e5a0: 2020 2020 2022 6d75 7369 635f 6675 6e63       "music_func
+0002e5b0: 7469 6f6e 5f63 686f 7264 5f62 6f64 795f  tion_chord_body_
+0002e5c0: 6172 676c 6973 7420 3a20 4558 5045 4354  arglist : EXPECT
+0002e5d0: 5f53 434d 206d 7573 6963 5f66 756e 6374  _SCM music_funct
+0002e5e0: 696f 6e5f 6368 6f72 645f 626f 6479 5f61  ion_chord_body_a
+0002e5f0: 7267 6c69 7374 2065 6d62 6564 6465 645f  rglist embedded_
+0002e600: 7363 6d5f 6368 6f72 645f 626f 6479 220a  scm_chord_body".
+0002e610: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+0002e620: 5b32 5d20 2b20 5b70 5b33 5d5d 0a0a 2020  [2] + [p[3]]..  
+0002e630: 2020 6465 6620 705f 6d75 7369 635f 6675    def p_music_fu
+0002e640: 6e63 7469 6f6e 5f63 686f 7264 5f62 6f64  nction_chord_bod
+0002e650: 795f 6172 676c 6973 745f 5f66 756e 6374  y_arglist__funct
+0002e660: 696f 6e5f 6172 676c 6973 745f 6261 7265  ion_arglist_bare
+0002e670: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+0002e680: 2020 2022 6d75 7369 635f 6675 6e63 7469     "music_functi
+0002e690: 6f6e 5f63 686f 7264 5f62 6f64 795f 6172  on_chord_body_ar
+0002e6a0: 676c 6973 7420 3a20 6675 6e63 7469 6f6e  glist : function
+0002e6b0: 5f61 7267 6c69 7374 5f62 6172 6522 0a20  _arglist_bare". 
+0002e6c0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+0002e6d0: 315d 0a0a 2020 2020 2323 2320 6d75 7369  1]..    ### musi
+0002e6e0: 635f 6675 6e63 7469 6f6e 5f65 7665 6e74  c_function_event
+0002e6f0: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+0002e700: 6d75 7369 635f 6675 6e63 7469 6f6e 5f65  music_function_e
+0002e710: 7665 6e74 5f5f 4d55 5349 435f 4655 4e43  vent__MUSIC_FUNC
+0002e720: 5449 4f4e 5f5f 6675 6e63 7469 6f6e 5f61  TION__function_a
+0002e730: 7267 6c69 7374 5f63 6c6f 7365 6428 7365  rglist_closed(se
+0002e740: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+0002e750: 226d 7573 6963 5f66 756e 6374 696f 6e5f  "music_function_
+0002e760: 6576 656e 7420 3a20 4d55 5349 435f 4655  event : MUSIC_FU
+0002e770: 4e43 5449 4f4e 2066 756e 6374 696f 6e5f  NCTION function_
+0002e780: 6172 676c 6973 745f 636c 6f73 6564 220a  arglist_closed".
+0002e790: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+0002e7a0: 796e 7461 784e 6f64 6528 226d 7573 6963  yntaxNode("music
+0002e7b0: 5f66 756e 6374 696f 6e5f 6576 656e 7422  _function_event"
+0002e7c0: 2c20 702e 5f5f 6765 7473 6c69 6365 5f5f  , p.__getslice__
+0002e7d0: 2831 2c20 4e6f 6e65 2929 0a0a 2020 2020  (1, None))..    
+0002e7e0: 2323 2320 6d75 7369 635f 6c69 7374 2023  ### music_list #
+0002e7f0: 2323 0a0a 2020 2020 6465 6620 705f 6d75  ##..    def p_mu
+0002e800: 7369 635f 6c69 7374 5f5f 456d 7074 7928  sic_list__Empty(
+0002e810: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+0002e820: 2020 226d 7573 6963 5f6c 6973 7420 3a22    "music_list :"
+0002e830: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+0002e840: 5b5d 0a0a 2020 2020 6465 6620 705f 6d75  []..    def p_mu
+0002e850: 7369 635f 6c69 7374 5f5f 6d75 7369 635f  sic_list__music_
+0002e860: 6c69 7374 5f5f 656d 6265 6464 6564 5f73  list__embedded_s
+0002e870: 636d 2873 656c 662c 2070 293a 0a20 2020  cm(self, p):.   
+0002e880: 2020 2020 2022 6d75 7369 635f 6c69 7374       "music_list
+0002e890: 203a 206d 7573 6963 5f6c 6973 7420 656d   : music_list em
+0002e8a0: 6265 6464 6564 5f73 636d 220a 2020 2020  bedded_scm".    
+0002e8b0: 2020 2020 705b 305d 203d 2070 5b31 5d20      p[0] = p[1] 
+0002e8c0: 2b20 5b70 5b32 5d5d 0a0a 2020 2020 6465  + [p[2]]..    de
+0002e8d0: 6620 705f 6d75 7369 635f 6c69 7374 5f5f  f p_music_list__
+0002e8e0: 6d75 7369 635f 6c69 7374 5f5f 6572 726f  music_list__erro
+0002e8f0: 7228 7365 6c66 2c20 7029 3a0a 2020 2020  r(self, p):.    
+0002e900: 2020 2020 226d 7573 6963 5f6c 6973 7420      "music_list 
+0002e910: 3a20 6d75 7369 635f 6c69 7374 2065 7272  : music_list err
+0002e920: 6f72 220a 2020 2020 2020 2020 705b 305d  or".        p[0]
+0002e930: 203d 2070 5b31 5d20 2b20 5b70 5b32 5d5d   = p[1] + [p[2]]
+0002e940: 0a0a 2020 2020 6465 6620 705f 6d75 7369  ..    def p_musi
+0002e950: 635f 6c69 7374 5f5f 6d75 7369 635f 6c69  c_list__music_li
+0002e960: 7374 5f5f 6d75 7369 6328 7365 6c66 2c20  st__music(self, 
+0002e970: 7029 3a0a 2020 2020 2020 2020 226d 7573  p):.        "mus
+0002e980: 6963 5f6c 6973 7420 3a20 6d75 7369 635f  ic_list : music_
+0002e990: 6c69 7374 206d 7573 6963 220a 2020 2020  list music".    
+0002e9a0: 2020 2020 705b 305d 203d 2070 5b31 5d20      p[0] = p[1] 
+0002e9b0: 2b20 5b70 5b32 5d5d 0a0a 2020 2020 2323  + [p[2]]..    ##
+0002e9c0: 2320 6d75 7369 635f 7072 6f70 6572 7479  # music_property
+0002e9d0: 5f64 6566 2023 2323 0a0a 2020 2020 6465  _def ###..    de
+0002e9e0: 6620 705f 6d75 7369 635f 7072 6f70 6572  f p_music_proper
+0002e9f0: 7479 5f64 6566 5f5f 7369 6d70 6c65 5f6d  ty_def__simple_m
+0002ea00: 7573 6963 5f70 726f 7065 7274 795f 6465  usic_property_de
+0002ea10: 6628 7365 6c66 2c20 7029 3a0a 2020 2020  f(self, p):.    
+0002ea20: 2020 2020 226d 7573 6963 5f70 726f 7065      "music_prope
+0002ea30: 7274 795f 6465 6620 3a20 7369 6d70 6c65  rty_def : simple
+0002ea40: 5f6d 7573 6963 5f70 726f 7065 7274 795f  _music_property_
+0002ea50: 6465 6622 0a20 2020 2020 2020 2070 5b30  def".        p[0
+0002ea60: 5d20 3d20 5379 6e74 6178 4e6f 6465 2822  ] = SyntaxNode("
+0002ea70: 6d75 7369 635f 7072 6f70 6572 7479 5f64  music_property_d
+0002ea80: 6566 222c 2070 2e5f 5f67 6574 736c 6963  ef", p.__getslic
+0002ea90: 655f 5f28 312c 204e 6f6e 6529 290a 0a20  e__(1, None)).. 
+0002eaa0: 2020 2023 2323 206e 6577 5f63 686f 7264     ### new_chord
+0002eab0: 2023 2323 0a0a 2020 2020 2320 2020 2064   ###..    #    d
+0002eac0: 6566 2070 5f6e 6577 5f63 686f 7264 5f5f  ef p_new_chord__
+0002ead0: 7374 656e 6f5f 746f 6e69 635f 7069 7463  steno_tonic_pitc
+0002eae0: 685f 5f6f 7074 696f 6e61 6c5f 6e6f 7465  h__optional_note
+0002eaf0: 6d6f 6465 5f64 7572 6174 696f 6e28 7365  mode_duration(se
+0002eb00: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+0002eb10: 2020 2020 2027 6e65 775f 6368 6f72 6420       'new_chord 
+0002eb20: 3a20 7374 656e 6f5f 746f 6e69 635f 7069  : steno_tonic_pi
+0002eb30: 7463 6820 6f70 7469 6f6e 616c 5f6e 6f74  tch optional_not
+0002eb40: 656d 6f64 655f 6475 7261 7469 6f6e 270a  emode_duration'.
+0002eb50: 2020 2020 2320 2020 2020 2020 2070 5b30      #        p[0
+0002eb60: 5d20 3d20 5379 6e74 6178 4e6f 6465 2827  ] = SyntaxNode('
+0002eb70: 6e65 775f 6368 6f72 6427 2c20 705b 313a  new_chord', p[1:
+0002eb80: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
+0002eb90: 2070 5f6e 6577 5f63 686f 7264 5f5f 7374   p_new_chord__st
+0002eba0: 656e 6f5f 746f 6e69 635f 7069 7463 685f  eno_tonic_pitch_
+0002ebb0: 5f6f 7074 696f 6e61 6c5f 6e6f 7465 6d6f  _optional_notemo
+0002ebc0: 6465 5f64 7572 6174 696f 6e5f 5f63 686f  de_duration__cho
+0002ebd0: 7264 5f73 6570 6172 6174 6f72 5f5f 6368  rd_separator__ch
+0002ebe0: 6f72 645f 6974 656d 7328 7365 6c66 2c20  ord_items(self, 
+0002ebf0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+0002ec00: 2027 6e65 775f 6368 6f72 6420 3a20 7374   'new_chord : st
+0002ec10: 656e 6f5f 746f 6e69 635f 7069 7463 6820  eno_tonic_pitch 
+0002ec20: 6f70 7469 6f6e 616c 5f6e 6f74 656d 6f64  optional_notemod
+0002ec30: 655f 6475 7261 7469 6f6e 2063 686f 7264  e_duration chord
+0002ec40: 5f73 6570 6172 6174 6f72 2063 686f 7264  _separator chord
+0002ec50: 5f69 7465 6d73 270a 2020 2020 2320 2020  _items'.    #   
+0002ec60: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
+0002ec70: 6178 4e6f 6465 2827 6e65 775f 6368 6f72  axNode('new_chor
+0002ec80: 6427 2c20 705b 313a 5d29 0a0a 2020 2020  d', p[1:])..    
+0002ec90: 2323 2320 6e65 775f 6c79 7269 6373 2023  ### new_lyrics #
+0002eca0: 2323 0a0a 2020 2020 2320 2020 2064 6566  ##..    #    def
+0002ecb0: 2070 5f6e 6577 5f6c 7972 6963 735f 5f41   p_new_lyrics__A
+0002ecc0: 4444 4c59 5249 4353 5f5f 636f 6d70 6f73  DDLYRICS__compos
+0002ecd0: 6974 655f 6d75 7369 6328 7365 6c66 2c20  ite_music(self, 
+0002ece0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+0002ecf0: 2027 6e65 775f 6c79 7269 6373 203a 2041   'new_lyrics : A
+0002ed00: 4444 4c59 5249 4353 2063 6f6d 706f 7369  DDLYRICS composi
+0002ed10: 7465 5f6d 7573 6963 270a 2020 2020 2320  te_music'.    # 
+0002ed20: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+0002ed30: 6e74 6178 4e6f 6465 2827 6e65 775f 6c79  ntaxNode('new_ly
+0002ed40: 7269 6373 272c 2070 5b31 3a5d 290a 0a20  rics', p[1:]).. 
+0002ed50: 2020 2023 2020 2020 6465 6620 705f 6e65     #    def p_ne
+0002ed60: 775f 6c79 7269 6373 5f5f 6e65 775f 6c79  w_lyrics__new_ly
+0002ed70: 7269 6373 5f5f 4144 444c 5952 4943 535f  rics__ADDLYRICS_
+0002ed80: 5f63 6f6d 706f 7369 7465 5f6d 7573 6963  _composite_music
+0002ed90: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+0002eda0: 2020 2020 2020 2020 276e 6577 5f6c 7972          'new_lyr
+0002edb0: 6963 7320 3a20 6e65 775f 6c79 7269 6373  ics : new_lyrics
+0002edc0: 2041 4444 4c59 5249 4353 2063 6f6d 706f   ADDLYRICS compo
+0002edd0: 7369 7465 5f6d 7573 6963 270a 2020 2020  site_music'.    
+0002ede0: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+0002edf0: 5379 6e74 6178 4e6f 6465 2827 6e65 775f  SyntaxNode('new_
+0002ee00: 6c79 7269 6373 272c 2070 5b31 3a5d 290a  lyrics', p[1:]).
+0002ee10: 0a20 2020 2023 2323 206e 6f74 655f 6368  .    ### note_ch
+0002ee20: 6f72 645f 656c 656d 656e 7420 2323 230a  ord_element ###.
+0002ee30: 0a20 2020 2064 6566 2070 5f6e 6f74 655f  .    def p_note_
+0002ee40: 6368 6f72 645f 656c 656d 656e 745f 5f63  chord_element__c
+0002ee50: 686f 7264 5f62 6f64 795f 5f6f 7074 696f  hord_body__optio
+0002ee60: 6e61 6c5f 6e6f 7465 6d6f 6465 5f64 7572  nal_notemode_dur
+0002ee70: 6174 696f 6e5f 5f70 6f73 745f 6576 656e  ation__post_even
+0002ee80: 7473 280a 2020 2020 2020 2020 7365 6c66  ts(.        self
+0002ee90: 2c20 700a 2020 2020 293a 0a20 2020 2020  , p.    ):.     
+0002eea0: 2020 2022 6e6f 7465 5f63 686f 7264 5f65     "note_chord_e
+0002eeb0: 6c65 6d65 6e74 203a 2063 686f 7264 5f62  lement : chord_b
+0002eec0: 6f64 7920 6f70 7469 6f6e 616c 5f6e 6f74  ody optional_not
+0002eed0: 656d 6f64 655f 6475 7261 7469 6f6e 2070  emode_duration p
+0002eee0: 6f73 745f 6576 656e 7473 220a 2020 2020  ost_events".    
+0002eef0: 2020 2020 6368 6f72 6420 3d20 5f73 636f      chord = _sco
+0002ef00: 7265 2e43 686f 7264 285b 5d2c 2070 5b32  re.Chord([], p[2
+0002ef10: 5d2e 6475 7261 7469 6f6e 290a 2020 2020  ].duration).    
+0002ef20: 2020 2020 7069 7463 6865 7320 3d20 5b5d      pitches = []
+0002ef30: 0a20 2020 2020 2020 2070 6f73 745f 6576  .        post_ev
+0002ef40: 656e 7473 203d 205b 5d0a 2020 2020 2020  ents = [].      
+0002ef50: 2020 666f 7220 6e6f 6465 2069 6e20 705b    for node in p[
+0002ef60: 315d 3a0a 2020 2020 2020 2020 2020 2020  1]:.            
+0002ef70: 7069 7463 6865 732e 6170 7065 6e64 286e  pitches.append(n
+0002ef80: 6f64 655b 305d 2e77 7269 7474 656e 5f70  ode[0].written_p
+0002ef90: 6974 6368 290a 2020 2020 2020 2020 2020  itch).          
+0002efa0: 2020 6368 6f72 642e 6e6f 7465 5f68 6561    chord.note_hea
+0002efb0: 6473 2e61 7070 656e 6428 6e6f 6465 5b30  ds.append(node[0
+0002efc0: 5d29 0a20 2020 2020 2020 2020 2020 2070  ]).            p
+0002efd0: 6f73 745f 6576 656e 7473 2e65 7874 656e  ost_events.exten
+0002efe0: 6428 6e6f 6465 5b31 5d29 0a20 2020 2020  d(node[1]).     
+0002eff0: 2020 2070 6f73 745f 6576 656e 7473 2e65     post_events.e
+0002f000: 7874 656e 6428 705b 335d 290a 2020 2020  xtend(p[3]).    
+0002f010: 2020 2020 7365 6c66 2e63 6c69 656e 742e      self.client.
+0002f020: 5f63 686f 7264 5f70 6974 6368 5f6f 7264  _chord_pitch_ord
+0002f030: 6572 735b 6368 6f72 645d 203d 2070 6974  ers[chord] = pit
+0002f040: 6368 6573 0a20 2020 2020 2020 2069 6620  ches.        if 
+0002f050: 705b 325d 2e6d 756c 7469 706c 6965 7220  p[2].multiplier 
+0002f060: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0002f070: 2020 2020 2020 2020 206d 756c 7469 706c           multipl
+0002f080: 6965 7220 3d20 5f64 7572 6174 696f 6e2e  ier = _duration.
+0002f090: 4d75 6c74 6970 6c69 6572 2870 5b32 5d2e  Multiplier(p[2].
+0002f0a0: 6d75 6c74 6970 6c69 6572 290a 2020 2020  multiplier).    
+0002f0b0: 2020 2020 2020 2020 6368 6f72 642e 6d75          chord.mu
+0002f0c0: 6c74 6970 6c69 6572 203d 206d 756c 7469  ltiplier = multi
+0002f0d0: 706c 6965 720a 2020 2020 2020 2020 7365  plier.        se
+0002f0e0: 6c66 2e63 6c69 656e 742e 5f70 726f 6365  lf.client._proce
+0002f0f0: 7373 5f70 6f73 745f 6576 656e 7473 2863  ss_post_events(c
+0002f100: 686f 7264 2c20 706f 7374 5f65 7665 6e74  hord, post_event
+0002f110: 7329 0a20 2020 2020 2020 2070 5b30 5d20  s).        p[0] 
+0002f120: 3d20 6368 6f72 640a 0a20 2020 2023 2323  = chord..    ###
+0002f130: 206e 756d 6265 725f 6578 7072 6573 7369   number_expressi
+0002f140: 6f6e 2023 2323 0a0a 2020 2020 6465 6620  on ###..    def 
+0002f150: 705f 6e75 6d62 6572 5f65 7870 7265 7373  p_number_express
+0002f160: 696f 6e5f 5f6e 756d 6265 725f 6578 7072  ion__number_expr
+0002f170: 6573 7369 6f6e 5f5f 4368 7234 335f 5f6e  ession__Chr43__n
+0002f180: 756d 6265 725f 7465 726d 2873 656c 662c  umber_term(self,
+0002f190: 2070 293a 0a20 2020 2020 2020 2022 6e75   p):.        "nu
+0002f1a0: 6d62 6572 5f65 7870 7265 7373 696f 6e20  mber_expression 
+0002f1b0: 3a20 6e75 6d62 6572 5f65 7870 7265 7373  : number_express
+0002f1c0: 696f 6e20 272b 2720 6e75 6d62 6572 5f74  ion '+' number_t
+0002f1d0: 6572 6d22 0a20 2020 2020 2020 2070 5b30  erm".        p[0
+0002f1e0: 5d20 3d20 666c 6f61 7428 705b 315d 2920  ] = float(p[1]) 
+0002f1f0: 2b20 705b 335d 0a0a 2020 2020 6465 6620  + p[3]..    def 
+0002f200: 705f 6e75 6d62 6572 5f65 7870 7265 7373  p_number_express
+0002f210: 696f 6e5f 5f6e 756d 6265 725f 6578 7072  ion__number_expr
+0002f220: 6573 7369 6f6e 5f5f 4368 7234 355f 5f6e  ession__Chr45__n
+0002f230: 756d 6265 725f 7465 726d 2873 656c 662c  umber_term(self,
+0002f240: 2070 293a 0a20 2020 2020 2020 2022 6e75   p):.        "nu
+0002f250: 6d62 6572 5f65 7870 7265 7373 696f 6e20  mber_expression 
+0002f260: 3a20 6e75 6d62 6572 5f65 7870 7265 7373  : number_express
+0002f270: 696f 6e20 272d 2720 6e75 6d62 6572 5f74  ion '-' number_t
+0002f280: 6572 6d22 0a20 2020 2020 2020 2070 5b30  erm".        p[0
+0002f290: 5d20 3d20 666c 6f61 7428 705b 315d 2920  ] = float(p[1]) 
+0002f2a0: 2d20 705b 335d 0a0a 2020 2020 6465 6620  - p[3]..    def 
+0002f2b0: 705f 6e75 6d62 6572 5f65 7870 7265 7373  p_number_express
+0002f2c0: 696f 6e5f 5f6e 756d 6265 725f 7465 726d  ion__number_term
+0002f2d0: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+0002f2e0: 2020 2022 6e75 6d62 6572 5f65 7870 7265     "number_expre
+0002f2f0: 7373 696f 6e20 3a20 6e75 6d62 6572 5f74  ssion : number_t
+0002f300: 6572 6d22 0a20 2020 2020 2020 2070 5b30  erm".        p[0
+0002f310: 5d20 3d20 705b 315d 0a0a 2020 2020 2323  ] = p[1]..    ##
+0002f320: 2320 6e75 6d62 6572 5f66 6163 746f 7220  # number_factor 
+0002f330: 2323 230a 0a20 2020 2064 6566 2070 5f6e  ###..    def p_n
+0002f340: 756d 6265 725f 6661 6374 6f72 5f5f 4368  umber_factor__Ch
+0002f350: 7234 355f 5f6e 756d 6265 725f 6661 6374  r45__number_fact
+0002f360: 6f72 2873 656c 662c 2070 293a 0a20 2020  or(self, p):.   
+0002f370: 2020 2020 2022 6e75 6d62 6572 5f66 6163       "number_fac
+0002f380: 746f 7220 3a20 272d 2720 6e75 6d62 6572  tor : '-' number
+0002f390: 5f66 6163 746f 7222 0a20 2020 2020 2020  _factor".       
+0002f3a0: 2070 5b30 5d20 3d20 2d31 202a 2070 5b32   p[0] = -1 * p[2
+0002f3b0: 5d0a 0a20 2020 2064 6566 2070 5f6e 756d  ]..    def p_num
+0002f3c0: 6265 725f 6661 6374 6f72 5f5f 6261 7265  ber_factor__bare
+0002f3d0: 5f6e 756d 6265 7228 7365 6c66 2c20 7029  _number(self, p)
+0002f3e0: 3a0a 2020 2020 2020 2020 226e 756d 6265  :.        "numbe
+0002f3f0: 725f 6661 6374 6f72 203a 2062 6172 655f  r_factor : bare_
+0002f400: 6e75 6d62 6572 220a 2020 2020 2020 2020  number".        
+0002f410: 705b 305d 203d 2070 5b31 5d0a 0a20 2020  p[0] = p[1]..   
+0002f420: 2023 2323 206e 756d 6265 725f 7465 726d   ### number_term
+0002f430: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+0002f440: 6e75 6d62 6572 5f74 6572 6d5f 5f6e 756d  number_term__num
+0002f450: 6265 725f 6661 6374 6f72 2873 656c 662c  ber_factor(self,
+0002f460: 2070 293a 0a20 2020 2020 2020 2022 6e75   p):.        "nu
+0002f470: 6d62 6572 5f74 6572 6d20 3a20 6e75 6d62  mber_term : numb
+0002f480: 6572 5f66 6163 746f 7222 0a20 2020 2020  er_factor".     
+0002f490: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+0002f4a0: 2020 2020 6465 6620 705f 6e75 6d62 6572      def p_number
+0002f4b0: 5f74 6572 6d5f 5f6e 756d 6265 725f 6661  _term__number_fa
+0002f4c0: 6374 6f72 5f5f 4368 7234 325f 5f6e 756d  ctor__Chr42__num
+0002f4d0: 6265 725f 6661 6374 6f72 2873 656c 662c  ber_factor(self,
+0002f4e0: 2070 293a 0a20 2020 2020 2020 2022 6e75   p):.        "nu
+0002f4f0: 6d62 6572 5f74 6572 6d20 3a20 6e75 6d62  mber_term : numb
+0002f500: 6572 5f66 6163 746f 7220 272a 2720 6e75  er_factor '*' nu
+0002f510: 6d62 6572 5f66 6163 746f 7222 0a20 2020  mber_factor".   
+0002f520: 2020 2020 2070 5b30 5d20 3d20 666c 6f61       p[0] = floa
+0002f530: 7428 705b 315d 2920 2a20 705b 335d 0a0a  t(p[1]) * p[3]..
+0002f540: 2020 2020 6465 6620 705f 6e75 6d62 6572      def p_number
+0002f550: 5f74 6572 6d5f 5f6e 756d 6265 725f 6661  _term__number_fa
+0002f560: 6374 6f72 5f5f 4368 7234 375f 5f6e 756d  ctor__Chr47__num
+0002f570: 6265 725f 6661 6374 6f72 2873 656c 662c  ber_factor(self,
+0002f580: 2070 293a 0a20 2020 2020 2020 2022 6e75   p):.        "nu
+0002f590: 6d62 6572 5f74 6572 6d20 3a20 6e75 6d62  mber_term : numb
+0002f5a0: 6572 5f66 6163 746f 7220 272f 2720 6e75  er_factor '/' nu
+0002f5b0: 6d62 6572 5f66 6163 746f 7222 0a20 2020  mber_factor".   
+0002f5c0: 2020 2020 2070 5b30 5d20 3d20 666c 6f61       p[0] = floa
+0002f5d0: 7428 705b 315d 2920 2f20 705b 335d 0a0a  t(p[1]) / p[3]..
+0002f5e0: 2020 2020 2323 2320 6f63 7461 7665 5f63      ### octave_c
+0002f5f0: 6865 636b 2023 2323 0a0a 2020 2020 6465  heck ###..    de
+0002f600: 6620 705f 6f63 7461 7665 5f63 6865 636b  f p_octave_check
+0002f610: 5f5f 4368 7236 3128 7365 6c66 2c20 7029  __Chr61(self, p)
+0002f620: 3a0a 2020 2020 2020 2020 226f 6374 6176  :.        "octav
+0002f630: 655f 6368 6563 6b20 3a20 273d 2722 0a20  e_check : '='". 
+0002f640: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+0002f650: 6e74 6178 4e6f 6465 2822 6f63 7461 7665  ntaxNode("octave
+0002f660: 5f63 6865 636b 222c 2070 2e5f 5f67 6574  _check", p.__get
+0002f670: 736c 6963 655f 5f28 312c 204e 6f6e 6529  slice__(1, None)
+0002f680: 290a 0a20 2020 2064 6566 2070 5f6f 6374  )..    def p_oct
+0002f690: 6176 655f 6368 6563 6b5f 5f43 6872 3631  ave_check__Chr61
+0002f6a0: 5f5f 7375 625f 7175 6f74 6573 2873 656c  __sub_quotes(sel
+0002f6b0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+0002f6c0: 6f63 7461 7665 5f63 6865 636b 203a 2027  octave_check : '
+0002f6d0: 3d27 2073 7562 5f71 756f 7465 7322 0a20  =' sub_quotes". 
+0002f6e0: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+0002f6f0: 6e74 6178 4e6f 6465 2822 6f63 7461 7665  ntaxNode("octave
+0002f700: 5f63 6865 636b 222c 2070 2e5f 5f67 6574  _check", p.__get
+0002f710: 736c 6963 655f 5f28 312c 204e 6f6e 6529  slice__(1, None)
+0002f720: 290a 0a20 2020 2064 6566 2070 5f6f 6374  )..    def p_oct
+0002f730: 6176 655f 6368 6563 6b5f 5f43 6872 3631  ave_check__Chr61
+0002f740: 5f5f 7375 705f 7175 6f74 6573 2873 656c  __sup_quotes(sel
+0002f750: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+0002f760: 6f63 7461 7665 5f63 6865 636b 203a 2027  octave_check : '
+0002f770: 3d27 2073 7570 5f71 756f 7465 7322 0a20  =' sup_quotes". 
+0002f780: 2020 2020 2020 2070 5b30 5d20 3d20 5379         p[0] = Sy
+0002f790: 6e74 6178 4e6f 6465 2822 6f63 7461 7665  ntaxNode("octave
+0002f7a0: 5f63 6865 636b 222c 2070 2e5f 5f67 6574  _check", p.__get
+0002f7b0: 736c 6963 655f 5f28 312c 204e 6f6e 6529  slice__(1, None)
+0002f7c0: 290a 0a20 2020 2064 6566 2070 5f6f 6374  )..    def p_oct
+0002f7d0: 6176 655f 6368 6563 6b5f 5f45 6d70 7479  ave_check__Empty
+0002f7e0: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+0002f7f0: 2020 2022 6f63 7461 7665 5f63 6865 636b     "octave_check
+0002f800: 203a 220a 2020 2020 2020 2020 705b 305d   :".        p[0]
+0002f810: 203d 2053 796e 7461 784e 6f64 6528 226f   = SyntaxNode("o
+0002f820: 6374 6176 655f 6368 6563 6b22 2c20 702e  ctave_check", p.
+0002f830: 5f5f 6765 7473 6c69 6365 5f5f 2831 2c20  __getslice__(1, 
+0002f840: 4e6f 6e65 2929 0a0a 2020 2020 2323 2320  None))..    ### 
+0002f850: 6f70 7469 6f6e 616c 5f63 6f6e 7465 7874  optional_context
+0002f860: 5f6d 6f64 2023 2323 0a0a 2020 2020 6465  _mod ###..    de
+0002f870: 6620 705f 6f70 7469 6f6e 616c 5f63 6f6e  f p_optional_con
+0002f880: 7465 7874 5f6d 6f64 5f5f 456d 7074 7928  text_mod__Empty(
+0002f890: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+0002f8a0: 2020 226f 7074 696f 6e61 6c5f 636f 6e74    "optional_cont
+0002f8b0: 6578 745f 6d6f 6420 3a22 0a20 2020 2020  ext_mod :".     
+0002f8c0: 2020 2070 5b30 5d20 3d20 5b5d 0a0a 2020     p[0] = []..  
+0002f8d0: 2020 6465 6620 705f 6f70 7469 6f6e 616c    def p_optional
+0002f8e0: 5f63 6f6e 7465 7874 5f6d 6f64 5f5f 636f  _context_mod__co
+0002f8f0: 6e74 6578 745f 6d6f 6469 6669 6361 7469  ntext_modificati
+0002f900: 6f6e 2873 656c 662c 2070 293a 0a20 2020  on(self, p):.   
+0002f910: 2020 2020 2022 6f70 7469 6f6e 616c 5f63       "optional_c
+0002f920: 6f6e 7465 7874 5f6d 6f64 203a 2063 6f6e  ontext_mod : con
+0002f930: 7465 7874 5f6d 6f64 6966 6963 6174 696f  text_modificatio
+0002f940: 6e22 0a20 2020 2020 2020 2070 5b30 5d20  n".        p[0] 
+0002f950: 3d20 705b 315d 0a0a 2020 2020 2323 2320  = p[1]..    ### 
+0002f960: 6f70 7469 6f6e 616c 5f69 6420 2323 230a  optional_id ###.
+0002f970: 0a20 2020 2064 6566 2070 5f6f 7074 696f  .    def p_optio
+0002f980: 6e61 6c5f 6964 5f5f 4368 7236 315f 5f73  nal_id__Chr61__s
+0002f990: 696d 706c 655f 7374 7269 6e67 2873 656c  imple_string(sel
+0002f9a0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+0002f9b0: 6f70 7469 6f6e 616c 5f69 6420 3a20 273d  optional_id : '=
+0002f9c0: 2720 7369 6d70 6c65 5f73 7472 696e 6722  ' simple_string"
+0002f9d0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+0002f9e0: 705b 325d 0a0a 2020 2020 6465 6620 705f  p[2]..    def p_
+0002f9f0: 6f70 7469 6f6e 616c 5f69 645f 5f45 6d70  optional_id__Emp
+0002fa00: 7479 2873 656c 662c 2070 293a 0a20 2020  ty(self, p):.   
+0002fa10: 2020 2020 2022 6f70 7469 6f6e 616c 5f69       "optional_i
+0002fa20: 6420 3a22 0a20 2020 2020 2020 2070 5b30  d :".        p[0
+0002fa30: 5d20 3d20 4e6f 6e65 0a0a 2020 2020 2323  ] = None..    ##
+0002fa40: 2320 6f70 7469 6f6e 616c 5f6e 6f74 656d  # optional_notem
+0002fa50: 6f64 655f 6475 7261 7469 6f6e 2023 2323  ode_duration ###
+0002fa60: 0a0a 2020 2020 6465 6620 705f 6f70 7469  ..    def p_opti
+0002fa70: 6f6e 616c 5f6e 6f74 656d 6f64 655f 6475  onal_notemode_du
+0002fa80: 7261 7469 6f6e 5f5f 456d 7074 7928 7365  ration__Empty(se
+0002fa90: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+0002faa0: 226f 7074 696f 6e61 6c5f 6e6f 7465 6d6f  "optional_notemo
+0002fab0: 6465 5f64 7572 6174 696f 6e20 3a22 0a20  de_duration :". 
+0002fac0: 2020 2020 2020 2070 5b30 5d20 3d20 7365         p[0] = se
+0002fad0: 6c66 2e63 6c69 656e 742e 5f64 6566 6175  lf.client._defau
+0002fae0: 6c74 5f64 7572 6174 696f 6e0a 0a20 2020  lt_duration..   
+0002faf0: 2064 6566 2070 5f6f 7074 696f 6e61 6c5f   def p_optional_
+0002fb00: 6e6f 7465 6d6f 6465 5f64 7572 6174 696f  notemode_duratio
+0002fb10: 6e5f 5f6d 756c 7469 706c 6965 645f 6475  n__multiplied_du
+0002fb20: 7261 7469 6f6e 2873 656c 662c 2070 293a  ration(self, p):
+0002fb30: 0a20 2020 2020 2020 2022 6f70 7469 6f6e  .        "option
+0002fb40: 616c 5f6e 6f74 656d 6f64 655f 6475 7261  al_notemode_dura
+0002fb50: 7469 6f6e 203a 206d 756c 7469 706c 6965  tion : multiplie
+0002fb60: 645f 6475 7261 7469 6f6e 220a 2020 2020  d_duration".    
+0002fb70: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
+0002fb80: 2020 2020 2020 2020 7365 6c66 2e63 6c69          self.cli
+0002fb90: 656e 742e 5f64 6566 6175 6c74 5f64 7572  ent._default_dur
+0002fba0: 6174 696f 6e20 3d20 705b 315d 0a0a 2020  ation = p[1]..  
+0002fbb0: 2020 2323 2320 6f70 7469 6f6e 616c 5f72    ### optional_r
+0002fbc0: 6573 7420 2323 230a 0a20 2020 2064 6566  est ###..    def
+0002fbd0: 2070 5f6f 7074 696f 6e61 6c5f 7265 7374   p_optional_rest
+0002fbe0: 5f5f 456d 7074 7928 7365 6c66 2c20 7029  __Empty(self, p)
+0002fbf0: 3a0a 2020 2020 2020 2020 226f 7074 696f  :.        "optio
+0002fc00: 6e61 6c5f 7265 7374 203a 220a 2020 2020  nal_rest :".    
+0002fc10: 2020 2020 705b 305d 203d 2046 616c 7365      p[0] = False
+0002fc20: 0a0a 2020 2020 6465 6620 705f 6f70 7469  ..    def p_opti
+0002fc30: 6f6e 616c 5f72 6573 745f 5f52 4553 5428  onal_rest__REST(
+0002fc40: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+0002fc50: 2020 226f 7074 696f 6e61 6c5f 7265 7374    "optional_rest
+0002fc60: 203a 2052 4553 5422 0a20 2020 2020 2020   : REST".       
+0002fc70: 2070 5b30 5d20 3d20 5472 7565 0a0a 2020   p[0] = True..  
+0002fc80: 2020 2323 2320 6f75 7470 7574 5f64 6566    ### output_def
+0002fc90: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+0002fca0: 6f75 7470 7574 5f64 6566 5f5f 6f75 7470  output_def__outp
+0002fcb0: 7574 5f64 6566 5f62 6f64 795f 5f43 6872  ut_def_body__Chr
+0002fcc0: 3132 3528 7365 6c66 2c20 7029 3a0a 2020  125(self, p):.  
+0002fcd0: 2020 2020 2020 226f 7574 7075 745f 6465        "output_de
+0002fce0: 6620 3a20 6f75 7470 7574 5f64 6566 5f62  f : output_def_b
+0002fcf0: 6f64 7920 277d 2722 0a20 2020 2020 2020  ody '}'".       
+0002fd00: 2070 5b30 5d20 3d20 705b 315d 0a20 2020   p[0] = p[1].   
+0002fd10: 2020 2020 2073 656c 662e 636c 6965 6e74       self.client
+0002fd20: 2e5f 706f 705f 7661 7269 6162 6c65 5f73  ._pop_variable_s
+0002fd30: 636f 7065 2829 0a20 2020 2020 2020 2073  cope().        s
+0002fd40: 656c 662e 636c 6965 6e74 2e5f 6c65 7865  elf.client._lexe
+0002fd50: 722e 706f 705f 7374 6174 6528 290a 2020  r.pop_state().  
+0002fd60: 2020 2020 2020 7365 6c66 2e63 6c69 656e        self.clien
+0002fd70: 742e 5f72 656c 6578 5f6c 6f6f 6b61 6865  t._relex_lookahe
+0002fd80: 6164 2829 0a0a 2020 2020 2323 2320 6f75  ad()..    ### ou
+0002fd90: 7470 7574 5f64 6566 5f62 6f64 7920 2323  tput_def_body ##
+0002fda0: 230a 0a20 2020 2064 6566 2070 5f6f 7574  #..    def p_out
+0002fdb0: 7075 745f 6465 665f 626f 6479 5f5f 6f75  put_def_body__ou
+0002fdc0: 7470 7574 5f64 6566 5f62 6f64 795f 5f61  tput_def_body__a
+0002fdd0: 7373 6967 6e6d 656e 7428 7365 6c66 2c20  ssignment(self, 
+0002fde0: 7029 3a0a 2020 2020 2020 2020 226f 7574  p):.        "out
+0002fdf0: 7075 745f 6465 665f 626f 6479 203a 206f  put_def_body : o
+0002fe00: 7574 7075 745f 6465 665f 626f 6479 2061  utput_def_body a
+0002fe10: 7373 6967 6e6d 656e 7422 0a20 2020 2020  ssignment".     
+0002fe20: 2020 2073 656c 662e 636c 6965 6e74 2e5f     self.client._
+0002fe30: 6173 7369 676e 5f76 6172 6961 626c 6528  assign_variable(
+0002fe40: 705b 325d 5b30 5d2c 2070 5b32 5d5b 315d  p[2][0], p[2][1]
+0002fe50: 290a 2020 2020 2020 2020 7365 7461 7474  ).        setatt
+0002fe60: 7228 705b 315d 2c20 705b 325d 5b30 5d2c  r(p[1], p[2][0],
+0002fe70: 2070 5b32 5d5b 315d 2e76 616c 7565 290a   p[2][1].value).
+0002fe80: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+0002fe90: 5b31 5d0a 0a20 2020 2023 2020 2020 6465  [1]..    #    de
+0002fea0: 6620 705f 6f75 7470 7574 5f64 6566 5f62  f p_output_def_b
+0002feb0: 6f64 795f 5f6f 7574 7075 745f 6465 665f  ody__output_def_
+0002fec0: 626f 6479 5f5f 636f 6e74 6578 745f 6465  body__context_de
+0002fed0: 665f 7370 6563 5f62 6c6f 636b 2873 656c  f_spec_block(sel
+0002fee0: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
+0002fef0: 2020 2020 276f 7574 7075 745f 6465 665f      'output_def_
+0002ff00: 626f 6479 203a 206f 7574 7075 745f 6465  body : output_de
+0002ff10: 665f 626f 6479 2063 6f6e 7465 7874 5f64  f_body context_d
+0002ff20: 6566 5f73 7065 635f 626c 6f63 6b27 0a20  ef_spec_block'. 
+0002ff30: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
+0002ff40: 203d 2053 796e 7461 784e 6f64 6528 276f   = SyntaxNode('o
+0002ff50: 7574 7075 745f 6465 665f 626f 6479 272c  utput_def_body',
+0002ff60: 2070 5b31 3a5d 290a 0a20 2020 2023 2020   p[1:])..    #  
+0002ff70: 2020 6465 6620 705f 6f75 7470 7574 5f64    def p_output_d
+0002ff80: 6566 5f62 6f64 795f 5f6f 7574 7075 745f  ef_body__output_
+0002ff90: 6465 665f 626f 6479 5f5f 6572 726f 7228  def_body__error(
+0002ffa0: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
+0002ffb0: 2020 2020 2020 2027 6f75 7470 7574 5f64         'output_d
+0002ffc0: 6566 5f62 6f64 7920 3a20 6f75 7470 7574  ef_body : output
+0002ffd0: 5f64 6566 5f62 6f64 7920 6572 726f 7227  _def_body error'
+0002ffe0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+0002fff0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+00030000: 276f 7574 7075 745f 6465 665f 626f 6479  'output_def_body
+00030010: 272c 2070 5b31 3a5d 290a 0a20 2020 2064  ', p[1:])..    d
+00030020: 6566 2070 5f6f 7574 7075 745f 6465 665f  ef p_output_def_
+00030030: 626f 6479 5f5f 6f75 7470 7574 5f64 6566  body__output_def
+00030040: 5f68 6561 645f 7769 7468 5f6d 6f64 655f  _head_with_mode_
+00030050: 7377 6974 6368 5f5f 4368 7231 3233 2873  switch__Chr123(s
+00030060: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00030070: 2022 6f75 7470 7574 5f64 6566 5f62 6f64   "output_def_bod
+00030080: 7920 3a20 6f75 7470 7574 5f64 6566 5f68  y : output_def_h
+00030090: 6561 645f 7769 7468 5f6d 6f64 655f 7377  ead_with_mode_sw
+000300a0: 6974 6368 2027 7b27 220a 2020 2020 2020  itch '{'".      
+000300b0: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
+000300c0: 2020 2064 6566 2070 5f6f 7574 7075 745f     def p_output_
+000300d0: 6465 665f 626f 6479 5f5f 6f75 7470 7574  def_body__output
+000300e0: 5f64 6566 5f68 6561 645f 7769 7468 5f6d  _def_head_with_m
+000300f0: 6f64 655f 7377 6974 6368 5f5f 4368 7231  ode_switch__Chr1
+00030100: 3233 5f5f 4f55 5450 5554 5f44 4546 5f49  23__OUTPUT_DEF_I
+00030110: 4445 4e54 4946 4945 5228 0a20 2020 2020  DENTIFIER(.     
+00030120: 2020 2073 656c 662c 2070 0a20 2020 2029     self, p.    )
+00030130: 3a0a 2020 2020 2020 2020 226f 7574 7075  :.        "outpu
+00030140: 745f 6465 665f 626f 6479 203a 206f 7574  t_def_body : out
+00030150: 7075 745f 6465 665f 6865 6164 5f77 6974  put_def_head_wit
+00030160: 685f 6d6f 6465 5f73 7769 7463 6820 277b  h_mode_switch '{
+00030170: 2720 4f55 5450 5554 5f44 4546 5f49 4445  ' OUTPUT_DEF_IDE
+00030180: 4e54 4946 4945 5222 0a20 2020 2020 2020  NTIFIER".       
+00030190: 2070 5b30 5d20 3d20 705b 325d 0a0a 2020   p[0] = p[2]..  
+000301a0: 2020 2323 2320 6f75 7470 7574 5f64 6566    ### output_def
+000301b0: 5f68 6561 6420 2323 230a 0a20 2020 2064  _head ###..    d
+000301c0: 6566 2070 5f6f 7574 7075 745f 6465 665f  ef p_output_def_
+000301d0: 6865 6164 5f5f 4c41 594f 5554 2873 656c  head__LAYOUT(sel
+000301e0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+000301f0: 6f75 7470 7574 5f64 6566 5f68 6561 6420  output_def_head 
+00030200: 3a20 4c41 594f 5554 220a 2020 2020 2020  : LAYOUT".      
+00030210: 2020 705b 305d 203d 205f 6c69 6c79 706f    p[0] = _lilypo
+00030220: 6e64 6669 6c65 2e42 6c6f 636b 286e 616d  ndfile.Block(nam
+00030230: 653d 226c 6179 6f75 7422 290a 2020 2020  e="layout").    
+00030240: 2020 2020 7365 6c66 2e63 6c69 656e 742e      self.client.
+00030250: 5f70 7573 685f 7661 7269 6162 6c65 5f73  _push_variable_s
+00030260: 636f 7065 2829 0a0a 2020 2020 6465 6620  cope()..    def 
+00030270: 705f 6f75 7470 7574 5f64 6566 5f68 6561  p_output_def_hea
+00030280: 645f 5f4d 4944 4928 7365 6c66 2c20 7029  d__MIDI(self, p)
+00030290: 3a0a 2020 2020 2020 2020 226f 7574 7075  :.        "outpu
+000302a0: 745f 6465 665f 6865 6164 203a 204d 4944  t_def_head : MID
+000302b0: 4922 0a20 2020 2020 2020 2070 5b30 5d20  I".        p[0] 
+000302c0: 3d20 5f6c 696c 7970 6f6e 6466 696c 652e  = _lilypondfile.
+000302d0: 426c 6f63 6b28 6e61 6d65 3d22 6d69 6469  Block(name="midi
+000302e0: 2229 0a20 2020 2020 2020 2073 656c 662e  ").        self.
+000302f0: 636c 6965 6e74 2e5f 7075 7368 5f76 6172  client._push_var
+00030300: 6961 626c 655f 7363 6f70 6528 290a 0a20  iable_scope().. 
+00030310: 2020 2064 6566 2070 5f6f 7574 7075 745f     def p_output_
+00030320: 6465 665f 6865 6164 5f5f 5041 5045 5228  def_head__PAPER(
+00030330: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+00030340: 2020 226f 7574 7075 745f 6465 665f 6865    "output_def_he
+00030350: 6164 203a 2050 4150 4552 220a 2020 2020  ad : PAPER".    
+00030360: 2020 2020 705b 305d 203d 205f 6c69 6c79      p[0] = _lily
+00030370: 706f 6e64 6669 6c65 2e42 6c6f 636b 286e  pondfile.Block(n
+00030380: 616d 653d 2270 6170 6572 2229 0a20 2020  ame="paper").   
+00030390: 2020 2020 2073 656c 662e 636c 6965 6e74       self.client
+000303a0: 2e5f 7075 7368 5f76 6172 6961 626c 655f  ._push_variable_
+000303b0: 7363 6f70 6528 290a 0a20 2020 2023 2323  scope()..    ###
+000303c0: 206f 7574 7075 745f 6465 665f 6865 6164   output_def_head
+000303d0: 5f77 6974 685f 6d6f 6465 5f73 7769 7463  _with_mode_switc
+000303e0: 6820 2323 230a 0a20 2020 2064 6566 2070  h ###..    def p
+000303f0: 5f6f 7574 7075 745f 6465 665f 6865 6164  _output_def_head
+00030400: 5f77 6974 685f 6d6f 6465 5f73 7769 7463  _with_mode_switc
+00030410: 685f 5f6f 7574 7075 745f 6465 665f 6865  h__output_def_he
+00030420: 6164 2873 656c 662c 2070 293a 0a20 2020  ad(self, p):.   
+00030430: 2020 2020 2022 6f75 7470 7574 5f64 6566       "output_def
+00030440: 5f68 6561 645f 7769 7468 5f6d 6f64 655f  _head_with_mode_
+00030450: 7377 6974 6368 203a 206f 7574 7075 745f  switch : output_
+00030460: 6465 665f 6865 6164 220a 2020 2020 2020  def_head".      
+00030470: 2020 705b 305d 203d 2070 5b31 5d0a 2020    p[0] = p[1].  
+00030480: 2020 2020 2020 7365 6c66 2e63 6c69 656e        self.clien
+00030490: 742e 5f6c 6578 6572 2e70 7573 685f 7374  t._lexer.push_st
+000304a0: 6174 6528 2249 4e49 5449 414c 2229 0a0a  ate("INITIAL")..
+000304b0: 2020 2020 2323 2320 7061 7065 725f 626c      ### paper_bl
+000304c0: 6f63 6b20 2323 230a 0a20 2020 2023 2020  ock ###..    #  
+000304d0: 2020 6465 6620 705f 7061 7065 725f 626c    def p_paper_bl
+000304e0: 6f63 6b5f 5f6f 7574 7075 745f 6465 6628  ock__output_def(
+000304f0: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
+00030500: 2020 2020 2020 2027 7061 7065 725f 626c         'paper_bl
+00030510: 6f63 6b20 3a20 6f75 7470 7574 5f64 6566  ock : output_def
+00030520: 270a 2020 2020 2320 2020 2020 2020 2070  '.    #        p
+00030530: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
+00030540: 2323 2320 7069 7463 6820 2323 230a 0a20  ### pitch ###.. 
+00030550: 2020 2064 6566 2070 5f70 6974 6368 5f5f     def p_pitch__
+00030560: 5049 5443 485f 4944 454e 5449 4649 4552  PITCH_IDENTIFIER
+00030570: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+00030580: 2020 2022 7069 7463 6820 3a20 5049 5443     "pitch : PITC
+00030590: 485f 4944 454e 5449 4649 4552 220a 2020  H_IDENTIFIER".  
+000305a0: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
+000305b0: 5d0a 0a20 2020 2064 6566 2070 5f70 6974  ]..    def p_pit
+000305c0: 6368 5f5f 7374 656e 6f5f 7069 7463 6828  ch__steno_pitch(
+000305d0: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+000305e0: 2020 2270 6974 6368 203a 2073 7465 6e6f    "pitch : steno
+000305f0: 5f70 6974 6368 220a 2020 2020 2020 2020  _pitch".        
+00030600: 705b 305d 203d 2070 5b31 5d0a 0a20 2020  p[0] = p[1]..   
+00030610: 2023 2323 2070 6974 6368 5f61 6c73 6f5f   ### pitch_also_
+00030620: 696e 5f63 686f 7264 7320 2323 230a 0a20  in_chords ###.. 
+00030630: 2020 2064 6566 2070 5f70 6974 6368 5f61     def p_pitch_a
+00030640: 6c73 6f5f 696e 5f63 686f 7264 735f 5f70  lso_in_chords__p
+00030650: 6974 6368 2873 656c 662c 2070 293a 0a20  itch(self, p):. 
+00030660: 2020 2020 2020 2022 7069 7463 685f 616c         "pitch_al
+00030670: 736f 5f69 6e5f 6368 6f72 6473 203a 2070  so_in_chords : p
+00030680: 6974 6368 220a 2020 2020 2020 2020 705b  itch".        p[
+00030690: 305d 203d 2070 5b31 5d0a 0a20 2020 2064  0] = p[1]..    d
+000306a0: 6566 2070 5f70 6974 6368 5f61 6c73 6f5f  ef p_pitch_also_
+000306b0: 696e 5f63 686f 7264 735f 5f73 7465 6e6f  in_chords__steno
+000306c0: 5f74 6f6e 6963 5f70 6974 6368 2873 656c  _tonic_pitch(sel
+000306d0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+000306e0: 7069 7463 685f 616c 736f 5f69 6e5f 6368  pitch_also_in_ch
+000306f0: 6f72 6473 203a 2073 7465 6e6f 5f74 6f6e  ords : steno_ton
+00030700: 6963 5f70 6974 6368 220a 2020 2020 2020  ic_pitch".      
+00030710: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
+00030720: 2020 2023 2323 2070 6f73 745f 6576 656e     ### post_even
+00030730: 7420 2323 230a 0a20 2020 2064 6566 2070  t ###..    def p
+00030740: 5f70 6f73 745f 6576 656e 745f 5f43 6872  _post_event__Chr
+00030750: 3435 5f5f 6669 6e67 6572 696e 6728 7365  45__fingering(se
+00030760: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+00030770: 2270 6f73 745f 6576 656e 7420 3a20 272d  "post_event : '-
+00030780: 2720 6669 6e67 6572 696e 6722 0a20 2020  ' fingering".   
+00030790: 2020 2020 2070 5b30 5d20 3d20 4e6f 6e65       p[0] = None
+000307a0: 0a0a 2020 2020 6465 6620 705f 706f 7374  ..    def p_post
+000307b0: 5f65 7665 6e74 5f5f 706f 7374 5f65 7665  _event__post_eve
+000307c0: 6e74 5f6e 6f66 696e 6765 7228 7365 6c66  nt_nofinger(self
+000307d0: 2c20 7029 3a0a 2020 2020 2020 2020 2270  , p):.        "p
+000307e0: 6f73 745f 6576 656e 7420 3a20 706f 7374  ost_event : post
+000307f0: 5f65 7665 6e74 5f6e 6f66 696e 6765 7222  _event_nofinger"
+00030800: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00030810: 705b 315d 0a0a 2020 2020 2323 2320 706f  p[1]..    ### po
+00030820: 7374 5f65 7665 6e74 5f6e 6f66 696e 6765  st_event_nofinge
+00030830: 7220 2323 230a 0a20 2020 2064 6566 2070  r ###..    def p
+00030840: 5f70 6f73 745f 6576 656e 745f 6e6f 6669  _post_event_nofi
+00030850: 6e67 6572 5f5f 4368 7239 345f 5f66 696e  nger__Chr94__fin
+00030860: 6765 7269 6e67 2873 656c 662c 2070 293a  gering(self, p):
+00030870: 0a20 2020 2020 2020 2022 706f 7374 5f65  .        "post_e
+00030880: 7665 6e74 5f6e 6f66 696e 6765 7220 3a20  vent_nofinger : 
+00030890: 275e 2720 6669 6e67 6572 696e 6722 0a20  '^' fingering". 
+000308a0: 2020 2020 2020 2070 5b30 5d20 3d20 4e6f         p[0] = No
+000308b0: 6e65 0a0a 2020 2020 6465 6620 705f 706f  ne..    def p_po
+000308c0: 7374 5f65 7665 6e74 5f6e 6f66 696e 6765  st_event_nofinge
+000308d0: 725f 5f43 6872 3935 5f5f 6669 6e67 6572  r__Chr95__finger
+000308e0: 696e 6728 7365 6c66 2c20 7029 3a0a 2020  ing(self, p):.  
+000308f0: 2020 2020 2020 2270 6f73 745f 6576 656e        "post_even
+00030900: 745f 6e6f 6669 6e67 6572 203a 2027 5f27  t_nofinger : '_'
+00030910: 2066 696e 6765 7269 6e67 220a 2020 2020   fingering".    
+00030920: 2020 2020 705b 305d 203d 204e 6f6e 650a      p[0] = None.
+00030930: 0a20 2020 2064 6566 2070 5f70 6f73 745f  .    def p_post_
+00030940: 6576 656e 745f 6e6f 6669 6e67 6572 5f5f  event_nofinger__
+00030950: 4558 5445 4e44 4552 2873 656c 662c 2070  EXTENDER(self, p
+00030960: 293a 0a20 2020 2020 2020 2022 706f 7374  ):.        "post
+00030970: 5f65 7665 6e74 5f6e 6f66 696e 6765 7220  _event_nofinger 
+00030980: 3a20 4558 5445 4e44 4552 220a 2020 2020  : EXTENDER".    
+00030990: 2020 2020 705b 305d 203d 204e 6f6e 650a      p[0] = None.
+000309a0: 0a20 2020 2064 6566 2070 5f70 6f73 745f  .    def p_post_
+000309b0: 6576 656e 745f 6e6f 6669 6e67 6572 5f5f  event_nofinger__
+000309c0: 4859 5048 454e 2873 656c 662c 2070 293a  HYPHEN(self, p):
+000309d0: 0a20 2020 2020 2020 2022 706f 7374 5f65  .        "post_e
+000309e0: 7665 6e74 5f6e 6f66 696e 6765 7220 3a20  vent_nofinger : 
+000309f0: 4859 5048 454e 220a 2020 2020 2020 2020  HYPHEN".        
+00030a00: 705b 305d 203d 204e 6f6e 650a 0a20 2020  p[0] = None..   
+00030a10: 2064 6566 2070 5f70 6f73 745f 6576 656e   def p_post_even
+00030a20: 745f 6e6f 6669 6e67 6572 5f5f 6469 7265  t_nofinger__dire
+00030a30: 6374 696f 6e5f 6c65 7373 5f65 7665 6e74  ction_less_event
+00030a40: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+00030a50: 2020 2022 706f 7374 5f65 7665 6e74 5f6e     "post_event_n
+00030a60: 6f66 696e 6765 7220 3a20 6469 7265 6374  ofinger : direct
+00030a70: 696f 6e5f 6c65 7373 5f65 7665 6e74 220a  ion_less_event".
+00030a80: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+00030a90: 5b31 5d0a 0a20 2020 2064 6566 2070 5f70  [1]..    def p_p
+00030aa0: 6f73 745f 6576 656e 745f 6e6f 6669 6e67  ost_event_nofing
+00030ab0: 6572 5f5f 7363 7269 7074 5f64 6972 5f5f  er__script_dir__
+00030ac0: 6469 7265 6374 696f 6e5f 6c65 7373 5f65  direction_less_e
+00030ad0: 7665 6e74 2873 656c 662c 2070 293a 0a20  vent(self, p):. 
+00030ae0: 2020 2020 2020 2022 706f 7374 5f65 7665         "post_eve
+00030af0: 6e74 5f6e 6f66 696e 6765 7220 3a20 7363  nt_nofinger : sc
+00030b00: 7269 7074 5f64 6972 2064 6972 6563 7469  ript_dir directi
+00030b10: 6f6e 5f6c 6573 735f 6576 656e 7422 0a20  on_less_event". 
+00030b20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00030b30: 7472 793a 0a20 2020 2020 2020 2023 2020  try:.        #  
+00030b40: 2020 2020 2020 2020 2020 705b 325d 2e64            p[2].d
+00030b50: 6972 6563 7469 6f6e 203d 2070 5b31 5d0a  irection = p[1].
+00030b60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030b70: 2020 2020 2064 6972 6563 7469 6f6e 203d       direction =
+00030b80: 205f 7374 7269 6e67 2e74 6f5f 7472 6964   _string.to_trid
+00030b90: 6972 6563 7469 6f6e 616c 5f6c 696c 7970  irectional_lilyp
+00030ba0: 6f6e 645f 7379 6d62 6f6c 2870 5b31 5d29  ond_symbol(p[1])
+00030bb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030bc0: 2020 6578 6365 7074 2041 7474 7269 6275    except Attribu
+00030bd0: 7465 4572 726f 723a 0a20 2020 2020 2020  teError:.       
+00030be0: 2023 2020 2020 2020 2020 2020 2020 6469   #            di
+00030bf0: 7265 6374 696f 6e20 3d20 5f73 7472 696e  rection = _strin
+00030c00: 672e 746f 5f74 7269 6469 7265 6374 696f  g.to_tridirectio
+00030c10: 6e61 6c5f 6c69 6c79 706f 6e64 5f73 796d  nal_lilypond_sym
+00030c20: 626f 6c28 705b 315d 290a 2020 2020 2020  bol(p[1]).      
+00030c30: 2020 2320 2020 2020 2020 2020 2020 2023    #            #
+00030c40: 2061 7373 6572 7420 6861 7361 7474 7228   assert hasattr(
+00030c50: 705b 325d 2c20 225f 6469 7265 6374 696f  p[2], "_directio
+00030c60: 6e22 290a 2020 2020 2020 2020 2320 2020  n").        #   
+00030c70: 2020 2020 2020 2020 2023 2070 5b32 5d2e           # p[2].
+00030c80: 5f64 6972 6563 7469 6f6e 203d 2064 6972  _direction = dir
+00030c90: 6563 7469 6f6e 0a20 2020 2020 2020 2023  ection.        #
+00030ca0: 2070 5b30 5d20 3d20 705b 325d 0a20 2020   p[0] = p[2].   
+00030cb0: 2020 2020 2064 6972 6563 7469 6f6e 203d       direction =
+00030cc0: 205f 7374 7269 6e67 2e74 6f5f 7472 6964   _string.to_trid
+00030cd0: 6972 6563 7469 6f6e 616c 5f6c 696c 7970  irectional_lilyp
+00030ce0: 6f6e 645f 7379 6d62 6f6c 2870 5b31 5d29  ond_symbol(p[1])
+00030cf0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00030d00: 2870 5b32 5d2c 2064 6972 6563 7469 6f6e  (p[2], direction
+00030d10: 290a 0a20 2020 2064 6566 2070 5f70 6f73  )..    def p_pos
+00030d20: 745f 6576 656e 745f 6e6f 6669 6e67 6572  t_event_nofinger
+00030d30: 5f5f 7363 7269 7074 5f64 6972 5f5f 6469  __script_dir__di
+00030d40: 7265 6374 696f 6e5f 7265 7164 5f65 7665  rection_reqd_eve
+00030d50: 6e74 2873 656c 662c 2070 293a 0a20 2020  nt(self, p):.   
+00030d60: 2020 2020 2022 706f 7374 5f65 7665 6e74       "post_event
+00030d70: 5f6e 6f66 696e 6765 7220 3a20 7363 7269  _nofinger : scri
+00030d80: 7074 5f64 6972 2064 6972 6563 7469 6f6e  pt_dir direction
+00030d90: 5f72 6571 645f 6576 656e 7422 0a20 2020  _reqd_event".   
+00030da0: 2020 2020 2023 2020 2020 2020 2020 6966       #        if
+00030db0: 2069 7369 6e73 7461 6e63 6528 705b 325d   isinstance(p[2]
+00030dc0: 2c20 5f69 6e64 6963 6174 6f72 732e 4d61  , _indicators.Ma
+00030dd0: 726b 7570 293a 0a20 2020 2020 2020 2023  rkup):.        #
+00030de0: 2020 2020 2020 2020 2020 2020 6469 7265              dire
+00030df0: 6374 696f 6e20 3d20 5f73 7472 696e 672e  ction = _string.
+00030e00: 746f 5f74 7269 6469 7265 6374 696f 6e61  to_tridirectiona
+00030e10: 6c5f 6f72 6469 6e61 6c5f 636f 6e73 7461  l_ordinal_consta
+00030e20: 6e74 2870 5b31 5d29 0a20 2020 2020 2020  nt(p[1]).       
+00030e30: 2023 2020 2020 2020 2020 2020 2020 705b   #            p[
+00030e40: 325d 2e64 6972 6563 7469 6f6e 203d 2064  2].direction = d
+00030e50: 6972 6563 7469 6f6e 0a20 2020 2020 2020  irection.       
+00030e60: 2023 2020 2020 2020 2020 656c 7365 3a0a   #        else:.
+00030e70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030e80: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00030e90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00030ea0: 2020 2070 5b32 5d2e 6469 7265 6374 696f     p[2].directio
+00030eb0: 6e20 3d20 705b 315d 0a20 2020 2020 2020  n = p[1].       
+00030ec0: 2023 2020 2020 2020 2020 2020 2020 6578   #            ex
+00030ed0: 6365 7074 2041 7474 7269 6275 7465 4572  cept AttributeEr
+00030ee0: 726f 723a 0a20 2020 2020 2020 2023 2020  ror:.        #  
+00030ef0: 2020 2020 2020 2020 2020 2020 2020 6469                di
+00030f00: 7265 6374 696f 6e20 3d20 5f73 7472 696e  rection = _strin
+00030f10: 672e 746f 5f74 7269 6469 7265 6374 696f  g.to_tridirectio
+00030f20: 6e61 6c5f 6f72 6469 6e61 6c5f 636f 6e73  nal_ordinal_cons
+00030f30: 7461 6e74 2870 5b31 5d29 0a20 2020 2020  tant(p[1]).     
+00030f40: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00030f50: 2020 2020 6173 7365 7274 2068 6173 6174      assert hasat
+00030f60: 7472 2870 5b32 5d2c 2022 5f64 6972 6563  tr(p[2], "_direc
+00030f70: 7469 6f6e 2229 0a20 2020 2020 2020 2023  tion").        #
+00030f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030f90: 705b 325d 2e5f 6469 7265 6374 696f 6e20  p[2]._direction 
+00030fa0: 3d20 6469 7265 6374 696f 6e0a 2020 2020  = direction.    
+00030fb0: 2020 2020 2320 2020 2020 2020 2070 5b30      #        p[0
+00030fc0: 5d20 3d20 705b 325d 0a20 2020 2020 2020  ] = p[2].       
+00030fd0: 2064 6972 6563 7469 6f6e 203d 205f 7374   direction = _st
+00030fe0: 7269 6e67 2e74 6f5f 7472 6964 6972 6563  ring.to_tridirec
+00030ff0: 7469 6f6e 616c 5f6f 7264 696e 616c 5f63  tional_ordinal_c
+00031000: 6f6e 7374 616e 7428 705b 315d 290a 2020  onstant(p[1]).  
+00031010: 2020 2020 2020 705b 305d 203d 2028 705b        p[0] = (p[
+00031020: 325d 2c20 6469 7265 6374 696f 6e29 0a0a  2], direction)..
+00031030: 2020 2020 6465 6620 705f 706f 7374 5f65      def p_post_e
+00031040: 7665 6e74 5f6e 6f66 696e 6765 725f 5f73  vent_nofinger__s
+00031050: 6372 6970 745f 6469 725f 5f6d 7573 6963  cript_dir__music
+00031060: 5f66 756e 6374 696f 6e5f 6576 656e 7428  _function_event(
+00031070: 7365 6c66 2c20 7029 3a0a 2020 2020 2020  self, p):.      
+00031080: 2020 2270 6f73 745f 6576 656e 745f 6e6f    "post_event_no
+00031090: 6669 6e67 6572 203a 2073 6372 6970 745f  finger : script_
+000310a0: 6469 7220 6d75 7369 635f 6675 6e63 7469  dir music_functi
+000310b0: 6f6e 5f65 7665 6e74 220a 2020 2020 2020  on_event".      
+000310c0: 2020 705b 305d 203d 2070 5b32 5d0a 0a20    p[0] = p[2].. 
+000310d0: 2020 2064 6566 2070 5f70 6f73 745f 6576     def p_post_ev
+000310e0: 656e 745f 6e6f 6669 6e67 6572 5f5f 7374  ent_nofinger__st
+000310f0: 7269 6e67 5f6e 756d 6265 725f 6576 656e  ring_number_even
+00031100: 7428 7365 6c66 2c20 7029 3a0a 2020 2020  t(self, p):.    
+00031110: 2020 2020 2270 6f73 745f 6576 656e 745f      "post_event_
+00031120: 6e6f 6669 6e67 6572 203a 2073 7472 696e  nofinger : strin
+00031130: 675f 6e75 6d62 6572 5f65 7665 6e74 220a  g_number_event".
+00031140: 2020 2020 2020 2020 705b 305d 203d 204e          p[0] = N
+00031150: 6f6e 650a 0a20 2020 2023 2323 2070 6f73  one..    ### pos
+00031160: 745f 6576 656e 7473 2023 2323 0a0a 2020  t_events ###..  
+00031170: 2020 6465 6620 705f 706f 7374 5f65 7665    def p_post_eve
+00031180: 6e74 735f 5f45 6d70 7479 2873 656c 662c  nts__Empty(self,
+00031190: 2070 293a 0a20 2020 2020 2020 2022 706f   p):.        "po
+000311a0: 7374 5f65 7665 6e74 7320 3a22 0a20 2020  st_events :".   
+000311b0: 2020 2020 2070 5b30 5d20 3d20 5b5d 0a0a       p[0] = []..
+000311c0: 2020 2020 6465 6620 705f 706f 7374 5f65      def p_post_e
+000311d0: 7665 6e74 735f 5f70 6f73 745f 6576 656e  vents__post_even
+000311e0: 7473 5f5f 706f 7374 5f65 7665 6e74 2873  ts__post_event(s
+000311f0: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00031200: 2022 706f 7374 5f65 7665 6e74 7320 3a20   "post_events : 
+00031210: 706f 7374 5f65 7665 6e74 7320 706f 7374  post_events post
+00031220: 5f65 7665 6e74 220a 2020 2020 2020 2020  _event".        
+00031230: 705b 305d 203d 2070 5b31 5d20 2b20 5b70  p[0] = p[1] + [p
+00031240: 5b32 5d5d 0a0a 2020 2020 2323 2320 7072  [2]]..    ### pr
+00031250: 6f70 6572 7479 5f6f 7065 7261 7469 6f6e  operty_operation
+00031260: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+00031270: 7072 6f70 6572 7479 5f6f 7065 7261 7469  property_operati
+00031280: 6f6e 5f5f 4f56 4552 5249 4445 5f5f 7369  on__OVERRIDE__si
+00031290: 6d70 6c65 5f73 7472 696e 675f 5f70 726f  mple_string__pro
+000312a0: 7065 7274 795f 7061 7468 5f5f 4368 7236  perty_path__Chr6
+000312b0: 315f 5f73 6361 6c61 7228 0a20 2020 2020  1__scalar(.     
+000312c0: 2020 2073 656c 662c 2070 0a20 2020 2029     self, p.    )
+000312d0: 3a0a 2020 2020 2020 2020 2270 726f 7065  :.        "prope
+000312e0: 7274 795f 6f70 6572 6174 696f 6e20 3a20  rty_operation : 
+000312f0: 4f56 4552 5249 4445 2073 696d 706c 655f  OVERRIDE simple_
+00031300: 7374 7269 6e67 2070 726f 7065 7274 795f  string property_
+00031310: 7061 7468 2027 3d27 2073 6361 6c61 7222  path '=' scalar"
+00031320: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00031330: 4c69 6c79 506f 6e64 4576 656e 7428 0a20  LilyPondEvent(. 
+00031340: 2020 2020 2020 2020 2020 2022 5072 6f70             "Prop
+00031350: 6572 7479 4f70 6572 6174 696f 6e22 2c0a  ertyOperation",.
+00031360: 2020 2020 2020 2020 2020 2020 6b65 7977              keyw
+00031370: 6f72 643d 226f 7665 7272 6964 6522 2c0a  ord="override",.
+00031380: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00031390: 6578 743d 705b 325d 2c0a 2020 2020 2020  ext=p[2],.      
+000313a0: 2020 2020 2020 7072 6f70 6572 7479 3d70        property=p
+000313b0: 5b33 5d2c 0a20 2020 2020 2020 2020 2020  [3],.           
+000313c0: 2076 616c 7565 3d70 5b35 5d2c 0a20 2020   value=p[5],.   
+000313d0: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+000313e0: 705f 7072 6f70 6572 7479 5f6f 7065 7261  p_property_opera
+000313f0: 7469 6f6e 5f5f 5245 5645 5254 5f5f 7369  tion__REVERT__si
+00031400: 6d70 6c65 5f73 7472 696e 675f 5f65 6d62  mple_string__emb
+00031410: 6564 6465 645f 7363 6d28 7365 6c66 2c20  edded_scm(self, 
+00031420: 7029 3a0a 2020 2020 2020 2020 2270 726f  p):.        "pro
+00031430: 7065 7274 795f 6f70 6572 6174 696f 6e20  perty_operation 
+00031440: 3a20 5245 5645 5254 2073 696d 706c 655f  : REVERT simple_
+00031450: 7374 7269 6e67 2065 6d62 6564 6465 645f  string embedded_
+00031460: 7363 6d22 0a20 2020 2020 2020 2070 5b30  scm".        p[0
+00031470: 5d20 3d20 4c69 6c79 506f 6e64 4576 656e  ] = LilyPondEven
+00031480: 7428 0a20 2020 2020 2020 2020 2020 2022  t(.            "
+00031490: 5072 6f70 6572 7479 4f70 6572 6174 696f  PropertyOperatio
+000314a0: 6e22 2c20 6b65 7977 6f72 643d 2272 6576  n", keyword="rev
+000314b0: 6572 7422 2c20 636f 6e74 6578 743d 705b  ert", context=p[
+000314c0: 325d 2c20 7072 6f70 6572 7479 3d70 5b33  2], property=p[3
+000314d0: 5d0a 2020 2020 2020 2020 290a 0a20 2020  ].        )..   
+000314e0: 2064 6566 2070 5f70 726f 7065 7274 795f   def p_property_
+000314f0: 6f70 6572 6174 696f 6e5f 5f53 5452 494e  operation__STRIN
+00031500: 475f 5f43 6872 3631 5f5f 7363 616c 6172  G__Chr61__scalar
+00031510: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+00031520: 2020 2022 7072 6f70 6572 7479 5f6f 7065     "property_ope
+00031530: 7261 7469 6f6e 203a 2053 5452 494e 4720  ration : STRING 
+00031540: 273d 2720 7363 616c 6172 220a 2020 2020  '=' scalar".    
+00031550: 2020 2020 705b 305d 203d 204c 696c 7950      p[0] = LilyP
+00031560: 6f6e 6445 7665 6e74 280a 2020 2020 2020  ondEvent(.      
+00031570: 2020 2020 2020 2250 726f 7065 7274 794f        "PropertyO
+00031580: 7065 7261 7469 6f6e 222c 206b 6579 776f  peration", keywo
+00031590: 7264 3d22 7365 7422 2c20 7072 6f70 6572  rd="set", proper
+000315a0: 7479 3d70 5b31 5d2c 2076 616c 7565 3d70  ty=p[1], value=p
+000315b0: 5b32 5d0a 2020 2020 2020 2020 290a 0a20  [2].        ).. 
+000315c0: 2020 2064 6566 2070 5f70 726f 7065 7274     def p_propert
+000315d0: 795f 6f70 6572 6174 696f 6e5f 5f55 4e53  y_operation__UNS
+000315e0: 4554 5f5f 7369 6d70 6c65 5f73 7472 696e  ET__simple_strin
+000315f0: 6728 7365 6c66 2c20 7029 3a0a 2020 2020  g(self, p):.    
+00031600: 2020 2020 2270 726f 7065 7274 795f 6f70      "property_op
+00031610: 6572 6174 696f 6e20 3a20 554e 5345 5420  eration : UNSET 
+00031620: 7369 6d70 6c65 5f73 7472 696e 6722 0a20  simple_string". 
+00031630: 2020 2020 2020 2070 5b30 5d20 3d20 4c69         p[0] = Li
+00031640: 6c79 506f 6e64 4576 656e 7428 2250 726f  lyPondEvent("Pro
+00031650: 7065 7274 794f 7065 7261 7469 6f6e 222c  pertyOperation",
+00031660: 206b 6579 776f 7264 3d22 756e 7365 7422   keyword="unset"
+00031670: 2c20 7072 6f70 6572 7479 3d70 5b32 5d29  , property=p[2])
+00031680: 0a0a 2020 2020 2323 2320 7072 6f70 6572  ..    ### proper
+00031690: 7479 5f70 6174 6820 2323 230a 0a20 2020  ty_path ###..   
+000316a0: 2064 6566 2070 5f70 726f 7065 7274 795f   def p_property_
+000316b0: 7061 7468 5f5f 7072 6f70 6572 7479 5f70  path__property_p
+000316c0: 6174 685f 7265 7676 6564 2873 656c 662c  ath_revved(self,
+000316d0: 2070 293a 0a20 2020 2020 2020 2022 7072   p):.        "pr
+000316e0: 6f70 6572 7479 5f70 6174 6820 3a20 7072  operty_path : pr
+000316f0: 6f70 6572 7479 5f70 6174 685f 7265 7676  operty_path_revv
+00031700: 6564 220a 2020 2020 2020 2020 705b 305d  ed".        p[0]
+00031710: 203d 2070 5b31 5d0a 0a20 2020 2023 2323   = p[1]..    ###
+00031720: 2070 726f 7065 7274 795f 7061 7468 5f72   property_path_r
+00031730: 6576 7665 6420 2323 230a 0a20 2020 2064  evved ###..    d
+00031740: 6566 2070 5f70 726f 7065 7274 795f 7061  ef p_property_pa
+00031750: 7468 5f72 6576 7665 645f 5f65 6d62 6564  th_revved__embed
+00031760: 6465 645f 7363 6d5f 636c 6f73 6564 2873  ded_scm_closed(s
+00031770: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00031780: 2022 7072 6f70 6572 7479 5f70 6174 685f   "property_path_
+00031790: 7265 7676 6564 203a 2065 6d62 6564 6465  revved : embedde
+000317a0: 645f 7363 6d5f 636c 6f73 6564 220a 2020  d_scm_closed".  
+000317b0: 2020 2020 2020 705b 305d 203d 205b 705b        p[0] = [p[
+000317c0: 315d 5d0a 0a20 2020 2064 6566 2070 5f70  1]]..    def p_p
+000317d0: 726f 7065 7274 795f 7061 7468 5f72 6576  roperty_path_rev
+000317e0: 7665 645f 5f70 726f 7065 7274 795f 7061  ved__property_pa
+000317f0: 7468 5f72 6576 7665 645f 5f65 6d62 6564  th_revved__embed
+00031800: 6465 645f 7363 6d5f 636c 6f73 6564 2873  ded_scm_closed(s
+00031810: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00031820: 2022 7072 6f70 6572 7479 5f70 6174 685f   "property_path_
+00031830: 7265 7676 6564 203a 2070 726f 7065 7274  revved : propert
+00031840: 795f 7061 7468 5f72 6576 7665 6420 656d  y_path_revved em
+00031850: 6265 6464 6564 5f73 636d 5f63 6c6f 7365  bedded_scm_close
+00031860: 6422 0a20 2020 2020 2020 2070 5b30 5d20  d".        p[0] 
+00031870: 3d20 705b 315d 202b 205b 705b 325d 5d0a  = p[1] + [p[2]].
+00031880: 0a20 2020 2023 2323 2071 7565 7374 696f  .    ### questio
+00031890: 6e73 2023 2323 0a0a 2020 2020 6465 6620  ns ###..    def 
+000318a0: 705f 7175 6573 7469 6f6e 735f 5f45 6d70  p_questions__Emp
+000318b0: 7479 2873 656c 662c 2070 293a 0a20 2020  ty(self, p):.   
+000318c0: 2020 2020 2022 7175 6573 7469 6f6e 7320       "questions 
+000318d0: 3a22 0a20 2020 2020 2020 2070 5b30 5d20  :".        p[0] 
+000318e0: 3d20 300a 0a20 2020 2064 6566 2070 5f71  = 0..    def p_q
+000318f0: 7565 7374 696f 6e73 5f5f 7175 6573 7469  uestions__questi
+00031900: 6f6e 735f 5f43 6872 3633 2873 656c 662c  ons__Chr63(self,
+00031910: 2070 293a 0a20 2020 2020 2020 2022 7175   p):.        "qu
+00031920: 6573 7469 6f6e 7320 3a20 7175 6573 7469  estions : questi
+00031930: 6f6e 7320 273f 2722 0a20 2020 2020 2020  ons '?'".       
+00031940: 2070 5b30 5d20 3d20 705b 315d 202b 2031   p[0] = p[1] + 1
+00031950: 0a0a 2020 2020 2323 2320 7265 5f72 6879  ..    ### re_rhy
+00031960: 7468 6d65 645f 6d75 7369 6320 2323 230a  thmed_music ###.
+00031970: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
+00031980: 7265 5f72 6879 7468 6d65 645f 6d75 7369  re_rhythmed_musi
+00031990: 635f 5f4c 5952 4943 5354 4f5f 5f73 696d  c__LYRICSTO__sim
+000319a0: 706c 655f 7374 7269 6e67 5f5f 6d75 7369  ple_string__musi
+000319b0: 6328 7365 6c66 2c20 7029 3a0a 2020 2020  c(self, p):.    
+000319c0: 2320 2020 2020 2020 2027 7265 5f72 6879  #        're_rhy
+000319d0: 7468 6d65 645f 6d75 7369 6320 3a20 4c59  thmed_music : LY
+000319e0: 5249 4353 544f 2073 696d 706c 655f 7374  RICSTO simple_st
+000319f0: 7269 6e67 206d 7573 6963 270a 2020 2020  ring music'.    
+00031a00: 2320 2020 2020 2020 2070 5b30 5d20 3d20  #        p[0] = 
+00031a10: 5379 6e74 6178 4e6f 6465 2827 7265 5f72  SyntaxNode('re_r
+00031a20: 6879 7468 6d65 645f 6d75 7369 6327 2c20  hythmed_music', 
+00031a30: 705b 313a 5d29 0a0a 2020 2020 2320 2020  p[1:])..    #   
+00031a40: 2064 6566 2070 5f72 655f 7268 7974 686d   def p_re_rhythm
+00031a50: 6564 5f6d 7573 6963 5f5f 636f 6d70 6f73  ed_music__compos
+00031a60: 6974 655f 6d75 7369 635f 5f6e 6577 5f6c  ite_music__new_l
+00031a70: 7972 6963 7328 7365 6c66 2c20 7029 3a0a  yrics(self, p):.
+00031a80: 2020 2020 2320 2020 2020 2020 2027 7265      #        're
+00031a90: 5f72 6879 7468 6d65 645f 6d75 7369 6320  _rhythmed_music 
+00031aa0: 3a20 636f 6d70 6f73 6974 655f 6d75 7369  : composite_musi
+00031ab0: 6320 6e65 775f 6c79 7269 6373 2025 7072  c new_lyrics %pr
+00031ac0: 6563 2043 4f4d 504f 5349 5445 270a 2020  ec COMPOSITE'.  
+00031ad0: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
+00031ae0: 3d20 5379 6e74 6178 4e6f 6465 2827 7265  = SyntaxNode('re
+00031af0: 5f72 6879 7468 6d65 645f 6d75 7369 6327  _rhythmed_music'
+00031b00: 2c20 705b 313a 5d29 0a0a 2020 2020 2323  , p[1:])..    ##
+00031b10: 2320 7265 7065 6174 6564 5f6d 7573 6963  # repeated_music
+00031b20: 2023 2323 0a0a 2020 2020 2320 2020 2064   ###..    #    d
+00031b30: 6566 2070 5f72 6570 6561 7465 645f 6d75  ef p_repeated_mu
+00031b40: 7369 635f 5f52 4550 4541 545f 5f73 696d  sic__REPEAT__sim
+00031b50: 706c 655f 7374 7269 6e67 5f5f 756e 7369  ple_string__unsi
+00031b60: 676e 6564 5f6e 756d 6265 725f 5f6d 7573  gned_number__mus
+00031b70: 6963 2873 656c 662c 2070 293a 0a20 2020  ic(self, p):.   
+00031b80: 2023 2020 2020 2020 2020 2772 6570 6561   #        'repea
+00031b90: 7465 645f 6d75 7369 6320 3a20 5245 5045  ted_music : REPE
+00031ba0: 4154 2073 696d 706c 655f 7374 7269 6e67  AT simple_string
+00031bb0: 2075 6e73 6967 6e65 645f 6e75 6d62 6572   unsigned_number
+00031bc0: 206d 7573 6963 270a 2020 2020 2320 2020   music'.    #   
+00031bd0: 2020 2020 2070 5b30 5d20 3d20 5379 6e74       p[0] = Synt
+00031be0: 6178 4e6f 6465 2827 7265 7065 6174 6564  axNode('repeated
+00031bf0: 5f6d 7573 6963 272c 2070 5b31 3a5d 290a  _music', p[1:]).
+00031c00: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
+00031c10: 7265 7065 6174 6564 5f6d 7573 6963 5f5f  repeated_music__
+00031c20: 5245 5045 4154 5f5f 7369 6d70 6c65 5f73  REPEAT__simple_s
+00031c30: 7472 696e 675f 5f75 6e73 6967 6e65 645f  tring__unsigned_
+00031c40: 6e75 6d62 6572 5f5f 6d75 7369 635f 5f41  number__music__A
+00031c50: 4c54 4552 4e41 5449 5645 5f5f 6272 6163  LTERNATIVE__brac
+00031c60: 6564 5f6d 7573 6963 5f6c 6973 7428 7365  ed_music_list(se
+00031c70: 6c66 2c20 7029 3a0a 2020 2020 2320 2020  lf, p):.    #   
+00031c80: 2020 2020 2027 7265 7065 6174 6564 5f6d       'repeated_m
+00031c90: 7573 6963 203a 2052 4550 4541 5420 7369  usic : REPEAT si
+00031ca0: 6d70 6c65 5f73 7472 696e 6720 756e 7369  mple_string unsi
+00031cb0: 676e 6564 5f6e 756d 6265 7220 6d75 7369  gned_number musi
+00031cc0: 6320 414c 5445 524e 4154 4956 4520 6272  c ALTERNATIVE br
+00031cd0: 6163 6564 5f6d 7573 6963 5f6c 6973 7427  aced_music_list'
+00031ce0: 0a20 2020 2023 2020 2020 2020 2020 705b  .    #        p[
+00031cf0: 305d 203d 2053 796e 7461 784e 6f64 6528  0] = SyntaxNode(
+00031d00: 2772 6570 6561 7465 645f 6d75 7369 6327  'repeated_music'
+00031d10: 2c20 705b 313a 5d29 0a0a 2020 2020 2323  , p[1:])..    ##
+00031d20: 2320 7363 616c 6172 2023 2323 0a0a 2020  # scalar ###..  
+00031d30: 2020 6465 6620 705f 7363 616c 6172 5f5f    def p_scalar__
+00031d40: 6261 7265 5f6e 756d 6265 7228 7365 6c66  bare_number(self
+00031d50: 2c20 7029 3a0a 2020 2020 2020 2020 2273  , p):.        "s
+00031d60: 6361 6c61 7220 3a20 6261 7265 5f6e 756d  calar : bare_num
+00031d70: 6265 7222 0a20 2020 2020 2020 2070 5b30  ber".        p[0
+00031d80: 5d20 3d20 705b 315d 0a0a 2020 2020 6465  ] = p[1]..    de
+00031d90: 6620 705f 7363 616c 6172 5f5f 656d 6265  f p_scalar__embe
+00031da0: 6464 6564 5f73 636d 5f61 7267 2873 656c  dded_scm_arg(sel
+00031db0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00031dc0: 7363 616c 6172 203a 2065 6d62 6564 6465  scalar : embedde
+00031dd0: 645f 7363 6d5f 6172 6722 0a20 2020 2020  d_scm_arg".     
+00031de0: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+00031df0: 2020 2020 2320 2020 2064 6566 2070 5f73      #    def p_s
+00031e00: 6361 6c61 725f 5f6c 7972 6963 5f65 6c65  calar__lyric_ele
+00031e10: 6d65 6e74 2873 656c 662c 2070 293a 0a20  ment(self, p):. 
+00031e20: 2020 2023 2020 2020 2020 2020 2773 6361     #        'sca
+00031e30: 6c61 7220 3a20 6c79 7269 635f 656c 656d  lar : lyric_elem
+00031e40: 656e 7427 0a20 2020 2023 2020 2020 2020  ent'.    #      
+00031e50: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
+00031e60: 2020 2023 2323 2073 6361 6c61 725f 636c     ### scalar_cl
+00031e70: 6f73 6564 2023 2323 0a0a 2020 2020 6465  osed ###..    de
+00031e80: 6620 705f 7363 616c 6172 5f63 6c6f 7365  f p_scalar_close
+00031e90: 645f 5f62 6172 655f 6e75 6d62 6572 2873  d__bare_number(s
+00031ea0: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00031eb0: 2022 7363 616c 6172 5f63 6c6f 7365 6420   "scalar_closed 
+00031ec0: 3a20 6261 7265 5f6e 756d 6265 7222 0a20  : bare_number". 
+00031ed0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00031ee0: 315d 0a0a 2020 2020 6465 6620 705f 7363  1]..    def p_sc
+00031ef0: 616c 6172 5f63 6c6f 7365 645f 5f65 6d62  alar_closed__emb
+00031f00: 6564 6465 645f 7363 6d5f 6172 675f 636c  edded_scm_arg_cl
+00031f10: 6f73 6564 2873 656c 662c 2070 293a 0a20  osed(self, p):. 
+00031f20: 2020 2020 2020 2022 7363 616c 6172 5f63         "scalar_c
+00031f30: 6c6f 7365 6420 3a20 656d 6265 6464 6564  losed : embedded
+00031f40: 5f73 636d 5f61 7267 5f63 6c6f 7365 6422  _scm_arg_closed"
+00031f50: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00031f60: 705b 315d 0a0a 2020 2020 2320 2020 2064  p[1]..    #    d
+00031f70: 6566 2070 5f73 6361 6c61 725f 636c 6f73  ef p_scalar_clos
+00031f80: 6564 5f5f 6c79 7269 635f 656c 656d 656e  ed__lyric_elemen
+00031f90: 7428 7365 6c66 2c20 7029 3a0a 2020 2020  t(self, p):.    
+00031fa0: 2320 2020 2020 2020 2027 7363 616c 6172  #        'scalar
+00031fb0: 5f63 6c6f 7365 6420 3a20 6c79 7269 635f  _closed : lyric_
+00031fc0: 656c 656d 656e 7427 0a20 2020 2023 2020  element'.    #  
+00031fd0: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
+00031fe0: 5d0a 0a20 2020 2023 2323 2073 636d 5f66  ]..    ### scm_f
+00031ff0: 756e 6374 696f 6e5f 6361 6c6c 2023 2323  unction_call ###
+00032000: 0a0a 2020 2020 6465 6620 705f 7363 6d5f  ..    def p_scm_
+00032010: 6675 6e63 7469 6f6e 5f63 616c 6c5f 5f53  function_call__S
+00032020: 434d 5f46 554e 4354 494f 4e5f 5f66 756e  CM_FUNCTION__fun
+00032030: 6374 696f 6e5f 6172 676c 6973 7428 7365  ction_arglist(se
+00032040: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+00032050: 2273 636d 5f66 756e 6374 696f 6e5f 6361  "scm_function_ca
+00032060: 6c6c 203a 2053 434d 5f46 554e 4354 494f  ll : SCM_FUNCTIO
+00032070: 4e20 6675 6e63 7469 6f6e 5f61 7267 6c69  N function_argli
+00032080: 7374 220a 2020 2020 2020 2020 705b 305d  st".        p[0]
+00032090: 203d 2073 656c 662e 636c 6965 6e74 2e5f   = self.client._
+000320a0: 6775 696c 6528 705b 315d 2c20 705b 325d  guile(p[1], p[2]
+000320b0: 290a 0a20 2020 2023 2323 2073 636d 5f66  )..    ### scm_f
+000320c0: 756e 6374 696f 6e5f 6361 6c6c 5f63 6c6f  unction_call_clo
+000320d0: 7365 6420 2323 230a 0a20 2020 2064 6566  sed ###..    def
+000320e0: 2070 5f73 636d 5f66 756e 6374 696f 6e5f   p_scm_function_
+000320f0: 6361 6c6c 5f63 6c6f 7365 645f 5f53 434d  call_closed__SCM
+00032100: 5f46 554e 4354 494f 4e5f 5f66 756e 6374  _FUNCTION__funct
+00032110: 696f 6e5f 6172 676c 6973 745f 636c 6f73  ion_arglist_clos
+00032120: 6564 2873 656c 662c 2070 293a 0a20 2020  ed(self, p):.   
+00032130: 2020 2020 2022 7363 6d5f 6675 6e63 7469       "scm_functi
+00032140: 6f6e 5f63 616c 6c5f 636c 6f73 6564 203a  on_call_closed :
+00032150: 2053 434d 5f46 554e 4354 494f 4e20 6675   SCM_FUNCTION fu
+00032160: 6e63 7469 6f6e 5f61 7267 6c69 7374 5f63  nction_arglist_c
+00032170: 6c6f 7365 6420 2570 7265 6320 4655 4e43  losed %prec FUNC
+00032180: 5449 4f4e 5f41 5247 4c49 5354 220a 2020  TION_ARGLIST".  
+00032190: 2020 2020 2020 705b 305d 203d 2073 656c        p[0] = sel
+000321a0: 662e 636c 6965 6e74 2e5f 6775 696c 6528  f.client._guile(
+000321b0: 705b 315d 2c20 705b 325d 290a 0a20 2020  p[1], p[2])..   
+000321c0: 2023 2323 2073 636f 7265 5f62 6c6f 636b   ### score_block
+000321d0: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+000321e0: 7363 6f72 655f 626c 6f63 6b5f 5f53 434f  score_block__SCO
+000321f0: 5245 5f5f 4368 7231 3233 5f5f 7363 6f72  RE__Chr123__scor
+00032200: 655f 626f 6479 5f5f 4368 7231 3235 2873  e_body__Chr125(s
+00032210: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00032220: 2022 7363 6f72 655f 626c 6f63 6b20 3a20   "score_block : 
+00032230: 5343 4f52 4520 277b 2720 7363 6f72 655f  SCORE '{' score_
+00032240: 626f 6479 2027 7d27 220a 2020 2020 2020  body '}'".      
+00032250: 2020 7363 6f72 655f 626c 6f63 6b20 3d20    score_block = 
+00032260: 5f6c 696c 7970 6f6e 6466 696c 652e 426c  _lilypondfile.Bl
+00032270: 6f63 6b28 6e61 6d65 3d22 7363 6f72 6522  ock(name="score"
+00032280: 290a 2020 2020 2020 2020 7363 6f72 655f  ).        score_
+00032290: 626c 6f63 6b2e 6974 656d 732e 6578 7465  block.items.exte
+000322a0: 6e64 2870 5b33 5d29 0a20 2020 2020 2020  nd(p[3]).       
+000322b0: 2070 5b30 5d20 3d20 7363 6f72 655f 626c   p[0] = score_bl
+000322c0: 6f63 6b0a 0a20 2020 2023 2323 2073 636f  ock..    ### sco
+000322d0: 7265 5f62 6f64 7920 2323 230a 0a20 2020  re_body ###..   
+000322e0: 2064 6566 2070 5f73 636f 7265 5f62 6f64   def p_score_bod
+000322f0: 795f 5f53 434f 5245 5f49 4445 4e54 4946  y__SCORE_IDENTIF
+00032300: 4945 5228 7365 6c66 2c20 7029 3a0a 2020  IER(self, p):.  
+00032310: 2020 2020 2020 2273 636f 7265 5f62 6f64        "score_bod
+00032320: 7920 3a20 5343 4f52 455f 4944 454e 5449  y : SCORE_IDENTI
+00032330: 4649 4552 220a 2020 2020 2020 2020 705b  FIER".        p[
+00032340: 305d 203d 205b 705b 315d 5d0a 0a20 2020  0] = [p[1]]..   
+00032350: 2064 6566 2070 5f73 636f 7265 5f62 6f64   def p_score_bod
+00032360: 795f 5f6d 7573 6963 2873 656c 662c 2070  y__music(self, p
+00032370: 293a 0a20 2020 2020 2020 2022 7363 6f72  ):.        "scor
+00032380: 655f 626f 6479 203a 206d 7573 6963 220a  e_body : music".
+00032390: 2020 2020 2020 2020 705b 305d 203d 205b          p[0] = [
+000323a0: 705b 315d 5d0a 0a20 2020 2023 2020 2020  p[1]]..    #    
+000323b0: 6465 6620 705f 7363 6f72 655f 626f 6479  def p_score_body
+000323c0: 5f5f 7363 6f72 655f 626f 6479 5f5f 6572  __score_body__er
+000323d0: 726f 7228 7365 6c66 2c20 7029 3a0a 2020  ror(self, p):.  
+000323e0: 2020 2320 2020 2020 2020 2027 7363 6f72    #        'scor
+000323f0: 655f 626f 6479 203a 2073 636f 7265 5f62  e_body : score_b
+00032400: 6f64 7920 6572 726f 7227 0a20 2020 2023  ody error'.    #
+00032410: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+00032420: 796e 7461 784e 6f64 6528 2773 636f 7265  yntaxNode('score
+00032430: 5f62 6f64 7927 2c20 705b 313a 5d29 0a0a  _body', p[1:])..
+00032440: 2020 2020 6465 6620 705f 7363 6f72 655f      def p_score_
+00032450: 626f 6479 5f5f 7363 6f72 655f 626f 6479  body__score_body
+00032460: 5f5f 6c69 6c79 706f 6e64 5f68 6561 6465  __lilypond_heade
+00032470: 7228 7365 6c66 2c20 7029 3a0a 2020 2020  r(self, p):.    
+00032480: 2020 2020 2273 636f 7265 5f62 6f64 7920      "score_body 
+00032490: 3a20 7363 6f72 655f 626f 6479 206c 696c  : score_body lil
+000324a0: 7970 6f6e 645f 6865 6164 6572 220a 2020  ypond_header".  
+000324b0: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
+000324c0: 5d20 2b20 5b70 5b32 5d5d 0a0a 2020 2020  ] + [p[2]]..    
+000324d0: 6465 6620 705f 7363 6f72 655f 626f 6479  def p_score_body
+000324e0: 5f5f 7363 6f72 655f 626f 6479 5f5f 6f75  __score_body__ou
+000324f0: 7470 7574 5f64 6566 2873 656c 662c 2070  tput_def(self, p
+00032500: 293a 0a20 2020 2020 2020 2022 7363 6f72  ):.        "scor
+00032510: 655f 626f 6479 203a 2073 636f 7265 5f62  e_body : score_b
+00032520: 6f64 7920 6f75 7470 7574 5f64 6566 220a  ody output_def".
+00032530: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+00032540: 5b31 5d20 2b20 5b70 5b32 5d5d 0a0a 2020  [1] + [p[2]]..  
+00032550: 2020 2323 2320 7363 7269 7074 5f61 6262    ### script_abb
+00032560: 7265 7669 6174 696f 6e20 2323 230a 0a20  reviation ###.. 
+00032570: 2020 2064 6566 2070 5f73 6372 6970 745f     def p_script_
+00032580: 6162 6272 6576 6961 7469 6f6e 5f5f 414e  abbreviation__AN
+00032590: 474c 455f 434c 4f53 4528 7365 6c66 2c20  GLE_CLOSE(self, 
+000325a0: 7029 3a0a 2020 2020 2020 2020 2273 6372  p):.        "scr
+000325b0: 6970 745f 6162 6272 6576 6961 7469 6f6e  ipt_abbreviation
+000325c0: 203a 2041 4e47 4c45 5f43 4c4f 5345 220a   : ANGLE_CLOSE".
+000325d0: 2020 2020 2020 2020 6b69 6e64 203d 2073          kind = s
+000325e0: 656c 662e 636c 6965 6e74 2e5f 6375 7272  elf.client._curr
+000325f0: 656e 745f 6d6f 6475 6c65 5b22 6461 7368  ent_module["dash
+00032600: 4c61 7267 6572 225d 5b22 6172 7469 6375  Larger"]["articu
+00032610: 6c61 7469 6f6e 2d74 7970 6522 5d0a 2020  lation-type"].  
+00032620: 2020 2020 2020 705b 305d 203d 205f 696e        p[0] = _in
+00032630: 6469 6361 746f 7273 2e41 7274 6963 756c  dicators.Articul
+00032640: 6174 696f 6e28 6b69 6e64 290a 0a20 2020  ation(kind)..   
+00032650: 2064 6566 2070 5f73 6372 6970 745f 6162   def p_script_ab
+00032660: 6272 6576 6961 7469 6f6e 5f5f 4368 7233  breviation__Chr3
+00032670: 3328 7365 6c66 2c20 7029 3a0a 2020 2020  3(self, p):.    
+00032680: 2020 2020 2273 6372 6970 745f 6162 6272      "script_abbr
+00032690: 6576 6961 7469 6f6e 203a 2027 2127 220a  eviation : '!'".
+000326a0: 2020 2020 2020 2020 2320 6b69 6e64 203d          # kind =
+000326b0: 2073 656c 662e 636c 6965 6e74 2e5f 6375   self.client._cu
+000326c0: 7272 656e 745f 6d6f 6475 6c65 5b22 6461  rrent_module["da
+000326d0: 7368 4261 7222 5d5b 2261 7274 6963 756c  shBar"]["articul
+000326e0: 6174 696f 6e2d 7479 7065 225d 0a20 2020  ation-type"].   
+000326f0: 2020 2020 206b 696e 6420 3d20 7365 6c66       kind = self
+00032700: 2e63 6c69 656e 742e 5f63 7572 7265 6e74  .client._current
+00032710: 5f6d 6f64 756c 655b 2264 6173 6842 616e  _module["dashBan
+00032720: 6722 5d5b 2261 7274 6963 756c 6174 696f  g"]["articulatio
+00032730: 6e2d 7479 7065 225d 0a20 2020 2020 2020  n-type"].       
+00032740: 2070 5b30 5d20 3d20 5f69 6e64 6963 6174   p[0] = _indicat
+00032750: 6f72 732e 4172 7469 6375 6c61 7469 6f6e  ors.Articulation
+00032760: 286b 696e 6429 0a0a 2020 2020 6465 6620  (kind)..    def 
+00032770: 705f 7363 7269 7074 5f61 6262 7265 7669  p_script_abbrevi
+00032780: 6174 696f 6e5f 5f43 6872 3433 2873 656c  ation__Chr43(sel
+00032790: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+000327a0: 7363 7269 7074 5f61 6262 7265 7669 6174  script_abbreviat
+000327b0: 696f 6e20 3a20 272b 2722 0a20 2020 2020  ion : '+'".     
+000327c0: 2020 206b 696e 6420 3d20 7365 6c66 2e63     kind = self.c
+000327d0: 6c69 656e 742e 5f63 7572 7265 6e74 5f6d  lient._current_m
+000327e0: 6f64 756c 655b 2264 6173 6850 6c75 7322  odule["dashPlus"
+000327f0: 5d5b 2261 7274 6963 756c 6174 696f 6e2d  ]["articulation-
+00032800: 7479 7065 225d 0a20 2020 2020 2020 2070  type"].        p
+00032810: 5b30 5d20 3d20 5f69 6e64 6963 6174 6f72  [0] = _indicator
+00032820: 732e 4172 7469 6375 6c61 7469 6f6e 286b  s.Articulation(k
+00032830: 696e 6429 0a0a 2020 2020 6465 6620 705f  ind)..    def p_
+00032840: 7363 7269 7074 5f61 6262 7265 7669 6174  script_abbreviat
+00032850: 696f 6e5f 5f43 6872 3435 2873 656c 662c  ion__Chr45(self,
+00032860: 2070 293a 0a20 2020 2020 2020 2022 7363   p):.        "sc
+00032870: 7269 7074 5f61 6262 7265 7669 6174 696f  ript_abbreviatio
+00032880: 6e20 3a20 272d 2722 0a20 2020 2020 2020  n : '-'".       
+00032890: 206b 696e 6420 3d20 7365 6c66 2e63 6c69   kind = self.cli
+000328a0: 656e 742e 5f63 7572 7265 6e74 5f6d 6f64  ent._current_mod
+000328b0: 756c 655b 2264 6173 6844 6173 6822 5d5b  ule["dashDash"][
+000328c0: 2261 7274 6963 756c 6174 696f 6e2d 7479  "articulation-ty
+000328d0: 7065 225d 0a20 2020 2020 2020 2070 5b30  pe"].        p[0
+000328e0: 5d20 3d20 5f69 6e64 6963 6174 6f72 732e  ] = _indicators.
+000328f0: 4172 7469 6375 6c61 7469 6f6e 286b 696e  Articulation(kin
+00032900: 6429 0a0a 2020 2020 6465 6620 705f 7363  d)..    def p_sc
+00032910: 7269 7074 5f61 6262 7265 7669 6174 696f  ript_abbreviatio
+00032920: 6e5f 5f43 6872 3436 2873 656c 662c 2070  n__Chr46(self, p
+00032930: 293a 0a20 2020 2020 2020 2022 7363 7269  ):.        "scri
+00032940: 7074 5f61 6262 7265 7669 6174 696f 6e20  pt_abbreviation 
+00032950: 3a20 272e 2722 0a20 2020 2020 2020 206b  : '.'".        k
+00032960: 696e 6420 3d20 7365 6c66 2e63 6c69 656e  ind = self.clien
+00032970: 742e 5f63 7572 7265 6e74 5f6d 6f64 756c  t._current_modul
+00032980: 655b 2264 6173 6844 6f74 225d 5b22 6172  e["dashDot"]["ar
+00032990: 7469 6375 6c61 7469 6f6e 2d74 7970 6522  ticulation-type"
+000329a0: 5d0a 2020 2020 2020 2020 705b 305d 203d  ].        p[0] =
+000329b0: 205f 696e 6469 6361 746f 7273 2e41 7274   _indicators.Art
+000329c0: 6963 756c 6174 696f 6e28 6b69 6e64 290a  iculation(kind).
+000329d0: 0a20 2020 2064 6566 2070 5f73 6372 6970  .    def p_scrip
+000329e0: 745f 6162 6272 6576 6961 7469 6f6e 5f5f  t_abbreviation__
+000329f0: 4368 7239 3428 7365 6c66 2c20 7029 3a0a  Chr94(self, p):.
+00032a00: 2020 2020 2020 2020 2273 6372 6970 745f          "script_
+00032a10: 6162 6272 6576 6961 7469 6f6e 203a 2027  abbreviation : '
+00032a20: 5e27 220a 2020 2020 2020 2020 6b69 6e64  ^'".        kind
+00032a30: 203d 2073 656c 662e 636c 6965 6e74 2e5f   = self.client._
+00032a40: 6375 7272 656e 745f 6d6f 6475 6c65 5b22  current_module["
+00032a50: 6461 7368 4861 7422 5d5b 2261 7274 6963  dashHat"]["artic
+00032a60: 756c 6174 696f 6e2d 7479 7065 225d 0a20  ulation-type"]. 
+00032a70: 2020 2020 2020 2070 5b30 5d20 3d20 5f69         p[0] = _i
+00032a80: 6e64 6963 6174 6f72 732e 4172 7469 6375  ndicators.Articu
+00032a90: 6c61 7469 6f6e 286b 696e 6429 0a0a 2020  lation(kind)..  
+00032aa0: 2020 6465 6620 705f 7363 7269 7074 5f61    def p_script_a
+00032ab0: 6262 7265 7669 6174 696f 6e5f 5f43 6872  bbreviation__Chr
+00032ac0: 3935 2873 656c 662c 2070 293a 0a20 2020  95(self, p):.   
+00032ad0: 2020 2020 2022 7363 7269 7074 5f61 6262       "script_abb
+00032ae0: 7265 7669 6174 696f 6e20 3a20 275f 2722  reviation : '_'"
+00032af0: 0a20 2020 2020 2020 206b 696e 6420 3d20  .        kind = 
+00032b00: 7365 6c66 2e63 6c69 656e 742e 5f63 7572  self.client._cur
+00032b10: 7265 6e74 5f6d 6f64 756c 655b 2264 6173  rent_module["das
+00032b20: 6855 6e64 6572 7363 6f72 6522 5d5b 2261  hUnderscore"]["a
+00032b30: 7274 6963 756c 6174 696f 6e2d 7479 7065  rticulation-type
+00032b40: 225d 0a20 2020 2020 2020 2070 5b30 5d20  "].        p[0] 
+00032b50: 3d20 5f69 6e64 6963 6174 6f72 732e 4172  = _indicators.Ar
+00032b60: 7469 6375 6c61 7469 6f6e 286b 696e 6429  ticulation(kind)
+00032b70: 0a0a 2020 2020 2323 2320 7363 7269 7074  ..    ### script
+00032b80: 5f64 6972 2023 2323 0a0a 2020 2020 6465  _dir ###..    de
+00032b90: 6620 705f 7363 7269 7074 5f64 6972 5f5f  f p_script_dir__
+00032ba0: 4368 7234 3528 7365 6c66 2c20 7029 3a0a  Chr45(self, p):.
+00032bb0: 2020 2020 2020 2020 2273 6372 6970 745f          "script_
+00032bc0: 6469 7220 3a20 272d 2722 0a20 2020 2020  dir : '-'".     
+00032bd0: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+00032be0: 2020 2020 6465 6620 705f 7363 7269 7074      def p_script
+00032bf0: 5f64 6972 5f5f 4368 7239 3428 7365 6c66  _dir__Chr94(self
+00032c00: 2c20 7029 3a0a 2020 2020 2020 2020 2273  , p):.        "s
+00032c10: 6372 6970 745f 6469 7220 3a20 275e 2722  cript_dir : '^'"
+00032c20: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00032c30: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
+00032c40: 7363 7269 7074 5f64 6972 5f5f 4368 7239  script_dir__Chr9
+00032c50: 3528 7365 6c66 2c20 7029 3a0a 2020 2020  5(self, p):.    
+00032c60: 2020 2020 2273 6372 6970 745f 6469 7220      "script_dir 
+00032c70: 3a20 275f 2722 0a20 2020 2020 2020 2070  : '_'".        p
+00032c80: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
+00032c90: 2323 2320 7365 7175 656e 7469 616c 5f6d  ### sequential_m
+00032ca0: 7573 6963 2023 2323 0a0a 2020 2020 6465  usic ###..    de
+00032cb0: 6620 705f 7365 7175 656e 7469 616c 5f6d  f p_sequential_m
+00032cc0: 7573 6963 5f5f 5345 5155 454e 5449 414c  usic__SEQUENTIAL
+00032cd0: 5f5f 6272 6163 6564 5f6d 7573 6963 5f6c  __braced_music_l
+00032ce0: 6973 7428 7365 6c66 2c20 7029 3a0a 2020  ist(self, p):.  
+00032cf0: 2020 2020 2020 2273 6571 7565 6e74 6961        "sequentia
+00032d00: 6c5f 6d75 7369 6320 3a20 5345 5155 454e  l_music : SEQUEN
+00032d10: 5449 414c 2062 7261 6365 645f 6d75 7369  TIAL braced_musi
+00032d20: 635f 6c69 7374 220a 2020 2020 2020 2020  c_list".        
+00032d30: 705b 305d 203d 2073 656c 662e 636c 6965  p[0] = self.clie
+00032d40: 6e74 2e5f 636f 6e73 7472 7563 745f 7365  nt._construct_se
+00032d50: 7175 656e 7469 616c 5f6d 7573 6963 2870  quential_music(p
+00032d60: 5b32 5d29 0a0a 2020 2020 6465 6620 705f  [2])..    def p_
+00032d70: 7365 7175 656e 7469 616c 5f6d 7573 6963  sequential_music
+00032d80: 5f5f 6272 6163 6564 5f6d 7573 6963 5f6c  __braced_music_l
+00032d90: 6973 7428 7365 6c66 2c20 7029 3a0a 2020  ist(self, p):.  
+00032da0: 2020 2020 2020 2273 6571 7565 6e74 6961        "sequentia
+00032db0: 6c5f 6d75 7369 6320 3a20 6272 6163 6564  l_music : braced
+00032dc0: 5f6d 7573 6963 5f6c 6973 7422 0a20 2020  _music_list".   
+00032dd0: 2020 2020 2070 5b30 5d20 3d20 7365 6c66       p[0] = self
+00032de0: 2e63 6c69 656e 742e 5f63 6f6e 7374 7275  .client._constru
+00032df0: 6374 5f73 6571 7565 6e74 6961 6c5f 6d75  ct_sequential_mu
+00032e00: 7369 6328 705b 315d 290a 0a20 2020 2023  sic(p[1])..    #
+00032e10: 2323 2073 696d 706c 655f 6368 6f72 645f  ## simple_chord_
+00032e20: 656c 656d 656e 7473 2023 2323 0a0a 2020  elements ###..  
+00032e30: 2020 2320 2020 2064 6566 2070 5f73 696d    #    def p_sim
+00032e40: 706c 655f 6368 6f72 645f 656c 656d 656e  ple_chord_elemen
+00032e50: 7473 5f5f 6669 6775 7265 5f73 7065 635f  ts__figure_spec_
+00032e60: 5f6f 7074 696f 6e61 6c5f 6e6f 7465 6d6f  _optional_notemo
+00032e70: 6465 5f64 7572 6174 696f 6e28 7365 6c66  de_duration(self
+00032e80: 2c20 7029 3a0a 2020 2020 2320 2020 2020  , p):.    #     
+00032e90: 2020 2027 7369 6d70 6c65 5f63 686f 7264     'simple_chord
+00032ea0: 5f65 6c65 6d65 6e74 7320 3a20 6669 6775  _elements : figu
+00032eb0: 7265 5f73 7065 6320 6f70 7469 6f6e 616c  re_spec optional
+00032ec0: 5f6e 6f74 656d 6f64 655f 6475 7261 7469  _notemode_durati
+00032ed0: 6f6e 270a 2020 2020 2320 2020 2020 2020  on'.    #       
+00032ee0: 2070 5b30 5d20 3d20 5379 6e74 6178 4e6f   p[0] = SyntaxNo
+00032ef0: 6465 2827 7369 6d70 6c65 5f63 686f 7264  de('simple_chord
+00032f00: 5f65 6c65 6d65 6e74 7327 2c20 705b 313a  _elements', p[1:
+00032f10: 5d29 0a0a 2020 2020 2320 2020 2064 6566  ])..    #    def
+00032f20: 2070 5f73 696d 706c 655f 6368 6f72 645f   p_simple_chord_
+00032f30: 656c 656d 656e 7473 5f5f 6e65 775f 6368  elements__new_ch
+00032f40: 6f72 6428 7365 6c66 2c20 7029 3a0a 2020  ord(self, p):.  
+00032f50: 2020 2320 2020 2020 2020 2027 7369 6d70    #        'simp
+00032f60: 6c65 5f63 686f 7264 5f65 6c65 6d65 6e74  le_chord_element
+00032f70: 7320 3a20 6e65 775f 6368 6f72 6427 0a20  s : new_chord'. 
+00032f80: 2020 2023 2020 2020 2020 2020 705b 305d     #        p[0]
+00032f90: 203d 2053 796e 7461 784e 6f64 6528 2773   = SyntaxNode('s
+00032fa0: 696d 706c 655f 6368 6f72 645f 656c 656d  imple_chord_elem
+00032fb0: 656e 7473 272c 2070 5b31 3a5d 290a 0a20  ents', p[1:]).. 
+00032fc0: 2020 2064 6566 2070 5f73 696d 706c 655f     def p_simple_
+00032fd0: 6368 6f72 645f 656c 656d 656e 7473 5f5f  chord_elements__
+00032fe0: 7369 6d70 6c65 5f65 6c65 6d65 6e74 2873  simple_element(s
+00032ff0: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00033000: 2022 7369 6d70 6c65 5f63 686f 7264 5f65   "simple_chord_e
+00033010: 6c65 6d65 6e74 7320 3a20 7369 6d70 6c65  lements : simple
+00033020: 5f65 6c65 6d65 6e74 220a 2020 2020 2020  _element".      
+00033030: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
+00033040: 2020 2023 2323 2073 696d 706c 655f 656c     ### simple_el
+00033050: 656d 656e 7420 2323 230a 0a20 2020 2023  ement ###..    #
+00033060: 2020 2020 6465 6620 705f 7369 6d70 6c65      def p_simple
+00033070: 5f65 6c65 6d65 6e74 5f5f 4452 554d 5f50  _element__DRUM_P
+00033080: 4954 4348 5f5f 6f70 7469 6f6e 616c 5f6e  ITCH__optional_n
+00033090: 6f74 656d 6f64 655f 6475 7261 7469 6f6e  otemode_duration
+000330a0: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+000330b0: 2020 2020 2020 2020 2773 696d 706c 655f          'simple_
+000330c0: 656c 656d 656e 7420 3a20 4452 554d 5f50  element : DRUM_P
+000330d0: 4954 4348 206f 7074 696f 6e61 6c5f 6e6f  ITCH optional_no
+000330e0: 7465 6d6f 6465 5f64 7572 6174 696f 6e27  temode_duration'
+000330f0: 0a20 2020 2023 2020 2020 2020 2020 6d65  .    #        me
+00033100: 7373 6167 6520 3d20 2764 7275 6d20 7069  ssage = 'drum pi
+00033110: 7463 6865 7320 6e6f 7420 7375 7070 6f72  tches not suppor
+00033120: 7465 642e 270a 2020 2020 2320 2020 2020  ted.'.    #     
+00033130: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
+00033140: 6f6e 286d 6573 7361 6765 290a 0a20 2020  on(message)..   
+00033150: 2064 6566 2070 5f73 696d 706c 655f 656c   def p_simple_el
+00033160: 656d 656e 745f 5f52 4553 544e 414d 455f  ement__RESTNAME_
+00033170: 5f6f 7074 696f 6e61 6c5f 6e6f 7465 6d6f  _optional_notemo
+00033180: 6465 5f64 7572 6174 696f 6e28 7365 6c66  de_duration(self
+00033190: 2c20 7029 3a0a 2020 2020 2020 2020 2273  , p):.        "s
+000331a0: 696d 706c 655f 656c 656d 656e 7420 3a20  imple_element : 
+000331b0: 5245 5354 4e41 4d45 206f 7074 696f 6e61  RESTNAME optiona
+000331c0: 6c5f 6e6f 7465 6d6f 6465 5f64 7572 6174  l_notemode_durat
+000331d0: 696f 6e22 0a20 2020 2020 2020 2069 6620  ion".        if 
+000331e0: 705b 315d 203d 3d20 2272 223a 0a20 2020  p[1] == "r":.   
+000331f0: 2020 2020 2020 2020 2072 6573 7420 3d20           rest = 
+00033200: 5f73 636f 7265 2e52 6573 7428 705b 325d  _score.Rest(p[2]
+00033210: 2e64 7572 6174 696f 6e29 0a20 2020 2020  .duration).     
+00033220: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00033230: 2020 2020 2072 6573 7420 3d20 5f73 636f       rest = _sco
+00033240: 7265 2e53 6b69 7028 705b 325d 2e64 7572  re.Skip(p[2].dur
+00033250: 6174 696f 6e29 0a20 2020 2020 2020 2069  ation).        i
+00033260: 6620 705b 325d 2e6d 756c 7469 706c 6965  f p[2].multiplie
+00033270: 7220 6973 206e 6f74 204e 6f6e 653a 0a20  r is not None:. 
+00033280: 2020 2020 2020 2020 2020 206d 756c 7469             multi
+00033290: 706c 6965 7220 3d20 5f64 7572 6174 696f  plier = _duratio
+000332a0: 6e2e 4d75 6c74 6970 6c69 6572 2870 5b32  n.Multiplier(p[2
+000332b0: 5d2e 6d75 6c74 6970 6c69 6572 290a 2020  ].multiplier).  
+000332c0: 2020 2020 2020 2020 2020 7265 7374 2e6d            rest.m
+000332d0: 756c 7469 706c 6965 7220 3d20 6d75 6c74  ultiplier = mult
+000332e0: 6970 6c69 6572 0a20 2020 2020 2020 2070  iplier.        p
+000332f0: 5b30 5d20 3d20 7265 7374 0a0a 2020 2020  [0] = rest..    
+00033300: 6465 6620 705f 7369 6d70 6c65 5f65 6c65  def p_simple_ele
+00033310: 6d65 6e74 5f5f 7069 7463 685f 5f65 7863  ment__pitch__exc
+00033320: 6c61 6d61 7469 6f6e 735f 5f71 7565 7374  lamations__quest
+00033330: 696f 6e73 5f5f 6f63 7461 7665 5f63 6865  ions__octave_che
+00033340: 636b 5f5f 6f70 7469 6f6e 616c 5f6e 6f74  ck__optional_not
+00033350: 656d 6f64 655f 6475 7261 7469 6f6e 5f5f  emode_duration__
+00033360: 6f70 7469 6f6e 616c 5f72 6573 7428 0a20  optional_rest(. 
+00033370: 2020 2020 2020 2073 656c 662c 2070 0a20         self, p. 
+00033380: 2020 2029 3a0a 2020 2020 2020 2020 2273     ):.        "s
+00033390: 696d 706c 655f 656c 656d 656e 7420 3a20  imple_element : 
+000333a0: 7069 7463 6820 6578 636c 616d 6174 696f  pitch exclamatio
+000333b0: 6e73 2071 7565 7374 696f 6e73 206f 6374  ns questions oct
+000333c0: 6176 655f 6368 6563 6b20 6f70 7469 6f6e  ave_check option
+000333d0: 616c 5f6e 6f74 656d 6f64 655f 6475 7261  al_notemode_dura
+000333e0: 7469 6f6e 206f 7074 696f 6e61 6c5f 7265  tion optional_re
+000333f0: 7374 220a 2020 2020 2020 2020 6966 206e  st".        if n
+00033400: 6f74 2070 5b36 5d3a 0a20 2020 2020 2020  ot p[6]:.       
+00033410: 2020 2020 206c 6561 6620 3d20 5f73 636f       leaf = _sco
+00033420: 7265 2e4e 6f74 6528 705b 315d 2c20 705b  re.Note(p[1], p[
+00033430: 355d 2e64 7572 6174 696f 6e29 0a20 2020  5].duration).   
+00033440: 2020 2020 2020 2020 206c 6561 662e 6e6f           leaf.no
+00033450: 7465 5f68 6561 642e 6973 5f66 6f72 6365  te_head.is_force
+00033460: 6420 3d20 626f 6f6c 2870 5b32 5d29 0a20  d = bool(p[2]). 
+00033470: 2020 2020 2020 2020 2020 206c 6561 662e             leaf.
+00033480: 6e6f 7465 5f68 6561 642e 6973 5f63 6175  note_head.is_cau
+00033490: 7469 6f6e 6172 7920 3d20 626f 6f6c 2870  tionary = bool(p
+000334a0: 5b33 5d29 0a20 2020 2020 2020 2065 6c73  [3]).        els
+000334b0: 653a 0a20 2020 2020 2020 2020 2020 206c  e:.            l
+000334c0: 6561 6620 3d20 5f73 636f 7265 2e52 6573  eaf = _score.Res
+000334d0: 7428 705b 355d 2e64 7572 6174 696f 6e29  t(p[5].duration)
+000334e0: 0a20 2020 2020 2020 2069 6620 705b 355d  .        if p[5]
+000334f0: 2e6d 756c 7469 706c 6965 7220 6973 206e  .multiplier is n
+00033500: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00033510: 2020 2020 206d 756c 7469 706c 6965 7220       multiplier 
+00033520: 3d20 5f64 7572 6174 696f 6e2e 4d75 6c74  = _duration.Mult
+00033530: 6970 6c69 6572 2870 5b35 5d2e 6d75 6c74  iplier(p[5].mult
+00033540: 6970 6c69 6572 290a 2020 2020 2020 2020  iplier).        
+00033550: 2020 2020 6c65 6166 2e6d 756c 7469 706c      leaf.multipl
+00033560: 6965 7220 3d20 6d75 6c74 6970 6c69 6572  ier = multiplier
+00033570: 0a20 2020 2020 2020 2023 2054 4f44 4f3a  .        # TODO:
+00033580: 2068 616e 646c 6520 6578 636c 616d 6174   handle exclamat
+00033590: 696f 6e73 2c20 7175 6573 7469 6f6e 732c  ions, questions,
+000335a0: 206f 6374 6176 655f 6368 6563 6b0a 2020   octave_check.  
+000335b0: 2020 2020 2020 705b 305d 203d 206c 6561        p[0] = lea
+000335c0: 660a 0a20 2020 2023 2323 2073 696d 706c  f..    ### simpl
+000335d0: 655f 6d61 726b 7570 2023 2323 0a0a 2020  e_markup ###..  
+000335e0: 2020 2320 2020 2064 6566 2070 5f73 696d    #    def p_sim
+000335f0: 706c 655f 6d61 726b 7570 5f5f 4c59 5249  ple_markup__LYRI
+00033600: 435f 4d41 524b 5550 5f49 4445 4e54 4946  C_MARKUP_IDENTIF
+00033610: 4945 5228 7365 6c66 2c20 7029 3a0a 2020  IER(self, p):.  
+00033620: 2020 2320 2020 2020 2020 2027 7369 6d70    #        'simp
+00033630: 6c65 5f6d 6172 6b75 7020 3a20 4c59 5249  le_markup : LYRI
+00033640: 435f 4d41 524b 5550 5f49 4445 4e54 4946  C_MARKUP_IDENTIF
+00033650: 4945 5227 0a20 2020 2023 2020 2020 2020  IER'.    #      
+00033660: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
+00033670: 6f64 6528 2773 696d 706c 655f 6d61 726b  ode('simple_mark
+00033680: 7570 272c 2070 5b31 3a5d 290a 0a20 2020  up', p[1:])..   
+00033690: 2064 6566 2070 5f73 696d 706c 655f 6d61   def p_simple_ma
+000336a0: 726b 7570 5f5f 4d41 524b 5550 5f46 554e  rkup__MARKUP_FUN
+000336b0: 4354 494f 4e5f 5f6d 6172 6b75 705f 636f  CTION__markup_co
+000336c0: 6d6d 616e 645f 6261 7369 635f 6172 6775  mmand_basic_argu
+000336d0: 6d65 6e74 7328 7365 6c66 2c20 7029 3a0a  ments(self, p):.
+000336e0: 2020 2020 2020 2020 2273 696d 706c 655f          "simple_
+000336f0: 6d61 726b 7570 203a 204d 4152 4b55 505f  markup : MARKUP_
+00033700: 4655 4e43 5449 4f4e 206d 6172 6b75 705f  FUNCTION markup_
+00033710: 636f 6d6d 616e 645f 6261 7369 635f 6172  command_basic_ar
+00033720: 6775 6d65 6e74 7322 0a20 2020 2020 2020  guments".       
+00033730: 2063 6f6d 6d61 6e64 203d 2070 5b31 5d5b   command = p[1][
+00033740: 313a 5d0a 2020 2020 2020 2020 6172 6775  1:].        argu
+00033750: 6d65 6e74 7320 3d20 705b 325d 0a20 2020  ments = p[2].   
+00033760: 2020 2020 2070 5b30 5d20 3d20 4d61 726b       p[0] = Mark
+00033770: 7570 436f 6d6d 616e 6428 636f 6d6d 616e  upCommand(comman
+00033780: 642c 202a 6172 6775 6d65 6e74 7329 0a0a  d, *arguments)..
+00033790: 2020 2020 6465 6620 705f 7369 6d70 6c65      def p_simple
+000337a0: 5f6d 6172 6b75 705f 5f4d 4152 4b55 505f  _markup__MARKUP_
+000337b0: 4944 454e 5449 4649 4552 2873 656c 662c  IDENTIFIER(self,
+000337c0: 2070 293a 0a20 2020 2020 2020 2022 7369   p):.        "si
+000337d0: 6d70 6c65 5f6d 6172 6b75 7020 3a20 4d41  mple_markup : MA
+000337e0: 524b 5550 5f49 4445 4e54 4946 4945 5222  RKUP_IDENTIFIER"
+000337f0: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00033800: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
+00033810: 7369 6d70 6c65 5f6d 6172 6b75 705f 5f53  simple_markup__S
+00033820: 434f 5245 5f5f 4368 7231 3233 5f5f 7363  CORE__Chr123__sc
+00033830: 6f72 655f 626f 6479 5f5f 4368 7231 3235  ore_body__Chr125
+00033840: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+00033850: 2020 2022 7369 6d70 6c65 5f6d 6172 6b75     "simple_marku
+00033860: 7020 3a20 5343 4f52 4520 277b 2720 7363  p : SCORE '{' sc
+00033870: 6f72 655f 626f 6479 2027 7d27 220a 2020  ore_body '}'".  
+00033880: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+00033890: 7461 784e 6f64 6528 2273 696d 706c 655f  taxNode("simple_
+000338a0: 6d61 726b 7570 222c 2070 2e5f 5f67 6574  markup", p.__get
+000338b0: 736c 6963 655f 5f28 312c 204e 6f6e 6529  slice__(1, None)
+000338c0: 290a 0a20 2020 2064 6566 2070 5f73 696d  )..    def p_sim
+000338d0: 706c 655f 6d61 726b 7570 5f5f 5354 5249  ple_markup__STRI
+000338e0: 4e47 2873 656c 662c 2070 293a 0a20 2020  NG(self, p):.   
+000338f0: 2020 2020 2022 7369 6d70 6c65 5f6d 6172       "simple_mar
+00033900: 6b75 7020 3a20 5354 5249 4e47 220a 2020  kup : STRING".  
+00033910: 2020 2020 2020 705b 305d 203d 2070 5b31        p[0] = p[1
+00033920: 5d0a 0a20 2020 2064 6566 2070 5f73 696d  ]..    def p_sim
+00033930: 706c 655f 6d61 726b 7570 5f5f 5354 5249  ple_markup__STRI
+00033940: 4e47 5f49 4445 4e54 4946 4945 5228 7365  NG_IDENTIFIER(se
+00033950: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+00033960: 2273 696d 706c 655f 6d61 726b 7570 203a  "simple_markup :
+00033970: 2053 5452 494e 475f 4944 454e 5449 4649   STRING_IDENTIFI
+00033980: 4552 220a 2020 2020 2020 2020 705b 305d  ER".        p[0]
+00033990: 203d 2070 5b31 5d0a 0a20 2020 2023 2323   = p[1]..    ###
+000339a0: 2073 696d 706c 655f 6d75 7369 6320 2323   simple_music ##
+000339b0: 230a 0a20 2020 2064 6566 2070 5f73 696d  #..    def p_sim
+000339c0: 706c 655f 6d75 7369 635f 5f63 6f6e 7465  ple_music__conte
+000339d0: 7874 5f63 6861 6e67 6528 7365 6c66 2c20  xt_change(self, 
+000339e0: 7029 3a0a 2020 2020 2020 2020 2273 696d  p):.        "sim
+000339f0: 706c 655f 6d75 7369 6320 3a20 636f 6e74  ple_music : cont
+00033a00: 6578 745f 6368 616e 6765 220a 2020 2020  ext_change".    
+00033a10: 2020 2020 705b 305d 203d 2070 5b31 5d0a      p[0] = p[1].
+00033a20: 0a20 2020 2064 6566 2070 5f73 696d 706c  .    def p_simpl
+00033a30: 655f 6d75 7369 635f 5f65 7665 6e74 5f63  e_music__event_c
+00033a40: 686f 7264 2873 656c 662c 2070 293a 0a20  hord(self, p):. 
+00033a50: 2020 2020 2020 2022 7369 6d70 6c65 5f6d         "simple_m
+00033a60: 7573 6963 203a 2065 7665 6e74 5f63 686f  usic : event_cho
+00033a70: 7264 220a 2020 2020 2020 2020 705b 305d  rd".        p[0]
+00033a80: 203d 2070 5b31 5d0a 0a20 2020 2064 6566   = p[1]..    def
+00033a90: 2070 5f73 696d 706c 655f 6d75 7369 635f   p_simple_music_
+00033aa0: 5f6d 7573 6963 5f70 726f 7065 7274 795f  _music_property_
+00033ab0: 6465 6628 7365 6c66 2c20 7029 3a0a 2020  def(self, p):.  
+00033ac0: 2020 2020 2020 2273 696d 706c 655f 6d75        "simple_mu
+00033ad0: 7369 6320 3a20 6d75 7369 635f 7072 6f70  sic : music_prop
+00033ae0: 6572 7479 5f64 6566 220a 2020 2020 2020  erty_def".      
+00033af0: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
+00033b00: 2020 2023 2323 2073 696d 706c 655f 6d75     ### simple_mu
+00033b10: 7369 635f 7072 6f70 6572 7479 5f64 6566  sic_property_def
+00033b20: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+00033b30: 7369 6d70 6c65 5f6d 7573 6963 5f70 726f  simple_music_pro
+00033b40: 7065 7274 795f 6465 665f 5f4f 5645 5252  perty_def__OVERR
+00033b50: 4944 455f 5f63 6f6e 7465 7874 5f70 726f  IDE__context_pro
+00033b60: 705f 7370 6563 5f5f 7072 6f70 6572 7479  p_spec__property
+00033b70: 5f70 6174 685f 5f43 6872 3631 5f5f 7363  _path__Chr61__sc
+00033b80: 616c 6172 280a 2020 2020 2020 2020 7365  alar(.        se
+00033b90: 6c66 2c20 700a 2020 2020 293a 0a20 2020  lf, p.    ):.   
+00033ba0: 2020 2020 2022 7369 6d70 6c65 5f6d 7573       "simple_mus
+00033bb0: 6963 5f70 726f 7065 7274 795f 6465 6620  ic_property_def 
+00033bc0: 3a20 4f56 4552 5249 4445 2063 6f6e 7465  : OVERRIDE conte
+00033bd0: 7874 5f70 726f 705f 7370 6563 2070 726f  xt_prop_spec pro
+00033be0: 7065 7274 795f 7061 7468 2027 3d27 2073  perty_path '=' s
+00033bf0: 6361 6c61 7222 0a20 2020 2020 2020 2070  calar".        p
+00033c00: 5b30 5d20 3d20 4c69 6c79 506f 6e64 4576  [0] = LilyPondEv
+00033c10: 656e 7428 0a20 2020 2020 2020 2020 2020  ent(.           
+00033c20: 2022 5072 6f70 6572 7479 4f70 6572 6174   "PropertyOperat
+00033c30: 696f 6e22 2c0a 2020 2020 2020 2020 2020  ion",.          
+00033c40: 2020 6b65 7977 6f72 643d 226f 7665 7272    keyword="overr
+00033c50: 6964 6522 2c0a 2020 2020 2020 2020 2020  ide",.          
+00033c60: 2020 636f 6e74 6578 743d 705b 325d 2c0a    context=p[2],.
+00033c70: 2020 2020 2020 2020 2020 2020 7072 6f70              prop
+00033c80: 6572 7479 3d70 5b33 5d2c 0a20 2020 2020  erty=p[3],.     
+00033c90: 2020 2020 2020 2076 616c 7565 3d70 5b35         value=p[5
+00033ca0: 5d2c 0a20 2020 2020 2020 2029 0a0a 2020  ],.        )..  
+00033cb0: 2020 6465 6620 705f 7369 6d70 6c65 5f6d    def p_simple_m
+00033cc0: 7573 6963 5f70 726f 7065 7274 795f 6465  usic_property_de
+00033cd0: 665f 5f52 4556 4552 545f 5f63 6f6e 7465  f__REVERT__conte
+00033ce0: 7874 5f70 726f 705f 7370 6563 5f5f 656d  xt_prop_spec__em
+00033cf0: 6265 6464 6564 5f73 636d 2873 656c 662c  bedded_scm(self,
+00033d00: 2070 293a 0a20 2020 2020 2020 2022 7369   p):.        "si
+00033d10: 6d70 6c65 5f6d 7573 6963 5f70 726f 7065  mple_music_prope
+00033d20: 7274 795f 6465 6620 3a20 5245 5645 5254  rty_def : REVERT
+00033d30: 2063 6f6e 7465 7874 5f70 726f 705f 7370   context_prop_sp
+00033d40: 6563 2065 6d62 6564 6465 645f 7363 6d22  ec embedded_scm"
+00033d50: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00033d60: 5379 6e74 6178 4e6f 6465 2822 7369 6d70  SyntaxNode("simp
+00033d70: 6c65 5f6d 7573 6963 5f70 726f 7065 7274  le_music_propert
+00033d80: 795f 6465 6622 2c20 702e 5f5f 6765 7473  y_def", p.__gets
+00033d90: 6c69 6365 5f5f 2831 2c20 4e6f 6e65 2929  lice__(1, None))
+00033da0: 0a0a 2020 2020 6465 6620 705f 7369 6d70  ..    def p_simp
+00033db0: 6c65 5f6d 7573 6963 5f70 726f 7065 7274  le_music_propert
+00033dc0: 795f 6465 665f 5f53 4554 5f5f 636f 6e74  y_def__SET__cont
+00033dd0: 6578 745f 7072 6f70 5f73 7065 635f 5f43  ext_prop_spec__C
+00033de0: 6872 3631 5f5f 7363 616c 6172 2873 656c  hr61__scalar(sel
+00033df0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00033e00: 7369 6d70 6c65 5f6d 7573 6963 5f70 726f  simple_music_pro
+00033e10: 7065 7274 795f 6465 6620 3a20 5345 5420  perty_def : SET 
+00033e20: 636f 6e74 6578 745f 7072 6f70 5f73 7065  context_prop_spe
+00033e30: 6320 273d 2720 7363 616c 6172 220a 2020  c '=' scalar".  
+00033e40: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+00033e50: 7461 784e 6f64 6528 2273 696d 706c 655f  taxNode("simple_
+00033e60: 6d75 7369 635f 7072 6f70 6572 7479 5f64  music_property_d
+00033e70: 6566 222c 2070 2e5f 5f67 6574 736c 6963  ef", p.__getslic
+00033e80: 655f 5f28 312c 204e 6f6e 6529 290a 0a20  e__(1, None)).. 
+00033e90: 2020 2064 6566 2070 5f73 696d 706c 655f     def p_simple_
+00033ea0: 6d75 7369 635f 7072 6f70 6572 7479 5f64  music_property_d
+00033eb0: 6566 5f5f 554e 5345 545f 5f63 6f6e 7465  ef__UNSET__conte
+00033ec0: 7874 5f70 726f 705f 7370 6563 2873 656c  xt_prop_spec(sel
+00033ed0: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00033ee0: 7369 6d70 6c65 5f6d 7573 6963 5f70 726f  simple_music_pro
+00033ef0: 7065 7274 795f 6465 6620 3a20 554e 5345  perty_def : UNSE
+00033f00: 5420 636f 6e74 6578 745f 7072 6f70 5f73  T context_prop_s
+00033f10: 7065 6322 0a20 2020 2020 2020 2070 5b30  pec".        p[0
+00033f20: 5d20 3d20 5379 6e74 6178 4e6f 6465 2822  ] = SyntaxNode("
+00033f30: 7369 6d70 6c65 5f6d 7573 6963 5f70 726f  simple_music_pro
+00033f40: 7065 7274 795f 6465 6622 2c20 702e 5f5f  perty_def", p.__
+00033f50: 6765 7473 6c69 6365 5f5f 2831 2c20 4e6f  getslice__(1, No
+00033f60: 6e65 2929 0a0a 2020 2020 2323 2320 7369  ne))..    ### si
+00033f70: 6d70 6c65 5f73 7472 696e 6720 2323 230a  mple_string ###.
+00033f80: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
+00033f90: 7369 6d70 6c65 5f73 7472 696e 675f 5f4c  simple_string__L
+00033fa0: 5952 4943 535f 5354 5249 4e47 2873 656c  YRICS_STRING(sel
+00033fb0: 662c 2070 293a 0a20 2020 2023 2020 2020  f, p):.    #    
+00033fc0: 2020 2020 2773 696d 706c 655f 7374 7269      'simple_stri
+00033fd0: 6e67 203a 204c 5952 4943 535f 5354 5249  ng : LYRICS_STRI
+00033fe0: 4e47 270a 2020 2020 2320 2020 2020 2020  NG'.    #       
+00033ff0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
+00034000: 2020 6465 6620 705f 7369 6d70 6c65 5f73    def p_simple_s
+00034010: 7472 696e 675f 5f53 5452 494e 4728 7365  tring__STRING(se
+00034020: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+00034030: 2273 696d 706c 655f 7374 7269 6e67 203a  "simple_string :
+00034040: 2053 5452 494e 4722 0a20 2020 2020 2020   STRING".       
+00034050: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
+00034060: 2020 6465 6620 705f 7369 6d70 6c65 5f73    def p_simple_s
+00034070: 7472 696e 675f 5f53 5452 494e 475f 4944  tring__STRING_ID
+00034080: 454e 5449 4649 4552 2873 656c 662c 2070  ENTIFIER(self, p
+00034090: 293a 0a20 2020 2020 2020 2022 7369 6d70  ):.        "simp
+000340a0: 6c65 5f73 7472 696e 6720 3a20 5354 5249  le_string : STRI
+000340b0: 4e47 5f49 4445 4e54 4946 4945 5222 0a20  NG_IDENTIFIER". 
+000340c0: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+000340d0: 315d 0a0a 2020 2020 2323 2320 7369 6d75  1]..    ### simu
+000340e0: 6c74 616e 656f 7573 5f6d 7573 6963 2023  ltaneous_music #
+000340f0: 2323 0a0a 2020 2020 6465 6620 705f 7369  ##..    def p_si
+00034100: 6d75 6c74 616e 656f 7573 5f6d 7573 6963  multaneous_music
+00034110: 5f5f 444f 5542 4c45 5f41 4e47 4c45 5f4f  __DOUBLE_ANGLE_O
+00034120: 5045 4e5f 5f6d 7573 6963 5f6c 6973 745f  PEN__music_list_
+00034130: 5f44 4f55 424c 455f 414e 474c 455f 434c  _DOUBLE_ANGLE_CL
+00034140: 4f53 4528 0a20 2020 2020 2020 2073 656c  OSE(.        sel
+00034150: 662c 2070 0a20 2020 2029 3a0a 2020 2020  f, p.    ):.    
+00034160: 2020 2020 2273 696d 756c 7461 6e65 6f75      "simultaneou
+00034170: 735f 6d75 7369 6320 3a20 444f 5542 4c45  s_music : DOUBLE
+00034180: 5f41 4e47 4c45 5f4f 5045 4e20 6d75 7369  _ANGLE_OPEN musi
+00034190: 635f 6c69 7374 2044 4f55 424c 455f 414e  c_list DOUBLE_AN
+000341a0: 474c 455f 434c 4f53 4522 0a20 2020 2020  GLE_CLOSE".     
+000341b0: 2020 2070 5b30 5d20 3d20 7365 6c66 2e63     p[0] = self.c
+000341c0: 6c69 656e 742e 5f63 6f6e 7374 7275 6374  lient._construct
+000341d0: 5f73 696d 756c 7461 6e65 6f75 735f 6d75  _simultaneous_mu
+000341e0: 7369 6328 705b 325d 290a 0a20 2020 2064  sic(p[2])..    d
+000341f0: 6566 2070 5f73 696d 756c 7461 6e65 6f75  ef p_simultaneou
+00034200: 735f 6d75 7369 635f 5f53 494d 554c 5441  s_music__SIMULTA
+00034210: 4e45 4f55 535f 5f62 7261 6365 645f 6d75  NEOUS__braced_mu
+00034220: 7369 635f 6c69 7374 2873 656c 662c 2070  sic_list(self, p
+00034230: 293a 0a20 2020 2020 2020 2022 7369 6d75  ):.        "simu
+00034240: 6c74 616e 656f 7573 5f6d 7573 6963 203a  ltaneous_music :
+00034250: 2053 494d 554c 5441 4e45 4f55 5320 6272   SIMULTANEOUS br
+00034260: 6163 6564 5f6d 7573 6963 5f6c 6973 7422  aced_music_list"
+00034270: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00034280: 7365 6c66 2e63 6c69 656e 742e 5f63 6f6e  self.client._con
+00034290: 7374 7275 6374 5f73 696d 756c 7461 6e65  struct_simultane
+000342a0: 6f75 735f 6d75 7369 6328 705b 325d 290a  ous_music(p[2]).
+000342b0: 0a20 2020 2023 2323 2073 7465 6e6f 5f64  .    ### steno_d
+000342c0: 7572 6174 696f 6e20 2323 230a 0a20 2020  uration ###..   
+000342d0: 2064 6566 2070 5f73 7465 6e6f 5f64 7572   def p_steno_dur
+000342e0: 6174 696f 6e5f 5f44 5552 4154 494f 4e5f  ation__DURATION_
+000342f0: 4944 454e 5449 4649 4552 5f5f 646f 7473  IDENTIFIER__dots
+00034300: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+00034310: 2020 2022 7374 656e 6f5f 6475 7261 7469     "steno_durati
+00034320: 6f6e 203a 2044 5552 4154 494f 4e5f 4944  on : DURATION_ID
+00034330: 454e 5449 4649 4552 2064 6f74 7322 0a20  ENTIFIER dots". 
+00034340: 2020 2020 2020 2064 6f74 7320 3d20 705b         dots = p[
+00034350: 325d 2e76 616c 7565 0a20 2020 2020 2020  2].value.       
+00034360: 2064 7572 6174 696f 6e20 3d20 705b 315d   duration = p[1]
+00034370: 2e64 7572 6174 696f 6e0a 2020 2020 2020  .duration.      
+00034380: 2020 6d75 6c74 6970 6c69 6572 203d 2070    multiplier = p
+00034390: 5b31 5d2e 6d75 6c74 6970 6c69 6572 0a20  [1].multiplier. 
+000343a0: 2020 2020 2020 2069 6620 646f 7473 3a0a         if dots:.
+000343b0: 2020 2020 2020 2020 2020 2020 6475 7261              dura
+000343c0: 7469 6f6e 203d 2064 7572 6174 696f 6e2e  tion = duration.
+000343d0: 6c69 6c79 706f 6e64 5f64 7572 6174 696f  lilypond_duratio
+000343e0: 6e5f 7374 7269 6e67 0a20 2020 2020 2020  n_string.       
+000343f0: 2020 2020 2064 7572 6174 696f 6e20 2b3d       duration +=
+00034400: 2022 2e22 202a 2064 6f74 730a 2020 2020   "." * dots.    
+00034410: 2020 2020 2020 2020 6475 7261 7469 6f6e          duration
+00034420: 203d 205f 6475 7261 7469 6f6e 2e44 7572   = _duration.Dur
+00034430: 6174 696f 6e2e 6672 6f6d 5f6c 696c 7970  ation.from_lilyp
+00034440: 6f6e 645f 6475 7261 7469 6f6e 5f73 7472  ond_duration_str
+00034450: 696e 6728 6475 7261 7469 6f6e 290a 2020  ing(duration).  
+00034460: 2020 2020 2020 705b 305d 203d 204c 696c        p[0] = Lil
+00034470: 7950 6f6e 6444 7572 6174 696f 6e28 6475  yPondDuration(du
+00034480: 7261 7469 6f6e 2c20 6d75 6c74 6970 6c69  ration, multipli
+00034490: 6572 290a 0a20 2020 2064 6566 2070 5f73  er)..    def p_s
+000344a0: 7465 6e6f 5f64 7572 6174 696f 6e5f 5f62  teno_duration__b
+000344b0: 6172 655f 756e 7369 676e 6564 5f5f 646f  are_unsigned__do
+000344c0: 7473 2873 656c 662c 2070 293a 0a20 2020  ts(self, p):.   
+000344d0: 2020 2020 2022 7374 656e 6f5f 6475 7261       "steno_dura
+000344e0: 7469 6f6e 203a 2062 6172 655f 756e 7369  tion : bare_unsi
+000344f0: 676e 6564 2064 6f74 7322 0a20 2020 2020  gned dots".     
+00034500: 2020 2061 7373 6572 7420 5f64 7572 6174     assert _durat
+00034510: 696f 6e2e 4475 7261 7469 6f6e 2e69 735f  ion.Duration.is_
+00034520: 746f 6b65 6e28 705b 315d 290a 2020 2020  token(p[1]).    
+00034530: 2020 2020 646f 7473 203d 2070 5b32 5d2e      dots = p[2].
+00034540: 7661 6c75 650a 2020 2020 2020 2020 746f  value.        to
+00034550: 6b65 6e20 3d20 7374 7228 705b 315d 2920  ken = str(p[1]) 
+00034560: 2b20 222e 2220 2a20 646f 7473 0a20 2020  + "." * dots.   
+00034570: 2020 2020 2064 7572 6174 696f 6e20 3d20       duration = 
+00034580: 5f64 7572 6174 696f 6e2e 4475 7261 7469  _duration.Durati
+00034590: 6f6e 2e66 726f 6d5f 6c69 6c79 706f 6e64  on.from_lilypond
+000345a0: 5f64 7572 6174 696f 6e5f 7374 7269 6e67  _duration_string
+000345b0: 2874 6f6b 656e 290a 2020 2020 2020 2020  (token).        
+000345c0: 705b 305d 203d 204c 696c 7950 6f6e 6444  p[0] = LilyPondD
+000345d0: 7572 6174 696f 6e28 6475 7261 7469 6f6e  uration(duration
+000345e0: 2c20 4e6f 6e65 290a 0a20 2020 2023 2323  , None)..    ###
+000345f0: 2073 7465 6e6f 5f70 6974 6368 2023 2323   steno_pitch ###
+00034600: 0a0a 2020 2020 6465 6620 705f 7374 656e  ..    def p_sten
+00034610: 6f5f 7069 7463 685f 5f4e 4f54 454e 414d  o_pitch__NOTENAM
+00034620: 455f 5049 5443 4828 7365 6c66 2c20 7029  E_PITCH(self, p)
+00034630: 3a0a 2020 2020 2020 2020 2273 7465 6e6f  :.        "steno
+00034640: 5f70 6974 6368 203a 204e 4f54 454e 414d  _pitch : NOTENAM
+00034650: 455f 5049 5443 4822 0a20 2020 2020 2020  E_PITCH".       
+00034660: 2069 6620 6973 696e 7374 616e 6365 2870   if isinstance(p
+00034670: 5b31 5d2c 205f 7069 7463 682e 4e61 6d65  [1], _pitch.Name
+00034680: 6450 6974 6368 436c 6173 7329 3a0a 2020  dPitchClass):.  
+00034690: 2020 2020 2020 2020 2020 705b 305d 203d            p[0] =
+000346a0: 205f 7069 7463 682e 4e61 6d65 6450 6974   _pitch.NamedPit
+000346b0: 6368 2870 5b31 5d2e 6e61 6d65 290a 2020  ch(p[1].name).  
+000346c0: 2020 2020 2020 656c 6966 2070 5b31 5d20        elif p[1] 
+000346d0: 696e 205f 6c79 636f 6e73 742e 6472 756d  in _lyconst.drum
+000346e0: 733a 0a20 2020 2020 2020 2020 2020 2070  s:.            p
+000346f0: 5b30 5d20 3d20 705b 315d 0a0a 2020 2020  [0] = p[1]..    
+00034700: 6465 6620 705f 7374 656e 6f5f 7069 7463  def p_steno_pitc
+00034710: 685f 5f4e 4f54 454e 414d 455f 5049 5443  h__NOTENAME_PITC
+00034720: 485f 5f73 7562 5f71 756f 7465 7328 7365  H__sub_quotes(se
+00034730: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+00034740: 2273 7465 6e6f 5f70 6974 6368 203a 204e  "steno_pitch : N
+00034750: 4f54 454e 414d 455f 5049 5443 4820 7375  OTENAME_PITCH su
+00034760: 625f 7175 6f74 6573 220a 2020 2020 2020  b_quotes".      
+00034770: 2020 705b 305d 203d 205f 7069 7463 682e    p[0] = _pitch.
+00034780: 4e61 6d65 6450 6974 6368 2870 5b31 5d2e  NamedPitch(p[1].
+00034790: 6e61 6d65 202b 2022 2c22 202a 2070 5b32  name + "," * p[2
+000347a0: 5d29 0a0a 2020 2020 6465 6620 705f 7374  ])..    def p_st
+000347b0: 656e 6f5f 7069 7463 685f 5f4e 4f54 454e  eno_pitch__NOTEN
+000347c0: 414d 455f 5049 5443 485f 5f73 7570 5f71  AME_PITCH__sup_q
+000347d0: 756f 7465 7328 7365 6c66 2c20 7029 3a0a  uotes(self, p):.
+000347e0: 2020 2020 2020 2020 2273 7465 6e6f 5f70          "steno_p
+000347f0: 6974 6368 203a 204e 4f54 454e 414d 455f  itch : NOTENAME_
+00034800: 5049 5443 4820 7375 705f 7175 6f74 6573  PITCH sup_quotes
+00034810: 220a 2020 2020 2020 2020 705b 305d 203d  ".        p[0] =
+00034820: 205f 7069 7463 682e 4e61 6d65 6450 6974   _pitch.NamedPit
+00034830: 6368 2870 5b31 5d2e 6e61 6d65 202b 2022  ch(p[1].name + "
+00034840: 2722 202a 2070 5b32 5d29 0a0a 2020 2020  '" * p[2])..    
+00034850: 2323 2320 7374 656e 6f5f 746f 6e69 635f  ### steno_tonic_
+00034860: 7069 7463 6820 2323 230a 0a20 2020 2064  pitch ###..    d
+00034870: 6566 2070 5f73 7465 6e6f 5f74 6f6e 6963  ef p_steno_tonic
+00034880: 5f70 6974 6368 5f5f 544f 4e49 434e 414d  _pitch__TONICNAM
+00034890: 455f 5049 5443 4828 7365 6c66 2c20 7029  E_PITCH(self, p)
+000348a0: 3a0a 2020 2020 2020 2020 2273 7465 6e6f  :.        "steno
+000348b0: 5f74 6f6e 6963 5f70 6974 6368 203a 2054  _tonic_pitch : T
+000348c0: 4f4e 4943 4e41 4d45 5f50 4954 4348 220a  ONICNAME_PITCH".
+000348d0: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+000348e0: 796e 7461 784e 6f64 6528 2273 7465 6e6f  yntaxNode("steno
+000348f0: 5f74 6f6e 6963 5f70 6974 6368 222c 2070  _tonic_pitch", p
+00034900: 2e5f 5f67 6574 736c 6963 655f 5f28 312c  .__getslice__(1,
+00034910: 204e 6f6e 6529 290a 0a20 2020 2064 6566   None))..    def
+00034920: 2070 5f73 7465 6e6f 5f74 6f6e 6963 5f70   p_steno_tonic_p
+00034930: 6974 6368 5f5f 544f 4e49 434e 414d 455f  itch__TONICNAME_
+00034940: 5049 5443 485f 5f73 7562 5f71 756f 7465  PITCH__sub_quote
+00034950: 7328 7365 6c66 2c20 7029 3a0a 2020 2020  s(self, p):.    
+00034960: 2020 2020 2273 7465 6e6f 5f74 6f6e 6963      "steno_tonic
+00034970: 5f70 6974 6368 203a 2054 4f4e 4943 4e41  _pitch : TONICNA
+00034980: 4d45 5f50 4954 4348 2073 7562 5f71 756f  ME_PITCH sub_quo
+00034990: 7465 7322 0a20 2020 2020 2020 2070 5b30  tes".        p[0
+000349a0: 5d20 3d20 5379 6e74 6178 4e6f 6465 2822  ] = SyntaxNode("
+000349b0: 7374 656e 6f5f 746f 6e69 635f 7069 7463  steno_tonic_pitc
+000349c0: 6822 2c20 702e 5f5f 6765 7473 6c69 6365  h", p.__getslice
+000349d0: 5f5f 2831 2c20 4e6f 6e65 2929 0a0a 2020  __(1, None))..  
+000349e0: 2020 6465 6620 705f 7374 656e 6f5f 746f    def p_steno_to
+000349f0: 6e69 635f 7069 7463 685f 5f54 4f4e 4943  nic_pitch__TONIC
+00034a00: 4e41 4d45 5f50 4954 4348 5f5f 7375 705f  NAME_PITCH__sup_
+00034a10: 7175 6f74 6573 2873 656c 662c 2070 293a  quotes(self, p):
+00034a20: 0a20 2020 2020 2020 2022 7374 656e 6f5f  .        "steno_
+00034a30: 746f 6e69 635f 7069 7463 6820 3a20 544f  tonic_pitch : TO
+00034a40: 4e49 434e 414d 455f 5049 5443 4820 7375  NICNAME_PITCH su
+00034a50: 705f 7175 6f74 6573 220a 2020 2020 2020  p_quotes".      
+00034a60: 2020 705b 305d 203d 2053 796e 7461 784e    p[0] = SyntaxN
+00034a70: 6f64 6528 2273 7465 6e6f 5f74 6f6e 6963  ode("steno_tonic
+00034a80: 5f70 6974 6368 222c 2070 2e5f 5f67 6574  _pitch", p.__get
+00034a90: 736c 6963 655f 5f28 312c 204e 6f6e 6529  slice__(1, None)
+00034aa0: 290a 0a20 2020 2023 2323 2073 7465 705f  )..    ### step_
+00034ab0: 6e75 6d62 6572 2023 2323 0a0a 2020 2020  number ###..    
+00034ac0: 2320 2020 2064 6566 2070 5f73 7465 705f  #    def p_step_
+00034ad0: 6e75 6d62 6572 5f5f 6261 7265 5f75 6e73  number__bare_uns
+00034ae0: 6967 6e65 6428 7365 6c66 2c20 7029 3a0a  igned(self, p):.
+00034af0: 2020 2020 2320 2020 2020 2020 2027 7374      #        'st
+00034b00: 6570 5f6e 756d 6265 7220 3a20 6261 7265  ep_number : bare
+00034b10: 5f75 6e73 6967 6e65 6427 0a20 2020 2023  _unsigned'.    #
+00034b20: 2020 2020 2020 2020 705b 305d 203d 2053          p[0] = S
+00034b30: 796e 7461 784e 6f64 6528 2773 7465 705f  yntaxNode('step_
+00034b40: 6e75 6d62 6572 272c 2070 5b31 3a5d 290a  number', p[1:]).
+00034b50: 0a20 2020 2023 2020 2020 6465 6620 705f  .    #    def p_
+00034b60: 7374 6570 5f6e 756d 6265 725f 5f62 6172  step_number__bar
+00034b70: 655f 756e 7369 676e 6564 5f5f 4348 4f52  e_unsigned__CHOR
+00034b80: 445f 4d49 4e55 5328 7365 6c66 2c20 7029  D_MINUS(self, p)
+00034b90: 3a0a 2020 2020 2320 2020 2020 2020 2027  :.    #        '
+00034ba0: 7374 6570 5f6e 756d 6265 7220 3a20 6261  step_number : ba
+00034bb0: 7265 5f75 6e73 6967 6e65 6420 4348 4f52  re_unsigned CHOR
+00034bc0: 445f 4d49 4e55 5327 0a20 2020 2023 2020  D_MINUS'.    #  
+00034bd0: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+00034be0: 7461 784e 6f64 6528 2773 7465 705f 6e75  taxNode('step_nu
+00034bf0: 6d62 6572 272c 2070 5b31 3a5d 290a 0a20  mber', p[1:]).. 
+00034c00: 2020 2023 2020 2020 6465 6620 705f 7374     #    def p_st
+00034c10: 6570 5f6e 756d 6265 725f 5f62 6172 655f  ep_number__bare_
+00034c20: 756e 7369 676e 6564 5f5f 4368 7234 3328  unsigned__Chr43(
+00034c30: 7365 6c66 2c20 7029 3a0a 2020 2020 2320  self, p):.    # 
+00034c40: 2020 2020 2020 2022 7374 6570 5f6e 756d         "step_num
+00034c50: 6265 7220 3a20 6261 7265 5f75 6e73 6967  ber : bare_unsig
+00034c60: 6e65 6420 272b 2722 0a20 2020 2023 2020  ned '+'".    #  
+00034c70: 2020 2020 2020 705b 305d 203d 2053 796e        p[0] = Syn
+00034c80: 7461 784e 6f64 6528 2773 7465 705f 6e75  taxNode('step_nu
+00034c90: 6d62 6572 272c 2070 5b31 3a5d 290a 0a20  mber', p[1:]).. 
+00034ca0: 2020 2023 2323 2073 7465 705f 6e75 6d62     ### step_numb
+00034cb0: 6572 7320 2323 230a 0a20 2020 2023 2020  ers ###..    #  
+00034cc0: 2020 6465 6620 705f 7374 6570 5f6e 756d    def p_step_num
+00034cd0: 6265 7273 5f5f 7374 6570 5f6e 756d 6265  bers__step_numbe
+00034ce0: 7228 7365 6c66 2c20 7029 3a0a 2020 2020  r(self, p):.    
+00034cf0: 2320 2020 2020 2020 2027 7374 6570 5f6e  #        'step_n
+00034d00: 756d 6265 7273 203a 2073 7465 705f 6e75  umbers : step_nu
+00034d10: 6d62 6572 270a 2020 2020 2320 2020 2020  mber'.    #     
+00034d20: 2020 2070 5b30 5d20 3d20 5379 6e74 6178     p[0] = Syntax
+00034d30: 4e6f 6465 2827 7374 6570 5f6e 756d 6265  Node('step_numbe
+00034d40: 7273 272c 2070 5b31 3a5d 290a 0a20 2020  rs', p[1:])..   
+00034d50: 2023 2020 2020 6465 6620 705f 7374 6570   #    def p_step
+00034d60: 5f6e 756d 6265 7273 5f5f 7374 6570 5f6e  _numbers__step_n
+00034d70: 756d 6265 7273 5f5f 4368 7234 365f 5f73  umbers__Chr46__s
+00034d80: 7465 705f 6e75 6d62 6572 2873 656c 662c  tep_number(self,
+00034d90: 2070 293a 0a20 2020 2023 2020 2020 2020   p):.    #      
+00034da0: 2020 2273 7465 705f 6e75 6d62 6572 7320    "step_numbers 
+00034db0: 3a20 7374 6570 5f6e 756d 6265 7273 2027  : step_numbers '
+00034dc0: 2e27 2073 7465 705f 6e75 6d62 6572 220a  .' step_number".
+00034dd0: 2020 2020 2320 2020 2020 2020 2070 5b30      #        p[0
+00034de0: 5d20 3d20 5379 6e74 6178 4e6f 6465 2827  ] = SyntaxNode('
+00034df0: 7374 6570 5f6e 756d 6265 7273 272c 2070  step_numbers', p
+00034e00: 5b31 3a5d 290a 0a20 2020 2023 2323 2073  [1:])..    ### s
+00034e10: 7472 696e 6720 2323 230a 0a20 2020 2064  tring ###..    d
+00034e20: 6566 2070 5f73 7472 696e 675f 5f53 5452  ef p_string__STR
+00034e30: 494e 4728 7365 6c66 2c20 7029 3a0a 2020  ING(self, p):.  
+00034e40: 2020 2020 2020 2273 7472 696e 6720 3a20        "string : 
+00034e50: 5354 5249 4e47 220a 2020 2020 2020 2020  STRING".        
+00034e60: 705b 305d 203d 2070 5b31 5d0a 0a20 2020  p[0] = p[1]..   
+00034e70: 2064 6566 2070 5f73 7472 696e 675f 5f53   def p_string__S
+00034e80: 5452 494e 475f 4944 454e 5449 4649 4552  TRING_IDENTIFIER
+00034e90: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+00034ea0: 2020 2022 7374 7269 6e67 203a 2053 5452     "string : STR
+00034eb0: 494e 475f 4944 454e 5449 4649 4552 220a  ING_IDENTIFIER".
+00034ec0: 2020 2020 2020 2020 705b 305d 203d 2070          p[0] = p
+00034ed0: 5b31 5d0a 0a20 2020 2064 6566 2070 5f73  [1]..    def p_s
+00034ee0: 7472 696e 675f 5f73 7472 696e 675f 5f43  tring__string__C
+00034ef0: 6872 3433 5f5f 7374 7269 6e67 2873 656c  hr43__string(sel
+00034f00: 662c 2070 293a 0a20 2020 2020 2020 2022  f, p):.        "
+00034f10: 7374 7269 6e67 203a 2073 7472 696e 6720  string : string 
+00034f20: 272b 2720 7374 7269 6e67 220a 2020 2020  '+' string".    
+00034f30: 2020 2020 705b 305d 203d 2070 5b31 5d20      p[0] = p[1] 
+00034f40: 2b20 705b 335d 0a0a 2020 2020 2323 2320  + p[3]..    ### 
+00034f50: 7374 7269 6e67 5f6e 756d 6265 725f 6576  string_number_ev
+00034f60: 656e 7420 2323 230a 0a20 2020 2064 6566  ent ###..    def
+00034f70: 2070 5f73 7472 696e 675f 6e75 6d62 6572   p_string_number
+00034f80: 5f65 7665 6e74 5f5f 455f 554e 5349 474e  _event__E_UNSIGN
+00034f90: 4544 2873 656c 662c 2070 293a 0a20 2020  ED(self, p):.   
+00034fa0: 2020 2020 2022 7374 7269 6e67 5f6e 756d       "string_num
+00034fb0: 6265 725f 6576 656e 7420 3a20 455f 554e  ber_event : E_UN
+00034fc0: 5349 474e 4544 220a 2020 2020 2020 2020  SIGNED".        
+00034fd0: 705b 305d 203d 2053 796e 7461 784e 6f64  p[0] = SyntaxNod
+00034fe0: 6528 2273 7472 696e 675f 6e75 6d62 6572  e("string_number
+00034ff0: 5f65 7665 6e74 222c 2070 5b31 3a5d 290a  _event", p[1:]).
+00035000: 0a20 2020 2023 2323 2073 7562 5f71 756f  .    ### sub_quo
+00035010: 7465 7320 2323 230a 0a20 2020 2064 6566  tes ###..    def
+00035020: 2070 5f73 7562 5f71 756f 7465 735f 5f43   p_sub_quotes__C
+00035030: 6872 3434 2873 656c 662c 2070 293a 0a20  hr44(self, p):. 
+00035040: 2020 2020 2020 2022 7375 625f 7175 6f74         "sub_quot
+00035050: 6573 203a 2027 2c27 220a 2020 2020 2020  es : ','".      
+00035060: 2020 705b 305d 203d 2031 0a0a 2020 2020    p[0] = 1..    
+00035070: 6465 6620 705f 7375 625f 7175 6f74 6573  def p_sub_quotes
+00035080: 5f5f 7375 625f 7175 6f74 6573 5f5f 4368  __sub_quotes__Ch
+00035090: 7234 3428 7365 6c66 2c20 7029 3a0a 2020  r44(self, p):.  
+000350a0: 2020 2020 2020 2273 7562 5f71 756f 7465        "sub_quote
+000350b0: 7320 3a20 7375 625f 7175 6f74 6573 2027  s : sub_quotes '
+000350c0: 2c27 220a 2020 2020 2020 2020 705b 305d  ,'".        p[0]
+000350d0: 203d 2070 5b31 5d20 2b20 310a 0a20 2020   = p[1] + 1..   
+000350e0: 2023 2323 2073 7570 5f71 756f 7465 7320   ### sup_quotes 
+000350f0: 2323 230a 0a20 2020 2064 6566 2070 5f73  ###..    def p_s
+00035100: 7570 5f71 756f 7465 735f 5f43 6872 3339  up_quotes__Chr39
+00035110: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+00035120: 2020 2022 7375 705f 7175 6f74 6573 203a     "sup_quotes :
+00035130: 2027 5c5c 2727 220a 2020 2020 2020 2020   '\\''".        
+00035140: 705b 305d 203d 2031 0a0a 2020 2020 6465  p[0] = 1..    de
+00035150: 6620 705f 7375 705f 7175 6f74 6573 5f5f  f p_sup_quotes__
+00035160: 7375 705f 7175 6f74 6573 5f5f 4368 7233  sup_quotes__Chr3
+00035170: 3928 7365 6c66 2c20 7029 3a0a 2020 2020  9(self, p):.    
+00035180: 2020 2020 2273 7570 5f71 756f 7465 7320      "sup_quotes 
+00035190: 3a20 7375 705f 7175 6f74 6573 2027 5c5c  : sup_quotes '\\
+000351a0: 2727 220a 2020 2020 2020 2020 705b 305d  ''".        p[0]
+000351b0: 203d 2070 5b31 5d20 2b20 310a 0a20 2020   = p[1] + 1..   
+000351c0: 2023 2323 2074 656d 706f 5f65 7665 6e74   ### tempo_event
+000351d0: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+000351e0: 7465 6d70 6f5f 6576 656e 745f 5f54 454d  tempo_event__TEM
+000351f0: 504f 5f5f 7363 616c 6172 2873 656c 662c  PO__scalar(self,
+00035200: 2070 293a 0a20 2020 2020 2020 2022 7465   p):.        "te
+00035210: 6d70 6f5f 6576 656e 7420 3a20 5445 4d50  mpo_event : TEMP
+00035220: 4f20 7363 616c 6172 220a 2020 2020 2020  O scalar".      
+00035230: 2020 705b 305d 203d 205f 696e 6469 6361    p[0] = _indica
+00035240: 746f 7273 2e4d 6574 726f 6e6f 6d65 4d61  tors.MetronomeMa
+00035250: 726b 2874 6578 7475 616c 5f69 6e64 6963  rk(textual_indic
+00035260: 6174 696f 6e3d 7374 7228 705b 325d 2929  ation=str(p[2]))
+00035270: 0a0a 2020 2020 6465 6620 705f 7465 6d70  ..    def p_temp
+00035280: 6f5f 6576 656e 745f 5f54 454d 504f 5f5f  o_event__TEMPO__
+00035290: 7363 616c 6172 5f63 6c6f 7365 645f 5f73  scalar_closed__s
+000352a0: 7465 6e6f 5f64 7572 6174 696f 6e5f 5f43  teno_duration__C
+000352b0: 6872 3631 5f5f 7465 6d70 6f5f 7261 6e67  hr61__tempo_rang
+000352c0: 6528 0a20 2020 2020 2020 2073 656c 662c  e(.        self,
+000352d0: 2070 0a20 2020 2029 3a0a 2020 2020 2020   p.    ):.      
+000352e0: 2020 2274 656d 706f 5f65 7665 6e74 203a    "tempo_event :
+000352f0: 2054 454d 504f 2073 6361 6c61 725f 636c   TEMPO scalar_cl
+00035300: 6f73 6564 2073 7465 6e6f 5f64 7572 6174  osed steno_durat
+00035310: 696f 6e20 273d 2720 7465 6d70 6f5f 7261  ion '=' tempo_ra
+00035320: 6e67 6522 0a20 2020 2020 2020 2070 5b30  nge".        p[0
+00035330: 5d20 3d20 5f69 6e64 6963 6174 6f72 732e  ] = _indicators.
+00035340: 4d65 7472 6f6e 6f6d 654d 6172 6b28 0a20  MetronomeMark(. 
+00035350: 2020 2020 2020 2020 2020 2072 6566 6572             refer
+00035360: 656e 6365 5f64 7572 6174 696f 6e3d 705b  ence_duration=p[
+00035370: 335d 2e64 7572 6174 696f 6e2c 0a20 2020  3].duration,.   
+00035380: 2020 2020 2020 2020 2075 6e69 7473 5f70           units_p
+00035390: 6572 5f6d 696e 7574 653d 705b 355d 2c0a  er_minute=p[5],.
+000353a0: 2020 2020 2020 2020 2020 2020 7465 7874              text
+000353b0: 7561 6c5f 696e 6469 6361 7469 6f6e 3d73  ual_indication=s
+000353c0: 7472 2870 5b32 5d29 2c0a 2020 2020 2020  tr(p[2]),.      
+000353d0: 2020 290a 0a20 2020 2064 6566 2070 5f74    )..    def p_t
+000353e0: 656d 706f 5f65 7665 6e74 5f5f 5445 4d50  empo_event__TEMP
+000353f0: 4f5f 5f73 7465 6e6f 5f64 7572 6174 696f  O__steno_duratio
+00035400: 6e5f 5f43 6872 3631 5f5f 7465 6d70 6f5f  n__Chr61__tempo_
+00035410: 7261 6e67 6528 7365 6c66 2c20 7029 3a0a  range(self, p):.
+00035420: 2020 2020 2020 2020 2274 656d 706f 5f65          "tempo_e
+00035430: 7665 6e74 203a 2054 454d 504f 2073 7465  vent : TEMPO ste
+00035440: 6e6f 5f64 7572 6174 696f 6e20 273d 2720  no_duration '=' 
+00035450: 7465 6d70 6f5f 7261 6e67 6522 0a20 2020  tempo_range".   
+00035460: 2020 2020 2070 5b30 5d20 3d20 5f69 6e64       p[0] = _ind
+00035470: 6963 6174 6f72 732e 4d65 7472 6f6e 6f6d  icators.Metronom
+00035480: 654d 6172 6b28 0a20 2020 2020 2020 2020  eMark(.         
+00035490: 2020 2072 6566 6572 656e 6365 5f64 7572     reference_dur
+000354a0: 6174 696f 6e3d 705b 325d 2e64 7572 6174  ation=p[2].durat
+000354b0: 696f 6e2c 2075 6e69 7473 5f70 6572 5f6d  ion, units_per_m
+000354c0: 696e 7574 653d 705b 345d 0a20 2020 2020  inute=p[4].     
+000354d0: 2020 2029 0a0a 2020 2020 2323 2320 7465     )..    ### te
+000354e0: 6d70 6f5f 7261 6e67 6520 2323 230a 0a20  mpo_range ###.. 
+000354f0: 2020 2064 6566 2070 5f74 656d 706f 5f72     def p_tempo_r
+00035500: 616e 6765 5f5f 6261 7265 5f75 6e73 6967  ange__bare_unsig
+00035510: 6e65 6428 7365 6c66 2c20 7029 3a0a 2020  ned(self, p):.  
+00035520: 2020 2020 2020 2274 656d 706f 5f72 616e        "tempo_ran
+00035530: 6765 203a 2062 6172 655f 756e 7369 676e  ge : bare_unsign
+00035540: 6564 220a 2020 2020 2020 2020 705b 305d  ed".        p[0]
+00035550: 203d 2070 5b31 5d0a 0a20 2020 2064 6566   = p[1]..    def
+00035560: 2070 5f74 656d 706f 5f72 616e 6765 5f5f   p_tempo_range__
+00035570: 6261 7265 5f75 6e73 6967 6e65 645f 5f43  bare_unsigned__C
+00035580: 6872 3435 5f5f 6261 7265 5f75 6e73 6967  hr45__bare_unsig
+00035590: 6e65 6428 7365 6c66 2c20 7029 3a0a 2020  ned(self, p):.  
+000355a0: 2020 2020 2020 2274 656d 706f 5f72 616e        "tempo_ran
+000355b0: 6765 203a 2062 6172 655f 756e 7369 676e  ge : bare_unsign
+000355c0: 6564 2027 2d27 2062 6172 655f 756e 7369  ed '-' bare_unsi
+000355d0: 676e 6564 220a 2020 2020 2020 2020 705b  gned".        p[
+000355e0: 305d 203d 2028 705b 315d 2c20 705b 335d  0] = (p[1], p[3]
+000355f0: 290a 0a20 2020 2023 2323 2074 6f70 6c65  )..    ### tople
+00035600: 7665 6c5f 6578 7072 6573 7369 6f6e 2023  vel_expression #
+00035610: 2323 0a0a 2020 2020 2320 2020 2064 6566  ##..    #    def
+00035620: 2070 5f74 6f70 6c65 7665 6c5f 6578 7072   p_toplevel_expr
+00035630: 6573 7369 6f6e 5f5f 626f 6f6b 5f62 6c6f  ession__book_blo
+00035640: 636b 2873 656c 662c 2070 293a 0a20 2020  ck(self, p):.   
+00035650: 2023 2020 2020 2020 2020 2774 6f70 6c65   #        'tople
+00035660: 7665 6c5f 6578 7072 6573 7369 6f6e 203a  vel_expression :
+00035670: 2062 6f6f 6b5f 626c 6f63 6b27 0a20 2020   book_block'.   
+00035680: 2023 2020 2020 2020 2020 705b 305d 203d   #        p[0] =
+00035690: 2070 5b31 5d0a 0a20 2020 2023 2020 2020   p[1]..    #    
+000356a0: 6465 6620 705f 746f 706c 6576 656c 5f65  def p_toplevel_e
+000356b0: 7870 7265 7373 696f 6e5f 5f62 6f6f 6b70  xpression__bookp
+000356c0: 6172 745f 626c 6f63 6b28 7365 6c66 2c20  art_block(self, 
+000356d0: 7029 3a0a 2020 2020 2320 2020 2020 2020  p):.    #       
+000356e0: 2027 746f 706c 6576 656c 5f65 7870 7265   'toplevel_expre
+000356f0: 7373 696f 6e20 3a20 626f 6f6b 7061 7274  ssion : bookpart
+00035700: 5f62 6c6f 636b 270a 2020 2020 2320 2020  _block'.    #   
+00035710: 2020 2020 2070 5b30 5d20 3d20 705b 315d       p[0] = p[1]
+00035720: 0a0a 2020 2020 6465 6620 705f 746f 706c  ..    def p_topl
+00035730: 6576 656c 5f65 7870 7265 7373 696f 6e5f  evel_expression_
+00035740: 5f63 6f6d 706f 7369 7465 5f6d 7573 6963  _composite_music
+00035750: 2873 656c 662c 2070 293a 0a20 2020 2020  (self, p):.     
+00035760: 2020 2022 746f 706c 6576 656c 5f65 7870     "toplevel_exp
+00035770: 7265 7373 696f 6e20 3a20 636f 6d70 6f73  ression : compos
+00035780: 6974 655f 6d75 7369 6322 0a20 2020 2020  ite_music".     
+00035790: 2020 2070 5b30 5d20 3d20 705b 315d 0a0a     p[0] = p[1]..
+000357a0: 2020 2020 6465 6620 705f 746f 706c 6576      def p_toplev
+000357b0: 656c 5f65 7870 7265 7373 696f 6e5f 5f66  el_expression__f
+000357c0: 756c 6c5f 6d61 726b 7570 2873 656c 662c  ull_markup(self,
+000357d0: 2070 293a 0a20 2020 2020 2020 2022 746f   p):.        "to
+000357e0: 706c 6576 656c 5f65 7870 7265 7373 696f  plevel_expressio
+000357f0: 6e20 3a20 6675 6c6c 5f6d 6172 6b75 7022  n : full_markup"
+00035800: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00035810: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
+00035820: 746f 706c 6576 656c 5f65 7870 7265 7373  toplevel_express
+00035830: 696f 6e5f 5f66 756c 6c5f 6d61 726b 7570  ion__full_markup
+00035840: 5f6c 6973 7428 7365 6c66 2c20 7029 3a0a  _list(self, p):.
+00035850: 2020 2020 2020 2020 2274 6f70 6c65 7665          "topleve
+00035860: 6c5f 6578 7072 6573 7369 6f6e 203a 2066  l_expression : f
+00035870: 756c 6c5f 6d61 726b 7570 5f6c 6973 7422  ull_markup_list"
+00035880: 0a20 2020 2020 2020 2070 5b30 5d20 3d20  .        p[0] = 
+00035890: 705b 315d 0a0a 2020 2020 6465 6620 705f  p[1]..    def p_
+000358a0: 746f 706c 6576 656c 5f65 7870 7265 7373  toplevel_express
+000358b0: 696f 6e5f 5f6c 696c 7970 6f6e 645f 6865  ion__lilypond_he
+000358c0: 6164 6572 2873 656c 662c 2070 293a 0a20  ader(self, p):. 
+000358d0: 2020 2020 2020 2022 746f 706c 6576 656c         "toplevel
+000358e0: 5f65 7870 7265 7373 696f 6e20 3a20 6c69  _expression : li
+000358f0: 6c79 706f 6e64 5f68 6561 6465 7222 0a20  lypond_header". 
+00035900: 2020 2020 2020 2070 5b30 5d20 3d20 705b         p[0] = p[
+00035910: 315d 0a0a 2020 2020 6465 6620 705f 746f  1]..    def p_to
+00035920: 706c 6576 656c 5f65 7870 7265 7373 696f  plevel_expressio
+00035930: 6e5f 5f6f 7574 7075 745f 6465 6628 7365  n__output_def(se
+00035940: 6c66 2c20 7029 3a0a 2020 2020 2020 2020  lf, p):.        
+00035950: 2274 6f70 6c65 7665 6c5f 6578 7072 6573  "toplevel_expres
+00035960: 7369 6f6e 203a 206f 7574 7075 745f 6465  sion : output_de
+00035970: 6622 0a20 2020 2020 2020 2070 5b30 5d20  f".        p[0] 
+00035980: 3d20 705b 315d 0a0a 2020 2020 6465 6620  = p[1]..    def 
+00035990: 705f 746f 706c 6576 656c 5f65 7870 7265  p_toplevel_expre
+000359a0: 7373 696f 6e5f 5f73 636f 7265 5f62 6c6f  ssion__score_blo
+000359b0: 636b 2873 656c 662c 2070 293a 0a20 2020  ck(self, p):.   
+000359c0: 2020 2020 2022 746f 706c 6576 656c 5f65       "toplevel_e
+000359d0: 7870 7265 7373 696f 6e20 3a20 7363 6f72  xpression : scor
+000359e0: 655f 626c 6f63 6b22 0a20 2020 2020 2020  e_block".       
+000359f0: 2070 5b30 5d20 3d20 705b 315d 0a0a 2020   p[0] = p[1]..  
+00035a00: 2020 2323 2320 7472 656d 6f6c 6f5f 7479    ### tremolo_ty
+00035a10: 7065 2023 2323 0a0a 2020 2020 6465 6620  pe ###..    def 
+00035a20: 705f 7472 656d 6f6c 6f5f 7479 7065 5f5f  p_tremolo_type__
+00035a30: 4368 7235 3828 7365 6c66 2c20 7029 3a0a  Chr58(self, p):.
+00035a40: 2020 2020 2020 2020 2274 7265 6d6f 6c6f          "tremolo
+00035a50: 5f74 7970 6520 3a20 273a 2722 0a20 2020  _type : ':'".   
+00035a60: 2020 2020 2070 5b30 5d20 3d20 4e6f 6e65       p[0] = None
+00035a70: 0a0a 2020 2020 6465 6620 705f 7472 656d  ..    def p_trem
+00035a80: 6f6c 6f5f 7479 7065 5f5f 4368 7235 385f  olo_type__Chr58_
+00035a90: 5f62 6172 655f 756e 7369 676e 6564 2873  _bare_unsigned(s
+00035aa0: 656c 662c 2070 293a 0a20 2020 2020 2020  elf, p):.       
+00035ab0: 2022 7472 656d 6f6c 6f5f 7479 7065 203a   "tremolo_type :
+00035ac0: 2027 3a27 2062 6172 655f 756e 7369 676e   ':' bare_unsign
+00035ad0: 6564 220a 2020 2020 2020 2020 705b 305d  ed".        p[0]
+00035ae0: 203d 205f 696e 6469 6361 746f 7273 2e53   = _indicators.S
+00035af0: 7465 6d54 7265 6d6f 6c6f 2870 5b32 5d29  temTremolo(p[2])
+00035b00: 0a0a 2020 2020 2323 2320 756e 7369 676e  ..    ### unsign
+00035b10: 6564 5f6e 756d 6265 7220 2323 230a 0a20  ed_number ###.. 
+00035b20: 2020 2023 2020 2020 6465 6620 705f 756e     #    def p_un
+00035b30: 7369 676e 6564 5f6e 756d 6265 725f 5f4e  signed_number__N
+00035b40: 554d 4245 525f 4944 454e 5449 4649 4552  UMBER_IDENTIFIER
+00035b50: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+00035b60: 2020 2020 2020 2020 2775 6e73 6967 6e65          'unsigne
+00035b70: 645f 6e75 6d62 6572 203a 204e 554d 4245  d_number : NUMBE
+00035b80: 525f 4944 454e 5449 4649 4552 270a 2020  R_IDENTIFIER'.  
+00035b90: 2020 2320 2020 2020 2020 2070 5b30 5d20    #        p[0] 
+00035ba0: 3d20 705b 315d 0a0a 2020 2020 2320 2020  = p[1]..    #   
+00035bb0: 2064 6566 2070 5f75 6e73 6967 6e65 645f   def p_unsigned_
+00035bc0: 6e75 6d62 6572 5f5f 554e 5349 474e 4544  number__UNSIGNED
+00035bd0: 2873 656c 662c 2070 293a 0a20 2020 2023  (self, p):.    #
+00035be0: 2020 2020 2020 2020 2775 6e73 6967 6e65          'unsigne
+00035bf0: 645f 6e75 6d62 6572 203a 2055 4e53 4947  d_number : UNSIG
+00035c00: 4e45 4427 0a20 2020 2023 2020 2020 2020  NED'.    #      
+00035c10: 2020 705b 305d 203d 2070 5b31 5d0a 0a20    p[0] = p[1].. 
+00035c20: 2020 2023 2323 2050 4c59 2065 7272 6f72     ### PLY error
+00035c30: 2023 2323 0a0a 2020 2020 6465 6620 705f   ###..    def p_
+00035c40: 6572 726f 7228 7365 6c66 2c20 7029 3a0a  error(self, p):.
+00035c50: 2020 2020 2020 2020 2320 7072 696e 7420          # print 
+00035c60: 700a 2020 2020 2020 2020 7261 6973 6520  p.        raise 
+00035c70: 5f65 7863 6570 7469 6f6e 732e 4c69 6c79  _exceptions.Lily
+00035c80: 506f 6e64 5061 7273 6572 4572 726f 7228  PondParserError(
+00035c90: 7029 0a0a 0a63 6c61 7373 2053 6571 7565  p)...class Seque
+00035ca0: 6e74 6961 6c4d 7573 6963 284d 7573 6963  ntialMusic(Music
+00035cb0: 293a 0a20 2020 2022 2222 0a20 2020 2041  ):.    """.    A
+00035cc0: 626a 6164 206d 6f64 656c 206f 6620 7468  bjad model of th
+00035cd0: 6520 4c69 6c79 506f 6e64 2041 5354 2073  e LilyPond AST s
+00035ce0: 6571 7565 6e74 6961 6c20 6d75 7369 6320  equential music 
+00035cf0: 6e6f 6465 2e0a 2020 2020 2222 220a 0a20  node..    """.. 
+00035d00: 2020 205f 5f73 6c6f 7473 5f5f 203d 2028     __slots__ = (
+00035d10: 290a 0a20 2020 2064 6566 2063 6f6e 7374  )..    def const
+00035d20: 7275 6374 2873 656c 6629 3a0a 2020 2020  ruct(self):.    
+00035d30: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00035d40: 436f 6e73 7472 7563 7473 2073 6571 7565  Constructs seque
+00035d50: 6e74 6961 6c20 6d75 7369 632e 0a0a 2020  ntial music...  
+00035d60: 2020 2020 2020 5265 7475 726e 7320 4162        Returns Ab
+00035d70: 6a61 6420 636f 6e74 6169 6e65 722e 0a20  jad container.. 
+00035d80: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00035d90: 2020 2063 6f6e 7461 696e 6572 203d 205f     container = _
+00035da0: 7363 6f72 652e 436f 6e74 6169 6e65 7228  score.Container(
+00035db0: 290a 2020 2020 2020 2020 666f 7220 7820  ).        for x 
+00035dc0: 696e 2073 656c 662e 6d75 7369 633a 0a20  in self.music:. 
+00035dd0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00035de0: 696e 7374 616e 6365 2878 2c20 5f73 636f  instance(x, _sco
+00035df0: 7265 2e43 6f6d 706f 6e65 6e74 293a 0a20  re.Component):. 
+00035e00: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00035e10: 6f6e 7461 696e 6572 2e61 7070 656e 6428  ontainer.append(
+00035e20: 7829 0a20 2020 2020 2020 2020 2020 2065  x).            e
+00035e30: 6c69 6620 6973 696e 7374 616e 6365 2878  lif isinstance(x
+00035e40: 2c20 7479 7065 2873 656c 6629 293a 0a20  , type(self)):. 
+00035e50: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00035e60: 6f6e 7461 696e 6572 2e65 7874 656e 6428  ontainer.extend(
+00035e70: 782e 636f 6e73 7472 7563 7428 2929 0a20  x.construct()). 
+00035e80: 2020 2020 2020 2072 6574 7572 6e20 636f         return co
+00035e90: 6e74 6169 6e65 720a 0a0a 636c 6173 7320  ntainer...class 
+00035ea0: 5369 6d75 6c74 616e 656f 7573 4d75 7369  SimultaneousMusi
+00035eb0: 6328 4d75 7369 6329 3a0a 2020 2020 2222  c(Music):.    ""
+00035ec0: 220a 2020 2020 4162 6a61 6420 6d6f 6465  ".    Abjad mode
+00035ed0: 6c20 6f66 2074 6865 204c 696c 7950 6f6e  l of the LilyPon
+00035ee0: 6420 4153 5420 7369 6d75 6c74 616e 656f  d AST simultaneo
+00035ef0: 7573 206d 7573 6963 206e 6f64 652e 0a20  us music node.. 
+00035f00: 2020 2022 2222 0a0a 2020 2020 5f5f 736c     """..    __sl
+00035f10: 6f74 735f 5f20 3d20 2829 0a0a 0a63 6c61  ots__ = ()...cla
+00035f20: 7373 2053 796e 7461 784e 6f64 653a 0a20  ss SyntaxNode:. 
+00035f30: 2020 2022 2222 0a20 2020 2041 206e 6f64     """.    A nod
+00035f40: 6520 696e 2061 6e20 6162 7374 7261 6374  e in an abstract
+00035f50: 2073 796e 7461 7820 7472 6565 2028 4153   syntax tree (AS
+00035f60: 5429 2e0a 0a20 2020 204e 6f74 2063 6f6d  T)...    Not com
+00035f70: 706f 7365 722d 7361 6665 2e0a 0a20 2020  poser-safe...   
+00035f80: 2055 7365 6420 696e 7465 726e 616c 6c79   Used internally
+00035f90: 2062 7920 4c69 6c79 506f 6e64 5061 7273   by LilyPondPars
+00035fa0: 6572 2e0a 2020 2020 2222 220a 0a20 2020  er..    """..   
+00035fb0: 205f 5f73 6c6f 7473 5f5f 203d 2028 2274   __slots__ = ("t
+00035fc0: 7970 6522 2c20 2276 616c 7565 2229 0a0a  ype", "value")..
+00035fd0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00035fe0: 2873 656c 662c 2074 7970 653d 4e6f 6e65  (self, type=None
+00035ff0: 2c20 7661 6c75 653d 4e6f 6e65 293a 0a20  , value=None):. 
+00036000: 2020 2020 2020 2073 656c 662e 7479 7065         self.type
+00036010: 203d 2074 7970 650a 2020 2020 2020 2020   = type.        
+00036020: 7365 6c66 2e76 616c 7565 203d 2076 616c  self.value = val
+00036030: 7565 0a0a 2020 2020 6465 6620 5f5f 6765  ue..    def __ge
+00036040: 7469 7465 6d5f 5f28 7365 6c66 2c20 6172  titem__(self, ar
+00036050: 6775 6d65 6e74 293a 0a20 2020 2020 2020  gument):.       
+00036060: 2022 2222 0a20 2020 2020 2020 2047 6574   """.        Get
+00036070: 7320 6974 656d 206f 7220 736c 6963 6520  s item or slice 
+00036080: 6964 656e 7469 6669 6564 2062 7920 6060  identified by ``
+00036090: 6172 6775 6d65 6e74 6060 2e0a 0a20 2020  argument``...   
+000360a0: 2020 2020 2052 6574 7572 6e73 2069 7465       Returns ite
+000360b0: 6d20 6f72 2073 6c69 6365 2e0a 2020 2020  m or slice..    
+000360c0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000360d0: 6966 2069 7369 6e73 7461 6e63 6528 7365  if isinstance(se
+000360e0: 6c66 2e76 616c 7565 2c20 6c69 7374 207c  lf.value, list |
+000360f0: 2074 7570 6c65 293a 0a20 2020 2020 2020   tuple):.       
+00036100: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00036110: 2e76 616c 7565 2e5f 5f67 6574 6974 656d  .value.__getitem
+00036120: 5f5f 2861 7267 756d 656e 7429 0a20 2020  __(argument).   
+00036130: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
+00036140: 7469 6f6e 2866 2263 616e 206e 6f74 2067  tion(f"can not g
+00036150: 6574 3a20 7b61 7267 756d 656e 7421 727d  et: {argument!r}
+00036160: 2e22 290a 0a20 2020 2064 6566 205f 5f6c  .")..    def __l
+00036170: 656e 5f5f 2873 656c 6629 3a0a 2020 2020  en__(self):.    
+00036180: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00036190: 4765 7473 206c 656e 6774 682e 0a20 2020  Gets length..   
+000361a0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000361b0: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+000361c0: 656c 662e 7661 6c75 652c 206c 6973 7420  elf.value, list 
+000361d0: 7c20 7475 706c 6529 3a0a 2020 2020 2020  | tuple):.      
+000361e0: 2020 2020 2020 7265 7475 726e 206c 656e        return len
+000361f0: 2873 656c 662e 7661 6c75 6529 0a20 2020  (self.value).   
+00036200: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
+00036210: 7469 6f6e 2822 7661 6c75 6520 6d75 7374  tion("value must
+00036220: 2062 6520 6c69 7374 206f 7220 7475 706c   be list or tupl
+00036230: 652e 2229 0a0a 2020 2020 6465 6620 5f5f  e.")..    def __
+00036240: 7265 7072 5f5f 2873 656c 6629 3a0a 2020  repr__(self):.  
+00036250: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00036260: 2020 4765 7473 2072 6570 722e 0a20 2020    Gets repr..   
+00036270: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00036280: 2072 6574 7572 6e20 6622 7b74 7970 6528   return f"{type(
+00036290: 7365 6c66 292e 5f5f 6e61 6d65 5f5f 7d28  self).__name__}(
+000362a0: 7b73 656c 662e 7479 7065 7d2c 207b 7479  {self.type}, {ty
+000362b0: 7065 2873 656c 662e 7661 6c75 6529 7d29  pe(self.value)})
+000362c0: 220a 0a20 2020 2064 6566 205f 666f 726d  "..    def _form
+000362d0: 6174 2873 656c 662c 206f 626a 2c20 696e  at(self, obj, in
+000362e0: 6465 6e74 3d30 293a 0a20 2020 2020 2020  dent=0):.       
+000362f0: 2073 7061 6365 203d 2022 2e20 2022 202a   space = ".  " *
+00036300: 2069 6e64 656e 740a 2020 2020 2020 2020   indent.        
+00036310: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
+00036320: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00036330: 6528 6f62 6a2c 2074 7970 6528 7365 6c66  e(obj, type(self
+00036340: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00036350: 6966 2069 7369 6e73 7461 6e63 6528 6f62  if isinstance(ob
+00036360: 6a2e 7661 6c75 652c 206c 6973 7420 7c20  j.value, list | 
+00036370: 7475 706c 6529 3a0a 2020 2020 2020 2020  tuple):.        
+00036380: 2020 2020 2020 2020 7265 7375 6c74 2e61          result.a
+00036390: 7070 656e 6428 6622 7b73 7061 6365 7d3c  ppend(f"{space}<
+000363a0: 7b6f 626a 2e74 7970 657d 3e3a 205b 2229  {obj.type}>: [")
+000363b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000363c0: 2066 6f72 2078 2069 6e20 6f62 6a2e 7661   for x in obj.va
+000363d0: 6c75 653a 0a20 2020 2020 2020 2020 2020  lue:.           
+000363e0: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+000363f0: 6578 7465 6e64 2873 656c 662e 5f66 6f72  extend(self._for
+00036400: 6d61 7428 782c 2069 6e64 656e 7420 2b20  mat(x, indent + 
+00036410: 3129 290a 2020 2020 2020 2020 2020 2020  1)).            
+00036420: 2020 2020 7265 7375 6c74 5b2d 315d 202b      result[-1] +
+00036430: 3d20 2220 5d22 0a20 2020 2020 2020 2020  = " ]".         
+00036440: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00036450: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+00036460: 6170 7065 6e64 2866 227b 7370 6163 657d  append(f"{space}
+00036470: 3c7b 6f62 6a2e 7479 7065 7d3e 3a20 7b6f  <{obj.type}>: {o
+00036480: 626a 2e76 616c 7565 2172 7d22 290a 2020  bj.value!r}").  
+00036490: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+000364a0: 7461 6e63 6528 6f62 6a2c 2028 6c69 7374  tance(obj, (list
+000364b0: 2c20 7475 706c 6529 293a 0a20 2020 2020  , tuple)):.     
+000364c0: 2020 2020 2020 2072 6573 756c 742e 6170         result.ap
+000364d0: 7065 6e64 2866 227b 7370 6163 657d 5b22  pend(f"{space}["
+000364e0: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
+000364f0: 7220 7820 696e 206f 626a 3a0a 2020 2020  r x in obj:.    
+00036500: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00036510: 6c74 2e65 7874 656e 6428 7365 6c66 2e5f  lt.extend(self._
+00036520: 666f 726d 6174 2878 2c20 696e 6465 6e74  format(x, indent
+00036530: 202b 2031 2929 0a20 2020 2020 2020 2020   + 1)).         
+00036540: 2020 2072 6573 756c 745b 2d31 5d20 2b3d     result[-1] +=
+00036550: 2022 205d 220a 2020 2020 2020 2020 656c   " ]".        el
+00036560: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00036570: 7265 7375 6c74 2e61 7070 656e 6428 6622  result.append(f"
+00036580: 7b73 7061 6365 7d7b 6f62 6a21 727d 2229  {space}{obj!r}")
+00036590: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000365a0: 7265 7375 6c74 0a                        result.
```

### Comparing `abjad-3.8/abjad/parsers/reduced.py` & `abjad-3.9/abjad/parsers/reduced.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-from .. import _iterate
+from .. import _iterlib
 from .. import bind as _bind
 from .. import duration as _duration
 from .. import enums as _enums
 from .. import indicators as _indicators
 from .. import pitch as _pitch
 from .. import score as _score
 from .. import select as _select
@@ -413,15 +413,15 @@
     def p_measure__PIPE__FRACTION__component_list__PIPE(self, p):
         """
         measure : PIPE FRACTION component_list PIPE
         """
         measure = _score.Container()
         for x in p[3]:
             measure.append(x)
-        leaf = _iterate._get_leaf(measure, 0)
+        leaf = _iterlib._get_leaf(measure, 0)
         time_signature = _indicators.TimeSignature(p[2].pair)
         _bind.attach(time_signature, leaf)
         p[0] = measure
 
     def p_negative_leaf_duration__INTEGER_N__dots(self, p):
         """
         negative_leaf_duration : INTEGER_N dots
```

### Comparing `abjad-3.8/abjad/parsers/scheme.py` & `abjad-3.9/abjad/parsers/scheme.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/pattern.py` & `abjad-3.9/abjad/pattern.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/pcollections.py` & `abjad-3.9/abjad/pcollections.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/persist.py` & `abjad-3.9/abjad/persist.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/pitch.py` & `abjad-3.9/abjad/pitch.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/ratio.py` & `abjad-3.9/abjad/ratio.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/rhythmtrees.py` & `abjad-3.9/abjad/rhythmtrees.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/score.py` & `abjad-3.9/abjad/score.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,13115 +1,13383 @@
 00000000: 696d 706f 7274 2063 6f6c 6c65 6374 696f  import collectio
 00000010: 6e73 0a69 6d70 6f72 7420 636f 7079 0a69  ns.import copy.i
 00000020: 6d70 6f72 7420 6675 6e63 746f 6f6c 730a  mport functools.
 00000030: 696d 706f 7274 206d 6174 680a 696d 706f  import math.impo
 00000040: 7274 2074 7970 696e 670a 0a69 6d70 6f72  rt typing..impor
 00000050: 7420 7175 6963 6b74 696f 6e73 0a0a 6672  t quicktions..fr
 00000060: 6f6d 202e 2069 6d70 6f72 7420 5f69 6e64  om . import _ind
-00000070: 656e 742c 205f 7570 6461 7465 0a66 726f  ent, _update.fro
-00000080: 6d20 2e20 696d 706f 7274 2064 7572 6174  m . import durat
-00000090: 696f 6e20 6173 205f 6475 7261 7469 6f6e  ion as _duration
-000000a0: 0a66 726f 6d20 2e20 696d 706f 7274 2065  .from . import e
-000000b0: 6e75 6d73 2061 7320 5f65 6e75 6d73 0a66  nums as _enums.f
-000000c0: 726f 6d20 2e20 696d 706f 7274 2065 7863  rom . import exc
-000000d0: 6570 7469 6f6e 7320 6173 205f 6578 6365  eptions as _exce
-000000e0: 7074 696f 6e73 0a66 726f 6d20 2e20 696d  ptions.from . im
-000000f0: 706f 7274 2066 6f72 6d61 7420 6173 205f  port format as _
-00000100: 666f 726d 6174 0a66 726f 6d20 2e20 696d  format.from . im
-00000110: 706f 7274 2069 6e64 6963 6174 6f72 7320  port indicators 
-00000120: 6173 205f 696e 6469 6361 746f 7273 0a66  as _indicators.f
-00000130: 726f 6d20 2e20 696d 706f 7274 206c 7963  rom . import lyc
-00000140: 6f6e 7374 2061 7320 5f6c 7963 6f6e 7374  onst as _lyconst
-00000150: 0a66 726f 6d20 2e20 696d 706f 7274 206c  .from . import l
-00000160: 7970 726f 7879 2061 7320 5f6c 7970 726f  yproxy as _lypro
-00000170: 7879 0a66 726f 6d20 2e20 696d 706f 7274  xy.from . import
-00000180: 206d 6174 6820 6173 205f 6d61 7468 0a66   math as _math.f
-00000190: 726f 6d20 2e20 696d 706f 7274 206f 7665  rom . import ove
-000001a0: 7272 6964 6573 2061 7320 5f6f 7665 7272  rrides as _overr
-000001b0: 6964 6573 0a66 726f 6d20 2e20 696d 706f  ides.from . impo
-000001c0: 7274 2070 6974 6368 2061 7320 5f70 6974  rt pitch as _pit
-000001d0: 6368 0a66 726f 6d20 2e20 696d 706f 7274  ch.from . import
-000001e0: 2074 6167 2061 7320 5f74 6167 0a66 726f   tag as _tag.fro
-000001f0: 6d20 2e20 696d 706f 7274 2074 696d 6573  m . import times
-00000200: 7061 6e20 6173 205f 7469 6d65 7370 616e  pan as _timespan
-00000210: 0a66 726f 6d20 2e20 696d 706f 7274 2074  .from . import t
-00000220: 7765 616b 7320 6173 2074 7765 616b 736d  weaks as tweaksm
-00000230: 6f64 756c 650a 6672 6f6d 202e 2069 6d70  odule.from . imp
-00000240: 6f72 7420 7479 7069 6e67 7320 6173 205f  ort typings as _
-00000250: 7479 7069 6e67 730a 0a0a 636c 6173 7320  typings...class 
-00000260: 436f 6d70 6f6e 656e 743a 0a20 2020 2022  Component:.    "
-00000270: 2222 0a20 2020 2043 6f6d 706f 6e65 6e74  "".    Component
-00000280: 2062 6173 6563 6c61 7373 2e0a 2020 2020   baseclass..    
-00000290: 2222 220a 0a20 2020 2023 2323 2043 4c41  """..    ### CLA
-000002a0: 5353 2056 4152 4941 424c 4553 2023 2323  SS VARIABLES ###
-000002b0: 0a0a 2020 2020 5f5f 736c 6f74 735f 5f20  ..    __slots__ 
-000002c0: 3d20 280a 2020 2020 2020 2020 225f 696e  = (.        "_in
-000002d0: 6469 6361 746f 7273 5f61 7265 5f63 7572  dicators_are_cur
-000002e0: 7265 6e74 222c 0a20 2020 2020 2020 2022  rent",.        "
-000002f0: 5f69 735f 666f 7262 6964 6465 6e5f 746f  _is_forbidden_to
-00000300: 5f75 7064 6174 6522 2c0a 2020 2020 2020  _update",.      
-00000310: 2020 225f 6f76 6572 7269 6465 7322 2c0a    "_overrides",.
-00000320: 2020 2020 2020 2020 225f 6c69 6c79 706f          "_lilypo
-00000330: 6e64 5f73 6574 7469 6e67 5f6e 616d 655f  nd_setting_name_
-00000340: 6d61 6e61 6765 7222 2c0a 2020 2020 2020  manager",.      
-00000350: 2020 225f 6d65 6173 7572 655f 6e75 6d62    "_measure_numb
-00000360: 6572 222c 0a20 2020 2020 2020 2022 5f6f  er",.        "_o
-00000370: 6666 7365 7473 5f61 7265 5f63 7572 7265  ffsets_are_curre
-00000380: 6e74 222c 0a20 2020 2020 2020 2022 5f6f  nt",.        "_o
-00000390: 6666 7365 7473 5f69 6e5f 7365 636f 6e64  ffsets_in_second
-000003a0: 735f 6172 655f 6375 7272 656e 7422 2c0a  s_are_current",.
-000003b0: 2020 2020 2020 2020 225f 7061 7265 6e74          "_parent
-000003c0: 222c 0a20 2020 2020 2020 2022 5f73 7461  ",.        "_sta
-000003d0: 7274 5f6f 6666 7365 7422 2c0a 2020 2020  rt_offset",.    
-000003e0: 2020 2020 225f 7374 6172 745f 6f66 6673      "_start_offs
-000003f0: 6574 5f69 6e5f 7365 636f 6e64 7322 2c0a  et_in_seconds",.
-00000400: 2020 2020 2020 2020 225f 7374 6f70 5f6f          "_stop_o
-00000410: 6666 7365 7422 2c0a 2020 2020 2020 2020  ffset",.        
-00000420: 225f 7374 6f70 5f6f 6666 7365 745f 696e  "_stop_offset_in
-00000430: 5f73 6563 6f6e 6473 222c 0a20 2020 2020  _seconds",.     
-00000440: 2020 2022 5f74 6167 222c 0a20 2020 2020     "_tag",.     
-00000450: 2020 2022 5f74 696d 6573 7061 6e22 2c0a     "_timespan",.
-00000460: 2020 2020 2020 2020 225f 7772 6170 7065          "_wrappe
-00000470: 7273 222c 0a20 2020 2029 0a0a 2020 2020  rs",.    )..    
-00000480: 5f69 735f 6162 7374 7261 6374 203d 2054  _is_abstract = T
-00000490: 7275 650a 0a20 2020 2023 2323 2049 4e49  rue..    ### INI
-000004a0: 5449 414c 495a 4552 2023 2323 0a0a 2020  TIALIZER ###..  
-000004b0: 2020 4073 7461 7469 636d 6574 686f 640a    @staticmethod.
-000004c0: 2020 2020 6465 6620 5f70 6172 7365 5f6c      def _parse_l
-000004d0: 696c 7970 6f6e 645f 7374 7269 6e67 2873  ilypond_string(s
-000004e0: 7472 696e 672c 206c 616e 6775 6167 653d  tring, language=
-000004f0: 2265 6e67 6c69 7368 2229 3a0a 2020 2020  "english"):.    
-00000500: 2020 2020 6672 6f6d 202e 7061 7273 6572      from .parser
-00000510: 732e 7061 7273 6520 696d 706f 7274 2070  s.parse import p
-00000520: 6172 7365 0a0a 2020 2020 2020 2020 7265  arse..        re
-00000530: 7475 726e 2070 6172 7365 2873 7472 696e  turn parse(strin
-00000540: 672c 206c 616e 6775 6167 653d 6c61 6e67  g, language=lang
-00000550: 7561 6765 290a 0a20 2020 2064 6566 205f  uage)..    def _
-00000560: 5f69 6e69 745f 5f28 7365 6c66 2c20 6e61  _init__(self, na
-00000570: 6d65 3a20 7374 7220 3d20 4e6f 6e65 2c20  me: str = None, 
-00000580: 7461 673a 205f 7461 672e 5461 6720 3d20  tag: _tag.Tag = 
-00000590: 4e6f 6e65 2920 2d3e 204e 6f6e 653a 0a20  None) -> None:. 
-000005a0: 2020 2020 2020 2073 656c 662e 5f69 6e64         self._ind
-000005b0: 6963 6174 6f72 735f 6172 655f 6375 7272  icators_are_curr
-000005c0: 656e 7420 3d20 4661 6c73 650a 2020 2020  ent = False.    
-000005d0: 2020 2020 7365 6c66 2e5f 6973 5f66 6f72      self._is_for
-000005e0: 6269 6464 656e 5f74 6f5f 7570 6461 7465  bidden_to_update
-000005f0: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
-00000600: 2073 656c 662e 5f6d 6561 7375 7265 5f6e   self._measure_n
-00000610: 756d 6265 7220 3d20 4e6f 6e65 0a20 2020  umber = None.   
-00000620: 2020 2020 2073 656c 662e 5f6f 6666 7365       self._offse
-00000630: 7473 5f61 7265 5f63 7572 7265 6e74 203d  ts_are_current =
-00000640: 2046 616c 7365 0a20 2020 2020 2020 2073   False.        s
-00000650: 656c 662e 5f6f 6666 7365 7473 5f69 6e5f  elf._offsets_in_
-00000660: 7365 636f 6e64 735f 6172 655f 6375 7272  seconds_are_curr
-00000670: 656e 7420 3d20 4661 6c73 650a 2020 2020  ent = False.    
-00000680: 2020 2020 7365 6c66 2e5f 6f76 6572 7269      self._overri
-00000690: 6465 7320 3d20 4e6f 6e65 0a20 2020 2020  des = None.     
-000006a0: 2020 2073 656c 662e 5f70 6172 656e 7420     self._parent 
-000006b0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
-000006c0: 656c 662e 5f6c 696c 7970 6f6e 645f 7365  elf._lilypond_se
-000006d0: 7474 696e 675f 6e61 6d65 5f6d 616e 6167  tting_name_manag
-000006e0: 6572 203d 204e 6f6e 650a 2020 2020 2020  er = None.      
-000006f0: 2020 7365 6c66 2e5f 7374 6172 745f 6f66    self._start_of
-00000700: 6673 6574 203d 204e 6f6e 650a 2020 2020  fset = None.    
-00000710: 2020 2020 7365 6c66 2e5f 7374 6172 745f      self._start_
-00000720: 6f66 6673 6574 5f69 6e5f 7365 636f 6e64  offset_in_second
-00000730: 7320 3d20 4e6f 6e65 0a20 2020 2020 2020  s = None.       
-00000740: 2073 656c 662e 5f73 746f 705f 6f66 6673   self._stop_offs
-00000750: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
-00000760: 2020 7365 6c66 2e5f 7374 6f70 5f6f 6666    self._stop_off
-00000770: 7365 745f 696e 5f73 6563 6f6e 6473 203d  set_in_seconds =
-00000780: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
-00000790: 2074 6167 2069 7320 6e6f 7420 4e6f 6e65   tag is not None
-000007a0: 3a0a 2020 2020 2020 2020 2020 2020 6173  :.            as
-000007b0: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
-000007c0: 7461 672c 205f 7461 672e 5461 6729 2c20  tag, _tag.Tag), 
-000007d0: 7265 7072 2874 6167 290a 2020 2020 2020  repr(tag).      
-000007e0: 2020 7365 6c66 2e5f 7461 6720 3d20 7461    self._tag = ta
-000007f0: 670a 2020 2020 2020 2020 7365 6c66 2e5f  g.        self._
-00000800: 7469 6d65 7370 616e 203d 205f 7469 6d65  timespan = _time
-00000810: 7370 616e 2e54 696d 6573 7061 6e28 290a  span.Timespan().
-00000820: 2020 2020 2020 2020 7365 6c66 2e5f 7772          self._wr
-00000830: 6170 7065 7273 3a20 6c69 7374 203d 205b  appers: list = [
-00000840: 5d0a 0a20 2020 2023 2323 2053 5045 4349  ]..    ### SPECI
-00000850: 414c 204d 4554 484f 4453 2023 2323 0a0a  AL METHODS ###..
-00000860: 2020 2020 6465 6620 5f5f 636f 7079 5f5f      def __copy__
-00000870: 2873 656c 662c 202a 6172 6775 6d65 6e74  (self, *argument
-00000880: 7329 3a0a 2020 2020 2020 2020 2222 220a  s):.        """.
-00000890: 2020 2020 2020 2020 5368 616c 6c6f 7720          Shallow 
-000008a0: 636f 7069 6573 2063 6f6d 706f 6e65 6e74  copies component
-000008b0: 2e0a 0a20 2020 2020 2020 2043 6f70 6965  ...        Copie
-000008c0: 7320 696e 6469 6361 746f 7273 2e0a 0a20  s indicators... 
-000008d0: 2020 2020 2020 2044 6f65 7320 6e6f 7420         Does not 
-000008e0: 636f 7079 2073 7061 6e6e 6572 732e 0a0a  copy spanners...
-000008f0: 2020 2020 2020 2020 446f 6573 206e 6f74          Does not
-00000900: 2063 6f70 7920 6368 696c 6472 656e 2e0a   copy children..
-00000910: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00000920: 206e 6577 2063 6f6d 706f 6e65 6e74 2e0a   new component..
-00000930: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00000940: 2020 2020 636f 6d70 6f6e 656e 7420 3d20      component = 
-00000950: 7479 7065 2873 656c 6629 282a 7365 6c66  type(self)(*self
-00000960: 2e5f 5f67 6574 6e65 7761 7267 735f 5f28  .__getnewargs__(
-00000970: 2929 0a20 2020 2020 2020 2069 6620 6765  )).        if ge
-00000980: 7461 7474 7228 7365 6c66 2c20 225f 6f76  tattr(self, "_ov
-00000990: 6572 7269 6465 7322 2c20 4e6f 6e65 2920  errides", None) 
-000009a0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000009b0: 2020 2020 2020 2020 2063 6f6d 706f 6e65           compone
-000009c0: 6e74 2e5f 6f76 6572 7269 6465 7320 3d20  nt._overrides = 
-000009d0: 636f 7079 2e63 6f70 7928 5f6f 7665 7272  copy.copy(_overr
-000009e0: 6964 6573 2e6f 7665 7272 6964 6528 7365  ides.override(se
-000009f0: 6c66 2929 0a20 2020 2020 2020 2069 6620  lf)).        if 
-00000a00: 6765 7461 7474 7228 7365 6c66 2c20 225f  getattr(self, "_
-00000a10: 6c69 6c79 706f 6e64 5f73 6574 7469 6e67  lilypond_setting
-00000a20: 5f6e 616d 655f 6d61 6e61 6765 7222 2c20  _name_manager", 
-00000a30: 4e6f 6e65 2920 6973 206e 6f74 204e 6f6e  None) is not Non
-00000a40: 653a 0a20 2020 2020 2020 2020 2020 2063  e:.            c
-00000a50: 6f6d 706f 6e65 6e74 2e5f 6c69 6c79 706f  omponent._lilypo
-00000a60: 6e64 5f73 6574 7469 6e67 5f6e 616d 655f  nd_setting_name_
-00000a70: 6d61 6e61 6765 7220 3d20 636f 7079 2e63  manager = copy.c
-00000a80: 6f70 7928 0a20 2020 2020 2020 2020 2020  opy(.           
-00000a90: 2020 2020 205f 6f76 6572 7269 6465 732e       _overrides.
-00000aa0: 7365 7474 696e 6728 7365 6c66 290a 2020  setting(self).  
-00000ab0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00000ac0: 2020 2020 666f 7220 7772 6170 7065 7220      for wrapper 
-00000ad0: 696e 2073 656c 662e 5f77 7261 7070 6572  in self._wrapper
-00000ae0: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
-00000af0: 6620 6e6f 7420 7772 6170 7065 722e 616e  f not wrapper.an
-00000b00: 6e6f 7461 7469 6f6e 3a0a 2020 2020 2020  notation:.      
-00000b10: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-00000b20: 7565 0a20 2020 2020 2020 2020 2020 2077  ue.            w
-00000b30: 7261 7070 6572 5f20 3d20 636f 7079 2e63  rapper_ = copy.c
-00000b40: 6f70 7928 7772 6170 7065 7229 0a20 2020  opy(wrapper).   
-00000b50: 2020 2020 2020 2020 2077 7261 7070 6572           wrapper
-00000b60: 5f2e 5f63 6f6d 706f 6e65 6e74 203d 2063  _._component = c
-00000b70: 6f6d 706f 6e65 6e74 0a20 2020 2020 2020  omponent.       
-00000b80: 2020 2020 2077 7261 7070 6572 5f2e 5f62       wrapper_._b
-00000b90: 696e 645f 636f 6d70 6f6e 656e 7428 636f  ind_component(co
-00000ba0: 6d70 6f6e 656e 7429 0a20 2020 2020 2020  mponent).       
-00000bb0: 2066 6f72 2077 7261 7070 6572 2069 6e20   for wrapper in 
-00000bc0: 6c69 7374 2873 656c 662e 5f67 6574 5f69  list(self._get_i
-00000bd0: 6e64 6963 6174 6f72 7328 756e 7772 6170  ndicators(unwrap
-00000be0: 3d46 616c 7365 2929 3a0a 2020 2020 2020  =False)):.      
-00000bf0: 2020 2020 2020 7772 6170 7065 725f 203d        wrapper_ =
-00000c00: 2063 6f70 792e 636f 7079 2877 7261 7070   copy.copy(wrapp
-00000c10: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
-00000c20: 7772 6170 7065 725f 2e5f 636f 6d70 6f6e  wrapper_._compon
-00000c30: 656e 7420 3d20 636f 6d70 6f6e 656e 740a  ent = component.
-00000c40: 2020 2020 2020 2020 2020 2020 7772 6170              wrap
-00000c50: 7065 725f 2e5f 6269 6e64 5f63 6f6d 706f  per_._bind_compo
-00000c60: 6e65 6e74 2863 6f6d 706f 6e65 6e74 290a  nent(component).
-00000c70: 2020 2020 2020 2020 7265 7475 726e 2063          return c
-00000c80: 6f6d 706f 6e65 6e74 0a0a 2020 2020 6465  omponent..    de
-00000c90: 6620 5f5f 6765 746e 6577 6172 6773 5f5f  f __getnewargs__
-00000ca0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00000cb0: 2222 220a 2020 2020 2020 2020 4765 7473  """.        Gets
-00000cc0: 206e 6577 2061 7267 756d 656e 7473 2e0a   new arguments..
-00000cd0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00000ce0: 2074 7570 6c65 2e0a 2020 2020 2020 2020   tuple..        
-00000cf0: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
-00000d00: 726e 2028 290a 0a20 2020 2023 2323 2050  rn ()..    ### P
-00000d10: 5249 5641 5445 204d 4554 484f 4453 2023  RIVATE METHODS #
-00000d20: 2323 0a0a 2020 2020 6465 6620 5f63 6163  ##..    def _cac
-00000d30: 6865 5f6e 616d 6564 5f63 6869 6c64 7265  he_named_childre
-00000d40: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
-00000d50: 206e 616d 655f 6469 6374 696f 6e61 7279   name_dictionary
-00000d60: 203d 207b 7d0a 2020 2020 2020 2020 6966   = {}.        if
-00000d70: 2068 6173 6174 7472 2873 656c 662c 2022   hasattr(self, "
-00000d80: 5f6e 616d 6564 5f63 6869 6c64 7265 6e22  _named_children"
-00000d90: 293a 0a20 2020 2020 2020 2020 2020 2066  ):.            f
-00000da0: 6f72 206e 616d 652c 2063 6869 6c64 7265  or name, childre
-00000db0: 6e20 696e 2073 656c 662e 5f6e 616d 6564  n in self._named
-00000dc0: 5f63 6869 6c64 7265 6e2e 6974 656d 7328  _children.items(
-00000dd0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00000de0: 2020 206e 616d 655f 6469 6374 696f 6e61     name_dictiona
-00000df0: 7279 5b6e 616d 655d 203d 2063 6f70 792e  ry[name] = copy.
-00000e00: 636f 7079 2863 6869 6c64 7265 6e29 0a20  copy(children). 
-00000e10: 2020 2020 2020 206e 616d 6520 3d20 6765         name = ge
-00000e20: 7461 7474 7228 7365 6c66 2c20 226e 616d  tattr(self, "nam
-00000e30: 6522 2c20 4e6f 6e65 290a 2020 2020 2020  e", None).      
-00000e40: 2020 6966 206e 616d 6520 6973 206e 6f74    if name is not
-00000e50: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00000e60: 2020 2069 6620 7365 6c66 2e6e 616d 6520     if self.name 
-00000e70: 6e6f 7420 696e 206e 616d 655f 6469 6374  not in name_dict
-00000e80: 696f 6e61 7279 3a0a 2020 2020 2020 2020  ionary:.        
-00000e90: 2020 2020 2020 2020 6e61 6d65 5f64 6963          name_dic
-00000ea0: 7469 6f6e 6172 795b 7365 6c66 2e6e 616d  tionary[self.nam
-00000eb0: 655d 203d 205b 5d0a 2020 2020 2020 2020  e] = [].        
+00000070: 656e 746c 6962 2c20 5f75 7064 6174 656c  entlib, _updatel
+00000080: 6962 0a66 726f 6d20 2e20 696d 706f 7274  ib.from . import
+00000090: 2063 6f6e 7472 6962 7574 696f 6e73 2061   contributions a
+000000a0: 7320 5f63 6f6e 7472 6962 7574 696f 6e73  s _contributions
+000000b0: 0a66 726f 6d20 2e20 696d 706f 7274 2064  .from . import d
+000000c0: 7572 6174 696f 6e20 6173 205f 6475 7261  uration as _dura
+000000d0: 7469 6f6e 0a66 726f 6d20 2e20 696d 706f  tion.from . impo
+000000e0: 7274 2065 6e75 6d73 2061 7320 5f65 6e75  rt enums as _enu
+000000f0: 6d73 0a66 726f 6d20 2e20 696d 706f 7274  ms.from . import
+00000100: 2065 7863 6570 7469 6f6e 7320 6173 205f   exceptions as _
+00000110: 6578 6365 7074 696f 6e73 0a66 726f 6d20  exceptions.from 
+00000120: 2e20 696d 706f 7274 2066 6f72 6d61 7420  . import format 
+00000130: 6173 205f 666f 726d 6174 0a66 726f 6d20  as _format.from 
+00000140: 2e20 696d 706f 7274 2069 6e64 6963 6174  . import indicat
+00000150: 6f72 7320 6173 205f 696e 6469 6361 746f  ors as _indicato
+00000160: 7273 0a66 726f 6d20 2e20 696d 706f 7274  rs.from . import
+00000170: 206c 7963 6f6e 7374 2061 7320 5f6c 7963   lyconst as _lyc
+00000180: 6f6e 7374 0a66 726f 6d20 2e20 696d 706f  onst.from . impo
+00000190: 7274 206c 7970 726f 7879 2061 7320 5f6c  rt lyproxy as _l
+000001a0: 7970 726f 7879 0a66 726f 6d20 2e20 696d  yproxy.from . im
+000001b0: 706f 7274 206d 6174 6820 6173 205f 6d61  port math as _ma
+000001c0: 7468 0a66 726f 6d20 2e20 696d 706f 7274  th.from . import
+000001d0: 206f 7665 7272 6964 6573 2061 7320 5f6f   overrides as _o
+000001e0: 7665 7272 6964 6573 0a66 726f 6d20 2e20  verrides.from . 
+000001f0: 696d 706f 7274 2070 6974 6368 2061 7320  import pitch as 
+00000200: 5f70 6974 6368 0a66 726f 6d20 2e20 696d  _pitch.from . im
+00000210: 706f 7274 2074 6167 2061 7320 5f74 6167  port tag as _tag
+00000220: 0a66 726f 6d20 2e20 696d 706f 7274 2074  .from . import t
+00000230: 696d 6573 7061 6e20 6173 205f 7469 6d65  imespan as _time
+00000240: 7370 616e 0a66 726f 6d20 2e20 696d 706f  span.from . impo
+00000250: 7274 2074 7765 616b 7320 6173 205f 7477  rt tweaks as _tw
+00000260: 6561 6b73 0a66 726f 6d20 2e20 696d 706f  eaks.from . impo
+00000270: 7274 2074 7970 696e 6773 2061 7320 5f74  rt typings as _t
+00000280: 7970 696e 6773 0a0a 0a64 6566 205f 696e  ypings...def _in
+00000290: 6465 6e74 5f73 7472 696e 6773 2873 7472  dent_strings(str
+000002a0: 696e 6773 293a 0a20 2020 2072 6573 756c  ings):.    resul
+000002b0: 7420 3d20 5b5d 0a20 2020 2066 6f72 2073  t = [].    for s
+000002c0: 7472 696e 6720 696e 2073 7472 696e 6773  tring in strings
+000002d0: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
+000002e0: 2069 7369 6e73 7461 6e63 6528 7374 7269   isinstance(stri
+000002f0: 6e67 2c20 7374 7229 0a20 2020 2020 2020  ng, str).       
+00000300: 2069 6620 7374 7269 6e67 2e69 7373 7061   if string.isspa
+00000310: 6365 2829 3a0a 2020 2020 2020 2020 2020  ce():.          
+00000320: 2020 7265 7375 6c74 2e61 7070 656e 6428    result.append(
+00000330: 2222 290a 2020 2020 2020 2020 656c 7365  "").        else
+00000340: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00000350: 7375 6c74 2e61 7070 656e 6428 5f69 6e64  sult.append(_ind
+00000360: 656e 746c 6962 2e49 4e44 454e 5420 2b20  entlib.INDENT + 
+00000370: 7374 7269 6e67 290a 2020 2020 6173 7365  string).    asse
+00000380: 7274 2061 6c6c 2869 7369 6e73 7461 6e63  rt all(isinstanc
+00000390: 6528 5f2c 2073 7472 2920 666f 7220 5f20  e(_, str) for _ 
+000003a0: 696e 2072 6573 756c 7429 2c20 7265 7072  in result), repr
+000003b0: 2872 6573 756c 7429 0a20 2020 2072 6574  (result).    ret
+000003c0: 7572 6e20 7265 7375 6c74 0a0a 0a63 6c61  urn result...cla
+000003d0: 7373 2043 6f6d 706f 6e65 6e74 3a0a 2020  ss Component:.  
+000003e0: 2020 2222 220a 2020 2020 436f 6d70 6f6e    """.    Compon
+000003f0: 656e 7420 6261 7365 636c 6173 732e 0a20  ent baseclass.. 
+00000400: 2020 2022 2222 0a0a 2020 2020 2323 2320     """..    ### 
+00000410: 434c 4153 5320 5641 5249 4142 4c45 5320  CLASS VARIABLES 
+00000420: 2323 230a 0a20 2020 205f 5f73 6c6f 7473  ###..    __slots
+00000430: 5f5f 203d 2028 0a20 2020 2020 2020 2022  __ = (.        "
+00000440: 5f69 6e64 6963 6174 6f72 735f 6172 655f  _indicators_are_
+00000450: 6375 7272 656e 7422 2c0a 2020 2020 2020  current",.      
+00000460: 2020 225f 6973 5f66 6f72 6269 6464 656e    "_is_forbidden
+00000470: 5f74 6f5f 7570 6461 7465 222c 0a20 2020  _to_update",.   
+00000480: 2020 2020 2022 5f6f 7665 7272 6964 6573       "_overrides
+00000490: 222c 0a20 2020 2020 2020 2022 5f6c 696c  ",.        "_lil
+000004a0: 7970 6f6e 645f 7365 7474 696e 675f 6e61  ypond_setting_na
+000004b0: 6d65 5f6d 616e 6167 6572 222c 0a20 2020  me_manager",.   
+000004c0: 2020 2020 2022 5f6d 6561 7375 7265 5f6e       "_measure_n
+000004d0: 756d 6265 7222 2c0a 2020 2020 2020 2020  umber",.        
+000004e0: 225f 6f66 6673 6574 735f 6172 655f 6375  "_offsets_are_cu
+000004f0: 7272 656e 7422 2c0a 2020 2020 2020 2020  rrent",.        
+00000500: 225f 6f66 6673 6574 735f 696e 5f73 6563  "_offsets_in_sec
+00000510: 6f6e 6473 5f61 7265 5f63 7572 7265 6e74  onds_are_current
+00000520: 222c 0a20 2020 2020 2020 2022 5f70 6172  ",.        "_par
+00000530: 656e 7422 2c0a 2020 2020 2020 2020 225f  ent",.        "_
+00000540: 7374 6172 745f 6f66 6673 6574 222c 0a20  start_offset",. 
+00000550: 2020 2020 2020 2022 5f73 7461 7274 5f6f         "_start_o
+00000560: 6666 7365 745f 696e 5f73 6563 6f6e 6473  ffset_in_seconds
+00000570: 222c 0a20 2020 2020 2020 2022 5f73 746f  ",.        "_sto
+00000580: 705f 6f66 6673 6574 222c 0a20 2020 2020  p_offset",.     
+00000590: 2020 2022 5f73 746f 705f 6f66 6673 6574     "_stop_offset
+000005a0: 5f69 6e5f 7365 636f 6e64 7322 2c0a 2020  _in_seconds",.  
+000005b0: 2020 2020 2020 225f 7461 6722 2c0a 2020        "_tag",.  
+000005c0: 2020 2020 2020 225f 7469 6d65 7370 616e        "_timespan
+000005d0: 222c 0a20 2020 2020 2020 2022 5f77 7261  ",.        "_wra
+000005e0: 7070 6572 7322 2c0a 2020 2020 290a 0a20  ppers",.    ).. 
+000005f0: 2020 205f 6973 5f61 6273 7472 6163 7420     _is_abstract 
+00000600: 3d20 5472 7565 0a0a 2020 2020 2323 2320  = True..    ### 
+00000610: 494e 4954 4941 4c49 5a45 5220 2323 230a  INITIALIZER ###.
+00000620: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+00000630: 6f64 0a20 2020 2064 6566 205f 7061 7273  od.    def _pars
+00000640: 655f 6c69 6c79 706f 6e64 5f73 7472 696e  e_lilypond_strin
+00000650: 6728 7374 7269 6e67 2c20 6c61 6e67 7561  g(string, langua
+00000660: 6765 3d22 656e 676c 6973 6822 293a 0a20  ge="english"):. 
+00000670: 2020 2020 2020 2066 726f 6d20 2e70 6172         from .par
+00000680: 7365 7273 2e70 6172 7365 2069 6d70 6f72  sers.parse impor
+00000690: 7420 7061 7273 650a 0a20 2020 2020 2020  t parse..       
+000006a0: 2072 6574 7572 6e20 7061 7273 6528 7374   return parse(st
+000006b0: 7269 6e67 2c20 6c61 6e67 7561 6765 3d6c  ring, language=l
+000006c0: 616e 6775 6167 6529 0a0a 2020 2020 6465  anguage)..    de
+000006d0: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+000006e0: 206e 616d 653a 2073 7472 203d 204e 6f6e   name: str = Non
+000006f0: 652c 2074 6167 3a20 5f74 6167 2e54 6167  e, tag: _tag.Tag
+00000700: 203d 204e 6f6e 6529 202d 3e20 4e6f 6e65   = None) -> None
+00000710: 3a0a 2020 2020 2020 2020 7365 6c66 2e5f  :.        self._
+00000720: 696e 6469 6361 746f 7273 5f61 7265 5f63  indicators_are_c
+00000730: 7572 7265 6e74 203d 2046 616c 7365 0a20  urrent = False. 
+00000740: 2020 2020 2020 2073 656c 662e 5f69 735f         self._is_
+00000750: 666f 7262 6964 6465 6e5f 746f 5f75 7064  forbidden_to_upd
+00000760: 6174 6520 3d20 4661 6c73 650a 2020 2020  ate = False.    
+00000770: 2020 2020 7365 6c66 2e5f 6d65 6173 7572      self._measur
+00000780: 655f 6e75 6d62 6572 203d 204e 6f6e 650a  e_number = None.
+00000790: 2020 2020 2020 2020 7365 6c66 2e5f 6f66          self._of
+000007a0: 6673 6574 735f 6172 655f 6375 7272 656e  fsets_are_curren
+000007b0: 7420 3d20 4661 6c73 650a 2020 2020 2020  t = False.      
+000007c0: 2020 7365 6c66 2e5f 6f66 6673 6574 735f    self._offsets_
+000007d0: 696e 5f73 6563 6f6e 6473 5f61 7265 5f63  in_seconds_are_c
+000007e0: 7572 7265 6e74 203d 2046 616c 7365 0a20  urrent = False. 
+000007f0: 2020 2020 2020 2073 656c 662e 5f6f 7665         self._ove
+00000800: 7272 6964 6573 203d 204e 6f6e 650a 2020  rrides = None.  
+00000810: 2020 2020 2020 7365 6c66 2e5f 7061 7265        self._pare
+00000820: 6e74 203d 204e 6f6e 650a 2020 2020 2020  nt = None.      
+00000830: 2020 7365 6c66 2e5f 6c69 6c79 706f 6e64    self._lilypond
+00000840: 5f73 6574 7469 6e67 5f6e 616d 655f 6d61  _setting_name_ma
+00000850: 6e61 6765 7220 3d20 4e6f 6e65 0a20 2020  nager = None.   
+00000860: 2020 2020 2073 656c 662e 5f73 7461 7274       self._start
+00000870: 5f6f 6666 7365 7420 3d20 4e6f 6e65 0a20  _offset = None. 
+00000880: 2020 2020 2020 2073 656c 662e 5f73 7461         self._sta
+00000890: 7274 5f6f 6666 7365 745f 696e 5f73 6563  rt_offset_in_sec
+000008a0: 6f6e 6473 203d 204e 6f6e 650a 2020 2020  onds = None.    
+000008b0: 2020 2020 7365 6c66 2e5f 7374 6f70 5f6f      self._stop_o
+000008c0: 6666 7365 7420 3d20 4e6f 6e65 0a20 2020  ffset = None.   
+000008d0: 2020 2020 2073 656c 662e 5f73 746f 705f       self._stop_
+000008e0: 6f66 6673 6574 5f69 6e5f 7365 636f 6e64  offset_in_second
+000008f0: 7320 3d20 4e6f 6e65 0a20 2020 2020 2020  s = None.       
+00000900: 2069 6620 7461 6720 6973 206e 6f74 204e   if tag is not N
+00000910: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00000920: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
+00000930: 6365 2874 6167 2c20 5f74 6167 2e54 6167  ce(tag, _tag.Tag
+00000940: 292c 2072 6570 7228 7461 6729 0a20 2020  ), repr(tag).   
+00000950: 2020 2020 2073 656c 662e 5f74 6167 203d       self._tag =
+00000960: 2074 6167 0a20 2020 2020 2020 2073 656c   tag.        sel
+00000970: 662e 5f74 696d 6573 7061 6e20 3d20 5f74  f._timespan = _t
+00000980: 696d 6573 7061 6e2e 5469 6d65 7370 616e  imespan.Timespan
+00000990: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+000009a0: 5f77 7261 7070 6572 733a 206c 6973 7420  _wrappers: list 
+000009b0: 3d20 5b5d 0a0a 2020 2020 2323 2320 5350  = []..    ### SP
+000009c0: 4543 4941 4c20 4d45 5448 4f44 5320 2323  ECIAL METHODS ##
+000009d0: 230a 0a20 2020 2064 6566 205f 5f63 6f70  #..    def __cop
+000009e0: 795f 5f28 7365 6c66 2c20 2a61 7267 756d  y__(self, *argum
+000009f0: 656e 7473 293a 0a20 2020 2020 2020 2022  ents):.        "
+00000a00: 2222 0a20 2020 2020 2020 2053 6861 6c6c  "".        Shall
+00000a10: 6f77 2063 6f70 6965 7320 636f 6d70 6f6e  ow copies compon
+00000a20: 656e 742e 0a0a 2020 2020 2020 2020 436f  ent...        Co
+00000a30: 7069 6573 2069 6e64 6963 6174 6f72 732e  pies indicators.
+00000a40: 0a0a 2020 2020 2020 2020 446f 6573 206e  ..        Does n
+00000a50: 6f74 2063 6f70 7920 7370 616e 6e65 7273  ot copy spanners
+00000a60: 2e0a 0a20 2020 2020 2020 2044 6f65 7320  ...        Does 
+00000a70: 6e6f 7420 636f 7079 2063 6869 6c64 7265  not copy childre
+00000a80: 6e2e 0a0a 2020 2020 2020 2020 5265 7475  n...        Retu
+00000a90: 726e 7320 6e65 7720 636f 6d70 6f6e 656e  rns new componen
+00000aa0: 742e 0a20 2020 2020 2020 2022 2222 0a20  t..        """. 
+00000ab0: 2020 2020 2020 2063 6f6d 706f 6e65 6e74         component
+00000ac0: 203d 2074 7970 6528 7365 6c66 2928 2a73   = type(self)(*s
+00000ad0: 656c 662e 5f5f 6765 746e 6577 6172 6773  elf.__getnewargs
+00000ae0: 5f5f 2829 290a 2020 2020 2020 2020 6966  __()).        if
+00000af0: 2067 6574 6174 7472 2873 656c 662c 2022   getattr(self, "
+00000b00: 5f6f 7665 7272 6964 6573 222c 204e 6f6e  _overrides", Non
+00000b10: 6529 2069 7320 6e6f 7420 4e6f 6e65 3a0a  e) is not None:.
+00000b20: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
+00000b30: 6f6e 656e 742e 5f6f 7665 7272 6964 6573  onent._overrides
+00000b40: 203d 2063 6f70 792e 636f 7079 285f 6f76   = copy.copy(_ov
+00000b50: 6572 7269 6465 732e 6f76 6572 7269 6465  errides.override
+00000b60: 2873 656c 6629 290a 2020 2020 2020 2020  (self)).        
+00000b70: 6966 2067 6574 6174 7472 2873 656c 662c  if getattr(self,
+00000b80: 2022 5f6c 696c 7970 6f6e 645f 7365 7474   "_lilypond_sett
+00000b90: 696e 675f 6e61 6d65 5f6d 616e 6167 6572  ing_name_manager
+00000ba0: 222c 204e 6f6e 6529 2069 7320 6e6f 7420  ", None) is not 
+00000bb0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00000bc0: 2020 636f 6d70 6f6e 656e 742e 5f6c 696c    component._lil
+00000bd0: 7970 6f6e 645f 7365 7474 696e 675f 6e61  ypond_setting_na
+00000be0: 6d65 5f6d 616e 6167 6572 203d 2063 6f70  me_manager = cop
+00000bf0: 792e 636f 7079 280a 2020 2020 2020 2020  y.copy(.        
+00000c00: 2020 2020 2020 2020 5f6f 7665 7272 6964          _overrid
+00000c10: 6573 2e73 6574 7469 6e67 2873 656c 6629  es.setting(self)
+00000c20: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+00000c30: 2020 2020 2020 2066 6f72 2077 7261 7070         for wrapp
+00000c40: 6572 2069 6e20 7365 6c66 2e5f 7772 6170  er in self._wrap
+00000c50: 7065 7273 3a0a 2020 2020 2020 2020 2020  pers:.          
+00000c60: 2020 6966 206e 6f74 2077 7261 7070 6572    if not wrapper
+00000c70: 2e61 6e6e 6f74 6174 696f 6e3a 0a20 2020  .annotation:.   
+00000c80: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00000c90: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+00000ca0: 2020 7772 6170 7065 725f 203d 2063 6f70    wrapper_ = cop
+00000cb0: 792e 636f 7079 2877 7261 7070 6572 290a  y.copy(wrapper).
+00000cc0: 2020 2020 2020 2020 2020 2020 7772 6170              wrap
+00000cd0: 7065 725f 2e5f 636f 6d70 6f6e 656e 7420  per_._component 
+00000ce0: 3d20 636f 6d70 6f6e 656e 740a 2020 2020  = component.    
+00000cf0: 2020 2020 2020 2020 7772 6170 7065 725f          wrapper_
+00000d00: 2e5f 6269 6e64 5f63 6f6d 706f 6e65 6e74  ._bind_component
+00000d10: 2863 6f6d 706f 6e65 6e74 290a 2020 2020  (component).    
+00000d20: 2020 2020 666f 7220 7772 6170 7065 7220      for wrapper 
+00000d30: 696e 206c 6973 7428 7365 6c66 2e5f 6765  in list(self._ge
+00000d40: 745f 696e 6469 6361 746f 7273 2875 6e77  t_indicators(unw
+00000d50: 7261 703d 4661 6c73 6529 293a 0a20 2020  rap=False)):.   
+00000d60: 2020 2020 2020 2020 2077 7261 7070 6572           wrapper
+00000d70: 5f20 3d20 636f 7079 2e63 6f70 7928 7772  _ = copy.copy(wr
+00000d80: 6170 7065 7229 0a20 2020 2020 2020 2020  apper).         
+00000d90: 2020 2077 7261 7070 6572 5f2e 5f63 6f6d     wrapper_._com
+00000da0: 706f 6e65 6e74 203d 2063 6f6d 706f 6e65  ponent = compone
+00000db0: 6e74 0a20 2020 2020 2020 2020 2020 2077  nt.            w
+00000dc0: 7261 7070 6572 5f2e 5f62 696e 645f 636f  rapper_._bind_co
+00000dd0: 6d70 6f6e 656e 7428 636f 6d70 6f6e 656e  mponent(componen
+00000de0: 7429 0a20 2020 2020 2020 2072 6574 7572  t).        retur
+00000df0: 6e20 636f 6d70 6f6e 656e 740a 0a20 2020  n component..   
+00000e00: 2064 6566 205f 5f67 6574 6e65 7761 7267   def __getnewarg
+00000e10: 735f 5f28 7365 6c66 293a 0a20 2020 2020  s__(self):.     
+00000e20: 2020 2022 2222 0a20 2020 2020 2020 2047     """.        G
+00000e30: 6574 7320 6e65 7720 6172 6775 6d65 6e74  ets new argument
+00000e40: 732e 0a0a 2020 2020 2020 2020 5265 7475  s...        Retu
+00000e50: 726e 7320 7475 706c 652e 0a20 2020 2020  rns tuple..     
+00000e60: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00000e70: 6574 7572 6e20 2829 0a0a 2020 2020 2323  eturn ()..    ##
+00000e80: 2320 5052 4956 4154 4520 4d45 5448 4f44  # PRIVATE METHOD
+00000e90: 5320 2323 230a 0a20 2020 2064 6566 205f  S ###..    def _
+00000ea0: 6361 6368 655f 6e61 6d65 645f 6368 696c  cache_named_chil
+00000eb0: 6472 656e 2873 656c 6629 3a0a 2020 2020  dren(self):.    
 00000ec0: 2020 2020 6e61 6d65 5f64 6963 7469 6f6e      name_diction
-00000ed0: 6172 795b 7365 6c66 2e6e 616d 655d 2e61  ary[self.name].a
-00000ee0: 7070 656e 6428 7365 6c66 290a 2020 2020  ppend(self).    
-00000ef0: 2020 2020 7265 7475 726e 206e 616d 655f      return name_
-00000f00: 6469 6374 696f 6e61 7279 0a0a 2020 2020  dictionary..    
-00000f10: 6465 6620 5f63 6865 636b 5f66 6f72 5f63  def _check_for_c
-00000f20: 7963 6c65 7328 7365 6c66 2c20 636f 6d70  ycles(self, comp
-00000f30: 6f6e 656e 7473 293a 0a20 2020 2020 2020  onents):.       
-00000f40: 2070 6172 656e 7461 6765 203d 205b 7365   parentage = [se
-00000f50: 6c66 5d0a 2020 2020 2020 2020 7061 7265  lf].        pare
-00000f60: 6e74 203d 2073 656c 662e 5f70 6172 656e  nt = self._paren
-00000f70: 740a 2020 2020 2020 2020 7768 696c 6520  t.        while 
-00000f80: 7061 7265 6e74 2069 7320 6e6f 7420 4e6f  parent is not No
-00000f90: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00000fa0: 7061 7265 6e74 6167 652e 6170 7065 6e64  parentage.append
-00000fb0: 2870 6172 656e 7429 0a20 2020 2020 2020  (parent).       
-00000fc0: 2020 2020 2070 6172 656e 7420 3d20 7061       parent = pa
-00000fd0: 7265 6e74 2e5f 7061 7265 6e74 0a20 2020  rent._parent.   
-00000fe0: 2020 2020 2066 6f72 2063 6f6d 706f 6e65       for compone
-00000ff0: 6e74 2069 6e20 636f 6d70 6f6e 656e 7473  nt in components
-00001000: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00001010: 2063 6f6d 706f 6e65 6e74 2069 6e20 7061   component in pa
-00001020: 7265 6e74 6167 653a 0a20 2020 2020 2020  rentage:.       
-00001030: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00001040: 5472 7565 0a20 2020 2020 2020 2072 6574  True.        ret
-00001050: 7572 6e20 4661 6c73 650a 0a20 2020 2064  urn False..    d
-00001060: 6566 205f 666f 726d 6174 5f61 6273 6f6c  ef _format_absol
-00001070: 7574 655f 6166 7465 725f 7369 7465 2873  ute_after_site(s
-00001080: 656c 662c 2063 6f6e 7472 6962 7574 696f  elf, contributio
-00001090: 6e73 293a 0a20 2020 2020 2020 2072 6573  ns):.        res
-000010a0: 756c 7420 3d20 5b5d 0a20 2020 2020 2020  ult = [].       
-000010b0: 2072 6573 756c 742e 6578 7465 6e64 2863   result.extend(c
-000010c0: 6f6e 7472 6962 7574 696f 6e73 2e61 6273  ontributions.abs
-000010d0: 6f6c 7574 655f 6166 7465 722e 636f 6d6d  olute_after.comm
-000010e0: 616e 6473 290a 2020 2020 2020 2020 7265  ands).        re
-000010f0: 7475 726e 2072 6573 756c 740a 0a20 2020  turn result..   
-00001100: 2064 6566 205f 666f 726d 6174 5f61 6273   def _format_abs
-00001110: 6f6c 7574 655f 6265 666f 7265 5f73 6974  olute_before_sit
-00001120: 6528 7365 6c66 2c20 636f 6e74 7269 6275  e(self, contribu
-00001130: 7469 6f6e 7329 3a0a 2020 2020 2020 2020  tions):.        
-00001140: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
-00001150: 2020 2020 7265 7375 6c74 2e65 7874 656e      result.exten
-00001160: 6428 636f 6e74 7269 6275 7469 6f6e 732e  d(contributions.
-00001170: 6162 736f 6c75 7465 5f62 6566 6f72 652e  absolute_before.
-00001180: 636f 6d6d 616e 6473 290a 2020 2020 2020  commands).      
-00001190: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
-000011a0: 0a20 2020 2064 6566 205f 666f 726d 6174  .    def _format
-000011b0: 5f61 6674 6572 5f73 6974 6528 7365 6c66  _after_site(self
-000011c0: 2c20 636f 6e74 7269 6275 7469 6f6e 7329  , contributions)
-000011d0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-000011e0: 205b 5d0a 0a20 2020 2064 6566 205f 666f   []..    def _fo
-000011f0: 726d 6174 5f62 6566 6f72 655f 7369 7465  rmat_before_site
-00001200: 2873 656c 662c 2063 6f6e 7472 6962 7574  (self, contribut
-00001210: 696f 6e73 293a 0a20 2020 2020 2020 2072  ions):.        r
-00001220: 6574 7572 6e20 5b5d 0a0a 2020 2020 6465  eturn []..    de
-00001230: 6620 5f66 6f72 6d61 745f 636c 6f73 655f  f _format_close_
-00001240: 6272 6163 6b65 7473 5f73 6974 6528 7365  brackets_site(se
-00001250: 6c66 2c20 636f 6e74 7269 6275 7469 6f6e  lf, contribution
-00001260: 7329 3a0a 2020 2020 2020 2020 7265 7475  s):.        retu
-00001270: 726e 205b 5d0a 0a20 2020 2064 6566 205f  rn []..    def _
-00001280: 666f 726d 6174 5f63 6c6f 7369 6e67 5f73  format_closing_s
-00001290: 6974 6528 7365 6c66 2c20 636f 6e74 7269  ite(self, contri
-000012a0: 6275 7469 6f6e 7329 3a0a 2020 2020 2020  butions):.      
-000012b0: 2020 7265 7475 726e 205b 5d0a 0a20 2020    return []..   
-000012c0: 2064 6566 205f 666f 726d 6174 5f63 6f6e   def _format_con
-000012d0: 7465 6e74 735f 7369 7465 2873 656c 662c  tents_site(self,
-000012e0: 2063 6f6e 7472 6962 7574 696f 6e73 293a   contributions):
-000012f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00001300: 5b5d 0a0a 2020 2020 6465 6620 5f66 6f72  []..    def _for
-00001310: 6d61 745f 6f70 656e 5f62 7261 636b 6574  mat_open_bracket
-00001320: 735f 7369 7465 2873 656c 662c 2063 6f6e  s_site(self, con
-00001330: 7472 6962 7574 696f 6e73 293a 0a20 2020  tributions):.   
-00001340: 2020 2020 2072 6574 7572 6e20 5b5d 0a0a       return []..
-00001350: 2020 2020 6465 6620 5f66 6f72 6d61 745f      def _format_
-00001360: 6f70 656e 696e 675f 7369 7465 2873 656c  opening_site(sel
-00001370: 662c 2063 6f6e 7472 6962 7574 696f 6e73  f, contributions
-00001380: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00001390: 6e20 5b5d 0a0a 2020 2020 4073 7461 7469  n []..    @stati
-000013a0: 636d 6574 686f 640a 2020 2020 6465 6620  cmethod.    def 
-000013b0: 5f63 6f6e 7472 6962 7574 696f 6e73 5f77  _contributions_w
-000013c0: 6974 685f 696e 6465 6e74 286c 6973 7473  ith_indent(lists
-000013d0: 293a 0a20 2020 2020 2020 2072 6573 756c  ):.        resul
-000013e0: 7420 3d20 5b5d 0a20 2020 2020 2020 2066  t = [].        f
-000013f0: 6f72 206c 6973 745f 2069 6e20 6c69 7374  or list_ in list
-00001400: 733a 0a20 2020 2020 2020 2020 2020 2073  s:.            s
-00001410: 7472 696e 6773 203d 205b 5d0a 2020 2020  trings = [].    
-00001420: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00001430: 7461 6e63 6528 6c69 7374 5f2c 206c 6973  tance(list_, lis
-00001440: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00001450: 2020 2020 666f 7220 7374 7269 6e67 2069      for string i
-00001460: 6e20 6c69 7374 5f3a 0a20 2020 2020 2020  n list_:.       
-00001470: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00001480: 7374 7269 6e67 2e69 7373 7061 6365 2829  string.isspace()
-00001490: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000014a0: 2020 2020 2020 2020 2020 7374 7269 6e67            string
-000014b0: 203d 2022 220a 2020 2020 2020 2020 2020   = "".          
-000014c0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-000014d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000014e0: 2020 2020 2020 2020 7374 7269 6e67 203d          string =
-000014f0: 205f 696e 6465 6e74 2e49 4e44 454e 5420   _indent.INDENT 
-00001500: 2b20 7374 7269 6e67 0a20 2020 2020 2020  + string.       
-00001510: 2020 2020 2020 2020 2020 2020 2073 7472               str
-00001520: 696e 6773 2e61 7070 656e 6428 7374 7269  ings.append(stri
-00001530: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-00001540: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00001550: 2020 2020 2020 6173 7365 7274 2069 7369        assert isi
-00001560: 6e73 7461 6e63 6528 6c69 7374 5f2c 2073  nstance(list_, s
-00001570: 7472 290a 2020 2020 2020 2020 2020 2020  tr).            
-00001580: 2020 2020 6966 206c 6973 745f 2e69 7373      if list_.iss
-00001590: 7061 6365 2829 3a0a 2020 2020 2020 2020  pace():.        
-000015a0: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-000015b0: 6e67 732e 6170 7065 6e64 2822 2229 0a20  ngs.append(""). 
-000015c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000015d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000015e0: 2020 2020 2020 2020 2073 7472 696e 6773           strings
-000015f0: 2e61 7070 656e 6428 5f69 6e64 656e 742e  .append(_indent.
-00001600: 494e 4445 4e54 202b 206c 6973 745f 290a  INDENT + list_).
-00001610: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00001620: 6c74 2e65 7874 656e 6428 7374 7269 6e67  lt.extend(string
-00001630: 7329 0a20 2020 2020 2020 2061 7373 6572  s).        asser
-00001640: 7420 616c 6c28 6973 696e 7374 616e 6365  t all(isinstance
-00001650: 285f 2c20 7374 7229 2066 6f72 205f 2069  (_, str) for _ i
-00001660: 6e20 7265 7375 6c74 292c 2072 6570 7228  n result), repr(
-00001670: 7265 7375 6c74 290a 2020 2020 2020 2020  result).        
-00001680: 7265 7475 726e 2072 6573 756c 740a 0a20  return result.. 
-00001690: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-000016a0: 0a20 2020 2064 6566 205f 6765 745f 636f  .    def _get_co
-000016b0: 6d70 6f6e 656e 7473 2861 7267 756d 656e  mponents(argumen
-000016c0: 7429 3a0a 2020 2020 2020 2020 7265 7375  t):.        resu
-000016d0: 6c74 203d 205b 5d0a 2020 2020 2020 2020  lt = [].        
-000016e0: 6966 2069 7369 6e73 7461 6e63 6528 6172  if isinstance(ar
-000016f0: 6775 6d65 6e74 2c20 436f 6d70 6f6e 656e  gument, Componen
-00001700: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00001710: 7265 7375 6c74 2e65 7874 656e 6428 6172  result.extend(ar
-00001720: 6775 6d65 6e74 2e5f 6765 745f 7375 6274  gument._get_subt
-00001730: 7265 6528 2929 0a20 2020 2020 2020 2065  ree()).        e
-00001740: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00001750: 2066 6f72 2069 7465 6d20 696e 2061 7267   for item in arg
-00001760: 756d 656e 743a 0a20 2020 2020 2020 2020  ument:.         
-00001770: 2020 2020 2020 2072 6573 756c 742e 6578         result.ex
-00001780: 7465 6e64 2843 6f6d 706f 6e65 6e74 2e5f  tend(Component._
-00001790: 6765 745f 636f 6d70 6f6e 656e 7473 2869  get_components(i
-000017a0: 7465 6d29 290a 2020 2020 2020 2020 7265  tem)).        re
-000017b0: 7475 726e 2072 6573 756c 740a 0a20 2020  turn result..   
-000017c0: 2064 6566 205f 6765 745f 6465 7363 656e   def _get_descen
-000017d0: 6461 6e74 735f 7374 6172 7469 6e67 5f77  dants_starting_w
-000017e0: 6974 6828 7365 6c66 293a 0a20 2020 2020  ith(self):.     
-000017f0: 2020 2072 6574 7572 6e20 5b73 656c 665d     return [self]
-00001800: 0a0a 2020 2020 6465 6620 5f67 6574 5f64  ..    def _get_d
-00001810: 6573 6365 6e64 616e 7473 5f73 746f 7070  escendants_stopp
-00001820: 696e 675f 7769 7468 2873 656c 6629 3a0a  ing_with(self):.
-00001830: 2020 2020 2020 2020 7265 7475 726e 205b          return [
-00001840: 7365 6c66 5d0a 0a20 2020 2064 6566 205f  self]..    def _
-00001850: 6765 745f 6475 7261 7469 6f6e 2873 656c  get_duration(sel
-00001860: 6629 3a0a 2020 2020 2020 2020 6475 7261  f):.        dura
-00001870: 7469 6f6e 203d 2073 656c 662e 5f67 6574  tion = self._get
-00001880: 5f70 7265 7072 6f6c 6174 6564 5f64 7572  _preprolated_dur
-00001890: 6174 696f 6e28 290a 2020 2020 2020 2020  ation().        
-000018a0: 6966 2073 656c 662e 5f70 6172 656e 7420  if self._parent 
-000018b0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-000018c0: 2020 2020 2072 6574 7572 6e20 6475 7261       return dura
-000018d0: 7469 6f6e 0a20 2020 2020 2020 2066 6f72  tion.        for
-000018e0: 2070 6172 656e 7420 696e 2073 656c 662e   parent in self.
-000018f0: 5f70 6172 656e 742e 5f67 6574 5f70 6172  _parent._get_par
-00001900: 656e 7461 6765 2829 3a0a 2020 2020 2020  entage():.      
-00001910: 2020 2020 2020 6d75 6c74 6970 6c69 6572        multiplier
-00001920: 203d 2067 6574 6174 7472 2870 6172 656e   = getattr(paren
-00001930: 742c 2022 696d 706c 6965 645f 7072 6f6c  t, "implied_prol
-00001940: 6174 696f 6e22 2c20 5f64 7572 6174 696f  ation", _duratio
-00001950: 6e2e 4d75 6c74 6970 6c69 6572 2831 2929  n.Multiplier(1))
-00001960: 0a20 2020 2020 2020 2020 2020 2064 7572  .            dur
-00001970: 6174 696f 6e20 2a3d 206d 756c 7469 706c  ation *= multipl
-00001980: 6965 720a 2020 2020 2020 2020 7265 7475  ier.        retu
-00001990: 726e 2064 7572 6174 696f 6e0a 0a20 2020  rn duration..   
-000019a0: 2064 6566 205f 6765 745f 696e 6469 6361   def _get_indica
-000019b0: 746f 7228 7365 6c66 2c20 7072 6f74 6f74  tor(self, protot
-000019c0: 7970 653d 4e6f 6e65 2c20 2a2c 2061 7474  ype=None, *, att
-000019d0: 7269 6275 7465 733d 4e6f 6e65 2c20 756e  ributes=None, un
-000019e0: 7772 6170 3d54 7275 6529 3a0a 2020 2020  wrap=True):.    
-000019f0: 2020 2020 696e 6469 6361 746f 7273 203d      indicators =
-00001a00: 2073 656c 662e 5f67 6574 5f69 6e64 6963   self._get_indic
-00001a10: 6174 6f72 7328 0a20 2020 2020 2020 2020  ators(.         
-00001a20: 2020 2070 726f 746f 7479 7065 3d70 726f     prototype=pro
-00001a30: 746f 7479 7065 2c20 6174 7472 6962 7574  totype, attribut
-00001a40: 6573 3d61 7474 7269 6275 7465 732c 2075  es=attributes, u
-00001a50: 6e77 7261 703d 756e 7772 6170 0a20 2020  nwrap=unwrap.   
-00001a60: 2020 2020 2029 0a20 2020 2020 2020 2069       ).        i
-00001a70: 6620 6e6f 7420 696e 6469 6361 746f 7273  f not indicators
-00001a80: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00001a90: 6973 6520 5661 6c75 6545 7272 6f72 2866  ise ValueError(f
-00001aa0: 226e 6f20 6174 7461 6368 6564 2069 6e64  "no attached ind
-00001ab0: 6963 6174 6f72 7320 666f 756e 6420 6d61  icators found ma
-00001ac0: 7463 6869 6e67 207b 7072 6f74 6f74 7970  tching {prototyp
-00001ad0: 6521 727d 2e22 290a 2020 2020 2020 2020  e!r}.").        
-00001ae0: 6966 2031 203c 206c 656e 2869 6e64 6963  if 1 < len(indic
-00001af0: 6174 6f72 7329 3a0a 2020 2020 2020 2020  ators):.        
-00001b00: 2020 2020 6d65 7373 6167 6520 3d20 6622      message = f"
-00001b10: 6d75 6c74 6970 6c65 2061 7474 6163 6865  multiple attache
-00001b20: 6420 696e 6469 6361 746f 7273 2066 6f75  d indicators fou
-00001b30: 6e64 206d 6174 6368 696e 6720 7b70 726f  nd matching {pro
-00001b40: 746f 7479 7065 2172 7d2e 220a 2020 2020  totype!r}.".    
-00001b50: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00001b60: 6c75 6545 7272 6f72 286d 6573 7361 6765  lueError(message
-00001b70: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00001b80: 2069 6e64 6963 6174 6f72 735b 305d 0a0a   indicators[0]..
-00001b90: 2020 2020 6465 6620 5f67 6574 5f69 6e64      def _get_ind
-00001ba0: 6963 6174 6f72 7328 7365 6c66 2c20 7072  icators(self, pr
-00001bb0: 6f74 6f74 7970 653d 4e6f 6e65 2c20 2a2c  ototype=None, *,
-00001bc0: 2061 7474 7269 6275 7465 733d 4e6f 6e65   attributes=None
-00001bd0: 2c20 756e 7772 6170 3d54 7275 6529 3a0a  , unwrap=True):.
-00001be0: 2020 2020 2020 2020 7072 6f74 6f74 7970          prototyp
-00001bf0: 6520 3d20 7072 6f74 6f74 7970 6520 6f72  e = prototype or
-00001c00: 2028 6f62 6a65 6374 2c29 0a20 2020 2020   (object,).     
-00001c10: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00001c20: 616e 6365 2870 726f 746f 7479 7065 2c20  ance(prototype, 
-00001c30: 7475 706c 6529 3a0a 2020 2020 2020 2020  tuple):.        
-00001c40: 2020 2020 7072 6f74 6f74 7970 6520 3d20      prototype = 
-00001c50: 2870 726f 746f 7479 7065 2c29 0a20 2020  (prototype,).   
-00001c60: 2020 2020 2070 726f 746f 7479 7065 5f6f       prototype_o
-00001c70: 626a 6563 7473 2c20 7072 6f74 6f74 7970  bjects, prototyp
-00001c80: 655f 636c 6173 7365 7320 3d20 5b5d 2c20  e_classes = [], 
-00001c90: 5b5d 0a20 2020 2020 2020 2066 6f72 2069  [].        for i
-00001ca0: 6e64 6963 6174 6f72 5f70 726f 746f 7479  ndicator_prototy
-00001cb0: 7065 2069 6e20 7072 6f74 6f74 7970 653a  pe in prototype:
-00001cc0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00001cd0: 6973 696e 7374 616e 6365 2869 6e64 6963  isinstance(indic
-00001ce0: 6174 6f72 5f70 726f 746f 7479 7065 2c20  ator_prototype, 
-00001cf0: 7479 7065 293a 0a20 2020 2020 2020 2020  type):.         
-00001d00: 2020 2020 2020 2070 726f 746f 7479 7065         prototype
-00001d10: 5f63 6c61 7373 6573 2e61 7070 656e 6428  _classes.append(
-00001d20: 696e 6469 6361 746f 725f 7072 6f74 6f74  indicator_protot
-00001d30: 7970 6529 0a20 2020 2020 2020 2020 2020  ype).           
-00001d40: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00001d50: 2020 2020 2020 2070 726f 746f 7479 7065         prototype
-00001d60: 5f6f 626a 6563 7473 2e61 7070 656e 6428  _objects.append(
-00001d70: 696e 6469 6361 746f 725f 7072 6f74 6f74  indicator_protot
-00001d80: 7970 6529 0a20 2020 2020 2020 2070 726f  ype).        pro
-00001d90: 746f 7479 7065 5f6f 626a 6563 7473 203d  totype_objects =
-00001da0: 2074 7570 6c65 2870 726f 746f 7479 7065   tuple(prototype
-00001db0: 5f6f 626a 6563 7473 290a 2020 2020 2020  _objects).      
-00001dc0: 2020 7072 6f74 6f74 7970 655f 636c 6173    prototype_clas
-00001dd0: 7365 7320 3d20 7475 706c 6528 7072 6f74  ses = tuple(prot
-00001de0: 6f74 7970 655f 636c 6173 7365 7329 0a20  otype_classes). 
-00001df0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00001e00: 5b5d 0a20 2020 2020 2020 2066 6f72 2077  [].        for w
-00001e10: 7261 7070 6572 2069 6e20 7365 6c66 2e5f  rapper in self._
-00001e20: 7772 6170 7065 7273 3a0a 2020 2020 2020  wrappers:.      
-00001e30: 2020 2020 2020 6966 2077 7261 7070 6572        if wrapper
-00001e40: 2e61 6e6e 6f74 6174 696f 6e3a 0a20 2020  .annotation:.   
-00001e50: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00001e60: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
-00001e70: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00001e80: 7772 6170 7065 722c 2070 726f 746f 7479  wrapper, prototy
-00001e90: 7065 5f63 6c61 7373 6573 293a 0a20 2020  pe_classes):.   
-00001ea0: 2020 2020 2020 2020 2020 2020 2072 6573               res
-00001eb0: 756c 742e 6170 7065 6e64 2877 7261 7070  ult.append(wrapp
-00001ec0: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
-00001ed0: 656c 6966 2061 6e79 2877 7261 7070 6572  elif any(wrapper
-00001ee0: 203d 3d20 5f20 666f 7220 5f20 696e 2070   == _ for _ in p
-00001ef0: 726f 746f 7479 7065 5f6f 626a 6563 7473  rototype_objects
-00001f00: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00001f10: 2020 2072 6573 756c 742e 6170 7065 6e64     result.append
-00001f20: 2877 7261 7070 6572 290a 2020 2020 2020  (wrapper).      
-00001f30: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-00001f40: 7461 6e63 6528 7772 6170 7065 722e 756e  tance(wrapper.un
-00001f50: 6275 6e64 6c65 5f69 6e64 6963 6174 6f72  bundle_indicator
-00001f60: 2829 2c20 7072 6f74 6f74 7970 655f 636c  (), prototype_cl
-00001f70: 6173 7365 7329 3a0a 2020 2020 2020 2020  asses):.        
-00001f80: 2020 2020 2020 2020 7265 7375 6c74 2e61          result.a
-00001f90: 7070 656e 6428 7772 6170 7065 7229 0a20  ppend(wrapper). 
-00001fa0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00001fb0: 616e 7928 7772 6170 7065 722e 756e 6275  any(wrapper.unbu
-00001fc0: 6e64 6c65 5f69 6e64 6963 6174 6f72 2829  ndle_indicator()
-00001fd0: 203d 3d20 5f20 666f 7220 5f20 696e 2070   == _ for _ in p
-00001fe0: 726f 746f 7479 7065 5f6f 626a 6563 7473  rototype_objects
-00001ff0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00002000: 2020 2072 6573 756c 742e 6170 7065 6e64     result.append
-00002010: 2877 7261 7070 6572 290a 2020 2020 2020  (wrapper).      
-00002020: 2020 6966 2061 7474 7269 6275 7465 7320    if attributes 
-00002030: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00002040: 2020 2020 2020 2020 2072 6573 756c 745f           result_
-00002050: 203d 205b 5d0a 2020 2020 2020 2020 2020   = [].          
-00002060: 2020 666f 7220 7772 6170 7065 7220 696e    for wrapper in
-00002070: 2072 6573 756c 743a 0a20 2020 2020 2020   result:.       
-00002080: 2020 2020 2020 2020 2066 6f72 206e 616d           for nam
-00002090: 652c 2076 616c 7565 2069 6e20 6174 7472  e, value in attr
-000020a0: 6962 7574 6573 2e69 7465 6d73 2829 3a0a  ibutes.items():.
-000020b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000020c0: 2020 2020 2320 6966 2067 6574 6174 7472      # if getattr
-000020d0: 2877 7261 7070 6572 2e69 6e64 6963 6174  (wrapper.indicat
-000020e0: 6f72 2c20 6e61 6d65 2c20 4e6f 6e65 2920  or, name, None) 
-000020f0: 213d 2076 616c 7565 3a0a 2020 2020 2020  != value:.      
-00002100: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00002110: 2067 6574 6174 7472 2877 7261 7070 6572   getattr(wrapper
-00002120: 2e75 6e62 756e 646c 655f 696e 6469 6361  .unbundle_indica
-00002130: 746f 7228 292c 206e 616d 652c 204e 6f6e  tor(), name, Non
-00002140: 6529 2021 3d20 7661 6c75 653a 0a20 2020  e) != value:.   
-00002150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002160: 2020 2020 2062 7265 616b 0a20 2020 2020       break.     
-00002170: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00002180: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002190: 2020 2020 2072 6573 756c 745f 2e61 7070       result_.app
-000021a0: 656e 6428 7772 6170 7065 7229 0a20 2020  end(wrapper).   
-000021b0: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-000021c0: 3d20 7265 7375 6c74 5f0a 2020 2020 2020  = result_.      
-000021d0: 2020 6966 2075 6e77 7261 703a 0a20 2020    if unwrap:.   
-000021e0: 2020 2020 2020 2020 2069 6e64 6963 6174           indicat
-000021f0: 6f72 7320 3d20 5b5d 0a20 2020 2020 2020  ors = [].       
-00002200: 2020 2020 2066 6f72 2077 7261 7070 6572       for wrapper
-00002210: 2069 6e20 7265 7375 6c74 3a0a 2020 2020   in result:.    
-00002220: 2020 2020 2020 2020 2020 2020 696e 6469              indi
-00002230: 6361 746f 7273 2e61 7070 656e 6428 7772  cators.append(wr
-00002240: 6170 7065 722e 756e 6275 6e64 6c65 5f69  apper.unbundle_i
-00002250: 6e64 6963 6174 6f72 2829 290a 2020 2020  ndicator()).    
-00002260: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00002270: 2069 6e64 6963 6174 6f72 730a 2020 2020   indicators.    
-00002280: 2020 2020 7265 7375 6c74 203d 2072 6573      result = res
-00002290: 756c 740a 2020 2020 2020 2020 7265 7475  ult.        retu
-000022a0: 726e 2072 6573 756c 740a 0a20 2020 2064  rn result..    d
-000022b0: 6566 205f 6765 745f 6c69 6c79 706f 6e64  ef _get_lilypond
-000022c0: 5f66 6f72 6d61 7428 7365 6c66 293a 0a20  _format(self):. 
-000022d0: 2020 2020 2020 205f 7570 6461 7465 2e5f         _update._
-000022e0: 7570 6461 7465 5f6e 6f77 2873 656c 662c  update_now(self,
-000022f0: 2069 6e64 6963 6174 6f72 733d 5472 7565   indicators=True
-00002300: 290a 2020 2020 2020 2020 7374 7269 6e67  ).        string
-00002310: 203d 205f 666f 726d 6174 2e66 6f72 6d61   = _format.forma
-00002320: 745f 636f 6d70 6f6e 656e 7428 7365 6c66  t_component(self
-00002330: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00002340: 2073 7472 696e 670a 0a20 2020 2064 6566   string..    def
-00002350: 205f 6765 745f 6d61 726b 7570 2873 656c   _get_markup(sel
-00002360: 662c 2064 6972 6563 7469 6f6e 3d4e 6f6e  f, direction=Non
-00002370: 6529 3a0a 2020 2020 2020 2020 7772 6170  e):.        wrap
-00002380: 7065 7273 203d 2073 656c 662e 5f67 6574  pers = self._get
-00002390: 5f69 6e64 6963 6174 6f72 7328 5f69 6e64  _indicators(_ind
-000023a0: 6963 6174 6f72 732e 4d61 726b 7570 2c20  icators.Markup, 
-000023b0: 756e 7772 6170 3d46 616c 7365 290a 2020  unwrap=False).  
-000023c0: 2020 2020 2020 6966 2064 6972 6563 7469        if directi
-000023d0: 6f6e 2069 7320 5f65 6e75 6d73 2e55 503a  on is _enums.UP:
-000023e0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000023f0: 7572 6e20 7475 706c 6528 5f2e 6765 745f  urn tuple(_.get_
-00002400: 6974 656d 2829 2066 6f72 205f 2069 6e20  item() for _ in 
-00002410: 7772 6170 7065 7273 2069 6620 5f2e 6469  wrappers if _.di
-00002420: 7265 6374 696f 6e20 6973 205f 656e 756d  rection is _enum
-00002430: 732e 5550 290a 2020 2020 2020 2020 656c  s.UP).        el
-00002440: 6966 2064 6972 6563 7469 6f6e 2069 7320  if direction is 
-00002450: 5f65 6e75 6d73 2e44 4f57 4e3a 0a20 2020  _enums.DOWN:.   
-00002460: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00002470: 7475 706c 6528 5f2e 6765 745f 6974 656d  tuple(_.get_item
-00002480: 2829 2066 6f72 205f 2069 6e20 7772 6170  () for _ in wrap
-00002490: 7065 7273 2069 6620 5f2e 6469 7265 6374  pers if _.direct
-000024a0: 696f 6e20 6973 205f 656e 756d 732e 444f  ion is _enums.DO
-000024b0: 574e 290a 2020 2020 2020 2020 696e 6469  WN).        indi
-000024c0: 6361 746f 7273 203d 205b 5f2e 6765 745f  cators = [_.get_
-000024d0: 6974 656d 2829 2066 6f72 205f 2069 6e20  item() for _ in 
-000024e0: 7772 6170 7065 7273 5d0a 2020 2020 2020  wrappers].      
-000024f0: 2020 7265 7475 726e 2069 6e64 6963 6174    return indicat
-00002500: 6f72 730a 0a20 2020 2064 6566 205f 6765  ors..    def _ge
-00002510: 745f 7061 7265 6e74 6167 6528 7365 6c66  t_parentage(self
-00002520: 293a 0a20 2020 2020 2020 2070 6172 656e  ):.        paren
-00002530: 7461 6765 203d 205b 5d0a 2020 2020 2020  tage = [].      
-00002540: 2020 7061 7265 6e74 203d 2073 656c 660a    parent = self.
-00002550: 2020 2020 2020 2020 7768 696c 6520 7061          while pa
-00002560: 7265 6e74 2069 7320 6e6f 7420 4e6f 6e65  rent is not None
-00002570: 3a0a 2020 2020 2020 2020 2020 2020 7061  :.            pa
-00002580: 7265 6e74 6167 652e 6170 7065 6e64 2870  rentage.append(p
-00002590: 6172 656e 7429 0a20 2020 2020 2020 2020  arent).         
-000025a0: 2020 2069 6620 6861 7361 7474 7228 7061     if hasattr(pa
-000025b0: 7265 6e74 2c20 225f 6d61 696e 5f6c 6561  rent, "_main_lea
-000025c0: 6622 293a 0a20 2020 2020 2020 2020 2020  f"):.           
-000025d0: 2020 2020 2069 6620 7061 7265 6e74 2e5f       if parent._
-000025e0: 6d61 696e 5f6c 6561 6620 6973 206e 6f74  main_leaf is not
-000025f0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00002600: 2020 2020 2020 2020 2020 2070 6172 656e             paren
-00002610: 7420 3d20 7061 7265 6e74 2e5f 6d61 696e  t = parent._main
-00002620: 5f6c 6561 662e 5f70 6172 656e 740a 2020  _leaf._parent.  
-00002630: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00002640: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00002650: 2020 2020 2020 2020 7061 7265 6e74 203d          parent =
-00002660: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-00002670: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00002680: 2020 2020 2020 2020 7061 7265 6e74 203d          parent =
-00002690: 2070 6172 656e 742e 5f70 6172 656e 740a   parent._parent.
-000026a0: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-000026b0: 6172 656e 7461 6765 0a0a 2020 2020 6465  arentage..    de
-000026c0: 6620 5f67 6574 5f73 6962 6c69 6e67 2873  f _get_sibling(s
-000026d0: 656c 662c 206e 293a 0a20 2020 2020 2020  elf, n):.       
-000026e0: 2061 7373 6572 7420 6e20 696e 2028 2d31   assert n in (-1
-000026f0: 2c20 302c 2031 292c 2072 6570 7228 7365  , 0, 1), repr(se
-00002700: 6c66 2c20 6e29 0a20 2020 2020 2020 2069  lf, n).        i
-00002710: 6620 6e20 3d3d 2030 3a0a 2020 2020 2020  f n == 0:.      
-00002720: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00002730: 660a 2020 2020 2020 2020 6966 2073 656c  f.        if sel
-00002740: 662e 5f70 6172 656e 7420 6973 204e 6f6e  f._parent is Non
-00002750: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00002760: 6574 7572 6e20 4e6f 6e65 0a20 2020 2020  eturn None.     
-00002770: 2020 2069 6620 7365 6c66 2e5f 7061 7265     if self._pare
-00002780: 6e74 2e73 696d 756c 7461 6e65 6f75 733a  nt.simultaneous:
-00002790: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000027a0: 7572 6e20 4e6f 6e65 0a20 2020 2020 2020  urn None.       
-000027b0: 2069 6e64 6578 203d 2073 656c 662e 5f70   index = self._p
-000027c0: 6172 656e 742e 696e 6465 7828 7365 6c66  arent.index(self
-000027d0: 2920 2b20 6e0a 2020 2020 2020 2020 6966  ) + n.        if
-000027e0: 2030 203c 3d20 696e 6465 7820 3c20 6c65   0 <= index < le
-000027f0: 6e28 7365 6c66 2e5f 7061 7265 6e74 293a  n(self._parent):
-00002800: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00002810: 7572 6e20 7365 6c66 2e5f 7061 7265 6e74  urn self._parent
-00002820: 5b69 6e64 6578 5d0a 0a20 2020 2064 6566  [index]..    def
-00002830: 205f 6765 745f 7469 6d65 7370 616e 2873   _get_timespan(s
-00002840: 656c 662c 2069 6e5f 7365 636f 6e64 733d  elf, in_seconds=
-00002850: 4661 6c73 6529 3a0a 2020 2020 2020 2020  False):.        
-00002860: 6966 2069 6e5f 7365 636f 6e64 733a 0a20  if in_seconds:. 
-00002870: 2020 2020 2020 2020 2020 205f 7570 6461             _upda
-00002880: 7465 2e5f 7570 6461 7465 5f6e 6f77 2873  te._update_now(s
-00002890: 656c 662c 206f 6666 7365 7473 5f69 6e5f  elf, offsets_in_
-000028a0: 7365 636f 6e64 733d 5472 7565 290a 2020  seconds=True).  
-000028b0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-000028c0: 662e 5f73 7461 7274 5f6f 6666 7365 745f  f._start_offset_
-000028d0: 696e 5f73 6563 6f6e 6473 2069 7320 4e6f  in_seconds is No
-000028e0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-000028f0: 2020 2020 7261 6973 6520 5f65 7863 6570      raise _excep
-00002900: 7469 6f6e 732e 4d69 7373 696e 674d 6574  tions.MissingMet
-00002910: 726f 6e6f 6d65 4d61 726b 4572 726f 720a  ronomeMarkError.
-00002920: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00002930: 726e 205f 7469 6d65 7370 616e 2e54 696d  rn _timespan.Tim
-00002940: 6573 7061 6e28 0a20 2020 2020 2020 2020  espan(.         
-00002950: 2020 2020 2020 2073 7461 7274 5f6f 6666         start_off
-00002960: 7365 743d 7365 6c66 2e5f 7374 6172 745f  set=self._start_
-00002970: 6f66 6673 6574 5f69 6e5f 7365 636f 6e64  offset_in_second
-00002980: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-00002990: 2020 2073 746f 705f 6f66 6673 6574 3d73     stop_offset=s
-000029a0: 656c 662e 5f73 746f 705f 6f66 6673 6574  elf._stop_offset
-000029b0: 5f69 6e5f 7365 636f 6e64 732c 0a20 2020  _in_seconds,.   
-000029c0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-000029d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000029e0: 2020 2020 205f 7570 6461 7465 2e5f 7570       _update._up
-000029f0: 6461 7465 5f6e 6f77 2873 656c 662c 206f  date_now(self, o
-00002a00: 6666 7365 7473 3d54 7275 6529 0a20 2020  ffsets=True).   
-00002a10: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00002a20: 7365 6c66 2e5f 7469 6d65 7370 616e 0a0a  self._timespan..
-00002a30: 2020 2020 6465 6620 5f68 6173 5f69 6e64      def _has_ind
-00002a40: 6963 6174 6f72 2873 656c 662c 2070 726f  icator(self, pro
-00002a50: 746f 7479 7065 3d4e 6f6e 652c 202a 2c20  totype=None, *, 
-00002a60: 6174 7472 6962 7574 6573 3d4e 6f6e 6529  attributes=None)
-00002a70: 3a0a 2020 2020 2020 2020 696e 6469 6361  :.        indica
-00002a80: 746f 7273 203d 2073 656c 662e 5f67 6574  tors = self._get
-00002a90: 5f69 6e64 6963 6174 6f72 7328 7072 6f74  _indicators(prot
-00002aa0: 6f74 7970 653d 7072 6f74 6f74 7970 652c  otype=prototype,
-00002ab0: 2061 7474 7269 6275 7465 733d 6174 7472   attributes=attr
-00002ac0: 6962 7574 6573 290a 2020 2020 2020 2020  ibutes).        
-00002ad0: 7265 7475 726e 2062 6f6f 6c28 696e 6469  return bool(indi
-00002ae0: 6361 746f 7273 290a 0a20 2020 2064 6566  cators)..    def
-00002af0: 205f 7265 6d6f 7665 5f66 726f 6d5f 7061   _remove_from_pa
-00002b00: 7265 6e74 2873 656c 6629 3a0a 2020 2020  rent(self):.    
-00002b10: 2020 2020 7365 6c66 2e5f 7570 6461 7465      self._update
-00002b20: 5f6c 6174 6572 286f 6666 7365 7473 3d54  _later(offsets=T
-00002b30: 7275 6529 0a20 2020 2020 2020 2066 6f72  rue).        for
-00002b40: 2063 6f6d 706f 6e65 6e74 2069 6e20 7365   component in se
-00002b50: 6c66 2e5f 6765 745f 7061 7265 6e74 6167  lf._get_parentag
-00002b60: 6528 295b 313a 5d3a 0a20 2020 2020 2020  e()[1:]:.       
-00002b70: 2020 2020 2069 6620 6e6f 7420 6861 7361       if not hasa
-00002b80: 7474 7228 636f 6d70 6f6e 656e 742c 2022  ttr(component, "
-00002b90: 5f6c 696c 7970 6f6e 645f 7479 7065 2229  _lilypond_type")
-00002ba0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00002bb0: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
-00002bc0: 2020 2020 2020 2066 6f72 2077 7261 7070         for wrapp
-00002bd0: 6572 2069 6e20 636f 6d70 6f6e 656e 742e  er in component.
-00002be0: 5f64 6570 656e 6465 6e74 5f77 7261 7070  _dependent_wrapp
-00002bf0: 6572 735b 3a5d 3a0a 2020 2020 2020 2020  ers[:]:.        
-00002c00: 2020 2020 2020 2020 6966 2077 7261 7070          if wrapp
-00002c10: 6572 2e63 6f6d 706f 6e65 6e74 2069 7320  er.component is 
-00002c20: 7365 6c66 3a0a 2020 2020 2020 2020 2020  self:.          
-00002c30: 2020 2020 2020 2020 2020 636f 6d70 6f6e            compon
-00002c40: 656e 742e 5f64 6570 656e 6465 6e74 5f77  ent._dependent_w
-00002c50: 7261 7070 6572 732e 7265 6d6f 7665 2877  rappers.remove(w
-00002c60: 7261 7070 6572 290a 2020 2020 2020 2020  rapper).        
-00002c70: 6966 2073 656c 662e 5f70 6172 656e 7420  if self._parent 
-00002c80: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00002c90: 2020 2020 2020 2020 2073 656c 662e 5f70           self._p
-00002ca0: 6172 656e 742e 5f63 6f6d 706f 6e65 6e74  arent._component
-00002cb0: 732e 7265 6d6f 7665 2873 656c 6629 0a20  s.remove(self). 
-00002cc0: 2020 2020 2020 2073 656c 662e 5f70 6172         self._par
-00002cd0: 656e 7420 3d20 4e6f 6e65 0a0a 2020 2020  ent = None..    
-00002ce0: 6465 6620 5f72 656d 6f76 655f 6e61 6d65  def _remove_name
-00002cf0: 645f 6368 696c 6472 656e 5f66 726f 6d5f  d_children_from_
-00002d00: 7061 7265 6e74 6167 6528 7365 6c66 2c20  parentage(self, 
-00002d10: 6e61 6d65 5f64 6963 7469 6f6e 6172 7929  name_dictionary)
-00002d20: 3a0a 2020 2020 2020 2020 6966 2073 656c  :.        if sel
-00002d30: 662e 5f70 6172 656e 7420 6973 206e 6f74  f._parent is not
-00002d40: 204e 6f6e 6520 616e 6420 6e61 6d65 5f64   None and name_d
-00002d50: 6963 7469 6f6e 6172 793a 0a20 2020 2020  ictionary:.     
-00002d60: 2020 2020 2020 2066 6f72 2070 6172 656e         for paren
-00002d70: 7420 696e 2073 656c 662e 5f67 6574 5f70  t in self._get_p
-00002d80: 6172 656e 7461 6765 2829 5b31 3a5d 3a0a  arentage()[1:]:.
-00002d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002da0: 6e61 6d65 645f 6368 696c 6472 656e 203d  named_children =
-00002db0: 2070 6172 656e 742e 5f6e 616d 6564 5f63   parent._named_c
-00002dc0: 6869 6c64 7265 6e0a 2020 2020 2020 2020  hildren.        
-00002dd0: 2020 2020 2020 2020 666f 7220 6e61 6d65          for name
-00002de0: 2069 6e20 6e61 6d65 5f64 6963 7469 6f6e   in name_diction
-00002df0: 6172 793a 0a20 2020 2020 2020 2020 2020  ary:.           
-00002e00: 2020 2020 2020 2020 2066 6f72 2063 6f6d           for com
-00002e10: 706f 6e65 6e74 2069 6e20 6e61 6d65 5f64  ponent in name_d
-00002e20: 6963 7469 6f6e 6172 795b 6e61 6d65 5d3a  ictionary[name]:
-00002e30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002e40: 2020 2020 2020 2020 206e 616d 6564 5f63           named_c
-00002e50: 6869 6c64 7265 6e5b 6e61 6d65 5d2e 7265  hildren[name].re
-00002e60: 6d6f 7665 2863 6f6d 706f 6e65 6e74 290a  move(component).
+00000ed0: 6172 7920 3d20 7b7d 0a20 2020 2020 2020  ary = {}.       
+00000ee0: 2069 6620 6861 7361 7474 7228 7365 6c66   if hasattr(self
+00000ef0: 2c20 225f 6e61 6d65 645f 6368 696c 6472  , "_named_childr
+00000f00: 656e 2229 3a0a 2020 2020 2020 2020 2020  en"):.          
+00000f10: 2020 666f 7220 6e61 6d65 2c20 6368 696c    for name, chil
+00000f20: 6472 656e 2069 6e20 7365 6c66 2e5f 6e61  dren in self._na
+00000f30: 6d65 645f 6368 696c 6472 656e 2e69 7465  med_children.ite
+00000f40: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
+00000f50: 2020 2020 2020 6e61 6d65 5f64 6963 7469        name_dicti
+00000f60: 6f6e 6172 795b 6e61 6d65 5d20 3d20 636f  onary[name] = co
+00000f70: 7079 2e63 6f70 7928 6368 696c 6472 656e  py.copy(children
+00000f80: 290a 2020 2020 2020 2020 6e61 6d65 203d  ).        name =
+00000f90: 2067 6574 6174 7472 2873 656c 662c 2022   getattr(self, "
+00000fa0: 6e61 6d65 222c 204e 6f6e 6529 0a20 2020  name", None).   
+00000fb0: 2020 2020 2069 6620 6e61 6d65 2069 7320       if name is 
+00000fc0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00000fd0: 2020 2020 2020 6966 2073 656c 662e 6e61        if self.na
+00000fe0: 6d65 206e 6f74 2069 6e20 6e61 6d65 5f64  me not in name_d
+00000ff0: 6963 7469 6f6e 6172 793a 0a20 2020 2020  ictionary:.     
+00001000: 2020 2020 2020 2020 2020 206e 616d 655f             name_
+00001010: 6469 6374 696f 6e61 7279 5b73 656c 662e  dictionary[self.
+00001020: 6e61 6d65 5d20 3d20 5b5d 0a20 2020 2020  name] = [].     
+00001030: 2020 2020 2020 206e 616d 655f 6469 6374         name_dict
+00001040: 696f 6e61 7279 5b73 656c 662e 6e61 6d65  ionary[self.name
+00001050: 5d2e 6170 7065 6e64 2873 656c 6629 0a20  ].append(self). 
+00001060: 2020 2020 2020 2072 6574 7572 6e20 6e61         return na
+00001070: 6d65 5f64 6963 7469 6f6e 6172 790a 0a20  me_dictionary.. 
+00001080: 2020 2064 6566 205f 6368 6563 6b5f 666f     def _check_fo
+00001090: 725f 6379 636c 6573 2873 656c 662c 2063  r_cycles(self, c
+000010a0: 6f6d 706f 6e65 6e74 7329 3a0a 2020 2020  omponents):.    
+000010b0: 2020 2020 7061 7265 6e74 6167 6520 3d20      parentage = 
+000010c0: 5b73 656c 665d 0a20 2020 2020 2020 2070  [self].        p
+000010d0: 6172 656e 7420 3d20 7365 6c66 2e5f 7061  arent = self._pa
+000010e0: 7265 6e74 0a20 2020 2020 2020 2077 6869  rent.        whi
+000010f0: 6c65 2070 6172 656e 7420 6973 206e 6f74  le parent is not
+00001100: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00001110: 2020 2070 6172 656e 7461 6765 2e61 7070     parentage.app
+00001120: 656e 6428 7061 7265 6e74 290a 2020 2020  end(parent).    
+00001130: 2020 2020 2020 2020 7061 7265 6e74 203d          parent =
+00001140: 2070 6172 656e 742e 5f70 6172 656e 740a   parent._parent.
+00001150: 2020 2020 2020 2020 666f 7220 636f 6d70          for comp
+00001160: 6f6e 656e 7420 696e 2063 6f6d 706f 6e65  onent in compone
+00001170: 6e74 733a 0a20 2020 2020 2020 2020 2020  nts:.           
+00001180: 2069 6620 636f 6d70 6f6e 656e 7420 696e   if component in
+00001190: 2070 6172 656e 7461 6765 3a0a 2020 2020   parentage:.    
+000011a0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000011b0: 726e 2054 7275 650a 2020 2020 2020 2020  rn True.        
+000011c0: 7265 7475 726e 2046 616c 7365 0a0a 2020  return False..  
+000011d0: 2020 6465 6620 5f66 6f72 6d61 745f 6162    def _format_ab
+000011e0: 736f 6c75 7465 5f61 6674 6572 5f73 6974  solute_after_sit
+000011f0: 6528 7365 6c66 2c20 636f 6e74 7269 6275  e(self, contribu
+00001200: 7469 6f6e 7329 3a0a 2020 2020 2020 2020  tions):.        
+00001210: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
+00001220: 2020 2020 7374 7269 6e67 7320 3d20 636f      strings = co
+00001230: 6e74 7269 6275 7469 6f6e 732e 616c 7068  ntributions.alph
+00001240: 6162 6574 697a 6528 636f 6e74 7269 6275  abetize(contribu
+00001250: 7469 6f6e 732e 6162 736f 6c75 7465 5f61  tions.absolute_a
+00001260: 6674 6572 2e63 6f6d 6d61 6e64 7329 0a20  fter.commands). 
+00001270: 2020 2020 2020 2069 6620 7374 7269 6e67         if string
+00001280: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
+00001290: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
+000012a0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000012b0: 2020 7365 6c66 2c20 4166 7465 7247 7261    self, AfterGra
+000012c0: 6365 436f 6e74 6169 6e65 7220 7c20 4265  ceContainer | Be
+000012d0: 666f 7265 4772 6163 6543 6f6e 7461 696e  foreGraceContain
+000012e0: 6572 207c 204c 6561 660a 2020 2020 2020  er | Leaf.      
+000012f0: 2020 2020 2020 292c 2072 6570 7228 7365        ), repr(se
+00001300: 6c66 290a 2020 2020 2020 2020 2020 2020  lf).            
+00001310: 7265 7375 6c74 2e61 7070 656e 6428 6622  result.append(f"
+00001320: 2520 7b5f 636f 6e74 7269 6275 7469 6f6e  % {_contribution
+00001330: 732e 5479 7065 732e 434f 4d4d 414e 4453  s.Types.COMMANDS
+00001340: 2e6e 616d 657d 3a22 290a 2020 2020 2020  .name}:").      
+00001350: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
+00001360: 656e 6428 7374 7269 6e67 7329 0a20 2020  end(strings).   
+00001370: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+00001380: 6c74 0a0a 2020 2020 6465 6620 5f66 6f72  lt..    def _for
+00001390: 6d61 745f 6162 736f 6c75 7465 5f62 6566  mat_absolute_bef
+000013a0: 6f72 655f 7369 7465 2873 656c 662c 2063  ore_site(self, c
+000013b0: 6f6e 7472 6962 7574 696f 6e73 293a 0a20  ontributions):. 
+000013c0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+000013d0: 5b5d 0a20 2020 2020 2020 2073 7472 696e  [].        strin
+000013e0: 6773 203d 2063 6f6e 7472 6962 7574 696f  gs = contributio
+000013f0: 6e73 2e61 6c70 6861 6265 7469 7a65 2863  ns.alphabetize(c
+00001400: 6f6e 7472 6962 7574 696f 6e73 2e61 6273  ontributions.abs
+00001410: 6f6c 7574 655f 6265 666f 7265 2e63 6f6d  olute_before.com
+00001420: 6d61 6e64 7329 0a20 2020 2020 2020 2069  mands).        i
+00001430: 6620 7374 7269 6e67 733a 0a20 2020 2020  f strings:.     
+00001440: 2020 2020 2020 2072 6573 756c 742e 6170         result.ap
+00001450: 7065 6e64 2866 2225 207b 5f63 6f6e 7472  pend(f"% {_contr
+00001460: 6962 7574 696f 6e73 2e54 7970 6573 2e43  ibutions.Types.C
+00001470: 4f4d 4d41 4e44 532e 6e61 6d65 7d3a 2229  OMMANDS.name}:")
+00001480: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00001490: 756c 742e 6578 7465 6e64 2873 7472 696e  ult.extend(strin
+000014a0: 6773 290a 2020 2020 2020 2020 7265 7475  gs).        retu
+000014b0: 726e 2072 6573 756c 740a 0a20 2020 2040  rn result..    @
+000014c0: 7374 6174 6963 6d65 7468 6f64 0a20 2020  staticmethod.   
+000014d0: 2064 6566 205f 6765 745f 636f 6d70 6f6e   def _get_compon
+000014e0: 656e 7473 2861 7267 756d 656e 7429 3a0a  ents(argument):.
+000014f0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00001500: 205b 5d0a 2020 2020 2020 2020 6966 2069   [].        if i
+00001510: 7369 6e73 7461 6e63 6528 6172 6775 6d65  sinstance(argume
+00001520: 6e74 2c20 436f 6d70 6f6e 656e 7429 3a0a  nt, Component):.
+00001530: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00001540: 6c74 2e65 7874 656e 6428 6172 6775 6d65  lt.extend(argume
+00001550: 6e74 2e5f 6765 745f 7375 6274 7265 6528  nt._get_subtree(
+00001560: 2929 0a20 2020 2020 2020 2065 6c73 653a  )).        else:
+00001570: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00001580: 2069 7465 6d20 696e 2061 7267 756d 656e   item in argumen
+00001590: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+000015a0: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
+000015b0: 2843 6f6d 706f 6e65 6e74 2e5f 6765 745f  (Component._get_
+000015c0: 636f 6d70 6f6e 656e 7473 2869 7465 6d29  components(item)
+000015d0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+000015e0: 2072 6573 756c 740a 0a20 2020 2064 6566   result..    def
+000015f0: 205f 6765 745f 6465 7363 656e 6461 6e74   _get_descendant
+00001600: 735f 7374 6172 7469 6e67 5f77 6974 6828  s_starting_with(
+00001610: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
+00001620: 6574 7572 6e20 5b73 656c 665d 0a0a 2020  eturn [self]..  
+00001630: 2020 6465 6620 5f67 6574 5f64 6573 6365    def _get_desce
+00001640: 6e64 616e 7473 5f73 746f 7070 696e 675f  ndants_stopping_
+00001650: 7769 7468 2873 656c 6629 3a0a 2020 2020  with(self):.    
+00001660: 2020 2020 7265 7475 726e 205b 7365 6c66      return [self
+00001670: 5d0a 0a20 2020 2064 6566 205f 6765 745f  ]..    def _get_
+00001680: 6475 7261 7469 6f6e 2873 656c 6629 3a0a  duration(self):.
+00001690: 2020 2020 2020 2020 6475 7261 7469 6f6e          duration
+000016a0: 203d 2073 656c 662e 5f67 6574 5f70 7265   = self._get_pre
+000016b0: 7072 6f6c 6174 6564 5f64 7572 6174 696f  prolated_duratio
+000016c0: 6e28 290a 2020 2020 2020 2020 6966 2073  n().        if s
+000016d0: 656c 662e 5f70 6172 656e 7420 6973 204e  elf._parent is N
+000016e0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000016f0: 2072 6574 7572 6e20 6475 7261 7469 6f6e   return duration
+00001700: 0a20 2020 2020 2020 2066 6f72 2070 6172  .        for par
+00001710: 656e 7420 696e 2073 656c 662e 5f70 6172  ent in self._par
+00001720: 656e 742e 5f67 6574 5f70 6172 656e 7461  ent._get_parenta
+00001730: 6765 2829 3a0a 2020 2020 2020 2020 2020  ge():.          
+00001740: 2020 6d75 6c74 6970 6c69 6572 203d 2067    multiplier = g
+00001750: 6574 6174 7472 2870 6172 656e 742c 2022  etattr(parent, "
+00001760: 696d 706c 6965 645f 7072 6f6c 6174 696f  implied_prolatio
+00001770: 6e22 2c20 5f64 7572 6174 696f 6e2e 4d75  n", _duration.Mu
+00001780: 6c74 6970 6c69 6572 2831 2929 0a20 2020  ltiplier(1)).   
+00001790: 2020 2020 2020 2020 2064 7572 6174 696f           duratio
+000017a0: 6e20 2a3d 206d 756c 7469 706c 6965 720a  n *= multiplier.
+000017b0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+000017c0: 7572 6174 696f 6e0a 0a20 2020 2064 6566  uration..    def
+000017d0: 205f 6765 745f 696e 6469 6361 746f 7228   _get_indicator(
+000017e0: 7365 6c66 2c20 7072 6f74 6f74 7970 653d  self, prototype=
+000017f0: 4e6f 6e65 2c20 2a2c 2061 7474 7269 6275  None, *, attribu
+00001800: 7465 733d 4e6f 6e65 2c20 756e 7772 6170  tes=None, unwrap
+00001810: 3d54 7275 6529 3a0a 2020 2020 2020 2020  =True):.        
+00001820: 696e 6469 6361 746f 7273 203d 2073 656c  indicators = sel
+00001830: 662e 5f67 6574 5f69 6e64 6963 6174 6f72  f._get_indicator
+00001840: 7328 0a20 2020 2020 2020 2020 2020 2070  s(.            p
+00001850: 726f 746f 7479 7065 3d70 726f 746f 7479  rototype=prototy
+00001860: 7065 2c20 6174 7472 6962 7574 6573 3d61  pe, attributes=a
+00001870: 7474 7269 6275 7465 732c 2075 6e77 7261  ttributes, unwra
+00001880: 703d 756e 7772 6170 0a20 2020 2020 2020  p=unwrap.       
+00001890: 2029 0a20 2020 2020 2020 2069 6620 6e6f   ).        if no
+000018a0: 7420 696e 6469 6361 746f 7273 3a0a 2020  t indicators:.  
+000018b0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000018c0: 5661 6c75 6545 7272 6f72 2866 226e 6f20  ValueError(f"no 
+000018d0: 6174 7461 6368 6564 2069 6e64 6963 6174  attached indicat
+000018e0: 6f72 7320 666f 756e 6420 6d61 7463 6869  ors found matchi
+000018f0: 6e67 207b 7072 6f74 6f74 7970 6521 727d  ng {prototype!r}
+00001900: 2e22 290a 2020 2020 2020 2020 6966 2031  .").        if 1
+00001910: 203c 206c 656e 2869 6e64 6963 6174 6f72   < len(indicator
+00001920: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+00001930: 6d65 7373 6167 6520 3d20 6622 6d75 6c74  message = f"mult
+00001940: 6970 6c65 2061 7474 6163 6865 6420 696e  iple attached in
+00001950: 6469 6361 746f 7273 2066 6f75 6e64 206d  dicators found m
+00001960: 6174 6368 696e 6720 7b70 726f 746f 7479  atching {prototy
+00001970: 7065 2172 7d2e 220a 2020 2020 2020 2020  pe!r}.".        
+00001980: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+00001990: 7272 6f72 286d 6573 7361 6765 290a 2020  rror(message).  
+000019a0: 2020 2020 2020 7265 7475 726e 2069 6e64        return ind
+000019b0: 6963 6174 6f72 735b 305d 0a0a 2020 2020  icators[0]..    
+000019c0: 6465 6620 5f67 6574 5f69 6e64 6963 6174  def _get_indicat
+000019d0: 6f72 7328 7365 6c66 2c20 7072 6f74 6f74  ors(self, protot
+000019e0: 7970 653d 4e6f 6e65 2c20 2a2c 2061 7474  ype=None, *, att
+000019f0: 7269 6275 7465 733d 4e6f 6e65 2c20 756e  ributes=None, un
+00001a00: 7772 6170 3d54 7275 6529 3a0a 2020 2020  wrap=True):.    
+00001a10: 2020 2020 7072 6f74 6f74 7970 6520 3d20      prototype = 
+00001a20: 7072 6f74 6f74 7970 6520 6f72 2028 6f62  prototype or (ob
+00001a30: 6a65 6374 2c29 0a20 2020 2020 2020 2069  ject,).        i
+00001a40: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+00001a50: 2870 726f 746f 7479 7065 2c20 7475 706c  (prototype, tupl
+00001a60: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+00001a70: 7072 6f74 6f74 7970 6520 3d20 2870 726f  prototype = (pro
+00001a80: 746f 7479 7065 2c29 0a20 2020 2020 2020  totype,).       
+00001a90: 2070 726f 746f 7479 7065 5f6f 626a 6563   prototype_objec
+00001aa0: 7473 2c20 7072 6f74 6f74 7970 655f 636c  ts, prototype_cl
+00001ab0: 6173 7365 7320 3d20 5b5d 2c20 5b5d 0a20  asses = [], []. 
+00001ac0: 2020 2020 2020 2066 6f72 2069 6e64 6963         for indic
+00001ad0: 6174 6f72 5f70 726f 746f 7479 7065 2069  ator_prototype i
+00001ae0: 6e20 7072 6f74 6f74 7970 653a 0a20 2020  n prototype:.   
+00001af0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00001b00: 7374 616e 6365 2869 6e64 6963 6174 6f72  stance(indicator
+00001b10: 5f70 726f 746f 7479 7065 2c20 7479 7065  _prototype, type
+00001b20: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00001b30: 2020 2070 726f 746f 7479 7065 5f63 6c61     prototype_cla
+00001b40: 7373 6573 2e61 7070 656e 6428 696e 6469  sses.append(indi
+00001b50: 6361 746f 725f 7072 6f74 6f74 7970 6529  cator_prototype)
+00001b60: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00001b70: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00001b80: 2020 2070 726f 746f 7479 7065 5f6f 626a     prototype_obj
+00001b90: 6563 7473 2e61 7070 656e 6428 696e 6469  ects.append(indi
+00001ba0: 6361 746f 725f 7072 6f74 6f74 7970 6529  cator_prototype)
+00001bb0: 0a20 2020 2020 2020 2070 726f 746f 7479  .        prototy
+00001bc0: 7065 5f6f 626a 6563 7473 203d 2074 7570  pe_objects = tup
+00001bd0: 6c65 2870 726f 746f 7479 7065 5f6f 626a  le(prototype_obj
+00001be0: 6563 7473 290a 2020 2020 2020 2020 7072  ects).        pr
+00001bf0: 6f74 6f74 7970 655f 636c 6173 7365 7320  ototype_classes 
+00001c00: 3d20 7475 706c 6528 7072 6f74 6f74 7970  = tuple(prototyp
+00001c10: 655f 636c 6173 7365 7329 0a20 2020 2020  e_classes).     
+00001c20: 2020 2072 6573 756c 7420 3d20 5b5d 0a20     result = []. 
+00001c30: 2020 2020 2020 2066 6f72 2077 7261 7070         for wrapp
+00001c40: 6572 2069 6e20 7365 6c66 2e5f 7772 6170  er in self._wrap
+00001c50: 7065 7273 3a0a 2020 2020 2020 2020 2020  pers:.          
+00001c60: 2020 6966 2077 7261 7070 6572 2e61 6e6e    if wrapper.ann
+00001c70: 6f74 6174 696f 6e3a 0a20 2020 2020 2020  otation:.       
+00001c80: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00001c90: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00001ca0: 2069 7369 6e73 7461 6e63 6528 7772 6170   isinstance(wrap
+00001cb0: 7065 722c 2070 726f 746f 7479 7065 5f63  per, prototype_c
+00001cc0: 6c61 7373 6573 293a 0a20 2020 2020 2020  lasses):.       
+00001cd0: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+00001ce0: 6170 7065 6e64 2877 7261 7070 6572 290a  append(wrapper).
+00001cf0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00001d00: 2061 6e79 2877 7261 7070 6572 203d 3d20   any(wrapper == 
+00001d10: 5f20 666f 7220 5f20 696e 2070 726f 746f  _ for _ in proto
+00001d20: 7479 7065 5f6f 626a 6563 7473 293a 0a20  type_objects):. 
+00001d30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00001d40: 6573 756c 742e 6170 7065 6e64 2877 7261  esult.append(wra
+00001d50: 7070 6572 290a 2020 2020 2020 2020 2020  pper).          
+00001d60: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+00001d70: 6528 7772 6170 7065 722e 756e 6275 6e64  e(wrapper.unbund
+00001d80: 6c65 5f69 6e64 6963 6174 6f72 2829 2c20  le_indicator(), 
+00001d90: 7072 6f74 6f74 7970 655f 636c 6173 7365  prototype_classe
+00001da0: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+00001db0: 2020 2020 7265 7375 6c74 2e61 7070 656e      result.appen
+00001dc0: 6428 7772 6170 7065 7229 0a20 2020 2020  d(wrapper).     
+00001dd0: 2020 2020 2020 2065 6c69 6620 616e 7928         elif any(
+00001de0: 7772 6170 7065 722e 756e 6275 6e64 6c65  wrapper.unbundle
+00001df0: 5f69 6e64 6963 6174 6f72 2829 203d 3d20  _indicator() == 
+00001e00: 5f20 666f 7220 5f20 696e 2070 726f 746f  _ for _ in proto
+00001e10: 7479 7065 5f6f 626a 6563 7473 293a 0a20  type_objects):. 
+00001e20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00001e30: 6573 756c 742e 6170 7065 6e64 2877 7261  esult.append(wra
+00001e40: 7070 6572 290a 2020 2020 2020 2020 6966  pper).        if
+00001e50: 2061 7474 7269 6275 7465 7320 6973 206e   attributes is n
+00001e60: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00001e70: 2020 2020 2072 6573 756c 745f 203d 205b       result_ = [
+00001e80: 5d0a 2020 2020 2020 2020 2020 2020 666f  ].            fo
+00001e90: 7220 7772 6170 7065 7220 696e 2072 6573  r wrapper in res
+00001ea0: 756c 743a 0a20 2020 2020 2020 2020 2020  ult:.           
+00001eb0: 2020 2020 2066 6f72 206e 616d 652c 2076       for name, v
+00001ec0: 616c 7565 2069 6e20 6174 7472 6962 7574  alue in attribut
+00001ed0: 6573 2e69 7465 6d73 2829 3a0a 2020 2020  es.items():.    
+00001ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001ef0: 6966 2067 6574 6174 7472 2877 7261 7070  if getattr(wrapp
+00001f00: 6572 2e75 6e62 756e 646c 655f 696e 6469  er.unbundle_indi
+00001f10: 6361 746f 7228 292c 206e 616d 652c 204e  cator(), name, N
+00001f20: 6f6e 6529 2021 3d20 7661 6c75 653a 0a20  one) != value:. 
+00001f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001f40: 2020 2020 2020 2062 7265 616b 0a20 2020         break.   
+00001f50: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00001f60: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00001f70: 2020 2020 2020 2072 6573 756c 745f 2e61         result_.a
+00001f80: 7070 656e 6428 7772 6170 7065 7229 0a20  ppend(wrapper). 
+00001f90: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00001fa0: 7420 3d20 7265 7375 6c74 5f0a 2020 2020  t = result_.    
+00001fb0: 2020 2020 6966 2075 6e77 7261 703a 0a20      if unwrap:. 
+00001fc0: 2020 2020 2020 2020 2020 2069 6e64 6963             indic
+00001fd0: 6174 6f72 7320 3d20 5b5d 0a20 2020 2020  ators = [].     
+00001fe0: 2020 2020 2020 2066 6f72 2077 7261 7070         for wrapp
+00001ff0: 6572 2069 6e20 7265 7375 6c74 3a0a 2020  er in result:.  
+00002000: 2020 2020 2020 2020 2020 2020 2020 696e                in
+00002010: 6469 6361 746f 7273 2e61 7070 656e 6428  dicators.append(
+00002020: 7772 6170 7065 722e 756e 6275 6e64 6c65  wrapper.unbundle
+00002030: 5f69 6e64 6963 6174 6f72 2829 290a 2020  _indicator()).  
+00002040: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00002050: 203d 2069 6e64 6963 6174 6f72 730a 2020   = indicators.  
+00002060: 2020 2020 2020 7265 7375 6c74 203d 2072        result = r
+00002070: 6573 756c 740a 2020 2020 2020 2020 7265  esult.        re
+00002080: 7475 726e 2072 6573 756c 740a 0a20 2020  turn result..   
+00002090: 2064 6566 205f 6765 745f 6c69 6c79 706f   def _get_lilypo
+000020a0: 6e64 5f66 6f72 6d61 7428 7365 6c66 293a  nd_format(self):
+000020b0: 0a20 2020 2020 2020 205f 7570 6461 7465  .        _update
+000020c0: 6c69 622e 5f75 7064 6174 655f 6e6f 7728  lib._update_now(
+000020d0: 7365 6c66 2c20 696e 6469 6361 746f 7273  self, indicators
+000020e0: 3d54 7275 6529 0a20 2020 2020 2020 2073  =True).        s
+000020f0: 7472 696e 6720 3d20 5f66 6f72 6d61 742e  tring = _format.
+00002100: 666f 726d 6174 5f63 6f6d 706f 6e65 6e74  format_component
+00002110: 2873 656c 6629 0a20 2020 2020 2020 2072  (self).        r
+00002120: 6574 7572 6e20 7374 7269 6e67 0a0a 2020  eturn string..  
+00002130: 2020 6465 6620 5f67 6574 5f6d 6172 6b75    def _get_marku
+00002140: 7028 7365 6c66 2c20 6469 7265 6374 696f  p(self, directio
+00002150: 6e3d 4e6f 6e65 293a 0a20 2020 2020 2020  n=None):.       
+00002160: 2077 7261 7070 6572 7320 3d20 7365 6c66   wrappers = self
+00002170: 2e5f 6765 745f 696e 6469 6361 746f 7273  ._get_indicators
+00002180: 285f 696e 6469 6361 746f 7273 2e4d 6172  (_indicators.Mar
+00002190: 6b75 702c 2075 6e77 7261 703d 4661 6c73  kup, unwrap=Fals
+000021a0: 6529 0a20 2020 2020 2020 2069 6620 6469  e).        if di
+000021b0: 7265 6374 696f 6e20 6973 205f 656e 756d  rection is _enum
+000021c0: 732e 5550 3a0a 2020 2020 2020 2020 2020  s.UP:.          
+000021d0: 2020 7265 7475 726e 2074 7570 6c65 285f    return tuple(_
+000021e0: 2e67 6574 5f69 7465 6d28 2920 666f 7220  .get_item() for 
+000021f0: 5f20 696e 2077 7261 7070 6572 7320 6966  _ in wrappers if
+00002200: 205f 2e64 6972 6563 7469 6f6e 2069 7320   _.direction is 
+00002210: 5f65 6e75 6d73 2e55 5029 0a20 2020 2020  _enums.UP).     
+00002220: 2020 2065 6c69 6620 6469 7265 6374 696f     elif directio
+00002230: 6e20 6973 205f 656e 756d 732e 444f 574e  n is _enums.DOWN
+00002240: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00002250: 7475 726e 2074 7570 6c65 285f 2e67 6574  turn tuple(_.get
+00002260: 5f69 7465 6d28 2920 666f 7220 5f20 696e  _item() for _ in
+00002270: 2077 7261 7070 6572 7320 6966 205f 2e64   wrappers if _.d
+00002280: 6972 6563 7469 6f6e 2069 7320 5f65 6e75  irection is _enu
+00002290: 6d73 2e44 4f57 4e29 0a20 2020 2020 2020  ms.DOWN).       
+000022a0: 2069 6e64 6963 6174 6f72 7320 3d20 5b5f   indicators = [_
+000022b0: 2e67 6574 5f69 7465 6d28 2920 666f 7220  .get_item() for 
+000022c0: 5f20 696e 2077 7261 7070 6572 735d 0a20  _ in wrappers]. 
+000022d0: 2020 2020 2020 2072 6574 7572 6e20 696e         return in
+000022e0: 6469 6361 746f 7273 0a0a 2020 2020 6465  dicators..    de
+000022f0: 6620 5f67 6574 5f70 6172 656e 7461 6765  f _get_parentage
+00002300: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00002310: 7061 7265 6e74 6167 6520 3d20 5b5d 0a20  parentage = []. 
+00002320: 2020 2020 2020 2070 6172 656e 7420 3d20         parent = 
+00002330: 7365 6c66 0a20 2020 2020 2020 2077 6869  self.        whi
+00002340: 6c65 2070 6172 656e 7420 6973 206e 6f74  le parent is not
+00002350: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00002360: 2020 2070 6172 656e 7461 6765 2e61 7070     parentage.app
+00002370: 656e 6428 7061 7265 6e74 290a 2020 2020  end(parent).    
+00002380: 2020 2020 2020 2020 6966 2068 6173 6174          if hasat
+00002390: 7472 2870 6172 656e 742c 2022 5f6d 6169  tr(parent, "_mai
+000023a0: 6e5f 6c65 6166 2229 3a0a 2020 2020 2020  n_leaf"):.      
+000023b0: 2020 2020 2020 2020 2020 6966 2070 6172            if par
+000023c0: 656e 742e 5f6d 6169 6e5f 6c65 6166 2069  ent._main_leaf i
+000023d0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+000023e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000023f0: 7061 7265 6e74 203d 2070 6172 656e 742e  parent = parent.
+00002400: 5f6d 6169 6e5f 6c65 6166 2e5f 7061 7265  _main_leaf._pare
+00002410: 6e74 0a20 2020 2020 2020 2020 2020 2020  nt.             
+00002420: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00002430: 2020 2020 2020 2020 2020 2020 2070 6172               par
+00002440: 656e 7420 3d20 4e6f 6e65 0a20 2020 2020  ent = None.     
+00002450: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00002460: 2020 2020 2020 2020 2020 2020 2070 6172               par
+00002470: 656e 7420 3d20 7061 7265 6e74 2e5f 7061  ent = parent._pa
+00002480: 7265 6e74 0a20 2020 2020 2020 2072 6574  rent.        ret
+00002490: 7572 6e20 7061 7265 6e74 6167 650a 0a20  urn parentage.. 
+000024a0: 2020 2064 6566 205f 6765 745f 7369 626c     def _get_sibl
+000024b0: 696e 6728 7365 6c66 2c20 6e29 3a0a 2020  ing(self, n):.  
+000024c0: 2020 2020 2020 6173 7365 7274 206e 2069        assert n i
+000024d0: 6e20 282d 312c 2030 2c20 3129 2c20 7265  n (-1, 0, 1), re
+000024e0: 7072 2873 656c 662c 206e 290a 2020 2020  pr(self, n).    
+000024f0: 2020 2020 6966 206e 203d 3d20 303a 0a20      if n == 0:. 
+00002500: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00002510: 6e20 7365 6c66 0a20 2020 2020 2020 2069  n self.        i
+00002520: 6620 7365 6c66 2e5f 7061 7265 6e74 2069  f self._parent i
+00002530: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00002540: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
+00002550: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00002560: 5f70 6172 656e 742e 7369 6d75 6c74 616e  _parent.simultan
+00002570: 656f 7573 3a0a 2020 2020 2020 2020 2020  eous:.          
+00002580: 2020 7265 7475 726e 204e 6f6e 650a 2020    return None.  
+00002590: 2020 2020 2020 696e 6465 7820 3d20 7365        index = se
+000025a0: 6c66 2e5f 7061 7265 6e74 2e69 6e64 6578  lf._parent.index
+000025b0: 2873 656c 6629 202b 206e 0a20 2020 2020  (self) + n.     
+000025c0: 2020 2069 6620 3020 3c3d 2069 6e64 6578     if 0 <= index
+000025d0: 203c 206c 656e 2873 656c 662e 5f70 6172   < len(self._par
+000025e0: 656e 7429 3a0a 2020 2020 2020 2020 2020  ent):.          
+000025f0: 2020 7265 7475 726e 2073 656c 662e 5f70    return self._p
+00002600: 6172 656e 745b 696e 6465 785d 0a0a 2020  arent[index]..  
+00002610: 2020 6465 6620 5f67 6574 5f74 696d 6573    def _get_times
+00002620: 7061 6e28 7365 6c66 2c20 696e 5f73 6563  pan(self, in_sec
+00002630: 6f6e 6473 3d46 616c 7365 293a 0a20 2020  onds=False):.   
+00002640: 2020 2020 2069 6620 696e 5f73 6563 6f6e       if in_secon
+00002650: 6473 3a0a 2020 2020 2020 2020 2020 2020  ds:.            
+00002660: 5f75 7064 6174 656c 6962 2e5f 7570 6461  _updatelib._upda
+00002670: 7465 5f6e 6f77 2873 656c 662c 206f 6666  te_now(self, off
+00002680: 7365 7473 5f69 6e5f 7365 636f 6e64 733d  sets_in_seconds=
+00002690: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
+000026a0: 2020 6966 2073 656c 662e 5f73 7461 7274    if self._start
+000026b0: 5f6f 6666 7365 745f 696e 5f73 6563 6f6e  _offset_in_secon
+000026c0: 6473 2069 7320 4e6f 6e65 3a0a 2020 2020  ds is None:.    
+000026d0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+000026e0: 6520 5f65 7863 6570 7469 6f6e 732e 4d69  e _exceptions.Mi
+000026f0: 7373 696e 674d 6574 726f 6e6f 6d65 4d61  ssingMetronomeMa
+00002700: 726b 4572 726f 720a 2020 2020 2020 2020  rkError.        
+00002710: 2020 2020 7265 7475 726e 205f 7469 6d65      return _time
+00002720: 7370 616e 2e54 696d 6573 7061 6e28 0a20  span.Timespan(. 
+00002730: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00002740: 7461 7274 5f6f 6666 7365 743d 7365 6c66  tart_offset=self
+00002750: 2e5f 7374 6172 745f 6f66 6673 6574 5f69  ._start_offset_i
+00002760: 6e5f 7365 636f 6e64 732c 0a20 2020 2020  n_seconds,.     
+00002770: 2020 2020 2020 2020 2020 2073 746f 705f             stop_
+00002780: 6f66 6673 6574 3d73 656c 662e 5f73 746f  offset=self._sto
+00002790: 705f 6f66 6673 6574 5f69 6e5f 7365 636f  p_offset_in_seco
+000027a0: 6e64 732c 0a20 2020 2020 2020 2020 2020  nds,.           
+000027b0: 2029 0a20 2020 2020 2020 2065 6c73 653a   ).        else:
+000027c0: 0a20 2020 2020 2020 2020 2020 205f 7570  .            _up
+000027d0: 6461 7465 6c69 622e 5f75 7064 6174 655f  datelib._update_
+000027e0: 6e6f 7728 7365 6c66 2c20 6f66 6673 6574  now(self, offset
+000027f0: 733d 5472 7565 290a 2020 2020 2020 2020  s=True).        
+00002800: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00002810: 5f74 696d 6573 7061 6e0a 0a20 2020 2064  _timespan..    d
+00002820: 6566 205f 6861 735f 696e 6469 6361 746f  ef _has_indicato
+00002830: 7228 7365 6c66 2c20 7072 6f74 6f74 7970  r(self, prototyp
+00002840: 653d 4e6f 6e65 2c20 2a2c 2061 7474 7269  e=None, *, attri
+00002850: 6275 7465 733d 4e6f 6e65 293a 0a20 2020  butes=None):.   
+00002860: 2020 2020 2069 6e64 6963 6174 6f72 7320       indicators 
+00002870: 3d20 7365 6c66 2e5f 6765 745f 696e 6469  = self._get_indi
+00002880: 6361 746f 7273 2870 726f 746f 7479 7065  cators(prototype
+00002890: 3d70 726f 746f 7479 7065 2c20 6174 7472  =prototype, attr
+000028a0: 6962 7574 6573 3d61 7474 7269 6275 7465  ibutes=attribute
+000028b0: 7329 0a20 2020 2020 2020 2072 6574 7572  s).        retur
+000028c0: 6e20 626f 6f6c 2869 6e64 6963 6174 6f72  n bool(indicator
+000028d0: 7329 0a0a 2020 2020 6465 6620 5f72 656d  s)..    def _rem
+000028e0: 6f76 655f 6672 6f6d 5f70 6172 656e 7428  ove_from_parent(
+000028f0: 7365 6c66 293a 0a20 2020 2020 2020 2073  self):.        s
+00002900: 656c 662e 5f75 7064 6174 655f 6c61 7465  elf._update_late
+00002910: 7228 6f66 6673 6574 733d 5472 7565 290a  r(offsets=True).
+00002920: 2020 2020 2020 2020 666f 7220 636f 6d70          for comp
+00002930: 6f6e 656e 7420 696e 2073 656c 662e 5f67  onent in self._g
+00002940: 6574 5f70 6172 656e 7461 6765 2829 5b31  et_parentage()[1
+00002950: 3a5d 3a0a 2020 2020 2020 2020 2020 2020  :]:.            
+00002960: 6966 206e 6f74 2068 6173 6174 7472 2863  if not hasattr(c
+00002970: 6f6d 706f 6e65 6e74 2c20 225f 6c69 6c79  omponent, "_lily
+00002980: 706f 6e64 5f74 7970 6522 293a 0a20 2020  pond_type"):.   
+00002990: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+000029a0: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+000029b0: 2020 666f 7220 7772 6170 7065 7220 696e    for wrapper in
+000029c0: 2063 6f6d 706f 6e65 6e74 2e5f 6465 7065   component._depe
+000029d0: 6e64 656e 745f 7772 6170 7065 7273 5b3a  ndent_wrappers[:
+000029e0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+000029f0: 2020 2069 6620 7772 6170 7065 722e 636f     if wrapper.co
+00002a00: 6d70 6f6e 656e 7420 6973 2073 656c 663a  mponent is self:
+00002a10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002a20: 2020 2020 2063 6f6d 706f 6e65 6e74 2e5f       component._
+00002a30: 6465 7065 6e64 656e 745f 7772 6170 7065  dependent_wrappe
+00002a40: 7273 2e72 656d 6f76 6528 7772 6170 7065  rs.remove(wrappe
+00002a50: 7229 0a20 2020 2020 2020 2069 6620 7365  r).        if se
+00002a60: 6c66 2e5f 7061 7265 6e74 2069 7320 6e6f  lf._parent is no
+00002a70: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00002a80: 2020 2020 7365 6c66 2e5f 7061 7265 6e74      self._parent
+00002a90: 2e5f 636f 6d70 6f6e 656e 7473 2e72 656d  ._components.rem
+00002aa0: 6f76 6528 7365 6c66 290a 2020 2020 2020  ove(self).      
+00002ab0: 2020 7365 6c66 2e5f 7061 7265 6e74 203d    self._parent =
+00002ac0: 204e 6f6e 650a 0a20 2020 2064 6566 205f   None..    def _
+00002ad0: 7265 6d6f 7665 5f6e 616d 6564 5f63 6869  remove_named_chi
+00002ae0: 6c64 7265 6e5f 6672 6f6d 5f70 6172 656e  ldren_from_paren
+00002af0: 7461 6765 2873 656c 662c 206e 616d 655f  tage(self, name_
+00002b00: 6469 6374 696f 6e61 7279 293a 0a20 2020  dictionary):.   
+00002b10: 2020 2020 2069 6620 7365 6c66 2e5f 7061       if self._pa
+00002b20: 7265 6e74 2069 7320 6e6f 7420 4e6f 6e65  rent is not None
+00002b30: 2061 6e64 206e 616d 655f 6469 6374 696f   and name_dictio
+00002b40: 6e61 7279 3a0a 2020 2020 2020 2020 2020  nary:.          
+00002b50: 2020 666f 7220 7061 7265 6e74 2069 6e20    for parent in 
+00002b60: 7365 6c66 2e5f 6765 745f 7061 7265 6e74  self._get_parent
+00002b70: 6167 6528 295b 313a 5d3a 0a20 2020 2020  age()[1:]:.     
+00002b80: 2020 2020 2020 2020 2020 206e 616d 6564             named
+00002b90: 5f63 6869 6c64 7265 6e20 3d20 7061 7265  _children = pare
+00002ba0: 6e74 2e5f 6e61 6d65 645f 6368 696c 6472  nt._named_childr
+00002bb0: 656e 0a20 2020 2020 2020 2020 2020 2020  en.             
+00002bc0: 2020 2066 6f72 206e 616d 6520 696e 206e     for name in n
+00002bd0: 616d 655f 6469 6374 696f 6e61 7279 3a0a  ame_dictionary:.
+00002be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002bf0: 2020 2020 666f 7220 636f 6d70 6f6e 656e      for componen
+00002c00: 7420 696e 206e 616d 655f 6469 6374 696f  t in name_dictio
+00002c10: 6e61 7279 5b6e 616d 655d 3a0a 2020 2020  nary[name]:.    
+00002c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c30: 2020 2020 6e61 6d65 645f 6368 696c 6472      named_childr
+00002c40: 656e 5b6e 616d 655d 2e72 656d 6f76 6528  en[name].remove(
+00002c50: 636f 6d70 6f6e 656e 7429 0a20 2020 2020  component).     
+00002c60: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00002c70: 6620 6e6f 7420 6e61 6d65 645f 6368 696c  f not named_chil
+00002c80: 6472 656e 5b6e 616d 655d 3a0a 2020 2020  dren[name]:.    
+00002c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ca0: 2020 2020 6465 6c20 6e61 6d65 645f 6368      del named_ch
+00002cb0: 696c 6472 656e 5b6e 616d 655d 0a0a 2020  ildren[name]..  
+00002cc0: 2020 6465 6620 5f72 6573 746f 7265 5f6e    def _restore_n
+00002cd0: 616d 6564 5f63 6869 6c64 7265 6e5f 746f  amed_children_to
+00002ce0: 5f70 6172 656e 7461 6765 2873 656c 662c  _parentage(self,
+00002cf0: 206e 616d 655f 6469 6374 696f 6e61 7279   name_dictionary
+00002d00: 293a 0a20 2020 2020 2020 2069 6620 7365  ):.        if se
+00002d10: 6c66 2e5f 7061 7265 6e74 2069 7320 6e6f  lf._parent is no
+00002d20: 7420 4e6f 6e65 2061 6e64 206e 616d 655f  t None and name_
+00002d30: 6469 6374 696f 6e61 7279 3a0a 2020 2020  dictionary:.    
+00002d40: 2020 2020 2020 2020 666f 7220 7061 7265          for pare
+00002d50: 6e74 2069 6e20 7365 6c66 2e5f 6765 745f  nt in self._get_
+00002d60: 7061 7265 6e74 6167 6528 295b 313a 5d3a  parentage()[1:]:
+00002d70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002d80: 206e 616d 6564 5f63 6869 6c64 7265 6e20   named_children 
+00002d90: 3d20 7061 7265 6e74 2e5f 6e61 6d65 645f  = parent._named_
+00002da0: 6368 696c 6472 656e 0a20 2020 2020 2020  children.       
+00002db0: 2020 2020 2020 2020 2066 6f72 206e 616d           for nam
+00002dc0: 6520 696e 206e 616d 655f 6469 6374 696f  e in name_dictio
+00002dd0: 6e61 7279 3a0a 2020 2020 2020 2020 2020  nary:.          
+00002de0: 2020 2020 2020 2020 2020 6966 206e 616d            if nam
+00002df0: 6520 696e 206e 616d 6564 5f63 6869 6c64  e in named_child
+00002e00: 7265 6e3a 0a20 2020 2020 2020 2020 2020  ren:.           
+00002e10: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+00002e20: 6564 5f63 6869 6c64 7265 6e5b 6e61 6d65  ed_children[name
+00002e30: 5d2e 6578 7465 6e64 286e 616d 655f 6469  ].extend(name_di
+00002e40: 6374 696f 6e61 7279 5b6e 616d 655d 290a  ctionary[name]).
+00002e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002e60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
 00002e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002e80: 2020 2020 6966 206e 6f74 206e 616d 6564      if not named
-00002e90: 5f63 6869 6c64 7265 6e5b 6e61 6d65 5d3a  _children[name]:
-00002ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002eb0: 2020 2020 2020 2020 2064 656c 206e 616d           del nam
-00002ec0: 6564 5f63 6869 6c64 7265 6e5b 6e61 6d65  ed_children[name
-00002ed0: 5d0a 0a20 2020 2064 6566 205f 7265 7374  ]..    def _rest
-00002ee0: 6f72 655f 6e61 6d65 645f 6368 696c 6472  ore_named_childr
-00002ef0: 656e 5f74 6f5f 7061 7265 6e74 6167 6528  en_to_parentage(
-00002f00: 7365 6c66 2c20 6e61 6d65 5f64 6963 7469  self, name_dicti
-00002f10: 6f6e 6172 7929 3a0a 2020 2020 2020 2020  onary):.        
-00002f20: 6966 2073 656c 662e 5f70 6172 656e 7420  if self._parent 
-00002f30: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
-00002f40: 6e61 6d65 5f64 6963 7469 6f6e 6172 793a  name_dictionary:
-00002f50: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00002f60: 2070 6172 656e 7420 696e 2073 656c 662e   parent in self.
-00002f70: 5f67 6574 5f70 6172 656e 7461 6765 2829  _get_parentage()
-00002f80: 5b31 3a5d 3a0a 2020 2020 2020 2020 2020  [1:]:.          
-00002f90: 2020 2020 2020 6e61 6d65 645f 6368 696c        named_chil
-00002fa0: 6472 656e 203d 2070 6172 656e 742e 5f6e  dren = parent._n
-00002fb0: 616d 6564 5f63 6869 6c64 7265 6e0a 2020  amed_children.  
-00002fc0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00002fd0: 7220 6e61 6d65 2069 6e20 6e61 6d65 5f64  r name in name_d
-00002fe0: 6963 7469 6f6e 6172 793a 0a20 2020 2020  ictionary:.     
-00002ff0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00003000: 6620 6e61 6d65 2069 6e20 6e61 6d65 645f  f name in named_
-00003010: 6368 696c 6472 656e 3a0a 2020 2020 2020  children:.      
-00003020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003030: 2020 6e61 6d65 645f 6368 696c 6472 656e    named_children
-00003040: 5b6e 616d 655d 2e65 7874 656e 6428 6e61  [name].extend(na
-00003050: 6d65 5f64 6963 7469 6f6e 6172 795b 6e61  me_dictionary[na
-00003060: 6d65 5d29 0a20 2020 2020 2020 2020 2020  me]).           
-00003070: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00003080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003090: 2020 2020 2020 206e 616d 6564 5f63 6869         named_chi
-000030a0: 6c64 7265 6e5b 6e61 6d65 5d20 3d20 636f  ldren[name] = co
-000030b0: 7079 2e63 6f70 7928 6e61 6d65 5f64 6963  py.copy(name_dic
-000030c0: 7469 6f6e 6172 795b 6e61 6d65 5d29 0a0a  tionary[name])..
-000030d0: 2020 2020 6465 6620 5f73 6574 5f70 6172      def _set_par
-000030e0: 656e 7428 7365 6c66 2c20 6e65 775f 7061  ent(self, new_pa
-000030f0: 7265 6e74 293a 0a20 2020 2020 2020 2022  rent):.        "
-00003100: 2222 0a20 2020 2020 2020 204e 6f74 2063  "".        Not c
-00003110: 6f6d 706f 7365 722d 7361 6665 2e0a 2020  omposer-safe..  
-00003120: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00003130: 2020 6e61 6d65 645f 6368 696c 6472 656e    named_children
-00003140: 203d 2073 656c 662e 5f63 6163 6865 5f6e   = self._cache_n
-00003150: 616d 6564 5f63 6869 6c64 7265 6e28 290a  amed_children().
-00003160: 2020 2020 2020 2020 7365 6c66 2e5f 7265          self._re
-00003170: 6d6f 7665 5f6e 616d 6564 5f63 6869 6c64  move_named_child
-00003180: 7265 6e5f 6672 6f6d 5f70 6172 656e 7461  ren_from_parenta
-00003190: 6765 286e 616d 6564 5f63 6869 6c64 7265  ge(named_childre
-000031a0: 6e29 0a20 2020 2020 2020 2073 656c 662e  n).        self.
-000031b0: 5f72 656d 6f76 655f 6672 6f6d 5f70 6172  _remove_from_par
-000031c0: 656e 7428 290a 2020 2020 2020 2020 7365  ent().        se
-000031d0: 6c66 2e5f 7061 7265 6e74 203d 206e 6577  lf._parent = new
-000031e0: 5f70 6172 656e 740a 2020 2020 2020 2020  _parent.        
-000031f0: 7365 6c66 2e5f 7265 7374 6f72 655f 6e61  self._restore_na
-00003200: 6d65 645f 6368 696c 6472 656e 5f74 6f5f  med_children_to_
-00003210: 7061 7265 6e74 6167 6528 6e61 6d65 645f  parentage(named_
-00003220: 6368 696c 6472 656e 290a 2020 2020 2020  children).      
-00003230: 2020 7365 6c66 2e5f 7570 6461 7465 5f6c    self._update_l
-00003240: 6174 6572 286f 6666 7365 7473 3d54 7275  ater(offsets=Tru
-00003250: 6529 0a0a 2020 2020 6465 6620 5f73 6962  e)..    def _sib
-00003260: 6c69 6e67 2873 656c 662c 206e 293a 0a20  ling(self, n):. 
-00003270: 2020 2020 2020 2061 7373 6572 7420 6e20         assert n 
-00003280: 696e 2028 2d31 2c20 302c 2031 292c 2072  in (-1, 0, 1), r
-00003290: 6570 7228 6e29 0a20 2020 2020 2020 2069  epr(n).        i
-000032a0: 6620 6e20 3d3d 2030 3a0a 2020 2020 2020  f n == 0:.      
-000032b0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-000032c0: 660a 2020 2020 2020 2020 666f 7220 7061  f.        for pa
-000032d0: 7265 6e74 2069 6e20 7365 6c66 2e5f 6765  rent in self._ge
-000032e0: 745f 7061 7265 6e74 6167 6528 293a 0a20  t_parentage():. 
-000032f0: 2020 2020 2020 2020 2020 2073 6962 6c69             sibli
-00003300: 6e67 203d 2070 6172 656e 742e 5f67 6574  ng = parent._get
-00003310: 5f73 6962 6c69 6e67 285f 6d61 7468 2e73  _sibling(_math.s
-00003320: 6967 6e28 6e29 290a 2020 2020 2020 2020  ign(n)).        
-00003330: 2020 2020 6966 2073 6962 6c69 6e67 2069      if sibling i
-00003340: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00003350: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00003360: 726e 2073 6962 6c69 6e67 0a0a 2020 2020  rn sibling..    
-00003370: 6465 6620 5f74 6167 5f73 7472 696e 6773  def _tag_strings
-00003380: 2873 656c 662c 2073 7472 696e 6773 293a  (self, strings):
-00003390: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-000033a0: 2e74 6167 2069 7320 6e6f 7420 4e6f 6e65  .tag is not None
-000033b0: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
-000033c0: 7269 6e67 7320 3d20 5f74 6167 2e64 6f75  rings = _tag.dou
-000033d0: 626c 655f 7461 6728 7374 7269 6e67 732c  ble_tag(strings,
-000033e0: 2073 656c 662e 7461 6729 0a20 2020 2020   self.tag).     
-000033f0: 2020 2072 6574 7572 6e20 7374 7269 6e67     return string
-00003400: 730a 0a20 2020 2064 6566 205f 7570 6461  s..    def _upda
-00003410: 7465 5f6c 6174 6572 2873 656c 662c 206f  te_later(self, o
-00003420: 6666 7365 7473 3d46 616c 7365 2c20 6f66  ffsets=False, of
-00003430: 6673 6574 735f 696e 5f73 6563 6f6e 6473  fsets_in_seconds
-00003440: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
-00003450: 2061 7373 6572 7420 6f66 6673 6574 7320   assert offsets 
-00003460: 6f72 206f 6666 7365 7473 5f69 6e5f 7365  or offsets_in_se
-00003470: 636f 6e64 730a 2020 2020 2020 2020 666f  conds.        fo
-00003480: 7220 636f 6d70 6f6e 656e 7420 696e 2073  r component in s
-00003490: 656c 662e 5f67 6574 5f70 6172 656e 7461  elf._get_parenta
-000034a0: 6765 2829 3a0a 2020 2020 2020 2020 2020  ge():.          
-000034b0: 2020 6966 206f 6666 7365 7473 3a0a 2020    if offsets:.  
-000034c0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000034d0: 6d70 6f6e 656e 742e 5f6f 6666 7365 7473  mponent._offsets
-000034e0: 5f61 7265 5f63 7572 7265 6e74 203d 2046  _are_current = F
-000034f0: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
-00003500: 2065 6c69 6620 6f66 6673 6574 735f 696e   elif offsets_in
-00003510: 5f73 6563 6f6e 6473 3a0a 2020 2020 2020  _seconds:.      
-00003520: 2020 2020 2020 2020 2020 636f 6d70 6f6e            compon
-00003530: 656e 742e 5f6f 6666 7365 7473 5f69 6e5f  ent._offsets_in_
-00003540: 7365 636f 6e64 735f 6172 655f 6375 7272  seconds_are_curr
-00003550: 656e 7420 3d20 4661 6c73 650a 0a20 2020  ent = False..   
-00003560: 2023 2323 2050 5542 4c49 4320 5052 4f50   ### PUBLIC PROP
-00003570: 4552 5449 4553 2023 2323 0a0a 2020 2020  ERTIES ###..    
-00003580: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
-00003590: 6620 7461 6728 7365 6c66 2920 2d3e 205f  f tag(self) -> _
-000035a0: 7461 672e 5461 6720 7c20 4e6f 6e65 3a0a  tag.Tag | None:.
-000035b0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000035c0: 2020 2020 4765 7473 2063 6f6d 706f 6e65      Gets compone
-000035d0: 6e74 2074 6167 2e0a 2020 2020 2020 2020  nt tag..        
-000035e0: 2222 220a 2020 2020 2020 2020 6966 2073  """.        if s
-000035f0: 656c 662e 5f74 6167 2069 7320 6e6f 7420  elf._tag is not 
-00003600: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00003610: 2020 6173 7365 7274 2069 7369 6e73 7461    assert isinsta
-00003620: 6e63 6528 7365 6c66 2e5f 7461 672c 205f  nce(self._tag, _
-00003630: 7461 672e 5461 6729 2c20 7265 7072 2873  tag.Tag), repr(s
-00003640: 656c 662e 5f74 6167 290a 2020 2020 2020  elf._tag).      
-00003650: 2020 7265 7475 726e 2073 656c 662e 5f74    return self._t
-00003660: 6167 0a0a 0a63 6c61 7373 204c 6561 6628  ag...class Leaf(
-00003670: 436f 6d70 6f6e 656e 7429 3a0a 2020 2020  Component):.    
-00003680: 2222 220a 2020 2020 4c65 6166 2062 6173  """.    Leaf bas
-00003690: 6563 6c61 7373 2e0a 0a20 2020 204c 6561  eclass...    Lea
-000036a0: 7665 7320 696e 636c 7564 6520 6e6f 7465  ves include note
-000036b0: 732c 2072 6573 7473 2c20 6368 6f72 6473  s, rests, chords
-000036c0: 2061 6e64 2073 6b69 7073 2e0a 2020 2020   and skips..    
-000036d0: 2222 220a 0a20 2020 2023 2323 2043 4c41  """..    ### CLA
-000036e0: 5353 2056 4152 4941 424c 4553 2023 230a  SS VARIABLES ##.
-000036f0: 0a20 2020 205f 616c 6c6f 7761 626c 655f  .    _allowable_
-00003700: 7369 7465 7320 3d20 280a 2020 2020 2020  sites = (.      
-00003710: 2020 2261 6273 6f6c 7574 655f 6265 666f    "absolute_befo
-00003720: 7265 222c 0a20 2020 2020 2020 2022 6265  re",.        "be
-00003730: 666f 7265 222c 0a20 2020 2020 2020 2022  fore",.        "
-00003740: 6166 7465 7222 2c0a 2020 2020 2020 2020  after",.        
-00003750: 2261 6273 6f6c 7574 655f 6166 7465 7222  "absolute_after"
-00003760: 2c0a 2020 2020 290a 0a20 2020 205f 5f73  ,.    )..    __s
-00003770: 6c6f 7473 5f5f 203d 2028 0a20 2020 2020  lots__ = (.     
-00003780: 2020 2022 5f61 6674 6572 5f67 7261 6365     "_after_grace
-00003790: 5f63 6f6e 7461 696e 6572 222c 0a20 2020  _container",.   
-000037a0: 2020 2020 2022 5f62 6566 6f72 655f 6772       "_before_gr
-000037b0: 6163 655f 636f 6e74 6169 6e65 7222 2c0a  ace_container",.
-000037c0: 2020 2020 2020 2020 225f 6d75 6c74 6970          "_multip
-000037d0: 6c69 6572 222c 0a20 2020 2020 2020 2022  lier",.        "
-000037e0: 5f77 7269 7474 656e 5f64 7572 6174 696f  _written_duratio
-000037f0: 6e22 2c0a 2020 2020 290a 0a20 2020 2023  n",.    )..    #
-00003800: 2323 2049 4e49 5449 414c 495a 4552 2023  ## INITIALIZER #
-00003810: 2323 0a0a 2020 2020 6465 6620 5f5f 696e  ##..    def __in
-00003820: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
-00003830: 6c66 2c20 7772 6974 7465 6e5f 6475 7261  lf, written_dura
-00003840: 7469 6f6e 2c20 2a2c 206d 756c 7469 706c  tion, *, multipl
-00003850: 6965 723d 4e6f 6e65 2c20 7461 673a 205f  ier=None, tag: _
-00003860: 7461 672e 5461 6720 3d20 4e6f 6e65 0a20  tag.Tag = None. 
-00003870: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00003880: 2020 2020 2020 436f 6d70 6f6e 656e 742e        Component.
-00003890: 5f5f 696e 6974 5f5f 2873 656c 662c 2074  __init__(self, t
-000038a0: 6167 3d74 6167 290a 2020 2020 2020 2020  ag=tag).        
-000038b0: 7365 6c66 2e5f 6166 7465 725f 6772 6163  self._after_grac
-000038c0: 655f 636f 6e74 6169 6e65 7220 3d20 4e6f  e_container = No
-000038d0: 6e65 0a20 2020 2020 2020 2073 656c 662e  ne.        self.
-000038e0: 5f62 6566 6f72 655f 6772 6163 655f 636f  _before_grace_co
-000038f0: 6e74 6169 6e65 7220 3d20 4e6f 6e65 0a20  ntainer = None. 
-00003900: 2020 2020 2020 2073 656c 662e 6d75 6c74         self.mult
-00003910: 6970 6c69 6572 203d 206d 756c 7469 706c  iplier = multipl
-00003920: 6965 720a 2020 2020 2020 2020 7365 6c66  ier.        self
-00003930: 2e77 7269 7474 656e 5f64 7572 6174 696f  .written_duratio
-00003940: 6e20 3d20 7772 6974 7465 6e5f 6475 7261  n = written_dura
-00003950: 7469 6f6e 0a0a 2020 2020 2323 2320 5350  tion..    ### SP
-00003960: 4543 4941 4c20 4d45 5448 4f44 5320 2323  ECIAL METHODS ##
-00003970: 230a 0a20 2020 2064 6566 205f 5f63 6f70  #..    def __cop
-00003980: 795f 5f28 7365 6c66 2c20 2a61 7267 756d  y__(self, *argum
-00003990: 656e 7473 293a 0a20 2020 2020 2020 2022  ents):.        "
-000039a0: 2222 0a20 2020 2020 2020 2053 6861 6c6c  "".        Shall
-000039b0: 6f77 2063 6f70 6965 7320 6c65 6166 2e0a  ow copies leaf..
-000039c0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000039d0: 2020 2020 6c65 6166 203d 2043 6f6d 706f      leaf = Compo
-000039e0: 6e65 6e74 2e5f 5f63 6f70 795f 5f28 7365  nent.__copy__(se
-000039f0: 6c66 2c20 2a61 7267 756d 656e 7473 290a  lf, *arguments).
-00003a00: 2020 2020 2020 2020 6c65 6166 2e6d 756c          leaf.mul
-00003a10: 7469 706c 6965 7220 3d20 7365 6c66 2e6d  tiplier = self.m
-00003a20: 756c 7469 706c 6965 720a 2020 2020 2020  ultiplier.      
-00003a30: 2020 6265 666f 7265 5f67 7261 6365 5f63    before_grace_c
-00003a40: 6f6e 7461 696e 6572 203d 2073 656c 662e  ontainer = self.
-00003a50: 5f62 6566 6f72 655f 6772 6163 655f 636f  _before_grace_co
-00003a60: 6e74 6169 6e65 720a 2020 2020 2020 2020  ntainer.        
-00003a70: 6966 2062 6566 6f72 655f 6772 6163 655f  if before_grace_
-00003a80: 636f 6e74 6169 6e65 7220 6973 206e 6f74  container is not
-00003a90: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00003aa0: 2020 2067 7261 6365 5f63 6f6e 7461 696e     grace_contain
-00003ab0: 6572 203d 2062 6566 6f72 655f 6772 6163  er = before_grac
-00003ac0: 655f 636f 6e74 6169 6e65 722e 5f63 6f70  e_container._cop
-00003ad0: 795f 7769 7468 5f63 6869 6c64 7265 6e28  y_with_children(
-00003ae0: 290a 2020 2020 2020 2020 2020 2020 6772  ).            gr
-00003af0: 6163 655f 636f 6e74 6169 6e65 722e 5f61  ace_container._a
-00003b00: 7474 6163 6828 6c65 6166 290a 2020 2020  ttach(leaf).    
-00003b10: 2020 2020 6166 7465 725f 6772 6163 655f      after_grace_
-00003b20: 636f 6e74 6169 6e65 7220 3d20 7365 6c66  container = self
-00003b30: 2e5f 6166 7465 725f 6772 6163 655f 636f  ._after_grace_co
-00003b40: 6e74 6169 6e65 720a 2020 2020 2020 2020  ntainer.        
-00003b50: 6966 2061 6674 6572 5f67 7261 6365 5f63  if after_grace_c
-00003b60: 6f6e 7461 696e 6572 2069 7320 6e6f 7420  ontainer is not 
-00003b70: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00003b80: 2020 6772 6163 655f 636f 6e74 6169 6e65    grace_containe
-00003b90: 7220 3d20 6166 7465 725f 6772 6163 655f  r = after_grace_
-00003ba0: 636f 6e74 6169 6e65 722e 5f63 6f70 795f  container._copy_
-00003bb0: 7769 7468 5f63 6869 6c64 7265 6e28 290a  with_children().
-00003bc0: 2020 2020 2020 2020 2020 2020 6772 6163              grac
-00003bd0: 655f 636f 6e74 6169 6e65 722e 5f61 7474  e_container._att
-00003be0: 6163 6828 6c65 6166 290a 2020 2020 2020  ach(leaf).      
-00003bf0: 2020 7265 7475 726e 206c 6561 660a 0a20    return leaf.. 
-00003c00: 2020 2064 6566 205f 5f67 6574 6e65 7761     def __getnewa
-00003c10: 7267 735f 5f28 7365 6c66 293a 0a20 2020  rgs__(self):.   
-00003c20: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00003c30: 2047 6574 7320 6e65 7720 6172 6775 6d65   Gets new argume
-00003c40: 6e74 732e 0a0a 2020 2020 2020 2020 5265  nts...        Re
-00003c50: 7475 726e 7320 7475 706c 652e 0a20 2020  turns tuple..   
-00003c60: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00003c70: 2072 6574 7572 6e20 2873 656c 662e 7772   return (self.wr
-00003c80: 6974 7465 6e5f 6475 7261 7469 6f6e 2c29  itten_duration,)
-00003c90: 0a0a 2020 2020 6465 6620 5f5f 7265 7072  ..    def __repr
-00003ca0: 5f5f 2873 656c 6629 202d 3e20 7374 723a  __(self) -> str:
-00003cb0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00003cc0: 2020 2020 2047 6574 7320 7265 7072 2e0a       Gets repr..
-00003cd0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00003ce0: 2020 2020 7265 7475 726e 2066 227b 7479      return f"{ty
-00003cf0: 7065 2873 656c 6629 2e5f 5f6e 616d 655f  pe(self).__name_
-00003d00: 5f7d 287b 7365 6c66 2e5f 6765 745f 636f  _}({self._get_co
-00003d10: 6d70 6163 745f 7265 7072 6573 656e 7461  mpact_representa
-00003d20: 7469 6f6e 2829 2172 7d29 220a 0a20 2020  tion()!r})"..   
-00003d30: 2023 2323 2050 5249 5641 5445 204d 4554   ### PRIVATE MET
-00003d40: 484f 4453 2023 2323 0a0a 2020 2020 6465  HODS ###..    de
-00003d50: 6620 5f63 6f70 795f 6f76 6572 7269 6465  f _copy_override
-00003d60: 5f61 6e64 5f73 6574 5f66 726f 6d5f 6c65  _and_set_from_le
-00003d70: 6166 2873 656c 662c 206c 6561 6629 3a0a  af(self, leaf):.
-00003d80: 2020 2020 2020 2020 6966 2067 6574 6174          if getat
-00003d90: 7472 286c 6561 662c 2022 5f6f 7665 7272  tr(leaf, "_overr
-00003da0: 6964 6573 222c 204e 6f6e 6529 2069 7320  ides", None) is 
-00003db0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00003dc0: 2020 2020 2020 7365 6c66 2e5f 6f76 6572        self._over
-00003dd0: 7269 6465 7320 3d20 636f 7079 2e63 6f70  rides = copy.cop
-00003de0: 7928 5f6f 7665 7272 6964 6573 2e6f 7665  y(_overrides.ove
-00003df0: 7272 6964 6528 6c65 6166 2929 0a20 2020  rride(leaf)).   
-00003e00: 2020 2020 2069 6620 6765 7461 7474 7228       if getattr(
-00003e10: 6c65 6166 2c20 225f 6c69 6c79 706f 6e64  leaf, "_lilypond
-00003e20: 5f73 6574 7469 6e67 5f6e 616d 655f 6d61  _setting_name_ma
-00003e30: 6e61 6765 7222 2c20 4e6f 6e65 2920 6973  nager", None) is
-00003e40: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00003e50: 2020 2020 2020 2073 656c 662e 5f6c 696c         self._lil
-00003e60: 7970 6f6e 645f 7365 7474 696e 675f 6e61  ypond_setting_na
-00003e70: 6d65 5f6d 616e 6167 6572 203d 2063 6f70  me_manager = cop
-00003e80: 792e 636f 7079 285f 6f76 6572 7269 6465  y.copy(_override
-00003e90: 732e 7365 7474 696e 6728 6c65 6166 2929  s.setting(leaf))
-00003ea0: 0a20 2020 2020 2020 2066 6f72 2077 7261  .        for wra
-00003eb0: 7070 6572 2069 6e20 6c65 6166 2e5f 7772  pper in leaf._wr
-00003ec0: 6170 7065 7273 3a0a 2020 2020 2020 2020  appers:.        
-00003ed0: 2020 2020 7772 6170 7065 725f 203d 2063      wrapper_ = c
-00003ee0: 6f70 792e 636f 7079 2877 7261 7070 6572  opy.copy(wrapper
-00003ef0: 290a 2020 2020 2020 2020 2020 2020 7772  ).            wr
-00003f00: 6170 7065 725f 2e5f 636f 6d70 6f6e 656e  apper_._componen
-00003f10: 7420 3d20 7365 6c66 0a20 2020 2020 2020  t = self.       
-00003f20: 2020 2020 2077 7261 7070 6572 5f2e 5f62       wrapper_._b
-00003f30: 696e 645f 636f 6d70 6f6e 656e 7428 7365  ind_component(se
-00003f40: 6c66 290a 0a20 2020 2064 6566 205f 666f  lf)..    def _fo
-00003f50: 726d 6174 5f61 6674 6572 5f67 7261 6365  rmat_after_grace
-00003f60: 5f62 6f64 7928 7365 6c66 293a 0a20 2020  _body(self):.   
-00003f70: 2020 2020 2072 6573 756c 7420 3d20 5b5d       result = []
-00003f80: 0a20 2020 2020 2020 2063 6f6e 7461 696e  .        contain
-00003f90: 6572 203d 2073 656c 662e 5f61 6674 6572  er = self._after
-00003fa0: 5f67 7261 6365 5f63 6f6e 7461 696e 6572  _grace_container
-00003fb0: 0a20 2020 2020 2020 2069 6620 636f 6e74  .        if cont
-00003fc0: 6169 6e65 7220 6973 206e 6f74 204e 6f6e  ainer is not Non
-00003fd0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-00003fe0: 7472 696e 6720 3d20 636f 6e74 6169 6e65  tring = containe
-00003ff0: 722e 5f67 6574 5f6c 696c 7970 6f6e 645f  r._get_lilypond_
-00004000: 666f 726d 6174 2829 0a20 2020 2020 2020  format().       
-00004010: 2020 2020 2072 6573 756c 742e 6170 7065       result.appe
-00004020: 6e64 2873 7472 696e 6729 0a20 2020 2020  nd(string).     
-00004030: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-00004040: 0a0a 2020 2020 6465 6620 5f66 6f72 6d61  ..    def _forma
-00004050: 745f 6166 7465 725f 6772 6163 655f 636f  t_after_grace_co
-00004060: 6d6d 616e 6428 7365 6c66 293a 0a20 2020  mmand(self):.   
-00004070: 2020 2020 2072 6573 756c 7420 3d20 5b5d       result = []
-00004080: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00004090: 2e5f 6166 7465 725f 6772 6163 655f 636f  ._after_grace_co
-000040a0: 6e74 6169 6e65 7220 6973 206e 6f74 204e  ntainer is not N
-000040b0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000040c0: 2072 6573 756c 742e 6170 7065 6e64 2872   result.append(r
-000040d0: 225c 6166 7465 7247 7261 6365 2229 0a20  "\afterGrace"). 
-000040e0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-000040f0: 7375 6c74 0a0a 2020 2020 6465 6620 5f66  sult..    def _f
-00004100: 6f72 6d61 745f 6166 7465 725f 7369 7465  ormat_after_site
-00004110: 2873 656c 662c 2063 6f6e 7472 6962 7574  (self, contribut
-00004120: 696f 6e73 293a 0a20 2020 2020 2020 2072  ions):.        r
-00004130: 6573 756c 7420 3d20 5b5d 0a20 2020 2020  esult = [].     
-00004140: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
-00004150: 2863 6f6e 7472 6962 7574 696f 6e73 2e61  (contributions.a
-00004160: 6674 6572 2e73 7465 6d5f 7472 656d 6f6c  fter.stem_tremol
-00004170: 6f73 290a 2020 2020 2020 2020 7265 7375  os).        resu
-00004180: 6c74 2e65 7874 656e 6428 636f 6e74 7269  lt.extend(contri
-00004190: 6275 7469 6f6e 732e 6166 7465 722e 6172  butions.after.ar
-000041a0: 7469 6375 6c61 7469 6f6e 7329 0a20 2020  ticulations).   
-000041b0: 2020 2020 2072 6573 756c 742e 6578 7465       result.exte
-000041c0: 6e64 2863 6f6e 7472 6962 7574 696f 6e73  nd(contributions
-000041d0: 2e61 6674 6572 2e6d 6172 6b75 7029 0a20  .after.markup). 
-000041e0: 2020 2020 2020 2072 6573 756c 742e 6578         result.ex
-000041f0: 7465 6e64 2863 6f6e 7472 6962 7574 696f  tend(contributio
-00004200: 6e73 2e61 6674 6572 2e73 7061 6e6e 6572  ns.after.spanner
-00004210: 5f73 746f 7073 290a 2020 2020 2020 2020  _stops).        
-00004220: 7265 7375 6c74 2e65 7874 656e 6428 636f  result.extend(co
-00004230: 6e74 7269 6275 7469 6f6e 732e 6166 7465  ntributions.afte
-00004240: 722e 7374 6172 745f 6265 616d 290a 2020  r.start_beam).  
-00004250: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
-00004260: 656e 6428 636f 6e74 7269 6275 7469 6f6e  end(contribution
-00004270: 732e 6166 7465 722e 7374 6f70 5f62 6561  s.after.stop_bea
-00004280: 6d29 0a20 2020 2020 2020 2072 6573 756c  m).        resul
-00004290: 742e 6578 7465 6e64 2863 6f6e 7472 6962  t.extend(contrib
-000042a0: 7574 696f 6e73 2e61 6674 6572 2e73 7061  utions.after.spa
-000042b0: 6e6e 6572 5f73 7461 7274 7329 0a20 2020  nner_starts).   
-000042c0: 2020 2020 2023 204e 4f54 453a 204c 696c       # NOTE: Lil
-000042d0: 7950 6f6e 6420 6465 6d61 6e64 7320 5c73  yPond demands \s
-000042e0: 7461 7274 5472 696c 6c53 7061 6e20 6170  tartTrillSpan ap
-000042f0: 7065 6172 2061 6674 6572 2061 6c6d 6f73  pear after almos
-00004300: 7420 616c 6c0a 2020 2020 2020 2020 2320  t all.        # 
-00004310: 2020 2020 2020 6f74 6865 7220 636f 6e74        other cont
-00004320: 7269 6275 7469 6f6e 733b 2070 6974 6368  ributions; pitch
-00004330: 6564 2074 7269 6c6c 7320 6461 6e67 6572  ed trills danger
-00004340: 6f75 736c 790a 2020 2020 2020 2020 2320  ously.        # 
-00004350: 2020 2020 2020 7375 7070 7265 7373 206d        suppress m
-00004360: 6172 6b75 7020 616e 6420 7468 6520 7374  arkup and the st
-00004370: 6172 7473 206f 6620 6f74 6865 7220 7370  arts of other sp
-00004380: 616e 6e65 7273 2077 6865 6e0a 2020 2020  anners when.    
-00004390: 2020 2020 2320 2020 2020 2020 5c73 7461      #       \sta
-000043a0: 7274 5472 696c 6c53 7061 6e20 6170 7065  rtTrillSpan appe
-000043b0: 6172 7320 6c65 7869 6361 6c6c 7920 7072  ars lexically pr
-000043c0: 696f 7220 746f 2074 686f 7365 2063 6f6d  ior to those com
-000043d0: 6d61 6e64 733b 0a20 2020 2020 2020 2023  mands;.        #
-000043e0: 2020 2020 2020 2062 7574 205c 7374 6172         but \star
-000043f0: 7454 7269 6c6c 5370 616e 206d 7573 7420  tTrillSpan must 
-00004400: 6170 7065 6172 2062 6566 6f72 6520 6361  appear before ca
-00004410: 6c6c 7320 746f 205c 7365 742e 0a20 2020  lls to \set..   
-00004420: 2020 2020 2072 6573 756c 742e 6578 7465       result.exte
-00004430: 6e64 2863 6f6e 7472 6962 7574 696f 6e73  nd(contributions
-00004440: 2e61 6674 6572 2e74 7269 6c6c 5f73 7061  .after.trill_spa
-00004450: 6e6e 6572 5f73 7461 7274 7329 0a20 2020  nner_starts).   
-00004460: 2020 2020 2072 6573 756c 742e 6578 7465       result.exte
-00004470: 6e64 2863 6f6e 7472 6962 7574 696f 6e73  nd(contributions
-00004480: 2e61 6674 6572 2e63 6f6d 6d61 6e64 7329  .after.commands)
-00004490: 0a20 2020 2020 2020 2072 6573 756c 742e  .        result.
-000044a0: 6578 7465 6e64 2863 6f6e 7472 6962 7574  extend(contribut
-000044b0: 696f 6e73 2e61 6674 6572 2e6c 6561 6b29  ions.after.leak)
-000044c0: 0a20 2020 2020 2020 2072 6573 756c 742e  .        result.
-000044d0: 6578 7465 6e64 2863 6f6e 7472 6962 7574  extend(contribut
-000044e0: 696f 6e73 2e61 6674 6572 2e6c 6561 6b73  ions.after.leaks
-000044f0: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
-00004500: 2e65 7874 656e 6428 7365 6c66 2e5f 666f  .extend(self._fo
-00004510: 726d 6174 5f61 6674 6572 5f67 7261 6365  rmat_after_grace
-00004520: 5f62 6f64 7928 2929 0a20 2020 2020 2020  _body()).       
-00004530: 2072 6574 7572 6e20 7265 7375 6c74 0a0a   return result..
-00004540: 2020 2020 6465 6620 5f66 6f72 6d61 745f      def _format_
-00004550: 6265 666f 7265 5f73 6974 6528 7365 6c66  before_site(self
-00004560: 2c20 636f 6e74 7269 6275 7469 6f6e 7329  , contributions)
-00004570: 3a0a 2020 2020 2020 2020 7265 7375 6c74  :.        result
-00004580: 203d 205b 5d0a 2020 2020 2020 2020 7265   = [].        re
-00004590: 7375 6c74 2e65 7874 656e 6428 7365 6c66  sult.extend(self
-000045a0: 2e5f 666f 726d 6174 5f67 7261 6365 5f62  ._format_grace_b
-000045b0: 6f64 7928 2929 0a20 2020 2020 2020 2072  ody()).        r
-000045c0: 6573 756c 742e 6578 7465 6e64 2863 6f6e  esult.extend(con
-000045d0: 7472 6962 7574 696f 6e73 2e62 6566 6f72  tributions.befor
-000045e0: 652e 636f 6d6d 616e 6473 290a 2020 2020  e.commands).    
-000045f0: 2020 2020 7265 7375 6c74 2e65 7874 656e      result.exten
-00004600: 6428 636f 6e74 7269 6275 7469 6f6e 732e  d(contributions.
-00004610: 6772 6f62 5f72 6576 6572 7473 290a 2020  grob_reverts).  
-00004620: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
-00004630: 656e 6428 636f 6e74 7269 6275 7469 6f6e  end(contribution
-00004640: 732e 6772 6f62 5f6f 7665 7272 6964 6573  s.grob_overrides
-00004650: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
-00004660: 2e65 7874 656e 6428 636f 6e74 7269 6275  .extend(contribu
-00004670: 7469 6f6e 732e 636f 6e74 6578 745f 7365  tions.context_se
-00004680: 7474 696e 6773 290a 2020 2020 2020 2020  ttings).        
-00004690: 7265 7475 726e 2072 6573 756c 740a 0a20  return result.. 
-000046a0: 2020 2064 6566 205f 666f 726d 6174 5f63     def _format_c
-000046b0: 6c6f 7369 6e67 5f73 6974 6528 7365 6c66  losing_site(self
-000046c0: 2c20 636f 6e74 7269 6275 7469 6f6e 7329  , contributions)
-000046d0: 3a0a 2020 2020 2020 2020 7265 7375 6c74  :.        result
-000046e0: 203d 205b 5d0a 2020 2020 2020 2020 7265   = [].        re
-000046f0: 7375 6c74 2e65 7874 656e 6428 636f 6e74  sult.extend(cont
-00004700: 7269 6275 7469 6f6e 732e 636c 6f73 696e  ributions.closin
-00004710: 672e 636f 6d6d 616e 6473 290a 2020 2020  g.commands).    
-00004720: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
-00004730: 740a 0a20 2020 2064 6566 205f 666f 726d  t..    def _form
-00004740: 6174 5f63 6f6e 7465 6e74 735f 7369 7465  at_contents_site
-00004750: 2873 656c 662c 2063 6f6e 7472 6962 7574  (self, contribut
-00004760: 696f 6e73 293a 0a20 2020 2020 2020 2072  ions):.        r
-00004770: 6573 756c 7420 3d20 5b5d 0a20 2020 2020  esult = [].     
-00004780: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
-00004790: 2873 656c 662e 5f66 6f72 6d61 745f 6c65  (self._format_le
-000047a0: 6166 5f62 6f64 7928 636f 6e74 7269 6275  af_body(contribu
-000047b0: 7469 6f6e 7329 290a 2020 2020 2020 2020  tions)).        
-000047c0: 7265 7475 726e 2072 6573 756c 740a 0a20  return result.. 
-000047d0: 2020 2064 6566 205f 666f 726d 6174 5f67     def _format_g
-000047e0: 7261 6365 5f62 6f64 7928 7365 6c66 293a  race_body(self):
-000047f0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00004800: 3d20 5b5d 0a20 2020 2020 2020 2063 6f6e  = [].        con
-00004810: 7461 696e 6572 203d 2073 656c 662e 5f62  tainer = self._b
-00004820: 6566 6f72 655f 6772 6163 655f 636f 6e74  efore_grace_cont
-00004830: 6169 6e65 720a 2020 2020 2020 2020 6966  ainer.        if
-00004840: 2063 6f6e 7461 696e 6572 2069 7320 6e6f   container is no
-00004850: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00004860: 2020 2020 7265 7375 6c74 2e61 7070 656e      result.appen
-00004870: 6428 636f 6e74 6169 6e65 722e 5f67 6574  d(container._get
-00004880: 5f6c 696c 7970 6f6e 645f 666f 726d 6174  _lilypond_format
-00004890: 2829 290a 2020 2020 2020 2020 7265 7475  ()).        retu
-000048a0: 726e 2072 6573 756c 740a 0a20 2020 2064  rn result..    d
-000048b0: 6566 205f 666f 726d 6174 5f6c 6561 665f  ef _format_leaf_
-000048c0: 626f 6479 2873 656c 662c 2063 6f6e 7472  body(self, contr
-000048d0: 6962 7574 696f 6e73 293a 0a20 2020 2020  ibutions):.     
-000048e0: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-000048f0: 2e5f 666f 726d 6174 5f6c 6561 665f 6e75  ._format_leaf_nu
-00004900: 636c 6575 7328 290a 2020 2020 2020 2020  cleus().        
-00004910: 7265 7475 726e 2072 6573 756c 740a 0a20  return result.. 
-00004920: 2020 2064 6566 205f 666f 726d 6174 5f6c     def _format_l
-00004930: 6561 665f 6e75 636c 6575 7328 7365 6c66  eaf_nucleus(self
-00004940: 293a 0a20 2020 2020 2020 2073 7472 696e  ):.        strin
-00004950: 6773 203d 2073 656c 662e 5f67 6574 5f62  gs = self._get_b
-00004960: 6f64 7928 290a 2020 2020 2020 2020 6966  ody().        if
-00004970: 2073 656c 662e 7461 6720 6973 206e 6f74   self.tag is not
-00004980: 204e 6f6e 6520 616e 6420 7365 6c66 2e74   None and self.t
-00004990: 6167 2e73 7472 696e 673a 0a20 2020 2020  ag.string:.     
-000049a0: 2020 2020 2020 2073 7472 696e 6773 203d         strings =
-000049b0: 205f 7461 672e 646f 7562 6c65 5f74 6167   _tag.double_tag
-000049c0: 2873 7472 696e 6773 2c20 7365 6c66 2e74  (strings, self.t
-000049d0: 6167 290a 2020 2020 2020 2020 7265 7475  ag).        retu
-000049e0: 726e 2073 7472 696e 6773 0a0a 2020 2020  rn strings..    
-000049f0: 6465 6620 5f66 6f72 6d61 745f 6f70 656e  def _format_open
-00004a00: 696e 675f 7369 7465 2873 656c 662c 2063  ing_site(self, c
-00004a10: 6f6e 7472 6962 7574 696f 6e73 293a 0a20  ontributions):. 
-00004a20: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00004a30: 5b5d 0a20 2020 2020 2020 2072 6573 756c  [].        resul
-00004a40: 742e 6578 7465 6e64 2863 6f6e 7472 6962  t.extend(contrib
-00004a50: 7574 696f 6e73 2e6f 7065 6e69 6e67 2e63  utions.opening.c
-00004a60: 6f6d 6d61 6e64 7329 0a20 2020 2020 2020  ommands).       
-00004a70: 2072 6573 756c 742e 6578 7465 6e64 2863   result.extend(c
-00004a80: 6f6e 7472 6962 7574 696f 6e73 2e6f 7065  ontributions.ope
-00004a90: 6e69 6e67 2e70 6974 6368 6564 5f74 7269  ning.pitched_tri
-00004aa0: 6c6c 290a 2020 2020 2020 2020 2320 494d  ll).        # IM
-00004ab0: 504f 5254 414e 543a 204c 696c 7950 6f6e  PORTANT: LilyPon
-00004ac0: 6420 5c70 6974 6368 6564 5472 696c 6c20  d \pitchedTrill 
-00004ad0: 6d75 7374 2061 7070 6561 7220 696d 6d65  must appear imme
-00004ae0: 6469 6174 656c 7920 6265 666f 7265 206c  diately before l
-00004af0: 6561 6621 0a20 2020 2020 2020 2023 2049  eaf!.        # I
-00004b00: 4d50 4f52 5441 4e54 3a20 4c69 6c79 506f  MPORTANT: LilyPo
-00004b10: 6e64 205c 6166 7465 7247 7261 6365 206d  nd \afterGrace m
-00004b20: 7573 7420 6170 7065 6172 2069 6d6d 6564  ust appear immed
-00004b30: 6961 7465 6c79 2062 6566 6f72 6520 6c65  iately before le
-00004b40: 6166 210a 2020 2020 2020 2020 2320 544f  af!.        # TO
-00004b50: 444f 3a20 6669 6775 7265 206f 7574 205c  DO: figure out \
-00004b60: 7069 7463 6865 6454 7269 6c6c 2c20 5c61  pitchedTrill, \a
-00004b70: 6674 6572 4772 6163 6520 6f72 6465 7269  fterGrace orderi
-00004b80: 6e67 0a20 2020 2020 2020 2072 6573 756c  ng.        resul
-00004b90: 742e 6578 7465 6e64 2873 656c 662e 5f66  t.extend(self._f
-00004ba0: 6f72 6d61 745f 6166 7465 725f 6772 6163  ormat_after_grac
-00004bb0: 655f 636f 6d6d 616e 6428 2929 0a20 2020  e_command()).   
-00004bc0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-00004bd0: 6c74 0a0a 2020 2020 6465 6620 5f67 6574  lt..    def _get
-00004be0: 5f63 6f6d 7061 6374 5f72 6570 7265 7365  _compact_represe
-00004bf0: 6e74 6174 696f 6e28 7365 6c66 293a 0a20  ntation(self):. 
-00004c00: 2020 2020 2020 2072 6574 7572 6e20 6622         return f"
-00004c10: 287b 7365 6c66 2e5f 6765 745f 666f 726d  ({self._get_form
-00004c20: 6174 7465 645f 6475 7261 7469 6f6e 2829  atted_duration()
-00004c30: 7d29 220a 0a20 2020 2064 6566 205f 6765  })"..    def _ge
-00004c40: 745f 666f 726d 6174 7465 645f 6475 7261  t_formatted_dura
-00004c50: 7469 6f6e 2873 656c 6629 3a0a 2020 2020  tion(self):.    
-00004c60: 2020 2020 7374 7269 6e67 7320 3d20 5b5d      strings = []
-00004c70: 0a20 2020 2020 2020 2073 7472 696e 6773  .        strings
-00004c80: 2e61 7070 656e 6428 7365 6c66 2e77 7269  .append(self.wri
-00004c90: 7474 656e 5f64 7572 6174 696f 6e2e 6c69  tten_duration.li
-00004ca0: 6c79 706f 6e64 5f64 7572 6174 696f 6e5f  lypond_duration_
-00004cb0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-00004cc0: 6966 2073 656c 662e 6d75 6c74 6970 6c69  if self.multipli
-00004cd0: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0a  er is not None:.
-00004ce0: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-00004cf0: 6e67 732e 6170 7065 6e64 2873 7472 2873  ngs.append(str(s
-00004d00: 656c 662e 6d75 6c74 6970 6c69 6572 2929  elf.multiplier))
-00004d10: 0a20 2020 2020 2020 2069 6620 6861 7361  .        if hasa
-00004d20: 7474 7228 7365 6c66 2e5f 7061 7265 6e74  ttr(self._parent
-00004d30: 2c20 225f 6c65 6166 5f6d 756c 7469 706c  , "_leaf_multipl
-00004d40: 6965 7222 293a 0a20 2020 2020 2020 2020  ier"):.         
-00004d50: 2020 206d 756c 7469 706c 6965 7220 3d20     multiplier = 
-00004d60: 7365 6c66 2e5f 7061 7265 6e74 2e5f 6c65  self._parent._le
-00004d70: 6166 5f6d 756c 7469 706c 6965 7228 290a  af_multiplier().
-00004d80: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-00004d90: 756c 7469 706c 6965 7220 6973 206e 6f74  ultiplier is not
-00004da0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00004db0: 2020 2020 2020 2073 7472 696e 6773 2e61         strings.a
-00004dc0: 7070 656e 6428 7374 7228 6d75 6c74 6970  ppend(str(multip
-00004dd0: 6c69 6572 2929 0a20 2020 2020 2020 2072  lier)).        r
-00004de0: 6573 756c 7420 3d20 2220 2a20 222e 6a6f  esult = " * ".jo
-00004df0: 696e 2873 7472 696e 6773 290a 2020 2020  in(strings).    
-00004e00: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
-00004e10: 740a 0a20 2020 2064 6566 205f 6765 745f  t..    def _get_
-00004e20: 6d75 6c74 6970 6c69 6564 5f64 7572 6174  multiplied_durat
-00004e30: 696f 6e28 7365 6c66 293a 0a20 2020 2020  ion(self):.     
-00004e40: 2020 2069 6620 7365 6c66 2e77 7269 7474     if self.writt
-00004e50: 656e 5f64 7572 6174 696f 6e3a 0a20 2020  en_duration:.   
-00004e60: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00004e70: 2e6d 756c 7469 706c 6965 7220 6973 206e  .multiplier is n
-00004e80: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00004e90: 2020 2020 2020 2020 2064 7572 6174 696f           duratio
-00004ea0: 6e20 3d20 7365 6c66 2e6d 756c 7469 706c  n = self.multipl
-00004eb0: 6965 7220 2a20 7365 6c66 2e77 7269 7474  ier * self.writt
-00004ec0: 656e 5f64 7572 6174 696f 6e0a 2020 2020  en_duration.    
-00004ed0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00004ee0: 726e 205f 6475 7261 7469 6f6e 2e44 7572  rn _duration.Dur
-00004ef0: 6174 696f 6e28 6475 7261 7469 6f6e 290a  ation(duration).
-00004f00: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00004f10: 726e 205f 6475 7261 7469 6f6e 2e44 7572  rn _duration.Dur
-00004f20: 6174 696f 6e28 7365 6c66 2e77 7269 7474  ation(self.writt
-00004f30: 656e 5f64 7572 6174 696f 6e29 0a0a 2020  en_duration)..  
-00004f40: 2020 6465 6620 5f67 6574 5f70 7265 7072    def _get_prepr
-00004f50: 6f6c 6174 6564 5f64 7572 6174 696f 6e28  olated_duration(
-00004f60: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-00004f70: 6574 7572 6e20 7365 6c66 2e5f 6765 745f  eturn self._get_
-00004f80: 6d75 6c74 6970 6c69 6564 5f64 7572 6174  multiplied_durat
-00004f90: 696f 6e28 290a 0a20 2020 2064 6566 205f  ion()..    def _
-00004fa0: 6765 745f 7375 6274 7265 6528 7365 6c66  get_subtree(self
-00004fb0: 293a 0a20 2020 2020 2020 2072 6573 756c  ):.        resul
-00004fc0: 7420 3d20 5b5d 0a20 2020 2020 2020 2069  t = [].        i
-00004fd0: 6620 7365 6c66 2e5f 6265 666f 7265 5f67  f self._before_g
-00004fe0: 7261 6365 5f63 6f6e 7461 696e 6572 2069  race_container i
-00004ff0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00005000: 2020 2020 2020 2020 7265 7375 6c74 2e65          result.e
-00005010: 7874 656e 6428 7365 6c66 2e5f 6265 666f  xtend(self._befo
-00005020: 7265 5f67 7261 6365 5f63 6f6e 7461 696e  re_grace_contain
-00005030: 6572 2e5f 6765 745f 7375 6274 7265 6528  er._get_subtree(
-00005040: 2929 0a20 2020 2020 2020 2072 6573 756c  )).        resul
-00005050: 742e 6170 7065 6e64 2873 656c 6629 0a20  t.append(self). 
-00005060: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
-00005070: 6166 7465 725f 6772 6163 655f 636f 6e74  after_grace_cont
-00005080: 6169 6e65 7220 6973 206e 6f74 204e 6f6e  ainer is not Non
-00005090: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-000050a0: 6573 756c 742e 6578 7465 6e64 2873 656c  esult.extend(sel
-000050b0: 662e 5f61 6674 6572 5f67 7261 6365 5f63  f._after_grace_c
-000050c0: 6f6e 7461 696e 6572 2e5f 6765 745f 7375  ontainer._get_su
-000050d0: 6274 7265 6528 2929 0a20 2020 2020 2020  btree()).       
-000050e0: 2072 6574 7572 6e20 7265 7375 6c74 0a0a   return result..
-000050f0: 2020 2020 6465 6620 5f70 726f 6365 7373      def _process
-00005100: 5f63 6f6e 7472 6962 7574 696f 6e5f 7061  _contribution_pa
-00005110: 636b 6574 2873 656c 662c 2063 6f6e 7472  cket(self, contr
-00005120: 6962 7574 696f 6e5f 7061 636b 6574 293a  ibution_packet):
-00005130: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00005140: 3d20 2222 0a20 2020 2020 2020 2066 6f72  = "".        for
-00005150: 2063 6f6e 7472 6962 7574 6f72 2c20 636f   contributor, co
-00005160: 6e74 7269 6275 7469 6f6e 7320 696e 2063  ntributions in c
-00005170: 6f6e 7472 6962 7574 696f 6e5f 7061 636b  ontribution_pack
-00005180: 6574 3a0a 2020 2020 2020 2020 2020 2020  et:.            
-00005190: 6966 2063 6f6e 7472 6962 7574 696f 6e73  if contributions
-000051a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000051b0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-000051c0: 636f 6e74 7269 6275 746f 722c 2074 7570  contributor, tup
-000051d0: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
-000051e0: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
-000051f0: 7574 6f72 203d 205f 696e 6465 6e74 2e49  utor = _indent.I
-00005200: 4e44 454e 5420 2b20 636f 6e74 7269 6275  NDENT + contribu
-00005210: 746f 725b 305d 202b 2022 3a5c 6e22 0a20  tor[0] + ":\n". 
-00005220: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00005230: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00005240: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
-00005250: 7574 6f72 203d 205f 696e 6465 6e74 2e49  utor = _indent.I
-00005260: 4e44 454e 5420 2b20 636f 6e74 7269 6275  NDENT + contribu
-00005270: 746f 7220 2b20 223a 5c6e 220a 2020 2020  tor + ":\n".    
-00005280: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00005290: 6c74 202b 3d20 636f 6e74 7269 6275 746f  lt += contributo
-000052a0: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
-000052b0: 2020 666f 7220 636f 6e74 7269 6275 7469    for contributi
-000052c0: 6f6e 2069 6e20 636f 6e74 7269 6275 7469  on in contributi
-000052d0: 6f6e 733a 0a20 2020 2020 2020 2020 2020  ons:.           
-000052e0: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
-000052f0: 7574 696f 6e20 3d20 285f 696e 6465 6e74  ution = (_indent
-00005300: 2e49 4e44 454e 5420 2a20 3229 202b 2063  .INDENT * 2) + c
-00005310: 6f6e 7472 6962 7574 696f 6e20 2b20 225c  ontribution + "\
-00005320: 6e22 0a20 2020 2020 2020 2020 2020 2020  n".             
-00005330: 2020 2020 2020 2072 6573 756c 7420 2b3d         result +=
-00005340: 2063 6f6e 7472 6962 7574 696f 6e0a 2020   contribution.  
-00005350: 2020 2020 2020 7265 7475 726e 2072 6573        return res
-00005360: 756c 740a 0a20 2020 2064 6566 205f 7363  ult..    def _sc
-00005370: 616c 6528 7365 6c66 2c20 6d75 6c74 6970  ale(self, multip
-00005380: 6c69 6572 293a 0a20 2020 2020 2020 2073  lier):.        s
-00005390: 656c 662e 7772 6974 7465 6e5f 6475 7261  elf.written_dura
-000053a0: 7469 6f6e 202a 3d20 6d75 6c74 6970 6c69  tion *= multipli
-000053b0: 6572 0a0a 2020 2020 2323 2320 5055 424c  er..    ### PUBL
-000053c0: 4943 2050 524f 5045 5254 4945 5320 2323  IC PROPERTIES ##
-000053d0: 230a 0a20 2020 2040 7072 6f70 6572 7479  #..    @property
-000053e0: 0a20 2020 2064 6566 206d 756c 7469 706c  .    def multipl
-000053f0: 6965 7228 0a20 2020 2020 2020 2073 656c  ier(.        sel
-00005400: 662c 0a20 2020 2029 202d 3e20 5f64 7572  f,.    ) -> _dur
-00005410: 6174 696f 6e2e 4d75 6c74 6970 6c69 6572  ation.Multiplier
-00005420: 207c 205f 6475 7261 7469 6f6e 2e4e 6f6e   | _duration.Non
-00005430: 7265 6475 6365 6446 7261 6374 696f 6e20  reducedFraction 
-00005440: 7c20 4e6f 6e65 3a0a 2020 2020 2020 2020  | None:.        
-00005450: 2222 220a 2020 2020 2020 2020 4765 7473  """.        Gets
-00005460: 206d 756c 7469 706c 6965 722e 0a20 2020   multiplier..   
-00005470: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00005480: 2072 6574 7572 6e20 7365 6c66 2e5f 6d75   return self._mu
-00005490: 6c74 6970 6c69 6572 0a0a 2020 2020 406d  ltiplier..    @m
-000054a0: 756c 7469 706c 6965 722e 7365 7474 6572  ultiplier.setter
-000054b0: 0a20 2020 2064 6566 206d 756c 7469 706c  .    def multipl
-000054c0: 6965 7228 7365 6c66 2c20 6172 6775 6d65  ier(self, argume
-000054d0: 6e74 293a 0a20 2020 2020 2020 2069 6620  nt):.        if 
-000054e0: 6973 696e 7374 616e 6365 2861 7267 756d  isinstance(argum
-000054f0: 656e 742c 205f 6475 7261 7469 6f6e 2e4e  ent, _duration.N
-00005500: 6f6e 7265 6475 6365 6446 7261 6374 696f  onreducedFractio
-00005510: 6e20 7c20 7479 7065 284e 6f6e 6529 293a  n | type(None)):
-00005520: 0a20 2020 2020 2020 2020 2020 206d 756c  .            mul
-00005530: 7469 706c 6965 7220 3d20 6172 6775 6d65  tiplier = argume
-00005540: 6e74 0a20 2020 2020 2020 2065 6c73 653a  nt.        else:
-00005550: 0a20 2020 2020 2020 2020 2020 206d 756c  .            mul
-00005560: 7469 706c 6965 7220 3d20 5f64 7572 6174  tiplier = _durat
-00005570: 696f 6e2e 4d75 6c74 6970 6c69 6572 2861  ion.Multiplier(a
-00005580: 7267 756d 656e 7429 0a20 2020 2020 2020  rgument).       
-00005590: 2073 656c 662e 5f6d 756c 7469 706c 6965   self._multiplie
-000055a0: 7220 3d20 6d75 6c74 6970 6c69 6572 0a0a  r = multiplier..
-000055b0: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
-000055c0: 2020 6465 6620 7772 6974 7465 6e5f 6475    def written_du
-000055d0: 7261 7469 6f6e 2873 656c 6629 202d 3e20  ration(self) -> 
-000055e0: 5f64 7572 6174 696f 6e2e 4475 7261 7469  _duration.Durati
-000055f0: 6f6e 3a0a 2020 2020 2020 2020 2222 220a  on:.        """.
-00005600: 2020 2020 2020 2020 4765 7473 2077 7269          Gets wri
-00005610: 7474 656e 2064 7572 6174 696f 6e2e 0a20  tten duration.. 
-00005620: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00005630: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00005640: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
-00005650: 0a0a 2020 2020 4077 7269 7474 656e 5f64  ..    @written_d
-00005660: 7572 6174 696f 6e2e 7365 7474 6572 0a20  uration.setter. 
-00005670: 2020 2064 6566 2077 7269 7474 656e 5f64     def written_d
-00005680: 7572 6174 696f 6e28 7365 6c66 2c20 6172  uration(self, ar
-00005690: 6775 6d65 6e74 293a 0a20 2020 2020 2020  gument):.       
-000056a0: 2064 7572 6174 696f 6e20 3d20 5f64 7572   duration = _dur
-000056b0: 6174 696f 6e2e 4475 7261 7469 6f6e 2861  ation.Duration(a
-000056c0: 7267 756d 656e 7429 0a20 2020 2020 2020  rgument).       
-000056d0: 2069 6620 6e6f 7420 6475 7261 7469 6f6e   if not duration
-000056e0: 2e69 735f 6173 7369 676e 6162 6c65 3a0a  .is_assignable:.
-000056f0: 2020 2020 2020 2020 2020 2020 6d65 7373              mess
-00005700: 6167 6520 3d20 6622 6e6f 7420 6173 7369  age = f"not assi
-00005710: 676e 6162 6c65 2064 7572 6174 696f 6e3a  gnable duration:
-00005720: 207b 6475 7261 7469 6f6e 2172 7d2e 220a   {duration!r}.".
-00005730: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00005740: 6520 5f65 7863 6570 7469 6f6e 732e 4173  e _exceptions.As
-00005750: 7369 676e 6162 696c 6974 7945 7272 6f72  signabilityError
-00005760: 286d 6573 7361 6765 290a 2020 2020 2020  (message).      
-00005770: 2020 7365 6c66 2e5f 7772 6974 7465 6e5f    self._written_
-00005780: 6475 7261 7469 6f6e 203d 2064 7572 6174  duration = durat
-00005790: 696f 6e0a 0a0a 636c 6173 7320 436f 6e74  ion...class Cont
-000057a0: 6169 6e65 7228 436f 6d70 6f6e 656e 7429  ainer(Component)
-000057b0: 3a0a 2020 2020 7222 2222 0a20 2020 2043  :.    r""".    C
-000057c0: 6f6e 7461 696e 6572 2e0a 0a20 2020 202e  ontainer...    .
-000057d0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-000057e0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-000057f0: 496e 7469 616c 697a 6573 2066 726f 6d20  Intializes from 
-00005800: 7374 7269 6e67 3a0a 0a20 2020 2020 2020  string:..       
-00005810: 203e 3e3e 2063 6f6e 7461 696e 6572 203d   >>> container =
-00005820: 2061 626a 6164 2e43 6f6e 7461 696e 6572   abjad.Container
-00005830: 2822 6327 3420 6527 3420 6427 3420 6527  ("c'4 e'4 d'4 e'
-00005840: 3820 6627 3822 290a 2020 2020 2020 2020  8 f'8").        
-00005850: 3e3e 3e20 6162 6a61 642e 7368 6f77 2863  >>> abjad.show(c
-00005860: 6f6e 7461 696e 6572 2920 2320 646f 6374  ontainer) # doct
-00005870: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-00005880: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
-00005890: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-000058a0: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
-000058b0: 696c 7970 6f6e 6428 636f 6e74 6169 6e65  ilypond(containe
-000058c0: 7229 0a20 2020 2020 2020 2020 2020 203e  r).            >
-000058d0: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
-000058e0: 0a20 2020 2020 2020 2020 2020 207b 0a20  .            {. 
-000058f0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00005900: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00005910: 2020 2065 2734 0a20 2020 2020 2020 2020     e'4.         
-00005920: 2020 2020 2020 2064 2734 0a20 2020 2020         d'4.     
-00005930: 2020 2020 2020 2020 2020 2065 2738 0a20             e'8. 
-00005940: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00005950: 2738 0a20 2020 2020 2020 2020 2020 207d  '8.            }
-00005960: 0a0a 2020 2020 2e2e 2020 636f 6e74 6169  ..    ..  contai
-00005970: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-00005980: 2020 2020 2020 2049 6e74 6961 6c69 7a65         Intialize
-00005990: 7320 6672 6f6d 2063 6f6d 706f 6e65 6e74  s from component
-000059a0: 733a 0a0a 2020 2020 2020 2020 3e3e 3e20  s:..        >>> 
-000059b0: 6e6f 7465 7320 3d20 5b0a 2020 2020 2020  notes = [.      
-000059c0: 2020 2e2e 2e20 2020 2020 6162 6a61 642e    ...     abjad.
-000059d0: 4e6f 7465 2822 6327 3422 292c 0a20 2020  Note("c'4"),.   
-000059e0: 2020 2020 202e 2e2e 2020 2020 2061 626a       ...     abj
-000059f0: 6164 2e4e 6f74 6528 2265 2734 2229 2c0a  ad.Note("e'4"),.
-00005a00: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-00005a10: 6162 6a61 642e 4e6f 7465 2822 6427 3422  abjad.Note("d'4"
-00005a20: 292c 0a20 2020 2020 2020 202e 2e2e 2020  ),.        ...  
-00005a30: 2020 2061 626a 6164 2e4e 6f74 6528 2265     abjad.Note("e
-00005a40: 2738 2229 2c0a 2020 2020 2020 2020 2e2e  '8"),.        ..
-00005a50: 2e20 2020 2020 6162 6a61 642e 4e6f 7465  .     abjad.Note
-00005a60: 2822 6627 3822 292c 0a20 2020 2020 2020  ("f'8"),.       
-00005a70: 202e 2e2e 2020 2020 205d 0a20 2020 2020   ...     ].     
-00005a80: 2020 203e 3e3e 2063 6f6e 7461 696e 6572     >>> container
-00005a90: 203d 2061 626a 6164 2e43 6f6e 7461 696e   = abjad.Contain
-00005aa0: 6572 286e 6f74 6573 290a 2020 2020 2020  er(notes).      
-00005ab0: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
-00005ac0: 2863 6f6e 7461 696e 6572 2920 2320 646f  (container) # do
-00005ad0: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-00005ae0: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-00005af0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-00005b00: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-00005b10: 2e6c 696c 7970 6f6e 6428 636f 6e74 6169  .lilypond(contai
-00005b20: 6e65 7229 0a20 2020 2020 2020 2020 2020  ner).           
-00005b30: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-00005b40: 6729 0a20 2020 2020 2020 2020 2020 207b  g).            {
-00005b50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005b60: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
-00005b70: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
-00005b80: 2020 2020 2020 2020 2064 2734 0a20 2020           d'4.   
-00005b90: 2020 2020 2020 2020 2020 2020 2065 2738               e'8
-00005ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005bb0: 2066 2738 0a20 2020 2020 2020 2020 2020   f'8.           
-00005bc0: 207d 0a0a 2020 2020 2e2e 2020 636f 6e74   }..    ..  cont
-00005bd0: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-00005be0: 0a20 2020 2020 2020 2049 6e74 6961 6c69  .        Intiali
-00005bf0: 7a65 7320 6672 6f6d 206d 6978 6564 2063  zes from mixed c
-00005c00: 6f6d 706f 6e65 6e74 7320 616e 6420 6c69  omponents and li
-00005c10: 7374 733a 0a0a 2020 2020 2020 2020 3e3e  sts:..        >>
-00005c20: 3e20 6974 656d 7320 3d20 5b0a 2020 2020  > items = [.    
-00005c30: 2020 2020 2e2e 2e20 2020 2020 6162 6a61      ...     abja
-00005c40: 642e 4e6f 7465 2822 6327 3422 292c 0a20  d.Note("c'4"),. 
-00005c50: 2020 2020 2020 202e 2e2e 2020 2020 205b         ...     [
-00005c60: 6162 6a61 642e 4e6f 7465 2822 6527 3422  abjad.Note("e'4"
-00005c70: 295d 2c0a 2020 2020 2020 2020 2e2e 2e20  )],.        ... 
-00005c80: 2020 2020 5b61 626a 6164 2e4e 6f74 6528      [abjad.Note(
-00005c90: 2264 2734 2229 5d2c 0a20 2020 2020 2020  "d'4")],.       
-00005ca0: 202e 2e2e 2020 2020 2061 626a 6164 2e4e   ...     abjad.N
-00005cb0: 6f74 6528 2265 2738 2229 2c0a 2020 2020  ote("e'8"),.    
-00005cc0: 2020 2020 2e2e 2e20 2020 2020 6162 6a61      ...     abja
-00005cd0: 642e 4e6f 7465 2822 6627 3822 292c 0a20  d.Note("f'8"),. 
-00005ce0: 2020 2020 2020 202e 2e2e 2020 2020 205d         ...     ]
-00005cf0: 0a20 2020 2020 2020 203e 3e3e 2063 6f6e  .        >>> con
-00005d00: 7461 696e 6572 203d 2061 626a 6164 2e43  tainer = abjad.C
-00005d10: 6f6e 7461 696e 6572 2869 7465 6d73 290a  ontainer(items).
-00005d20: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-00005d30: 642e 7368 6f77 2863 6f6e 7461 696e 6572  d.show(container
-00005d40: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-00005d50: 4950 0a0a 2020 2020 2020 2020 2e2e 2020  IP..        ..  
-00005d60: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
-00005d70: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-00005d80: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-00005d90: 636f 6e74 6169 6e65 7229 0a20 2020 2020  container).     
-00005da0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
-00005db0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
-00005dc0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00005dd0: 2020 2020 2020 2063 2734 0a20 2020 2020         c'4.     
-00005de0: 2020 2020 2020 2020 2020 2065 2734 0a20             e'4. 
-00005df0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00005e00: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00005e10: 2020 2065 2738 0a20 2020 2020 2020 2020     e'8.         
-00005e20: 2020 2020 2020 2066 2738 0a20 2020 2020         f'8.     
-00005e30: 2020 2020 2020 207d 0a0a 2020 2020 2e2e         }..    ..
-00005e40: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
-00005e50: 616d 706c 650a 0a20 2020 2020 2020 2043  ample..        C
-00005e60: 6f6e 7461 696e 6572 7320 6172 6520 6974  ontainers are it
-00005e70: 6572 6162 6c65 733a 0a0a 2020 2020 2020  erables:..      
-00005e80: 2020 3e3e 3e20 696d 706f 7274 2063 6f6c    >>> import col
-00005e90: 6c65 6374 696f 6e73 0a20 2020 2020 2020  lections.       
-00005ea0: 203e 3e3e 2063 6f6e 7461 696e 6572 203d   >>> container =
-00005eb0: 2061 626a 6164 2e43 6f6e 7461 696e 6572   abjad.Container
-00005ec0: 2822 6327 3420 6527 3420 6427 3420 6527  ("c'4 e'4 d'4 e'
-00005ed0: 3820 6627 3822 290a 2020 2020 2020 2020  8 f'8").        
-00005ee0: 3e3e 3e20 6973 696e 7374 616e 6365 2863  >>> isinstance(c
-00005ef0: 6f6e 7461 696e 6572 2c20 636f 6c6c 6563  ontainer, collec
-00005f00: 7469 6f6e 732e 6162 632e 4974 6572 6162  tions.abc.Iterab
-00005f10: 6c65 290a 2020 2020 2020 2020 5472 7565  le).        True
-00005f20: 0a0a 2020 2020 2e2e 2020 636f 6e74 6169  ..    ..  contai
-00005f30: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-00005f40: 2020 2020 2020 2043 6f6e 7461 696e 6572         Container
-00005f50: 7320 6172 6520 6e6f 7420 7365 7175 656e  s are not sequen
-00005f60: 6365 7320 6265 6361 7573 6520 636f 6e74  ces because cont
-00005f70: 6169 6e65 7273 2064 6f20 6e6f 7420 696d  ainers do not im
-00005f80: 706c 656d 656e 740a 2020 2020 2020 2020  plement.        
-00005f90: 7265 7665 7273 653a 0a0a 2020 2020 2020  reverse:..      
-00005fa0: 2020 3e3e 3e20 636f 6e74 6169 6e65 7220    >>> container 
-00005fb0: 3d20 6162 6a61 642e 436f 6e74 6169 6e65  = abjad.Containe
-00005fc0: 7228 2263 2734 2065 2734 2064 2734 2065  r("c'4 e'4 d'4 e
-00005fd0: 2738 2066 2738 2229 0a20 2020 2020 2020  '8 f'8").       
-00005fe0: 203e 3e3e 2069 7369 6e73 7461 6e63 6528   >>> isinstance(
-00005ff0: 636f 6e74 6169 6e65 722c 2063 6f6c 6c65  container, colle
-00006000: 6374 696f 6e73 2e61 6263 2e53 6571 7565  ctions.abc.Seque
-00006010: 6e63 6529 0a20 2020 2020 2020 2046 616c  nce).        Fal
-00006020: 7365 0a0a 2020 2020 2e2e 2020 636f 6e74  se..    ..  cont
-00006030: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-00006040: 0a20 2020 2020 2020 2046 6f72 6d61 7474  .        Formatt
-00006050: 696e 6720 706f 7369 7469 6f6e 7320 636f  ing positions co
-00006060: 6e74 7269 6275 7469 6f6e 7320 7374 7269  ntributions stri
-00006070: 6374 6c79 206f 6e65 2d70 6572 2d6c 696e  ctly one-per-lin
-00006080: 653a 0a0a 2020 2020 2020 2020 3e3e 3e20  e:..        >>> 
-00006090: 7374 6166 6620 3d20 6162 6a61 642e 5374  staff = abjad.St
-000060a0: 6166 6628 2263 2734 2064 2720 6527 2066  aff("c'4 d' e' f
-000060b0: 2722 290a 2020 2020 2020 2020 3e3e 3e20  '").        >>> 
-000060c0: 6162 6a61 642e 6174 7461 6368 2861 626a  abjad.attach(abj
-000060d0: 6164 2e41 7274 6963 756c 6174 696f 6e28  ad.Articulation(
-000060e0: 275e 2729 2c20 7374 6166 665b 305d 290a  '^'), staff[0]).
-000060f0: 2020 2020 2020 2020 3e3e 3e20 6d61 726b          >>> mark
-00006100: 7570 203d 2061 626a 6164 2e4d 6172 6b75  up = abjad.Marku
-00006110: 7028 7227 5c6d 6172 6b75 7020 416c 6c65  p(r'\markup Alle
-00006120: 6772 6f27 290a 2020 2020 2020 2020 3e3e  gro').        >>
-00006130: 3e20 6162 6a61 642e 6174 7461 6368 286d  > abjad.attach(m
-00006140: 6172 6b75 702c 2073 7461 6666 5b30 5d2c  arkup, staff[0],
-00006150: 2064 6972 6563 7469 6f6e 3d61 626a 6164   direction=abjad
-00006160: 2e55 5029 0a20 2020 2020 2020 203e 3e3e  .UP).        >>>
-00006170: 2061 626a 6164 2e61 7474 6163 6828 6162   abjad.attach(ab
-00006180: 6a61 642e 5374 656d 5472 656d 6f6c 6f28  jad.StemTremolo(
-00006190: 292c 2073 7461 6666 5b30 5d29 0a20 2020  ), staff[0]).   
-000061a0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-000061b0: 686f 7728 7374 6166 6629 2023 2064 6f63  how(staff) # doc
-000061c0: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
-000061d0: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
-000061e0: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
-000061f0: 2873 7461 6666 290a 2020 2020 2020 2020  (staff).        
-00006200: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-00006210: 290a 2020 2020 2020 2020 5c6e 6577 2053  ).        \new S
-00006220: 7461 6666 0a20 2020 2020 2020 207b 0a20  taff.        {. 
-00006230: 2020 2020 2020 2020 2020 2063 2734 0a20             c'4. 
-00006240: 2020 2020 2020 2020 2020 203a 3136 0a20             :16. 
-00006250: 2020 2020 2020 2020 2020 202d 205c 6d61             - \ma
-00006260: 7263 6174 6f0a 2020 2020 2020 2020 2020  rcato.          
-00006270: 2020 5e20 5c6d 6172 6b75 7020 416c 6c65    ^ \markup Alle
-00006280: 6772 6f0a 2020 2020 2020 2020 2020 2020  gro.            
-00006290: 6427 340a 2020 2020 2020 2020 2020 2020  d'4.            
-000062a0: 6527 340a 2020 2020 2020 2020 2020 2020  e'4.            
-000062b0: 6627 340a 2020 2020 2020 2020 7d0a 0a20  f'4.        }.. 
-000062c0: 2020 2022 2222 0a0a 2020 2020 2323 2320     """..    ### 
-000062d0: 434c 4153 5320 5641 5249 4142 4c45 5320  CLASS VARIABLES 
-000062e0: 2323 230a 0a20 2020 205f 616c 6c6f 7761  ###..    _allowa
-000062f0: 626c 655f 7369 7465 7320 3d20 280a 2020  ble_sites = (.  
-00006300: 2020 2020 2020 2261 6273 6f6c 7574 655f        "absolute_
-00006310: 6265 666f 7265 222c 0a20 2020 2020 2020  before",.       
-00006320: 2022 6265 666f 7265 222c 0a20 2020 2020   "before",.     
-00006330: 2020 2022 6f70 656e 696e 6722 2c0a 2020     "opening",.  
-00006340: 2020 2020 2020 2263 6c6f 7369 6e67 222c        "closing",
-00006350: 0a20 2020 2020 2020 2022 6166 7465 7222  .        "after"
-00006360: 2c0a 2020 2020 290a 0a20 2020 205f 5f64  ,.    )..    __d
-00006370: 6f63 756d 656e 7461 7469 6f6e 5f73 6563  ocumentation_sec
-00006380: 7469 6f6e 5f5f 203d 2022 436f 6e74 6169  tion__ = "Contai
-00006390: 6e65 7273 220a 0a20 2020 205f 5f73 6c6f  ners"..    __slo
-000063a0: 7473 5f5f 203d 2028 0a20 2020 2020 2020  ts__ = (.       
-000063b0: 2022 5f69 6465 6e74 6966 6965 7222 2c0a   "_identifier",.
-000063c0: 2020 2020 2020 2020 225f 636f 6d70 6f6e          "_compon
-000063d0: 656e 7473 222c 0a20 2020 2020 2020 2022  ents",.        "
-000063e0: 5f66 6f72 6d61 7474 6572 222c 0a20 2020  _formatter",.   
-000063f0: 2020 2020 2022 5f6e 616d 6564 5f63 6869       "_named_chi
-00006400: 6c64 7265 6e22 2c0a 2020 2020 2020 2020  ldren",.        
-00006410: 225f 6e61 6d65 222c 0a20 2020 2020 2020  "_name",.       
-00006420: 2022 5f69 735f 7369 6d75 6c74 616e 656f   "_is_simultaneo
-00006430: 7573 222c 0a20 2020 2029 0a0a 2020 2020  us",.    )..    
-00006440: 2323 2320 494e 4954 4941 4c49 5a45 5220  ### INITIALIZER 
-00006450: 2323 230a 0a20 2020 2023 2054 4f44 4f3a  ###..    # TODO:
-00006460: 206d 616b 6520 616c 6c20 6b65 7977 6f72   make all keywor
-00006470: 6473 2028 6166 7465 7220 636f 6d70 6f6e  ds (after compon
-00006480: 656e 7473 2920 6d61 6e64 6174 6f72 7920  ents) mandatory 
-00006490: 6b65 7977 6f72 6473 0a20 2020 2064 6566  keywords.    def
-000064a0: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-000064b0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-000064c0: 2063 6f6d 706f 6e65 6e74 733d 4e6f 6e65   components=None
-000064d0: 2c0a 2020 2020 2020 2020 6964 656e 7469  ,.        identi
-000064e0: 6669 6572 3a20 7374 7220 3d20 4e6f 6e65  fier: str = None
-000064f0: 2c0a 2020 2020 2020 2020 7369 6d75 6c74  ,.        simult
-00006500: 616e 656f 7573 3a20 626f 6f6c 203d 2046  aneous: bool = F
-00006510: 616c 7365 2c0a 2020 2020 2020 2020 6e61  alse,.        na
-00006520: 6d65 3a20 7374 7220 3d20 4e6f 6e65 2c0a  me: str = None,.
-00006530: 2020 2020 2020 2020 7461 673a 205f 7461          tag: _ta
-00006540: 672e 5461 6720 3d20 4e6f 6e65 2c0a 2020  g.Tag = None,.  
-00006550: 2020 2020 2020 2a2c 0a20 2020 2020 2020        *,.       
-00006560: 206c 616e 6775 6167 653a 2073 7472 203d   language: str =
-00006570: 2022 656e 676c 6973 6822 2c0a 2020 2020   "english",.    
-00006580: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00006590: 2020 2063 6f6d 706f 6e65 6e74 7320 3d20     components = 
-000065a0: 636f 6d70 6f6e 656e 7473 206f 7220 5b5d  components or []
-000065b0: 0a20 2020 2020 2020 2043 6f6d 706f 6e65  .        Compone
-000065c0: 6e74 2e5f 5f69 6e69 745f 5f28 7365 6c66  nt.__init__(self
-000065d0: 2c20 7461 673d 7461 6729 0a20 2020 2020  , tag=tag).     
-000065e0: 2020 2073 656c 662e 5f6e 616d 6564 5f63     self._named_c
-000065f0: 6869 6c64 7265 6e3a 2064 6963 7420 3d20  hildren: dict = 
-00006600: 7b7d 0a20 2020 2020 2020 2073 656c 662e  {}.        self.
-00006610: 5f69 735f 7369 6d75 6c74 616e 656f 7573  _is_simultaneous
-00006620: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00006630: 2320 7365 7473 206e 616d 6520 7465 6d70  # sets name temp
-00006640: 6f72 6172 696c 7920 666f 7220 5f66 696e  orarily for _fin
-00006650: 645f 636f 7272 6563 745f 6566 6665 6374  d_correct_effect
-00006660: 6976 655f 636f 6e74 6578 743a 0a20 2020  ive_context:.   
-00006670: 2020 2020 2073 656c 662e 5f6e 616d 6520       self._name 
-00006680: 3d20 6e61 6d65 0a20 2020 2020 2020 2073  = name.        s
-00006690: 656c 662e 5f69 6e69 7469 616c 697a 655f  elf._initialize_
-000066a0: 636f 6d70 6f6e 656e 7473 2863 6f6d 706f  components(compo
-000066b0: 6e65 6e74 732c 206c 616e 6775 6167 653d  nents, language=
-000066c0: 6c61 6e67 7561 6765 290a 2020 2020 2020  language).      
-000066d0: 2020 7365 6c66 2e69 6465 6e74 6966 6965    self.identifie
-000066e0: 7220 3d20 6964 656e 7469 6669 6572 0a20  r = identifier. 
-000066f0: 2020 2020 2020 2073 656c 662e 7369 6d75         self.simu
-00006700: 6c74 616e 656f 7573 203d 2062 6f6f 6c28  ltaneous = bool(
-00006710: 7369 6d75 6c74 616e 656f 7573 290a 2020  simultaneous).  
-00006720: 2020 2020 2020 2320 7365 7473 206e 616d        # sets nam
-00006730: 6520 7065 726d 616e 656e 746c 7920 6166  e permanently af
-00006740: 7465 7220 5f69 6e69 7461 6c69 7a65 5f63  ter _initalize_c
-00006750: 6f6d 706f 6e65 6e74 733a 0a20 2020 2020  omponents:.     
-00006760: 2020 2073 656c 662e 6e61 6d65 203d 206e     self.name = n
-00006770: 616d 650a 0a20 2020 2023 2323 2053 5045  ame..    ### SPE
-00006780: 4349 414c 204d 4554 484f 4453 2023 2323  CIAL METHODS ###
-00006790: 0a0a 2020 2020 6465 6620 5f5f 636f 6e74  ..    def __cont
-000067a0: 6169 6e73 5f5f 2873 656c 662c 2061 7267  ains__(self, arg
-000067b0: 756d 656e 7429 202d 3e20 626f 6f6c 3a0a  ument) -> bool:.
-000067c0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000067d0: 2020 2020 4973 2074 7275 6520 7768 656e      Is true when
-000067e0: 2060 6061 7267 756d 656e 7460 6020 6170   ``argument`` ap
-000067f0: 7065 6172 7320 696e 2063 6f6e 7461 696e  pears in contain
-00006800: 6572 2e0a 2020 2020 2020 2020 2222 220a  er..        """.
-00006810: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00006820: 7461 6e63 6528 6172 6775 6d65 6e74 2c20  tance(argument, 
-00006830: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
-00006840: 2020 7265 7475 726e 2061 7267 756d 656e    return argumen
-00006850: 7420 696e 2073 656c 662e 5f6e 616d 6564  t in self._named
-00006860: 5f63 6869 6c64 7265 6e0a 2020 2020 2020  _children.      
-00006870: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00006880: 2020 2020 666f 7220 636f 6d70 6f6e 656e      for componen
-00006890: 7420 696e 2073 656c 662e 636f 6d70 6f6e  t in self.compon
-000068a0: 656e 7473 3a0a 2020 2020 2020 2020 2020  ents:.          
-000068b0: 2020 2020 2020 6966 2063 6f6d 706f 6e65        if compone
-000068c0: 6e74 2069 7320 6172 6775 6d65 6e74 3a0a  nt is argument:.
-000068d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000068e0: 2020 2020 7265 7475 726e 2054 7275 650a      return True.
-000068f0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00006900: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00006910: 2020 7265 7475 726e 2046 616c 7365 0a0a    return False..
-00006920: 2020 2020 6465 6620 5f5f 6465 6c69 7465      def __delite
-00006930: 6d5f 5f28 7365 6c66 2c20 6929 3a0a 2020  m__(self, i):.  
-00006940: 2020 2020 2020 7222 2222 0a20 2020 2020        r""".     
-00006950: 2020 2044 656c 6574 6573 2063 6f6d 706f     Deletes compo
-00006960: 6e65 6e74 7328 7329 2061 7420 696e 6465  nents(s) at inde
-00006970: 7820 6060 6960 6020 696e 2063 6f6e 7461  x ``i`` in conta
-00006980: 696e 6572 2e0a 0a20 2020 2020 2020 202e  iner...        .
-00006990: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-000069a0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-000069b0: 2020 2020 4465 6c65 7465 7320 6669 7273      Deletes firs
-000069c0: 7420 7475 706c 6574 2069 6e20 766f 6963  t tuplet in voic
-000069d0: 653a 0a0a 2020 2020 2020 2020 2020 2020  e:..            
-000069e0: 3e3e 3e20 766f 6963 6520 3d20 6162 6a61  >>> voice = abja
-000069f0: 642e 566f 6963 6528 290a 2020 2020 2020  d.Voice().      
-00006a00: 2020 2020 2020 3e3e 3e20 766f 6963 652e        >>> voice.
-00006a10: 6170 7065 6e64 2861 626a 6164 2e54 7570  append(abjad.Tup
-00006a20: 6c65 7428 2834 2c20 3629 2c20 2263 2734  let((4, 6), "c'4
-00006a30: 2064 2734 2065 2734 2229 290a 2020 2020   d'4 e'4")).    
-00006a40: 2020 2020 2020 2020 3e3e 3e20 766f 6963          >>> voic
-00006a50: 652e 6170 7065 6e64 2861 626a 6164 2e54  e.append(abjad.T
-00006a60: 7570 6c65 7428 2832 2c20 3329 2c20 2265  uplet((2, 3), "e
-00006a70: 2734 2064 2734 2063 2734 2229 290a 2020  '4 d'4 c'4")).  
-00006a80: 2020 2020 2020 2020 2020 3e3e 3e20 6c65            >>> le
-00006a90: 6176 6573 203d 2061 626a 6164 2e73 656c  aves = abjad.sel
-00006aa0: 6563 742e 6c65 6176 6573 2876 6f69 6365  ect.leaves(voice
-00006ab0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00006ac0: 3e20 6162 6a61 642e 736c 7572 286c 6561  > abjad.slur(lea
-00006ad0: 7665 7329 0a20 2020 2020 2020 2020 2020  ves).           
-00006ae0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-00006af0: 766f 6963 6529 2023 2064 6f63 7465 7374  voice) # doctest
-00006b00: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-00006b10: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
-00006b20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006b30: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-00006b40: 6a61 642e 6c69 6c79 706f 6e64 2876 6f69  jad.lilypond(voi
-00006b50: 6365 290a 2020 2020 2020 2020 2020 2020  ce).            
-00006b60: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
-00006b70: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-00006b80: 2020 2020 2020 5c6e 6577 2056 6f69 6365        \new Voice
-00006b90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006ba0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00006bb0: 2020 2020 2020 205c 7469 6d65 7320 342f         \times 4/
-00006bc0: 360a 2020 2020 2020 2020 2020 2020 2020  6.              
-00006bd0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00006be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006bf0: 6327 340a 2020 2020 2020 2020 2020 2020  c'4.            
-00006c00: 2020 2020 2020 2020 2020 2020 280a 2020              (.  
-00006c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006c20: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-00006c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006c40: 2020 6527 340a 2020 2020 2020 2020 2020    e'4.          
-00006c50: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00006c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006c70: 5c74 696d 6573 2032 2f33 0a20 2020 2020  \times 2/3.     
-00006c80: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-00006c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006ca0: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
-00006cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006cc0: 2020 2020 2064 2734 0a20 2020 2020 2020       d'4.       
-00006cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ce0: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
-00006cf0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-00006d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006d10: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00006d20: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
-00006d30: 2020 2020 3e3e 3e20 7475 706c 6574 5f31      >>> tuplet_1
-00006d40: 203d 2076 6f69 6365 5b30 5d0a 2020 2020   = voice[0].    
-00006d50: 2020 2020 2020 2020 3e3e 3e20 6465 6c28          >>> del(
-00006d60: 766f 6963 655b 305d 290a 2020 2020 2020  voice[0]).      
-00006d70: 2020 2020 2020 3e3e 3e20 7374 6172 745f        >>> start_
-00006d80: 736c 7572 203d 2061 626a 6164 2e53 7461  slur = abjad.Sta
-00006d90: 7274 536c 7572 2829 0a20 2020 2020 2020  rtSlur().       
-00006da0: 2020 2020 203e 3e3e 206c 6561 6620 3d20       >>> leaf = 
-00006db0: 6162 6a61 642e 7365 6c65 6374 2e6c 6561  abjad.select.lea
-00006dc0: 6628 766f 6963 652c 2030 290a 2020 2020  f(voice, 0).    
-00006dd0: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-00006de0: 642e 6174 7461 6368 2873 7461 7274 5f73  d.attach(start_s
-00006df0: 6c75 722c 206c 6561 6629 0a0a 2020 2020  lur, leaf)..    
-00006e00: 2020 2020 2020 2020 4669 7273 7420 7475          First tu
-00006e10: 706c 6574 206e 6f20 6c6f 6e67 6572 2061  plet no longer a
-00006e20: 7070 6561 7273 2069 6e20 766f 6963 653a  ppears in voice:
-00006e30: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006e40: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
-00006e50: 2876 6f69 6365 2920 2320 646f 6374 6573  (voice) # doctes
-00006e60: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-00006e70: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-00006e80: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006e90: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-00006ea0: 626a 6164 2e6c 696c 7970 6f6e 6428 766f  bjad.lilypond(vo
-00006eb0: 6963 6529 0a20 2020 2020 2020 2020 2020  ice).           
-00006ec0: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-00006ed0: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-00006ee0: 2020 2020 2020 205c 6e65 7720 566f 6963         \new Voic
-00006ef0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00006f00: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-00006f10: 2020 2020 2020 2020 5c74 696d 6573 2032          \times 2
-00006f20: 2f33 0a20 2020 2020 2020 2020 2020 2020  /3.             
-00006f30: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-00006f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f50: 2065 2734 0a20 2020 2020 2020 2020 2020   e'4.           
-00006f60: 2020 2020 2020 2020 2020 2020 2028 0a20               (. 
-00006f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f80: 2020 2020 2020 2064 2734 0a20 2020 2020         d'4.     
-00006f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006fa0: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
-00006fb0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00006fc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006fd0: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
-00006fe0: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
-00006ff0: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-00007000: 7766 2e77 656c 6c66 6f72 6d65 6428 766f  wf.wellformed(vo
-00007010: 6963 6529 0a20 2020 2020 2020 2020 2020  ice).           
-00007020: 2054 7275 650a 0a20 2020 2020 2020 2020   True..         
-00007030: 2020 2046 6972 7374 2074 7570 6c65 7420     First tuplet 
-00007040: 6d75 7374 2068 6176 6520 7374 6172 7420  must have start 
-00007050: 736c 7572 2072 656d 6f76 6564 3a0a 0a20  slur removed:.. 
-00007060: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
-00007070: 626a 6164 2e64 6574 6163 6828 6162 6a61  bjad.detach(abja
-00007080: 642e 5374 6172 7453 6c75 722c 2074 7570  d.StartSlur, tup
-00007090: 6c65 745f 315b 305d 290a 2020 2020 2020  let_1[0]).      
-000070a0: 2020 2020 2020 2853 7461 7274 536c 7572        (StartSlur
-000070b0: 2829 2c29 0a0a 2020 2020 2020 2020 2020  (),)..          
-000070c0: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
-000070d0: 2874 7570 6c65 745f 3129 2023 2064 6f63  (tuplet_1) # doc
-000070e0: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
-000070f0: 2020 2020 2020 2020 202e 2e20 2064 6f63           ..  doc
-00007100: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
-00007110: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
-00007120: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
-00007130: 2874 7570 6c65 745f 3129 0a20 2020 2020  (tuplet_1).     
-00007140: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
-00007150: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
-00007160: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
-00007170: 6d65 7320 342f 360a 2020 2020 2020 2020  mes 4/6.        
-00007180: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-00007190: 2020 2020 2020 2020 2020 2020 2020 6327                c'
-000071a0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-000071b0: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-000071c0: 2020 2020 2020 2020 2020 2020 2020 6527                e'
-000071d0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-000071e0: 2020 7d0a 0a20 2020 2020 2020 2020 2020    }..           
-000071f0: 203e 3e3e 2061 626a 6164 2e77 662e 7765   >>> abjad.wf.we
-00007200: 6c6c 666f 726d 6564 2874 7570 6c65 745f  llformed(tuplet_
-00007210: 3129 0a20 2020 2020 2020 2020 2020 2054  1).            T
-00007220: 7275 650a 0a20 2020 2020 2020 2052 6574  rue..        Ret
-00007230: 7572 6e73 206e 6f6e 652e 0a20 2020 2020  urns none..     
-00007240: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
-00007250: 6573 756c 7420 3d20 7365 6c66 5b69 5d0a  esult = self[i].
-00007260: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00007270: 7461 6e63 6528 7265 7375 6c74 2c20 436f  tance(result, Co
-00007280: 6d70 6f6e 656e 7429 3a0a 2020 2020 2020  mponent):.      
-00007290: 2020 2020 2020 7265 7375 6c74 2e5f 7365        result._se
-000072a0: 745f 7061 7265 6e74 284e 6f6e 6529 0a20  t_parent(None). 
-000072b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000072c0: 6e0a 2020 2020 2020 2020 666f 7220 636f  n.        for co
-000072d0: 6d70 6f6e 656e 7420 696e 2072 6573 756c  mponent in resul
-000072e0: 743a 0a20 2020 2020 2020 2020 2020 2063  t:.            c
-000072f0: 6f6d 706f 6e65 6e74 2e5f 7365 745f 7061  omponent._set_pa
-00007300: 7265 6e74 284e 6f6e 6529 0a0a 2020 2020  rent(None)..    
-00007310: 4074 7970 696e 672e 6f76 6572 6c6f 6164  @typing.overload
-00007320: 0a20 2020 2064 6566 205f 5f67 6574 6974  .    def __getit
-00007330: 656d 5f5f 2873 656c 662c 2061 7267 756d  em__(self, argum
-00007340: 656e 743a 2074 7970 696e 672e 5375 7070  ent: typing.Supp
-00007350: 6f72 7473 496e 6465 7820 7c20 7374 7229  ortsIndex | str)
-00007360: 202d 3e20 436f 6d70 6f6e 656e 743a 0a20   -> Component:. 
-00007370: 2020 2020 2020 202e 2e2e 0a0a 2020 2020         .....    
-00007380: 4074 7970 696e 672e 6f76 6572 6c6f 6164  @typing.overload
-00007390: 0a20 2020 2064 6566 205f 5f67 6574 6974  .    def __getit
-000073a0: 656d 5f5f 2873 656c 662c 2061 7267 756d  em__(self, argum
-000073b0: 656e 743a 2073 6c69 6365 2920 2d3e 206c  ent: slice) -> l
-000073c0: 6973 745b 436f 6d70 6f6e 656e 745d 3a0a  ist[Component]:.
-000073d0: 2020 2020 2020 2020 2e2e 2e0a 0a20 2020          .....   
-000073e0: 2064 6566 205f 5f67 6574 6974 656d 5f5f   def __getitem__
-000073f0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-00007400: 6172 6775 6d65 6e74 3a20 7479 7069 6e67  argument: typing
-00007410: 2e53 7570 706f 7274 7349 6e64 6578 207c  .SupportsIndex |
-00007420: 2073 7472 207c 2073 6c69 6365 0a20 2020   str | slice.   
-00007430: 2029 202d 3e20 436f 6d70 6f6e 656e 7420   ) -> Component 
-00007440: 7c20 6c69 7374 5b43 6f6d 706f 6e65 6e74  | list[Component
-00007450: 5d3a 0a20 2020 2020 2020 2022 2222 0a20  ]:.        """. 
-00007460: 2020 2020 2020 2047 6574 7320 746f 702d         Gets top-
-00007470: 6c65 7665 6c20 6974 656d 206f 7220 736c  level item or sl
-00007480: 6963 6520 6964 656e 7469 6669 6564 2062  ice identified b
-00007490: 7920 6060 6172 6775 6d65 6e74 6060 2e0a  y ``argument``..
-000074a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000074b0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-000074c0: 6528 6172 6775 6d65 6e74 2c20 696e 7429  e(argument, int)
-000074d0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-000074e0: 7475 726e 2073 656c 662e 636f 6d70 6f6e  turn self.compon
-000074f0: 656e 7473 2e5f 5f67 6574 6974 656d 5f5f  ents.__getitem__
-00007500: 2861 7267 756d 656e 7429 0a20 2020 2020  (argument).     
-00007510: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-00007520: 6365 2861 7267 756d 656e 742c 2073 6c69  ce(argument, sli
-00007530: 6365 293a 0a20 2020 2020 2020 2020 2020  ce):.           
-00007540: 2072 6573 756c 7420 3d20 7365 6c66 2e63   result = self.c
-00007550: 6f6d 706f 6e65 6e74 732e 5f5f 6765 7469  omponents.__geti
-00007560: 7465 6d5f 5f28 6172 6775 6d65 6e74 290a  tem__(argument).
-00007570: 2020 2020 2020 2020 2020 2020 6173 7365              asse
-00007580: 7274 2069 7369 6e73 7461 6e63 6528 7265  rt isinstance(re
-00007590: 7375 6c74 2c20 7475 706c 6529 2c20 7265  sult, tuple), re
-000075a0: 7072 2872 6573 756c 7429 0a20 2020 2020  pr(result).     
-000075b0: 2020 2020 2020 2072 6574 7572 6e20 6c69         return li
-000075c0: 7374 2872 6573 756c 7429 0a20 2020 2020  st(result).     
-000075d0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-000075e0: 6365 2861 7267 756d 656e 742c 2073 7472  ce(argument, str
-000075f0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-00007600: 6620 6172 6775 6d65 6e74 206e 6f74 2069  f argument not i
-00007610: 6e20 7365 6c66 2e5f 6e61 6d65 645f 6368  n self._named_ch
-00007620: 696c 6472 656e 3a0a 2020 2020 2020 2020  ildren:.        
-00007630: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00007640: 6c75 6545 7272 6f72 2866 2263 616e 206e  lueError(f"can n
-00007650: 6f74 2066 696e 6420 636f 6d70 6f6e 656e  ot find componen
-00007660: 7420 6e61 6d65 6420 7b61 7267 756d 656e  t named {argumen
-00007670: 7421 727d 2e22 290a 2020 2020 2020 2020  t!r}.").        
-00007680: 2020 2020 656c 6966 2031 203c 206c 656e      elif 1 < len
-00007690: 2873 656c 662e 5f6e 616d 6564 5f63 6869  (self._named_chi
-000076a0: 6c64 7265 6e2e 5f5f 6765 7469 7465 6d5f  ldren.__getitem_
-000076b0: 5f28 6172 6775 6d65 6e74 2929 3a0a 2020  _(argument)):.  
-000076c0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-000076d0: 6973 6520 5661 6c75 6545 7272 6f72 2866  ise ValueError(f
-000076e0: 226d 756c 7469 706c 6520 636f 6d70 6f6e  "multiple compon
-000076f0: 656e 7473 206e 616d 6564 207b 6172 6775  ents named {argu
-00007700: 6d65 6e74 2172 7d2e 2229 0a20 2020 2020  ment!r}.").     
-00007710: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00007720: 6c66 2e5f 6e61 6d65 645f 6368 696c 6472  lf._named_childr
-00007730: 656e 2e5f 5f67 6574 6974 656d 5f5f 2861  en.__getitem__(a
-00007740: 7267 756d 656e 7429 5b30 5d0a 2020 2020  rgument)[0].    
-00007750: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-00007760: 7272 6f72 2866 2263 616e 206e 6f74 2067  rror(f"can not g
-00007770: 6574 2063 6f6e 7461 696e 6572 2061 7420  et container at 
-00007780: 7b61 7267 756d 656e 7421 727d 2e22 290a  {argument!r}.").
-00007790: 0a20 2020 2064 6566 205f 5f67 6574 6e65  .    def __getne
-000077a0: 7761 7267 735f 5f28 7365 6c66 2920 2d3e  wargs__(self) ->
-000077b0: 2074 7570 6c65 3a0a 2020 2020 2020 2020   tuple:.        
-000077c0: 2222 220a 2020 2020 2020 2020 4765 7473  """.        Gets
-000077d0: 206e 6577 2063 6f6e 7461 696e 6572 2061   new container a
-000077e0: 7267 756d 656e 7473 2e0a 2020 2020 2020  rguments..      
-000077f0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
-00007800: 7475 726e 205b 5d2c 2073 656c 662e 6964  turn [], self.id
-00007810: 656e 7469 6669 6572 2c20 7365 6c66 2e73  entifier, self.s
-00007820: 696d 756c 7461 6e65 6f75 732c 2073 656c  imultaneous, sel
-00007830: 662e 6e61 6d65 2c20 7365 6c66 2e74 6167  f.name, self.tag
-00007840: 0a0a 2020 2020 6465 6620 5f5f 6974 6572  ..    def __iter
-00007850: 5f5f 2873 656c 6629 3a0a 2020 2020 2020  __(self):.      
-00007860: 2020 2222 220a 2020 2020 2020 2020 4974    """.        It
-00007870: 6572 6174 6573 2063 6f6e 7461 696e 6572  erates container
-00007880: 2e0a 0a20 2020 2020 2020 202e 2e20 2063  ...        ..  c
-00007890: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
-000078a0: 6c65 0a0a 2020 2020 2020 2020 2020 2020  le..            
-000078b0: 4162 6a61 6420 636f 6e74 6169 6e65 7273  Abjad containers
-000078c0: 2061 7265 2069 7465 7261 626c 6573 3a0a   are iterables:.
-000078d0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-000078e0: 2069 6d70 6f72 7420 636f 6c6c 6563 7469   import collecti
-000078f0: 6f6e 730a 2020 2020 2020 2020 2020 2020  ons.            
-00007900: 3e3e 3e20 636f 6e74 6169 6e65 7220 3d20  >>> container = 
-00007910: 6162 6a61 642e 436f 6e74 6169 6e65 7228  abjad.Container(
-00007920: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00007930: 3e20 6973 696e 7374 616e 6365 2863 6f6e  > isinstance(con
-00007940: 7461 696e 6572 2c20 636f 6c6c 6563 7469  tainer, collecti
-00007950: 6f6e 732e 6162 632e 4974 6572 6162 6c65  ons.abc.Iterable
-00007960: 290a 2020 2020 2020 2020 2020 2020 5472  ).            Tr
-00007970: 7565 0a0a 2020 2020 2020 2020 2e2e 2020  ue..        ..  
-00007980: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-00007990: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
-000079a0: 2041 626a 6164 2063 6f6e 7461 696e 6572   Abjad container
-000079b0: 7320 6172 6520 6e6f 7420 7365 7175 656e  s are not sequen
-000079c0: 6365 733a 0a0a 2020 2020 2020 2020 2020  ces:..          
-000079d0: 2020 3e3e 3e20 696d 706f 7274 2063 6f6c    >>> import col
-000079e0: 6c65 6374 696f 6e73 0a20 2020 2020 2020  lections.       
-000079f0: 2020 2020 203e 3e3e 2063 6f6e 7461 696e       >>> contain
-00007a00: 6572 203d 2061 626a 6164 2e43 6f6e 7461  er = abjad.Conta
-00007a10: 696e 6572 2829 0a20 2020 2020 2020 2020  iner().         
-00007a20: 2020 203e 3e3e 2069 7369 6e73 7461 6e63     >>> isinstanc
-00007a30: 6528 636f 6e74 6169 6e65 722c 2063 6f6c  e(container, col
-00007a40: 6c65 6374 696f 6e73 2e61 6263 2e53 6571  lections.abc.Seq
-00007a50: 7565 6e63 6529 0a20 2020 2020 2020 2020  uence).         
-00007a60: 2020 2046 616c 7365 0a0a 2020 2020 2020     False..      
-00007a70: 2020 5969 656c 6473 2063 6f6e 7461 696e    Yields contain
-00007a80: 6572 2065 6c65 6d65 6e74 732e 0a0a 2020  er elements...  
-00007a90: 2020 2020 2020 5265 7475 726e 7320 6765        Returns ge
-00007aa0: 6e65 7261 746f 722e 0a20 2020 2020 2020  nerator..       
-00007ab0: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
-00007ac0: 7572 6e20 6974 6572 2873 656c 662e 636f  urn iter(self.co
-00007ad0: 6d70 6f6e 656e 7473 290a 0a20 2020 2064  mponents)..    d
-00007ae0: 6566 205f 5f6c 656e 5f5f 2873 656c 6629  ef __len__(self)
-00007af0: 202d 3e20 696e 743a 0a20 2020 2020 2020   -> int:.       
-00007b00: 2022 2222 0a20 2020 2020 2020 2047 6574   """.        Get
-00007b10: 7320 6e75 6d62 6572 206f 6620 636f 6d70  s number of comp
-00007b20: 6f6e 656e 7473 2069 6e20 636f 6e74 6169  onents in contai
-00007b30: 6e65 722e 0a20 2020 2020 2020 2022 2222  ner..        """
-00007b40: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00007b50: 6c65 6e28 7365 6c66 2e63 6f6d 706f 6e65  len(self.compone
-00007b60: 6e74 7329 0a0a 2020 2020 6465 6620 5f5f  nts)..    def __
-00007b70: 7265 7072 5f5f 2873 656c 6629 202d 3e20  repr__(self) -> 
-00007b80: 7374 723a 0a20 2020 2020 2020 2022 2222  str:.        """
-00007b90: 0a20 2020 2020 2020 2047 6574 7320 7265  .        Gets re
-00007ba0: 7072 2e0a 2020 2020 2020 2020 2222 220a  pr..        """.
-00007bb0: 2020 2020 2020 2020 7374 7269 6e67 203d          string =
-00007bc0: 2073 656c 662e 5f67 6574 5f63 6f6e 7465   self._get_conte
-00007bd0: 6e74 735f 7375 6d6d 6172 7928 290a 2020  nts_summary().  
-00007be0: 2020 2020 2020 6966 2073 7472 696e 673a        if string:
-00007bf0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00007c00: 7572 6e20 6622 7b74 7970 6528 7365 6c66  urn f"{type(self
-00007c10: 292e 5f5f 6e61 6d65 5f5f 7d28 7b73 7472  ).__name__}({str
-00007c20: 696e 6721 727d 2922 0a20 2020 2020 2020  ing!r})".       
-00007c30: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00007c40: 2020 2072 6574 7572 6e20 6622 7b74 7970     return f"{typ
-00007c50: 6528 7365 6c66 292e 5f5f 6e61 6d65 5f5f  e(self).__name__
-00007c60: 7d28 2922 0a0a 2020 2020 6465 6620 5f5f  }()"..    def __
-00007c70: 7365 7469 7465 6d5f 5f28 7365 6c66 2c20  setitem__(self, 
-00007c80: 692c 2061 7267 756d 656e 7429 202d 3e20  i, argument) -> 
-00007c90: 4e6f 6e65 3a0a 2020 2020 2020 2020 2222  None:.        ""
-00007ca0: 220a 2020 2020 2020 2020 5365 7473 2063  ".        Sets c
-00007cb0: 6f6e 7461 696e 6572 2060 6069 6060 2065  ontainer ``i`` e
-00007cc0: 7175 616c 2074 6f20 6060 6172 6775 6d65  qual to ``argume
-00007cd0: 6e74 6060 2e0a 2020 2020 2020 2020 2222  nt``..        ""
-00007ce0: 220a 2020 2020 2020 2020 6966 2069 7369  ".        if isi
-00007cf0: 6e73 7461 6e63 6528 6172 6775 6d65 6e74  nstance(argument
-00007d00: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
-00007d10: 2020 2020 6172 6775 6d65 6e74 203d 2073      argument = s
-00007d20: 656c 662e 5f70 6172 7365 5f73 7472 696e  elf._parse_strin
-00007d30: 6728 6172 6775 6d65 6e74 290a 2020 2020  g(argument).    
-00007d40: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00007d50: 7461 6e63 6528 692c 2069 6e74 293a 0a20  tance(i, int):. 
-00007d60: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00007d70: 7373 6572 7420 6c65 6e28 6172 6775 6d65  ssert len(argume
-00007d80: 6e74 2920 3d3d 2031 2c20 7265 7072 2861  nt) == 1, repr(a
-00007d90: 7267 756d 656e 7429 0a20 2020 2020 2020  rgument).       
-00007da0: 2020 2020 2020 2020 2061 7267 756d 656e           argumen
-00007db0: 7420 3d20 6172 6775 6d65 6e74 5b30 5d0a  t = argument[0].
-00007dc0: 2020 2020 2020 2020 7772 6170 7065 7273          wrappers
-00007dd0: 203d 205b 5d0a 2020 2020 2020 2020 666f   = [].        fo
-00007de0: 7220 636f 6d70 6f6e 656e 7420 696e 2073  r component in s
-00007df0: 656c 662e 5f67 6574 5f63 6f6d 706f 6e65  elf._get_compone
-00007e00: 6e74 7328 6172 6775 6d65 6e74 293a 0a20  nts(argument):. 
-00007e10: 2020 2020 2020 2020 2020 2077 7261 7070             wrapp
-00007e20: 6572 735f 203d 2063 6f6d 706f 6e65 6e74  ers_ = component
-00007e30: 2e5f 6765 745f 696e 6469 6361 746f 7273  ._get_indicators
-00007e40: 2875 6e77 7261 703d 4661 6c73 6529 0a20  (unwrap=False). 
-00007e50: 2020 2020 2020 2020 2020 2077 7261 7070             wrapp
-00007e60: 6572 732e 6578 7465 6e64 2877 7261 7070  ers.extend(wrapp
-00007e70: 6572 735f 290a 2020 2020 2020 2020 6966  ers_).        if
-00007e80: 2069 7369 6e73 7461 6e63 6528 692c 2069   isinstance(i, i
-00007e90: 6e74 293a 0a20 2020 2020 2020 2020 2020  nt):.           
-00007ea0: 2061 7267 756d 656e 7420 3d20 5b61 7267   argument = [arg
-00007eb0: 756d 656e 745d 0a20 2020 2020 2020 2020  ument].         
-00007ec0: 2020 2069 6620 6920 3c20 303a 0a20 2020     if i < 0:.   
-00007ed0: 2020 2020 2020 2020 2020 2020 2069 203d               i =
-00007ee0: 206c 656e 2873 656c 6629 202b 2069 0a20   len(self) + i. 
-00007ef0: 2020 2020 2020 2020 2020 2069 203d 2073             i = s
-00007f00: 6c69 6365 2869 2c20 6920 2b20 3129 0a20  lice(i, i + 1). 
-00007f10: 2020 2020 2020 206e 6577 5f61 7267 756d         new_argum
-00007f20: 656e 7420 3d20 5b5d 0a20 2020 2020 2020  ent = [].       
-00007f30: 2066 6f72 2069 7465 6d20 696e 2061 7267   for item in arg
-00007f40: 756d 656e 743a 0a20 2020 2020 2020 2020  ument:.         
-00007f50: 2020 2069 6620 6861 7361 7474 7228 6974     if hasattr(it
-00007f60: 656d 2c20 225f 6974 656d 7322 293a 0a20  em, "_items"):. 
-00007f70: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00007f80: 6577 5f61 7267 756d 656e 742e 6578 7465  ew_argument.exte
-00007f90: 6e64 2869 7465 6d29 0a20 2020 2020 2020  nd(item).       
-00007fa0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00007fb0: 2020 2020 2020 2020 2020 206e 6577 5f61             new_a
-00007fc0: 7267 756d 656e 742e 6170 7065 6e64 2869  rgument.append(i
-00007fd0: 7465 6d29 0a20 2020 2020 2020 2061 7267  tem).        arg
-00007fe0: 756d 656e 7420 3d20 6e65 775f 6172 6775  ument = new_argu
-00007ff0: 6d65 6e74 0a20 2020 2020 2020 2061 7373  ment.        ass
-00008000: 6572 7420 616c 6c28 6973 696e 7374 616e  ert all(isinstan
-00008010: 6365 285f 2c20 436f 6d70 6f6e 656e 7429  ce(_, Component)
-00008020: 2066 6f72 205f 2069 6e20 6172 6775 6d65   for _ in argume
-00008030: 6e74 292c 2072 6570 7228 6172 6775 6d65  nt), repr(argume
-00008040: 6e74 290a 2020 2020 2020 2020 6966 2061  nt).        if a
-00008050: 6e79 2868 6173 6174 7472 285f 2c20 225f  ny(hasattr(_, "_
-00008060: 6d61 696e 5f6c 6561 6622 2920 666f 7220  main_leaf") for 
-00008070: 5f20 696e 2061 7267 756d 656e 7429 3a0a  _ in argument):.
-00008080: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00008090: 6520 4578 6365 7074 696f 6e28 226d 7573  e Exception("mus
-000080a0: 7420 6174 7461 6368 2067 7261 6365 2063  t attach grace c
-000080b0: 6f6e 7461 696e 6572 2074 6f20 6e6f 7465  ontainer to note
-000080c0: 206f 7220 6368 6f72 642e 2229 0a20 2020   or chord.").   
-000080d0: 2020 2020 2069 6620 7365 6c66 2e5f 6368       if self._ch
-000080e0: 6563 6b5f 666f 725f 6379 636c 6573 2861  eck_for_cycles(a
-000080f0: 7267 756d 656e 7429 3a0a 2020 2020 2020  rgument):.      
-00008100: 2020 2020 2020 7261 6973 6520 5f65 7863        raise _exc
-00008110: 6570 7469 6f6e 732e 5061 7265 6e74 6167  eptions.Parentag
-00008120: 6545 7272 6f72 2822 6174 7465 6d70 7465  eError("attempte
-00008130: 6420 746f 2069 6e64 7563 6520 6379 636c  d to induce cycl
-00008140: 6573 2e22 290a 2020 2020 2020 2020 6966  es.").        if
-00008150: 2028 0a20 2020 2020 2020 2020 2020 2069   (.            i
-00008160: 2e73 7461 7274 203d 3d20 692e 7374 6f70  .start == i.stop
-00008170: 0a20 2020 2020 2020 2020 2020 2061 6e64  .            and
-00008180: 2069 2e73 7461 7274 2069 7320 6e6f 7420   i.start is not 
-00008190: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-000081a0: 2061 6e64 2069 2e73 746f 7020 6973 206e   and i.stop is n
-000081b0: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
-000081c0: 2020 2020 616e 6420 692e 7374 6172 7420      and i.start 
-000081d0: 3c3d 202d 6c65 6e28 7365 6c66 290a 2020  <= -len(self).  
-000081e0: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
-000081f0: 2020 2020 2073 7461 7274 2c20 7374 6f70       start, stop
-00008200: 203d 2030 2c20 300a 2020 2020 2020 2020   = 0, 0.        
-00008210: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00008220: 2020 7374 6172 742c 2073 746f 702c 2073    start, stop, s
-00008230: 7472 6964 6520 3d20 692e 696e 6469 6365  tride = i.indice
-00008240: 7328 6c65 6e28 7365 6c66 2929 0a20 2020  s(len(self)).   
-00008250: 2020 2020 2064 656c 2073 656c 665b 7374       del self[st
-00008260: 6172 743a 7374 6f70 5d0a 2020 2020 2020  art:stop].      
-00008270: 2020 7365 6c66 2e5f 636f 6d70 6f6e 656e    self._componen
-00008280: 7473 2e5f 5f73 6574 6974 656d 5f5f 2873  ts.__setitem__(s
-00008290: 6c69 6365 2873 7461 7274 2c20 7374 6172  lice(start, star
-000082a0: 7429 2c20 6172 6775 6d65 6e74 290a 2020  t), argument).  
-000082b0: 2020 2020 2020 666f 7220 636f 6d70 6f6e        for compon
-000082c0: 656e 7420 696e 2061 7267 756d 656e 743a  ent in argument:
-000082d0: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
-000082e0: 706f 6e65 6e74 2e5f 7365 745f 7061 7265  ponent._set_pare
-000082f0: 6e74 2873 656c 6629 0a20 2020 2020 2020  nt(self).       
-00008300: 2066 6f72 2077 7261 7070 6572 2069 6e20   for wrapper in 
-00008310: 7772 6170 7065 7273 3a0a 2020 2020 2020  wrappers:.      
-00008320: 2020 2020 2020 7772 6170 7065 722e 5f75        wrapper._u
-00008330: 7064 6174 655f 6566 6665 6374 6976 655f  pdate_effective_
-00008340: 636f 6e74 6578 7428 290a 0a20 2020 2023  context()..    #
-00008350: 2323 2050 5249 5641 5445 204d 4554 484f  ## PRIVATE METHO
-00008360: 4453 2023 2323 0a0a 2020 2020 6465 6620  DS ###..    def 
-00008370: 5f63 6f70 795f 7769 7468 5f63 6869 6c64  _copy_with_child
-00008380: 7265 6e28 7365 6c66 293a 0a20 2020 2020  ren(self):.     
-00008390: 2020 206e 6577 5f63 6f6e 7461 696e 6572     new_container
-000083a0: 203d 2073 656c 662e 5f5f 636f 7079 5f5f   = self.__copy__
-000083b0: 2829 0a20 2020 2020 2020 2066 6f72 2063  ().        for c
-000083c0: 6f6d 706f 6e65 6e74 2069 6e20 7365 6c66  omponent in self
-000083d0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-000083e0: 2069 7369 6e73 7461 6e63 6528 636f 6d70   isinstance(comp
-000083f0: 6f6e 656e 742c 2043 6f6e 7461 696e 6572  onent, Container
-00008400: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00008410: 2020 206e 6577 5f63 6f6d 706f 6e65 6e74     new_component
-00008420: 203d 2063 6f6d 706f 6e65 6e74 2e5f 636f   = component._co
-00008430: 7079 5f77 6974 685f 6368 696c 6472 656e  py_with_children
-00008440: 2829 0a20 2020 2020 2020 2020 2020 2065  ().            e
-00008450: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00008460: 2020 2020 206e 6577 5f63 6f6d 706f 6e65       new_compone
-00008470: 6e74 203d 2063 6f6d 706f 6e65 6e74 2e5f  nt = component._
-00008480: 5f63 6f70 795f 5f28 290a 2020 2020 2020  _copy__().      
-00008490: 2020 2020 2020 6e65 775f 636f 6e74 6169        new_contai
-000084a0: 6e65 722e 6170 7065 6e64 286e 6577 5f63  ner.append(new_c
-000084b0: 6f6d 706f 6e65 6e74 290a 2020 2020 2020  omponent).      
-000084c0: 2020 7265 7475 726e 206e 6577 5f63 6f6e    return new_con
-000084d0: 7461 696e 6572 0a0a 2020 2020 6465 6620  tainer..    def 
-000084e0: 5f65 6a65 6374 5f63 6f6e 7465 6e74 7328  _eject_contents(
-000084f0: 7365 6c66 293a 0a20 2020 2020 2020 2069  self):.        i
-00008500: 6620 7365 6c66 2e5f 7061 7265 6e74 2069  f self._parent i
-00008510: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00008520: 2020 2020 2020 2020 7261 6973 6520 4578          raise Ex
-00008530: 6365 7074 696f 6e28 2263 616e 206e 6f74  ception("can not
-00008540: 2065 6a65 6374 2063 6f6e 7465 6e74 7320   eject contents 
-00008550: 6f66 2069 6e2d 7363 6f72 6520 636f 6e74  of in-score cont
-00008560: 6169 6e65 722e 2229 0a20 2020 2020 2020  ainer.").       
-00008570: 2063 6f6e 7465 6e74 7320 3d20 7365 6c66   contents = self
-00008580: 5b3a 5d0a 2020 2020 2020 2020 666f 7220  [:].        for 
-00008590: 636f 6d70 6f6e 656e 7420 696e 2063 6f6e  component in con
-000085a0: 7465 6e74 733a 0a20 2020 2020 2020 2020  tents:.         
-000085b0: 2020 2063 6f6d 706f 6e65 6e74 2e5f 7365     component._se
-000085c0: 745f 7061 7265 6e74 284e 6f6e 6529 0a20  t_parent(None). 
-000085d0: 2020 2020 2020 2073 656c 662e 5f63 6f6d         self._com
-000085e0: 706f 6e65 6e74 735b 3a5d 203d 205b 5d0a  ponents[:] = [].
-000085f0: 2020 2020 2020 2020 7265 7475 726e 2063          return c
-00008600: 6f6e 7465 6e74 730a 0a20 2020 2064 6566  ontents..    def
-00008610: 205f 666f 726d 6174 5f61 6674 6572 5f73   _format_after_s
-00008620: 6974 6528 7365 6c66 2c20 636f 6e74 7269  ite(self, contri
-00008630: 6275 7469 6f6e 7329 3a0a 2020 2020 2020  butions):.      
-00008640: 2020 7265 7375 6c74 203d 205b 5d0a 2020    result = [].  
-00008650: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
-00008660: 656e 6428 636f 6e74 7269 6275 7469 6f6e  end(contribution
-00008670: 732e 6166 7465 722e 636f 6d6d 616e 6473  s.after.commands
-00008680: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00008690: 2072 6573 756c 740a 0a20 2020 2064 6566   result..    def
-000086a0: 205f 666f 726d 6174 5f62 6566 6f72 655f   _format_before_
-000086b0: 7369 7465 2873 656c 662c 2063 6f6e 7472  site(self, contr
-000086c0: 6962 7574 696f 6e73 293a 0a20 2020 2020  ibutions):.     
-000086d0: 2020 2072 6573 756c 7420 3d20 5b5d 0a20     result = []. 
-000086e0: 2020 2020 2020 2072 6573 756c 742e 6578         result.ex
-000086f0: 7465 6e64 2863 6f6e 7472 6962 7574 696f  tend(contributio
-00008700: 6e73 2e62 6566 6f72 652e 636f 6d6d 616e  ns.before.comman
-00008710: 6473 290a 2020 2020 2020 2020 7265 7475  ds).        retu
-00008720: 726e 2072 6573 756c 740a 0a20 2020 2064  rn result..    d
-00008730: 6566 205f 666f 726d 6174 5f63 6c6f 7365  ef _format_close
-00008740: 5f62 7261 636b 6574 735f 7369 7465 2873  _brackets_site(s
-00008750: 656c 662c 2063 6f6e 7472 6962 7574 696f  elf, contributio
-00008760: 6e73 293a 0a20 2020 2020 2020 2072 6573  ns):.        res
-00008770: 756c 7420 3d20 5b5d 0a20 2020 2020 2020  ult = [].       
-00008780: 2073 7472 696e 6773 203d 205b 5d0a 2020   strings = [].  
-00008790: 2020 2020 2020 6966 2073 656c 662e 7369        if self.si
-000087a0: 6d75 6c74 616e 656f 7573 3a0a 2020 2020  multaneous:.    
-000087b0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000087c0: 6964 656e 7469 6669 6572 3a0a 2020 2020  identifier:.    
-000087d0: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-000087e0: 6e67 203d 2066 223e 3e20 207b 7365 6c66  ng = f">>  {self
-000087f0: 2e69 6465 6e74 6966 6965 727d 220a 2020  .identifier}".  
-00008800: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00008810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008820: 7374 7269 6e67 203d 2022 3e3e 220a 2020  string = ">>".  
-00008830: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00008840: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00008850: 6964 656e 7469 6669 6572 3a0a 2020 2020  identifier:.    
-00008860: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-00008870: 6e67 203d 2066 227d 7d20 2020 7b73 656c  ng = f"}}   {sel
-00008880: 662e 6964 656e 7469 6669 6572 7d22 0a20  f.identifier}". 
-00008890: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000088a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000088b0: 2073 7472 696e 6720 3d20 227d 220a 2020   string = "}".  
-000088c0: 2020 2020 2020 7374 7269 6e67 732e 6170        strings.ap
-000088d0: 7065 6e64 2873 7472 696e 6729 0a20 2020  pend(string).   
-000088e0: 2020 2020 2069 6620 7365 6c66 2e74 6167       if self.tag
-000088f0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00008900: 2020 2020 2020 2020 2020 7374 7269 6e67            string
-00008910: 7320 3d20 5f74 6167 2e64 6f75 626c 655f  s = _tag.double_
-00008920: 7461 6728 7374 7269 6e67 732c 2073 656c  tag(strings, sel
-00008930: 662e 7461 6729 0a20 2020 2020 2020 2072  f.tag).        r
-00008940: 6573 756c 742e 6578 7465 6e64 2873 7472  esult.extend(str
-00008950: 696e 6773 290a 2020 2020 2020 2020 7265  ings).        re
-00008960: 7475 726e 2072 6573 756c 740a 0a20 2020  turn result..   
-00008970: 2064 6566 205f 666f 726d 6174 5f63 6c6f   def _format_clo
-00008980: 7369 6e67 5f73 6974 6528 7365 6c66 2c20  sing_site(self, 
-00008990: 636f 6e74 7269 6275 7469 6f6e 7329 3a0a  contributions):.
-000089a0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-000089b0: 205b 5d0a 2020 2020 2020 2020 7265 7375   [].        resu
-000089c0: 6c74 2e65 7874 656e 6428 636f 6e74 7269  lt.extend(contri
-000089d0: 6275 7469 6f6e 732e 6772 6f62 5f72 6576  butions.grob_rev
-000089e0: 6572 7473 290a 2020 2020 2020 2020 7265  erts).        re
-000089f0: 7375 6c74 2e65 7874 656e 6428 636f 6e74  sult.extend(cont
-00008a00: 7269 6275 7469 6f6e 732e 636c 6f73 696e  ributions.closin
-00008a10: 672e 636f 6d6d 616e 6473 290a 2020 2020  g.commands).    
-00008a20: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-00008a30: 662e 5f63 6f6e 7472 6962 7574 696f 6e73  f._contributions
-00008a40: 5f77 6974 685f 696e 6465 6e74 2872 6573  _with_indent(res
-00008a50: 756c 7429 0a20 2020 2020 2020 2072 6574  ult).        ret
-00008a60: 7572 6e20 7265 7375 6c74 0a0a 2020 2020  urn result..    
-00008a70: 6465 6620 5f66 6f72 6d61 745f 636f 6e74  def _format_cont
-00008a80: 656e 745f 7069 6563 6573 2873 656c 6629  ent_pieces(self)
-00008a90: 3a0a 2020 2020 2020 2020 7374 7269 6e67  :.        string
-00008aa0: 7320 3d20 5b5d 0a20 2020 2020 2020 2066  s = [].        f
-00008ab0: 6f72 2063 6f6d 706f 6e65 6e74 2069 6e20  or component in 
-00008ac0: 7365 6c66 2e63 6f6d 706f 6e65 6e74 733a  self.components:
-00008ad0: 0a20 2020 2020 2020 2020 2020 2073 7472  .            str
-00008ae0: 696e 6720 3d20 636f 6d70 6f6e 656e 742e  ing = component.
-00008af0: 5f67 6574 5f6c 696c 7970 6f6e 645f 666f  _get_lilypond_fo
-00008b00: 726d 6174 2829 0a20 2020 2020 2020 2020  rmat().         
-00008b10: 2020 2066 6f72 2073 7472 696e 6720 696e     for string in
-00008b20: 2073 7472 696e 672e 7370 6c69 7428 225c   string.split("\
-00008b30: 6e22 293a 0a20 2020 2020 2020 2020 2020  n"):.           
-00008b40: 2020 2020 2069 6620 7374 7269 6e67 2e69       if string.i
-00008b50: 7373 7061 6365 2829 3a0a 2020 2020 2020  sspace():.      
-00008b60: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00008b70: 7269 6e67 203d 2022 220a 2020 2020 2020  ring = "".      
-00008b80: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00008b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ba0: 2020 2020 7374 7269 6e67 203d 205f 696e      string = _in
-00008bb0: 6465 6e74 2e49 4e44 454e 5420 2b20 7374  dent.INDENT + st
-00008bc0: 7269 6e67 0a20 2020 2020 2020 2020 2020  ring.           
-00008bd0: 2020 2020 2073 7472 696e 6773 2e61 7070       strings.app
-00008be0: 656e 6428 7374 7269 6e67 290a 2020 2020  end(string).    
-00008bf0: 2020 2020 7265 7475 726e 2073 7472 696e      return strin
-00008c00: 6773 0a0a 2020 2020 6465 6620 5f66 6f72  gs..    def _for
-00008c10: 6d61 745f 636f 6e74 656e 7473 5f73 6974  mat_contents_sit
-00008c20: 6528 7365 6c66 2c20 636f 6e74 7269 6275  e(self, contribu
-00008c30: 7469 6f6e 7329 3a0a 2020 2020 2020 2020  tions):.        
-00008c40: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
-00008c50: 2020 2020 7265 7375 6c74 2e65 7874 656e      result.exten
-00008c60: 6428 7365 6c66 2e5f 666f 726d 6174 5f63  d(self._format_c
-00008c70: 6f6e 7465 6e74 5f70 6965 6365 7328 2929  ontent_pieces())
-00008c80: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00008c90: 7265 7375 6c74 0a0a 2020 2020 6465 6620  result..    def 
-00008ca0: 5f66 6f72 6d61 745f 6f70 656e 5f62 7261  _format_open_bra
-00008cb0: 636b 6574 735f 7369 7465 2873 656c 662c  ckets_site(self,
-00008cc0: 2063 6f6e 7472 6962 7574 696f 6e73 293a   contributions):
-00008cd0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00008ce0: 3d20 5b5d 0a20 2020 2020 2020 2073 7472  = [].        str
-00008cf0: 696e 6773 203d 205b 5d0a 2020 2020 2020  ings = [].      
-00008d00: 2020 6966 2073 656c 662e 7369 6d75 6c74    if self.simult
-00008d10: 616e 656f 7573 3a0a 2020 2020 2020 2020  aneous:.        
-00008d20: 2020 2020 6966 2073 656c 662e 6964 656e      if self.iden
-00008d30: 7469 6669 6572 3a0a 2020 2020 2020 2020  tifier:.        
-00008d40: 2020 2020 2020 2020 7374 7269 6e67 203d          string =
-00008d50: 2066 223c 3c20 207b 7365 6c66 2e69 6465   f"<<  {self.ide
-00008d60: 6e74 6966 6965 727d 220a 2020 2020 2020  ntifier}".      
-00008d70: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00008d80: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-00008d90: 6e67 203d 2022 3c3c 220a 2020 2020 2020  ng = "<<".      
-00008da0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00008db0: 2020 2020 6966 2073 656c 662e 6964 656e      if self.iden
-00008dc0: 7469 6669 6572 3a0a 2020 2020 2020 2020  tifier:.        
-00008dd0: 2020 2020 2020 2020 7374 7269 6e67 203d          string =
-00008de0: 2066 227b 7b20 2020 7b73 656c 662e 6964   f"{{   {self.id
-00008df0: 656e 7469 6669 6572 7d22 0a20 2020 2020  entifier}".     
-00008e00: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00008e10: 2020 2020 2020 2020 2020 2020 2073 7472               str
-00008e20: 696e 6720 3d20 227b 220a 2020 2020 2020  ing = "{".      
-00008e30: 2020 7374 7269 6e67 732e 6170 7065 6e64    strings.append
-00008e40: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
-00008e50: 2069 6620 7365 6c66 2e74 6167 2069 7320   if self.tag is 
-00008e60: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00008e70: 2020 2020 2020 7374 7269 6e67 7320 3d20        strings = 
-00008e80: 5f74 6167 2e64 6f75 626c 655f 7461 6728  _tag.double_tag(
-00008e90: 7374 7269 6e67 732c 2073 656c 662e 7461  strings, self.ta
-00008ea0: 6729 0a20 2020 2020 2020 2072 6573 756c  g).        resul
-00008eb0: 742e 6578 7465 6e64 2873 7472 696e 6773  t.extend(strings
-00008ec0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00008ed0: 2072 6573 756c 740a 0a20 2020 2064 6566   result..    def
-00008ee0: 205f 666f 726d 6174 5f6f 7065 6e69 6e67   _format_opening
-00008ef0: 5f73 6974 6528 7365 6c66 2c20 636f 6e74  _site(self, cont
-00008f00: 7269 6275 7469 6f6e 7329 3a0a 2020 2020  ributions):.    
-00008f10: 2020 2020 7265 7375 6c74 203d 205b 5d0a      result = [].
-00008f20: 2020 2020 2020 2020 7265 7375 6c74 2e65          result.e
-00008f30: 7874 656e 6428 636f 6e74 7269 6275 7469  xtend(contributi
-00008f40: 6f6e 732e 6f70 656e 696e 672e 636f 6d6d  ons.opening.comm
-00008f50: 616e 6473 290a 2020 2020 2020 2020 7265  ands).        re
-00008f60: 7375 6c74 2e65 7874 656e 6428 636f 6e74  sult.extend(cont
-00008f70: 7269 6275 7469 6f6e 732e 6772 6f62 5f6f  ributions.grob_o
-00008f80: 7665 7272 6964 6573 290a 2020 2020 2020  verrides).      
-00008f90: 2020 7265 7375 6c74 2e65 7874 656e 6428    result.extend(
-00008fa0: 636f 6e74 7269 6275 7469 6f6e 732e 636f  contributions.co
-00008fb0: 6e74 6578 745f 7365 7474 696e 6773 290a  ntext_settings).
-00008fc0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00008fd0: 656c 662e 5f63 6f6e 7472 6962 7574 696f  elf._contributio
-00008fe0: 6e73 5f77 6974 685f 696e 6465 6e74 2872  ns_with_indent(r
-00008ff0: 6573 756c 7429 0a0a 2020 2020 6465 6620  esult)..    def 
-00009000: 5f67 6574 5f61 6262 7265 7669 6174 6564  _get_abbreviated
-00009010: 5f73 7472 696e 675f 666f 726d 6174 2873  _string_format(s
-00009020: 656c 6629 3a0a 2020 2020 2020 2020 6966  elf):.        if
-00009030: 2030 203c 206c 656e 2873 656c 6629 3a0a   0 < len(self):.
-00009040: 2020 2020 2020 2020 2020 2020 7375 6d6d              summ
-00009050: 6172 7920 3d20 7374 7228 6c65 6e28 7365  ary = str(len(se
-00009060: 6c66 2929 0a20 2020 2020 2020 2065 6c73  lf)).        els
-00009070: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-00009080: 756d 6d61 7279 203d 2022 220a 2020 2020  ummary = "".    
-00009090: 2020 2020 6966 2073 656c 662e 7369 6d75      if self.simu
-000090a0: 6c74 616e 656f 7573 3a0a 2020 2020 2020  ltaneous:.      
-000090b0: 2020 2020 2020 6f70 656e 5f62 7261 636b        open_brack
-000090c0: 6574 5f73 7472 696e 672c 2063 6c6f 7365  et_string, close
-000090d0: 5f62 7261 636b 6574 5f73 7472 696e 6720  _bracket_string 
-000090e0: 3d20 223c 3c22 2c20 223e 3e22 0a20 2020  = "<<", ">>".   
-000090f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00009100: 2020 2020 2020 206f 7065 6e5f 6272 6163         open_brac
-00009110: 6b65 745f 7374 7269 6e67 2c20 636c 6f73  ket_string, clos
-00009120: 655f 6272 6163 6b65 745f 7374 7269 6e67  e_bracket_string
-00009130: 203d 2022 7b22 2c20 227d 220a 2020 2020   = "{", "}".    
-00009140: 2020 2020 6e61 6d65 203d 2073 656c 662e      name = self.
-00009150: 6e61 6d65 0a20 2020 2020 2020 2069 6620  name.        if 
-00009160: 6e61 6d65 2069 7320 6e6f 7420 4e6f 6e65  name is not None
-00009170: 3a0a 2020 2020 2020 2020 2020 2020 6e61  :.            na
-00009180: 6d65 203d 2066 272d 227b 6e61 6d65 7d22  me = f'-"{name}"
-00009190: 270a 2020 2020 2020 2020 656c 7365 3a0a  '.        else:.
-000091a0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
-000091b0: 203d 2022 220a 2020 2020 2020 2020 6966   = "".        if
-000091c0: 2068 6173 6174 7472 2873 656c 662c 2022   hasattr(self, "
-000091d0: 5f6c 696c 7970 6f6e 645f 7479 7065 2229  _lilypond_type")
-000091e0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-000091f0: 7375 6c74 203d 2022 3c7b 7d7b 7d7b 7d7b  sult = "<{}{}{}{
-00009200: 7d7b 7d3e 220a 2020 2020 2020 2020 2020  }{}>".          
-00009210: 2020 7265 7375 6c74 203d 2072 6573 756c    result = resul
-00009220: 742e 666f 726d 6174 280a 2020 2020 2020  t.format(.      
-00009230: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-00009240: 696c 7970 6f6e 645f 7479 7065 2c0a 2020  ilypond_type,.  
-00009250: 2020 2020 2020 2020 2020 2020 2020 6e61                na
-00009260: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
-00009270: 2020 2020 6f70 656e 5f62 7261 636b 6574      open_bracket
-00009280: 5f73 7472 696e 672c 0a20 2020 2020 2020  _string,.       
-00009290: 2020 2020 2020 2020 2073 756d 6d61 7279           summary
-000092a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000092b0: 2020 636c 6f73 655f 6272 6163 6b65 745f    close_bracket_
-000092c0: 7374 7269 6e67 2c0a 2020 2020 2020 2020  string,.        
-000092d0: 2020 2020 290a 2020 2020 2020 2020 656c      ).        el
-000092e0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000092f0: 7265 7375 6c74 203d 2022 3c7b 7d7b 7d7b  result = "<{}{}{
-00009300: 7d7b 7d3e 220a 2020 2020 2020 2020 2020  }{}>".          
-00009310: 2020 7265 7375 6c74 203d 2072 6573 756c    result = resul
-00009320: 742e 666f 726d 6174 280a 2020 2020 2020  t.format(.      
-00009330: 2020 2020 2020 2020 2020 6e61 6d65 2c20            name, 
-00009340: 6f70 656e 5f62 7261 636b 6574 5f73 7472  open_bracket_str
-00009350: 696e 672c 2073 756d 6d61 7279 2c20 636c  ing, summary, cl
-00009360: 6f73 655f 6272 6163 6b65 745f 7374 7269  ose_bracket_stri
-00009370: 6e67 0a20 2020 2020 2020 2020 2020 2029  ng.            )
-00009380: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00009390: 7265 7375 6c74 0a0a 2020 2020 6465 6620  result..    def 
-000093a0: 5f67 6574 5f63 6f6d 7061 6374 5f72 6570  _get_compact_rep
-000093b0: 7265 7365 6e74 6174 696f 6e28 7365 6c66  resentation(self
-000093c0: 293a 0a20 2020 2020 2020 2069 6620 6e6f  ):.        if no
-000093d0: 7420 7365 6c66 3a0a 2020 2020 2020 2020  t self:.        
-000093e0: 2020 2020 7265 7475 726e 2022 7b20 7d22      return "{ }"
-000093f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00009400: 6622 7b7b 207b 7365 6c66 2e5f 6765 745f  f"{{ {self._get_
-00009410: 636f 6e74 656e 7473 5f73 756d 6d61 7279  contents_summary
-00009420: 2829 7d20 7d7d 220a 0a20 2020 2064 6566  ()} }}"..    def
-00009430: 205f 6765 745f 636f 6e74 656e 7473 5f64   _get_contents_d
-00009440: 7572 6174 696f 6e28 7365 6c66 293a 0a20  uration(self):. 
-00009450: 2020 2020 2020 2069 6620 7365 6c66 2e73         if self.s
-00009460: 696d 756c 7461 6e65 6f75 733a 0a20 2020  imultaneous:.   
-00009470: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00009480: 6d61 7828 0a20 2020 2020 2020 2020 2020  max(.           
-00009490: 2020 2020 205b 5f64 7572 6174 696f 6e2e       [_duration.
-000094a0: 4475 7261 7469 6f6e 2830 295d 202b 205b  Duration(0)] + [
-000094b0: 5f2e 5f67 6574 5f70 7265 7072 6f6c 6174  _._get_preprolat
-000094c0: 6564 5f64 7572 6174 696f 6e28 2920 666f  ed_duration() fo
-000094d0: 7220 5f20 696e 2073 656c 665d 0a20 2020  r _ in self].   
-000094e0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-000094f0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00009500: 2020 2020 2064 7572 6174 696f 6e20 3d20       duration = 
-00009510: 5f64 7572 6174 696f 6e2e 4475 7261 7469  _duration.Durati
-00009520: 6f6e 2830 290a 2020 2020 2020 2020 2020  on(0).          
-00009530: 2020 666f 7220 636f 6d70 6f6e 656e 7420    for component 
-00009540: 696e 2073 656c 663a 0a20 2020 2020 2020  in self:.       
-00009550: 2020 2020 2020 2020 2064 7572 6174 696f           duratio
-00009560: 6e20 2b3d 2063 6f6d 706f 6e65 6e74 2e5f  n += component._
-00009570: 6765 745f 7072 6570 726f 6c61 7465 645f  get_preprolated_
-00009580: 6475 7261 7469 6f6e 2829 0a20 2020 2020  duration().     
-00009590: 2020 2020 2020 2072 6574 7572 6e20 6475         return du
-000095a0: 7261 7469 6f6e 0a0a 2020 2020 6465 6620  ration..    def 
-000095b0: 5f67 6574 5f63 6f6e 7465 6e74 735f 7375  _get_contents_su
-000095c0: 6d6d 6172 7928 7365 6c66 293a 0a20 2020  mmary(self):.   
-000095d0: 2020 2020 2069 6620 3020 3c20 6c65 6e28       if 0 < len(
-000095e0: 7365 6c66 293a 0a20 2020 2020 2020 2020  self):.         
-000095f0: 2020 2072 6573 756c 7420 3d20 5b5d 0a20     result = []. 
-00009600: 2020 2020 2020 2020 2020 2066 6f72 2063             for c
-00009610: 6f6d 706f 6e65 6e74 2069 6e20 7365 6c66  omponent in self
-00009620: 2e63 6f6d 706f 6e65 6e74 733a 0a20 2020  .components:.   
-00009630: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00009640: 6861 7361 7474 7228 636f 6d70 6f6e 656e  hasattr(componen
-00009650: 742c 2022 5f67 6574 5f63 6f6d 7061 6374  t, "_get_compact
-00009660: 5f72 6570 7265 7365 6e74 6174 696f 6e22  _representation"
-00009670: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00009680: 2020 2020 2020 2072 6573 756c 742e 6170         result.ap
-00009690: 7065 6e64 2863 6f6d 706f 6e65 6e74 2e5f  pend(component._
-000096a0: 6765 745f 636f 6d70 6163 745f 7265 7072  get_compact_repr
-000096b0: 6573 656e 7461 7469 6f6e 2829 290a 2020  esentation()).  
-000096c0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-000096d0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000096e0: 2020 2020 2020 2020 7265 7375 6c74 2e61          result.a
-000096f0: 7070 656e 6428 7374 7228 636f 6d70 6f6e  ppend(str(compon
-00009700: 656e 7429 290a 2020 2020 2020 2020 2020  ent)).          
-00009710: 2020 7265 7475 726e 2022 2022 2e6a 6f69    return " ".joi
-00009720: 6e28 7265 7375 6c74 290a 2020 2020 2020  n(result).      
-00009730: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00009740: 2020 2020 7265 7475 726e 2022 220a 0a20      return "".. 
-00009750: 2020 2064 6566 205f 6765 745f 6465 7363     def _get_desc
-00009760: 656e 6461 6e74 735f 7374 6172 7469 6e67  endants_starting
-00009770: 5f77 6974 6828 7365 6c66 293a 0a20 2020  _with(self):.   
-00009780: 2020 2020 2072 6573 756c 7420 3d20 5b5d       result = []
-00009790: 0a20 2020 2020 2020 2072 6573 756c 742e  .        result.
-000097a0: 6170 7065 6e64 2873 656c 6629 0a20 2020  append(self).   
-000097b0: 2020 2020 2069 6620 7365 6c66 2e73 696d       if self.sim
-000097c0: 756c 7461 6e65 6f75 733a 0a20 2020 2020  ultaneous:.     
-000097d0: 2020 2020 2020 2066 6f72 2069 7465 6d20         for item 
-000097e0: 696e 2073 656c 663a 0a20 2020 2020 2020  in self:.       
-000097f0: 2020 2020 2020 2020 2072 6573 756c 742e           result.
-00009800: 6578 7465 6e64 2869 7465 6d2e 5f67 6574  extend(item._get
-00009810: 5f64 6573 6365 6e64 616e 7473 5f73 7461  _descendants_sta
-00009820: 7274 696e 675f 7769 7468 2829 290a 2020  rting_with()).  
-00009830: 2020 2020 2020 656c 6966 2073 656c 663a        elif self:
-00009840: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00009850: 756c 742e 6578 7465 6e64 2873 656c 665b  ult.extend(self[
-00009860: 305d 2e5f 6765 745f 6465 7363 656e 6461  0]._get_descenda
-00009870: 6e74 735f 7374 6172 7469 6e67 5f77 6974  nts_starting_wit
-00009880: 6828 2929 0a20 2020 2020 2020 2072 6574  h()).        ret
-00009890: 7572 6e20 7265 7375 6c74 0a0a 2020 2020  urn result..    
-000098a0: 6465 6620 5f67 6574 5f64 6573 6365 6e64  def _get_descend
-000098b0: 616e 7473 5f73 746f 7070 696e 675f 7769  ants_stopping_wi
-000098c0: 7468 2873 656c 6629 3a0a 2020 2020 2020  th(self):.      
-000098d0: 2020 7265 7375 6c74 203d 205b 5d0a 2020    result = [].  
-000098e0: 2020 2020 2020 7265 7375 6c74 2e61 7070        result.app
-000098f0: 656e 6428 7365 6c66 290a 2020 2020 2020  end(self).      
-00009900: 2020 6966 2073 656c 662e 7369 6d75 6c74    if self.simult
-00009910: 616e 656f 7573 3a0a 2020 2020 2020 2020  aneous:.        
-00009920: 2020 2020 666f 7220 6974 656d 2069 6e20      for item in 
-00009930: 7365 6c66 3a0a 2020 2020 2020 2020 2020  self:.          
-00009940: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
-00009950: 656e 6428 6974 656d 2e5f 6765 745f 6465  end(item._get_de
-00009960: 7363 656e 6461 6e74 735f 7374 6f70 7069  scendants_stoppi
-00009970: 6e67 5f77 6974 6828 2929 0a20 2020 2020  ng_with()).     
-00009980: 2020 2065 6c69 6620 7365 6c66 3a0a 2020     elif self:.  
-00009990: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-000099a0: 2e65 7874 656e 6428 7365 6c66 5b2d 315d  .extend(self[-1]
-000099b0: 2e5f 6765 745f 6465 7363 656e 6461 6e74  ._get_descendant
-000099c0: 735f 7374 6f70 7069 6e67 5f77 6974 6828  s_stopping_with(
-000099d0: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
-000099e0: 6e20 7265 7375 6c74 0a0a 2020 2020 6465  n result..    de
-000099f0: 6620 5f67 6574 5f70 7265 7072 6f6c 6174  f _get_preprolat
-00009a00: 6564 5f64 7572 6174 696f 6e28 7365 6c66  ed_duration(self
-00009a10: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00009a20: 6e20 7365 6c66 2e5f 6765 745f 636f 6e74  n self._get_cont
-00009a30: 656e 7473 5f64 7572 6174 696f 6e28 290a  ents_duration().
-00009a40: 0a20 2020 2064 6566 205f 6765 745f 7375  .    def _get_su
-00009a50: 6274 7265 6528 7365 6c66 293a 0a20 2020  btree(self):.   
-00009a60: 2020 2020 2072 6573 756c 7420 3d20 5b73       result = [s
-00009a70: 656c 665d 0a20 2020 2020 2020 2066 6f72  elf].        for
-00009a80: 2063 6f6d 706f 6e65 6e74 2069 6e20 7365   component in se
-00009a90: 6c66 3a0a 2020 2020 2020 2020 2020 2020  lf:.            
-00009aa0: 7265 7375 6c74 2e65 7874 656e 6428 636f  result.extend(co
-00009ab0: 6d70 6f6e 656e 742e 5f67 6574 5f73 7562  mponent._get_sub
-00009ac0: 7472 6565 2829 290a 2020 2020 2020 2020  tree()).        
-00009ad0: 7265 7475 726e 2072 6573 756c 740a 0a20  return result.. 
-00009ae0: 2020 2064 6566 205f 696e 6974 6961 6c69     def _initiali
-00009af0: 7a65 5f63 6f6d 706f 6e65 6e74 7328 7365  ze_components(se
-00009b00: 6c66 2c20 636f 6d70 6f6e 656e 7473 2c20  lf, components, 
-00009b10: 2a2c 206c 616e 6775 6167 653a 2073 7472  *, language: str
-00009b20: 203d 2022 656e 676c 6973 6822 293a 0a20   = "english"):. 
-00009b30: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00009b40: 616e 6365 2863 6f6d 706f 6e65 6e74 732c  ance(components,
-00009b50: 2063 6f6c 6c65 6374 696f 6e73 2e61 6263   collections.abc
-00009b60: 2e49 7465 7261 626c 6529 2061 6e64 206e  .Iterable) and n
-00009b70: 6f74 2069 7369 6e73 7461 6e63 6528 0a20  ot isinstance(. 
-00009b80: 2020 2020 2020 2020 2020 2063 6f6d 706f             compo
-00009b90: 6e65 6e74 732c 2073 7472 0a20 2020 2020  nents, str.     
-00009ba0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-00009bb0: 2020 636f 6d70 6f6e 656e 7473 5f20 3d20    components_ = 
-00009bc0: 5b5d 0a20 2020 2020 2020 2020 2020 2066  [].            f
-00009bd0: 6f72 2069 7465 6d20 696e 2063 6f6d 706f  or item in compo
-00009be0: 6e65 6e74 733a 0a20 2020 2020 2020 2020  nents:.         
-00009bf0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00009c00: 616e 6365 2869 7465 6d2c 2073 7472 293a  ance(item, str):
-00009c10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009c20: 2020 2020 2070 6172 7365 6420 3d20 7365       parsed = se
-00009c30: 6c66 2e5f 7061 7273 655f 7374 7269 6e67  lf._parse_string
-00009c40: 2869 7465 6d2c 206c 616e 6775 6167 653d  (item, language=
-00009c50: 6c61 6e67 7561 6765 290a 2020 2020 2020  language).      
-00009c60: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00009c70: 6d70 6f6e 656e 7473 5f2e 6170 7065 6e64  mponents_.append
-00009c80: 2870 6172 7365 6429 0a20 2020 2020 2020  (parsed).       
-00009c90: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
-00009ca0: 696e 7374 616e 6365 2869 7465 6d2c 2063  instance(item, c
-00009cb0: 6f6c 6c65 6374 696f 6e73 2e61 6263 2e49  ollections.abc.I
-00009cc0: 7465 7261 626c 6529 2061 6e64 206e 6f74  terable) and not
-00009cd0: 2069 7369 6e73 7461 6e63 6528 0a20 2020   isinstance(.   
-00009ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009cf0: 2069 7465 6d2c 2043 6f6e 7461 696e 6572   item, Container
-00009d00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009d10: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
-00009d20: 2020 2020 2020 2020 636f 6d70 6f6e 656e          componen
-00009d30: 7473 5f2e 6578 7465 6e64 2869 7465 6d29  ts_.extend(item)
-00009d40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009d50: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00009d60: 2020 2020 2020 2020 2020 2063 6f6d 706f             compo
-00009d70: 6e65 6e74 735f 2e61 7070 656e 6428 6974  nents_.append(it
-00009d80: 656d 290a 2020 2020 2020 2020 2020 2020  em).            
-00009d90: 636f 6d70 6f6e 656e 7473 203d 2063 6f6d  components = com
-00009da0: 706f 6e65 6e74 735f 0a20 2020 2020 2020  ponents_.       
-00009db0: 2020 2020 2066 6f72 2063 6f6d 706f 6e65       for compone
-00009dc0: 6e74 2069 6e20 636f 6d70 6f6e 656e 7473  nt in components
-00009dd0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00009de0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-00009df0: 6e63 6528 636f 6d70 6f6e 656e 742c 2043  nce(component, C
-00009e00: 6f6d 706f 6e65 6e74 293a 0a20 2020 2020  omponent):.     
-00009e10: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00009e20: 6169 7365 2045 7863 6570 7469 6f6e 2866  aise Exception(f
-00009e30: 226d 7573 7420 6265 2063 6f6d 706f 6e65  "must be compone
-00009e40: 6e74 3a20 7b63 6f6d 706f 6e65 6e74 2172  nt: {component!r
-00009e50: 7d2e 2229 0a20 2020 2020 2020 2069 6620  }.").        if 
-00009e60: 6973 696e 7374 616e 6365 2863 6f6d 706f  isinstance(compo
-00009e70: 6e65 6e74 732c 2073 7472 293a 0a20 2020  nents, str):.   
-00009e80: 2020 2020 2020 2020 2070 6172 7365 6420           parsed 
-00009e90: 3d20 7365 6c66 2e5f 7061 7273 655f 7374  = self._parse_st
-00009ea0: 7269 6e67 2863 6f6d 706f 6e65 6e74 732c  ring(components,
-00009eb0: 206c 616e 6775 6167 653d 6c61 6e67 7561   language=langua
-00009ec0: 6765 290a 2020 2020 2020 2020 2020 2020  ge).            
-00009ed0: 7365 6c66 2e5f 636f 6d70 6f6e 656e 7473  self._components
-00009ee0: 203d 205b 5d0a 2020 2020 2020 2020 2020   = [].          
-00009ef0: 2020 7365 6c66 2e73 696d 756c 7461 6e65    self.simultane
-00009f00: 6f75 7320 3d20 7061 7273 6564 2e73 696d  ous = parsed.sim
-00009f10: 756c 7461 6e65 6f75 730a 2020 2020 2020  ultaneous.      
-00009f20: 2020 2020 2020 7365 6c66 5b3a 5d20 3d20        self[:] = 
-00009f30: 7061 7273 6564 5b3a 5d0a 2020 2020 2020  parsed[:].      
-00009f40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00009f50: 2020 2020 666f 7220 636f 6d70 6f6e 656e      for componen
-00009f60: 7420 696e 2063 6f6d 706f 6e65 6e74 733a  t in components:
-00009f70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009f80: 2069 6620 636f 6d70 6f6e 656e 742e 5f70   if component._p
-00009f90: 6172 656e 7420 6973 206e 6f74 204e 6f6e  arent is not Non
-00009fa0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00009fb0: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
-00009fc0: 6570 7469 6f6e 2866 226d 7573 7420 6e6f  eption(f"must no
-00009fd0: 7420 6861 7665 2070 6172 656e 743a 207b  t have parent: {
-00009fe0: 636f 6d70 6f6e 656e 7421 727d 2e22 290a  component!r}.").
-00009ff0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000a000: 2e5f 636f 6d70 6f6e 656e 7473 203d 206c  ._components = l
-0000a010: 6973 7428 636f 6d70 6f6e 656e 7473 290a  ist(components).
-0000a020: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0000a030: 636f 6d70 6f6e 656e 7420 696e 2073 656c  component in sel
-0000a040: 663a 0a20 2020 2020 2020 2020 2020 2020  f:.             
-0000a050: 2020 2063 6f6d 706f 6e65 6e74 2e5f 7365     component._se
-0000a060: 745f 7061 7265 6e74 2873 656c 6629 0a0a  t_parent(self)..
-0000a070: 2020 2020 6465 6620 5f69 735f 6f6e 655f      def _is_one_
-0000a080: 6f66 5f6d 795f 6669 7273 745f 6c65 6176  of_my_first_leav
-0000a090: 6573 2873 656c 662c 206c 6561 6629 3a0a  es(self, leaf):.
-0000a0a0: 2020 2020 2020 2020 7265 7475 726e 206c          return l
-0000a0b0: 6561 6620 696e 2073 656c 662e 5f67 6574  eaf in self._get
-0000a0c0: 5f64 6573 6365 6e64 616e 7473 5f73 7461  _descendants_sta
-0000a0d0: 7274 696e 675f 7769 7468 2829 0a0a 2020  rting_with()..  
-0000a0e0: 2020 6465 6620 5f69 735f 6f6e 655f 6f66    def _is_one_of
-0000a0f0: 5f6d 795f 6c61 7374 5f6c 6561 7665 7328  _my_last_leaves(
-0000a100: 7365 6c66 2c20 6c65 6166 293a 0a20 2020  self, leaf):.   
-0000a110: 2020 2020 2072 6574 7572 6e20 6c65 6166       return leaf
-0000a120: 2069 6e20 7365 6c66 2e5f 6765 745f 6465   in self._get_de
-0000a130: 7363 656e 6461 6e74 735f 7374 6f70 7069  scendants_stoppi
-0000a140: 6e67 5f77 6974 6828 290a 0a20 2020 2064  ng_with()..    d
-0000a150: 6566 205f 7061 7273 655f 7374 7269 6e67  ef _parse_string
-0000a160: 2873 656c 662c 2073 7472 696e 672c 202a  (self, string, *
-0000a170: 2c20 6c61 6e67 7561 6765 3d22 656e 676c  , language="engl
-0000a180: 6973 6822 293a 0a20 2020 2020 2020 2075  ish"):.        u
-0000a190: 7365 725f 696e 7075 7420 3d20 7374 7269  ser_input = stri
-0000a1a0: 6e67 2e73 7472 6970 2829 0a20 2020 2020  ng.strip().     
-0000a1b0: 2020 2069 6620 6e6f 7420 7573 6572 5f69     if not user_i
-0000a1c0: 6e70 7574 2e73 7461 7274 7377 6974 6828  nput.startswith(
-0000a1d0: 223c 3c22 2920 6f72 206e 6f74 2075 7365  "<<") or not use
-0000a1e0: 725f 696e 7075 742e 656e 6473 7769 7468  r_input.endswith
-0000a1f0: 2822 3e3e 2229 3a0a 2020 2020 2020 2020  (">>"):.        
-0000a200: 2020 2020 7573 6572 5f69 6e70 7574 203d      user_input =
-0000a210: 2066 227b 7b20 7b75 7365 725f 696e 7075   f"{{ {user_inpu
-0000a220: 747d 207d 7d22 0a20 2020 2020 2020 2070  t} }}".        p
-0000a230: 6172 7365 6420 3d20 7365 6c66 2e5f 7061  arsed = self._pa
-0000a240: 7273 655f 6c69 6c79 706f 6e64 5f73 7472  rse_lilypond_str
-0000a250: 696e 6728 7573 6572 5f69 6e70 7574 2c20  ing(user_input, 
-0000a260: 6c61 6e67 7561 6765 3d6c 616e 6775 6167  language=languag
-0000a270: 6529 0a20 2020 2020 2020 2061 7373 6572  e).        asser
-0000a280: 7420 6973 696e 7374 616e 6365 2870 6172  t isinstance(par
-0000a290: 7365 642c 2043 6f6e 7461 696e 6572 290a  sed, Container).
-0000a2a0: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-0000a2b0: 6172 7365 640a 0a20 2020 2064 6566 205f  arsed..    def _
-0000a2c0: 7363 616c 6528 7365 6c66 2c20 6d75 6c74  scale(self, mult
-0000a2d0: 6970 6c69 6572 293a 0a20 2020 2020 2020  iplier):.       
-0000a2e0: 2066 6f72 2069 7465 6d20 696e 206c 6973   for item in lis
-0000a2f0: 7428 7365 6c66 293a 0a20 2020 2020 2020  t(self):.       
-0000a300: 2020 2020 2069 7465 6d2e 5f73 6361 6c65       item._scale
-0000a310: 286d 756c 7469 706c 6965 7229 0a0a 2020  (multiplier)..  
-0000a320: 2020 2323 2320 5055 424c 4943 2050 524f    ### PUBLIC PRO
-0000a330: 5045 5254 4945 5320 2323 230a 0a20 2020  PERTIES ###..   
-0000a340: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
-0000a350: 6566 2063 6f6d 706f 6e65 6e74 7328 7365  ef components(se
-0000a360: 6c66 2920 2d3e 2074 7570 6c65 3a0a 2020  lf) -> tuple:.  
-0000a370: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000a380: 2020 4765 7473 2063 6f6d 706f 6e65 6e74    Gets component
-0000a390: 7320 696e 2063 6f6e 7461 696e 6572 2e0a  s in container..
-0000a3a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000a3b0: 2020 2020 7265 7475 726e 2074 7570 6c65      return tuple
-0000a3c0: 2873 656c 662e 5f63 6f6d 706f 6e65 6e74  (self._component
-0000a3d0: 7329 0a0a 2020 2020 4070 726f 7065 7274  s)..    @propert
-0000a3e0: 790a 2020 2020 6465 6620 6964 656e 7469  y.    def identi
-0000a3f0: 6669 6572 2873 656c 6629 202d 3e20 7374  fier(self) -> st
-0000a400: 7220 7c20 4e6f 6e65 3a0a 2020 2020 2020  r | None:.      
-0000a410: 2020 7222 2222 0a20 2020 2020 2020 2047    r""".        G
-0000a420: 6574 7320 616e 6420 7365 7473 2062 7261  ets and sets bra
-0000a430: 636b 6574 2063 6f6d 6d65 6e74 2e0a 0a20  cket comment... 
-0000a440: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
-0000a450: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
-0000a460: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0000a470: 636f 6e74 6169 6e65 7220 3d20 6162 6a61  container = abja
-0000a480: 642e 436f 6e74 6169 6e65 7228 0a20 2020  d.Container(.   
-0000a490: 2020 2020 2020 2020 202e 2e2e 2020 2020           ...    
-0000a4a0: 2022 6327 3420 6427 3420 6527 3420 6627   "c'4 d'4 e'4 f'
-0000a4b0: 3422 2c0a 2020 2020 2020 2020 2020 2020  4",.            
-0000a4c0: 2e2e 2e20 2020 2020 6964 656e 7469 6669  ...     identifi
-0000a4d0: 6572 3d27 252a 2520 4142 272c 0a20 2020  er='%*% AB',.   
-0000a4e0: 2020 2020 2020 2020 202e 2e2e 2020 2020           ...    
-0000a4f0: 2029 0a20 2020 2020 2020 2020 2020 203e   ).            >
-0000a500: 3e3e 2061 626a 6164 2e73 686f 7728 636f  >> abjad.show(co
-0000a510: 6e74 6169 6e65 7229 2023 2064 6f63 7465  ntainer) # docte
-0000a520: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-0000a530: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
-0000a540: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
-0000a550: 6e64 2863 6f6e 7461 696e 6572 290a 2020  nd(container).  
-0000a560: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-0000a570: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
-0000a580: 2020 2020 2020 2020 7b20 2020 252a 2520          {   %*% 
-0000a590: 4142 0a20 2020 2020 2020 2020 2020 2020  AB.             
-0000a5a0: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
-0000a5b0: 2020 2020 2020 2064 2734 0a20 2020 2020         d'4.     
-0000a5c0: 2020 2020 2020 2020 2020 2065 2734 0a20             e'4. 
-0000a5d0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0000a5e0: 2734 0a20 2020 2020 2020 2020 2020 207d  '4.            }
-0000a5f0: 2020 2025 2a25 2041 420a 0a20 2020 2020     %*% AB..     
-0000a600: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
-0000a610: 6574 7572 6e20 7365 6c66 2e5f 6964 656e  eturn self._iden
-0000a620: 7469 6669 6572 0a0a 2020 2020 4069 6465  tifier..    @ide
-0000a630: 6e74 6966 6965 722e 7365 7474 6572 0a20  ntifier.setter. 
-0000a640: 2020 2064 6566 2069 6465 6e74 6966 6965     def identifie
-0000a650: 7228 7365 6c66 2c20 6172 6775 6d65 6e74  r(self, argument
-0000a660: 293a 0a20 2020 2020 2020 2061 7373 6572  ):.        asser
-0000a670: 7420 6973 696e 7374 616e 6365 2861 7267  t isinstance(arg
-0000a680: 756d 656e 742c 2073 7472 207c 2074 7970  ument, str | typ
-0000a690: 6528 4e6f 6e65 2929 2c20 7265 7072 2861  e(None)), repr(a
-0000a6a0: 7267 756d 656e 7429 0a20 2020 2020 2020  rgument).       
-0000a6b0: 2073 656c 662e 5f69 6465 6e74 6966 6965   self._identifie
-0000a6c0: 723a 2073 7472 207c 204e 6f6e 6520 3d20  r: str | None = 
-0000a6d0: 6172 6775 6d65 6e74 0a0a 2020 2020 4070  argument..    @p
-0000a6e0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
-0000a6f0: 6e61 6d65 2873 656c 6629 202d 3e20 7374  name(self) -> st
-0000a700: 7220 7c20 4e6f 6e65 3a0a 2020 2020 2020  r | None:.      
-0000a710: 2020 7222 2222 0a20 2020 2020 2020 2047    r""".        G
-0000a720: 6574 7320 616e 6420 7365 7473 206e 616d  ets and sets nam
-0000a730: 6520 6f66 2063 6f6e 7461 696e 6572 2e0a  e of container..
-0000a740: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
-0000a750: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
-0000a760: 0a0a 2020 2020 2020 2020 2020 2020 4765  ..            Ge
-0000a770: 7473 2063 6f6e 7461 696e 6572 206e 616d  ts container nam
-0000a780: 653a 0a0a 2020 2020 2020 2020 2020 2020  e:..            
-0000a790: 3e3e 3e20 636f 6e74 6169 6e65 7220 3d20  >>> container = 
-0000a7a0: 6162 6a61 642e 436f 6e74 6169 6e65 7228  abjad.Container(
-0000a7b0: 2263 2734 2064 2734 2065 2734 2066 2734  "c'4 d'4 e'4 f'4
-0000a7c0: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
-0000a7d0: 3e3e 2061 626a 6164 2e73 686f 7728 636f  >> abjad.show(co
-0000a7e0: 6e74 6169 6e65 7229 2023 2064 6f63 7465  ntainer) # docte
-0000a7f0: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-0000a800: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0000a810: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000a820: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0000a830: 6162 6a61 642e 6c69 6c79 706f 6e64 2863  abjad.lilypond(c
-0000a840: 6f6e 7461 696e 6572 290a 2020 2020 2020  ontainer).      
-0000a850: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-0000a860: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
-0000a870: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0000a880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a890: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
-0000a8a0: 2020 2020 2020 2020 2020 6427 340a 2020            d'4.  
-0000a8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8c0: 2020 6527 340a 2020 2020 2020 2020 2020    e'4.          
-0000a8d0: 2020 2020 2020 2020 2020 6627 340a 2020            f'4.  
-0000a8e0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-0000a8f0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0000a900: 2063 6f6e 7461 696e 6572 2e6e 616d 6520   container.name 
-0000a910: 6973 204e 6f6e 650a 2020 2020 2020 2020  is None.        
-0000a920: 2020 2020 5472 7565 0a0a 2020 2020 2020      True..      
-0000a930: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
-0000a940: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
-0000a950: 2020 2020 2020 2053 6574 7320 636f 6e74         Sets cont
-0000a960: 6169 6e65 7220 6e61 6d65 3a0a 0a20 2020  ainer name:..   
-0000a970: 2020 2020 2020 2020 203e 3e3e 2063 6f6e           >>> con
-0000a980: 7461 696e 6572 203d 2061 626a 6164 2e43  tainer = abjad.C
-0000a990: 6f6e 7461 696e 6572 280a 2020 2020 2020  ontainer(.      
-0000a9a0: 2020 2020 2020 2e2e 2e20 2020 2020 2263        ...     "c
-0000a9b0: 2734 2064 2734 2065 2734 2066 2734 222c  '4 d'4 e'4 f'4",
-0000a9c0: 0a20 2020 2020 2020 2020 2020 202e 2e2e  .            ...
-0000a9d0: 2020 2020 206e 616d 653d 2753 7065 6369       name='Speci
-0000a9e0: 616c 272c 0a20 2020 2020 2020 2020 2020  al',.           
-0000a9f0: 202e 2e2e 2020 2020 2029 0a20 2020 2020   ...     ).     
-0000aa00: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-0000aa10: 2e73 686f 7728 636f 6e74 6169 6e65 7229  .show(container)
-0000aa20: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
-0000aa30: 500a 0a20 2020 2020 2020 2020 2020 203e  P..            >
-0000aa40: 3e3e 2063 6f6e 7461 696e 6572 2e6e 616d  >> container.nam
-0000aa50: 650a 2020 2020 2020 2020 2020 2020 2753  e.            'S
-0000aa60: 7065 6369 616c 270a 0a20 2020 2020 2020  pecial'..       
-0000aa70: 2020 2020 2043 6f6e 7461 696e 6572 206e       Container n
-0000aa80: 616d 6520 646f 6573 206e 6f74 2061 7070  ame does not app
-0000aa90: 6561 7220 696e 204c 696c 7950 6f6e 6420  ear in LilyPond 
-0000aaa0: 6f75 7470 7574 3a0a 0a20 2020 2020 2020  output:..       
-0000aab0: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
-0000aac0: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
-0000aad0: 2863 6f6e 7461 696e 6572 290a 2020 2020  (container).    
-0000aae0: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-0000aaf0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-0000ab00: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-0000ab10: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
-0000ab20: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
-0000ab30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab40: 6527 340a 2020 2020 2020 2020 2020 2020  e'4.            
-0000ab50: 2020 2020 6627 340a 2020 2020 2020 2020      f'4.        
-0000ab60: 2020 2020 7d0a 0a20 2020 2020 2020 2022      }..        "
-0000ab70: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
-0000ab80: 6e20 7365 6c66 2e5f 6e61 6d65 0a0a 2020  n self._name..  
-0000ab90: 2020 406e 616d 652e 7365 7474 6572 0a20    @name.setter. 
-0000aba0: 2020 2064 6566 206e 616d 6528 7365 6c66     def name(self
-0000abb0: 2c20 6172 6775 6d65 6e74 293a 0a20 2020  , argument):.   
-0000abc0: 2020 2020 2061 7373 6572 7420 6973 696e       assert isin
-0000abd0: 7374 616e 6365 2861 7267 756d 656e 742c  stance(argument,
-0000abe0: 2073 7472 207c 2074 7970 6528 4e6f 6e65   str | type(None
-0000abf0: 2929 0a20 2020 2020 2020 206f 6c64 5f6e  )).        old_n
-0000ac00: 616d 6520 3d20 7365 6c66 2e5f 6e61 6d65  ame = self._name
-0000ac10: 0a20 2020 2020 2020 2070 6172 656e 7420  .        parent 
-0000ac20: 3d20 7365 6c66 2e5f 7061 7265 6e74 0a20  = self._parent. 
-0000ac30: 2020 2020 2020 2077 6869 6c65 2070 6172         while par
-0000ac40: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
-0000ac50: 0a20 2020 2020 2020 2020 2020 206e 616d  .            nam
-0000ac60: 6564 5f63 6869 6c64 7265 6e20 3d20 7061  ed_children = pa
-0000ac70: 7265 6e74 2e5f 6e61 6d65 645f 6368 696c  rent._named_chil
-0000ac80: 6472 656e 0a20 2020 2020 2020 2020 2020  dren.           
-0000ac90: 2069 6620 6f6c 645f 6e61 6d65 2069 7320   if old_name is 
-0000aca0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000acb0: 2020 2020 2020 2020 2020 6e61 6d65 645f            named_
-0000acc0: 6368 696c 6472 656e 5b6f 6c64 5f6e 616d  children[old_nam
-0000acd0: 655d 2e72 656d 6f76 6528 7365 6c66 290a  e].remove(self).
-0000ace0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000acf0: 6966 206e 6f74 206e 616d 6564 5f63 6869  if not named_chi
-0000ad00: 6c64 7265 6e5b 6f6c 645f 6e61 6d65 5d3a  ldren[old_name]:
-0000ad10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ad20: 2020 2020 2064 656c 206e 616d 6564 5f63       del named_c
-0000ad30: 6869 6c64 7265 6e5b 6f6c 645f 6e61 6d65  hildren[old_name
-0000ad40: 5d0a 2020 2020 2020 2020 2020 2020 6966  ].            if
-0000ad50: 2061 7267 756d 656e 7420 6973 206e 6f74   argument is not
-0000ad60: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0000ad70: 2020 2020 2020 2069 6620 6172 6775 6d65         if argume
-0000ad80: 6e74 206e 6f74 2069 6e20 6e61 6d65 645f  nt not in named_
-0000ad90: 6368 696c 6472 656e 3a0a 2020 2020 2020  children:.      
-0000ada0: 2020 2020 2020 2020 2020 2020 2020 6e61                na
-0000adb0: 6d65 645f 6368 696c 6472 656e 5b61 7267  med_children[arg
-0000adc0: 756d 656e 745d 203d 205b 7365 6c66 5d0a  ument] = [self].
-0000add0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ade0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000adf0: 2020 2020 2020 2020 2020 6e61 6d65 645f            named_
-0000ae00: 6368 696c 6472 656e 5b61 7267 756d 656e  children[argumen
-0000ae10: 745d 2e61 7070 656e 6428 7365 6c66 290a  t].append(self).
-0000ae20: 2020 2020 2020 2020 2020 2020 7061 7265              pare
-0000ae30: 6e74 203d 2070 6172 656e 742e 5f70 6172  nt = parent._par
-0000ae40: 656e 740a 2020 2020 2020 2020 7365 6c66  ent.        self
-0000ae50: 2e5f 6e61 6d65 203d 2061 7267 756d 656e  ._name = argumen
-0000ae60: 740a 0a20 2020 2040 7072 6f70 6572 7479  t..    @property
-0000ae70: 0a20 2020 2064 6566 2073 696d 756c 7461  .    def simulta
-0000ae80: 6e65 6f75 7328 7365 6c66 2920 2d3e 2062  neous(self) -> b
-0000ae90: 6f6f 6c20 7c20 4e6f 6e65 3a0a 2020 2020  ool | None:.    
-0000aea0: 2020 2020 7222 2222 0a20 2020 2020 2020      r""".       
-0000aeb0: 2049 7320 7472 7565 2077 6865 6e20 636f   Is true when co
-0000aec0: 6e74 6169 6e65 7220 6973 2073 696d 756c  ntainer is simul
-0000aed0: 7461 6e65 6f75 732e 0a0a 2020 2020 2020  taneous...      
-0000aee0: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
-0000aef0: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
-0000af00: 2020 2020 2020 2047 6574 7320 7369 6d75         Gets simu
-0000af10: 6c74 616e 6569 7479 2073 7461 7475 7320  ltaneity status 
-0000af20: 6f66 2063 6f6e 7461 696e 6572 3a0a 0a20  of container:.. 
-0000af30: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
-0000af40: 6f6e 7461 696e 6572 203d 2061 626a 6164  ontainer = abjad
-0000af50: 2e43 6f6e 7461 696e 6572 2829 0a20 2020  .Container().   
-0000af60: 2020 2020 2020 2020 203e 3e3e 2063 6f6e           >>> con
-0000af70: 7461 696e 6572 2e61 7070 656e 6428 6162  tainer.append(ab
-0000af80: 6a61 642e 566f 6963 6528 2263 2738 2064  jad.Voice("c'8 d
-0000af90: 2738 2065 2738 2229 290a 2020 2020 2020  '8 e'8")).      
-0000afa0: 2020 2020 2020 3e3e 3e20 636f 6e74 6169        >>> contai
-0000afb0: 6e65 722e 6170 7065 6e64 2861 626a 6164  ner.append(abjad
-0000afc0: 2e56 6f69 6365 2827 6734 2e27 2929 0a20  .Voice('g4.')). 
-0000afd0: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
-0000afe0: 626a 6164 2e73 686f 7728 636f 6e74 6169  bjad.show(contai
-0000aff0: 6e65 7229 2023 2064 6f63 7465 7374 3a20  ner) # doctest: 
-0000b000: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
-0000b010: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
-0000b020: 2020 2020 2020 2020 2020 2020 2020 203e                 >
-0000b030: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
-0000b040: 642e 6c69 6c79 706f 6e64 2863 6f6e 7461  d.lilypond(conta
-0000b050: 696e 6572 290a 2020 2020 2020 2020 2020  iner).          
-0000b060: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-0000b070: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-0000b080: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0000b090: 2020 2020 2020 2020 2020 2020 2020 5c6e                \n
-0000b0a0: 6577 2056 6f69 6365 0a20 2020 2020 2020  ew Voice.       
-0000b0b0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0000b0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0d0: 2020 2020 2020 2063 2738 0a20 2020 2020         c'8.     
-0000b0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0f0: 2020 2064 2738 0a20 2020 2020 2020 2020     d'8.         
-0000b100: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000b110: 2738 0a20 2020 2020 2020 2020 2020 2020  '8.             
-0000b120: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0000b130: 2020 2020 2020 2020 2020 2020 205c 6e65               \ne
-0000b140: 7720 566f 6963 650a 2020 2020 2020 2020  w Voice.        
-0000b150: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0000b160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b170: 2020 2020 2020 6734 2e0a 2020 2020 2020        g4..      
-0000b180: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-0000b190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b1a0: 7d0a 0a20 2020 2020 2020 2020 2020 203e  }..            >
-0000b1b0: 3e3e 2063 6f6e 7461 696e 6572 2e73 696d  >> container.sim
-0000b1c0: 756c 7461 6e65 6f75 730a 2020 2020 2020  ultaneous.      
-0000b1d0: 2020 2020 2020 4661 6c73 650a 0a20 2020        False..   
-0000b1e0: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
-0000b1f0: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-0000b200: 2020 2020 2020 2020 2020 5365 7473 2073            Sets s
-0000b210: 696d 756c 7461 6e65 6974 7920 7374 6174  imultaneity stat
-0000b220: 7573 206f 6620 636f 6e74 6169 6e65 723a  us of container:
-0000b230: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0000b240: 3e20 636f 6e74 6169 6e65 7220 3d20 6162  > container = ab
-0000b250: 6a61 642e 436f 6e74 6169 6e65 7228 290a  jad.Container().
-0000b260: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0000b270: 636f 6e74 6169 6e65 722e 6170 7065 6e64  container.append
-0000b280: 2861 626a 6164 2e56 6f69 6365 2822 6327  (abjad.Voice("c'
-0000b290: 3820 6427 3820 6527 3822 2929 0a20 2020  8 d'8 e'8")).   
-0000b2a0: 2020 2020 2020 2020 203e 3e3e 2063 6f6e           >>> con
-0000b2b0: 7461 696e 6572 2e61 7070 656e 6428 6162  tainer.append(ab
-0000b2c0: 6a61 642e 566f 6963 6528 2767 342e 2729  jad.Voice('g4.')
-0000b2d0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-0000b2e0: 3e20 6162 6a61 642e 7368 6f77 2863 6f6e  > abjad.show(con
-0000b2f0: 7461 696e 6572 2920 2320 646f 6374 6573  tainer) # doctes
-0000b300: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-0000b310: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-0000b320: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b330: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-0000b340: 626a 6164 2e6c 696c 7970 6f6e 6428 636f  bjad.lilypond(co
-0000b350: 6e74 6169 6e65 7229 0a20 2020 2020 2020  ntainer).       
-0000b360: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
-0000b370: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
-0000b380: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-0000b390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3a0: 205c 6e65 7720 566f 6963 650a 2020 2020   \new Voice.    
-0000b3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3c0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0000b3d0: 2020 2020 2020 2020 2020 6327 380a 2020            c'8.  
-0000b3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3f0: 2020 2020 2020 6427 380a 2020 2020 2020        d'8.      
-0000b400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b410: 2020 6527 380a 2020 2020 2020 2020 2020    e'8.          
-0000b420: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-0000b430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b440: 5c6e 6577 2056 6f69 6365 0a20 2020 2020  \new Voice.     
-0000b450: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-0000b460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b470: 2020 2020 2020 2020 2067 342e 0a20 2020           g4..   
-0000b480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b490: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
-0000b4a0: 2020 207d 0a0a 2020 2020 2020 2020 2020     }..          
-0000b4b0: 2020 3e3e 3e20 636f 6e74 6169 6e65 722e    >>> container.
-0000b4c0: 7369 6d75 6c74 616e 656f 7573 203d 2054  simultaneous = T
-0000b4d0: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-0000b4e0: 3e3e 3e20 6162 6a61 642e 7368 6f77 2863  >>> abjad.show(c
-0000b4f0: 6f6e 7461 696e 6572 2920 2320 646f 6374  ontainer) # doct
-0000b500: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-0000b510: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-0000b520: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-0000b530: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-0000b540: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-0000b550: 636f 6e74 6169 6e65 7229 0a20 2020 2020  container).     
-0000b560: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
-0000b570: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
-0000b580: 2020 2020 2020 2020 2020 2020 203c 3c0a               <<.
-0000b590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b5a0: 2020 2020 5c6e 6577 2056 6f69 6365 0a20      \new Voice. 
-0000b5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b5c0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-0000b5d0: 2020 2020 2020 2020 2020 2020 2063 2738               c'8
-0000b5e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b5f0: 2020 2020 2020 2020 2064 2738 0a20 2020           d'8.   
-0000b600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b610: 2020 2020 2065 2738 0a20 2020 2020 2020       e'8.       
-0000b620: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
-0000b630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b640: 2020 205c 6e65 7720 566f 6963 650a 2020     \new Voice.  
-0000b650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b660: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0000b670: 2020 2020 2020 2020 2020 2020 6734 2e0a              g4..
-0000b680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b690: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
-0000b6a0: 2020 2020 2020 3e3e 0a0a 2020 2020 2020        >>..      
-0000b6b0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
-0000b6c0: 7475 726e 2073 656c 662e 5f69 735f 7369  turn self._is_si
-0000b6d0: 6d75 6c74 616e 656f 7573 0a0a 2020 2020  multaneous..    
-0000b6e0: 4073 696d 756c 7461 6e65 6f75 732e 7365  @simultaneous.se
-0000b6f0: 7474 6572 0a20 2020 2064 6566 2073 696d  tter.    def sim
-0000b700: 756c 7461 6e65 6f75 7328 7365 6c66 2c20  ultaneous(self, 
-0000b710: 6172 6775 6d65 6e74 293a 0a20 2020 2020  argument):.     
-0000b720: 2020 2069 6620 6172 6775 6d65 6e74 2069     if argument i
-0000b730: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-0000b740: 2020 2020 7265 7475 726e 0a20 2020 2020      return.     
-0000b750: 2020 2061 7373 6572 7420 6973 696e 7374     assert isinst
-0000b760: 616e 6365 2861 7267 756d 656e 742c 2062  ance(argument, b
-0000b770: 6f6f 6c29 2c20 7265 7072 2861 7267 756d  ool), repr(argum
-0000b780: 656e 7429 0a20 2020 2020 2020 2069 6620  ent).        if 
-0000b790: 6172 6775 6d65 6e74 2061 6e64 206e 6f74  argument and not
-0000b7a0: 2061 6c6c 2869 7369 6e73 7461 6e63 6528   all(isinstance(
-0000b7b0: 5f2c 2043 6f6e 7461 696e 6572 2920 666f  _, Container) fo
-0000b7c0: 7220 5f20 696e 2073 656c 6629 3a0a 2020  r _ in self):.  
-0000b7d0: 2020 2020 2020 2020 2020 6d65 7373 6167            messag
-0000b7e0: 6520 3d20 2273 696d 756c 7461 6e65 6f75  e = "simultaneou
-0000b7f0: 7320 636f 6e74 6169 6e65 7273 206d 7573  s containers mus
-0000b800: 7420 636f 6e74 6169 6e22 0a20 2020 2020  t contain".     
-0000b810: 2020 2020 2020 206d 6573 7361 6765 202b         message +
-0000b820: 3d20 2220 6f6e 6c79 206f 7468 6572 2063  = " only other c
-0000b830: 6f6e 7461 696e 6572 732e 220a 2020 2020  ontainers.".    
-0000b840: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-0000b850: 6c75 6545 7272 6f72 286d 6573 7361 6765  lueError(message
-0000b860: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
-0000b870: 6973 5f73 696d 756c 7461 6e65 6f75 7320  is_simultaneous 
-0000b880: 3d20 6172 6775 6d65 6e74 0a20 2020 2020  = argument.     
-0000b890: 2020 2073 656c 662e 5f75 7064 6174 655f     self._update_
-0000b8a0: 6c61 7465 7228 6f66 6673 6574 733d 5472  later(offsets=Tr
-0000b8b0: 7565 290a 0a20 2020 2023 2323 2050 5542  ue)..    ### PUB
-0000b8c0: 4c49 4320 4d45 5448 4f44 5320 2323 230a  LIC METHODS ###.
-0000b8d0: 0a20 2020 2064 6566 2061 7070 656e 6428  .    def append(
-0000b8e0: 7365 6c66 2c20 636f 6d70 6f6e 656e 743a  self, component:
-0000b8f0: 2043 6f6d 706f 6e65 6e74 2c20 2a2c 206c   Component, *, l
-0000b900: 616e 6775 6167 653a 2073 7472 203d 2022  anguage: str = "
-0000b910: 656e 676c 6973 6822 2920 2d3e 204e 6f6e  english") -> Non
-0000b920: 653a 0a20 2020 2020 2020 2072 2222 220a  e:.        r""".
-0000b930: 2020 2020 2020 2020 4170 7065 6e64 7320          Appends 
-0000b940: 6060 636f 6d70 6f6e 656e 7460 6020 746f  ``component`` to
-0000b950: 2063 6f6e 7461 696e 6572 2e0a 0a20 2020   container...   
-0000b960: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
-0000b970: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-0000b980: 2020 2020 2020 2020 2020 4170 7065 6e64            Append
-0000b990: 7320 6e6f 7465 2074 6f20 636f 6e74 6169  s note to contai
-0000b9a0: 6e65 723a 0a0a 2020 2020 2020 2020 2020  ner:..          
-0000b9b0: 2020 3e3e 3e20 636f 6e74 6169 6e65 7220    >>> container 
-0000b9c0: 3d20 6162 6a61 642e 436f 6e74 6169 6e65  = abjad.Containe
-0000b9d0: 7228 2263 2734 2028 2064 2734 2066 2734  r("c'4 ( d'4 f'4
-0000b9e0: 2029 2229 0a20 2020 2020 2020 2020 2020   )").           
-0000b9f0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-0000ba00: 636f 6e74 6169 6e65 7229 2023 2064 6f63  container) # doc
-0000ba10: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
-0000ba20: 2020 2020 2020 2020 202e 2e20 2064 6f63           ..  doc
-0000ba30: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
-0000ba40: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
-0000ba50: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
-0000ba60: 2863 6f6e 7461 696e 6572 290a 2020 2020  (container).    
-0000ba70: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0000ba80: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
-0000ba90: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-0000baa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bab0: 2020 2020 6327 340a 2020 2020 2020 2020      c'4.        
-0000bac0: 2020 2020 2020 2020 2020 2020 280a 2020              (.  
-0000bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bae0: 2020 6427 340a 2020 2020 2020 2020 2020    d'4.          
-0000baf0: 2020 2020 2020 2020 2020 6627 340a 2020            f'4.  
-0000bb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb10: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-0000bb20: 2020 2020 7d0a 0a20 2020 2020 2020 2020      }..         
-0000bb30: 2020 203e 3e3e 2063 6f6e 7461 696e 6572     >>> container
-0000bb40: 2e61 7070 656e 6428 6162 6a61 642e 4e6f  .append(abjad.No
-0000bb50: 7465 2822 6527 3422 2929 0a20 2020 2020  te("e'4")).     
-0000bb60: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-0000bb70: 2e73 686f 7728 636f 6e74 6169 6e65 7229  .show(container)
-0000bb80: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
-0000bb90: 500a 0a20 2020 2020 2020 2020 2020 202e  P..            .
-0000bba0: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
-0000bbb0: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
-0000bbc0: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
-0000bbd0: 6c79 706f 6e64 2863 6f6e 7461 696e 6572  lypond(container
-0000bbe0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000bbf0: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
-0000bc00: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-0000bc10: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-0000bc20: 2020 2020 2020 2020 2020 6327 340a 2020            c'4.  
-0000bc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc40: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
-0000bc50: 2020 2020 2020 2020 6427 340a 2020 2020          d'4.    
-0000bc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc70: 6627 340a 2020 2020 2020 2020 2020 2020  f'4.            
-0000bc80: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000bc90: 2020 2020 2020 2020 2020 2020 2020 6527                e'
-0000bca0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0000bcb0: 2020 7d0a 0a20 2020 2020 2020 2022 2222    }..        """
-0000bcc0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-0000bcd0: 7374 616e 6365 2863 6f6d 706f 6e65 6e74  stance(component
-0000bce0: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
-0000bcf0: 2020 2020 7365 6c65 6374 696f 6e20 3d20      selection = 
-0000bd00: 7365 6c66 2e5f 7061 7273 655f 7374 7269  self._parse_stri
-0000bd10: 6e67 2863 6f6d 706f 6e65 6e74 2c20 6c61  ng(component, la
-0000bd20: 6e67 7561 6765 3d6c 616e 6775 6167 6529  nguage=language)
-0000bd30: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
-0000bd40: 6572 7420 6c65 6e28 7365 6c65 6374 696f  ert len(selectio
-0000bd50: 6e29 203d 3d20 310a 2020 2020 2020 2020  n) == 1.        
-0000bd60: 2020 2020 636f 6d70 6f6e 656e 7420 3d20      component = 
-0000bd70: 7365 6c65 6374 696f 6e5b 305d 0a20 2020  selection[0].   
-0000bd80: 2020 2020 2061 7373 6572 7420 6973 696e       assert isin
-0000bd90: 7374 616e 6365 2863 6f6d 706f 6e65 6e74  stance(component
-0000bda0: 2c20 436f 6d70 6f6e 656e 7429 2c20 7265  , Component), re
-0000bdb0: 7072 2863 6f6d 706f 6e65 6e74 290a 2020  pr(component).  
-0000bdc0: 2020 2020 2020 7365 6c66 2e5f 5f73 6574        self.__set
-0000bdd0: 6974 656d 5f5f 2873 6c69 6365 286c 656e  item__(slice(len
-0000bde0: 2873 656c 6629 2c20 6c65 6e28 7365 6c66  (self), len(self
-0000bdf0: 2929 2c20 5b63 6f6d 706f 6e65 6e74 5d29  )), [component])
-0000be00: 0a0a 2020 2020 6465 6620 6578 7465 6e64  ..    def extend
-0000be10: 2873 656c 662c 2061 7267 756d 656e 742c  (self, argument,
-0000be20: 202a 2c20 6c61 6e67 7561 6765 3a20 7374   *, language: st
-0000be30: 7220 3d20 2265 6e67 6c69 7368 2229 202d  r = "english") -
-0000be40: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-0000be50: 7222 2222 0a20 2020 2020 2020 2045 7874  r""".        Ext
-0000be60: 656e 6473 2063 6f6e 7461 696e 6572 2077  ends container w
-0000be70: 6974 6820 6060 6172 6775 6d65 6e74 6060  ith ``argument``
-0000be80: 2e0a 0a20 2020 2020 2020 202e 2e20 2063  ...        ..  c
-0000be90: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
-0000bea0: 6c65 0a0a 2020 2020 2020 2020 2020 2020  le..            
-0000beb0: 4578 7465 6e64 7320 636f 6e74 6169 6e65  Extends containe
-0000bec0: 7220 7769 7468 2074 6872 6565 206e 6f74  r with three not
-0000bed0: 6573 3a0a 0a20 2020 2020 2020 2020 2020  es:..           
-0000bee0: 203e 3e3e 2063 6f6e 7461 696e 6572 203d   >>> container =
-0000bef0: 2061 626a 6164 2e43 6f6e 7461 696e 6572   abjad.Container
-0000bf00: 2822 6327 3420 2820 6427 3420 6627 3420  ("c'4 ( d'4 f'4 
-0000bf10: 2922 290a 2020 2020 2020 2020 2020 2020  )").            
-0000bf20: 3e3e 3e20 6162 6a61 642e 7368 6f77 2863  >>> abjad.show(c
-0000bf30: 6f6e 7461 696e 6572 2920 2320 646f 6374  ontainer) # doct
-0000bf40: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-0000bf50: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-0000bf60: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-0000bf70: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-0000bf80: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-0000bf90: 636f 6e74 6169 6e65 7229 0a20 2020 2020  container).     
-0000bfa0: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
-0000bfb0: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
-0000bfc0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0000bfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bfe0: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
-0000bff0: 2020 2020 2020 2020 2020 2028 0a20 2020             (.   
+00002e80: 2020 6e61 6d65 645f 6368 696c 6472 656e    named_children
+00002e90: 5b6e 616d 655d 203d 2063 6f70 792e 636f  [name] = copy.co
+00002ea0: 7079 286e 616d 655f 6469 6374 696f 6e61  py(name_dictiona
+00002eb0: 7279 5b6e 616d 655d 290a 0a20 2020 2064  ry[name])..    d
+00002ec0: 6566 205f 7365 745f 7061 7265 6e74 2873  ef _set_parent(s
+00002ed0: 656c 662c 206e 6577 5f70 6172 656e 7429  elf, new_parent)
+00002ee0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00002ef0: 2020 2020 2020 4e6f 7420 636f 6d70 6f73        Not compos
+00002f00: 6572 2d73 6166 652e 0a20 2020 2020 2020  er-safe..       
+00002f10: 2022 2222 0a20 2020 2020 2020 206e 616d   """.        nam
+00002f20: 6564 5f63 6869 6c64 7265 6e20 3d20 7365  ed_children = se
+00002f30: 6c66 2e5f 6361 6368 655f 6e61 6d65 645f  lf._cache_named_
+00002f40: 6368 696c 6472 656e 2829 0a20 2020 2020  children().     
+00002f50: 2020 2073 656c 662e 5f72 656d 6f76 655f     self._remove_
+00002f60: 6e61 6d65 645f 6368 696c 6472 656e 5f66  named_children_f
+00002f70: 726f 6d5f 7061 7265 6e74 6167 6528 6e61  rom_parentage(na
+00002f80: 6d65 645f 6368 696c 6472 656e 290a 2020  med_children).  
+00002f90: 2020 2020 2020 7365 6c66 2e5f 7265 6d6f        self._remo
+00002fa0: 7665 5f66 726f 6d5f 7061 7265 6e74 2829  ve_from_parent()
+00002fb0: 0a20 2020 2020 2020 2073 656c 662e 5f70  .        self._p
+00002fc0: 6172 656e 7420 3d20 6e65 775f 7061 7265  arent = new_pare
+00002fd0: 6e74 0a20 2020 2020 2020 2073 656c 662e  nt.        self.
+00002fe0: 5f72 6573 746f 7265 5f6e 616d 6564 5f63  _restore_named_c
+00002ff0: 6869 6c64 7265 6e5f 746f 5f70 6172 656e  hildren_to_paren
+00003000: 7461 6765 286e 616d 6564 5f63 6869 6c64  tage(named_child
+00003010: 7265 6e29 0a20 2020 2020 2020 2073 656c  ren).        sel
+00003020: 662e 5f75 7064 6174 655f 6c61 7465 7228  f._update_later(
+00003030: 6f66 6673 6574 733d 5472 7565 290a 0a20  offsets=True).. 
+00003040: 2020 2064 6566 205f 7369 626c 696e 6728     def _sibling(
+00003050: 7365 6c66 2c20 6e29 3a0a 2020 2020 2020  self, n):.      
+00003060: 2020 6173 7365 7274 206e 2069 6e20 282d    assert n in (-
+00003070: 312c 2030 2c20 3129 2c20 7265 7072 286e  1, 0, 1), repr(n
+00003080: 290a 2020 2020 2020 2020 6966 206e 203d  ).        if n =
+00003090: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
+000030a0: 2072 6574 7572 6e20 7365 6c66 0a20 2020   return self.   
+000030b0: 2020 2020 2066 6f72 2070 6172 656e 7420       for parent 
+000030c0: 696e 2073 656c 662e 5f67 6574 5f70 6172  in self._get_par
+000030d0: 656e 7461 6765 2829 3a0a 2020 2020 2020  entage():.      
+000030e0: 2020 2020 2020 7369 626c 696e 6720 3d20        sibling = 
+000030f0: 7061 7265 6e74 2e5f 6765 745f 7369 626c  parent._get_sibl
+00003100: 696e 6728 5f6d 6174 682e 7369 676e 286e  ing(_math.sign(n
+00003110: 2929 0a20 2020 2020 2020 2020 2020 2069  )).            i
+00003120: 6620 7369 626c 696e 6720 6973 206e 6f74  f sibling is not
+00003130: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00003140: 2020 2020 2020 2072 6574 7572 6e20 7369         return si
+00003150: 626c 696e 670a 0a20 2020 2064 6566 205f  bling..    def _
+00003160: 7461 675f 7374 7269 6e67 7328 7365 6c66  tag_strings(self
+00003170: 2c20 7374 7269 6e67 7329 3a0a 2020 2020  , strings):.    
+00003180: 2020 2020 6966 2073 656c 662e 7461 6720      if self.tag 
+00003190: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000031a0: 2020 2020 2020 2020 2073 7472 696e 6773           strings
+000031b0: 203d 205f 7461 672e 646f 7562 6c65 5f74   = _tag.double_t
+000031c0: 6167 2873 7472 696e 6773 2c20 7365 6c66  ag(strings, self
+000031d0: 2e74 6167 290a 2020 2020 2020 2020 7265  .tag).        re
+000031e0: 7475 726e 2073 7472 696e 6773 0a0a 2020  turn strings..  
+000031f0: 2020 6465 6620 5f75 7064 6174 655f 6c61    def _update_la
+00003200: 7465 7228 7365 6c66 2c20 6f66 6673 6574  ter(self, offset
+00003210: 733d 4661 6c73 652c 206f 6666 7365 7473  s=False, offsets
+00003220: 5f69 6e5f 7365 636f 6e64 733d 4661 6c73  _in_seconds=Fals
+00003230: 6529 3a0a 2020 2020 2020 2020 6173 7365  e):.        asse
+00003240: 7274 206f 6666 7365 7473 206f 7220 6f66  rt offsets or of
+00003250: 6673 6574 735f 696e 5f73 6563 6f6e 6473  fsets_in_seconds
+00003260: 0a20 2020 2020 2020 2066 6f72 2063 6f6d  .        for com
+00003270: 706f 6e65 6e74 2069 6e20 7365 6c66 2e5f  ponent in self._
+00003280: 6765 745f 7061 7265 6e74 6167 6528 293a  get_parentage():
+00003290: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000032a0: 6f66 6673 6574 733a 0a20 2020 2020 2020  offsets:.       
+000032b0: 2020 2020 2020 2020 2063 6f6d 706f 6e65           compone
+000032c0: 6e74 2e5f 6f66 6673 6574 735f 6172 655f  nt._offsets_are_
+000032d0: 6375 7272 656e 7420 3d20 4661 6c73 650a  current = False.
+000032e0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000032f0: 206f 6666 7365 7473 5f69 6e5f 7365 636f   offsets_in_seco
+00003300: 6e64 733a 0a20 2020 2020 2020 2020 2020  nds:.           
+00003310: 2020 2020 2063 6f6d 706f 6e65 6e74 2e5f       component._
+00003320: 6f66 6673 6574 735f 696e 5f73 6563 6f6e  offsets_in_secon
+00003330: 6473 5f61 7265 5f63 7572 7265 6e74 203d  ds_are_current =
+00003340: 2046 616c 7365 0a0a 2020 2020 2323 2320   False..    ### 
+00003350: 5055 424c 4943 2050 524f 5045 5254 4945  PUBLIC PROPERTIE
+00003360: 5320 2323 230a 0a20 2020 2040 7072 6f70  S ###..    @prop
+00003370: 6572 7479 0a20 2020 2064 6566 2074 6167  erty.    def tag
+00003380: 2873 656c 6629 202d 3e20 5f74 6167 2e54  (self) -> _tag.T
+00003390: 6167 207c 204e 6f6e 653a 0a20 2020 2020  ag | None:.     
+000033a0: 2020 2022 2222 0a20 2020 2020 2020 2047     """.        G
+000033b0: 6574 7320 636f 6d70 6f6e 656e 7420 7461  ets component ta
+000033c0: 672e 0a20 2020 2020 2020 2022 2222 0a20  g..        """. 
+000033d0: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
+000033e0: 7461 6720 6973 206e 6f74 204e 6f6e 653a  tag is not None:
+000033f0: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
+00003400: 6572 7420 6973 696e 7374 616e 6365 2873  ert isinstance(s
+00003410: 656c 662e 5f74 6167 2c20 5f74 6167 2e54  elf._tag, _tag.T
+00003420: 6167 292c 2072 6570 7228 7365 6c66 2e5f  ag), repr(self._
+00003430: 7461 6729 0a20 2020 2020 2020 2072 6574  tag).        ret
+00003440: 7572 6e20 7365 6c66 2e5f 7461 670a 0a0a  urn self._tag...
+00003450: 636c 6173 7320 4c65 6166 2843 6f6d 706f  class Leaf(Compo
+00003460: 6e65 6e74 293a 0a20 2020 2022 2222 0a20  nent):.    """. 
+00003470: 2020 204c 6561 6620 6261 7365 636c 6173     Leaf baseclas
+00003480: 732e 0a0a 2020 2020 4c65 6176 6573 2069  s...    Leaves i
+00003490: 6e63 6c75 6465 206e 6f74 6573 2c20 7265  nclude notes, re
+000034a0: 7374 732c 2063 686f 7264 7320 616e 6420  sts, chords and 
+000034b0: 736b 6970 732e 0a20 2020 2022 2222 0a0a  skips..    """..
+000034c0: 2020 2020 2323 2320 434c 4153 5320 5641      ### CLASS VA
+000034d0: 5249 4142 4c45 5320 2323 0a0a 2020 2020  RIABLES ##..    
+000034e0: 5f61 6c6c 6f77 6162 6c65 5f73 6974 6573  _allowable_sites
+000034f0: 203d 2028 0a20 2020 2020 2020 2022 6162   = (.        "ab
+00003500: 736f 6c75 7465 5f62 6566 6f72 6522 2c0a  solute_before",.
+00003510: 2020 2020 2020 2020 2262 6566 6f72 6522          "before"
+00003520: 2c0a 2020 2020 2020 2020 2261 6674 6572  ,.        "after
+00003530: 222c 0a20 2020 2020 2020 2022 6162 736f  ",.        "abso
+00003540: 6c75 7465 5f61 6674 6572 222c 0a20 2020  lute_after",.   
+00003550: 2029 0a0a 2020 2020 5f5f 736c 6f74 735f   )..    __slots_
+00003560: 5f20 3d20 280a 2020 2020 2020 2020 225f  _ = (.        "_
+00003570: 6166 7465 725f 6772 6163 655f 636f 6e74  after_grace_cont
+00003580: 6169 6e65 7222 2c0a 2020 2020 2020 2020  ainer",.        
+00003590: 225f 6265 666f 7265 5f67 7261 6365 5f63  "_before_grace_c
+000035a0: 6f6e 7461 696e 6572 222c 0a20 2020 2020  ontainer",.     
+000035b0: 2020 2022 5f6d 756c 7469 706c 6965 7222     "_multiplier"
+000035c0: 2c0a 2020 2020 2020 2020 225f 7772 6974  ,.        "_writ
+000035d0: 7465 6e5f 6475 7261 7469 6f6e 222c 0a20  ten_duration",. 
+000035e0: 2020 2029 0a0a 2020 2020 2323 2320 494e     )..    ### IN
+000035f0: 4954 4941 4c49 5a45 5220 2323 230a 0a20  ITIALIZER ###.. 
+00003600: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00003610: 0a20 2020 2020 2020 2073 656c 662c 2077  .        self, w
+00003620: 7269 7474 656e 5f64 7572 6174 696f 6e2c  ritten_duration,
+00003630: 202a 2c20 6d75 6c74 6970 6c69 6572 3d4e   *, multiplier=N
+00003640: 6f6e 652c 2074 6167 3a20 5f74 6167 2e54  one, tag: _tag.T
+00003650: 6167 203d 204e 6f6e 650a 2020 2020 2920  ag = None.    ) 
+00003660: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00003670: 2043 6f6d 706f 6e65 6e74 2e5f 5f69 6e69   Component.__ini
+00003680: 745f 5f28 7365 6c66 2c20 7461 673d 7461  t__(self, tag=ta
+00003690: 6729 0a20 2020 2020 2020 2073 656c 662e  g).        self.
+000036a0: 5f61 6674 6572 5f67 7261 6365 5f63 6f6e  _after_grace_con
+000036b0: 7461 696e 6572 203d 204e 6f6e 650a 2020  tainer = None.  
+000036c0: 2020 2020 2020 7365 6c66 2e5f 6265 666f        self._befo
+000036d0: 7265 5f67 7261 6365 5f63 6f6e 7461 696e  re_grace_contain
+000036e0: 6572 203d 204e 6f6e 650a 2020 2020 2020  er = None.      
+000036f0: 2020 7365 6c66 2e6d 756c 7469 706c 6965    self.multiplie
+00003700: 7220 3d20 6d75 6c74 6970 6c69 6572 0a20  r = multiplier. 
+00003710: 2020 2020 2020 2073 656c 662e 7772 6974         self.writ
+00003720: 7465 6e5f 6475 7261 7469 6f6e 203d 2077  ten_duration = w
+00003730: 7269 7474 656e 5f64 7572 6174 696f 6e0a  ritten_duration.
+00003740: 0a20 2020 2023 2323 2053 5045 4349 414c  .    ### SPECIAL
+00003750: 204d 4554 484f 4453 2023 2323 0a0a 2020   METHODS ###..  
+00003760: 2020 6465 6620 5f5f 636f 7079 5f5f 2873    def __copy__(s
+00003770: 656c 662c 202a 6172 6775 6d65 6e74 7329  elf, *arguments)
+00003780: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00003790: 2020 2020 2020 5368 616c 6c6f 7720 636f        Shallow co
+000037a0: 7069 6573 206c 6561 662e 0a20 2020 2020  pies leaf..     
+000037b0: 2020 2022 2222 0a20 2020 2020 2020 206c     """.        l
+000037c0: 6561 6620 3d20 436f 6d70 6f6e 656e 742e  eaf = Component.
+000037d0: 5f5f 636f 7079 5f5f 2873 656c 662c 202a  __copy__(self, *
+000037e0: 6172 6775 6d65 6e74 7329 0a20 2020 2020  arguments).     
+000037f0: 2020 206c 6561 662e 6d75 6c74 6970 6c69     leaf.multipli
+00003800: 6572 203d 2073 656c 662e 6d75 6c74 6970  er = self.multip
+00003810: 6c69 6572 0a20 2020 2020 2020 2062 6566  lier.        bef
+00003820: 6f72 655f 6772 6163 655f 636f 6e74 6169  ore_grace_contai
+00003830: 6e65 7220 3d20 7365 6c66 2e5f 6265 666f  ner = self._befo
+00003840: 7265 5f67 7261 6365 5f63 6f6e 7461 696e  re_grace_contain
+00003850: 6572 0a20 2020 2020 2020 2069 6620 6265  er.        if be
+00003860: 666f 7265 5f67 7261 6365 5f63 6f6e 7461  fore_grace_conta
+00003870: 696e 6572 2069 7320 6e6f 7420 4e6f 6e65  iner is not None
+00003880: 3a0a 2020 2020 2020 2020 2020 2020 6772  :.            gr
+00003890: 6163 655f 636f 6e74 6169 6e65 7220 3d20  ace_container = 
+000038a0: 6265 666f 7265 5f67 7261 6365 5f63 6f6e  before_grace_con
+000038b0: 7461 696e 6572 2e5f 636f 7079 5f77 6974  tainer._copy_wit
+000038c0: 685f 6368 696c 6472 656e 2829 0a20 2020  h_children().   
+000038d0: 2020 2020 2020 2020 2067 7261 6365 5f63           grace_c
+000038e0: 6f6e 7461 696e 6572 2e5f 6174 7461 6368  ontainer._attach
+000038f0: 286c 6561 6629 0a20 2020 2020 2020 2061  (leaf).        a
+00003900: 6674 6572 5f67 7261 6365 5f63 6f6e 7461  fter_grace_conta
+00003910: 696e 6572 203d 2073 656c 662e 5f61 6674  iner = self._aft
+00003920: 6572 5f67 7261 6365 5f63 6f6e 7461 696e  er_grace_contain
+00003930: 6572 0a20 2020 2020 2020 2069 6620 6166  er.        if af
+00003940: 7465 725f 6772 6163 655f 636f 6e74 6169  ter_grace_contai
+00003950: 6e65 7220 6973 206e 6f74 204e 6f6e 653a  ner is not None:
+00003960: 0a20 2020 2020 2020 2020 2020 2067 7261  .            gra
+00003970: 6365 5f63 6f6e 7461 696e 6572 203d 2061  ce_container = a
+00003980: 6674 6572 5f67 7261 6365 5f63 6f6e 7461  fter_grace_conta
+00003990: 696e 6572 2e5f 636f 7079 5f77 6974 685f  iner._copy_with_
+000039a0: 6368 696c 6472 656e 2829 0a20 2020 2020  children().     
+000039b0: 2020 2020 2020 2067 7261 6365 5f63 6f6e         grace_con
+000039c0: 7461 696e 6572 2e5f 6174 7461 6368 286c  tainer._attach(l
+000039d0: 6561 6629 0a20 2020 2020 2020 2072 6574  eaf).        ret
+000039e0: 7572 6e20 6c65 6166 0a0a 2020 2020 6465  urn leaf..    de
+000039f0: 6620 5f5f 6765 746e 6577 6172 6773 5f5f  f __getnewargs__
+00003a00: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00003a10: 2222 220a 2020 2020 2020 2020 4765 7473  """.        Gets
+00003a20: 206e 6577 2061 7267 756d 656e 7473 2e0a   new arguments..
+00003a30: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+00003a40: 2074 7570 6c65 2e0a 2020 2020 2020 2020   tuple..        
+00003a50: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+00003a60: 726e 2028 7365 6c66 2e77 7269 7474 656e  rn (self.written
+00003a70: 5f64 7572 6174 696f 6e2c 290a 0a20 2020  _duration,)..   
+00003a80: 2064 6566 205f 5f72 6570 725f 5f28 7365   def __repr__(se
+00003a90: 6c66 2920 2d3e 2073 7472 3a0a 2020 2020  lf) -> str:.    
+00003aa0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00003ab0: 4765 7473 2072 6570 722e 0a20 2020 2020  Gets repr..     
+00003ac0: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00003ad0: 6574 7572 6e20 6622 7b74 7970 6528 7365  eturn f"{type(se
+00003ae0: 6c66 292e 5f5f 6e61 6d65 5f5f 7d28 7b73  lf).__name__}({s
+00003af0: 656c 662e 5f67 6574 5f63 6f6d 7061 6374  elf._get_compact
+00003b00: 5f72 6570 7265 7365 6e74 6174 696f 6e28  _representation(
+00003b10: 2921 727d 2922 0a0a 2020 2020 2323 2320  )!r})"..    ### 
+00003b20: 5052 4956 4154 4520 4d45 5448 4f44 5320  PRIVATE METHODS 
+00003b30: 2323 230a 0a20 2020 2064 6566 205f 636f  ###..    def _co
+00003b40: 7079 5f6f 7665 7272 6964 655f 616e 645f  py_override_and_
+00003b50: 7365 745f 6672 6f6d 5f6c 6561 6628 7365  set_from_leaf(se
+00003b60: 6c66 2c20 6c65 6166 293a 0a20 2020 2020  lf, leaf):.     
+00003b70: 2020 2069 6620 6765 7461 7474 7228 6c65     if getattr(le
+00003b80: 6166 2c20 225f 6f76 6572 7269 6465 7322  af, "_overrides"
+00003b90: 2c20 4e6f 6e65 2920 6973 206e 6f74 204e  , None) is not N
+00003ba0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00003bb0: 2073 656c 662e 5f6f 7665 7272 6964 6573   self._overrides
+00003bc0: 203d 2063 6f70 792e 636f 7079 285f 6f76   = copy.copy(_ov
+00003bd0: 6572 7269 6465 732e 6f76 6572 7269 6465  errides.override
+00003be0: 286c 6561 6629 290a 2020 2020 2020 2020  (leaf)).        
+00003bf0: 6966 2067 6574 6174 7472 286c 6561 662c  if getattr(leaf,
+00003c00: 2022 5f6c 696c 7970 6f6e 645f 7365 7474   "_lilypond_sett
+00003c10: 696e 675f 6e61 6d65 5f6d 616e 6167 6572  ing_name_manager
+00003c20: 222c 204e 6f6e 6529 2069 7320 6e6f 7420  ", None) is not 
+00003c30: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00003c40: 2020 7365 6c66 2e5f 6c69 6c79 706f 6e64    self._lilypond
+00003c50: 5f73 6574 7469 6e67 5f6e 616d 655f 6d61  _setting_name_ma
+00003c60: 6e61 6765 7220 3d20 636f 7079 2e63 6f70  nager = copy.cop
+00003c70: 7928 5f6f 7665 7272 6964 6573 2e73 6574  y(_overrides.set
+00003c80: 7469 6e67 286c 6561 6629 290a 2020 2020  ting(leaf)).    
+00003c90: 2020 2020 666f 7220 7772 6170 7065 7220      for wrapper 
+00003ca0: 696e 206c 6561 662e 5f77 7261 7070 6572  in leaf._wrapper
+00003cb0: 733a 0a20 2020 2020 2020 2020 2020 2077  s:.            w
+00003cc0: 7261 7070 6572 5f20 3d20 636f 7079 2e63  rapper_ = copy.c
+00003cd0: 6f70 7928 7772 6170 7065 7229 0a20 2020  opy(wrapper).   
+00003ce0: 2020 2020 2020 2020 2077 7261 7070 6572           wrapper
+00003cf0: 5f2e 5f63 6f6d 706f 6e65 6e74 203d 2073  _._component = s
+00003d00: 656c 660a 2020 2020 2020 2020 2020 2020  elf.            
+00003d10: 7772 6170 7065 725f 2e5f 6269 6e64 5f63  wrapper_._bind_c
+00003d20: 6f6d 706f 6e65 6e74 2873 656c 6629 0a0a  omponent(self)..
+00003d30: 2020 2020 6465 6620 5f66 6f72 6d61 745f      def _format_
+00003d40: 6166 7465 725f 7369 7465 2873 656c 662c  after_site(self,
+00003d50: 2063 6f6e 7472 6962 7574 696f 6e73 293a   contributions):
+00003d60: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+00003d70: 3d20 5b5d 0a20 2020 2020 2020 2073 7472  = [].        str
+00003d80: 696e 6773 203d 2063 6f6e 7472 6962 7574  ings = contribut
+00003d90: 696f 6e73 2e61 6c70 6861 6265 7469 7a65  ions.alphabetize
+00003da0: 2863 6f6e 7472 6962 7574 696f 6e73 2e61  (contributions.a
+00003db0: 6674 6572 2e73 7465 6d5f 7472 656d 6f6c  fter.stem_tremol
+00003dc0: 6f73 290a 2020 2020 2020 2020 6966 2073  os).        if s
+00003dd0: 7472 696e 6773 3a0a 2020 2020 2020 2020  trings:.        
+00003de0: 2020 2020 7265 7375 6c74 2e61 7070 656e      result.appen
+00003df0: 6428 6622 2520 7b5f 636f 6e74 7269 6275  d(f"% {_contribu
+00003e00: 7469 6f6e 732e 5479 7065 732e 5354 454d  tions.Types.STEM
+00003e10: 5f54 5245 4d4f 4c4f 532e 6e61 6d65 7d3a  _TREMOLOS.name}:
+00003e20: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
+00003e30: 6573 756c 742e 6578 7465 6e64 2873 7472  esult.extend(str
+00003e40: 696e 6773 290a 2020 2020 2020 2020 7374  ings).        st
+00003e50: 7269 6e67 7320 3d20 636f 6e74 7269 6275  rings = contribu
+00003e60: 7469 6f6e 732e 616c 7068 6162 6574 697a  tions.alphabetiz
+00003e70: 6528 636f 6e74 7269 6275 7469 6f6e 732e  e(contributions.
+00003e80: 6166 7465 722e 6172 7469 6375 6c61 7469  after.articulati
+00003e90: 6f6e 7329 0a20 2020 2020 2020 2069 6620  ons).        if 
+00003ea0: 7374 7269 6e67 733a 0a20 2020 2020 2020  strings:.       
+00003eb0: 2020 2020 2072 6573 756c 742e 6170 7065       result.appe
+00003ec0: 6e64 2866 2225 207b 5f63 6f6e 7472 6962  nd(f"% {_contrib
+00003ed0: 7574 696f 6e73 2e54 7970 6573 2e41 5254  utions.Types.ART
+00003ee0: 4943 554c 4154 494f 4e53 2e6e 616d 657d  ICULATIONS.name}
+00003ef0: 3a22 290a 2020 2020 2020 2020 2020 2020  :").            
+00003f00: 7265 7375 6c74 2e65 7874 656e 6428 7374  result.extend(st
+00003f10: 7269 6e67 7329 0a20 2020 2020 2020 2073  rings).        s
+00003f20: 7472 696e 6773 203d 2063 6f6e 7472 6962  trings = contrib
+00003f30: 7574 696f 6e73 2e61 6c70 6861 6265 7469  utions.alphabeti
+00003f40: 7a65 2863 6f6e 7472 6962 7574 696f 6e73  ze(contributions
+00003f50: 2e61 6674 6572 2e6d 6172 6b75 7029 0a20  .after.markup). 
+00003f60: 2020 2020 2020 2069 6620 7374 7269 6e67         if string
+00003f70: 733a 0a20 2020 2020 2020 2020 2020 2072  s:.            r
+00003f80: 6573 756c 742e 6170 7065 6e64 2866 2225  esult.append(f"%
+00003f90: 207b 5f63 6f6e 7472 6962 7574 696f 6e73   {_contributions
+00003fa0: 2e54 7970 6573 2e4d 4152 4b55 502e 6e61  .Types.MARKUP.na
+00003fb0: 6d65 7d3a 2229 0a20 2020 2020 2020 2020  me}:").         
+00003fc0: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
+00003fd0: 2873 7472 696e 6773 290a 2020 2020 2020  (strings).      
+00003fe0: 2020 7374 7269 6e67 7320 3d20 636f 6e74    strings = cont
+00003ff0: 7269 6275 7469 6f6e 732e 616c 7068 6162  ributions.alphab
+00004000: 6574 697a 6528 636f 6e74 7269 6275 7469  etize(contributi
+00004010: 6f6e 732e 6166 7465 722e 7370 616e 6e65  ons.after.spanne
+00004020: 725f 7374 6f70 7329 0a20 2020 2020 2020  r_stops).       
+00004030: 2069 6620 7374 7269 6e67 733a 0a20 2020   if strings:.   
+00004040: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+00004050: 6170 7065 6e64 2866 2225 207b 5f63 6f6e  append(f"% {_con
+00004060: 7472 6962 7574 696f 6e73 2e54 7970 6573  tributions.Types
+00004070: 2e53 5041 4e4e 4552 5f53 544f 5053 2e6e  .SPANNER_STOPS.n
+00004080: 616d 657d 3a22 290a 2020 2020 2020 2020  ame}:").        
+00004090: 2020 2020 7265 7375 6c74 2e65 7874 656e      result.exten
+000040a0: 6428 7374 7269 6e67 7329 0a20 2020 2020  d(strings).     
+000040b0: 2020 2073 7472 696e 6773 203d 2063 6f6e     strings = con
+000040c0: 7472 6962 7574 696f 6e73 2e61 6c70 6861  tributions.alpha
+000040d0: 6265 7469 7a65 2863 6f6e 7472 6962 7574  betize(contribut
+000040e0: 696f 6e73 2e61 6674 6572 2e73 7461 7274  ions.after.start
+000040f0: 5f62 6561 6d29 0a20 2020 2020 2020 2069  _beam).        i
+00004100: 6620 7374 7269 6e67 733a 0a20 2020 2020  f strings:.     
+00004110: 2020 2020 2020 2072 6573 756c 742e 6170         result.ap
+00004120: 7065 6e64 2866 2225 207b 5f63 6f6e 7472  pend(f"% {_contr
+00004130: 6962 7574 696f 6e73 2e54 7970 6573 2e53  ibutions.Types.S
+00004140: 5441 5254 5f42 4541 4d2e 6e61 6d65 7d3a  TART_BEAM.name}:
+00004150: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
+00004160: 6573 756c 742e 6578 7465 6e64 2873 7472  esult.extend(str
+00004170: 696e 6773 290a 2020 2020 2020 2020 7374  ings).        st
+00004180: 7269 6e67 7320 3d20 636f 6e74 7269 6275  rings = contribu
+00004190: 7469 6f6e 732e 616c 7068 6162 6574 697a  tions.alphabetiz
+000041a0: 6528 636f 6e74 7269 6275 7469 6f6e 732e  e(contributions.
+000041b0: 6166 7465 722e 7374 6f70 5f62 6561 6d29  after.stop_beam)
+000041c0: 0a20 2020 2020 2020 2069 6620 7374 7269  .        if stri
+000041d0: 6e67 733a 0a20 2020 2020 2020 2020 2020  ngs:.           
+000041e0: 2072 6573 756c 742e 6170 7065 6e64 2866   result.append(f
+000041f0: 2225 207b 5f63 6f6e 7472 6962 7574 696f  "% {_contributio
+00004200: 6e73 2e54 7970 6573 2e53 544f 505f 4245  ns.Types.STOP_BE
+00004210: 414d 2e6e 616d 657d 3a22 290a 2020 2020  AM.name}:").    
+00004220: 2020 2020 2020 2020 7265 7375 6c74 2e65          result.e
+00004230: 7874 656e 6428 7374 7269 6e67 7329 0a20  xtend(strings). 
+00004240: 2020 2020 2020 2073 7472 696e 6773 203d         strings =
+00004250: 2063 6f6e 7472 6962 7574 696f 6e73 2e61   contributions.a
+00004260: 6c70 6861 6265 7469 7a65 2863 6f6e 7472  lphabetize(contr
+00004270: 6962 7574 696f 6e73 2e61 6674 6572 2e73  ibutions.after.s
+00004280: 7061 6e6e 6572 5f73 7461 7274 7329 0a20  panner_starts). 
+00004290: 2020 2020 2020 2069 6620 7374 7269 6e67         if string
+000042a0: 733a 0a20 2020 2020 2020 2020 2020 2072  s:.            r
+000042b0: 6573 756c 742e 6170 7065 6e64 2866 2225  esult.append(f"%
+000042c0: 207b 5f63 6f6e 7472 6962 7574 696f 6e73   {_contributions
+000042d0: 2e54 7970 6573 2e53 5041 4e4e 4552 5f53  .Types.SPANNER_S
+000042e0: 5441 5254 532e 6e61 6d65 7d3a 2229 0a20  TARTS.name}:"). 
+000042f0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00004300: 742e 6578 7465 6e64 2873 7472 696e 6773  t.extend(strings
+00004310: 290a 2020 2020 2020 2020 2320 4e4f 5445  ).        # NOTE
+00004320: 3a20 4c69 6c79 506f 6e64 2064 656d 616e  : LilyPond deman
+00004330: 6473 205c 7374 6172 7454 7269 6c6c 5370  ds \startTrillSp
+00004340: 616e 2061 7070 6561 7220 6166 7465 7220  an appear after 
+00004350: 616c 6d6f 7374 2061 6c6c 0a20 2020 2020  almost all.     
+00004360: 2020 2023 2020 2020 2020 206f 7468 6572     #       other
+00004370: 2063 6f6e 7472 6962 7574 696f 6e73 3b20   contributions; 
+00004380: 7069 7463 6865 6420 7472 696c 6c73 2064  pitched trills d
+00004390: 616e 6765 726f 7573 6c79 0a20 2020 2020  angerously.     
+000043a0: 2020 2023 2020 2020 2020 2073 7570 7072     #       suppr
+000043b0: 6573 7320 6d61 726b 7570 2061 6e64 2074  ess markup and t
+000043c0: 6865 2073 7461 7274 7320 6f66 206f 7468  he starts of oth
+000043d0: 6572 2073 7061 6e6e 6572 7320 7768 656e  er spanners when
+000043e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000043f0: 205c 7374 6172 7454 7269 6c6c 5370 616e   \startTrillSpan
+00004400: 2061 7070 6561 7273 206c 6578 6963 616c   appears lexical
+00004410: 6c79 2070 7269 6f72 2074 6f20 7468 6f73  ly prior to thos
+00004420: 6520 636f 6d6d 616e 6473 3b0a 2020 2020  e commands;.    
+00004430: 2020 2020 2320 2020 2020 2020 6275 7420      #       but 
+00004440: 5c73 7461 7274 5472 696c 6c53 7061 6e20  \startTrillSpan 
+00004450: 6d75 7374 2061 7070 6561 7220 6265 666f  must appear befo
+00004460: 7265 2063 616c 6c73 2074 6f20 5c73 6574  re calls to \set
+00004470: 2e0a 2020 2020 2020 2020 7374 7269 6e67  ..        string
+00004480: 7320 3d20 636f 6e74 7269 6275 7469 6f6e  s = contribution
+00004490: 732e 616c 7068 6162 6574 697a 6528 636f  s.alphabetize(co
+000044a0: 6e74 7269 6275 7469 6f6e 732e 6166 7465  ntributions.afte
+000044b0: 722e 7472 696c 6c5f 7370 616e 6e65 725f  r.trill_spanner_
+000044c0: 7374 6172 7473 290a 2020 2020 2020 2020  starts).        
+000044d0: 6966 2073 7472 696e 6773 3a0a 2020 2020  if strings:.    
+000044e0: 2020 2020 2020 2020 7265 7375 6c74 2e61          result.a
+000044f0: 7070 656e 6428 6622 2520 7b5f 636f 6e74  ppend(f"% {_cont
+00004500: 7269 6275 7469 6f6e 732e 5479 7065 732e  ributions.Types.
+00004510: 5452 494c 4c5f 5350 414e 4e45 525f 5354  TRILL_SPANNER_ST
+00004520: 4152 5453 2e6e 616d 657d 3a22 290a 2020  ARTS.name}:").  
+00004530: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00004540: 2e65 7874 656e 6428 7374 7269 6e67 7329  .extend(strings)
+00004550: 0a20 2020 2020 2020 2073 7472 696e 6773  .        strings
+00004560: 203d 2063 6f6e 7472 6962 7574 696f 6e73   = contributions
+00004570: 2e61 6c70 6861 6265 7469 7a65 2863 6f6e  .alphabetize(con
+00004580: 7472 6962 7574 696f 6e73 2e61 6674 6572  tributions.after
+00004590: 2e63 6f6d 6d61 6e64 7329 0a20 2020 2020  .commands).     
+000045a0: 2020 2069 6620 7374 7269 6e67 733a 0a20     if strings:. 
+000045b0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+000045c0: 742e 6170 7065 6e64 2866 2225 207b 5f63  t.append(f"% {_c
+000045d0: 6f6e 7472 6962 7574 696f 6e73 2e54 7970  ontributions.Typ
+000045e0: 6573 2e43 4f4d 4d41 4e44 532e 6e61 6d65  es.COMMANDS.name
+000045f0: 7d3a 2229 0a20 2020 2020 2020 2020 2020  }:").           
+00004600: 2072 6573 756c 742e 6578 7465 6e64 2873   result.extend(s
+00004610: 7472 696e 6773 290a 2020 2020 2020 2020  trings).        
+00004620: 7374 7269 6e67 7320 3d20 636f 6e74 7269  strings = contri
+00004630: 6275 7469 6f6e 732e 616c 7068 6162 6574  butions.alphabet
+00004640: 697a 6528 636f 6e74 7269 6275 7469 6f6e  ize(contribution
+00004650: 732e 6166 7465 722e 6c65 616b 290a 2020  s.after.leak).  
+00004660: 2020 2020 2020 6966 2073 7472 696e 6773        if strings
+00004670: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00004680: 7375 6c74 2e61 7070 656e 6428 6622 2520  sult.append(f"% 
+00004690: 7b5f 636f 6e74 7269 6275 7469 6f6e 732e  {_contributions.
+000046a0: 5479 7065 732e 4c45 414b 2e6e 616d 657d  Types.LEAK.name}
+000046b0: 3a22 290a 2020 2020 2020 2020 2020 2020  :").            
+000046c0: 7265 7375 6c74 2e65 7874 656e 6428 7374  result.extend(st
+000046d0: 7269 6e67 7329 0a20 2020 2020 2020 2073  rings).        s
+000046e0: 7472 696e 6773 203d 2063 6f6e 7472 6962  trings = contrib
+000046f0: 7574 696f 6e73 2e61 6c70 6861 6265 7469  utions.alphabeti
+00004700: 7a65 2863 6f6e 7472 6962 7574 696f 6e73  ze(contributions
+00004710: 2e61 6674 6572 2e6c 6561 6b73 290a 2020  .after.leaks).  
+00004720: 2020 2020 2020 6966 2073 7472 696e 6773        if strings
+00004730: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00004740: 7375 6c74 2e61 7070 656e 6428 6622 2520  sult.append(f"% 
+00004750: 7b5f 636f 6e74 7269 6275 7469 6f6e 732e  {_contributions.
+00004760: 5479 7065 732e 4c45 414b 532e 6e61 6d65  Types.LEAKS.name
+00004770: 7d3a 2229 0a20 2020 2020 2020 2020 2020  }:").           
+00004780: 2072 6573 756c 742e 6578 7465 6e64 2873   result.extend(s
+00004790: 7472 696e 6773 290a 2020 2020 2020 2020  trings).        
+000047a0: 6966 2073 656c 662e 5f61 6674 6572 5f67  if self._after_g
+000047b0: 7261 6365 5f63 6f6e 7461 696e 6572 2069  race_container i
+000047c0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+000047d0: 2020 2020 2020 2020 7374 7269 6e67 203d          string =
+000047e0: 2073 656c 662e 5f61 6674 6572 5f67 7261   self._after_gra
+000047f0: 6365 5f63 6f6e 7461 696e 6572 2e5f 6765  ce_container._ge
+00004800: 745f 6c69 6c79 706f 6e64 5f66 6f72 6d61  t_lilypond_forma
+00004810: 7428 290a 2020 2020 2020 2020 2020 2020  t().            
+00004820: 7265 7375 6c74 2e61 7070 656e 6428 7374  result.append(st
+00004830: 7269 6e67 290a 2020 2020 2020 2020 7265  ring).        re
+00004840: 7475 726e 2072 6573 756c 740a 0a20 2020  turn result..   
+00004850: 2064 6566 205f 666f 726d 6174 5f62 6566   def _format_bef
+00004860: 6f72 655f 7369 7465 2873 656c 662c 2063  ore_site(self, c
+00004870: 6f6e 7472 6962 7574 696f 6e73 293a 0a20  ontributions):. 
+00004880: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+00004890: 5b5d 0a20 2020 2020 2020 2069 6620 7365  [].        if se
+000048a0: 6c66 2e5f 6265 666f 7265 5f67 7261 6365  lf._before_grace
+000048b0: 5f63 6f6e 7461 696e 6572 2069 7320 6e6f  _container is no
+000048c0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+000048d0: 2020 2020 7374 7269 6e67 203d 2073 656c      string = sel
+000048e0: 662e 5f62 6566 6f72 655f 6772 6163 655f  f._before_grace_
+000048f0: 636f 6e74 6169 6e65 722e 5f67 6574 5f6c  container._get_l
+00004900: 696c 7970 6f6e 645f 666f 726d 6174 2829  ilypond_format()
+00004910: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00004920: 756c 742e 6170 7065 6e64 2873 7472 696e  ult.append(strin
+00004930: 6729 0a20 2020 2020 2020 2073 7472 696e  g).        strin
+00004940: 6773 203d 2063 6f6e 7472 6962 7574 696f  gs = contributio
+00004950: 6e73 2e61 6c70 6861 6265 7469 7a65 2863  ns.alphabetize(c
+00004960: 6f6e 7472 6962 7574 696f 6e73 2e62 6566  ontributions.bef
+00004970: 6f72 652e 636f 6d6d 616e 6473 290a 2020  ore.commands).  
+00004980: 2020 2020 2020 6966 2073 7472 696e 6773        if strings
+00004990: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+000049a0: 7375 6c74 2e61 7070 656e 6428 6622 2520  sult.append(f"% 
+000049b0: 7b5f 636f 6e74 7269 6275 7469 6f6e 732e  {_contributions.
+000049c0: 5479 7065 732e 434f 4d4d 414e 4453 2e6e  Types.COMMANDS.n
+000049d0: 616d 657d 3a22 290a 2020 2020 2020 2020  ame}:").        
+000049e0: 2020 2020 7265 7375 6c74 2e65 7874 656e      result.exten
+000049f0: 6428 7374 7269 6e67 7329 0a20 2020 2020  d(strings).     
+00004a00: 2020 2073 7472 696e 6773 203d 2063 6f6e     strings = con
+00004a10: 7472 6962 7574 696f 6e73 2e67 726f 625f  tributions.grob_
+00004a20: 7265 7665 7274 730a 2020 2020 2020 2020  reverts.        
+00004a30: 6966 2073 7472 696e 6773 3a0a 2020 2020  if strings:.    
+00004a40: 2020 2020 2020 2020 7265 7375 6c74 2e61          result.a
+00004a50: 7070 656e 6428 6622 2520 7b5f 636f 6e74  ppend(f"% {_cont
+00004a60: 7269 6275 7469 6f6e 732e 5479 7065 732e  ributions.Types.
+00004a70: 4752 4f42 5f52 4556 4552 5453 2e6e 616d  GROB_REVERTS.nam
+00004a80: 657d 3a22 290a 2020 2020 2020 2020 2020  e}:").          
+00004a90: 2020 7265 7375 6c74 2e65 7874 656e 6428    result.extend(
+00004aa0: 7374 7269 6e67 7329 0a20 2020 2020 2020  strings).       
+00004ab0: 2073 7472 696e 6773 203d 2063 6f6e 7472   strings = contr
+00004ac0: 6962 7574 696f 6e73 2e67 726f 625f 6f76  ibutions.grob_ov
+00004ad0: 6572 7269 6465 730a 2020 2020 2020 2020  errides.        
+00004ae0: 6966 2073 7472 696e 6773 3a0a 2020 2020  if strings:.    
+00004af0: 2020 2020 2020 2020 7265 7375 6c74 2e61          result.a
+00004b00: 7070 656e 6428 6622 2520 7b5f 636f 6e74  ppend(f"% {_cont
+00004b10: 7269 6275 7469 6f6e 732e 5479 7065 732e  ributions.Types.
+00004b20: 4752 4f42 5f4f 5645 5252 4944 4553 2e6e  GROB_OVERRIDES.n
+00004b30: 616d 657d 3a22 290a 2020 2020 2020 2020  ame}:").        
+00004b40: 2020 2020 7265 7375 6c74 2e65 7874 656e      result.exten
+00004b50: 6428 7374 7269 6e67 7329 0a20 2020 2020  d(strings).     
+00004b60: 2020 2073 7472 696e 6773 203d 2063 6f6e     strings = con
+00004b70: 7472 6962 7574 696f 6e73 2e63 6f6e 7465  tributions.conte
+00004b80: 7874 5f73 6574 7469 6e67 730a 2020 2020  xt_settings.    
+00004b90: 2020 2020 6966 2073 7472 696e 6773 3a0a      if strings:.
+00004ba0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00004bb0: 6c74 2e61 7070 656e 6428 6622 2520 7b5f  lt.append(f"% {_
+00004bc0: 636f 6e74 7269 6275 7469 6f6e 732e 5479  contributions.Ty
+00004bd0: 7065 732e 434f 4e54 4558 545f 5345 5454  pes.CONTEXT_SETT
+00004be0: 494e 4753 2e6e 616d 657d 3a22 290a 2020  INGS.name}:").  
+00004bf0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00004c00: 2e65 7874 656e 6428 7374 7269 6e67 7329  .extend(strings)
+00004c10: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00004c20: 7265 7375 6c74 0a0a 2020 2020 6465 6620  result..    def 
+00004c30: 5f66 6f72 6d61 745f 636c 6f73 696e 675f  _format_closing_
+00004c40: 7369 7465 2873 656c 662c 2063 6f6e 7472  site(self, contr
+00004c50: 6962 7574 696f 6e73 293a 0a20 2020 2020  ibutions):.     
+00004c60: 2020 2072 6573 756c 7420 3d20 5b5d 0a20     result = []. 
+00004c70: 2020 2020 2020 2073 7472 696e 6773 203d         strings =
+00004c80: 2063 6f6e 7472 6962 7574 696f 6e73 2e61   contributions.a
+00004c90: 6c70 6861 6265 7469 7a65 2863 6f6e 7472  lphabetize(contr
+00004ca0: 6962 7574 696f 6e73 2e63 6c6f 7369 6e67  ibutions.closing
+00004cb0: 2e63 6f6d 6d61 6e64 7329 0a20 2020 2020  .commands).     
+00004cc0: 2020 2069 6620 7374 7269 6e67 733a 0a20     if strings:. 
+00004cd0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00004ce0: 742e 6170 7065 6e64 2866 2225 207b 5f63  t.append(f"% {_c
+00004cf0: 6f6e 7472 6962 7574 696f 6e73 2e54 7970  ontributions.Typ
+00004d00: 6573 2e43 4f4d 4d41 4e44 532e 6e61 6d65  es.COMMANDS.name
+00004d10: 7d3a 2229 0a20 2020 2020 2020 2020 2020  }:").           
+00004d20: 2072 6573 756c 742e 6578 7465 6e64 2873   result.extend(s
+00004d30: 7472 696e 6773 290a 2020 2020 2020 2020  trings).        
+00004d40: 7265 7375 6c74 203d 205f 696e 6465 6e74  result = _indent
+00004d50: 5f73 7472 696e 6773 2872 6573 756c 7429  _strings(result)
+00004d60: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00004d70: 7265 7375 6c74 0a0a 2020 2020 6465 6620  result..    def 
+00004d80: 5f66 6f72 6d61 745f 636f 6e74 656e 7473  _format_contents
+00004d90: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00004da0: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
+00004db0: 2020 2020 7374 7269 6e67 7320 3d20 7365      strings = se
+00004dc0: 6c66 2e5f 666f 726d 6174 5f6c 6561 665f  lf._format_leaf_
+00004dd0: 6e75 636c 6575 7328 290a 2020 2020 2020  nucleus().      
+00004de0: 2020 7265 7375 6c74 2e65 7874 656e 6428    result.extend(
+00004df0: 7374 7269 6e67 7329 0a20 2020 2020 2020  strings).       
+00004e00: 2072 6574 7572 6e20 7265 7375 6c74 0a0a   return result..
+00004e10: 2020 2020 6465 6620 5f66 6f72 6d61 745f      def _format_
+00004e20: 6c65 6166 5f6e 7563 6c65 7573 2873 656c  leaf_nucleus(sel
+00004e30: 6629 3a0a 2020 2020 2020 2020 7374 7269  f):.        stri
+00004e40: 6e67 7320 3d20 7365 6c66 2e5f 6765 745f  ngs = self._get_
+00004e50: 626f 6479 2829 0a20 2020 2020 2020 2069  body().        i
+00004e60: 6620 7365 6c66 2e74 6167 2069 7320 6e6f  f self.tag is no
+00004e70: 7420 4e6f 6e65 2061 6e64 2073 656c 662e  t None and self.
+00004e80: 7461 672e 7374 7269 6e67 3a0a 2020 2020  tag.string:.    
+00004e90: 2020 2020 2020 2020 7374 7269 6e67 7320          strings 
+00004ea0: 3d20 5f74 6167 2e64 6f75 626c 655f 7461  = _tag.double_ta
+00004eb0: 6728 7374 7269 6e67 732c 2073 656c 662e  g(strings, self.
+00004ec0: 7461 6729 0a20 2020 2020 2020 2072 6574  tag).        ret
+00004ed0: 7572 6e20 7374 7269 6e67 730a 0a20 2020  urn strings..   
+00004ee0: 2064 6566 205f 666f 726d 6174 5f6f 7065   def _format_ope
+00004ef0: 6e69 6e67 5f73 6974 6528 7365 6c66 2c20  ning_site(self, 
+00004f00: 636f 6e74 7269 6275 7469 6f6e 7329 3a0a  contributions):.
+00004f10: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00004f20: 205b 5d0a 2020 2020 2020 2020 7374 7269   [].        stri
+00004f30: 6e67 7320 3d20 636f 6e74 7269 6275 7469  ngs = contributi
+00004f40: 6f6e 732e 616c 7068 6162 6574 697a 6528  ons.alphabetize(
+00004f50: 636f 6e74 7269 6275 7469 6f6e 732e 6f70  contributions.op
+00004f60: 656e 696e 672e 636f 6d6d 616e 6473 290a  ening.commands).
+00004f70: 2020 2020 2020 2020 6966 2073 7472 696e          if strin
+00004f80: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00004f90: 7265 7375 6c74 2e61 7070 656e 6428 6622  result.append(f"
+00004fa0: 2520 7b5f 636f 6e74 7269 6275 7469 6f6e  % {_contribution
+00004fb0: 732e 5479 7065 732e 434f 4d4d 414e 4453  s.Types.COMMANDS
+00004fc0: 2e6e 616d 657d 3a22 290a 2020 2020 2020  .name}:").      
+00004fd0: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
+00004fe0: 656e 6428 7374 7269 6e67 7329 0a20 2020  end(strings).   
+00004ff0: 2020 2020 2073 7472 696e 6773 203d 2063       strings = c
+00005000: 6f6e 7472 6962 7574 696f 6e73 2e61 6c70  ontributions.alp
+00005010: 6861 6265 7469 7a65 2863 6f6e 7472 6962  habetize(contrib
+00005020: 7574 696f 6e73 2e6f 7065 6e69 6e67 2e70  utions.opening.p
+00005030: 6974 6368 6564 5f74 7269 6c6c 290a 2020  itched_trill).  
+00005040: 2020 2020 2020 6966 2073 7472 696e 6773        if strings
+00005050: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00005060: 7375 6c74 2e61 7070 656e 6428 6622 2520  sult.append(f"% 
+00005070: 7b5f 636f 6e74 7269 6275 7469 6f6e 732e  {_contributions.
+00005080: 5479 7065 732e 5049 5443 4845 445f 5452  Types.PITCHED_TR
+00005090: 494c 4c2e 6e61 6d65 7d3a 2229 0a20 2020  ILL.name}:").   
+000050a0: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+000050b0: 6578 7465 6e64 2873 7472 696e 6773 290a  extend(strings).
+000050c0: 2020 2020 2020 2020 2320 494d 504f 5254          # IMPORT
+000050d0: 414e 543a 204c 696c 7950 6f6e 6420 5c70  ANT: LilyPond \p
+000050e0: 6974 6368 6564 5472 696c 6c20 6d75 7374  itchedTrill must
+000050f0: 2061 7070 6561 7220 696d 6d65 6469 6174   appear immediat
+00005100: 656c 7920 6265 666f 7265 206c 6561 6621  ely before leaf!
+00005110: 0a20 2020 2020 2020 2023 2049 4d50 4f52  .        # IMPOR
+00005120: 5441 4e54 3a20 4c69 6c79 506f 6e64 205c  TANT: LilyPond \
+00005130: 6166 7465 7247 7261 6365 206d 7573 7420  afterGrace must 
+00005140: 6170 7065 6172 2069 6d6d 6564 6961 7465  appear immediate
+00005150: 6c79 2062 6566 6f72 6520 6c65 6166 210a  ly before leaf!.
+00005160: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+00005170: 6669 6775 7265 206f 7574 205c 7069 7463  figure out \pitc
+00005180: 6865 6454 7269 6c6c 2c20 5c61 6674 6572  hedTrill, \after
+00005190: 4772 6163 6520 6f72 6465 7269 6e67 0a20  Grace ordering. 
+000051a0: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
+000051b0: 6166 7465 725f 6772 6163 655f 636f 6e74  after_grace_cont
+000051c0: 6169 6e65 7220 6973 206e 6f74 204e 6f6e  ainer is not Non
+000051d0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+000051e0: 6573 756c 742e 6170 7065 6e64 2872 225c  esult.append(r"\
+000051f0: 6166 7465 7247 7261 6365 2229 0a20 2020  afterGrace").   
+00005200: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+00005210: 6c74 0a0a 2020 2020 6465 6620 5f67 6574  lt..    def _get
+00005220: 5f63 6f6d 7061 6374 5f72 6570 7265 7365  _compact_represe
+00005230: 6e74 6174 696f 6e28 7365 6c66 293a 0a20  ntation(self):. 
+00005240: 2020 2020 2020 2072 6574 7572 6e20 6622         return f"
+00005250: 287b 7365 6c66 2e5f 6765 745f 666f 726d  ({self._get_form
+00005260: 6174 7465 645f 6475 7261 7469 6f6e 2829  atted_duration()
+00005270: 7d29 220a 0a20 2020 2064 6566 205f 6765  })"..    def _ge
+00005280: 745f 666f 726d 6174 7465 645f 6475 7261  t_formatted_dura
+00005290: 7469 6f6e 2873 656c 6629 3a0a 2020 2020  tion(self):.    
+000052a0: 2020 2020 7374 7269 6e67 7320 3d20 5b5d      strings = []
+000052b0: 0a20 2020 2020 2020 2073 7472 696e 6773  .        strings
+000052c0: 2e61 7070 656e 6428 7365 6c66 2e77 7269  .append(self.wri
+000052d0: 7474 656e 5f64 7572 6174 696f 6e2e 6c69  tten_duration.li
+000052e0: 6c79 706f 6e64 5f64 7572 6174 696f 6e5f  lypond_duration_
+000052f0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+00005300: 6966 2073 656c 662e 6d75 6c74 6970 6c69  if self.multipli
+00005310: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0a  er is not None:.
+00005320: 2020 2020 2020 2020 2020 2020 7374 7269              stri
+00005330: 6e67 732e 6170 7065 6e64 2873 7472 2873  ngs.append(str(s
+00005340: 656c 662e 6d75 6c74 6970 6c69 6572 2929  elf.multiplier))
+00005350: 0a20 2020 2020 2020 2069 6620 6861 7361  .        if hasa
+00005360: 7474 7228 7365 6c66 2e5f 7061 7265 6e74  ttr(self._parent
+00005370: 2c20 225f 6c65 6166 5f6d 756c 7469 706c  , "_leaf_multipl
+00005380: 6965 7222 293a 0a20 2020 2020 2020 2020  ier"):.         
+00005390: 2020 206d 756c 7469 706c 6965 7220 3d20     multiplier = 
+000053a0: 7365 6c66 2e5f 7061 7265 6e74 2e5f 6c65  self._parent._le
+000053b0: 6166 5f6d 756c 7469 706c 6965 7228 290a  af_multiplier().
+000053c0: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+000053d0: 756c 7469 706c 6965 7220 6973 206e 6f74  ultiplier is not
+000053e0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+000053f0: 2020 2020 2020 2073 7472 696e 6773 2e61         strings.a
+00005400: 7070 656e 6428 7374 7228 6d75 6c74 6970  ppend(str(multip
+00005410: 6c69 6572 2929 0a20 2020 2020 2020 2072  lier)).        r
+00005420: 6573 756c 7420 3d20 2220 2a20 222e 6a6f  esult = " * ".jo
+00005430: 696e 2873 7472 696e 6773 290a 2020 2020  in(strings).    
+00005440: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+00005450: 740a 0a20 2020 2064 6566 205f 6765 745f  t..    def _get_
+00005460: 6d75 6c74 6970 6c69 6564 5f64 7572 6174  multiplied_durat
+00005470: 696f 6e28 7365 6c66 293a 0a20 2020 2020  ion(self):.     
+00005480: 2020 2069 6620 7365 6c66 2e77 7269 7474     if self.writt
+00005490: 656e 5f64 7572 6174 696f 6e3a 0a20 2020  en_duration:.   
+000054a0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+000054b0: 2e6d 756c 7469 706c 6965 7220 6973 206e  .multiplier is n
+000054c0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000054d0: 2020 2020 2020 2020 2064 7572 6174 696f           duratio
+000054e0: 6e20 3d20 7365 6c66 2e6d 756c 7469 706c  n = self.multipl
+000054f0: 6965 7220 2a20 7365 6c66 2e77 7269 7474  ier * self.writt
+00005500: 656e 5f64 7572 6174 696f 6e0a 2020 2020  en_duration.    
+00005510: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00005520: 726e 205f 6475 7261 7469 6f6e 2e44 7572  rn _duration.Dur
+00005530: 6174 696f 6e28 6475 7261 7469 6f6e 290a  ation(duration).
+00005540: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00005550: 726e 205f 6475 7261 7469 6f6e 2e44 7572  rn _duration.Dur
+00005560: 6174 696f 6e28 7365 6c66 2e77 7269 7474  ation(self.writt
+00005570: 656e 5f64 7572 6174 696f 6e29 0a0a 2020  en_duration)..  
+00005580: 2020 6465 6620 5f67 6574 5f70 7265 7072    def _get_prepr
+00005590: 6f6c 6174 6564 5f64 7572 6174 696f 6e28  olated_duration(
+000055a0: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
+000055b0: 6574 7572 6e20 7365 6c66 2e5f 6765 745f  eturn self._get_
+000055c0: 6d75 6c74 6970 6c69 6564 5f64 7572 6174  multiplied_durat
+000055d0: 696f 6e28 290a 0a20 2020 2064 6566 205f  ion()..    def _
+000055e0: 6765 745f 7375 6274 7265 6528 7365 6c66  get_subtree(self
+000055f0: 293a 0a20 2020 2020 2020 2072 6573 756c  ):.        resul
+00005600: 7420 3d20 5b5d 0a20 2020 2020 2020 2069  t = [].        i
+00005610: 6620 7365 6c66 2e5f 6265 666f 7265 5f67  f self._before_g
+00005620: 7261 6365 5f63 6f6e 7461 696e 6572 2069  race_container i
+00005630: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00005640: 2020 2020 2020 2020 7265 7375 6c74 2e65          result.e
+00005650: 7874 656e 6428 7365 6c66 2e5f 6265 666f  xtend(self._befo
+00005660: 7265 5f67 7261 6365 5f63 6f6e 7461 696e  re_grace_contain
+00005670: 6572 2e5f 6765 745f 7375 6274 7265 6528  er._get_subtree(
+00005680: 2929 0a20 2020 2020 2020 2072 6573 756c  )).        resul
+00005690: 742e 6170 7065 6e64 2873 656c 6629 0a20  t.append(self). 
+000056a0: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
+000056b0: 6166 7465 725f 6772 6163 655f 636f 6e74  after_grace_cont
+000056c0: 6169 6e65 7220 6973 206e 6f74 204e 6f6e  ainer is not Non
+000056d0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+000056e0: 6573 756c 742e 6578 7465 6e64 2873 656c  esult.extend(sel
+000056f0: 662e 5f61 6674 6572 5f67 7261 6365 5f63  f._after_grace_c
+00005700: 6f6e 7461 696e 6572 2e5f 6765 745f 7375  ontainer._get_su
+00005710: 6274 7265 6528 2929 0a20 2020 2020 2020  btree()).       
+00005720: 2072 6574 7572 6e20 7265 7375 6c74 0a0a   return result..
+00005730: 2020 2020 6465 6620 5f70 726f 6365 7373      def _process
+00005740: 5f63 6f6e 7472 6962 7574 696f 6e5f 7061  _contribution_pa
+00005750: 636b 6574 2873 656c 662c 2063 6f6e 7472  cket(self, contr
+00005760: 6962 7574 696f 6e5f 7061 636b 6574 293a  ibution_packet):
+00005770: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+00005780: 3d20 2222 0a20 2020 2020 2020 2066 6f72  = "".        for
+00005790: 2063 6f6e 7472 6962 7574 6f72 2c20 636f   contributor, co
+000057a0: 6e74 7269 6275 7469 6f6e 7320 696e 2063  ntributions in c
+000057b0: 6f6e 7472 6962 7574 696f 6e5f 7061 636b  ontribution_pack
+000057c0: 6574 3a0a 2020 2020 2020 2020 2020 2020  et:.            
+000057d0: 6966 2063 6f6e 7472 6962 7574 696f 6e73  if contributions
+000057e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000057f0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00005800: 636f 6e74 7269 6275 746f 722c 2074 7570  contributor, tup
+00005810: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
+00005820: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
+00005830: 7574 6f72 203d 205f 696e 6465 6e74 6c69  utor = _indentli
+00005840: 622e 494e 4445 4e54 202b 2063 6f6e 7472  b.INDENT + contr
+00005850: 6962 7574 6f72 5b30 5d20 2b20 223a 5c6e  ibutor[0] + ":\n
+00005860: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+00005870: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00005880: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00005890: 7269 6275 746f 7220 3d20 5f69 6e64 656e  ributor = _inden
+000058a0: 746c 6962 2e49 4e44 454e 5420 2b20 636f  tlib.INDENT + co
+000058b0: 6e74 7269 6275 746f 7220 2b20 223a 5c6e  ntributor + ":\n
+000058c0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+000058d0: 2020 7265 7375 6c74 202b 3d20 636f 6e74    result += cont
+000058e0: 7269 6275 746f 720a 2020 2020 2020 2020  ributor.        
+000058f0: 2020 2020 2020 2020 666f 7220 636f 6e74          for cont
+00005900: 7269 6275 7469 6f6e 2069 6e20 636f 6e74  ribution in cont
+00005910: 7269 6275 7469 6f6e 733a 0a20 2020 2020  ributions:.     
+00005920: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00005930: 6f6e 7472 6962 7574 696f 6e20 3d20 285f  ontribution = (_
+00005940: 696e 6465 6e74 6c69 622e 494e 4445 4e54  indentlib.INDENT
+00005950: 202a 2032 2920 2b20 636f 6e74 7269 6275   * 2) + contribu
+00005960: 7469 6f6e 202b 2022 5c6e 220a 2020 2020  tion + "\n".    
+00005970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005980: 7265 7375 6c74 202b 3d20 636f 6e74 7269  result += contri
+00005990: 6275 7469 6f6e 0a20 2020 2020 2020 2072  bution.        r
+000059a0: 6574 7572 6e20 7265 7375 6c74 0a0a 2020  eturn result..  
+000059b0: 2020 6465 6620 5f73 6361 6c65 2873 656c    def _scale(sel
+000059c0: 662c 206d 756c 7469 706c 6965 7229 3a0a  f, multiplier):.
+000059d0: 2020 2020 2020 2020 7365 6c66 2e77 7269          self.wri
+000059e0: 7474 656e 5f64 7572 6174 696f 6e20 2a3d  tten_duration *=
+000059f0: 206d 756c 7469 706c 6965 720a 0a20 2020   multiplier..   
+00005a00: 2023 2323 2050 5542 4c49 4320 5052 4f50   ### PUBLIC PROP
+00005a10: 4552 5449 4553 2023 2323 0a0a 2020 2020  ERTIES ###..    
+00005a20: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
+00005a30: 6620 6d75 6c74 6970 6c69 6572 280a 2020  f multiplier(.  
+00005a40: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+00005a50: 2920 2d3e 205f 6475 7261 7469 6f6e 2e4d  ) -> _duration.M
+00005a60: 756c 7469 706c 6965 7220 7c20 5f64 7572  ultiplier | _dur
+00005a70: 6174 696f 6e2e 4e6f 6e72 6564 7563 6564  ation.Nonreduced
+00005a80: 4672 6163 7469 6f6e 207c 204e 6f6e 653a  Fraction | None:
+00005a90: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00005aa0: 2020 2020 2047 6574 7320 6d75 6c74 6970       Gets multip
+00005ab0: 6c69 6572 2e0a 2020 2020 2020 2020 2222  lier..        ""
+00005ac0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00005ad0: 2073 656c 662e 5f6d 756c 7469 706c 6965   self._multiplie
+00005ae0: 720a 0a20 2020 2040 6d75 6c74 6970 6c69  r..    @multipli
+00005af0: 6572 2e73 6574 7465 720a 2020 2020 6465  er.setter.    de
+00005b00: 6620 6d75 6c74 6970 6c69 6572 2873 656c  f multiplier(sel
+00005b10: 662c 2061 7267 756d 656e 7429 3a0a 2020  f, argument):.  
+00005b20: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00005b30: 6e63 6528 6172 6775 6d65 6e74 2c20 5f64  nce(argument, _d
+00005b40: 7572 6174 696f 6e2e 4e6f 6e72 6564 7563  uration.Nonreduc
+00005b50: 6564 4672 6163 7469 6f6e 207c 2074 7970  edFraction | typ
+00005b60: 6528 4e6f 6e65 2929 3a0a 2020 2020 2020  e(None)):.      
+00005b70: 2020 2020 2020 6d75 6c74 6970 6c69 6572        multiplier
+00005b80: 203d 2061 7267 756d 656e 740a 2020 2020   = argument.    
+00005b90: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00005ba0: 2020 2020 2020 6d75 6c74 6970 6c69 6572        multiplier
+00005bb0: 203d 205f 6475 7261 7469 6f6e 2e4d 756c   = _duration.Mul
+00005bc0: 7469 706c 6965 7228 6172 6775 6d65 6e74  tiplier(argument
+00005bd0: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
+00005be0: 6d75 6c74 6970 6c69 6572 203d 206d 756c  multiplier = mul
+00005bf0: 7469 706c 6965 720a 0a20 2020 2040 7072  tiplier..    @pr
+00005c00: 6f70 6572 7479 0a20 2020 2064 6566 2077  operty.    def w
+00005c10: 7269 7474 656e 5f64 7572 6174 696f 6e28  ritten_duration(
+00005c20: 7365 6c66 2920 2d3e 205f 6475 7261 7469  self) -> _durati
+00005c30: 6f6e 2e44 7572 6174 696f 6e3a 0a20 2020  on.Duration:.   
+00005c40: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00005c50: 2047 6574 7320 7772 6974 7465 6e20 6475   Gets written du
+00005c60: 7261 7469 6f6e 2e0a 2020 2020 2020 2020  ration..        
+00005c70: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+00005c80: 726e 2073 656c 662e 5f77 7269 7474 656e  rn self._written
+00005c90: 5f64 7572 6174 696f 6e0a 0a20 2020 2040  _duration..    @
+00005ca0: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
+00005cb0: 2e73 6574 7465 720a 2020 2020 6465 6620  .setter.    def 
+00005cc0: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
+00005cd0: 2873 656c 662c 2061 7267 756d 656e 7429  (self, argument)
+00005ce0: 3a0a 2020 2020 2020 2020 6475 7261 7469  :.        durati
+00005cf0: 6f6e 203d 205f 6475 7261 7469 6f6e 2e44  on = _duration.D
+00005d00: 7572 6174 696f 6e28 6172 6775 6d65 6e74  uration(argument
+00005d10: 290a 2020 2020 2020 2020 6966 206e 6f74  ).        if not
+00005d20: 2064 7572 6174 696f 6e2e 6973 5f61 7373   duration.is_ass
+00005d30: 6967 6e61 626c 653a 0a20 2020 2020 2020  ignable:.       
+00005d40: 2020 2020 206d 6573 7361 6765 203d 2066       message = f
+00005d50: 226e 6f74 2061 7373 6967 6e61 626c 6520  "not assignable 
+00005d60: 6475 7261 7469 6f6e 3a20 7b64 7572 6174  duration: {durat
+00005d70: 696f 6e21 727d 2e22 0a20 2020 2020 2020  ion!r}.".       
+00005d80: 2020 2020 2072 6169 7365 205f 6578 6365       raise _exce
+00005d90: 7074 696f 6e73 2e41 7373 6967 6e61 6269  ptions.Assignabi
+00005da0: 6c69 7479 4572 726f 7228 6d65 7373 6167  lityError(messag
+00005db0: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+00005dc0: 5f77 7269 7474 656e 5f64 7572 6174 696f  _written_duratio
+00005dd0: 6e20 3d20 6475 7261 7469 6f6e 0a0a 0a63  n = duration...c
+00005de0: 6c61 7373 2043 6f6e 7461 696e 6572 2843  lass Container(C
+00005df0: 6f6d 706f 6e65 6e74 293a 0a20 2020 2072  omponent):.    r
+00005e00: 2222 220a 2020 2020 436f 6e74 6169 6e65  """.    Containe
+00005e10: 722e 0a0a 2020 2020 2e2e 2020 636f 6e74  r...    ..  cont
+00005e20: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
+00005e30: 0a20 2020 2020 2020 2049 6e74 6961 6c69  .        Intiali
+00005e40: 7a65 7320 6672 6f6d 2073 7472 696e 673a  zes from string:
+00005e50: 0a0a 2020 2020 2020 2020 3e3e 3e20 636f  ..        >>> co
+00005e60: 6e74 6169 6e65 7220 3d20 6162 6a61 642e  ntainer = abjad.
+00005e70: 436f 6e74 6169 6e65 7228 2263 2734 2065  Container("c'4 e
+00005e80: 2734 2064 2734 2065 2738 2066 2738 2229  '4 d'4 e'8 f'8")
+00005e90: 0a20 2020 2020 2020 203e 3e3e 2061 626a  .        >>> abj
+00005ea0: 6164 2e73 686f 7728 636f 6e74 6169 6e65  ad.show(containe
+00005eb0: 7229 2023 2064 6f63 7465 7374 3a20 2b53  r) # doctest: +S
+00005ec0: 4b49 500a 0a20 2020 2020 2020 202e 2e20  KIP..        .. 
+00005ed0: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
+00005ee0: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+00005ef0: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+00005f00: 2863 6f6e 7461 696e 6572 290a 2020 2020  (container).    
+00005f10: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+00005f20: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+00005f30: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+00005f40: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
+00005f50: 2020 2020 2020 2020 2020 2020 6527 340a              e'4.
+00005f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005f70: 6427 340a 2020 2020 2020 2020 2020 2020  d'4.            
+00005f80: 2020 2020 6527 380a 2020 2020 2020 2020      e'8.        
+00005f90: 2020 2020 2020 2020 6627 380a 2020 2020          f'8.    
+00005fa0: 2020 2020 2020 2020 7d0a 0a20 2020 202e          }..    .
+00005fb0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+00005fc0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+00005fd0: 496e 7469 616c 697a 6573 2066 726f 6d20  Intializes from 
+00005fe0: 636f 6d70 6f6e 656e 7473 3a0a 0a20 2020  components:..   
+00005ff0: 2020 2020 203e 3e3e 206e 6f74 6573 203d       >>> notes =
+00006000: 205b 0a20 2020 2020 2020 202e 2e2e 2020   [.        ...  
+00006010: 2020 2061 626a 6164 2e4e 6f74 6528 2263     abjad.Note("c
+00006020: 2734 2229 2c0a 2020 2020 2020 2020 2e2e  '4"),.        ..
+00006030: 2e20 2020 2020 6162 6a61 642e 4e6f 7465  .     abjad.Note
+00006040: 2822 6527 3422 292c 0a20 2020 2020 2020  ("e'4"),.       
+00006050: 202e 2e2e 2020 2020 2061 626a 6164 2e4e   ...     abjad.N
+00006060: 6f74 6528 2264 2734 2229 2c0a 2020 2020  ote("d'4"),.    
+00006070: 2020 2020 2e2e 2e20 2020 2020 6162 6a61      ...     abja
+00006080: 642e 4e6f 7465 2822 6527 3822 292c 0a20  d.Note("e'8"),. 
+00006090: 2020 2020 2020 202e 2e2e 2020 2020 2061         ...     a
+000060a0: 626a 6164 2e4e 6f74 6528 2266 2738 2229  bjad.Note("f'8")
+000060b0: 2c0a 2020 2020 2020 2020 2e2e 2e20 2020  ,.        ...   
+000060c0: 2020 5d0a 2020 2020 2020 2020 3e3e 3e20    ].        >>> 
+000060d0: 636f 6e74 6169 6e65 7220 3d20 6162 6a61  container = abja
+000060e0: 642e 436f 6e74 6169 6e65 7228 6e6f 7465  d.Container(note
+000060f0: 7329 0a20 2020 2020 2020 203e 3e3e 2061  s).        >>> a
+00006100: 626a 6164 2e73 686f 7728 636f 6e74 6169  bjad.show(contai
+00006110: 6e65 7229 2023 2064 6f63 7465 7374 3a20  ner) # doctest: 
+00006120: 2b53 4b49 500a 0a20 2020 2020 2020 202e  +SKIP..        .
+00006130: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
+00006140: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+00006150: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+00006160: 6e64 2863 6f6e 7461 696e 6572 290a 2020  nd(container).  
+00006170: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
+00006180: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+00006190: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+000061a0: 2020 2020 2020 2020 2020 6327 340a 2020            c'4.  
+000061b0: 2020 2020 2020 2020 2020 2020 2020 6527                e'
+000061c0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+000061d0: 2020 6427 340a 2020 2020 2020 2020 2020    d'4.          
+000061e0: 2020 2020 2020 6527 380a 2020 2020 2020        e'8.      
+000061f0: 2020 2020 2020 2020 2020 6627 380a 2020            f'8.  
+00006200: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+00006210: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
+00006220: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
+00006230: 2020 496e 7469 616c 697a 6573 2066 726f    Intializes fro
+00006240: 6d20 6d69 7865 6420 636f 6d70 6f6e 656e  m mixed componen
+00006250: 7473 2061 6e64 206c 6973 7473 3a0a 0a20  ts and lists:.. 
+00006260: 2020 2020 2020 203e 3e3e 2069 7465 6d73         >>> items
+00006270: 203d 205b 0a20 2020 2020 2020 202e 2e2e   = [.        ...
+00006280: 2020 2020 2061 626a 6164 2e4e 6f74 6528       abjad.Note(
+00006290: 2263 2734 2229 2c0a 2020 2020 2020 2020  "c'4"),.        
+000062a0: 2e2e 2e20 2020 2020 5b61 626a 6164 2e4e  ...     [abjad.N
+000062b0: 6f74 6528 2265 2734 2229 5d2c 0a20 2020  ote("e'4")],.   
+000062c0: 2020 2020 202e 2e2e 2020 2020 205b 6162       ...     [ab
+000062d0: 6a61 642e 4e6f 7465 2822 6427 3422 295d  jad.Note("d'4")]
+000062e0: 2c0a 2020 2020 2020 2020 2e2e 2e20 2020  ,.        ...   
+000062f0: 2020 6162 6a61 642e 4e6f 7465 2822 6527    abjad.Note("e'
+00006300: 3822 292c 0a20 2020 2020 2020 202e 2e2e  8"),.        ...
+00006310: 2020 2020 2061 626a 6164 2e4e 6f74 6528       abjad.Note(
+00006320: 2266 2738 2229 2c0a 2020 2020 2020 2020  "f'8"),.        
+00006330: 2e2e 2e20 2020 2020 5d0a 2020 2020 2020  ...     ].      
+00006340: 2020 3e3e 3e20 636f 6e74 6169 6e65 7220    >>> container 
+00006350: 3d20 6162 6a61 642e 436f 6e74 6169 6e65  = abjad.Containe
+00006360: 7228 6974 656d 7329 0a20 2020 2020 2020  r(items).       
+00006370: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+00006380: 636f 6e74 6169 6e65 7229 2023 2064 6f63  container) # doc
+00006390: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
+000063a0: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
+000063b0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+000063c0: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
+000063d0: 6c69 6c79 706f 6e64 2863 6f6e 7461 696e  lilypond(contain
+000063e0: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
+000063f0: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
+00006400: 290a 2020 2020 2020 2020 2020 2020 7b0a  ).            {.
+00006410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006420: 6327 340a 2020 2020 2020 2020 2020 2020  c'4.            
+00006430: 2020 2020 6527 340a 2020 2020 2020 2020      e'4.        
+00006440: 2020 2020 2020 2020 6427 340a 2020 2020          d'4.    
+00006450: 2020 2020 2020 2020 2020 2020 6527 380a              e'8.
+00006460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006470: 6627 380a 2020 2020 2020 2020 2020 2020  f'8.            
+00006480: 7d0a 0a20 2020 202e 2e20 2063 6f6e 7461  }..    ..  conta
+00006490: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+000064a0: 2020 2020 2020 2020 436f 6e74 6169 6e65          Containe
+000064b0: 7273 2061 7265 2069 7465 7261 626c 6573  rs are iterables
+000064c0: 3a0a 0a20 2020 2020 2020 203e 3e3e 2069  :..        >>> i
+000064d0: 6d70 6f72 7420 636f 6c6c 6563 7469 6f6e  mport collection
+000064e0: 730a 2020 2020 2020 2020 3e3e 3e20 636f  s.        >>> co
+000064f0: 6e74 6169 6e65 7220 3d20 6162 6a61 642e  ntainer = abjad.
+00006500: 436f 6e74 6169 6e65 7228 2263 2734 2065  Container("c'4 e
+00006510: 2734 2064 2734 2065 2738 2066 2738 2229  '4 d'4 e'8 f'8")
+00006520: 0a20 2020 2020 2020 203e 3e3e 2069 7369  .        >>> isi
+00006530: 6e73 7461 6e63 6528 636f 6e74 6169 6e65  nstance(containe
+00006540: 722c 2063 6f6c 6c65 6374 696f 6e73 2e61  r, collections.a
+00006550: 6263 2e49 7465 7261 626c 6529 0a20 2020  bc.Iterable).   
+00006560: 2020 2020 2054 7275 650a 0a20 2020 202e       True..    .
+00006570: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+00006580: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+00006590: 436f 6e74 6169 6e65 7273 2061 7265 206e  Containers are n
+000065a0: 6f74 2073 6571 7565 6e63 6573 2062 6563  ot sequences bec
+000065b0: 6175 7365 2063 6f6e 7461 696e 6572 7320  ause containers 
+000065c0: 646f 206e 6f74 2069 6d70 6c65 6d65 6e74  do not implement
+000065d0: 0a20 2020 2020 2020 2072 6576 6572 7365  .        reverse
+000065e0: 3a0a 0a20 2020 2020 2020 203e 3e3e 2063  :..        >>> c
+000065f0: 6f6e 7461 696e 6572 203d 2061 626a 6164  ontainer = abjad
+00006600: 2e43 6f6e 7461 696e 6572 2822 6327 3420  .Container("c'4 
+00006610: 6527 3420 6427 3420 6527 3820 6627 3822  e'4 d'4 e'8 f'8"
+00006620: 290a 2020 2020 2020 2020 3e3e 3e20 6973  ).        >>> is
+00006630: 696e 7374 616e 6365 2863 6f6e 7461 696e  instance(contain
+00006640: 6572 2c20 636f 6c6c 6563 7469 6f6e 732e  er, collections.
+00006650: 6162 632e 5365 7175 656e 6365 290a 2020  abc.Sequence).  
+00006660: 2020 2020 2020 4661 6c73 650a 0a20 2020        False..   
+00006670: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
+00006680: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
+00006690: 2020 466f 726d 6174 7469 6e67 2070 6f73    Formatting pos
+000066a0: 6974 696f 6e73 2063 6f6e 7472 6962 7574  itions contribut
+000066b0: 696f 6e73 2073 7472 6963 746c 7920 6f6e  ions strictly on
+000066c0: 652d 7065 722d 6c69 6e65 3a0a 0a20 2020  e-per-line:..   
+000066d0: 2020 2020 203e 3e3e 2073 7461 6666 203d       >>> staff =
+000066e0: 2061 626a 6164 2e53 7461 6666 2822 6327   abjad.Staff("c'
+000066f0: 3420 6427 2065 2720 6627 2229 0a20 2020  4 d' e' f'").   
+00006700: 2020 2020 203e 3e3e 2061 626a 6164 2e61       >>> abjad.a
+00006710: 7474 6163 6828 6162 6a61 642e 4172 7469  ttach(abjad.Arti
+00006720: 6375 6c61 7469 6f6e 2827 5e27 292c 2073  culation('^'), s
+00006730: 7461 6666 5b30 5d29 0a20 2020 2020 2020  taff[0]).       
+00006740: 203e 3e3e 206d 6172 6b75 7020 3d20 6162   >>> markup = ab
+00006750: 6a61 642e 4d61 726b 7570 2872 275c 6d61  jad.Markup(r'\ma
+00006760: 726b 7570 2041 6c6c 6567 726f 2729 0a20  rkup Allegro'). 
+00006770: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+00006780: 2e61 7474 6163 6828 6d61 726b 7570 2c20  .attach(markup, 
+00006790: 7374 6166 665b 305d 2c20 6469 7265 6374  staff[0], direct
+000067a0: 696f 6e3d 6162 6a61 642e 5550 290a 2020  ion=abjad.UP).  
+000067b0: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+000067c0: 6174 7461 6368 2861 626a 6164 2e53 7465  attach(abjad.Ste
+000067d0: 6d54 7265 6d6f 6c6f 2829 2c20 7374 6166  mTremolo(), staf
+000067e0: 665b 305d 290a 2020 2020 2020 2020 3e3e  f[0]).        >>
+000067f0: 3e20 6162 6a61 642e 7368 6f77 2873 7461  > abjad.show(sta
+00006800: 6666 2920 2320 646f 6374 6573 743a 202b  ff) # doctest: +
+00006810: 534b 4950 0a0a 2020 2020 2020 2020 3e3e  SKIP..        >>
+00006820: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+00006830: 2e6c 696c 7970 6f6e 6428 7374 6166 6629  .lilypond(staff)
+00006840: 0a20 2020 2020 2020 203e 3e3e 2070 7269  .        >>> pri
+00006850: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
+00006860: 2020 205c 6e65 7720 5374 6166 660a 2020     \new Staff.  
+00006870: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+00006880: 2020 2020 6327 340a 2020 2020 2020 2020      c'4.        
+00006890: 2020 2020 3a31 360a 2020 2020 2020 2020      :16.        
+000068a0: 2020 2020 2d20 5c6d 6172 6361 746f 0a20      - \marcato. 
+000068b0: 2020 2020 2020 2020 2020 205e 205c 6d61             ^ \ma
+000068c0: 726b 7570 2041 6c6c 6567 726f 0a20 2020  rkup Allegro.   
+000068d0: 2020 2020 2020 2020 2064 2734 0a20 2020           d'4.   
+000068e0: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
+000068f0: 2020 2020 2020 2020 2066 2734 0a20 2020           f'4.   
+00006900: 2020 2020 207d 0a0a 2020 2020 2222 220a       }..    """.
+00006910: 0a20 2020 2023 2323 2043 4c41 5353 2056  .    ### CLASS V
+00006920: 4152 4941 424c 4553 2023 2323 0a0a 2020  ARIABLES ###..  
+00006930: 2020 5f61 6c6c 6f77 6162 6c65 5f73 6974    _allowable_sit
+00006940: 6573 203d 2028 0a20 2020 2020 2020 2022  es = (.        "
+00006950: 6162 736f 6c75 7465 5f62 6566 6f72 6522  absolute_before"
+00006960: 2c0a 2020 2020 2020 2020 2262 6566 6f72  ,.        "befor
+00006970: 6522 2c0a 2020 2020 2020 2020 226f 7065  e",.        "ope
+00006980: 6e69 6e67 222c 0a20 2020 2020 2020 2022  ning",.        "
+00006990: 636c 6f73 696e 6722 2c0a 2020 2020 2020  closing",.      
+000069a0: 2020 2261 6674 6572 222c 0a20 2020 2029    "after",.    )
+000069b0: 0a0a 2020 2020 5f5f 646f 6375 6d65 6e74  ..    __document
+000069c0: 6174 696f 6e5f 7365 6374 696f 6e5f 5f20  ation_section__ 
+000069d0: 3d20 2243 6f6e 7461 696e 6572 7322 0a0a  = "Containers"..
+000069e0: 2020 2020 5f5f 736c 6f74 735f 5f20 3d20      __slots__ = 
+000069f0: 280a 2020 2020 2020 2020 225f 6964 656e  (.        "_iden
+00006a00: 7469 6669 6572 222c 0a20 2020 2020 2020  tifier",.       
+00006a10: 2022 5f63 6f6d 706f 6e65 6e74 7322 2c0a   "_components",.
+00006a20: 2020 2020 2020 2020 225f 666f 726d 6174          "_format
+00006a30: 7465 7222 2c0a 2020 2020 2020 2020 225f  ter",.        "_
+00006a40: 6e61 6d65 645f 6368 696c 6472 656e 222c  named_children",
+00006a50: 0a20 2020 2020 2020 2022 5f6e 616d 6522  .        "_name"
+00006a60: 2c0a 2020 2020 2020 2020 225f 6973 5f73  ,.        "_is_s
+00006a70: 696d 756c 7461 6e65 6f75 7322 2c0a 2020  imultaneous",.  
+00006a80: 2020 290a 0a20 2020 2023 2323 2049 4e49    )..    ### INI
+00006a90: 5449 414c 495a 4552 2023 2323 0a0a 2020  TIALIZER ###..  
+00006aa0: 2020 2320 544f 444f 3a20 6d61 6b65 2061    # TODO: make a
+00006ab0: 6c6c 206b 6579 776f 7264 7320 2861 6674  ll keywords (aft
+00006ac0: 6572 2063 6f6d 706f 6e65 6e74 7329 206d  er components) m
+00006ad0: 616e 6461 746f 7279 206b 6579 776f 7264  andatory keyword
+00006ae0: 730a 2020 2020 6465 6620 5f5f 696e 6974  s.    def __init
+00006af0: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
+00006b00: 2c0a 2020 2020 2020 2020 636f 6d70 6f6e  ,.        compon
+00006b10: 656e 7473 3d4e 6f6e 652c 0a20 2020 2020  ents=None,.     
+00006b20: 2020 2069 6465 6e74 6966 6965 723a 2073     identifier: s
+00006b30: 7472 203d 204e 6f6e 652c 0a20 2020 2020  tr = None,.     
+00006b40: 2020 2073 696d 756c 7461 6e65 6f75 733a     simultaneous:
+00006b50: 2062 6f6f 6c20 3d20 4661 6c73 652c 0a20   bool = False,. 
+00006b60: 2020 2020 2020 206e 616d 653a 2073 7472         name: str
+00006b70: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
+00006b80: 2074 6167 3a20 5f74 6167 2e54 6167 203d   tag: _tag.Tag =
+00006b90: 204e 6f6e 652c 0a20 2020 2020 2020 202a   None,.        *
+00006ba0: 2c0a 2020 2020 2020 2020 6c61 6e67 7561  ,.        langua
+00006bb0: 6765 3a20 7374 7220 3d20 2265 6e67 6c69  ge: str = "engli
+00006bc0: 7368 222c 0a20 2020 2029 202d 3e20 4e6f  sh",.    ) -> No
+00006bd0: 6e65 3a0a 2020 2020 2020 2020 636f 6d70  ne:.        comp
+00006be0: 6f6e 656e 7473 203d 2063 6f6d 706f 6e65  onents = compone
+00006bf0: 6e74 7320 6f72 205b 5d0a 2020 2020 2020  nts or [].      
+00006c00: 2020 436f 6d70 6f6e 656e 742e 5f5f 696e    Component.__in
+00006c10: 6974 5f5f 2873 656c 662c 2074 6167 3d74  it__(self, tag=t
+00006c20: 6167 290a 2020 2020 2020 2020 7365 6c66  ag).        self
+00006c30: 2e5f 6e61 6d65 645f 6368 696c 6472 656e  ._named_children
+00006c40: 3a20 6469 6374 203d 207b 7d0a 2020 2020  : dict = {}.    
+00006c50: 2020 2020 7365 6c66 2e5f 6973 5f73 696d      self._is_sim
+00006c60: 756c 7461 6e65 6f75 7320 3d20 4e6f 6e65  ultaneous = None
+00006c70: 0a20 2020 2020 2020 2023 2073 6574 7320  .        # sets 
+00006c80: 6e61 6d65 2074 656d 706f 7261 7269 6c79  name temporarily
+00006c90: 2066 6f72 205f 6669 6e64 5f63 6f72 7265   for _find_corre
+00006ca0: 6374 5f65 6666 6563 7469 7665 5f63 6f6e  ct_effective_con
+00006cb0: 7465 7874 3a0a 2020 2020 2020 2020 7365  text:.        se
+00006cc0: 6c66 2e5f 6e61 6d65 203d 206e 616d 650a  lf._name = name.
+00006cd0: 2020 2020 2020 2020 7365 6c66 2e5f 696e          self._in
+00006ce0: 6974 6961 6c69 7a65 5f63 6f6d 706f 6e65  itialize_compone
+00006cf0: 6e74 7328 636f 6d70 6f6e 656e 7473 2c20  nts(components, 
+00006d00: 6c61 6e67 7561 6765 3d6c 616e 6775 6167  language=languag
+00006d10: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+00006d20: 6964 656e 7469 6669 6572 203d 2069 6465  identifier = ide
+00006d30: 6e74 6966 6965 720a 2020 2020 2020 2020  ntifier.        
+00006d40: 7365 6c66 2e73 696d 756c 7461 6e65 6f75  self.simultaneou
+00006d50: 7320 3d20 626f 6f6c 2873 696d 756c 7461  s = bool(simulta
+00006d60: 6e65 6f75 7329 0a20 2020 2020 2020 2023  neous).        #
+00006d70: 2073 6574 7320 6e61 6d65 2070 6572 6d61   sets name perma
+00006d80: 6e65 6e74 6c79 2061 6674 6572 205f 696e  nently after _in
+00006d90: 6974 616c 697a 655f 636f 6d70 6f6e 656e  italize_componen
+00006da0: 7473 3a0a 2020 2020 2020 2020 7365 6c66  ts:.        self
+00006db0: 2e6e 616d 6520 3d20 6e61 6d65 0a0a 2020  .name = name..  
+00006dc0: 2020 2323 2320 5350 4543 4941 4c20 4d45    ### SPECIAL ME
+00006dd0: 5448 4f44 5320 2323 230a 0a20 2020 2064  THODS ###..    d
+00006de0: 6566 205f 5f63 6f6e 7461 696e 735f 5f28  ef __contains__(
+00006df0: 7365 6c66 2c20 6172 6775 6d65 6e74 2920  self, argument) 
+00006e00: 2d3e 2062 6f6f 6c3a 0a20 2020 2020 2020  -> bool:.       
+00006e10: 2022 2222 0a20 2020 2020 2020 2049 7320   """.        Is 
+00006e20: 7472 7565 2077 6865 6e20 6060 6172 6775  true when ``argu
+00006e30: 6d65 6e74 6060 2061 7070 6561 7273 2069  ment`` appears i
+00006e40: 6e20 636f 6e74 6169 6e65 722e 0a20 2020  n container..   
+00006e50: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00006e60: 2069 6620 6973 696e 7374 616e 6365 2861   if isinstance(a
+00006e70: 7267 756d 656e 742c 2073 7472 293a 0a20  rgument, str):. 
+00006e80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00006e90: 6e20 6172 6775 6d65 6e74 2069 6e20 7365  n argument in se
+00006ea0: 6c66 2e5f 6e61 6d65 645f 6368 696c 6472  lf._named_childr
+00006eb0: 656e 0a20 2020 2020 2020 2065 6c73 653a  en.        else:
+00006ec0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00006ed0: 2063 6f6d 706f 6e65 6e74 2069 6e20 7365   component in se
+00006ee0: 6c66 2e63 6f6d 706f 6e65 6e74 733a 0a20  lf.components:. 
+00006ef0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00006f00: 6620 636f 6d70 6f6e 656e 7420 6973 2061  f component is a
+00006f10: 7267 756d 656e 743a 0a20 2020 2020 2020  rgument:.       
+00006f20: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00006f30: 7572 6e20 5472 7565 0a20 2020 2020 2020  urn True.       
+00006f40: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00006f50: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00006f60: 6e20 4661 6c73 650a 0a20 2020 2064 6566  n False..    def
+00006f70: 205f 5f64 656c 6974 656d 5f5f 2873 656c   __delitem__(sel
+00006f80: 662c 2069 293a 0a20 2020 2020 2020 2072  f, i):.        r
+00006f90: 2222 220a 2020 2020 2020 2020 4465 6c65  """.        Dele
+00006fa0: 7465 7320 636f 6d70 6f6e 656e 7473 2873  tes components(s
+00006fb0: 2920 6174 2069 6e64 6578 2060 6069 6060  ) at index ``i``
+00006fc0: 2069 6e20 636f 6e74 6169 6e65 722e 0a0a   in container...
+00006fd0: 2020 2020 2020 2020 2e2e 2020 636f 6e74          ..  cont
+00006fe0: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
+00006ff0: 0a20 2020 2020 2020 2020 2020 2044 656c  .            Del
+00007000: 6574 6573 2066 6972 7374 2074 7570 6c65  etes first tuple
+00007010: 7420 696e 2076 6f69 6365 3a0a 0a20 2020  t in voice:..   
+00007020: 2020 2020 2020 2020 203e 3e3e 2076 6f69           >>> voi
+00007030: 6365 203d 2061 626a 6164 2e56 6f69 6365  ce = abjad.Voice
+00007040: 2829 0a20 2020 2020 2020 2020 2020 203e  ().            >
+00007050: 3e3e 2076 6f69 6365 2e61 7070 656e 6428  >> voice.append(
+00007060: 6162 6a61 642e 5475 706c 6574 2828 342c  abjad.Tuplet((4,
+00007070: 2036 292c 2022 6327 3420 6427 3420 6527   6), "c'4 d'4 e'
+00007080: 3422 2929 0a20 2020 2020 2020 2020 2020  4")).           
+00007090: 203e 3e3e 2076 6f69 6365 2e61 7070 656e   >>> voice.appen
+000070a0: 6428 6162 6a61 642e 5475 706c 6574 2828  d(abjad.Tuplet((
+000070b0: 322c 2033 292c 2022 6527 3420 6427 3420  2, 3), "e'4 d'4 
+000070c0: 6327 3422 2929 0a20 2020 2020 2020 2020  c'4")).         
+000070d0: 2020 203e 3e3e 206c 6561 7665 7320 3d20     >>> leaves = 
+000070e0: 6162 6a61 642e 7365 6c65 6374 2e6c 6561  abjad.select.lea
+000070f0: 7665 7328 766f 6963 6529 0a20 2020 2020  ves(voice).     
+00007100: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+00007110: 2e73 6c75 7228 6c65 6176 6573 290a 2020  .slur(leaves).  
+00007120: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+00007130: 6a61 642e 7368 6f77 2876 6f69 6365 2920  jad.show(voice) 
+00007140: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
+00007150: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
+00007160: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
+00007170: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+00007180: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+00007190: 7970 6f6e 6428 766f 6963 6529 0a20 2020  ypond(voice).   
+000071a0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+000071b0: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
+000071c0: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+000071d0: 6e65 7720 566f 6963 650a 2020 2020 2020  new Voice.      
+000071e0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+000071f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007200: 5c74 696d 6573 2034 2f36 0a20 2020 2020  \times 4/6.     
+00007210: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+00007220: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007230: 2020 2020 2020 2020 2063 2734 0a20 2020           c'4.   
+00007240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007250: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
+00007260: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00007270: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+00007280: 2020 2020 2020 2020 2020 2065 2734 0a20             e'4. 
+00007290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000072a0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+000072b0: 2020 2020 2020 2020 205c 7469 6d65 7320           \times 
+000072c0: 322f 330a 2020 2020 2020 2020 2020 2020  2/3.            
+000072d0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+000072e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000072f0: 2020 6527 340a 2020 2020 2020 2020 2020    e'4.          
+00007300: 2020 2020 2020 2020 2020 2020 2020 6427                d'
+00007310: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+00007320: 2020 2020 2020 2020 2020 6327 340a 2020            c'4.  
+00007330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007340: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00007350: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00007360: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+00007370: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00007380: 2074 7570 6c65 745f 3120 3d20 766f 6963   tuplet_1 = voic
+00007390: 655b 305d 0a20 2020 2020 2020 2020 2020  e[0].           
+000073a0: 203e 3e3e 2064 656c 2876 6f69 6365 5b30   >>> del(voice[0
+000073b0: 5d29 0a20 2020 2020 2020 2020 2020 203e  ]).            >
+000073c0: 3e3e 2073 7461 7274 5f73 6c75 7220 3d20  >> start_slur = 
+000073d0: 6162 6a61 642e 5374 6172 7453 6c75 7228  abjad.StartSlur(
+000073e0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+000073f0: 3e20 6c65 6166 203d 2061 626a 6164 2e73  > leaf = abjad.s
+00007400: 656c 6563 742e 6c65 6166 2876 6f69 6365  elect.leaf(voice
+00007410: 2c20 3029 0a20 2020 2020 2020 2020 2020  , 0).           
+00007420: 203e 3e3e 2061 626a 6164 2e61 7474 6163   >>> abjad.attac
+00007430: 6828 7374 6172 745f 736c 7572 2c20 6c65  h(start_slur, le
+00007440: 6166 290a 0a20 2020 2020 2020 2020 2020  af)..           
+00007450: 2046 6972 7374 2074 7570 6c65 7420 6e6f   First tuplet no
+00007460: 206c 6f6e 6765 7220 6170 7065 6172 7320   longer appears 
+00007470: 696e 2076 6f69 6365 3a0a 0a20 2020 2020  in voice:..     
+00007480: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+00007490: 626a 6164 2e73 686f 7728 766f 6963 6529  bjad.show(voice)
+000074a0: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
+000074b0: 500a 0a20 2020 2020 2020 2020 2020 202e  P..            .
+000074c0: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
+000074d0: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
+000074e0: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
+000074f0: 6c79 706f 6e64 2876 6f69 6365 290a 2020  lypond(voice).  
+00007500: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+00007510: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
+00007520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007530: 5c6e 6577 2056 6f69 6365 0a20 2020 2020  \new Voice.     
+00007540: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00007550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007560: 205c 7469 6d65 7320 322f 330a 2020 2020   \times 2/3.    
+00007570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007580: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00007590: 2020 2020 2020 2020 2020 6527 340a 2020            e'4.  
+000075a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000075b0: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+000075c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000075d0: 6427 340a 2020 2020 2020 2020 2020 2020  d'4.            
+000075e0: 2020 2020 2020 2020 2020 2020 6327 340a              c'4.
+000075f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007600: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00007610: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+00007620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007630: 7d0a 0a20 2020 2020 2020 2020 2020 203e  }..            >
+00007640: 3e3e 2061 626a 6164 2e77 662e 7765 6c6c  >> abjad.wf.well
+00007650: 666f 726d 6564 2876 6f69 6365 290a 2020  formed(voice).  
+00007660: 2020 2020 2020 2020 2020 5472 7565 0a0a            True..
+00007670: 2020 2020 2020 2020 2020 2020 4669 7273              Firs
+00007680: 7420 7475 706c 6574 206d 7573 7420 6861  t tuplet must ha
+00007690: 7665 2073 7461 7274 2073 6c75 7220 7265  ve start slur re
+000076a0: 6d6f 7665 643a 0a0a 2020 2020 2020 2020  moved:..        
+000076b0: 2020 2020 3e3e 3e20 6162 6a61 642e 6465      >>> abjad.de
+000076c0: 7461 6368 2861 626a 6164 2e53 7461 7274  tach(abjad.Start
+000076d0: 536c 7572 2c20 7475 706c 6574 5f31 5b30  Slur, tuplet_1[0
+000076e0: 5d29 0a20 2020 2020 2020 2020 2020 2028  ]).            (
+000076f0: 5374 6172 7453 6c75 7228 292c 290a 0a20  StartSlur(),).. 
+00007700: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+00007710: 626a 6164 2e73 686f 7728 7475 706c 6574  bjad.show(tuplet
+00007720: 5f31 2920 2320 646f 6374 6573 743a 202b  _1) # doctest: +
+00007730: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
+00007740: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+00007750: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+00007760: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+00007770: 2e6c 696c 7970 6f6e 6428 7475 706c 6574  .lilypond(tuplet
+00007780: 5f31 290a 2020 2020 2020 2020 2020 2020  _1).            
+00007790: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+000077a0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+000077b0: 2020 2020 2020 5c74 696d 6573 2034 2f36        \times 4/6
+000077c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000077d0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+000077e0: 2020 2020 2020 2063 2734 0a20 2020 2020         c'4.     
+000077f0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00007800: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+00007810: 2020 2020 2020 2065 2734 0a20 2020 2020         e'4.     
+00007820: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
+00007830: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+00007840: 6a61 642e 7766 2e77 656c 6c66 6f72 6d65  jad.wf.wellforme
+00007850: 6428 7475 706c 6574 5f31 290a 2020 2020  d(tuplet_1).    
+00007860: 2020 2020 2020 2020 5472 7565 0a0a 2020          True..  
+00007870: 2020 2020 2020 5265 7475 726e 7320 6e6f        Returns no
+00007880: 6e65 2e0a 2020 2020 2020 2020 2222 220a  ne..        """.
+00007890: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+000078a0: 2073 656c 665b 695d 0a20 2020 2020 2020   self[i].       
+000078b0: 2069 6620 6973 696e 7374 616e 6365 2872   if isinstance(r
+000078c0: 6573 756c 742c 2043 6f6d 706f 6e65 6e74  esult, Component
+000078d0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+000078e0: 6573 756c 742e 5f73 6574 5f70 6172 656e  esult._set_paren
+000078f0: 7428 4e6f 6e65 290a 2020 2020 2020 2020  t(None).        
+00007900: 2020 2020 7265 7475 726e 0a20 2020 2020      return.     
+00007910: 2020 2066 6f72 2063 6f6d 706f 6e65 6e74     for component
+00007920: 2069 6e20 7265 7375 6c74 3a0a 2020 2020   in result:.    
+00007930: 2020 2020 2020 2020 636f 6d70 6f6e 656e          componen
+00007940: 742e 5f73 6574 5f70 6172 656e 7428 4e6f  t._set_parent(No
+00007950: 6e65 290a 0a20 2020 2040 7479 7069 6e67  ne)..    @typing
+00007960: 2e6f 7665 726c 6f61 640a 2020 2020 6465  .overload.    de
+00007970: 6620 5f5f 6765 7469 7465 6d5f 5f28 7365  f __getitem__(se
+00007980: 6c66 2c20 6172 6775 6d65 6e74 3a20 7479  lf, argument: ty
+00007990: 7069 6e67 2e53 7570 706f 7274 7349 6e64  ping.SupportsInd
+000079a0: 6578 207c 2073 7472 2920 2d3e 2043 6f6d  ex | str) -> Com
+000079b0: 706f 6e65 6e74 3a0a 2020 2020 2020 2020  ponent:.        
+000079c0: 2e2e 2e0a 0a20 2020 2040 7479 7069 6e67  .....    @typing
+000079d0: 2e6f 7665 726c 6f61 640a 2020 2020 6465  .overload.    de
+000079e0: 6620 5f5f 6765 7469 7465 6d5f 5f28 7365  f __getitem__(se
+000079f0: 6c66 2c20 6172 6775 6d65 6e74 3a20 736c  lf, argument: sl
+00007a00: 6963 6529 202d 3e20 6c69 7374 5b43 6f6d  ice) -> list[Com
+00007a10: 706f 6e65 6e74 5d3a 0a20 2020 2020 2020  ponent]:.       
+00007a20: 202e 2e2e 0a0a 2020 2020 6465 6620 5f5f   .....    def __
+00007a30: 6765 7469 7465 6d5f 5f28 0a20 2020 2020  getitem__(.     
+00007a40: 2020 2073 656c 662c 2061 7267 756d 656e     self, argumen
+00007a50: 743a 2074 7970 696e 672e 5375 7070 6f72  t: typing.Suppor
+00007a60: 7473 496e 6465 7820 7c20 7374 7220 7c20  tsIndex | str | 
+00007a70: 736c 6963 650a 2020 2020 2920 2d3e 2043  slice.    ) -> C
+00007a80: 6f6d 706f 6e65 6e74 207c 206c 6973 745b  omponent | list[
+00007a90: 436f 6d70 6f6e 656e 745d 3a0a 2020 2020  Component]:.    
+00007aa0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00007ab0: 4765 7473 2074 6f70 2d6c 6576 656c 2069  Gets top-level i
+00007ac0: 7465 6d20 6f72 2073 6c69 6365 2069 6465  tem or slice ide
+00007ad0: 6e74 6966 6965 6420 6279 2060 6061 7267  ntified by ``arg
+00007ae0: 756d 656e 7460 602e 0a20 2020 2020 2020  ument``..       
+00007af0: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
+00007b00: 6973 696e 7374 616e 6365 2861 7267 756d  isinstance(argum
+00007b10: 656e 742c 2069 6e74 293a 0a20 2020 2020  ent, int):.     
+00007b20: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00007b30: 6c66 2e63 6f6d 706f 6e65 6e74 732e 5f5f  lf.components.__
+00007b40: 6765 7469 7465 6d5f 5f28 6172 6775 6d65  getitem__(argume
+00007b50: 6e74 290a 2020 2020 2020 2020 656c 6966  nt).        elif
+00007b60: 2069 7369 6e73 7461 6e63 6528 6172 6775   isinstance(argu
+00007b70: 6d65 6e74 2c20 736c 6963 6529 3a0a 2020  ment, slice):.  
+00007b80: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00007b90: 203d 2073 656c 662e 636f 6d70 6f6e 656e   = self.componen
+00007ba0: 7473 2e5f 5f67 6574 6974 656d 5f5f 2861  ts.__getitem__(a
+00007bb0: 7267 756d 656e 7429 0a20 2020 2020 2020  rgument).       
+00007bc0: 2020 2020 2061 7373 6572 7420 6973 696e       assert isin
+00007bd0: 7374 616e 6365 2872 6573 756c 742c 2074  stance(result, t
+00007be0: 7570 6c65 292c 2072 6570 7228 7265 7375  uple), repr(resu
+00007bf0: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
+00007c00: 7265 7475 726e 206c 6973 7428 7265 7375  return list(resu
+00007c10: 6c74 290a 2020 2020 2020 2020 656c 6966  lt).        elif
+00007c20: 2069 7369 6e73 7461 6e63 6528 6172 6775   isinstance(argu
+00007c30: 6d65 6e74 2c20 7374 7229 3a0a 2020 2020  ment, str):.    
+00007c40: 2020 2020 2020 2020 6966 2061 7267 756d          if argum
+00007c50: 656e 7420 6e6f 7420 696e 2073 656c 662e  ent not in self.
+00007c60: 5f6e 616d 6564 5f63 6869 6c64 7265 6e3a  _named_children:
+00007c70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007c80: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+00007c90: 7228 6622 6361 6e20 6e6f 7420 6669 6e64  r(f"can not find
+00007ca0: 2063 6f6d 706f 6e65 6e74 206e 616d 6564   component named
+00007cb0: 207b 6172 6775 6d65 6e74 2172 7d2e 2229   {argument!r}.")
+00007cc0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+00007cd0: 6620 3120 3c20 6c65 6e28 7365 6c66 2e5f  f 1 < len(self._
+00007ce0: 6e61 6d65 645f 6368 696c 6472 656e 2e5f  named_children._
+00007cf0: 5f67 6574 6974 656d 5f5f 2861 7267 756d  _getitem__(argum
+00007d00: 656e 7429 293a 0a20 2020 2020 2020 2020  ent)):.         
+00007d10: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00007d20: 7565 4572 726f 7228 6622 6d75 6c74 6970  ueError(f"multip
+00007d30: 6c65 2063 6f6d 706f 6e65 6e74 7320 6e61  le components na
+00007d40: 6d65 6420 7b61 7267 756d 656e 7421 727d  med {argument!r}
+00007d50: 2e22 290a 2020 2020 2020 2020 2020 2020  .").            
+00007d60: 7265 7475 726e 2073 656c 662e 5f6e 616d  return self._nam
+00007d70: 6564 5f63 6869 6c64 7265 6e2e 5f5f 6765  ed_children.__ge
+00007d80: 7469 7465 6d5f 5f28 6172 6775 6d65 6e74  titem__(argument
+00007d90: 295b 305d 0a20 2020 2020 2020 2072 6169  )[0].        rai
+00007da0: 7365 2056 616c 7565 4572 726f 7228 6622  se ValueError(f"
+00007db0: 6361 6e20 6e6f 7420 6765 7420 636f 6e74  can not get cont
+00007dc0: 6169 6e65 7220 6174 207b 6172 6775 6d65  ainer at {argume
+00007dd0: 6e74 2172 7d2e 2229 0a0a 2020 2020 6465  nt!r}.")..    de
+00007de0: 6620 5f5f 6765 746e 6577 6172 6773 5f5f  f __getnewargs__
+00007df0: 2873 656c 6629 202d 3e20 7475 706c 653a  (self) -> tuple:
+00007e00: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00007e10: 2020 2020 2047 6574 7320 6e65 7720 636f       Gets new co
+00007e20: 6e74 6169 6e65 7220 6172 6775 6d65 6e74  ntainer argument
+00007e30: 732e 0a20 2020 2020 2020 2022 2222 0a20  s..        """. 
+00007e40: 2020 2020 2020 2072 6574 7572 6e20 5b5d         return []
+00007e50: 2c20 7365 6c66 2e69 6465 6e74 6966 6965  , self.identifie
+00007e60: 722c 2073 656c 662e 7369 6d75 6c74 616e  r, self.simultan
+00007e70: 656f 7573 2c20 7365 6c66 2e6e 616d 652c  eous, self.name,
+00007e80: 2073 656c 662e 7461 670a 0a20 2020 2064   self.tag..    d
+00007e90: 6566 205f 5f69 7465 725f 5f28 7365 6c66  ef __iter__(self
+00007ea0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
+00007eb0: 2020 2020 2020 2049 7465 7261 7465 7320         Iterates 
+00007ec0: 636f 6e74 6169 6e65 722e 0a0a 2020 2020  container...    
+00007ed0: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+00007ee0: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+00007ef0: 2020 2020 2020 2020 2041 626a 6164 2063           Abjad c
+00007f00: 6f6e 7461 696e 6572 7320 6172 6520 6974  ontainers are it
+00007f10: 6572 6162 6c65 733a 0a0a 2020 2020 2020  erables:..      
+00007f20: 2020 2020 2020 3e3e 3e20 696d 706f 7274        >>> import
+00007f30: 2063 6f6c 6c65 6374 696f 6e73 0a20 2020   collections.   
+00007f40: 2020 2020 2020 2020 203e 3e3e 2063 6f6e           >>> con
+00007f50: 7461 696e 6572 203d 2061 626a 6164 2e43  tainer = abjad.C
+00007f60: 6f6e 7461 696e 6572 2829 0a20 2020 2020  ontainer().     
+00007f70: 2020 2020 2020 203e 3e3e 2069 7369 6e73         >>> isins
+00007f80: 7461 6e63 6528 636f 6e74 6169 6e65 722c  tance(container,
+00007f90: 2063 6f6c 6c65 6374 696f 6e73 2e61 6263   collections.abc
+00007fa0: 2e49 7465 7261 626c 6529 0a20 2020 2020  .Iterable).     
+00007fb0: 2020 2020 2020 2054 7275 650a 0a20 2020         True..   
+00007fc0: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
+00007fd0: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+00007fe0: 2020 2020 2020 2020 2020 4162 6a61 6420            Abjad 
+00007ff0: 636f 6e74 6169 6e65 7273 2061 7265 206e  containers are n
+00008000: 6f74 2073 6571 7565 6e63 6573 3a0a 0a20  ot sequences:.. 
+00008010: 2020 2020 2020 2020 2020 203e 3e3e 2069             >>> i
+00008020: 6d70 6f72 7420 636f 6c6c 6563 7469 6f6e  mport collection
+00008030: 730a 2020 2020 2020 2020 2020 2020 3e3e  s.            >>
+00008040: 3e20 636f 6e74 6169 6e65 7220 3d20 6162  > container = ab
+00008050: 6a61 642e 436f 6e74 6169 6e65 7228 290a  jad.Container().
+00008060: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00008070: 6973 696e 7374 616e 6365 2863 6f6e 7461  isinstance(conta
+00008080: 696e 6572 2c20 636f 6c6c 6563 7469 6f6e  iner, collection
+00008090: 732e 6162 632e 5365 7175 656e 6365 290a  s.abc.Sequence).
+000080a0: 2020 2020 2020 2020 2020 2020 4661 6c73              Fals
+000080b0: 650a 0a20 2020 2020 2020 2059 6965 6c64  e..        Yield
+000080c0: 7320 636f 6e74 6169 6e65 7220 656c 656d  s container elem
+000080d0: 656e 7473 2e0a 0a20 2020 2020 2020 2052  ents...        R
+000080e0: 6574 7572 6e73 2067 656e 6572 6174 6f72  eturns generator
+000080f0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00008100: 2020 2020 2020 7265 7475 726e 2069 7465        return ite
+00008110: 7228 7365 6c66 2e63 6f6d 706f 6e65 6e74  r(self.component
+00008120: 7329 0a0a 2020 2020 6465 6620 5f5f 6c65  s)..    def __le
+00008130: 6e5f 5f28 7365 6c66 2920 2d3e 2069 6e74  n__(self) -> int
+00008140: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00008150: 2020 2020 2020 4765 7473 206e 756d 6265        Gets numbe
+00008160: 7220 6f66 2063 6f6d 706f 6e65 6e74 7320  r of components 
+00008170: 696e 2063 6f6e 7461 696e 6572 2e0a 2020  in container..  
+00008180: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00008190: 2020 7265 7475 726e 206c 656e 2873 656c    return len(sel
+000081a0: 662e 636f 6d70 6f6e 656e 7473 290a 0a20  f.components).. 
+000081b0: 2020 2064 6566 205f 5f72 6570 725f 5f28     def __repr__(
+000081c0: 7365 6c66 2920 2d3e 2073 7472 3a0a 2020  self) -> str:.  
+000081d0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000081e0: 2020 4765 7473 2072 6570 722e 0a20 2020    Gets repr..   
+000081f0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00008200: 2073 7472 696e 6720 3d20 7365 6c66 2e5f   string = self._
+00008210: 6765 745f 636f 6e74 656e 7473 5f73 756d  get_contents_sum
+00008220: 6d61 7279 2829 0a20 2020 2020 2020 2069  mary().        i
+00008230: 6620 7374 7269 6e67 3a0a 2020 2020 2020  f string:.      
+00008240: 2020 2020 2020 7265 7475 726e 2066 227b        return f"{
+00008250: 7479 7065 2873 656c 6629 2e5f 5f6e 616d  type(self).__nam
+00008260: 655f 5f7d 287b 7374 7269 6e67 2172 7d29  e__}({string!r})
+00008270: 220a 2020 2020 2020 2020 656c 7365 3a0a  ".        else:.
+00008280: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00008290: 726e 2066 227b 7479 7065 2873 656c 6629  rn f"{type(self)
+000082a0: 2e5f 5f6e 616d 655f 5f7d 2829 220a 0a20  .__name__}()".. 
+000082b0: 2020 2064 6566 205f 5f73 6574 6974 656d     def __setitem
+000082c0: 5f5f 2873 656c 662c 2069 2c20 6172 6775  __(self, i, argu
+000082d0: 6d65 6e74 2920 2d3e 204e 6f6e 653a 0a20  ment) -> None:. 
+000082e0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000082f0: 2020 2053 6574 7320 636f 6e74 6169 6e65     Sets containe
+00008300: 7220 6060 6960 6020 6571 7561 6c20 746f  r ``i`` equal to
+00008310: 2060 6061 7267 756d 656e 7460 602e 0a20   ``argument``.. 
+00008320: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00008330: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00008340: 2861 7267 756d 656e 742c 2073 7472 293a  (argument, str):
+00008350: 0a20 2020 2020 2020 2020 2020 2061 7267  .            arg
+00008360: 756d 656e 7420 3d20 7365 6c66 2e5f 7061  ument = self._pa
+00008370: 7273 655f 7374 7269 6e67 2861 7267 756d  rse_string(argum
+00008380: 656e 7429 0a20 2020 2020 2020 2020 2020  ent).           
+00008390: 2069 6620 6973 696e 7374 616e 6365 2869   if isinstance(i
+000083a0: 2c20 696e 7429 3a0a 2020 2020 2020 2020  , int):.        
+000083b0: 2020 2020 2020 2020 6173 7365 7274 206c          assert l
+000083c0: 656e 2861 7267 756d 656e 7429 203d 3d20  en(argument) == 
+000083d0: 312c 2072 6570 7228 6172 6775 6d65 6e74  1, repr(argument
+000083e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000083f0: 2020 6172 6775 6d65 6e74 203d 2061 7267    argument = arg
+00008400: 756d 656e 745b 305d 0a20 2020 2020 2020  ument[0].       
+00008410: 2077 7261 7070 6572 7320 3d20 5b5d 0a20   wrappers = []. 
+00008420: 2020 2020 2020 2066 6f72 2063 6f6d 706f         for compo
+00008430: 6e65 6e74 2069 6e20 7365 6c66 2e5f 6765  nent in self._ge
+00008440: 745f 636f 6d70 6f6e 656e 7473 2861 7267  t_components(arg
+00008450: 756d 656e 7429 3a0a 2020 2020 2020 2020  ument):.        
+00008460: 2020 2020 7772 6170 7065 7273 5f20 3d20      wrappers_ = 
+00008470: 636f 6d70 6f6e 656e 742e 5f67 6574 5f69  component._get_i
+00008480: 6e64 6963 6174 6f72 7328 756e 7772 6170  ndicators(unwrap
+00008490: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
+000084a0: 2020 2020 7772 6170 7065 7273 2e65 7874      wrappers.ext
+000084b0: 656e 6428 7772 6170 7065 7273 5f29 0a20  end(wrappers_). 
+000084c0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+000084d0: 616e 6365 2869 2c20 696e 7429 3a0a 2020  ance(i, int):.  
+000084e0: 2020 2020 2020 2020 2020 6172 6775 6d65            argume
+000084f0: 6e74 203d 205b 6172 6775 6d65 6e74 5d0a  nt = [argument].
+00008500: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00008510: 203c 2030 3a0a 2020 2020 2020 2020 2020   < 0:.          
+00008520: 2020 2020 2020 6920 3d20 6c65 6e28 7365        i = len(se
+00008530: 6c66 2920 2b20 690a 2020 2020 2020 2020  lf) + i.        
+00008540: 2020 2020 6920 3d20 736c 6963 6528 692c      i = slice(i,
+00008550: 2069 202b 2031 290a 2020 2020 2020 2020   i + 1).        
+00008560: 6e65 775f 6172 6775 6d65 6e74 203d 205b  new_argument = [
+00008570: 5d0a 2020 2020 2020 2020 666f 7220 6974  ].        for it
+00008580: 656d 2069 6e20 6172 6775 6d65 6e74 3a0a  em in argument:.
+00008590: 2020 2020 2020 2020 2020 2020 6966 2068              if h
+000085a0: 6173 6174 7472 2869 7465 6d2c 2022 5f69  asattr(item, "_i
+000085b0: 7465 6d73 2229 3a0a 2020 2020 2020 2020  tems"):.        
+000085c0: 2020 2020 2020 2020 6e65 775f 6172 6775          new_argu
+000085d0: 6d65 6e74 2e65 7874 656e 6428 6974 656d  ment.extend(item
+000085e0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+000085f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00008600: 2020 2020 6e65 775f 6172 6775 6d65 6e74      new_argument
+00008610: 2e61 7070 656e 6428 6974 656d 290a 2020  .append(item).  
+00008620: 2020 2020 2020 6172 6775 6d65 6e74 203d        argument =
+00008630: 206e 6577 5f61 7267 756d 656e 740a 2020   new_argument.  
+00008640: 2020 2020 2020 6173 7365 7274 2061 6c6c        assert all
+00008650: 2869 7369 6e73 7461 6e63 6528 5f2c 2043  (isinstance(_, C
+00008660: 6f6d 706f 6e65 6e74 2920 666f 7220 5f20  omponent) for _ 
+00008670: 696e 2061 7267 756d 656e 7429 2c20 7265  in argument), re
+00008680: 7072 2861 7267 756d 656e 7429 0a20 2020  pr(argument).   
+00008690: 2020 2020 2069 6620 616e 7928 6861 7361       if any(hasa
+000086a0: 7474 7228 5f2c 2022 5f6d 6169 6e5f 6c65  ttr(_, "_main_le
+000086b0: 6166 2229 2066 6f72 205f 2069 6e20 6172  af") for _ in ar
+000086c0: 6775 6d65 6e74 293a 0a20 2020 2020 2020  gument):.       
+000086d0: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
+000086e0: 7469 6f6e 2822 6d75 7374 2061 7474 6163  tion("must attac
+000086f0: 6820 6772 6163 6520 636f 6e74 6169 6e65  h grace containe
+00008700: 7220 746f 206e 6f74 6520 6f72 2063 686f  r to note or cho
+00008710: 7264 2e22 290a 2020 2020 2020 2020 6966  rd.").        if
+00008720: 2073 656c 662e 5f63 6865 636b 5f66 6f72   self._check_for
+00008730: 5f63 7963 6c65 7328 6172 6775 6d65 6e74  _cycles(argument
+00008740: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00008750: 6169 7365 205f 6578 6365 7074 696f 6e73  aise _exceptions
+00008760: 2e50 6172 656e 7461 6765 4572 726f 7228  .ParentageError(
+00008770: 2261 7474 656d 7074 6564 2074 6f20 696e  "attempted to in
+00008780: 6475 6365 2063 7963 6c65 732e 2229 0a20  duce cycles."). 
+00008790: 2020 2020 2020 2069 6620 280a 2020 2020         if (.    
+000087a0: 2020 2020 2020 2020 692e 7374 6172 7420          i.start 
+000087b0: 3d3d 2069 2e73 746f 700a 2020 2020 2020  == i.stop.      
+000087c0: 2020 2020 2020 616e 6420 692e 7374 6172        and i.star
+000087d0: 7420 6973 206e 6f74 204e 6f6e 650a 2020  t is not None.  
+000087e0: 2020 2020 2020 2020 2020 616e 6420 692e            and i.
+000087f0: 7374 6f70 2069 7320 6e6f 7420 4e6f 6e65  stop is not None
+00008800: 0a20 2020 2020 2020 2020 2020 2061 6e64  .            and
+00008810: 2069 2e73 7461 7274 203c 3d20 2d6c 656e   i.start <= -len
+00008820: 2873 656c 6629 0a20 2020 2020 2020 2029  (self).        )
+00008830: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
+00008840: 6172 742c 2073 746f 7020 3d20 302c 2030  art, stop = 0, 0
+00008850: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00008860: 2020 2020 2020 2020 2020 2073 7461 7274             start
+00008870: 2c20 7374 6f70 2c20 7374 7269 6465 203d  , stop, stride =
+00008880: 2069 2e69 6e64 6963 6573 286c 656e 2873   i.indices(len(s
+00008890: 656c 6629 290a 2020 2020 2020 2020 6465  elf)).        de
+000088a0: 6c20 7365 6c66 5b73 7461 7274 3a73 746f  l self[start:sto
+000088b0: 705d 0a20 2020 2020 2020 2073 656c 662e  p].        self.
+000088c0: 5f63 6f6d 706f 6e65 6e74 732e 5f5f 7365  _components.__se
+000088d0: 7469 7465 6d5f 5f28 736c 6963 6528 7374  titem__(slice(st
+000088e0: 6172 742c 2073 7461 7274 292c 2061 7267  art, start), arg
+000088f0: 756d 656e 7429 0a20 2020 2020 2020 2066  ument).        f
+00008900: 6f72 2063 6f6d 706f 6e65 6e74 2069 6e20  or component in 
+00008910: 6172 6775 6d65 6e74 3a0a 2020 2020 2020  argument:.      
+00008920: 2020 2020 2020 636f 6d70 6f6e 656e 742e        component.
+00008930: 5f73 6574 5f70 6172 656e 7428 7365 6c66  _set_parent(self
+00008940: 290a 2020 2020 2020 2020 666f 7220 7772  ).        for wr
+00008950: 6170 7065 7220 696e 2077 7261 7070 6572  apper in wrapper
+00008960: 733a 0a20 2020 2020 2020 2020 2020 2077  s:.            w
+00008970: 7261 7070 6572 2e5f 7570 6461 7465 5f65  rapper._update_e
+00008980: 6666 6563 7469 7665 5f63 6f6e 7465 7874  ffective_context
+00008990: 2829 0a0a 2020 2020 2323 2320 5052 4956  ()..    ### PRIV
+000089a0: 4154 4520 4d45 5448 4f44 5320 2323 230a  ATE METHODS ###.
+000089b0: 0a20 2020 2064 6566 205f 636f 7079 5f77  .    def _copy_w
+000089c0: 6974 685f 6368 696c 6472 656e 2873 656c  ith_children(sel
+000089d0: 6629 3a0a 2020 2020 2020 2020 6e65 775f  f):.        new_
+000089e0: 636f 6e74 6169 6e65 7220 3d20 7365 6c66  container = self
+000089f0: 2e5f 5f63 6f70 795f 5f28 290a 2020 2020  .__copy__().    
+00008a00: 2020 2020 666f 7220 636f 6d70 6f6e 656e      for componen
+00008a10: 7420 696e 2073 656c 663a 0a20 2020 2020  t in self:.     
+00008a20: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00008a30: 616e 6365 2863 6f6d 706f 6e65 6e74 2c20  ance(component, 
+00008a40: 436f 6e74 6169 6e65 7229 3a0a 2020 2020  Container):.    
+00008a50: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+00008a60: 636f 6d70 6f6e 656e 7420 3d20 636f 6d70  component = comp
+00008a70: 6f6e 656e 742e 5f63 6f70 795f 7769 7468  onent._copy_with
+00008a80: 5f63 6869 6c64 7265 6e28 290a 2020 2020  _children().    
+00008a90: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00008aa0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+00008ab0: 775f 636f 6d70 6f6e 656e 7420 3d20 636f  w_component = co
+00008ac0: 6d70 6f6e 656e 742e 5f5f 636f 7079 5f5f  mponent.__copy__
+00008ad0: 2829 0a20 2020 2020 2020 2020 2020 206e  ().            n
+00008ae0: 6577 5f63 6f6e 7461 696e 6572 2e61 7070  ew_container.app
+00008af0: 656e 6428 6e65 775f 636f 6d70 6f6e 656e  end(new_componen
+00008b00: 7429 0a20 2020 2020 2020 2072 6574 7572  t).        retur
+00008b10: 6e20 6e65 775f 636f 6e74 6169 6e65 720a  n new_container.
+00008b20: 0a20 2020 2064 6566 205f 656a 6563 745f  .    def _eject_
+00008b30: 636f 6e74 656e 7473 2873 656c 6629 3a0a  contents(self):.
+00008b40: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00008b50: 5f70 6172 656e 7420 6973 206e 6f74 204e  _parent is not N
+00008b60: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00008b70: 2072 6169 7365 2045 7863 6570 7469 6f6e   raise Exception
+00008b80: 2822 6361 6e20 6e6f 7420 656a 6563 7420  ("can not eject 
+00008b90: 636f 6e74 656e 7473 206f 6620 696e 2d73  contents of in-s
+00008ba0: 636f 7265 2063 6f6e 7461 696e 6572 2e22  core container."
+00008bb0: 290a 2020 2020 2020 2020 636f 6e74 656e  ).        conten
+00008bc0: 7473 203d 2073 656c 665b 3a5d 0a20 2020  ts = self[:].   
+00008bd0: 2020 2020 2066 6f72 2063 6f6d 706f 6e65       for compone
+00008be0: 6e74 2069 6e20 636f 6e74 656e 7473 3a0a  nt in contents:.
+00008bf0: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
+00008c00: 6f6e 656e 742e 5f73 6574 5f70 6172 656e  onent._set_paren
+00008c10: 7428 4e6f 6e65 290a 2020 2020 2020 2020  t(None).        
+00008c20: 7365 6c66 2e5f 636f 6d70 6f6e 656e 7473  self._components
+00008c30: 5b3a 5d20 3d20 5b5d 0a20 2020 2020 2020  [:] = [].       
+00008c40: 2072 6574 7572 6e20 636f 6e74 656e 7473   return contents
+00008c50: 0a0a 2020 2020 6465 6620 5f66 6f72 6d61  ..    def _forma
+00008c60: 745f 6166 7465 725f 7369 7465 2873 656c  t_after_site(sel
+00008c70: 662c 2063 6f6e 7472 6962 7574 696f 6e73  f, contributions
+00008c80: 293a 0a20 2020 2020 2020 2072 6573 756c  ):.        resul
+00008c90: 7420 3d20 5b5d 0a20 2020 2020 2020 2073  t = [].        s
+00008ca0: 7472 696e 6773 203d 2063 6f6e 7472 6962  trings = contrib
+00008cb0: 7574 696f 6e73 2e61 6c70 6861 6265 7469  utions.alphabeti
+00008cc0: 7a65 2863 6f6e 7472 6962 7574 696f 6e73  ze(contributions
+00008cd0: 2e61 6674 6572 2e63 6f6d 6d61 6e64 7329  .after.commands)
+00008ce0: 0a20 2020 2020 2020 2069 6620 7374 7269  .        if stri
+00008cf0: 6e67 733a 0a20 2020 2020 2020 2020 2020  ngs:.           
+00008d00: 2072 6573 756c 742e 6170 7065 6e64 2866   result.append(f
+00008d10: 2225 207b 5f63 6f6e 7472 6962 7574 696f  "% {_contributio
+00008d20: 6e73 2e54 7970 6573 2e43 4f4d 4d41 4e44  ns.Types.COMMAND
+00008d30: 532e 6e61 6d65 7d3a 2229 0a20 2020 2020  S.name}:").     
+00008d40: 2020 2020 2020 2072 6573 756c 742e 6578         result.ex
+00008d50: 7465 6e64 2873 7472 696e 6773 290a 2020  tend(strings).  
+00008d60: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+00008d70: 756c 740a 0a20 2020 2064 6566 205f 666f  ult..    def _fo
+00008d80: 726d 6174 5f62 6566 6f72 655f 7369 7465  rmat_before_site
+00008d90: 2873 656c 662c 2063 6f6e 7472 6962 7574  (self, contribut
+00008da0: 696f 6e73 293a 0a20 2020 2020 2020 2072  ions):.        r
+00008db0: 6573 756c 7420 3d20 5b5d 0a20 2020 2020  esult = [].     
+00008dc0: 2020 2073 7472 696e 6773 203d 2063 6f6e     strings = con
+00008dd0: 7472 6962 7574 696f 6e73 2e61 6c70 6861  tributions.alpha
+00008de0: 6265 7469 7a65 2863 6f6e 7472 6962 7574  betize(contribut
+00008df0: 696f 6e73 2e62 6566 6f72 652e 636f 6d6d  ions.before.comm
+00008e00: 616e 6473 290a 2020 2020 2020 2020 6966  ands).        if
+00008e10: 2073 7472 696e 6773 3a0a 2020 2020 2020   strings:.      
+00008e20: 2020 2020 2020 7265 7375 6c74 2e61 7070        result.app
+00008e30: 656e 6428 6622 2520 7b5f 636f 6e74 7269  end(f"% {_contri
+00008e40: 6275 7469 6f6e 732e 5479 7065 732e 434f  butions.Types.CO
+00008e50: 4d4d 414e 4453 2e6e 616d 657d 3a22 290a  MMANDS.name}:").
+00008e60: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00008e70: 6c74 2e65 7874 656e 6428 7374 7269 6e67  lt.extend(string
+00008e80: 7329 0a20 2020 2020 2020 2072 6574 7572  s).        retur
+00008e90: 6e20 7265 7375 6c74 0a0a 2020 2020 6465  n result..    de
+00008ea0: 6620 5f66 6f72 6d61 745f 636c 6f73 655f  f _format_close_
+00008eb0: 6272 6163 6b65 7473 2873 656c 6629 3a0a  brackets(self):.
+00008ec0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00008ed0: 205b 5d0a 2020 2020 2020 2020 7374 7269   [].        stri
+00008ee0: 6e67 7320 3d20 5b5d 0a20 2020 2020 2020  ngs = [].       
+00008ef0: 2069 6620 7365 6c66 2e73 696d 756c 7461   if self.simulta
+00008f00: 6e65 6f75 733a 0a20 2020 2020 2020 2020  neous:.         
+00008f10: 2020 2069 6620 7365 6c66 2e69 6465 6e74     if self.ident
+00008f20: 6966 6965 723a 0a20 2020 2020 2020 2020  ifier:.         
+00008f30: 2020 2020 2020 2073 7472 696e 6720 3d20         string = 
+00008f40: 6622 3e3e 2020 7b73 656c 662e 6964 656e  f">>  {self.iden
+00008f50: 7469 6669 6572 7d22 0a20 2020 2020 2020  tifier}".       
+00008f60: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00008f70: 2020 2020 2020 2020 2020 2073 7472 696e             strin
+00008f80: 6720 3d20 223e 3e22 0a20 2020 2020 2020  g = ">>".       
+00008f90: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00008fa0: 2020 2069 6620 7365 6c66 2e69 6465 6e74     if self.ident
+00008fb0: 6966 6965 723a 0a20 2020 2020 2020 2020  ifier:.         
+00008fc0: 2020 2020 2020 2073 7472 696e 6720 3d20         string = 
+00008fd0: 6622 7d7d 2020 207b 7365 6c66 2e69 6465  f"}}   {self.ide
+00008fe0: 6e74 6966 6965 727d 220a 2020 2020 2020  ntifier}".      
+00008ff0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00009000: 2020 2020 2020 2020 2020 2020 7374 7269              stri
+00009010: 6e67 203d 2022 7d22 0a20 2020 2020 2020  ng = "}".       
+00009020: 2073 7472 696e 6773 2e61 7070 656e 6428   strings.append(
+00009030: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+00009040: 6966 2073 656c 662e 7461 6720 6973 206e  if self.tag is n
+00009050: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00009060: 2020 2020 2073 7472 696e 6773 203d 205f       strings = _
+00009070: 7461 672e 646f 7562 6c65 5f74 6167 2873  tag.double_tag(s
+00009080: 7472 696e 6773 2c20 7365 6c66 2e74 6167  trings, self.tag
+00009090: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
+000090a0: 2e65 7874 656e 6428 7374 7269 6e67 7329  .extend(strings)
+000090b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000090c0: 7265 7375 6c74 0a0a 2020 2020 6465 6620  result..    def 
+000090d0: 5f66 6f72 6d61 745f 636c 6f73 696e 675f  _format_closing_
+000090e0: 7369 7465 2873 656c 662c 2063 6f6e 7472  site(self, contr
+000090f0: 6962 7574 696f 6e73 293a 0a20 2020 2020  ibutions):.     
+00009100: 2020 2072 6573 756c 7420 3d20 5b5d 0a20     result = []. 
+00009110: 2020 2020 2020 2073 7472 696e 6773 203d         strings =
+00009120: 2063 6f6e 7472 6962 7574 696f 6e73 2e67   contributions.g
+00009130: 726f 625f 7265 7665 7274 730a 2020 2020  rob_reverts.    
+00009140: 2020 2020 6966 2073 7472 696e 6773 3a0a      if strings:.
+00009150: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00009160: 6c74 2e61 7070 656e 6428 6622 2520 7b5f  lt.append(f"% {_
+00009170: 636f 6e74 7269 6275 7469 6f6e 732e 5479  contributions.Ty
+00009180: 7065 732e 4752 4f42 5f52 4556 4552 5453  pes.GROB_REVERTS
+00009190: 2e6e 616d 657d 3a22 290a 2020 2020 2020  .name}:").      
+000091a0: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
+000091b0: 656e 6428 7374 7269 6e67 7329 0a20 2020  end(strings).   
+000091c0: 2020 2020 2073 7472 696e 6773 203d 2063       strings = c
+000091d0: 6f6e 7472 6962 7574 696f 6e73 2e61 6c70  ontributions.alp
+000091e0: 6861 6265 7469 7a65 2863 6f6e 7472 6962  habetize(contrib
+000091f0: 7574 696f 6e73 2e63 6c6f 7369 6e67 2e63  utions.closing.c
+00009200: 6f6d 6d61 6e64 7329 0a20 2020 2020 2020  ommands).       
+00009210: 2069 6620 7374 7269 6e67 733a 0a20 2020   if strings:.   
+00009220: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+00009230: 6170 7065 6e64 2866 2225 207b 5f63 6f6e  append(f"% {_con
+00009240: 7472 6962 7574 696f 6e73 2e54 7970 6573  tributions.Types
+00009250: 2e43 4f4d 4d41 4e44 532e 6e61 6d65 7d3a  .COMMANDS.name}:
+00009260: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
+00009270: 6573 756c 742e 6578 7465 6e64 2873 7472  esult.extend(str
+00009280: 696e 6773 290a 2020 2020 2020 2020 7265  ings).        re
+00009290: 7375 6c74 203d 205f 696e 6465 6e74 5f73  sult = _indent_s
+000092a0: 7472 696e 6773 2872 6573 756c 7429 0a20  trings(result). 
+000092b0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+000092c0: 7375 6c74 0a0a 2020 2020 6465 6620 5f66  sult..    def _f
+000092d0: 6f72 6d61 745f 636f 6e74 656e 745f 7069  ormat_content_pi
+000092e0: 6563 6573 2873 656c 6629 3a0a 2020 2020  eces(self):.    
+000092f0: 2020 2020 7374 7269 6e67 7320 3d20 5b5d      strings = []
+00009300: 0a20 2020 2020 2020 2066 6f72 2063 6f6d  .        for com
+00009310: 706f 6e65 6e74 2069 6e20 7365 6c66 2e63  ponent in self.c
+00009320: 6f6d 706f 6e65 6e74 733a 0a20 2020 2020  omponents:.     
+00009330: 2020 2020 2020 2073 7472 696e 6720 3d20         string = 
+00009340: 636f 6d70 6f6e 656e 742e 5f67 6574 5f6c  component._get_l
+00009350: 696c 7970 6f6e 645f 666f 726d 6174 2829  ilypond_format()
+00009360: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00009370: 2073 7472 696e 6720 696e 2073 7472 696e   string in strin
+00009380: 672e 7370 6c69 7428 225c 6e22 293a 0a20  g.split("\n"):. 
+00009390: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000093a0: 6620 7374 7269 6e67 2e69 7373 7061 6365  f string.isspace
+000093b0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+000093c0: 2020 2020 2020 2020 7374 7269 6e67 203d          string =
+000093d0: 2022 220a 2020 2020 2020 2020 2020 2020   "".            
+000093e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000093f0: 2020 2020 2020 2020 2020 2020 2020 7374                st
+00009400: 7269 6e67 203d 205f 696e 6465 6e74 6c69  ring = _indentli
+00009410: 622e 494e 4445 4e54 202b 2073 7472 696e  b.INDENT + strin
+00009420: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
+00009430: 2020 7374 7269 6e67 732e 6170 7065 6e64    strings.append
+00009440: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+00009450: 2072 6574 7572 6e20 7374 7269 6e67 730a   return strings.
+00009460: 0a20 2020 2064 6566 205f 666f 726d 6174  .    def _format
+00009470: 5f63 6f6e 7465 6e74 7328 7365 6c66 293a  _contents(self):
+00009480: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+00009490: 3d20 5b5d 0a20 2020 2020 2020 2073 7472  = [].        str
+000094a0: 696e 6773 203d 2073 656c 662e 5f66 6f72  ings = self._for
+000094b0: 6d61 745f 636f 6e74 656e 745f 7069 6563  mat_content_piec
+000094c0: 6573 2829 0a20 2020 2020 2020 2072 6573  es().        res
+000094d0: 756c 742e 6578 7465 6e64 2873 7472 696e  ult.extend(strin
+000094e0: 6773 290a 2020 2020 2020 2020 7265 7475  gs).        retu
+000094f0: 726e 2072 6573 756c 740a 0a20 2020 2064  rn result..    d
+00009500: 6566 205f 666f 726d 6174 5f6f 7065 6e5f  ef _format_open_
+00009510: 6272 6163 6b65 7473 5f73 6974 6528 7365  brackets_site(se
+00009520: 6c66 2c20 636f 6e74 7269 6275 7469 6f6e  lf, contribution
+00009530: 7329 3a0a 2020 2020 2020 2020 7265 7375  s):.        resu
+00009540: 6c74 203d 205b 5d0a 2020 2020 2020 2020  lt = [].        
+00009550: 7374 7269 6e67 7320 3d20 5b5d 0a20 2020  strings = [].   
+00009560: 2020 2020 2069 6620 7365 6c66 2e73 696d       if self.sim
+00009570: 756c 7461 6e65 6f75 733a 0a20 2020 2020  ultaneous:.     
+00009580: 2020 2020 2020 2069 6620 7365 6c66 2e69         if self.i
+00009590: 6465 6e74 6966 6965 723a 0a20 2020 2020  dentifier:.     
+000095a0: 2020 2020 2020 2020 2020 2073 7472 696e             strin
+000095b0: 6720 3d20 6622 3c3c 2020 7b73 656c 662e  g = f"<<  {self.
+000095c0: 6964 656e 7469 6669 6572 7d22 0a20 2020  identifier}".   
+000095d0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+000095e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000095f0: 7472 696e 6720 3d20 223c 3c22 0a20 2020  tring = "<<".   
+00009600: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00009610: 2020 2020 2020 2069 6620 7365 6c66 2e69         if self.i
+00009620: 6465 6e74 6966 6965 723a 0a20 2020 2020  dentifier:.     
+00009630: 2020 2020 2020 2020 2020 2073 7472 696e             strin
+00009640: 6720 3d20 6622 7b7b 2020 207b 7365 6c66  g = f"{{   {self
+00009650: 2e69 6465 6e74 6966 6965 727d 220a 2020  .identifier}".  
+00009660: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00009670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009680: 7374 7269 6e67 203d 2022 7b22 0a20 2020  string = "{".   
+00009690: 2020 2020 2073 7472 696e 6773 2e61 7070       strings.app
+000096a0: 656e 6428 7374 7269 6e67 290a 2020 2020  end(string).    
+000096b0: 2020 2020 6966 2073 656c 662e 7461 6720      if self.tag 
+000096c0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000096d0: 2020 2020 2020 2020 2073 7472 696e 6773           strings
+000096e0: 203d 205f 7461 672e 646f 7562 6c65 5f74   = _tag.double_t
+000096f0: 6167 2873 7472 696e 6773 2c20 7365 6c66  ag(strings, self
+00009700: 2e74 6167 290a 2020 2020 2020 2020 7265  .tag).        re
+00009710: 7375 6c74 2e65 7874 656e 6428 7374 7269  sult.extend(stri
+00009720: 6e67 7329 0a20 2020 2020 2020 2072 6574  ngs).        ret
+00009730: 7572 6e20 7265 7375 6c74 0a0a 2020 2020  urn result..    
+00009740: 6465 6620 5f66 6f72 6d61 745f 6f70 656e  def _format_open
+00009750: 696e 675f 7369 7465 2873 656c 662c 2063  ing_site(self, c
+00009760: 6f6e 7472 6962 7574 696f 6e73 293a 0a20  ontributions):. 
+00009770: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+00009780: 5b5d 0a20 2020 2020 2020 2073 7472 696e  [].        strin
+00009790: 6773 203d 2063 6f6e 7472 6962 7574 696f  gs = contributio
+000097a0: 6e73 2e61 6c70 6861 6265 7469 7a65 2863  ns.alphabetize(c
+000097b0: 6f6e 7472 6962 7574 696f 6e73 2e6f 7065  ontributions.ope
+000097c0: 6e69 6e67 2e63 6f6d 6d61 6e64 7329 0a20  ning.commands). 
+000097d0: 2020 2020 2020 2069 6620 7374 7269 6e67         if string
+000097e0: 733a 0a20 2020 2020 2020 2020 2020 2072  s:.            r
+000097f0: 6573 756c 742e 6170 7065 6e64 2866 2225  esult.append(f"%
+00009800: 207b 5f63 6f6e 7472 6962 7574 696f 6e73   {_contributions
+00009810: 2e54 7970 6573 2e43 4f4d 4d41 4e44 532e  .Types.COMMANDS.
+00009820: 6e61 6d65 7d3a 2229 0a20 2020 2020 2020  name}:").       
+00009830: 2020 2020 2072 6573 756c 742e 6578 7465       result.exte
+00009840: 6e64 2873 7472 696e 6773 290a 2020 2020  nd(strings).    
+00009850: 2020 2020 7374 7269 6e67 7320 3d20 636f      strings = co
+00009860: 6e74 7269 6275 7469 6f6e 732e 6772 6f62  ntributions.grob
+00009870: 5f6f 7665 7272 6964 6573 0a20 2020 2020  _overrides.     
+00009880: 2020 2069 6620 7374 7269 6e67 733a 0a20     if strings:. 
+00009890: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+000098a0: 742e 6170 7065 6e64 2866 2225 207b 5f63  t.append(f"% {_c
+000098b0: 6f6e 7472 6962 7574 696f 6e73 2e54 7970  ontributions.Typ
+000098c0: 6573 2e47 524f 425f 4f56 4552 5249 4445  es.GROB_OVERRIDE
+000098d0: 532e 6e61 6d65 7d3a 2229 0a20 2020 2020  S.name}:").     
+000098e0: 2020 2020 2020 2072 6573 756c 742e 6578         result.ex
+000098f0: 7465 6e64 2873 7472 696e 6773 290a 2020  tend(strings).  
+00009900: 2020 2020 2020 7374 7269 6e67 7320 3d20        strings = 
+00009910: 636f 6e74 7269 6275 7469 6f6e 732e 636f  contributions.co
+00009920: 6e74 6578 745f 7365 7474 696e 6773 0a20  ntext_settings. 
+00009930: 2020 2020 2020 2069 6620 7374 7269 6e67         if string
+00009940: 733a 0a20 2020 2020 2020 2020 2020 2072  s:.            r
+00009950: 6573 756c 742e 6170 7065 6e64 2866 2225  esult.append(f"%
+00009960: 207b 5f63 6f6e 7472 6962 7574 696f 6e73   {_contributions
+00009970: 2e54 7970 6573 2e43 4f4e 5445 5854 5f53  .Types.CONTEXT_S
+00009980: 4554 5449 4e47 532e 6e61 6d65 7d3a 2229  ETTINGS.name}:")
+00009990: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+000099a0: 756c 742e 6578 7465 6e64 2873 7472 696e  ult.extend(strin
+000099b0: 6773 290a 2020 2020 2020 2020 7265 7375  gs).        resu
+000099c0: 6c74 203d 205f 696e 6465 6e74 5f73 7472  lt = _indent_str
+000099d0: 696e 6773 2872 6573 756c 7429 0a20 2020  ings(result).   
+000099e0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+000099f0: 6c74 0a0a 2020 2020 6465 6620 5f67 6574  lt..    def _get
+00009a00: 5f61 6262 7265 7669 6174 6564 5f73 7472  _abbreviated_str
+00009a10: 696e 675f 666f 726d 6174 2873 656c 6629  ing_format(self)
+00009a20: 3a0a 2020 2020 2020 2020 6966 2030 203c  :.        if 0 <
+00009a30: 206c 656e 2873 656c 6629 3a0a 2020 2020   len(self):.    
+00009a40: 2020 2020 2020 2020 7375 6d6d 6172 7920          summary 
+00009a50: 3d20 7374 7228 6c65 6e28 7365 6c66 2929  = str(len(self))
+00009a60: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00009a70: 2020 2020 2020 2020 2020 2073 756d 6d61             summa
+00009a80: 7279 203d 2022 220a 2020 2020 2020 2020  ry = "".        
+00009a90: 6966 2073 656c 662e 7369 6d75 6c74 616e  if self.simultan
+00009aa0: 656f 7573 3a0a 2020 2020 2020 2020 2020  eous:.          
+00009ab0: 2020 6f70 656e 5f62 7261 636b 6574 5f73    open_bracket_s
+00009ac0: 7472 696e 672c 2063 6c6f 7365 5f62 7261  tring, close_bra
+00009ad0: 636b 6574 5f73 7472 696e 6720 3d20 223c  cket_string = "<
+00009ae0: 3c22 2c20 223e 3e22 0a20 2020 2020 2020  <", ">>".       
+00009af0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00009b00: 2020 206f 7065 6e5f 6272 6163 6b65 745f     open_bracket_
+00009b10: 7374 7269 6e67 2c20 636c 6f73 655f 6272  string, close_br
+00009b20: 6163 6b65 745f 7374 7269 6e67 203d 2022  acket_string = "
+00009b30: 7b22 2c20 227d 220a 2020 2020 2020 2020  {", "}".        
+00009b40: 6e61 6d65 203d 2073 656c 662e 6e61 6d65  name = self.name
+00009b50: 0a20 2020 2020 2020 2069 6620 6e61 6d65  .        if name
+00009b60: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00009b70: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
+00009b80: 2066 272d 227b 6e61 6d65 7d22 270a 2020   f'-"{name}"'.  
+00009b90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00009ba0: 2020 2020 2020 2020 6e61 6d65 203d 2022          name = "
+00009bb0: 220a 2020 2020 2020 2020 6966 2068 6173  ".        if has
+00009bc0: 6174 7472 2873 656c 662c 2022 5f6c 696c  attr(self, "_lil
+00009bd0: 7970 6f6e 645f 7479 7065 2229 3a0a 2020  ypond_type"):.  
+00009be0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00009bf0: 203d 2022 3c7b 7d7b 7d7b 7d7b 7d7b 7d3e   = "<{}{}{}{}{}>
+00009c00: 220a 2020 2020 2020 2020 2020 2020 7265  ".            re
+00009c10: 7375 6c74 203d 2072 6573 756c 742e 666f  sult = result.fo
+00009c20: 726d 6174 280a 2020 2020 2020 2020 2020  rmat(.          
+00009c30: 2020 2020 2020 7365 6c66 2e6c 696c 7970        self.lilyp
+00009c40: 6f6e 645f 7479 7065 2c0a 2020 2020 2020  ond_type,.      
+00009c50: 2020 2020 2020 2020 2020 6e61 6d65 2c0a            name,.
+00009c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009c70: 6f70 656e 5f62 7261 636b 6574 5f73 7472  open_bracket_str
+00009c80: 696e 672c 0a20 2020 2020 2020 2020 2020  ing,.           
+00009c90: 2020 2020 2073 756d 6d61 7279 2c0a 2020       summary,.  
+00009ca0: 2020 2020 2020 2020 2020 2020 2020 636c                cl
+00009cb0: 6f73 655f 6272 6163 6b65 745f 7374 7269  ose_bracket_stri
+00009cc0: 6e67 2c0a 2020 2020 2020 2020 2020 2020  ng,.            
+00009cd0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00009ce0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00009cf0: 6c74 203d 2022 3c7b 7d7b 7d7b 7d7b 7d3e  lt = "<{}{}{}{}>
+00009d00: 220a 2020 2020 2020 2020 2020 2020 7265  ".            re
+00009d10: 7375 6c74 203d 2072 6573 756c 742e 666f  sult = result.fo
+00009d20: 726d 6174 280a 2020 2020 2020 2020 2020  rmat(.          
+00009d30: 2020 2020 2020 6e61 6d65 2c20 6f70 656e        name, open
+00009d40: 5f62 7261 636b 6574 5f73 7472 696e 672c  _bracket_string,
+00009d50: 2073 756d 6d61 7279 2c20 636c 6f73 655f   summary, close_
+00009d60: 6272 6163 6b65 745f 7374 7269 6e67 0a20  bracket_string. 
+00009d70: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00009d80: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+00009d90: 6c74 0a0a 2020 2020 6465 6620 5f67 6574  lt..    def _get
+00009da0: 5f63 6f6d 7061 6374 5f72 6570 7265 7365  _compact_represe
+00009db0: 6e74 6174 696f 6e28 7365 6c66 293a 0a20  ntation(self):. 
+00009dc0: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
+00009dd0: 6c66 3a0a 2020 2020 2020 2020 2020 2020  lf:.            
+00009de0: 7265 7475 726e 2022 7b20 7d22 0a20 2020  return "{ }".   
+00009df0: 2020 2020 2072 6574 7572 6e20 6622 7b7b       return f"{{
+00009e00: 207b 7365 6c66 2e5f 6765 745f 636f 6e74   {self._get_cont
+00009e10: 656e 7473 5f73 756d 6d61 7279 2829 7d20  ents_summary()} 
+00009e20: 7d7d 220a 0a20 2020 2064 6566 205f 6765  }}"..    def _ge
+00009e30: 745f 636f 6e74 656e 7473 5f64 7572 6174  t_contents_durat
+00009e40: 696f 6e28 7365 6c66 293a 0a20 2020 2020  ion(self):.     
+00009e50: 2020 2069 6620 7365 6c66 2e73 696d 756c     if self.simul
+00009e60: 7461 6e65 6f75 733a 0a20 2020 2020 2020  taneous:.       
+00009e70: 2020 2020 2072 6574 7572 6e20 6d61 7828       return max(
+00009e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009e90: 205b 5f64 7572 6174 696f 6e2e 4475 7261   [_duration.Dura
+00009ea0: 7469 6f6e 2830 295d 202b 205b 5f2e 5f67  tion(0)] + [_._g
+00009eb0: 6574 5f70 7265 7072 6f6c 6174 6564 5f64  et_preprolated_d
+00009ec0: 7572 6174 696f 6e28 2920 666f 7220 5f20  uration() for _ 
+00009ed0: 696e 2073 656c 665d 0a20 2020 2020 2020  in self].       
+00009ee0: 2020 2020 2029 0a20 2020 2020 2020 2065       ).        e
+00009ef0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00009f00: 2064 7572 6174 696f 6e20 3d20 5f64 7572   duration = _dur
+00009f10: 6174 696f 6e2e 4475 7261 7469 6f6e 2830  ation.Duration(0
+00009f20: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
+00009f30: 7220 636f 6d70 6f6e 656e 7420 696e 2073  r component in s
+00009f40: 656c 663a 0a20 2020 2020 2020 2020 2020  elf:.           
+00009f50: 2020 2020 2064 7572 6174 696f 6e20 2b3d       duration +=
+00009f60: 2063 6f6d 706f 6e65 6e74 2e5f 6765 745f   component._get_
+00009f70: 7072 6570 726f 6c61 7465 645f 6475 7261  preprolated_dura
+00009f80: 7469 6f6e 2829 0a20 2020 2020 2020 2020  tion().         
+00009f90: 2020 2072 6574 7572 6e20 6475 7261 7469     return durati
+00009fa0: 6f6e 0a0a 2020 2020 6465 6620 5f67 6574  on..    def _get
+00009fb0: 5f63 6f6e 7465 6e74 735f 7375 6d6d 6172  _contents_summar
+00009fc0: 7928 7365 6c66 293a 0a20 2020 2020 2020  y(self):.       
+00009fd0: 2069 6620 3020 3c20 6c65 6e28 7365 6c66   if 0 < len(self
+00009fe0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00009ff0: 6573 756c 7420 3d20 5b5d 0a20 2020 2020  esult = [].     
+0000a000: 2020 2020 2020 2066 6f72 2063 6f6d 706f         for compo
+0000a010: 6e65 6e74 2069 6e20 7365 6c66 2e63 6f6d  nent in self.com
+0000a020: 706f 6e65 6e74 733a 0a20 2020 2020 2020  ponents:.       
+0000a030: 2020 2020 2020 2020 2069 6620 6861 7361           if hasa
+0000a040: 7474 7228 636f 6d70 6f6e 656e 742c 2022  ttr(component, "
+0000a050: 5f67 6574 5f63 6f6d 7061 6374 5f72 6570  _get_compact_rep
+0000a060: 7265 7365 6e74 6174 696f 6e22 293a 0a20  resentation"):. 
+0000a070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a080: 2020 2072 6573 756c 742e 6170 7065 6e64     result.append
+0000a090: 2863 6f6d 706f 6e65 6e74 2e5f 6765 745f  (component._get_
+0000a0a0: 636f 6d70 6163 745f 7265 7072 6573 656e  compact_represen
+0000a0b0: 7461 7469 6f6e 2829 290a 2020 2020 2020  tation()).      
+0000a0c0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0000a0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a0e0: 2020 2020 7265 7375 6c74 2e61 7070 656e      result.appen
+0000a0f0: 6428 7374 7228 636f 6d70 6f6e 656e 7429  d(str(component)
+0000a100: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+0000a110: 7475 726e 2022 2022 2e6a 6f69 6e28 7265  turn " ".join(re
+0000a120: 7375 6c74 290a 2020 2020 2020 2020 656c  sult).        el
+0000a130: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0000a140: 7265 7475 726e 2022 220a 0a20 2020 2064  return ""..    d
+0000a150: 6566 205f 6765 745f 6465 7363 656e 6461  ef _get_descenda
+0000a160: 6e74 735f 7374 6172 7469 6e67 5f77 6974  nts_starting_wit
+0000a170: 6828 7365 6c66 293a 0a20 2020 2020 2020  h(self):.       
+0000a180: 2072 6573 756c 7420 3d20 5b5d 0a20 2020   result = [].   
+0000a190: 2020 2020 2072 6573 756c 742e 6170 7065       result.appe
+0000a1a0: 6e64 2873 656c 6629 0a20 2020 2020 2020  nd(self).       
+0000a1b0: 2069 6620 7365 6c66 2e73 696d 756c 7461   if self.simulta
+0000a1c0: 6e65 6f75 733a 0a20 2020 2020 2020 2020  neous:.         
+0000a1d0: 2020 2066 6f72 2069 7465 6d20 696e 2073     for item in s
+0000a1e0: 656c 663a 0a20 2020 2020 2020 2020 2020  elf:.           
+0000a1f0: 2020 2020 2072 6573 756c 742e 6578 7465       result.exte
+0000a200: 6e64 2869 7465 6d2e 5f67 6574 5f64 6573  nd(item._get_des
+0000a210: 6365 6e64 616e 7473 5f73 7461 7274 696e  cendants_startin
+0000a220: 675f 7769 7468 2829 290a 2020 2020 2020  g_with()).      
+0000a230: 2020 656c 6966 2073 656c 663a 0a20 2020    elif self:.   
+0000a240: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+0000a250: 6578 7465 6e64 2873 656c 665b 305d 2e5f  extend(self[0]._
+0000a260: 6765 745f 6465 7363 656e 6461 6e74 735f  get_descendants_
+0000a270: 7374 6172 7469 6e67 5f77 6974 6828 2929  starting_with())
+0000a280: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000a290: 7265 7375 6c74 0a0a 2020 2020 6465 6620  result..    def 
+0000a2a0: 5f67 6574 5f64 6573 6365 6e64 616e 7473  _get_descendants
+0000a2b0: 5f73 746f 7070 696e 675f 7769 7468 2873  _stopping_with(s
+0000a2c0: 656c 6629 3a0a 2020 2020 2020 2020 7265  elf):.        re
+0000a2d0: 7375 6c74 203d 205b 5d0a 2020 2020 2020  sult = [].      
+0000a2e0: 2020 7265 7375 6c74 2e61 7070 656e 6428    result.append(
+0000a2f0: 7365 6c66 290a 2020 2020 2020 2020 6966  self).        if
+0000a300: 2073 656c 662e 7369 6d75 6c74 616e 656f   self.simultaneo
+0000a310: 7573 3a0a 2020 2020 2020 2020 2020 2020  us:.            
+0000a320: 666f 7220 6974 656d 2069 6e20 7365 6c66  for item in self
+0000a330: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000a340: 2020 7265 7375 6c74 2e65 7874 656e 6428    result.extend(
+0000a350: 6974 656d 2e5f 6765 745f 6465 7363 656e  item._get_descen
+0000a360: 6461 6e74 735f 7374 6f70 7069 6e67 5f77  dants_stopping_w
+0000a370: 6974 6828 2929 0a20 2020 2020 2020 2065  ith()).        e
+0000a380: 6c69 6620 7365 6c66 3a0a 2020 2020 2020  lif self:.      
+0000a390: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
+0000a3a0: 656e 6428 7365 6c66 5b2d 315d 2e5f 6765  end(self[-1]._ge
+0000a3b0: 745f 6465 7363 656e 6461 6e74 735f 7374  t_descendants_st
+0000a3c0: 6f70 7069 6e67 5f77 6974 6828 2929 0a20  opping_with()). 
+0000a3d0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+0000a3e0: 7375 6c74 0a0a 2020 2020 6465 6620 5f67  sult..    def _g
+0000a3f0: 6574 5f70 7265 7072 6f6c 6174 6564 5f64  et_preprolated_d
+0000a400: 7572 6174 696f 6e28 7365 6c66 293a 0a20  uration(self):. 
+0000a410: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0000a420: 6c66 2e5f 6765 745f 636f 6e74 656e 7473  lf._get_contents
+0000a430: 5f64 7572 6174 696f 6e28 290a 0a20 2020  _duration()..   
+0000a440: 2064 6566 205f 6765 745f 7375 6274 7265   def _get_subtre
+0000a450: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
+0000a460: 2072 6573 756c 7420 3d20 5b73 656c 665d   result = [self]
+0000a470: 0a20 2020 2020 2020 2066 6f72 2063 6f6d  .        for com
+0000a480: 706f 6e65 6e74 2069 6e20 7365 6c66 3a0a  ponent in self:.
+0000a490: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0000a4a0: 6c74 2e65 7874 656e 6428 636f 6d70 6f6e  lt.extend(compon
+0000a4b0: 656e 742e 5f67 6574 5f73 7562 7472 6565  ent._get_subtree
+0000a4c0: 2829 290a 2020 2020 2020 2020 7265 7475  ()).        retu
+0000a4d0: 726e 2072 6573 756c 740a 0a20 2020 2064  rn result..    d
+0000a4e0: 6566 205f 696e 6974 6961 6c69 7a65 5f63  ef _initialize_c
+0000a4f0: 6f6d 706f 6e65 6e74 7328 7365 6c66 2c20  omponents(self, 
+0000a500: 636f 6d70 6f6e 656e 7473 2c20 2a2c 206c  components, *, l
+0000a510: 616e 6775 6167 653a 2073 7472 203d 2022  anguage: str = "
+0000a520: 656e 676c 6973 6822 293a 0a20 2020 2020  english"):.     
+0000a530: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0000a540: 2863 6f6d 706f 6e65 6e74 732c 2063 6f6c  (components, col
+0000a550: 6c65 6374 696f 6e73 2e61 6263 2e49 7465  lections.abc.Ite
+0000a560: 7261 626c 6529 2061 6e64 206e 6f74 2069  rable) and not i
+0000a570: 7369 6e73 7461 6e63 6528 0a20 2020 2020  sinstance(.     
+0000a580: 2020 2020 2020 2063 6f6d 706f 6e65 6e74         component
+0000a590: 732c 2073 7472 0a20 2020 2020 2020 2029  s, str.        )
+0000a5a0: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
+0000a5b0: 6d70 6f6e 656e 7473 5f20 3d20 5b5d 0a20  mponents_ = []. 
+0000a5c0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+0000a5d0: 7465 6d20 696e 2063 6f6d 706f 6e65 6e74  tem in component
+0000a5e0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+0000a5f0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0000a600: 2869 7465 6d2c 2073 7472 293a 0a20 2020  (item, str):.   
+0000a610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a620: 2070 6172 7365 6420 3d20 7365 6c66 2e5f   parsed = self._
+0000a630: 7061 7273 655f 7374 7269 6e67 2869 7465  parse_string(ite
+0000a640: 6d2c 206c 616e 6775 6167 653d 6c61 6e67  m, language=lang
+0000a650: 7561 6765 290a 2020 2020 2020 2020 2020  uage).          
+0000a660: 2020 2020 2020 2020 2020 636f 6d70 6f6e            compon
+0000a670: 656e 7473 5f2e 6170 7065 6e64 2870 6172  ents_.append(par
+0000a680: 7365 6429 0a20 2020 2020 2020 2020 2020  sed).           
+0000a690: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
+0000a6a0: 616e 6365 2869 7465 6d2c 2063 6f6c 6c65  ance(item, colle
+0000a6b0: 6374 696f 6e73 2e61 6263 2e49 7465 7261  ctions.abc.Itera
+0000a6c0: 626c 6529 2061 6e64 206e 6f74 2069 7369  ble) and not isi
+0000a6d0: 6e73 7461 6e63 6528 0a20 2020 2020 2020  nstance(.       
+0000a6e0: 2020 2020 2020 2020 2020 2020 2069 7465               ite
+0000a6f0: 6d2c 2043 6f6e 7461 696e 6572 0a20 2020  m, Container.   
+0000a700: 2020 2020 2020 2020 2020 2020 2029 3a0a               ):.
+0000a710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a720: 2020 2020 636f 6d70 6f6e 656e 7473 5f2e      components_.
+0000a730: 6578 7465 6e64 2869 7465 6d29 0a20 2020  extend(item).   
+0000a740: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0000a750: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000a760: 2020 2020 2020 2063 6f6d 706f 6e65 6e74         component
+0000a770: 735f 2e61 7070 656e 6428 6974 656d 290a  s_.append(item).
+0000a780: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
+0000a790: 6f6e 656e 7473 203d 2063 6f6d 706f 6e65  onents = compone
+0000a7a0: 6e74 735f 0a20 2020 2020 2020 2020 2020  nts_.           
+0000a7b0: 2066 6f72 2063 6f6d 706f 6e65 6e74 2069   for component i
+0000a7c0: 6e20 636f 6d70 6f6e 656e 7473 3a0a 2020  n components:.  
+0000a7d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000a7e0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+0000a7f0: 636f 6d70 6f6e 656e 742c 2043 6f6d 706f  component, Compo
+0000a800: 6e65 6e74 293a 0a20 2020 2020 2020 2020  nent):.         
+0000a810: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0000a820: 2045 7863 6570 7469 6f6e 2866 226d 7573   Exception(f"mus
+0000a830: 7420 6265 2063 6f6d 706f 6e65 6e74 3a20  t be component: 
+0000a840: 7b63 6f6d 706f 6e65 6e74 2172 7d2e 2229  {component!r}.")
+0000a850: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+0000a860: 7374 616e 6365 2863 6f6d 706f 6e65 6e74  stance(component
+0000a870: 732c 2073 7472 293a 0a20 2020 2020 2020  s, str):.       
+0000a880: 2020 2020 2070 6172 7365 6420 3d20 7365       parsed = se
+0000a890: 6c66 2e5f 7061 7273 655f 7374 7269 6e67  lf._parse_string
+0000a8a0: 2863 6f6d 706f 6e65 6e74 732c 206c 616e  (components, lan
+0000a8b0: 6775 6167 653d 6c61 6e67 7561 6765 290a  guage=language).
+0000a8c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000a8d0: 2e5f 636f 6d70 6f6e 656e 7473 203d 205b  ._components = [
+0000a8e0: 5d0a 2020 2020 2020 2020 2020 2020 7365  ].            se
+0000a8f0: 6c66 2e73 696d 756c 7461 6e65 6f75 7320  lf.simultaneous 
+0000a900: 3d20 7061 7273 6564 2e73 696d 756c 7461  = parsed.simulta
+0000a910: 6e65 6f75 730a 2020 2020 2020 2020 2020  neous.          
+0000a920: 2020 7365 6c66 5b3a 5d20 3d20 7061 7273    self[:] = pars
+0000a930: 6564 5b3a 5d0a 2020 2020 2020 2020 656c  ed[:].        el
+0000a940: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0000a950: 666f 7220 636f 6d70 6f6e 656e 7420 696e  for component in
+0000a960: 2063 6f6d 706f 6e65 6e74 733a 0a20 2020   components:.   
+0000a970: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000a980: 636f 6d70 6f6e 656e 742e 5f70 6172 656e  component._paren
+0000a990: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
+0000a9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a9b0: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
+0000a9c0: 6f6e 2866 226d 7573 7420 6e6f 7420 6861  on(f"must not ha
+0000a9d0: 7665 2070 6172 656e 743a 207b 636f 6d70  ve parent: {comp
+0000a9e0: 6f6e 656e 7421 727d 2e22 290a 2020 2020  onent!r}.").    
+0000a9f0: 2020 2020 2020 2020 7365 6c66 2e5f 636f          self._co
+0000aa00: 6d70 6f6e 656e 7473 203d 206c 6973 7428  mponents = list(
+0000aa10: 636f 6d70 6f6e 656e 7473 290a 2020 2020  components).    
+0000aa20: 2020 2020 2020 2020 666f 7220 636f 6d70          for comp
+0000aa30: 6f6e 656e 7420 696e 2073 656c 663a 0a20  onent in self:. 
+0000aa40: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000aa50: 6f6d 706f 6e65 6e74 2e5f 7365 745f 7061  omponent._set_pa
+0000aa60: 7265 6e74 2873 656c 6629 0a0a 2020 2020  rent(self)..    
+0000aa70: 6465 6620 5f69 735f 6f6e 655f 6f66 5f6d  def _is_one_of_m
+0000aa80: 795f 6669 7273 745f 6c65 6176 6573 2873  y_first_leaves(s
+0000aa90: 656c 662c 206c 6561 6629 3a0a 2020 2020  elf, leaf):.    
+0000aaa0: 2020 2020 7265 7475 726e 206c 6561 6620      return leaf 
+0000aab0: 696e 2073 656c 662e 5f67 6574 5f64 6573  in self._get_des
+0000aac0: 6365 6e64 616e 7473 5f73 7461 7274 696e  cendants_startin
+0000aad0: 675f 7769 7468 2829 0a0a 2020 2020 6465  g_with()..    de
+0000aae0: 6620 5f69 735f 6f6e 655f 6f66 5f6d 795f  f _is_one_of_my_
+0000aaf0: 6c61 7374 5f6c 6561 7665 7328 7365 6c66  last_leaves(self
+0000ab00: 2c20 6c65 6166 293a 0a20 2020 2020 2020  , leaf):.       
+0000ab10: 2072 6574 7572 6e20 6c65 6166 2069 6e20   return leaf in 
+0000ab20: 7365 6c66 2e5f 6765 745f 6465 7363 656e  self._get_descen
+0000ab30: 6461 6e74 735f 7374 6f70 7069 6e67 5f77  dants_stopping_w
+0000ab40: 6974 6828 290a 0a20 2020 2064 6566 205f  ith()..    def _
+0000ab50: 7061 7273 655f 7374 7269 6e67 2873 656c  parse_string(sel
+0000ab60: 662c 2073 7472 696e 672c 202a 2c20 6c61  f, string, *, la
+0000ab70: 6e67 7561 6765 3d22 656e 676c 6973 6822  nguage="english"
+0000ab80: 293a 0a20 2020 2020 2020 2075 7365 725f  ):.        user_
+0000ab90: 696e 7075 7420 3d20 7374 7269 6e67 2e73  input = string.s
+0000aba0: 7472 6970 2829 0a20 2020 2020 2020 2069  trip().        i
+0000abb0: 6620 6e6f 7420 7573 6572 5f69 6e70 7574  f not user_input
+0000abc0: 2e73 7461 7274 7377 6974 6828 223c 3c22  .startswith("<<"
+0000abd0: 2920 6f72 206e 6f74 2075 7365 725f 696e  ) or not user_in
+0000abe0: 7075 742e 656e 6473 7769 7468 2822 3e3e  put.endswith(">>
+0000abf0: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
+0000ac00: 7573 6572 5f69 6e70 7574 203d 2066 227b  user_input = f"{
+0000ac10: 7b20 7b75 7365 725f 696e 7075 747d 207d  { {user_input} }
+0000ac20: 7d22 0a20 2020 2020 2020 2070 6172 7365  }".        parse
+0000ac30: 6420 3d20 7365 6c66 2e5f 7061 7273 655f  d = self._parse_
+0000ac40: 6c69 6c79 706f 6e64 5f73 7472 696e 6728  lilypond_string(
+0000ac50: 7573 6572 5f69 6e70 7574 2c20 6c61 6e67  user_input, lang
+0000ac60: 7561 6765 3d6c 616e 6775 6167 6529 0a20  uage=language). 
+0000ac70: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+0000ac80: 696e 7374 616e 6365 2870 6172 7365 642c  instance(parsed,
+0000ac90: 2043 6f6e 7461 696e 6572 290a 2020 2020   Container).    
+0000aca0: 2020 2020 7265 7475 726e 2070 6172 7365      return parse
+0000acb0: 640a 0a20 2020 2064 6566 205f 7363 616c  d..    def _scal
+0000acc0: 6528 7365 6c66 2c20 6d75 6c74 6970 6c69  e(self, multipli
+0000acd0: 6572 293a 0a20 2020 2020 2020 2066 6f72  er):.        for
+0000ace0: 2069 7465 6d20 696e 206c 6973 7428 7365   item in list(se
+0000acf0: 6c66 293a 0a20 2020 2020 2020 2020 2020  lf):.           
+0000ad00: 2069 7465 6d2e 5f73 6361 6c65 286d 756c   item._scale(mul
+0000ad10: 7469 706c 6965 7229 0a0a 2020 2020 2323  tiplier)..    ##
+0000ad20: 2320 5055 424c 4943 2050 524f 5045 5254  # PUBLIC PROPERT
+0000ad30: 4945 5320 2323 230a 0a20 2020 2040 7072  IES ###..    @pr
+0000ad40: 6f70 6572 7479 0a20 2020 2064 6566 2063  operty.    def c
+0000ad50: 6f6d 706f 6e65 6e74 7328 7365 6c66 2920  omponents(self) 
+0000ad60: 2d3e 2074 7570 6c65 3a0a 2020 2020 2020  -> tuple:.      
+0000ad70: 2020 2222 220a 2020 2020 2020 2020 4765    """.        Ge
+0000ad80: 7473 2063 6f6d 706f 6e65 6e74 7320 696e  ts components in
+0000ad90: 2063 6f6e 7461 696e 6572 2e0a 2020 2020   container..    
+0000ada0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0000adb0: 7265 7475 726e 2074 7570 6c65 2873 656c  return tuple(sel
+0000adc0: 662e 5f63 6f6d 706f 6e65 6e74 7329 0a0a  f._components)..
+0000add0: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
+0000ade0: 2020 6465 6620 6964 656e 7469 6669 6572    def identifier
+0000adf0: 2873 656c 6629 202d 3e20 7374 7220 7c20  (self) -> str | 
+0000ae00: 4e6f 6e65 3a0a 2020 2020 2020 2020 7222  None:.        r"
+0000ae10: 2222 0a20 2020 2020 2020 2047 6574 7320  "".        Gets 
+0000ae20: 616e 6420 7365 7473 2062 7261 636b 6574  and sets bracket
+0000ae30: 2063 6f6d 6d65 6e74 2e0a 0a20 2020 2020   comment...     
+0000ae40: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
+0000ae50: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
+0000ae60: 2020 2020 2020 2020 3e3e 3e20 636f 6e74          >>> cont
+0000ae70: 6169 6e65 7220 3d20 6162 6a61 642e 436f  ainer = abjad.Co
+0000ae80: 6e74 6169 6e65 7228 0a20 2020 2020 2020  ntainer(.       
+0000ae90: 2020 2020 202e 2e2e 2020 2020 2022 6327       ...     "c'
+0000aea0: 3420 6427 3420 6527 3420 6627 3422 2c0a  4 d'4 e'4 f'4",.
+0000aeb0: 2020 2020 2020 2020 2020 2020 2e2e 2e20              ... 
+0000aec0: 2020 2020 6964 656e 7469 6669 6572 3d27      identifier='
+0000aed0: 252a 2520 4142 272c 0a20 2020 2020 2020  %*% AB',.       
+0000aee0: 2020 2020 202e 2e2e 2020 2020 2029 0a20       ...     ). 
+0000aef0: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+0000af00: 626a 6164 2e73 686f 7728 636f 6e74 6169  bjad.show(contai
+0000af10: 6e65 7229 2023 2064 6f63 7465 7374 3a20  ner) # doctest: 
+0000af20: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+0000af30: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
+0000af40: 6162 6a61 642e 6c69 6c79 706f 6e64 2863  abjad.lilypond(c
+0000af50: 6f6e 7461 696e 6572 290a 2020 2020 2020  ontainer).      
+0000af60: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+0000af70: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+0000af80: 2020 2020 7b20 2020 252a 2520 4142 0a20      {   %*% AB. 
+0000af90: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000afa0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+0000afb0: 2020 2064 2734 0a20 2020 2020 2020 2020     d'4.         
+0000afc0: 2020 2020 2020 2065 2734 0a20 2020 2020         e'4.     
+0000afd0: 2020 2020 2020 2020 2020 2066 2734 0a20             f'4. 
+0000afe0: 2020 2020 2020 2020 2020 207d 2020 2025             }   %
+0000aff0: 2a25 2041 420a 0a20 2020 2020 2020 2022  *% AB..        "
+0000b000: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+0000b010: 6e20 7365 6c66 2e5f 6964 656e 7469 6669  n self._identifi
+0000b020: 6572 0a0a 2020 2020 4069 6465 6e74 6966  er..    @identif
+0000b030: 6965 722e 7365 7474 6572 0a20 2020 2064  ier.setter.    d
+0000b040: 6566 2069 6465 6e74 6966 6965 7228 7365  ef identifier(se
+0000b050: 6c66 2c20 6172 6775 6d65 6e74 293a 0a20  lf, argument):. 
+0000b060: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+0000b070: 696e 7374 616e 6365 2861 7267 756d 656e  instance(argumen
+0000b080: 742c 2073 7472 207c 2074 7970 6528 4e6f  t, str | type(No
+0000b090: 6e65 2929 2c20 7265 7072 2861 7267 756d  ne)), repr(argum
+0000b0a0: 656e 7429 0a20 2020 2020 2020 2073 656c  ent).        sel
+0000b0b0: 662e 5f69 6465 6e74 6966 6965 723a 2073  f._identifier: s
+0000b0c0: 7472 207c 204e 6f6e 6520 3d20 6172 6775  tr | None = argu
+0000b0d0: 6d65 6e74 0a0a 2020 2020 4070 726f 7065  ment..    @prope
+0000b0e0: 7274 790a 2020 2020 6465 6620 6e61 6d65  rty.    def name
+0000b0f0: 2873 656c 6629 202d 3e20 7374 7220 7c20  (self) -> str | 
+0000b100: 4e6f 6e65 3a0a 2020 2020 2020 2020 7222  None:.        r"
+0000b110: 2222 0a20 2020 2020 2020 2047 6574 7320  "".        Gets 
+0000b120: 616e 6420 7365 7473 206e 616d 6520 6f66  and sets name of
+0000b130: 2063 6f6e 7461 696e 6572 2e0a 0a20 2020   container...   
+0000b140: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
+0000b150: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+0000b160: 2020 2020 2020 2020 2020 4765 7473 2063            Gets c
+0000b170: 6f6e 7461 696e 6572 206e 616d 653a 0a0a  ontainer name:..
+0000b180: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0000b190: 636f 6e74 6169 6e65 7220 3d20 6162 6a61  container = abja
+0000b1a0: 642e 436f 6e74 6169 6e65 7228 2263 2734  d.Container("c'4
+0000b1b0: 2064 2734 2065 2734 2066 2734 2229 0a20   d'4 e'4 f'4"). 
+0000b1c0: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+0000b1d0: 626a 6164 2e73 686f 7728 636f 6e74 6169  bjad.show(contai
+0000b1e0: 6e65 7229 2023 2064 6f63 7465 7374 3a20  ner) # doctest: 
+0000b1f0: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+0000b200: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+0000b210: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+0000b220: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+0000b230: 642e 6c69 6c79 706f 6e64 2863 6f6e 7461  d.lilypond(conta
+0000b240: 696e 6572 290a 2020 2020 2020 2020 2020  iner).          
+0000b250: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+0000b260: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+0000b270: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0000b280: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+0000b290: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0000b2a0: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
+0000b2b0: 2020 2020 2020 2020 2020 2020 2020 6527                e'
+0000b2c0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0000b2d0: 2020 2020 2020 6627 340a 2020 2020 2020        f'4.      
+0000b2e0: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+0000b2f0: 2020 2020 2020 2020 203e 3e3e 2063 6f6e           >>> con
+0000b300: 7461 696e 6572 2e6e 616d 6520 6973 204e  tainer.name is N
+0000b310: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0000b320: 5472 7565 0a0a 2020 2020 2020 2020 2e2e  True..        ..
+0000b330: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
+0000b340: 616d 706c 650a 0a20 2020 2020 2020 2020  ample..         
+0000b350: 2020 2053 6574 7320 636f 6e74 6169 6e65     Sets containe
+0000b360: 7220 6e61 6d65 3a0a 0a20 2020 2020 2020  r name:..       
+0000b370: 2020 2020 203e 3e3e 2063 6f6e 7461 696e       >>> contain
+0000b380: 6572 203d 2061 626a 6164 2e43 6f6e 7461  er = abjad.Conta
+0000b390: 696e 6572 280a 2020 2020 2020 2020 2020  iner(.          
+0000b3a0: 2020 2e2e 2e20 2020 2020 2263 2734 2064    ...     "c'4 d
+0000b3b0: 2734 2065 2734 2066 2734 222c 0a20 2020  '4 e'4 f'4",.   
+0000b3c0: 2020 2020 2020 2020 202e 2e2e 2020 2020           ...    
+0000b3d0: 206e 616d 653d 2753 7065 6369 616c 272c   name='Special',
+0000b3e0: 0a20 2020 2020 2020 2020 2020 202e 2e2e  .            ...
+0000b3f0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0000b400: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
+0000b410: 7728 636f 6e74 6169 6e65 7229 2023 2064  w(container) # d
+0000b420: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+0000b430: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
+0000b440: 6f6e 7461 696e 6572 2e6e 616d 650a 2020  ontainer.name.  
+0000b450: 2020 2020 2020 2020 2020 2753 7065 6369            'Speci
+0000b460: 616c 270a 0a20 2020 2020 2020 2020 2020  al'..           
+0000b470: 2043 6f6e 7461 696e 6572 206e 616d 6520   Container name 
+0000b480: 646f 6573 206e 6f74 2061 7070 6561 7220  does not appear 
+0000b490: 696e 204c 696c 7950 6f6e 6420 6f75 7470  in LilyPond outp
+0000b4a0: 7574 3a0a 0a20 2020 2020 2020 2020 2020  ut:..           
+0000b4b0: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
+0000b4c0: 6a61 642e 6c69 6c79 706f 6e64 2863 6f6e  jad.lilypond(con
+0000b4d0: 7461 696e 6572 290a 2020 2020 2020 2020  tainer).        
+0000b4e0: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+0000b4f0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+0000b500: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+0000b510: 2020 2020 6327 340a 2020 2020 2020 2020      c'4.        
+0000b520: 2020 2020 2020 2020 6427 340a 2020 2020          d'4.    
+0000b530: 2020 2020 2020 2020 2020 2020 6527 340a              e'4.
+0000b540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b550: 6627 340a 2020 2020 2020 2020 2020 2020  f'4.            
+0000b560: 7d0a 0a20 2020 2020 2020 2022 2222 0a20  }..        """. 
+0000b570: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0000b580: 6c66 2e5f 6e61 6d65 0a0a 2020 2020 406e  lf._name..    @n
+0000b590: 616d 652e 7365 7474 6572 0a20 2020 2064  ame.setter.    d
+0000b5a0: 6566 206e 616d 6528 7365 6c66 2c20 6172  ef name(self, ar
+0000b5b0: 6775 6d65 6e74 293a 0a20 2020 2020 2020  gument):.       
+0000b5c0: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
+0000b5d0: 6365 2861 7267 756d 656e 742c 2073 7472  ce(argument, str
+0000b5e0: 207c 2074 7970 6528 4e6f 6e65 2929 0a20   | type(None)). 
+0000b5f0: 2020 2020 2020 206f 6c64 5f6e 616d 6520         old_name 
+0000b600: 3d20 7365 6c66 2e5f 6e61 6d65 0a20 2020  = self._name.   
+0000b610: 2020 2020 2070 6172 656e 7420 3d20 7365       parent = se
+0000b620: 6c66 2e5f 7061 7265 6e74 0a20 2020 2020  lf._parent.     
+0000b630: 2020 2077 6869 6c65 2070 6172 656e 7420     while parent 
+0000b640: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000b650: 2020 2020 2020 2020 206e 616d 6564 5f63           named_c
+0000b660: 6869 6c64 7265 6e20 3d20 7061 7265 6e74  hildren = parent
+0000b670: 2e5f 6e61 6d65 645f 6368 696c 6472 656e  ._named_children
+0000b680: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000b690: 6f6c 645f 6e61 6d65 2069 7320 6e6f 7420  old_name is not 
+0000b6a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0000b6b0: 2020 2020 2020 6e61 6d65 645f 6368 696c        named_chil
+0000b6c0: 6472 656e 5b6f 6c64 5f6e 616d 655d 2e72  dren[old_name].r
+0000b6d0: 656d 6f76 6528 7365 6c66 290a 2020 2020  emove(self).    
+0000b6e0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0000b6f0: 6f74 206e 616d 6564 5f63 6869 6c64 7265  ot named_childre
+0000b700: 6e5b 6f6c 645f 6e61 6d65 5d3a 0a20 2020  n[old_name]:.   
+0000b710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b720: 2064 656c 206e 616d 6564 5f63 6869 6c64   del named_child
+0000b730: 7265 6e5b 6f6c 645f 6e61 6d65 5d0a 2020  ren[old_name].  
+0000b740: 2020 2020 2020 2020 2020 6966 2061 7267            if arg
+0000b750: 756d 656e 7420 6973 206e 6f74 204e 6f6e  ument is not Non
+0000b760: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000b770: 2020 2069 6620 6172 6775 6d65 6e74 206e     if argument n
+0000b780: 6f74 2069 6e20 6e61 6d65 645f 6368 696c  ot in named_chil
+0000b790: 6472 656e 3a0a 2020 2020 2020 2020 2020  dren:.          
+0000b7a0: 2020 2020 2020 2020 2020 6e61 6d65 645f            named_
+0000b7b0: 6368 696c 6472 656e 5b61 7267 756d 656e  children[argumen
+0000b7c0: 745d 203d 205b 7365 6c66 5d0a 2020 2020  t] = [self].    
+0000b7d0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000b7e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000b7f0: 2020 2020 2020 6e61 6d65 645f 6368 696c        named_chil
+0000b800: 6472 656e 5b61 7267 756d 656e 745d 2e61  dren[argument].a
+0000b810: 7070 656e 6428 7365 6c66 290a 2020 2020  ppend(self).    
+0000b820: 2020 2020 2020 2020 7061 7265 6e74 203d          parent =
+0000b830: 2070 6172 656e 742e 5f70 6172 656e 740a   parent._parent.
+0000b840: 2020 2020 2020 2020 7365 6c66 2e5f 6e61          self._na
+0000b850: 6d65 203d 2061 7267 756d 656e 740a 0a20  me = argument.. 
+0000b860: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
+0000b870: 2064 6566 2073 696d 756c 7461 6e65 6f75   def simultaneou
+0000b880: 7328 7365 6c66 2920 2d3e 2062 6f6f 6c20  s(self) -> bool 
+0000b890: 7c20 4e6f 6e65 3a0a 2020 2020 2020 2020  | None:.        
+0000b8a0: 7222 2222 0a20 2020 2020 2020 2049 7320  r""".        Is 
+0000b8b0: 7472 7565 2077 6865 6e20 636f 6e74 6169  true when contai
+0000b8c0: 6e65 7220 6973 2073 696d 756c 7461 6e65  ner is simultane
+0000b8d0: 6f75 732e 0a0a 2020 2020 2020 2020 2e2e  ous...        ..
+0000b8e0: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
+0000b8f0: 616d 706c 650a 0a20 2020 2020 2020 2020  ample..         
+0000b900: 2020 2047 6574 7320 7369 6d75 6c74 616e     Gets simultan
+0000b910: 6569 7479 2073 7461 7475 7320 6f66 2063  eity status of c
+0000b920: 6f6e 7461 696e 6572 3a0a 0a20 2020 2020  ontainer:..     
+0000b930: 2020 2020 2020 203e 3e3e 2063 6f6e 7461         >>> conta
+0000b940: 696e 6572 203d 2061 626a 6164 2e43 6f6e  iner = abjad.Con
+0000b950: 7461 696e 6572 2829 0a20 2020 2020 2020  tainer().       
+0000b960: 2020 2020 203e 3e3e 2063 6f6e 7461 696e       >>> contain
+0000b970: 6572 2e61 7070 656e 6428 6162 6a61 642e  er.append(abjad.
+0000b980: 566f 6963 6528 2263 2738 2064 2738 2065  Voice("c'8 d'8 e
+0000b990: 2738 2229 290a 2020 2020 2020 2020 2020  '8")).          
+0000b9a0: 2020 3e3e 3e20 636f 6e74 6169 6e65 722e    >>> container.
+0000b9b0: 6170 7065 6e64 2861 626a 6164 2e56 6f69  append(abjad.Voi
+0000b9c0: 6365 2827 6734 2e27 2929 0a20 2020 2020  ce('g4.')).     
+0000b9d0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0000b9e0: 2e73 686f 7728 636f 6e74 6169 6e65 7229  .show(container)
+0000b9f0: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
+0000ba00: 500a 0a20 2020 2020 2020 2020 2020 202e  P..            .
+0000ba10: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
+0000ba20: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
+0000ba30: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
+0000ba40: 6c79 706f 6e64 2863 6f6e 7461 696e 6572  lypond(container
+0000ba50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000ba60: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+0000ba70: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0000ba80: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+0000ba90: 2020 2020 2020 2020 2020 5c6e 6577 2056            \new V
+0000baa0: 6f69 6365 0a20 2020 2020 2020 2020 2020  oice.           
+0000bab0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+0000bac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bad0: 2020 2063 2738 0a20 2020 2020 2020 2020     c'8.         
+0000bae0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0000baf0: 2738 0a20 2020 2020 2020 2020 2020 2020  '8.             
+0000bb00: 2020 2020 2020 2020 2020 2065 2738 0a20             e'8. 
+0000bb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bb20: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+0000bb30: 2020 2020 2020 2020 205c 6e65 7720 566f           \new Vo
+0000bb40: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
+0000bb50: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0000bb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bb70: 2020 6734 2e0a 2020 2020 2020 2020 2020    g4..          
+0000bb80: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+0000bb90: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
+0000bba0: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
+0000bbb0: 6f6e 7461 696e 6572 2e73 696d 756c 7461  ontainer.simulta
+0000bbc0: 6e65 6f75 730a 2020 2020 2020 2020 2020  neous.          
+0000bbd0: 2020 4661 6c73 650a 0a20 2020 2020 2020    False..       
+0000bbe0: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
+0000bbf0: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
+0000bc00: 2020 2020 2020 5365 7473 2073 696d 756c        Sets simul
+0000bc10: 7461 6e65 6974 7920 7374 6174 7573 206f  taneity status o
+0000bc20: 6620 636f 6e74 6169 6e65 723a 0a0a 2020  f container:..  
+0000bc30: 2020 2020 2020 2020 2020 3e3e 3e20 636f            >>> co
+0000bc40: 6e74 6169 6e65 7220 3d20 6162 6a61 642e  ntainer = abjad.
+0000bc50: 436f 6e74 6169 6e65 7228 290a 2020 2020  Container().    
+0000bc60: 2020 2020 2020 2020 3e3e 3e20 636f 6e74          >>> cont
+0000bc70: 6169 6e65 722e 6170 7065 6e64 2861 626a  ainer.append(abj
+0000bc80: 6164 2e56 6f69 6365 2822 6327 3820 6427  ad.Voice("c'8 d'
+0000bc90: 3820 6527 3822 2929 0a20 2020 2020 2020  8 e'8")).       
+0000bca0: 2020 2020 203e 3e3e 2063 6f6e 7461 696e       >>> contain
+0000bcb0: 6572 2e61 7070 656e 6428 6162 6a61 642e  er.append(abjad.
+0000bcc0: 566f 6963 6528 2767 342e 2729 290a 2020  Voice('g4.')).  
+0000bcd0: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+0000bce0: 6a61 642e 7368 6f77 2863 6f6e 7461 696e  jad.show(contain
+0000bcf0: 6572 2920 2320 646f 6374 6573 743a 202b  er) # doctest: +
+0000bd00: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
+0000bd10: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+0000bd20: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+0000bd30: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+0000bd40: 2e6c 696c 7970 6f6e 6428 636f 6e74 6169  .lilypond(contai
+0000bd50: 6e65 7229 0a20 2020 2020 2020 2020 2020  ner).           
+0000bd60: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
+0000bd70: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+0000bd80: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+0000bd90: 2020 2020 2020 2020 2020 2020 205c 6e65               \ne
+0000bda0: 7720 566f 6963 650a 2020 2020 2020 2020  w Voice.        
+0000bdb0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+0000bdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bdd0: 2020 2020 2020 6327 380a 2020 2020 2020        c'8.      
+0000bde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bdf0: 2020 6427 380a 2020 2020 2020 2020 2020    d'8.          
+0000be00: 2020 2020 2020 2020 2020 2020 2020 6527                e'
+0000be10: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
+0000be20: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0000be30: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
+0000be40: 2056 6f69 6365 0a20 2020 2020 2020 2020   Voice.         
+0000be50: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+0000be60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be70: 2020 2020 2067 342e 0a20 2020 2020 2020       g4..       
+0000be80: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+0000be90: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+0000bea0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0000beb0: 3e20 636f 6e74 6169 6e65 722e 7369 6d75  > container.simu
+0000bec0: 6c74 616e 656f 7573 203d 2054 7275 650a  ltaneous = True.
+0000bed0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0000bee0: 6162 6a61 642e 7368 6f77 2863 6f6e 7461  abjad.show(conta
+0000bef0: 696e 6572 2920 2320 646f 6374 6573 743a  iner) # doctest:
+0000bf00: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0000bf10: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
+0000bf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf30: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+0000bf40: 6164 2e6c 696c 7970 6f6e 6428 636f 6e74  ad.lilypond(cont
+0000bf50: 6169 6e65 7229 0a20 2020 2020 2020 2020  ainer).         
+0000bf60: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+0000bf70: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+0000bf80: 2020 2020 2020 2020 203c 3c0a 2020 2020           <<.    
+0000bf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bfa0: 5c6e 6577 2056 6f69 6365 0a20 2020 2020  \new Voice.     
+0000bfb0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+0000bfc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000bfd0: 2020 2020 2020 2020 2063 2738 0a20 2020           c'8.   
+0000bfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bff0: 2020 2020 2064 2738 0a20 2020 2020 2020       d'8.       
 0000c000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c010: 2064 2734 0a20 2020 2020 2020 2020 2020   d'4.           
-0000c020: 2020 2020 2020 2020 2066 2734 0a20 2020           f'4.   
-0000c030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c040: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
-0000c050: 2020 207d 0a0a 2020 2020 2020 2020 2020     }..          
-0000c060: 2020 3e3e 3e20 6e6f 7465 7320 3d20 5b61    >>> notes = [a
-0000c070: 626a 6164 2e4e 6f74 6528 2265 2733 3222  bjad.Note("e'32"
-0000c080: 292c 2061 626a 6164 2e4e 6f74 6528 2264  ), abjad.Note("d
-0000c090: 2733 3222 292c 2061 626a 6164 2e4e 6f74  '32"), abjad.Not
-0000c0a0: 6528 2265 2731 3622 295d 0a20 2020 2020  e("e'16")].     
-0000c0b0: 2020 2020 2020 203e 3e3e 2063 6f6e 7461         >>> conta
-0000c0c0: 696e 6572 2e65 7874 656e 6428 6e6f 7465  iner.extend(note
-0000c0d0: 7329 0a20 2020 2020 2020 2020 2020 203e  s).            >
-0000c0e0: 3e3e 2061 626a 6164 2e73 686f 7728 636f  >> abjad.show(co
-0000c0f0: 6e74 6169 6e65 7229 2023 2064 6f63 7465  ntainer) # docte
-0000c100: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-0000c110: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0000c120: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000c130: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0000c140: 6162 6a61 642e 6c69 6c79 706f 6e64 2863  abjad.lilypond(c
-0000c150: 6f6e 7461 696e 6572 290a 2020 2020 2020  ontainer).      
-0000c160: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-0000c170: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
-0000c180: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0000c190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c1a0: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
-0000c1b0: 2020 2020 2020 2020 2020 280a 2020 2020            (.    
-0000c1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c1d0: 6427 340a 2020 2020 2020 2020 2020 2020  d'4.            
-0000c1e0: 2020 2020 2020 2020 6627 340a 2020 2020          f'4.    
-0000c1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c200: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000c210: 2020 2020 2020 6527 3332 0a20 2020 2020        e'32.     
-0000c220: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0000c230: 2733 320a 2020 2020 2020 2020 2020 2020  '32.            
-0000c240: 2020 2020 2020 2020 6527 3136 0a20 2020          e'16.   
-0000c250: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
-0000c260: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000c270: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0000c280: 6528 6172 6775 6d65 6e74 2c20 7374 7229  e(argument, str)
-0000c290: 3a0a 2020 2020 2020 2020 2020 2020 6172  :.            ar
-0000c2a0: 6775 6d65 6e74 203d 2073 656c 662e 5f70  gument = self._p
-0000c2b0: 6172 7365 5f73 7472 696e 6728 6172 6775  arse_string(argu
-0000c2c0: 6d65 6e74 2c20 6c61 6e67 7561 6765 3d6c  ment, language=l
-0000c2d0: 616e 6775 6167 6529 0a20 2020 2020 2020  anguage).       
-0000c2e0: 2073 656c 662e 5f5f 7365 7469 7465 6d5f   self.__setitem_
-0000c2f0: 5f28 0a20 2020 2020 2020 2020 2020 2073  _(.            s
-0000c300: 6c69 6365 286c 656e 2873 656c 6629 2c20  lice(len(self), 
-0000c310: 6c65 6e28 7365 6c66 2929 2c0a 2020 2020  len(self)),.    
-0000c320: 2020 2020 2020 2020 6172 6775 6d65 6e74          argument
-0000c330: 2e5f 5f67 6574 6974 656d 5f5f 2873 6c69  .__getitem__(sli
-0000c340: 6365 2830 2c20 6c65 6e28 6172 6775 6d65  ce(0, len(argume
-0000c350: 6e74 2929 292c 0a20 2020 2020 2020 2029  nt))),.        )
-0000c360: 0a0a 2020 2020 6465 6620 696e 6465 7828  ..    def index(
-0000c370: 7365 6c66 2c20 636f 6d70 6f6e 656e 7429  self, component)
-0000c380: 202d 3e20 696e 743a 0a20 2020 2020 2020   -> int:.       
-0000c390: 2072 2222 220a 2020 2020 2020 2020 5265   r""".        Re
-0000c3a0: 7475 726e 7320 696e 6465 7820 6f66 2060  turns index of `
-0000c3b0: 6063 6f6d 706f 6e65 6e74 6060 2069 6e20  `component`` in 
-0000c3c0: 636f 6e74 6169 6e65 722e 0a0a 2020 2020  container...    
-0000c3d0: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-0000c3e0: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-0000c3f0: 2020 2020 2020 2020 2047 6574 7320 696e           Gets in
-0000c400: 6465 7820 6f66 206c 6173 7420 656c 656d  dex of last elem
-0000c410: 656e 7420 696e 2063 6f6e 7461 696e 6572  ent in container
-0000c420: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-0000c430: 3e3e 2063 6f6e 7461 696e 6572 203d 2061  >> container = a
-0000c440: 626a 6164 2e43 6f6e 7461 696e 6572 2822  bjad.Container("
-0000c450: 6327 3420 6427 3420 6627 3420 6527 3422  c'4 d'4 f'4 e'4"
-0000c460: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-0000c470: 3e20 6162 6a61 642e 7368 6f77 2863 6f6e  > abjad.show(con
-0000c480: 7461 696e 6572 2920 2320 646f 6374 6573  tainer) # doctes
-0000c490: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-0000c4a0: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-0000c4b0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000c4c0: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-0000c4d0: 626a 6164 2e6c 696c 7970 6f6e 6428 636f  bjad.lilypond(co
-0000c4e0: 6e74 6169 6e65 7229 0a20 2020 2020 2020  ntainer).       
-0000c4f0: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
-0000c500: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
-0000c510: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-0000c520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c530: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
-0000c540: 2020 2020 2020 2020 2064 2734 0a20 2020           d'4.   
-0000c550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c560: 2066 2734 0a20 2020 2020 2020 2020 2020   f'4.           
-0000c570: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
-0000c580: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
-0000c590: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0000c5a0: 6e6f 7465 203d 2063 6f6e 7461 696e 6572  note = container
-0000c5b0: 5b2d 315d 0a20 2020 2020 2020 2020 2020  [-1].           
-0000c5c0: 203e 3e3e 206e 6f74 650a 2020 2020 2020   >>> note.      
-0000c5d0: 2020 2020 2020 4e6f 7465 2822 6527 3422        Note("e'4"
-0000c5e0: 290a 0a20 2020 2020 2020 2020 2020 203e  )..            >
-0000c5f0: 3e3e 2063 6f6e 7461 696e 6572 2e69 6e64  >> container.ind
-0000c600: 6578 286e 6f74 6529 0a20 2020 2020 2020  ex(note).       
-0000c610: 2020 2020 2033 0a0a 2020 2020 2020 2020       3..        
-0000c620: 2222 220a 2020 2020 2020 2020 666f 7220  """.        for 
-0000c630: 692c 2065 6c65 6d65 6e74 2069 6e20 656e  i, element in en
-0000c640: 756d 6572 6174 6528 7365 6c66 2e63 6f6d  umerate(self.com
-0000c650: 706f 6e65 6e74 7329 3a0a 2020 2020 2020  ponents):.      
-0000c660: 2020 2020 2020 6966 2065 6c65 6d65 6e74        if element
-0000c670: 2069 7320 636f 6d70 6f6e 656e 743a 0a20   is component:. 
-0000c680: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0000c690: 6574 7572 6e20 690a 2020 2020 2020 2020  eturn i.        
-0000c6a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000c6b0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-0000c6c0: 6f72 2866 2263 6f6d 706f 6e65 6e74 207b  or(f"component {
-0000c6d0: 636f 6d70 6f6e 656e 7421 727d 206e 6f74  component!r} not
-0000c6e0: 2069 6e20 636f 6e74 6169 6e65 7220 7b73   in container {s
-0000c6f0: 656c 6621 727d 2e22 290a 0a20 2020 2064  elf!r}.")..    d
-0000c700: 6566 2069 6e73 6572 7428 0a20 2020 2020  ef insert(.     
-0000c710: 2020 2073 656c 662c 2069 3a20 696e 742c     self, i: int,
-0000c720: 2063 6f6d 706f 6e65 6e74 3a20 7374 7220   component: str 
-0000c730: 7c20 436f 6d70 6f6e 656e 742c 202a 2c20  | Component, *, 
-0000c740: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
-0000c750: 2265 6e67 6c69 7368 220a 2020 2020 2920  "english".    ) 
-0000c760: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0000c770: 2072 2222 220a 2020 2020 2020 2020 496e   r""".        In
-0000c780: 7365 7274 7320 6060 636f 6d70 6f6e 656e  serts ``componen
-0000c790: 7460 6020 6174 2069 6e64 6578 2060 6069  t`` at index ``i
-0000c7a0: 6060 2069 6e20 636f 6e74 6169 6e65 722e  `` in container.
-0000c7b0: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
-0000c7c0: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-0000c7d0: 650a 0a20 2020 2020 2020 2020 2020 2049  e..            I
-0000c7e0: 6e73 6572 7473 206e 6f74 652e 0a0a 2020  nserts note...  
-0000c7f0: 2020 2020 2020 2020 2020 3e3e 3e20 636f            >>> co
-0000c800: 6e74 6169 6e65 7220 3d20 6162 6a61 642e  ntainer = abjad.
-0000c810: 436f 6e74 6169 6e65 7228 5b5d 290a 2020  Container([]).  
-0000c820: 2020 2020 2020 2020 2020 3e3e 3e20 636f            >>> co
-0000c830: 6e74 6169 6e65 722e 6578 7465 6e64 2822  ntainer.extend("
-0000c840: 6673 3136 2063 7327 2065 2720 6127 2229  fs16 cs' e' a'")
-0000c850: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0000c860: 2063 6f6e 7461 696e 6572 2e65 7874 656e   container.exten
-0000c870: 6428 2263 7327 2731 3620 6527 2720 6373  d("cs''16 e'' cs
-0000c880: 2727 2061 2722 290a 2020 2020 2020 2020  '' a'").        
-0000c890: 2020 2020 3e3e 3e20 636f 6e74 6169 6e65      >>> containe
-0000c8a0: 722e 6578 7465 6e64 2822 6673 2731 3620  r.extend("fs'16 
-0000c8b0: 6527 2063 7327 2066 7322 290a 2020 2020  e' cs' fs").    
-0000c8c0: 2020 2020 2020 2020 3e3e 3e20 7374 6172          >>> star
-0000c8d0: 745f 736c 7572 203d 2061 626a 6164 2e53  t_slur = abjad.S
-0000c8e0: 7461 7274 536c 7572 2829 0a20 2020 2020  tartSlur().     
-0000c8f0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-0000c900: 2e73 6c75 7228 636f 6e74 6169 6e65 725b  .slur(container[
-0000c910: 3a5d 2c20 6469 7265 6374 696f 6e3d 6162  :], direction=ab
-0000c920: 6a61 642e 444f 574e 2c20 7374 6172 745f  jad.DOWN, start_
-0000c930: 736c 7572 3d73 7461 7274 5f73 6c75 7229  slur=start_slur)
-0000c940: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0000c950: 2061 626a 6164 2e73 686f 7728 636f 6e74   abjad.show(cont
-0000c960: 6169 6e65 7229 2023 2064 6f63 7465 7374  ainer) # doctest
-0000c970: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-0000c980: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
-0000c990: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c9a0: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-0000c9b0: 6a61 642e 6c69 6c79 706f 6e64 2863 6f6e  jad.lilypond(con
-0000c9c0: 7461 696e 6572 290a 2020 2020 2020 2020  tainer).        
-0000c9d0: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-0000c9e0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-0000c9f0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-0000ca00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ca10: 6673 3136 0a20 2020 2020 2020 2020 2020  fs16.           
-0000ca20: 2020 2020 2020 2020 205f 2028 0a20 2020           _ (.   
-0000ca30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ca40: 2063 7327 3136 0a20 2020 2020 2020 2020   cs'16.         
-0000ca50: 2020 2020 2020 2020 2020 2065 2731 360a             e'16.
-0000ca60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ca70: 2020 2020 6127 3136 0a20 2020 2020 2020      a'16.       
-0000ca80: 2020 2020 2020 2020 2020 2020 2063 7327               cs'
-0000ca90: 2731 360a 2020 2020 2020 2020 2020 2020  '16.            
-0000caa0: 2020 2020 2020 2020 6527 2731 360a 2020          e''16.  
-0000cab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cac0: 2020 6373 2727 3136 0a20 2020 2020 2020    cs''16.       
-0000cad0: 2020 2020 2020 2020 2020 2020 2061 2731               a'1
-0000cae0: 360a 2020 2020 2020 2020 2020 2020 2020  6.              
-0000caf0: 2020 2020 2020 6673 2731 360a 2020 2020        fs'16.    
-0000cb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cb10: 6527 3136 0a20 2020 2020 2020 2020 2020  e'16.           
-0000cb20: 2020 2020 2020 2020 2063 7327 3136 0a20           cs'16. 
-0000cb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cb40: 2020 2066 7331 360a 2020 2020 2020 2020     fs16.        
-0000cb50: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0000cb60: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-0000cb70: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0000cb80: 2063 6f6e 7461 696e 6572 2e69 6e73 6572   container.inser
-0000cb90: 7428 2d34 2c20 6162 6a61 642e 4e6f 7465  t(-4, abjad.Note
-0000cba0: 2822 6527 3422 2929 0a20 2020 2020 2020  ("e'4")).       
-0000cbb0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-0000cbc0: 686f 7728 636f 6e74 6169 6e65 7229 2023  how(container) #
-0000cbd0: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
-0000cbe0: 0a20 2020 2020 2020 2020 2020 202e 2e20  .            .. 
-0000cbf0: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
-0000cc00: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
-0000cc10: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
-0000cc20: 706f 6e64 2863 6f6e 7461 696e 6572 290a  pond(container).
+0000c010: 2065 2738 0a20 2020 2020 2020 2020 2020   e'8.           
+0000c020: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0000c030: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+0000c040: 6e65 7720 566f 6963 650a 2020 2020 2020  new Voice.      
+0000c050: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+0000c060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c070: 2020 2020 2020 2020 6734 2e0a 2020 2020          g4..    
+0000c080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c090: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
+0000c0a0: 2020 3e3e 0a0a 2020 2020 2020 2020 2222    >>..        ""
+0000c0b0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+0000c0c0: 2073 656c 662e 5f69 735f 7369 6d75 6c74   self._is_simult
+0000c0d0: 616e 656f 7573 0a0a 2020 2020 4073 696d  aneous..    @sim
+0000c0e0: 756c 7461 6e65 6f75 732e 7365 7474 6572  ultaneous.setter
+0000c0f0: 0a20 2020 2064 6566 2073 696d 756c 7461  .    def simulta
+0000c100: 6e65 6f75 7328 7365 6c66 2c20 6172 6775  neous(self, argu
+0000c110: 6d65 6e74 293a 0a20 2020 2020 2020 2069  ment):.        i
+0000c120: 6620 6172 6775 6d65 6e74 2069 7320 4e6f  f argument is No
+0000c130: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0000c140: 7265 7475 726e 0a20 2020 2020 2020 2061  return.        a
+0000c150: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
+0000c160: 2861 7267 756d 656e 742c 2062 6f6f 6c29  (argument, bool)
+0000c170: 2c20 7265 7072 2861 7267 756d 656e 7429  , repr(argument)
+0000c180: 0a20 2020 2020 2020 2069 6620 6172 6775  .        if argu
+0000c190: 6d65 6e74 2061 6e64 206e 6f74 2061 6c6c  ment and not all
+0000c1a0: 2869 7369 6e73 7461 6e63 6528 5f2c 2043  (isinstance(_, C
+0000c1b0: 6f6e 7461 696e 6572 2920 666f 7220 5f20  ontainer) for _ 
+0000c1c0: 696e 2073 656c 6629 3a0a 2020 2020 2020  in self):.      
+0000c1d0: 2020 2020 2020 6d65 7373 6167 6520 3d20        message = 
+0000c1e0: 2273 696d 756c 7461 6e65 6f75 7320 636f  "simultaneous co
+0000c1f0: 6e74 6169 6e65 7273 206d 7573 7420 636f  ntainers must co
+0000c200: 6e74 6169 6e22 0a20 2020 2020 2020 2020  ntain".         
+0000c210: 2020 206d 6573 7361 6765 202b 3d20 2220     message += " 
+0000c220: 6f6e 6c79 206f 7468 6572 2063 6f6e 7461  only other conta
+0000c230: 696e 6572 732e 220a 2020 2020 2020 2020  iners.".        
+0000c240: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+0000c250: 7272 6f72 286d 6573 7361 6765 290a 2020  rror(message).  
+0000c260: 2020 2020 2020 7365 6c66 2e5f 6973 5f73        self._is_s
+0000c270: 696d 756c 7461 6e65 6f75 7320 3d20 6172  imultaneous = ar
+0000c280: 6775 6d65 6e74 0a20 2020 2020 2020 2073  gument.        s
+0000c290: 656c 662e 5f75 7064 6174 655f 6c61 7465  elf._update_late
+0000c2a0: 7228 6f66 6673 6574 733d 5472 7565 290a  r(offsets=True).
+0000c2b0: 0a20 2020 2023 2323 2050 5542 4c49 4320  .    ### PUBLIC 
+0000c2c0: 4d45 5448 4f44 5320 2323 230a 0a20 2020  METHODS ###..   
+0000c2d0: 2064 6566 2061 7070 656e 6428 7365 6c66   def append(self
+0000c2e0: 2c20 636f 6d70 6f6e 656e 743a 2043 6f6d  , component: Com
+0000c2f0: 706f 6e65 6e74 2c20 2a2c 206c 616e 6775  ponent, *, langu
+0000c300: 6167 653a 2073 7472 203d 2022 656e 676c  age: str = "engl
+0000c310: 6973 6822 2920 2d3e 204e 6f6e 653a 0a20  ish") -> None:. 
+0000c320: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
+0000c330: 2020 2020 4170 7065 6e64 7320 6060 636f      Appends ``co
+0000c340: 6d70 6f6e 656e 7460 6020 746f 2063 6f6e  mponent`` to con
+0000c350: 7461 696e 6572 2e0a 0a20 2020 2020 2020  tainer...       
+0000c360: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
+0000c370: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
+0000c380: 2020 2020 2020 4170 7065 6e64 7320 6e6f        Appends no
+0000c390: 7465 2074 6f20 636f 6e74 6169 6e65 723a  te to container:
+0000c3a0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0000c3b0: 3e20 636f 6e74 6169 6e65 7220 3d20 6162  > container = ab
+0000c3c0: 6a61 642e 436f 6e74 6169 6e65 7228 2263  jad.Container("c
+0000c3d0: 2734 2028 2064 2734 2066 2734 2029 2229  '4 ( d'4 f'4 )")
+0000c3e0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0000c3f0: 2061 626a 6164 2e73 686f 7728 636f 6e74   abjad.show(cont
+0000c400: 6169 6e65 7229 2023 2064 6f63 7465 7374  ainer) # doctest
+0000c410: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
+0000c420: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
+0000c430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c440: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
+0000c450: 6a61 642e 6c69 6c79 706f 6e64 2863 6f6e  jad.lilypond(con
+0000c460: 7461 696e 6572 290a 2020 2020 2020 2020  tainer).        
+0000c470: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+0000c480: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+0000c490: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+0000c4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c4b0: 6327 340a 2020 2020 2020 2020 2020 2020  c'4.            
+0000c4c0: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+0000c4d0: 2020 2020 2020 2020 2020 2020 2020 6427                d'
+0000c4e0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0000c4f0: 2020 2020 2020 6627 340a 2020 2020 2020        f'4.      
+0000c500: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+0000c510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c520: 7d0a 0a20 2020 2020 2020 2020 2020 203e  }..            >
+0000c530: 3e3e 2063 6f6e 7461 696e 6572 2e61 7070  >> container.app
+0000c540: 656e 6428 6162 6a61 642e 4e6f 7465 2822  end(abjad.Note("
+0000c550: 6527 3422 2929 0a20 2020 2020 2020 2020  e'4")).         
+0000c560: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
+0000c570: 7728 636f 6e74 6169 6e65 7229 2023 2064  w(container) # d
+0000c580: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+0000c590: 2020 2020 2020 2020 2020 202e 2e20 2064             ..  d
+0000c5a0: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
+0000c5b0: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+0000c5c0: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+0000c5d0: 6e64 2863 6f6e 7461 696e 6572 290a 2020  nd(container).  
+0000c5e0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+0000c5f0: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
+0000c600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c610: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+0000c620: 2020 2020 2020 6327 340a 2020 2020 2020        c'4.      
+0000c630: 2020 2020 2020 2020 2020 2020 2020 280a                (.
+0000c640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c650: 2020 2020 6427 340a 2020 2020 2020 2020      d'4.        
+0000c660: 2020 2020 2020 2020 2020 2020 6627 340a              f'4.
+0000c670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c680: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+0000c690: 2020 2020 2020 2020 2020 6527 340a 2020            e'4.  
+0000c6a0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+0000c6b0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000c6c0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0000c6d0: 6365 2863 6f6d 706f 6e65 6e74 2c20 7374  ce(component, st
+0000c6e0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+0000c6f0: 7365 6c65 6374 696f 6e20 3d20 7365 6c66  selection = self
+0000c700: 2e5f 7061 7273 655f 7374 7269 6e67 2863  ._parse_string(c
+0000c710: 6f6d 706f 6e65 6e74 2c20 6c61 6e67 7561  omponent, langua
+0000c720: 6765 3d6c 616e 6775 6167 6529 0a20 2020  ge=language).   
+0000c730: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+0000c740: 6c65 6e28 7365 6c65 6374 696f 6e29 203d  len(selection) =
+0000c750: 3d20 310a 2020 2020 2020 2020 2020 2020  = 1.            
+0000c760: 636f 6d70 6f6e 656e 7420 3d20 7365 6c65  component = sele
+0000c770: 6374 696f 6e5b 305d 0a20 2020 2020 2020  ction[0].       
+0000c780: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
+0000c790: 6365 2863 6f6d 706f 6e65 6e74 2c20 436f  ce(component, Co
+0000c7a0: 6d70 6f6e 656e 7429 2c20 7265 7072 2863  mponent), repr(c
+0000c7b0: 6f6d 706f 6e65 6e74 290a 2020 2020 2020  omponent).      
+0000c7c0: 2020 7365 6c66 2e5f 5f73 6574 6974 656d    self.__setitem
+0000c7d0: 5f5f 2873 6c69 6365 286c 656e 2873 656c  __(slice(len(sel
+0000c7e0: 6629 2c20 6c65 6e28 7365 6c66 2929 2c20  f), len(self)), 
+0000c7f0: 5b63 6f6d 706f 6e65 6e74 5d29 0a0a 2020  [component])..  
+0000c800: 2020 6465 6620 6578 7465 6e64 2873 656c    def extend(sel
+0000c810: 662c 2061 7267 756d 656e 742c 202a 2c20  f, argument, *, 
+0000c820: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
+0000c830: 2265 6e67 6c69 7368 2229 202d 3e20 4e6f  "english") -> No
+0000c840: 6e65 3a0a 2020 2020 2020 2020 7222 2222  ne:.        r"""
+0000c850: 0a20 2020 2020 2020 2045 7874 656e 6473  .        Extends
+0000c860: 2063 6f6e 7461 696e 6572 2077 6974 6820   container with 
+0000c870: 6060 6172 6775 6d65 6e74 6060 2e0a 0a20  ``argument``... 
+0000c880: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
+0000c890: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+0000c8a0: 2020 2020 2020 2020 2020 2020 4578 7465              Exte
+0000c8b0: 6e64 7320 636f 6e74 6169 6e65 7220 7769  nds container wi
+0000c8c0: 7468 2074 6872 6565 206e 6f74 6573 3a0a  th three notes:.
+0000c8d0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0000c8e0: 2063 6f6e 7461 696e 6572 203d 2061 626a   container = abj
+0000c8f0: 6164 2e43 6f6e 7461 696e 6572 2822 6327  ad.Container("c'
+0000c900: 3420 2820 6427 3420 6627 3420 2922 290a  4 ( d'4 f'4 )").
+0000c910: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0000c920: 6162 6a61 642e 7368 6f77 2863 6f6e 7461  abjad.show(conta
+0000c930: 696e 6572 2920 2320 646f 6374 6573 743a  iner) # doctest:
+0000c940: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0000c950: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
+0000c960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c970: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+0000c980: 6164 2e6c 696c 7970 6f6e 6428 636f 6e74  ad.lilypond(cont
+0000c990: 6169 6e65 7229 0a20 2020 2020 2020 2020  ainer).         
+0000c9a0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+0000c9b0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+0000c9c0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+0000c9d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000c9e0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+0000c9f0: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
+0000ca00: 2020 2020 2020 2020 2020 2020 2064 2734               d'4
+0000ca10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ca20: 2020 2020 2066 2734 0a20 2020 2020 2020       f'4.       
+0000ca30: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
+0000ca40: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+0000ca50: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0000ca60: 3e20 6e6f 7465 7320 3d20 5b61 626a 6164  > notes = [abjad
+0000ca70: 2e4e 6f74 6528 2265 2733 3222 292c 2061  .Note("e'32"), a
+0000ca80: 626a 6164 2e4e 6f74 6528 2264 2733 3222  bjad.Note("d'32"
+0000ca90: 292c 2061 626a 6164 2e4e 6f74 6528 2265  ), abjad.Note("e
+0000caa0: 2731 3622 295d 0a20 2020 2020 2020 2020  '16")].         
+0000cab0: 2020 203e 3e3e 2063 6f6e 7461 696e 6572     >>> container
+0000cac0: 2e65 7874 656e 6428 6e6f 7465 7329 0a20  .extend(notes). 
+0000cad0: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+0000cae0: 626a 6164 2e73 686f 7728 636f 6e74 6169  bjad.show(contai
+0000caf0: 6e65 7229 2023 2064 6f63 7465 7374 3a20  ner) # doctest: 
+0000cb00: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+0000cb10: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+0000cb20: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+0000cb30: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+0000cb40: 642e 6c69 6c79 706f 6e64 2863 6f6e 7461  d.lilypond(conta
+0000cb50: 696e 6572 290a 2020 2020 2020 2020 2020  iner).          
+0000cb60: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+0000cb70: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+0000cb80: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0000cb90: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+0000cba0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0000cbb0: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+0000cbc0: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
+0000cbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cbe0: 2020 2020 6627 340a 2020 2020 2020 2020      f'4.        
+0000cbf0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0000cc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cc10: 2020 6527 3332 0a20 2020 2020 2020 2020    e'32.         
+0000cc20: 2020 2020 2020 2020 2020 2064 2733 320a             d'32.
 0000cc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc40: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-0000cc50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000cc60: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0000cc70: 2020 2020 2020 2020 6673 3136 0a20 2020          fs16.   
-0000cc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc90: 205f 2028 0a20 2020 2020 2020 2020 2020   _ (.           
-0000cca0: 2020 2020 2020 2020 2063 7327 3136 0a20           cs'16. 
-0000ccb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ccc0: 2020 2065 2731 360a 2020 2020 2020 2020     e'16.        
-0000ccd0: 2020 2020 2020 2020 2020 2020 6127 3136              a'16
-0000cce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ccf0: 2020 2020 2063 7327 2731 360a 2020 2020       cs''16.    
-0000cd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd10: 6527 2731 360a 2020 2020 2020 2020 2020  e''16.          
-0000cd20: 2020 2020 2020 2020 2020 6373 2727 3136            cs''16
-0000cd30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000cd40: 2020 2020 2061 2731 360a 2020 2020 2020       a'16.      
-0000cd50: 2020 2020 2020 2020 2020 2020 2020 6527                e'
-0000cd60: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0000cd70: 2020 2020 2020 6673 2731 360a 2020 2020        fs'16.    
-0000cd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd90: 6527 3136 0a20 2020 2020 2020 2020 2020  e'16.           
-0000cda0: 2020 2020 2020 2020 2063 7327 3136 0a20           cs'16. 
-0000cdb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cdc0: 2020 2066 7331 360a 2020 2020 2020 2020     fs16.        
-0000cdd0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0000cde0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-0000cdf0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0000ce00: 2020 2020 2061 7373 6572 7420 6973 696e       assert isin
-0000ce10: 7374 616e 6365 2869 2c20 696e 7429 0a20  stance(i, int). 
-0000ce20: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0000ce30: 616e 6365 2863 6f6d 706f 6e65 6e74 2c20  ance(component, 
-0000ce40: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
-0000ce50: 2020 7365 6c65 6374 696f 6e20 3d20 7365    selection = se
-0000ce60: 6c66 2e5f 7061 7273 655f 7374 7269 6e67  lf._parse_string
-0000ce70: 2863 6f6d 706f 6e65 6e74 2c20 6c61 6e67  (component, lang
-0000ce80: 7561 6765 3d6c 616e 6775 6167 6529 0a20  uage=language). 
-0000ce90: 2020 2020 2020 2020 2020 2061 7373 6572             asser
-0000cea0: 7420 6c65 6e28 7365 6c65 6374 696f 6e29  t len(selection)
-0000ceb0: 203d 3d20 312c 2072 6570 7228 7365 6c65   == 1, repr(sele
-0000cec0: 6374 696f 6e29 0a20 2020 2020 2020 2020  ction).         
-0000ced0: 2020 2063 6f6d 706f 6e65 6e74 203d 2073     component = s
-0000cee0: 656c 6563 7469 6f6e 5b30 5d0a 2020 2020  election[0].    
-0000cef0: 2020 2020 6173 7365 7274 2069 7369 6e73      assert isins
-0000cf00: 7461 6e63 6528 636f 6d70 6f6e 656e 742c  tance(component,
-0000cf10: 2043 6f6d 706f 6e65 6e74 292c 2072 6570   Component), rep
-0000cf20: 7228 636f 6d70 6f6e 656e 7429 0a20 2020  r(component).   
-0000cf30: 2020 2020 2073 656c 662e 5f5f 7365 7469       self.__seti
-0000cf40: 7465 6d5f 5f28 736c 6963 6528 692c 2069  tem__(slice(i, i
-0000cf50: 292c 205b 636f 6d70 6f6e 656e 745d 290a  ), [component]).
-0000cf60: 2020 2020 2020 2020 7265 7475 726e 0a0a          return..
-0000cf70: 2020 2020 6465 6620 706f 7028 7365 6c66      def pop(self
-0000cf80: 2c20 693a 2069 6e74 203d 202d 3129 202d  , i: int = -1) -
-0000cf90: 3e20 436f 6d70 6f6e 656e 743a 0a20 2020  > Component:.   
-0000cfa0: 2020 2020 2072 2222 220a 2020 2020 2020       r""".      
-0000cfb0: 2020 506f 7073 2063 6f6d 706f 6e65 6e74    Pops component
-0000cfc0: 2066 726f 6d20 636f 6e74 6169 6e65 7220   from container 
-0000cfd0: 6174 2069 6e64 6578 2060 6069 6060 2e0a  at index ``i``..
-0000cfe0: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
-0000cff0: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
-0000d000: 0a0a 2020 2020 2020 2020 2020 2020 506f  ..            Po
-0000d010: 7073 206c 6173 7420 656c 656d 656e 7420  ps last element 
-0000d020: 6672 6f6d 2063 6f6e 7461 696e 6572 3a0a  from container:.
-0000d030: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0000d040: 2063 6f6e 7461 696e 6572 203d 2061 626a   container = abj
-0000d050: 6164 2e43 6f6e 7461 696e 6572 2822 6327  ad.Container("c'
-0000d060: 3420 2820 6427 3420 6627 3420 2920 6527  4 ( d'4 f'4 ) e'
-0000d070: 3422 290a 2020 2020 2020 2020 2020 2020  4").            
-0000d080: 3e3e 3e20 6162 6a61 642e 7368 6f77 2863  >>> abjad.show(c
-0000d090: 6f6e 7461 696e 6572 2920 2320 646f 6374  ontainer) # doct
-0000d0a0: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-0000d0b0: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-0000d0c0: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-0000d0d0: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-0000d0e0: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-0000d0f0: 636f 6e74 6169 6e65 7229 0a20 2020 2020  container).     
-0000d100: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
-0000d110: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
-0000d120: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0000d130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d140: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
-0000d150: 2020 2020 2020 2020 2020 2028 0a20 2020             (.   
-0000d160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d170: 2064 2734 0a20 2020 2020 2020 2020 2020   d'4.           
-0000d180: 2020 2020 2020 2020 2066 2734 0a20 2020           f'4.   
-0000d190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d1a0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
-0000d1b0: 2020 2020 2020 2065 2734 0a20 2020 2020         e'4.     
-0000d1c0: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
-0000d1d0: 2020 2020 2020 2020 2020 3e3e 3e20 636f            >>> co
-0000d1e0: 6e74 6169 6e65 722e 706f 7028 290a 2020  ntainer.pop().  
-0000d1f0: 2020 2020 2020 2020 2020 4e6f 7465 2822            Note("
-0000d200: 6527 3422 290a 2020 2020 2020 2020 2020  e'4").          
-0000d210: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
-0000d220: 2863 6f6e 7461 696e 6572 2920 2320 646f  (container) # do
-0000d230: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-0000d240: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
-0000d250: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
-0000d260: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-0000d270: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-0000d280: 6428 636f 6e74 6169 6e65 7229 0a20 2020  d(container).   
-0000d290: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-0000d2a0: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
-0000d2b0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-0000d2c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d2d0: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
-0000d2e0: 2020 2020 2020 2020 2020 2020 2028 0a20               (. 
-0000d2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d300: 2020 2064 2734 0a20 2020 2020 2020 2020     d'4.         
-0000d310: 2020 2020 2020 2020 2020 2066 2734 0a20             f'4. 
-0000d320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d330: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-0000d340: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
-0000d350: 2222 220a 2020 2020 2020 2020 6173 7365  """.        asse
-0000d360: 7274 2069 7369 6e73 7461 6e63 6528 692c  rt isinstance(i,
-0000d370: 2069 6e74 292c 2072 6570 7228 6929 0a20   int), repr(i). 
-0000d380: 2020 2020 2020 2063 6f6d 706f 6e65 6e74         component
-0000d390: 203d 2073 656c 665b 695d 0a20 2020 2020   = self[i].     
-0000d3a0: 2020 2064 656c 2073 656c 665b 695d 0a20     del self[i]. 
-0000d3b0: 2020 2020 2020 2072 6574 7572 6e20 636f         return co
-0000d3c0: 6d70 6f6e 656e 740a 0a20 2020 2064 6566  mponent..    def
-0000d3d0: 2072 656d 6f76 6528 7365 6c66 2c20 636f   remove(self, co
-0000d3e0: 6d70 6f6e 656e 743a 2043 6f6d 706f 6e65  mponent: Compone
-0000d3f0: 6e74 2920 2d3e 204e 6f6e 653a 0a20 2020  nt) -> None:.   
-0000d400: 2020 2020 2072 2222 220a 2020 2020 2020       r""".      
-0000d410: 2020 5265 6d6f 7665 7320 6060 636f 6d70    Removes ``comp
-0000d420: 6f6e 656e 7460 6020 6672 6f6d 2063 6f6e  onent`` from con
-0000d430: 7461 696e 6572 2e0a 0a20 2020 2020 2020  tainer...       
-0000d440: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
-0000d450: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
-0000d460: 2020 2020 2020 5265 6d6f 7665 7320 6e6f        Removes no
-0000d470: 7465 2066 726f 6d20 636f 6e74 6169 6e65  te from containe
-0000d480: 723a 0a0a 2020 2020 2020 2020 2020 2020  r:..            
-0000d490: 3e3e 3e20 636f 6e74 6169 6e65 7220 3d20  >>> container = 
-0000d4a0: 6162 6a61 642e 436f 6e74 6169 6e65 7228  abjad.Container(
-0000d4b0: 2263 2734 2064 2734 2066 2734 2065 2734  "c'4 d'4 f'4 e'4
-0000d4c0: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
-0000d4d0: 3e3e 2061 626a 6164 2e73 686f 7728 636f  >> abjad.show(co
-0000d4e0: 6e74 6169 6e65 7229 2023 2064 6f63 7465  ntainer) # docte
-0000d4f0: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-0000d500: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0000d510: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000d520: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0000d530: 6162 6a61 642e 6c69 6c79 706f 6e64 2863  abjad.lilypond(c
-0000d540: 6f6e 7461 696e 6572 290a 2020 2020 2020  ontainer).      
-0000d550: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-0000d560: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
-0000d570: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0000d580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d590: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
-0000d5a0: 2020 2020 2020 2020 2020 6427 340a 2020            d'4.  
-0000d5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d5c0: 2020 6627 340a 2020 2020 2020 2020 2020    f'4.          
-0000d5d0: 2020 2020 2020 2020 2020 6527 340a 2020            e'4.  
-0000d5e0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-0000d5f0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0000d600: 206e 6f74 6520 3d20 636f 6e74 6169 6e65   note = containe
-0000d610: 725b 325d 0a20 2020 2020 2020 2020 2020  r[2].           
-0000d620: 203e 3e3e 206e 6f74 650a 2020 2020 2020   >>> note.      
-0000d630: 2020 2020 2020 4e6f 7465 2822 6627 3422        Note("f'4"
-0000d640: 290a 0a20 2020 2020 2020 2020 2020 203e  )..            >
-0000d650: 3e3e 2063 6f6e 7461 696e 6572 2e72 656d  >> container.rem
-0000d660: 6f76 6528 6e6f 7465 290a 2020 2020 2020  ove(note).      
-0000d670: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-0000d680: 7368 6f77 2863 6f6e 7461 696e 6572 2920  show(container) 
-0000d690: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
-0000d6a0: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
-0000d6b0: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
-0000d6c0: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-0000d6d0: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-0000d6e0: 7970 6f6e 6428 636f 6e74 6169 6e65 7229  ypond(container)
-0000d6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d700: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-0000d710: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-0000d720: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-0000d730: 2020 2020 2020 2020 2063 2734 0a20 2020           c'4.   
-0000d740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d750: 2064 2734 0a20 2020 2020 2020 2020 2020   d'4.           
-0000d760: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
-0000d770: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
-0000d780: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000d790: 2020 2020 6173 7365 7274 2069 7369 6e73      assert isins
-0000d7a0: 7461 6e63 6528 636f 6d70 6f6e 656e 742c  tance(component,
-0000d7b0: 2043 6f6d 706f 6e65 6e74 292c 2072 6570   Component), rep
-0000d7c0: 7228 636f 6d70 6f6e 656e 7429 0a20 2020  r(component).   
-0000d7d0: 2020 2020 2069 203d 2073 656c 662e 696e       i = self.in
-0000d7e0: 6465 7828 636f 6d70 6f6e 656e 7429 0a20  dex(component). 
-0000d7f0: 2020 2020 2020 2064 656c 2073 656c 665b         del self[
-0000d800: 695d 0a0a 0a63 6c61 7373 2041 6674 6572  i]...class After
-0000d810: 4772 6163 6543 6f6e 7461 696e 6572 2843  GraceContainer(C
-0000d820: 6f6e 7461 696e 6572 293a 0a20 2020 2072  ontainer):.    r
-0000d830: 2222 220a 2020 2020 4166 7465 7220 6772  """.    After gr
-0000d840: 6163 6520 636f 6e74 6169 6e65 722e 0a0a  ace container...
-0000d850: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-0000d860: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-0000d870: 2020 2020 2041 6674 6572 2067 7261 6365       After grace
-0000d880: 206e 6f74 6573 3a0a 0a20 2020 2020 2020   notes:..       
-0000d890: 203e 3e3e 2076 6f69 6365 203d 2061 626a   >>> voice = abj
-0000d8a0: 6164 2e56 6f69 6365 2822 6327 3420 6427  ad.Voice("c'4 d'
-0000d8b0: 3420 6527 3420 6627 3422 290a 2020 2020  4 e'4 f'4").    
-0000d8c0: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-0000d8d0: 2027 2328 6465 6669 6e65 2061 6674 6572   '#(define after
-0000d8e0: 4772 6163 6546 7261 6374 696f 6e20 2863  GraceFraction (c
-0000d8f0: 6f6e 7320 3135 2031 3629 2927 0a20 2020  ons 15 16))'.   
-0000d900: 2020 2020 203e 3e3e 206c 6974 6572 616c       >>> literal
-0000d910: 203d 2061 626a 6164 2e4c 696c 7950 6f6e   = abjad.LilyPon
-0000d920: 644c 6974 6572 616c 2873 7472 696e 6729  dLiteral(string)
-0000d930: 0a20 2020 2020 2020 203e 3e3e 2061 626a  .        >>> abj
-0000d940: 6164 2e61 7474 6163 6828 6c69 7465 7261  ad.attach(litera
-0000d950: 6c2c 2076 6f69 6365 5b30 5d29 0a20 2020  l, voice[0]).   
-0000d960: 2020 2020 203e 3e3e 206e 6f74 6573 203d       >>> notes =
-0000d970: 205b 6162 6a61 642e 4e6f 7465 2822 6327   [abjad.Note("c'
-0000d980: 3136 2229 2c20 6162 6a61 642e 4e6f 7465  16"), abjad.Note
-0000d990: 2822 6427 3136 2229 5d0a 2020 2020 2020  ("d'16")].      
-0000d9a0: 2020 3e3e 3e20 6166 7465 725f 6772 6163    >>> after_grac
-0000d9b0: 655f 636f 6e74 6169 6e65 7220 3d20 6162  e_container = ab
-0000d9c0: 6a61 642e 4166 7465 7247 7261 6365 436f  jad.AfterGraceCo
-0000d9d0: 6e74 6169 6e65 7228 6e6f 7465 7329 0a20  ntainer(notes). 
-0000d9e0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-0000d9f0: 2e61 7474 6163 6828 6166 7465 725f 6772  .attach(after_gr
-0000da00: 6163 655f 636f 6e74 6169 6e65 722c 2076  ace_container, v
-0000da10: 6f69 6365 5b31 5d29 0a20 2020 2020 2020  oice[1]).       
-0000da20: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-0000da30: 766f 6963 6529 2023 2064 6f63 7465 7374  voice) # doctest
-0000da40: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-0000da50: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
-0000da60: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
-0000da70: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
-0000da80: 706f 6e64 2876 6f69 6365 290a 2020 2020  pond(voice).    
-0000da90: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-0000daa0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-0000dab0: 2020 2020 2020 5c6e 6577 2056 6f69 6365        \new Voice
-0000dac0: 0a20 2020 2020 2020 2020 2020 207b 0a20  .            {. 
-0000dad0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000dae0: 2864 6566 696e 6520 6166 7465 7247 7261  (define afterGra
-0000daf0: 6365 4672 6163 7469 6f6e 2028 636f 6e73  ceFraction (cons
-0000db00: 2031 3520 3136 2929 0a20 2020 2020 2020   15 16)).       
-0000db10: 2020 2020 2020 2020 2063 2734 0a20 2020           c'4.   
-0000db20: 2020 2020 2020 2020 2020 2020 205c 6166               \af
-0000db30: 7465 7247 7261 6365 0a20 2020 2020 2020  terGrace.       
-0000db40: 2020 2020 2020 2020 2064 2734 0a20 2020           d'4.   
-0000db50: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0000db60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000db70: 2020 2063 2731 360a 2020 2020 2020 2020     c'16.        
-0000db80: 2020 2020 2020 2020 2020 2020 6427 3136              d'16
-0000db90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000dba0: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
+0000cc40: 2020 2020 6527 3136 0a20 2020 2020 2020      e'16.       
+0000cc50: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+0000cc60: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0000cc70: 6966 2069 7369 6e73 7461 6e63 6528 6172  if isinstance(ar
+0000cc80: 6775 6d65 6e74 2c20 7374 7229 3a0a 2020  gument, str):.  
+0000cc90: 2020 2020 2020 2020 2020 6172 6775 6d65            argume
+0000cca0: 6e74 203d 2073 656c 662e 5f70 6172 7365  nt = self._parse
+0000ccb0: 5f73 7472 696e 6728 6172 6775 6d65 6e74  _string(argument
+0000ccc0: 2c20 6c61 6e67 7561 6765 3d6c 616e 6775  , language=langu
+0000ccd0: 6167 6529 0a20 2020 2020 2020 2073 656c  age).        sel
+0000cce0: 662e 5f5f 7365 7469 7465 6d5f 5f28 0a20  f.__setitem__(. 
+0000ccf0: 2020 2020 2020 2020 2020 2073 6c69 6365             slice
+0000cd00: 286c 656e 2873 656c 6629 2c20 6c65 6e28  (len(self), len(
+0000cd10: 7365 6c66 2929 2c0a 2020 2020 2020 2020  self)),.        
+0000cd20: 2020 2020 6172 6775 6d65 6e74 2e5f 5f67      argument.__g
+0000cd30: 6574 6974 656d 5f5f 2873 6c69 6365 2830  etitem__(slice(0
+0000cd40: 2c20 6c65 6e28 6172 6775 6d65 6e74 2929  , len(argument))
+0000cd50: 292c 0a20 2020 2020 2020 2029 0a0a 2020  ),.        )..  
+0000cd60: 2020 6465 6620 696e 6465 7828 7365 6c66    def index(self
+0000cd70: 2c20 636f 6d70 6f6e 656e 7429 202d 3e20  , component) -> 
+0000cd80: 696e 743a 0a20 2020 2020 2020 2072 2222  int:.        r""
+0000cd90: 220a 2020 2020 2020 2020 5265 7475 726e  ".        Return
+0000cda0: 7320 696e 6465 7820 6f66 2060 6063 6f6d  s index of ``com
+0000cdb0: 706f 6e65 6e74 6060 2069 6e20 636f 6e74  ponent`` in cont
+0000cdc0: 6169 6e65 722e 0a0a 2020 2020 2020 2020  ainer...        
+0000cdd0: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+0000cde0: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+0000cdf0: 2020 2020 2047 6574 7320 696e 6465 7820       Gets index 
+0000ce00: 6f66 206c 6173 7420 656c 656d 656e 7420  of last element 
+0000ce10: 696e 2063 6f6e 7461 696e 6572 3a0a 0a20  in container:.. 
+0000ce20: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
+0000ce30: 6f6e 7461 696e 6572 203d 2061 626a 6164  ontainer = abjad
+0000ce40: 2e43 6f6e 7461 696e 6572 2822 6327 3420  .Container("c'4 
+0000ce50: 6427 3420 6627 3420 6527 3422 290a 2020  d'4 f'4 e'4").  
+0000ce60: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+0000ce70: 6a61 642e 7368 6f77 2863 6f6e 7461 696e  jad.show(contain
+0000ce80: 6572 2920 2320 646f 6374 6573 743a 202b  er) # doctest: +
+0000ce90: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
+0000cea0: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+0000ceb0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+0000cec0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+0000ced0: 2e6c 696c 7970 6f6e 6428 636f 6e74 6169  .lilypond(contai
+0000cee0: 6e65 7229 0a20 2020 2020 2020 2020 2020  ner).           
+0000cef0: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
+0000cf00: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+0000cf10: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+0000cf20: 2020 2020 2020 2020 2020 2020 2063 2734               c'4
+0000cf30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000cf40: 2020 2020 2064 2734 0a20 2020 2020 2020       d'4.       
+0000cf50: 2020 2020 2020 2020 2020 2020 2066 2734               f'4
+0000cf60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000cf70: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
+0000cf80: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+0000cf90: 2020 2020 2020 2020 3e3e 3e20 6e6f 7465          >>> note
+0000cfa0: 203d 2063 6f6e 7461 696e 6572 5b2d 315d   = container[-1]
+0000cfb0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0000cfc0: 206e 6f74 650a 2020 2020 2020 2020 2020   note.          
+0000cfd0: 2020 4e6f 7465 2822 6527 3422 290a 0a20    Note("e'4").. 
+0000cfe0: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
+0000cff0: 6f6e 7461 696e 6572 2e69 6e64 6578 286e  ontainer.index(n
+0000d000: 6f74 6529 0a20 2020 2020 2020 2020 2020  ote).           
+0000d010: 2033 0a0a 2020 2020 2020 2020 2222 220a   3..        """.
+0000d020: 2020 2020 2020 2020 666f 7220 692c 2065          for i, e
+0000d030: 6c65 6d65 6e74 2069 6e20 656e 756d 6572  lement in enumer
+0000d040: 6174 6528 7365 6c66 2e63 6f6d 706f 6e65  ate(self.compone
+0000d050: 6e74 7329 3a0a 2020 2020 2020 2020 2020  nts):.          
+0000d060: 2020 6966 2065 6c65 6d65 6e74 2069 7320    if element is 
+0000d070: 636f 6d70 6f6e 656e 743a 0a20 2020 2020  component:.     
+0000d080: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000d090: 6e20 690a 2020 2020 2020 2020 656c 7365  n i.        else
+0000d0a0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+0000d0b0: 6973 6520 5661 6c75 6545 7272 6f72 2866  ise ValueError(f
+0000d0c0: 2263 6f6d 706f 6e65 6e74 207b 636f 6d70  "component {comp
+0000d0d0: 6f6e 656e 7421 727d 206e 6f74 2069 6e20  onent!r} not in 
+0000d0e0: 636f 6e74 6169 6e65 7220 7b73 656c 6621  container {self!
+0000d0f0: 727d 2e22 290a 0a20 2020 2064 6566 2069  r}.")..    def i
+0000d100: 6e73 6572 7428 0a20 2020 2020 2020 2073  nsert(.        s
+0000d110: 656c 662c 2069 3a20 696e 742c 2063 6f6d  elf, i: int, com
+0000d120: 706f 6e65 6e74 3a20 7374 7220 7c20 436f  ponent: str | Co
+0000d130: 6d70 6f6e 656e 742c 202a 2c20 6c61 6e67  mponent, *, lang
+0000d140: 7561 6765 3a20 7374 7220 3d20 2265 6e67  uage: str = "eng
+0000d150: 6c69 7368 220a 2020 2020 2920 2d3e 204e  lish".    ) -> N
+0000d160: 6f6e 653a 0a20 2020 2020 2020 2072 2222  one:.        r""
+0000d170: 220a 2020 2020 2020 2020 496e 7365 7274  ".        Insert
+0000d180: 7320 6060 636f 6d70 6f6e 656e 7460 6020  s ``component`` 
+0000d190: 6174 2069 6e64 6578 2060 6069 6060 2069  at index ``i`` i
+0000d1a0: 6e20 636f 6e74 6169 6e65 722e 0a0a 2020  n container...  
+0000d1b0: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
+0000d1c0: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
+0000d1d0: 2020 2020 2020 2020 2020 2049 6e73 6572             Inser
+0000d1e0: 7473 206e 6f74 652e 0a0a 2020 2020 2020  ts note...      
+0000d1f0: 2020 2020 2020 3e3e 3e20 636f 6e74 6169        >>> contai
+0000d200: 6e65 7220 3d20 6162 6a61 642e 436f 6e74  ner = abjad.Cont
+0000d210: 6169 6e65 7228 5b5d 290a 2020 2020 2020  ainer([]).      
+0000d220: 2020 2020 2020 3e3e 3e20 636f 6e74 6169        >>> contai
+0000d230: 6e65 722e 6578 7465 6e64 2822 6673 3136  ner.extend("fs16
+0000d240: 2063 7327 2065 2720 6127 2229 0a20 2020   cs' e' a'").   
+0000d250: 2020 2020 2020 2020 203e 3e3e 2063 6f6e           >>> con
+0000d260: 7461 696e 6572 2e65 7874 656e 6428 2263  tainer.extend("c
+0000d270: 7327 2731 3620 6527 2720 6373 2727 2061  s''16 e'' cs'' a
+0000d280: 2722 290a 2020 2020 2020 2020 2020 2020  '").            
+0000d290: 3e3e 3e20 636f 6e74 6169 6e65 722e 6578  >>> container.ex
+0000d2a0: 7465 6e64 2822 6673 2731 3620 6527 2063  tend("fs'16 e' c
+0000d2b0: 7327 2066 7322 290a 2020 2020 2020 2020  s' fs").        
+0000d2c0: 2020 2020 3e3e 3e20 7374 6172 745f 736c      >>> start_sl
+0000d2d0: 7572 203d 2061 626a 6164 2e53 7461 7274  ur = abjad.Start
+0000d2e0: 536c 7572 2829 0a20 2020 2020 2020 2020  Slur().         
+0000d2f0: 2020 203e 3e3e 2061 626a 6164 2e73 6c75     >>> abjad.slu
+0000d300: 7228 636f 6e74 6169 6e65 725b 3a5d 2c20  r(container[:], 
+0000d310: 6469 7265 6374 696f 6e3d 6162 6a61 642e  direction=abjad.
+0000d320: 444f 574e 2c20 7374 6172 745f 736c 7572  DOWN, start_slur
+0000d330: 3d73 7461 7274 5f73 6c75 7229 0a20 2020  =start_slur).   
+0000d340: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
+0000d350: 6164 2e73 686f 7728 636f 6e74 6169 6e65  ad.show(containe
+0000d360: 7229 2023 2064 6f63 7465 7374 3a20 2b53  r) # doctest: +S
+0000d370: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
+0000d380: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
+0000d390: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+0000d3a0: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
+0000d3b0: 6c69 6c79 706f 6e64 2863 6f6e 7461 696e  lilypond(contain
+0000d3c0: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
+0000d3d0: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+0000d3e0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+0000d3f0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+0000d400: 2020 2020 2020 2020 2020 2020 6673 3136              fs16
+0000d410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d420: 2020 2020 205f 2028 0a20 2020 2020 2020       _ (.       
+0000d430: 2020 2020 2020 2020 2020 2020 2063 7327               cs'
+0000d440: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
+0000d450: 2020 2020 2020 2065 2731 360a 2020 2020         e'16.    
+0000d460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d470: 6127 3136 0a20 2020 2020 2020 2020 2020  a'16.           
+0000d480: 2020 2020 2020 2020 2063 7327 2731 360a           cs''16.
+0000d490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d4a0: 2020 2020 6527 2731 360a 2020 2020 2020      e''16.      
+0000d4b0: 2020 2020 2020 2020 2020 2020 2020 6373                cs
+0000d4c0: 2727 3136 0a20 2020 2020 2020 2020 2020  ''16.           
+0000d4d0: 2020 2020 2020 2020 2061 2731 360a 2020           a'16.  
+0000d4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d4f0: 2020 6673 2731 360a 2020 2020 2020 2020    fs'16.        
+0000d500: 2020 2020 2020 2020 2020 2020 6527 3136              e'16
+0000d510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d520: 2020 2020 2063 7327 3136 0a20 2020 2020       cs'16.     
+0000d530: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0000d540: 7331 360a 2020 2020 2020 2020 2020 2020  s16.            
+0000d550: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000d560: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+0000d570: 2020 2020 2020 2020 203e 3e3e 2063 6f6e           >>> con
+0000d580: 7461 696e 6572 2e69 6e73 6572 7428 2d34  tainer.insert(-4
+0000d590: 2c20 6162 6a61 642e 4e6f 7465 2822 6527  , abjad.Note("e'
+0000d5a0: 3422 2929 0a20 2020 2020 2020 2020 2020  4")).           
+0000d5b0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+0000d5c0: 636f 6e74 6169 6e65 7229 2023 2064 6f63  container) # doc
+0000d5d0: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
+0000d5e0: 2020 2020 2020 2020 202e 2e20 2064 6f63           ..  doc
+0000d5f0: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
+0000d600: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+0000d610: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+0000d620: 2863 6f6e 7461 696e 6572 290a 2020 2020  (container).    
+0000d630: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0000d640: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
+0000d650: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+0000d660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d670: 2020 2020 6673 3136 0a20 2020 2020 2020      fs16.       
+0000d680: 2020 2020 2020 2020 2020 2020 205f 2028               _ (
+0000d690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d6a0: 2020 2020 2063 7327 3136 0a20 2020 2020       cs'16.     
+0000d6b0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000d6c0: 2731 360a 2020 2020 2020 2020 2020 2020  '16.            
+0000d6d0: 2020 2020 2020 2020 6127 3136 0a20 2020          a'16.   
+0000d6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d6f0: 2063 7327 2731 360a 2020 2020 2020 2020   cs''16.        
+0000d700: 2020 2020 2020 2020 2020 2020 6527 2731              e''1
+0000d710: 360a 2020 2020 2020 2020 2020 2020 2020  6.              
+0000d720: 2020 2020 2020 6373 2727 3136 0a20 2020        cs''16.   
+0000d730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d740: 2061 2731 360a 2020 2020 2020 2020 2020   a'16.          
+0000d750: 2020 2020 2020 2020 2020 6527 340a 2020            e'4.  
+0000d760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d770: 2020 6673 2731 360a 2020 2020 2020 2020    fs'16.        
+0000d780: 2020 2020 2020 2020 2020 2020 6527 3136              e'16
+0000d790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d7a0: 2020 2020 2063 7327 3136 0a20 2020 2020       cs'16.     
+0000d7b0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0000d7c0: 7331 360a 2020 2020 2020 2020 2020 2020  s16.            
+0000d7d0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000d7e0: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+0000d7f0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000d800: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
+0000d810: 6365 2869 2c20 696e 7429 0a20 2020 2020  ce(i, int).     
+0000d820: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0000d830: 2863 6f6d 706f 6e65 6e74 2c20 7374 7229  (component, str)
+0000d840: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+0000d850: 6c65 6374 696f 6e20 3d20 7365 6c66 2e5f  lection = self._
+0000d860: 7061 7273 655f 7374 7269 6e67 2863 6f6d  parse_string(com
+0000d870: 706f 6e65 6e74 2c20 6c61 6e67 7561 6765  ponent, language
+0000d880: 3d6c 616e 6775 6167 6529 0a20 2020 2020  =language).     
+0000d890: 2020 2020 2020 2061 7373 6572 7420 6c65         assert le
+0000d8a0: 6e28 7365 6c65 6374 696f 6e29 203d 3d20  n(selection) == 
+0000d8b0: 312c 2072 6570 7228 7365 6c65 6374 696f  1, repr(selectio
+0000d8c0: 6e29 0a20 2020 2020 2020 2020 2020 2063  n).            c
+0000d8d0: 6f6d 706f 6e65 6e74 203d 2073 656c 6563  omponent = selec
+0000d8e0: 7469 6f6e 5b30 5d0a 2020 2020 2020 2020  tion[0].        
+0000d8f0: 6173 7365 7274 2069 7369 6e73 7461 6e63  assert isinstanc
+0000d900: 6528 636f 6d70 6f6e 656e 742c 2043 6f6d  e(component, Com
+0000d910: 706f 6e65 6e74 292c 2072 6570 7228 636f  ponent), repr(co
+0000d920: 6d70 6f6e 656e 7429 0a20 2020 2020 2020  mponent).       
+0000d930: 2073 656c 662e 5f5f 7365 7469 7465 6d5f   self.__setitem_
+0000d940: 5f28 736c 6963 6528 692c 2069 292c 205b  _(slice(i, i), [
+0000d950: 636f 6d70 6f6e 656e 745d 290a 2020 2020  component]).    
+0000d960: 2020 2020 7265 7475 726e 0a0a 2020 2020      return..    
+0000d970: 6465 6620 706f 7028 7365 6c66 2c20 693a  def pop(self, i:
+0000d980: 2069 6e74 203d 202d 3129 202d 3e20 436f   int = -1) -> Co
+0000d990: 6d70 6f6e 656e 743a 0a20 2020 2020 2020  mponent:.       
+0000d9a0: 2072 2222 220a 2020 2020 2020 2020 506f   r""".        Po
+0000d9b0: 7073 2063 6f6d 706f 6e65 6e74 2066 726f  ps component fro
+0000d9c0: 6d20 636f 6e74 6169 6e65 7220 6174 2069  m container at i
+0000d9d0: 6e64 6578 2060 6069 6060 2e0a 0a20 2020  ndex ``i``...   
+0000d9e0: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
+0000d9f0: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+0000da00: 2020 2020 2020 2020 2020 506f 7073 206c            Pops l
+0000da10: 6173 7420 656c 656d 656e 7420 6672 6f6d  ast element from
+0000da20: 2063 6f6e 7461 696e 6572 3a0a 0a20 2020   container:..   
+0000da30: 2020 2020 2020 2020 203e 3e3e 2063 6f6e           >>> con
+0000da40: 7461 696e 6572 203d 2061 626a 6164 2e43  tainer = abjad.C
+0000da50: 6f6e 7461 696e 6572 2822 6327 3420 2820  ontainer("c'4 ( 
+0000da60: 6427 3420 6627 3420 2920 6527 3422 290a  d'4 f'4 ) e'4").
+0000da70: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0000da80: 6162 6a61 642e 7368 6f77 2863 6f6e 7461  abjad.show(conta
+0000da90: 696e 6572 2920 2320 646f 6374 6573 743a  iner) # doctest:
+0000daa0: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0000dab0: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
+0000dac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dad0: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+0000dae0: 6164 2e6c 696c 7970 6f6e 6428 636f 6e74  ad.lilypond(cont
+0000daf0: 6169 6e65 7229 0a20 2020 2020 2020 2020  ainer).         
+0000db00: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+0000db10: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+0000db20: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+0000db30: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000db40: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+0000db50: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
+0000db60: 2020 2020 2020 2020 2020 2020 2064 2734               d'4
+0000db70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000db80: 2020 2020 2066 2734 0a20 2020 2020 2020       f'4.       
+0000db90: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
+0000dba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000dbb0: 2020 2065 2734 0a20 2020 2020 2020 2020     e'4.         
-0000dbc0: 2020 2020 2020 2066 2734 0a20 2020 2020         f'4.     
-0000dbd0: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
-0000dbe0: 2020 4c69 6c79 506f 6e64 2070 6f73 6974    LilyPond posit
-0000dbf0: 696f 6e73 2061 6674 6572 2067 7261 6365  ions after grace
-0000dc00: 206e 6f74 6573 2061 7420 6120 706f 696e   notes at a poin
-0000dc10: 7420 332f 3420 6f66 2074 6865 2077 6179  t 3/4 of the way
-0000dc20: 0a20 2020 2020 2020 2061 6674 6572 2074  .        after t
-0000dc30: 6865 206e 6f74 6520 7468 6579 2066 6f6c  he note they fol
-0000dc40: 6c6f 772e 2054 6865 2072 6573 756c 7469  low. The resulti
-0000dc50: 6e67 2073 7061 6369 6e67 2069 7320 7573  ng spacing is us
-0000dc60: 7561 6c6c 7920 746f 6f0a 2020 2020 2020  ually too.      
-0000dc70: 2020 6c6f 6f73 652e 0a0a 2020 2020 2020    loose...      
-0000dc80: 2020 4375 7374 6f6d 697a 6520 6060 6166    Customize ``af
-0000dc90: 7465 7247 7261 6365 4672 6163 7469 6f6e  terGraceFraction
-0000dca0: 6060 2061 7320 7368 6f77 6e20 6162 6f76  `` as shown abov
-0000dcb0: 652e 0a0a 2020 2020 4166 7465 7220 6772  e...    After gr
-0000dcc0: 6163 6520 6e6f 7465 7320 6172 6520 706c  ace notes are pl
-0000dcd0: 6179 6564 2069 6e20 7468 6520 6c61 7374  ayed in the last
-0000dce0: 206d 6f6d 656e 7473 206f 6620 6475 7261   moments of dura
-0000dcf0: 7469 6f6e 206f 6620 7468 6520 6e6f 7465  tion of the note
-0000dd00: 0a20 2020 2074 6865 7920 666f 6c6c 6f77  .    they follow
-0000dd10: 2e0a 0a20 2020 2055 7365 2061 6674 6572  ...    Use after
-0000dd20: 2067 7261 6365 206e 6f74 6573 2077 6865   grace notes whe
-0000dd30: 6e20 796f 7520 6e65 6564 2074 6f20 656e  n you need to en
-0000dd40: 6420 6120 7069 6563 6520 6f66 206d 7573  d a piece of mus
-0000dd50: 6963 2077 6974 6820 6772 6163 650a 2020  ic with grace.  
-0000dd60: 2020 6e6f 7465 732e 0a0a 2020 2020 4669    notes...    Fi
-0000dd70: 6c6c 2067 7261 6365 2063 6f6e 7461 696e  ll grace contain
-0000dd80: 6572 7320 7769 7468 206e 6f74 6573 2c20  ers with notes, 
-0000dd90: 7265 7374 7320 6f72 2063 686f 7264 732e  rests or chords.
-0000dda0: 0a0a 2020 2020 4174 7461 6368 2061 6674  ..    Attach aft
-0000ddb0: 6572 2067 7261 6365 2063 6f6e 7461 696e  er grace contain
-0000ddc0: 6572 7320 746f 206e 6f74 6573 2c20 7265  ers to notes, re
-0000ddd0: 7374 7320 6f72 2063 686f 7264 732e 0a0a  sts or chords...
-0000dde0: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-0000ddf0: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-0000de00: 2020 2020 2052 4547 5245 5353 494f 4e2e       REGRESSION.
-0000de10: 2041 6674 6572 2067 7261 6365 2063 6f6e   After grace con
-0000de20: 7461 696e 6572 7320 666f 726d 6174 2063  tainers format c
-0000de30: 6f72 7265 6374 6c79 2077 6974 6820 6d61  orrectly with ma
-0000de40: 696e 206e 6f74 650a 2020 2020 2020 2020  in note.        
-0000de50: 6172 7469 6375 6c61 7469 6f6e 7320 616e  articulations an
-0000de60: 6420 6d61 726b 7570 3a0a 0a20 2020 2020  d markup:..     
-0000de70: 2020 203e 3e3e 2076 6f69 6365 203d 2061     >>> voice = a
-0000de80: 626a 6164 2e56 6f69 6365 2822 6327 3420  bjad.Voice("c'4 
-0000de90: 6427 3420 6527 3420 6627 3422 290a 2020  d'4 e'4 f'4").  
-0000dea0: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-0000deb0: 203d 2027 2328 6465 6669 6e65 2061 6674   = '#(define aft
-0000dec0: 6572 4772 6163 6546 7261 6374 696f 6e20  erGraceFraction 
-0000ded0: 2863 6f6e 7320 3135 2031 3629 2927 0a20  (cons 15 16))'. 
-0000dee0: 2020 2020 2020 203e 3e3e 206c 6974 6572         >>> liter
-0000def0: 616c 203d 2061 626a 6164 2e4c 696c 7950  al = abjad.LilyP
-0000df00: 6f6e 644c 6974 6572 616c 2873 7472 696e  ondLiteral(strin
-0000df10: 6729 0a20 2020 2020 2020 203e 3e3e 2061  g).        >>> a
-0000df20: 626a 6164 2e61 7474 6163 6828 6c69 7465  bjad.attach(lite
-0000df30: 7261 6c2c 2076 6f69 6365 5b30 5d29 0a20  ral, voice[0]). 
-0000df40: 2020 2020 2020 203e 3e3e 2061 6674 6572         >>> after
-0000df50: 5f67 7261 6365 5f63 6f6e 7461 696e 6572  _grace_container
-0000df60: 203d 2061 626a 6164 2e41 6674 6572 4772   = abjad.AfterGr
-0000df70: 6163 6543 6f6e 7461 696e 6572 2822 6327  aceContainer("c'
-0000df80: 3136 2064 2731 3622 290a 2020 2020 2020  16 d'16").      
-0000df90: 2020 3e3e 3e20 6162 6a61 642e 6174 7461    >>> abjad.atta
-0000dfa0: 6368 2861 6674 6572 5f67 7261 6365 5f63  ch(after_grace_c
-0000dfb0: 6f6e 7461 696e 6572 2c20 766f 6963 655b  ontainer, voice[
-0000dfc0: 315d 290a 2020 2020 2020 2020 3e3e 3e20  1]).        >>> 
-0000dfd0: 6c65 6176 6573 203d 2061 626a 6164 2e73  leaves = abjad.s
-0000dfe0: 656c 6563 742e 6c65 6176 6573 2876 6f69  elect.leaves(voi
-0000dff0: 6365 2c20 6772 6163 653d 4e6f 6e65 290a  ce, grace=None).
-0000e000: 2020 2020 2020 2020 3e3e 3e20 6d61 726b          >>> mark
-0000e010: 7570 203d 2061 626a 6164 2e4d 6172 6b75  up = abjad.Marku
-0000e020: 7028 7227 5c6d 6172 6b75 7020 416c 6c65  p(r'\markup Alle
-0000e030: 6772 6f27 290a 2020 2020 2020 2020 3e3e  gro').        >>
-0000e040: 3e20 6162 6a61 642e 6174 7461 6368 286d  > abjad.attach(m
-0000e050: 6172 6b75 702c 206c 6561 7665 735b 315d  arkup, leaves[1]
-0000e060: 2c20 6469 7265 6374 696f 6e3d 6162 6a61  , direction=abja
-0000e070: 642e 5550 290a 2020 2020 2020 2020 3e3e  d.UP).        >>
-0000e080: 3e20 6162 6a61 642e 6174 7461 6368 2861  > abjad.attach(a
-0000e090: 626a 6164 2e41 7274 6963 756c 6174 696f  bjad.Articulatio
-0000e0a0: 6e28 222e 2229 2c20 6c65 6176 6573 5b31  n("."), leaves[1
-0000e0b0: 5d29 0a20 2020 2020 2020 203e 3e3e 2061  ]).        >>> a
-0000e0c0: 626a 6164 2e73 686f 7728 766f 6963 6529  bjad.show(voice)
-0000e0d0: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
-0000e0e0: 500a 0a20 2020 2020 2020 202e 2e20 2064  P..        ..  d
-0000e0f0: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
-0000e100: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0000e110: 6162 6a61 642e 6c69 6c79 706f 6e64 2876  abjad.lilypond(v
-0000e120: 6f69 6365 290a 2020 2020 2020 2020 2020  oice).          
-0000e130: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
-0000e140: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-0000e150: 5c6e 6577 2056 6f69 6365 0a20 2020 2020  \new Voice.     
-0000e160: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-0000e170: 2020 2020 2020 2020 2023 2864 6566 696e           #(defin
-0000e180: 6520 6166 7465 7247 7261 6365 4672 6163  e afterGraceFrac
-0000e190: 7469 6f6e 2028 636f 6e73 2031 3520 3136  tion (cons 15 16
-0000e1a0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-0000e1b0: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
-0000e1c0: 2020 2020 2020 205c 6166 7465 7247 7261         \afterGra
-0000e1d0: 6365 0a20 2020 2020 2020 2020 2020 2020  ce.             
-0000e1e0: 2020 2064 2734 0a20 2020 2020 2020 2020     d'4.         
-0000e1f0: 2020 2020 2020 202d 205c 7374 6163 6361         - \stacca
-0000e200: 746f 0a20 2020 2020 2020 2020 2020 2020  to.             
-0000e210: 2020 205e 205c 6d61 726b 7570 2041 6c6c     ^ \markup All
-0000e220: 6567 726f 0a20 2020 2020 2020 2020 2020  egro.           
-0000e230: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-0000e240: 2020 2020 2020 2020 2020 2063 2731 360a             c'16.
-0000e250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e260: 2020 2020 6427 3136 0a20 2020 2020 2020      d'16.       
-0000e270: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-0000e280: 2020 2020 2020 2020 2020 2065 2734 0a20             e'4. 
-0000e290: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0000e2a0: 2734 0a20 2020 2020 2020 2020 2020 207d  '4.            }
-0000e2b0: 0a0a 2020 2020 2e2e 2020 636f 6e74 6169  ..    ..  contai
-0000e2c0: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-0000e2d0: 2020 2020 2020 2052 4547 5245 5353 494f         REGRESSIO
-0000e2e0: 4e20 2331 3037 342e 2041 6674 6572 2067  N #1074. After g
-0000e2f0: 7261 6365 2063 6f6e 7461 696e 6572 7320  race containers 
-0000e300: 666f 726d 6174 2063 6f72 7265 6374 6c79  format correctly
-0000e310: 2077 6974 6820 6368 6f72 6473 0a20 2020   with chords.   
-0000e320: 2020 2020 2061 6e64 206f 7665 7272 6964       and overrid
-0000e330: 6573 2e20 4974 2069 7320 696d 706f 7274  es. It is import
-0000e340: 616e 7420 6865 7265 2074 6861 7420 7468  ant here that th
-0000e350: 6520 6060 5c61 6674 6572 4772 6163 6560  e ``\afterGrace`
-0000e360: 6020 636f 6d6d 616e 640a 2020 2020 2020  ` command.      
-0000e370: 2020 6170 7065 6172 206c 6578 6963 616c    appear lexical
-0000e380: 6c79 2061 6674 6572 2074 6865 2060 605c  ly after the ``\
-0000e390: 6f76 6572 7269 6465 6060 2063 6f6d 6d61  override`` comma
-0000e3a0: 6e64 3a0a 0a20 2020 2020 2020 203e 3e3e  nd:..        >>>
-0000e3b0: 2076 6f69 6365 203d 2061 626a 6164 2e56   voice = abjad.V
-0000e3c0: 6f69 6365 2822 6327 3420 3c64 2720 6627  oice("c'4 <d' f'
-0000e3d0: 3e34 2065 2734 2066 2734 2229 0a20 2020  >4 e'4 f'4").   
-0000e3e0: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
-0000e3f0: 3d20 2723 2864 6566 696e 6520 6166 7465  = '#(define afte
-0000e400: 7247 7261 6365 4672 6163 7469 6f6e 2028  rGraceFraction (
-0000e410: 636f 6e73 2031 3520 3136 2929 270a 2020  cons 15 16))'.  
-0000e420: 2020 2020 2020 3e3e 3e20 6c69 7465 7261        >>> litera
-0000e430: 6c20 3d20 6162 6a61 642e 4c69 6c79 506f  l = abjad.LilyPo
-0000e440: 6e64 4c69 7465 7261 6c28 7374 7269 6e67  ndLiteral(string
-0000e450: 290a 2020 2020 2020 2020 3e3e 3e20 6162  ).        >>> ab
-0000e460: 6a61 642e 6174 7461 6368 286c 6974 6572  jad.attach(liter
-0000e470: 616c 2c20 766f 6963 655b 305d 290a 2020  al, voice[0]).  
-0000e480: 2020 2020 2020 3e3e 3e20 6166 7465 725f        >>> after_
-0000e490: 6772 6163 655f 636f 6e74 6169 6e65 7220  grace_container 
-0000e4a0: 3d20 6162 6a61 642e 4166 7465 7247 7261  = abjad.AfterGra
-0000e4b0: 6365 436f 6e74 6169 6e65 7228 2263 2731  ceContainer("c'1
-0000e4c0: 3620 6427 3136 2229 0a20 2020 2020 2020  6 d'16").       
-0000e4d0: 203e 3e3e 2061 626a 6164 2e61 7474 6163   >>> abjad.attac
-0000e4e0: 6828 6166 7465 725f 6772 6163 655f 636f  h(after_grace_co
-0000e4f0: 6e74 6169 6e65 722c 2076 6f69 6365 5b31  ntainer, voice[1
-0000e500: 5d29 0a20 2020 2020 2020 203e 3e3e 2061  ]).        >>> a
-0000e510: 626a 6164 2e6f 7665 7272 6964 6528 766f  bjad.override(vo
-0000e520: 6963 655b 315d 292e 4e6f 7465 4865 6164  ice[1]).NoteHead
-0000e530: 2e63 6f6c 6f72 203d 2022 2372 6564 220a  .color = "#red".
-0000e540: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-0000e550: 642e 7368 6f77 2876 6f69 6365 2920 2320  d.show(voice) # 
-0000e560: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
-0000e570: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-0000e580: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-0000e590: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
-0000e5a0: 6164 2e6c 696c 7970 6f6e 6428 766f 6963  ad.lilypond(voic
-0000e5b0: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-0000e5c0: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
-0000e5d0: 0a20 2020 2020 2020 2020 2020 205c 6e65  .            \ne
-0000e5e0: 7720 566f 6963 650a 2020 2020 2020 2020  w Voice.        
-0000e5f0: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-0000e600: 2020 2020 2020 2328 6465 6669 6e65 2061        #(define a
-0000e610: 6674 6572 4772 6163 6546 7261 6374 696f  fterGraceFractio
-0000e620: 6e20 2863 6f6e 7320 3135 2031 3629 290a  n (cons 15 16)).
-0000e630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e640: 6327 340a 2020 2020 2020 2020 2020 2020  c'4.            
-0000e650: 2020 2020 5c6f 6e63 6520 5c6f 7665 7272      \once \overr
-0000e660: 6964 6520 4e6f 7465 4865 6164 2e63 6f6c  ide NoteHead.col
-0000e670: 6f72 203d 2023 7265 640a 2020 2020 2020  or = #red.      
-0000e680: 2020 2020 2020 2020 2020 5c61 6674 6572            \after
-0000e690: 4772 6163 650a 2020 2020 2020 2020 2020  Grace.          
-0000e6a0: 2020 2020 2020 3c64 2720 6627 3e34 0a20        <d' f'>4. 
-0000e6b0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-0000e6c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000e6d0: 2020 2020 2063 2731 360a 2020 2020 2020       c'16.      
-0000e6e0: 2020 2020 2020 2020 2020 2020 2020 6427                d'
-0000e6f0: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
-0000e700: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-0000e710: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
-0000e720: 2020 2020 2020 2020 2066 2734 0a20 2020           f'4.   
-0000e730: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
-0000e740: 2222 220a 0a20 2020 2023 2323 2043 4c41  """..    ### CLA
-0000e750: 5353 2056 4152 4941 424c 4553 2023 2323  SS VARIABLES ###
-0000e760: 0a0a 2020 2020 5f5f 646f 6375 6d65 6e74  ..    __document
-0000e770: 6174 696f 6e5f 7365 6374 696f 6e5f 5f20  ation_section__ 
-0000e780: 3d20 2243 6f6e 7461 696e 6572 7322 0a0a  = "Containers"..
-0000e790: 2020 2020 5f5f 736c 6f74 735f 5f20 3d20      __slots__ = 
-0000e7a0: 2822 5f6d 6169 6e5f 6c65 6166 222c 290a  ("_main_leaf",).
-0000e7b0: 0a20 2020 2023 2323 2049 4e49 5449 414c  .    ### INITIAL
-0000e7c0: 495a 4552 2023 2323 0a0a 2020 2020 6465  IZER ###..    de
-0000e7d0: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
-0000e7e0: 2020 2020 7365 6c66 2c20 636f 6d70 6f6e      self, compon
-0000e7f0: 656e 7473 3d4e 6f6e 652c 202a 2c20 6c61  ents=None, *, la
-0000e800: 6e67 7561 6765 3a20 7374 7220 3d20 2265  nguage: str = "e
-0000e810: 6e67 6c69 7368 222c 2074 6167 3a20 5f74  nglish", tag: _t
-0000e820: 6167 2e54 6167 203d 204e 6f6e 650a 2020  ag.Tag = None.  
-0000e830: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0000e840: 2020 2020 2023 205f 6d61 696e 5f6c 6561       # _main_lea
-0000e850: 6620 6d75 7374 2062 6520 696e 6974 6961  f must be initia
-0000e860: 6c69 7a65 6420 6265 666f 7265 2063 6f6e  lized before con
-0000e870: 7461 696e 6572 2069 6e69 7469 616c 697a  tainer initializ
-0000e880: 6174 696f 6e0a 2020 2020 2020 2020 7365  ation.        se
-0000e890: 6c66 2e5f 6d61 696e 5f6c 6561 6620 3d20  lf._main_leaf = 
-0000e8a0: 4e6f 6e65 0a20 2020 2020 2020 2043 6f6e  None.        Con
-0000e8b0: 7461 696e 6572 2e5f 5f69 6e69 745f 5f28  tainer.__init__(
-0000e8c0: 7365 6c66 2c20 636f 6d70 6f6e 656e 7473  self, components
-0000e8d0: 2c20 6c61 6e67 7561 6765 3d6c 616e 6775  , language=langu
-0000e8e0: 6167 652c 2074 6167 3d74 6167 290a 0a20  age, tag=tag).. 
-0000e8f0: 2020 2023 2323 2053 5045 4349 414c 204d     ### SPECIAL M
-0000e900: 4554 484f 4453 2023 2323 0a0a 2020 2020  ETHODS ###..    
-0000e910: 6465 6620 5f5f 6765 746e 6577 6172 6773  def __getnewargs
-0000e920: 5f5f 2873 656c 6629 3a0a 2020 2020 2020  __(self):.      
-0000e930: 2020 2222 220a 2020 2020 2020 2020 4765    """.        Ge
-0000e940: 7473 206e 6577 2061 6674 6572 2067 7261  ts new after gra
-0000e950: 6365 2063 6f6e 7461 696e 6572 2061 7267  ce container arg
-0000e960: 756d 656e 7473 2e0a 0a20 2020 2020 2020  uments...       
-0000e970: 2052 6574 7572 6e73 2074 7570 6c65 206f   Returns tuple o
-0000e980: 6620 7369 6e67 6c65 2065 6d70 7479 206c  f single empty l
-0000e990: 6973 742e 0a20 2020 2020 2020 2022 2222  ist..        """
-0000e9a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000e9b0: 285b 5d2c 290a 0a20 2020 2023 2323 2050  ([],)..    ### P
-0000e9c0: 5249 5641 5445 204d 4554 484f 4453 2023  RIVATE METHODS #
-0000e9d0: 2323 0a0a 2020 2020 6465 6620 5f61 7474  ##..    def _att
-0000e9e0: 6163 6828 7365 6c66 2c20 6c65 6166 293a  ach(self, leaf):
-0000e9f0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-0000ea00: 6861 7361 7474 7228 6c65 6166 2c20 2277  hasattr(leaf, "w
-0000ea10: 7269 7474 656e 5f64 7572 6174 696f 6e22  ritten_duration"
-0000ea20: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-0000ea30: 6169 7365 2054 7970 6545 7272 6f72 2866  aise TypeError(f
-0000ea40: 226d 7573 7420 6174 7461 6368 2074 6f20  "must attach to 
-0000ea50: 6c65 6166 2028 6e6f 7420 7b6c 6561 6621  leaf (not {leaf!
-0000ea60: 727d 292e 2229 0a20 2020 2020 2020 206c  r}).").        l
-0000ea70: 6561 662e 5f61 6674 6572 5f67 7261 6365  eaf._after_grace
-0000ea80: 5f63 6f6e 7461 696e 6572 203d 2073 656c  _container = sel
-0000ea90: 660a 2020 2020 2020 2020 7365 6c66 2e5f  f.        self._
-0000eaa0: 6d61 696e 5f6c 6561 6620 3d20 6c65 6166  main_leaf = leaf
-0000eab0: 0a0a 2020 2020 6465 6620 5f64 6574 6163  ..    def _detac
-0000eac0: 6828 7365 6c66 293a 0a20 2020 2020 2020  h(self):.       
-0000ead0: 2069 6620 7365 6c66 2e5f 6d61 696e 5f6c   if self._main_l
-0000eae0: 6561 6620 6973 206e 6f74 204e 6f6e 653a  eaf is not None:
-0000eaf0: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
-0000eb00: 6e5f 6c65 6166 203d 2073 656c 662e 5f6d  n_leaf = self._m
-0000eb10: 6169 6e5f 6c65 6166 0a20 2020 2020 2020  ain_leaf.       
-0000eb20: 2020 2020 206d 6169 6e5f 6c65 6166 2e5f       main_leaf._
-0000eb30: 6166 7465 725f 6772 6163 655f 636f 6e74  after_grace_cont
-0000eb40: 6169 6e65 7220 3d20 4e6f 6e65 0a20 2020  ainer = None.   
-0000eb50: 2020 2020 2020 2020 2073 656c 662e 5f6d           self._m
-0000eb60: 6169 6e5f 6c65 6166 203d 204e 6f6e 650a  ain_leaf = None.
-0000eb70: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000eb80: 656c 660a 0a20 2020 2064 6566 205f 666f  elf..    def _fo
-0000eb90: 726d 6174 5f6f 7065 6e5f 6272 6163 6b65  rmat_open_bracke
-0000eba0: 7473 5f73 6974 6528 7365 6c66 2c20 636f  ts_site(self, co
-0000ebb0: 6e74 7269 6275 7469 6f6e 7329 3a0a 2020  ntributions):.  
-0000ebc0: 2020 2020 2020 7265 7375 6c74 203d 205b        result = [
-0000ebd0: 5d0a 2020 2020 2020 2020 7265 7375 6c74  ].        result
-0000ebe0: 2e65 7874 656e 6428 5b22 7b22 5d29 0a20  .extend(["{"]). 
-0000ebf0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-0000ec00: 7375 6c74 0a0a 0a63 6c61 7373 2042 6566  sult...class Bef
-0000ec10: 6f72 6547 7261 6365 436f 6e74 6169 6e65  oreGraceContaine
-0000ec20: 7228 436f 6e74 6169 6e65 7229 3a0a 2020  r(Container):.  
-0000ec30: 2020 7222 2222 0a20 2020 2047 7261 6365    r""".    Grace
-0000ec40: 2063 6f6e 7461 696e 6572 2e0a 0a20 2020   container...   
-0000ec50: 202e 2e20 636f 6e74 6169 6e65 723a 3a20   .. container:: 
-0000ec60: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
-0000ec70: 2047 7261 6365 2063 6f6e 7461 696e 6572   Grace container
-0000ec80: 206d 6f64 656c 7320 4c69 6c79 506f 6e64   models LilyPond
-0000ec90: 2773 2064 6966 6665 7265 6e74 2074 7970  's different typ
-0000eca0: 6573 206f 6620 226c 6566 742d 706f 7369  es of "left-posi
-0000ecb0: 7469 6f6e 6564 220a 2020 2020 2020 2020  tioned".        
-0000ecc0: 6772 6163 6520 6d75 7369 633a 0a0a 2020  grace music:..  
-0000ecd0: 2020 2020 2020 3e3e 3e20 766f 6963 6520        >>> voice 
-0000ece0: 3d20 6162 6a61 642e 566f 6963 6528 2263  = abjad.Voice("c
-0000ecf0: 2734 2064 2734 2065 2734 2066 2734 2229  '4 d'4 e'4 f'4")
-0000ed00: 0a20 2020 2020 2020 203e 3e3e 2063 6f6e  .        >>> con
-0000ed10: 7461 696e 6572 203d 2061 626a 6164 2e42  tainer = abjad.B
-0000ed20: 6566 6f72 6547 7261 6365 436f 6e74 6169  eforeGraceContai
-0000ed30: 6e65 7228 2263 7327 3136 2064 7327 2229  ner("cs'16 ds'")
-0000ed40: 0a20 2020 2020 2020 203e 3e3e 2061 626a  .        >>> abj
-0000ed50: 6164 2e61 7474 6163 6828 636f 6e74 6169  ad.attach(contai
-0000ed60: 6e65 722c 2076 6f69 6365 5b31 5d29 0a20  ner, voice[1]). 
-0000ed70: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-0000ed80: 2e73 686f 7728 766f 6963 6529 2023 2064  .show(voice) # d
-0000ed90: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
-0000eda0: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0000edb0: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-0000edc0: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
-0000edd0: 642e 6c69 6c79 706f 6e64 2876 6f69 6365  d.lilypond(voice
-0000ede0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-0000edf0: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-0000ee00: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
-0000ee10: 2056 6f69 6365 0a20 2020 2020 2020 2020   Voice.         
-0000ee20: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-0000ee30: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
-0000ee40: 2020 2020 2020 2020 205c 6772 6163 6520           \grace 
-0000ee50: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0000ee60: 2020 2020 2020 6373 2731 360a 2020 2020        cs'16.    
-0000ee70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ee80: 6473 2731 360a 2020 2020 2020 2020 2020  ds'16.          
-0000ee90: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0000eea0: 2020 2020 2020 2020 6427 340a 2020 2020          d'4.    
-0000eeb0: 2020 2020 2020 2020 2020 2020 6527 340a              e'4.
-0000eec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eed0: 6627 340a 2020 2020 2020 2020 2020 2020  f'4.            
-0000eee0: 7d0a 0a20 2020 2020 2020 204c 696c 7950  }..        LilyP
-0000eef0: 6f6e 6420 656e 6772 6176 6573 2067 7261  ond engraves gra
-0000ef00: 6365 206d 7573 6963 2061 7420 6120 7265  ce music at a re
-0000ef10: 6475 6365 6420 7369 7a65 2e0a 0a20 2020  duced size...   
-0000ef20: 2020 2020 204c 696c 7950 6f6e 6420 706f       LilyPond po
-0000ef30: 7369 7469 6f6e 7320 6772 6163 6520 6d75  sitions grace mu
-0000ef40: 7369 6320 696d 6d65 6469 6174 656c 7920  sic immediately 
-0000ef50: 6265 666f 7265 2061 2022 6d61 696e 206e  before a "main n
-0000ef60: 6f74 6522 2077 6869 6368 0a20 2020 2020  ote" which.     
-0000ef70: 2020 2066 6f6c 6c6f 7773 2e0a 0a20 2020     follows...   
-0000ef80: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
-0000ef90: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
-0000efa0: 2020 4669 6c6c 2067 7261 6365 2063 6f6e    Fill grace con
-0000efb0: 7461 696e 6572 7320 7769 7468 206e 6f74  tainers with not
-0000efc0: 6573 2c20 7265 7374 7320 6f72 2063 686f  es, rests or cho
-0000efd0: 7264 733a 0a0a 2020 2020 2020 2020 3e3e  rds:..        >>
-0000efe0: 3e20 766f 6963 6520 3d20 6162 6a61 642e  > voice = abjad.
-0000eff0: 566f 6963 6528 2263 2734 2064 2734 2065  Voice("c'4 d'4 e
-0000f000: 2734 2066 2734 2229 0a20 2020 2020 2020  '4 f'4").       
-0000f010: 203e 3e3e 2063 6f6e 7461 696e 6572 203d   >>> container =
-0000f020: 2061 626a 6164 2e42 6566 6f72 6547 7261   abjad.BeforeGra
-0000f030: 6365 436f 6e74 6169 6e65 7228 223c 6373  ceContainer("<cs
-0000f040: 2720 6473 273e 3136 2065 2722 290a 2020  ' ds'>16 e'").  
-0000f050: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-0000f060: 6174 7461 6368 2863 6f6e 7461 696e 6572  attach(container
-0000f070: 2c20 766f 6963 655b 315d 290a 2020 2020  , voice[1]).    
-0000f080: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
-0000f090: 6f77 2876 6f69 6365 2920 2320 646f 6374  ow(voice) # doct
-0000f0a0: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-0000f0b0: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
-0000f0c0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0000f0d0: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
-0000f0e0: 696c 7970 6f6e 6428 766f 6963 6529 0a20  ilypond(voice). 
-0000f0f0: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
-0000f100: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
-0000f110: 2020 2020 2020 2020 205c 6e65 7720 566f           \new Vo
-0000f120: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
-0000f130: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0000f140: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
-0000f150: 2020 2020 2020 5c67 7261 6365 207b 0a20        \grace {. 
-0000f160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f170: 2020 203c 6373 2720 6473 273e 3136 0a20     <cs' ds'>16. 
-0000f180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f190: 2020 2065 2731 360a 2020 2020 2020 2020     e'16.        
-0000f1a0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0000f1b0: 2020 2020 2020 2020 2020 6427 340a 2020            d'4.  
-0000f1c0: 2020 2020 2020 2020 2020 2020 2020 6527                e'
-0000f1d0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0000f1e0: 2020 6627 340a 2020 2020 2020 2020 2020    f'4.          
-0000f1f0: 2020 7d0a 0a20 2020 202e 2e20 2063 6f6e    }..    ..  con
-0000f200: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
-0000f210: 0a0a 2020 2020 2020 2020 4465 7461 6368  ..        Detach
-0000f220: 2067 7261 6365 2063 6f6e 7461 696e 6572   grace container
-0000f230: 7320 6c69 6b65 2074 6869 733a 0a0a 2020  s like this:..  
-0000f240: 2020 2020 2020 3e3e 3e20 766f 6963 6520        >>> voice 
-0000f250: 3d20 6162 6a61 642e 566f 6963 6528 2263  = abjad.Voice("c
-0000f260: 2734 2064 2734 2065 2734 2066 2734 2229  '4 d'4 e'4 f'4")
-0000f270: 0a20 2020 2020 2020 203e 3e3e 2063 6f6e  .        >>> con
-0000f280: 7461 696e 6572 203d 2061 626a 6164 2e42  tainer = abjad.B
-0000f290: 6566 6f72 6547 7261 6365 436f 6e74 6169  eforeGraceContai
-0000f2a0: 6e65 7228 223c 6373 2720 6473 273e 3136  ner("<cs' ds'>16
-0000f2b0: 2065 2722 290a 2020 2020 2020 2020 3e3e   e'").        >>
-0000f2c0: 3e20 6162 6a61 642e 6174 7461 6368 2863  > abjad.attach(c
-0000f2d0: 6f6e 7461 696e 6572 2c20 766f 6963 655b  ontainer, voice[
-0000f2e0: 315d 290a 2020 2020 2020 2020 3e3e 3e20  1]).        >>> 
-0000f2f0: 6162 6a61 642e 7368 6f77 2876 6f69 6365  abjad.show(voice
-0000f300: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-0000f310: 4950 0a0a 2020 2020 2020 2020 2e2e 2020  IP..        ..  
-0000f320: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
-0000f330: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-0000f340: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-0000f350: 766f 6963 6529 0a20 2020 2020 2020 2020  voice).         
-0000f360: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
-0000f370: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
-0000f380: 205c 6e65 7720 566f 6963 650a 2020 2020   \new Voice.    
-0000f390: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0000f3a0: 2020 2020 2020 2020 2020 6327 340a 2020            c'4.  
-0000f3b0: 2020 2020 2020 2020 2020 2020 2020 5c67                \g
-0000f3c0: 7261 6365 207b 0a20 2020 2020 2020 2020  race {.         
-0000f3d0: 2020 2020 2020 2020 2020 203c 6373 2720             <cs' 
-0000f3e0: 6473 273e 3136 0a20 2020 2020 2020 2020  ds'>16.         
-0000f3f0: 2020 2020 2020 2020 2020 2065 2731 360a             e'16.
-0000f400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f410: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
-0000f420: 2020 6427 340a 2020 2020 2020 2020 2020    d'4.          
-0000f430: 2020 2020 2020 6527 340a 2020 2020 2020        e'4.      
-0000f440: 2020 2020 2020 2020 2020 6627 340a 2020            f'4.  
-0000f450: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
-0000f460: 2020 2020 203e 3e3e 2061 626a 6164 2e64       >>> abjad.d
-0000f470: 6574 6163 6828 6162 6a61 642e 4265 666f  etach(abjad.Befo
-0000f480: 7265 4772 6163 6543 6f6e 7461 696e 6572  reGraceContainer
-0000f490: 2c20 766f 6963 655b 315d 290a 2020 2020  , voice[1]).    
-0000f4a0: 2020 2020 2842 6566 6f72 6547 7261 6365      (BeforeGrace
-0000f4b0: 436f 6e74 6169 6e65 7228 223c 6373 2720  Container("<cs' 
-0000f4c0: 6473 273e 3136 2065 2731 3622 292c 290a  ds'>16 e'16"),).
-0000f4d0: 0a20 2020 2020 2020 203e 3e3e 2061 626a  .        >>> abj
-0000f4e0: 6164 2e64 6574 6163 6828 6162 6a61 642e  ad.detach(abjad.
-0000f4f0: 4265 666f 7265 4772 6163 6543 6f6e 7461  BeforeGraceConta
-0000f500: 696e 6572 2c20 766f 6963 655b 315d 290a  iner, voice[1]).
-0000f510: 2020 2020 2020 2020 2829 0a0a 2020 2020          ()..    
-0000f520: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
-0000f530: 6f77 2876 6f69 6365 2920 2320 646f 6374  ow(voice) # doct
-0000f540: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-0000f550: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
-0000f560: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0000f570: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
-0000f580: 696c 7970 6f6e 6428 766f 6963 6529 0a20  ilypond(voice). 
-0000f590: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
-0000f5a0: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
-0000f5b0: 2020 2020 2020 2020 205c 6e65 7720 566f           \new Vo
-0000f5c0: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
-0000f5d0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0000f5e0: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
-0000f5f0: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-0000f600: 2020 2020 2020 2020 2020 6527 340a 2020            e'4.  
-0000f610: 2020 2020 2020 2020 2020 2020 2020 6627                f'
-0000f620: 340a 2020 2020 2020 2020 2020 2020 7d0a  4.            }.
-0000f630: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
-0000f640: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-0000f650: 2020 2020 2020 4d6f 7665 2067 7261 6365        Move grace
-0000f660: 2063 6f6e 7461 696e 6572 7320 6c69 6b65   containers like
-0000f670: 2074 6869 733a 0a0a 2020 2020 2020 2020   this:..        
-0000f680: 3e3e 3e20 766f 6963 6520 3d20 6162 6a61  >>> voice = abja
-0000f690: 642e 566f 6963 6528 2263 2734 2064 2734  d.Voice("c'4 d'4
-0000f6a0: 2065 2734 2066 2734 2229 0a20 2020 2020   e'4 f'4").     
-0000f6b0: 2020 203e 3e3e 2063 6f6e 7461 696e 6572     >>> container
-0000f6c0: 203d 2061 626a 6164 2e42 6566 6f72 6547   = abjad.BeforeG
-0000f6d0: 7261 6365 436f 6e74 6169 6e65 7228 223c  raceContainer("<
-0000f6e0: 6373 2720 6473 273e 3136 2065 2722 290a  cs' ds'>16 e'").
-0000f6f0: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-0000f700: 642e 6174 7461 6368 2863 6f6e 7461 696e  d.attach(contain
-0000f710: 6572 2c20 766f 6963 655b 315d 290a 2020  er, voice[1]).  
-0000f720: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-0000f730: 7368 6f77 2876 6f69 6365 2920 2320 646f  show(voice) # do
-0000f740: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-0000f750: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-0000f760: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0000f770: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-0000f780: 2e6c 696c 7970 6f6e 6428 766f 6963 6529  .lilypond(voice)
-0000f790: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0000f7a0: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
-0000f7b0: 2020 2020 2020 2020 2020 205c 6e65 7720             \new 
-0000f7c0: 566f 6963 650a 2020 2020 2020 2020 2020  Voice.          
-0000f7d0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0000f7e0: 2020 2020 6327 340a 2020 2020 2020 2020      c'4.        
-0000f7f0: 2020 2020 2020 2020 5c67 7261 6365 207b          \grace {
-0000f800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f810: 2020 2020 203c 6373 2720 6473 273e 3136       <cs' ds'>16
+0000dbc0: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
+0000dbd0: 2020 2020 2020 3e3e 3e20 636f 6e74 6169        >>> contai
+0000dbe0: 6e65 722e 706f 7028 290a 2020 2020 2020  ner.pop().      
+0000dbf0: 2020 2020 2020 4e6f 7465 2822 6527 3422        Note("e'4"
+0000dc00: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+0000dc10: 3e20 6162 6a61 642e 7368 6f77 2863 6f6e  > abjad.show(con
+0000dc20: 7461 696e 6572 2920 2320 646f 6374 6573  tainer) # doctes
+0000dc30: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+0000dc40: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
+0000dc50: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000dc60: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
+0000dc70: 626a 6164 2e6c 696c 7970 6f6e 6428 636f  bjad.lilypond(co
+0000dc80: 6e74 6169 6e65 7229 0a20 2020 2020 2020  ntainer).       
+0000dc90: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
+0000dca0: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
+0000dcb0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+0000dcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dcd0: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
+0000dce0: 2020 2020 2020 2020 2028 0a20 2020 2020           (.     
+0000dcf0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0000dd00: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+0000dd10: 2020 2020 2020 2066 2734 0a20 2020 2020         f'4.     
+0000dd20: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000dd30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000dd40: 207d 0a0a 2020 2020 2020 2020 2222 220a   }..        """.
+0000dd50: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+0000dd60: 7369 6e73 7461 6e63 6528 692c 2069 6e74  sinstance(i, int
+0000dd70: 292c 2072 6570 7228 6929 0a20 2020 2020  ), repr(i).     
+0000dd80: 2020 2063 6f6d 706f 6e65 6e74 203d 2073     component = s
+0000dd90: 656c 665b 695d 0a20 2020 2020 2020 2064  elf[i].        d
+0000dda0: 656c 2073 656c 665b 695d 0a20 2020 2020  el self[i].     
+0000ddb0: 2020 2072 6574 7572 6e20 636f 6d70 6f6e     return compon
+0000ddc0: 656e 740a 0a20 2020 2064 6566 2072 656d  ent..    def rem
+0000ddd0: 6f76 6528 7365 6c66 2c20 636f 6d70 6f6e  ove(self, compon
+0000dde0: 656e 743a 2043 6f6d 706f 6e65 6e74 2920  ent: Component) 
+0000ddf0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+0000de00: 2072 2222 220a 2020 2020 2020 2020 5265   r""".        Re
+0000de10: 6d6f 7665 7320 6060 636f 6d70 6f6e 656e  moves ``componen
+0000de20: 7460 6020 6672 6f6d 2063 6f6e 7461 696e  t`` from contain
+0000de30: 6572 2e0a 0a20 2020 2020 2020 202e 2e20  er...        .. 
+0000de40: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
+0000de50: 6d70 6c65 0a0a 2020 2020 2020 2020 2020  mple..          
+0000de60: 2020 5265 6d6f 7665 7320 6e6f 7465 2066    Removes note f
+0000de70: 726f 6d20 636f 6e74 6169 6e65 723a 0a0a  rom container:..
+0000de80: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0000de90: 636f 6e74 6169 6e65 7220 3d20 6162 6a61  container = abja
+0000dea0: 642e 436f 6e74 6169 6e65 7228 2263 2734  d.Container("c'4
+0000deb0: 2064 2734 2066 2734 2065 2734 2229 0a20   d'4 f'4 e'4"). 
+0000dec0: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+0000ded0: 626a 6164 2e73 686f 7728 636f 6e74 6169  bjad.show(contai
+0000dee0: 6e65 7229 2023 2064 6f63 7465 7374 3a20  ner) # doctest: 
+0000def0: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+0000df00: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+0000df10: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+0000df20: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+0000df30: 642e 6c69 6c79 706f 6e64 2863 6f6e 7461  d.lilypond(conta
+0000df40: 696e 6572 290a 2020 2020 2020 2020 2020  iner).          
+0000df50: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+0000df60: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+0000df70: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0000df80: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+0000df90: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0000dfa0: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
+0000dfb0: 2020 2020 2020 2020 2020 2020 2020 6627                f'
+0000dfc0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0000dfd0: 2020 2020 2020 6527 340a 2020 2020 2020        e'4.      
+0000dfe0: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+0000dff0: 2020 2020 2020 2020 203e 3e3e 206e 6f74           >>> not
+0000e000: 6520 3d20 636f 6e74 6169 6e65 725b 325d  e = container[2]
+0000e010: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0000e020: 206e 6f74 650a 2020 2020 2020 2020 2020   note.          
+0000e030: 2020 4e6f 7465 2822 6627 3422 290a 0a20    Note("f'4").. 
+0000e040: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
+0000e050: 6f6e 7461 696e 6572 2e72 656d 6f76 6528  ontainer.remove(
+0000e060: 6e6f 7465 290a 2020 2020 2020 2020 2020  note).          
+0000e070: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+0000e080: 2863 6f6e 7461 696e 6572 2920 2320 646f  (container) # do
+0000e090: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
+0000e0a0: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
+0000e0b0: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
+0000e0c0: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
+0000e0d0: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
+0000e0e0: 6428 636f 6e74 6169 6e65 7229 0a20 2020  d(container).   
+0000e0f0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+0000e100: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
+0000e110: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+0000e120: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e130: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
+0000e140: 2020 2020 2020 2020 2020 2020 2064 2734               d'4
+0000e150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e160: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
+0000e170: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+0000e180: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0000e190: 6173 7365 7274 2069 7369 6e73 7461 6e63  assert isinstanc
+0000e1a0: 6528 636f 6d70 6f6e 656e 742c 2043 6f6d  e(component, Com
+0000e1b0: 706f 6e65 6e74 292c 2072 6570 7228 636f  ponent), repr(co
+0000e1c0: 6d70 6f6e 656e 7429 0a20 2020 2020 2020  mponent).       
+0000e1d0: 2069 203d 2073 656c 662e 696e 6465 7828   i = self.index(
+0000e1e0: 636f 6d70 6f6e 656e 7429 0a20 2020 2020  component).     
+0000e1f0: 2020 2064 656c 2073 656c 665b 695d 0a0a     del self[i]..
+0000e200: 0a63 6c61 7373 2041 6674 6572 4772 6163  .class AfterGrac
+0000e210: 6543 6f6e 7461 696e 6572 2843 6f6e 7461  eContainer(Conta
+0000e220: 696e 6572 293a 0a20 2020 2072 2222 220a  iner):.    r""".
+0000e230: 2020 2020 4166 7465 7220 6772 6163 6520      After grace 
+0000e240: 636f 6e74 6169 6e65 722e 0a0a 2020 2020  container...    
+0000e250: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+0000e260: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+0000e270: 2041 6674 6572 2067 7261 6365 206e 6f74   After grace not
+0000e280: 6573 3a0a 0a20 2020 2020 2020 203e 3e3e  es:..        >>>
+0000e290: 2076 6f69 6365 203d 2061 626a 6164 2e56   voice = abjad.V
+0000e2a0: 6f69 6365 2822 6327 3420 6427 3420 6527  oice("c'4 d'4 e'
+0000e2b0: 3420 6627 3422 290a 2020 2020 2020 2020  4 f'4").        
+0000e2c0: 3e3e 3e20 7374 7269 6e67 203d 2027 2328  >>> string = '#(
+0000e2d0: 6465 6669 6e65 2061 6674 6572 4772 6163  define afterGrac
+0000e2e0: 6546 7261 6374 696f 6e20 2863 6f6e 7320  eFraction (cons 
+0000e2f0: 3135 2031 3629 2927 0a20 2020 2020 2020  15 16))'.       
+0000e300: 203e 3e3e 206c 6974 6572 616c 203d 2061   >>> literal = a
+0000e310: 626a 6164 2e4c 696c 7950 6f6e 644c 6974  bjad.LilyPondLit
+0000e320: 6572 616c 2873 7472 696e 6729 0a20 2020  eral(string).   
+0000e330: 2020 2020 203e 3e3e 2061 626a 6164 2e61       >>> abjad.a
+0000e340: 7474 6163 6828 6c69 7465 7261 6c2c 2076  ttach(literal, v
+0000e350: 6f69 6365 5b30 5d29 0a20 2020 2020 2020  oice[0]).       
+0000e360: 203e 3e3e 206e 6f74 6573 203d 205b 6162   >>> notes = [ab
+0000e370: 6a61 642e 4e6f 7465 2822 6327 3136 2229  jad.Note("c'16")
+0000e380: 2c20 6162 6a61 642e 4e6f 7465 2822 6427  , abjad.Note("d'
+0000e390: 3136 2229 5d0a 2020 2020 2020 2020 3e3e  16")].        >>
+0000e3a0: 3e20 6166 7465 725f 6772 6163 655f 636f  > after_grace_co
+0000e3b0: 6e74 6169 6e65 7220 3d20 6162 6a61 642e  ntainer = abjad.
+0000e3c0: 4166 7465 7247 7261 6365 436f 6e74 6169  AfterGraceContai
+0000e3d0: 6e65 7228 6e6f 7465 7329 0a20 2020 2020  ner(notes).     
+0000e3e0: 2020 203e 3e3e 2061 626a 6164 2e61 7474     >>> abjad.att
+0000e3f0: 6163 6828 6166 7465 725f 6772 6163 655f  ach(after_grace_
+0000e400: 636f 6e74 6169 6e65 722c 2076 6f69 6365  container, voice
+0000e410: 5b31 5d29 0a20 2020 2020 2020 203e 3e3e  [1]).        >>>
+0000e420: 2061 626a 6164 2e73 686f 7728 766f 6963   abjad.show(voic
+0000e430: 6529 2023 2064 6f63 7465 7374 3a20 2b53  e) # doctest: +S
+0000e440: 4b49 500a 0a20 2020 2020 2020 202e 2e20  KIP..        .. 
+0000e450: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
+0000e460: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+0000e470: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+0000e480: 2876 6f69 6365 290a 2020 2020 2020 2020  (voice).        
+0000e490: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+0000e4a0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+0000e4b0: 2020 5c6e 6577 2056 6f69 6365 0a20 2020    \new Voice.   
+0000e4c0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+0000e4d0: 2020 2020 2020 2020 2020 2023 2864 6566             #(def
+0000e4e0: 696e 6520 6166 7465 7247 7261 6365 4672  ine afterGraceFr
+0000e4f0: 6163 7469 6f6e 2028 636f 6e73 2031 3520  action (cons 15 
+0000e500: 3136 2929 0a20 2020 2020 2020 2020 2020  16)).           
+0000e510: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
+0000e520: 2020 2020 2020 2020 205c 6166 7465 7247           \afterG
+0000e530: 7261 6365 0a20 2020 2020 2020 2020 2020  race.           
+0000e540: 2020 2020 2064 2734 0a20 2020 2020 2020       d'4.       
+0000e550: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+0000e560: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000e570: 2731 360a 2020 2020 2020 2020 2020 2020  '16.            
+0000e580: 2020 2020 2020 2020 6427 3136 0a20 2020          d'16.   
+0000e590: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+0000e5a0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000e5b0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+0000e5c0: 2020 2066 2734 0a20 2020 2020 2020 2020     f'4.         
+0000e5d0: 2020 207d 0a0a 2020 2020 2020 2020 4c69     }..        Li
+0000e5e0: 6c79 506f 6e64 2070 6f73 6974 696f 6e73  lyPond positions
+0000e5f0: 2061 6674 6572 2067 7261 6365 206e 6f74   after grace not
+0000e600: 6573 2061 7420 6120 706f 696e 7420 332f  es at a point 3/
+0000e610: 3420 6f66 2074 6865 2077 6179 0a20 2020  4 of the way.   
+0000e620: 2020 2020 2061 6674 6572 2074 6865 206e       after the n
+0000e630: 6f74 6520 7468 6579 2066 6f6c 6c6f 772e  ote they follow.
+0000e640: 2054 6865 2072 6573 756c 7469 6e67 2073   The resulting s
+0000e650: 7061 6369 6e67 2069 7320 7573 7561 6c6c  pacing is usuall
+0000e660: 7920 746f 6f0a 2020 2020 2020 2020 6c6f  y too.        lo
+0000e670: 6f73 652e 0a0a 2020 2020 2020 2020 4375  ose...        Cu
+0000e680: 7374 6f6d 697a 6520 6060 6166 7465 7247  stomize ``afterG
+0000e690: 7261 6365 4672 6163 7469 6f6e 6060 2061  raceFraction`` a
+0000e6a0: 7320 7368 6f77 6e20 6162 6f76 652e 0a0a  s shown above...
+0000e6b0: 2020 2020 4166 7465 7220 6772 6163 6520      After grace 
+0000e6c0: 6e6f 7465 7320 6172 6520 706c 6179 6564  notes are played
+0000e6d0: 2069 6e20 7468 6520 6c61 7374 206d 6f6d   in the last mom
+0000e6e0: 656e 7473 206f 6620 6475 7261 7469 6f6e  ents of duration
+0000e6f0: 206f 6620 7468 6520 6e6f 7465 0a20 2020   of the note.   
+0000e700: 2074 6865 7920 666f 6c6c 6f77 2e0a 0a20   they follow... 
+0000e710: 2020 2055 7365 2061 6674 6572 2067 7261     Use after gra
+0000e720: 6365 206e 6f74 6573 2077 6865 6e20 796f  ce notes when yo
+0000e730: 7520 6e65 6564 2074 6f20 656e 6420 6120  u need to end a 
+0000e740: 7069 6563 6520 6f66 206d 7573 6963 2077  piece of music w
+0000e750: 6974 6820 6772 6163 650a 2020 2020 6e6f  ith grace.    no
+0000e760: 7465 732e 0a0a 2020 2020 4669 6c6c 2067  tes...    Fill g
+0000e770: 7261 6365 2063 6f6e 7461 696e 6572 7320  race containers 
+0000e780: 7769 7468 206e 6f74 6573 2c20 7265 7374  with notes, rest
+0000e790: 7320 6f72 2063 686f 7264 732e 0a0a 2020  s or chords...  
+0000e7a0: 2020 4174 7461 6368 2061 6674 6572 2067    Attach after g
+0000e7b0: 7261 6365 2063 6f6e 7461 696e 6572 7320  race containers 
+0000e7c0: 746f 206e 6f74 6573 2c20 7265 7374 7320  to notes, rests 
+0000e7d0: 6f72 2063 686f 7264 732e 0a0a 2020 2020  or chords...    
+0000e7e0: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+0000e7f0: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+0000e800: 2052 4547 5245 5353 494f 4e2e 2041 6674   REGRESSION. Aft
+0000e810: 6572 2067 7261 6365 2063 6f6e 7461 696e  er grace contain
+0000e820: 6572 7320 666f 726d 6174 2063 6f72 7265  ers format corre
+0000e830: 6374 6c79 2077 6974 6820 6d61 696e 206e  ctly with main n
+0000e840: 6f74 650a 2020 2020 2020 2020 6172 7469  ote.        arti
+0000e850: 6375 6c61 7469 6f6e 7320 616e 6420 6d61  culations and ma
+0000e860: 726b 7570 3a0a 0a20 2020 2020 2020 203e  rkup:..        >
+0000e870: 3e3e 2076 6f69 6365 203d 2061 626a 6164  >> voice = abjad
+0000e880: 2e56 6f69 6365 2822 6327 3420 6427 3420  .Voice("c'4 d'4 
+0000e890: 6527 3420 6627 3422 290a 2020 2020 2020  e'4 f'4").      
+0000e8a0: 2020 3e3e 3e20 7374 7269 6e67 203d 2027    >>> string = '
+0000e8b0: 2328 6465 6669 6e65 2061 6674 6572 4772  #(define afterGr
+0000e8c0: 6163 6546 7261 6374 696f 6e20 2863 6f6e  aceFraction (con
+0000e8d0: 7320 3135 2031 3629 2927 0a20 2020 2020  s 15 16))'.     
+0000e8e0: 2020 203e 3e3e 206c 6974 6572 616c 203d     >>> literal =
+0000e8f0: 2061 626a 6164 2e4c 696c 7950 6f6e 644c   abjad.LilyPondL
+0000e900: 6974 6572 616c 2873 7472 696e 6729 0a20  iteral(string). 
+0000e910: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0000e920: 2e61 7474 6163 6828 6c69 7465 7261 6c2c  .attach(literal,
+0000e930: 2076 6f69 6365 5b30 5d29 0a20 2020 2020   voice[0]).     
+0000e940: 2020 203e 3e3e 2061 6674 6572 5f67 7261     >>> after_gra
+0000e950: 6365 5f63 6f6e 7461 696e 6572 203d 2061  ce_container = a
+0000e960: 626a 6164 2e41 6674 6572 4772 6163 6543  bjad.AfterGraceC
+0000e970: 6f6e 7461 696e 6572 2822 6327 3136 2064  ontainer("c'16 d
+0000e980: 2731 3622 290a 2020 2020 2020 2020 3e3e  '16").        >>
+0000e990: 3e20 6162 6a61 642e 6174 7461 6368 2861  > abjad.attach(a
+0000e9a0: 6674 6572 5f67 7261 6365 5f63 6f6e 7461  fter_grace_conta
+0000e9b0: 696e 6572 2c20 766f 6963 655b 315d 290a  iner, voice[1]).
+0000e9c0: 2020 2020 2020 2020 3e3e 3e20 6c65 6176          >>> leav
+0000e9d0: 6573 203d 2061 626a 6164 2e73 656c 6563  es = abjad.selec
+0000e9e0: 742e 6c65 6176 6573 2876 6f69 6365 2c20  t.leaves(voice, 
+0000e9f0: 6772 6163 653d 4e6f 6e65 290a 2020 2020  grace=None).    
+0000ea00: 2020 2020 3e3e 3e20 6d61 726b 7570 203d      >>> markup =
+0000ea10: 2061 626a 6164 2e4d 6172 6b75 7028 7227   abjad.Markup(r'
+0000ea20: 5c6d 6172 6b75 7020 416c 6c65 6772 6f27  \markup Allegro'
+0000ea30: 290a 2020 2020 2020 2020 3e3e 3e20 6162  ).        >>> ab
+0000ea40: 6a61 642e 6174 7461 6368 286d 6172 6b75  jad.attach(marku
+0000ea50: 702c 206c 6561 7665 735b 315d 2c20 6469  p, leaves[1], di
+0000ea60: 7265 6374 696f 6e3d 6162 6a61 642e 5550  rection=abjad.UP
+0000ea70: 290a 2020 2020 2020 2020 3e3e 3e20 6162  ).        >>> ab
+0000ea80: 6a61 642e 6174 7461 6368 2861 626a 6164  jad.attach(abjad
+0000ea90: 2e41 7274 6963 756c 6174 696f 6e28 222e  .Articulation(".
+0000eaa0: 2229 2c20 6c65 6176 6573 5b31 5d29 0a20  "), leaves[1]). 
+0000eab0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0000eac0: 2e73 686f 7728 766f 6963 6529 2023 2064  .show(voice) # d
+0000ead0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+0000eae0: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
+0000eaf0: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
+0000eb00: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+0000eb10: 642e 6c69 6c79 706f 6e64 2876 6f69 6365  d.lilypond(voice
+0000eb20: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+0000eb30: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
+0000eb40: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
+0000eb50: 2056 6f69 6365 0a20 2020 2020 2020 2020   Voice.         
+0000eb60: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+0000eb70: 2020 2020 2023 2864 6566 696e 6520 6166       #(define af
+0000eb80: 7465 7247 7261 6365 4672 6163 7469 6f6e  terGraceFraction
+0000eb90: 2028 636f 6e73 2031 3520 3136 2929 0a20   (cons 15 16)). 
+0000eba0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000ebb0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+0000ebc0: 2020 205c 6166 7465 7247 7261 6365 0a20     \afterGrace. 
+0000ebd0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0000ebe0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+0000ebf0: 2020 202d 205c 7374 6163 6361 746f 0a20     - \staccato. 
+0000ec00: 2020 2020 2020 2020 2020 2020 2020 205e                 ^
+0000ec10: 205c 6d61 726b 7570 2041 6c6c 6567 726f   \markup Allegro
+0000ec20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ec30: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+0000ec40: 2020 2020 2020 2063 2731 360a 2020 2020         c'16.    
+0000ec50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ec60: 6427 3136 0a20 2020 2020 2020 2020 2020  d'16.           
+0000ec70: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+0000ec80: 2020 2020 2020 2065 2734 0a20 2020 2020         e'4.     
+0000ec90: 2020 2020 2020 2020 2020 2066 2734 0a20             f'4. 
+0000eca0: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
+0000ecb0: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
+0000ecc0: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
+0000ecd0: 2020 2052 4547 5245 5353 494f 4e20 2331     REGRESSION #1
+0000ece0: 3037 342e 2041 6674 6572 2067 7261 6365  074. After grace
+0000ecf0: 2063 6f6e 7461 696e 6572 7320 666f 726d   containers form
+0000ed00: 6174 2063 6f72 7265 6374 6c79 2077 6974  at correctly wit
+0000ed10: 6820 6368 6f72 6473 0a20 2020 2020 2020  h chords.       
+0000ed20: 2061 6e64 206f 7665 7272 6964 6573 2e20   and overrides. 
+0000ed30: 4974 2069 7320 696d 706f 7274 616e 7420  It is important 
+0000ed40: 6865 7265 2074 6861 7420 7468 6520 6060  here that the ``
+0000ed50: 5c61 6674 6572 4772 6163 6560 6020 636f  \afterGrace`` co
+0000ed60: 6d6d 616e 640a 2020 2020 2020 2020 6170  mmand.        ap
+0000ed70: 7065 6172 206c 6578 6963 616c 6c79 2061  pear lexically a
+0000ed80: 6674 6572 2074 6865 2060 605c 6f76 6572  fter the ``\over
+0000ed90: 7269 6465 6060 2063 6f6d 6d61 6e64 3a0a  ride`` command:.
+0000eda0: 0a20 2020 2020 2020 203e 3e3e 2076 6f69  .        >>> voi
+0000edb0: 6365 203d 2061 626a 6164 2e56 6f69 6365  ce = abjad.Voice
+0000edc0: 2822 6327 3420 3c64 2720 6627 3e34 2065  ("c'4 <d' f'>4 e
+0000edd0: 2734 2066 2734 2229 0a20 2020 2020 2020  '4 f'4").       
+0000ede0: 203e 3e3e 2073 7472 696e 6720 3d20 2723   >>> string = '#
+0000edf0: 2864 6566 696e 6520 6166 7465 7247 7261  (define afterGra
+0000ee00: 6365 4672 6163 7469 6f6e 2028 636f 6e73  ceFraction (cons
+0000ee10: 2031 3520 3136 2929 270a 2020 2020 2020   15 16))'.      
+0000ee20: 2020 3e3e 3e20 6c69 7465 7261 6c20 3d20    >>> literal = 
+0000ee30: 6162 6a61 642e 4c69 6c79 506f 6e64 4c69  abjad.LilyPondLi
+0000ee40: 7465 7261 6c28 7374 7269 6e67 290a 2020  teral(string).  
+0000ee50: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+0000ee60: 6174 7461 6368 286c 6974 6572 616c 2c20  attach(literal, 
+0000ee70: 766f 6963 655b 305d 290a 2020 2020 2020  voice[0]).      
+0000ee80: 2020 3e3e 3e20 6166 7465 725f 6772 6163    >>> after_grac
+0000ee90: 655f 636f 6e74 6169 6e65 7220 3d20 6162  e_container = ab
+0000eea0: 6a61 642e 4166 7465 7247 7261 6365 436f  jad.AfterGraceCo
+0000eeb0: 6e74 6169 6e65 7228 2263 2731 3620 6427  ntainer("c'16 d'
+0000eec0: 3136 2229 0a20 2020 2020 2020 203e 3e3e  16").        >>>
+0000eed0: 2061 626a 6164 2e61 7474 6163 6828 6166   abjad.attach(af
+0000eee0: 7465 725f 6772 6163 655f 636f 6e74 6169  ter_grace_contai
+0000eef0: 6e65 722c 2076 6f69 6365 5b31 5d29 0a20  ner, voice[1]). 
+0000ef00: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0000ef10: 2e6f 7665 7272 6964 6528 766f 6963 655b  .override(voice[
+0000ef20: 315d 292e 4e6f 7465 4865 6164 2e63 6f6c  1]).NoteHead.col
+0000ef30: 6f72 203d 2022 2372 6564 220a 2020 2020  or = "#red".    
+0000ef40: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
+0000ef50: 6f77 2876 6f69 6365 2920 2320 646f 6374  ow(voice) # doct
+0000ef60: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
+0000ef70: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
+0000ef80: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0000ef90: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
+0000efa0: 696c 7970 6f6e 6428 766f 6963 6529 0a20  ilypond(voice). 
+0000efb0: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
+0000efc0: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
+0000efd0: 2020 2020 2020 2020 205c 6e65 7720 566f           \new Vo
+0000efe0: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
+0000eff0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+0000f000: 2020 2328 6465 6669 6e65 2061 6674 6572    #(define after
+0000f010: 4772 6163 6546 7261 6374 696f 6e20 2863  GraceFraction (c
+0000f020: 6f6e 7320 3135 2031 3629 290a 2020 2020  ons 15 16)).    
+0000f030: 2020 2020 2020 2020 2020 2020 6327 340a              c'4.
+0000f040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f050: 5c6f 6e63 6520 5c6f 7665 7272 6964 6520  \once \override 
+0000f060: 4e6f 7465 4865 6164 2e63 6f6c 6f72 203d  NoteHead.color =
+0000f070: 2023 7265 640a 2020 2020 2020 2020 2020   #red.          
+0000f080: 2020 2020 2020 5c61 6674 6572 4772 6163        \afterGrac
+0000f090: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0000f0a0: 2020 3c64 2720 6627 3e34 0a20 2020 2020    <d' f'>4.     
+0000f0b0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+0000f0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f0d0: 2063 2731 360a 2020 2020 2020 2020 2020   c'16.          
+0000f0e0: 2020 2020 2020 2020 2020 6427 3136 0a20            d'16. 
+0000f0f0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+0000f100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f110: 2065 2734 0a20 2020 2020 2020 2020 2020   e'4.           
+0000f120: 2020 2020 2066 2734 0a20 2020 2020 2020       f'4.       
+0000f130: 2020 2020 207d 0a0a 2020 2020 2222 220a       }..    """.
+0000f140: 0a20 2020 2023 2323 2043 4c41 5353 2056  .    ### CLASS V
+0000f150: 4152 4941 424c 4553 2023 2323 0a0a 2020  ARIABLES ###..  
+0000f160: 2020 5f5f 646f 6375 6d65 6e74 6174 696f    __documentatio
+0000f170: 6e5f 7365 6374 696f 6e5f 5f20 3d20 2243  n_section__ = "C
+0000f180: 6f6e 7461 696e 6572 7322 0a0a 2020 2020  ontainers"..    
+0000f190: 5f5f 736c 6f74 735f 5f20 3d20 2822 5f6d  __slots__ = ("_m
+0000f1a0: 6169 6e5f 6c65 6166 222c 290a 0a20 2020  ain_leaf",)..   
+0000f1b0: 2023 2323 2049 4e49 5449 414c 495a 4552   ### INITIALIZER
+0000f1c0: 2023 2323 0a0a 2020 2020 6465 6620 5f5f   ###..    def __
+0000f1d0: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
+0000f1e0: 7365 6c66 2c20 636f 6d70 6f6e 656e 7473  self, components
+0000f1f0: 3d4e 6f6e 652c 202a 2c20 6c61 6e67 7561  =None, *, langua
+0000f200: 6765 3a20 7374 7220 3d20 2265 6e67 6c69  ge: str = "engli
+0000f210: 7368 222c 2074 6167 3a20 5f74 6167 2e54  sh", tag: _tag.T
+0000f220: 6167 203d 204e 6f6e 650a 2020 2020 2920  ag = None.    ) 
+0000f230: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+0000f240: 2023 205f 6d61 696e 5f6c 6561 6620 6d75   # _main_leaf mu
+0000f250: 7374 2062 6520 696e 6974 6961 6c69 7a65  st be initialize
+0000f260: 6420 6265 666f 7265 2063 6f6e 7461 696e  d before contain
+0000f270: 6572 2069 6e69 7469 616c 697a 6174 696f  er initializatio
+0000f280: 6e0a 2020 2020 2020 2020 7365 6c66 2e5f  n.        self._
+0000f290: 6d61 696e 5f6c 6561 6620 3d20 4e6f 6e65  main_leaf = None
+0000f2a0: 0a20 2020 2020 2020 2043 6f6e 7461 696e  .        Contain
+0000f2b0: 6572 2e5f 5f69 6e69 745f 5f28 7365 6c66  er.__init__(self
+0000f2c0: 2c20 636f 6d70 6f6e 656e 7473 2c20 6c61  , components, la
+0000f2d0: 6e67 7561 6765 3d6c 616e 6775 6167 652c  nguage=language,
+0000f2e0: 2074 6167 3d74 6167 290a 0a20 2020 2023   tag=tag)..    #
+0000f2f0: 2323 2053 5045 4349 414c 204d 4554 484f  ## SPECIAL METHO
+0000f300: 4453 2023 2323 0a0a 2020 2020 6465 6620  DS ###..    def 
+0000f310: 5f5f 6765 746e 6577 6172 6773 5f5f 2873  __getnewargs__(s
+0000f320: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+0000f330: 220a 2020 2020 2020 2020 4765 7473 206e  ".        Gets n
+0000f340: 6577 2061 6674 6572 2067 7261 6365 2063  ew after grace c
+0000f350: 6f6e 7461 696e 6572 2061 7267 756d 656e  ontainer argumen
+0000f360: 7473 2e0a 0a20 2020 2020 2020 2052 6574  ts...        Ret
+0000f370: 7572 6e73 2074 7570 6c65 206f 6620 7369  urns tuple of si
+0000f380: 6e67 6c65 2065 6d70 7479 206c 6973 742e  ngle empty list.
+0000f390: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000f3a0: 2020 2020 2072 6574 7572 6e20 285b 5d2c       return ([],
+0000f3b0: 290a 0a20 2020 2023 2323 2050 5249 5641  )..    ### PRIVA
+0000f3c0: 5445 204d 4554 484f 4453 2023 2323 0a0a  TE METHODS ###..
+0000f3d0: 2020 2020 6465 6620 5f61 7474 6163 6828      def _attach(
+0000f3e0: 7365 6c66 2c20 6c65 6166 293a 0a20 2020  self, leaf):.   
+0000f3f0: 2020 2020 2069 6620 6e6f 7420 6861 7361       if not hasa
+0000f400: 7474 7228 6c65 6166 2c20 2277 7269 7474  ttr(leaf, "writt
+0000f410: 656e 5f64 7572 6174 696f 6e22 293a 0a20  en_duration"):. 
+0000f420: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0000f430: 2054 7970 6545 7272 6f72 2866 226d 7573   TypeError(f"mus
+0000f440: 7420 6174 7461 6368 2074 6f20 6c65 6166  t attach to leaf
+0000f450: 2028 6e6f 7420 7b6c 6561 6621 727d 292e   (not {leaf!r}).
+0000f460: 2229 0a20 2020 2020 2020 206c 6561 662e  ").        leaf.
+0000f470: 5f61 6674 6572 5f67 7261 6365 5f63 6f6e  _after_grace_con
+0000f480: 7461 696e 6572 203d 2073 656c 660a 2020  tainer = self.  
+0000f490: 2020 2020 2020 7365 6c66 2e5f 6d61 696e        self._main
+0000f4a0: 5f6c 6561 6620 3d20 6c65 6166 0a0a 2020  _leaf = leaf..  
+0000f4b0: 2020 6465 6620 5f64 6574 6163 6828 7365    def _detach(se
+0000f4c0: 6c66 293a 0a20 2020 2020 2020 2069 6620  lf):.        if 
+0000f4d0: 7365 6c66 2e5f 6d61 696e 5f6c 6561 6620  self._main_leaf 
+0000f4e0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000f4f0: 2020 2020 2020 2020 206d 6169 6e5f 6c65           main_le
+0000f500: 6166 203d 2073 656c 662e 5f6d 6169 6e5f  af = self._main_
+0000f510: 6c65 6166 0a20 2020 2020 2020 2020 2020  leaf.           
+0000f520: 206d 6169 6e5f 6c65 6166 2e5f 6166 7465   main_leaf._afte
+0000f530: 725f 6772 6163 655f 636f 6e74 6169 6e65  r_grace_containe
+0000f540: 7220 3d20 4e6f 6e65 0a20 2020 2020 2020  r = None.       
+0000f550: 2020 2020 2073 656c 662e 5f6d 6169 6e5f       self._main_
+0000f560: 6c65 6166 203d 204e 6f6e 650a 2020 2020  leaf = None.    
+0000f570: 2020 2020 7265 7475 726e 2073 656c 660a      return self.
+0000f580: 0a20 2020 2064 6566 205f 666f 726d 6174  .    def _format
+0000f590: 5f6f 7065 6e5f 6272 6163 6b65 7473 5f73  _open_brackets_s
+0000f5a0: 6974 6528 7365 6c66 2c20 636f 6e74 7269  ite(self, contri
+0000f5b0: 6275 7469 6f6e 7329 3a0a 2020 2020 2020  butions):.      
+0000f5c0: 2020 7265 7375 6c74 203d 205b 5d0a 2020    result = [].  
+0000f5d0: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
+0000f5e0: 656e 6428 5b22 7b22 5d29 0a20 2020 2020  end(["{"]).     
+0000f5f0: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
+0000f600: 0a0a 0a63 6c61 7373 2042 6566 6f72 6547  ...class BeforeG
+0000f610: 7261 6365 436f 6e74 6169 6e65 7228 436f  raceContainer(Co
+0000f620: 6e74 6169 6e65 7229 3a0a 2020 2020 7222  ntainer):.    r"
+0000f630: 2222 0a20 2020 2047 7261 6365 2063 6f6e  "".    Grace con
+0000f640: 7461 696e 6572 2e0a 0a20 2020 202e 2e20  tainer...    .. 
+0000f650: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
+0000f660: 706c 650a 0a20 2020 2020 2020 2047 7261  ple..        Gra
+0000f670: 6365 2063 6f6e 7461 696e 6572 206d 6f64  ce container mod
+0000f680: 656c 7320 4c69 6c79 506f 6e64 2773 2064  els LilyPond's d
+0000f690: 6966 6665 7265 6e74 2074 7970 6573 206f  ifferent types o
+0000f6a0: 6620 226c 6566 742d 706f 7369 7469 6f6e  f "left-position
+0000f6b0: 6564 220a 2020 2020 2020 2020 6772 6163  ed".        grac
+0000f6c0: 6520 6d75 7369 633a 0a0a 2020 2020 2020  e music:..      
+0000f6d0: 2020 3e3e 3e20 766f 6963 6520 3d20 6162    >>> voice = ab
+0000f6e0: 6a61 642e 566f 6963 6528 2263 2734 2064  jad.Voice("c'4 d
+0000f6f0: 2734 2065 2734 2066 2734 2229 0a20 2020  '4 e'4 f'4").   
+0000f700: 2020 2020 203e 3e3e 2063 6f6e 7461 696e       >>> contain
+0000f710: 6572 203d 2061 626a 6164 2e42 6566 6f72  er = abjad.Befor
+0000f720: 6547 7261 6365 436f 6e74 6169 6e65 7228  eGraceContainer(
+0000f730: 2263 7327 3136 2064 7327 2229 0a20 2020  "cs'16 ds'").   
+0000f740: 2020 2020 203e 3e3e 2061 626a 6164 2e61       >>> abjad.a
+0000f750: 7474 6163 6828 636f 6e74 6169 6e65 722c  ttach(container,
+0000f760: 2076 6f69 6365 5b31 5d29 0a20 2020 2020   voice[1]).     
+0000f770: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
+0000f780: 7728 766f 6963 6529 2023 2064 6f63 7465  w(voice) # docte
+0000f790: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+0000f7a0: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+0000f7b0: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
+0000f7c0: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
+0000f7d0: 6c79 706f 6e64 2876 6f69 6365 290a 2020  lypond(voice).  
+0000f7e0: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
+0000f7f0: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+0000f800: 2020 2020 2020 2020 5c6e 6577 2056 6f69          \new Voi
+0000f810: 6365 0a20 2020 2020 2020 2020 2020 207b  ce.            {
 0000f820: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f830: 2020 2020 2065 2731 360a 2020 2020 2020       e'16.      
-0000f840: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-0000f850: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
-0000f860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f870: 6527 340a 2020 2020 2020 2020 2020 2020  e'4.            
-0000f880: 2020 2020 6627 340a 2020 2020 2020 2020      f'4.        
-0000f890: 2020 2020 7d0a 0a20 2020 2020 2020 203e      }..        >
-0000f8a0: 3e3e 2072 6573 756c 7420 3d20 6162 6a61  >> result = abja
-0000f8b0: 642e 6465 7461 6368 2861 626a 6164 2e42  d.detach(abjad.B
-0000f8c0: 6566 6f72 6547 7261 6365 436f 6e74 6169  eforeGraceContai
-0000f8d0: 6e65 722c 2076 6f69 6365 5b31 5d29 0a20  ner, voice[1]). 
-0000f8e0: 2020 2020 2020 203e 3e3e 2063 6f6e 7461         >>> conta
-0000f8f0: 696e 6572 203d 2072 6573 756c 745b 305d  iner = result[0]
-0000f900: 0a20 2020 2020 2020 203e 3e3e 2061 626a  .        >>> abj
-0000f910: 6164 2e61 7474 6163 6828 636f 6e74 6169  ad.attach(contai
-0000f920: 6e65 722c 2076 6f69 6365 5b33 5d29 0a20  ner, voice[3]). 
-0000f930: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-0000f940: 2e73 686f 7728 766f 6963 6529 2023 2064  .show(voice) # d
-0000f950: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
-0000f960: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0000f970: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-0000f980: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
-0000f990: 642e 6c69 6c79 706f 6e64 2876 6f69 6365  d.lilypond(voice
-0000f9a0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-0000f9b0: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-0000f9c0: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
-0000f9d0: 2056 6f69 6365 0a20 2020 2020 2020 2020   Voice.         
-0000f9e0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-0000f9f0: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
-0000fa00: 2020 2020 2020 2020 2064 2734 0a20 2020           d'4.   
-0000fa10: 2020 2020 2020 2020 2020 2020 2065 2734               e'4
-0000fa20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fa30: 205c 6772 6163 6520 7b0a 2020 2020 2020   \grace {.      
-0000fa40: 2020 2020 2020 2020 2020 2020 2020 3c63                <c
-0000fa50: 7327 2064 7327 3e31 360a 2020 2020 2020  s' ds'>16.      
-0000fa60: 2020 2020 2020 2020 2020 2020 2020 6527                e'
-0000fa70: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
-0000fa80: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-0000fa90: 2020 2020 2066 2734 0a20 2020 2020 2020       f'4.       
-0000faa0: 2020 2020 207d 0a0a 2020 2020 4c69 6c79       }..    Lily
-0000fab0: 506f 6e64 2070 726f 7669 6465 7320 666f  Pond provides fo
-0000fac0: 7572 2074 7970 6573 206f 6620 6c65 6674  ur types of left
-0000fad0: 2d70 6f73 6974 696f 6e65 6420 6772 6163  -positioned grac
-0000fae0: 6520 6d75 7369 633a 2061 6363 6961 6363  e music: acciacc
-0000faf0: 6174 7572 6173 2c0a 2020 2020 6170 706f  aturas,.    appo
-0000fb00: 6767 6961 7475 7261 732c 2067 7261 6365  ggiaturas, grace
-0000fb10: 206e 6f74 6573 2061 6e64 2073 6c61 7368   notes and slash
-0000fb20: 6564 2067 7261 6365 206e 6f74 6573 3b20  ed grace notes; 
-0000fb30: 7365 650a 2020 2020 6060 6162 6a61 642e  see.    ``abjad.
-0000fb40: 4265 666f 7265 4772 6163 6543 6f6e 7461  BeforeGraceConta
-0000fb50: 696e 6572 2e63 6f6d 6d61 6e64 6060 2074  iner.command`` t
-0000fb60: 6f20 6368 6f6f 7365 2062 6574 7765 656e  o choose between
-0000fb70: 2074 6865 7365 2e20 4c69 6c79 506f 6e64   these. LilyPond
-0000fb80: 2773 0a20 2020 206c 6566 742d 706f 7369  's.    left-posi
-0000fb90: 7469 6f6e 6564 2067 7261 6365 206d 7573  tioned grace mus
-0000fba0: 6963 2063 6f6e 7472 6173 7473 2077 6974  ic contrasts wit
-0000fbb0: 6820 2272 6967 6874 2d70 6f73 6974 696f  h "right-positio
-0000fbc0: 6e65 6422 2061 6674 6572 2d67 7261 6365  ned" after-grace
-0000fbd0: 206d 7573 6963 3b20 7365 650a 2020 2020   music; see.    
-0000fbe0: 6060 6162 6a61 642e 4166 7465 7247 7261  ``abjad.AfterGra
-0000fbf0: 6365 436f 6e74 6169 6e65 7260 602e 0a0a  ceContainer``...
-0000fc00: 2020 2020 4e6f 7465 2074 6861 7420 6e65      Note that ne
-0000fc10: 6974 6865 7220 4c69 6c79 506f 6e64 206e  ither LilyPond n
-0000fc20: 6f72 2041 626a 6164 2061 7474 656d 7074  or Abjad attempt
-0000fc30: 7320 746f 206d 6f64 656c 2074 6865 2077  s to model the w
-0000fc40: 6179 7320 7468 6174 2064 6966 6665 7265  ays that differe
-0000fc50: 6e74 0a20 2020 2063 6174 6567 6f72 6965  nt.    categorie
-0000fc60: 7320 6f66 2067 7261 6365 206d 7573 6963  s of grace music
-0000fc70: 2068 6176 6520 6265 656e 2070 6572 666f   have been perfo
-0000fc80: 726d 6564 2068 6973 746f 7269 6361 6c6c  rmed historicall
-0000fc90: 792e 2054 7970 6f67 7261 7068 6963 2064  y. Typographic d
-0000fca0: 6966 6665 7265 6e63 6573 0a20 2020 2069  ifferences.    i
-0000fcb0: 6e20 736c 7572 7269 6e67 2061 6e64 2073  n slurring and s
-0000fcc0: 6c61 7368 696e 6720 6172 6520 7072 6f76  lashing are prov
-0000fcd0: 6964 6564 2e20 4275 7420 6469 7374 696e  ided. But distin
-0000fce0: 6374 696f 6e73 2062 6574 7765 656e 2028  ctions between (
-0000fcf0: 666f 7220 6578 616d 706c 6529 0a20 2020  for example).   
-0000fd00: 206f 6e2d 7468 652d 6265 6174 2076 6572   on-the-beat ver
-0000fd10: 7375 7320 6265 666f 7265 2d74 6865 2d62  sus before-the-b
-0000fd20: 6561 7420 7065 7266 6f72 6d61 6e63 6520  eat performance 
-0000fd30: 6172 6520 6c65 6674 2069 6d70 6c69 6369  are left implici
-0000fd40: 742e 0a20 2020 2022 2222 0a0a 2020 2020  t..    """..    
-0000fd50: 2323 2320 434c 4153 5320 5641 5249 4142  ### CLASS VARIAB
-0000fd60: 4c45 5320 2323 230a 0a20 2020 205f 5f64  LES ###..    __d
-0000fd70: 6f63 756d 656e 7461 7469 6f6e 5f73 6563  ocumentation_sec
-0000fd80: 7469 6f6e 5f5f 203d 2022 436f 6e74 6169  tion__ = "Contai
-0000fd90: 6e65 7273 220a 0a20 2020 205f 5f73 6c6f  ners"..    __slo
-0000fda0: 7473 5f5f 203d 2028 225f 636f 6d6d 616e  ts__ = ("_comman
-0000fdb0: 6422 2c20 225f 6d61 696e 5f6c 6561 6622  d", "_main_leaf"
-0000fdc0: 290a 0a20 2020 205f 636f 6d6d 616e 6473  )..    _commands
-0000fdd0: 203d 2028 0a20 2020 2020 2020 2072 225c   = (.        r"\
-0000fde0: 6163 6369 6163 6361 7475 7261 222c 0a20  acciaccatura",. 
-0000fdf0: 2020 2020 2020 2072 225c 6170 706f 6767         r"\appogg
-0000fe00: 6961 7475 7261 222c 0a20 2020 2020 2020  iatura",.       
-0000fe10: 2072 225c 6772 6163 6522 2c0a 2020 2020   r"\grace",.    
-0000fe20: 2020 2020 7222 5c73 6c61 7368 6564 4772      r"\slashedGr
-0000fe30: 6163 6522 2c0a 2020 2020 290a 0a20 2020  ace",.    )..   
-0000fe40: 2023 2323 2049 4e49 5449 414c 495a 4552   ### INITIALIZER
-0000fe50: 2023 2323 0a0a 2020 2020 6465 6620 5f5f   ###..    def __
-0000fe60: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-0000fe70: 7365 6c66 2c0a 2020 2020 2020 2020 636f  self,.        co
-0000fe80: 6d70 6f6e 656e 7473 3d4e 6f6e 652c 0a20  mponents=None,. 
-0000fe90: 2020 2020 2020 202a 2c0a 2020 2020 2020         *,.      
-0000fea0: 2020 636f 6d6d 616e 643a 2073 7472 203d    command: str =
-0000feb0: 2072 225c 6772 6163 6522 2c0a 2020 2020   r"\grace",.    
-0000fec0: 2020 2020 6c61 6e67 7561 6765 3a20 7374      language: st
-0000fed0: 7220 3d20 2265 6e67 6c69 7368 222c 0a20  r = "english",. 
-0000fee0: 2020 2020 2020 2074 6167 3a20 5f74 6167         tag: _tag
-0000fef0: 2e54 6167 203d 204e 6f6e 652c 0a20 2020  .Tag = None,.   
-0000ff00: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0000ff10: 2020 2020 6966 2063 6f6d 6d61 6e64 206e      if command n
-0000ff20: 6f74 2069 6e20 7365 6c66 2e5f 636f 6d6d  ot in self._comm
-0000ff30: 616e 6473 3a0a 2020 2020 2020 2020 2020  ands:.          
-0000ff40: 2020 6d65 7373 6167 6520 3d20 6622 756e    message = f"un
-0000ff50: 6b6e 6f77 6e20 636f 6d6d 616e 643a 207b  known command: {
-0000ff60: 7265 7072 2863 6f6d 6d61 6e64 297d 2e5c  repr(command)}.\
-0000ff70: 6e22 0a20 2020 2020 2020 2020 2020 206d  n".            m
-0000ff80: 6573 7361 6765 202b 3d20 2220 206d 7573  essage += "  mus
-0000ff90: 7420 6265 2069 6e20 7b73 656c 662e 5f63  t be in {self._c
-0000ffa0: 6f6d 6d61 6e64 737d 220a 2020 2020 2020  ommands}".      
-0000ffb0: 2020 2020 2020 7261 6973 6520 4578 6365        raise Exce
-0000ffc0: 7074 696f 6e28 6d65 7373 6167 6529 0a20  ption(message). 
-0000ffd0: 2020 2020 2020 2073 656c 662e 5f63 6f6d         self._com
-0000ffe0: 6d61 6e64 203d 2063 6f6d 6d61 6e64 0a20  mand = command. 
-0000fff0: 2020 2020 2020 2073 656c 662e 5f6d 6169         self._mai
-00010000: 6e5f 6c65 6166 203d 204e 6f6e 650a 2020  n_leaf = None.  
-00010010: 2020 2020 2020 436f 6e74 6169 6e65 722e        Container.
-00010020: 5f5f 696e 6974 5f5f 2873 656c 662c 2063  __init__(self, c
-00010030: 6f6d 706f 6e65 6e74 732c 206c 616e 6775  omponents, langu
-00010040: 6167 653d 6c61 6e67 7561 6765 2c20 7461  age=language, ta
-00010050: 673d 7461 6729 0a0a 2020 2020 2323 2320  g=tag)..    ### 
-00010060: 5350 4543 4941 4c20 4d45 5448 4f44 5320  SPECIAL METHODS 
-00010070: 2323 230a 0a20 2020 2064 6566 205f 5f67  ###..    def __g
-00010080: 6574 6e65 7761 7267 735f 5f28 7365 6c66  etnewargs__(self
-00010090: 2920 2d3e 2074 7570 6c65 3a0a 2020 2020  ) -> tuple:.    
-000100a0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000100b0: 4765 7473 206e 6577 2067 7261 6365 2063  Gets new grace c
-000100c0: 6f6e 7461 696e 6572 2061 7267 756d 656e  ontainer argumen
-000100d0: 7473 2e0a 0a20 2020 2020 2020 2052 6574  ts...        Ret
-000100e0: 7572 6e73 2074 7570 6c65 206f 6620 7369  urns tuple of si
-000100f0: 6e67 6c65 2065 6d70 7479 206c 6973 742e  ngle empty list.
-00010100: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00010110: 2020 2020 2072 6574 7572 6e20 285b 5d2c       return ([],
-00010120: 290a 0a20 2020 2023 2323 2050 5249 5641  )..    ### PRIVA
-00010130: 5445 204d 4554 484f 4453 2023 2323 0a0a  TE METHODS ###..
-00010140: 2020 2020 6465 6620 5f61 7474 6163 6828      def _attach(
-00010150: 7365 6c66 2c20 6c65 6166 293a 0a20 2020  self, leaf):.   
-00010160: 2020 2020 2069 6620 6e6f 7420 6861 7361       if not hasa
-00010170: 7474 7228 6c65 6166 2c20 2277 7269 7474  ttr(leaf, "writt
-00010180: 656e 5f64 7572 6174 696f 6e22 293a 0a20  en_duration"):. 
-00010190: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-000101a0: 2054 7970 6545 7272 6f72 2866 226d 7573   TypeError(f"mus
-000101b0: 7420 6174 7461 6368 2074 6f20 6c65 6166  t attach to leaf
-000101c0: 207b 6c65 6166 2172 7d2e 2229 0a20 2020   {leaf!r}.").   
-000101d0: 2020 2020 206c 6561 662e 5f62 6566 6f72       leaf._befor
-000101e0: 655f 6772 6163 655f 636f 6e74 6169 6e65  e_grace_containe
-000101f0: 7220 3d20 7365 6c66 0a20 2020 2020 2020  r = self.       
-00010200: 2073 656c 662e 5f6d 6169 6e5f 6c65 6166   self._main_leaf
-00010210: 203d 206c 6561 660a 0a20 2020 2064 6566   = leaf..    def
-00010220: 205f 6465 7461 6368 2873 656c 6629 3a0a   _detach(self):.
-00010230: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00010240: 5f6d 6169 6e5f 6c65 6166 2069 7320 6e6f  _main_leaf is no
-00010250: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00010260: 2020 2020 6d61 696e 5f6c 6561 6620 3d20      main_leaf = 
-00010270: 7365 6c66 2e5f 6d61 696e 5f6c 6561 660a  self._main_leaf.
-00010280: 2020 2020 2020 2020 2020 2020 6d61 696e              main
-00010290: 5f6c 6561 662e 5f62 6566 6f72 655f 6772  _leaf._before_gr
-000102a0: 6163 655f 636f 6e74 6169 6e65 7220 3d20  ace_container = 
-000102b0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-000102c0: 2073 656c 662e 5f6d 6169 6e5f 6c65 6166   self._main_leaf
-000102d0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-000102e0: 7265 7475 726e 2073 656c 660a 0a20 2020  return self..   
-000102f0: 2064 6566 205f 666f 726d 6174 5f6f 7065   def _format_ope
-00010300: 6e5f 6272 6163 6b65 7473 5f73 6974 6528  n_brackets_site(
-00010310: 7365 6c66 2c20 636f 6e74 7269 6275 7469  self, contributi
-00010320: 6f6e 7329 3a0a 2020 2020 2020 2020 7265  ons):.        re
-00010330: 7375 6c74 203d 205b 5d0a 2020 2020 2020  sult = [].      
-00010340: 2020 7374 7269 6e67 203d 2066 227b 7365    string = f"{se
-00010350: 6c66 2e63 6f6d 6d61 6e64 7d20 7b7b 220a  lf.command} {{".
-00010360: 2020 2020 2020 2020 7265 7375 6c74 2e65          result.e
-00010370: 7874 656e 6428 5b73 7472 696e 675d 290a  xtend([string]).
-00010380: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00010390: 6573 756c 740a 0a20 2020 2023 2323 2050  esult..    ### P
-000103a0: 5542 4c49 4320 5052 4f50 4552 5449 4553  UBLIC PROPERTIES
-000103b0: 2023 2323 0a0a 2020 2020 4070 726f 7065   ###..    @prope
-000103c0: 7274 790a 2020 2020 6465 6620 636f 6d6d  rty.    def comm
-000103d0: 616e 6428 7365 6c66 2920 2d3e 2073 7472  and(self) -> str
-000103e0: 3a0a 2020 2020 2020 2020 7222 2222 0a20  :.        r""". 
-000103f0: 2020 2020 2020 2047 6574 7320 636f 6d6d         Gets comm
-00010400: 616e 642e 2043 686f 6f73 6573 2062 6574  and. Chooses bet
-00010410: 7765 656e 204c 696c 7950 6f6e 6427 7320  ween LilyPond's 
-00010420: 666f 7572 2074 7970 6573 206f 6620 6c65  four types of le
-00010430: 6674 2d70 6f73 6974 696f 6e65 6420 6772  ft-positioned gr
-00010440: 6163 650a 2020 2020 2020 2020 6d75 7369  ace.        musi
-00010450: 632e 0a0a 2020 2020 2020 2020 2e2e 2063  c...        .. c
-00010460: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
-00010470: 6c65 0a0a 2020 2020 2020 2020 2020 2020  le..            
-00010480: 2a2a 2856 616e 696c 6c61 2920 6772 6163  **(Vanilla) grac
-00010490: 6520 6e6f 7465 732e 2a2a 204c 696c 7950  e notes.** LilyP
-000104a0: 6f6e 6420 666f 726d 6174 7320 7369 6e67  ond formats sing
-000104b0: 6c65 2067 7261 6365 206e 6f74 6573 2077  le grace notes w
-000104c0: 6974 6820 6e65 6974 6865 7220 610a 2020  ith neither a.  
-000104d0: 2020 2020 2020 2020 2020 736c 6173 6820            slash 
-000104e0: 6e6f 7220 6120 736c 7572 3a0a 0a20 2020  nor a slur:..   
-000104f0: 2020 2020 2020 2020 203e 3e3e 2076 6f69           >>> voi
-00010500: 6365 203d 2061 626a 6164 2e56 6f69 6365  ce = abjad.Voice
-00010510: 2822 6327 3420 6427 3420 6527 3420 6627  ("c'4 d'4 e'4 f'
-00010520: 3422 290a 2020 2020 2020 2020 2020 2020  4").            
-00010530: 3e3e 3e20 636f 6e74 6169 6e65 7220 3d20  >>> container = 
-00010540: 6162 6a61 642e 4265 666f 7265 4772 6163  abjad.BeforeGrac
-00010550: 6543 6f6e 7461 696e 6572 2822 6373 2731  eContainer("cs'1
-00010560: 3622 290a 2020 2020 2020 2020 2020 2020  6").            
-00010570: 3e3e 3e20 6162 6a61 642e 6174 7461 6368  >>> abjad.attach
-00010580: 2863 6f6e 7461 696e 6572 2c20 766f 6963  (container, voic
-00010590: 655b 315d 290a 2020 2020 2020 2020 2020  e[1]).          
-000105a0: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
-000105b0: 2876 6f69 6365 2920 2320 646f 6374 6573  (voice) # doctes
-000105c0: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-000105d0: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-000105e0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000105f0: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-00010600: 626a 6164 2e6c 696c 7970 6f6e 6428 766f  bjad.lilypond(vo
-00010610: 6963 6529 0a20 2020 2020 2020 2020 2020  ice).           
-00010620: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-00010630: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-00010640: 2020 2020 2020 205c 6e65 7720 566f 6963         \new Voic
-00010650: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00010660: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-00010670: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
-00010680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010690: 5c67 7261 6365 207b 0a20 2020 2020 2020  \grace {.       
-000106a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000106b0: 2063 7327 3136 0a20 2020 2020 2020 2020   cs'16.         
-000106c0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-000106d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000106e0: 2064 2734 0a20 2020 2020 2020 2020 2020   d'4.           
-000106f0: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
-00010700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010710: 2066 2734 0a20 2020 2020 2020 2020 2020   f'4.           
-00010720: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
-00010730: 2020 2020 4c69 6c79 506f 6e64 206c 696b      LilyPond lik
-00010740: 6577 6973 6520 666f 726d 6174 7320 7275  ewise formats ru
-00010750: 6e73 206f 6620 6772 6163 6520 6e6f 7465  ns of grace note
-00010760: 7320 7769 7468 206e 6569 7468 6572 2061  s with neither a
-00010770: 2073 6c61 7368 206e 6f72 2061 0a20 2020   slash nor a.   
-00010780: 2020 2020 2020 2020 2073 6c75 723a 0a0a           slur:..
-00010790: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-000107a0: 766f 6963 6520 3d20 6162 6a61 642e 566f  voice = abjad.Vo
-000107b0: 6963 6528 2263 2734 2064 2734 2065 2734  ice("c'4 d'4 e'4
-000107c0: 2066 2734 2229 0a20 2020 2020 2020 2020   f'4").         
-000107d0: 2020 203e 3e3e 2063 6f6e 7461 696e 6572     >>> container
-000107e0: 203d 2061 626a 6164 2e42 6566 6f72 6547   = abjad.BeforeG
-000107f0: 7261 6365 436f 6e74 6169 6e65 7228 2263  raceContainer("c
-00010800: 7327 3136 2064 7327 2229 0a20 2020 2020  s'16 ds'").     
-00010810: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-00010820: 2e61 7474 6163 6828 636f 6e74 6169 6e65  .attach(containe
-00010830: 722c 2076 6f69 6365 5b31 5d29 0a20 2020  r, voice[1]).   
-00010840: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
-00010850: 6164 2e73 686f 7728 766f 6963 6529 2023  ad.show(voice) #
-00010860: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
-00010870: 0a20 2020 2020 2020 2020 2020 202e 2e20  .            .. 
-00010880: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
-00010890: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
-000108a0: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
-000108b0: 706f 6e64 2876 6f69 6365 290a 2020 2020  pond(voice).    
-000108c0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-000108d0: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
-000108e0: 2020 2020 2020 2020 2020 2020 2020 5c6e                \n
-000108f0: 6577 2056 6f69 6365 0a20 2020 2020 2020  ew Voice.       
-00010900: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00010910: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00010920: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00010930: 2020 2020 2020 205c 6772 6163 6520 7b0a         \grace {.
-00010940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010950: 2020 2020 2020 2020 6373 2731 360a 2020          cs'16.  
-00010960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010970: 2020 2020 2020 6473 2731 360a 2020 2020        ds'16.    
-00010980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010990: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
-000109a0: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-000109b0: 2020 2020 2020 2020 2020 2020 2020 6527                e'
-000109c0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-000109d0: 2020 2020 2020 6627 340a 2020 2020 2020        f'4.      
-000109e0: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
-000109f0: 2020 2020 202e 2e20 636f 6e74 6169 6e65       .. containe
-00010a00: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-00010a10: 2020 2020 2020 2020 202a 2a41 6363 6961           **Accia
-00010a20: 6363 6174 7572 6173 2e2a 2a20 4c69 6c79  ccaturas.** Lily
-00010a30: 506f 6e64 2066 6f72 6d61 7473 2073 696e  Pond formats sin
-00010a40: 676c 6520 6163 6369 6163 6361 7475 7261  gle acciaccatura
-00010a50: 7320 7769 7468 2062 6f74 6820 6120 736c  s with both a sl
-00010a60: 6173 680a 2020 2020 2020 2020 2020 2020  ash.            
-00010a70: 616e 6420 6120 736c 7572 3a0a 0a20 2020  and a slur:..   
-00010a80: 2020 2020 2020 2020 203e 3e3e 2076 6f69           >>> voi
-00010a90: 6365 203d 2061 626a 6164 2e56 6f69 6365  ce = abjad.Voice
-00010aa0: 2822 6327 3420 6427 3420 6527 3420 6627  ("c'4 d'4 e'4 f'
-00010ab0: 3422 290a 2020 2020 2020 2020 2020 2020  4").            
-00010ac0: 3e3e 3e20 636f 6e74 6169 6e65 7220 3d20  >>> container = 
-00010ad0: 6162 6a61 642e 4265 666f 7265 4772 6163  abjad.BeforeGrac
-00010ae0: 6543 6f6e 7461 696e 6572 280a 2020 2020  eContainer(.    
-00010af0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-00010b00: 2263 7327 3136 222c 2063 6f6d 6d61 6e64  "cs'16", command
-00010b10: 3d72 225c 6163 6369 6163 6361 7475 7261  =r"\acciaccatura
-00010b20: 220a 2020 2020 2020 2020 2020 2020 2e2e  ".            ..
-00010b30: 2e20 290a 2020 2020 2020 2020 2020 2020  . ).            
-00010b40: 3e3e 3e20 6162 6a61 642e 6174 7461 6368  >>> abjad.attach
-00010b50: 2863 6f6e 7461 696e 6572 2c20 766f 6963  (container, voic
-00010b60: 655b 315d 290a 2020 2020 2020 2020 2020  e[1]).          
-00010b70: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
-00010b80: 2876 6f69 6365 2920 2320 646f 6374 6573  (voice) # doctes
-00010b90: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-00010ba0: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-00010bb0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00010bc0: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-00010bd0: 626a 6164 2e6c 696c 7970 6f6e 6428 766f  bjad.lilypond(vo
-00010be0: 6963 6529 0a20 2020 2020 2020 2020 2020  ice).           
-00010bf0: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-00010c00: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-00010c10: 2020 2020 2020 205c 6e65 7720 566f 6963         \new Voic
-00010c20: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00010c30: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-00010c40: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
-00010c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010c60: 5c61 6363 6961 6363 6174 7572 6120 7b0a  \acciaccatura {.
-00010c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010c80: 2020 2020 2020 2020 6373 2731 360a 2020          cs'16.  
-00010c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010ca0: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-00010cb0: 2020 2020 2020 2020 6427 340a 2020 2020          d'4.    
-00010cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010cd0: 6527 340a 2020 2020 2020 2020 2020 2020  e'4.            
-00010ce0: 2020 2020 2020 2020 6627 340a 2020 2020          f'4.    
-00010cf0: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
-00010d00: 2020 2020 2020 2020 2020 202e 2e20 2063             ..  c
-00010d10: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
-00010d20: 6c65 2065 7863 6570 7469 6f6e 0a0a 2020  le exception..  
-00010d30: 2020 2020 2020 2020 2020 2020 2020 4275                Bu
-00010d40: 7420 4c69 6c79 506f 6e64 2066 6169 6c73  t LilyPond fails
-00010d50: 2074 6f20 736c 6173 6820 7275 6e73 206f   to slash runs o
-00010d60: 6620 6163 6369 6163 6361 7475 7261 732e  f acciaccaturas.
-00010d70: 2054 6869 7320 6265 6861 7669 6f72 2069   This behavior i
-00010d80: 7320 610a 2020 2020 2020 2020 2020 2020  s a.            
-00010d90: 2020 2020 6c6f 6e67 7374 616e 6469 6e67      longstanding
-00010da0: 204c 696c 7950 6f6e 6420 6275 673a 0a0a   LilyPond bug:..
-00010db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010dc0: 3e3e 3e20 766f 6963 6520 3d20 6162 6a61  >>> voice = abja
-00010dd0: 642e 566f 6963 6528 2263 2734 2064 2734  d.Voice("c'4 d'4
-00010de0: 2065 2734 2066 2734 2229 0a20 2020 2020   e'4 f'4").     
-00010df0: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
-00010e00: 6f6e 7461 696e 6572 203d 2061 626a 6164  ontainer = abjad
-00010e10: 2e42 6566 6f72 6547 7261 6365 436f 6e74  .BeforeGraceCont
-00010e20: 6169 6e65 7228 0a20 2020 2020 2020 2020  ainer(.         
-00010e30: 2020 2020 2020 202e 2e2e 2020 2020 2022         ...     "
-00010e40: 6373 2731 3620 6473 2722 2c20 636f 6d6d  cs'16 ds'", comm
-00010e50: 616e 643d 7222 5c61 6363 6961 6363 6174  and=r"\acciaccat
-00010e60: 7572 6122 0a20 2020 2020 2020 2020 2020  ura".           
-00010e70: 2020 2020 202e 2e2e 2029 0a20 2020 2020       ... ).     
-00010e80: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
-00010e90: 626a 6164 2e61 7474 6163 6828 636f 6e74  bjad.attach(cont
-00010ea0: 6169 6e65 722c 2076 6f69 6365 5b31 5d29  ainer, voice[1])
-00010eb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010ec0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-00010ed0: 766f 6963 6529 2023 2064 6f63 7465 7374  voice) # doctest
-00010ee0: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-00010ef0: 2020 2020 2020 2020 202e 2e20 2064 6f63           ..  doc
-00010f00: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
-00010f10: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
-00010f20: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
-00010f30: 706f 6e64 2876 6f69 6365 290a 2020 2020  pond(voice).    
-00010f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010f50: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-00010f60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00010f70: 2020 2020 2020 5c6e 6577 2056 6f69 6365        \new Voice
-00010f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010f90: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00010fa0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00010fb0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00010fc0: 2020 2020 2020 2020 2020 205c 6163 6369             \acci
-00010fd0: 6163 6361 7475 7261 207b 0a20 2020 2020  accatura {.     
-00010fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010ff0: 2020 2020 2020 2063 7327 3136 0a20 2020         cs'16.   
-00011000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011010: 2020 2020 2020 2020 2064 7327 3136 0a20           ds'16. 
-00011020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011030: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00011040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011050: 2064 2734 0a20 2020 2020 2020 2020 2020   d'4.           
-00011060: 2020 2020 2020 2020 2020 2020 2065 2734               e'4
-00011070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011080: 2020 2020 2020 2020 2066 2734 0a20 2020           f'4.   
-00011090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000110a0: 207d 0a0a 2020 2020 2020 2020 2020 2020   }..            
-000110b0: 2020 2020 2e2e 2020 6e6f 7465 3a3a 204c      ..  note:: L
-000110c0: 696c 7950 6f6e 6420 6661 696c 7320 746f  ilyPond fails to
-000110d0: 2073 6c61 7368 2072 756e 7320 6f66 2061   slash runs of a
-000110e0: 6363 6961 6363 6174 7572 6173 2e0a 0a20  cciaccaturas... 
-000110f0: 2020 2020 2020 202e 2e20 636f 6e74 6169         .. contai
-00011100: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-00011110: 2020 2020 2020 2020 2020 202a 2a41 7070             **App
-00011120: 6f67 6769 6174 7572 6173 2e2a 2a20 4c69  oggiaturas.** Li
-00011130: 6c79 506f 6e64 2066 6f72 6d61 7473 2073  lyPond formats s
-00011140: 696e 676c 6520 6170 706f 6767 6961 7475  ingle appoggiatu
-00011150: 7261 7320 7769 7468 206f 6e6c 7920 6120  ras with only a 
-00011160: 736c 7572 3b20 6e6f 0a20 2020 2020 2020  slur; no.       
-00011170: 2020 2020 2073 6c61 7368 2069 7320 696e       slash is in
-00011180: 636c 7564 6564 3a0a 0a20 2020 2020 2020  cluded:..       
-00011190: 2020 2020 203e 3e3e 2076 6f69 6365 203d       >>> voice =
-000111a0: 2061 626a 6164 2e56 6f69 6365 2822 6327   abjad.Voice("c'
-000111b0: 3420 6427 3420 6527 3420 6627 3422 290a  4 d'4 e'4 f'4").
-000111c0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-000111d0: 636f 6e74 6169 6e65 7220 3d20 6162 6a61  container = abja
-000111e0: 642e 4265 666f 7265 4772 6163 6543 6f6e  d.BeforeGraceCon
-000111f0: 7461 696e 6572 280a 2020 2020 2020 2020  tainer(.        
-00011200: 2020 2020 2e2e 2e20 2020 2020 2263 7327      ...     "cs'
-00011210: 3136 222c 2063 6f6d 6d61 6e64 3d72 225c  16", command=r"\
-00011220: 6170 706f 6767 6961 7475 7261 220a 2020  appoggiatura".  
-00011230: 2020 2020 2020 2020 2020 2e2e 2e20 290a            ... ).
-00011240: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00011250: 6162 6a61 642e 6174 7461 6368 2863 6f6e  abjad.attach(con
-00011260: 7461 696e 6572 2c20 766f 6963 655b 315d  tainer, voice[1]
-00011270: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00011280: 3e20 6162 6a61 642e 7368 6f77 2876 6f69  > abjad.show(voi
-00011290: 6365 2920 2320 646f 6374 6573 743a 202b  ce) # doctest: +
-000112a0: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
-000112b0: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
-000112c0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-000112d0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-000112e0: 2e6c 696c 7970 6f6e 6428 766f 6963 6529  .lilypond(voice)
-000112f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011300: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-00011310: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-00011320: 2020 205c 6e65 7720 566f 6963 650a 2020     \new Voice.  
-00011330: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+0000f830: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
+0000f840: 2020 2020 205c 6772 6163 6520 7b0a 2020       \grace {.  
+0000f850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f860: 2020 6373 2731 360a 2020 2020 2020 2020    cs'16.        
+0000f870: 2020 2020 2020 2020 2020 2020 6473 2731              ds'1
+0000f880: 360a 2020 2020 2020 2020 2020 2020 2020  6.              
+0000f890: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+0000f8a0: 2020 2020 6427 340a 2020 2020 2020 2020      d'4.        
+0000f8b0: 2020 2020 2020 2020 6527 340a 2020 2020          e'4.    
+0000f8c0: 2020 2020 2020 2020 2020 2020 6627 340a              f'4.
+0000f8d0: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
+0000f8e0: 2020 2020 2020 204c 696c 7950 6f6e 6420         LilyPond 
+0000f8f0: 656e 6772 6176 6573 2067 7261 6365 206d  engraves grace m
+0000f900: 7573 6963 2061 7420 6120 7265 6475 6365  usic at a reduce
+0000f910: 6420 7369 7a65 2e0a 0a20 2020 2020 2020  d size...       
+0000f920: 204c 696c 7950 6f6e 6420 706f 7369 7469   LilyPond positi
+0000f930: 6f6e 7320 6772 6163 6520 6d75 7369 6320  ons grace music 
+0000f940: 696d 6d65 6469 6174 656c 7920 6265 666f  immediately befo
+0000f950: 7265 2061 2022 6d61 696e 206e 6f74 6522  re a "main note"
+0000f960: 2077 6869 6368 0a20 2020 2020 2020 2066   which.        f
+0000f970: 6f6c 6c6f 7773 2e0a 0a20 2020 202e 2e20  ollows...    .. 
+0000f980: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
+0000f990: 6d70 6c65 0a0a 2020 2020 2020 2020 4669  mple..        Fi
+0000f9a0: 6c6c 2067 7261 6365 2063 6f6e 7461 696e  ll grace contain
+0000f9b0: 6572 7320 7769 7468 206e 6f74 6573 2c20  ers with notes, 
+0000f9c0: 7265 7374 7320 6f72 2063 686f 7264 733a  rests or chords:
+0000f9d0: 0a0a 2020 2020 2020 2020 3e3e 3e20 766f  ..        >>> vo
+0000f9e0: 6963 6520 3d20 6162 6a61 642e 566f 6963  ice = abjad.Voic
+0000f9f0: 6528 2263 2734 2064 2734 2065 2734 2066  e("c'4 d'4 e'4 f
+0000fa00: 2734 2229 0a20 2020 2020 2020 203e 3e3e  '4").        >>>
+0000fa10: 2063 6f6e 7461 696e 6572 203d 2061 626a   container = abj
+0000fa20: 6164 2e42 6566 6f72 6547 7261 6365 436f  ad.BeforeGraceCo
+0000fa30: 6e74 6169 6e65 7228 223c 6373 2720 6473  ntainer("<cs' ds
+0000fa40: 273e 3136 2065 2722 290a 2020 2020 2020  '>16 e'").      
+0000fa50: 2020 3e3e 3e20 6162 6a61 642e 6174 7461    >>> abjad.atta
+0000fa60: 6368 2863 6f6e 7461 696e 6572 2c20 766f  ch(container, vo
+0000fa70: 6963 655b 315d 290a 2020 2020 2020 2020  ice[1]).        
+0000fa80: 3e3e 3e20 6162 6a61 642e 7368 6f77 2876  >>> abjad.show(v
+0000fa90: 6f69 6365 2920 2320 646f 6374 6573 743a  oice) # doctest:
+0000faa0: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0000fab0: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+0000fac0: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+0000fad0: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+0000fae0: 6f6e 6428 766f 6963 6529 0a20 2020 2020  ond(voice).     
+0000faf0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+0000fb00: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+0000fb10: 2020 2020 205c 6e65 7720 566f 6963 650a       \new Voice.
+0000fb20: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+0000fb30: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+0000fb40: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0000fb50: 2020 5c67 7261 6365 207b 0a20 2020 2020    \grace {.     
+0000fb60: 2020 2020 2020 2020 2020 2020 2020 203c                 <
+0000fb70: 6373 2720 6473 273e 3136 0a20 2020 2020  cs' ds'>16.     
+0000fb80: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000fb90: 2731 360a 2020 2020 2020 2020 2020 2020  '16.            
+0000fba0: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
+0000fbb0: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
+0000fbc0: 2020 2020 2020 2020 2020 6527 340a 2020            e'4.  
+0000fbd0: 2020 2020 2020 2020 2020 2020 2020 6627                f'
+0000fbe0: 340a 2020 2020 2020 2020 2020 2020 7d0a  4.            }.
+0000fbf0: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
+0000fc00: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+0000fc10: 2020 2020 2020 4465 7461 6368 2067 7261        Detach gra
+0000fc20: 6365 2063 6f6e 7461 696e 6572 7320 6c69  ce containers li
+0000fc30: 6b65 2074 6869 733a 0a0a 2020 2020 2020  ke this:..      
+0000fc40: 2020 3e3e 3e20 766f 6963 6520 3d20 6162    >>> voice = ab
+0000fc50: 6a61 642e 566f 6963 6528 2263 2734 2064  jad.Voice("c'4 d
+0000fc60: 2734 2065 2734 2066 2734 2229 0a20 2020  '4 e'4 f'4").   
+0000fc70: 2020 2020 203e 3e3e 2063 6f6e 7461 696e       >>> contain
+0000fc80: 6572 203d 2061 626a 6164 2e42 6566 6f72  er = abjad.Befor
+0000fc90: 6547 7261 6365 436f 6e74 6169 6e65 7228  eGraceContainer(
+0000fca0: 223c 6373 2720 6473 273e 3136 2065 2722  "<cs' ds'>16 e'"
+0000fcb0: 290a 2020 2020 2020 2020 3e3e 3e20 6162  ).        >>> ab
+0000fcc0: 6a61 642e 6174 7461 6368 2863 6f6e 7461  jad.attach(conta
+0000fcd0: 696e 6572 2c20 766f 6963 655b 315d 290a  iner, voice[1]).
+0000fce0: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+0000fcf0: 642e 7368 6f77 2876 6f69 6365 2920 2320  d.show(voice) # 
+0000fd00: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+0000fd10: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
+0000fd20: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
+0000fd30: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+0000fd40: 6164 2e6c 696c 7970 6f6e 6428 766f 6963  ad.lilypond(voic
+0000fd50: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+0000fd60: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
+0000fd70: 0a20 2020 2020 2020 2020 2020 205c 6e65  .            \ne
+0000fd80: 7720 566f 6963 650a 2020 2020 2020 2020  w Voice.        
+0000fd90: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+0000fda0: 2020 2020 2020 6327 340a 2020 2020 2020        c'4.      
+0000fdb0: 2020 2020 2020 2020 2020 5c67 7261 6365            \grace
+0000fdc0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+0000fdd0: 2020 2020 2020 203c 6373 2720 6473 273e         <cs' ds'>
+0000fde0: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
+0000fdf0: 2020 2020 2020 2065 2731 360a 2020 2020         e'16.    
+0000fe00: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+0000fe10: 2020 2020 2020 2020 2020 2020 2020 6427                d'
+0000fe20: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0000fe30: 2020 6527 340a 2020 2020 2020 2020 2020    e'4.          
+0000fe40: 2020 2020 2020 6627 340a 2020 2020 2020        f'4.      
+0000fe50: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
+0000fe60: 203e 3e3e 2061 626a 6164 2e64 6574 6163   >>> abjad.detac
+0000fe70: 6828 6162 6a61 642e 4265 666f 7265 4772  h(abjad.BeforeGr
+0000fe80: 6163 6543 6f6e 7461 696e 6572 2c20 766f  aceContainer, vo
+0000fe90: 6963 655b 315d 290a 2020 2020 2020 2020  ice[1]).        
+0000fea0: 2842 6566 6f72 6547 7261 6365 436f 6e74  (BeforeGraceCont
+0000feb0: 6169 6e65 7228 223c 6373 2720 6473 273e  ainer("<cs' ds'>
+0000fec0: 3136 2065 2731 3622 292c 290a 0a20 2020  16 e'16"),)..   
+0000fed0: 2020 2020 203e 3e3e 2061 626a 6164 2e64       >>> abjad.d
+0000fee0: 6574 6163 6828 6162 6a61 642e 4265 666f  etach(abjad.Befo
+0000fef0: 7265 4772 6163 6543 6f6e 7461 696e 6572  reGraceContainer
+0000ff00: 2c20 766f 6963 655b 315d 290a 2020 2020  , voice[1]).    
+0000ff10: 2020 2020 2829 0a0a 2020 2020 2020 2020      ()..        
+0000ff20: 3e3e 3e20 6162 6a61 642e 7368 6f77 2876  >>> abjad.show(v
+0000ff30: 6f69 6365 2920 2320 646f 6374 6573 743a  oice) # doctest:
+0000ff40: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0000ff50: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+0000ff60: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+0000ff70: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+0000ff80: 6f6e 6428 766f 6963 6529 0a20 2020 2020  ond(voice).     
+0000ff90: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+0000ffa0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+0000ffb0: 2020 2020 205c 6e65 7720 566f 6963 650a       \new Voice.
+0000ffc0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+0000ffd0: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+0000ffe0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0000fff0: 2020 6427 340a 2020 2020 2020 2020 2020    d'4.          
+00010000: 2020 2020 2020 6527 340a 2020 2020 2020        e'4.      
+00010010: 2020 2020 2020 2020 2020 6627 340a 2020            f'4.  
+00010020: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+00010030: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
+00010040: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
+00010050: 2020 4d6f 7665 2067 7261 6365 2063 6f6e    Move grace con
+00010060: 7461 696e 6572 7320 6c69 6b65 2074 6869  tainers like thi
+00010070: 733a 0a0a 2020 2020 2020 2020 3e3e 3e20  s:..        >>> 
+00010080: 766f 6963 6520 3d20 6162 6a61 642e 566f  voice = abjad.Vo
+00010090: 6963 6528 2263 2734 2064 2734 2065 2734  ice("c'4 d'4 e'4
+000100a0: 2066 2734 2229 0a20 2020 2020 2020 203e   f'4").        >
+000100b0: 3e3e 2063 6f6e 7461 696e 6572 203d 2061  >> container = a
+000100c0: 626a 6164 2e42 6566 6f72 6547 7261 6365  bjad.BeforeGrace
+000100d0: 436f 6e74 6169 6e65 7228 223c 6373 2720  Container("<cs' 
+000100e0: 6473 273e 3136 2065 2722 290a 2020 2020  ds'>16 e'").    
+000100f0: 2020 2020 3e3e 3e20 6162 6a61 642e 6174      >>> abjad.at
+00010100: 7461 6368 2863 6f6e 7461 696e 6572 2c20  tach(container, 
+00010110: 766f 6963 655b 315d 290a 2020 2020 2020  voice[1]).      
+00010120: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+00010130: 2876 6f69 6365 2920 2320 646f 6374 6573  (voice) # doctes
+00010140: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+00010150: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+00010160: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+00010170: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+00010180: 7970 6f6e 6428 766f 6963 6529 0a20 2020  ypond(voice).   
+00010190: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
+000101a0: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
+000101b0: 2020 2020 2020 205c 6e65 7720 566f 6963         \new Voic
+000101c0: 650a 2020 2020 2020 2020 2020 2020 7b0a  e.            {.
+000101d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000101e0: 6327 340a 2020 2020 2020 2020 2020 2020  c'4.            
+000101f0: 2020 2020 5c67 7261 6365 207b 0a20 2020      \grace {.   
+00010200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010210: 203c 6373 2720 6473 273e 3136 0a20 2020   <cs' ds'>16.   
+00010220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010230: 2065 2731 360a 2020 2020 2020 2020 2020   e'16.          
+00010240: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00010250: 2020 2020 2020 2020 6427 340a 2020 2020          d'4.    
+00010260: 2020 2020 2020 2020 2020 2020 6527 340a              e'4.
+00010270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010280: 6627 340a 2020 2020 2020 2020 2020 2020  f'4.            
+00010290: 7d0a 0a20 2020 2020 2020 203e 3e3e 2072  }..        >>> r
+000102a0: 6573 756c 7420 3d20 6162 6a61 642e 6465  esult = abjad.de
+000102b0: 7461 6368 2861 626a 6164 2e42 6566 6f72  tach(abjad.Befor
+000102c0: 6547 7261 6365 436f 6e74 6169 6e65 722c  eGraceContainer,
+000102d0: 2076 6f69 6365 5b31 5d29 0a20 2020 2020   voice[1]).     
+000102e0: 2020 203e 3e3e 2063 6f6e 7461 696e 6572     >>> container
+000102f0: 203d 2072 6573 756c 745b 305d 0a20 2020   = result[0].   
+00010300: 2020 2020 203e 3e3e 2061 626a 6164 2e61       >>> abjad.a
+00010310: 7474 6163 6828 636f 6e74 6169 6e65 722c  ttach(container,
+00010320: 2076 6f69 6365 5b33 5d29 0a20 2020 2020   voice[3]).     
+00010330: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
+00010340: 7728 766f 6963 6529 2023 2064 6f63 7465  w(voice) # docte
+00010350: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+00010360: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+00010370: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
+00010380: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
+00010390: 6c79 706f 6e64 2876 6f69 6365 290a 2020  lypond(voice).  
+000103a0: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
+000103b0: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+000103c0: 2020 2020 2020 2020 5c6e 6577 2056 6f69          \new Voi
+000103d0: 6365 0a20 2020 2020 2020 2020 2020 207b  ce.            {
+000103e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000103f0: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
+00010400: 2020 2020 2064 2734 0a20 2020 2020 2020       d'4.       
+00010410: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
+00010420: 2020 2020 2020 2020 2020 2020 205c 6772               \gr
+00010430: 6163 6520 7b0a 2020 2020 2020 2020 2020  ace {.          
+00010440: 2020 2020 2020 2020 2020 3c63 7327 2064            <cs' d
+00010450: 7327 3e31 360a 2020 2020 2020 2020 2020  s'>16.          
+00010460: 2020 2020 2020 2020 2020 6527 3136 0a20            e'16. 
+00010470: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00010480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010490: 2066 2734 0a20 2020 2020 2020 2020 2020   f'4.           
+000104a0: 207d 0a0a 2020 2020 4c69 6c79 506f 6e64   }..    LilyPond
+000104b0: 2070 726f 7669 6465 7320 666f 7572 2074   provides four t
+000104c0: 7970 6573 206f 6620 6c65 6674 2d70 6f73  ypes of left-pos
+000104d0: 6974 696f 6e65 6420 6772 6163 6520 6d75  itioned grace mu
+000104e0: 7369 633a 2061 6363 6961 6363 6174 7572  sic: acciaccatur
+000104f0: 6173 2c0a 2020 2020 6170 706f 6767 6961  as,.    appoggia
+00010500: 7475 7261 732c 2067 7261 6365 206e 6f74  turas, grace not
+00010510: 6573 2061 6e64 2073 6c61 7368 6564 2067  es and slashed g
+00010520: 7261 6365 206e 6f74 6573 3b20 7365 650a  race notes; see.
+00010530: 2020 2020 6060 6162 6a61 642e 4265 666f      ``abjad.Befo
+00010540: 7265 4772 6163 6543 6f6e 7461 696e 6572  reGraceContainer
+00010550: 2e63 6f6d 6d61 6e64 6060 2074 6f20 6368  .command`` to ch
+00010560: 6f6f 7365 2062 6574 7765 656e 2074 6865  oose between the
+00010570: 7365 2e20 4c69 6c79 506f 6e64 2773 0a20  se. LilyPond's. 
+00010580: 2020 206c 6566 742d 706f 7369 7469 6f6e     left-position
+00010590: 6564 2067 7261 6365 206d 7573 6963 2063  ed grace music c
+000105a0: 6f6e 7472 6173 7473 2077 6974 6820 2272  ontrasts with "r
+000105b0: 6967 6874 2d70 6f73 6974 696f 6e65 6422  ight-positioned"
+000105c0: 2061 6674 6572 2d67 7261 6365 206d 7573   after-grace mus
+000105d0: 6963 3b20 7365 650a 2020 2020 6060 6162  ic; see.    ``ab
+000105e0: 6a61 642e 4166 7465 7247 7261 6365 436f  jad.AfterGraceCo
+000105f0: 6e74 6169 6e65 7260 602e 0a0a 2020 2020  ntainer``...    
+00010600: 4e6f 7465 2074 6861 7420 6e65 6974 6865  Note that neithe
+00010610: 7220 4c69 6c79 506f 6e64 206e 6f72 2041  r LilyPond nor A
+00010620: 626a 6164 2061 7474 656d 7074 7320 746f  bjad attempts to
+00010630: 206d 6f64 656c 2074 6865 2077 6179 7320   model the ways 
+00010640: 7468 6174 2064 6966 6665 7265 6e74 0a20  that different. 
+00010650: 2020 2063 6174 6567 6f72 6965 7320 6f66     categories of
+00010660: 2067 7261 6365 206d 7573 6963 2068 6176   grace music hav
+00010670: 6520 6265 656e 2070 6572 666f 726d 6564  e been performed
+00010680: 2068 6973 746f 7269 6361 6c6c 792e 2054   historically. T
+00010690: 7970 6f67 7261 7068 6963 2064 6966 6665  ypographic diffe
+000106a0: 7265 6e63 6573 0a20 2020 2069 6e20 736c  rences.    in sl
+000106b0: 7572 7269 6e67 2061 6e64 2073 6c61 7368  urring and slash
+000106c0: 696e 6720 6172 6520 7072 6f76 6964 6564  ing are provided
+000106d0: 2e20 4275 7420 6469 7374 696e 6374 696f  . But distinctio
+000106e0: 6e73 2062 6574 7765 656e 2028 666f 7220  ns between (for 
+000106f0: 6578 616d 706c 6529 0a20 2020 206f 6e2d  example).    on-
+00010700: 7468 652d 6265 6174 2076 6572 7375 7320  the-beat versus 
+00010710: 6265 666f 7265 2d74 6865 2d62 6561 7420  before-the-beat 
+00010720: 7065 7266 6f72 6d61 6e63 6520 6172 6520  performance are 
+00010730: 6c65 6674 2069 6d70 6c69 6369 742e 0a20  left implicit.. 
+00010740: 2020 2022 2222 0a0a 2020 2020 2323 2320     """..    ### 
+00010750: 434c 4153 5320 5641 5249 4142 4c45 5320  CLASS VARIABLES 
+00010760: 2323 230a 0a20 2020 205f 5f64 6f63 756d  ###..    __docum
+00010770: 656e 7461 7469 6f6e 5f73 6563 7469 6f6e  entation_section
+00010780: 5f5f 203d 2022 436f 6e74 6169 6e65 7273  __ = "Containers
+00010790: 220a 0a20 2020 205f 5f73 6c6f 7473 5f5f  "..    __slots__
+000107a0: 203d 2028 225f 636f 6d6d 616e 6422 2c20   = ("_command", 
+000107b0: 225f 6d61 696e 5f6c 6561 6622 290a 0a20  "_main_leaf").. 
+000107c0: 2020 205f 636f 6d6d 616e 6473 203d 2028     _commands = (
+000107d0: 0a20 2020 2020 2020 2072 225c 6163 6369  .        r"\acci
+000107e0: 6163 6361 7475 7261 222c 0a20 2020 2020  accatura",.     
+000107f0: 2020 2072 225c 6170 706f 6767 6961 7475     r"\appoggiatu
+00010800: 7261 222c 0a20 2020 2020 2020 2072 225c  ra",.        r"\
+00010810: 6772 6163 6522 2c0a 2020 2020 2020 2020  grace",.        
+00010820: 7222 5c73 6c61 7368 6564 4772 6163 6522  r"\slashedGrace"
+00010830: 2c0a 2020 2020 290a 0a20 2020 2023 2323  ,.    )..    ###
+00010840: 2049 4e49 5449 414c 495a 4552 2023 2323   INITIALIZER ###
+00010850: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+00010860: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
+00010870: 2c0a 2020 2020 2020 2020 636f 6d70 6f6e  ,.        compon
+00010880: 656e 7473 3d4e 6f6e 652c 0a20 2020 2020  ents=None,.     
+00010890: 2020 202a 2c0a 2020 2020 2020 2020 636f     *,.        co
+000108a0: 6d6d 616e 643a 2073 7472 203d 2072 225c  mmand: str = r"\
+000108b0: 6772 6163 6522 2c0a 2020 2020 2020 2020  grace",.        
+000108c0: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
+000108d0: 2265 6e67 6c69 7368 222c 0a20 2020 2020  "english",.     
+000108e0: 2020 2074 6167 3a20 5f74 6167 2e54 6167     tag: _tag.Tag
+000108f0: 203d 204e 6f6e 652c 0a20 2020 2029 202d   = None,.    ) -
+00010900: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00010910: 6966 2063 6f6d 6d61 6e64 206e 6f74 2069  if command not i
+00010920: 6e20 7365 6c66 2e5f 636f 6d6d 616e 6473  n self._commands
+00010930: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
+00010940: 7373 6167 6520 3d20 6622 756e 6b6e 6f77  ssage = f"unknow
+00010950: 6e20 636f 6d6d 616e 643a 207b 7265 7072  n command: {repr
+00010960: 2863 6f6d 6d61 6e64 297d 2e5c 6e22 0a20  (command)}.\n". 
+00010970: 2020 2020 2020 2020 2020 206d 6573 7361             messa
+00010980: 6765 202b 3d20 2220 206d 7573 7420 6265  ge += "  must be
+00010990: 2069 6e20 7b73 656c 662e 5f63 6f6d 6d61   in {self._comma
+000109a0: 6e64 737d 220a 2020 2020 2020 2020 2020  nds}".          
+000109b0: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
+000109c0: 6e28 6d65 7373 6167 6529 0a20 2020 2020  n(message).     
+000109d0: 2020 2073 656c 662e 5f63 6f6d 6d61 6e64     self._command
+000109e0: 203d 2063 6f6d 6d61 6e64 0a20 2020 2020   = command.     
+000109f0: 2020 2073 656c 662e 5f6d 6169 6e5f 6c65     self._main_le
+00010a00: 6166 203d 204e 6f6e 650a 2020 2020 2020  af = None.      
+00010a10: 2020 436f 6e74 6169 6e65 722e 5f5f 696e    Container.__in
+00010a20: 6974 5f5f 2873 656c 662c 2063 6f6d 706f  it__(self, compo
+00010a30: 6e65 6e74 732c 206c 616e 6775 6167 653d  nents, language=
+00010a40: 6c61 6e67 7561 6765 2c20 7461 673d 7461  language, tag=ta
+00010a50: 6729 0a0a 2020 2020 2323 2320 5350 4543  g)..    ### SPEC
+00010a60: 4941 4c20 4d45 5448 4f44 5320 2323 230a  IAL METHODS ###.
+00010a70: 0a20 2020 2064 6566 205f 5f67 6574 6e65  .    def __getne
+00010a80: 7761 7267 735f 5f28 7365 6c66 2920 2d3e  wargs__(self) ->
+00010a90: 2074 7570 6c65 3a0a 2020 2020 2020 2020   tuple:.        
+00010aa0: 2222 220a 2020 2020 2020 2020 4765 7473  """.        Gets
+00010ab0: 206e 6577 2067 7261 6365 2063 6f6e 7461   new grace conta
+00010ac0: 696e 6572 2061 7267 756d 656e 7473 2e0a  iner arguments..
+00010ad0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+00010ae0: 2074 7570 6c65 206f 6620 7369 6e67 6c65   tuple of single
+00010af0: 2065 6d70 7479 206c 6973 742e 0a20 2020   empty list..   
+00010b00: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00010b10: 2072 6574 7572 6e20 285b 5d2c 290a 0a20   return ([],).. 
+00010b20: 2020 2023 2323 2050 5249 5641 5445 204d     ### PRIVATE M
+00010b30: 4554 484f 4453 2023 2323 0a0a 2020 2020  ETHODS ###..    
+00010b40: 6465 6620 5f61 7474 6163 6828 7365 6c66  def _attach(self
+00010b50: 2c20 6c65 6166 293a 0a20 2020 2020 2020  , leaf):.       
+00010b60: 2069 6620 6e6f 7420 6861 7361 7474 7228   if not hasattr(
+00010b70: 6c65 6166 2c20 2277 7269 7474 656e 5f64  leaf, "written_d
+00010b80: 7572 6174 696f 6e22 293a 0a20 2020 2020  uration"):.     
+00010b90: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
+00010ba0: 6545 7272 6f72 2866 226d 7573 7420 6174  eError(f"must at
+00010bb0: 7461 6368 2074 6f20 6c65 6166 207b 6c65  tach to leaf {le
+00010bc0: 6166 2172 7d2e 2229 0a20 2020 2020 2020  af!r}.").       
+00010bd0: 206c 6561 662e 5f62 6566 6f72 655f 6772   leaf._before_gr
+00010be0: 6163 655f 636f 6e74 6169 6e65 7220 3d20  ace_container = 
+00010bf0: 7365 6c66 0a20 2020 2020 2020 2073 656c  self.        sel
+00010c00: 662e 5f6d 6169 6e5f 6c65 6166 203d 206c  f._main_leaf = l
+00010c10: 6561 660a 0a20 2020 2064 6566 205f 6465  eaf..    def _de
+00010c20: 7461 6368 2873 656c 6629 3a0a 2020 2020  tach(self):.    
+00010c30: 2020 2020 6966 2073 656c 662e 5f6d 6169      if self._mai
+00010c40: 6e5f 6c65 6166 2069 7320 6e6f 7420 4e6f  n_leaf is not No
+00010c50: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00010c60: 6d61 696e 5f6c 6561 6620 3d20 7365 6c66  main_leaf = self
+00010c70: 2e5f 6d61 696e 5f6c 6561 660a 2020 2020  ._main_leaf.    
+00010c80: 2020 2020 2020 2020 6d61 696e 5f6c 6561          main_lea
+00010c90: 662e 5f62 6566 6f72 655f 6772 6163 655f  f._before_grace_
+00010ca0: 636f 6e74 6169 6e65 7220 3d20 4e6f 6e65  container = None
+00010cb0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00010cc0: 662e 5f6d 6169 6e5f 6c65 6166 203d 204e  f._main_leaf = N
+00010cd0: 6f6e 650a 2020 2020 2020 2020 7265 7475  one.        retu
+00010ce0: 726e 2073 656c 660a 0a20 2020 2064 6566  rn self..    def
+00010cf0: 205f 666f 726d 6174 5f6f 7065 6e5f 6272   _format_open_br
+00010d00: 6163 6b65 7473 5f73 6974 6528 7365 6c66  ackets_site(self
+00010d10: 2c20 636f 6e74 7269 6275 7469 6f6e 7329  , contributions)
+00010d20: 3a0a 2020 2020 2020 2020 7265 7375 6c74  :.        result
+00010d30: 203d 205b 5d0a 2020 2020 2020 2020 7374   = [].        st
+00010d40: 7269 6e67 203d 2066 227b 7365 6c66 2e63  ring = f"{self.c
+00010d50: 6f6d 6d61 6e64 7d20 7b7b 220a 2020 2020  ommand} {{".    
+00010d60: 2020 2020 7265 7375 6c74 2e65 7874 656e      result.exten
+00010d70: 6428 5b73 7472 696e 675d 290a 2020 2020  d([string]).    
+00010d80: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+00010d90: 740a 0a20 2020 2023 2323 2050 5542 4c49  t..    ### PUBLI
+00010da0: 4320 5052 4f50 4552 5449 4553 2023 2323  C PROPERTIES ###
+00010db0: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+00010dc0: 2020 2020 6465 6620 636f 6d6d 616e 6428      def command(
+00010dd0: 7365 6c66 2920 2d3e 2073 7472 3a0a 2020  self) -> str:.  
+00010de0: 2020 2020 2020 7222 2222 0a20 2020 2020        r""".     
+00010df0: 2020 2047 6574 7320 636f 6d6d 616e 642e     Gets command.
+00010e00: 2043 686f 6f73 6573 2062 6574 7765 656e   Chooses between
+00010e10: 204c 696c 7950 6f6e 6427 7320 666f 7572   LilyPond's four
+00010e20: 2074 7970 6573 206f 6620 6c65 6674 2d70   types of left-p
+00010e30: 6f73 6974 696f 6e65 6420 6772 6163 650a  ositioned grace.
+00010e40: 2020 2020 2020 2020 6d75 7369 632e 0a0a          music...
+00010e50: 2020 2020 2020 2020 2e2e 2063 6f6e 7461          .. conta
+00010e60: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+00010e70: 2020 2020 2020 2020 2020 2020 2a2a 2856              **(V
+00010e80: 616e 696c 6c61 2920 6772 6163 6520 6e6f  anilla) grace no
+00010e90: 7465 732e 2a2a 204c 696c 7950 6f6e 6420  tes.** LilyPond 
+00010ea0: 666f 726d 6174 7320 7369 6e67 6c65 2067  formats single g
+00010eb0: 7261 6365 206e 6f74 6573 2077 6974 6820  race notes with 
+00010ec0: 6e65 6974 6865 7220 610a 2020 2020 2020  neither a.      
+00010ed0: 2020 2020 2020 736c 6173 6820 6e6f 7220        slash nor 
+00010ee0: 6120 736c 7572 3a0a 0a20 2020 2020 2020  a slur:..       
+00010ef0: 2020 2020 203e 3e3e 2076 6f69 6365 203d       >>> voice =
+00010f00: 2061 626a 6164 2e56 6f69 6365 2822 6327   abjad.Voice("c'
+00010f10: 3420 6427 3420 6527 3420 6627 3422 290a  4 d'4 e'4 f'4").
+00010f20: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00010f30: 636f 6e74 6169 6e65 7220 3d20 6162 6a61  container = abja
+00010f40: 642e 4265 666f 7265 4772 6163 6543 6f6e  d.BeforeGraceCon
+00010f50: 7461 696e 6572 2822 6373 2731 3622 290a  tainer("cs'16").
+00010f60: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00010f70: 6162 6a61 642e 6174 7461 6368 2863 6f6e  abjad.attach(con
+00010f80: 7461 696e 6572 2c20 766f 6963 655b 315d  tainer, voice[1]
+00010f90: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00010fa0: 3e20 6162 6a61 642e 7368 6f77 2876 6f69  > abjad.show(voi
+00010fb0: 6365 2920 2320 646f 6374 6573 743a 202b  ce) # doctest: +
+00010fc0: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
+00010fd0: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+00010fe0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+00010ff0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+00011000: 2e6c 696c 7970 6f6e 6428 766f 6963 6529  .lilypond(voice)
+00011010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011020: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
+00011030: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
+00011040: 2020 205c 6e65 7720 566f 6963 650a 2020     \new Voice.  
+00011050: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+00011060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011070: 2020 2020 6327 340a 2020 2020 2020 2020      c'4.        
+00011080: 2020 2020 2020 2020 2020 2020 5c67 7261              \gra
+00011090: 6365 207b 0a20 2020 2020 2020 2020 2020  ce {.           
+000110a0: 2020 2020 2020 2020 2020 2020 2063 7327               cs'
+000110b0: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
+000110c0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+000110d0: 2020 2020 2020 2020 2020 2020 2064 2734               d'4
+000110e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000110f0: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
+00011100: 2020 2020 2020 2020 2020 2020 2066 2734               f'4
+00011110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011120: 207d 0a0a 2020 2020 2020 2020 2020 2020   }..            
+00011130: 4c69 6c79 506f 6e64 206c 696b 6577 6973  LilyPond likewis
+00011140: 6520 666f 726d 6174 7320 7275 6e73 206f  e formats runs o
+00011150: 6620 6772 6163 6520 6e6f 7465 7320 7769  f grace notes wi
+00011160: 7468 206e 6569 7468 6572 2061 2073 6c61  th neither a sla
+00011170: 7368 206e 6f72 2061 0a20 2020 2020 2020  sh nor a.       
+00011180: 2020 2020 2073 6c75 723a 0a0a 2020 2020       slur:..    
+00011190: 2020 2020 2020 2020 3e3e 3e20 766f 6963          >>> voic
+000111a0: 6520 3d20 6162 6a61 642e 566f 6963 6528  e = abjad.Voice(
+000111b0: 2263 2734 2064 2734 2065 2734 2066 2734  "c'4 d'4 e'4 f'4
+000111c0: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
+000111d0: 3e3e 2063 6f6e 7461 696e 6572 203d 2061  >> container = a
+000111e0: 626a 6164 2e42 6566 6f72 6547 7261 6365  bjad.BeforeGrace
+000111f0: 436f 6e74 6169 6e65 7228 2263 7327 3136  Container("cs'16
+00011200: 2064 7327 2229 0a20 2020 2020 2020 2020   ds'").         
+00011210: 2020 203e 3e3e 2061 626a 6164 2e61 7474     >>> abjad.att
+00011220: 6163 6828 636f 6e74 6169 6e65 722c 2076  ach(container, v
+00011230: 6f69 6365 5b31 5d29 0a20 2020 2020 2020  oice[1]).       
+00011240: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
+00011250: 686f 7728 766f 6963 6529 2023 2064 6f63  how(voice) # doc
+00011260: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
+00011270: 2020 2020 2020 2020 202e 2e20 2064 6f63           ..  doc
+00011280: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
+00011290: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+000112a0: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+000112b0: 2876 6f69 6365 290a 2020 2020 2020 2020  (voice).        
+000112c0: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+000112d0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+000112e0: 2020 2020 2020 2020 2020 5c6e 6577 2056            \new V
+000112f0: 6f69 6365 0a20 2020 2020 2020 2020 2020  oice.           
+00011300: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
+00011310: 2020 2020 2020 2020 2020 2063 2734 0a20             c'4. 
+00011320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011330: 2020 205c 6772 6163 6520 7b0a 2020 2020     \grace {.    
 00011340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011350: 2020 2020 6327 340a 2020 2020 2020 2020      c'4.        
-00011360: 2020 2020 2020 2020 2020 2020 5c61 7070              \app
-00011370: 6f67 6769 6174 7572 6120 7b0a 2020 2020  oggiatura {.    
-00011380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011390: 2020 2020 6373 2731 360a 2020 2020 2020      cs'16.      
-000113a0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-000113b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000113c0: 2020 2020 6427 340a 2020 2020 2020 2020      d'4.        
-000113d0: 2020 2020 2020 2020 2020 2020 6527 340a              e'4.
-000113e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000113f0: 2020 2020 6627 340a 2020 2020 2020 2020      f'4.        
-00011400: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
-00011410: 2020 2020 2020 204c 696c 7950 6f6e 6420         LilyPond 
-00011420: 6c69 6b65 7769 7365 2066 6f72 6d61 7473  likewise formats
-00011430: 2072 756e 7320 6f66 2061 7070 6f67 6769   runs of appoggi
-00011440: 6174 7572 6173 2077 6974 6820 6f6e 6c79  aturas with only
-00011450: 2061 2073 6c75 723a 0a0a 2020 2020 2020   a slur:..      
-00011460: 2020 2020 2020 3e3e 3e20 766f 6963 6520        >>> voice 
-00011470: 3d20 6162 6a61 642e 566f 6963 6528 2263  = abjad.Voice("c
-00011480: 2734 2064 2734 2065 2734 2066 2734 2229  '4 d'4 e'4 f'4")
-00011490: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-000114a0: 2063 6f6e 7461 696e 6572 203d 2061 626a   container = abj
-000114b0: 6164 2e42 6566 6f72 6547 7261 6365 436f  ad.BeforeGraceCo
-000114c0: 6e74 6169 6e65 7228 0a20 2020 2020 2020  ntainer(.       
-000114d0: 2020 2020 202e 2e2e 2020 2020 2022 6373       ...     "cs
-000114e0: 2731 3620 6473 2722 2c20 636f 6d6d 616e  '16 ds'", comman
-000114f0: 643d 7222 5c61 7070 6f67 6769 6174 7572  d=r"\appoggiatur
-00011500: 6122 0a20 2020 2020 2020 2020 2020 202e  a".            .
-00011510: 2e2e 2029 0a20 2020 2020 2020 2020 2020  .. ).           
-00011520: 203e 3e3e 2061 626a 6164 2e61 7474 6163   >>> abjad.attac
-00011530: 6828 636f 6e74 6169 6e65 722c 2076 6f69  h(container, voi
-00011540: 6365 5b31 5d29 0a20 2020 2020 2020 2020  ce[1]).         
-00011550: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
-00011560: 7728 766f 6963 6529 2023 2064 6f63 7465  w(voice) # docte
-00011570: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-00011580: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-00011590: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
-000115a0: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-000115b0: 6162 6a61 642e 6c69 6c79 706f 6e64 2876  abjad.lilypond(v
-000115c0: 6f69 6365 290a 2020 2020 2020 2020 2020  oice).          
-000115d0: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-000115e0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-000115f0: 2020 2020 2020 2020 5c6e 6577 2056 6f69          \new Voi
-00011600: 6365 0a20 2020 2020 2020 2020 2020 2020  ce.             
-00011610: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00011620: 2020 2020 2020 2020 2063 2734 0a20 2020           c'4.   
+00011350: 2020 2020 6373 2731 360a 2020 2020 2020      cs'16.      
+00011360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011370: 2020 6473 2731 360a 2020 2020 2020 2020    ds'16.        
+00011380: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00011390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000113a0: 2020 6427 340a 2020 2020 2020 2020 2020    d'4.          
+000113b0: 2020 2020 2020 2020 2020 6527 340a 2020            e'4.  
+000113c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000113d0: 2020 6627 340a 2020 2020 2020 2020 2020    f'4.          
+000113e0: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
+000113f0: 202e 2e20 636f 6e74 6169 6e65 723a 3a20   .. container:: 
+00011400: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+00011410: 2020 2020 202a 2a41 6363 6961 6363 6174       **Acciaccat
+00011420: 7572 6173 2e2a 2a20 4c69 6c79 506f 6e64  uras.** LilyPond
+00011430: 2066 6f72 6d61 7473 2073 696e 676c 6520   formats single 
+00011440: 6163 6369 6163 6361 7475 7261 7320 7769  acciaccaturas wi
+00011450: 7468 2062 6f74 6820 6120 736c 6173 680a  th both a slash.
+00011460: 2020 2020 2020 2020 2020 2020 616e 6420              and 
+00011470: 6120 736c 7572 3a0a 0a20 2020 2020 2020  a slur:..       
+00011480: 2020 2020 203e 3e3e 2076 6f69 6365 203d       >>> voice =
+00011490: 2061 626a 6164 2e56 6f69 6365 2822 6327   abjad.Voice("c'
+000114a0: 3420 6427 3420 6527 3420 6627 3422 290a  4 d'4 e'4 f'4").
+000114b0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+000114c0: 636f 6e74 6169 6e65 7220 3d20 6162 6a61  container = abja
+000114d0: 642e 4265 666f 7265 4772 6163 6543 6f6e  d.BeforeGraceCon
+000114e0: 7461 696e 6572 280a 2020 2020 2020 2020  tainer(.        
+000114f0: 2020 2020 2e2e 2e20 2020 2020 2263 7327      ...     "cs'
+00011500: 3136 222c 2063 6f6d 6d61 6e64 3d72 225c  16", command=r"\
+00011510: 6163 6369 6163 6361 7475 7261 220a 2020  acciaccatura".  
+00011520: 2020 2020 2020 2020 2020 2e2e 2e20 290a            ... ).
+00011530: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00011540: 6162 6a61 642e 6174 7461 6368 2863 6f6e  abjad.attach(con
+00011550: 7461 696e 6572 2c20 766f 6963 655b 315d  tainer, voice[1]
+00011560: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00011570: 3e20 6162 6a61 642e 7368 6f77 2876 6f69  > abjad.show(voi
+00011580: 6365 2920 2320 646f 6374 6573 743a 202b  ce) # doctest: +
+00011590: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
+000115a0: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+000115b0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+000115c0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+000115d0: 2e6c 696c 7970 6f6e 6428 766f 6963 6529  .lilypond(voice)
+000115e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000115f0: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
+00011600: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
+00011610: 2020 205c 6e65 7720 566f 6963 650a 2020     \new Voice.  
+00011620: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
 00011630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011640: 205c 6170 706f 6767 6961 7475 7261 207b   \appoggiatura {
-00011650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011660: 2020 2020 2020 2020 2063 7327 3136 0a20           cs'16. 
+00011640: 2020 2020 6327 340a 2020 2020 2020 2020      c'4.        
+00011650: 2020 2020 2020 2020 2020 2020 5c61 6363              \acc
+00011660: 6961 6363 6174 7572 6120 7b0a 2020 2020  iaccatura {.    
 00011670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011680: 2020 2020 2020 2064 7327 3136 0a20 2020         ds'16.   
-00011690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000116a0: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
-000116b0: 2020 2020 2020 2064 2734 0a20 2020 2020         d'4.     
-000116c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000116d0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-000116e0: 2020 2020 2020 2066 2734 0a20 2020 2020         f'4.     
-000116f0: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
-00011700: 2020 2020 2020 2e2e 2063 6f6e 7461 696e        .. contain
-00011710: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-00011720: 2020 2020 2020 2020 2020 2a2a 536c 6173            **Slas
-00011730: 6865 6420 6772 6163 6520 6e6f 7465 732e  hed grace notes.
-00011740: 2a2a 204c 696c 7950 6f6e 6420 666f 726d  ** LilyPond form
-00011750: 6174 7320 7369 6e67 6c65 2073 6c61 7368  ats single slash
-00011760: 6564 2067 7261 6365 206e 6f74 6573 2077  ed grace notes w
-00011770: 6974 680a 2020 2020 2020 2020 2020 2020  ith.            
-00011780: 6f6e 6c79 2061 2073 6c61 7368 3b20 6e6f  only a slash; no
-00011790: 2073 6c75 7220 6973 2069 6e63 6c75 6465   slur is include
-000117a0: 643a 0a0a 2020 2020 2020 2020 2020 2020  d:..            
-000117b0: 3e3e 3e20 766f 6963 6520 3d20 6162 6a61  >>> voice = abja
-000117c0: 642e 566f 6963 6528 2263 2734 2064 2734  d.Voice("c'4 d'4
-000117d0: 2065 2734 2066 2734 2229 0a20 2020 2020   e'4 f'4").     
-000117e0: 2020 2020 2020 203e 3e3e 2063 6f6e 7461         >>> conta
-000117f0: 696e 6572 203d 2061 626a 6164 2e42 6566  iner = abjad.Bef
-00011800: 6f72 6547 7261 6365 436f 6e74 6169 6e65  oreGraceContaine
-00011810: 7228 0a20 2020 2020 2020 2020 2020 202e  r(.            .
-00011820: 2e2e 2020 2020 2022 6373 2731 3622 2c20  ..     "cs'16", 
-00011830: 636f 6d6d 616e 643d 7222 5c73 6c61 7368  command=r"\slash
-00011840: 6564 4772 6163 6522 0a20 2020 2020 2020  edGrace".       
-00011850: 2020 2020 202e 2e2e 2029 0a20 2020 2020       ... ).     
-00011860: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-00011870: 2e61 7474 6163 6828 636f 6e74 6169 6e65  .attach(containe
-00011880: 722c 2076 6f69 6365 5b31 5d29 0a20 2020  r, voice[1]).   
-00011890: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
-000118a0: 6164 2e73 686f 7728 766f 6963 6529 2023  ad.show(voice) #
-000118b0: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
-000118c0: 0a20 2020 2020 2020 2020 2020 202e 2e20  .            .. 
-000118d0: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
-000118e0: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
-000118f0: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
-00011900: 706f 6e64 2876 6f69 6365 290a 2020 2020  pond(voice).    
-00011910: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00011920: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
-00011930: 2020 2020 2020 2020 2020 2020 2020 5c6e                \n
-00011940: 6577 2056 6f69 6365 0a20 2020 2020 2020  ew Voice.       
-00011950: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00011960: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00011970: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00011980: 2020 2020 2020 205c 736c 6173 6865 6447         \slashedG
-00011990: 7261 6365 207b 0a20 2020 2020 2020 2020  race {.         
-000119a0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-000119b0: 7327 3136 0a20 2020 2020 2020 2020 2020  s'16.           
-000119c0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-000119d0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-000119e0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-000119f0: 2020 2020 2020 2065 2734 0a20 2020 2020         e'4.     
-00011a00: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00011a10: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00011a20: 2020 207d 0a0a 2020 2020 2020 2020 2020     }..          
-00011a30: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
-00011a40: 3a20 6578 616d 706c 6520 6578 6365 7074  : example except
-00011a50: 696f 6e0a 0a20 2020 2020 2020 2020 2020  ion..           
-00011a60: 2020 2020 2042 7574 204c 696c 7950 6f6e       But LilyPon
-00011a70: 6420 6661 696c 7320 746f 2073 6c61 7368  d fails to slash
-00011a80: 2072 756e 7320 6f66 2022 736c 6173 6865   runs of "slashe
-00011a90: 6422 2067 7261 6365 206e 6f74 6573 2e20  d" grace notes. 
-00011aa0: 5468 6973 2069 7320 610a 2020 2020 2020  This is a.      
-00011ab0: 2020 2020 2020 2020 2020 6c6f 6e67 7374            longst
-00011ac0: 616e 6469 6e67 204c 696c 7950 6f6e 6420  anding LilyPond 
-00011ad0: 6275 673a 0a0a 2020 2020 2020 2020 2020  bug:..          
-00011ae0: 2020 2020 2020 3e3e 3e20 766f 6963 6520        >>> voice 
-00011af0: 3d20 6162 6a61 642e 566f 6963 6528 2263  = abjad.Voice("c
-00011b00: 2734 2064 2734 2065 2734 2066 2734 2229  '4 d'4 e'4 f'4")
-00011b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011b20: 203e 3e3e 2063 6f6e 7461 696e 6572 203d   >>> container =
-00011b30: 2061 626a 6164 2e42 6566 6f72 6547 7261   abjad.BeforeGra
-00011b40: 6365 436f 6e74 6169 6e65 7228 0a20 2020  ceContainer(.   
-00011b50: 2020 2020 2020 2020 2020 2020 202e 2e2e               ...
-00011b60: 2020 2020 2022 6373 2731 3620 6473 2722       "cs'16 ds'"
-00011b70: 2c20 636f 6d6d 616e 643d 7222 5c73 6c61  , command=r"\sla
-00011b80: 7368 6564 4772 6163 6522 0a20 2020 2020  shedGrace".     
-00011b90: 2020 2020 2020 2020 2020 202e 2e2e 2029             ... )
-00011ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011bb0: 203e 3e3e 2061 626a 6164 2e61 7474 6163   >>> abjad.attac
-00011bc0: 6828 636f 6e74 6169 6e65 722c 2076 6f69  h(container, voi
-00011bd0: 6365 5b31 5d29 0a20 2020 2020 2020 2020  ce[1]).         
-00011be0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-00011bf0: 2e73 686f 7728 766f 6963 6529 2023 2064  .show(voice) # d
-00011c00: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
-00011c10: 2020 2020 2020 2020 2020 2020 2020 202e                 .
-00011c20: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
-00011c30: 2020 2020 2020 2020 2020 2020 2020 203e                 >
-00011c40: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
-00011c50: 642e 6c69 6c79 706f 6e64 2876 6f69 6365  d.lilypond(voice
-00011c60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00011c70: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-00011c80: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-00011c90: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
-00011ca0: 2056 6f69 6365 0a20 2020 2020 2020 2020   Voice.         
-00011cb0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-00011cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011cd0: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
-00011ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011cf0: 205c 736c 6173 6865 6447 7261 6365 207b   \slashedGrace {
-00011d00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011d10: 2020 2020 2020 2020 2020 2020 2063 7327               cs'
-00011d20: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
-00011d30: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00011d40: 7327 3136 0a20 2020 2020 2020 2020 2020  s'16.           
-00011d50: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
-00011d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d70: 2020 2020 2020 2064 2734 0a20 2020 2020         d'4.     
+00011680: 2020 2020 6373 2731 360a 2020 2020 2020      cs'16.      
+00011690: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+000116a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000116b0: 2020 2020 6427 340a 2020 2020 2020 2020      d'4.        
+000116c0: 2020 2020 2020 2020 2020 2020 6527 340a              e'4.
+000116d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000116e0: 2020 2020 6627 340a 2020 2020 2020 2020      f'4.        
+000116f0: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
+00011700: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
+00011710: 696e 6572 3a3a 2065 7861 6d70 6c65 2065  iner:: example e
+00011720: 7863 6570 7469 6f6e 0a0a 2020 2020 2020  xception..      
+00011730: 2020 2020 2020 2020 2020 4275 7420 4c69            But Li
+00011740: 6c79 506f 6e64 2066 6169 6c73 2074 6f20  lyPond fails to 
+00011750: 736c 6173 6820 7275 6e73 206f 6620 6163  slash runs of ac
+00011760: 6369 6163 6361 7475 7261 732e 2054 6869  ciaccaturas. Thi
+00011770: 7320 6265 6861 7669 6f72 2069 7320 610a  s behavior is a.
+00011780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011790: 6c6f 6e67 7374 616e 6469 6e67 204c 696c  longstanding Lil
+000117a0: 7950 6f6e 6420 6275 673a 0a0a 2020 2020  yPond bug:..    
+000117b0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+000117c0: 766f 6963 6520 3d20 6162 6a61 642e 566f  voice = abjad.Vo
+000117d0: 6963 6528 2263 2734 2064 2734 2065 2734  ice("c'4 d'4 e'4
+000117e0: 2066 2734 2229 0a20 2020 2020 2020 2020   f'4").         
+000117f0: 2020 2020 2020 203e 3e3e 2063 6f6e 7461         >>> conta
+00011800: 696e 6572 203d 2061 626a 6164 2e42 6566  iner = abjad.Bef
+00011810: 6f72 6547 7261 6365 436f 6e74 6169 6e65  oreGraceContaine
+00011820: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
+00011830: 2020 202e 2e2e 2020 2020 2022 6373 2731     ...     "cs'1
+00011840: 3620 6473 2722 2c20 636f 6d6d 616e 643d  6 ds'", command=
+00011850: 7222 5c61 6363 6961 6363 6174 7572 6122  r"\acciaccatura"
+00011860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011870: 202e 2e2e 2029 0a20 2020 2020 2020 2020   ... ).         
+00011880: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+00011890: 2e61 7474 6163 6828 636f 6e74 6169 6e65  .attach(containe
+000118a0: 722c 2076 6f69 6365 5b31 5d29 0a20 2020  r, voice[1]).   
+000118b0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+000118c0: 2061 626a 6164 2e73 686f 7728 766f 6963   abjad.show(voic
+000118d0: 6529 2023 2064 6f63 7465 7374 3a20 2b53  e) # doctest: +S
+000118e0: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
+000118f0: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
+00011900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011910: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+00011920: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+00011930: 2876 6f69 6365 290a 2020 2020 2020 2020  (voice).        
+00011940: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00011950: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
+00011960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011970: 2020 5c6e 6577 2056 6f69 6365 0a20 2020    \new Voice.   
+00011980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011990: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+000119a0: 2020 2020 2020 2020 2020 2063 2734 0a20             c'4. 
+000119b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000119c0: 2020 2020 2020 205c 6163 6369 6163 6361         \acciacca
+000119d0: 7475 7261 207b 0a20 2020 2020 2020 2020  tura {.         
+000119e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000119f0: 2020 2063 7327 3136 0a20 2020 2020 2020     cs'16.       
+00011a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a10: 2020 2020 2064 7327 3136 0a20 2020 2020       ds'16.     
+00011a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a30: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+00011a40: 2020 2020 2020 2020 2020 2020 2064 2734               d'4
+00011a50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011a60: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
+00011a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a80: 2020 2020 2066 2734 0a20 2020 2020 2020       f'4.       
+00011a90: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
+00011aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011ab0: 2e2e 2020 6e6f 7465 3a3a 204c 696c 7950  ..  note:: LilyP
+00011ac0: 6f6e 6420 6661 696c 7320 746f 2073 6c61  ond fails to sla
+00011ad0: 7368 2072 756e 7320 6f66 2061 6363 6961  sh runs of accia
+00011ae0: 6363 6174 7572 6173 2e0a 0a20 2020 2020  ccaturas...     
+00011af0: 2020 202e 2e20 636f 6e74 6169 6e65 723a     .. container:
+00011b00: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
+00011b10: 2020 2020 2020 202a 2a41 7070 6f67 6769         **Appoggi
+00011b20: 6174 7572 6173 2e2a 2a20 4c69 6c79 506f  aturas.** LilyPo
+00011b30: 6e64 2066 6f72 6d61 7473 2073 696e 676c  nd formats singl
+00011b40: 6520 6170 706f 6767 6961 7475 7261 7320  e appoggiaturas 
+00011b50: 7769 7468 206f 6e6c 7920 6120 736c 7572  with only a slur
+00011b60: 3b20 6e6f 0a20 2020 2020 2020 2020 2020  ; no.           
+00011b70: 2073 6c61 7368 2069 7320 696e 636c 7564   slash is includ
+00011b80: 6564 3a0a 0a20 2020 2020 2020 2020 2020  ed:..           
+00011b90: 203e 3e3e 2076 6f69 6365 203d 2061 626a   >>> voice = abj
+00011ba0: 6164 2e56 6f69 6365 2822 6327 3420 6427  ad.Voice("c'4 d'
+00011bb0: 3420 6527 3420 6627 3422 290a 2020 2020  4 e'4 f'4").    
+00011bc0: 2020 2020 2020 2020 3e3e 3e20 636f 6e74          >>> cont
+00011bd0: 6169 6e65 7220 3d20 6162 6a61 642e 4265  ainer = abjad.Be
+00011be0: 666f 7265 4772 6163 6543 6f6e 7461 696e  foreGraceContain
+00011bf0: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
+00011c00: 2e2e 2e20 2020 2020 2263 7327 3136 222c  ...     "cs'16",
+00011c10: 2063 6f6d 6d61 6e64 3d72 225c 6170 706f   command=r"\appo
+00011c20: 6767 6961 7475 7261 220a 2020 2020 2020  ggiatura".      
+00011c30: 2020 2020 2020 2e2e 2e20 290a 2020 2020        ... ).    
+00011c40: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+00011c50: 642e 6174 7461 6368 2863 6f6e 7461 696e  d.attach(contain
+00011c60: 6572 2c20 766f 6963 655b 315d 290a 2020  er, voice[1]).  
+00011c70: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+00011c80: 6a61 642e 7368 6f77 2876 6f69 6365 2920  jad.show(voice) 
+00011c90: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
+00011ca0: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
+00011cb0: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
+00011cc0: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+00011cd0: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+00011ce0: 7970 6f6e 6428 766f 6963 6529 0a20 2020  ypond(voice).   
+00011cf0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+00011d00: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
+00011d10: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+00011d20: 6e65 7720 566f 6963 650a 2020 2020 2020  new Voice.      
+00011d30: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+00011d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d50: 6327 340a 2020 2020 2020 2020 2020 2020  c'4.            
+00011d60: 2020 2020 2020 2020 5c61 7070 6f67 6769          \appoggi
+00011d70: 6174 7572 6120 7b0a 2020 2020 2020 2020  atura {.        
 00011d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d90: 2020 2065 2734 0a20 2020 2020 2020 2020     e'4.         
-00011da0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00011db0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00011dc0: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
-00011dd0: 2020 2020 2020 2020 2020 2e2e 2020 6e6f            ..  no
-00011de0: 7465 3a3a 204c 696c 7950 6f6e 6420 6661  te:: LilyPond fa
-00011df0: 696c 7320 746f 2073 6c61 7368 2072 756e  ils to slash run
-00011e00: 7320 6f66 2022 736c 6173 6865 6422 2067  s of "slashed" g
-00011e10: 7261 6365 206e 6f74 6573 2e0a 0a20 2020  race notes...   
-00011e20: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
-00011e30: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-00011e40: 2020 2020 2020 2020 2020 4c69 6c79 506f            LilyPo
-00011e50: 6e64 2060 605c 6163 6369 6163 6361 7475  nd ``\acciaccatu
-00011e60: 7261 6060 2c20 6060 5c61 7070 6f67 6769  ra``, ``\appoggi
-00011e70: 6174 7572 6160 6020 6172 6520 7379 6e74  atura`` are synt
-00011e80: 6163 7469 6320 7375 6761 722e 0a0a 2020  actic sugar...  
-00011e90: 2020 2020 2020 2020 2020 2e2e 2063 6f6e            .. con
-00011ea0: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
-00011eb0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011ec0: 2020 2a2a 4772 6163 6520 6e6f 7465 7320    **Grace notes 
-00011ed0: 7769 7468 2073 6c75 7220 6d61 7920 6265  with slur may be
-00011ee0: 2075 7365 6420 696e 7374 6561 6420 6f66   used instead of
-00011ef0: 2061 7070 6f67 6769 6174 7572 613a 2a2a   appoggiatura:**
-00011f00: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011f10: 2020 3e3e 3e20 766f 6963 6520 3d20 6162    >>> voice = ab
-00011f20: 6a61 642e 566f 6963 6528 2263 2734 2064  jad.Voice("c'4 d
-00011f30: 2734 2065 2734 2066 2734 2229 0a20 2020  '4 e'4 f'4").   
-00011f40: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-00011f50: 2063 6f6e 7461 696e 6572 203d 2061 626a   container = abj
-00011f60: 6164 2e42 6566 6f72 6547 7261 6365 436f  ad.BeforeGraceCo
-00011f70: 6e74 6169 6e65 7228 2263 7327 3136 2229  ntainer("cs'16")
-00011f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011f90: 203e 3e3e 2061 626a 6164 2e61 7474 6163   >>> abjad.attac
-00011fa0: 6828 636f 6e74 6169 6e65 722c 2076 6f69  h(container, voi
-00011fb0: 6365 5b31 5d29 0a20 2020 2020 2020 2020  ce[1]).         
-00011fc0: 2020 2020 2020 203e 3e3e 206c 6561 7665         >>> leave
-00011fd0: 7320 3d20 6162 6a61 642e 7365 6c65 6374  s = abjad.select
-00011fe0: 2e6c 6561 7665 7328 766f 6963 6529 5b31  .leaves(voice)[1
-00011ff0: 3a33 5d0a 2020 2020 2020 2020 2020 2020  :3].            
-00012000: 2020 2020 3e3e 3e20 6162 6a61 642e 736c      >>> abjad.sl
-00012010: 7572 286c 6561 7665 7329 0a20 2020 2020  ur(leaves).     
-00012020: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
-00012030: 626a 6164 2e73 686f 7728 766f 6963 6529  bjad.show(voice)
-00012040: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
-00012050: 500a 0a20 2020 2020 2020 2020 2020 2020  P..             
-00012060: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+00011d90: 6373 2731 360a 2020 2020 2020 2020 2020  cs'16.          
+00011da0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00011db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011dc0: 6427 340a 2020 2020 2020 2020 2020 2020  d'4.            
+00011dd0: 2020 2020 2020 2020 6527 340a 2020 2020          e'4.    
+00011de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011df0: 6627 340a 2020 2020 2020 2020 2020 2020  f'4.            
+00011e00: 2020 2020 7d0a 0a20 2020 2020 2020 2020      }..         
+00011e10: 2020 204c 696c 7950 6f6e 6420 6c69 6b65     LilyPond like
+00011e20: 7769 7365 2066 6f72 6d61 7473 2072 756e  wise formats run
+00011e30: 7320 6f66 2061 7070 6f67 6769 6174 7572  s of appoggiatur
+00011e40: 6173 2077 6974 6820 6f6e 6c79 2061 2073  as with only a s
+00011e50: 6c75 723a 0a0a 2020 2020 2020 2020 2020  lur:..          
+00011e60: 2020 3e3e 3e20 766f 6963 6520 3d20 6162    >>> voice = ab
+00011e70: 6a61 642e 566f 6963 6528 2263 2734 2064  jad.Voice("c'4 d
+00011e80: 2734 2065 2734 2066 2734 2229 0a20 2020  '4 e'4 f'4").   
+00011e90: 2020 2020 2020 2020 203e 3e3e 2063 6f6e           >>> con
+00011ea0: 7461 696e 6572 203d 2061 626a 6164 2e42  tainer = abjad.B
+00011eb0: 6566 6f72 6547 7261 6365 436f 6e74 6169  eforeGraceContai
+00011ec0: 6e65 7228 0a20 2020 2020 2020 2020 2020  ner(.           
+00011ed0: 202e 2e2e 2020 2020 2022 6373 2731 3620   ...     "cs'16 
+00011ee0: 6473 2722 2c20 636f 6d6d 616e 643d 7222  ds'", command=r"
+00011ef0: 5c61 7070 6f67 6769 6174 7572 6122 0a20  \appoggiatura". 
+00011f00: 2020 2020 2020 2020 2020 202e 2e2e 2029             ... )
+00011f10: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00011f20: 2061 626a 6164 2e61 7474 6163 6828 636f   abjad.attach(co
+00011f30: 6e74 6169 6e65 722c 2076 6f69 6365 5b31  ntainer, voice[1
+00011f40: 5d29 0a20 2020 2020 2020 2020 2020 203e  ]).            >
+00011f50: 3e3e 2061 626a 6164 2e73 686f 7728 766f  >> abjad.show(vo
+00011f60: 6963 6529 2023 2064 6f63 7465 7374 3a20  ice) # doctest: 
+00011f70: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+00011f80: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+00011f90: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+00011fa0: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+00011fb0: 642e 6c69 6c79 706f 6e64 2876 6f69 6365  d.lilypond(voice
+00011fc0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00011fd0: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+00011fe0: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+00011ff0: 2020 2020 5c6e 6577 2056 6f69 6365 0a20      \new Voice. 
+00012000: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+00012010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012020: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
+00012030: 2020 2020 2020 2020 2020 2020 205c 6170               \ap
+00012040: 706f 6767 6961 7475 7261 207b 0a20 2020  poggiatura {.   
+00012050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012060: 2020 2020 2063 7327 3136 0a20 2020 2020       cs'16.     
 00012070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012080: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-00012090: 6162 6a61 642e 6c69 6c79 706f 6e64 2876  abjad.lilypond(v
-000120a0: 6f69 6365 290a 2020 2020 2020 2020 2020  oice).          
-000120b0: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-000120c0: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+00012080: 2020 2064 7327 3136 0a20 2020 2020 2020     ds'16.       
+00012090: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+000120a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000120b0: 2020 2064 2734 0a20 2020 2020 2020 2020     d'4.         
+000120c0: 2020 2020 2020 2020 2020 2065 2734 0a20             e'4. 
 000120d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000120e0: 5c6e 6577 2056 6f69 6365 0a20 2020 2020  \new Voice.     
-000120f0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-00012100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012110: 2020 2020 2020 2020 2063 2734 0a20 2020           c'4.   
-00012120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012130: 2020 2020 205c 6772 6163 6520 7b0a 2020       \grace {.  
-00012140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012150: 2020 2020 2020 2020 2020 6373 2731 360a            cs'16.
-00012160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012170: 2020 2020 2020 2020 2020 2020 280a 2020              (.  
-00012180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012190: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-000121a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000121b0: 6427 340a 2020 2020 2020 2020 2020 2020  d'4.            
-000121c0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-000121d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000121e0: 2020 2020 2020 6527 340a 2020 2020 2020        e'4.      
-000121f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012200: 2020 6627 340a 2020 2020 2020 2020 2020    f'4.          
-00012210: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
-00012220: 2020 2020 2020 2020 202e 2e20 636f 6e74           .. cont
-00012230: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-00012240: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012250: 202a 2a53 6c61 7368 6564 2067 7261 6365   **Slashed grace
-00012260: 206e 6f74 6573 2077 6974 6820 736c 7572   notes with slur
-00012270: 206d 6179 2062 6520 7573 6564 2069 6e73   may be used ins
-00012280: 7465 6164 206f 6620 6163 6369 6163 6361  tead of acciacca
-00012290: 7475 7261 3a2a 2a0a 0a20 2020 2020 2020  tura:**..       
-000122a0: 2020 2020 2020 2020 203e 3e3e 2076 6f69           >>> voi
-000122b0: 6365 203d 2061 626a 6164 2e56 6f69 6365  ce = abjad.Voice
-000122c0: 2822 6327 3420 6427 3420 6527 3420 6627  ("c'4 d'4 e'4 f'
-000122d0: 3422 290a 2020 2020 2020 2020 2020 2020  4").            
-000122e0: 2020 2020 3e3e 3e20 636f 6e74 6169 6e65      >>> containe
-000122f0: 7220 3d20 6162 6a61 642e 4265 666f 7265  r = abjad.Before
-00012300: 4772 6163 6543 6f6e 7461 696e 6572 280a  GraceContainer(.
-00012310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012320: 2e2e 2e20 2020 2020 2263 7327 3136 222c  ...     "cs'16",
-00012330: 2063 6f6d 6d61 6e64 3d72 225c 736c 6173   command=r"\slas
-00012340: 6865 6447 7261 6365 220a 2020 2020 2020  hedGrace".      
-00012350: 2020 2020 2020 2020 2020 2e2e 2e20 290a            ... ).
-00012360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012370: 3e3e 3e20 6162 6a61 642e 6174 7461 6368  >>> abjad.attach
-00012380: 2863 6f6e 7461 696e 6572 2c20 766f 6963  (container, voic
-00012390: 655b 315d 290a 2020 2020 2020 2020 2020  e[1]).          
-000123a0: 2020 2020 2020 3e3e 3e20 6c65 6176 6573        >>> leaves
-000123b0: 203d 2061 626a 6164 2e73 656c 6563 742e   = abjad.select.
-000123c0: 6c65 6176 6573 2876 6f69 6365 295b 313a  leaves(voice)[1:
-000123d0: 335d 0a20 2020 2020 2020 2020 2020 2020  3].             
-000123e0: 2020 203e 3e3e 2061 626a 6164 2e73 6c75     >>> abjad.slu
-000123f0: 7228 6c65 6176 6573 290a 2020 2020 2020  r(leaves).      
-00012400: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
-00012410: 6a61 642e 7368 6f77 2876 6f69 6365 2920  jad.show(voice) 
-00012420: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
-00012430: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012440: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
-00012450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012460: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-00012470: 626a 6164 2e6c 696c 7970 6f6e 6428 766f  bjad.lilypond(vo
-00012480: 6963 6529 0a20 2020 2020 2020 2020 2020  ice).           
-00012490: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
-000124a0: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
-000124b0: 2020 2020 2020 2020 2020 2020 2020 205c                 \
-000124c0: 6e65 7720 566f 6963 650a 2020 2020 2020  new Voice.      
-000124d0: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-000124e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000124f0: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
-00012500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012510: 2020 2020 5c73 6c61 7368 6564 4772 6163      \slashedGrac
-00012520: 6520 7b0a 2020 2020 2020 2020 2020 2020  e {.            
-00012530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012540: 6373 2731 360a 2020 2020 2020 2020 2020  cs'16.          
-00012550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012560: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
-00012570: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-00012580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012590: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-000125a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000125b0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-000125c0: 2020 2020 2020 2020 2020 2020 6527 340a              e'4.
-000125d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000125e0: 2020 2020 2020 2020 6627 340a 2020 2020          f'4.    
-000125f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012600: 7d0a 0a20 2020 2020 2020 2022 2222 0a20  }..        """. 
-00012610: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00012620: 6c66 2e5f 636f 6d6d 616e 640a 0a0a 636c  lf._command...cl
-00012630: 6173 7320 4368 6f72 6428 4c65 6166 293a  ass Chord(Leaf):
-00012640: 0a20 2020 2022 2222 0a20 2020 2043 686f  .    """.    Cho
-00012650: 7264 2e0a 0a20 2020 202e 2e20 2063 6f6e  rd...    ..  con
-00012660: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
-00012670: 0a0a 2020 2020 2020 2020 3e3e 3e20 6368  ..        >>> ch
-00012680: 6f72 6420 3d20 6162 6a61 642e 4368 6f72  ord = abjad.Chor
-00012690: 6428 223c 6527 2063 7327 2720 6627 273e  d("<e' cs'' f''>
-000126a0: 3422 290a 2020 2020 2020 2020 3e3e 3e20  4").        >>> 
-000126b0: 6162 6a61 642e 7368 6f77 2863 686f 7264  abjad.show(chord
-000126c0: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-000126d0: 4950 0a0a 2020 2020 2020 2020 2e2e 2020  IP..        ..  
-000126e0: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
-000126f0: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-00012700: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-00012710: 6368 6f72 6429 0a20 2020 2020 2020 2020  chord).         
-00012720: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
-00012730: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
-00012740: 203c 6527 2063 7327 2720 6627 273e 340a   <e' cs'' f''>4.
-00012750: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
-00012760: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-00012770: 2020 2020 2020 5245 4752 4553 5349 4f4e        REGRESSION
-00012780: 2e20 496e 6974 6961 6c69 7a65 7320 6672  . Initializes fr
-00012790: 6f6d 206f 7468 6572 2063 686f 7264 3a0a  om other chord:.
-000127a0: 0a20 2020 2020 2020 203e 3e3e 2063 686f  .        >>> cho
-000127b0: 7264 203d 2061 626a 6164 2e43 686f 7264  rd = abjad.Chord
-000127c0: 2822 3c65 2720 6373 2727 2066 2727 3e34  ("<e' cs'' f''>4
-000127d0: 222c 206d 756c 7469 706c 6965 723d 2831  ", multiplier=(1
-000127e0: 2c20 3229 290a 2020 2020 2020 2020 3e3e  , 2)).        >>
-000127f0: 3e20 6162 6a61 642e 7368 6f77 2863 686f  > abjad.show(cho
-00012800: 7264 2920 2320 646f 6374 6573 743a 202b  rd) # doctest: +
-00012810: 534b 4950 0a0a 2020 2020 2020 2020 2e2e  SKIP..        ..
-00012820: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
-00012830: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-00012840: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-00012850: 6428 6368 6f72 6429 0a20 2020 2020 2020  d(chord).       
-00012860: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-00012870: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-00012880: 2020 203c 6527 2063 7327 2720 6627 273e     <e' cs'' f''>
-00012890: 3420 2a20 312f 320a 0a20 2020 2020 2020  4 * 1/2..       
-000128a0: 203e 3e3e 206e 6577 5f63 686f 7264 203d   >>> new_chord =
-000128b0: 2061 626a 6164 2e43 686f 7264 2863 686f   abjad.Chord(cho
-000128c0: 7264 290a 2020 2020 2020 2020 3e3e 3e20  rd).        >>> 
-000128d0: 6162 6a61 642e 7368 6f77 286e 6577 5f63  abjad.show(new_c
-000128e0: 686f 7264 2920 2320 646f 6374 6573 743a  hord) # doctest:
-000128f0: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
-00012900: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
-00012910: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
-00012920: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
-00012930: 6f6e 6428 6e65 775f 6368 6f72 6429 0a20  ond(new_chord). 
-00012940: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
-00012950: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
-00012960: 2020 2020 2020 2020 203c 6527 2063 7327           <e' cs'
-00012970: 2720 6627 273e 3420 2a20 312f 320a 0a20  ' f''>4 * 1/2.. 
-00012980: 2020 2022 2222 0a0a 2020 2020 2323 2320     """..    ### 
-00012990: 434c 4153 5320 5641 5249 4142 4c45 5320  CLASS VARIABLES 
-000129a0: 2323 230a 0a20 2020 205f 5f64 6f63 756d  ###..    __docum
-000129b0: 656e 7461 7469 6f6e 5f73 6563 7469 6f6e  entation_section
-000129c0: 5f5f 203d 2022 4c65 6176 6573 220a 0a20  __ = "Leaves".. 
-000129d0: 2020 205f 5f73 6c6f 7473 5f5f 203d 2028     __slots__ = (
-000129e0: 225f 6e6f 7465 5f68 6561 6473 222c 290a  "_note_heads",).
-000129f0: 0a20 2020 2023 2323 2049 4e49 5449 414c  .    ### INITIAL
-00012a00: 495a 4552 2023 2323 0a0a 2020 2020 6465  IZER ###..    de
-00012a10: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
-00012a20: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-00012a30: 2020 2a61 7267 756d 656e 7473 2c0a 2020    *arguments,.  
-00012a40: 2020 2020 2020 6c61 6e67 7561 6765 3a20        language: 
-00012a50: 7374 7220 3d20 2265 6e67 6c69 7368 222c  str = "english",
-00012a60: 0a20 2020 2020 2020 206d 756c 7469 706c  .        multipl
-00012a70: 6965 723a 205f 7479 7069 6e67 732e 4475  ier: _typings.Du
-00012a80: 7261 7469 6f6e 5479 7069 6e67 203d 204e  rationTyping = N
-00012a90: 6f6e 652c 0a20 2020 2020 2020 2074 6167  one,.        tag
-00012aa0: 3a20 5f74 6167 2e54 6167 203d 204e 6f6e  : _tag.Tag = Non
-00012ab0: 652c 0a20 2020 2029 202d 3e20 4e6f 6e65  e,.    ) -> None
-00012ac0: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
-00012ad0: 206c 656e 2861 7267 756d 656e 7473 2920   len(arguments) 
-00012ae0: 696e 2028 302c 2031 2c20 3229 0a20 2020  in (0, 1, 2).   
-00012af0: 2020 2020 2073 656c 662e 5f6e 6f74 655f       self._note_
-00012b00: 6865 6164 7320 3d20 4e6f 7465 4865 6164  heads = NoteHead
-00012b10: 4c69 7374 2829 0a20 2020 2020 2020 2069  List().        i
-00012b20: 6620 6c65 6e28 6172 6775 6d65 6e74 7329  f len(arguments)
-00012b30: 203d 3d20 3120 616e 6420 6973 696e 7374   == 1 and isinst
-00012b40: 616e 6365 2861 7267 756d 656e 7473 5b30  ance(arguments[0
-00012b50: 5d2c 2073 7472 293a 0a20 2020 2020 2020  ], str):.       
-00012b60: 2020 2020 2073 7472 696e 6720 3d20 6622       string = f"
-00012b70: 7b7b 207b 6172 6775 6d65 6e74 735b 305d  {{ {arguments[0]
-00012b80: 7d20 7d7d 220a 2020 2020 2020 2020 2020  } }}".          
-00012b90: 2020 7061 7273 6564 203d 2073 656c 662e    parsed = self.
-00012ba0: 5f70 6172 7365 5f6c 696c 7970 6f6e 645f  _parse_lilypond_
-00012bb0: 7374 7269 6e67 2873 7472 696e 672c 206c  string(string, l
-00012bc0: 616e 6775 6167 653d 6c61 6e67 7561 6765  anguage=language
-00012bd0: 290a 2020 2020 2020 2020 2020 2020 6173  ).            as
-00012be0: 7365 7274 206c 656e 2870 6172 7365 6429  sert len(parsed)
-00012bf0: 203d 3d20 3120 616e 6420 6973 696e 7374   == 1 and isinst
-00012c00: 616e 6365 2870 6172 7365 645b 305d 2c20  ance(parsed[0], 
-00012c10: 4c65 6166 290a 2020 2020 2020 2020 2020  Leaf).          
-00012c20: 2020 6172 6775 6d65 6e74 7320 3d20 7475    arguments = tu
-00012c30: 706c 6528 5b70 6172 7365 645b 305d 5d29  ple([parsed[0]])
-00012c40: 0a20 2020 2020 2020 2061 7265 5f63 6175  .        are_cau
-00012c50: 7469 6f6e 6172 793a 206c 6973 745b 626f  tionary: list[bo
-00012c60: 6f6c 207c 204e 6f6e 655d 203d 205b 5d0a  ol | None] = [].
-00012c70: 2020 2020 2020 2020 6172 655f 666f 7263          are_forc
-00012c80: 6564 3a20 6c69 7374 5b62 6f6f 6c20 7c20  ed: list[bool | 
-00012c90: 4e6f 6e65 5d20 3d20 5b5d 0a20 2020 2020  None] = [].     
-00012ca0: 2020 2061 7265 5f70 6172 656e 7468 6573     are_parenthes
-00012cb0: 697a 6564 3a20 6c69 7374 5b62 6f6f 6c20  ized: list[bool 
-00012cc0: 7c20 4e6f 6e65 5d20 3d20 5b5d 0a20 2020  | None] = [].   
-00012cd0: 2020 2020 2069 6620 6c65 6e28 6172 6775       if len(argu
-00012ce0: 6d65 6e74 7329 203d 3d20 3120 616e 6420  ments) == 1 and 
-00012cf0: 6973 696e 7374 616e 6365 2861 7267 756d  isinstance(argum
-00012d00: 656e 7473 5b30 5d2c 204c 6561 6629 3a0a  ents[0], Leaf):.
-00012d10: 2020 2020 2020 2020 2020 2020 6c65 6166              leaf
-00012d20: 203d 2061 7267 756d 656e 7473 5b30 5d0a   = arguments[0].
-00012d30: 2020 2020 2020 2020 2020 2020 7772 6974              writ
-00012d40: 7465 6e5f 7069 7463 6865 7320 3d20 5b5d  ten_pitches = []
-00012d50: 0a20 2020 2020 2020 2020 2020 2077 7269  .            wri
-00012d60: 7474 656e 5f64 7572 6174 696f 6e20 3d20  tten_duration = 
-00012d70: 6c65 6166 2e77 7269 7474 656e 5f64 7572  leaf.written_dur
-00012d80: 6174 696f 6e0a 2020 2020 2020 2020 2020  ation.          
-00012d90: 2020 6966 206d 756c 7469 706c 6965 7220    if multiplier 
-00012da0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00012db0: 2020 2020 2020 2020 206d 756c 7469 706c           multipl
-00012dc0: 6965 7220 3d20 6c65 6166 2e6d 756c 7469  ier = leaf.multi
-00012dd0: 706c 6965 720a 2020 2020 2020 2020 2020  plier.          
-00012de0: 2020 2320 544f 444f 3a20 6d6f 7665 2074    # TODO: move t
-00012df0: 6f20 6465 6469 6361 7465 6420 6672 6f6d  o dedicated from
-00012e00: 5f6e 6f74 6528 2920 636f 6e73 7472 7563  _note() construc
-00012e10: 746f 723a 0a20 2020 2020 2020 2020 2020  tor:.           
-00012e20: 2069 6620 6973 696e 7374 616e 6365 286c   if isinstance(l
-00012e30: 6561 662c 204e 6f74 6529 2061 6e64 206c  eaf, Note) and l
-00012e40: 6561 662e 6e6f 7465 5f68 6561 6420 6973  eaf.note_head is
-00012e50: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00012e60: 2020 2020 2020 2020 2020 2077 7269 7474             writt
-00012e70: 656e 5f70 6974 6368 6573 2e61 7070 656e  en_pitches.appen
-00012e80: 6428 6c65 6166 2e6e 6f74 655f 6865 6164  d(leaf.note_head
-00012e90: 2e77 7269 7474 656e 5f70 6974 6368 290a  .written_pitch).
-00012ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012eb0: 6172 655f 6361 7574 696f 6e61 7279 203d  are_cautionary =
-00012ec0: 205b 6c65 6166 2e6e 6f74 655f 6865 6164   [leaf.note_head
-00012ed0: 2e69 735f 6361 7574 696f 6e61 7279 5d0a  .is_cautionary].
+000120e0: 2020 2066 2734 0a20 2020 2020 2020 2020     f'4.         
+000120f0: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
+00012100: 2020 2e2e 2063 6f6e 7461 696e 6572 3a3a    .. container::
+00012110: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
+00012120: 2020 2020 2020 2a2a 536c 6173 6865 6420        **Slashed 
+00012130: 6772 6163 6520 6e6f 7465 732e 2a2a 204c  grace notes.** L
+00012140: 696c 7950 6f6e 6420 666f 726d 6174 7320  ilyPond formats 
+00012150: 7369 6e67 6c65 2073 6c61 7368 6564 2067  single slashed g
+00012160: 7261 6365 206e 6f74 6573 2077 6974 680a  race notes with.
+00012170: 2020 2020 2020 2020 2020 2020 6f6e 6c79              only
+00012180: 2061 2073 6c61 7368 3b20 6e6f 2073 6c75   a slash; no slu
+00012190: 7220 6973 2069 6e63 6c75 6465 643a 0a0a  r is included:..
+000121a0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+000121b0: 766f 6963 6520 3d20 6162 6a61 642e 566f  voice = abjad.Vo
+000121c0: 6963 6528 2263 2734 2064 2734 2065 2734  ice("c'4 d'4 e'4
+000121d0: 2066 2734 2229 0a20 2020 2020 2020 2020   f'4").         
+000121e0: 2020 203e 3e3e 2063 6f6e 7461 696e 6572     >>> container
+000121f0: 203d 2061 626a 6164 2e42 6566 6f72 6547   = abjad.BeforeG
+00012200: 7261 6365 436f 6e74 6169 6e65 7228 0a20  raceContainer(. 
+00012210: 2020 2020 2020 2020 2020 202e 2e2e 2020             ...  
+00012220: 2020 2022 6373 2731 3622 2c20 636f 6d6d     "cs'16", comm
+00012230: 616e 643d 7222 5c73 6c61 7368 6564 4772  and=r"\slashedGr
+00012240: 6163 6522 0a20 2020 2020 2020 2020 2020  ace".           
+00012250: 202e 2e2e 2029 0a20 2020 2020 2020 2020   ... ).         
+00012260: 2020 203e 3e3e 2061 626a 6164 2e61 7474     >>> abjad.att
+00012270: 6163 6828 636f 6e74 6169 6e65 722c 2076  ach(container, v
+00012280: 6f69 6365 5b31 5d29 0a20 2020 2020 2020  oice[1]).       
+00012290: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
+000122a0: 686f 7728 766f 6963 6529 2023 2064 6f63  how(voice) # doc
+000122b0: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
+000122c0: 2020 2020 2020 2020 202e 2e20 2064 6f63           ..  doc
+000122d0: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
+000122e0: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+000122f0: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+00012300: 2876 6f69 6365 290a 2020 2020 2020 2020  (voice).        
+00012310: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+00012320: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+00012330: 2020 2020 2020 2020 2020 5c6e 6577 2056            \new V
+00012340: 6f69 6365 0a20 2020 2020 2020 2020 2020  oice.           
+00012350: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
+00012360: 2020 2020 2020 2020 2020 2063 2734 0a20             c'4. 
+00012370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012380: 2020 205c 736c 6173 6865 6447 7261 6365     \slashedGrace
+00012390: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+000123a0: 2020 2020 2020 2020 2020 2063 7327 3136             cs'16
+000123b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000123c0: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+000123d0: 2020 2020 2020 2020 2020 2064 2734 0a20             d'4. 
+000123e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000123f0: 2020 2065 2734 0a20 2020 2020 2020 2020     e'4.         
+00012400: 2020 2020 2020 2020 2020 2066 2734 0a20             f'4. 
+00012410: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00012420: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
+00012430: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
+00012440: 616d 706c 6520 6578 6365 7074 696f 6e0a  ample exception.
+00012450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012460: 2042 7574 204c 696c 7950 6f6e 6420 6661   But LilyPond fa
+00012470: 696c 7320 746f 2073 6c61 7368 2072 756e  ils to slash run
+00012480: 7320 6f66 2022 736c 6173 6865 6422 2067  s of "slashed" g
+00012490: 7261 6365 206e 6f74 6573 2e20 5468 6973  race notes. This
+000124a0: 2069 7320 610a 2020 2020 2020 2020 2020   is a.          
+000124b0: 2020 2020 2020 6c6f 6e67 7374 616e 6469        longstandi
+000124c0: 6e67 204c 696c 7950 6f6e 6420 6275 673a  ng LilyPond bug:
+000124d0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000124e0: 2020 3e3e 3e20 766f 6963 6520 3d20 6162    >>> voice = ab
+000124f0: 6a61 642e 566f 6963 6528 2263 2734 2064  jad.Voice("c'4 d
+00012500: 2734 2065 2734 2066 2734 2229 0a20 2020  '4 e'4 f'4").   
+00012510: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+00012520: 2063 6f6e 7461 696e 6572 203d 2061 626a   container = abj
+00012530: 6164 2e42 6566 6f72 6547 7261 6365 436f  ad.BeforeGraceCo
+00012540: 6e74 6169 6e65 7228 0a20 2020 2020 2020  ntainer(.       
+00012550: 2020 2020 2020 2020 202e 2e2e 2020 2020           ...    
+00012560: 2022 6373 2731 3620 6473 2722 2c20 636f   "cs'16 ds'", co
+00012570: 6d6d 616e 643d 7222 5c73 6c61 7368 6564  mmand=r"\slashed
+00012580: 4772 6163 6522 0a20 2020 2020 2020 2020  Grace".         
+00012590: 2020 2020 2020 202e 2e2e 2029 0a20 2020         ... ).   
+000125a0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+000125b0: 2061 626a 6164 2e61 7474 6163 6828 636f   abjad.attach(co
+000125c0: 6e74 6169 6e65 722c 2076 6f69 6365 5b31  ntainer, voice[1
+000125d0: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
+000125e0: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
+000125f0: 7728 766f 6963 6529 2023 2064 6f63 7465  w(voice) # docte
+00012600: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+00012610: 2020 2020 2020 2020 2020 202e 2e20 2064             ..  d
+00012620: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
+00012630: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
+00012640: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
+00012650: 6c79 706f 6e64 2876 6f69 6365 290a 2020  lypond(voice).  
+00012660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012670: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+00012680: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+00012690: 2020 2020 2020 2020 5c6e 6577 2056 6f69          \new Voi
+000126a0: 6365 0a20 2020 2020 2020 2020 2020 2020  ce.             
+000126b0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+000126c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126d0: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
+000126e0: 2020 2020 2020 2020 2020 2020 205c 736c               \sl
+000126f0: 6173 6865 6447 7261 6365 207b 0a20 2020  ashedGrace {.   
+00012700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012710: 2020 2020 2020 2020 2063 7327 3136 0a20           cs'16. 
+00012720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012730: 2020 2020 2020 2020 2020 2064 7327 3136             ds'16
+00012740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012750: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00012760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012770: 2020 2064 2734 0a20 2020 2020 2020 2020     d'4.         
+00012780: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00012790: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+000127a0: 2020 2020 2020 2020 2020 2066 2734 0a20             f'4. 
+000127b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000127c0: 2020 207d 0a0a 2020 2020 2020 2020 2020     }..          
+000127d0: 2020 2020 2020 2e2e 2020 6e6f 7465 3a3a        ..  note::
+000127e0: 204c 696c 7950 6f6e 6420 6661 696c 7320   LilyPond fails 
+000127f0: 746f 2073 6c61 7368 2072 756e 7320 6f66  to slash runs of
+00012800: 2022 736c 6173 6865 6422 2067 7261 6365   "slashed" grace
+00012810: 206e 6f74 6573 2e0a 0a20 2020 2020 2020   notes...       
+00012820: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
+00012830: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
+00012840: 2020 2020 2020 4c69 6c79 506f 6e64 2060        LilyPond `
+00012850: 605c 6163 6369 6163 6361 7475 7261 6060  `\acciaccatura``
+00012860: 2c20 6060 5c61 7070 6f67 6769 6174 7572  , ``\appoggiatur
+00012870: 6160 6020 6172 6520 7379 6e74 6163 7469  a`` are syntacti
+00012880: 6320 7375 6761 722e 0a0a 2020 2020 2020  c sugar...      
+00012890: 2020 2020 2020 2e2e 2063 6f6e 7461 696e        .. contain
+000128a0: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+000128b0: 2020 2020 2020 2020 2020 2020 2020 2a2a                **
+000128c0: 4772 6163 6520 6e6f 7465 7320 7769 7468  Grace notes with
+000128d0: 2073 6c75 7220 6d61 7920 6265 2075 7365   slur may be use
+000128e0: 6420 696e 7374 6561 6420 6f66 2061 7070  d instead of app
+000128f0: 6f67 6769 6174 7572 613a 2a2a 0a0a 2020  oggiatura:**..  
+00012900: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+00012910: 3e20 766f 6963 6520 3d20 6162 6a61 642e  > voice = abjad.
+00012920: 566f 6963 6528 2263 2734 2064 2734 2065  Voice("c'4 d'4 e
+00012930: 2734 2066 2734 2229 0a20 2020 2020 2020  '4 f'4").       
+00012940: 2020 2020 2020 2020 203e 3e3e 2063 6f6e           >>> con
+00012950: 7461 696e 6572 203d 2061 626a 6164 2e42  tainer = abjad.B
+00012960: 6566 6f72 6547 7261 6365 436f 6e74 6169  eforeGraceContai
+00012970: 6e65 7228 2263 7327 3136 2229 0a20 2020  ner("cs'16").   
+00012980: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+00012990: 2061 626a 6164 2e61 7474 6163 6828 636f   abjad.attach(co
+000129a0: 6e74 6169 6e65 722c 2076 6f69 6365 5b31  ntainer, voice[1
+000129b0: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
+000129c0: 2020 203e 3e3e 206c 6561 7665 7320 3d20     >>> leaves = 
+000129d0: 6162 6a61 642e 7365 6c65 6374 2e6c 6561  abjad.select.lea
+000129e0: 7665 7328 766f 6963 6529 5b31 3a33 5d0a  ves(voice)[1:3].
+000129f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a00: 3e3e 3e20 6162 6a61 642e 736c 7572 286c  >>> abjad.slur(l
+00012a10: 6561 7665 7329 0a20 2020 2020 2020 2020  eaves).         
+00012a20: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+00012a30: 2e73 686f 7728 766f 6963 6529 2023 2064  .show(voice) # d
+00012a40: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+00012a50: 2020 2020 2020 2020 2020 2020 2020 202e                 .
+00012a60: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
+00012a70: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+00012a80: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+00012a90: 642e 6c69 6c79 706f 6e64 2876 6f69 6365  d.lilypond(voice
+00012aa0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00012ab0: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+00012ac0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+00012ad0: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
+00012ae0: 2056 6f69 6365 0a20 2020 2020 2020 2020   Voice.         
+00012af0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00012b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b10: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
+00012b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b30: 205c 6772 6163 6520 7b0a 2020 2020 2020   \grace {.      
+00012b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b50: 2020 2020 2020 6373 2731 360a 2020 2020        cs'16.    
+00012b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b70: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+00012b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b90: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+00012ba0: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
+00012bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012bc0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00012bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012be0: 2020 6527 340a 2020 2020 2020 2020 2020    e'4.          
+00012bf0: 2020 2020 2020 2020 2020 2020 2020 6627                f'
+00012c00: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+00012c10: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
+00012c20: 2020 2020 202e 2e20 636f 6e74 6169 6e65       .. containe
+00012c30: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+00012c40: 2020 2020 2020 2020 2020 2020 202a 2a53               **S
+00012c50: 6c61 7368 6564 2067 7261 6365 206e 6f74  lashed grace not
+00012c60: 6573 2077 6974 6820 736c 7572 206d 6179  es with slur may
+00012c70: 2062 6520 7573 6564 2069 6e73 7465 6164   be used instead
+00012c80: 206f 6620 6163 6369 6163 6361 7475 7261   of acciaccatura
+00012c90: 3a2a 2a0a 0a20 2020 2020 2020 2020 2020  :**..           
+00012ca0: 2020 2020 203e 3e3e 2076 6f69 6365 203d       >>> voice =
+00012cb0: 2061 626a 6164 2e56 6f69 6365 2822 6327   abjad.Voice("c'
+00012cc0: 3420 6427 3420 6527 3420 6627 3422 290a  4 d'4 e'4 f'4").
+00012cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ce0: 3e3e 3e20 636f 6e74 6169 6e65 7220 3d20  >>> container = 
+00012cf0: 6162 6a61 642e 4265 666f 7265 4772 6163  abjad.BeforeGrac
+00012d00: 6543 6f6e 7461 696e 6572 280a 2020 2020  eContainer(.    
+00012d10: 2020 2020 2020 2020 2020 2020 2e2e 2e20              ... 
+00012d20: 2020 2020 2263 7327 3136 222c 2063 6f6d      "cs'16", com
+00012d30: 6d61 6e64 3d72 225c 736c 6173 6865 6447  mand=r"\slashedG
+00012d40: 7261 6365 220a 2020 2020 2020 2020 2020  race".          
+00012d50: 2020 2020 2020 2e2e 2e20 290a 2020 2020        ... ).    
+00012d60: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00012d70: 6162 6a61 642e 6174 7461 6368 2863 6f6e  abjad.attach(con
+00012d80: 7461 696e 6572 2c20 766f 6963 655b 315d  tainer, voice[1]
+00012d90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00012da0: 2020 3e3e 3e20 6c65 6176 6573 203d 2061    >>> leaves = a
+00012db0: 626a 6164 2e73 656c 6563 742e 6c65 6176  bjad.select.leav
+00012dc0: 6573 2876 6f69 6365 295b 313a 335d 0a20  es(voice)[1:3]. 
+00012dd0: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+00012de0: 3e3e 2061 626a 6164 2e73 6c75 7228 6c65  >> abjad.slur(le
+00012df0: 6176 6573 290a 2020 2020 2020 2020 2020  aves).          
+00012e00: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+00012e10: 7368 6f77 2876 6f69 6365 2920 2320 646f  show(voice) # do
+00012e20: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
+00012e30: 2020 2020 2020 2020 2020 2020 2020 2e2e                ..
+00012e40: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
+00012e50: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+00012e60: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+00012e70: 2e6c 696c 7970 6f6e 6428 766f 6963 6529  .lilypond(voice)
+00012e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012e90: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
+00012ea0: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+00012eb0: 2020 2020 2020 2020 2020 205c 6e65 7720             \new 
+00012ec0: 566f 6963 650a 2020 2020 2020 2020 2020  Voice.          
+00012ed0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
 00012ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012ef0: 6172 655f 666f 7263 6564 203d 205b 6c65  are_forced = [le
-00012f00: 6166 2e6e 6f74 655f 6865 6164 2e69 735f  af.note_head.is_
-00012f10: 666f 7263 6564 5d0a 2020 2020 2020 2020  forced].        
-00012f20: 2020 2020 2020 2020 6172 655f 7061 7265          are_pare
-00012f30: 6e74 6865 7369 7a65 6420 3d20 5b6c 6561  nthesized = [lea
-00012f40: 662e 6e6f 7465 5f68 6561 642e 6973 5f70  f.note_head.is_p
-00012f50: 6172 656e 7468 6573 697a 6564 5d0a 2020  arenthesized].  
-00012f60: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00012f70: 7369 6e73 7461 6e63 6528 6c65 6166 2c20  sinstance(leaf, 
-00012f80: 4368 6f72 6429 3a0a 2020 2020 2020 2020  Chord):.        
-00012f90: 2020 2020 2020 2020 7772 6974 7465 6e5f          written_
-00012fa0: 7069 7463 6865 732e 6578 7465 6e64 285f  pitches.extend(_
-00012fb0: 2e77 7269 7474 656e 5f70 6974 6368 2066  .written_pitch f
-00012fc0: 6f72 205f 2069 6e20 6c65 6166 2e6e 6f74  or _ in leaf.not
-00012fd0: 655f 6865 6164 7329 0a20 2020 2020 2020  e_heads).       
-00012fe0: 2020 2020 2020 2020 2061 7265 5f63 6175           are_cau
-00012ff0: 7469 6f6e 6172 7920 3d20 5b5f 2e69 735f  tionary = [_.is_
-00013000: 6361 7574 696f 6e61 7279 2066 6f72 205f  cautionary for _
-00013010: 2069 6e20 6c65 6166 2e6e 6f74 655f 6865   in leaf.note_he
-00013020: 6164 735d 0a20 2020 2020 2020 2020 2020  ads].           
-00013030: 2020 2020 2061 7265 5f66 6f72 6365 6420       are_forced 
-00013040: 3d20 5b5f 2e69 735f 666f 7263 6564 2066  = [_.is_forced f
-00013050: 6f72 205f 2069 6e20 6c65 6166 2e6e 6f74  or _ in leaf.not
-00013060: 655f 6865 6164 735d 0a20 2020 2020 2020  e_heads].       
-00013070: 2020 2020 2020 2020 2061 7265 5f70 6172           are_par
-00013080: 656e 7468 6573 697a 6564 203d 205b 5f2e  enthesized = [_.
-00013090: 6973 5f70 6172 656e 7468 6573 697a 6564  is_parenthesized
-000130a0: 2066 6f72 205f 2069 6e20 6c65 6166 2e6e   for _ in leaf.n
-000130b0: 6f74 655f 6865 6164 735d 0a20 2020 2020  ote_heads].     
-000130c0: 2020 2023 2054 4f44 4f3a 206d 6f76 6520     # TODO: move 
-000130d0: 746f 2064 6564 6963 6174 6564 2063 6f6e  to dedicated con
-000130e0: 7374 7275 6374 6f72 3a0a 2020 2020 2020  structor:.      
-000130f0: 2020 656c 6966 206c 656e 2861 7267 756d    elif len(argum
-00013100: 656e 7473 2920 3d3d 2032 3a0a 2020 2020  ents) == 2:.    
-00013110: 2020 2020 2020 2020 7772 6974 7465 6e5f          written_
-00013120: 7069 7463 6865 732c 2077 7269 7474 656e  pitches, written
-00013130: 5f64 7572 6174 696f 6e20 3d20 6172 6775  _duration = argu
-00013140: 6d65 6e74 730a 2020 2020 2020 2020 2020  ments.          
-00013150: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00013160: 7772 6974 7465 6e5f 7069 7463 6865 732c  written_pitches,
-00013170: 2073 7472 293a 0a20 2020 2020 2020 2020   str):.         
-00013180: 2020 2020 2020 2077 7269 7474 656e 5f70         written_p
-00013190: 6974 6368 6573 203d 205b 5f20 666f 7220  itches = [_ for 
-000131a0: 5f20 696e 2077 7269 7474 656e 5f70 6974  _ in written_pit
-000131b0: 6368 6573 2e73 706c 6974 2829 2069 6620  ches.split() if 
-000131c0: 5f5d 0a20 2020 2020 2020 2020 2020 2065  _].            e
-000131d0: 6c69 6620 6973 696e 7374 616e 6365 2877  lif isinstance(w
-000131e0: 7269 7474 656e 5f70 6974 6368 6573 2c20  ritten_pitches, 
-000131f0: 7479 7065 2873 656c 6629 293a 0a20 2020  type(self)):.   
-00013200: 2020 2020 2020 2020 2020 2020 2077 7269               wri
-00013210: 7474 656e 5f70 6974 6368 6573 203d 2077  tten_pitches = w
-00013220: 7269 7474 656e 5f70 6974 6368 6573 2e77  ritten_pitches.w
-00013230: 7269 7474 656e 5f70 6974 6368 6573 0a20  ritten_pitches. 
-00013240: 2020 2020 2020 2065 6c69 6620 6c65 6e28         elif len(
-00013250: 6172 6775 6d65 6e74 7329 203d 3d20 303a  arguments) == 0:
-00013260: 0a20 2020 2020 2020 2020 2020 2077 7269  .            wri
-00013270: 7474 656e 5f70 6974 6368 6573 203d 205b  tten_pitches = [
-00013280: 5f70 6974 6368 2e4e 616d 6564 5069 7463  _pitch.NamedPitc
-00013290: 6828 5f29 2066 6f72 205f 2069 6e20 5b30  h(_) for _ in [0
-000132a0: 2c20 342c 2037 5d5d 0a20 2020 2020 2020  , 4, 7]].       
-000132b0: 2020 2020 2077 7269 7474 656e 5f64 7572       written_dur
-000132c0: 6174 696f 6e20 3d20 5f64 7572 6174 696f  ation = _duratio
-000132d0: 6e2e 4475 7261 7469 6f6e 2831 2c20 3429  n.Duration(1, 4)
-000132e0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-000132f0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00013300: 2056 616c 7565 4572 726f 7228 6622 6361   ValueError(f"ca
-00013310: 6e20 6e6f 7420 696e 6974 6961 6c69 7a65  n not initialize
-00013320: 2063 686f 7264 2066 726f 6d20 7b61 7267   chord from {arg
-00013330: 756d 656e 7473 2172 7d2e 2229 0a20 2020  uments!r}.").   
-00013340: 2020 2020 204c 6561 662e 5f5f 696e 6974       Leaf.__init
-00013350: 5f5f 2873 656c 662c 2077 7269 7474 656e  __(self, written
-00013360: 5f64 7572 6174 696f 6e2c 206d 756c 7469  _duration, multi
-00013370: 706c 6965 723d 6d75 6c74 6970 6c69 6572  plier=multiplier
-00013380: 2c20 7461 673d 7461 6729 0a20 2020 2020  , tag=tag).     
-00013390: 2020 2069 6620 6e6f 7420 6172 655f 6361     if not are_ca
-000133a0: 7574 696f 6e61 7279 3a0a 2020 2020 2020  utionary:.      
-000133b0: 2020 2020 2020 6172 655f 6361 7574 696f        are_cautio
-000133c0: 6e61 7279 203d 205b 4e6f 6e65 5d20 2a20  nary = [None] * 
-000133d0: 6c65 6e28 7772 6974 7465 6e5f 7069 7463  len(written_pitc
-000133e0: 6865 7329 0a20 2020 2020 2020 2069 6620  hes).        if 
-000133f0: 6e6f 7420 6172 655f 666f 7263 6564 3a0a  not are_forced:.
-00013400: 2020 2020 2020 2020 2020 2020 6172 655f              are_
-00013410: 666f 7263 6564 203d 205b 4e6f 6e65 5d20  forced = [None] 
-00013420: 2a20 6c65 6e28 7772 6974 7465 6e5f 7069  * len(written_pi
-00013430: 7463 6865 7329 0a20 2020 2020 2020 2069  tches).        i
-00013440: 6620 6e6f 7420 6172 655f 7061 7265 6e74  f not are_parent
-00013450: 6865 7369 7a65 643a 0a20 2020 2020 2020  hesized:.       
-00013460: 2020 2020 2061 7265 5f70 6172 656e 7468       are_parenth
-00013470: 6573 697a 6564 203d 205b 4e6f 6e65 5d20  esized = [None] 
-00013480: 2a20 6c65 6e28 7772 6974 7465 6e5f 7069  * len(written_pi
-00013490: 7463 6865 7329 0a20 2020 2020 2020 2066  tches).        f
-000134a0: 6f72 2077 7269 7474 656e 5f70 6974 6368  or written_pitch
-000134b0: 2c20 6973 5f63 6175 7469 6f6e 6172 792c  , is_cautionary,
-000134c0: 2069 735f 666f 7263 6564 2c20 6973 5f70   is_forced, is_p
-000134d0: 6172 656e 7468 6573 697a 6564 2069 6e20  arenthesized in 
-000134e0: 7a69 7028 0a20 2020 2020 2020 2020 2020  zip(.           
-000134f0: 2077 7269 7474 656e 5f70 6974 6368 6573   written_pitches
-00013500: 2c20 6172 655f 6361 7574 696f 6e61 7279  , are_cautionary
-00013510: 2c20 6172 655f 666f 7263 6564 2c20 6172  , are_forced, ar
-00013520: 655f 7061 7265 6e74 6865 7369 7a65 640a  e_parenthesized.
-00013530: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
-00013540: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-00013550: 5f63 6175 7469 6f6e 6172 793a 0a20 2020  _cautionary:.   
-00013560: 2020 2020 2020 2020 2020 2020 2069 735f               is_
-00013570: 6361 7574 696f 6e61 7279 203d 2046 616c  cautionary = Fal
-00013580: 7365 0a20 2020 2020 2020 2020 2020 2069  se.            i
-00013590: 6620 6e6f 7420 6973 5f66 6f72 6365 643a  f not is_forced:
-000135a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000135b0: 2069 735f 666f 7263 6564 203d 2046 616c   is_forced = Fal
-000135c0: 7365 0a20 2020 2020 2020 2020 2020 2069  se.            i
-000135d0: 6620 6e6f 7420 6973 5f70 6172 656e 7468  f not is_parenth
-000135e0: 6573 697a 6564 3a0a 2020 2020 2020 2020  esized:.        
-000135f0: 2020 2020 2020 2020 6973 5f70 6172 656e          is_paren
-00013600: 7468 6573 697a 6564 203d 2046 616c 7365  thesized = False
-00013610: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00013620: 7772 6974 7465 6e5f 7069 7463 6820 6e6f  written_pitch no
-00013630: 7420 696e 205f 6c79 636f 6e73 742e 6472  t in _lyconst.dr
-00013640: 756d 733a 0a20 2020 2020 2020 2020 2020  ums:.           
-00013650: 2020 2020 206e 6f74 655f 6865 6164 203d       note_head =
-00013660: 204e 6f74 6548 6561 6428 0a20 2020 2020   NoteHead(.     
-00013670: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-00013680: 7269 7474 656e 5f70 6974 6368 3d77 7269  ritten_pitch=wri
-00013690: 7474 656e 5f70 6974 6368 2c0a 2020 2020  tten_pitch,.    
-000136a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000136b0: 6973 5f63 6175 7469 6f6e 6172 793d 6973  is_cautionary=is
-000136c0: 5f63 6175 7469 6f6e 6172 792c 0a20 2020  _cautionary,.   
-000136d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000136e0: 2069 735f 666f 7263 6564 3d69 735f 666f   is_forced=is_fo
-000136f0: 7263 6564 2c0a 2020 2020 2020 2020 2020  rced,.          
-00013700: 2020 2020 2020 2020 2020 6973 5f70 6172            is_par
-00013710: 656e 7468 6573 697a 6564 3d69 735f 7061  enthesized=is_pa
-00013720: 7265 6e74 6865 7369 7a65 642c 0a20 2020  renthesized,.   
-00013730: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-00013740: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00013750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013760: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
-00013770: 6365 2877 7269 7474 656e 5f70 6974 6368  ce(written_pitch
-00013780: 2c20 7374 7229 2c20 7265 7072 2877 7269  , str), repr(wri
-00013790: 7474 656e 5f70 6974 6368 290a 2020 2020  tten_pitch).    
-000137a0: 2020 2020 2020 2020 2020 2020 6e6f 7465              note
-000137b0: 5f68 6561 6420 3d20 4472 756d 4e6f 7465  _head = DrumNote
-000137c0: 4865 6164 280a 2020 2020 2020 2020 2020  Head(.          
-000137d0: 2020 2020 2020 2020 2020 7772 6974 7465            writte
-000137e0: 6e5f 7069 7463 683d 7772 6974 7465 6e5f  n_pitch=written_
-000137f0: 7069 7463 682c 0a20 2020 2020 2020 2020  pitch,.         
-00013800: 2020 2020 2020 2020 2020 2069 735f 6361             is_ca
-00013810: 7574 696f 6e61 7279 3d69 735f 6361 7574  utionary=is_caut
-00013820: 696f 6e61 7279 2c0a 2020 2020 2020 2020  ionary,.        
-00013830: 2020 2020 2020 2020 2020 2020 6973 5f66              is_f
-00013840: 6f72 6365 643d 6973 5f66 6f72 6365 642c  orced=is_forced,
+00012ef0: 2020 2020 6327 340a 2020 2020 2020 2020      c'4.        
+00012f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f10: 5c73 6c61 7368 6564 4772 6163 6520 7b0a  \slashedGrace {.
+00012f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f30: 2020 2020 2020 2020 2020 2020 6373 2731              cs'1
+00012f40: 360a 2020 2020 2020 2020 2020 2020 2020  6.              
+00012f50: 2020 2020 2020 2020 2020 2020 2020 280a                (.
+00012f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f70: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00012f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f90: 2020 6427 340a 2020 2020 2020 2020 2020    d'4.          
+00012fa0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+00012fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012fc0: 2020 2020 2020 2020 6527 340a 2020 2020          e'4.    
+00012fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012fe0: 2020 2020 6627 340a 2020 2020 2020 2020      f'4.        
+00012ff0: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
+00013000: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00013010: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00013020: 636f 6d6d 616e 640a 0a0a 636c 6173 7320  command...class 
+00013030: 4368 6f72 6428 4c65 6166 293a 0a20 2020  Chord(Leaf):.   
+00013040: 2022 2222 0a20 2020 2043 686f 7264 2e0a   """.    Chord..
+00013050: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
+00013060: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+00013070: 2020 2020 2020 3e3e 3e20 6368 6f72 6420        >>> chord 
+00013080: 3d20 6162 6a61 642e 4368 6f72 6428 223c  = abjad.Chord("<
+00013090: 6527 2063 7327 2720 6627 273e 3422 290a  e' cs'' f''>4").
+000130a0: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+000130b0: 642e 7368 6f77 2863 686f 7264 2920 2320  d.show(chord) # 
+000130c0: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+000130d0: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
+000130e0: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
+000130f0: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+00013100: 6164 2e6c 696c 7970 6f6e 6428 6368 6f72  ad.lilypond(chor
+00013110: 6429 0a20 2020 2020 2020 2020 2020 203e  d).            >
+00013120: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
+00013130: 0a20 2020 2020 2020 2020 2020 203c 6527  .            <e'
+00013140: 2063 7327 2720 6627 273e 340a 0a20 2020   cs'' f''>4..   
+00013150: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
+00013160: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
+00013170: 2020 5245 4752 4553 5349 4f4e 2e20 496e    REGRESSION. In
+00013180: 6974 6961 6c69 7a65 7320 6672 6f6d 206f  itializes from o
+00013190: 7468 6572 2063 686f 7264 3a0a 0a20 2020  ther chord:..   
+000131a0: 2020 2020 203e 3e3e 2063 686f 7264 203d       >>> chord =
+000131b0: 2061 626a 6164 2e43 686f 7264 2822 3c65   abjad.Chord("<e
+000131c0: 2720 6373 2727 2066 2727 3e34 222c 206d  ' cs'' f''>4", m
+000131d0: 756c 7469 706c 6965 723d 2831 2c20 3229  ultiplier=(1, 2)
+000131e0: 290a 2020 2020 2020 2020 3e3e 3e20 6162  ).        >>> ab
+000131f0: 6a61 642e 7368 6f77 2863 686f 7264 2920  jad.show(chord) 
+00013200: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
+00013210: 0a0a 2020 2020 2020 2020 2e2e 2020 646f  ..        ..  do
+00013220: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
+00013230: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
+00013240: 626a 6164 2e6c 696c 7970 6f6e 6428 6368  bjad.lilypond(ch
+00013250: 6f72 6429 0a20 2020 2020 2020 2020 2020  ord).           
+00013260: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
+00013270: 6729 0a20 2020 2020 2020 2020 2020 203c  g).            <
+00013280: 6527 2063 7327 2720 6627 273e 3420 2a20  e' cs'' f''>4 * 
+00013290: 312f 320a 0a20 2020 2020 2020 203e 3e3e  1/2..        >>>
+000132a0: 206e 6577 5f63 686f 7264 203d 2061 626a   new_chord = abj
+000132b0: 6164 2e43 686f 7264 2863 686f 7264 290a  ad.Chord(chord).
+000132c0: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+000132d0: 642e 7368 6f77 286e 6577 5f63 686f 7264  d.show(new_chord
+000132e0: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
+000132f0: 4950 0a0a 2020 2020 2020 2020 2e2e 2020  IP..        ..  
+00013300: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
+00013310: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
+00013320: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
+00013330: 6e65 775f 6368 6f72 6429 0a20 2020 2020  new_chord).     
+00013340: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+00013350: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+00013360: 2020 2020 203c 6527 2063 7327 2720 6627       <e' cs'' f'
+00013370: 273e 3420 2a20 312f 320a 0a20 2020 2022  '>4 * 1/2..    "
+00013380: 2222 0a0a 2020 2020 2323 2320 434c 4153  ""..    ### CLAS
+00013390: 5320 5641 5249 4142 4c45 5320 2323 230a  S VARIABLES ###.
+000133a0: 0a20 2020 205f 5f64 6f63 756d 656e 7461  .    __documenta
+000133b0: 7469 6f6e 5f73 6563 7469 6f6e 5f5f 203d  tion_section__ =
+000133c0: 2022 4c65 6176 6573 220a 0a20 2020 205f   "Leaves"..    _
+000133d0: 5f73 6c6f 7473 5f5f 203d 2028 225f 6e6f  _slots__ = ("_no
+000133e0: 7465 5f68 6561 6473 222c 290a 0a20 2020  te_heads",)..   
+000133f0: 2023 2323 2049 4e49 5449 414c 495a 4552   ### INITIALIZER
+00013400: 2023 2323 0a0a 2020 2020 6465 6620 5f5f   ###..    def __
+00013410: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
+00013420: 7365 6c66 2c0a 2020 2020 2020 2020 2a61  self,.        *a
+00013430: 7267 756d 656e 7473 2c0a 2020 2020 2020  rguments,.      
+00013440: 2020 6c61 6e67 7561 6765 3a20 7374 7220    language: str 
+00013450: 3d20 2265 6e67 6c69 7368 222c 0a20 2020  = "english",.   
+00013460: 2020 2020 206d 756c 7469 706c 6965 723a       multiplier:
+00013470: 205f 7479 7069 6e67 732e 4475 7261 7469   _typings.Durati
+00013480: 6f6e 203d 204e 6f6e 652c 0a20 2020 2020  on = None,.     
+00013490: 2020 2074 6167 3a20 5f74 6167 2e54 6167     tag: _tag.Tag
+000134a0: 203d 204e 6f6e 652c 0a20 2020 2029 202d   = None,.    ) -
+000134b0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+000134c0: 6173 7365 7274 206c 656e 2861 7267 756d  assert len(argum
+000134d0: 656e 7473 2920 696e 2028 302c 2031 2c20  ents) in (0, 1, 
+000134e0: 3229 0a20 2020 2020 2020 2073 656c 662e  2).        self.
+000134f0: 5f6e 6f74 655f 6865 6164 7320 3d20 4e6f  _note_heads = No
+00013500: 7465 4865 6164 4c69 7374 2829 0a20 2020  teHeadList().   
+00013510: 2020 2020 2069 6620 6c65 6e28 6172 6775       if len(argu
+00013520: 6d65 6e74 7329 203d 3d20 3120 616e 6420  ments) == 1 and 
+00013530: 6973 696e 7374 616e 6365 2861 7267 756d  isinstance(argum
+00013540: 656e 7473 5b30 5d2c 2073 7472 293a 0a20  ents[0], str):. 
+00013550: 2020 2020 2020 2020 2020 2073 7472 696e             strin
+00013560: 6720 3d20 6622 7b7b 207b 6172 6775 6d65  g = f"{{ {argume
+00013570: 6e74 735b 305d 7d20 7d7d 220a 2020 2020  nts[0]} }}".    
+00013580: 2020 2020 2020 2020 7061 7273 6564 203d          parsed =
+00013590: 2073 656c 662e 5f70 6172 7365 5f6c 696c   self._parse_lil
+000135a0: 7970 6f6e 645f 7374 7269 6e67 2873 7472  ypond_string(str
+000135b0: 696e 672c 206c 616e 6775 6167 653d 6c61  ing, language=la
+000135c0: 6e67 7561 6765 290a 2020 2020 2020 2020  nguage).        
+000135d0: 2020 2020 6173 7365 7274 206c 656e 2870      assert len(p
+000135e0: 6172 7365 6429 203d 3d20 3120 616e 6420  arsed) == 1 and 
+000135f0: 6973 696e 7374 616e 6365 2870 6172 7365  isinstance(parse
+00013600: 645b 305d 2c20 4c65 6166 290a 2020 2020  d[0], Leaf).    
+00013610: 2020 2020 2020 2020 6172 6775 6d65 6e74          argument
+00013620: 7320 3d20 7475 706c 6528 5b70 6172 7365  s = tuple([parse
+00013630: 645b 305d 5d29 0a20 2020 2020 2020 2061  d[0]]).        a
+00013640: 7265 5f63 6175 7469 6f6e 6172 793a 206c  re_cautionary: l
+00013650: 6973 745b 626f 6f6c 207c 204e 6f6e 655d  ist[bool | None]
+00013660: 203d 205b 5d0a 2020 2020 2020 2020 6172   = [].        ar
+00013670: 655f 666f 7263 6564 3a20 6c69 7374 5b62  e_forced: list[b
+00013680: 6f6f 6c20 7c20 4e6f 6e65 5d20 3d20 5b5d  ool | None] = []
+00013690: 0a20 2020 2020 2020 2061 7265 5f70 6172  .        are_par
+000136a0: 656e 7468 6573 697a 6564 3a20 6c69 7374  enthesized: list
+000136b0: 5b62 6f6f 6c20 7c20 4e6f 6e65 5d20 3d20  [bool | None] = 
+000136c0: 5b5d 0a20 2020 2020 2020 2069 6620 6c65  [].        if le
+000136d0: 6e28 6172 6775 6d65 6e74 7329 203d 3d20  n(arguments) == 
+000136e0: 3120 616e 6420 6973 696e 7374 616e 6365  1 and isinstance
+000136f0: 2861 7267 756d 656e 7473 5b30 5d2c 204c  (arguments[0], L
+00013700: 6561 6629 3a0a 2020 2020 2020 2020 2020  eaf):.          
+00013710: 2020 6c65 6166 203d 2061 7267 756d 656e    leaf = argumen
+00013720: 7473 5b30 5d0a 2020 2020 2020 2020 2020  ts[0].          
+00013730: 2020 7772 6974 7465 6e5f 7069 7463 6865    written_pitche
+00013740: 7320 3d20 5b5d 0a20 2020 2020 2020 2020  s = [].         
+00013750: 2020 2077 7269 7474 656e 5f64 7572 6174     written_durat
+00013760: 696f 6e20 3d20 6c65 6166 2e77 7269 7474  ion = leaf.writt
+00013770: 656e 5f64 7572 6174 696f 6e0a 2020 2020  en_duration.    
+00013780: 2020 2020 2020 2020 6966 206d 756c 7469          if multi
+00013790: 706c 6965 7220 6973 204e 6f6e 653a 0a20  plier is None:. 
+000137a0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+000137b0: 756c 7469 706c 6965 7220 3d20 6c65 6166  ultiplier = leaf
+000137c0: 2e6d 756c 7469 706c 6965 720a 2020 2020  .multiplier.    
+000137d0: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+000137e0: 6d6f 7665 2074 6f20 6465 6469 6361 7465  move to dedicate
+000137f0: 6420 6672 6f6d 5f6e 6f74 6528 2920 636f  d from_note() co
+00013800: 6e73 7472 7563 746f 723a 0a20 2020 2020  nstructor:.     
+00013810: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00013820: 616e 6365 286c 6561 662c 204e 6f74 6529  ance(leaf, Note)
+00013830: 2061 6e64 206c 6561 662e 6e6f 7465 5f68   and leaf.note_h
+00013840: 6561 6420 6973 206e 6f74 204e 6f6e 653a  ead is not None:
 00013850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013860: 2020 2020 2069 735f 7061 7265 6e74 6865       is_parenthe
-00013870: 7369 7a65 643d 6973 5f70 6172 656e 7468  sized=is_parenth
-00013880: 6573 697a 6564 2c0a 2020 2020 2020 2020  esized,.        
-00013890: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000138a0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-000138b0: 6e63 6528 7772 6974 7465 6e5f 7069 7463  nce(written_pitc
-000138c0: 682c 204e 6f74 6548 6561 6429 3a0a 2020  h, NoteHead):.  
-000138d0: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
-000138e0: 7465 5f68 6561 642e 7477 6561 6b73 203d  te_head.tweaks =
-000138f0: 2063 6f70 792e 6465 6570 636f 7079 2877   copy.deepcopy(w
-00013900: 7269 7474 656e 5f70 6974 6368 2e74 7765  ritten_pitch.twe
-00013910: 616b 7329 0a20 2020 2020 2020 2020 2020  aks).           
-00013920: 2073 656c 662e 5f6e 6f74 655f 6865 6164   self._note_head
-00013930: 732e 6170 7065 6e64 286e 6f74 655f 6865  s.append(note_he
-00013940: 6164 290a 2020 2020 2020 2020 6966 206c  ad).        if l
-00013950: 656e 2861 7267 756d 656e 7473 2920 3d3d  en(arguments) ==
-00013960: 2031 2061 6e64 2069 7369 6e73 7461 6e63   1 and isinstanc
-00013970: 6528 6172 6775 6d65 6e74 735b 305d 2c20  e(arguments[0], 
-00013980: 4c65 6166 293a 0a20 2020 2020 2020 2020  Leaf):.         
-00013990: 2020 2073 656c 662e 5f63 6f70 795f 6f76     self._copy_ov
-000139a0: 6572 7269 6465 5f61 6e64 5f73 6574 5f66  erride_and_set_f
-000139b0: 726f 6d5f 6c65 6166 2861 7267 756d 656e  rom_leaf(argumen
-000139c0: 7473 5b30 5d29 0a0a 2020 2020 2323 2320  ts[0])..    ### 
-000139d0: 5350 4543 4941 4c20 4d45 5448 4f44 5320  SPECIAL METHODS 
-000139e0: 2323 230a 0a20 2020 2064 6566 205f 5f63  ###..    def __c
-000139f0: 6f70 795f 5f28 7365 6c66 2c20 2a61 7267  opy__(self, *arg
-00013a00: 756d 656e 7473 2920 2d3e 2022 4368 6f72  uments) -> "Chor
-00013a10: 6422 3a0a 2020 2020 2020 2020 2222 220a  d":.        """.
-00013a20: 2020 2020 2020 2020 436f 7069 6573 2063          Copies c
-00013a30: 686f 7264 2e0a 2020 2020 2020 2020 2222  hord..        ""
-00013a40: 220a 2020 2020 2020 2020 6e65 775f 6368  ".        new_ch
-00013a50: 6f72 6420 3d20 4c65 6166 2e5f 5f63 6f70  ord = Leaf.__cop
-00013a60: 795f 5f28 7365 6c66 2c20 2a61 7267 756d  y__(self, *argum
-00013a70: 656e 7473 290a 2020 2020 2020 2020 6e65  ents).        ne
-00013a80: 775f 6368 6f72 642e 6e6f 7465 5f68 6561  w_chord.note_hea
-00013a90: 6473 5b3a 5d20 3d20 5b5d 0a20 2020 2020  ds[:] = [].     
-00013aa0: 2020 2066 6f72 206e 6f74 655f 6865 6164     for note_head
-00013ab0: 2069 6e20 7365 6c66 2e6e 6f74 655f 6865   in self.note_he
-00013ac0: 6164 733a 0a20 2020 2020 2020 2020 2020  ads:.           
-00013ad0: 206e 6f74 655f 6865 6164 203d 2063 6f70   note_head = cop
-00013ae0: 792e 636f 7079 286e 6f74 655f 6865 6164  y.copy(note_head
-00013af0: 290a 2020 2020 2020 2020 2020 2020 6e65  ).            ne
-00013b00: 775f 6368 6f72 642e 6e6f 7465 5f68 6561  w_chord.note_hea
-00013b10: 6473 2e61 7070 656e 6428 6e6f 7465 5f68  ds.append(note_h
-00013b20: 6561 6429 0a20 2020 2020 2020 2072 6574  ead).        ret
-00013b30: 7572 6e20 6e65 775f 6368 6f72 640a 0a20  urn new_chord.. 
-00013b40: 2020 2064 6566 205f 5f67 6574 6e65 7761     def __getnewa
-00013b50: 7267 735f 5f28 0a20 2020 2020 2020 2073  rgs__(.        s
-00013b60: 656c 662c 0a20 2020 2029 202d 3e20 7475  elf,.    ) -> tu
-00013b70: 706c 655b 7475 706c 655b 5f70 6974 6368  ple[tuple[_pitch
-00013b80: 2e4e 616d 6564 5069 7463 682c 202e 2e2e  .NamedPitch, ...
-00013b90: 5d2c 205f 6475 7261 7469 6f6e 2e44 7572  ], _duration.Dur
-00013ba0: 6174 696f 6e5d 3a0a 2020 2020 2020 2020  ation]:.        
-00013bb0: 2222 220a 2020 2020 2020 2020 4765 7473  """.        Gets
-00013bc0: 206e 6577 2063 686f 7264 2061 7267 756d   new chord argum
-00013bd0: 656e 7473 2e0a 0a20 2020 2020 2020 202e  ents...        .
-00013be0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-00013bf0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-00013c00: 2020 2020 3e3e 3e20 6162 6a61 642e 4368      >>> abjad.Ch
-00013c10: 6f72 6428 223c 6327 2064 273e 3422 292e  ord("<c' d'>4").
-00013c20: 5f5f 6765 746e 6577 6172 6773 5f5f 2829  __getnewargs__()
-00013c30: 0a20 2020 2020 2020 2020 2020 2028 284e  .            ((N
-00013c40: 616d 6564 5069 7463 6828 2263 2722 292c  amedPitch("c'"),
-00013c50: 204e 616d 6564 5069 7463 6828 2264 2722   NamedPitch("d'"
-00013c60: 2929 2c20 4475 7261 7469 6f6e 2831 2c20  )), Duration(1, 
-00013c70: 3429 290a 0a20 2020 2020 2020 2022 2222  4))..        """
-00013c80: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00013c90: 7365 6c66 2e77 7269 7474 656e 5f70 6974  self.written_pit
-00013ca0: 6368 6573 2c20 7365 6c66 2e77 7269 7474  ches, self.writt
-00013cb0: 656e 5f64 7572 6174 696f 6e0a 0a20 2020  en_duration..   
-00013cc0: 2023 2323 2050 5249 5641 5445 204d 4554   ### PRIVATE MET
-00013cd0: 484f 4453 2023 2323 0a0a 2020 2020 6465  HODS ###..    de
-00013ce0: 6620 5f66 6f72 6d61 745f 6265 666f 7265  f _format_before
-00013cf0: 5f73 6974 6528 7365 6c66 2c20 636f 6e74  _site(self, cont
-00013d00: 7269 6275 7469 6f6e 7329 3a0a 2020 2020  ributions):.    
-00013d10: 2020 2020 7265 7375 6c74 203d 205b 5d0a      result = [].
-00013d20: 2020 2020 2020 2020 7265 7375 6c74 2e65          result.e
-00013d30: 7874 656e 6428 7365 6c66 2e5f 666f 726d  xtend(self._form
-00013d40: 6174 5f67 7261 6365 5f62 6f64 7928 2929  at_grace_body())
-00013d50: 0a20 2020 2020 2020 2072 6573 756c 742e  .        result.
-00013d60: 6578 7465 6e64 2863 6f6e 7472 6962 7574  extend(contribut
-00013d70: 696f 6e73 2e62 6566 6f72 652e 636f 6d6d  ions.before.comm
-00013d80: 616e 6473 290a 2020 2020 2020 2020 7265  ands).        re
-00013d90: 7375 6c74 2e65 7874 656e 6428 636f 6e74  sult.extend(cont
-00013da0: 7269 6275 7469 6f6e 732e 6772 6f62 5f6f  ributions.grob_o
-00013db0: 7665 7272 6964 6573 290a 2020 2020 2020  verrides).      
-00013dc0: 2020 7265 7375 6c74 2e65 7874 656e 6428    result.extend(
-00013dd0: 636f 6e74 7269 6275 7469 6f6e 732e 636f  contributions.co
-00013de0: 6e74 6578 745f 7365 7474 696e 6773 290a  ntext_settings).
-00013df0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00013e00: 6573 756c 740a 0a20 2020 2064 6566 205f  esult..    def _
-00013e10: 666f 726d 6174 5f6c 6561 665f 6e75 636c  format_leaf_nucl
-00013e20: 6575 7328 7365 6c66 293a 0a20 2020 2020  eus(self):.     
-00013e30: 2020 2072 6573 756c 7420 3d20 5b5d 0a20     result = []. 
-00013e40: 2020 2020 2020 206e 6f74 655f 6865 6164         note_head
-00013e50: 7320 3d20 7365 6c66 2e6e 6f74 655f 6865  s = self.note_he
-00013e60: 6164 730a 2020 2020 2020 2020 6966 2061  ads.        if a
-00013e70: 6e79 2822 5c6e 2220 696e 205f 2e5f 6765  ny("\n" in _._ge
-00013e80: 745f 6c69 6c79 706f 6e64 5f66 6f72 6d61  t_lilypond_forma
-00013e90: 7428 2920 666f 7220 5f20 696e 206e 6f74  t() for _ in not
-00013ea0: 655f 6865 6164 7329 3a0a 2020 2020 2020  e_heads):.      
-00013eb0: 2020 2020 2020 666f 7220 6e6f 7465 5f68        for note_h
-00013ec0: 6561 6420 696e 206e 6f74 655f 6865 6164  ead in note_head
-00013ed0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00013ee0: 2020 2063 7572 7265 6e74 5f66 6f72 6d61     current_forma
-00013ef0: 7420 3d20 6e6f 7465 5f68 6561 642e 5f67  t = note_head._g
-00013f00: 6574 5f6c 696c 7970 6f6e 645f 666f 726d  et_lilypond_form
-00013f10: 6174 2829 0a20 2020 2020 2020 2020 2020  at().           
-00013f20: 2020 2020 2066 6f72 6d61 745f 6c69 7374       format_list
-00013f30: 203d 2063 7572 7265 6e74 5f66 6f72 6d61   = current_forma
-00013f40: 742e 7370 6c69 7428 225c 6e22 290a 2020  t.split("\n").  
-00013f50: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00013f60: 726d 6174 5f6c 6973 7420 3d20 5b5f 696e  rmat_list = [_in
-00013f70: 6465 6e74 2e49 4e44 454e 5420 2b20 5f20  dent.INDENT + _ 
-00013f80: 666f 7220 5f20 696e 2066 6f72 6d61 745f  for _ in format_
-00013f90: 6c69 7374 5d0a 2020 2020 2020 2020 2020  list].          
-00013fa0: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
-00013fb0: 656e 6428 666f 726d 6174 5f6c 6973 7429  end(format_list)
-00013fc0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00013fd0: 756c 742e 696e 7365 7274 2830 2c20 223c  ult.insert(0, "<
-00013fe0: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
-00013ff0: 6573 756c 742e 6170 7065 6e64 2822 3e22  esult.append(">"
-00014000: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00014010: 7375 6c74 203d 2022 5c6e 222e 6a6f 696e  sult = "\n".join
-00014020: 2872 6573 756c 7429 0a20 2020 2020 2020  (result).       
-00014030: 2020 2020 2072 6573 756c 7420 2b3d 2073       result += s
-00014040: 7472 2873 656c 662e 5f67 6574 5f66 6f72  tr(self._get_for
-00014050: 6d61 7474 6564 5f64 7572 6174 696f 6e28  matted_duration(
-00014060: 2929 0a20 2020 2020 2020 2065 6c73 653a  )).        else:
-00014070: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00014080: 756c 742e 6578 7465 6e64 285b 5f2e 5f67  ult.extend([_._g
-00014090: 6574 5f6c 696c 7970 6f6e 645f 666f 726d  et_lilypond_form
-000140a0: 6174 2829 2066 6f72 205f 2069 6e20 6e6f  at() for _ in no
-000140b0: 7465 5f68 6561 6473 5d29 0a20 2020 2020  te_heads]).     
-000140c0: 2020 2020 2020 2070 6974 6368 6573 203d         pitches =
-000140d0: 2022 2022 2e6a 6f69 6e28 7265 7375 6c74   " ".join(result
-000140e0: 290a 2020 2020 2020 2020 2020 2020 6475  ).            du
-000140f0: 7261 7469 6f6e 203d 2073 656c 662e 5f67  ration = self._g
-00014100: 6574 5f66 6f72 6d61 7474 6564 5f64 7572  et_formatted_dur
-00014110: 6174 696f 6e28 290a 2020 2020 2020 2020  ation().        
-00014120: 2020 2020 7265 7375 6c74 203d 2066 223c      result = f"<
-00014130: 7b70 6974 6368 6573 7d3e 7b64 7572 6174  {pitches}>{durat
-00014140: 696f 6e7d 220a 2020 2020 2020 2020 2320  ion}".        # 
-00014150: 7369 6e67 6c65 2073 7472 696e 672c 2062  single string, b
-00014160: 7574 2077 7261 7070 6564 2069 6e20 6c69  ut wrapped in li
-00014170: 7374 2062 6320 636f 6e74 7269 6275 7469  st bc contributi
-00014180: 6f6e 0a20 2020 2020 2020 2072 6574 7572  on.        retur
-00014190: 6e20 5b72 6573 756c 745d 0a0a 2020 2020  n [result]..    
-000141a0: 6465 6620 5f67 6574 5f63 6f6d 7061 6374  def _get_compact
-000141b0: 5f72 6570 7265 7365 6e74 6174 696f 6e28  _representation(
-000141c0: 7365 6c66 293a 0a20 2020 2020 2020 2073  self):.        s
-000141d0: 756d 6d61 7279 203d 2073 656c 662e 5f67  ummary = self._g
-000141e0: 6574 5f73 756d 6d61 7279 2829 0a20 2020  et_summary().   
-000141f0: 2020 2020 2064 7572 6174 696f 6e20 3d20       duration = 
-00014200: 7365 6c66 2e5f 6765 745f 666f 726d 6174  self._get_format
-00014210: 7465 645f 6475 7261 7469 6f6e 2829 0a20  ted_duration(). 
-00014220: 2020 2020 2020 2072 6574 7572 6e20 6622         return f"
-00014230: 3c7b 7375 6d6d 6172 797d 3e7b 6475 7261  <{summary}>{dura
-00014240: 7469 6f6e 7d22 0a0a 2020 2020 6465 6620  tion}"..    def 
-00014250: 5f67 6574 5f73 756d 6d61 7279 2873 656c  _get_summary(sel
-00014260: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
-00014270: 726e 2022 2022 2e6a 6f69 6e28 5b5f 2e5f  rn " ".join([_._
-00014280: 6765 745f 6368 6f72 645f 7374 7269 6e67  get_chord_string
-00014290: 2829 2066 6f72 205f 2069 6e20 7365 6c66  () for _ in self
-000142a0: 2e6e 6f74 655f 6865 6164 735d 290a 0a20  .note_heads]).. 
-000142b0: 2020 2023 2323 2050 5542 4c49 4320 5052     ### PUBLIC PR
-000142c0: 4f50 4552 5449 4553 2023 2323 0a0a 2020  OPERTIES ###..  
-000142d0: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
-000142e0: 6465 6620 6e6f 7465 5f68 6561 6473 2873  def note_heads(s
-000142f0: 656c 6629 202d 3e20 224e 6f74 6548 6561  elf) -> "NoteHea
-00014300: 644c 6973 7422 3a0a 2020 2020 2020 2020  dList":.        
-00014310: 7222 2222 0a20 2020 2020 2020 2047 6574  r""".        Get
-00014320: 7320 6e6f 7465 2d68 6561 6473 2069 6e20  s note-heads in 
-00014330: 6368 6f72 642e 0a0a 2020 2020 2020 2020  chord...        
-00014340: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
-00014350: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
-00014360: 2020 2020 2047 6574 7320 6e6f 7465 2d68       Gets note-h
-00014370: 6561 6473 2069 6e20 6368 6f72 643a 0a0a  eads in chord:..
-00014380: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00014390: 6368 6f72 6420 3d20 6162 6a61 642e 4368  chord = abjad.Ch
-000143a0: 6f72 6428 223c 6727 2063 2727 2065 2727  ord("<g' c'' e''
-000143b0: 3e34 2229 0a20 2020 2020 2020 2020 2020  >4").           
-000143c0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-000143d0: 6368 6f72 6429 2023 2064 6f63 7465 7374  chord) # doctest
-000143e0: 3a20 2b53 4b49 500a 2020 2020 2020 2020  : +SKIP.        
-000143f0: 2020 2020 3e3e 3e20 666f 7220 5f20 696e      >>> for _ in
-00014400: 2063 686f 7264 2e6e 6f74 655f 6865 6164   chord.note_head
-00014410: 733a 205f 0a20 2020 2020 2020 2020 2020  s: _.           
-00014420: 204e 6f74 6548 6561 6428 2267 2722 290a   NoteHead("g'").
-00014430: 2020 2020 2020 2020 2020 2020 4e6f 7465              Note
-00014440: 4865 6164 2822 6327 2722 290a 2020 2020  Head("c''").    
-00014450: 2020 2020 2020 2020 4e6f 7465 4865 6164          NoteHead
-00014460: 2822 6527 2722 290a 0a20 2020 2020 2020  ("e''")..       
-00014470: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
-00014480: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
-00014490: 2020 2020 2020 5365 7473 206e 6f74 652d        Sets note-
-000144a0: 6865 6164 7320 7769 7468 2070 6974 6368  heads with pitch
-000144b0: 206e 616d 6573 3a0a 0a20 2020 2020 2020   names:..       
-000144c0: 2020 2020 203e 3e3e 2063 686f 7264 203d       >>> chord =
-000144d0: 2061 626a 6164 2e43 686f 7264 2822 3c67   abjad.Chord("<g
-000144e0: 2720 6327 2720 6527 273e 3422 290a 2020  ' c'' e''>4").  
-000144f0: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
-00014500: 6a61 642e 7368 6f77 2863 686f 7264 2920  jad.show(chord) 
-00014510: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
-00014520: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-00014530: 3e20 6368 6f72 642e 6e6f 7465 5f68 6561  > chord.note_hea
-00014540: 6473 203d 2022 6327 2064 2720 6673 2722  ds = "c' d' fs'"
-00014550: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00014560: 2061 626a 6164 2e73 686f 7728 6368 6f72   abjad.show(chor
-00014570: 6429 2023 2064 6f63 7465 7374 3a20 2b53  d) # doctest: +S
-00014580: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
-00014590: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
-000145a0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-000145b0: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
-000145c0: 6c69 6c79 706f 6e64 2863 686f 7264 290a  lilypond(chord).
-000145d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000145e0: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-000145f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00014600: 2020 3c63 2720 6427 2066 7327 3e34 0a0a    <c' d' fs'>4..
-00014610: 2020 2020 2020 2020 2e2e 2020 636f 6e74          ..  cont
-00014620: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-00014630: 0a20 2020 2020 2020 2020 2020 2053 6574  .            Set
-00014640: 7320 6e6f 7465 2d68 6561 6473 2077 6974  s note-heads wit
-00014650: 6820 7069 7463 6820 6e75 6d62 6572 733a  h pitch numbers:
-00014660: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00014670: 2020 3e3e 3e20 6368 6f72 6420 3d20 6162    >>> chord = ab
-00014680: 6a61 642e 4368 6f72 6428 223c 6727 2063  jad.Chord("<g' c
-00014690: 2727 2065 2727 3e34 2229 0a20 2020 2020  '' e''>4").     
-000146a0: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
-000146b0: 626a 6164 2e73 686f 7728 6368 6f72 6429  bjad.show(chord)
-000146c0: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
-000146d0: 500a 0a20 2020 2020 2020 2020 2020 203e  P..            >
-000146e0: 3e3e 2063 686f 7264 2e6e 6f74 655f 6865  >> chord.note_he
-000146f0: 6164 7320 3d20 5b31 362c 2031 372c 2031  ads = [16, 17, 1
-00014700: 395d 0a20 2020 2020 2020 2020 2020 203e  9].            >
-00014710: 3e3e 2061 626a 6164 2e73 686f 7728 6368  >> abjad.show(ch
-00014720: 6f72 6429 2023 2064 6f63 7465 7374 3a20  ord) # doctest: 
-00014730: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
-00014740: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
-00014750: 2020 2020 2020 2020 2020 2020 2020 203e                 >
-00014760: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
-00014770: 642e 6c69 6c79 706f 6e64 2863 686f 7264  d.lilypond(chord
-00014780: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00014790: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
-000147a0: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-000147b0: 2020 2020 3c65 2727 2066 2727 2067 2727      <e'' f'' g''
-000147c0: 3e34 0a0a 2020 2020 2020 2020 5365 7420  >4..        Set 
-000147d0: 6e6f 7465 2d68 6561 6473 2077 6974 6820  note-heads with 
-000147e0: 616e 7920 6974 6572 6162 6c65 2e0a 2020  any iterable..  
-000147f0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00014800: 2020 7265 7475 726e 2073 656c 662e 5f6e    return self._n
-00014810: 6f74 655f 6865 6164 730a 0a20 2020 2040  ote_heads..    @
-00014820: 6e6f 7465 5f68 6561 6473 2e73 6574 7465  note_heads.sette
-00014830: 720a 2020 2020 6465 6620 6e6f 7465 5f68  r.    def note_h
-00014840: 6561 6473 2873 656c 662c 206e 6f74 655f  eads(self, note_
-00014850: 6865 6164 7329 3a0a 2020 2020 2020 2020  heads):.        
-00014860: 7365 6c66 2e5f 6e6f 7465 5f68 6561 6473  self._note_heads
-00014870: 5b3a 5d20 3d20 5b5d 0a20 2020 2020 2020  [:] = [].       
-00014880: 2069 6620 6973 696e 7374 616e 6365 286e   if isinstance(n
-00014890: 6f74 655f 6865 6164 732c 2073 7472 293a  ote_heads, str):
-000148a0: 0a20 2020 2020 2020 2020 2020 206e 6f74  .            not
-000148b0: 655f 6865 6164 7320 3d20 6e6f 7465 5f68  e_heads = note_h
-000148c0: 6561 6473 2e73 706c 6974 2829 0a20 2020  eads.split().   
-000148d0: 2020 2020 2073 656c 662e 6e6f 7465 5f68       self.note_h
-000148e0: 6561 6473 2e65 7874 656e 6428 6e6f 7465  eads.extend(note
-000148f0: 5f68 6561 6473 290a 0a20 2020 2040 7072  _heads)..    @pr
-00014900: 6f70 6572 7479 0a20 2020 2064 6566 2077  operty.    def w
-00014910: 7269 7474 656e 5f64 7572 6174 696f 6e28  ritten_duration(
-00014920: 7365 6c66 2920 2d3e 205f 6475 7261 7469  self) -> _durati
-00014930: 6f6e 2e44 7572 6174 696f 6e3a 0a20 2020  on.Duration:.   
-00014940: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00014950: 2047 6574 7320 616e 6420 7365 7473 2077   Gets and sets w
-00014960: 7269 7474 656e 2064 7572 6174 696f 6e20  ritten duration 
-00014970: 6f66 2063 686f 7264 2e0a 0a20 2020 2020  of chord...     
-00014980: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
-00014990: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
-000149a0: 2020 2020 2020 2020 4765 7420 7772 6974          Get writ
-000149b0: 7465 6e20 6475 7261 7469 6f6e 3a0a 0a20  ten duration:.. 
-000149c0: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
-000149d0: 686f 7264 203d 2061 626a 6164 2e43 686f  hord = abjad.Cho
-000149e0: 7264 2822 3c65 2720 6373 2727 2066 2727  rd("<e' cs'' f''
-000149f0: 3e34 2229 0a20 2020 2020 2020 2020 2020  >4").           
-00014a00: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-00014a10: 6368 6f72 6429 2023 2064 6f63 7465 7374  chord) # doctest
-00014a20: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-00014a30: 2020 2020 203e 3e3e 2063 686f 7264 2e77       >>> chord.w
-00014a40: 7269 7474 656e 5f64 7572 6174 696f 6e0a  ritten_duration.
-00014a50: 2020 2020 2020 2020 2020 2020 4475 7261              Dura
-00014a60: 7469 6f6e 2831 2c20 3429 0a0a 2020 2020  tion(1, 4)..    
-00014a70: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-00014a80: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-00014a90: 2020 2020 2020 2020 2053 6574 2077 7269           Set wri
-00014aa0: 7474 656e 2064 7572 6174 696f 6e3a 0a0a  tten duration:..
-00014ab0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00014ac0: 6368 6f72 6420 3d20 6162 6a61 642e 4368  chord = abjad.Ch
-00014ad0: 6f72 6428 223c 6527 2063 7327 2720 6627  ord("<e' cs'' f'
-00014ae0: 273e 3422 290a 2020 2020 2020 2020 2020  '>4").          
-00014af0: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
-00014b00: 2863 686f 7264 2920 2320 646f 6374 6573  (chord) # doctes
-00014b10: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-00014b20: 2020 2020 2020 3e3e 3e20 6368 6f72 642e        >>> chord.
-00014b30: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
-00014b40: 203d 2061 626a 6164 2e44 7572 6174 696f   = abjad.Duratio
-00014b50: 6e28 312c 2031 3629 0a20 2020 2020 2020  n(1, 16).       
-00014b60: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-00014b70: 686f 7728 6368 6f72 6429 2023 2064 6f63  how(chord) # doc
-00014b80: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
-00014b90: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00014ba0: 2072 6574 7572 6e20 7375 7065 7228 292e   return super().
-00014bb0: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
-00014bc0: 0a0a 2020 2020 4077 7269 7474 656e 5f64  ..    @written_d
-00014bd0: 7572 6174 696f 6e2e 7365 7474 6572 0a20  uration.setter. 
-00014be0: 2020 2064 6566 2077 7269 7474 656e 5f64     def written_d
-00014bf0: 7572 6174 696f 6e28 7365 6c66 2c20 6172  uration(self, ar
-00014c00: 6775 6d65 6e74 293a 0a20 2020 2020 2020  gument):.       
-00014c10: 204c 6561 662e 7772 6974 7465 6e5f 6475   Leaf.written_du
-00014c20: 7261 7469 6f6e 2e66 7365 7428 7365 6c66  ration.fset(self
-00014c30: 2c20 6172 6775 6d65 6e74 290a 0a20 2020  , argument)..   
-00014c40: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
-00014c50: 6566 2077 7269 7474 656e 5f70 6974 6368  ef written_pitch
-00014c60: 6573 2873 656c 6629 202d 3e20 7475 706c  es(self) -> tupl
-00014c70: 655b 5f70 6974 6368 2e4e 616d 6564 5069  e[_pitch.NamedPi
-00014c80: 7463 682c 202e 2e2e 5d3a 0a20 2020 2020  tch, ...]:.     
-00014c90: 2020 2022 2222 0a20 2020 2020 2020 2057     """.        W
-00014ca0: 7269 7474 656e 2070 6974 6368 6573 2069  ritten pitches i
-00014cb0: 6e20 6368 6f72 642e 0a0a 2020 2020 2020  n chord...      
-00014cc0: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
-00014cd0: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
-00014ce0: 2020 2020 2020 2047 6574 2077 7269 7474         Get writt
-00014cf0: 656e 2070 6974 6368 6573 3a0a 0a20 2020  en pitches:..   
-00014d00: 2020 2020 2020 2020 203e 3e3e 2063 686f           >>> cho
-00014d10: 7264 203d 2061 626a 6164 2e43 686f 7264  rd = abjad.Chord
-00014d20: 2822 3c67 2720 6327 2720 6527 273e 3422  ("<g' c'' e''>4"
-00014d30: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00014d40: 3e20 6162 6a61 642e 7368 6f77 2863 686f  > abjad.show(cho
-00014d50: 7264 2920 2320 646f 6374 6573 743a 202b  rd) # doctest: +
-00014d60: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
-00014d70: 2020 3e3e 3e20 6368 6f72 642e 7772 6974    >>> chord.writ
-00014d80: 7465 6e5f 7069 7463 6865 730a 2020 2020  ten_pitches.    
-00014d90: 2020 2020 2020 2020 284e 616d 6564 5069          (NamedPi
-00014da0: 7463 6828 2267 2722 292c 204e 616d 6564  tch("g'"), Named
-00014db0: 5069 7463 6828 2263 2727 2229 2c20 4e61  Pitch("c''"), Na
-00014dc0: 6d65 6450 6974 6368 2822 6527 2722 2929  medPitch("e''"))
-00014dd0: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
-00014de0: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-00014df0: 650a 0a20 2020 2020 2020 2020 2020 2053  e..            S
-00014e00: 6574 2077 7269 7474 656e 2070 6974 6368  et written pitch
-00014e10: 6573 2077 6974 6820 7069 7463 6820 6e61  es with pitch na
-00014e20: 6d65 733a 0a0a 2020 2020 2020 2020 2020  mes:..          
-00014e30: 2020 3e3e 3e20 6368 6f72 6420 3d20 6162    >>> chord = ab
-00014e40: 6a61 642e 4368 6f72 6428 223c 6527 2067  jad.Chord("<e' g
-00014e50: 2720 6327 273e 3422 290a 2020 2020 2020  ' c''>4").      
-00014e60: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-00014e70: 7368 6f77 2863 686f 7264 2920 2320 646f  show(chord) # do
-00014e80: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-00014e90: 2020 2020 2020 2020 2020 3e3e 3e20 6368            >>> ch
-00014ea0: 6f72 642e 7772 6974 7465 6e5f 7069 7463  ord.written_pitc
-00014eb0: 6865 7320 3d20 2266 2720 6227 2064 2727  hes = "f' b' d''
-00014ec0: 220a 2020 2020 2020 2020 2020 2020 3e3e  ".            >>
-00014ed0: 3e20 6162 6a61 642e 7368 6f77 2863 686f  > abjad.show(cho
-00014ee0: 7264 2920 2320 646f 6374 6573 743a 202b  rd) # doctest: +
-00014ef0: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
-00014f00: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
-00014f10: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-00014f20: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-00014f30: 2e6c 696c 7970 6f6e 6428 6368 6f72 6429  .lilypond(chord)
-00014f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014f50: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-00014f60: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-00014f70: 2020 203c 6627 2062 2720 6427 273e 340a     <f' b' d''>4.
-00014f80: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00014f90: 2063 686f 7264 2e77 7269 7474 656e 5f70   chord.written_p
-00014fa0: 6974 6368 6573 0a20 2020 2020 2020 2020  itches.         
-00014fb0: 2020 2028 4e61 6d65 6450 6974 6368 2822     (NamedPitch("
-00014fc0: 6627 2229 2c20 4e61 6d65 6450 6974 6368  f'"), NamedPitch
-00014fd0: 2822 6227 2229 2c20 4e61 6d65 6450 6974  ("b'"), NamedPit
-00014fe0: 6368 2822 6427 2722 2929 0a0a 2020 2020  ch("d''"))..    
-00014ff0: 2020 2020 5365 7420 7772 6974 7465 6e20      Set written 
-00015000: 7069 7463 6865 7320 7769 7468 2061 6e79  pitches with any
-00015010: 2069 7465 7261 626c 652e 0a20 2020 2020   iterable..     
-00015020: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
-00015030: 6574 7572 6e20 7475 706c 6528 5f2e 7772  eturn tuple(_.wr
-00015040: 6974 7465 6e5f 7069 7463 6820 666f 7220  itten_pitch for 
-00015050: 5f20 696e 2073 656c 662e 6e6f 7465 5f68  _ in self.note_h
-00015060: 6561 6473 290a 0a20 2020 2040 7772 6974  eads)..    @writ
-00015070: 7465 6e5f 7069 7463 6865 732e 7365 7474  ten_pitches.sett
-00015080: 6572 0a20 2020 2064 6566 2077 7269 7474  er.    def writt
-00015090: 656e 5f70 6974 6368 6573 2873 656c 662c  en_pitches(self,
-000150a0: 2070 6974 6368 6573 293a 0a20 2020 2020   pitches):.     
-000150b0: 2020 2073 656c 662e 6e6f 7465 5f68 6561     self.note_hea
-000150c0: 6473 203d 2070 6974 6368 6573 0a0a 0a63  ds = pitches...c
-000150d0: 6c61 7373 2043 6c75 7374 6572 2843 6f6e  lass Cluster(Con
-000150e0: 7461 696e 6572 293a 0a20 2020 2072 2222  tainer):.    r""
-000150f0: 220a 2020 2020 436c 7573 7465 722e 0a0a  ".    Cluster...
-00015100: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-00015110: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-00015120: 2020 2020 203e 3e3e 2063 6c75 7374 6572       >>> cluster
-00015130: 203d 2061 626a 6164 2e43 6c75 7374 6572   = abjad.Cluster
-00015140: 2822 6327 3820 3c64 2720 6727 3e38 2062  ("c'8 <d' g'>8 b
-00015150: 2738 2229 0a20 2020 2020 2020 203e 3e3e  '8").        >>>
-00015160: 2061 626a 6164 2e73 686f 7728 636c 7573   abjad.show(clus
-00015170: 7465 7229 2023 2064 6f63 7465 7374 3a20  ter) # doctest: 
-00015180: 2b53 4b49 500a 0a20 2020 2020 2020 202e  +SKIP..        .
-00015190: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
-000151a0: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
-000151b0: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
-000151c0: 6e64 2863 6c75 7374 6572 290a 2020 2020  nd(cluster).    
-000151d0: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-000151e0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-000151f0: 2020 2020 2020 5c6d 616b 6543 6c75 7374        \makeClust
-00015200: 6572 7320 7b0a 2020 2020 2020 2020 2020  ers {.          
-00015210: 2020 2020 2020 6327 380a 2020 2020 2020        c'8.      
-00015220: 2020 2020 2020 2020 2020 3c64 2720 6727            <d' g'
-00015230: 3e38 0a20 2020 2020 2020 2020 2020 2020  >8.             
-00015240: 2020 2062 2738 0a20 2020 2020 2020 2020     b'8.         
-00015250: 2020 207d 0a0a 2020 2020 2020 2020 3e3e     }..        >>
-00015260: 3e20 636c 7573 7465 720a 2020 2020 2020  > cluster.      
-00015270: 2020 436c 7573 7465 7228 2263 2738 203c    Cluster("c'8 <
-00015280: 6427 2067 273e 3820 6227 3822 290a 0a20  d' g'>8 b'8").. 
-00015290: 2020 2022 2222 0a0a 2020 2020 5f5f 646f     """..    __do
-000152a0: 6375 6d65 6e74 6174 696f 6e5f 7365 6374  cumentation_sect
-000152b0: 696f 6e5f 5f20 3d20 2243 6f6e 7461 696e  ion__ = "Contain
-000152c0: 6572 7322 0a0a 2020 2020 5f5f 736c 6f74  ers"..    __slot
-000152d0: 735f 5f20 3d20 2829 0a0a 2020 2020 6465  s__ = ()..    de
-000152e0: 6620 5f66 6f72 6d61 745f 6f70 656e 5f62  f _format_open_b
-000152f0: 7261 636b 6574 735f 7369 7465 2873 656c  rackets_site(sel
-00015300: 662c 2063 6f6e 7472 6962 7574 696f 6e73  f, contributions
-00015310: 293a 0a20 2020 2020 2020 2072 6573 756c  ):.        resul
-00015320: 7420 3d20 5b5d 0a20 2020 2020 2020 2069  t = [].        i
-00015330: 6620 7365 6c66 2e73 696d 756c 7461 6e65  f self.simultane
-00015340: 6f75 733a 0a20 2020 2020 2020 2020 2020  ous:.           
-00015350: 2062 7261 636b 6574 735f 6f70 656e 203d   brackets_open =
-00015360: 205b 223c 3c22 5d0a 2020 2020 2020 2020   ["<<"].        
-00015370: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00015380: 2020 6272 6163 6b65 7473 5f6f 7065 6e20    brackets_open 
-00015390: 3d20 5b22 7b22 5d0a 2020 2020 2020 2020  = ["{"].        
-000153a0: 636f 6e74 7269 6275 7469 6f6e 7320 3d20  contributions = 
-000153b0: 5b72 6622 5c6d 616b 6543 6c75 7374 6572  [rf"\makeCluster
-000153c0: 7320 7b62 7261 636b 6574 735f 6f70 656e  s {brackets_open
-000153d0: 5b30 5d7d 225d 0a20 2020 2020 2020 2072  [0]}"].        r
-000153e0: 6573 756c 742e 6578 7465 6e64 2863 6f6e  esult.extend(con
-000153f0: 7472 6962 7574 696f 6e73 290a 2020 2020  tributions).    
-00015400: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
-00015410: 740a 0a0a 636c 6173 7320 436f 6e74 6578  t...class Contex
-00015420: 7428 436f 6e74 6169 6e65 7229 3a0a 2020  t(Container):.  
-00015430: 2020 7222 2222 0a20 2020 204c 696c 7950    r""".    LilyP
-00015440: 6f6e 6420 636f 6e74 6578 742e 0a0a 2020  ond context...  
-00015450: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
-00015460: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
-00015470: 2020 203e 3e3e 2063 6f6e 7465 7874 203d     >>> context =
-00015480: 2061 626a 6164 2e43 6f6e 7465 7874 286c   abjad.Context(l
-00015490: 696c 7970 6f6e 645f 7479 7065 3d27 476c  ilypond_type='Gl
-000154a0: 6f62 616c 436f 6e74 6578 7427 2c20 6e61  obalContext', na
-000154b0: 6d65 3d27 4d65 7465 725f 566f 6963 6527  me='Meter_Voice'
-000154c0: 290a 2020 2020 2020 2020 3e3e 3e20 636f  ).        >>> co
-000154d0: 6e74 6578 740a 2020 2020 2020 2020 436f  ntext.        Co
-000154e0: 6e74 6578 7428 6c69 6c79 706f 6e64 5f74  ntext(lilypond_t
-000154f0: 7970 653d 2747 6c6f 6261 6c43 6f6e 7465  ype='GlobalConte
-00015500: 7874 272c 206e 616d 653d 274d 6574 6572  xt', name='Meter
-00015510: 5f56 6f69 6365 2729 0a0a 2020 2020 2020  _Voice')..      
-00015520: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
-00015530: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-00015540: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-00015550: 7970 6f6e 6428 636f 6e74 6578 7429 0a20  ypond(context). 
-00015560: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
-00015570: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
-00015580: 2020 2020 2020 2020 205c 636f 6e74 6578           \contex
-00015590: 7420 476c 6f62 616c 436f 6e74 6578 7420  t GlobalContext 
-000155a0: 3d20 224d 6574 6572 5f56 6f69 6365 220a  = "Meter_Voice".
-000155b0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-000155c0: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
-000155d0: 2022 2222 0a0a 2020 2020 2323 2320 434c   """..    ### CL
-000155e0: 4153 5320 5641 5249 4142 4c45 5320 2323  ASS VARIABLES ##
-000155f0: 230a 0a20 2020 205f 5f64 6f63 756d 656e  #..    __documen
-00015600: 7461 7469 6f6e 5f73 6563 7469 6f6e 5f5f  tation_section__
-00015610: 203d 2022 436f 6e74 6578 7473 220a 0a20   = "Contexts".. 
-00015620: 2020 205f 5f73 6c6f 7473 5f5f 203d 2028     __slots__ = (
-00015630: 0a20 2020 2020 2020 2022 5f6c 696c 7970  .        "_lilyp
-00015640: 6f6e 645f 7479 7065 222c 0a20 2020 2020  ond_type",.     
-00015650: 2020 2022 5f63 6f6e 7369 7374 735f 636f     "_consists_co
-00015660: 6d6d 616e 6473 222c 0a20 2020 2020 2020  mmands",.       
-00015670: 2022 5f64 6570 656e 6465 6e74 5f77 7261   "_dependent_wra
-00015680: 7070 6572 7322 2c0a 2020 2020 2020 2020  ppers",.        
-00015690: 225f 7265 6d6f 7665 5f63 6f6d 6d61 6e64  "_remove_command
-000156a0: 7322 2c0a 2020 2020 290a 0a20 2020 205f  s",.    )..    _
-000156b0: 6465 6661 756c 745f 6c69 6c79 706f 6e64  default_lilypond
-000156c0: 5f74 7970 6520 3d20 2256 6f69 6365 220a  _type = "Voice".
-000156d0: 0a20 2020 206c 696c 7970 6f6e 645f 7479  .    lilypond_ty
-000156e0: 7065 7320 3d20 280a 2020 2020 2020 2020  pes = (.        
-000156f0: 2253 636f 7265 222c 0a20 2020 2020 2020  "Score",.       
-00015700: 2022 5374 6166 6647 726f 7570 222c 0a20   "StaffGroup",. 
-00015710: 2020 2020 2020 2022 4368 6f69 7253 7461         "ChoirSta
-00015720: 6666 222c 0a20 2020 2020 2020 2022 4772  ff",.        "Gr
-00015730: 616e 6453 7461 6666 222c 0a20 2020 2020  andStaff",.     
-00015740: 2020 2022 5069 616e 6f53 7461 6666 222c     "PianoStaff",
-00015750: 0a20 2020 2020 2020 2022 5374 6166 6622  .        "Staff"
-00015760: 2c0a 2020 2020 2020 2020 2252 6879 7468  ,.        "Rhyth
-00015770: 6d69 6353 7461 6666 222c 0a20 2020 2020  micStaff",.     
-00015780: 2020 2022 5461 6253 7461 6666 222c 0a20     "TabStaff",. 
-00015790: 2020 2020 2020 2022 4472 756d 5374 6166         "DrumStaf
-000157a0: 6622 2c0a 2020 2020 2020 2020 2256 6174  f",.        "Vat
-000157b0: 6963 616e 6153 7461 6666 222c 0a20 2020  icanaStaff",.   
-000157c0: 2020 2020 2022 4d65 6e73 7572 616c 5374       "MensuralSt
-000157d0: 6166 6622 2c0a 2020 2020 2020 2020 2256  aff",.        "V
-000157e0: 6f69 6365 222c 0a20 2020 2020 2020 2022  oice",.        "
-000157f0: 5661 7469 6361 6e61 566f 6963 6522 2c0a  VaticanaVoice",.
-00015800: 2020 2020 2020 2020 224d 656e 7375 7261          "Mensura
-00015810: 6c56 6f69 6365 222c 0a20 2020 2020 2020  lVoice",.       
-00015820: 2022 4c79 7269 6373 222c 0a20 2020 2020   "Lyrics",.     
-00015830: 2020 2022 4472 756d 566f 6963 6522 2c0a     "DrumVoice",.
-00015840: 2020 2020 2020 2020 2246 6967 7572 6564          "Figured
-00015850: 4261 7373 222c 0a20 2020 2020 2020 2022  Bass",.        "
-00015860: 5461 6256 6f69 6365 222c 0a20 2020 2020  TabVoice",.     
-00015870: 2020 2022 4375 6556 6f69 6365 222c 0a20     "CueVoice",. 
-00015880: 2020 2020 2020 2022 4368 6f72 644e 616d         "ChordNam
-00015890: 6573 222c 0a20 2020 2029 0a0a 2020 2020  es",.    )..    
-000158a0: 2323 2320 494e 4954 4941 4c49 5a45 5220  ### INITIALIZER 
-000158b0: 2323 230a 0a20 2020 2023 2054 4f44 4f3a  ###..    # TODO:
-000158c0: 206d 616b 6520 6b65 7977 6f72 6473 206d   make keywords m
-000158d0: 616e 6461 746f 7279 0a20 2020 2064 6566  andatory.    def
-000158e0: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-000158f0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-00015900: 2063 6f6d 706f 6e65 6e74 733d 4e6f 6e65   components=None
-00015910: 2c0a 2020 2020 2020 2020 6c69 6c79 706f  ,.        lilypo
-00015920: 6e64 5f74 7970 653a 2073 7472 203d 2022  nd_type: str = "
-00015930: 436f 6e74 6578 7422 2c0a 2020 2020 2020  Context",.      
-00015940: 2020 7369 6d75 6c74 616e 656f 7573 3a20    simultaneous: 
-00015950: 626f 6f6c 203d 2046 616c 7365 2c0a 2020  bool = False,.  
-00015960: 2020 2020 2020 6e61 6d65 3a20 7374 7220        name: str 
-00015970: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
-00015980: 7461 673a 205f 7461 672e 5461 6720 3d20  tag: _tag.Tag = 
-00015990: 4e6f 6e65 2c0a 2020 2020 2020 2020 2a2c  None,.        *,
-000159a0: 0a20 2020 2020 2020 206c 616e 6775 6167  .        languag
-000159b0: 653a 2073 7472 203d 2022 656e 676c 6973  e: str = "englis
-000159c0: 6822 2c0a 2020 2020 2920 2d3e 204e 6f6e  h",.    ) -> Non
-000159d0: 653a 0a20 2020 2020 2020 2073 656c 662e  e:.        self.
-000159e0: 5f63 6f6e 7369 7374 735f 636f 6d6d 616e  _consists_comman
-000159f0: 6473 3a20 6c69 7374 5b73 7472 5d20 3d20  ds: list[str] = 
-00015a00: 5b5d 0a20 2020 2020 2020 2073 656c 662e  [].        self.
-00015a10: 5f64 6570 656e 6465 6e74 5f77 7261 7070  _dependent_wrapp
-00015a20: 6572 733a 206c 6973 7420 3d20 5b5d 0a20  ers: list = []. 
-00015a30: 2020 2020 2020 2073 656c 662e 5f72 656d         self._rem
-00015a40: 6f76 655f 636f 6d6d 616e 6473 3a20 6c69  ove_commands: li
-00015a50: 7374 5b73 7472 5d20 3d20 5b5d 0a20 2020  st[str] = [].   
-00015a60: 2020 2020 2073 656c 662e 6c69 6c79 706f       self.lilypo
-00015a70: 6e64 5f74 7970 6520 3d20 6c69 6c79 706f  nd_type = lilypo
-00015a80: 6e64 5f74 7970 650a 2020 2020 2020 2020  nd_type.        
-00015a90: 436f 6e74 6169 6e65 722e 5f5f 696e 6974  Container.__init
-00015aa0: 5f5f 280a 2020 2020 2020 2020 2020 2020  __(.            
-00015ab0: 7365 6c66 2c0a 2020 2020 2020 2020 2020  self,.          
-00015ac0: 2020 7369 6d75 6c74 616e 656f 7573 3d73    simultaneous=s
-00015ad0: 696d 756c 7461 6e65 6f75 732c 0a20 2020  imultaneous,.   
-00015ae0: 2020 2020 2020 2020 2063 6f6d 706f 6e65           compone
-00015af0: 6e74 733d 636f 6d70 6f6e 656e 7473 2c0a  nts=components,.
-00015b00: 2020 2020 2020 2020 2020 2020 6c61 6e67              lang
-00015b10: 7561 6765 3d6c 616e 6775 6167 652c 0a20  uage=language,. 
-00015b20: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-00015b30: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
-00015b40: 2020 7461 673d 7461 672c 0a20 2020 2020    tag=tag,.     
-00015b50: 2020 2029 0a0a 2020 2020 2323 2320 5350     )..    ### SP
-00015b60: 4543 4941 4c20 4d45 5448 4f44 5320 2323  ECIAL METHODS ##
-00015b70: 230a 0a20 2020 2064 6566 205f 5f63 6f70  #..    def __cop
-00015b80: 795f 5f28 7365 6c66 2c20 2a61 7267 756d  y__(self, *argum
-00015b90: 656e 7473 293a 0a20 2020 2020 2020 2022  ents):.        "
-00015ba0: 2222 0a20 2020 2020 2020 2053 6861 6c6c  "".        Shall
-00015bb0: 6f77 2063 6f70 6965 7320 636f 6e74 6578  ow copies contex
-00015bc0: 742e 0a0a 2020 2020 2020 2020 436f 7069  t...        Copi
-00015bd0: 6573 2069 6e64 6963 6174 6f72 732e 0a0a  es indicators...
-00015be0: 2020 2020 2020 2020 446f 6573 206e 6f74          Does not
-00015bf0: 2063 6f70 7920 6368 696c 6472 656e 2e0a   copy children..
-00015c00: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00015c10: 206e 6577 2063 6f6d 706f 6e65 6e74 2e0a   new component..
-00015c20: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00015c30: 2020 2020 6e65 775f 636f 6e74 6578 7420      new_context 
-00015c40: 3d20 436f 6e74 6169 6e65 722e 5f5f 636f  = Container.__co
-00015c50: 7079 5f5f 2873 656c 6629 0a20 2020 2020  py__(self).     
-00015c60: 2020 206e 6577 5f63 6f6e 7465 7874 2e5f     new_context._
-00015c70: 636f 6e73 6973 7473 5f63 6f6d 6d61 6e64  consists_command
-00015c80: 7320 3d20 636f 7079 2e63 6f70 7928 7365  s = copy.copy(se
-00015c90: 6c66 2e63 6f6e 7369 7374 735f 636f 6d6d  lf.consists_comm
-00015ca0: 616e 6473 290a 2020 2020 2020 2020 6e65  ands).        ne
-00015cb0: 775f 636f 6e74 6578 742e 5f72 656d 6f76  w_context._remov
-00015cc0: 655f 636f 6d6d 616e 6473 203d 2063 6f70  e_commands = cop
-00015cd0: 792e 636f 7079 2873 656c 662e 7265 6d6f  y.copy(self.remo
-00015ce0: 7665 5f63 6f6d 6d61 6e64 7329 0a20 2020  ve_commands).   
-00015cf0: 2020 2020 2072 6574 7572 6e20 6e65 775f       return new_
-00015d00: 636f 6e74 6578 740a 0a20 2020 2064 6566  context..    def
-00015d10: 205f 5f67 6574 6e65 7761 7267 735f 5f28   __getnewargs__(
-00015d20: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-00015d30: 2222 0a20 2020 2020 2020 2047 6574 7320  "".        Gets 
-00015d40: 6e65 7720 636f 6e74 6169 6e65 7220 6172  new container ar
-00015d50: 6775 6d65 6e74 732e 0a0a 2020 2020 2020  guments...      
-00015d60: 2020 5265 7475 726e 7320 7475 706c 652e    Returns tuple.
-00015d70: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00015d80: 2020 2020 2072 6574 7572 6e20 5b5d 2c20       return [], 
-00015d90: 7365 6c66 2e6c 696c 7970 6f6e 645f 7479  self.lilypond_ty
-00015da0: 7065 2c20 7365 6c66 2e73 696d 756c 7461  pe, self.simulta
-00015db0: 6e65 6f75 732c 2073 656c 662e 6e61 6d65  neous, self.name
-00015dc0: 0a0a 2020 2020 6465 6620 5f5f 7265 7072  ..    def __repr
-00015dd0: 5f5f 2873 656c 6629 202d 3e20 7374 723a  __(self) -> str:
-00015de0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00015df0: 2020 2020 2047 6574 7320 696e 7465 7270       Gets interp
-00015e00: 7265 7465 7220 7265 7072 6573 656e 7461  reter representa
-00015e10: 7469 6f6e 206f 6620 636f 6e74 6578 742e  tion of context.
-00015e20: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
-00015e30: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-00015e40: 650a 0a20 2020 2020 2020 2020 2020 203e  e..            >
-00015e50: 3e3e 2063 6f6e 7465 7874 203d 2061 626a  >> context = abj
-00015e60: 6164 2e43 6f6e 7465 7874 280a 2020 2020  ad.Context(.    
-00015e70: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-00015e80: 6c69 6c79 706f 6e64 5f74 7970 653d 2747  lilypond_type='G
-00015e90: 6c6f 6261 6c43 6f6e 7465 7874 272c 0a20  lobalContext',. 
-00015ea0: 2020 2020 2020 2020 2020 202e 2e2e 2020             ...  
-00015eb0: 2020 206e 616d 653d 274d 6574 6572 5f56     name='Meter_V
-00015ec0: 6f69 6365 272c 0a20 2020 2020 2020 2020  oice',.         
-00015ed0: 2020 202e 2e2e 2029 0a20 2020 2020 2020     ... ).       
-00015ee0: 2020 2020 203e 3e3e 2072 6570 7228 636f       >>> repr(co
-00015ef0: 6e74 6578 7429 0a20 2020 2020 2020 2020  ntext).         
-00015f00: 2020 2022 436f 6e74 6578 7428 6c69 6c79     "Context(lily
-00015f10: 706f 6e64 5f74 7970 653d 2747 6c6f 6261  pond_type='Globa
-00015f20: 6c43 6f6e 7465 7874 272c 206e 616d 653d  lContext', name=
-00015f30: 274d 6574 6572 5f56 6f69 6365 2729 220a  'Meter_Voice')".
-00015f40: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00015f50: 2020 2020 2070 6172 616d 6574 6572 7320       parameters 
-00015f60: 3d20 5b5d 0a20 2020 2020 2020 2069 6620  = [].        if 
-00015f70: 7365 6c66 2e63 6f6d 706f 6e65 6e74 733a  self.components:
-00015f80: 0a20 2020 2020 2020 2020 2020 2073 7472  .            str
-00015f90: 696e 6720 3d20 7265 7072 2873 656c 662e  ing = repr(self.
-00015fa0: 5f67 6574 5f63 6f6e 7465 6e74 735f 7375  _get_contents_su
-00015fb0: 6d6d 6172 7928 2929 0a20 2020 2020 2020  mmary()).       
-00015fc0: 2020 2020 2070 6172 616d 6574 6572 732e       parameters.
-00015fd0: 6170 7065 6e64 2873 7472 696e 6729 0a20  append(string). 
-00015fe0: 2020 2020 2020 2069 6620 7365 6c66 2e6c         if self.l
-00015ff0: 696c 7970 6f6e 645f 7479 7065 2021 3d20  ilypond_type != 
-00016000: 7479 7065 2873 656c 6629 2e5f 5f6e 616d  type(self).__nam
-00016010: 655f 5f3a 0a20 2020 2020 2020 2020 2020  e__:.           
-00016020: 2070 6172 616d 6574 6572 732e 6170 7065   parameters.appe
-00016030: 6e64 2866 226c 696c 7970 6f6e 645f 7479  nd(f"lilypond_ty
-00016040: 7065 3d7b 7365 6c66 2e6c 696c 7970 6f6e  pe={self.lilypon
-00016050: 645f 7479 7065 2172 7d22 290a 2020 2020  d_type!r}").    
-00016060: 2020 2020 6966 2073 656c 662e 6e61 6d65      if self.name
-00016070: 3a0a 2020 2020 2020 2020 2020 2020 7061  :.            pa
-00016080: 7261 6d65 7465 7273 2e61 7070 656e 6428  rameters.append(
-00016090: 6622 6e61 6d65 3d7b 7365 6c66 2e6e 616d  f"name={self.nam
-000160a0: 6521 727d 2229 0a20 2020 2020 2020 2069  e!r}").        i
-000160b0: 6620 7365 6c66 2e73 696d 756c 7461 6e65  f self.simultane
-000160c0: 6f75 7320 6973 2054 7275 653a 0a20 2020  ous is True:.   
-000160d0: 2020 2020 2020 2020 2070 6172 616d 6574           paramet
-000160e0: 6572 732e 6170 7065 6e64 2866 2273 696d  ers.append(f"sim
-000160f0: 756c 7461 6e65 6f75 733d 7b73 656c 662e  ultaneous={self.
-00016100: 7369 6d75 6c74 616e 656f 7573 2172 7d22  simultaneous!r}"
-00016110: 290a 2020 2020 2020 2020 7374 7269 6e67  ).        string
-00016120: 203d 2022 2c20 222e 6a6f 696e 2870 6172   = ", ".join(par
-00016130: 616d 6574 6572 7329 0a20 2020 2020 2020  ameters).       
-00016140: 2072 6574 7572 6e20 6622 7b74 7970 6528   return f"{type(
-00016150: 7365 6c66 292e 5f5f 6e61 6d65 5f5f 7d28  self).__name__}(
-00016160: 7b73 7472 696e 677d 2922 0a0a 2020 2020  {string})"..    
-00016170: 2323 2320 5052 4956 4154 4520 4d45 5448  ### PRIVATE METH
-00016180: 4f44 5320 2323 230a 0a20 2020 2064 6566  ODS ###..    def
-00016190: 205f 666f 726d 6174 5f63 6c6f 7369 6e67   _format_closing
-000161a0: 5f73 6974 6528 7365 6c66 2c20 636f 6e74  _site(self, cont
-000161b0: 7269 6275 7469 6f6e 7329 3a0a 2020 2020  ributions):.    
-000161c0: 2020 2020 7265 7375 6c74 203d 205b 5d0a      result = [].
-000161d0: 2020 2020 2020 2020 7265 7375 6c74 2e65          result.e
-000161e0: 7874 656e 6428 636f 6e74 7269 6275 7469  xtend(contributi
-000161f0: 6f6e 732e 636c 6f73 696e 672e 636f 6d6d  ons.closing.comm
-00016200: 616e 6473 290a 2020 2020 2020 2020 7265  ands).        re
-00016210: 7475 726e 2073 656c 662e 5f63 6f6e 7472  turn self._contr
-00016220: 6962 7574 696f 6e73 5f77 6974 685f 696e  ibutions_with_in
-00016230: 6465 6e74 2872 6573 756c 7429 0a0a 2020  dent(result)..  
-00016240: 2020 6465 6620 5f66 6f72 6d61 745f 636f    def _format_co
-00016250: 6e73 6973 7473 5f63 6f6d 6d61 6e64 7328  nsists_commands(
-00016260: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-00016270: 6573 756c 7420 3d20 5b5d 0a20 2020 2020  esult = [].     
-00016280: 2020 2066 6f72 2065 6e67 7261 7665 7220     for engraver 
-00016290: 696e 2073 656c 662e 636f 6e73 6973 7473  in self.consists
-000162a0: 5f63 6f6d 6d61 6e64 733a 0a20 2020 2020  _commands:.     
-000162b0: 2020 2020 2020 2073 7472 696e 6720 3d20         string = 
-000162c0: 7266 225c 636f 6e73 6973 7473 207b 656e  rf"\consists {en
-000162d0: 6772 6176 6572 7d22 0a20 2020 2020 2020  graver}".       
-000162e0: 2020 2020 2072 6573 756c 742e 6170 7065       result.appe
-000162f0: 6e64 2873 7472 696e 6729 0a20 2020 2020  nd(string).     
-00016300: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-00016310: 0a0a 2020 2020 6465 6620 5f66 6f72 6d61  ..    def _forma
-00016320: 745f 696e 766f 6361 7469 6f6e 2873 656c  t_invocation(sel
-00016330: 6629 3a0a 2020 2020 2020 2020 6966 2073  f):.        if s
-00016340: 656c 662e 6e61 6d65 2069 7320 6e6f 7420  elf.name is not 
-00016350: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00016360: 2020 7374 7269 6e67 203d 2072 6627 5c63    string = rf'\c
-00016370: 6f6e 7465 7874 207b 7365 6c66 2e6c 696c  ontext {self.lil
-00016380: 7970 6f6e 645f 7479 7065 7d20 3d20 227b  ypond_type} = "{
-00016390: 7365 6c66 2e6e 616d 657d 2227 0a20 2020  self.name}"'.   
-000163a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000163b0: 2020 2020 2020 2073 7472 696e 6720 3d20         string = 
-000163c0: 7266 225c 6e65 7720 7b73 656c 662e 6c69  rf"\new {self.li
-000163d0: 6c79 706f 6e64 5f74 7970 657d 220a 2020  lypond_type}".  
-000163e0: 2020 2020 2020 7265 7475 726e 2073 7472        return str
-000163f0: 696e 670a 0a20 2020 2064 6566 205f 666f  ing..    def _fo
-00016400: 726d 6174 5f6f 7065 6e5f 6272 6163 6b65  rmat_open_bracke
-00016410: 7473 5f73 6974 6528 7365 6c66 2c20 636f  ts_site(self, co
-00016420: 6e74 7269 6275 7469 6f6e 7329 3a0a 2020  ntributions):.  
-00016430: 2020 2020 2020 7265 7375 6c74 203d 205b        result = [
-00016440: 5d0a 2020 2020 2020 2020 6966 2073 656c  ].        if sel
-00016450: 662e 7369 6d75 6c74 616e 656f 7573 3a0a  f.simultaneous:.
-00016460: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00016470: 656c 662e 6964 656e 7469 6669 6572 3a0a  elf.identifier:.
-00016480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016490: 6f70 656e 5f62 7261 636b 6574 203d 2066  open_bracket = f
-000164a0: 223c 3c20 207b 7365 6c66 2e69 6465 6e74  "<<  {self.ident
-000164b0: 6966 6965 727d 220a 2020 2020 2020 2020  ifier}".        
-000164c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000164d0: 2020 2020 2020 2020 2020 6f70 656e 5f62            open_b
-000164e0: 7261 636b 6574 203d 2022 3c3c 220a 2020  racket = "<<".  
-000164f0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00016500: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00016510: 6964 656e 7469 6669 6572 3a0a 2020 2020  identifier:.    
-00016520: 2020 2020 2020 2020 2020 2020 6f70 656e              open
-00016530: 5f62 7261 636b 6574 203d 2066 227b 7b20  _bracket = f"{{ 
-00016540: 2020 7b73 656c 662e 6964 656e 7469 6669    {self.identifi
-00016550: 6572 7d22 0a20 2020 2020 2020 2020 2020  er}".           
-00016560: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00016570: 2020 2020 2020 206f 7065 6e5f 6272 6163         open_brac
-00016580: 6b65 7420 3d20 227b 220a 2020 2020 2020  ket = "{".      
-00016590: 2020 6272 6163 6b65 7473 5f6f 7065 6e20    brackets_open 
-000165a0: 3d20 5b6f 7065 6e5f 6272 6163 6b65 745d  = [open_bracket]
-000165b0: 0a20 2020 2020 2020 2072 656d 6f76 655f  .        remove_
-000165c0: 636f 6d6d 616e 6473 203d 2073 656c 662e  commands = self.
-000165d0: 5f66 6f72 6d61 745f 7265 6d6f 7665 5f63  _format_remove_c
-000165e0: 6f6d 6d61 6e64 7328 290a 2020 2020 2020  ommands().      
-000165f0: 2020 636f 6e73 6973 7473 5f63 6f6d 6d61    consists_comma
-00016600: 6e64 7320 3d20 7365 6c66 2e5f 666f 726d  nds = self._form
-00016610: 6174 5f63 6f6e 7369 7374 735f 636f 6d6d  at_consists_comm
-00016620: 616e 6473 2829 0a20 2020 2020 2020 206f  ands().        o
-00016630: 7665 7272 6964 6573 203d 2063 6f6e 7472  verrides = contr
-00016640: 6962 7574 696f 6e73 2e67 726f 625f 6f76  ibutions.grob_ov
-00016650: 6572 7269 6465 730a 2020 2020 2020 2020  errides.        
-00016660: 7365 7474 696e 6773 203d 2063 6f6e 7472  settings = contr
-00016670: 6962 7574 696f 6e73 2e63 6f6e 7465 7874  ibutions.context
-00016680: 5f73 6574 7469 6e67 730a 2020 2020 2020  _settings.      
-00016690: 2020 6966 2072 656d 6f76 655f 636f 6d6d    if remove_comm
-000166a0: 616e 6473 206f 7220 636f 6e73 6973 7473  ands or consists
-000166b0: 5f63 6f6d 6d61 6e64 7320 6f72 206f 7665  _commands or ove
-000166c0: 7272 6964 6573 206f 7220 7365 7474 696e  rrides or settin
-000166d0: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
-000166e0: 636f 6e74 7269 6275 7469 6f6e 7320 3d20  contributions = 
-000166f0: 5b73 656c 662e 5f66 6f72 6d61 745f 696e  [self._format_in
-00016700: 766f 6361 7469 6f6e 2829 2c20 7222 5c77  vocation(), r"\w
-00016710: 6974 6822 2c20 227b 225d 0a20 2020 2020  ith", "{"].     
-00016720: 2020 2020 2020 2063 6f6e 7472 6962 7574         contribut
-00016730: 696f 6e73 203d 2073 656c 662e 5f74 6167  ions = self._tag
-00016740: 5f73 7472 696e 6773 2863 6f6e 7472 6962  _strings(contrib
-00016750: 7574 696f 6e73 290a 2020 2020 2020 2020  utions).        
-00016760: 2020 2020 7265 7375 6c74 2e65 7874 656e      result.exten
-00016770: 6428 636f 6e74 7269 6275 7469 6f6e 7329  d(contributions)
-00016780: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
-00016790: 7472 6962 7574 696f 6e73 203d 205b 5f69  tributions = [_i
-000167a0: 6e64 656e 742e 494e 4445 4e54 202b 205f  ndent.INDENT + _
-000167b0: 2066 6f72 205f 2069 6e20 7265 6d6f 7665   for _ in remove
-000167c0: 5f63 6f6d 6d61 6e64 735d 0a20 2020 2020  _commands].     
-000167d0: 2020 2020 2020 2063 6f6e 7472 6962 7574         contribut
-000167e0: 696f 6e73 203d 2073 656c 662e 5f74 6167  ions = self._tag
-000167f0: 5f73 7472 696e 6773 2863 6f6e 7472 6962  _strings(contrib
-00016800: 7574 696f 6e73 290a 2020 2020 2020 2020  utions).        
-00016810: 2020 2020 7265 7375 6c74 2e65 7874 656e      result.exten
-00016820: 6428 636f 6e74 7269 6275 7469 6f6e 7329  d(contributions)
-00016830: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
-00016840: 7472 6962 7574 696f 6e73 203d 205b 5f69  tributions = [_i
-00016850: 6e64 656e 742e 494e 4445 4e54 202b 205f  ndent.INDENT + _
-00016860: 2066 6f72 205f 2069 6e20 636f 6e73 6973   for _ in consis
-00016870: 7473 5f63 6f6d 6d61 6e64 735d 0a20 2020  ts_commands].   
-00016880: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
-00016890: 7574 696f 6e73 203d 2073 656c 662e 5f74  utions = self._t
-000168a0: 6167 5f73 7472 696e 6773 2863 6f6e 7472  ag_strings(contr
-000168b0: 6962 7574 696f 6e73 290a 2020 2020 2020  ibutions).      
-000168c0: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
-000168d0: 656e 6428 636f 6e74 7269 6275 7469 6f6e  end(contribution
-000168e0: 7329 0a20 2020 2020 2020 2020 2020 2063  s).            c
-000168f0: 6f6e 7472 6962 7574 696f 6e73 203d 205b  ontributions = [
-00016900: 5f69 6e64 656e 742e 494e 4445 4e54 202b  _indent.INDENT +
-00016910: 205f 2066 6f72 205f 2069 6e20 6f76 6572   _ for _ in over
-00016920: 7269 6465 735d 0a20 2020 2020 2020 2020  rides].         
-00016930: 2020 2063 6f6e 7472 6962 7574 696f 6e73     contributions
-00016940: 203d 2073 656c 662e 5f74 6167 5f73 7472   = self._tag_str
-00016950: 696e 6773 2863 6f6e 7472 6962 7574 696f  ings(contributio
-00016960: 6e73 290a 2020 2020 2020 2020 2020 2020  ns).            
-00016970: 7265 7375 6c74 2e65 7874 656e 6428 636f  result.extend(co
-00016980: 6e74 7269 6275 7469 6f6e 7329 0a20 2020  ntributions).   
-00016990: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
-000169a0: 7574 696f 6e73 203d 205b 5f69 6e64 656e  utions = [_inden
-000169b0: 742e 494e 4445 4e54 202b 205f 2066 6f72  t.INDENT + _ for
-000169c0: 205f 2069 6e20 7365 7474 696e 6773 5d0a   _ in settings].
-000169d0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-000169e0: 7269 6275 7469 6f6e 7320 3d20 7365 6c66  ributions = self
-000169f0: 2e5f 7461 675f 7374 7269 6e67 7328 636f  ._tag_strings(co
-00016a00: 6e74 7269 6275 7469 6f6e 7329 0a20 2020  ntributions).   
-00016a10: 2020 2020 2020 2020 2072 6573 756c 742e           result.
-00016a20: 6578 7465 6e64 2863 6f6e 7472 6962 7574  extend(contribut
-00016a30: 696f 6e73 290a 2020 2020 2020 2020 2020  ions).          
-00016a40: 2020 636f 6e74 7269 6275 7469 6f6e 7320    contributions 
-00016a50: 3d20 5b66 227d 7d20 7b62 7261 636b 6574  = [f"}} {bracket
-00016a60: 735f 6f70 656e 5b30 5d7d 225d 0a20 2020  s_open[0]}"].   
-00016a70: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
-00016a80: 7574 696f 6e73 203d 205b 227d 222c 206f  utions = ["}", o
-00016a90: 7065 6e5f 6272 6163 6b65 745d 0a20 2020  pen_bracket].   
-00016aa0: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
-00016ab0: 7574 696f 6e73 203d 2073 656c 662e 5f74  utions = self._t
-00016ac0: 6167 5f73 7472 696e 6773 2863 6f6e 7472  ag_strings(contr
-00016ad0: 6962 7574 696f 6e73 290a 2020 2020 2020  ibutions).      
-00016ae0: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
-00016af0: 656e 6428 636f 6e74 7269 6275 7469 6f6e  end(contribution
-00016b00: 7329 0a20 2020 2020 2020 2065 6c73 653a  s).        else:
-00016b10: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
-00016b20: 7472 6962 7574 696f 6e20 3d20 7365 6c66  tribution = self
-00016b30: 2e5f 666f 726d 6174 5f69 6e76 6f63 6174  ._format_invocat
-00016b40: 696f 6e28 290a 2020 2020 2020 2020 2020  ion().          
-00016b50: 2020 636f 6e74 7269 6275 7469 6f6e 202b    contribution +
-00016b60: 3d20 6622 207b 6272 6163 6b65 7473 5f6f  = f" {brackets_o
-00016b70: 7065 6e5b 305d 7d22 0a20 2020 2020 2020  pen[0]}".       
-00016b80: 2020 2020 2063 6f6e 7472 6962 7574 696f       contributio
-00016b90: 6e73 203d 205b 636f 6e74 7269 6275 7469  ns = [contributi
-00016ba0: 6f6e 5d0a 2020 2020 2020 2020 2020 2020  on].            
-00016bb0: 636f 6e74 7269 6275 7469 6f6e 7320 3d20  contributions = 
-00016bc0: 5b73 656c 662e 5f66 6f72 6d61 745f 696e  [self._format_in
-00016bd0: 766f 6361 7469 6f6e 2829 2c20 6f70 656e  vocation(), open
-00016be0: 5f62 7261 636b 6574 5d0a 2020 2020 2020  _bracket].      
-00016bf0: 2020 2020 2020 636f 6e74 7269 6275 7469        contributi
-00016c00: 6f6e 7320 3d20 7365 6c66 2e5f 7461 675f  ons = self._tag_
-00016c10: 7374 7269 6e67 7328 636f 6e74 7269 6275  strings(contribu
-00016c20: 7469 6f6e 7329 0a20 2020 2020 2020 2020  tions).         
-00016c30: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
-00016c40: 2863 6f6e 7472 6962 7574 696f 6e73 290a  (contributions).
-00016c50: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00016c60: 6573 756c 740a 0a20 2020 2064 6566 205f  esult..    def _
-00016c70: 666f 726d 6174 5f6f 7065 6e69 6e67 5f73  format_opening_s
-00016c80: 6974 6528 7365 6c66 2c20 636f 6e74 7269  ite(self, contri
-00016c90: 6275 7469 6f6e 7329 3a0a 2020 2020 2020  butions):.      
-00016ca0: 2020 7265 7375 6c74 203d 205b 5d0a 2020    result = [].  
-00016cb0: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
-00016cc0: 656e 6428 636f 6e74 7269 6275 7469 6f6e  end(contribution
-00016cd0: 732e 6f70 656e 696e 672e 636f 6d6d 616e  s.opening.comman
-00016ce0: 6473 290a 2020 2020 2020 2020 7265 7475  ds).        retu
-00016cf0: 726e 2073 656c 662e 5f63 6f6e 7472 6962  rn self._contrib
-00016d00: 7574 696f 6e73 5f77 6974 685f 696e 6465  utions_with_inde
-00016d10: 6e74 2872 6573 756c 7429 0a0a 2020 2020  nt(result)..    
-00016d20: 6465 6620 5f66 6f72 6d61 745f 7265 6d6f  def _format_remo
-00016d30: 7665 5f63 6f6d 6d61 6e64 7328 7365 6c66  ve_commands(self
-00016d40: 293a 0a20 2020 2020 2020 2072 6573 756c  ):.        resul
-00016d50: 7420 3d20 5b5d 0a20 2020 2020 2020 2066  t = [].        f
-00016d60: 6f72 2065 6e67 7261 7665 7220 696e 2073  or engraver in s
-00016d70: 656c 662e 7265 6d6f 7665 5f63 6f6d 6d61  elf.remove_comma
-00016d80: 6e64 733a 0a20 2020 2020 2020 2020 2020  nds:.           
-00016d90: 2073 7472 696e 6720 3d20 7266 225c 7265   string = rf"\re
-00016da0: 6d6f 7665 207b 656e 6772 6176 6572 7d22  move {engraver}"
-00016db0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00016dc0: 756c 742e 6170 7065 6e64 2873 7472 696e  ult.append(strin
-00016dd0: 6729 0a20 2020 2020 2020 2072 6574 7572  g).        retur
-00016de0: 6e20 7265 7375 6c74 0a0a 2020 2020 2323  n result..    ##
-00016df0: 2320 5055 424c 4943 2050 524f 5045 5254  # PUBLIC PROPERT
-00016e00: 4945 5320 2323 230a 0a20 2020 2040 7072  IES ###..    @pr
-00016e10: 6f70 6572 7479 0a20 2020 2064 6566 2063  operty.    def c
-00016e20: 6f6e 7369 7374 735f 636f 6d6d 616e 6473  onsists_commands
-00016e30: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00016e40: 7222 2222 0a20 2020 2020 2020 2055 6e6f  r""".        Uno
-00016e50: 7264 6572 6564 2073 6574 206f 6620 4c69  rdered set of Li
-00016e60: 6c79 506f 6e64 2065 6e67 7261 7665 7273  lyPond engravers
-00016e70: 2074 6f20 696e 636c 7564 6520 696e 2063   to include in c
-00016e80: 6f6e 7465 7874 2064 6566 696e 6974 696f  ontext definitio
-00016e90: 6e2e 0a0a 2020 2020 2020 2020 2e2e 2020  n...        ..  
-00016ea0: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-00016eb0: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
-00016ec0: 204d 616e 6167 6520 7769 7468 2061 6464   Manage with add
-00016ed0: 2c20 7570 6461 7465 2c20 6f74 6865 7220  , update, other 
-00016ee0: 7374 616e 6461 7264 2073 6574 2063 6f6d  standard set com
-00016ef0: 6d61 6e64 733a 0a0a 2020 2020 2020 2020  mands:..        
-00016f00: 2020 2020 3e3e 3e20 7374 6166 6620 3d20      >>> staff = 
-00016f10: 6162 6a61 642e 5374 6166 6628 5b5d 290a  abjad.Staff([]).
-00016f20: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00016f30: 7374 6166 662e 636f 6e73 6973 7473 5f63  staff.consists_c
-00016f40: 6f6d 6d61 6e64 732e 6170 7065 6e64 2822  ommands.append("
-00016f50: 486f 7269 7a6f 6e74 616c 5f62 7261 636b  Horizontal_brack
-00016f60: 6574 5f65 6e67 7261 7665 7222 290a 2020  et_engraver").  
-00016f70: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-00016f80: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-00016f90: 7970 6f6e 6428 7374 6166 6629 0a20 2020  ypond(staff).   
-00016fa0: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
-00016fb0: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
-00016fc0: 2020 2020 2020 205c 6e65 7720 5374 6166         \new Staf
-00016fd0: 660a 2020 2020 2020 2020 2020 2020 5c77  f.            \w
-00016fe0: 6974 680a 2020 2020 2020 2020 2020 2020  ith.            
-00016ff0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-00017000: 2020 5c63 6f6e 7369 7374 7320 486f 7269    \consists Hori
-00017010: 7a6f 6e74 616c 5f62 7261 636b 6574 5f65  zontal_bracket_e
-00017020: 6e67 7261 7665 720a 2020 2020 2020 2020  ngraver.        
-00017030: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
-00017040: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-00017050: 7d0a 0a20 2020 2020 2020 2022 2222 0a20  }..        """. 
-00017060: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00017070: 6c66 2e5f 636f 6e73 6973 7473 5f63 6f6d  lf._consists_com
-00017080: 6d61 6e64 730a 0a20 2020 2040 7072 6f70  mands..    @prop
-00017090: 6572 7479 0a20 2020 2064 6566 206c 696c  erty.    def lil
-000170a0: 7970 6f6e 645f 636f 6e74 6578 7428 7365  ypond_context(se
-000170b0: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-000170c0: 0a20 2020 2020 2020 2047 6574 7320 6060  .        Gets ``
-000170d0: 4c69 6c79 506f 6e64 436f 6e74 6578 7460  LilyPondContext`
-000170e0: 6020 6173 736f 6369 6174 6564 2077 6974  ` associated wit
-000170f0: 6820 636f 6e74 6578 742e 0a0a 2020 2020  h context...    
-00017100: 2020 2020 5265 7475 726e 7320 4c69 6c79      Returns Lily
-00017110: 506f 6e64 2063 6f6e 7465 7874 2069 6e73  Pond context ins
-00017120: 7461 6e63 652e 0a20 2020 2020 2020 2022  tance..        "
-00017130: 2222 0a20 2020 2020 2020 2074 7279 3a0a  "".        try:.
-00017140: 2020 2020 2020 2020 2020 2020 6c69 6c79              lily
-00017150: 706f 6e64 5f63 6f6e 7465 7874 203d 205f  pond_context = _
-00017160: 6c79 7072 6f78 792e 4c69 6c79 506f 6e64  lyproxy.LilyPond
-00017170: 436f 6e74 6578 7428 6e61 6d65 3d73 656c  Context(name=sel
-00017180: 662e 6c69 6c79 706f 6e64 5f74 7970 6529  f.lilypond_type)
-00017190: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
-000171a0: 4173 7365 7274 696f 6e45 7272 6f72 3a0a  AssertionError:.
-000171b0: 2020 2020 2020 2020 2020 2020 6c69 6c79              lily
-000171c0: 706f 6e64 5f63 6f6e 7465 7874 203d 205f  pond_context = _
-000171d0: 6c79 7072 6f78 792e 4c69 6c79 506f 6e64  lyproxy.LilyPond
-000171e0: 436f 6e74 6578 7428 0a20 2020 2020 2020  Context(.       
-000171f0: 2020 2020 2020 2020 206e 616d 653d 7365           name=se
-00017200: 6c66 2e5f 6465 6661 756c 745f 6c69 6c79  lf._default_lily
-00017210: 706f 6e64 5f74 7970 650a 2020 2020 2020  pond_type.      
-00017220: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00017230: 7265 7475 726e 206c 696c 7970 6f6e 645f  return lilypond_
-00017240: 636f 6e74 6578 740a 0a20 2020 2040 7072  context..    @pr
-00017250: 6f70 6572 7479 0a20 2020 2064 6566 206c  operty.    def l
-00017260: 696c 7970 6f6e 645f 7479 7065 2873 656c  ilypond_type(sel
-00017270: 6629 202d 3e20 7374 723a 0a20 2020 2020  f) -> str:.     
-00017280: 2020 2022 2222 0a20 2020 2020 2020 2047     """.        G
-00017290: 6574 7320 6c69 6c79 706f 6e64 2074 7970  ets lilypond typ
-000172a0: 652e 0a0a 2020 2020 2020 2020 2e2e 2020  e...        ..  
-000172b0: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-000172c0: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
-000172d0: 203e 3e3e 2063 6f6e 7465 7874 203d 2061   >>> context = a
-000172e0: 626a 6164 2e43 6f6e 7465 7874 280a 2020  bjad.Context(.  
-000172f0: 2020 2020 2020 2020 2020 2e2e 2e20 2020            ...   
-00017300: 2020 6c69 6c79 706f 6e64 5f74 7970 653d    lilypond_type=
-00017310: 2256 696f 6c69 6e53 7461 6666 222c 0a20  "ViolinStaff",. 
-00017320: 2020 2020 2020 2020 2020 202e 2e2e 2020             ...  
-00017330: 2020 206e 616d 653d 224d 7956 696f 6c69     name="MyVioli
-00017340: 6e53 7461 6666 222c 0a20 2020 2020 2020  nStaff",.       
-00017350: 2020 2020 202e 2e2e 2029 0a20 2020 2020       ... ).     
-00017360: 2020 2020 2020 203e 3e3e 2063 6f6e 7465         >>> conte
-00017370: 7874 2e6c 696c 7970 6f6e 645f 7479 7065  xt.lilypond_type
-00017380: 0a20 2020 2020 2020 2020 2020 2027 5669  .            'Vi
-00017390: 6f6c 696e 5374 6166 6627 0a0a 2020 2020  olinStaff'..    
-000173a0: 2020 2020 4765 7473 2061 6e64 2073 6574      Gets and set
-000173b0: 7320 6c69 6c79 706f 6e64 2074 7970 6520  s lilypond type 
-000173c0: 6f66 2063 6f6e 7465 7874 2e0a 2020 2020  of context..    
-000173d0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000173e0: 7265 7475 726e 2073 656c 662e 5f6c 696c  return self._lil
-000173f0: 7970 6f6e 645f 7479 7065 0a0a 2020 2020  ypond_type..    
-00017400: 406c 696c 7970 6f6e 645f 7479 7065 2e73  @lilypond_type.s
-00017410: 6574 7465 720a 2020 2020 6465 6620 6c69  etter.    def li
-00017420: 6c79 706f 6e64 5f74 7970 6528 7365 6c66  lypond_type(self
-00017430: 2c20 6172 6775 6d65 6e74 293a 0a20 2020  , argument):.   
-00017440: 2020 2020 2069 6620 6172 6775 6d65 6e74       if argument
-00017450: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00017460: 2020 2020 2020 6172 6775 6d65 6e74 203d        argument =
-00017470: 2074 7970 6528 7365 6c66 292e 5f5f 6e61   type(self).__na
-00017480: 6d65 5f5f 0a20 2020 2020 2020 2065 6c73  me__.        els
-00017490: 653a 0a20 2020 2020 2020 2020 2020 2061  e:.            a
-000174a0: 7267 756d 656e 7420 3d20 7374 7228 6172  rgument = str(ar
-000174b0: 6775 6d65 6e74 290a 2020 2020 2020 2020  gument).        
-000174c0: 7365 6c66 2e5f 6c69 6c79 706f 6e64 5f74  self._lilypond_t
-000174d0: 7970 6520 3d20 6172 6775 6d65 6e74 0a0a  ype = argument..
-000174e0: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
-000174f0: 2020 6465 6620 7265 6d6f 7665 5f63 6f6d    def remove_com
-00017500: 6d61 6e64 7328 7365 6c66 293a 0a20 2020  mands(self):.   
-00017510: 2020 2020 2072 2222 220a 2020 2020 2020       r""".      
-00017520: 2020 556e 6f72 6465 7265 6420 7365 7420    Unordered set 
-00017530: 6f66 204c 696c 7950 6f6e 6420 656e 6772  of LilyPond engr
-00017540: 6176 6572 7320 746f 2072 656d 6f76 6520  avers to remove 
-00017550: 6672 6f6d 2063 6f6e 7465 7874 2e0a 0a20  from context... 
-00017560: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
-00017570: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
-00017580: 2020 2020 2020 2020 2020 2020 4d61 6e61              Mana
-00017590: 6765 2077 6974 6820 6164 642c 2075 7064  ge with add, upd
-000175a0: 6174 652c 206f 7468 6572 2073 7461 6e64  ate, other stand
-000175b0: 6172 6420 7365 7420 636f 6d6d 616e 6473  ard set commands
-000175c0: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-000175d0: 3e3e 2073 7461 6666 203d 2061 626a 6164  >> staff = abjad
-000175e0: 2e53 7461 6666 285b 5d29 0a20 2020 2020  .Staff([]).     
-000175f0: 2020 2020 2020 203e 3e3e 2073 7461 6666         >>> staff
-00017600: 2e72 656d 6f76 655f 636f 6d6d 616e 6473  .remove_commands
-00017610: 2e61 7070 656e 6428 2254 696d 655f 7369  .append("Time_si
-00017620: 676e 6174 7572 655f 656e 6772 6176 6572  gnature_engraver
-00017630: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
-00017640: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
-00017650: 642e 6c69 6c79 706f 6e64 2873 7461 6666  d.lilypond(staff
-00017660: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00017670: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-00017680: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
-00017690: 2053 7461 6666 0a20 2020 2020 2020 2020   Staff.         
-000176a0: 2020 205c 7769 7468 0a20 2020 2020 2020     \with.       
-000176b0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-000176c0: 2020 2020 2020 205c 7265 6d6f 7665 2054         \remove T
-000176d0: 696d 655f 7369 676e 6174 7572 655f 656e  ime_signature_en
-000176e0: 6772 6176 6572 0a20 2020 2020 2020 2020  graver.         
-000176f0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00017700: 207b 0a20 2020 2020 2020 2020 2020 207d   {.            }
-00017710: 0a0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-00017720: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00017730: 662e 5f72 656d 6f76 655f 636f 6d6d 616e  f._remove_comman
-00017740: 6473 0a0a 2020 2020 4070 726f 7065 7274  ds..    @propert
-00017750: 790a 2020 2020 6465 6620 7461 6728 7365  y.    def tag(se
-00017760: 6c66 2920 2d3e 205f 7461 672e 5461 6720  lf) -> _tag.Tag 
-00017770: 7c20 4e6f 6e65 3a0a 2020 2020 2020 2020  | None:.        
-00017780: 7222 2222 0a20 2020 2020 2020 2047 6574  r""".        Get
-00017790: 7320 7461 672e 0a0a 2020 2020 2020 2020  s tag...        
-000177a0: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
-000177b0: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
-000177c0: 2020 2020 203e 3e3e 2063 6f6e 7465 7874       >>> context
-000177d0: 203d 2061 626a 6164 2e43 6f6e 7465 7874   = abjad.Context
-000177e0: 280a 2020 2020 2020 2020 2020 2020 2e2e  (.            ..
-000177f0: 2e20 2020 2020 2263 2734 2064 2720 6527  .     "c'4 d' e'
-00017800: 2066 2722 2c0a 2020 2020 2020 2020 2020   f'",.          
-00017810: 2020 2e2e 2e20 2020 2020 6c69 6c79 706f    ...     lilypo
-00017820: 6e64 5f74 7970 653d 2243 7573 746f 6d43  nd_type="CustomC
-00017830: 6f6e 7465 7874 222c 0a20 2020 2020 2020  ontext",.       
-00017840: 2020 2020 202e 2e2e 2020 2020 2074 6167       ...     tag
-00017850: 3d61 626a 6164 2e54 6167 2822 5245 4422  =abjad.Tag("RED"
-00017860: 292c 0a20 2020 2020 2020 2020 2020 202e  ),.            .
-00017870: 2e2e 2020 2020 2029 0a20 2020 2020 2020  ..     ).       
-00017880: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-00017890: 686f 7728 636f 6e74 6578 7429 2023 2064  how(context) # d
-000178a0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
-000178b0: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
-000178c0: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
-000178d0: 6c79 706f 6e64 2863 6f6e 7465 7874 2c20  lypond(context, 
-000178e0: 7461 6773 3d54 7275 6529 0a20 2020 2020  tags=True).     
-000178f0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
-00017900: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
-00017910: 2020 2020 2025 2120 5245 440a 2020 2020       %! RED.    
-00017920: 2020 2020 2020 2020 5c6e 6577 2043 7573          \new Cus
-00017930: 746f 6d43 6f6e 7465 7874 0a20 2020 2020  tomContext.     
-00017940: 2020 2020 2020 2025 2120 5245 440a 2020         %! RED.  
-00017950: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-00017960: 2020 2020 2020 2020 2020 2020 6327 340a              c'4.
-00017970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017980: 6427 340a 2020 2020 2020 2020 2020 2020  d'4.            
-00017990: 2020 2020 6527 340a 2020 2020 2020 2020      e'4.        
-000179a0: 2020 2020 2020 2020 6627 340a 2020 2020          f'4.    
-000179b0: 2020 2020 2020 2020 2521 2052 4544 0a20          %! RED. 
-000179c0: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
-000179d0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000179e0: 2020 7265 7475 726e 2073 7570 6572 2829    return super()
-000179f0: 2e74 6167 0a0a 0a63 6c61 7373 204d 756c  .tag...class Mul
-00017a00: 7469 6d65 6173 7572 6552 6573 7428 4c65  timeasureRest(Le
-00017a10: 6166 293a 0a20 2020 2072 2222 220a 2020  af):.    r""".  
-00017a20: 2020 4d75 6c74 696d 6561 7375 7265 2072    Multimeasure r
-00017a30: 6573 742e 0a0a 2020 2020 2e2e 2020 636f  est...    ..  co
-00017a40: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-00017a50: 650a 0a20 2020 2020 2020 203e 3e3e 2072  e..        >>> r
-00017a60: 6573 7420 3d20 6162 6a61 642e 4d75 6c74  est = abjad.Mult
-00017a70: 696d 6561 7375 7265 5265 7374 2828 312c  imeasureRest((1,
-00017a80: 2034 2929 0a20 2020 2020 2020 203e 3e3e   4)).        >>>
-00017a90: 2061 626a 6164 2e73 686f 7728 7265 7374   abjad.show(rest
-00017aa0: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-00017ab0: 4950 0a0a 2020 2020 2e2e 2020 636f 6e74  IP..    ..  cont
-00017ac0: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-00017ad0: 0a20 2020 2020 2020 204d 756c 7469 6d65  .        Multime
-00017ae0: 6173 7572 6520 7265 7374 7320 6d61 7920  asure rests may 
-00017af0: 6265 2074 6167 6765 643a 0a0a 2020 2020  be tagged:..    
-00017b00: 2020 2020 3e3e 3e20 7265 7374 203d 2061      >>> rest = a
-00017b10: 626a 6164 2e4d 756c 7469 6d65 6173 7572  bjad.Multimeasur
-00017b20: 6552 6573 7428 0a20 2020 2020 2020 202e  eRest(.        .
-00017b30: 2e2e 2020 2020 2022 5231 222c 2074 6167  ..     "R1", tag
-00017b40: 3d61 626a 6164 2e54 6167 2822 474c 4f42  =abjad.Tag("GLOB
-00017b50: 414c 5f4d 554c 5449 4d45 4153 5552 455f  AL_MULTIMEASURE_
-00017b60: 5245 5354 2229 0a20 2020 2020 2020 202e  REST").        .
-00017b70: 2e2e 2029 0a20 2020 2020 2020 203e 3e3e  .. ).        >>>
-00017b80: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
-00017b90: 6c69 6c79 706f 6e64 2872 6573 742c 2074  lilypond(rest, t
-00017ba0: 6167 733d 5472 7565 290a 2020 2020 2020  ags=True).      
-00017bb0: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
-00017bc0: 6e67 290a 2020 2020 2020 2020 2521 2047  ng).        %! G
-00017bd0: 4c4f 4241 4c5f 4d55 4c54 494d 4541 5355  LOBAL_MULTIMEASU
-00017be0: 5245 5f52 4553 540a 2020 2020 2020 2020  RE_REST.        
-00017bf0: 5231 0a0a 2020 2020 2e2e 2020 636f 6e74  R1..    ..  cont
-00017c00: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-00017c10: 0a20 2020 2020 2020 2052 4547 5245 5353  .        REGRESS
-00017c20: 494f 4e20 2331 3034 392e 2050 6172 7365  ION #1049. Parse
-00017c30: 7220 7265 6164 7320 6d75 6c74 696d 6561  r reads multimea
-00017c40: 7375 7265 2072 6573 7420 6d75 6c74 6970  sure rest multip
-00017c50: 6c69 6572 733a 0a0a 2020 2020 2020 2020  liers:..        
-00017c60: 3e3e 3e20 7374 6166 6620 3d20 6162 6a61  >>> staff = abja
-00017c70: 642e 5374 6166 6628 7222 5c74 696d 6520  d.Staff(r"\time 
-00017c80: 332f 3820 5231 202a 2033 2f38 2229 0a20  3/8 R1 * 3/8"). 
-00017c90: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-00017ca0: 2e73 686f 7728 7374 6166 6629 2023 2064  .show(staff) # d
-00017cb0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
-00017cc0: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-00017cd0: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-00017ce0: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
-00017cf0: 642e 6c69 6c79 706f 6e64 2873 7461 6666  d.lilypond(staff
-00017d00: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00017d10: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-00017d20: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
-00017d30: 2053 7461 6666 0a20 2020 2020 2020 2020   Staff.         
-00017d40: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00017d50: 2020 2020 205c 7469 6d65 2033 2f38 0a20       \time 3/8. 
-00017d60: 2020 2020 2020 2020 2020 2020 2020 2052                 R
-00017d70: 3120 2a20 332f 380a 2020 2020 2020 2020  1 * 3/8.        
-00017d80: 2020 2020 7d0a 0a20 2020 2022 2222 0a0a      }..    """..
-00017d90: 2020 2020 2323 2320 434c 4153 5320 5641      ### CLASS VA
-00017da0: 5249 4142 4c45 5320 2323 230a 0a20 2020  RIABLES ###..   
-00017db0: 205f 5f64 6f63 756d 656e 7461 7469 6f6e   __documentation
-00017dc0: 5f73 6563 7469 6f6e 5f5f 203d 2022 4c65  _section__ = "Le
-00017dd0: 6176 6573 220a 0a20 2020 205f 5f73 6c6f  aves"..    __slo
-00017de0: 7473 5f5f 203d 2028 290a 0a20 2020 2023  ts__ = ()..    #
-00017df0: 2323 2049 4e49 5449 414c 495a 4552 2023  ## INITIALIZER #
-00017e00: 2323 0a0a 2020 2020 6465 6620 5f5f 696e  ##..    def __in
-00017e10: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
-00017e20: 6c66 2c0a 2020 2020 2020 2020 2a61 7267  lf,.        *arg
-00017e30: 756d 656e 7473 2c0a 2020 2020 2020 2020  uments,.        
-00017e40: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
-00017e50: 2265 6e67 6c69 7368 222c 0a20 2020 2020  "english",.     
-00017e60: 2020 206d 756c 7469 706c 6965 723a 205f     multiplier: _
-00017e70: 7479 7069 6e67 732e 4475 7261 7469 6f6e  typings.Duration
-00017e80: 5479 7069 6e67 203d 204e 6f6e 652c 0a20  Typing = None,. 
-00017e90: 2020 2020 2020 2074 6167 3a20 5f74 6167         tag: _tag
-00017ea0: 2e54 6167 203d 204e 6f6e 652c 0a20 2020  .Tag = None,.   
-00017eb0: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00017ec0: 2020 2020 6966 206c 656e 2861 7267 756d      if len(argum
-00017ed0: 656e 7473 2920 3d3d 2030 3a0a 2020 2020  ents) == 0:.    
-00017ee0: 2020 2020 2020 2020 6172 6775 6d65 6e74          argument
-00017ef0: 7320 3d20 2828 312c 2034 292c 290a 2020  s = ((1, 4),).  
-00017f00: 2020 2020 2020 7265 7374 203d 2052 6573        rest = Res
-00017f10: 7428 2a61 7267 756d 656e 7473 2c20 6c61  t(*arguments, la
-00017f20: 6e67 7561 6765 3d6c 616e 6775 6167 6529  nguage=language)
-00017f30: 0a20 2020 2020 2020 204c 6561 662e 5f5f  .        Leaf.__
-00017f40: 696e 6974 5f5f 2873 656c 662c 2072 6573  init__(self, res
-00017f50: 742e 7772 6974 7465 6e5f 6475 7261 7469  t.written_durati
-00017f60: 6f6e 2c20 6d75 6c74 6970 6c69 6572 3d6d  on, multiplier=m
-00017f70: 756c 7469 706c 6965 722c 2074 6167 3d74  ultiplier, tag=t
-00017f80: 6167 290a 0a20 2020 2023 2323 2050 5249  ag)..    ### PRI
-00017f90: 5641 5445 204d 4554 484f 4453 2023 2323  VATE METHODS ###
-00017fa0: 0a0a 2020 2020 6465 6620 5f67 6574 5f62  ..    def _get_b
-00017fb0: 6f64 7928 7365 6c66 293a 0a20 2020 2020  ody(self):.     
-00017fc0: 2020 2022 2222 0a20 2020 2020 2020 2047     """.        G
-00017fd0: 6574 7320 6c69 7374 206f 6620 7374 7269  ets list of stri
-00017fe0: 6e67 2072 6570 7265 7365 6e74 6174 696f  ng representatio
-00017ff0: 6e20 6f66 2062 6f64 7920 6f66 2072 6573  n of body of res
-00018000: 742e 0a20 2020 2020 2020 2050 6963 6b65  t..        Picke
-00018010: 6420 7570 2061 7320 636f 6e74 7269 6275  d up as contribu
-00018020: 7469 6f6e 2061 7420 666f 726d 6174 2d74  tion at format-t
-00018030: 696d 652e 0a20 2020 2020 2020 2022 2222  ime..        """
-00018040: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00018050: 3d20 2252 2220 2b20 7374 7228 7365 6c66  = "R" + str(self
-00018060: 2e5f 6765 745f 666f 726d 6174 7465 645f  ._get_formatted_
-00018070: 6475 7261 7469 6f6e 2829 290a 2020 2020  duration()).    
-00018080: 2020 2020 7265 7475 726e 205b 7265 7375      return [resu
-00018090: 6c74 5d0a 0a20 2020 2064 6566 205f 6765  lt]..    def _ge
-000180a0: 745f 636f 6d70 6163 745f 7265 7072 6573  t_compact_repres
-000180b0: 656e 7461 7469 6f6e 2873 656c 6629 3a0a  entation(self):.
-000180c0: 2020 2020 2020 2020 7265 7475 726e 2066          return f
-000180d0: 2252 7b73 656c 662e 5f67 6574 5f66 6f72  "R{self._get_for
-000180e0: 6d61 7474 6564 5f64 7572 6174 696f 6e28  matted_duration(
-000180f0: 297d 220a 0a20 2020 2023 2323 2050 5542  )}"..    ### PUB
-00018100: 4c49 4320 5052 4f50 4552 5449 4553 2023  LIC PROPERTIES #
-00018110: 2323 0a0a 2020 2020 4070 726f 7065 7274  ##..    @propert
-00018120: 790a 2020 2020 6465 6620 7461 6728 7365  y.    def tag(se
-00018130: 6c66 2920 2d3e 205f 7461 672e 5461 6720  lf) -> _tag.Tag 
-00018140: 7c20 4e6f 6e65 3a0a 2020 2020 2020 2020  | None:.        
-00018150: 7222 2222 0a20 2020 2020 2020 2047 6574  r""".        Get
-00018160: 7320 7461 672e 0a0a 2020 2020 2020 2020  s tag...        
-00018170: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
-00018180: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
-00018190: 2020 2020 203e 3e3e 2072 6573 7420 3d20       >>> rest = 
-000181a0: 6162 6a61 642e 4d75 6c74 696d 6561 7375  abjad.Multimeasu
-000181b0: 7265 5265 7374 280a 2020 2020 2020 2020  reRest(.        
-000181c0: 2020 2020 2e2e 2e20 2020 2020 312c 2074      ...     1, t
-000181d0: 6167 3d61 626a 6164 2e54 6167 2827 4d55  ag=abjad.Tag('MU
-000181e0: 4c54 494d 4541 5355 5245 5f52 4553 5427  LTIMEASURE_REST'
-000181f0: 290a 2020 2020 2020 2020 2020 2020 2e2e  ).            ..
-00018200: 2e20 290a 2020 2020 2020 2020 2020 2020  . ).            
-00018210: 3e3e 3e20 7265 7374 2e6d 756c 7469 706c  >>> rest.multipl
-00018220: 6965 7220 3d20 2833 2c20 3829 0a0a 2020  ier = (3, 8)..  
-00018230: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-00018240: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-00018250: 7970 6f6e 6428 7265 7374 2c20 7461 6773  ypond(rest, tags
-00018260: 3d54 7275 6529 0a20 2020 2020 2020 2020  =True).         
-00018270: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
-00018280: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
-00018290: 2025 2120 4d55 4c54 494d 4541 5355 5245   %! MULTIMEASURE
-000182a0: 5f52 4553 540a 2020 2020 2020 2020 2020  _REST.          
-000182b0: 2020 5231 202a 2033 2f38 0a0a 2020 2020    R1 * 3/8..    
-000182c0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000182d0: 7265 7475 726e 2073 7570 6572 2829 2e74  return super().t
-000182e0: 6167 0a0a 0a40 6675 6e63 746f 6f6c 732e  ag...@functools.
-000182f0: 746f 7461 6c5f 6f72 6465 7269 6e67 0a63  total_ordering.c
-00018300: 6c61 7373 204e 6f74 6548 6561 643a 0a20  lass NoteHead:. 
-00018310: 2020 2072 2222 220a 2020 2020 4e6f 7465     r""".    Note
-00018320: 2d68 6561 642e 0a0a 2020 2020 2e2e 2020  -head...    ..  
-00018330: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-00018340: 706c 650a 0a20 2020 2020 2020 203e 3e3e  ple..        >>>
-00018350: 206e 6f74 6520 3d20 6162 6a61 642e 4e6f   note = abjad.No
-00018360: 7465 2822 6373 2727 2229 0a20 2020 2020  te("cs''").     
-00018370: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
-00018380: 7728 6e6f 7465 2920 2320 646f 6374 6573  w(note) # doctes
-00018390: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-000183a0: 2020 3e3e 3e20 6e6f 7465 2e6e 6f74 655f    >>> note.note_
-000183b0: 6865 6164 0a20 2020 2020 2020 204e 6f74  head.        Not
-000183c0: 6548 6561 6428 2263 7327 2722 290a 0a20  eHead("cs''").. 
-000183d0: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
-000183e0: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
-000183f0: 2020 2020 3e3e 3e20 6e6f 7465 5f68 6561      >>> note_hea
-00018400: 6420 3d20 6162 6a61 642e 4e6f 7465 4865  d = abjad.NoteHe
-00018410: 6164 2822 6373 2727 2229 0a20 2020 2020  ad("cs''").     
-00018420: 2020 203e 3e3e 2061 626a 6164 2e74 7765     >>> abjad.twe
-00018430: 616b 286e 6f74 655f 6865 6164 2c20 7222  ak(note_head, r"
-00018440: 5c74 7765 616b 2063 6f6c 6f72 2023 7265  \tweak color #re
-00018450: 6422 290a 2020 2020 2020 2020 3e3e 3e20  d").        >>> 
-00018460: 6e6f 7465 5f68 6561 642e 7477 6561 6b73  note_head.tweaks
-00018470: 0a20 2020 2020 2020 2028 5477 6561 6b28  .        (Tweak(
-00018480: 7374 7269 6e67 3d27 5c5c 7477 6561 6b20  string='\\tweak 
-00018490: 636f 6c6f 7220 2372 6564 272c 2074 6167  color #red', tag
-000184a0: 3d4e 6f6e 6529 2c29 0a0a 2020 2020 2020  =None),)..      
-000184b0: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-000184c0: 626a 6164 2e6c 696c 7970 6f6e 6428 6e6f  bjad.lilypond(no
-000184d0: 7465 5f68 6561 6429 0a20 2020 2020 2020  te_head).       
-000184e0: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-000184f0: 6729 0a20 2020 2020 2020 205c 7477 6561  g).        \twea
-00018500: 6b20 636f 6c6f 7220 2372 6564 0a20 2020  k color #red.   
-00018510: 2020 2020 2063 7327 270a 0a20 2020 202e       cs''..    .
-00018520: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-00018530: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-00018540: 3e3e 3e20 6368 6f72 6420 3d20 6162 6a61  >>> chord = abja
-00018550: 642e 4368 6f72 6428 5b30 2c20 322c 2031  d.Chord([0, 2, 1
-00018560: 305d 2c20 2831 2c20 3429 290a 0a20 2020  0], (1, 4))..   
-00018570: 2020 2020 203e 3e3e 2061 626a 6164 2e74       >>> abjad.t
-00018580: 7765 616b 2863 686f 7264 2e6e 6f74 655f  weak(chord.note_
-00018590: 6865 6164 735b 305d 2c20 7222 5c74 7765  heads[0], r"\twe
-000185a0: 616b 2063 6f6c 6f72 2023 7265 6422 290a  ak color #red").
-000185b0: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-000185c0: 642e 7477 6561 6b28 6368 6f72 642e 6e6f  d.tweak(chord.no
-000185d0: 7465 5f68 6561 6473 5b30 5d2c 2072 225c  te_heads[0], r"\
-000185e0: 7477 6561 6b20 7468 6963 6b6e 6573 7320  tweak thickness 
-000185f0: 3222 290a 2020 2020 2020 2020 3e3e 3e20  2").        >>> 
-00018600: 6162 6a61 642e 7477 6561 6b28 6368 6f72  abjad.tweak(chor
-00018610: 642e 6e6f 7465 5f68 6561 6473 5b31 5d2c  d.note_heads[1],
-00018620: 2072 225c 7477 6561 6b20 636f 6c6f 7220   r"\tweak color 
-00018630: 2372 6564 2229 0a20 2020 2020 2020 203e  #red").        >
-00018640: 3e3e 2061 626a 6164 2e74 7765 616b 2863  >> abjad.tweak(c
-00018650: 686f 7264 2e6e 6f74 655f 6865 6164 735b  hord.note_heads[
-00018660: 315d 2c20 7222 5c74 7765 616b 2074 6869  1], r"\tweak thi
-00018670: 636b 6e65 7373 2032 2229 0a20 2020 2020  ckness 2").     
-00018680: 2020 203e 3e3e 2061 626a 6164 2e74 7765     >>> abjad.twe
-00018690: 616b 2863 686f 7264 2e6e 6f74 655f 6865  ak(chord.note_he
-000186a0: 6164 735b 325d 2c20 7222 5c74 7765 616b  ads[2], r"\tweak
-000186b0: 2063 6f6c 6f72 2023 626c 7565 2229 0a20   color #blue"). 
-000186c0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-000186d0: 2e73 686f 7728 6368 6f72 6429 2023 2064  .show(chord) # d
-000186e0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
-000186f0: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-00018700: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-00018710: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
-00018720: 642e 6c69 6c79 706f 6e64 2863 686f 7264  d.lilypond(chord
-00018730: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00018740: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-00018750: 2020 2020 2020 2020 2020 2020 3c0a 2020              <.  
-00018760: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-00018770: 7765 616b 2063 6f6c 6f72 2023 7265 640a  weak color #red.
-00018780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018790: 5c74 7765 616b 2074 6869 636b 6e65 7373  \tweak thickness
-000187a0: 2032 0a20 2020 2020 2020 2020 2020 2020   2.             
-000187b0: 2020 2063 270a 2020 2020 2020 2020 2020     c'.          
-000187c0: 2020 2020 2020 5c74 7765 616b 2063 6f6c        \tweak col
-000187d0: 6f72 2023 7265 640a 2020 2020 2020 2020  or #red.        
-000187e0: 2020 2020 2020 2020 5c74 7765 616b 2074          \tweak t
-000187f0: 6869 636b 6e65 7373 2032 0a20 2020 2020  hickness 2.     
-00018800: 2020 2020 2020 2020 2020 2064 270a 2020             d'.  
-00018810: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-00018820: 7765 616b 2063 6f6c 6f72 2023 626c 7565  weak color #blue
-00018830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018840: 2062 6627 0a20 2020 2020 2020 2020 2020   bf'.           
-00018850: 203e 340a 0a20 2020 2022 2222 0a0a 2020   >4..    """..  
-00018860: 2020 5f5f 646f 6375 6d65 6e74 6174 696f    __documentatio
-00018870: 6e5f 7365 6374 696f 6e5f 5f20 3d20 224e  n_section__ = "N
-00018880: 6f74 652d 6865 6164 7322 0a0a 2020 2020  ote-heads"..    
-00018890: 5f5f 736c 6f74 735f 5f20 3d20 280a 2020  __slots__ = (.  
-000188a0: 2020 2020 2020 225f 616c 7465 726e 6174        "_alternat
-000188b0: 6976 6522 2c0a 2020 2020 2020 2020 225f  ive",.        "_
-000188c0: 6973 5f63 6175 7469 6f6e 6172 7922 2c0a  is_cautionary",.
-000188d0: 2020 2020 2020 2020 225f 6973 5f66 6f72          "_is_for
-000188e0: 6365 6422 2c0a 2020 2020 2020 2020 225f  ced",.        "_
-000188f0: 6973 5f70 6172 656e 7468 6573 697a 6564  is_parenthesized
-00018900: 222c 0a20 2020 2020 2020 2022 5f77 7269  ",.        "_wri
-00018910: 7474 656e 5f70 6974 6368 222c 0a20 2020  tten_pitch",.   
-00018920: 2020 2020 2022 7477 6561 6b73 222c 0a20       "tweaks",. 
-00018930: 2020 2029 0a0a 2020 2020 6465 6620 5f5f     )..    def __
-00018940: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-00018950: 7365 6c66 2c0a 2020 2020 2020 2020 7772  self,.        wr
-00018960: 6974 7465 6e5f 7069 7463 683d 4e6f 6e65  itten_pitch=None
-00018970: 2c0a 2020 2020 2020 2020 6973 5f63 6175  ,.        is_cau
-00018980: 7469 6f6e 6172 793d 4e6f 6e65 2c0a 2020  tionary=None,.  
-00018990: 2020 2020 2020 6973 5f66 6f72 6365 643d        is_forced=
-000189a0: 4e6f 6e65 2c0a 2020 2020 2020 2020 6973  None,.        is
-000189b0: 5f70 6172 656e 7468 6573 697a 6564 3d4e  _parenthesized=N
-000189c0: 6f6e 652c 0a20 2020 2020 2020 2074 7765  one,.        twe
-000189d0: 616b 733d 4e6f 6e65 2c0a 2020 2020 293a  aks=None,.    ):
-000189e0: 0a20 2020 2020 2020 2073 656c 662e 5f61  .        self._a
-000189f0: 6c74 6572 6e61 7469 7665 203d 204e 6f6e  lternative = Non
-00018a00: 650a 2020 2020 2020 2020 5f74 7765 616b  e.        _tweak
-00018a10: 7320 3d20 2829 0a20 2020 2020 2020 2069  s = ().        i
-00018a20: 6620 6973 696e 7374 616e 6365 2877 7269  f isinstance(wri
-00018a30: 7474 656e 5f70 6974 6368 2c20 4e6f 7465  tten_pitch, Note
-00018a40: 4865 6164 293a 0a20 2020 2020 2020 2020  Head):.         
-00018a50: 2020 206e 6f74 655f 6865 6164 203d 2077     note_head = w
-00018a60: 7269 7474 656e 5f70 6974 6368 0a20 2020  ritten_pitch.   
-00018a70: 2020 2020 2020 2020 205f 7477 6561 6b73           _tweaks
-00018a80: 203d 2063 6f70 792e 6465 6570 636f 7079   = copy.deepcopy
-00018a90: 286e 6f74 655f 6865 6164 2e74 7765 616b  (note_head.tweak
-00018aa0: 7329 0a20 2020 2020 2020 2020 2020 2077  s).            w
-00018ab0: 7269 7474 656e 5f70 6974 6368 203d 206e  ritten_pitch = n
-00018ac0: 6f74 655f 6865 6164 2e77 7269 7474 656e  ote_head.written
-00018ad0: 5f70 6974 6368 0a20 2020 2020 2020 2020  _pitch.         
-00018ae0: 2020 2069 735f 6361 7574 696f 6e61 7279     is_cautionary
-00018af0: 203d 206e 6f74 655f 6865 6164 2e69 735f   = note_head.is_
-00018b00: 6361 7574 696f 6e61 7279 0a20 2020 2020  cautionary.     
-00018b10: 2020 2020 2020 2069 735f 666f 7263 6564         is_forced
-00018b20: 203d 206e 6f74 655f 6865 6164 2e69 735f   = note_head.is_
-00018b30: 666f 7263 6564 0a20 2020 2020 2020 2065  forced.        e
-00018b40: 6c69 6620 7772 6974 7465 6e5f 7069 7463  lif written_pitc
-00018b50: 6820 6973 204e 6f6e 653a 0a20 2020 2020  h is None:.     
-00018b60: 2020 2020 2020 2077 7269 7474 656e 5f70         written_p
-00018b70: 6974 6368 203d 2030 0a20 2020 2020 2020  itch = 0.       
-00018b80: 2073 656c 662e 7772 6974 7465 6e5f 7069   self.written_pi
-00018b90: 7463 6820 3d20 7772 6974 7465 6e5f 7069  tch = written_pi
-00018ba0: 7463 680a 2020 2020 2020 2020 7365 6c66  tch.        self
-00018bb0: 2e69 735f 6361 7574 696f 6e61 7279 203d  .is_cautionary =
-00018bc0: 2069 735f 6361 7574 696f 6e61 7279 0a20   is_cautionary. 
-00018bd0: 2020 2020 2020 2073 656c 662e 6973 5f66         self.is_f
-00018be0: 6f72 6365 6420 3d20 6973 5f66 6f72 6365  orced = is_force
-00018bf0: 640a 2020 2020 2020 2020 7365 6c66 2e69  d.        self.i
-00018c00: 735f 7061 7265 6e74 6865 7369 7a65 6420  s_parenthesized 
-00018c10: 3d20 6973 5f70 6172 656e 7468 6573 697a  = is_parenthesiz
-00018c20: 6564 0a20 2020 2020 2020 2073 656c 662e  ed.        self.
-00018c30: 7477 6561 6b73 203d 204e 6f6e 650a 2020  tweaks = None.  
-00018c40: 2020 2020 2020 6966 2074 7765 616b 7320        if tweaks 
-00018c50: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00018c60: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-00018c70: 616c 6c28 6973 696e 7374 616e 6365 285f  all(isinstance(_
-00018c80: 2c20 7477 6561 6b73 6d6f 6475 6c65 2e54  , tweaksmodule.T
-00018c90: 7765 616b 2920 666f 7220 5f20 696e 2074  weak) for _ in t
-00018ca0: 7765 616b 7329 0a20 2020 2020 2020 2020  weaks).         
-00018cb0: 2020 205f 7477 6561 6b73 203d 205f 7477     _tweaks = _tw
-00018cc0: 6561 6b73 202b 2074 7570 6c65 2874 7765  eaks + tuple(twe
-00018cd0: 616b 7329 0a20 2020 2020 2020 2073 656c  aks).        sel
-00018ce0: 662e 7477 6561 6b73 203d 205f 7477 6561  f.tweaks = _twea
-00018cf0: 6b73 0a0a 2020 2020 6465 6620 5f5f 636f  ks..    def __co
-00018d00: 7079 5f5f 2873 656c 662c 202a 6172 6775  py__(self, *argu
-00018d10: 6d65 6e74 7329 202d 3e20 224e 6f74 6548  ments) -> "NoteH
-00018d20: 6561 6422 3a0a 2020 2020 2020 2020 2222  ead":.        ""
-00018d30: 220a 2020 2020 2020 2020 436f 7069 6573  ".        Copies
-00018d40: 206e 6f74 652d 6865 6164 2e0a 0a20 2020   note-head...   
-00018d50: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
-00018d60: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-00018d70: 2020 2020 2020 2020 2020 3e3e 3e20 696d            >>> im
-00018d80: 706f 7274 2063 6f70 790a 2020 2020 2020  port copy.      
-00018d90: 2020 2020 2020 3e3e 3e20 6e6f 7465 5f68        >>> note_h
-00018da0: 6561 6420 3d20 6162 6a61 642e 4e6f 7465  ead = abjad.Note
-00018db0: 4865 6164 2831 3329 0a20 2020 2020 2020  Head(13).       
-00018dc0: 2020 2020 203e 3e3e 2063 6f70 792e 636f       >>> copy.co
-00018dd0: 7079 286e 6f74 655f 6865 6164 290a 2020  py(note_head).  
-00018de0: 2020 2020 2020 2020 2020 4e6f 7465 4865            NoteHe
-00018df0: 6164 2822 6373 2727 2229 0a0a 2020 2020  ad("cs''")..    
-00018e00: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00018e10: 6172 6775 6d65 6e74 7320 3d20 280a 2020  arguments = (.  
-00018e20: 2020 2020 2020 2020 2020 7365 6c66 2e77            self.w
-00018e30: 7269 7474 656e 5f70 6974 6368 2c0a 2020  ritten_pitch,.  
-00018e40: 2020 2020 2020 2020 2020 7365 6c66 2e69            self.i
-00018e50: 735f 6361 7574 696f 6e61 7279 2c0a 2020  s_cautionary,.  
-00018e60: 2020 2020 2020 2020 2020 7365 6c66 2e69            self.i
-00018e70: 735f 666f 7263 6564 2c0a 2020 2020 2020  s_forced,.      
-00018e80: 2020 2020 2020 7365 6c66 2e69 735f 7061        self.is_pa
-00018e90: 7265 6e74 6865 7369 7a65 642c 0a20 2020  renthesized,.   
-00018ea0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
-00018eb0: 7477 6561 6b73 2c0a 2020 2020 2020 2020  tweaks,.        
-00018ec0: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
-00018ed0: 203d 2074 7970 6528 7365 6c66 2928 2a61   = type(self)(*a
-00018ee0: 7267 756d 656e 7473 290a 2020 2020 2020  rguments).      
-00018ef0: 2020 7477 6561 6b73 203d 2063 6f70 792e    tweaks = copy.
-00018f00: 6465 6570 636f 7079 2873 656c 662e 7477  deepcopy(self.tw
-00018f10: 6561 6b73 290a 2020 2020 2020 2020 7265  eaks).        re
-00018f20: 7375 6c74 2e74 7765 616b 7320 3d20 7477  sult.tweaks = tw
-00018f30: 6561 6b73 0a20 2020 2020 2020 2072 6574  eaks.        ret
-00018f40: 7572 6e20 7265 7375 6c74 0a0a 2020 2020  urn result..    
-00018f50: 6465 6620 5f5f 6571 5f5f 2873 656c 662c  def __eq__(self,
-00018f60: 2061 7267 756d 656e 7429 202d 3e20 626f   argument) -> bo
-00018f70: 6f6c 3a0a 2020 2020 2020 2020 2222 220a  ol:.        """.
-00018f80: 2020 2020 2020 2020 4973 2074 7275 6520          Is true 
-00018f90: 7768 656e 2060 6060 6172 6775 6d65 6e74  when ```argument
-00018fa0: 6060 2069 7320 6120 6e6f 7465 2d68 6561  `` is a note-hea
-00018fb0: 6420 7769 7468 2077 7269 7474 656e 2070  d with written p
-00018fc0: 6974 6368 2065 7175 616c 2074 6f20 7468  itch equal to th
-00018fd0: 6174 206f 660a 2020 2020 2020 2020 7468  at of.        th
-00018fe0: 6973 206e 6f74 652d 6865 6164 2e0a 2020  is note-head..  
-00018ff0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00019000: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00019010: 6172 6775 6d65 6e74 2c20 7479 7065 2873  argument, type(s
-00019020: 656c 6629 293a 0a20 2020 2020 2020 2020  elf)):.         
-00019030: 2020 2072 6574 7572 6e20 7365 6c66 2e77     return self.w
-00019040: 7269 7474 656e 5f70 6974 6368 203d 3d20  ritten_pitch == 
-00019050: 6172 6775 6d65 6e74 2e77 7269 7474 656e  argument.written
-00019060: 5f70 6974 6368 0a20 2020 2020 2020 2072  _pitch.        r
-00019070: 6574 7572 6e20 7365 6c66 2e77 7269 7474  eturn self.writt
-00019080: 656e 5f70 6974 6368 203d 3d20 6172 6775  en_pitch == argu
-00019090: 6d65 6e74 0a0a 2020 2020 6465 6620 5f5f  ment..    def __
-000190a0: 6861 7368 5f5f 2873 656c 6629 202d 3e20  hash__(self) -> 
-000190b0: 696e 743a 0a20 2020 2020 2020 2022 2222  int:.        """
-000190c0: 0a20 2020 2020 2020 2048 6173 6865 7320  .        Hashes 
-000190d0: 6e6f 7465 2d68 6561 642e 0a20 2020 2020  note-head..     
-000190e0: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
-000190f0: 6574 7572 6e20 7375 7065 7228 292e 5f5f  eturn super().__
-00019100: 6861 7368 5f5f 2829 0a0a 2020 2020 6465  hash__()..    de
-00019110: 6620 5f5f 6c74 5f5f 2873 656c 662c 2061  f __lt__(self, a
-00019120: 7267 756d 656e 7429 202d 3e20 626f 6f6c  rgument) -> bool
-00019130: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00019140: 2020 2020 2020 4973 2074 7275 6520 7768        Is true wh
-00019150: 656e 2060 6061 7267 756d 656e 7460 6020  en ``argument`` 
-00019160: 6973 2061 206e 6f74 652d 6865 6164 2077  is a note-head w
-00019170: 6974 6820 7772 6974 7465 6e20 7069 7463  ith written pitc
-00019180: 6820 6772 6561 7465 7220 7468 616e 2074  h greater than t
-00019190: 6861 7420 6f66 0a20 2020 2020 2020 2074  hat of.        t
-000191a0: 6869 7320 6e6f 7465 2d68 6561 642e 0a20  his note-head.. 
-000191b0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-000191c0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-000191d0: 2861 7267 756d 656e 742c 2074 7970 6528  (argument, type(
-000191e0: 7365 6c66 2929 3a0a 2020 2020 2020 2020  self)):.        
-000191f0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00019200: 7772 6974 7465 6e5f 7069 7463 6820 3c20  written_pitch < 
-00019210: 6172 6775 6d65 6e74 2e77 7269 7474 656e  argument.written
-00019220: 5f70 6974 6368 0a20 2020 2020 2020 2074  _pitch.        t
-00019230: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00019240: 6172 6775 6d65 6e74 203d 2074 7970 6528  argument = type(
-00019250: 7365 6c66 2928 6172 6775 6d65 6e74 290a  self)(argument).
-00019260: 2020 2020 2020 2020 6578 6365 7074 2028          except (
-00019270: 5661 6c75 6545 7272 6f72 2c20 5479 7065  ValueError, Type
-00019280: 4572 726f 7229 3a0a 2020 2020 2020 2020  Error):.        
-00019290: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-000192a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000192b0: 7365 6c66 2e77 7269 7474 656e 5f70 6974  self.written_pit
-000192c0: 6368 203c 2061 7267 756d 656e 742e 7772  ch < argument.wr
-000192d0: 6974 7465 6e5f 7069 7463 680a 0a20 2020  itten_pitch..   
-000192e0: 2064 6566 205f 5f72 6570 725f 5f28 7365   def __repr__(se
-000192f0: 6c66 2920 2d3e 2073 7472 3a0a 2020 2020  lf) -> str:.    
-00019300: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00019310: 4765 7473 2069 6e74 6572 7072 6574 6572  Gets interpreter
-00019320: 2072 6570 7265 7365 6e74 6174 696f 6e20   representation 
-00019330: 6f66 206e 6f74 652d 6865 6164 2e0a 0a20  of note-head... 
-00019340: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
-00019350: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
-00019360: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00019370: 6e6f 7465 5f68 6561 6420 3d20 6162 6a61  note_head = abja
-00019380: 642e 4e6f 7465 4865 6164 2831 3329 0a20  d.NoteHead(13). 
-00019390: 2020 2020 2020 2020 2020 203e 3e3e 206e             >>> n
-000193a0: 6f74 655f 6865 6164 0a20 2020 2020 2020  ote_head.       
-000193b0: 2020 2020 204e 6f74 6548 6561 6428 2263       NoteHead("c
-000193c0: 7327 2722 290a 0a20 2020 2020 2020 2022  s''")..        "
-000193d0: 2222 0a20 2020 2020 2020 2073 7472 696e  "".        strin
-000193e0: 6773 203d 205b 5d0a 2020 2020 2020 2020  gs = [].        
-000193f0: 6966 2069 7369 6e73 7461 6e63 6528 7365  if isinstance(se
-00019400: 6c66 2e77 7269 7474 656e 5f70 6974 6368  lf.written_pitch
-00019410: 2c20 5f70 6974 6368 2e4e 616d 6564 5069  , _pitch.NamedPi
-00019420: 7463 6829 3a0a 2020 2020 2020 2020 2020  tch):.          
-00019430: 2020 7374 7269 6e67 203d 2073 656c 662e    string = self.
-00019440: 7772 6974 7465 6e5f 7069 7463 682e 6e61  written_pitch.na
-00019450: 6d65 0a20 2020 2020 2020 2020 2020 2073  me.            s
-00019460: 7472 696e 6773 2e61 7070 656e 6428 7265  trings.append(re
-00019470: 7072 2873 7472 696e 6729 290a 2020 2020  pr(string)).    
-00019480: 2020 2020 2320 6472 756d 206e 6f74 6520      # drum note 
-00019490: 6865 6164 3a0a 2020 2020 2020 2020 656c  head:.        el
-000194a0: 6966 2069 7369 6e73 7461 6e63 6528 7365  if isinstance(se
-000194b0: 6c66 2e77 7269 7474 656e 5f70 6974 6368  lf.written_pitch
-000194c0: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
-000194d0: 2020 2020 7374 7269 6e67 203d 2073 656c      string = sel
-000194e0: 662e 7772 6974 7465 6e5f 7069 7463 680a  f.written_pitch.
-000194f0: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-00019500: 6e67 732e 6170 7065 6e64 2872 6570 7228  ngs.append(repr(
-00019510: 7374 7269 6e67 2929 0a20 2020 2020 2020  string)).       
-00019520: 2069 6620 7365 6c66 2e69 735f 6361 7574   if self.is_caut
-00019530: 696f 6e61 7279 3a0a 2020 2020 2020 2020  ionary:.        
-00019540: 2020 2020 7374 7269 6e67 203d 2066 2269      string = f"i
-00019550: 735f 6361 7574 696f 6e61 7279 3d7b 7365  s_cautionary={se
-00019560: 6c66 2e69 735f 6361 7574 696f 6e61 7279  lf.is_cautionary
-00019570: 2172 7d22 0a20 2020 2020 2020 2020 2020  !r}".           
-00019580: 2073 7472 696e 6773 2e61 7070 656e 6428   strings.append(
-00019590: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-000195a0: 6966 2073 656c 662e 6973 5f66 6f72 6365  if self.is_force
-000195b0: 643a 0a20 2020 2020 2020 2020 2020 2073  d:.            s
-000195c0: 7472 696e 6720 3d20 6622 6973 5f66 6f72  tring = f"is_for
-000195d0: 6365 643d 7b73 656c 662e 6973 5f66 6f72  ced={self.is_for
-000195e0: 6365 6421 727d 220a 2020 2020 2020 2020  ced!r}".        
-000195f0: 2020 2020 7374 7269 6e67 732e 6170 7065      strings.appe
-00019600: 6e64 2873 7472 696e 6729 0a20 2020 2020  nd(string).     
-00019610: 2020 2069 6620 7365 6c66 2e69 735f 7061     if self.is_pa
-00019620: 7265 6e74 6865 7369 7a65 643a 0a20 2020  renthesized:.   
-00019630: 2020 2020 2020 2020 2073 7472 696e 6720           string 
-00019640: 3d20 6622 6973 5f70 6172 656e 7468 6573  = f"is_parenthes
-00019650: 697a 6564 3d7b 7365 6c66 2e69 735f 7061  ized={self.is_pa
-00019660: 7265 6e74 6865 7369 7a65 6421 727d 220a  renthesized!r}".
-00019670: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-00019680: 6e67 732e 6170 7065 6e64 2873 7472 696e  ngs.append(strin
-00019690: 6729 0a20 2020 2020 2020 2069 6620 7365  g).        if se
-000196a0: 6c66 2e74 7765 616b 733a 0a20 2020 2020  lf.tweaks:.     
-000196b0: 2020 2020 2020 2073 7472 696e 6720 3d20         string = 
-000196c0: 6622 7477 6561 6b73 3d7b 7365 6c66 2e74  f"tweaks={self.t
-000196d0: 7765 616b 7321 727d 220a 2020 2020 2020  weaks!r}".      
-000196e0: 2020 2020 2020 7374 7269 6e67 732e 6170        strings.ap
-000196f0: 7065 6e64 2873 7472 696e 6729 0a20 2020  pend(string).   
-00019700: 2020 2020 2073 7472 696e 6720 3d20 222c       string = ",
-00019710: 2022 2e6a 6f69 6e28 7374 7269 6e67 7329   ".join(strings)
-00019720: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00019730: 6622 7b74 7970 6528 7365 6c66 292e 5f5f  f"{type(self).__
-00019740: 6e61 6d65 5f5f 7d28 7b73 7472 696e 677d  name__}({string}
-00019750: 2922 0a0a 2020 2020 6465 6620 5f67 6574  )"..    def _get
-00019760: 5f63 686f 7264 5f73 7472 696e 6728 7365  _chord_string(se
-00019770: 6c66 2920 2d3e 2073 7472 3a0a 2020 2020  lf) -> str:.    
-00019780: 2020 2020 7265 7375 6c74 203d 2022 220a      result = "".
-00019790: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000197a0: 7772 6974 7465 6e5f 7069 7463 683a 0a20  written_pitch:. 
-000197b0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-000197c0: 7420 3d20 7365 6c66 2e77 7269 7474 656e  t = self.written
-000197d0: 5f70 6974 6368 2e6e 616d 650a 2020 2020  _pitch.name.    
-000197e0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000197f0: 6973 5f66 6f72 6365 643a 0a20 2020 2020  is_forced:.     
-00019800: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-00019810: 7420 2b3d 2022 2122 0a20 2020 2020 2020  t += "!".       
-00019820: 2020 2020 2069 6620 7365 6c66 2e69 735f       if self.is_
-00019830: 6361 7574 696f 6e61 7279 3a0a 2020 2020  cautionary:.    
-00019840: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00019850: 6c74 202b 3d20 223f 220a 2020 2020 2020  lt += "?".      
-00019860: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
-00019870: 0a20 2020 2064 6566 205f 6765 745f 6e6f  .    def _get_no
-00019880: 7465 5f68 6561 645f 7374 7269 6e67 7328  te_head_strings(
-00019890: 7365 6c66 293a 0a20 2020 2020 2020 2061  self):.        a
-000198a0: 7373 6572 7420 7365 6c66 2e77 7269 7474  ssert self.writt
-000198b0: 656e 5f70 6974 6368 0a20 2020 2020 2020  en_pitch.       
-000198c0: 2072 6573 756c 7420 3d20 5b5d 0a20 2020   result = [].   
-000198d0: 2020 2020 2069 6620 7365 6c66 2e69 735f       if self.is_
-000198e0: 7061 7265 6e74 6865 7369 7a65 643a 0a20  parenthesized:. 
-000198f0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-00019900: 742e 6170 7065 6e64 2872 225c 7061 7265  t.append(r"\pare
-00019910: 6e74 6865 7369 7a65 2229 0a20 2020 2020  nthesize").     
-00019920: 2020 2066 6f72 2074 7765 616b 2069 6e20     for tweak in 
-00019930: 736f 7274 6564 2873 656c 662e 7477 6561  sorted(self.twea
-00019940: 6b73 293a 0a20 2020 2020 2020 2020 2020  ks):.           
-00019950: 2073 7472 696e 6773 203d 2074 7765 616b   strings = tweak
-00019960: 2e5f 6c69 7374 5f63 6f6e 7472 6962 7574  ._list_contribut
-00019970: 696f 6e73 2829 0a20 2020 2020 2020 2020  ions().         
-00019980: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
-00019990: 2873 7472 696e 6773 290a 2020 2020 2020  (strings).      
-000199a0: 2020 7772 6974 7465 6e5f 7069 7463 6820    written_pitch 
-000199b0: 3d20 7365 6c66 2e77 7269 7474 656e 5f70  = self.written_p
-000199c0: 6974 6368 0a20 2020 2020 2020 2069 6620  itch.        if 
-000199d0: 6973 696e 7374 616e 6365 2877 7269 7474  isinstance(writt
-000199e0: 656e 5f70 6974 6368 2c20 5f70 6974 6368  en_pitch, _pitch
-000199f0: 2e4e 616d 6564 5069 7463 6829 3a0a 2020  .NamedPitch):.  
-00019a00: 2020 2020 2020 2020 2020 7772 6974 7465            writte
-00019a10: 6e5f 7069 7463 6820 3d20 7772 6974 7465  n_pitch = writte
-00019a20: 6e5f 7069 7463 682e 7369 6d70 6c69 6679  n_pitch.simplify
-00019a30: 2829 0a20 2020 2020 2020 2020 2020 206b  ().            k
-00019a40: 6572 6e65 6c20 3d20 7772 6974 7465 6e5f  ernel = written_
-00019a50: 7069 7463 682e 6e61 6d65 0a20 2020 2020  pitch.name.     
-00019a60: 2020 2023 2064 7275 6d20 6e6f 7465 2068     # drum note h
-00019a70: 6561 643a 0a20 2020 2020 2020 2065 6c73  ead:.        els
-00019a80: 653a 0a20 2020 2020 2020 2020 2020 2061  e:.            a
-00019a90: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
-00019aa0: 2877 7269 7474 656e 5f70 6974 6368 2c20  (written_pitch, 
-00019ab0: 7374 7229 0a20 2020 2020 2020 2020 2020  str).           
-00019ac0: 206b 6572 6e65 6c20 3d20 7772 6974 7465   kernel = writte
-00019ad0: 6e5f 7069 7463 680a 2020 2020 2020 2020  n_pitch.        
-00019ae0: 6966 2073 656c 662e 6973 5f66 6f72 6365  if self.is_force
-00019af0: 643a 0a20 2020 2020 2020 2020 2020 206b  d:.            k
-00019b00: 6572 6e65 6c20 2b3d 2022 2122 0a20 2020  ernel += "!".   
-00019b10: 2020 2020 2069 6620 7365 6c66 2e69 735f       if self.is_
-00019b20: 6361 7574 696f 6e61 7279 3a0a 2020 2020  cautionary:.    
-00019b30: 2020 2020 2020 2020 6b65 726e 656c 202b          kernel +
-00019b40: 3d20 223f 220a 2020 2020 2020 2020 7265  = "?".        re
-00019b50: 7375 6c74 2e61 7070 656e 6428 6b65 726e  sult.append(kern
-00019b60: 656c 290a 2020 2020 2020 2020 7265 7475  el).        retu
-00019b70: 726e 2072 6573 756c 740a 0a20 2020 2064  rn result..    d
-00019b80: 6566 205f 6765 745f 6c69 6c79 706f 6e64  ef _get_lilypond
-00019b90: 5f66 6f72 6d61 7428 7365 6c66 2c20 6475  _format(self, du
-00019ba0: 7261 7469 6f6e 3d4e 6f6e 6529 3a0a 2020  ration=None):.  
-00019bb0: 2020 2020 2020 7069 6563 6573 203d 2073        pieces = s
-00019bc0: 656c 662e 5f67 6574 5f6e 6f74 655f 6865  elf._get_note_he
-00019bd0: 6164 5f73 7472 696e 6773 2829 0a20 2020  ad_strings().   
-00019be0: 2020 2020 2069 6620 6475 7261 7469 6f6e       if duration
-00019bf0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00019c00: 2020 2020 2020 2020 2020 7069 6563 6573            pieces
-00019c10: 5b2d 315d 203d 2070 6965 6365 735b 2d31  [-1] = pieces[-1
-00019c20: 5d20 2b20 6475 7261 7469 6f6e 0a20 2020  ] + duration.   
-00019c30: 2020 2020 2069 6620 7365 6c66 2e61 6c74       if self.alt
-00019c40: 6572 6e61 7469 7665 3a0a 2020 2020 2020  ernative:.      
-00019c50: 2020 2020 2020 7069 6563 6573 203d 205f        pieces = _
-00019c60: 7461 672e 646f 7562 6c65 5f74 6167 2870  tag.double_tag(p
-00019c70: 6965 6365 732c 2073 656c 662e 616c 7465  ieces, self.alte
-00019c80: 726e 6174 6976 655b 325d 290a 2020 2020  rnative[2]).    
-00019c90: 2020 2020 2020 2020 7069 6563 6573 5f20          pieces_ 
-00019ca0: 3d20 7365 6c66 2e61 6c74 6572 6e61 7469  = self.alternati
-00019cb0: 7665 5b30 5d2e 5f67 6574 5f6e 6f74 655f  ve[0]._get_note_
-00019cc0: 6865 6164 5f73 7472 696e 6773 2829 0a20  head_strings(). 
-00019cd0: 2020 2020 2020 2020 2020 2069 6620 6475             if du
-00019ce0: 7261 7469 6f6e 2069 7320 6e6f 7420 4e6f  ration is not No
-00019cf0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00019d00: 2020 2020 7069 6563 6573 5f5b 2d31 5d20      pieces_[-1] 
-00019d10: 3d20 7069 6563 6573 5f5b 2d31 5d20 2b20  = pieces_[-1] + 
-00019d20: 6475 7261 7469 6f6e 0a20 2020 2020 2020  duration.       
-00019d30: 2020 2020 2070 6965 6365 735f 203d 205f       pieces_ = _
-00019d40: 7461 672e 646f 7562 6c65 5f74 6167 2870  tag.double_tag(p
-00019d50: 6965 6365 735f 2c20 7365 6c66 2e61 6c74  ieces_, self.alt
-00019d60: 6572 6e61 7469 7665 5b31 5d2c 2064 6561  ernative[1], dea
-00019d70: 6374 6976 6174 653d 5472 7565 290a 2020  ctivate=True).  
-00019d80: 2020 2020 2020 2020 2020 7069 6563 6573            pieces
-00019d90: 2e65 7874 656e 6428 7069 6563 6573 5f29  .extend(pieces_)
-00019da0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00019db0: 3d20 225c 6e22 2e6a 6f69 6e28 7069 6563  = "\n".join(piec
-00019dc0: 6573 290a 2020 2020 2020 2020 7265 7475  es).        retu
-00019dd0: 726e 2072 6573 756c 740a 0a20 2020 2040  rn result..    @
-00019de0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
-00019df0: 2061 6c74 6572 6e61 7469 7665 2873 656c   alternative(sel
-00019e00: 6629 202d 3e20 7475 706c 655b 224e 6f74  f) -> tuple["Not
-00019e10: 6548 6561 6422 2c20 5f74 6167 2e54 6167  eHead", _tag.Tag
-00019e20: 2c20 5f74 6167 2e54 6167 5d3a 0a20 2020  , _tag.Tag]:.   
-00019e30: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00019e40: 2047 6574 7320 616e 6420 7365 7473 206e   Gets and sets n
-00019e50: 6f74 652d 6865 6164 2061 6c74 6572 6e61  ote-head alterna
-00019e60: 7469 7665 2e0a 0a20 2020 2020 2020 203e  tive...        >
-00019e70: 3e3e 2069 6d70 6f72 7420 636f 7079 0a0a  >> import copy..
-00019e80: 2020 2020 2020 2020 2e2e 2020 636f 6e74          ..  cont
-00019e90: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-00019ea0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00019eb0: 206e 6f74 6520 3d20 6162 6a61 642e 4e6f   note = abjad.No
-00019ec0: 7465 2822 6327 2734 2229 0a20 2020 2020  te("c''4").     
-00019ed0: 2020 2020 2020 203e 3e3e 2061 6c74 6572         >>> alter
-00019ee0: 6e61 7469 7665 203d 2063 6f70 792e 636f  native = copy.co
-00019ef0: 7079 286e 6f74 652e 6e6f 7465 5f68 6561  py(note.note_hea
-00019f00: 6429 0a20 2020 2020 2020 2020 2020 203e  d).            >
-00019f10: 3e3e 2061 6c74 6572 6e61 7469 7665 2e69  >> alternative.i
-00019f20: 735f 666f 7263 6564 203d 2054 7275 650a  s_forced = True.
-00019f30: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00019f40: 7472 6970 6c65 203d 2028 616c 7465 726e  triple = (altern
-00019f50: 6174 6976 652c 2061 626a 6164 2e54 6167  ative, abjad.Tag
-00019f60: 2822 2d50 4152 5453 2229 2c20 6162 6a61  ("-PARTS"), abja
-00019f70: 642e 5461 6728 222b 5041 5254 5322 2929  d.Tag("+PARTS"))
-00019f80: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00019f90: 206e 6f74 652e 6e6f 7465 5f68 6561 642e   note.note_head.
-00019fa0: 616c 7465 726e 6174 6976 6520 3d20 7472  alternative = tr
-00019fb0: 6970 6c65 0a20 2020 2020 2020 2020 2020  iple.           
-00019fc0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-00019fd0: 6e6f 7465 2920 2320 646f 6374 6573 743a  note) # doctest:
-00019fe0: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
-00019ff0: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-0001a000: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-0001a010: 6e6f 7465 2c20 7461 6773 3d54 7275 6529  note, tags=True)
-0001a020: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001a030: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
-0001a040: 2020 2020 2020 2020 2020 2025 2120 2b50             %! +P
-0001a050: 4152 5453 0a20 2020 2020 2020 2020 2020  ARTS.           
-0001a060: 2063 2727 340a 2020 2020 2020 2020 2020   c''4.          
-0001a070: 2020 2521 202d 5041 5254 530a 2020 2020    %! -PARTS.    
-0001a080: 2020 2020 2020 2020 2540 2520 6327 2721          %@% c''!
-0001a090: 340a 0a20 2020 2020 2020 2020 2020 2053  4..            S
-0001a0a0: 7572 7669 7665 7320 7069 7463 6820 7265  urvives pitch re
-0001a0b0: 6173 7369 676e 6d65 6e74 3a0a 0a20 2020  assignment:..   
-0001a0c0: 2020 2020 2020 2020 203e 3e3e 206e 6f74           >>> not
-0001a0d0: 652e 7772 6974 7465 6e5f 7069 7463 6820  e.written_pitch 
-0001a0e0: 3d20 2244 3522 0a20 2020 2020 2020 2020  = "D5".         
-0001a0f0: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
-0001a100: 7728 6e6f 7465 2920 2320 646f 6374 6573  w(note) # doctes
-0001a110: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-0001a120: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-0001a130: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-0001a140: 6428 6e6f 7465 2c20 7461 6773 3d54 7275  d(note, tags=Tru
-0001a150: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-0001a160: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
-0001a170: 0a20 2020 2020 2020 2020 2020 2025 2120  .            %! 
-0001a180: 2b50 4152 5453 0a20 2020 2020 2020 2020  +PARTS.         
-0001a190: 2020 2064 2727 340a 2020 2020 2020 2020     d''4.        
-0001a1a0: 2020 2020 2521 202d 5041 5254 530a 2020      %! -PARTS.  
-0001a1b0: 2020 2020 2020 2020 2020 2540 2520 6427            %@% d'
-0001a1c0: 2721 340a 0a20 2020 2020 2020 2020 2020  '!4..           
-0001a1d0: 2043 6c65 6172 2077 6974 6820 6e6f 6e65   Clear with none
-0001a1e0: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-0001a1f0: 3e3e 206e 6f74 652e 6e6f 7465 5f68 6561  >> note.note_hea
-0001a200: 642e 616c 7465 726e 6174 6976 6520 3d20  d.alternative = 
-0001a210: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0001a220: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-0001a230: 6e6f 7465 2920 2320 646f 6374 6573 743a  note) # doctest:
-0001a240: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
-0001a250: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-0001a260: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-0001a270: 6e6f 7465 2c20 7461 6773 3d54 7275 6529  note, tags=True)
-0001a280: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001a290: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
-0001a2a0: 2020 2020 2020 2020 2020 2064 2727 340a             d''4.
-0001a2b0: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
-0001a2c0: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
-0001a2d0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0001a2e0: 3e20 6368 6f72 6420 3d20 6162 6a61 642e  > chord = abjad.
-0001a2f0: 4368 6f72 6428 223c 6327 2064 2720 6266  Chord("<c' d' bf
-0001a300: 2727 3e34 2229 0a20 2020 2020 2020 2020  ''>4").         
-0001a310: 2020 203e 3e3e 2061 6c74 6572 6e61 7469     >>> alternati
-0001a320: 7665 203d 2063 6f70 792e 636f 7079 2863  ve = copy.copy(c
-0001a330: 686f 7264 2e6e 6f74 655f 6865 6164 735b  hord.note_heads[
-0001a340: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
-0001a350: 3e3e 3e20 616c 7465 726e 6174 6976 652e  >>> alternative.
-0001a360: 6973 5f66 6f72 6365 6420 3d20 5472 7565  is_forced = True
-0001a370: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001a380: 2074 7269 706c 6520 3d20 2861 6c74 6572   triple = (alter
-0001a390: 6e61 7469 7665 2c20 6162 6a61 642e 5461  native, abjad.Ta
-0001a3a0: 6728 222d 5041 5254 5322 292c 2061 626a  g("-PARTS"), abj
-0001a3b0: 6164 2e54 6167 2822 2b50 4152 5453 2229  ad.Tag("+PARTS")
-0001a3c0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-0001a3d0: 3e20 6368 6f72 642e 6e6f 7465 5f68 6561  > chord.note_hea
-0001a3e0: 6473 5b30 5d2e 616c 7465 726e 6174 6976  ds[0].alternativ
-0001a3f0: 6520 3d20 7472 6970 6c65 0a20 2020 2020  e = triple.     
-0001a400: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-0001a410: 2e73 686f 7728 6368 6f72 6429 2023 2064  .show(chord) # d
-0001a420: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
-0001a430: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
-0001a440: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
-0001a450: 6c79 706f 6e64 2863 686f 7264 2c20 7461  lypond(chord, ta
-0001a460: 6773 3d54 7275 6529 0a20 2020 2020 2020  gs=True).       
-0001a470: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-0001a480: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-0001a490: 2020 203c 0a20 2020 2020 2020 2020 2020     <.           
-0001a4a0: 2020 2020 2025 2120 2b50 4152 5453 0a20       %! +PARTS. 
-0001a4b0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0001a4c0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
-0001a4d0: 2020 2521 202d 5041 5254 530a 2020 2020    %! -PARTS.    
-0001a4e0: 2020 2020 2020 2020 2020 2020 2540 2520              %@% 
-0001a4f0: 6327 210a 2020 2020 2020 2020 2020 2020  c'!.            
-0001a500: 2020 2020 6427 0a20 2020 2020 2020 2020      d'.         
-0001a510: 2020 2020 2020 2062 6627 270a 2020 2020         bf''.    
-0001a520: 2020 2020 2020 2020 3e34 0a0a 2020 2020          >4..    
-0001a530: 2020 2020 2020 2020 5375 7669 7665 7320          Suvives 
-0001a540: 7069 7463 6820 7265 6173 7369 676e 6d65  pitch reassignme
-0001a550: 6e74 3a0a 0a20 2020 2020 2020 2020 2020  nt:..           
-0001a560: 203e 3e3e 2063 686f 7264 2e6e 6f74 655f   >>> chord.note_
-0001a570: 6865 6164 735b 305d 2e77 7269 7474 656e  heads[0].written
-0001a580: 5f70 6974 6368 203d 2022 4233 220a 2020  _pitch = "B3".  
-0001a590: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
-0001a5a0: 6a61 642e 7368 6f77 2863 686f 7264 2920  jad.show(chord) 
-0001a5b0: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
-0001a5c0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0001a5d0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-0001a5e0: 2e6c 696c 7970 6f6e 6428 6368 6f72 642c  .lilypond(chord,
-0001a5f0: 2074 6167 733d 5472 7565 290a 2020 2020   tags=True).    
-0001a600: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-0001a610: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-0001a620: 2020 2020 2020 3c0a 2020 2020 2020 2020        <.        
-0001a630: 2020 2020 2020 2020 2521 202b 5041 5254          %! +PART
-0001a640: 530a 2020 2020 2020 2020 2020 2020 2020  S.              
-0001a650: 2020 620a 2020 2020 2020 2020 2020 2020    b.            
-0001a660: 2020 2020 2521 202d 5041 5254 530a 2020      %! -PARTS.  
-0001a670: 2020 2020 2020 2020 2020 2020 2020 2540                %@
-0001a680: 2520 6221 0a20 2020 2020 2020 2020 2020  % b!.           
-0001a690: 2020 2020 2064 270a 2020 2020 2020 2020       d'.        
-0001a6a0: 2020 2020 2020 2020 6266 2727 0a20 2020          bf''.   
-0001a6b0: 2020 2020 2020 2020 203e 340a 0a20 2020           >4..   
-0001a6c0: 2020 2020 2020 2020 2043 6c65 6172 2077           Clear w
-0001a6d0: 6974 6820 6e6f 6e65 3a0a 0a20 2020 2020  ith none:..     
-0001a6e0: 2020 2020 2020 203e 3e3e 2063 686f 7264         >>> chord
-0001a6f0: 2e6e 6f74 655f 6865 6164 735b 305d 2e61  .note_heads[0].a
-0001a700: 6c74 6572 6e61 7469 7665 203d 204e 6f6e  lternative = Non
-0001a710: 650a 2020 2020 2020 2020 2020 2020 3e3e  e.            >>
-0001a720: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-0001a730: 2e6c 696c 7970 6f6e 6428 6368 6f72 642c  .lilypond(chord,
-0001a740: 2074 6167 733d 5472 7565 290a 2020 2020   tags=True).    
-0001a750: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-0001a760: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-0001a770: 2020 2020 2020 3c62 2064 2720 6266 2727        <b d' bf''
-0001a780: 3e34 0a0a 2020 2020 2020 2020 2222 220a  >4..        """.
-0001a790: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001a7a0: 656c 662e 5f61 6c74 6572 6e61 7469 7665  elf._alternative
-0001a7b0: 0a0a 2020 2020 4061 6c74 6572 6e61 7469  ..    @alternati
-0001a7c0: 7665 2e73 6574 7465 720a 2020 2020 6465  ve.setter.    de
-0001a7d0: 6620 616c 7465 726e 6174 6976 6528 7365  f alternative(se
-0001a7e0: 6c66 2c20 6172 6775 6d65 6e74 293a 0a20  lf, argument):. 
-0001a7f0: 2020 2020 2020 2069 6620 6172 6775 6d65         if argume
-0001a800: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
-0001a810: 2020 2020 2020 2020 2020 2020 6173 7365              asse
-0001a820: 7274 2069 7369 6e73 7461 6e63 6528 6172  rt isinstance(ar
-0001a830: 6775 6d65 6e74 2c20 7475 706c 6529 2c20  gument, tuple), 
-0001a840: 7265 7072 2861 7267 756d 656e 7429 0a20  repr(argument). 
-0001a850: 2020 2020 2020 2020 2020 2061 7373 6572             asser
-0001a860: 7420 6c65 6e28 6172 6775 6d65 6e74 2920  t len(argument) 
-0001a870: 3d3d 2033 2c20 7265 7072 2861 7267 756d  == 3, repr(argum
-0001a880: 656e 7429 0a20 2020 2020 2020 2020 2020  ent).           
-0001a890: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
-0001a8a0: 6365 2861 7267 756d 656e 745b 305d 2c20  ce(argument[0], 
-0001a8b0: 4e6f 7465 4865 6164 292c 2072 6570 7228  NoteHead), repr(
-0001a8c0: 6172 6775 6d65 6e74 290a 2020 2020 2020  argument).      
-0001a8d0: 2020 2020 2020 6173 7365 7274 2061 7267        assert arg
-0001a8e0: 756d 656e 745b 305d 2e61 6c74 6572 6e61  ument[0].alterna
-0001a8f0: 7469 7665 2069 7320 4e6f 6e65 2c20 7265  tive is None, re
-0001a900: 7072 2861 7267 756d 656e 7429 0a20 2020  pr(argument).   
-0001a910: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-0001a920: 6973 696e 7374 616e 6365 2861 7267 756d  isinstance(argum
-0001a930: 656e 745b 315d 2c20 5f74 6167 2e54 6167  ent[1], _tag.Tag
-0001a940: 292c 2072 6570 7228 6172 6775 6d65 6e74  ), repr(argument
-0001a950: 290a 2020 2020 2020 2020 2020 2020 6173  ).            as
-0001a960: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
-0001a970: 6172 6775 6d65 6e74 5b32 5d2c 205f 7461  argument[2], _ta
-0001a980: 672e 5461 6729 2c20 7265 7072 2861 7267  g.Tag), repr(arg
-0001a990: 756d 656e 7429 0a20 2020 2020 2020 2073  ument).        s
-0001a9a0: 656c 662e 5f61 6c74 6572 6e61 7469 7665  elf._alternative
-0001a9b0: 203d 2061 7267 756d 656e 740a 0a20 2020   = argument..   
-0001a9c0: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
-0001a9d0: 6566 2069 735f 6361 7574 696f 6e61 7279  ef is_cautionary
-0001a9e0: 2873 656c 6629 202d 3e20 626f 6f6c 3a0a  (self) -> bool:.
-0001a9f0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001aa00: 2020 2020 4765 7473 2061 6e64 2073 6574      Gets and set
-0001aa10: 7320 6361 7574 696f 6e61 7279 2061 6363  s cautionary acc
-0001aa20: 6964 656e 7461 6c20 666c 6167 2e0a 0a20  idental flag... 
-0001aa30: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
-0001aa40: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
-0001aa50: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0001aa60: 6e6f 7465 203d 2061 626a 6164 2e4e 6f74  note = abjad.Not
-0001aa70: 6528 2263 2727 2229 0a20 2020 2020 2020  e("c''").       
-0001aa80: 2020 2020 203e 3e3e 206e 6f74 652e 6e6f       >>> note.no
-0001aa90: 7465 5f68 6561 642e 6973 5f63 6175 7469  te_head.is_cauti
-0001aaa0: 6f6e 6172 7920 3d20 5472 7565 0a20 2020  onary = True.   
-0001aab0: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
-0001aac0: 6164 2e73 686f 7728 6e6f 7465 2920 2320  ad.show(note) # 
-0001aad0: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
-0001aae0: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
-0001aaf0: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
-0001ab00: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
-0001ab10: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
-0001ab20: 6f6e 6428 6e6f 7465 290a 2020 2020 2020  ond(note).      
-0001ab30: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-0001ab40: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
-0001ab50: 2020 2020 2020 2020 2020 2020 6327 273f              c''?
-0001ab60: 340a 0a20 2020 2020 2020 2020 2020 203e  4..            >
-0001ab70: 3e3e 206e 6f74 6520 3d20 6162 6a61 642e  >> note = abjad.
-0001ab80: 4e6f 7465 2822 6373 2727 2229 0a20 2020  Note("cs''").   
-0001ab90: 2020 2020 2020 2020 203e 3e3e 206e 6f74           >>> not
-0001aba0: 652e 6e6f 7465 5f68 6561 642e 6973 5f63  e.note_head.is_c
-0001abb0: 6175 7469 6f6e 6172 7920 3d20 5472 7565  autionary = True
+00013860: 2077 7269 7474 656e 5f70 6974 6368 6573   written_pitches
+00013870: 2e61 7070 656e 6428 6c65 6166 2e6e 6f74  .append(leaf.not
+00013880: 655f 6865 6164 2e77 7269 7474 656e 5f70  e_head.written_p
+00013890: 6974 6368 290a 2020 2020 2020 2020 2020  itch).          
+000138a0: 2020 2020 2020 6172 655f 6361 7574 696f        are_cautio
+000138b0: 6e61 7279 203d 205b 6c65 6166 2e6e 6f74  nary = [leaf.not
+000138c0: 655f 6865 6164 2e69 735f 6361 7574 696f  e_head.is_cautio
+000138d0: 6e61 7279 5d0a 2020 2020 2020 2020 2020  nary].          
+000138e0: 2020 2020 2020 6172 655f 666f 7263 6564        are_forced
+000138f0: 203d 205b 6c65 6166 2e6e 6f74 655f 6865   = [leaf.note_he
+00013900: 6164 2e69 735f 666f 7263 6564 5d0a 2020  ad.is_forced].  
+00013910: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+00013920: 655f 7061 7265 6e74 6865 7369 7a65 6420  e_parenthesized 
+00013930: 3d20 5b6c 6561 662e 6e6f 7465 5f68 6561  = [leaf.note_hea
+00013940: 642e 6973 5f70 6172 656e 7468 6573 697a  d.is_parenthesiz
+00013950: 6564 5d0a 2020 2020 2020 2020 2020 2020  ed].            
+00013960: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+00013970: 6c65 6166 2c20 4368 6f72 6429 3a0a 2020  leaf, Chord):.  
+00013980: 2020 2020 2020 2020 2020 2020 2020 7772                wr
+00013990: 6974 7465 6e5f 7069 7463 6865 732e 6578  itten_pitches.ex
+000139a0: 7465 6e64 285f 2e77 7269 7474 656e 5f70  tend(_.written_p
+000139b0: 6974 6368 2066 6f72 205f 2069 6e20 6c65  itch for _ in le
+000139c0: 6166 2e6e 6f74 655f 6865 6164 7329 0a20  af.note_heads). 
+000139d0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+000139e0: 7265 5f63 6175 7469 6f6e 6172 7920 3d20  re_cautionary = 
+000139f0: 5b5f 2e69 735f 6361 7574 696f 6e61 7279  [_.is_cautionary
+00013a00: 2066 6f72 205f 2069 6e20 6c65 6166 2e6e   for _ in leaf.n
+00013a10: 6f74 655f 6865 6164 735d 0a20 2020 2020  ote_heads].     
+00013a20: 2020 2020 2020 2020 2020 2061 7265 5f66             are_f
+00013a30: 6f72 6365 6420 3d20 5b5f 2e69 735f 666f  orced = [_.is_fo
+00013a40: 7263 6564 2066 6f72 205f 2069 6e20 6c65  rced for _ in le
+00013a50: 6166 2e6e 6f74 655f 6865 6164 735d 0a20  af.note_heads]. 
+00013a60: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00013a70: 7265 5f70 6172 656e 7468 6573 697a 6564  re_parenthesized
+00013a80: 203d 205b 5f2e 6973 5f70 6172 656e 7468   = [_.is_parenth
+00013a90: 6573 697a 6564 2066 6f72 205f 2069 6e20  esized for _ in 
+00013aa0: 6c65 6166 2e6e 6f74 655f 6865 6164 735d  leaf.note_heads]
+00013ab0: 0a20 2020 2020 2020 2023 2054 4f44 4f3a  .        # TODO:
+00013ac0: 206d 6f76 6520 746f 2064 6564 6963 6174   move to dedicat
+00013ad0: 6564 2063 6f6e 7374 7275 6374 6f72 3a0a  ed constructor:.
+00013ae0: 2020 2020 2020 2020 656c 6966 206c 656e          elif len
+00013af0: 2861 7267 756d 656e 7473 2920 3d3d 2032  (arguments) == 2
+00013b00: 3a0a 2020 2020 2020 2020 2020 2020 7772  :.            wr
+00013b10: 6974 7465 6e5f 7069 7463 6865 732c 2077  itten_pitches, w
+00013b20: 7269 7474 656e 5f64 7572 6174 696f 6e20  ritten_duration 
+00013b30: 3d20 6172 6775 6d65 6e74 730a 2020 2020  = arguments.    
+00013b40: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00013b50: 7461 6e63 6528 7772 6974 7465 6e5f 7069  tance(written_pi
+00013b60: 7463 6865 732c 2073 7472 293a 0a20 2020  tches, str):.   
+00013b70: 2020 2020 2020 2020 2020 2020 2077 7269               wri
+00013b80: 7474 656e 5f70 6974 6368 6573 203d 205b  tten_pitches = [
+00013b90: 5f20 666f 7220 5f20 696e 2077 7269 7474  _ for _ in writt
+00013ba0: 656e 5f70 6974 6368 6573 2e73 706c 6974  en_pitches.split
+00013bb0: 2829 2069 6620 5f5d 0a20 2020 2020 2020  () if _].       
+00013bc0: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
+00013bd0: 616e 6365 2877 7269 7474 656e 5f70 6974  ance(written_pit
+00013be0: 6368 6573 2c20 7479 7065 2873 656c 6629  ches, type(self)
+00013bf0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00013c00: 2020 2077 7269 7474 656e 5f70 6974 6368     written_pitch
+00013c10: 6573 203d 2077 7269 7474 656e 5f70 6974  es = written_pit
+00013c20: 6368 6573 2e77 7269 7474 656e 5f70 6974  ches.written_pit
+00013c30: 6368 6573 0a20 2020 2020 2020 2065 6c69  ches.        eli
+00013c40: 6620 6c65 6e28 6172 6775 6d65 6e74 7329  f len(arguments)
+00013c50: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
+00013c60: 2020 2077 7269 7474 656e 5f70 6974 6368     written_pitch
+00013c70: 6573 203d 205b 5f70 6974 6368 2e4e 616d  es = [_pitch.Nam
+00013c80: 6564 5069 7463 6828 5f29 2066 6f72 205f  edPitch(_) for _
+00013c90: 2069 6e20 5b30 2c20 342c 2037 5d5d 0a20   in [0, 4, 7]]. 
+00013ca0: 2020 2020 2020 2020 2020 2077 7269 7474             writt
+00013cb0: 656e 5f64 7572 6174 696f 6e20 3d20 5f64  en_duration = _d
+00013cc0: 7572 6174 696f 6e2e 4475 7261 7469 6f6e  uration.Duration
+00013cd0: 2831 2c20 3429 0a20 2020 2020 2020 2065  (1, 4).        e
+00013ce0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00013cf0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+00013d00: 7228 6622 6361 6e20 6e6f 7420 696e 6974  r(f"can not init
+00013d10: 6961 6c69 7a65 2063 686f 7264 2066 726f  ialize chord fro
+00013d20: 6d20 7b61 7267 756d 656e 7473 2172 7d2e  m {arguments!r}.
+00013d30: 2229 0a20 2020 2020 2020 204c 6561 662e  ").        Leaf.
+00013d40: 5f5f 696e 6974 5f5f 2873 656c 662c 2077  __init__(self, w
+00013d50: 7269 7474 656e 5f64 7572 6174 696f 6e2c  ritten_duration,
+00013d60: 206d 756c 7469 706c 6965 723d 6d75 6c74   multiplier=mult
+00013d70: 6970 6c69 6572 2c20 7461 673d 7461 6729  iplier, tag=tag)
+00013d80: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00013d90: 6172 655f 6361 7574 696f 6e61 7279 3a0a  are_cautionary:.
+00013da0: 2020 2020 2020 2020 2020 2020 6172 655f              are_
+00013db0: 6361 7574 696f 6e61 7279 203d 205b 4e6f  cautionary = [No
+00013dc0: 6e65 5d20 2a20 6c65 6e28 7772 6974 7465  ne] * len(writte
+00013dd0: 6e5f 7069 7463 6865 7329 0a20 2020 2020  n_pitches).     
+00013de0: 2020 2069 6620 6e6f 7420 6172 655f 666f     if not are_fo
+00013df0: 7263 6564 3a0a 2020 2020 2020 2020 2020  rced:.          
+00013e00: 2020 6172 655f 666f 7263 6564 203d 205b    are_forced = [
+00013e10: 4e6f 6e65 5d20 2a20 6c65 6e28 7772 6974  None] * len(writ
+00013e20: 7465 6e5f 7069 7463 6865 7329 0a20 2020  ten_pitches).   
+00013e30: 2020 2020 2069 6620 6e6f 7420 6172 655f       if not are_
+00013e40: 7061 7265 6e74 6865 7369 7a65 643a 0a20  parenthesized:. 
+00013e50: 2020 2020 2020 2020 2020 2061 7265 5f70             are_p
+00013e60: 6172 656e 7468 6573 697a 6564 203d 205b  arenthesized = [
+00013e70: 4e6f 6e65 5d20 2a20 6c65 6e28 7772 6974  None] * len(writ
+00013e80: 7465 6e5f 7069 7463 6865 7329 0a20 2020  ten_pitches).   
+00013e90: 2020 2020 2066 6f72 2077 7269 7474 656e       for written
+00013ea0: 5f70 6974 6368 2c20 6973 5f63 6175 7469  _pitch, is_cauti
+00013eb0: 6f6e 6172 792c 2069 735f 666f 7263 6564  onary, is_forced
+00013ec0: 2c20 6973 5f70 6172 656e 7468 6573 697a  , is_parenthesiz
+00013ed0: 6564 2069 6e20 7a69 7028 0a20 2020 2020  ed in zip(.     
+00013ee0: 2020 2020 2020 2077 7269 7474 656e 5f70         written_p
+00013ef0: 6974 6368 6573 2c20 6172 655f 6361 7574  itches, are_caut
+00013f00: 696f 6e61 7279 2c20 6172 655f 666f 7263  ionary, are_forc
+00013f10: 6564 2c20 6172 655f 7061 7265 6e74 6865  ed, are_parenthe
+00013f20: 7369 7a65 640a 2020 2020 2020 2020 293a  sized.        ):
+00013f30: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00013f40: 6e6f 7420 6973 5f63 6175 7469 6f6e 6172  not is_cautionar
+00013f50: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+00013f60: 2020 2069 735f 6361 7574 696f 6e61 7279     is_cautionary
+00013f70: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
+00013f80: 2020 2020 2069 6620 6e6f 7420 6973 5f66       if not is_f
+00013f90: 6f72 6365 643a 0a20 2020 2020 2020 2020  orced:.         
+00013fa0: 2020 2020 2020 2069 735f 666f 7263 6564         is_forced
+00013fb0: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
+00013fc0: 2020 2020 2069 6620 6e6f 7420 6973 5f70       if not is_p
+00013fd0: 6172 656e 7468 6573 697a 6564 3a0a 2020  arenthesized:.  
+00013fe0: 2020 2020 2020 2020 2020 2020 2020 6973                is
+00013ff0: 5f70 6172 656e 7468 6573 697a 6564 203d  _parenthesized =
+00014000: 2046 616c 7365 0a20 2020 2020 2020 2020   False.         
+00014010: 2020 2069 6620 7772 6974 7465 6e5f 7069     if written_pi
+00014020: 7463 6820 6e6f 7420 696e 205f 6c79 636f  tch not in _lyco
+00014030: 6e73 742e 6472 756d 733a 0a20 2020 2020  nst.drums:.     
+00014040: 2020 2020 2020 2020 2020 206e 6f74 655f             note_
+00014050: 6865 6164 203d 204e 6f74 6548 6561 6428  head = NoteHead(
+00014060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014070: 2020 2020 2077 7269 7474 656e 5f70 6974       written_pit
+00014080: 6368 3d77 7269 7474 656e 5f70 6974 6368  ch=written_pitch
+00014090: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000140a0: 2020 2020 2020 6973 5f63 6175 7469 6f6e        is_caution
+000140b0: 6172 793d 6973 5f63 6175 7469 6f6e 6172  ary=is_cautionar
+000140c0: 792c 0a20 2020 2020 2020 2020 2020 2020  y,.             
+000140d0: 2020 2020 2020 2069 735f 666f 7263 6564         is_forced
+000140e0: 3d69 735f 666f 7263 6564 2c0a 2020 2020  =is_forced,.    
+000140f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014100: 6973 5f70 6172 656e 7468 6573 697a 6564  is_parenthesized
+00014110: 3d69 735f 7061 7265 6e74 6865 7369 7a65  =is_parenthesize
+00014120: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
+00014130: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00014140: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00014150: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+00014160: 696e 7374 616e 6365 2877 7269 7474 656e  instance(written
+00014170: 5f70 6974 6368 2c20 7374 7229 2c20 7265  _pitch, str), re
+00014180: 7072 2877 7269 7474 656e 5f70 6974 6368  pr(written_pitch
+00014190: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000141a0: 2020 6e6f 7465 5f68 6561 6420 3d20 4472    note_head = Dr
+000141b0: 756d 4e6f 7465 4865 6164 280a 2020 2020  umNoteHead(.    
+000141c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000141d0: 7772 6974 7465 6e5f 7069 7463 683d 7772  written_pitch=wr
+000141e0: 6974 7465 6e5f 7069 7463 682c 0a20 2020  itten_pitch,.   
+000141f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014200: 2069 735f 6361 7574 696f 6e61 7279 3d69   is_cautionary=i
+00014210: 735f 6361 7574 696f 6e61 7279 2c0a 2020  s_cautionary,.  
+00014220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014230: 2020 6973 5f66 6f72 6365 643d 6973 5f66    is_forced=is_f
+00014240: 6f72 6365 642c 0a20 2020 2020 2020 2020  orced,.         
+00014250: 2020 2020 2020 2020 2020 2069 735f 7061             is_pa
+00014260: 7265 6e74 6865 7369 7a65 643d 6973 5f70  renthesized=is_p
+00014270: 6172 656e 7468 6573 697a 6564 2c0a 2020  arenthesized,.  
+00014280: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+00014290: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+000142a0: 7369 6e73 7461 6e63 6528 7772 6974 7465  sinstance(writte
+000142b0: 6e5f 7069 7463 682c 204e 6f74 6548 6561  n_pitch, NoteHea
+000142c0: 6429 3a0a 2020 2020 2020 2020 2020 2020  d):.            
+000142d0: 2020 2020 6e6f 7465 5f68 6561 642e 7477      note_head.tw
+000142e0: 6561 6b73 203d 2063 6f70 792e 6465 6570  eaks = copy.deep
+000142f0: 636f 7079 2877 7269 7474 656e 5f70 6974  copy(written_pit
+00014300: 6368 2e74 7765 616b 7329 0a20 2020 2020  ch.tweaks).     
+00014310: 2020 2020 2020 2073 656c 662e 5f6e 6f74         self._not
+00014320: 655f 6865 6164 732e 6170 7065 6e64 286e  e_heads.append(n
+00014330: 6f74 655f 6865 6164 290a 2020 2020 2020  ote_head).      
+00014340: 2020 6966 206c 656e 2861 7267 756d 656e    if len(argumen
+00014350: 7473 2920 3d3d 2031 2061 6e64 2069 7369  ts) == 1 and isi
+00014360: 6e73 7461 6e63 6528 6172 6775 6d65 6e74  nstance(argument
+00014370: 735b 305d 2c20 4c65 6166 293a 0a20 2020  s[0], Leaf):.   
+00014380: 2020 2020 2020 2020 2073 656c 662e 5f63           self._c
+00014390: 6f70 795f 6f76 6572 7269 6465 5f61 6e64  opy_override_and
+000143a0: 5f73 6574 5f66 726f 6d5f 6c65 6166 2861  _set_from_leaf(a
+000143b0: 7267 756d 656e 7473 5b30 5d29 0a0a 2020  rguments[0])..  
+000143c0: 2020 2323 2320 5350 4543 4941 4c20 4d45    ### SPECIAL ME
+000143d0: 5448 4f44 5320 2323 230a 0a20 2020 2064  THODS ###..    d
+000143e0: 6566 205f 5f63 6f70 795f 5f28 7365 6c66  ef __copy__(self
+000143f0: 2c20 2a61 7267 756d 656e 7473 2920 2d3e  , *arguments) ->
+00014400: 2022 4368 6f72 6422 3a0a 2020 2020 2020   "Chord":.      
+00014410: 2020 2222 220a 2020 2020 2020 2020 436f    """.        Co
+00014420: 7069 6573 2063 686f 7264 2e0a 2020 2020  pies chord..    
+00014430: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00014440: 6e65 775f 6368 6f72 6420 3d20 4c65 6166  new_chord = Leaf
+00014450: 2e5f 5f63 6f70 795f 5f28 7365 6c66 2c20  .__copy__(self, 
+00014460: 2a61 7267 756d 656e 7473 290a 2020 2020  *arguments).    
+00014470: 2020 2020 6e65 775f 6368 6f72 642e 6e6f      new_chord.no
+00014480: 7465 5f68 6561 6473 5b3a 5d20 3d20 5b5d  te_heads[:] = []
+00014490: 0a20 2020 2020 2020 2066 6f72 206e 6f74  .        for not
+000144a0: 655f 6865 6164 2069 6e20 7365 6c66 2e6e  e_head in self.n
+000144b0: 6f74 655f 6865 6164 733a 0a20 2020 2020  ote_heads:.     
+000144c0: 2020 2020 2020 206e 6f74 655f 6865 6164         note_head
+000144d0: 203d 2063 6f70 792e 636f 7079 286e 6f74   = copy.copy(not
+000144e0: 655f 6865 6164 290a 2020 2020 2020 2020  e_head).        
+000144f0: 2020 2020 6e65 775f 6368 6f72 642e 6e6f      new_chord.no
+00014500: 7465 5f68 6561 6473 2e61 7070 656e 6428  te_heads.append(
+00014510: 6e6f 7465 5f68 6561 6429 0a20 2020 2020  note_head).     
+00014520: 2020 2072 6574 7572 6e20 6e65 775f 6368     return new_ch
+00014530: 6f72 640a 0a20 2020 2064 6566 205f 5f67  ord..    def __g
+00014540: 6574 6e65 7761 7267 735f 5f28 0a20 2020  etnewargs__(.   
+00014550: 2020 2020 2073 656c 662c 0a20 2020 2029       self,.    )
+00014560: 202d 3e20 7475 706c 655b 7475 706c 655b   -> tuple[tuple[
+00014570: 5f70 6974 6368 2e4e 616d 6564 5069 7463  _pitch.NamedPitc
+00014580: 682c 202e 2e2e 5d2c 205f 6475 7261 7469  h, ...], _durati
+00014590: 6f6e 2e44 7572 6174 696f 6e5d 3a0a 2020  on.Duration]:.  
+000145a0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000145b0: 2020 4765 7473 206e 6577 2063 686f 7264    Gets new chord
+000145c0: 2061 7267 756d 656e 7473 2e0a 0a20 2020   arguments...   
+000145d0: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
+000145e0: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+000145f0: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+00014600: 6a61 642e 4368 6f72 6428 223c 6327 2064  jad.Chord("<c' d
+00014610: 273e 3422 292e 5f5f 6765 746e 6577 6172  '>4").__getnewar
+00014620: 6773 5f5f 2829 0a20 2020 2020 2020 2020  gs__().         
+00014630: 2020 2028 284e 616d 6564 5069 7463 6828     ((NamedPitch(
+00014640: 2263 2722 292c 204e 616d 6564 5069 7463  "c'"), NamedPitc
+00014650: 6828 2264 2722 2929 2c20 4475 7261 7469  h("d'")), Durati
+00014660: 6f6e 2831 2c20 3429 290a 0a20 2020 2020  on(1, 4))..     
+00014670: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00014680: 6574 7572 6e20 7365 6c66 2e77 7269 7474  eturn self.writt
+00014690: 656e 5f70 6974 6368 6573 2c20 7365 6c66  en_pitches, self
+000146a0: 2e77 7269 7474 656e 5f64 7572 6174 696f  .written_duratio
+000146b0: 6e0a 0a20 2020 2023 2323 2050 5249 5641  n..    ### PRIVA
+000146c0: 5445 204d 4554 484f 4453 2023 2323 0a0a  TE METHODS ###..
+000146d0: 2020 2020 6465 6620 5f66 6f72 6d61 745f      def _format_
+000146e0: 6265 666f 7265 5f73 6974 6528 7365 6c66  before_site(self
+000146f0: 2c20 636f 6e74 7269 6275 7469 6f6e 7329  , contributions)
+00014700: 3a0a 2020 2020 2020 2020 7265 7375 6c74  :.        result
+00014710: 203d 205b 5d0a 2020 2020 2020 2020 6966   = [].        if
+00014720: 2073 656c 662e 5f62 6566 6f72 655f 6772   self._before_gr
+00014730: 6163 655f 636f 6e74 6169 6e65 7220 6973  ace_container is
+00014740: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00014750: 2020 2020 2020 2073 7472 696e 6720 3d20         string = 
+00014760: 7365 6c66 2e5f 6265 666f 7265 5f67 7261  self._before_gra
+00014770: 6365 5f63 6f6e 7461 696e 6572 2e5f 6765  ce_container._ge
+00014780: 745f 6c69 6c79 706f 6e64 5f66 6f72 6d61  t_lilypond_forma
+00014790: 7428 290a 2020 2020 2020 2020 2020 2020  t().            
+000147a0: 7265 7375 6c74 2e61 7070 656e 6428 7374  result.append(st
+000147b0: 7269 6e67 290a 2020 2020 2020 2020 7374  ring).        st
+000147c0: 7269 6e67 7320 3d20 636f 6e74 7269 6275  rings = contribu
+000147d0: 7469 6f6e 732e 616c 7068 6162 6574 697a  tions.alphabetiz
+000147e0: 6528 636f 6e74 7269 6275 7469 6f6e 732e  e(contributions.
+000147f0: 6265 666f 7265 2e63 6f6d 6d61 6e64 7329  before.commands)
+00014800: 0a20 2020 2020 2020 2069 6620 7374 7269  .        if stri
+00014810: 6e67 733a 0a20 2020 2020 2020 2020 2020  ngs:.           
+00014820: 2072 6573 756c 742e 6170 7065 6e64 2866   result.append(f
+00014830: 2225 207b 5f63 6f6e 7472 6962 7574 696f  "% {_contributio
+00014840: 6e73 2e54 7970 6573 2e43 4f4d 4d41 4e44  ns.Types.COMMAND
+00014850: 532e 6e61 6d65 7d3a 2229 0a20 2020 2020  S.name}:").     
+00014860: 2020 2020 2020 2072 6573 756c 742e 6578         result.ex
+00014870: 7465 6e64 2873 7472 696e 6773 290a 2020  tend(strings).  
+00014880: 2020 2020 2020 7374 7269 6e67 7320 3d20        strings = 
+00014890: 636f 6e74 7269 6275 7469 6f6e 732e 6772  contributions.gr
+000148a0: 6f62 5f6f 7665 7272 6964 6573 0a20 2020  ob_overrides.   
+000148b0: 2020 2020 2069 6620 7374 7269 6e67 733a       if strings:
+000148c0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+000148d0: 756c 742e 6170 7065 6e64 2866 2225 207b  ult.append(f"% {
+000148e0: 5f63 6f6e 7472 6962 7574 696f 6e73 2e54  _contributions.T
+000148f0: 7970 6573 2e47 524f 425f 4f56 4552 5249  ypes.GROB_OVERRI
+00014900: 4445 532e 6e61 6d65 7d3a 2229 0a20 2020  DES.name}:").   
+00014910: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+00014920: 6578 7465 6e64 2873 7472 696e 6773 290a  extend(strings).
+00014930: 2020 2020 2020 2020 7374 7269 6e67 7320          strings 
+00014940: 3d20 636f 6e74 7269 6275 7469 6f6e 732e  = contributions.
+00014950: 636f 6e74 6578 745f 7365 7474 696e 6773  context_settings
+00014960: 0a20 2020 2020 2020 2069 6620 7374 7269  .        if stri
+00014970: 6e67 733a 0a20 2020 2020 2020 2020 2020  ngs:.           
+00014980: 2072 6573 756c 742e 6170 7065 6e64 2866   result.append(f
+00014990: 2225 207b 5f63 6f6e 7472 6962 7574 696f  "% {_contributio
+000149a0: 6e73 2e54 7970 6573 2e43 4f4e 5445 5854  ns.Types.CONTEXT
+000149b0: 5f53 4554 5449 4e47 532e 6e61 6d65 7d3a  _SETTINGS.name}:
+000149c0: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
+000149d0: 6573 756c 742e 6578 7465 6e64 2873 7472  esult.extend(str
+000149e0: 696e 6773 290a 2020 2020 2020 2020 7265  ings).        re
+000149f0: 7475 726e 2072 6573 756c 740a 0a20 2020  turn result..   
+00014a00: 2064 6566 205f 666f 726d 6174 5f6c 6561   def _format_lea
+00014a10: 665f 6e75 636c 6575 7328 7365 6c66 293a  f_nucleus(self):
+00014a20: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+00014a30: 3d20 5b5d 0a20 2020 2020 2020 206e 6f74  = [].        not
+00014a40: 655f 6865 6164 7320 3d20 7365 6c66 2e6e  e_heads = self.n
+00014a50: 6f74 655f 6865 6164 730a 2020 2020 2020  ote_heads.      
+00014a60: 2020 6966 2061 6e79 2822 5c6e 2220 696e    if any("\n" in
+00014a70: 205f 2e5f 6765 745f 6c69 6c79 706f 6e64   _._get_lilypond
+00014a80: 5f66 6f72 6d61 7428 2920 666f 7220 5f20  _format() for _ 
+00014a90: 696e 206e 6f74 655f 6865 6164 7329 3a0a  in note_heads):.
+00014aa0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00014ab0: 6e6f 7465 5f68 6561 6420 696e 206e 6f74  note_head in not
+00014ac0: 655f 6865 6164 733a 0a20 2020 2020 2020  e_heads:.       
+00014ad0: 2020 2020 2020 2020 2063 7572 7265 6e74           current
+00014ae0: 5f66 6f72 6d61 7420 3d20 6e6f 7465 5f68  _format = note_h
+00014af0: 6561 642e 5f67 6574 5f6c 696c 7970 6f6e  ead._get_lilypon
+00014b00: 645f 666f 726d 6174 2829 0a20 2020 2020  d_format().     
+00014b10: 2020 2020 2020 2020 2020 2066 6f72 6d61             forma
+00014b20: 745f 6c69 7374 203d 2063 7572 7265 6e74  t_list = current
+00014b30: 5f66 6f72 6d61 742e 7370 6c69 7428 225c  _format.split("\
+00014b40: 6e22 290a 2020 2020 2020 2020 2020 2020  n").            
+00014b50: 2020 2020 666f 726d 6174 5f6c 6973 7420      format_list 
+00014b60: 3d20 5b5f 696e 6465 6e74 6c69 622e 494e  = [_indentlib.IN
+00014b70: 4445 4e54 202b 205f 2066 6f72 205f 2069  DENT + _ for _ i
+00014b80: 6e20 666f 726d 6174 5f6c 6973 745d 0a20  n format_list]. 
+00014b90: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00014ba0: 6573 756c 742e 6578 7465 6e64 2866 6f72  esult.extend(for
+00014bb0: 6d61 745f 6c69 7374 290a 2020 2020 2020  mat_list).      
+00014bc0: 2020 2020 2020 7265 7375 6c74 2e69 6e73        result.ins
+00014bd0: 6572 7428 302c 2022 3c22 290a 2020 2020  ert(0, "<").    
+00014be0: 2020 2020 2020 2020 7265 7375 6c74 2e61          result.a
+00014bf0: 7070 656e 6428 223e 2229 0a20 2020 2020  ppend(">").     
+00014c00: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+00014c10: 225c 6e22 2e6a 6f69 6e28 7265 7375 6c74  "\n".join(result
+00014c20: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+00014c30: 7375 6c74 202b 3d20 7374 7228 7365 6c66  sult += str(self
+00014c40: 2e5f 6765 745f 666f 726d 6174 7465 645f  ._get_formatted_
+00014c50: 6475 7261 7469 6f6e 2829 290a 2020 2020  duration()).    
+00014c60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00014c70: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
+00014c80: 656e 6428 5b5f 2e5f 6765 745f 6c69 6c79  end([_._get_lily
+00014c90: 706f 6e64 5f66 6f72 6d61 7428 2920 666f  pond_format() fo
+00014ca0: 7220 5f20 696e 206e 6f74 655f 6865 6164  r _ in note_head
+00014cb0: 735d 290a 2020 2020 2020 2020 2020 2020  s]).            
+00014cc0: 7069 7463 6865 7320 3d20 2220 222e 6a6f  pitches = " ".jo
+00014cd0: 696e 2872 6573 756c 7429 0a20 2020 2020  in(result).     
+00014ce0: 2020 2020 2020 2064 7572 6174 696f 6e20         duration 
+00014cf0: 3d20 7365 6c66 2e5f 6765 745f 666f 726d  = self._get_form
+00014d00: 6174 7465 645f 6475 7261 7469 6f6e 2829  atted_duration()
+00014d10: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00014d20: 756c 7420 3d20 6622 3c7b 7069 7463 6865  ult = f"<{pitche
+00014d30: 737d 3e7b 6475 7261 7469 6f6e 7d22 0a20  s}>{duration}". 
+00014d40: 2020 2020 2020 2023 2073 696e 676c 6520         # single 
+00014d50: 7374 7269 6e67 2c20 6275 7420 7772 6170  string, but wrap
+00014d60: 7065 6420 696e 206c 6973 7420 6263 2063  ped in list bc c
+00014d70: 6f6e 7472 6962 7574 696f 6e0a 2020 2020  ontribution.    
+00014d80: 2020 2020 7265 7475 726e 205b 7265 7375      return [resu
+00014d90: 6c74 5d0a 0a20 2020 2064 6566 205f 6765  lt]..    def _ge
+00014da0: 745f 636f 6d70 6163 745f 7265 7072 6573  t_compact_repres
+00014db0: 656e 7461 7469 6f6e 2873 656c 6629 3a0a  entation(self):.
+00014dc0: 2020 2020 2020 2020 7375 6d6d 6172 7920          summary 
+00014dd0: 3d20 7365 6c66 2e5f 6765 745f 7375 6d6d  = self._get_summ
+00014de0: 6172 7928 290a 2020 2020 2020 2020 6475  ary().        du
+00014df0: 7261 7469 6f6e 203d 2073 656c 662e 5f67  ration = self._g
+00014e00: 6574 5f66 6f72 6d61 7474 6564 5f64 7572  et_formatted_dur
+00014e10: 6174 696f 6e28 290a 2020 2020 2020 2020  ation().        
+00014e20: 7265 7475 726e 2066 223c 7b73 756d 6d61  return f"<{summa
+00014e30: 7279 7d3e 7b64 7572 6174 696f 6e7d 220a  ry}>{duration}".
+00014e40: 0a20 2020 2064 6566 205f 6765 745f 7375  .    def _get_su
+00014e50: 6d6d 6172 7928 7365 6c66 293a 0a20 2020  mmary(self):.   
+00014e60: 2020 2020 2072 6574 7572 6e20 2220 222e       return " ".
+00014e70: 6a6f 696e 285b 5f2e 5f67 6574 5f63 686f  join([_._get_cho
+00014e80: 7264 5f73 7472 696e 6728 2920 666f 7220  rd_string() for 
+00014e90: 5f20 696e 2073 656c 662e 6e6f 7465 5f68  _ in self.note_h
+00014ea0: 6561 6473 5d29 0a0a 2020 2020 2323 2320  eads])..    ### 
+00014eb0: 5055 424c 4943 2050 524f 5045 5254 4945  PUBLIC PROPERTIE
+00014ec0: 5320 2323 230a 0a20 2020 2040 7072 6f70  S ###..    @prop
+00014ed0: 6572 7479 0a20 2020 2064 6566 206e 6f74  erty.    def not
+00014ee0: 655f 6865 6164 7328 7365 6c66 2920 2d3e  e_heads(self) ->
+00014ef0: 2022 4e6f 7465 4865 6164 4c69 7374 223a   "NoteHeadList":
+00014f00: 0a20 2020 2020 2020 2072 2222 220a 2020  .        r""".  
+00014f10: 2020 2020 2020 4765 7473 206e 6f74 652d        Gets note-
+00014f20: 6865 6164 7320 696e 2063 686f 7264 2e0a  heads in chord..
+00014f30: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
+00014f40: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
+00014f50: 0a0a 2020 2020 2020 2020 2020 2020 4765  ..            Ge
+00014f60: 7473 206e 6f74 652d 6865 6164 7320 696e  ts note-heads in
+00014f70: 2063 686f 7264 3a0a 0a20 2020 2020 2020   chord:..       
+00014f80: 2020 2020 203e 3e3e 2063 686f 7264 203d       >>> chord =
+00014f90: 2061 626a 6164 2e43 686f 7264 2822 3c67   abjad.Chord("<g
+00014fa0: 2720 6327 2720 6527 273e 3422 290a 2020  ' c'' e''>4").  
+00014fb0: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+00014fc0: 6a61 642e 7368 6f77 2863 686f 7264 2920  jad.show(chord) 
+00014fd0: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
+00014fe0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00014ff0: 2066 6f72 205f 2069 6e20 6368 6f72 642e   for _ in chord.
+00015000: 6e6f 7465 5f68 6561 6473 3a20 5f0a 2020  note_heads: _.  
+00015010: 2020 2020 2020 2020 2020 4e6f 7465 4865            NoteHe
+00015020: 6164 2822 6727 2229 0a20 2020 2020 2020  ad("g'").       
+00015030: 2020 2020 204e 6f74 6548 6561 6428 2263       NoteHead("c
+00015040: 2727 2229 0a20 2020 2020 2020 2020 2020  ''").           
+00015050: 204e 6f74 6548 6561 6428 2265 2727 2229   NoteHead("e''")
+00015060: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
+00015070: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
+00015080: 650a 0a20 2020 2020 2020 2020 2020 2053  e..            S
+00015090: 6574 7320 6e6f 7465 2d68 6561 6473 2077  ets note-heads w
+000150a0: 6974 6820 7069 7463 6820 6e61 6d65 733a  ith pitch names:
+000150b0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+000150c0: 3e20 6368 6f72 6420 3d20 6162 6a61 642e  > chord = abjad.
+000150d0: 4368 6f72 6428 223c 6727 2063 2727 2065  Chord("<g' c'' e
+000150e0: 2727 3e34 2229 0a20 2020 2020 2020 2020  ''>4").         
+000150f0: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
+00015100: 7728 6368 6f72 6429 2023 2064 6f63 7465  w(chord) # docte
+00015110: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+00015120: 2020 2020 2020 203e 3e3e 2063 686f 7264         >>> chord
+00015130: 2e6e 6f74 655f 6865 6164 7320 3d20 2263  .note_heads = "c
+00015140: 2720 6427 2066 7327 220a 2020 2020 2020  ' d' fs'".      
+00015150: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+00015160: 7368 6f77 2863 686f 7264 2920 2320 646f  show(chord) # do
+00015170: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
+00015180: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
+00015190: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
+000151a0: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
+000151b0: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
+000151c0: 6428 6368 6f72 6429 0a20 2020 2020 2020  d(chord).       
+000151d0: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
+000151e0: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
+000151f0: 2020 2020 2020 2020 2020 203c 6327 2064             <c' d
+00015200: 2720 6673 273e 340a 0a20 2020 2020 2020  ' fs'>4..       
+00015210: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
+00015220: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
+00015230: 2020 2020 2020 5365 7473 206e 6f74 652d        Sets note-
+00015240: 6865 6164 7320 7769 7468 2070 6974 6368  heads with pitch
+00015250: 206e 756d 6265 7273 3a0a 0a20 2020 2020   numbers:..     
+00015260: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
+00015270: 686f 7264 203d 2061 626a 6164 2e43 686f  hord = abjad.Cho
+00015280: 7264 2822 3c67 2720 6327 2720 6527 273e  rd("<g' c'' e''>
+00015290: 3422 290a 2020 2020 2020 2020 2020 2020  4").            
+000152a0: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
+000152b0: 6f77 2863 686f 7264 2920 2320 646f 6374  ow(chord) # doct
+000152c0: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
+000152d0: 2020 2020 2020 2020 3e3e 3e20 6368 6f72          >>> chor
+000152e0: 642e 6e6f 7465 5f68 6561 6473 203d 205b  d.note_heads = [
+000152f0: 3136 2c20 3137 2c20 3139 5d0a 2020 2020  16, 17, 19].    
+00015300: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+00015310: 642e 7368 6f77 2863 686f 7264 2920 2320  d.show(chord) # 
+00015320: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+00015330: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
+00015340: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
+00015350: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+00015360: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+00015370: 6f6e 6428 6368 6f72 6429 0a20 2020 2020  ond(chord).     
+00015380: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
+00015390: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
+000153a0: 2020 2020 2020 2020 2020 2020 203c 6527               <e'
+000153b0: 2720 6627 2720 6727 273e 340a 0a20 2020  ' f'' g''>4..   
+000153c0: 2020 2020 2053 6574 206e 6f74 652d 6865       Set note-he
+000153d0: 6164 7320 7769 7468 2061 6e79 2069 7465  ads with any ite
+000153e0: 7261 626c 652e 0a20 2020 2020 2020 2022  rable..        "
+000153f0: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+00015400: 6e20 7365 6c66 2e5f 6e6f 7465 5f68 6561  n self._note_hea
+00015410: 6473 0a0a 2020 2020 406e 6f74 655f 6865  ds..    @note_he
+00015420: 6164 732e 7365 7474 6572 0a20 2020 2064  ads.setter.    d
+00015430: 6566 206e 6f74 655f 6865 6164 7328 7365  ef note_heads(se
+00015440: 6c66 2c20 6e6f 7465 5f68 6561 6473 293a  lf, note_heads):
+00015450: 0a20 2020 2020 2020 2073 656c 662e 5f6e  .        self._n
+00015460: 6f74 655f 6865 6164 735b 3a5d 203d 205b  ote_heads[:] = [
+00015470: 5d0a 2020 2020 2020 2020 6966 2069 7369  ].        if isi
+00015480: 6e73 7461 6e63 6528 6e6f 7465 5f68 6561  nstance(note_hea
+00015490: 6473 2c20 7374 7229 3a0a 2020 2020 2020  ds, str):.      
+000154a0: 2020 2020 2020 6e6f 7465 5f68 6561 6473        note_heads
+000154b0: 203d 206e 6f74 655f 6865 6164 732e 7370   = note_heads.sp
+000154c0: 6c69 7428 290a 2020 2020 2020 2020 7365  lit().        se
+000154d0: 6c66 2e6e 6f74 655f 6865 6164 732e 6578  lf.note_heads.ex
+000154e0: 7465 6e64 286e 6f74 655f 6865 6164 7329  tend(note_heads)
+000154f0: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+00015500: 2020 2020 6465 6620 7772 6974 7465 6e5f      def written_
+00015510: 6475 7261 7469 6f6e 2873 656c 6629 202d  duration(self) -
+00015520: 3e20 5f64 7572 6174 696f 6e2e 4475 7261  > _duration.Dura
+00015530: 7469 6f6e 3a0a 2020 2020 2020 2020 2222  tion:.        ""
+00015540: 220a 2020 2020 2020 2020 4765 7473 2061  ".        Gets a
+00015550: 6e64 2073 6574 7320 7772 6974 7465 6e20  nd sets written 
+00015560: 6475 7261 7469 6f6e 206f 6620 6368 6f72  duration of chor
+00015570: 642e 0a0a 2020 2020 2020 2020 2e2e 2020  d...        ..  
+00015580: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
+00015590: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
+000155a0: 2047 6574 2077 7269 7474 656e 2064 7572   Get written dur
+000155b0: 6174 696f 6e3a 0a0a 2020 2020 2020 2020  ation:..        
+000155c0: 2020 2020 3e3e 3e20 6368 6f72 6420 3d20      >>> chord = 
+000155d0: 6162 6a61 642e 4368 6f72 6428 223c 6527  abjad.Chord("<e'
+000155e0: 2063 7327 2720 6627 273e 3422 290a 2020   cs'' f''>4").  
+000155f0: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+00015600: 6a61 642e 7368 6f77 2863 686f 7264 2920  jad.show(chord) 
+00015610: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
+00015620: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+00015630: 3e20 6368 6f72 642e 7772 6974 7465 6e5f  > chord.written_
+00015640: 6475 7261 7469 6f6e 0a20 2020 2020 2020  duration.       
+00015650: 2020 2020 2044 7572 6174 696f 6e28 312c       Duration(1,
+00015660: 2034 290a 0a20 2020 2020 2020 202e 2e20   4)..        .. 
+00015670: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
+00015680: 6d70 6c65 0a0a 2020 2020 2020 2020 2020  mple..          
+00015690: 2020 5365 7420 7772 6974 7465 6e20 6475    Set written du
+000156a0: 7261 7469 6f6e 3a0a 0a20 2020 2020 2020  ration:..       
+000156b0: 2020 2020 203e 3e3e 2063 686f 7264 203d       >>> chord =
+000156c0: 2061 626a 6164 2e43 686f 7264 2822 3c65   abjad.Chord("<e
+000156d0: 2720 6373 2727 2066 2727 3e34 2229 0a20  ' cs'' f''>4"). 
+000156e0: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+000156f0: 626a 6164 2e73 686f 7728 6368 6f72 6429  bjad.show(chord)
+00015700: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
+00015710: 500a 0a20 2020 2020 2020 2020 2020 203e  P..            >
+00015720: 3e3e 2063 686f 7264 2e77 7269 7474 656e  >> chord.written
+00015730: 5f64 7572 6174 696f 6e20 3d20 6162 6a61  _duration = abja
+00015740: 642e 4475 7261 7469 6f6e 2831 2c20 3136  d.Duration(1, 16
+00015750: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00015760: 3e20 6162 6a61 642e 7368 6f77 2863 686f  > abjad.show(cho
+00015770: 7264 2920 2320 646f 6374 6573 743a 202b  rd) # doctest: +
+00015780: 534b 4950 0a0a 2020 2020 2020 2020 2222  SKIP..        ""
+00015790: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+000157a0: 2073 7570 6572 2829 2e77 7269 7474 656e   super().written
+000157b0: 5f64 7572 6174 696f 6e0a 0a20 2020 2040  _duration..    @
+000157c0: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
+000157d0: 2e73 6574 7465 720a 2020 2020 6465 6620  .setter.    def 
+000157e0: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
+000157f0: 2873 656c 662c 2061 7267 756d 656e 7429  (self, argument)
+00015800: 3a0a 2020 2020 2020 2020 4c65 6166 2e77  :.        Leaf.w
+00015810: 7269 7474 656e 5f64 7572 6174 696f 6e2e  ritten_duration.
+00015820: 6673 6574 2873 656c 662c 2061 7267 756d  fset(self, argum
+00015830: 656e 7429 0a0a 2020 2020 4070 726f 7065  ent)..    @prope
+00015840: 7274 790a 2020 2020 6465 6620 7772 6974  rty.    def writ
+00015850: 7465 6e5f 7069 7463 6865 7328 7365 6c66  ten_pitches(self
+00015860: 2920 2d3e 2074 7570 6c65 5b5f 7069 7463  ) -> tuple[_pitc
+00015870: 682e 4e61 6d65 6450 6974 6368 2c20 2e2e  h.NamedPitch, ..
+00015880: 2e5d 3a0a 2020 2020 2020 2020 2222 220a  .]:.        """.
+00015890: 2020 2020 2020 2020 5772 6974 7465 6e20          Written 
+000158a0: 7069 7463 6865 7320 696e 2063 686f 7264  pitches in chord
+000158b0: 2e0a 0a20 2020 2020 2020 202e 2e20 2063  ...        ..  c
+000158c0: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
+000158d0: 6c65 0a0a 2020 2020 2020 2020 2020 2020  le..            
+000158e0: 4765 7420 7772 6974 7465 6e20 7069 7463  Get written pitc
+000158f0: 6865 733a 0a0a 2020 2020 2020 2020 2020  hes:..          
+00015900: 2020 3e3e 3e20 6368 6f72 6420 3d20 6162    >>> chord = ab
+00015910: 6a61 642e 4368 6f72 6428 223c 6727 2063  jad.Chord("<g' c
+00015920: 2727 2065 2727 3e34 2229 0a20 2020 2020  '' e''>4").     
+00015930: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+00015940: 2e73 686f 7728 6368 6f72 6429 2023 2064  .show(chord) # d
+00015950: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+00015960: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
+00015970: 686f 7264 2e77 7269 7474 656e 5f70 6974  hord.written_pit
+00015980: 6368 6573 0a20 2020 2020 2020 2020 2020  ches.           
+00015990: 2028 4e61 6d65 6450 6974 6368 2822 6727   (NamedPitch("g'
+000159a0: 2229 2c20 4e61 6d65 6450 6974 6368 2822  "), NamedPitch("
+000159b0: 6327 2722 292c 204e 616d 6564 5069 7463  c''"), NamedPitc
+000159c0: 6828 2265 2727 2229 290a 0a20 2020 2020  h("e''"))..     
+000159d0: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
+000159e0: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
+000159f0: 2020 2020 2020 2020 5365 7420 7772 6974          Set writ
+00015a00: 7465 6e20 7069 7463 6865 7320 7769 7468  ten pitches with
+00015a10: 2070 6974 6368 206e 616d 6573 3a0a 0a20   pitch names:.. 
+00015a20: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
+00015a30: 686f 7264 203d 2061 626a 6164 2e43 686f  hord = abjad.Cho
+00015a40: 7264 2822 3c65 2720 6727 2063 2727 3e34  rd("<e' g' c''>4
+00015a50: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
+00015a60: 3e3e 2061 626a 6164 2e73 686f 7728 6368  >> abjad.show(ch
+00015a70: 6f72 6429 2023 2064 6f63 7465 7374 3a20  ord) # doctest: 
+00015a80: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+00015a90: 2020 203e 3e3e 2063 686f 7264 2e77 7269     >>> chord.wri
+00015aa0: 7474 656e 5f70 6974 6368 6573 203d 2022  tten_pitches = "
+00015ab0: 6627 2062 2720 6427 2722 0a20 2020 2020  f' b' d''".     
+00015ac0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+00015ad0: 2e73 686f 7728 6368 6f72 6429 2023 2064  .show(chord) # d
+00015ae0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+00015af0: 2020 2020 2020 2020 2020 202e 2e20 2064             ..  d
+00015b00: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
+00015b10: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+00015b20: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+00015b30: 6e64 2863 686f 7264 290a 2020 2020 2020  nd(chord).      
+00015b40: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
+00015b50: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+00015b60: 2020 2020 2020 2020 2020 2020 3c66 2720              <f' 
+00015b70: 6227 2064 2727 3e34 0a0a 2020 2020 2020  b' d''>4..      
+00015b80: 2020 2020 2020 3e3e 3e20 6368 6f72 642e        >>> chord.
+00015b90: 7772 6974 7465 6e5f 7069 7463 6865 730a  written_pitches.
+00015ba0: 2020 2020 2020 2020 2020 2020 284e 616d              (Nam
+00015bb0: 6564 5069 7463 6828 2266 2722 292c 204e  edPitch("f'"), N
+00015bc0: 616d 6564 5069 7463 6828 2262 2722 292c  amedPitch("b'"),
+00015bd0: 204e 616d 6564 5069 7463 6828 2264 2727   NamedPitch("d''
+00015be0: 2229 290a 0a20 2020 2020 2020 2053 6574  "))..        Set
+00015bf0: 2077 7269 7474 656e 2070 6974 6368 6573   written pitches
+00015c00: 2077 6974 6820 616e 7920 6974 6572 6162   with any iterab
+00015c10: 6c65 2e0a 2020 2020 2020 2020 2222 220a  le..        """.
+00015c20: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+00015c30: 7570 6c65 285f 2e77 7269 7474 656e 5f70  uple(_.written_p
+00015c40: 6974 6368 2066 6f72 205f 2069 6e20 7365  itch for _ in se
+00015c50: 6c66 2e6e 6f74 655f 6865 6164 7329 0a0a  lf.note_heads)..
+00015c60: 2020 2020 4077 7269 7474 656e 5f70 6974      @written_pit
+00015c70: 6368 6573 2e73 6574 7465 720a 2020 2020  ches.setter.    
+00015c80: 6465 6620 7772 6974 7465 6e5f 7069 7463  def written_pitc
+00015c90: 6865 7328 7365 6c66 2c20 7069 7463 6865  hes(self, pitche
+00015ca0: 7329 3a0a 2020 2020 2020 2020 7365 6c66  s):.        self
+00015cb0: 2e6e 6f74 655f 6865 6164 7320 3d20 7069  .note_heads = pi
+00015cc0: 7463 6865 730a 0a0a 636c 6173 7320 436c  tches...class Cl
+00015cd0: 7573 7465 7228 436f 6e74 6169 6e65 7229  uster(Container)
+00015ce0: 3a0a 2020 2020 7222 2222 0a20 2020 2043  :.    r""".    C
+00015cf0: 6c75 7374 6572 2e0a 0a20 2020 202e 2e20  luster...    .. 
+00015d00: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
+00015d10: 6d70 6c65 0a0a 2020 2020 2020 2020 3e3e  mple..        >>
+00015d20: 3e20 636c 7573 7465 7220 3d20 6162 6a61  > cluster = abja
+00015d30: 642e 436c 7573 7465 7228 2263 2738 203c  d.Cluster("c'8 <
+00015d40: 6427 2067 273e 3820 6227 3822 290a 2020  d' g'>8 b'8").  
+00015d50: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+00015d60: 7368 6f77 2863 6c75 7374 6572 2920 2320  show(cluster) # 
+00015d70: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+00015d80: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
+00015d90: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
+00015da0: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+00015db0: 6164 2e6c 696c 7970 6f6e 6428 636c 7573  ad.lilypond(clus
+00015dc0: 7465 7229 0a20 2020 2020 2020 2020 2020  ter).           
+00015dd0: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
+00015de0: 6729 0a20 2020 2020 2020 2020 2020 205c  g).            \
+00015df0: 6d61 6b65 436c 7573 7465 7273 207b 0a20  makeClusters {. 
+00015e00: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00015e10: 2738 0a20 2020 2020 2020 2020 2020 2020  '8.             
+00015e20: 2020 203c 6427 2067 273e 380a 2020 2020     <d' g'>8.    
+00015e30: 2020 2020 2020 2020 2020 2020 6227 380a              b'8.
+00015e40: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
+00015e50: 2020 2020 2020 203e 3e3e 2063 6c75 7374         >>> clust
+00015e60: 6572 0a20 2020 2020 2020 2043 6c75 7374  er.        Clust
+00015e70: 6572 2822 6327 3820 3c64 2720 6727 3e38  er("c'8 <d' g'>8
+00015e80: 2062 2738 2229 0a0a 2020 2020 2222 220a   b'8")..    """.
+00015e90: 0a20 2020 205f 5f64 6f63 756d 656e 7461  .    __documenta
+00015ea0: 7469 6f6e 5f73 6563 7469 6f6e 5f5f 203d  tion_section__ =
+00015eb0: 2022 436f 6e74 6169 6e65 7273 220a 0a20   "Containers".. 
+00015ec0: 2020 205f 5f73 6c6f 7473 5f5f 203d 2028     __slots__ = (
+00015ed0: 290a 0a20 2020 2064 6566 205f 666f 726d  )..    def _form
+00015ee0: 6174 5f6f 7065 6e5f 6272 6163 6b65 7473  at_open_brackets
+00015ef0: 5f73 6974 6528 7365 6c66 2c20 636f 6e74  _site(self, cont
+00015f00: 7269 6275 7469 6f6e 7329 3a0a 2020 2020  ributions):.    
+00015f10: 2020 2020 7265 7375 6c74 203d 205b 5d0a      result = [].
+00015f20: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00015f30: 7369 6d75 6c74 616e 656f 7573 3a0a 2020  simultaneous:.  
+00015f40: 2020 2020 2020 2020 2020 6272 6163 6b65            bracke
+00015f50: 7473 5f6f 7065 6e20 3d20 5b22 3c3c 225d  ts_open = ["<<"]
+00015f60: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00015f70: 2020 2020 2020 2020 2020 2062 7261 636b             brack
+00015f80: 6574 735f 6f70 656e 203d 205b 227b 225d  ets_open = ["{"]
+00015f90: 0a20 2020 2020 2020 2073 7472 696e 6720  .        string 
+00015fa0: 3d20 7266 225c 6d61 6b65 436c 7573 7465  = rf"\makeCluste
+00015fb0: 7273 207b 6272 6163 6b65 7473 5f6f 7065  rs {brackets_ope
+00015fc0: 6e5b 305d 7d22 0a20 2020 2020 2020 2072  n[0]}".        r
+00015fd0: 6573 756c 742e 6170 7065 6e64 2873 7472  esult.append(str
+00015fe0: 696e 6729 0a20 2020 2020 2020 2072 6574  ing).        ret
+00015ff0: 7572 6e20 7265 7375 6c74 0a0a 0a63 6c61  urn result...cla
+00016000: 7373 2043 6f6e 7465 7874 2843 6f6e 7461  ss Context(Conta
+00016010: 696e 6572 293a 0a20 2020 2072 2222 220a  iner):.    r""".
+00016020: 2020 2020 4c69 6c79 506f 6e64 2063 6f6e      LilyPond con
+00016030: 7465 7874 2e0a 0a20 2020 202e 2e20 2063  text...    ..  c
+00016040: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
+00016050: 6c65 0a0a 2020 2020 2020 2020 3e3e 3e20  le..        >>> 
+00016060: 636f 6e74 6578 7420 3d20 6162 6a61 642e  context = abjad.
+00016070: 436f 6e74 6578 7428 6c69 6c79 706f 6e64  Context(lilypond
+00016080: 5f74 7970 653d 2747 6c6f 6261 6c43 6f6e  _type='GlobalCon
+00016090: 7465 7874 272c 206e 616d 653d 274d 6574  text', name='Met
+000160a0: 6572 5f56 6f69 6365 2729 0a20 2020 2020  er_Voice').     
+000160b0: 2020 203e 3e3e 2063 6f6e 7465 7874 0a20     >>> context. 
+000160c0: 2020 2020 2020 2043 6f6e 7465 7874 286c         Context(l
+000160d0: 696c 7970 6f6e 645f 7479 7065 3d27 476c  ilypond_type='Gl
+000160e0: 6f62 616c 436f 6e74 6578 7427 2c20 6e61  obalContext', na
+000160f0: 6d65 3d27 4d65 7465 725f 566f 6963 6527  me='Meter_Voice'
+00016100: 290a 0a20 2020 2020 2020 202e 2e20 2064  )..        ..  d
+00016110: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
+00016120: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
+00016130: 6162 6a61 642e 6c69 6c79 706f 6e64 2863  abjad.lilypond(c
+00016140: 6f6e 7465 7874 290a 2020 2020 2020 2020  ontext).        
+00016150: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+00016160: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+00016170: 2020 5c63 6f6e 7465 7874 2047 6c6f 6261    \context Globa
+00016180: 6c43 6f6e 7465 7874 203d 2022 4d65 7465  lContext = "Mete
+00016190: 725f 566f 6963 6522 0a20 2020 2020 2020  r_Voice".       
+000161a0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
+000161b0: 2020 207d 0a0a 2020 2020 2222 220a 0a20     }..    """.. 
+000161c0: 2020 2023 2323 2043 4c41 5353 2056 4152     ### CLASS VAR
+000161d0: 4941 424c 4553 2023 2323 0a0a 2020 2020  IABLES ###..    
+000161e0: 5f5f 646f 6375 6d65 6e74 6174 696f 6e5f  __documentation_
+000161f0: 7365 6374 696f 6e5f 5f20 3d20 2243 6f6e  section__ = "Con
+00016200: 7465 7874 7322 0a0a 2020 2020 5f5f 736c  texts"..    __sl
+00016210: 6f74 735f 5f20 3d20 280a 2020 2020 2020  ots__ = (.      
+00016220: 2020 225f 6c69 6c79 706f 6e64 5f74 7970    "_lilypond_typ
+00016230: 6522 2c0a 2020 2020 2020 2020 225f 636f  e",.        "_co
+00016240: 6e73 6973 7473 5f63 6f6d 6d61 6e64 7322  nsists_commands"
+00016250: 2c0a 2020 2020 2020 2020 225f 6465 7065  ,.        "_depe
+00016260: 6e64 656e 745f 7772 6170 7065 7273 222c  ndent_wrappers",
+00016270: 0a20 2020 2020 2020 2022 5f72 656d 6f76  .        "_remov
+00016280: 655f 636f 6d6d 616e 6473 222c 0a20 2020  e_commands",.   
+00016290: 2029 0a0a 2020 2020 5f64 6566 6175 6c74   )..    _default
+000162a0: 5f6c 696c 7970 6f6e 645f 7479 7065 203d  _lilypond_type =
+000162b0: 2022 566f 6963 6522 0a0a 2020 2020 6c69   "Voice"..    li
+000162c0: 6c79 706f 6e64 5f74 7970 6573 203d 2028  lypond_types = (
+000162d0: 0a20 2020 2020 2020 2022 5363 6f72 6522  .        "Score"
+000162e0: 2c0a 2020 2020 2020 2020 2253 7461 6666  ,.        "Staff
+000162f0: 4772 6f75 7022 2c0a 2020 2020 2020 2020  Group",.        
+00016300: 2243 686f 6972 5374 6166 6622 2c0a 2020  "ChoirStaff",.  
+00016310: 2020 2020 2020 2247 7261 6e64 5374 6166        "GrandStaf
+00016320: 6622 2c0a 2020 2020 2020 2020 2250 6961  f",.        "Pia
+00016330: 6e6f 5374 6166 6622 2c0a 2020 2020 2020  noStaff",.      
+00016340: 2020 2253 7461 6666 222c 0a20 2020 2020    "Staff",.     
+00016350: 2020 2022 5268 7974 686d 6963 5374 6166     "RhythmicStaf
+00016360: 6622 2c0a 2020 2020 2020 2020 2254 6162  f",.        "Tab
+00016370: 5374 6166 6622 2c0a 2020 2020 2020 2020  Staff",.        
+00016380: 2244 7275 6d53 7461 6666 222c 0a20 2020  "DrumStaff",.   
+00016390: 2020 2020 2022 5661 7469 6361 6e61 5374       "VaticanaSt
+000163a0: 6166 6622 2c0a 2020 2020 2020 2020 224d  aff",.        "M
+000163b0: 656e 7375 7261 6c53 7461 6666 222c 0a20  ensuralStaff",. 
+000163c0: 2020 2020 2020 2022 566f 6963 6522 2c0a         "Voice",.
+000163d0: 2020 2020 2020 2020 2256 6174 6963 616e          "Vatican
+000163e0: 6156 6f69 6365 222c 0a20 2020 2020 2020  aVoice",.       
+000163f0: 2022 4d65 6e73 7572 616c 566f 6963 6522   "MensuralVoice"
+00016400: 2c0a 2020 2020 2020 2020 224c 7972 6963  ,.        "Lyric
+00016410: 7322 2c0a 2020 2020 2020 2020 2244 7275  s",.        "Dru
+00016420: 6d56 6f69 6365 222c 0a20 2020 2020 2020  mVoice",.       
+00016430: 2022 4669 6775 7265 6442 6173 7322 2c0a   "FiguredBass",.
+00016440: 2020 2020 2020 2020 2254 6162 566f 6963          "TabVoic
+00016450: 6522 2c0a 2020 2020 2020 2020 2243 7565  e",.        "Cue
+00016460: 566f 6963 6522 2c0a 2020 2020 2020 2020  Voice",.        
+00016470: 2243 686f 7264 4e61 6d65 7322 2c0a 2020  "ChordNames",.  
+00016480: 2020 290a 0a20 2020 2023 2323 2049 4e49    )..    ### INI
+00016490: 5449 414c 495a 4552 2023 2323 0a0a 2020  TIALIZER ###..  
+000164a0: 2020 2320 544f 444f 3a20 6d61 6b65 206b    # TODO: make k
+000164b0: 6579 776f 7264 7320 6d61 6e64 6174 6f72  eywords mandator
+000164c0: 790a 2020 2020 6465 6620 5f5f 696e 6974  y.    def __init
+000164d0: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
+000164e0: 2c0a 2020 2020 2020 2020 636f 6d70 6f6e  ,.        compon
+000164f0: 656e 7473 3d4e 6f6e 652c 0a20 2020 2020  ents=None,.     
+00016500: 2020 206c 696c 7970 6f6e 645f 7479 7065     lilypond_type
+00016510: 3a20 7374 7220 3d20 2243 6f6e 7465 7874  : str = "Context
+00016520: 222c 0a20 2020 2020 2020 2073 696d 756c  ",.        simul
+00016530: 7461 6e65 6f75 733a 2062 6f6f 6c20 3d20  taneous: bool = 
+00016540: 4661 6c73 652c 0a20 2020 2020 2020 206e  False,.        n
+00016550: 616d 653a 2073 7472 203d 204e 6f6e 652c  ame: str = None,
+00016560: 0a20 2020 2020 2020 2074 6167 3a20 5f74  .        tag: _t
+00016570: 6167 2e54 6167 203d 204e 6f6e 652c 0a20  ag.Tag = None,. 
+00016580: 2020 2020 2020 202a 2c0a 2020 2020 2020         *,.      
+00016590: 2020 6c61 6e67 7561 6765 3a20 7374 7220    language: str 
+000165a0: 3d20 2265 6e67 6c69 7368 222c 0a20 2020  = "english",.   
+000165b0: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+000165c0: 2020 2020 7365 6c66 2e5f 636f 6e73 6973      self._consis
+000165d0: 7473 5f63 6f6d 6d61 6e64 733a 206c 6973  ts_commands: lis
+000165e0: 745b 7374 725d 203d 205b 5d0a 2020 2020  t[str] = [].    
+000165f0: 2020 2020 7365 6c66 2e5f 6465 7065 6e64      self._depend
+00016600: 656e 745f 7772 6170 7065 7273 3a20 6c69  ent_wrappers: li
+00016610: 7374 203d 205b 5d0a 2020 2020 2020 2020  st = [].        
+00016620: 7365 6c66 2e5f 7265 6d6f 7665 5f63 6f6d  self._remove_com
+00016630: 6d61 6e64 733a 206c 6973 745b 7374 725d  mands: list[str]
+00016640: 203d 205b 5d0a 2020 2020 2020 2020 7365   = [].        se
+00016650: 6c66 2e6c 696c 7970 6f6e 645f 7479 7065  lf.lilypond_type
+00016660: 203d 206c 696c 7970 6f6e 645f 7479 7065   = lilypond_type
+00016670: 0a20 2020 2020 2020 2043 6f6e 7461 696e  .        Contain
+00016680: 6572 2e5f 5f69 6e69 745f 5f28 0a20 2020  er.__init__(.   
+00016690: 2020 2020 2020 2020 2073 656c 662c 0a20           self,. 
+000166a0: 2020 2020 2020 2020 2020 2073 696d 756c             simul
+000166b0: 7461 6e65 6f75 733d 7369 6d75 6c74 616e  taneous=simultan
+000166c0: 656f 7573 2c0a 2020 2020 2020 2020 2020  eous,.          
+000166d0: 2020 636f 6d70 6f6e 656e 7473 3d63 6f6d    components=com
+000166e0: 706f 6e65 6e74 732c 0a20 2020 2020 2020  ponents,.       
+000166f0: 2020 2020 206c 616e 6775 6167 653d 6c61       language=la
+00016700: 6e67 7561 6765 2c0a 2020 2020 2020 2020  nguage,.        
+00016710: 2020 2020 6e61 6d65 3d6e 616d 652c 0a20      name=name,. 
+00016720: 2020 2020 2020 2020 2020 2074 6167 3d74             tag=t
+00016730: 6167 2c0a 2020 2020 2020 2020 290a 0a20  ag,.        ).. 
+00016740: 2020 2023 2323 2053 5045 4349 414c 204d     ### SPECIAL M
+00016750: 4554 484f 4453 2023 2323 0a0a 2020 2020  ETHODS ###..    
+00016760: 6465 6620 5f5f 636f 7079 5f5f 2873 656c  def __copy__(sel
+00016770: 662c 202a 6172 6775 6d65 6e74 7329 3a0a  f, *arguments):.
+00016780: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00016790: 2020 2020 5368 616c 6c6f 7720 636f 7069      Shallow copi
+000167a0: 6573 2063 6f6e 7465 7874 2e0a 0a20 2020  es context...   
+000167b0: 2020 2020 2043 6f70 6965 7320 696e 6469       Copies indi
+000167c0: 6361 746f 7273 2e0a 0a20 2020 2020 2020  cators...       
+000167d0: 2044 6f65 7320 6e6f 7420 636f 7079 2063   Does not copy c
+000167e0: 6869 6c64 7265 6e2e 0a0a 2020 2020 2020  hildren...      
+000167f0: 2020 5265 7475 726e 7320 6e65 7720 636f    Returns new co
+00016800: 6d70 6f6e 656e 742e 0a20 2020 2020 2020  mponent..       
+00016810: 2022 2222 0a20 2020 2020 2020 206e 6577   """.        new
+00016820: 5f63 6f6e 7465 7874 203d 2043 6f6e 7461  _context = Conta
+00016830: 696e 6572 2e5f 5f63 6f70 795f 5f28 7365  iner.__copy__(se
+00016840: 6c66 290a 2020 2020 2020 2020 6e65 775f  lf).        new_
+00016850: 636f 6e74 6578 742e 5f63 6f6e 7369 7374  context._consist
+00016860: 735f 636f 6d6d 616e 6473 203d 2063 6f70  s_commands = cop
+00016870: 792e 636f 7079 2873 656c 662e 636f 6e73  y.copy(self.cons
+00016880: 6973 7473 5f63 6f6d 6d61 6e64 7329 0a20  ists_commands). 
+00016890: 2020 2020 2020 206e 6577 5f63 6f6e 7465         new_conte
+000168a0: 7874 2e5f 7265 6d6f 7665 5f63 6f6d 6d61  xt._remove_comma
+000168b0: 6e64 7320 3d20 636f 7079 2e63 6f70 7928  nds = copy.copy(
+000168c0: 7365 6c66 2e72 656d 6f76 655f 636f 6d6d  self.remove_comm
+000168d0: 616e 6473 290a 2020 2020 2020 2020 7265  ands).        re
+000168e0: 7475 726e 206e 6577 5f63 6f6e 7465 7874  turn new_context
+000168f0: 0a0a 2020 2020 6465 6620 5f5f 6765 746e  ..    def __getn
+00016900: 6577 6172 6773 5f5f 2873 656c 6629 3a0a  ewargs__(self):.
+00016910: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00016920: 2020 2020 4765 7473 206e 6577 2063 6f6e      Gets new con
+00016930: 7461 696e 6572 2061 7267 756d 656e 7473  tainer arguments
+00016940: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00016950: 6e73 2074 7570 6c65 2e0a 2020 2020 2020  ns tuple..      
+00016960: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00016970: 7475 726e 205b 5d2c 2073 656c 662e 6c69  turn [], self.li
+00016980: 6c79 706f 6e64 5f74 7970 652c 2073 656c  lypond_type, sel
+00016990: 662e 7369 6d75 6c74 616e 656f 7573 2c20  f.simultaneous, 
+000169a0: 7365 6c66 2e6e 616d 650a 0a20 2020 2064  self.name..    d
+000169b0: 6566 205f 5f72 6570 725f 5f28 7365 6c66  ef __repr__(self
+000169c0: 2920 2d3e 2073 7472 3a0a 2020 2020 2020  ) -> str:.      
+000169d0: 2020 2222 220a 2020 2020 2020 2020 4765    """.        Ge
+000169e0: 7473 2069 6e74 6572 7072 6574 6572 2072  ts interpreter r
+000169f0: 6570 7265 7365 6e74 6174 696f 6e20 6f66  epresentation of
+00016a00: 2063 6f6e 7465 7874 2e0a 0a20 2020 2020   context...     
+00016a10: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
+00016a20: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
+00016a30: 2020 2020 2020 2020 3e3e 3e20 636f 6e74          >>> cont
+00016a40: 6578 7420 3d20 6162 6a61 642e 436f 6e74  ext = abjad.Cont
+00016a50: 6578 7428 0a20 2020 2020 2020 2020 2020  ext(.           
+00016a60: 202e 2e2e 2020 2020 206c 696c 7970 6f6e   ...     lilypon
+00016a70: 645f 7479 7065 3d27 476c 6f62 616c 436f  d_type='GlobalCo
+00016a80: 6e74 6578 7427 2c0a 2020 2020 2020 2020  ntext',.        
+00016a90: 2020 2020 2e2e 2e20 2020 2020 6e61 6d65      ...     name
+00016aa0: 3d27 4d65 7465 725f 566f 6963 6527 2c0a  ='Meter_Voice',.
+00016ab0: 2020 2020 2020 2020 2020 2020 2e2e 2e20              ... 
+00016ac0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00016ad0: 3e20 7265 7072 2863 6f6e 7465 7874 290a  > repr(context).
+00016ae0: 2020 2020 2020 2020 2020 2020 2243 6f6e              "Con
+00016af0: 7465 7874 286c 696c 7970 6f6e 645f 7479  text(lilypond_ty
+00016b00: 7065 3d27 476c 6f62 616c 436f 6e74 6578  pe='GlobalContex
+00016b10: 7427 2c20 6e61 6d65 3d27 4d65 7465 725f  t', name='Meter_
+00016b20: 566f 6963 6527 2922 0a0a 2020 2020 2020  Voice')"..      
+00016b30: 2020 2222 220a 2020 2020 2020 2020 7061    """.        pa
+00016b40: 7261 6d65 7465 7273 203d 205b 5d0a 2020  rameters = [].  
+00016b50: 2020 2020 2020 6966 2073 656c 662e 636f        if self.co
+00016b60: 6d70 6f6e 656e 7473 3a0a 2020 2020 2020  mponents:.      
+00016b70: 2020 2020 2020 7374 7269 6e67 203d 2072        string = r
+00016b80: 6570 7228 7365 6c66 2e5f 6765 745f 636f  epr(self._get_co
+00016b90: 6e74 656e 7473 5f73 756d 6d61 7279 2829  ntents_summary()
+00016ba0: 290a 2020 2020 2020 2020 2020 2020 7061  ).            pa
+00016bb0: 7261 6d65 7465 7273 2e61 7070 656e 6428  rameters.append(
+00016bc0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+00016bd0: 6966 2073 656c 662e 6c69 6c79 706f 6e64  if self.lilypond
+00016be0: 5f74 7970 6520 213d 2074 7970 6528 7365  _type != type(se
+00016bf0: 6c66 292e 5f5f 6e61 6d65 5f5f 3a0a 2020  lf).__name__:.  
+00016c00: 2020 2020 2020 2020 2020 7061 7261 6d65            parame
+00016c10: 7465 7273 2e61 7070 656e 6428 6622 6c69  ters.append(f"li
+00016c20: 6c79 706f 6e64 5f74 7970 653d 7b73 656c  lypond_type={sel
+00016c30: 662e 6c69 6c79 706f 6e64 5f74 7970 6521  f.lilypond_type!
+00016c40: 727d 2229 0a20 2020 2020 2020 2069 6620  r}").        if 
+00016c50: 7365 6c66 2e6e 616d 653a 0a20 2020 2020  self.name:.     
+00016c60: 2020 2020 2020 2070 6172 616d 6574 6572         parameter
+00016c70: 732e 6170 7065 6e64 2866 226e 616d 653d  s.append(f"name=
+00016c80: 7b73 656c 662e 6e61 6d65 2172 7d22 290a  {self.name!r}").
+00016c90: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00016ca0: 7369 6d75 6c74 616e 656f 7573 2069 7320  simultaneous is 
+00016cb0: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
+00016cc0: 2020 7061 7261 6d65 7465 7273 2e61 7070    parameters.app
+00016cd0: 656e 6428 6622 7369 6d75 6c74 616e 656f  end(f"simultaneo
+00016ce0: 7573 3d7b 7365 6c66 2e73 696d 756c 7461  us={self.simulta
+00016cf0: 6e65 6f75 7321 727d 2229 0a20 2020 2020  neous!r}").     
+00016d00: 2020 2073 7472 696e 6720 3d20 222c 2022     string = ", "
+00016d10: 2e6a 6f69 6e28 7061 7261 6d65 7465 7273  .join(parameters
+00016d20: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00016d30: 2066 227b 7479 7065 2873 656c 6629 2e5f   f"{type(self)._
+00016d40: 5f6e 616d 655f 5f7d 287b 7374 7269 6e67  _name__}({string
+00016d50: 7d29 220a 0a20 2020 2023 2323 2050 5249  })"..    ### PRI
+00016d60: 5641 5445 204d 4554 484f 4453 2023 2323  VATE METHODS ###
+00016d70: 0a0a 2020 2020 6465 6620 5f66 6f72 6d61  ..    def _forma
+00016d80: 745f 636c 6f73 696e 675f 7369 7465 2873  t_closing_site(s
+00016d90: 656c 662c 2063 6f6e 7472 6962 7574 696f  elf, contributio
+00016da0: 6e73 293a 0a20 2020 2020 2020 2072 6573  ns):.        res
+00016db0: 756c 7420 3d20 5b5d 0a20 2020 2020 2020  ult = [].       
+00016dc0: 2073 7472 696e 6773 203d 2063 6f6e 7472   strings = contr
+00016dd0: 6962 7574 696f 6e73 2e61 6c70 6861 6265  ibutions.alphabe
+00016de0: 7469 7a65 2863 6f6e 7472 6962 7574 696f  tize(contributio
+00016df0: 6e73 2e63 6c6f 7369 6e67 2e63 6f6d 6d61  ns.closing.comma
+00016e00: 6e64 7329 0a20 2020 2020 2020 2069 6620  nds).        if 
+00016e10: 7374 7269 6e67 733a 0a20 2020 2020 2020  strings:.       
+00016e20: 2020 2020 2072 6573 756c 742e 6170 7065       result.appe
+00016e30: 6e64 2866 2225 207b 5f63 6f6e 7472 6962  nd(f"% {_contrib
+00016e40: 7574 696f 6e73 2e54 7970 6573 2e43 4f4d  utions.Types.COM
+00016e50: 4d41 4e44 532e 6e61 6d65 7d3a 2229 0a20  MANDS.name}:"). 
+00016e60: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00016e70: 742e 6578 7465 6e64 2873 7472 696e 6773  t.extend(strings
+00016e80: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
+00016e90: 203d 205f 696e 6465 6e74 5f73 7472 696e   = _indent_strin
+00016ea0: 6773 2872 6573 756c 7429 0a20 2020 2020  gs(result).     
+00016eb0: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
+00016ec0: 0a0a 2020 2020 6465 6620 5f66 6f72 6d61  ..    def _forma
+00016ed0: 745f 636f 6e73 6973 7473 5f63 6f6d 6d61  t_consists_comma
+00016ee0: 6e64 7328 7365 6c66 293a 0a20 2020 2020  nds(self):.     
+00016ef0: 2020 2072 6573 756c 7420 3d20 5b5d 0a20     result = []. 
+00016f00: 2020 2020 2020 2066 6f72 2065 6e67 7261         for engra
+00016f10: 7665 7220 696e 2073 656c 662e 636f 6e73  ver in self.cons
+00016f20: 6973 7473 5f63 6f6d 6d61 6e64 733a 0a20  ists_commands:. 
+00016f30: 2020 2020 2020 2020 2020 2073 7472 696e             strin
+00016f40: 6720 3d20 7266 225c 636f 6e73 6973 7473  g = rf"\consists
+00016f50: 207b 656e 6772 6176 6572 7d22 0a20 2020   {engraver}".   
+00016f60: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+00016f70: 6170 7065 6e64 2873 7472 696e 6729 0a20  append(string). 
+00016f80: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00016f90: 7375 6c74 0a0a 2020 2020 6465 6620 5f66  sult..    def _f
+00016fa0: 6f72 6d61 745f 696e 766f 6361 7469 6f6e  ormat_invocation
+00016fb0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00016fc0: 6966 2073 656c 662e 6e61 6d65 2069 7320  if self.name is 
+00016fd0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00016fe0: 2020 2020 2020 7374 7269 6e67 203d 2072        string = r
+00016ff0: 6627 5c63 6f6e 7465 7874 207b 7365 6c66  f'\context {self
+00017000: 2e6c 696c 7970 6f6e 645f 7479 7065 7d20  .lilypond_type} 
+00017010: 3d20 227b 7365 6c66 2e6e 616d 657d 2227  = "{self.name}"'
+00017020: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00017030: 2020 2020 2020 2020 2020 2073 7472 696e             strin
+00017040: 6720 3d20 7266 225c 6e65 7720 7b73 656c  g = rf"\new {sel
+00017050: 662e 6c69 6c79 706f 6e64 5f74 7970 657d  f.lilypond_type}
+00017060: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00017070: 2073 7472 696e 670a 0a20 2020 2064 6566   string..    def
+00017080: 205f 666f 726d 6174 5f6f 7065 6e5f 6272   _format_open_br
+00017090: 6163 6b65 7473 5f73 6974 6528 7365 6c66  ackets_site(self
+000170a0: 2c20 636f 6e74 7269 6275 7469 6f6e 7329  , contributions)
+000170b0: 3a0a 2020 2020 2020 2020 7265 7375 6c74  :.        result
+000170c0: 203d 205b 5d0a 2020 2020 2020 2020 6966   = [].        if
+000170d0: 2073 656c 662e 7369 6d75 6c74 616e 656f   self.simultaneo
+000170e0: 7573 3a0a 2020 2020 2020 2020 2020 2020  us:.            
+000170f0: 6966 2073 656c 662e 6964 656e 7469 6669  if self.identifi
+00017100: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
+00017110: 2020 2020 6f70 656e 5f62 7261 636b 6574      open_bracket
+00017120: 203d 2066 223c 3c20 207b 7365 6c66 2e69   = f"<<  {self.i
+00017130: 6465 6e74 6966 6965 727d 220a 2020 2020  dentifier}".    
+00017140: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00017150: 2020 2020 2020 2020 2020 2020 2020 6f70                op
+00017160: 656e 5f62 7261 636b 6574 203d 2022 3c3c  en_bracket = "<<
+00017170: 220a 2020 2020 2020 2020 656c 7365 3a0a  ".        else:.
+00017180: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00017190: 656c 662e 6964 656e 7469 6669 6572 3a0a  elf.identifier:.
+000171a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000171b0: 6f70 656e 5f62 7261 636b 6574 203d 2066  open_bracket = f
+000171c0: 227b 7b20 2020 7b73 656c 662e 6964 656e  "{{   {self.iden
+000171d0: 7469 6669 6572 7d22 0a20 2020 2020 2020  tifier}".       
+000171e0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000171f0: 2020 2020 2020 2020 2020 206f 7065 6e5f             open_
+00017200: 6272 6163 6b65 7420 3d20 227b 220a 2020  bracket = "{".  
+00017210: 2020 2020 2020 6272 6163 6b65 7473 5f6f        brackets_o
+00017220: 7065 6e20 3d20 5b6f 7065 6e5f 6272 6163  pen = [open_brac
+00017230: 6b65 745d 0a20 2020 2020 2020 2072 656d  ket].        rem
+00017240: 6f76 655f 636f 6d6d 616e 6473 203d 2073  ove_commands = s
+00017250: 656c 662e 5f66 6f72 6d61 745f 7265 6d6f  elf._format_remo
+00017260: 7665 5f63 6f6d 6d61 6e64 7328 290a 2020  ve_commands().  
+00017270: 2020 2020 2020 636f 6e73 6973 7473 5f63        consists_c
+00017280: 6f6d 6d61 6e64 7320 3d20 7365 6c66 2e5f  ommands = self._
+00017290: 666f 726d 6174 5f63 6f6e 7369 7374 735f  format_consists_
+000172a0: 636f 6d6d 616e 6473 2829 0a20 2020 2020  commands().     
+000172b0: 2020 206f 7665 7272 6964 6573 203d 2063     overrides = c
+000172c0: 6f6e 7472 6962 7574 696f 6e73 2e67 726f  ontributions.gro
+000172d0: 625f 6f76 6572 7269 6465 730a 2020 2020  b_overrides.    
+000172e0: 2020 2020 7365 7474 696e 6773 203d 2063      settings = c
+000172f0: 6f6e 7472 6962 7574 696f 6e73 2e63 6f6e  ontributions.con
+00017300: 7465 7874 5f73 6574 7469 6e67 730a 2020  text_settings.  
+00017310: 2020 2020 2020 6966 2072 656d 6f76 655f        if remove_
+00017320: 636f 6d6d 616e 6473 206f 7220 636f 6e73  commands or cons
+00017330: 6973 7473 5f63 6f6d 6d61 6e64 7320 6f72  ists_commands or
+00017340: 206f 7665 7272 6964 6573 206f 7220 7365   overrides or se
+00017350: 7474 696e 6773 3a0a 2020 2020 2020 2020  ttings:.        
+00017360: 2020 2020 636f 6e74 7269 6275 7469 6f6e      contribution
+00017370: 7320 3d20 5b73 656c 662e 5f66 6f72 6d61  s = [self._forma
+00017380: 745f 696e 766f 6361 7469 6f6e 2829 2c20  t_invocation(), 
+00017390: 7222 5c77 6974 6822 2c20 227b 225d 0a20  r"\with", "{"]. 
+000173a0: 2020 2020 2020 2020 2020 2063 6f6e 7472             contr
+000173b0: 6962 7574 696f 6e73 203d 2073 656c 662e  ibutions = self.
+000173c0: 5f74 6167 5f73 7472 696e 6773 2863 6f6e  _tag_strings(con
+000173d0: 7472 6962 7574 696f 6e73 290a 2020 2020  tributions).    
+000173e0: 2020 2020 2020 2020 7265 7375 6c74 2e65          result.e
+000173f0: 7874 656e 6428 636f 6e74 7269 6275 7469  xtend(contributi
+00017400: 6f6e 7329 0a20 2020 2020 2020 2020 2020  ons).           
+00017410: 2063 6f6e 7472 6962 7574 696f 6e73 203d   contributions =
+00017420: 205b 5f69 6e64 656e 746c 6962 2e49 4e44   [_indentlib.IND
+00017430: 454e 5420 2b20 5f20 666f 7220 5f20 696e  ENT + _ for _ in
+00017440: 2072 656d 6f76 655f 636f 6d6d 616e 6473   remove_commands
+00017450: 5d0a 2020 2020 2020 2020 2020 2020 636f  ].            co
+00017460: 6e74 7269 6275 7469 6f6e 7320 3d20 7365  ntributions = se
+00017470: 6c66 2e5f 7461 675f 7374 7269 6e67 7328  lf._tag_strings(
+00017480: 636f 6e74 7269 6275 7469 6f6e 7329 0a20  contributions). 
+00017490: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+000174a0: 742e 6578 7465 6e64 2863 6f6e 7472 6962  t.extend(contrib
+000174b0: 7574 696f 6e73 290a 2020 2020 2020 2020  utions).        
+000174c0: 2020 2020 636f 6e74 7269 6275 7469 6f6e      contribution
+000174d0: 7320 3d20 5b5f 696e 6465 6e74 6c69 622e  s = [_indentlib.
+000174e0: 494e 4445 4e54 202b 205f 2066 6f72 205f  INDENT + _ for _
+000174f0: 2069 6e20 636f 6e73 6973 7473 5f63 6f6d   in consists_com
+00017500: 6d61 6e64 735d 0a20 2020 2020 2020 2020  mands].         
+00017510: 2020 2063 6f6e 7472 6962 7574 696f 6e73     contributions
+00017520: 203d 2073 656c 662e 5f74 6167 5f73 7472   = self._tag_str
+00017530: 696e 6773 2863 6f6e 7472 6962 7574 696f  ings(contributio
+00017540: 6e73 290a 2020 2020 2020 2020 2020 2020  ns).            
+00017550: 7265 7375 6c74 2e65 7874 656e 6428 636f  result.extend(co
+00017560: 6e74 7269 6275 7469 6f6e 7329 0a20 2020  ntributions).   
+00017570: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
+00017580: 7574 696f 6e73 203d 205b 5f69 6e64 656e  utions = [_inden
+00017590: 746c 6962 2e49 4e44 454e 5420 2b20 5f20  tlib.INDENT + _ 
+000175a0: 666f 7220 5f20 696e 206f 7665 7272 6964  for _ in overrid
+000175b0: 6573 5d0a 2020 2020 2020 2020 2020 2020  es].            
+000175c0: 636f 6e74 7269 6275 7469 6f6e 7320 3d20  contributions = 
+000175d0: 7365 6c66 2e5f 7461 675f 7374 7269 6e67  self._tag_string
+000175e0: 7328 636f 6e74 7269 6275 7469 6f6e 7329  s(contributions)
+000175f0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00017600: 756c 742e 6578 7465 6e64 2863 6f6e 7472  ult.extend(contr
+00017610: 6962 7574 696f 6e73 290a 2020 2020 2020  ibutions).      
+00017620: 2020 2020 2020 636f 6e74 7269 6275 7469        contributi
+00017630: 6f6e 7320 3d20 5b5f 696e 6465 6e74 6c69  ons = [_indentli
+00017640: 622e 494e 4445 4e54 202b 205f 2066 6f72  b.INDENT + _ for
+00017650: 205f 2069 6e20 7365 7474 696e 6773 5d0a   _ in settings].
+00017660: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00017670: 7269 6275 7469 6f6e 7320 3d20 7365 6c66  ributions = self
+00017680: 2e5f 7461 675f 7374 7269 6e67 7328 636f  ._tag_strings(co
+00017690: 6e74 7269 6275 7469 6f6e 7329 0a20 2020  ntributions).   
+000176a0: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+000176b0: 6578 7465 6e64 2863 6f6e 7472 6962 7574  extend(contribut
+000176c0: 696f 6e73 290a 2020 2020 2020 2020 2020  ions).          
+000176d0: 2020 636f 6e74 7269 6275 7469 6f6e 7320    contributions 
+000176e0: 3d20 5b66 227d 7d20 7b62 7261 636b 6574  = [f"}} {bracket
+000176f0: 735f 6f70 656e 5b30 5d7d 225d 0a20 2020  s_open[0]}"].   
+00017700: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
+00017710: 7574 696f 6e73 203d 205b 227d 222c 206f  utions = ["}", o
+00017720: 7065 6e5f 6272 6163 6b65 745d 0a20 2020  pen_bracket].   
+00017730: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
+00017740: 7574 696f 6e73 203d 2073 656c 662e 5f74  utions = self._t
+00017750: 6167 5f73 7472 696e 6773 2863 6f6e 7472  ag_strings(contr
+00017760: 6962 7574 696f 6e73 290a 2020 2020 2020  ibutions).      
+00017770: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
+00017780: 656e 6428 636f 6e74 7269 6275 7469 6f6e  end(contribution
+00017790: 7329 0a20 2020 2020 2020 2065 6c73 653a  s).        else:
+000177a0: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
+000177b0: 7472 6962 7574 696f 6e20 3d20 7365 6c66  tribution = self
+000177c0: 2e5f 666f 726d 6174 5f69 6e76 6f63 6174  ._format_invocat
+000177d0: 696f 6e28 290a 2020 2020 2020 2020 2020  ion().          
+000177e0: 2020 636f 6e74 7269 6275 7469 6f6e 202b    contribution +
+000177f0: 3d20 6622 207b 6272 6163 6b65 7473 5f6f  = f" {brackets_o
+00017800: 7065 6e5b 305d 7d22 0a20 2020 2020 2020  pen[0]}".       
+00017810: 2020 2020 2063 6f6e 7472 6962 7574 696f       contributio
+00017820: 6e73 203d 205b 636f 6e74 7269 6275 7469  ns = [contributi
+00017830: 6f6e 5d0a 2020 2020 2020 2020 2020 2020  on].            
+00017840: 636f 6e74 7269 6275 7469 6f6e 7320 3d20  contributions = 
+00017850: 5b73 656c 662e 5f66 6f72 6d61 745f 696e  [self._format_in
+00017860: 766f 6361 7469 6f6e 2829 2c20 6f70 656e  vocation(), open
+00017870: 5f62 7261 636b 6574 5d0a 2020 2020 2020  _bracket].      
+00017880: 2020 2020 2020 636f 6e74 7269 6275 7469        contributi
+00017890: 6f6e 7320 3d20 7365 6c66 2e5f 7461 675f  ons = self._tag_
+000178a0: 7374 7269 6e67 7328 636f 6e74 7269 6275  strings(contribu
+000178b0: 7469 6f6e 7329 0a20 2020 2020 2020 2020  tions).         
+000178c0: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
+000178d0: 2863 6f6e 7472 6962 7574 696f 6e73 290a  (contributions).
+000178e0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+000178f0: 6573 756c 740a 0a20 2020 2064 6566 205f  esult..    def _
+00017900: 666f 726d 6174 5f6f 7065 6e69 6e67 5f73  format_opening_s
+00017910: 6974 6528 7365 6c66 2c20 636f 6e74 7269  ite(self, contri
+00017920: 6275 7469 6f6e 7329 3a0a 2020 2020 2020  butions):.      
+00017930: 2020 7265 7375 6c74 203d 205b 5d0a 2020    result = [].  
+00017940: 2020 2020 2020 7374 7269 6e67 7320 3d20        strings = 
+00017950: 636f 6e74 7269 6275 7469 6f6e 732e 616c  contributions.al
+00017960: 7068 6162 6574 697a 6528 636f 6e74 7269  phabetize(contri
+00017970: 6275 7469 6f6e 732e 6f70 656e 696e 672e  butions.opening.
+00017980: 636f 6d6d 616e 6473 290a 2020 2020 2020  commands).      
+00017990: 2020 6966 2073 7472 696e 6773 3a0a 2020    if strings:.  
+000179a0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+000179b0: 2e61 7070 656e 6428 6622 2520 7b5f 636f  .append(f"% {_co
+000179c0: 6e74 7269 6275 7469 6f6e 732e 5479 7065  ntributions.Type
+000179d0: 732e 434f 4d4d 414e 4453 2e6e 616d 657d  s.COMMANDS.name}
+000179e0: 3a22 290a 2020 2020 2020 2020 2020 2020  :").            
+000179f0: 7265 7375 6c74 2e65 7874 656e 6428 7374  result.extend(st
+00017a00: 7269 6e67 7329 0a20 2020 2020 2020 2072  rings).        r
+00017a10: 6573 756c 7420 3d20 5f69 6e64 656e 745f  esult = _indent_
+00017a20: 7374 7269 6e67 7328 7265 7375 6c74 290a  strings(result).
+00017a30: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00017a40: 6573 756c 740a 0a20 2020 2064 6566 205f  esult..    def _
+00017a50: 666f 726d 6174 5f72 656d 6f76 655f 636f  format_remove_co
+00017a60: 6d6d 616e 6473 2873 656c 6629 3a0a 2020  mmands(self):.  
+00017a70: 2020 2020 2020 7265 7375 6c74 203d 205b        result = [
+00017a80: 5d0a 2020 2020 2020 2020 666f 7220 656e  ].        for en
+00017a90: 6772 6176 6572 2069 6e20 7365 6c66 2e72  graver in self.r
+00017aa0: 656d 6f76 655f 636f 6d6d 616e 6473 3a0a  emove_commands:.
+00017ab0: 2020 2020 2020 2020 2020 2020 7374 7269              stri
+00017ac0: 6e67 203d 2072 6622 5c72 656d 6f76 6520  ng = rf"\remove 
+00017ad0: 7b65 6e67 7261 7665 727d 220a 2020 2020  {engraver}".    
+00017ae0: 2020 2020 2020 2020 7265 7375 6c74 2e61          result.a
+00017af0: 7070 656e 6428 7374 7269 6e67 290a 2020  ppend(string).  
+00017b00: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+00017b10: 756c 740a 0a20 2020 2023 2323 2050 5542  ult..    ### PUB
+00017b20: 4c49 4320 5052 4f50 4552 5449 4553 2023  LIC PROPERTIES #
+00017b30: 2323 0a0a 2020 2020 4070 726f 7065 7274  ##..    @propert
+00017b40: 790a 2020 2020 6465 6620 636f 6e73 6973  y.    def consis
+00017b50: 7473 5f63 6f6d 6d61 6e64 7328 7365 6c66  ts_commands(self
+00017b60: 293a 0a20 2020 2020 2020 2072 2222 220a  ):.        r""".
+00017b70: 2020 2020 2020 2020 556e 6f72 6465 7265          Unordere
+00017b80: 6420 7365 7420 6f66 204c 696c 7950 6f6e  d set of LilyPon
+00017b90: 6420 656e 6772 6176 6572 7320 746f 2069  d engravers to i
+00017ba0: 6e63 6c75 6465 2069 6e20 636f 6e74 6578  nclude in contex
+00017bb0: 7420 6465 6669 6e69 7469 6f6e 2e0a 0a20  t definition... 
+00017bc0: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
+00017bd0: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+00017be0: 2020 2020 2020 2020 2020 2020 4d61 6e61              Mana
+00017bf0: 6765 2077 6974 6820 6164 642c 2075 7064  ge with add, upd
+00017c00: 6174 652c 206f 7468 6572 2073 7461 6e64  ate, other stand
+00017c10: 6172 6420 7365 7420 636f 6d6d 616e 6473  ard set commands
+00017c20: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
+00017c30: 3e3e 2073 7461 6666 203d 2061 626a 6164  >> staff = abjad
+00017c40: 2e53 7461 6666 285b 5d29 0a20 2020 2020  .Staff([]).     
+00017c50: 2020 2020 2020 203e 3e3e 2073 7461 6666         >>> staff
+00017c60: 2e63 6f6e 7369 7374 735f 636f 6d6d 616e  .consists_comman
+00017c70: 6473 2e61 7070 656e 6428 2248 6f72 697a  ds.append("Horiz
+00017c80: 6f6e 7461 6c5f 6272 6163 6b65 745f 656e  ontal_bracket_en
+00017c90: 6772 6176 6572 2229 0a20 2020 2020 2020  graver").       
+00017ca0: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+00017cb0: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+00017cc0: 2873 7461 6666 290a 2020 2020 2020 2020  (staff).        
+00017cd0: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+00017ce0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+00017cf0: 2020 5c6e 6577 2053 7461 6666 0a20 2020    \new Staff.   
+00017d00: 2020 2020 2020 2020 205c 7769 7468 0a20           \with. 
+00017d10: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00017d20: 2020 2020 2020 2020 2020 2020 205c 636f               \co
+00017d30: 6e73 6973 7473 2048 6f72 697a 6f6e 7461  nsists Horizonta
+00017d40: 6c5f 6272 6163 6b65 745f 656e 6772 6176  l_bracket_engrav
+00017d50: 6572 0a20 2020 2020 2020 2020 2020 207d  er.            }
+00017d60: 0a20 2020 2020 2020 2020 2020 207b 0a20  .            {. 
+00017d70: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
+00017d80: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00017d90: 2020 7265 7475 726e 2073 656c 662e 5f63    return self._c
+00017da0: 6f6e 7369 7374 735f 636f 6d6d 616e 6473  onsists_commands
+00017db0: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+00017dc0: 2020 2020 6465 6620 6c69 6c79 706f 6e64      def lilypond
+00017dd0: 5f63 6f6e 7465 7874 2873 656c 6629 3a0a  _context(self):.
+00017de0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00017df0: 2020 2020 4765 7473 2060 604c 696c 7950      Gets ``LilyP
+00017e00: 6f6e 6443 6f6e 7465 7874 6060 2061 7373  ondContext`` ass
+00017e10: 6f63 6961 7465 6420 7769 7468 2063 6f6e  ociated with con
+00017e20: 7465 7874 2e0a 0a20 2020 2020 2020 2052  text...        R
+00017e30: 6574 7572 6e73 204c 696c 7950 6f6e 6420  eturns LilyPond 
+00017e40: 636f 6e74 6578 7420 696e 7374 616e 6365  context instance
+00017e50: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00017e60: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+00017e70: 2020 2020 2020 206c 696c 7970 6f6e 645f         lilypond_
+00017e80: 636f 6e74 6578 7420 3d20 5f6c 7970 726f  context = _lypro
+00017e90: 7879 2e4c 696c 7950 6f6e 6443 6f6e 7465  xy.LilyPondConte
+00017ea0: 7874 286e 616d 653d 7365 6c66 2e6c 696c  xt(name=self.lil
+00017eb0: 7970 6f6e 645f 7479 7065 290a 2020 2020  ypond_type).    
+00017ec0: 2020 2020 6578 6365 7074 2041 7373 6572      except Asser
+00017ed0: 7469 6f6e 4572 726f 723a 0a20 2020 2020  tionError:.     
+00017ee0: 2020 2020 2020 206c 696c 7970 6f6e 645f         lilypond_
+00017ef0: 636f 6e74 6578 7420 3d20 5f6c 7970 726f  context = _lypro
+00017f00: 7879 2e4c 696c 7950 6f6e 6443 6f6e 7465  xy.LilyPondConte
+00017f10: 7874 280a 2020 2020 2020 2020 2020 2020  xt(.            
+00017f20: 2020 2020 6e61 6d65 3d73 656c 662e 5f64      name=self._d
+00017f30: 6566 6175 6c74 5f6c 696c 7970 6f6e 645f  efault_lilypond_
+00017f40: 7479 7065 0a20 2020 2020 2020 2020 2020  type.           
+00017f50: 2029 0a20 2020 2020 2020 2072 6574 7572   ).        retur
+00017f60: 6e20 6c69 6c79 706f 6e64 5f63 6f6e 7465  n lilypond_conte
+00017f70: 7874 0a0a 2020 2020 4070 726f 7065 7274  xt..    @propert
+00017f80: 790a 2020 2020 6465 6620 6c69 6c79 706f  y.    def lilypo
+00017f90: 6e64 5f74 7970 6528 7365 6c66 2920 2d3e  nd_type(self) ->
+00017fa0: 2073 7472 3a0a 2020 2020 2020 2020 2222   str:.        ""
+00017fb0: 220a 2020 2020 2020 2020 4765 7473 206c  ".        Gets l
+00017fc0: 696c 7970 6f6e 6420 7479 7065 2e0a 0a20  ilypond type... 
+00017fd0: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
+00017fe0: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+00017ff0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00018000: 636f 6e74 6578 7420 3d20 6162 6a61 642e  context = abjad.
+00018010: 436f 6e74 6578 7428 0a20 2020 2020 2020  Context(.       
+00018020: 2020 2020 202e 2e2e 2020 2020 206c 696c       ...     lil
+00018030: 7970 6f6e 645f 7479 7065 3d22 5669 6f6c  ypond_type="Viol
+00018040: 696e 5374 6166 6622 2c0a 2020 2020 2020  inStaff",.      
+00018050: 2020 2020 2020 2e2e 2e20 2020 2020 6e61        ...     na
+00018060: 6d65 3d22 4d79 5669 6f6c 696e 5374 6166  me="MyViolinStaf
+00018070: 6622 2c0a 2020 2020 2020 2020 2020 2020  f",.            
+00018080: 2e2e 2e20 290a 2020 2020 2020 2020 2020  ... ).          
+00018090: 2020 3e3e 3e20 636f 6e74 6578 742e 6c69    >>> context.li
+000180a0: 6c79 706f 6e64 5f74 7970 650a 2020 2020  lypond_type.    
+000180b0: 2020 2020 2020 2020 2756 696f 6c69 6e53          'ViolinS
+000180c0: 7461 6666 270a 0a20 2020 2020 2020 2047  taff'..        G
+000180d0: 6574 7320 616e 6420 7365 7473 206c 696c  ets and sets lil
+000180e0: 7970 6f6e 6420 7479 7065 206f 6620 636f  ypond type of co
+000180f0: 6e74 6578 742e 0a20 2020 2020 2020 2022  ntext..        "
+00018100: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+00018110: 6e20 7365 6c66 2e5f 6c69 6c79 706f 6e64  n self._lilypond
+00018120: 5f74 7970 650a 0a20 2020 2040 6c69 6c79  _type..    @lily
+00018130: 706f 6e64 5f74 7970 652e 7365 7474 6572  pond_type.setter
+00018140: 0a20 2020 2064 6566 206c 696c 7970 6f6e  .    def lilypon
+00018150: 645f 7479 7065 2873 656c 662c 2061 7267  d_type(self, arg
+00018160: 756d 656e 7429 3a0a 2020 2020 2020 2020  ument):.        
+00018170: 6966 2061 7267 756d 656e 7420 6973 204e  if argument is N
+00018180: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00018190: 2061 7267 756d 656e 7420 3d20 7479 7065   argument = type
+000181a0: 2873 656c 6629 2e5f 5f6e 616d 655f 5f0a  (self).__name__.
+000181b0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000181c0: 2020 2020 2020 2020 2020 6172 6775 6d65            argume
+000181d0: 6e74 203d 2073 7472 2861 7267 756d 656e  nt = str(argumen
+000181e0: 7429 0a20 2020 2020 2020 2073 656c 662e  t).        self.
+000181f0: 5f6c 696c 7970 6f6e 645f 7479 7065 203d  _lilypond_type =
+00018200: 2061 7267 756d 656e 740a 0a20 2020 2040   argument..    @
+00018210: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00018220: 2072 656d 6f76 655f 636f 6d6d 616e 6473   remove_commands
+00018230: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00018240: 7222 2222 0a20 2020 2020 2020 2055 6e6f  r""".        Uno
+00018250: 7264 6572 6564 2073 6574 206f 6620 4c69  rdered set of Li
+00018260: 6c79 506f 6e64 2065 6e67 7261 7665 7273  lyPond engravers
+00018270: 2074 6f20 7265 6d6f 7665 2066 726f 6d20   to remove from 
+00018280: 636f 6e74 6578 742e 0a0a 2020 2020 2020  context...      
+00018290: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
+000182a0: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
+000182b0: 2020 2020 2020 204d 616e 6167 6520 7769         Manage wi
+000182c0: 7468 2061 6464 2c20 7570 6461 7465 2c20  th add, update, 
+000182d0: 6f74 6865 7220 7374 616e 6461 7264 2073  other standard s
+000182e0: 6574 2063 6f6d 6d61 6e64 733a 0a0a 2020  et commands:..  
+000182f0: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+00018300: 6166 6620 3d20 6162 6a61 642e 5374 6166  aff = abjad.Staf
+00018310: 6628 5b5d 290a 2020 2020 2020 2020 2020  f([]).          
+00018320: 2020 3e3e 3e20 7374 6166 662e 7265 6d6f    >>> staff.remo
+00018330: 7665 5f63 6f6d 6d61 6e64 732e 6170 7065  ve_commands.appe
+00018340: 6e64 2822 5469 6d65 5f73 6967 6e61 7475  nd("Time_signatu
+00018350: 7265 5f65 6e67 7261 7665 7222 290a 2020  re_engraver").  
+00018360: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+00018370: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+00018380: 7970 6f6e 6428 7374 6166 6629 0a20 2020  ypond(staff).   
+00018390: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
+000183a0: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
+000183b0: 2020 2020 2020 205c 6e65 7720 5374 6166         \new Staf
+000183c0: 660a 2020 2020 2020 2020 2020 2020 5c77  f.            \w
+000183d0: 6974 680a 2020 2020 2020 2020 2020 2020  ith.            
+000183e0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+000183f0: 2020 5c72 656d 6f76 6520 5469 6d65 5f73    \remove Time_s
+00018400: 6967 6e61 7475 7265 5f65 6e67 7261 7665  ignature_engrave
+00018410: 720a 2020 2020 2020 2020 2020 2020 7d0a  r.            }.
+00018420: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00018430: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+00018440: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00018450: 2072 6574 7572 6e20 7365 6c66 2e5f 7265   return self._re
+00018460: 6d6f 7665 5f63 6f6d 6d61 6e64 730a 0a20  move_commands.. 
+00018470: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
+00018480: 2064 6566 2074 6167 2873 656c 6629 202d   def tag(self) -
+00018490: 3e20 5f74 6167 2e54 6167 207c 204e 6f6e  > _tag.Tag | Non
+000184a0: 653a 0a20 2020 2020 2020 2072 2222 220a  e:.        r""".
+000184b0: 2020 2020 2020 2020 4765 7473 2074 6167          Gets tag
+000184c0: 2e0a 0a20 2020 2020 2020 202e 2e20 2063  ...        ..  c
+000184d0: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
+000184e0: 6c65 0a0a 2020 2020 2020 2020 2020 2020  le..            
+000184f0: 3e3e 3e20 636f 6e74 6578 7420 3d20 6162  >>> context = ab
+00018500: 6a61 642e 436f 6e74 6578 7428 0a20 2020  jad.Context(.   
+00018510: 2020 2020 2020 2020 202e 2e2e 2020 2020           ...    
+00018520: 2022 6327 3420 6427 2065 2720 6627 222c   "c'4 d' e' f'",
+00018530: 0a20 2020 2020 2020 2020 2020 202e 2e2e  .            ...
+00018540: 2020 2020 206c 696c 7970 6f6e 645f 7479       lilypond_ty
+00018550: 7065 3d22 4375 7374 6f6d 436f 6e74 6578  pe="CustomContex
+00018560: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
+00018570: 2e2e 2e20 2020 2020 7461 673d 6162 6a61  ...     tag=abja
+00018580: 642e 5461 6728 2252 4544 2229 2c0a 2020  d.Tag("RED"),.  
+00018590: 2020 2020 2020 2020 2020 2e2e 2e20 2020            ...   
+000185a0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+000185b0: 3e3e 3e20 6162 6a61 642e 7368 6f77 2863  >>> abjad.show(c
+000185c0: 6f6e 7465 7874 2920 2320 646f 6374 6573  ontext) # doctes
+000185d0: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+000185e0: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
+000185f0: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
+00018600: 6428 636f 6e74 6578 742c 2074 6167 733d  d(context, tags=
+00018610: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
+00018620: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+00018630: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+00018640: 2521 2052 4544 0a20 2020 2020 2020 2020  %! RED.         
+00018650: 2020 205c 6e65 7720 4375 7374 6f6d 436f     \new CustomCo
+00018660: 6e74 6578 740a 2020 2020 2020 2020 2020  ntext.          
+00018670: 2020 2521 2052 4544 0a20 2020 2020 2020    %! RED.       
+00018680: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
+00018690: 2020 2020 2020 2063 2734 0a20 2020 2020         c'4.     
+000186a0: 2020 2020 2020 2020 2020 2064 2734 0a20             d'4. 
+000186b0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000186c0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+000186d0: 2020 2066 2734 0a20 2020 2020 2020 2020     f'4.         
+000186e0: 2020 2025 2120 5245 440a 2020 2020 2020     %! RED.      
+000186f0: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
+00018700: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+00018710: 7572 6e20 7375 7065 7228 292e 7461 670a  urn super().tag.
+00018720: 0a0a 636c 6173 7320 4d75 6c74 696d 6561  ..class Multimea
+00018730: 7375 7265 5265 7374 284c 6561 6629 3a0a  sureRest(Leaf):.
+00018740: 2020 2020 7222 2222 0a20 2020 204d 756c      r""".    Mul
+00018750: 7469 6d65 6173 7572 6520 7265 7374 2e0a  timeasure rest..
+00018760: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
+00018770: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+00018780: 2020 2020 2020 3e3e 3e20 7265 7374 203d        >>> rest =
+00018790: 2061 626a 6164 2e4d 756c 7469 6d65 6173   abjad.Multimeas
+000187a0: 7572 6552 6573 7428 2831 2c20 3429 290a  ureRest((1, 4)).
+000187b0: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+000187c0: 642e 7368 6f77 2872 6573 7429 2023 2064  d.show(rest) # d
+000187d0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+000187e0: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
+000187f0: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
+00018800: 2020 2020 4d75 6c74 696d 6561 7375 7265      Multimeasure
+00018810: 2072 6573 7473 206d 6179 2062 6520 7461   rests may be ta
+00018820: 6767 6564 3a0a 0a20 2020 2020 2020 203e  gged:..        >
+00018830: 3e3e 2072 6573 7420 3d20 6162 6a61 642e  >> rest = abjad.
+00018840: 4d75 6c74 696d 6561 7375 7265 5265 7374  MultimeasureRest
+00018850: 280a 2020 2020 2020 2020 2e2e 2e20 2020  (.        ...   
+00018860: 2020 2252 3122 2c20 7461 673d 6162 6a61    "R1", tag=abja
+00018870: 642e 5461 6728 2247 4c4f 4241 4c5f 4d55  d.Tag("GLOBAL_MU
+00018880: 4c54 494d 4541 5355 5245 5f52 4553 5422  LTIMEASURE_REST"
+00018890: 290a 2020 2020 2020 2020 2e2e 2e20 290a  ).        ... ).
+000188a0: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+000188b0: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+000188c0: 6f6e 6428 7265 7374 2c20 7461 6773 3d54  ond(rest, tags=T
+000188d0: 7275 6529 0a20 2020 2020 2020 203e 3e3e  rue).        >>>
+000188e0: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
+000188f0: 2020 2020 2020 2025 2120 474c 4f42 414c         %! GLOBAL
+00018900: 5f4d 554c 5449 4d45 4153 5552 455f 5245  _MULTIMEASURE_RE
+00018910: 5354 0a20 2020 2020 2020 2052 310a 0a20  ST.        R1.. 
+00018920: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
+00018930: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
+00018940: 2020 2020 5245 4752 4553 5349 4f4e 2023      REGRESSION #
+00018950: 3130 3439 2e20 5061 7273 6572 2072 6561  1049. Parser rea
+00018960: 6473 206d 756c 7469 6d65 6173 7572 6520  ds multimeasure 
+00018970: 7265 7374 206d 756c 7469 706c 6965 7273  rest multipliers
+00018980: 3a0a 0a20 2020 2020 2020 203e 3e3e 2073  :..        >>> s
+00018990: 7461 6666 203d 2061 626a 6164 2e53 7461  taff = abjad.Sta
+000189a0: 6666 2872 225c 7469 6d65 2033 2f38 2052  ff(r"\time 3/8 R
+000189b0: 3120 2a20 332f 3822 290a 2020 2020 2020  1 * 3/8").      
+000189c0: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+000189d0: 2873 7461 6666 2920 2320 646f 6374 6573  (staff) # doctes
+000189e0: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+000189f0: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+00018a00: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+00018a10: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+00018a20: 7970 6f6e 6428 7374 6166 6629 0a20 2020  ypond(staff).   
+00018a30: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
+00018a40: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
+00018a50: 2020 2020 2020 205c 6e65 7720 5374 6166         \new Staf
+00018a60: 660a 2020 2020 2020 2020 2020 2020 7b0a  f.            {.
+00018a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018a80: 5c74 696d 6520 332f 380a 2020 2020 2020  \time 3/8.      
+00018a90: 2020 2020 2020 2020 2020 5231 202a 2033            R1 * 3
+00018aa0: 2f38 0a20 2020 2020 2020 2020 2020 207d  /8.            }
+00018ab0: 0a0a 2020 2020 2222 220a 0a20 2020 2023  ..    """..    #
+00018ac0: 2323 2043 4c41 5353 2056 4152 4941 424c  ## CLASS VARIABL
+00018ad0: 4553 2023 2323 0a0a 2020 2020 5f5f 646f  ES ###..    __do
+00018ae0: 6375 6d65 6e74 6174 696f 6e5f 7365 6374  cumentation_sect
+00018af0: 696f 6e5f 5f20 3d20 224c 6561 7665 7322  ion__ = "Leaves"
+00018b00: 0a0a 2020 2020 5f5f 736c 6f74 735f 5f20  ..    __slots__ 
+00018b10: 3d20 2829 0a0a 2020 2020 2323 2320 494e  = ()..    ### IN
+00018b20: 4954 4941 4c49 5a45 5220 2323 230a 0a20  ITIALIZER ###.. 
+00018b30: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00018b40: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+00018b50: 2020 2020 2020 202a 6172 6775 6d65 6e74         *argument
+00018b60: 732c 0a20 2020 2020 2020 206c 616e 6775  s,.        langu
+00018b70: 6167 653a 2073 7472 203d 2022 656e 676c  age: str = "engl
+00018b80: 6973 6822 2c0a 2020 2020 2020 2020 6d75  ish",.        mu
+00018b90: 6c74 6970 6c69 6572 3a20 5f74 7970 696e  ltiplier: _typin
+00018ba0: 6773 2e44 7572 6174 696f 6e20 3d20 4e6f  gs.Duration = No
+00018bb0: 6e65 2c0a 2020 2020 2020 2020 7461 673a  ne,.        tag:
+00018bc0: 205f 7461 672e 5461 6720 3d20 4e6f 6e65   _tag.Tag = None
+00018bd0: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+00018be0: 0a20 2020 2020 2020 2069 6620 6c65 6e28  .        if len(
+00018bf0: 6172 6775 6d65 6e74 7329 203d 3d20 303a  arguments) == 0:
+00018c00: 0a20 2020 2020 2020 2020 2020 2061 7267  .            arg
+00018c10: 756d 656e 7473 203d 2028 2831 2c20 3429  uments = ((1, 4)
+00018c20: 2c29 0a20 2020 2020 2020 2072 6573 7420  ,).        rest 
+00018c30: 3d20 5265 7374 282a 6172 6775 6d65 6e74  = Rest(*argument
+00018c40: 732c 206c 616e 6775 6167 653d 6c61 6e67  s, language=lang
+00018c50: 7561 6765 290a 2020 2020 2020 2020 4c65  uage).        Le
+00018c60: 6166 2e5f 5f69 6e69 745f 5f28 7365 6c66  af.__init__(self
+00018c70: 2c20 7265 7374 2e77 7269 7474 656e 5f64  , rest.written_d
+00018c80: 7572 6174 696f 6e2c 206d 756c 7469 706c  uration, multipl
+00018c90: 6965 723d 6d75 6c74 6970 6c69 6572 2c20  ier=multiplier, 
+00018ca0: 7461 673d 7461 6729 0a0a 2020 2020 2323  tag=tag)..    ##
+00018cb0: 2320 5052 4956 4154 4520 4d45 5448 4f44  # PRIVATE METHOD
+00018cc0: 5320 2323 230a 0a20 2020 2064 6566 205f  S ###..    def _
+00018cd0: 6765 745f 626f 6479 2873 656c 6629 3a0a  get_body(self):.
+00018ce0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00018cf0: 2020 2020 4765 7473 206c 6973 7420 6f66      Gets list of
+00018d00: 2073 7472 696e 6720 7265 7072 6573 656e   string represen
+00018d10: 7461 7469 6f6e 206f 6620 626f 6479 206f  tation of body o
+00018d20: 6620 7265 7374 2e0a 2020 2020 2020 2020  f rest..        
+00018d30: 5069 636b 6564 2075 7020 6173 2063 6f6e  Picked up as con
+00018d40: 7472 6962 7574 696f 6e20 6174 2066 6f72  tribution at for
+00018d50: 6d61 742d 7469 6d65 2e0a 2020 2020 2020  mat-time..      
+00018d60: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00018d70: 7375 6c74 203d 2022 5222 202b 2073 7472  sult = "R" + str
+00018d80: 2873 656c 662e 5f67 6574 5f66 6f72 6d61  (self._get_forma
+00018d90: 7474 6564 5f64 7572 6174 696f 6e28 2929  tted_duration())
+00018da0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00018db0: 5b72 6573 756c 745d 0a0a 2020 2020 6465  [result]..    de
+00018dc0: 6620 5f67 6574 5f63 6f6d 7061 6374 5f72  f _get_compact_r
+00018dd0: 6570 7265 7365 6e74 6174 696f 6e28 7365  epresentation(se
+00018de0: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
+00018df0: 7572 6e20 6622 527b 7365 6c66 2e5f 6765  urn f"R{self._ge
+00018e00: 745f 666f 726d 6174 7465 645f 6475 7261  t_formatted_dura
+00018e10: 7469 6f6e 2829 7d22 0a0a 2020 2020 2323  tion()}"..    ##
+00018e20: 2320 5055 424c 4943 2050 524f 5045 5254  # PUBLIC PROPERT
+00018e30: 4945 5320 2323 230a 0a20 2020 2040 7072  IES ###..    @pr
+00018e40: 6f70 6572 7479 0a20 2020 2064 6566 2074  operty.    def t
+00018e50: 6167 2873 656c 6629 202d 3e20 5f74 6167  ag(self) -> _tag
+00018e60: 2e54 6167 207c 204e 6f6e 653a 0a20 2020  .Tag | None:.   
+00018e70: 2020 2020 2072 2222 220a 2020 2020 2020       r""".      
+00018e80: 2020 4765 7473 2074 6167 2e0a 0a20 2020    Gets tag...   
+00018e90: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
+00018ea0: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+00018eb0: 2020 2020 2020 2020 2020 3e3e 3e20 7265            >>> re
+00018ec0: 7374 203d 2061 626a 6164 2e4d 756c 7469  st = abjad.Multi
+00018ed0: 6d65 6173 7572 6552 6573 7428 0a20 2020  measureRest(.   
+00018ee0: 2020 2020 2020 2020 202e 2e2e 2020 2020           ...    
+00018ef0: 2031 2c20 7461 673d 6162 6a61 642e 5461   1, tag=abjad.Ta
+00018f00: 6728 274d 554c 5449 4d45 4153 5552 455f  g('MULTIMEASURE_
+00018f10: 5245 5354 2729 0a20 2020 2020 2020 2020  REST').         
+00018f20: 2020 202e 2e2e 2029 0a20 2020 2020 2020     ... ).       
+00018f30: 2020 2020 203e 3e3e 2072 6573 742e 6d75       >>> rest.mu
+00018f40: 6c74 6970 6c69 6572 203d 2028 332c 2038  ltiplier = (3, 8
+00018f50: 290a 0a20 2020 2020 2020 2020 2020 203e  )..            >
+00018f60: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+00018f70: 642e 6c69 6c79 706f 6e64 2872 6573 742c  d.lilypond(rest,
+00018f80: 2074 6167 733d 5472 7565 290a 2020 2020   tags=True).    
+00018f90: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+00018fa0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+00018fb0: 2020 2020 2020 2521 204d 554c 5449 4d45        %! MULTIME
+00018fc0: 4153 5552 455f 5245 5354 0a20 2020 2020  ASURE_REST.     
+00018fd0: 2020 2020 2020 2052 3120 2a20 332f 380a         R1 * 3/8.
+00018fe0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00018ff0: 2020 2020 2072 6574 7572 6e20 7375 7065       return supe
+00019000: 7228 292e 7461 670a 0a0a 4066 756e 6374  r().tag...@funct
+00019010: 6f6f 6c73 2e74 6f74 616c 5f6f 7264 6572  ools.total_order
+00019020: 696e 670a 636c 6173 7320 4e6f 7465 4865  ing.class NoteHe
+00019030: 6164 3a0a 2020 2020 7222 2222 0a20 2020  ad:.    r""".   
+00019040: 204e 6f74 652d 6865 6164 2e0a 0a20 2020   Note-head...   
+00019050: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
+00019060: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
+00019070: 2020 3e3e 3e20 6e6f 7465 203d 2061 626a    >>> note = abj
+00019080: 6164 2e4e 6f74 6528 2263 7327 2722 290a  ad.Note("cs''").
+00019090: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+000190a0: 642e 7368 6f77 286e 6f74 6529 2023 2064  d.show(note) # d
+000190b0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+000190c0: 2020 2020 2020 203e 3e3e 206e 6f74 652e         >>> note.
+000190d0: 6e6f 7465 5f68 6561 640a 2020 2020 2020  note_head.      
+000190e0: 2020 4e6f 7465 4865 6164 2822 6373 2727    NoteHead("cs''
+000190f0: 2229 0a0a 2020 2020 2e2e 2020 636f 6e74  ")..    ..  cont
+00019100: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
+00019110: 0a20 2020 2020 2020 203e 3e3e 206e 6f74  .        >>> not
+00019120: 655f 6865 6164 203d 2061 626a 6164 2e4e  e_head = abjad.N
+00019130: 6f74 6548 6561 6428 2263 7327 2722 290a  oteHead("cs''").
+00019140: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+00019150: 642e 7477 6561 6b28 6e6f 7465 5f68 6561  d.tweak(note_hea
+00019160: 642c 2072 225c 7477 6561 6b20 636f 6c6f  d, r"\tweak colo
+00019170: 7220 2372 6564 2229 0a20 2020 2020 2020  r #red").       
+00019180: 203e 3e3e 206e 6f74 655f 6865 6164 2e74   >>> note_head.t
+00019190: 7765 616b 730a 2020 2020 2020 2020 2854  weaks.        (T
+000191a0: 7765 616b 2873 7472 696e 673d 275c 5c74  weak(string='\\t
+000191b0: 7765 616b 2063 6f6c 6f72 2023 7265 6427  weak color #red'
+000191c0: 2c20 7461 673d 4e6f 6e65 292c 290a 0a20  , tag=None),).. 
+000191d0: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+000191e0: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+000191f0: 6e64 286e 6f74 655f 6865 6164 290a 2020  nd(note_head).  
+00019200: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+00019210: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+00019220: 5c74 7765 616b 2063 6f6c 6f72 2023 7265  \tweak color #re
+00019230: 640a 2020 2020 2020 2020 6373 2727 0a0a  d.        cs''..
+00019240: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+00019250: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+00019260: 2020 2020 203e 3e3e 2063 686f 7264 203d       >>> chord =
+00019270: 2061 626a 6164 2e43 686f 7264 285b 302c   abjad.Chord([0,
+00019280: 2032 2c20 3130 5d2c 2028 312c 2034 2929   2, 10], (1, 4))
+00019290: 0a0a 2020 2020 2020 2020 3e3e 3e20 6162  ..        >>> ab
+000192a0: 6a61 642e 7477 6561 6b28 6368 6f72 642e  jad.tweak(chord.
+000192b0: 6e6f 7465 5f68 6561 6473 5b30 5d2c 2072  note_heads[0], r
+000192c0: 225c 7477 6561 6b20 636f 6c6f 7220 2372  "\tweak color #r
+000192d0: 6564 2229 0a20 2020 2020 2020 203e 3e3e  ed").        >>>
+000192e0: 2061 626a 6164 2e74 7765 616b 2863 686f   abjad.tweak(cho
+000192f0: 7264 2e6e 6f74 655f 6865 6164 735b 305d  rd.note_heads[0]
+00019300: 2c20 7222 5c74 7765 616b 2074 6869 636b  , r"\tweak thick
+00019310: 6e65 7373 2032 2229 0a20 2020 2020 2020  ness 2").       
+00019320: 203e 3e3e 2061 626a 6164 2e74 7765 616b   >>> abjad.tweak
+00019330: 2863 686f 7264 2e6e 6f74 655f 6865 6164  (chord.note_head
+00019340: 735b 315d 2c20 7222 5c74 7765 616b 2063  s[1], r"\tweak c
+00019350: 6f6c 6f72 2023 7265 6422 290a 2020 2020  olor #red").    
+00019360: 2020 2020 3e3e 3e20 6162 6a61 642e 7477      >>> abjad.tw
+00019370: 6561 6b28 6368 6f72 642e 6e6f 7465 5f68  eak(chord.note_h
+00019380: 6561 6473 5b31 5d2c 2072 225c 7477 6561  eads[1], r"\twea
+00019390: 6b20 7468 6963 6b6e 6573 7320 3222 290a  k thickness 2").
+000193a0: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+000193b0: 642e 7477 6561 6b28 6368 6f72 642e 6e6f  d.tweak(chord.no
+000193c0: 7465 5f68 6561 6473 5b32 5d2c 2072 225c  te_heads[2], r"\
+000193d0: 7477 6561 6b20 636f 6c6f 7220 2362 6c75  tweak color #blu
+000193e0: 6522 290a 2020 2020 2020 2020 3e3e 3e20  e").        >>> 
+000193f0: 6162 6a61 642e 7368 6f77 2863 686f 7264  abjad.show(chord
+00019400: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
+00019410: 4950 0a0a 2020 2020 2020 2020 2e2e 2020  IP..        ..  
+00019420: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
+00019430: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
+00019440: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
+00019450: 6368 6f72 6429 0a20 2020 2020 2020 2020  chord).         
+00019460: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
+00019470: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+00019480: 203c 0a20 2020 2020 2020 2020 2020 2020   <.             
+00019490: 2020 205c 7477 6561 6b20 636f 6c6f 7220     \tweak color 
+000194a0: 2372 6564 0a20 2020 2020 2020 2020 2020  #red.           
+000194b0: 2020 2020 205c 7477 6561 6b20 7468 6963       \tweak thic
+000194c0: 6b6e 6573 7320 320a 2020 2020 2020 2020  kness 2.        
+000194d0: 2020 2020 2020 2020 6327 0a20 2020 2020          c'.     
+000194e0: 2020 2020 2020 2020 2020 205c 7477 6561             \twea
+000194f0: 6b20 636f 6c6f 7220 2372 6564 0a20 2020  k color #red.   
+00019500: 2020 2020 2020 2020 2020 2020 205c 7477               \tw
+00019510: 6561 6b20 7468 6963 6b6e 6573 7320 320a  eak thickness 2.
+00019520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019530: 6427 0a20 2020 2020 2020 2020 2020 2020  d'.             
+00019540: 2020 205c 7477 6561 6b20 636f 6c6f 7220     \tweak color 
+00019550: 2362 6c75 650a 2020 2020 2020 2020 2020  #blue.          
+00019560: 2020 2020 2020 6266 270a 2020 2020 2020        bf'.      
+00019570: 2020 2020 2020 3e34 0a0a 2020 2020 2222        >4..    ""
+00019580: 220a 0a20 2020 205f 5f64 6f63 756d 656e  "..    __documen
+00019590: 7461 7469 6f6e 5f73 6563 7469 6f6e 5f5f  tation_section__
+000195a0: 203d 2022 4e6f 7465 2d68 6561 6473 220a   = "Note-heads".
+000195b0: 0a20 2020 205f 5f73 6c6f 7473 5f5f 203d  .    __slots__ =
+000195c0: 2028 0a20 2020 2020 2020 2022 5f61 6c74   (.        "_alt
+000195d0: 6572 6e61 7469 7665 222c 0a20 2020 2020  ernative",.     
+000195e0: 2020 2022 5f69 735f 6361 7574 696f 6e61     "_is_cautiona
+000195f0: 7279 222c 0a20 2020 2020 2020 2022 5f69  ry",.        "_i
+00019600: 735f 666f 7263 6564 222c 0a20 2020 2020  s_forced",.     
+00019610: 2020 2022 5f69 735f 7061 7265 6e74 6865     "_is_parenthe
+00019620: 7369 7a65 6422 2c0a 2020 2020 2020 2020  sized",.        
+00019630: 225f 7772 6974 7465 6e5f 7069 7463 6822  "_written_pitch"
+00019640: 2c0a 2020 2020 2020 2020 2274 7765 616b  ,.        "tweak
+00019650: 7322 2c0a 2020 2020 290a 0a20 2020 2064  s",.    )..    d
+00019660: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+00019670: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+00019680: 2020 2077 7269 7474 656e 5f70 6974 6368     written_pitch
+00019690: 3d4e 6f6e 652c 0a20 2020 2020 2020 2069  =None,.        i
+000196a0: 735f 6361 7574 696f 6e61 7279 3d4e 6f6e  s_cautionary=Non
+000196b0: 652c 0a20 2020 2020 2020 2069 735f 666f  e,.        is_fo
+000196c0: 7263 6564 3d4e 6f6e 652c 0a20 2020 2020  rced=None,.     
+000196d0: 2020 2069 735f 7061 7265 6e74 6865 7369     is_parenthesi
+000196e0: 7a65 643d 4e6f 6e65 2c0a 2020 2020 2020  zed=None,.      
+000196f0: 2020 7477 6561 6b73 3d4e 6f6e 652c 0a20    tweaks=None,. 
+00019700: 2020 2029 3a0a 2020 2020 2020 2020 7365     ):.        se
+00019710: 6c66 2e5f 616c 7465 726e 6174 6976 6520  lf._alternative 
+00019720: 3d20 4e6f 6e65 0a20 2020 2020 2020 2074  = None.        t
+00019730: 7765 616b 735f 203d 2028 290a 2020 2020  weaks_ = ().    
+00019740: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00019750: 6528 7772 6974 7465 6e5f 7069 7463 682c  e(written_pitch,
+00019760: 204e 6f74 6548 6561 6429 3a0a 2020 2020   NoteHead):.    
+00019770: 2020 2020 2020 2020 6e6f 7465 5f68 6561          note_hea
+00019780: 6420 3d20 7772 6974 7465 6e5f 7069 7463  d = written_pitc
+00019790: 680a 2020 2020 2020 2020 2020 2020 7477  h.            tw
+000197a0: 6561 6b73 5f20 3d20 636f 7079 2e64 6565  eaks_ = copy.dee
+000197b0: 7063 6f70 7928 6e6f 7465 5f68 6561 642e  pcopy(note_head.
+000197c0: 7477 6561 6b73 290a 2020 2020 2020 2020  tweaks).        
+000197d0: 2020 2020 7772 6974 7465 6e5f 7069 7463      written_pitc
+000197e0: 6820 3d20 6e6f 7465 5f68 6561 642e 7772  h = note_head.wr
+000197f0: 6974 7465 6e5f 7069 7463 680a 2020 2020  itten_pitch.    
+00019800: 2020 2020 2020 2020 6973 5f63 6175 7469          is_cauti
+00019810: 6f6e 6172 7920 3d20 6e6f 7465 5f68 6561  onary = note_hea
+00019820: 642e 6973 5f63 6175 7469 6f6e 6172 790a  d.is_cautionary.
+00019830: 2020 2020 2020 2020 2020 2020 6973 5f66              is_f
+00019840: 6f72 6365 6420 3d20 6e6f 7465 5f68 6561  orced = note_hea
+00019850: 642e 6973 5f66 6f72 6365 640a 2020 2020  d.is_forced.    
+00019860: 2020 2020 656c 6966 2077 7269 7474 656e      elif written
+00019870: 5f70 6974 6368 2069 7320 4e6f 6e65 3a0a  _pitch is None:.
+00019880: 2020 2020 2020 2020 2020 2020 7772 6974              writ
+00019890: 7465 6e5f 7069 7463 6820 3d20 300a 2020  ten_pitch = 0.  
+000198a0: 2020 2020 2020 7365 6c66 2e77 7269 7474        self.writt
+000198b0: 656e 5f70 6974 6368 203d 2077 7269 7474  en_pitch = writt
+000198c0: 656e 5f70 6974 6368 0a20 2020 2020 2020  en_pitch.       
+000198d0: 2073 656c 662e 6973 5f63 6175 7469 6f6e   self.is_caution
+000198e0: 6172 7920 3d20 6973 5f63 6175 7469 6f6e  ary = is_caution
+000198f0: 6172 790a 2020 2020 2020 2020 7365 6c66  ary.        self
+00019900: 2e69 735f 666f 7263 6564 203d 2069 735f  .is_forced = is_
+00019910: 666f 7263 6564 0a20 2020 2020 2020 2073  forced.        s
+00019920: 656c 662e 6973 5f70 6172 656e 7468 6573  elf.is_parenthes
+00019930: 697a 6564 203d 2069 735f 7061 7265 6e74  ized = is_parent
+00019940: 6865 7369 7a65 640a 2020 2020 2020 2020  hesized.        
+00019950: 7365 6c66 2e74 7765 616b 7320 3d20 4e6f  self.tweaks = No
+00019960: 6e65 0a20 2020 2020 2020 2069 6620 7477  ne.        if tw
+00019970: 6561 6b73 2069 7320 6e6f 7420 4e6f 6e65  eaks is not None
+00019980: 3a0a 2020 2020 2020 2020 2020 2020 6173  :.            as
+00019990: 7365 7274 2061 6c6c 2869 7369 6e73 7461  sert all(isinsta
+000199a0: 6e63 6528 5f2c 205f 7477 6561 6b73 2e54  nce(_, _tweaks.T
+000199b0: 7765 616b 2920 666f 7220 5f20 696e 2074  weak) for _ in t
+000199c0: 7765 616b 7329 0a20 2020 2020 2020 2020  weaks).         
+000199d0: 2020 2074 7765 616b 735f 203d 2074 7765     tweaks_ = twe
+000199e0: 616b 735f 202b 2074 7570 6c65 2874 7765  aks_ + tuple(twe
+000199f0: 616b 7329 0a20 2020 2020 2020 2073 656c  aks).        sel
+00019a00: 662e 7477 6561 6b73 203d 2074 7765 616b  f.tweaks = tweak
+00019a10: 735f 0a0a 2020 2020 6465 6620 5f5f 636f  s_..    def __co
+00019a20: 7079 5f5f 2873 656c 662c 202a 6172 6775  py__(self, *argu
+00019a30: 6d65 6e74 7329 202d 3e20 224e 6f74 6548  ments) -> "NoteH
+00019a40: 6561 6422 3a0a 2020 2020 2020 2020 2222  ead":.        ""
+00019a50: 220a 2020 2020 2020 2020 436f 7069 6573  ".        Copies
+00019a60: 206e 6f74 652d 6865 6164 2e0a 0a20 2020   note-head...   
+00019a70: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
+00019a80: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+00019a90: 2020 2020 2020 2020 2020 3e3e 3e20 696d            >>> im
+00019aa0: 706f 7274 2063 6f70 790a 2020 2020 2020  port copy.      
+00019ab0: 2020 2020 2020 3e3e 3e20 6e6f 7465 5f68        >>> note_h
+00019ac0: 6561 6420 3d20 6162 6a61 642e 4e6f 7465  ead = abjad.Note
+00019ad0: 4865 6164 2831 3329 0a20 2020 2020 2020  Head(13).       
+00019ae0: 2020 2020 203e 3e3e 2063 6f70 792e 636f       >>> copy.co
+00019af0: 7079 286e 6f74 655f 6865 6164 290a 2020  py(note_head).  
+00019b00: 2020 2020 2020 2020 2020 4e6f 7465 4865            NoteHe
+00019b10: 6164 2822 6373 2727 2229 0a0a 2020 2020  ad("cs''")..    
+00019b20: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00019b30: 6172 6775 6d65 6e74 7320 3d20 280a 2020  arguments = (.  
+00019b40: 2020 2020 2020 2020 2020 7365 6c66 2e77            self.w
+00019b50: 7269 7474 656e 5f70 6974 6368 2c0a 2020  ritten_pitch,.  
+00019b60: 2020 2020 2020 2020 2020 7365 6c66 2e69            self.i
+00019b70: 735f 6361 7574 696f 6e61 7279 2c0a 2020  s_cautionary,.  
+00019b80: 2020 2020 2020 2020 2020 7365 6c66 2e69            self.i
+00019b90: 735f 666f 7263 6564 2c0a 2020 2020 2020  s_forced,.      
+00019ba0: 2020 2020 2020 7365 6c66 2e69 735f 7061        self.is_pa
+00019bb0: 7265 6e74 6865 7369 7a65 642c 0a20 2020  renthesized,.   
+00019bc0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
+00019bd0: 7477 6561 6b73 2c0a 2020 2020 2020 2020  tweaks,.        
+00019be0: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
+00019bf0: 203d 2074 7970 6528 7365 6c66 2928 2a61   = type(self)(*a
+00019c00: 7267 756d 656e 7473 290a 2020 2020 2020  rguments).      
+00019c10: 2020 7477 6561 6b73 203d 2063 6f70 792e    tweaks = copy.
+00019c20: 6465 6570 636f 7079 2873 656c 662e 7477  deepcopy(self.tw
+00019c30: 6561 6b73 290a 2020 2020 2020 2020 7265  eaks).        re
+00019c40: 7375 6c74 2e74 7765 616b 7320 3d20 7477  sult.tweaks = tw
+00019c50: 6561 6b73 0a20 2020 2020 2020 2072 6574  eaks.        ret
+00019c60: 7572 6e20 7265 7375 6c74 0a0a 2020 2020  urn result..    
+00019c70: 6465 6620 5f5f 6571 5f5f 2873 656c 662c  def __eq__(self,
+00019c80: 2061 7267 756d 656e 7429 202d 3e20 626f   argument) -> bo
+00019c90: 6f6c 3a0a 2020 2020 2020 2020 2222 220a  ol:.        """.
+00019ca0: 2020 2020 2020 2020 4973 2074 7275 6520          Is true 
+00019cb0: 7768 656e 2060 6060 6172 6775 6d65 6e74  when ```argument
+00019cc0: 6060 2069 7320 6120 6e6f 7465 2d68 6561  `` is a note-hea
+00019cd0: 6420 7769 7468 2077 7269 7474 656e 2070  d with written p
+00019ce0: 6974 6368 2065 7175 616c 2074 6f20 7468  itch equal to th
+00019cf0: 6174 206f 660a 2020 2020 2020 2020 7468  at of.        th
+00019d00: 6973 206e 6f74 652d 6865 6164 2e0a 2020  is note-head..  
+00019d10: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00019d20: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00019d30: 6172 6775 6d65 6e74 2c20 7479 7065 2873  argument, type(s
+00019d40: 656c 6629 293a 0a20 2020 2020 2020 2020  elf)):.         
+00019d50: 2020 2072 6574 7572 6e20 7365 6c66 2e77     return self.w
+00019d60: 7269 7474 656e 5f70 6974 6368 203d 3d20  ritten_pitch == 
+00019d70: 6172 6775 6d65 6e74 2e77 7269 7474 656e  argument.written
+00019d80: 5f70 6974 6368 0a20 2020 2020 2020 2072  _pitch.        r
+00019d90: 6574 7572 6e20 7365 6c66 2e77 7269 7474  eturn self.writt
+00019da0: 656e 5f70 6974 6368 203d 3d20 6172 6775  en_pitch == argu
+00019db0: 6d65 6e74 0a0a 2020 2020 6465 6620 5f5f  ment..    def __
+00019dc0: 6861 7368 5f5f 2873 656c 6629 202d 3e20  hash__(self) -> 
+00019dd0: 696e 743a 0a20 2020 2020 2020 2022 2222  int:.        """
+00019de0: 0a20 2020 2020 2020 2048 6173 6865 7320  .        Hashes 
+00019df0: 6e6f 7465 2d68 6561 642e 0a20 2020 2020  note-head..     
+00019e00: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00019e10: 6574 7572 6e20 7375 7065 7228 292e 5f5f  eturn super().__
+00019e20: 6861 7368 5f5f 2829 0a0a 2020 2020 6465  hash__()..    de
+00019e30: 6620 5f5f 6c74 5f5f 2873 656c 662c 2061  f __lt__(self, a
+00019e40: 7267 756d 656e 7429 202d 3e20 626f 6f6c  rgument) -> bool
+00019e50: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00019e60: 2020 2020 2020 4973 2074 7275 6520 7768        Is true wh
+00019e70: 656e 2060 6061 7267 756d 656e 7460 6020  en ``argument`` 
+00019e80: 6973 2061 206e 6f74 652d 6865 6164 2077  is a note-head w
+00019e90: 6974 6820 7772 6974 7465 6e20 7069 7463  ith written pitc
+00019ea0: 6820 6772 6561 7465 7220 7468 616e 2074  h greater than t
+00019eb0: 6861 7420 6f66 0a20 2020 2020 2020 2074  hat of.        t
+00019ec0: 6869 7320 6e6f 7465 2d68 6561 642e 0a20  his note-head.. 
+00019ed0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00019ee0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00019ef0: 2861 7267 756d 656e 742c 2074 7970 6528  (argument, type(
+00019f00: 7365 6c66 2929 3a0a 2020 2020 2020 2020  self)):.        
+00019f10: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00019f20: 7772 6974 7465 6e5f 7069 7463 6820 3c20  written_pitch < 
+00019f30: 6172 6775 6d65 6e74 2e77 7269 7474 656e  argument.written
+00019f40: 5f70 6974 6368 0a20 2020 2020 2020 2074  _pitch.        t
+00019f50: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00019f60: 6172 6775 6d65 6e74 203d 2074 7970 6528  argument = type(
+00019f70: 7365 6c66 2928 6172 6775 6d65 6e74 290a  self)(argument).
+00019f80: 2020 2020 2020 2020 6578 6365 7074 2028          except (
+00019f90: 5661 6c75 6545 7272 6f72 2c20 5479 7065  ValueError, Type
+00019fa0: 4572 726f 7229 3a0a 2020 2020 2020 2020  Error):.        
+00019fb0: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00019fc0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00019fd0: 7365 6c66 2e77 7269 7474 656e 5f70 6974  self.written_pit
+00019fe0: 6368 203c 2061 7267 756d 656e 742e 7772  ch < argument.wr
+00019ff0: 6974 7465 6e5f 7069 7463 680a 0a20 2020  itten_pitch..   
+0001a000: 2064 6566 205f 5f72 6570 725f 5f28 7365   def __repr__(se
+0001a010: 6c66 2920 2d3e 2073 7472 3a0a 2020 2020  lf) -> str:.    
+0001a020: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0001a030: 4765 7473 2069 6e74 6572 7072 6574 6572  Gets interpreter
+0001a040: 2072 6570 7265 7365 6e74 6174 696f 6e20   representation 
+0001a050: 6f66 206e 6f74 652d 6865 6164 2e0a 0a20  of note-head... 
+0001a060: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
+0001a070: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+0001a080: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001a090: 6e6f 7465 5f68 6561 6420 3d20 6162 6a61  note_head = abja
+0001a0a0: 642e 4e6f 7465 4865 6164 2831 3329 0a20  d.NoteHead(13). 
+0001a0b0: 2020 2020 2020 2020 2020 203e 3e3e 206e             >>> n
+0001a0c0: 6f74 655f 6865 6164 0a20 2020 2020 2020  ote_head.       
+0001a0d0: 2020 2020 204e 6f74 6548 6561 6428 2263       NoteHead("c
+0001a0e0: 7327 2722 290a 0a20 2020 2020 2020 2022  s''")..        "
+0001a0f0: 2222 0a20 2020 2020 2020 2073 7472 696e  "".        strin
+0001a100: 6773 203d 205b 5d0a 2020 2020 2020 2020  gs = [].        
+0001a110: 6966 2069 7369 6e73 7461 6e63 6528 7365  if isinstance(se
+0001a120: 6c66 2e77 7269 7474 656e 5f70 6974 6368  lf.written_pitch
+0001a130: 2c20 5f70 6974 6368 2e4e 616d 6564 5069  , _pitch.NamedPi
+0001a140: 7463 6829 3a0a 2020 2020 2020 2020 2020  tch):.          
+0001a150: 2020 7374 7269 6e67 203d 2073 656c 662e    string = self.
+0001a160: 7772 6974 7465 6e5f 7069 7463 682e 6e61  written_pitch.na
+0001a170: 6d65 0a20 2020 2020 2020 2020 2020 2073  me.            s
+0001a180: 7472 696e 6773 2e61 7070 656e 6428 7265  trings.append(re
+0001a190: 7072 2873 7472 696e 6729 290a 2020 2020  pr(string)).    
+0001a1a0: 2020 2020 2320 6472 756d 206e 6f74 6520      # drum note 
+0001a1b0: 6865 6164 3a0a 2020 2020 2020 2020 656c  head:.        el
+0001a1c0: 6966 2069 7369 6e73 7461 6e63 6528 7365  if isinstance(se
+0001a1d0: 6c66 2e77 7269 7474 656e 5f70 6974 6368  lf.written_pitch
+0001a1e0: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
+0001a1f0: 2020 2020 7374 7269 6e67 203d 2073 656c      string = sel
+0001a200: 662e 7772 6974 7465 6e5f 7069 7463 680a  f.written_pitch.
+0001a210: 2020 2020 2020 2020 2020 2020 7374 7269              stri
+0001a220: 6e67 732e 6170 7065 6e64 2872 6570 7228  ngs.append(repr(
+0001a230: 7374 7269 6e67 2929 0a20 2020 2020 2020  string)).       
+0001a240: 2069 6620 7365 6c66 2e69 735f 6361 7574   if self.is_caut
+0001a250: 696f 6e61 7279 3a0a 2020 2020 2020 2020  ionary:.        
+0001a260: 2020 2020 7374 7269 6e67 203d 2066 2269      string = f"i
+0001a270: 735f 6361 7574 696f 6e61 7279 3d7b 7365  s_cautionary={se
+0001a280: 6c66 2e69 735f 6361 7574 696f 6e61 7279  lf.is_cautionary
+0001a290: 2172 7d22 0a20 2020 2020 2020 2020 2020  !r}".           
+0001a2a0: 2073 7472 696e 6773 2e61 7070 656e 6428   strings.append(
+0001a2b0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+0001a2c0: 6966 2073 656c 662e 6973 5f66 6f72 6365  if self.is_force
+0001a2d0: 643a 0a20 2020 2020 2020 2020 2020 2073  d:.            s
+0001a2e0: 7472 696e 6720 3d20 6622 6973 5f66 6f72  tring = f"is_for
+0001a2f0: 6365 643d 7b73 656c 662e 6973 5f66 6f72  ced={self.is_for
+0001a300: 6365 6421 727d 220a 2020 2020 2020 2020  ced!r}".        
+0001a310: 2020 2020 7374 7269 6e67 732e 6170 7065      strings.appe
+0001a320: 6e64 2873 7472 696e 6729 0a20 2020 2020  nd(string).     
+0001a330: 2020 2069 6620 7365 6c66 2e69 735f 7061     if self.is_pa
+0001a340: 7265 6e74 6865 7369 7a65 643a 0a20 2020  renthesized:.   
+0001a350: 2020 2020 2020 2020 2073 7472 696e 6720           string 
+0001a360: 3d20 6622 6973 5f70 6172 656e 7468 6573  = f"is_parenthes
+0001a370: 697a 6564 3d7b 7365 6c66 2e69 735f 7061  ized={self.is_pa
+0001a380: 7265 6e74 6865 7369 7a65 6421 727d 220a  renthesized!r}".
+0001a390: 2020 2020 2020 2020 2020 2020 7374 7269              stri
+0001a3a0: 6e67 732e 6170 7065 6e64 2873 7472 696e  ngs.append(strin
+0001a3b0: 6729 0a20 2020 2020 2020 2069 6620 7365  g).        if se
+0001a3c0: 6c66 2e74 7765 616b 733a 0a20 2020 2020  lf.tweaks:.     
+0001a3d0: 2020 2020 2020 2073 7472 696e 6720 3d20         string = 
+0001a3e0: 6622 7477 6561 6b73 3d7b 7365 6c66 2e74  f"tweaks={self.t
+0001a3f0: 7765 616b 7321 727d 220a 2020 2020 2020  weaks!r}".      
+0001a400: 2020 2020 2020 7374 7269 6e67 732e 6170        strings.ap
+0001a410: 7065 6e64 2873 7472 696e 6729 0a20 2020  pend(string).   
+0001a420: 2020 2020 2073 7472 696e 6720 3d20 222c       string = ",
+0001a430: 2022 2e6a 6f69 6e28 7374 7269 6e67 7329   ".join(strings)
+0001a440: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001a450: 6622 7b74 7970 6528 7365 6c66 292e 5f5f  f"{type(self).__
+0001a460: 6e61 6d65 5f5f 7d28 7b73 7472 696e 677d  name__}({string}
+0001a470: 2922 0a0a 2020 2020 6465 6620 5f67 6574  )"..    def _get
+0001a480: 5f63 686f 7264 5f73 7472 696e 6728 7365  _chord_string(se
+0001a490: 6c66 2920 2d3e 2073 7472 3a0a 2020 2020  lf) -> str:.    
+0001a4a0: 2020 2020 7265 7375 6c74 203d 2022 220a      result = "".
+0001a4b0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0001a4c0: 7772 6974 7465 6e5f 7069 7463 683a 0a20  written_pitch:. 
+0001a4d0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+0001a4e0: 7420 3d20 7365 6c66 2e77 7269 7474 656e  t = self.written
+0001a4f0: 5f70 6974 6368 2e6e 616d 650a 2020 2020  _pitch.name.    
+0001a500: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0001a510: 6973 5f66 6f72 6365 643a 0a20 2020 2020  is_forced:.     
+0001a520: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+0001a530: 7420 2b3d 2022 2122 0a20 2020 2020 2020  t += "!".       
+0001a540: 2020 2020 2069 6620 7365 6c66 2e69 735f       if self.is_
+0001a550: 6361 7574 696f 6e61 7279 3a0a 2020 2020  cautionary:.    
+0001a560: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0001a570: 6c74 202b 3d20 223f 220a 2020 2020 2020  lt += "?".      
+0001a580: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
+0001a590: 0a20 2020 2064 6566 205f 6765 745f 6e6f  .    def _get_no
+0001a5a0: 7465 5f68 6561 645f 7374 7269 6e67 7328  te_head_strings(
+0001a5b0: 7365 6c66 293a 0a20 2020 2020 2020 2061  self):.        a
+0001a5c0: 7373 6572 7420 7365 6c66 2e77 7269 7474  ssert self.writt
+0001a5d0: 656e 5f70 6974 6368 0a20 2020 2020 2020  en_pitch.       
+0001a5e0: 2072 6573 756c 7420 3d20 5b5d 0a20 2020   result = [].   
+0001a5f0: 2020 2020 2069 6620 7365 6c66 2e69 735f       if self.is_
+0001a600: 7061 7265 6e74 6865 7369 7a65 643a 0a20  parenthesized:. 
+0001a610: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+0001a620: 742e 6170 7065 6e64 2872 225c 7061 7265  t.append(r"\pare
+0001a630: 6e74 6865 7369 7a65 2229 0a20 2020 2020  nthesize").     
+0001a640: 2020 2066 6f72 2074 7765 616b 2069 6e20     for tweak in 
+0001a650: 736f 7274 6564 2873 656c 662e 7477 6561  sorted(self.twea
+0001a660: 6b73 293a 0a20 2020 2020 2020 2020 2020  ks):.           
+0001a670: 2073 7472 696e 6773 203d 2074 7765 616b   strings = tweak
+0001a680: 2e5f 6c69 7374 5f63 6f6e 7472 6962 7574  ._list_contribut
+0001a690: 696f 6e73 2829 0a20 2020 2020 2020 2020  ions().         
+0001a6a0: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
+0001a6b0: 2873 7472 696e 6773 290a 2020 2020 2020  (strings).      
+0001a6c0: 2020 7772 6974 7465 6e5f 7069 7463 6820    written_pitch 
+0001a6d0: 3d20 7365 6c66 2e77 7269 7474 656e 5f70  = self.written_p
+0001a6e0: 6974 6368 0a20 2020 2020 2020 2069 6620  itch.        if 
+0001a6f0: 6973 696e 7374 616e 6365 2877 7269 7474  isinstance(writt
+0001a700: 656e 5f70 6974 6368 2c20 5f70 6974 6368  en_pitch, _pitch
+0001a710: 2e4e 616d 6564 5069 7463 6829 3a0a 2020  .NamedPitch):.  
+0001a720: 2020 2020 2020 2020 2020 7772 6974 7465            writte
+0001a730: 6e5f 7069 7463 6820 3d20 7772 6974 7465  n_pitch = writte
+0001a740: 6e5f 7069 7463 682e 7369 6d70 6c69 6679  n_pitch.simplify
+0001a750: 2829 0a20 2020 2020 2020 2020 2020 206b  ().            k
+0001a760: 6572 6e65 6c20 3d20 7772 6974 7465 6e5f  ernel = written_
+0001a770: 7069 7463 682e 6e61 6d65 0a20 2020 2020  pitch.name.     
+0001a780: 2020 2023 2064 7275 6d20 6e6f 7465 2068     # drum note h
+0001a790: 6561 643a 0a20 2020 2020 2020 2065 6c73  ead:.        els
+0001a7a0: 653a 0a20 2020 2020 2020 2020 2020 2061  e:.            a
+0001a7b0: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
+0001a7c0: 2877 7269 7474 656e 5f70 6974 6368 2c20  (written_pitch, 
+0001a7d0: 7374 7229 0a20 2020 2020 2020 2020 2020  str).           
+0001a7e0: 206b 6572 6e65 6c20 3d20 7772 6974 7465   kernel = writte
+0001a7f0: 6e5f 7069 7463 680a 2020 2020 2020 2020  n_pitch.        
+0001a800: 6966 2073 656c 662e 6973 5f66 6f72 6365  if self.is_force
+0001a810: 643a 0a20 2020 2020 2020 2020 2020 206b  d:.            k
+0001a820: 6572 6e65 6c20 2b3d 2022 2122 0a20 2020  ernel += "!".   
+0001a830: 2020 2020 2069 6620 7365 6c66 2e69 735f       if self.is_
+0001a840: 6361 7574 696f 6e61 7279 3a0a 2020 2020  cautionary:.    
+0001a850: 2020 2020 2020 2020 6b65 726e 656c 202b          kernel +
+0001a860: 3d20 223f 220a 2020 2020 2020 2020 7265  = "?".        re
+0001a870: 7375 6c74 2e61 7070 656e 6428 6b65 726e  sult.append(kern
+0001a880: 656c 290a 2020 2020 2020 2020 7265 7475  el).        retu
+0001a890: 726e 2072 6573 756c 740a 0a20 2020 2064  rn result..    d
+0001a8a0: 6566 205f 6765 745f 6c69 6c79 706f 6e64  ef _get_lilypond
+0001a8b0: 5f66 6f72 6d61 7428 7365 6c66 2c20 6475  _format(self, du
+0001a8c0: 7261 7469 6f6e 3d4e 6f6e 6529 3a0a 2020  ration=None):.  
+0001a8d0: 2020 2020 2020 7069 6563 6573 203d 2073        pieces = s
+0001a8e0: 656c 662e 5f67 6574 5f6e 6f74 655f 6865  elf._get_note_he
+0001a8f0: 6164 5f73 7472 696e 6773 2829 0a20 2020  ad_strings().   
+0001a900: 2020 2020 2069 6620 6475 7261 7469 6f6e       if duration
+0001a910: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0001a920: 2020 2020 2020 2020 2020 7069 6563 6573            pieces
+0001a930: 5b2d 315d 203d 2070 6965 6365 735b 2d31  [-1] = pieces[-1
+0001a940: 5d20 2b20 6475 7261 7469 6f6e 0a20 2020  ] + duration.   
+0001a950: 2020 2020 2069 6620 7365 6c66 2e61 6c74       if self.alt
+0001a960: 6572 6e61 7469 7665 3a0a 2020 2020 2020  ernative:.      
+0001a970: 2020 2020 2020 7069 6563 6573 203d 205f        pieces = _
+0001a980: 7461 672e 646f 7562 6c65 5f74 6167 2870  tag.double_tag(p
+0001a990: 6965 6365 732c 2073 656c 662e 616c 7465  ieces, self.alte
+0001a9a0: 726e 6174 6976 655b 325d 290a 2020 2020  rnative[2]).    
+0001a9b0: 2020 2020 2020 2020 7069 6563 6573 5f20          pieces_ 
+0001a9c0: 3d20 7365 6c66 2e61 6c74 6572 6e61 7469  = self.alternati
+0001a9d0: 7665 5b30 5d2e 5f67 6574 5f6e 6f74 655f  ve[0]._get_note_
+0001a9e0: 6865 6164 5f73 7472 696e 6773 2829 0a20  head_strings(). 
+0001a9f0: 2020 2020 2020 2020 2020 2069 6620 6475             if du
+0001aa00: 7261 7469 6f6e 2069 7320 6e6f 7420 4e6f  ration is not No
+0001aa10: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0001aa20: 2020 2020 7069 6563 6573 5f5b 2d31 5d20      pieces_[-1] 
+0001aa30: 3d20 7069 6563 6573 5f5b 2d31 5d20 2b20  = pieces_[-1] + 
+0001aa40: 6475 7261 7469 6f6e 0a20 2020 2020 2020  duration.       
+0001aa50: 2020 2020 2070 6965 6365 735f 203d 205f       pieces_ = _
+0001aa60: 7461 672e 646f 7562 6c65 5f74 6167 2870  tag.double_tag(p
+0001aa70: 6965 6365 735f 2c20 7365 6c66 2e61 6c74  ieces_, self.alt
+0001aa80: 6572 6e61 7469 7665 5b31 5d2c 2064 6561  ernative[1], dea
+0001aa90: 6374 6976 6174 653d 5472 7565 290a 2020  ctivate=True).  
+0001aaa0: 2020 2020 2020 2020 2020 7069 6563 6573            pieces
+0001aab0: 2e65 7874 656e 6428 7069 6563 6573 5f29  .extend(pieces_)
+0001aac0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+0001aad0: 3d20 225c 6e22 2e6a 6f69 6e28 7069 6563  = "\n".join(piec
+0001aae0: 6573 290a 2020 2020 2020 2020 7265 7475  es).        retu
+0001aaf0: 726e 2072 6573 756c 740a 0a20 2020 2040  rn result..    @
+0001ab00: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+0001ab10: 2061 6c74 6572 6e61 7469 7665 2873 656c   alternative(sel
+0001ab20: 6629 202d 3e20 7475 706c 655b 224e 6f74  f) -> tuple["Not
+0001ab30: 6548 6561 6422 2c20 5f74 6167 2e54 6167  eHead", _tag.Tag
+0001ab40: 2c20 5f74 6167 2e54 6167 5d3a 0a20 2020  , _tag.Tag]:.   
+0001ab50: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0001ab60: 2047 6574 7320 616e 6420 7365 7473 206e   Gets and sets n
+0001ab70: 6f74 652d 6865 6164 2061 6c74 6572 6e61  ote-head alterna
+0001ab80: 7469 7665 2e0a 0a20 2020 2020 2020 203e  tive...        >
+0001ab90: 3e3e 2069 6d70 6f72 7420 636f 7079 0a0a  >> import copy..
+0001aba0: 2020 2020 2020 2020 2e2e 2020 636f 6e74          ..  cont
+0001abb0: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
 0001abc0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001abd0: 2061 626a 6164 2e73 686f 7728 6e6f 7465   abjad.show(note
-0001abe0: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-0001abf0: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
-0001ac00: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
-0001ac10: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0001ac20: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
-0001ac30: 696c 7970 6f6e 6428 6e6f 7465 290a 2020  ilypond(note).  
-0001ac40: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-0001ac50: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-0001ac60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ac70: 6373 2727 3f34 0a0a 2020 2020 2020 2020  cs''?4..        
-0001ac80: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
-0001ac90: 726e 2073 656c 662e 5f69 735f 6361 7574  rn self._is_caut
-0001aca0: 696f 6e61 7279 0a0a 2020 2020 4069 735f  ionary..    @is_
-0001acb0: 6361 7574 696f 6e61 7279 2e73 6574 7465  cautionary.sette
-0001acc0: 720a 2020 2020 6465 6620 6973 5f63 6175  r.    def is_cau
-0001acd0: 7469 6f6e 6172 7928 7365 6c66 2c20 6172  tionary(self, ar
-0001ace0: 6775 6d65 6e74 293a 0a20 2020 2020 2020  gument):.       
-0001acf0: 2073 656c 662e 5f69 735f 6361 7574 696f   self._is_cautio
-0001ad00: 6e61 7279 203d 2062 6f6f 6c28 6172 6775  nary = bool(argu
-0001ad10: 6d65 6e74 290a 0a20 2020 2040 7072 6f70  ment)..    @prop
-0001ad20: 6572 7479 0a20 2020 2064 6566 2069 735f  erty.    def is_
-0001ad30: 666f 7263 6564 2873 656c 6629 202d 3e20  forced(self) -> 
-0001ad40: 626f 6f6c 3a0a 2020 2020 2020 2020 2222  bool:.        ""
-0001ad50: 220a 2020 2020 2020 2020 4765 7473 2061  ".        Gets a
-0001ad60: 6e64 2073 6574 7320 666f 7263 6564 2061  nd sets forced a
-0001ad70: 6363 6964 656e 7461 6c20 666c 6167 2e0a  ccidental flag..
-0001ad80: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
-0001ad90: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
-0001ada0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0001adb0: 3e20 6e6f 7465 203d 2061 626a 6164 2e4e  > note = abjad.N
-0001adc0: 6f74 6528 2263 2727 2229 0a20 2020 2020  ote("c''").     
-0001add0: 2020 2020 2020 203e 3e3e 206e 6f74 652e         >>> note.
-0001ade0: 6e6f 7465 5f68 6561 642e 6973 5f66 6f72  note_head.is_for
-0001adf0: 6365 6420 3d20 5472 7565 0a20 2020 2020  ced = True.     
-0001ae00: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-0001ae10: 2e73 686f 7728 6e6f 7465 2920 2320 646f  .show(note) # do
-0001ae20: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-0001ae30: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
-0001ae40: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
-0001ae50: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-0001ae60: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-0001ae70: 6428 6e6f 7465 290a 2020 2020 2020 2020  d(note).        
-0001ae80: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-0001ae90: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-0001aea0: 2020 2020 2020 2020 2020 6327 2721 340a            c''!4.
-0001aeb0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001aec0: 206e 6f74 6520 3d20 6162 6a61 642e 4e6f   note = abjad.No
-0001aed0: 7465 2822 6373 2727 2229 0a20 2020 2020  te("cs''").     
-0001aee0: 2020 2020 2020 203e 3e3e 206e 6f74 652e         >>> note.
-0001aef0: 6e6f 7465 5f68 6561 642e 6973 5f66 6f72  note_head.is_for
-0001af00: 6365 6420 3d20 5472 7565 0a20 2020 2020  ced = True.     
-0001af10: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-0001af20: 2e73 686f 7728 6e6f 7465 2920 2320 646f  .show(note) # do
-0001af30: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-0001af40: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
-0001af50: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
-0001af60: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-0001af70: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-0001af80: 6428 6e6f 7465 290a 2020 2020 2020 2020  d(note).        
-0001af90: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-0001afa0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-0001afb0: 2020 2020 2020 2020 2020 6373 2727 2134            cs''!4
-0001afc0: 0a0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-0001afd0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0001afe0: 662e 5f69 735f 666f 7263 6564 0a0a 2020  f._is_forced..  
-0001aff0: 2020 4069 735f 666f 7263 6564 2e73 6574    @is_forced.set
-0001b000: 7465 720a 2020 2020 6465 6620 6973 5f66  ter.    def is_f
-0001b010: 6f72 6365 6428 7365 6c66 2c20 6172 6775  orced(self, argu
-0001b020: 6d65 6e74 293a 0a20 2020 2020 2020 2069  ment):.        i
-0001b030: 6620 6172 6775 6d65 6e74 2069 7320 6e6f  f argument is no
-0001b040: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0001b050: 2020 2020 6172 6775 6d65 6e74 203d 2062      argument = b
-0001b060: 6f6f 6c28 6172 6775 6d65 6e74 290a 2020  ool(argument).  
-0001b070: 2020 2020 2020 7365 6c66 2e5f 6973 5f66        self._is_f
-0001b080: 6f72 6365 6420 3d20 6172 6775 6d65 6e74  orced = argument
-0001b090: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
-0001b0a0: 2020 2020 6465 6620 6973 5f70 6172 656e      def is_paren
-0001b0b0: 7468 6573 697a 6564 2873 656c 6629 202d  thesized(self) -
-0001b0c0: 3e20 626f 6f6c 3a0a 2020 2020 2020 2020  > bool:.        
-0001b0d0: 7222 2222 0a20 2020 2020 2020 2047 6574  r""".        Get
-0001b0e0: 7320 616e 6420 7365 7473 2066 6f72 6365  s and sets force
-0001b0f0: 6420 6163 6369 6465 6e74 616c 2066 6c61  d accidental fla
-0001b100: 672e 0a0a 2020 2020 2020 2020 2e2e 2020  g...        ..  
-0001b110: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-0001b120: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
-0001b130: 203e 3e3e 206e 6f74 6520 3d20 6162 6a61   >>> note = abja
-0001b140: 642e 4e6f 7465 2822 6327 2722 290a 2020  d.Note("c''").  
-0001b150: 2020 2020 2020 2020 2020 3e3e 3e20 6e6f            >>> no
-0001b160: 7465 2e6e 6f74 655f 6865 6164 2e69 735f  te.note_head.is_
-0001b170: 7061 7265 6e74 6865 7369 7a65 6420 3d20  parenthesized = 
-0001b180: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
-0001b190: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-0001b1a0: 6e6f 7465 2920 2320 646f 6374 6573 743a  note) # doctest:
-0001b1b0: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
-0001b1c0: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
-0001b1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b1e0: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
-0001b1f0: 6164 2e6c 696c 7970 6f6e 6428 6e6f 7465  ad.lilypond(note
-0001b200: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001b210: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
-0001b220: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-0001b230: 2020 2020 5c70 6172 656e 7468 6573 697a      \parenthesiz
-0001b240: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0001b250: 2020 6327 2734 0a0a 2020 2020 2020 2020    c''4..        
-0001b260: 2020 2020 3e3e 3e20 6e6f 7465 203d 2061      >>> note = a
-0001b270: 626a 6164 2e4e 6f74 6528 2263 7327 2722  bjad.Note("cs''"
-0001b280: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-0001b290: 3e20 6e6f 7465 2e6e 6f74 655f 6865 6164  > note.note_head
-0001b2a0: 2e69 735f 7061 7265 6e74 6865 7369 7a65  .is_parenthesize
-0001b2b0: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
-0001b2c0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-0001b2d0: 686f 7728 6e6f 7465 2920 2320 646f 6374  how(note) # doct
-0001b2e0: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-0001b2f0: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-0001b300: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-0001b310: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-0001b320: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-0001b330: 6e6f 7465 290a 2020 2020 2020 2020 2020  note).          
-0001b340: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-0001b350: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-0001b360: 2020 2020 2020 2020 5c70 6172 656e 7468          \parenth
-0001b370: 6573 697a 650a 2020 2020 2020 2020 2020  esize.          
-0001b380: 2020 2020 2020 6373 2727 340a 0a20 2020        cs''4..   
-0001b390: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0001b3a0: 2072 6574 7572 6e20 7365 6c66 2e5f 6973   return self._is
-0001b3b0: 5f70 6172 656e 7468 6573 697a 6564 0a0a  _parenthesized..
-0001b3c0: 2020 2020 4069 735f 7061 7265 6e74 6865      @is_parenthe
-0001b3d0: 7369 7a65 642e 7365 7474 6572 0a20 2020  sized.setter.   
-0001b3e0: 2064 6566 2069 735f 7061 7265 6e74 6865   def is_parenthe
-0001b3f0: 7369 7a65 6428 7365 6c66 2c20 6172 6775  sized(self, argu
-0001b400: 6d65 6e74 293a 0a20 2020 2020 2020 2069  ment):.        i
-0001b410: 6620 6172 6775 6d65 6e74 2069 7320 6e6f  f argument is no
-0001b420: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0001b430: 2020 2020 6172 6775 6d65 6e74 203d 2062      argument = b
-0001b440: 6f6f 6c28 6172 6775 6d65 6e74 290a 2020  ool(argument).  
-0001b450: 2020 2020 2020 7365 6c66 2e5f 6973 5f70        self._is_p
-0001b460: 6172 656e 7468 6573 697a 6564 203d 2061  arenthesized = a
-0001b470: 7267 756d 656e 740a 0a20 2020 2040 7072  rgument..    @pr
-0001b480: 6f70 6572 7479 0a20 2020 2064 6566 206e  operty.    def n
-0001b490: 616d 6564 5f70 6974 6368 2873 656c 6629  amed_pitch(self)
-0001b4a0: 202d 3e20 5f70 6974 6368 2e4e 616d 6564   -> _pitch.Named
-0001b4b0: 5069 7463 683a 0a20 2020 2020 2020 2022  Pitch:.        "
-0001b4c0: 2222 0a20 2020 2020 2020 2047 6574 7320  "".        Gets 
-0001b4d0: 6e61 6d65 6420 7069 7463 682e 0a0a 2020  named pitch...  
-0001b4e0: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
-0001b4f0: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-0001b500: 2020 2020 2020 2020 2020 203e 3e3e 206e             >>> n
-0001b510: 6f74 655f 6865 6164 203d 2061 626a 6164  ote_head = abjad
-0001b520: 2e4e 6f74 6548 6561 6428 2263 7327 2722  .NoteHead("cs''"
-0001b530: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-0001b540: 3e20 6e6f 7465 5f68 6561 642e 6e61 6d65  > note_head.name
-0001b550: 645f 7069 7463 680a 2020 2020 2020 2020  d_pitch.        
-0001b560: 2020 2020 4e61 6d65 6450 6974 6368 2822      NamedPitch("
-0001b570: 6373 2727 2229 0a0a 2020 2020 2020 2020  cs''")..        
-0001b580: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
-0001b590: 726e 2073 656c 662e 7772 6974 7465 6e5f  rn self.written_
-0001b5a0: 7069 7463 680a 0a20 2020 2040 7072 6f70  pitch..    @prop
-0001b5b0: 6572 7479 0a20 2020 2064 6566 2077 7269  erty.    def wri
-0001b5c0: 7474 656e 5f70 6974 6368 2873 656c 6629  tten_pitch(self)
-0001b5d0: 202d 3e20 5f70 6974 6368 2e4e 616d 6564   -> _pitch.Named
-0001b5e0: 5069 7463 683a 0a20 2020 2020 2020 2022  Pitch:.        "
-0001b5f0: 2222 0a20 2020 2020 2020 2047 6574 7320  "".        Gets 
-0001b600: 616e 6420 7365 7473 2077 7269 7474 656e  and sets written
-0001b610: 2070 6974 6368 206f 6620 6e6f 7465 2d68   pitch of note-h
-0001b620: 6561 642e 0a0a 2020 2020 2020 2020 2e2e  ead...        ..
-0001b630: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
-0001b640: 616d 706c 650a 0a20 2020 2020 2020 2020  ample..         
-0001b650: 2020 203e 3e3e 206e 6f74 655f 6865 6164     >>> note_head
-0001b660: 203d 2061 626a 6164 2e4e 6f74 6548 6561   = abjad.NoteHea
-0001b670: 6428 2263 7327 2722 290a 2020 2020 2020  d("cs''").      
-0001b680: 2020 2020 2020 3e3e 3e20 6e6f 7465 5f68        >>> note_h
-0001b690: 6561 642e 7772 6974 7465 6e5f 7069 7463  ead.written_pitc
-0001b6a0: 680a 2020 2020 2020 2020 2020 2020 4e61  h.            Na
-0001b6b0: 6d65 6450 6974 6368 2822 6373 2727 2229  medPitch("cs''")
-0001b6c0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0001b6d0: 3e20 6e6f 7465 5f68 6561 6420 3d20 6162  > note_head = ab
-0001b6e0: 6a61 642e 4e6f 7465 4865 6164 2822 6373  jad.NoteHead("cs
-0001b6f0: 2727 2229 0a20 2020 2020 2020 2020 2020  ''").           
-0001b700: 203e 3e3e 206e 6f74 655f 6865 6164 2e77   >>> note_head.w
-0001b710: 7269 7474 656e 5f70 6974 6368 203d 2022  ritten_pitch = "
-0001b720: 6427 2722 0a20 2020 2020 2020 2020 2020  d''".           
-0001b730: 203e 3e3e 206e 6f74 655f 6865 6164 2e77   >>> note_head.w
-0001b740: 7269 7474 656e 5f70 6974 6368 0a20 2020  ritten_pitch.   
-0001b750: 2020 2020 2020 2020 204e 616d 6564 5069           NamedPi
-0001b760: 7463 6828 2264 2727 2229 0a0a 2020 2020  tch("d''")..    
-0001b770: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001b780: 7265 7475 726e 2073 656c 662e 5f77 7269  return self._wri
-0001b790: 7474 656e 5f70 6974 6368 0a0a 2020 2020  tten_pitch..    
-0001b7a0: 4077 7269 7474 656e 5f70 6974 6368 2e73  @written_pitch.s
-0001b7b0: 6574 7465 720a 2020 2020 6465 6620 7772  etter.    def wr
-0001b7c0: 6974 7465 6e5f 7069 7463 6828 7365 6c66  itten_pitch(self
-0001b7d0: 2c20 6172 6775 6d65 6e74 293a 0a20 2020  , argument):.   
-0001b7e0: 2020 2020 2077 7269 7474 656e 5f70 6974       written_pit
-0001b7f0: 6368 203d 205f 7069 7463 682e 4e61 6d65  ch = _pitch.Name
-0001b800: 6450 6974 6368 2861 7267 756d 656e 7429  dPitch(argument)
-0001b810: 0a20 2020 2020 2020 2073 656c 662e 5f77  .        self._w
-0001b820: 7269 7474 656e 5f70 6974 6368 203d 2077  ritten_pitch = w
-0001b830: 7269 7474 656e 5f70 6974 6368 0a20 2020  ritten_pitch.   
-0001b840: 2020 2020 2069 6620 7365 6c66 2e61 6c74       if self.alt
-0001b850: 6572 6e61 7469 7665 2069 7320 6e6f 7420  ernative is not 
-0001b860: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0001b870: 2020 7365 6c66 2e61 6c74 6572 6e61 7469    self.alternati
-0001b880: 7665 5b30 5d2e 7772 6974 7465 6e5f 7069  ve[0].written_pi
-0001b890: 7463 6820 3d20 7772 6974 7465 6e5f 7069  tch = written_pi
-0001b8a0: 7463 680a 0a0a 636c 6173 7320 4472 756d  tch...class Drum
-0001b8b0: 4e6f 7465 4865 6164 284e 6f74 6548 6561  NoteHead(NoteHea
-0001b8c0: 6429 3a0a 2020 2020 2222 220a 2020 2020  d):.    """.    
-0001b8d0: 4472 756d 206e 6f74 652d 6865 6164 2e0a  Drum note-head..
-0001b8e0: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
-0001b8f0: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-0001b900: 2020 2020 2020 3e3e 3e20 6e6f 7465 5f68        >>> note_h
-0001b910: 6561 6420 3d20 6162 6a61 642e 4472 756d  ead = abjad.Drum
-0001b920: 4e6f 7465 4865 6164 2822 736e 6172 6522  NoteHead("snare"
-0001b930: 290a 2020 2020 2020 2020 3e3e 3e20 6e6f  ).        >>> no
-0001b940: 7465 5f68 6561 640a 2020 2020 2020 2020  te_head.        
-0001b950: 4472 756d 4e6f 7465 4865 6164 2827 736e  DrumNoteHead('sn
-0001b960: 6172 6527 290a 0a20 2020 2022 2222 0a0a  are')..    """..
-0001b970: 2020 2020 5f5f 646f 6375 6d65 6e74 6174      __documentat
-0001b980: 696f 6e5f 7365 6374 696f 6e5f 5f20 3d20  ion_section__ = 
-0001b990: 224e 6f74 652d 6865 6164 7322 0a0a 2020  "Note-heads"..  
-0001b9a0: 2020 5f5f 736c 6f74 735f 5f20 3d20 2829    __slots__ = ()
-0001b9b0: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
-0001b9c0: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
-0001b9d0: 2c0a 2020 2020 2020 2020 7772 6974 7465  ,.        writte
-0001b9e0: 6e5f 7069 7463 683a 2073 7472 203d 2022  n_pitch: str = "
-0001b9f0: 736e 6172 6522 2c0a 2020 2020 2020 2020  snare",.        
-0001ba00: 6973 5f63 6175 7469 6f6e 6172 793a 2062  is_cautionary: b
-0001ba10: 6f6f 6c20 3d20 4661 6c73 652c 0a20 2020  ool = False,.   
-0001ba20: 2020 2020 2069 735f 666f 7263 6564 3a20       is_forced: 
-0001ba30: 626f 6f6c 203d 2046 616c 7365 2c0a 2020  bool = False,.  
-0001ba40: 2020 2020 2020 6973 5f70 6172 656e 7468        is_parenth
-0001ba50: 6573 697a 6564 3a20 626f 6f6c 203d 2046  esized: bool = F
-0001ba60: 616c 7365 2c0a 2020 2020 2020 2020 7477  alse,.        tw
-0001ba70: 6561 6b73 3a20 7477 6561 6b73 6d6f 6475  eaks: tweaksmodu
-0001ba80: 6c65 2e54 7765 616b 203d 204e 6f6e 652c  le.Tweak = None,
-0001ba90: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-0001baa0: 2020 2020 2020 2020 4e6f 7465 4865 6164          NoteHead
-0001bab0: 2e5f 5f69 6e69 745f 5f28 0a20 2020 2020  .__init__(.     
-0001bac0: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
-0001bad0: 2020 2020 2020 2020 2077 7269 7474 656e           written
-0001bae0: 5f70 6974 6368 3d4e 6f6e 652c 0a20 2020  _pitch=None,.   
-0001baf0: 2020 2020 2020 2020 2069 735f 6361 7574           is_caut
-0001bb00: 696f 6e61 7279 3d69 735f 6361 7574 696f  ionary=is_cautio
-0001bb10: 6e61 7279 2c0a 2020 2020 2020 2020 2020  nary,.          
-0001bb20: 2020 6973 5f66 6f72 6365 643d 6973 5f66    is_forced=is_f
-0001bb30: 6f72 6365 642c 0a20 2020 2020 2020 2020  orced,.         
-0001bb40: 2020 2069 735f 7061 7265 6e74 6865 7369     is_parenthesi
-0001bb50: 7a65 643d 6973 5f70 6172 656e 7468 6573  zed=is_parenthes
-0001bb60: 697a 6564 2c0a 2020 2020 2020 2020 2020  ized,.          
-0001bb70: 2020 7477 6561 6b73 3d74 7765 616b 732c    tweaks=tweaks,
-0001bb80: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-0001bb90: 2020 2061 7373 6572 7420 7374 7228 7772     assert str(wr
-0001bba0: 6974 7465 6e5f 7069 7463 6829 2069 6e20  itten_pitch) in 
-0001bbb0: 5f6c 7963 6f6e 7374 2e64 7275 6d73 0a20  _lyconst.drums. 
-0001bbc0: 2020 2020 2020 2064 7275 6d5f 7069 7463         drum_pitc
-0001bbd0: 6820 3d20 5f6c 7963 6f6e 7374 2e64 7275  h = _lyconst.dru
-0001bbe0: 6d73 5b73 7472 2877 7269 7474 656e 5f70  ms[str(written_p
-0001bbf0: 6974 6368 295d 0a20 2020 2020 2020 2073  itch)].        s
-0001bc00: 656c 662e 5f77 7269 7474 656e 5f70 6974  elf._written_pit
-0001bc10: 6368 203d 2064 7275 6d5f 7069 7463 680a  ch = drum_pitch.
-0001bc20: 0a0a 636c 6173 7320 4e6f 7465 4865 6164  ..class NoteHead
-0001bc30: 4c69 7374 286c 6973 7429 3a0a 2020 2020  List(list):.    
-0001bc40: 2222 220a 2020 2020 4e6f 7465 2d68 6561  """.    Note-hea
-0001bc50: 6420 6c69 7374 2e0a 0a20 2020 202e 2e20  d list...    .. 
-0001bc60: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
-0001bc70: 6d70 6c65 0a0a 2020 2020 2020 2020 3e3e  mple..        >>
-0001bc80: 3e20 666f 7220 5f20 696e 2061 626a 6164  > for _ in abjad
-0001bc90: 2e4e 6f74 6548 6561 644c 6973 7428 5b31  .NoteHeadList([1
-0001bca0: 312c 2031 302c 2039 5d29 3a20 5f0a 2020  1, 10, 9]): _.  
-0001bcb0: 2020 2020 2020 4e6f 7465 4865 6164 2822        NoteHead("
-0001bcc0: 6127 2229 0a20 2020 2020 2020 204e 6f74  a'").        Not
-0001bcd0: 6548 6561 6428 2262 6627 2229 0a20 2020  eHead("bf'").   
-0001bce0: 2020 2020 204e 6f74 6548 6561 6428 2262       NoteHead("b
-0001bcf0: 2722 290a 0a20 2020 2022 2222 0a0a 2020  '")..    """..  
-0001bd00: 2020 5f5f 646f 6375 6d65 6e74 6174 696f    __documentatio
-0001bd10: 6e5f 7365 6374 696f 6e5f 5f20 3d20 224e  n_section__ = "N
-0001bd20: 6f74 652d 6865 6164 7322 0a0a 2020 2020  ote-heads"..    
-0001bd30: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-0001bd40: 662c 2061 7267 756d 656e 743d 2829 293a  f, argument=()):
-0001bd50: 0a20 2020 2020 2020 206e 6f74 655f 6865  .        note_he
-0001bd60: 6164 7320 3d20 5b4e 6f74 6548 6561 6428  ads = [NoteHead(
-0001bd70: 5f29 2066 6f72 205f 2069 6e20 6172 6775  _) for _ in argu
-0001bd80: 6d65 6e74 5d0a 2020 2020 2020 2020 6c69  ment].        li
-0001bd90: 7374 2e5f 5f69 6e69 745f 5f28 7365 6c66  st.__init__(self
-0001bda0: 2c20 6e6f 7465 5f68 6561 6473 290a 2020  , note_heads).  
-0001bdb0: 2020 2020 2020 7365 6c66 2e73 6f72 7428        self.sort(
-0001bdc0: 290a 0a20 2020 2064 6566 205f 5f73 6574  )..    def __set
-0001bdd0: 6974 656d 5f5f 2873 656c 662c 2069 2c20  item__(self, i, 
-0001bde0: 6172 6775 6d65 6e74 293a 0a20 2020 2020  argument):.     
-0001bdf0: 2020 2022 2222 0a20 2020 2020 2020 2043     """.        C
-0001be00: 6f65 7263 6573 2060 6061 7267 756d 656e  oerces ``argumen
-0001be10: 7460 6020 616e 6420 7365 7473 2061 7420  t`` and sets at 
-0001be20: 6060 6960 602e 0a20 2020 2020 2020 2022  ``i``..        "
-0001be30: 2222 0a20 2020 2020 2020 2069 6620 6973  "".        if is
-0001be40: 696e 7374 616e 6365 2869 2c20 696e 7429  instance(i, int)
-0001be50: 3a0a 2020 2020 2020 2020 2020 2020 6e65  :.            ne
-0001be60: 775f 6974 656d 203d 204e 6f74 6548 6561  w_item = NoteHea
-0001be70: 6428 6172 6775 6d65 6e74 290a 2020 2020  d(argument).    
-0001be80: 2020 2020 2020 2020 6c69 7374 2e5f 5f73          list.__s
-0001be90: 6574 6974 656d 5f5f 2873 656c 662c 2069  etitem__(self, i
-0001bea0: 2c20 6e65 775f 6974 656d 290a 2020 2020  , new_item).    
-0001beb0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-0001bec0: 6e63 6528 692c 2073 6c69 6365 293a 0a20  nce(i, slice):. 
-0001bed0: 2020 2020 2020 2020 2020 206e 6577 5f69             new_i
-0001bee0: 7465 6d73 203d 205b 4e6f 7465 4865 6164  tems = [NoteHead
-0001bef0: 285f 2920 666f 7220 5f20 696e 2061 7267  (_) for _ in arg
-0001bf00: 756d 656e 745d 0a20 2020 2020 2020 2020  ument].         
-0001bf10: 2020 206c 6973 742e 5f5f 7365 7469 7465     list.__setite
-0001bf20: 6d5f 5f28 7365 6c66 2c20 692c 206e 6577  m__(self, i, new
-0001bf30: 5f69 7465 6d73 290a 2020 2020 2020 2020  _items).        
-0001bf40: 7365 6c66 2e73 6f72 7428 290a 0a20 2020  self.sort()..   
-0001bf50: 2064 6566 2061 7070 656e 6428 7365 6c66   def append(self
-0001bf60: 2c20 6974 656d 293a 0a20 2020 2020 2020  , item):.       
-0001bf70: 2022 2222 0a20 2020 2020 2020 2043 6f65   """.        Coe
-0001bf80: 7263 6573 2060 6069 7465 6d60 6020 616e  rces ``item`` an
-0001bf90: 6420 6170 7065 6e64 7320 6e6f 7465 2d68  d appends note-h
-0001bfa0: 6561 642e 0a20 2020 2020 2020 2022 2222  ead..        """
-0001bfb0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-0001bfc0: 7374 616e 6365 2869 7465 6d2c 204e 6f74  stance(item, Not
-0001bfd0: 6548 6561 6429 3a0a 2020 2020 2020 2020  eHead):.        
-0001bfe0: 2020 2020 6e6f 7465 5f68 6561 6420 3d20      note_head = 
-0001bff0: 6974 656d 0a20 2020 2020 2020 2065 6c73  item.        els
-0001c000: 653a 0a20 2020 2020 2020 2020 2020 206e  e:.            n
-0001c010: 6f74 655f 6865 6164 203d 204e 6f74 6548  ote_head = NoteH
-0001c020: 6561 6428 6974 656d 290a 2020 2020 2020  ead(item).      
-0001c030: 2020 6c69 7374 2e61 7070 656e 6428 7365    list.append(se
-0001c040: 6c66 2c20 6e6f 7465 5f68 6561 6429 0a20  lf, note_head). 
-0001c050: 2020 2020 2020 2073 656c 662e 736f 7274         self.sort
-0001c060: 2829 0a0a 2020 2020 6465 6620 6578 7465  ()..    def exte
-0001c070: 6e64 2873 656c 662c 2069 7465 6d73 2920  nd(self, items) 
-0001c080: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0001c090: 2072 2222 220a 2020 2020 2020 2020 4578   r""".        Ex
-0001c0a0: 7465 6e64 7320 6e6f 7465 2d68 6561 6473  tends note-heads
-0001c0b0: 2e0a 0a20 2020 2020 2020 202e 2e20 2063  ...        ..  c
-0001c0c0: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
-0001c0d0: 6c65 0a0a 2020 2020 2020 2020 2020 2020  le..            
-0001c0e0: 3e3e 3e20 6368 6f72 6420 3d20 6162 6a61  >>> chord = abja
-0001c0f0: 642e 4368 6f72 6428 223c 6566 273e 2229  d.Chord("<ef'>")
-0001c100: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001c110: 2061 626a 6164 2e73 686f 7728 6368 6f72   abjad.show(chor
-0001c120: 6429 2023 2064 6f63 7465 7374 3a20 2b53  d) # doctest: +S
-0001c130: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
-0001c140: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
-0001c150: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-0001c160: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
-0001c170: 6c69 6c79 706f 6e64 2863 686f 7264 290a  lilypond(chord).
-0001c180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c190: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-0001c1a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001c1b0: 2020 3c65 6627 3e34 0a0a 2020 2020 2020    <ef'>4..      
-0001c1c0: 2020 2020 2020 3e3e 3e20 6e6f 7465 5f68        >>> note_h
-0001c1d0: 6561 6473 203d 205b 5d0a 2020 2020 2020  eads = [].      
-0001c1e0: 2020 2020 2020 3e3e 3e20 6e6f 7465 5f68        >>> note_h
-0001c1f0: 6561 6420 3d20 6162 6a61 642e 4e6f 7465  ead = abjad.Note
-0001c200: 4865 6164 2822 6373 2727 2229 0a20 2020  Head("cs''").   
-0001c210: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
-0001c220: 6164 2e74 7765 616b 286e 6f74 655f 6865  ad.tweak(note_he
-0001c230: 6164 2c20 7222 5c74 7765 616b 2063 6f6c  ad, r"\tweak col
-0001c240: 6f72 2023 626c 7565 2229 0a20 2020 2020  or #blue").     
-0001c250: 2020 2020 2020 203e 3e3e 206e 6f74 655f         >>> note_
-0001c260: 6865 6164 732e 6170 7065 6e64 286e 6f74  heads.append(not
-0001c270: 655f 6865 6164 290a 2020 2020 2020 2020  e_head).        
-0001c280: 2020 2020 3e3e 3e20 6e6f 7465 5f68 6561      >>> note_hea
-0001c290: 6420 3d20 6162 6a61 642e 4e6f 7465 4865  d = abjad.NoteHe
-0001c2a0: 6164 2822 6627 2722 290a 2020 2020 2020  ad("f''").      
-0001c2b0: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-0001c2c0: 7477 6561 6b28 6e6f 7465 5f68 6561 642c  tweak(note_head,
-0001c2d0: 2072 225c 7477 6561 6b20 636f 6c6f 7220   r"\tweak color 
-0001c2e0: 2367 7265 656e 2229 0a20 2020 2020 2020  #green").       
-0001c2f0: 2020 2020 203e 3e3e 206e 6f74 655f 6865       >>> note_he
-0001c300: 6164 732e 6170 7065 6e64 286e 6f74 655f  ads.append(note_
-0001c310: 6865 6164 290a 2020 2020 2020 2020 2020  head).          
-0001c320: 2020 3e3e 3e20 6368 6f72 642e 6e6f 7465    >>> chord.note
-0001c330: 5f68 6561 6473 2e65 7874 656e 6428 6e6f  _heads.extend(no
-0001c340: 7465 5f68 6561 6473 290a 2020 2020 2020  te_heads).      
-0001c350: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-0001c360: 7368 6f77 2863 686f 7264 2920 2320 646f  show(chord) # do
-0001c370: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-0001c380: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
-0001c390: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
-0001c3a0: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-0001c3b0: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-0001c3c0: 6428 6368 6f72 6429 0a20 2020 2020 2020  d(chord).       
-0001c3d0: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
-0001c3e0: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
-0001c3f0: 2020 2020 2020 2020 2020 203c 0a20 2020             <.   
-0001c400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c410: 2065 6627 0a20 2020 2020 2020 2020 2020   ef'.           
-0001c420: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
-0001c430: 636f 6c6f 7220 2362 6c75 650a 2020 2020  color #blue.    
-0001c440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c450: 6373 2727 0a20 2020 2020 2020 2020 2020  cs''.           
-0001c460: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
-0001c470: 636f 6c6f 7220 2367 7265 656e 0a20 2020  color #green.   
-0001c480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c490: 2066 2727 0a20 2020 2020 2020 2020 2020   f''.           
-0001c4a0: 2020 2020 203e 340a 0a20 2020 2020 2020       >4..       
-0001c4b0: 2022 2222 0a20 2020 2020 2020 206e 6f74   """.        not
-0001c4c0: 655f 6865 6164 7320 3d20 5b5f 2069 6620  e_heads = [_ if 
-0001c4d0: 6973 696e 7374 616e 6365 285f 2c20 4e6f  isinstance(_, No
-0001c4e0: 7465 4865 6164 2920 656c 7365 204e 6f74  teHead) else Not
-0001c4f0: 6548 6561 6428 5f29 2066 6f72 205f 2069  eHead(_) for _ i
-0001c500: 6e20 6974 656d 735d 0a20 2020 2020 2020  n items].       
-0001c510: 206c 6973 742e 6578 7465 6e64 2873 656c   list.extend(sel
-0001c520: 662c 206e 6f74 655f 6865 6164 7329 0a20  f, note_heads). 
-0001c530: 2020 2020 2020 2073 656c 662e 736f 7274         self.sort
-0001c540: 2829 0a0a 2020 2020 6465 6620 6765 7428  ()..    def get(
-0001c550: 7365 6c66 2c20 7069 7463 6829 202d 3e20  self, pitch) -> 
-0001c560: 4e6f 7465 4865 6164 3a0a 2020 2020 2020  NoteHead:.      
-0001c570: 2020 7222 2222 0a20 2020 2020 2020 2047    r""".        G
-0001c580: 6574 7320 6e6f 7465 2d68 6561 6420 6279  ets note-head by
-0001c590: 2060 6070 6974 6368 6060 2e0a 0a20 2020   ``pitch``...   
-0001c5a0: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
-0001c5b0: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-0001c5c0: 2020 2020 2020 2020 2020 4765 7473 206e            Gets n
-0001c5d0: 6f74 652d 6865 6164 2062 7920 7069 7463  ote-head by pitc
-0001c5e0: 6820 6e61 6d65 3a0a 0a20 2020 2020 2020  h name:..       
-0001c5f0: 2020 2020 203e 3e3e 2063 686f 7264 203d       >>> chord =
-0001c600: 2061 626a 6164 2e43 686f 7264 2822 3c65   abjad.Chord("<e
-0001c610: 2720 6373 2727 2066 2727 3e34 2229 0a20  ' cs'' f''>4"). 
-0001c620: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
-0001c630: 626a 6164 2e73 686f 7728 6368 6f72 6429  bjad.show(chord)
-0001c640: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
-0001c650: 500a 0a20 2020 2020 2020 2020 2020 203e  P..            >
-0001c660: 3e3e 206e 6f74 655f 6865 6164 203d 2063  >> note_head = c
-0001c670: 686f 7264 2e6e 6f74 655f 6865 6164 732e  hord.note_heads.
-0001c680: 6765 7428 2265 2722 290a 2020 2020 2020  get("e'").      
-0001c690: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-0001c6a0: 7477 6561 6b28 6e6f 7465 5f68 6561 642c  tweak(note_head,
-0001c6b0: 2072 225c 7477 6561 6b20 636f 6c6f 7220   r"\tweak color 
-0001c6c0: 2372 6564 2229 0a20 2020 2020 2020 2020  #red").         
-0001c6d0: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
-0001c6e0: 7728 6368 6f72 6429 2023 2064 6f63 7465  w(chord) # docte
-0001c6f0: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-0001c700: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0001c710: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001c720: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0001c730: 6162 6a61 642e 6c69 6c79 706f 6e64 2863  abjad.lilypond(c
-0001c740: 686f 7264 290a 2020 2020 2020 2020 2020  hord).          
-0001c750: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-0001c760: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-0001c770: 2020 2020 2020 2020 3c0a 2020 2020 2020          <.      
-0001c780: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-0001c790: 7765 616b 2063 6f6c 6f72 2023 7265 640a  weak color #red.
-0001c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7b0: 2020 2020 6527 0a20 2020 2020 2020 2020      e'.         
-0001c7c0: 2020 2020 2020 2020 2020 2063 7327 270a             cs''.
-0001c7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7e0: 2020 2020 6627 270a 2020 2020 2020 2020      f''.        
-0001c7f0: 2020 2020 2020 2020 3e34 0a0a 2020 2020          >4..    
-0001c800: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-0001c810: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-0001c820: 2020 2020 2020 2020 2047 6574 7320 6e6f           Gets no
-0001c830: 7465 2d68 6561 6420 6279 2070 6974 6368  te-head by pitch
-0001c840: 206e 756d 6265 723a 0a0a 2020 2020 2020   number:..      
-0001c850: 2020 2020 2020 3e3e 3e20 6368 6f72 6420        >>> chord 
-0001c860: 3d20 6162 6a61 642e 4368 6f72 6428 223c  = abjad.Chord("<
-0001c870: 6527 2063 7327 2720 6627 273e 3422 290a  e' cs'' f''>4").
-0001c880: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0001c890: 6162 6a61 642e 7368 6f77 2863 686f 7264  abjad.show(chord
-0001c8a0: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-0001c8b0: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
-0001c8c0: 3e3e 3e20 6e6f 7465 5f68 6561 6420 3d20  >>> note_head = 
-0001c8d0: 6368 6f72 642e 6e6f 7465 5f68 6561 6473  chord.note_heads
-0001c8e0: 2e67 6574 2834 290a 2020 2020 2020 2020  .get(4).        
-0001c8f0: 2020 2020 3e3e 3e20 6162 6a61 642e 7477      >>> abjad.tw
-0001c900: 6561 6b28 6e6f 7465 5f68 6561 642c 2072  eak(note_head, r
-0001c910: 225c 7477 6561 6b20 636f 6c6f 7220 2372  "\tweak color #r
-0001c920: 6564 2229 0a20 2020 2020 2020 2020 2020  ed").           
-0001c930: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-0001c940: 6368 6f72 6429 2023 2064 6f63 7465 7374  chord) # doctest
-0001c950: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-0001c960: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
-0001c970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c980: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-0001c990: 6a61 642e 6c69 6c79 706f 6e64 2863 686f  jad.lilypond(cho
-0001c9a0: 7264 290a 2020 2020 2020 2020 2020 2020  rd).            
-0001c9b0: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
-0001c9c0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-0001c9d0: 2020 2020 2020 3c0a 2020 2020 2020 2020        <.        
-0001c9e0: 2020 2020 2020 2020 2020 2020 5c74 7765              \twe
-0001c9f0: 616b 2063 6f6c 6f72 2023 7265 640a 2020  ak color #red.  
-0001ca00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca10: 2020 6527 0a20 2020 2020 2020 2020 2020    e'.           
-0001ca20: 2020 2020 2020 2020 2063 7327 270a 2020           cs''.  
-0001ca30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca40: 2020 6627 270a 2020 2020 2020 2020 2020    f''.          
-0001ca50: 2020 2020 2020 3e34 0a0a 2020 2020 2020        >4..      
-0001ca60: 2020 5261 6973 6573 206d 6973 7369 6e67    Raises missing
-0001ca70: 206e 6f74 652d 6865 6164 2065 7272 6f72   note-head error
-0001ca80: 2077 6865 6e20 6368 6f72 6420 636f 6e74   when chord cont
-0001ca90: 6169 6e73 206e 6f20 6e6f 7465 2d68 6561  ains no note-hea
-0001caa0: 6420 7769 7468 2060 6070 6974 6368 6060  d with ``pitch``
-0001cab0: 2e0a 0a20 2020 2020 2020 2052 6169 7365  ...        Raise
-0001cac0: 7320 6578 7472 6120 6e6f 7465 2d68 6561  s extra note-hea
-0001cad0: 6420 6572 726f 7220 7768 656e 2063 686f  d error when cho
-0001cae0: 7264 2063 6f6e 7461 696e 7320 6d6f 7265  rd contains more
-0001caf0: 2074 6861 6e20 6f6e 6520 6e6f 7465 2d68   than one note-h
-0001cb00: 6561 6420 7769 7468 0a20 2020 2020 2020  ead with.       
-0001cb10: 2060 6070 6974 6368 6060 2e0a 2020 2020   ``pitch``..    
-0001cb20: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001cb30: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
-0001cb40: 2020 2020 7069 7463 6820 3d20 5f70 6974      pitch = _pit
-0001cb50: 6368 2e4e 616d 6564 5069 7463 6828 7069  ch.NamedPitch(pi
-0001cb60: 7463 6829 0a20 2020 2020 2020 2066 6f72  tch).        for
-0001cb70: 206e 6f74 655f 6865 6164 2069 6e20 7365   note_head in se
-0001cb80: 6c66 3a0a 2020 2020 2020 2020 2020 2020  lf:.            
-0001cb90: 6173 7365 7274 2069 7369 6e73 7461 6e63  assert isinstanc
-0001cba0: 6528 6e6f 7465 5f68 6561 642c 204e 6f74  e(note_head, Not
-0001cbb0: 6548 6561 6429 2c20 7265 7072 286e 6f74  eHead), repr(not
-0001cbc0: 655f 6865 6164 290a 2020 2020 2020 2020  e_head).        
-0001cbd0: 2020 2020 6966 206e 6f74 655f 6865 6164      if note_head
-0001cbe0: 2e77 7269 7474 656e 5f70 6974 6368 203d  .written_pitch =
-0001cbf0: 3d20 7069 7463 683a 0a20 2020 2020 2020  = pitch:.       
-0001cc00: 2020 2020 2020 2020 2072 6573 756c 742e           result.
-0001cc10: 6170 7065 6e64 286e 6f74 655f 6865 6164  append(note_head
-0001cc20: 290a 2020 2020 2020 2020 636f 756e 7420  ).        count 
-0001cc30: 3d20 6c65 6e28 7265 7375 6c74 290a 2020  = len(result).  
-0001cc40: 2020 2020 2020 6966 2063 6f75 6e74 203d        if count =
-0001cc50: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
-0001cc60: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-0001cc70: 7228 226d 6973 7369 6e67 206e 6f74 652d  r("missing note-
-0001cc80: 6865 6164 2e22 290a 2020 2020 2020 2020  head.").        
-0001cc90: 656c 6966 2063 6f75 6e74 203d 3d20 313a  elif count == 1:
-0001cca0: 0a20 2020 2020 2020 2020 2020 206e 6f74  .            not
-0001ccb0: 655f 6865 6164 203d 2072 6573 756c 745b  e_head = result[
-0001ccc0: 305d 0a20 2020 2020 2020 2020 2020 2072  0].            r
-0001ccd0: 6574 7572 6e20 6e6f 7465 5f68 6561 640a  eturn note_head.
-0001cce0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001ccf0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0001cd00: 5661 6c75 6545 7272 6f72 2822 6578 7472  ValueError("extr
-0001cd10: 6120 6e6f 7465 2d68 6561 642e 2229 0a0a  a note-head.")..
-0001cd20: 2020 2020 6465 6620 706f 7028 7365 6c66      def pop(self
-0001cd30: 2c20 693d 2d31 2920 2d3e 204e 6f74 6548  , i=-1) -> NoteH
-0001cd40: 6561 643a 0a20 2020 2020 2020 2072 2222  ead:.        r""
-0001cd50: 220a 2020 2020 2020 2020 506f 7073 206e  ".        Pops n
-0001cd60: 6f74 652d 6865 6164 2060 6069 6060 2e0a  ote-head ``i``..
-0001cd70: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
-0001cd80: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
-0001cd90: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0001cda0: 3e20 6368 6f72 6420 3d20 6162 6a61 642e  > chord = abjad.
-0001cdb0: 4368 6f72 6428 223c 6566 2720 6327 2720  Chord("<ef' c'' 
-0001cdc0: 6627 273e 3422 290a 2020 2020 2020 2020  f''>4").        
-0001cdd0: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
-0001cde0: 6f77 2863 686f 7264 2920 2320 646f 6374  ow(chord) # doct
-0001cdf0: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-0001ce00: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-0001ce10: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-0001ce20: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-0001ce30: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-0001ce40: 6368 6f72 6429 0a20 2020 2020 2020 2020  chord).         
-0001ce50: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
-0001ce60: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
-0001ce70: 2020 2020 2020 2020 203c 6566 2720 6327           <ef' c'
-0001ce80: 2720 6627 273e 340a 0a20 2020 2020 2020  ' f''>4..       
-0001ce90: 2020 2020 203e 3e3e 2063 686f 7264 2e6e       >>> chord.n
-0001cea0: 6f74 655f 6865 6164 732e 706f 7028 3129  ote_heads.pop(1)
-0001ceb0: 0a20 2020 2020 2020 2020 2020 204e 6f74  .            Not
-0001cec0: 6548 6561 6428 2263 2727 2229 0a0a 2020  eHead("c''")..  
-0001ced0: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
-0001cee0: 6a61 642e 7368 6f77 2863 686f 7264 2920  jad.show(chord) 
-0001cef0: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
-0001cf00: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
-0001cf10: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
-0001cf20: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-0001cf30: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-0001cf40: 7970 6f6e 6428 6368 6f72 6429 0a20 2020  ypond(chord).   
-0001cf50: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-0001cf60: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
-0001cf70: 2020 2020 2020 2020 2020 2020 2020 203c                 <
-0001cf80: 6566 2720 6627 273e 340a 0a20 2020 2020  ef' f''>4..     
-0001cf90: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
-0001cfa0: 6574 7572 6e20 6c69 7374 2e70 6f70 2873  eturn list.pop(s
-0001cfb0: 656c 662c 2069 290a 0a20 2020 2064 6566  elf, i)..    def
-0001cfc0: 2072 656d 6f76 6528 7365 6c66 2c20 6974   remove(self, it
-0001cfd0: 656d 293a 0a20 2020 2020 2020 2072 2222  em):.        r""
-0001cfe0: 220a 2020 2020 2020 2020 5265 6d6f 7665  ".        Remove
-0001cff0: 7320 6060 6974 656d 6060 2e0a 0a20 2020  s ``item``...   
-0001d000: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
-0001d010: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-0001d020: 2020 2020 2020 2020 2020 3e3e 3e20 6368            >>> ch
-0001d030: 6f72 6420 3d20 6162 6a61 642e 4368 6f72  ord = abjad.Chor
-0001d040: 6428 223c 6566 2720 6327 2720 6627 273e  d("<ef' c'' f''>
-0001d050: 3422 290a 2020 2020 2020 2020 2020 2020  4").            
-0001d060: 3e3e 3e20 6162 6a61 642e 7368 6f77 2863  >>> abjad.show(c
-0001d070: 686f 7264 2920 2320 646f 6374 6573 743a  hord) # doctest:
-0001d080: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
-0001d090: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
-0001d0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d0b0: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
-0001d0c0: 6164 2e6c 696c 7970 6f6e 6428 6368 6f72  ad.lilypond(chor
-0001d0d0: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
-0001d0e0: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
-0001d0f0: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
-0001d100: 2020 2020 203c 6566 2720 6327 2720 6627       <ef' c'' f'
-0001d110: 273e 340a 0a20 2020 2020 2020 2020 2020  '>4..           
-0001d120: 203e 3e3e 206e 6f74 655f 6865 6164 203d   >>> note_head =
-0001d130: 2063 686f 7264 2e6e 6f74 655f 6865 6164   chord.note_head
-0001d140: 735b 315d 0a20 2020 2020 2020 2020 2020  s[1].           
-0001d150: 203e 3e3e 2063 686f 7264 2e6e 6f74 655f   >>> chord.note_
-0001d160: 6865 6164 732e 7265 6d6f 7665 286e 6f74  heads.remove(not
-0001d170: 655f 6865 6164 290a 2020 2020 2020 2020  e_head).        
-0001d180: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
-0001d190: 6f77 2863 686f 7264 2920 2320 646f 6374  ow(chord) # doct
-0001d1a0: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-0001d1b0: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-0001d1c0: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-0001d1d0: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-0001d1e0: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-0001d1f0: 6368 6f72 6429 0a20 2020 2020 2020 2020  chord).         
-0001d200: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
-0001d210: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
-0001d220: 2020 2020 2020 2020 203c 6566 2720 6627           <ef' f'
-0001d230: 273e 340a 0a20 2020 2020 2020 2022 2222  '>4..        """
-0001d240: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-0001d250: 7374 616e 6365 2869 7465 6d2c 204e 6f74  stance(item, Not
-0001d260: 6548 6561 6429 3a0a 2020 2020 2020 2020  eHead):.        
-0001d270: 2020 2020 6e6f 7465 5f68 6561 6420 3d20      note_head = 
-0001d280: 6974 656d 0a20 2020 2020 2020 2065 6c73  item.        els
-0001d290: 653a 0a20 2020 2020 2020 2020 2020 206e  e:.            n
-0001d2a0: 6f74 655f 6865 6164 203d 204e 6f74 6548  ote_head = NoteH
-0001d2b0: 6561 6428 6974 656d 290a 2020 2020 2020  ead(item).      
-0001d2c0: 2020 6c69 7374 2e72 656d 6f76 6528 7365    list.remove(se
-0001d2d0: 6c66 2c20 6e6f 7465 5f68 6561 6429 0a0a  lf, note_head)..
-0001d2e0: 0a63 6c61 7373 204e 6f74 6528 4c65 6166  .class Note(Leaf
-0001d2f0: 293a 0a20 2020 2022 2222 0a20 2020 204e  ):.    """.    N
-0001d300: 6f74 652e 0a0a 2020 2020 2e2e 2020 636f  ote...    ..  co
-0001d310: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-0001d320: 650a 0a20 2020 2020 2020 203e 3e3e 206e  e..        >>> n
-0001d330: 6f74 6520 3d20 6162 6a61 642e 4e6f 7465  ote = abjad.Note
-0001d340: 2822 6373 2727 382e 2229 0a20 2020 2020  ("cs''8.").     
-0001d350: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
-0001d360: 7728 6e6f 7465 2920 2320 646f 6374 6573  w(note) # doctes
-0001d370: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-0001d380: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
-0001d390: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-0001d3a0: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-0001d3b0: 7970 6f6e 6428 6e6f 7465 290a 2020 2020  ypond(note).    
-0001d3c0: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-0001d3d0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-0001d3e0: 2020 2020 2020 6373 2727 382e 0a0a 2020        cs''8...  
-0001d3f0: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
-0001d400: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
-0001d410: 2020 2052 4547 5245 5353 494f 4e2e 2049     REGRESSION. I
-0001d420: 6e69 7469 616c 697a 6573 2066 726f 6d20  nitializes from 
-0001d430: 6f74 6865 7220 6e6f 7465 3a0a 0a20 2020  other note:..   
-0001d440: 2020 2020 203e 3e3e 206e 6f74 6520 3d20       >>> note = 
-0001d450: 6162 6a61 642e 4e6f 7465 2822 6373 2727  abjad.Note("cs''
-0001d460: 3422 2c20 6d75 6c74 6970 6c69 6572 3d28  4", multiplier=(
-0001d470: 312c 2031 2929 0a20 2020 2020 2020 203e  1, 1)).        >
-0001d480: 3e3e 2061 626a 6164 2e73 686f 7728 6e6f  >> abjad.show(no
-0001d490: 7465 2920 2320 646f 6374 6573 743a 202b  te) # doctest: +
-0001d4a0: 534b 4950 0a0a 2020 2020 2020 2020 2e2e  SKIP..        ..
-0001d4b0: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
-0001d4c0: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-0001d4d0: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-0001d4e0: 6428 6e6f 7465 290a 2020 2020 2020 2020  d(note).        
-0001d4f0: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
-0001d500: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-0001d510: 2020 6373 2727 3420 2a20 310a 0a20 2020    cs''4 * 1..   
-0001d520: 2020 2020 203e 3e3e 206e 6577 5f6e 6f74       >>> new_not
-0001d530: 6520 3d20 6162 6a61 642e 4e6f 7465 286e  e = abjad.Note(n
-0001d540: 6f74 6529 0a20 2020 2020 2020 203e 3e3e  ote).        >>>
-0001d550: 2061 626a 6164 2e73 686f 7728 6e65 775f   abjad.show(new_
-0001d560: 6e6f 7465 2920 2320 646f 6374 6573 743a  note) # doctest:
-0001d570: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
-0001d580: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
-0001d590: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
-0001d5a0: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
-0001d5b0: 6f6e 6428 6e65 775f 6e6f 7465 290a 2020  ond(new_note).  
-0001d5c0: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-0001d5d0: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
-0001d5e0: 2020 2020 2020 2020 6373 2727 3420 2a20          cs''4 * 
-0001d5f0: 310a 0a20 2020 202e 2e20 2063 6f6e 7461  1..    ..  conta
-0001d600: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
-0001d610: 2020 2020 2020 2020 5365 6c65 6374 7320          Selects 
-0001d620: 6c61 6e67 7561 6765 3a0a 0a20 2020 2020  language:..     
-0001d630: 2020 203e 3e3e 2061 626a 6164 2e4e 6f74     >>> abjad.Not
-0001d640: 6528 2264 6f64 2727 382e 222c 206c 616e  e("dod''8.", lan
-0001d650: 6775 6167 653d 2266 7261 6ec3 a761 6973  guage="fran..ais
-0001d660: 2229 0a20 2020 2020 2020 204e 6f74 6528  ").        Note(
-0001d670: 2263 7327 2738 2e22 290a 0a20 2020 2022  "cs''8.")..    "
-0001d680: 2222 0a0a 2020 2020 2323 2320 434c 4153  ""..    ### CLAS
-0001d690: 5320 5641 5249 4142 4c45 5320 2323 230a  S VARIABLES ###.
-0001d6a0: 0a20 2020 205f 5f64 6f63 756d 656e 7461  .    __documenta
-0001d6b0: 7469 6f6e 5f73 6563 7469 6f6e 5f5f 203d  tion_section__ =
-0001d6c0: 2022 4c65 6176 6573 220a 0a20 2020 205f   "Leaves"..    _
-0001d6d0: 5f73 6c6f 7473 5f5f 203d 2028 225f 6e6f  _slots__ = ("_no
-0001d6e0: 7465 5f68 6561 6422 2c29 0a0a 2020 2020  te_head",)..    
-0001d6f0: 2323 2320 494e 4954 4941 4c49 5a45 5220  ### INITIALIZER 
-0001d700: 2323 230a 0a20 2020 2064 6566 205f 5f69  ###..    def __i
-0001d710: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
-0001d720: 656c 662c 0a20 2020 2020 2020 202a 6172  elf,.        *ar
-0001d730: 6775 6d65 6e74 732c 0a20 2020 2020 2020  guments,.       
-0001d740: 206c 616e 6775 6167 653a 2073 7472 203d   language: str =
-0001d750: 2022 656e 676c 6973 6822 2c0a 2020 2020   "english",.    
-0001d760: 2020 2020 6d75 6c74 6970 6c69 6572 3a20      multiplier: 
-0001d770: 5f74 7970 696e 6773 2e44 7572 6174 696f  _typings.Duratio
-0001d780: 6e54 7970 696e 6720 3d20 4e6f 6e65 2c0a  nTyping = None,.
-0001d790: 2020 2020 2020 2020 7461 673a 205f 7461          tag: _ta
-0001d7a0: 672e 5461 6720 3d20 4e6f 6e65 2c0a 2020  g.Tag = None,.  
-0001d7b0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0001d7c0: 2020 2020 2061 7373 6572 7420 6c65 6e28       assert len(
-0001d7d0: 6172 6775 6d65 6e74 7329 2069 6e20 2830  arguments) in (0
-0001d7e0: 2c20 312c 2032 290a 2020 2020 2020 2020  , 1, 2).        
-0001d7f0: 6966 206c 656e 2861 7267 756d 656e 7473  if len(arguments
-0001d800: 2920 3d3d 2031 2061 6e64 2069 7369 6e73  ) == 1 and isins
-0001d810: 7461 6e63 6528 6172 6775 6d65 6e74 735b  tance(arguments[
-0001d820: 305d 2c20 7374 7229 3a0a 2020 2020 2020  0], str):.      
-0001d830: 2020 2020 2020 7374 7269 6e67 203d 2066        string = f
-0001d840: 227b 7b20 7b61 7267 756d 656e 7473 5b30  "{{ {arguments[0
-0001d850: 5d7d 207d 7d22 0a20 2020 2020 2020 2020  ]} }}".         
-0001d860: 2020 2070 6172 7365 6420 3d20 7365 6c66     parsed = self
-0001d870: 2e5f 7061 7273 655f 6c69 6c79 706f 6e64  ._parse_lilypond
-0001d880: 5f73 7472 696e 6728 7374 7269 6e67 2c20  _string(string, 
-0001d890: 6c61 6e67 7561 6765 3d6c 616e 6775 6167  language=languag
-0001d8a0: 6529 0a20 2020 2020 2020 2020 2020 2061  e).            a
-0001d8b0: 7373 6572 7420 6c65 6e28 7061 7273 6564  ssert len(parsed
-0001d8c0: 2920 3d3d 2031 2061 6e64 2069 7369 6e73  ) == 1 and isins
-0001d8d0: 7461 6e63 6528 7061 7273 6564 5b30 5d2c  tance(parsed[0],
-0001d8e0: 204c 6561 6629 0a20 2020 2020 2020 2020   Leaf).         
-0001d8f0: 2020 2061 7267 756d 656e 7473 203d 2074     arguments = t
-0001d900: 7570 6c65 285b 7061 7273 6564 5b30 5d5d  uple([parsed[0]]
-0001d910: 290a 2020 2020 2020 2020 7772 6974 7465  ).        writte
-0001d920: 6e5f 7069 7463 6820 3d20 4e6f 6e65 0a20  n_pitch = None. 
-0001d930: 2020 2020 2020 2069 735f 6361 7574 696f         is_cautio
-0001d940: 6e61 7279 203d 2046 616c 7365 0a20 2020  nary = False.   
-0001d950: 2020 2020 2069 735f 666f 7263 6564 203d       is_forced =
-0001d960: 2046 616c 7365 0a20 2020 2020 2020 2069   False.        i
-0001d970: 735f 7061 7265 6e74 6865 7369 7a65 6420  s_parenthesized 
-0001d980: 3d20 4661 6c73 650a 2020 2020 2020 2020  = False.        
-0001d990: 6966 206c 656e 2861 7267 756d 656e 7473  if len(arguments
-0001d9a0: 2920 3d3d 2031 2061 6e64 2069 7369 6e73  ) == 1 and isins
-0001d9b0: 7461 6e63 6528 6172 6775 6d65 6e74 735b  tance(arguments[
-0001d9c0: 305d 2c20 4c65 6166 293a 0a20 2020 2020  0], Leaf):.     
-0001d9d0: 2020 2020 2020 206c 6561 6620 3d20 6172         leaf = ar
-0001d9e0: 6775 6d65 6e74 735b 305d 0a20 2020 2020  guments[0].     
-0001d9f0: 2020 2020 2020 2077 7269 7474 656e 5f70         written_p
-0001da00: 6974 6368 203d 204e 6f6e 650a 2020 2020  itch = None.    
-0001da10: 2020 2020 2020 2020 7772 6974 7465 6e5f          written_
-0001da20: 6475 7261 7469 6f6e 203d 206c 6561 662e  duration = leaf.
-0001da30: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
-0001da40: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001da50: 6d75 6c74 6970 6c69 6572 2069 7320 4e6f  multiplier is No
-0001da60: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0001da70: 2020 2020 6d75 6c74 6970 6c69 6572 203d      multiplier =
-0001da80: 206c 6561 662e 6d75 6c74 6970 6c69 6572   leaf.multiplier
-0001da90: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001daa0: 6973 696e 7374 616e 6365 286c 6561 662c  isinstance(leaf,
-0001dab0: 204e 6f74 6529 2061 6e64 206c 6561 662e   Note) and leaf.
-0001dac0: 6e6f 7465 5f68 6561 6420 6973 206e 6f74  note_head is not
-0001dad0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0001dae0: 2020 2020 2020 2077 7269 7474 656e 5f70         written_p
-0001daf0: 6974 6368 203d 206c 6561 662e 6e6f 7465  itch = leaf.note
-0001db00: 5f68 6561 642e 7772 6974 7465 6e5f 7069  _head.written_pi
-0001db10: 7463 680a 2020 2020 2020 2020 2020 2020  tch.            
-0001db20: 2020 2020 6973 5f63 6175 7469 6f6e 6172      is_cautionar
-0001db30: 7920 3d20 6c65 6166 2e6e 6f74 655f 6865  y = leaf.note_he
-0001db40: 6164 2e69 735f 6361 7574 696f 6e61 7279  ad.is_cautionary
-0001db50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001db60: 2069 735f 666f 7263 6564 203d 206c 6561   is_forced = lea
-0001db70: 662e 6e6f 7465 5f68 6561 642e 6973 5f66  f.note_head.is_f
-0001db80: 6f72 6365 640a 2020 2020 2020 2020 2020  orced.          
-0001db90: 2020 2020 2020 6973 5f70 6172 656e 7468        is_parenth
-0001dba0: 6573 697a 6564 203d 206c 6561 662e 6e6f  esized = leaf.no
-0001dbb0: 7465 5f68 6561 642e 6973 5f70 6172 656e  te_head.is_paren
-0001dbc0: 7468 6573 697a 6564 0a20 2020 2020 2020  thesized.       
-0001dbd0: 2020 2020 2023 2054 4f44 4f3a 206d 6f76       # TODO: mov
-0001dbe0: 6520 696e 746f 2073 6570 6172 6174 6520  e into separate 
-0001dbf0: 6672 6f6d 5f63 686f 7264 2829 2063 6f6e  from_chord() con
-0001dc00: 7374 7275 6374 6f72 3a0a 2020 2020 2020  structor:.      
-0001dc10: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-0001dc20: 7461 6e63 6528 6c65 6166 2c20 4368 6f72  tance(leaf, Chor
-0001dc30: 6429 3a0a 2020 2020 2020 2020 2020 2020  d):.            
-0001dc40: 2020 2020 7772 6974 7465 6e5f 7069 7463      written_pitc
-0001dc50: 6865 7320 3d20 5b5f 2e77 7269 7474 656e  hes = [_.written
-0001dc60: 5f70 6974 6368 2066 6f72 205f 2069 6e20  _pitch for _ in 
-0001dc70: 6c65 6166 2e6e 6f74 655f 6865 6164 735d  leaf.note_heads]
-0001dc80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001dc90: 2069 6620 7772 6974 7465 6e5f 7069 7463   if written_pitc
-0001dca0: 6865 733a 0a20 2020 2020 2020 2020 2020  hes:.           
-0001dcb0: 2020 2020 2020 2020 2077 7269 7474 656e           written
-0001dcc0: 5f70 6974 6368 203d 2077 7269 7474 656e  _pitch = written
-0001dcd0: 5f70 6974 6368 6573 5b30 5d0a 2020 2020  _pitches[0].    
-0001dce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dcf0: 6973 5f63 6175 7469 6f6e 6172 7920 3d20  is_cautionary = 
-0001dd00: 6c65 6166 2e6e 6f74 655f 6865 6164 735b  leaf.note_heads[
-0001dd10: 305d 2e69 735f 6361 7574 696f 6e61 7279  0].is_cautionary
-0001dd20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001dd30: 2020 2020 2069 735f 666f 7263 6564 203d       is_forced =
-0001dd40: 206c 6561 662e 6e6f 7465 5f68 6561 6473   leaf.note_heads
-0001dd50: 5b30 5d2e 6973 5f66 6f72 6365 640a 2020  [0].is_forced.  
-0001dd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dd70: 2020 6973 5f70 6172 656e 7468 6573 697a    is_parenthesiz
-0001dd80: 6564 203d 206c 6561 662e 6e6f 7465 5f68  ed = leaf.note_h
-0001dd90: 6561 6473 5b30 5d2e 6973 5f70 6172 656e  eads[0].is_paren
-0001dda0: 7468 6573 697a 6564 0a20 2020 2020 2020  thesized.       
-0001ddb0: 2065 6c69 6620 6c65 6e28 6172 6775 6d65   elif len(argume
-0001ddc0: 6e74 7329 203d 3d20 323a 0a20 2020 2020  nts) == 2:.     
-0001ddd0: 2020 2020 2020 2077 7269 7474 656e 5f70         written_p
-0001dde0: 6974 6368 2c20 7772 6974 7465 6e5f 6475  itch, written_du
-0001ddf0: 7261 7469 6f6e 203d 2061 7267 756d 656e  ration = argumen
-0001de00: 7473 0a20 2020 2020 2020 2065 6c69 6620  ts.        elif 
-0001de10: 6c65 6e28 6172 6775 6d65 6e74 7329 203d  len(arguments) =
-0001de20: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
-0001de30: 2077 7269 7474 656e 5f70 6974 6368 203d   written_pitch =
-0001de40: 205f 7069 7463 682e 4e61 6d65 6450 6974   _pitch.NamedPit
-0001de50: 6368 2822 4334 2229 0a20 2020 2020 2020  ch("C4").       
-0001de60: 2020 2020 2077 7269 7474 656e 5f64 7572       written_dur
-0001de70: 6174 696f 6e20 3d20 5f64 7572 6174 696f  ation = _duratio
-0001de80: 6e2e 4475 7261 7469 6f6e 2831 2c20 3429  n.Duration(1, 4)
-0001de90: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-0001dea0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001deb0: 2056 616c 7565 4572 726f 7228 2263 616e   ValueError("can
-0001dec0: 206e 6f74 2069 6e69 7469 616c 697a 6520   not initialize 
-0001ded0: 6e6f 7465 2066 726f 6d20 7b61 7267 756d  note from {argum
-0001dee0: 656e 7473 2172 7d2e 2229 0a20 2020 2020  ents!r}.").     
-0001def0: 2020 204c 6561 662e 5f5f 696e 6974 5f5f     Leaf.__init__
-0001df00: 2873 656c 662c 2077 7269 7474 656e 5f64  (self, written_d
-0001df10: 7572 6174 696f 6e2c 206d 756c 7469 706c  uration, multipl
-0001df20: 6965 723d 6d75 6c74 6970 6c69 6572 2c20  ier=multiplier, 
-0001df30: 7461 673d 7461 6729 0a20 2020 2020 2020  tag=tag).       
-0001df40: 2069 6620 7772 6974 7465 6e5f 7069 7463   if written_pitc
-0001df50: 6820 6973 206e 6f74 204e 6f6e 653a 0a20  h is not None:. 
-0001df60: 2020 2020 2020 2020 2020 2069 6620 7772             if wr
-0001df70: 6974 7465 6e5f 7069 7463 6820 6e6f 7420  itten_pitch not 
-0001df80: 696e 205f 6c79 636f 6e73 742e 6472 756d  in _lyconst.drum
-0001df90: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-0001dfa0: 2020 2073 656c 662e 6e6f 7465 5f68 6561     self.note_hea
-0001dfb0: 6420 3d20 4e6f 7465 4865 6164 280a 2020  d = NoteHead(.  
-0001dfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dfd0: 2020 7772 6974 7465 6e5f 7069 7463 683d    written_pitch=
-0001dfe0: 7772 6974 7465 6e5f 7069 7463 682c 0a20  written_pitch,. 
-0001dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e000: 2020 2069 735f 6361 7574 696f 6e61 7279     is_cautionary
-0001e010: 3d69 735f 6361 7574 696f 6e61 7279 2c0a  =is_cautionary,.
-0001e020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e030: 2020 2020 6973 5f66 6f72 6365 643d 6973      is_forced=is
-0001e040: 5f66 6f72 6365 642c 0a20 2020 2020 2020  _forced,.       
-0001e050: 2020 2020 2020 2020 2020 2020 2069 735f               is_
-0001e060: 7061 7265 6e74 6865 7369 7a65 643d 6973  parenthesized=is
-0001e070: 5f70 6172 656e 7468 6573 697a 6564 2c0a  _parenthesized,.
-0001e080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e090: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0001e0a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0001e0b0: 2020 2020 6173 7365 7274 2069 7369 6e73      assert isins
-0001e0c0: 7461 6e63 6528 7772 6974 7465 6e5f 7069  tance(written_pi
-0001e0d0: 7463 682c 2073 7472 292c 2072 6570 7228  tch, str), repr(
-0001e0e0: 7772 6974 7465 6e5f 7069 7463 6829 0a20  written_pitch). 
-0001e0f0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001e100: 656c 662e 6e6f 7465 5f68 6561 6420 3d20  elf.note_head = 
-0001e110: 4472 756d 4e6f 7465 4865 6164 280a 2020  DrumNoteHead(.  
-0001e120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e130: 2020 7772 6974 7465 6e5f 7069 7463 683d    written_pitch=
-0001e140: 7772 6974 7465 6e5f 7069 7463 682c 0a20  written_pitch,. 
-0001e150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e160: 2020 2069 735f 6361 7574 696f 6e61 7279     is_cautionary
-0001e170: 3d69 735f 6361 7574 696f 6e61 7279 2c0a  =is_cautionary,.
-0001e180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e190: 2020 2020 6973 5f66 6f72 6365 643d 6973      is_forced=is
-0001e1a0: 5f66 6f72 6365 642c 0a20 2020 2020 2020  _forced,.       
-0001e1b0: 2020 2020 2020 2020 2020 2020 2069 735f               is_
-0001e1c0: 7061 7265 6e74 6865 7369 7a65 643d 6973  parenthesized=is
-0001e1d0: 5f70 6172 656e 7468 6573 697a 6564 2c0a  _parenthesized,.
-0001e1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e1f0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0001e200: 2069 7369 6e73 7461 6e63 6528 7772 6974   isinstance(writ
-0001e210: 7465 6e5f 7069 7463 682c 204e 6f74 6548  ten_pitch, NoteH
-0001e220: 6561 6429 3a0a 2020 2020 2020 2020 2020  ead):.          
-0001e230: 2020 2020 2020 7365 6c66 2e6e 6f74 655f        self.note_
-0001e240: 6865 6164 2e74 7765 616b 7320 3d20 636f  head.tweaks = co
-0001e250: 7079 2e64 6565 7063 6f70 7928 7772 6974  py.deepcopy(writ
-0001e260: 7465 6e5f 7069 7463 682e 7477 6561 6b73  ten_pitch.tweaks
-0001e270: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-0001e280: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001e290: 2e5f 6e6f 7465 5f68 6561 6420 3d20 4e6f  ._note_head = No
-0001e2a0: 6e65 0a20 2020 2020 2020 2069 6620 6c65  ne.        if le
-0001e2b0: 6e28 6172 6775 6d65 6e74 7329 203d 3d20  n(arguments) == 
-0001e2c0: 3120 616e 6420 6973 696e 7374 616e 6365  1 and isinstance
-0001e2d0: 2861 7267 756d 656e 7473 5b30 5d2c 204c  (arguments[0], L
-0001e2e0: 6561 6629 3a0a 2020 2020 2020 2020 2020  eaf):.          
-0001e2f0: 2020 7365 6c66 2e5f 636f 7079 5f6f 7665    self._copy_ove
-0001e300: 7272 6964 655f 616e 645f 7365 745f 6672  rride_and_set_fr
-0001e310: 6f6d 5f6c 6561 6628 6172 6775 6d65 6e74  om_leaf(argument
-0001e320: 735b 305d 290a 0a20 2020 2023 2323 2053  s[0])..    ### S
-0001e330: 5045 4349 414c 204d 4554 484f 4453 2023  PECIAL METHODS #
-0001e340: 2323 0a0a 2020 2020 6465 6620 5f5f 636f  ##..    def __co
-0001e350: 7079 5f5f 2873 656c 662c 202a 6172 6775  py__(self, *argu
-0001e360: 6d65 6e74 7329 202d 3e20 224e 6f74 6522  ments) -> "Note"
-0001e370: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-0001e380: 2020 2020 2020 436f 7069 6573 206e 6f74        Copies not
-0001e390: 652e 0a20 2020 2020 2020 2022 2222 0a20  e..        """. 
-0001e3a0: 2020 2020 2020 206e 6577 5f6e 6f74 6520         new_note 
-0001e3b0: 3d20 4c65 6166 2e5f 5f63 6f70 795f 5f28  = Leaf.__copy__(
-0001e3c0: 7365 6c66 2c20 2a61 7267 756d 656e 7473  self, *arguments
-0001e3d0: 290a 2020 2020 2020 2020 6e65 775f 6e6f  ).        new_no
-0001e3e0: 7465 2e6e 6f74 655f 6865 6164 203d 2063  te.note_head = c
-0001e3f0: 6f70 792e 636f 7079 2873 656c 662e 6e6f  opy.copy(self.no
-0001e400: 7465 5f68 6561 6429 0a20 2020 2020 2020  te_head).       
-0001e410: 2072 6574 7572 6e20 6e65 775f 6e6f 7465   return new_note
-0001e420: 0a0a 2020 2020 6465 6620 5f5f 6765 746e  ..    def __getn
-0001e430: 6577 6172 6773 5f5f 2873 656c 6629 202d  ewargs__(self) -
-0001e440: 3e20 7475 706c 653a 0a20 2020 2020 2020  > tuple:.       
-0001e450: 2022 2222 0a20 2020 2020 2020 2047 6574   """.        Get
-0001e460: 7320 6e65 7720 6172 6775 6d65 6e74 732e  s new arguments.
-0001e470: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0001e480: 2020 2020 2072 6574 7572 6e20 2873 656c       return (sel
-0001e490: 662e 7772 6974 7465 6e5f 7069 7463 682c  f.written_pitch,
-0001e4a0: 2073 656c 662e 7772 6974 7465 6e5f 6475   self.written_du
-0001e4b0: 7261 7469 6f6e 290a 0a20 2020 2023 2323  ration)..    ###
-0001e4c0: 2050 5249 5641 5445 204d 4554 484f 4453   PRIVATE METHODS
-0001e4d0: 2023 2323 0a0a 2020 2020 6465 6620 5f67   ###..    def _g
-0001e4e0: 6574 5f62 6f64 7928 7365 6c66 293a 0a20  et_body(self):. 
-0001e4f0: 2020 2020 2020 2064 7572 6174 696f 6e20         duration 
-0001e500: 3d20 7365 6c66 2e5f 6765 745f 666f 726d  = self._get_form
-0001e510: 6174 7465 645f 6475 7261 7469 6f6e 2829  atted_duration()
-0001e520: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-0001e530: 2e6e 6f74 655f 6865 6164 2069 7320 6e6f  .note_head is no
-0001e540: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0001e550: 2020 2020 7374 7269 6e67 203d 2073 656c      string = sel
-0001e560: 662e 6e6f 7465 5f68 6561 642e 5f67 6574  f.note_head._get
-0001e570: 5f6c 696c 7970 6f6e 645f 666f 726d 6174  _lilypond_format
-0001e580: 2864 7572 6174 696f 6e3d 6475 7261 7469  (duration=durati
-0001e590: 6f6e 290a 2020 2020 2020 2020 656c 7365  on).        else
-0001e5a0: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
-0001e5b0: 7269 6e67 203d 2064 7572 6174 696f 6e0a  ring = duration.
-0001e5c0: 2020 2020 2020 2020 7265 7475 726e 205b          return [
-0001e5d0: 7374 7269 6e67 5d0a 0a20 2020 2064 6566  string]..    def
-0001e5e0: 205f 6765 745f 636f 6d70 6163 745f 7265   _get_compact_re
-0001e5f0: 7072 6573 656e 7461 7469 6f6e 2873 656c  presentation(sel
-0001e600: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
-0001e610: 726e 2073 656c 662e 5f67 6574 5f62 6f64  rn self._get_bod
-0001e620: 7928 295b 305d 0a0a 2020 2020 2323 2320  y()[0]..    ### 
-0001e630: 5055 424c 4943 2050 524f 5045 5254 4945  PUBLIC PROPERTIE
-0001e640: 5320 2323 230a 0a20 2020 2040 7072 6f70  S ###..    @prop
-0001e650: 6572 7479 0a20 2020 2064 6566 206e 6f74  erty.    def not
-0001e660: 655f 6865 6164 2873 656c 6629 202d 3e20  e_head(self) -> 
-0001e670: 4e6f 7465 4865 6164 207c 204e 6f6e 653a  NoteHead | None:
-0001e680: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0001e690: 2020 2020 2047 6574 7320 616e 6420 7365       Gets and se
-0001e6a0: 7473 206e 6f74 652d 6865 6164 2e0a 0a20  ts note-head... 
-0001e6b0: 2020 2020 2020 202e 2e20 636f 6e74 6169         .. contai
-0001e6c0: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-0001e6d0: 2020 2020 2020 2020 2020 203e 3e3e 206e             >>> n
-0001e6e0: 6f74 6520 3d20 6162 6a61 642e 4e6f 7465  ote = abjad.Note
-0001e6f0: 2822 6373 2727 382e 2229 0a20 2020 2020  ("cs''8.").     
-0001e700: 2020 2020 2020 203e 3e3e 206e 6f74 652e         >>> note.
-0001e710: 6e6f 7465 5f68 6561 640a 2020 2020 2020  note_head.      
-0001e720: 2020 2020 2020 4e6f 7465 4865 6164 2822        NoteHead("
-0001e730: 6373 2727 2229 0a0a 2020 2020 2020 2020  cs''")..        
-0001e740: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
-0001e750: 6f77 286e 6f74 6529 2023 2064 6f63 7465  ow(note) # docte
-0001e760: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-0001e770: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0001e780: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001e790: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0001e7a0: 6162 6a61 642e 6c69 6c79 706f 6e64 286e  abjad.lilypond(n
-0001e7b0: 6f74 6529 0a20 2020 2020 2020 2020 2020  ote).           
-0001e7c0: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-0001e7d0: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-0001e7e0: 2020 2020 2020 2063 7327 2738 2e0a 0a20         cs''8... 
-0001e7f0: 2020 2020 2020 2020 2020 203e 3e3e 206e             >>> n
-0001e800: 6f74 652e 6e6f 7465 5f68 6561 6420 3d20  ote.note_head = 
-0001e810: 2744 3527 0a20 2020 2020 2020 2020 2020  'D5'.           
-0001e820: 203e 3e3e 206e 6f74 652e 6e6f 7465 5f68   >>> note.note_h
-0001e830: 6561 640a 2020 2020 2020 2020 2020 2020  ead.            
-0001e840: 4e6f 7465 4865 6164 2822 6427 2722 290a  NoteHead("d''").
-0001e850: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0001e860: 2061 626a 6164 2e73 686f 7728 6e6f 7465   abjad.show(note
-0001e870: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-0001e880: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
-0001e890: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
-0001e8a0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0001e8b0: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
-0001e8c0: 696c 7970 6f6e 6428 6e6f 7465 290a 2020  ilypond(note).  
-0001e8d0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-0001e8e0: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-0001e8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e900: 6427 2738 2e0a 0a20 2020 2020 2020 2022  d''8...        "
-0001e910: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
-0001e920: 6e20 7365 6c66 2e5f 6e6f 7465 5f68 6561  n self._note_hea
-0001e930: 640a 0a20 2020 2040 6e6f 7465 5f68 6561  d..    @note_hea
-0001e940: 642e 7365 7474 6572 0a20 2020 2064 6566  d.setter.    def
-0001e950: 206e 6f74 655f 6865 6164 2873 656c 662c   note_head(self,
-0001e960: 2061 7267 756d 656e 7429 3a0a 2020 2020   argument):.    
-0001e970: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0001e980: 6528 6172 6775 6d65 6e74 2c20 7479 7065  e(argument, type
-0001e990: 284e 6f6e 6529 293a 0a20 2020 2020 2020  (None)):.       
-0001e9a0: 2020 2020 2073 656c 662e 5f6e 6f74 655f       self._note_
-0001e9b0: 6865 6164 203d 204e 6f6e 650a 2020 2020  head = None.    
-0001e9c0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-0001e9d0: 6e63 6528 6172 6775 6d65 6e74 2c20 4e6f  nce(argument, No
-0001e9e0: 7465 4865 6164 293a 0a20 2020 2020 2020  teHead):.       
-0001e9f0: 2020 2020 2073 656c 662e 5f6e 6f74 655f       self._note_
-0001ea00: 6865 6164 203d 2061 7267 756d 656e 740a  head = argument.
-0001ea10: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001ea20: 2020 2020 2020 2020 2020 6e6f 7465 5f68            note_h
-0001ea30: 6561 6420 3d20 4e6f 7465 4865 6164 2877  ead = NoteHead(w
-0001ea40: 7269 7474 656e 5f70 6974 6368 3d61 7267  ritten_pitch=arg
-0001ea50: 756d 656e 7429 0a20 2020 2020 2020 2020  ument).         
-0001ea60: 2020 2073 656c 662e 5f6e 6f74 655f 6865     self._note_he
-0001ea70: 6164 203d 206e 6f74 655f 6865 6164 0a0a  ad = note_head..
-0001ea80: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
-0001ea90: 2020 6465 6620 7772 6974 7465 6e5f 6475    def written_du
-0001eaa0: 7261 7469 6f6e 2873 656c 6629 202d 3e20  ration(self) -> 
-0001eab0: 5f64 7572 6174 696f 6e2e 4475 7261 7469  _duration.Durati
-0001eac0: 6f6e 3a0a 2020 2020 2020 2020 2222 220a  on:.        """.
-0001ead0: 2020 2020 2020 2020 4765 7473 2061 6e64          Gets and
-0001eae0: 2073 6574 7320 7772 6974 7465 6e20 6475   sets written du
-0001eaf0: 7261 7469 6f6e 2e0a 0a20 2020 2020 2020  ration...       
-0001eb00: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
-0001eb10: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
-0001eb20: 2020 2020 2020 3e3e 3e20 6e6f 7465 203d        >>> note =
-0001eb30: 2061 626a 6164 2e4e 6f74 6528 2263 7327   abjad.Note("cs'
-0001eb40: 2738 2e22 290a 2020 2020 2020 2020 2020  '8.").          
-0001eb50: 2020 3e3e 3e20 6e6f 7465 2e77 7269 7474    >>> note.writt
-0001eb60: 656e 5f64 7572 6174 696f 6e0a 2020 2020  en_duration.    
-0001eb70: 2020 2020 2020 2020 4475 7261 7469 6f6e          Duration
-0001eb80: 2833 2c20 3136 290a 0a20 2020 2020 2020  (3, 16)..       
-0001eb90: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-0001eba0: 686f 7728 6e6f 7465 2920 2320 646f 6374  how(note) # doct
-0001ebb0: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-0001ebc0: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-0001ebd0: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-0001ebe0: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-0001ebf0: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-0001ec00: 6e6f 7465 290a 2020 2020 2020 2020 2020  note).          
-0001ec10: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-0001ec20: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-0001ec30: 2020 2020 2020 2020 6373 2727 382e 0a0a          cs''8...
-0001ec40: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0001ec50: 6e6f 7465 2e77 7269 7474 656e 5f64 7572  note.written_dur
-0001ec60: 6174 696f 6e20 3d20 2831 2c20 3136 290a  ation = (1, 16).
-0001ec70: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0001ec80: 6e6f 7465 2e77 7269 7474 656e 5f64 7572  note.written_dur
-0001ec90: 6174 696f 6e0a 2020 2020 2020 2020 2020  ation.          
-0001eca0: 2020 4475 7261 7469 6f6e 2831 2c20 3136    Duration(1, 16
-0001ecb0: 290a 0a20 2020 2020 2020 2020 2020 203e  )..            >
-0001ecc0: 3e3e 2061 626a 6164 2e73 686f 7728 6e6f  >> abjad.show(no
-0001ecd0: 7465 2920 2320 646f 6374 6573 743a 202b  te) # doctest: +
-0001ece0: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
-0001ecf0: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
-0001ed00: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-0001ed10: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-0001ed20: 2e6c 696c 7970 6f6e 6428 6e6f 7465 290a  .lilypond(note).
-0001ed30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ed40: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-0001ed50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001ed60: 2020 6373 2727 3136 0a0a 2020 2020 2020    cs''16..      
-0001ed70: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
-0001ed80: 7475 726e 2073 7570 6572 2829 2e77 7269  turn super().wri
-0001ed90: 7474 656e 5f64 7572 6174 696f 6e0a 0a20  tten_duration.. 
-0001eda0: 2020 2040 7772 6974 7465 6e5f 6475 7261     @written_dura
-0001edb0: 7469 6f6e 2e73 6574 7465 720a 2020 2020  tion.setter.    
-0001edc0: 6465 6620 7772 6974 7465 6e5f 6475 7261  def written_dura
-0001edd0: 7469 6f6e 2873 656c 662c 2061 7267 756d  tion(self, argum
-0001ede0: 656e 7429 3a0a 2020 2020 2020 2020 7265  ent):.        re
-0001edf0: 7475 726e 204c 6561 662e 7772 6974 7465  turn Leaf.writte
-0001ee00: 6e5f 6475 7261 7469 6f6e 2e66 7365 7428  n_duration.fset(
-0001ee10: 7365 6c66 2c20 6172 6775 6d65 6e74 290a  self, argument).
-0001ee20: 0a20 2020 2023 2054 4f44 4f3a 2063 6861  .    # TODO: cha
-0001ee30: 6e67 6520 4e6f 7465 2061 6c77 6179 7320  nge Note always 
-0001ee40: 746f 2068 6176 6520 6120 6e6f 7465 2068  to have a note h
-0001ee50: 6561 640a 2020 2020 4070 726f 7065 7274  ead.    @propert
-0001ee60: 790a 2020 2020 6465 6620 7772 6974 7465  y.    def writte
-0001ee70: 6e5f 7069 7463 6828 7365 6c66 2920 2d3e  n_pitch(self) ->
-0001ee80: 205f 7069 7463 682e 4e61 6d65 6450 6974   _pitch.NamedPit
-0001ee90: 6368 207c 204e 6f6e 653a 0a20 2020 2020  ch | None:.     
-0001eea0: 2020 2022 2222 0a20 2020 2020 2020 2047     """.        G
-0001eeb0: 6574 7320 616e 6420 7365 7473 2077 7269  ets and sets wri
-0001eec0: 7474 656e 2070 6974 6368 2e0a 0a20 2020  tten pitch...   
-0001eed0: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
-0001eee0: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-0001eef0: 2020 2020 2020 2020 2020 3e3e 3e20 6e6f            >>> no
-0001ef00: 7465 203d 2061 626a 6164 2e4e 6f74 6528  te = abjad.Note(
-0001ef10: 2263 7327 2738 2e22 290a 2020 2020 2020  "cs''8.").      
-0001ef20: 2020 2020 2020 3e3e 3e20 6e6f 7465 2e77        >>> note.w
-0001ef30: 7269 7474 656e 5f70 6974 6368 0a20 2020  ritten_pitch.   
-0001ef40: 2020 2020 2020 2020 204e 616d 6564 5069           NamedPi
-0001ef50: 7463 6828 2263 7327 2722 290a 0a20 2020  tch("cs''")..   
-0001ef60: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
-0001ef70: 6164 2e73 686f 7728 6e6f 7465 2920 2320  ad.show(note) # 
-0001ef80: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
-0001ef90: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
-0001efa0: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
-0001efb0: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
-0001efc0: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
-0001efd0: 6f6e 6428 6e6f 7465 290a 2020 2020 2020  ond(note).      
-0001efe0: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-0001eff0: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
-0001f000: 2020 2020 2020 2020 2020 2020 6373 2727              cs''
-0001f010: 382e 0a0a 2020 2020 2020 2020 2020 2020  8...            
-0001f020: 3e3e 3e20 6e6f 7465 2e77 7269 7474 656e  >>> note.written
-0001f030: 5f70 6974 6368 203d 2027 4435 270a 2020  _pitch = 'D5'.  
-0001f040: 2020 2020 2020 2020 2020 3e3e 3e20 6e6f            >>> no
-0001f050: 7465 2e77 7269 7474 656e 5f70 6974 6368  te.written_pitch
-0001f060: 0a20 2020 2020 2020 2020 2020 204e 616d  .            Nam
-0001f070: 6564 5069 7463 6828 2264 2727 2229 0a0a  edPitch("d''")..
-0001f080: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0001f090: 6162 6a61 642e 7368 6f77 286e 6f74 6529  abjad.show(note)
-0001f0a0: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
-0001f0b0: 500a 0a20 2020 2020 2020 2020 2020 202e  P..            .
-0001f0c0: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
-0001f0d0: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
-0001f0e0: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
-0001f0f0: 6c79 706f 6e64 286e 6f74 6529 0a20 2020  lypond(note).   
-0001f100: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-0001f110: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
-0001f120: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0001f130: 2727 382e 0a0a 2020 2020 2020 2020 2222  ''8...        ""
-0001f140: 220a 2020 2020 2020 2020 6966 2073 656c  ".        if sel
-0001f150: 662e 6e6f 7465 5f68 6561 6420 6973 206e  f.note_head is n
-0001f160: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0001f170: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0001f180: 2e6e 6f74 655f 6865 6164 2e77 7269 7474  .note_head.writt
-0001f190: 656e 5f70 6974 6368 0a20 2020 2020 2020  en_pitch.       
-0001f1a0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0001f1b0: 2020 2072 6574 7572 6e20 4e6f 6e65 0a0a     return None..
-0001f1c0: 2020 2020 4077 7269 7474 656e 5f70 6974      @written_pit
-0001f1d0: 6368 2e73 6574 7465 720a 2020 2020 6465  ch.setter.    de
-0001f1e0: 6620 7772 6974 7465 6e5f 7069 7463 6828  f written_pitch(
-0001f1f0: 7365 6c66 2c20 6172 6775 6d65 6e74 293a  self, argument):
-0001f200: 0a20 2020 2020 2020 2069 6620 6172 6775  .        if argu
-0001f210: 6d65 6e74 2069 7320 4e6f 6e65 3a0a 2020  ment is None:.  
-0001f220: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-0001f230: 662e 6e6f 7465 5f68 6561 6420 6973 206e  f.note_head is n
-0001f240: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0001f250: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
-0001f260: 7465 5f68 6561 642e 7772 6974 7465 6e5f  te_head.written_
-0001f270: 7069 7463 6820 3d20 4e6f 6e65 0a20 2020  pitch = None.   
-0001f280: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0001f290: 2020 2020 2020 2069 6620 7365 6c66 2e6e         if self.n
-0001f2a0: 6f74 655f 6865 6164 2069 7320 4e6f 6e65  ote_head is None
-0001f2b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001f2c0: 2020 7365 6c66 2e6e 6f74 655f 6865 6164    self.note_head
-0001f2d0: 203d 204e 6f74 6548 6561 6428 7365 6c66   = NoteHead(self
-0001f2e0: 2c20 7772 6974 7465 6e5f 7069 7463 683d  , written_pitch=
-0001f2f0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
-0001f300: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0001f310: 2020 2020 2020 2020 7069 7463 6820 3d20          pitch = 
-0001f320: 5f70 6974 6368 2e4e 616d 6564 5069 7463  _pitch.NamedPitc
-0001f330: 6828 6172 6775 6d65 6e74 290a 2020 2020  h(argument).    
-0001f340: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001f350: 2e6e 6f74 655f 6865 6164 2e77 7269 7474  .note_head.writt
-0001f360: 656e 5f70 6974 6368 203d 2070 6974 6368  en_pitch = pitch
-0001f370: 0a0a 2020 2020 2323 2320 5055 424c 4943  ..    ### PUBLIC
-0001f380: 204d 4554 484f 4453 2023 2323 0a0a 2020   METHODS ###..  
-0001f390: 2020 4073 7461 7469 636d 6574 686f 640a    @staticmethod.
-0001f3a0: 2020 2020 6465 6620 6672 6f6d 5f70 6974      def from_pit
-0001f3b0: 6368 5f61 6e64 5f64 7572 6174 696f 6e28  ch_and_duration(
-0001f3c0: 7069 7463 682c 2064 7572 6174 696f 6e29  pitch, duration)
-0001f3d0: 202d 3e20 224e 6f74 6522 3a0a 2020 2020   -> "Note":.    
-0001f3e0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001f3f0: 4d61 6b65 7320 6e6f 7465 2066 726f 6d20  Makes note from 
-0001f400: 6060 7069 7463 6860 6020 616e 6420 6060  ``pitch`` and ``
-0001f410: 6475 7261 7469 6f6e 6060 2e0a 0a20 2020  duration``...   
-0001f420: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
-0001f430: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-0001f440: 2020 2020 2020 2020 2020 3e3e 3e20 6e6f            >>> no
-0001f450: 7465 203d 2061 626a 6164 2e4e 6f74 652e  te = abjad.Note.
-0001f460: 6672 6f6d 5f70 6974 6368 5f61 6e64 5f64  from_pitch_and_d
-0001f470: 7572 6174 696f 6e28 2743 2335 272c 2028  uration('C#5', (
-0001f480: 332c 2031 3629 290a 2020 2020 2020 2020  3, 16)).        
-0001f490: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
-0001f4a0: 6f77 286e 6f74 6529 2023 2064 6f63 7465  ow(note) # docte
-0001f4b0: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-0001f4c0: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0001f4d0: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001f4e0: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0001f4f0: 6162 6a61 642e 6c69 6c79 706f 6e64 286e  abjad.lilypond(n
-0001f500: 6f74 6529 0a20 2020 2020 2020 2020 2020  ote).           
-0001f510: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-0001f520: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-0001f530: 2020 2020 2020 2063 7327 2738 2e0a 0a20         cs''8... 
-0001f540: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0001f550: 2020 206e 6f74 6520 3d20 4e6f 7465 2870     note = Note(p
-0001f560: 6974 6368 2c20 6475 7261 7469 6f6e 290a  itch, duration).
-0001f570: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-0001f580: 6f74 650a 0a0a 636c 6173 7320 5265 7374  ote...class Rest
-0001f590: 284c 6561 6629 3a0a 2020 2020 7222 2222  (Leaf):.    r"""
-0001f5a0: 0a20 2020 2052 6573 742e 0a0a 2020 2020  .    Rest...    
-0001f5b0: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
-0001f5c0: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
-0001f5d0: 203e 3e3e 2072 6573 7420 3d20 6162 6a61   >>> rest = abja
-0001f5e0: 642e 5265 7374 2822 7238 2e22 290a 2020  d.Rest("r8.").  
-0001f5f0: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-0001f600: 6174 7461 6368 2861 626a 6164 2e54 696d  attach(abjad.Tim
-0001f610: 6553 6967 6e61 7475 7265 2828 332c 2031  eSignature((3, 1
-0001f620: 3629 292c 2072 6573 7429 0a20 2020 2020  6)), rest).     
-0001f630: 2020 203e 3e3e 2073 7461 6666 203d 2061     >>> staff = a
-0001f640: 626a 6164 2e53 7461 6666 285b 7265 7374  bjad.Staff([rest
-0001f650: 5d29 0a20 2020 2020 2020 203e 3e3e 2061  ]).        >>> a
-0001f660: 626a 6164 2e73 686f 7728 7374 6166 6629  bjad.show(staff)
-0001f670: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
-0001f680: 500a 0a20 2020 2020 2020 202e 2e20 2064  P..        ..  d
-0001f690: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
-0001f6a0: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0001f6b0: 6162 6a61 642e 6c69 6c79 706f 6e64 2873  abjad.lilypond(s
-0001f6c0: 7461 6666 290a 2020 2020 2020 2020 2020  taff).          
-0001f6d0: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
-0001f6e0: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-0001f6f0: 5c6e 6577 2053 7461 6666 0a20 2020 2020  \new Staff.     
-0001f700: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-0001f710: 2020 2020 2020 2020 205c 7469 6d65 2033           \time 3
-0001f720: 2f31 360a 2020 2020 2020 2020 2020 2020  /16.            
-0001f730: 2020 2020 7238 2e0a 2020 2020 2020 2020      r8..        
-0001f740: 2020 2020 7d0a 0a20 2020 2022 2222 0a0a      }..    """..
-0001f750: 2020 2020 5f5f 646f 6375 6d65 6e74 6174      __documentat
-0001f760: 696f 6e5f 7365 6374 696f 6e5f 5f20 3d20  ion_section__ = 
-0001f770: 224c 6561 7665 7322 0a0a 2020 2020 5f5f  "Leaves"..    __
-0001f780: 736c 6f74 735f 5f20 3d20 2829 0a0a 2020  slots__ = ()..  
-0001f790: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
-0001f7a0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-0001f7b0: 2020 2020 2020 7772 6974 7465 6e5f 6475        written_du
-0001f7c0: 7261 7469 6f6e 3d4e 6f6e 652c 0a20 2020  ration=None,.   
-0001f7d0: 2020 2020 202a 2c0a 2020 2020 2020 2020       *,.        
-0001f7e0: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
-0001f7f0: 2265 6e67 6c69 7368 222c 0a20 2020 2020  "english",.     
-0001f800: 2020 206d 756c 7469 706c 6965 723a 205f     multiplier: _
-0001f810: 7479 7069 6e67 732e 4475 7261 7469 6f6e  typings.Duration
-0001f820: 5479 7069 6e67 203d 204e 6f6e 652c 0a20  Typing = None,. 
-0001f830: 2020 2020 2020 2074 6167 3a20 5f74 6167         tag: _tag
-0001f840: 2e54 6167 203d 204e 6f6e 652c 0a20 2020  .Tag = None,.   
-0001f850: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0001f860: 2020 2020 6f72 6967 696e 616c 5f69 6e70      original_inp
-0001f870: 7574 203d 2077 7269 7474 656e 5f64 7572  ut = written_dur
-0001f880: 6174 696f 6e0a 2020 2020 2020 2020 6966  ation.        if
-0001f890: 2069 7369 6e73 7461 6e63 6528 7772 6974   isinstance(writ
-0001f8a0: 7465 6e5f 6475 7261 7469 6f6e 2c20 4c65  ten_duration, Le
-0001f8b0: 6166 293a 0a20 2020 2020 2020 2020 2020  af):.           
-0001f8c0: 206d 756c 7469 706c 6965 7220 3d20 7772   multiplier = wr
-0001f8d0: 6974 7465 6e5f 6475 7261 7469 6f6e 2e6d  itten_duration.m
-0001f8e0: 756c 7469 706c 6965 720a 2020 2020 2020  ultiplier.      
-0001f8f0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0001f900: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
-0001f910: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
-0001f920: 2020 2020 7374 7269 6e67 203d 2066 227b      string = f"{
-0001f930: 7b20 7b77 7269 7474 656e 5f64 7572 6174  { {written_durat
-0001f940: 696f 6e7d 207d 7d22 0a20 2020 2020 2020  ion} }}".       
-0001f950: 2020 2020 2070 6172 7365 6420 3d20 7365       parsed = se
-0001f960: 6c66 2e5f 7061 7273 655f 6c69 6c79 706f  lf._parse_lilypo
-0001f970: 6e64 5f73 7472 696e 6728 7374 7269 6e67  nd_string(string
-0001f980: 2c20 6c61 6e67 7561 6765 3d6c 616e 6775  , language=langu
-0001f990: 6167 6529 0a20 2020 2020 2020 2020 2020  age).           
-0001f9a0: 2061 7373 6572 7420 6c65 6e28 7061 7273   assert len(pars
-0001f9b0: 6564 2920 3d3d 2031 2061 6e64 2069 7369  ed) == 1 and isi
-0001f9c0: 6e73 7461 6e63 6528 7061 7273 6564 5b30  nstance(parsed[0
-0001f9d0: 5d2c 204c 6561 6629 0a20 2020 2020 2020  ], Leaf).       
-0001f9e0: 2020 2020 2077 7269 7474 656e 5f64 7572       written_dur
-0001f9f0: 6174 696f 6e20 3d20 7061 7273 6564 5b30  ation = parsed[0
-0001fa00: 5d0a 2020 2020 2020 2020 6966 2069 7369  ].        if isi
-0001fa10: 6e73 7461 6e63 6528 7772 6974 7465 6e5f  nstance(written_
-0001fa20: 6475 7261 7469 6f6e 2c20 4c65 6166 293a  duration, Leaf):
-0001fa30: 0a20 2020 2020 2020 2020 2020 2077 7269  .            wri
-0001fa40: 7474 656e 5f64 7572 6174 696f 6e20 3d20  tten_duration = 
-0001fa50: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
-0001fa60: 2e77 7269 7474 656e 5f64 7572 6174 696f  .written_duratio
-0001fa70: 6e0a 2020 2020 2020 2020 656c 6966 2077  n.        elif w
-0001fa80: 7269 7474 656e 5f64 7572 6174 696f 6e20  ritten_duration 
-0001fa90: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-0001faa0: 2020 2020 2077 7269 7474 656e 5f64 7572       written_dur
-0001fab0: 6174 696f 6e20 3d20 5f64 7572 6174 696f  ation = _duratio
-0001fac0: 6e2e 4475 7261 7469 6f6e 2831 2c20 3429  n.Duration(1, 4)
-0001fad0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-0001fae0: 2020 2020 2020 2020 2020 2077 7269 7474             writt
-0001faf0: 656e 5f64 7572 6174 696f 6e20 3d20 5f64  en_duration = _d
-0001fb00: 7572 6174 696f 6e2e 4475 7261 7469 6f6e  uration.Duration
-0001fb10: 2877 7269 7474 656e 5f64 7572 6174 696f  (written_duratio
-0001fb20: 6e29 0a20 2020 2020 2020 204c 6561 662e  n).        Leaf.
-0001fb30: 5f5f 696e 6974 5f5f 2873 656c 662c 2077  __init__(self, w
-0001fb40: 7269 7474 656e 5f64 7572 6174 696f 6e2c  ritten_duration,
-0001fb50: 206d 756c 7469 706c 6965 723d 6d75 6c74   multiplier=mult
-0001fb60: 6970 6c69 6572 2c20 7461 673d 7461 6729  iplier, tag=tag)
-0001fb70: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-0001fb80: 7374 616e 6365 286f 7269 6769 6e61 6c5f  stance(original_
-0001fb90: 696e 7075 742c 204c 6561 6629 3a0a 2020  input, Leaf):.  
-0001fba0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-0001fbb0: 636f 7079 5f6f 7665 7272 6964 655f 616e  copy_override_an
-0001fbc0: 645f 7365 745f 6672 6f6d 5f6c 6561 6628  d_set_from_leaf(
-0001fbd0: 6f72 6967 696e 616c 5f69 6e70 7574 290a  original_input).
-0001fbe0: 0a20 2020 2064 6566 205f 6765 745f 626f  .    def _get_bo
-0001fbf0: 6479 2873 656c 6629 3a0a 2020 2020 2020  dy(self):.      
-0001fc00: 2020 7265 7475 726e 205b 7365 6c66 2e5f    return [self._
-0001fc10: 6765 745f 636f 6d70 6163 745f 7265 7072  get_compact_repr
-0001fc20: 6573 656e 7461 7469 6f6e 2829 5d0a 0a20  esentation()].. 
-0001fc30: 2020 2064 6566 205f 6765 745f 636f 6d70     def _get_comp
-0001fc40: 6163 745f 7265 7072 6573 656e 7461 7469  act_representati
-0001fc50: 6f6e 2873 656c 6629 3a0a 2020 2020 2020  on(self):.      
-0001fc60: 2020 7265 7475 726e 2066 2272 7b73 656c    return f"r{sel
-0001fc70: 662e 5f67 6574 5f66 6f72 6d61 7474 6564  f._get_formatted
-0001fc80: 5f64 7572 6174 696f 6e28 297d 220a 0a0a  _duration()}"...
-0001fc90: 636c 6173 7320 5363 6f72 6528 436f 6e74  class Score(Cont
-0001fca0: 6578 7429 3a0a 2020 2020 7222 2222 0a20  ext):.    r""". 
-0001fcb0: 2020 2053 636f 7265 2e0a 0a20 2020 202e     Score...    .
-0001fcc0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-0001fcd0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-0001fce0: 3e3e 3e20 7374 6166 665f 3120 3d20 6162  >>> staff_1 = ab
-0001fcf0: 6a61 642e 5374 6166 6628 2263 2738 2064  jad.Staff("c'8 d
-0001fd00: 2738 2065 2738 2066 2738 2229 0a20 2020  '8 e'8 f'8").   
-0001fd10: 2020 2020 203e 3e3e 2073 7461 6666 5f32       >>> staff_2
-0001fd20: 203d 2061 626a 6164 2e53 7461 6666 2822   = abjad.Staff("
-0001fd30: 6327 3820 6427 3820 6527 3820 6627 3822  c'8 d'8 e'8 f'8"
-0001fd40: 290a 2020 2020 2020 2020 3e3e 3e20 7363  ).        >>> sc
-0001fd50: 6f72 6520 3d20 6162 6a61 642e 5363 6f72  ore = abjad.Scor
-0001fd60: 6528 5b73 7461 6666 5f31 2c20 7374 6166  e([staff_1, staf
-0001fd70: 665f 325d 290a 2020 2020 2020 2020 3e3e  f_2]).        >>
-0001fd80: 3e20 6162 6a61 642e 7368 6f77 2873 636f  > abjad.show(sco
-0001fd90: 7265 2920 2320 646f 6374 6573 743a 202b  re) # doctest: +
-0001fda0: 534b 4950 0a0a 2020 2020 2020 2020 2e2e  SKIP..        ..
-0001fdb0: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
-0001fdc0: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-0001fdd0: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-0001fde0: 6428 7363 6f72 6529 0a20 2020 2020 2020  d(score).       
-0001fdf0: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-0001fe00: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-0001fe10: 2020 205c 6e65 7720 5363 6f72 650a 2020     \new Score.  
-0001fe20: 2020 2020 2020 2020 2020 3c3c 0a20 2020            <<.   
-0001fe30: 2020 2020 2020 2020 2020 2020 205c 6e65               \ne
-0001fe40: 7720 5374 6166 660a 2020 2020 2020 2020  w Staff.        
-0001fe50: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0001fe60: 2020 2020 2020 2020 2020 2020 2020 6327                c'
-0001fe70: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
-0001fe80: 2020 2020 2020 6427 380a 2020 2020 2020        d'8.      
-0001fe90: 2020 2020 2020 2020 2020 2020 2020 6527                e'
-0001fea0: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
-0001feb0: 2020 2020 2020 6627 380a 2020 2020 2020        f'8.      
-0001fec0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-0001fed0: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
-0001fee0: 2053 7461 6666 0a20 2020 2020 2020 2020   Staff.         
-0001fef0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-0001ff00: 2020 2020 2020 2020 2020 2020 2063 2738               c'8
-0001ff10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ff20: 2020 2020 2064 2738 0a20 2020 2020 2020       d'8.       
-0001ff30: 2020 2020 2020 2020 2020 2020 2065 2738               e'8
-0001ff40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ff50: 2020 2020 2066 2738 0a20 2020 2020 2020       f'8.       
-0001ff60: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-0001ff70: 2020 2020 2020 203e 3e0a 0a20 2020 2022         >>..    "
-0001ff80: 2222 0a0a 2020 2020 2323 2320 434c 4153  ""..    ### CLAS
-0001ff90: 5320 5641 5249 4142 4c45 5320 2323 230a  S VARIABLES ###.
-0001ffa0: 0a20 2020 205f 5f64 6f63 756d 656e 7461  .    __documenta
-0001ffb0: 7469 6f6e 5f73 6563 7469 6f6e 5f5f 203d  tion_section__ =
-0001ffc0: 2022 436f 6e74 6578 7473 220a 0a20 2020   "Contexts"..   
-0001ffd0: 205f 5f73 6c6f 7473 5f5f 203d 2028 290a   __slots__ = ().
-0001ffe0: 0a20 2020 205f 6465 6661 756c 745f 6c69  .    _default_li
-0001fff0: 6c79 706f 6e64 5f74 7970 6520 3d20 2253  lypond_type = "S
-00020000: 636f 7265 220a 0a20 2020 2023 2323 2049  core"..    ### I
-00020010: 4e49 5449 414c 495a 4552 2023 2323 0a0a  NITIALIZER ###..
-00020020: 2020 2020 2320 544f 444f 3a20 6d61 6b65      # TODO: make
-00020030: 206b 6579 776f 7264 7320 6d61 6e64 6174   keywords mandat
-00020040: 6f72 790a 2020 2020 6465 6620 5f5f 696e  ory.    def __in
-00020050: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
-00020060: 6c66 2c0a 2020 2020 2020 2020 636f 6d70  lf,.        comp
-00020070: 6f6e 656e 7473 3d4e 6f6e 652c 0a20 2020  onents=None,.   
-00020080: 2020 2020 206c 696c 7970 6f6e 645f 7479       lilypond_ty
-00020090: 7065 3a20 7374 7220 3d20 2253 636f 7265  pe: str = "Score
-000200a0: 222c 0a20 2020 2020 2020 2073 696d 756c  ",.        simul
-000200b0: 7461 6e65 6f75 733a 2062 6f6f 6c20 3d20  taneous: bool = 
-000200c0: 5472 7565 2c0a 2020 2020 2020 2020 6e61  True,.        na
-000200d0: 6d65 3a20 7374 7220 3d20 4e6f 6e65 2c0a  me: str = None,.
-000200e0: 2020 2020 2020 2020 7461 673a 205f 7461          tag: _ta
-000200f0: 672e 5461 6720 3d20 4e6f 6e65 2c0a 2020  g.Tag = None,.  
-00020100: 2020 2020 2020 2a2c 0a20 2020 2020 2020        *,.       
-00020110: 206c 616e 6775 6167 653a 2073 7472 203d   language: str =
-00020120: 2022 656e 676c 6973 6822 2c0a 2020 2020   "english",.    
-00020130: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00020140: 2020 2043 6f6e 7465 7874 2e5f 5f69 6e69     Context.__ini
-00020150: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
-00020160: 2073 656c 662c 0a20 2020 2020 2020 2020   self,.         
-00020170: 2020 2063 6f6d 706f 6e65 6e74 733d 636f     components=co
-00020180: 6d70 6f6e 656e 7473 2c0a 2020 2020 2020  mponents,.      
-00020190: 2020 2020 2020 6c61 6e67 7561 6765 3d6c        language=l
-000201a0: 616e 6775 6167 652c 0a20 2020 2020 2020  anguage,.       
-000201b0: 2020 2020 206c 696c 7970 6f6e 645f 7479       lilypond_ty
-000201c0: 7065 3d6c 696c 7970 6f6e 645f 7479 7065  pe=lilypond_type
-000201d0: 2c0a 2020 2020 2020 2020 2020 2020 7369  ,.            si
-000201e0: 6d75 6c74 616e 656f 7573 3d73 696d 756c  multaneous=simul
-000201f0: 7461 6e65 6f75 732c 0a20 2020 2020 2020  taneous,.       
-00020200: 2020 2020 206e 616d 653d 6e61 6d65 2c0a       name=name,.
-00020210: 2020 2020 2020 2020 2020 2020 7461 673d              tag=
-00020220: 7461 672c 0a20 2020 2020 2020 2029 0a0a  tag,.        )..
-00020230: 2020 2020 2323 2320 5055 424c 4943 2050      ### PUBLIC P
-00020240: 524f 5045 5254 4945 5320 2323 230a 0a20  ROPERTIES ###.. 
-00020250: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
-00020260: 2064 6566 2074 6167 2873 656c 6629 202d   def tag(self) -
-00020270: 3e20 5f74 6167 2e54 6167 207c 204e 6f6e  > _tag.Tag | Non
-00020280: 653a 0a20 2020 2020 2020 2072 2222 220a  e:.        r""".
-00020290: 2020 2020 2020 2020 4765 7473 2074 6167          Gets tag
-000202a0: 2e0a 0a20 2020 2020 2020 202e 2e20 2063  ...        ..  c
-000202b0: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
-000202c0: 6c65 0a0a 2020 2020 2020 2020 2020 2020  le..            
-000202d0: 3e3e 3e20 766f 6963 6520 3d20 6162 6a61  >>> voice = abja
-000202e0: 642e 566f 6963 6528 2263 2734 2064 2720  d.Voice("c'4 d' 
-000202f0: 6527 2066 2722 2c20 7461 673d 6162 6a61  e' f'", tag=abja
-00020300: 642e 5461 6728 2252 4544 2229 290a 2020  d.Tag("RED")).  
-00020310: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-00020320: 6166 6620 3d20 6162 6a61 642e 5374 6166  aff = abjad.Staf
-00020330: 6628 5b76 6f69 6365 5d2c 2074 6167 3d61  f([voice], tag=a
-00020340: 626a 6164 2e54 6167 2822 424c 5545 2229  bjad.Tag("BLUE")
-00020350: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00020360: 3e20 7363 6f72 6520 3d20 6162 6a61 642e  > score = abjad.
-00020370: 5363 6f72 6528 5b73 7461 6666 5d2c 2074  Score([staff], t
-00020380: 6167 3d61 626a 6164 2e54 6167 2822 4752  ag=abjad.Tag("GR
-00020390: 4545 4e22 2929 0a20 2020 2020 2020 2020  EEN")).         
-000203a0: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
-000203b0: 7728 7363 6f72 6529 2023 2064 6f63 7465  w(score) # docte
-000203c0: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-000203d0: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
-000203e0: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
-000203f0: 6e64 2873 636f 7265 2c20 7461 6773 3d54  nd(score, tags=T
-00020400: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
-00020410: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-00020420: 6729 0a20 2020 2020 2020 2020 2020 2025  g).            %
-00020430: 2120 4752 4545 4e0a 2020 2020 2020 2020  ! GREEN.        
-00020440: 2020 2020 5c6e 6577 2053 636f 7265 0a20      \new Score. 
-00020450: 2020 2020 2020 2020 2020 2025 2120 4752             %! GR
-00020460: 4545 4e0a 2020 2020 2020 2020 2020 2020  EEN.            
-00020470: 3c3c 0a20 2020 2020 2020 2020 2020 2020  <<.             
-00020480: 2020 2025 2120 424c 5545 0a20 2020 2020     %! BLUE.     
-00020490: 2020 2020 2020 2020 2020 205c 6e65 7720             \new 
-000204a0: 5374 6166 660a 2020 2020 2020 2020 2020  Staff.          
-000204b0: 2020 2020 2020 2521 2042 4c55 450a 2020        %! BLUE.  
-000204c0: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-000204d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000204e0: 2020 2020 2521 2052 4544 0a20 2020 2020      %! RED.     
-000204f0: 2020 2020 2020 2020 2020 2020 2020 205c                 \
-00020500: 6e65 7720 566f 6963 650a 2020 2020 2020  new Voice.      
-00020510: 2020 2020 2020 2020 2020 2020 2020 2521                %!
-00020520: 2052 4544 0a20 2020 2020 2020 2020 2020   RED.           
-00020530: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00020540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020550: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
-00020560: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00020570: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00020580: 2020 2020 2020 2020 2020 2065 2734 0a20             e'4. 
-00020590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000205a0: 2020 2020 2020 2066 2734 0a20 2020 2020         f'4.     
-000205b0: 2020 2020 2020 2020 2020 2020 2020 2025                 %
-000205c0: 2120 5245 440a 2020 2020 2020 2020 2020  ! RED.          
-000205d0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-000205e0: 2020 2020 2020 2020 2020 2020 2521 2042              %! B
-000205f0: 4c55 450a 2020 2020 2020 2020 2020 2020  LUE.            
-00020600: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
-00020610: 2020 2521 2047 5245 454e 0a20 2020 2020    %! GREEN.     
-00020620: 2020 2020 2020 203e 3e0a 0a20 2020 2020         >>..     
-00020630: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
-00020640: 6574 7572 6e20 7375 7065 7228 292e 7461  eturn super().ta
-00020650: 670a 0a0a 636c 6173 7320 536b 6970 284c  g...class Skip(L
-00020660: 6561 6629 3a0a 2020 2020 2222 220a 2020  eaf):.    """.  
-00020670: 2020 4c69 6c79 506f 6e64 2073 6b69 702e    LilyPond skip.
-00020680: 0a0a 2020 2020 2e2e 2020 636f 6e74 6169  ..    ..  contai
-00020690: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-000206a0: 2020 2020 2020 203e 3e3e 2073 6b69 7020         >>> skip 
-000206b0: 3d20 6162 6a61 642e 536b 6970 2828 312c  = abjad.Skip((1,
-000206c0: 2031 2929 0a20 2020 2020 2020 203e 3e3e   1)).        >>>
-000206d0: 2073 6b69 700a 2020 2020 2020 2020 536b   skip.        Sk
-000206e0: 6970 2827 7331 2729 0a0a 2020 2020 2020  ip('s1')..      
-000206f0: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
-00020700: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-00020710: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-00020720: 7970 6f6e 6428 736b 6970 290a 2020 2020  ypond(skip).    
-00020730: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-00020740: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-00020750: 2020 2020 2020 7331 0a0a 2020 2020 2020        s1..      
-00020760: 2020 3e3e 3e20 736b 6970 203d 2061 626a    >>> skip = abj
-00020770: 6164 2e53 6b69 7028 2831 2c20 3129 2c20  ad.Skip((1, 1), 
-00020780: 6d75 6c74 6970 6c69 6572 3d28 352c 2034  multiplier=(5, 4
-00020790: 2929 0a20 2020 2020 2020 203e 3e3e 2073  )).        >>> s
-000207a0: 6b69 700a 2020 2020 2020 2020 536b 6970  kip.        Skip
-000207b0: 2827 7331 202a 2035 2f34 2729 0a0a 2020  ('s1 * 5/4')..  
-000207c0: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-000207d0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-000207e0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-000207f0: 2e6c 696c 7970 6f6e 6428 736b 6970 290a  .lilypond(skip).
-00020800: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00020810: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
-00020820: 2020 2020 2020 2020 2020 7331 202a 2035            s1 * 5
-00020830: 2f34 0a0a 2020 2020 2020 2020 3e3e 3e20  /4..        >>> 
-00020840: 6e6f 7465 203d 2061 626a 6164 2e4e 6f74  note = abjad.Not
-00020850: 6528 2263 2734 222c 206d 756c 7469 706c  e("c'4", multipl
-00020860: 6965 723d 2835 2c20 3429 290a 2020 2020  ier=(5, 4)).    
-00020870: 2020 2020 3e3e 3e20 736b 6970 203d 2061      >>> skip = a
-00020880: 626a 6164 2e53 6b69 7028 6e6f 7465 290a  bjad.Skip(note).
-00020890: 2020 2020 2020 2020 3e3e 3e20 736b 6970          >>> skip
-000208a0: 0a20 2020 2020 2020 2053 6b69 7028 2773  .        Skip('s
-000208b0: 3420 2a20 352f 3427 290a 0a20 2020 2020  4 * 5/4')..     
-000208c0: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
-000208d0: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
-000208e0: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
-000208f0: 6c79 706f 6e64 2873 6b69 7029 0a20 2020  lypond(skip).   
-00020900: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
-00020910: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
-00020920: 2020 2020 2020 2073 3420 2a20 352f 340a         s4 * 5/4.
-00020930: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
-00020940: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-00020950: 2020 2020 2020 536b 6970 7320 6361 6e20        Skips can 
-00020960: 6265 2074 6167 6765 643a 0a0a 2020 2020  be tagged:..    
-00020970: 2020 2020 3e3e 3e20 736b 6970 203d 2061      >>> skip = a
-00020980: 626a 6164 2e53 6b69 7028 2273 382e 222c  bjad.Skip("s8.",
-00020990: 2074 6167 3d61 626a 6164 2e54 6167 2822   tag=abjad.Tag("
-000209a0: 474c 4f42 414c 5f53 4b49 5022 2929 0a20  GLOBAL_SKIP")). 
-000209b0: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
-000209c0: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
-000209d0: 6e64 2873 6b69 702c 2074 6167 733d 5472  nd(skip, tags=Tr
-000209e0: 7565 290a 2020 2020 2020 2020 3e3e 3e20  ue).        >>> 
-000209f0: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
-00020a00: 2020 2020 2020 2521 2047 4c4f 4241 4c5f        %! GLOBAL_
-00020a10: 534b 4950 0a20 2020 2020 2020 2073 382e  SKIP.        s8.
-00020a20: 0a0a 2020 2020 2222 220a 0a20 2020 205f  ..    """..    _
-00020a30: 5f64 6f63 756d 656e 7461 7469 6f6e 5f73  _documentation_s
-00020a40: 6563 7469 6f6e 5f5f 203d 2022 4c65 6176  ection__ = "Leav
-00020a50: 6573 220a 0a20 2020 205f 5f73 6c6f 7473  es"..    __slots
-00020a60: 5f5f 203d 2028 290a 0a20 2020 2064 6566  __ = ()..    def
-00020a70: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-00020a80: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-00020a90: 202a 6172 6775 6d65 6e74 732c 0a20 2020   *arguments,.   
-00020aa0: 2020 2020 206c 616e 6775 6167 653a 2073       language: s
-00020ab0: 7472 203d 2022 656e 676c 6973 6822 2c0a  tr = "english",.
-00020ac0: 2020 2020 2020 2020 6d75 6c74 6970 6c69          multipli
-00020ad0: 6572 3a20 5f74 7970 696e 6773 2e44 7572  er: _typings.Dur
-00020ae0: 6174 696f 6e54 7970 696e 6720 3d20 4e6f  ationTyping = No
-00020af0: 6e65 2c0a 2020 2020 2020 2020 7461 673a  ne,.        tag:
-00020b00: 205f 7461 672e 5461 6720 3d20 4e6f 6e65   _tag.Tag = None
-00020b10: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
-00020b20: 0a20 2020 2020 2020 2069 6e70 7574 5f6c  .        input_l
-00020b30: 6561 6620 3d20 4e6f 6e65 0a20 2020 2020  eaf = None.     
-00020b40: 2020 2077 7269 7474 656e 5f64 7572 6174     written_durat
-00020b50: 696f 6e20 3d20 4e6f 6e65 0a20 2020 2020  ion = None.     
-00020b60: 2020 2069 6620 6c65 6e28 6172 6775 6d65     if len(argume
-00020b70: 6e74 7329 203d 3d20 3120 616e 6420 6973  nts) == 1 and is
-00020b80: 696e 7374 616e 6365 2861 7267 756d 656e  instance(argumen
-00020b90: 7473 5b30 5d2c 2073 7472 293a 0a20 2020  ts[0], str):.   
-00020ba0: 2020 2020 2020 2020 2073 7472 696e 6720           string 
-00020bb0: 3d20 6622 7b7b 207b 6172 6775 6d65 6e74  = f"{{ {argument
-00020bc0: 735b 305d 7d20 7d7d 220a 2020 2020 2020  s[0]} }}".      
-00020bd0: 2020 2020 2020 7061 7273 6564 203d 2073        parsed = s
-00020be0: 656c 662e 5f70 6172 7365 5f6c 696c 7970  elf._parse_lilyp
-00020bf0: 6f6e 645f 7374 7269 6e67 2873 7472 696e  ond_string(strin
-00020c00: 672c 206c 616e 6775 6167 653d 6c61 6e67  g, language=lang
-00020c10: 7561 6765 290a 2020 2020 2020 2020 2020  uage).          
-00020c20: 2020 6173 7365 7274 206c 656e 2870 6172    assert len(par
-00020c30: 7365 6429 203d 3d20 3120 616e 6420 6973  sed) == 1 and is
-00020c40: 696e 7374 616e 6365 2870 6172 7365 645b  instance(parsed[
-00020c50: 305d 2c20 4c65 6166 290a 2020 2020 2020  0], Leaf).      
-00020c60: 2020 2020 2020 696e 7075 745f 6c65 6166        input_leaf
-00020c70: 203d 2070 6172 7365 645b 305d 0a20 2020   = parsed[0].   
-00020c80: 2020 2020 2020 2020 2077 7269 7474 656e           written
-00020c90: 5f64 7572 6174 696f 6e20 3d20 696e 7075  _duration = inpu
-00020ca0: 745f 6c65 6166 2e77 7269 7474 656e 5f64  t_leaf.written_d
-00020cb0: 7572 6174 696f 6e0a 2020 2020 2020 2020  uration.        
-00020cc0: 656c 6966 206c 656e 2861 7267 756d 656e  elif len(argumen
-00020cd0: 7473 2920 3d3d 2031 2061 6e64 2069 7369  ts) == 1 and isi
-00020ce0: 6e73 7461 6e63 6528 6172 6775 6d65 6e74  nstance(argument
-00020cf0: 735b 305d 2c20 4c65 6166 293a 0a20 2020  s[0], Leaf):.   
-00020d00: 2020 2020 2020 2020 2069 6e70 7574 5f6c           input_l
-00020d10: 6561 6620 3d20 6172 6775 6d65 6e74 735b  eaf = arguments[
-00020d20: 305d 0a20 2020 2020 2020 2020 2020 2077  0].            w
-00020d30: 7269 7474 656e 5f64 7572 6174 696f 6e20  ritten_duration 
-00020d40: 3d20 696e 7075 745f 6c65 6166 2e77 7269  = input_leaf.wri
-00020d50: 7474 656e 5f64 7572 6174 696f 6e0a 2020  tten_duration.  
-00020d60: 2020 2020 2020 2020 2020 6d75 6c74 6970            multip
-00020d70: 6c69 6572 203d 2069 6e70 7574 5f6c 6561  lier = input_lea
-00020d80: 662e 6d75 6c74 6970 6c69 6572 0a20 2020  f.multiplier.   
-00020d90: 2020 2020 2065 6c69 6620 6c65 6e28 6172       elif len(ar
-00020da0: 6775 6d65 6e74 7329 203d 3d20 3120 616e  guments) == 1 an
-00020db0: 6420 6e6f 7420 6973 696e 7374 616e 6365  d not isinstance
-00020dc0: 2861 7267 756d 656e 7473 5b30 5d2c 2073  (arguments[0], s
-00020dd0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-00020de0: 2077 7269 7474 656e 5f64 7572 6174 696f   written_duratio
-00020df0: 6e20 3d20 6172 6775 6d65 6e74 735b 305d  n = arguments[0]
-00020e00: 0a20 2020 2020 2020 2065 6c69 6620 6c65  .        elif le
-00020e10: 6e28 6172 6775 6d65 6e74 7329 203d 3d20  n(arguments) == 
-00020e20: 303a 0a20 2020 2020 2020 2020 2020 2077  0:.            w
-00020e30: 7269 7474 656e 5f64 7572 6174 696f 6e20  ritten_duration 
-00020e40: 3d20 5f64 7572 6174 696f 6e2e 4475 7261  = _duration.Dura
-00020e50: 7469 6f6e 2831 2c20 3429 0a20 2020 2020  tion(1, 4).     
-00020e60: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00020e70: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-00020e80: 4572 726f 7228 6622 6361 6e20 6e6f 7420  Error(f"can not 
-00020e90: 696e 6974 6961 6c69 7a65 2073 6b69 7020  initialize skip 
-00020ea0: 6672 6f6d 207b 6172 6775 6d65 6e74 7321  from {arguments!
-00020eb0: 727d 2e22 290a 2020 2020 2020 2020 4c65  r}.").        Le
-00020ec0: 6166 2e5f 5f69 6e69 745f 5f28 7365 6c66  af.__init__(self
-00020ed0: 2c20 7772 6974 7465 6e5f 6475 7261 7469  , written_durati
-00020ee0: 6f6e 2c20 6d75 6c74 6970 6c69 6572 3d6d  on, multiplier=m
-00020ef0: 756c 7469 706c 6965 722c 2074 6167 3d74  ultiplier, tag=t
-00020f00: 6167 290a 2020 2020 2020 2020 6966 2069  ag).        if i
-00020f10: 6e70 7574 5f6c 6561 6620 6973 206e 6f74  nput_leaf is not
-00020f20: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00020f30: 2020 2073 656c 662e 5f63 6f70 795f 6f76     self._copy_ov
-00020f40: 6572 7269 6465 5f61 6e64 5f73 6574 5f66  erride_and_set_f
-00020f50: 726f 6d5f 6c65 6166 2869 6e70 7574 5f6c  rom_leaf(input_l
-00020f60: 6561 6629 0a0a 2020 2020 6465 6620 5f67  eaf)..    def _g
-00020f70: 6574 5f62 6f64 7928 7365 6c66 293a 0a20  et_body(self):. 
-00020f80: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00020f90: 5b5d 0a20 2020 2020 2020 2072 6573 756c  [].        resul
-00020fa0: 742e 6170 7065 6e64 2866 2273 7b73 656c  t.append(f"s{sel
-00020fb0: 662e 5f67 6574 5f66 6f72 6d61 7474 6564  f._get_formatted
-00020fc0: 5f64 7572 6174 696f 6e28 297d 2229 0a20  _duration()}"). 
-00020fd0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-00020fe0: 7375 6c74 0a0a 2020 2020 6465 6620 5f67  sult..    def _g
-00020ff0: 6574 5f63 6f6d 7061 6374 5f72 6570 7265  et_compact_repre
-00021000: 7365 6e74 6174 696f 6e28 7365 6c66 293a  sentation(self):
-00021010: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00021020: 6622 737b 7365 6c66 2e5f 6765 745f 666f  f"s{self._get_fo
-00021030: 726d 6174 7465 645f 6475 7261 7469 6f6e  rmatted_duration
-00021040: 2829 7d22 0a0a 0a63 6c61 7373 2053 7461  ()}"...class Sta
-00021050: 6666 2843 6f6e 7465 7874 293a 0a20 2020  ff(Context):.   
-00021060: 2072 2222 220a 2020 2020 5374 6166 662e   r""".    Staff.
-00021070: 0a0a 2020 2020 2e2e 2020 636f 6e74 6169  ..    ..  contai
-00021080: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-00021090: 2020 2020 2020 203e 3e3e 2073 7461 6666         >>> staff
-000210a0: 203d 2061 626a 6164 2e53 7461 6666 2822   = abjad.Staff("
-000210b0: 6327 3820 6427 3820 6527 3820 6627 3822  c'8 d'8 e'8 f'8"
-000210c0: 290a 2020 2020 2020 2020 3e3e 3e20 6162  ).        >>> ab
-000210d0: 6a61 642e 7368 6f77 2873 7461 6666 2920  jad.show(staff) 
-000210e0: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
-000210f0: 0a0a 2020 2020 2020 2020 2e2e 2020 646f  ..        ..  do
-00021100: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
-00021110: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-00021120: 626a 6164 2e6c 696c 7970 6f6e 6428 7374  bjad.lilypond(st
-00021130: 6166 6629 0a20 2020 2020 2020 2020 2020  aff).           
-00021140: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-00021150: 6729 0a20 2020 2020 2020 2020 2020 205c  g).            \
-00021160: 6e65 7720 5374 6166 660a 2020 2020 2020  new Staff.      
-00021170: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00021180: 2020 2020 2020 2020 6327 380a 2020 2020          c'8.    
-00021190: 2020 2020 2020 2020 2020 2020 6427 380a              d'8.
-000211a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000211b0: 6527 380a 2020 2020 2020 2020 2020 2020  e'8.            
-000211c0: 2020 2020 6627 380a 2020 2020 2020 2020      f'8.        
-000211d0: 2020 2020 7d0a 0a20 2020 202e 2e20 2063      }..    ..  c
-000211e0: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
-000211f0: 6c65 0a0a 2020 2020 2020 2020 4361 6e20  le..        Can 
-00021200: 696e 6974 6961 6c69 7a65 2066 726f 6d20  initialize from 
-00021210: 636f 6c6c 6563 7469 6f6e 206f 6620 7374  collection of st
-00021220: 7269 6e67 733a 0a0a 2020 2020 2020 2020  rings:..        
-00021230: 3e3e 3e20 7374 6166 6620 3d20 6162 6a61  >>> staff = abja
-00021240: 642e 5374 6166 6628 5b0a 2020 2020 2020  d.Staff([.      
-00021250: 2020 2e2e 2e20 2020 2020 7222 5c74 696d    ...     r"\tim
-00021260: 6573 2039 2f31 3020 7b20 7238 2063 2731  es 9/10 { r8 c'1
-00021270: 3620 6327 3136 2062 6627 347e 2062 6627  6 c'16 bf'4~ bf'
-00021280: 3136 2072 3136 207d 222c 0a20 2020 2020  16 r16 }",.     
-00021290: 2020 202e 2e2e 2020 2020 2072 225c 7469     ...     r"\ti
-000212a0: 6d65 7320 392f 3130 207b 2062 6627 3136  mes 9/10 { bf'16
-000212b0: 2065 2727 3136 2065 2727 3420 7e20 6527   e''16 e''4 ~ e'
-000212c0: 2731 3620 7231 3620 6673 2727 3136 2061  '16 r16 fs''16 a
-000212d0: 6627 2731 3620 7d22 2c0a 2020 2020 2020  f''16 }",.      
-000212e0: 2020 2e2e 2e20 2020 2020 7222 5c74 696d    ...     r"\tim
-000212f0: 6573 2034 2f35 207b 2061 2731 3620 7234  es 4/5 { a'16 r4
-00021300: 207d 222c 0a20 2020 2020 2020 202e 2e2e   }",.        ...
-00021310: 205d 290a 2020 2020 2020 2020 3e3e 3e20   ]).        >>> 
-00021320: 6162 6a61 642e 7368 6f77 2873 7461 6666  abjad.show(staff
-00021330: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-00021340: 4950 0a0a 2020 2020 2020 2020 2e2e 2020  IP..        ..  
-00021350: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
-00021360: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-00021370: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-00021380: 7374 6166 6629 0a20 2020 2020 2020 2020  staff).         
-00021390: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
-000213a0: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
-000213b0: 205c 6e65 7720 5374 6166 660a 2020 2020   \new Staff.    
-000213c0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-000213d0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-000213e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000213f0: 5c74 7765 616b 2074 6578 7420 2374 7570  \tweak text #tup
-00021400: 6c65 742d 6e75 6d62 6572 3a3a 6361 6c63  let-number::calc
-00021410: 2d66 7261 6374 696f 6e2d 7465 7874 0a20  -fraction-text. 
-00021420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021430: 2020 205c 7469 6d65 7320 392f 3130 0a20     \times 9/10. 
-00021440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021450: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00021460: 2020 2020 2020 2020 2020 2020 2072 380a               r8.
-00021470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021480: 2020 2020 2020 2020 6327 3136 0a20 2020          c'16.   
-00021490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000214a0: 2020 2020 2063 2731 360a 2020 2020 2020       c'16.      
-000214b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000214c0: 2020 6266 2734 0a20 2020 2020 2020 2020    bf'4.         
-000214d0: 2020 2020 2020 2020 2020 2020 2020 207e                 ~
-000214e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000214f0: 2020 2020 2020 2020 2062 6627 3136 0a20           bf'16. 
-00021500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021510: 2020 2020 2020 2072 3136 0a20 2020 2020         r16.     
-00021520: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-00021530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021540: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
-00021550: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00021560: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
-00021570: 7465 7874 2023 7475 706c 6574 2d6e 756d  text #tuplet-num
-00021580: 6265 723a 3a63 616c 632d 6672 6163 7469  ber::calc-fracti
-00021590: 6f6e 2d74 6578 740a 2020 2020 2020 2020  on-text.        
-000215a0: 2020 2020 2020 2020 2020 2020 5c74 696d              \tim
-000215b0: 6573 2039 2f31 300a 2020 2020 2020 2020  es 9/10.        
-000215c0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-000215d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000215e0: 2020 2020 2020 6266 2731 360a 2020 2020        bf'16.    
-000215f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021600: 2020 2020 6527 2731 360a 2020 2020 2020      e''16.      
-00021610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021620: 2020 6527 2734 0a20 2020 2020 2020 2020    e''4.         
-00021630: 2020 2020 2020 2020 2020 2020 2020 207e                 ~
-00021640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021650: 2020 2020 2020 2020 2065 2727 3136 0a20           e''16. 
-00021660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021670: 2020 2020 2020 2072 3136 0a20 2020 2020         r16.     
-00021680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021690: 2020 2066 7327 2731 360a 2020 2020 2020     fs''16.      
-000216a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000216b0: 2020 6166 2727 3136 0a20 2020 2020 2020    af''16.       
-000216c0: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
-000216d0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-000216e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000216f0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00021700: 2020 2020 2020 205c 7469 6d65 7320 342f         \times 4/
-00021710: 350a 2020 2020 2020 2020 2020 2020 2020  5.              
-00021720: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00021730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021740: 6127 3136 0a20 2020 2020 2020 2020 2020  a'16.           
-00021750: 2020 2020 2020 2020 2020 2020 2072 340a               r4.
-00021760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021770: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
-00021780: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00021790: 2020 2020 7d0a 0a20 2020 2022 2222 0a0a      }..    """..
-000217a0: 2020 2020 5f5f 646f 6375 6d65 6e74 6174      __documentat
-000217b0: 696f 6e5f 7365 6374 696f 6e5f 5f20 3d20  ion_section__ = 
-000217c0: 2243 6f6e 7465 7874 7322 0a0a 2020 2020  "Contexts"..    
-000217d0: 5f5f 736c 6f74 735f 5f20 3d20 2829 0a0a  __slots__ = ()..
-000217e0: 2020 2020 5f64 6566 6175 6c74 5f6c 696c      _default_lil
-000217f0: 7970 6f6e 645f 7479 7065 203d 2022 5374  ypond_type = "St
-00021800: 6166 6622 0a0a 2020 2020 2320 544f 444f  aff"..    # TODO
-00021810: 3a20 6d61 6b65 206b 6579 776f 7264 7320  : make keywords 
-00021820: 6d61 6e64 6174 6f72 790a 2020 2020 6465  mandatory.    de
-00021830: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
-00021840: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-00021850: 2020 636f 6d70 6f6e 656e 7473 3d4e 6f6e    components=Non
-00021860: 652c 0a20 2020 2020 2020 206c 696c 7970  e,.        lilyp
-00021870: 6f6e 645f 7479 7065 3a20 7374 7220 3d20  ond_type: str = 
-00021880: 2253 7461 6666 222c 0a20 2020 2020 2020  "Staff",.       
-00021890: 2073 696d 756c 7461 6e65 6f75 733a 2062   simultaneous: b
-000218a0: 6f6f 6c20 3d20 4661 6c73 652c 0a20 2020  ool = False,.   
-000218b0: 2020 2020 206e 616d 653a 2073 7472 203d       name: str =
-000218c0: 204e 6f6e 652c 0a20 2020 2020 2020 2074   None,.        t
-000218d0: 6167 3a20 5f74 6167 2e54 6167 203d 204e  ag: _tag.Tag = N
-000218e0: 6f6e 652c 0a20 2020 2020 2020 202a 2c0a  one,.        *,.
-000218f0: 2020 2020 2020 2020 6c61 6e67 7561 6765          language
-00021900: 3a20 7374 7220 3d20 2265 6e67 6c69 7368  : str = "english
-00021910: 222c 0a20 2020 2029 202d 3e20 4e6f 6e65  ",.    ) -> None
-00021920: 3a0a 2020 2020 2020 2020 436f 6e74 6578  :.        Contex
-00021930: 742e 5f5f 696e 6974 5f5f 280a 2020 2020  t.__init__(.    
-00021940: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-00021950: 2020 2020 2020 2020 2020 636f 6d70 6f6e            compon
-00021960: 656e 7473 3d63 6f6d 706f 6e65 6e74 732c  ents=components,
-00021970: 0a20 2020 2020 2020 2020 2020 206c 616e  .            lan
-00021980: 6775 6167 653d 6c61 6e67 7561 6765 2c0a  guage=language,.
-00021990: 2020 2020 2020 2020 2020 2020 6c69 6c79              lily
-000219a0: 706f 6e64 5f74 7970 653d 6c69 6c79 706f  pond_type=lilypo
-000219b0: 6e64 5f74 7970 652c 0a20 2020 2020 2020  nd_type,.       
-000219c0: 2020 2020 2073 696d 756c 7461 6e65 6f75       simultaneou
-000219d0: 733d 7369 6d75 6c74 616e 656f 7573 2c0a  s=simultaneous,.
-000219e0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
-000219f0: 3d6e 616d 652c 0a20 2020 2020 2020 2020  =name,.         
-00021a00: 2020 2074 6167 3d74 6167 2c0a 2020 2020     tag=tag,.    
-00021a10: 2020 2020 290a 0a0a 636c 6173 7320 5374      )...class St
-00021a20: 6166 6647 726f 7570 2843 6f6e 7465 7874  affGroup(Context
-00021a30: 293a 0a20 2020 2072 2222 220a 2020 2020  ):.    r""".    
-00021a40: 5374 6166 6620 6772 6f75 702e 0a0a 2020  Staff group...  
-00021a50: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
-00021a60: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
-00021a70: 2020 203e 3e3e 2073 7461 6666 5f31 203d     >>> staff_1 =
-00021a80: 2061 626a 6164 2e53 7461 6666 2822 6327   abjad.Staff("c'
-00021a90: 3420 6427 3420 6527 3420 6627 3420 6727  4 d'4 e'4 f'4 g'
-00021aa0: 3122 290a 2020 2020 2020 2020 3e3e 3e20  1").        >>> 
-00021ab0: 7374 6166 665f 3220 3d20 6162 6a61 642e  staff_2 = abjad.
-00021ac0: 5374 6166 6628 2267 3220 6632 2065 3122  Staff("g2 f2 e1"
-00021ad0: 290a 2020 2020 2020 2020 3e3e 3e20 7374  ).        >>> st
-00021ae0: 6166 665f 6772 6f75 7020 3d20 6162 6a61  aff_group = abja
-00021af0: 642e 5374 6166 6647 726f 7570 285b 7374  d.StaffGroup([st
-00021b00: 6166 665f 312c 2073 7461 6666 5f32 5d29  aff_1, staff_2])
-00021b10: 0a20 2020 2020 2020 203e 3e3e 2061 626a  .        >>> abj
-00021b20: 6164 2e73 686f 7728 7374 6166 665f 6772  ad.show(staff_gr
-00021b30: 6f75 7029 2023 2064 6f63 7465 7374 3a20  oup) # doctest: 
-00021b40: 2b53 4b49 500a 0a20 2020 2020 2020 202e  +SKIP..        .
-00021b50: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
-00021b60: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
-00021b70: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
-00021b80: 6e64 2873 7461 6666 5f67 726f 7570 290a  nd(staff_group).
-00021b90: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00021ba0: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
-00021bb0: 2020 2020 2020 2020 2020 5c6e 6577 2053            \new S
-00021bc0: 7461 6666 4772 6f75 700a 2020 2020 2020  taffGroup.      
-00021bd0: 2020 2020 2020 3c3c 0a20 2020 2020 2020        <<.       
-00021be0: 2020 2020 2020 2020 205c 6e65 7720 5374           \new St
-00021bf0: 6166 660a 2020 2020 2020 2020 2020 2020  aff.            
-00021c00: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-00021c10: 2020 2020 2020 2020 2020 6327 340a 2020            c'4.  
-00021c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021c30: 2020 6427 340a 2020 2020 2020 2020 2020    d'4.          
-00021c40: 2020 2020 2020 2020 2020 6527 340a 2020            e'4.  
-00021c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021c60: 2020 6627 340a 2020 2020 2020 2020 2020    f'4.          
-00021c70: 2020 2020 2020 2020 2020 6727 310a 2020            g'1.  
-00021c80: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-00021c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021ca0: 5c6e 6577 2053 7461 6666 0a20 2020 2020  \new Staff.     
-00021cb0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-00021cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021cd0: 2067 320a 2020 2020 2020 2020 2020 2020   g2.            
-00021ce0: 2020 2020 2020 2020 6632 0a20 2020 2020          f2.     
-00021cf0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00021d00: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
-00021d10: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-00021d20: 3e3e 0a0a 2020 2020 2222 220a 0a20 2020  >>..    """..   
-00021d30: 205f 5f64 6f63 756d 656e 7461 7469 6f6e   __documentation
-00021d40: 5f73 6563 7469 6f6e 5f5f 203d 2022 436f  _section__ = "Co
-00021d50: 6e74 6578 7473 220a 0a20 2020 205f 5f73  ntexts"..    __s
-00021d60: 6c6f 7473 5f5f 203d 2028 290a 0a20 2020  lots__ = ()..   
-00021d70: 205f 6465 6661 756c 745f 6c69 6c79 706f   _default_lilypo
-00021d80: 6e64 5f74 7970 6520 3d20 2253 7461 6666  nd_type = "Staff
-00021d90: 4772 6f75 7022 0a0a 2020 2020 2320 544f  Group"..    # TO
-00021da0: 444f 3a20 6d61 6b65 206b 6579 776f 7264  DO: make keyword
-00021db0: 7320 6d61 6e64 6174 6f72 790a 2020 2020  s mandatory.    
-00021dc0: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
-00021dd0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-00021de0: 2020 2020 636f 6d70 6f6e 656e 7473 3d4e      components=N
-00021df0: 6f6e 652c 0a20 2020 2020 2020 206c 696c  one,.        lil
-00021e00: 7970 6f6e 645f 7479 7065 3a20 7374 7220  ypond_type: str 
-00021e10: 3d20 2253 7461 6666 4772 6f75 7022 2c0a  = "StaffGroup",.
-00021e20: 2020 2020 2020 2020 7369 6d75 6c74 616e          simultan
-00021e30: 656f 7573 3a20 626f 6f6c 203d 2054 7275  eous: bool = Tru
-00021e40: 652c 0a20 2020 2020 2020 206e 616d 653a  e,.        name:
-00021e50: 2073 7472 203d 204e 6f6e 652c 0a20 2020   str = None,.   
-00021e60: 2020 2020 2074 6167 3a20 5f74 6167 2e54       tag: _tag.T
-00021e70: 6167 203d 204e 6f6e 652c 0a20 2020 2020  ag = None,.     
-00021e80: 2020 202a 2c0a 2020 2020 2020 2020 6c61     *,.        la
-00021e90: 6e67 7561 6765 3a20 7374 7220 3d20 2265  nguage: str = "e
-00021ea0: 6e67 6c69 7368 222c 0a20 2020 2029 202d  nglish",.    ) -
-00021eb0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-00021ec0: 436f 6e74 6578 742e 5f5f 696e 6974 5f5f  Context.__init__
-00021ed0: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
-00021ee0: 6c66 2c0a 2020 2020 2020 2020 2020 2020  lf,.            
-00021ef0: 636f 6d70 6f6e 656e 7473 3d63 6f6d 706f  components=compo
-00021f00: 6e65 6e74 732c 0a20 2020 2020 2020 2020  nents,.         
-00021f10: 2020 206c 616e 6775 6167 653d 6c61 6e67     language=lang
-00021f20: 7561 6765 2c0a 2020 2020 2020 2020 2020  uage,.          
-00021f30: 2020 6c69 6c79 706f 6e64 5f74 7970 653d    lilypond_type=
-00021f40: 6c69 6c79 706f 6e64 5f74 7970 652c 0a20  lilypond_type,. 
-00021f50: 2020 2020 2020 2020 2020 2073 696d 756c             simul
-00021f60: 7461 6e65 6f75 733d 7369 6d75 6c74 616e  taneous=simultan
-00021f70: 656f 7573 2c0a 2020 2020 2020 2020 2020  eous,.          
-00021f80: 2020 6e61 6d65 3d6e 616d 652c 0a20 2020    name=name,.   
-00021f90: 2020 2020 2020 2020 2074 6167 3d74 6167           tag=tag
-00021fa0: 2c0a 2020 2020 2020 2020 290a 0a0a 636c  ,.        )...cl
-00021fb0: 6173 7320 5472 656d 6f6c 6f43 6f6e 7461  ass TremoloConta
-00021fc0: 696e 6572 2843 6f6e 7461 696e 6572 293a  iner(Container):
-00021fd0: 0a20 2020 2072 2222 220a 2020 2020 5472  .    r""".    Tr
-00021fe0: 656d 6f6c 6f20 636f 6e74 6169 6e65 722e  emolo container.
-00021ff0: 0a0a 2020 2020 2e2e 2020 636f 6e74 6169  ..    ..  contai
-00022000: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-00022010: 2020 2020 2020 203e 3e3e 2073 7461 6666         >>> staff
-00022020: 203d 2061 626a 6164 2e53 7461 6666 2829   = abjad.Staff()
-00022030: 0a20 2020 2020 2020 203e 3e3e 2073 7461  .        >>> sta
-00022040: 6666 2e61 7070 656e 6428 6162 6a61 642e  ff.append(abjad.
-00022050: 5472 656d 6f6c 6f43 6f6e 7461 696e 6572  TremoloContainer
-00022060: 2832 2c20 2263 2731 3620 6527 2229 290a  (2, "c'16 e'")).
-00022070: 2020 2020 2020 2020 3e3e 3e20 7374 6166          >>> staf
-00022080: 662e 6170 7065 6e64 2822 6373 2734 2229  f.append("cs'4")
-00022090: 0a20 2020 2020 2020 203e 3e3e 2073 7461  .        >>> sta
-000220a0: 6666 2e61 7070 656e 6428 6162 6a61 642e  ff.append(abjad.
-000220b0: 5472 656d 6f6c 6f43 6f6e 7461 696e 6572  TremoloContainer
-000220c0: 2832 2c20 2264 2731 3620 6627 2229 290a  (2, "d'16 f'")).
-000220d0: 2020 2020 2020 2020 3e3e 3e20 7374 6166          >>> staf
-000220e0: 662e 6170 7065 6e64 2822 6473 2734 2229  f.append("ds'4")
-000220f0: 0a20 2020 2020 2020 203e 3e3e 2061 626a  .        >>> abj
-00022100: 6164 2e73 686f 7728 7374 6166 6629 2023  ad.show(staff) #
-00022110: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
-00022120: 0a20 2020 2020 2020 202e 2e20 2064 6f63  .        ..  doc
-00022130: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
-00022140: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-00022150: 6a61 642e 6c69 6c79 706f 6e64 2873 7461  jad.lilypond(sta
-00022160: 6666 290a 2020 2020 2020 2020 2020 2020  ff).            
-00022170: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-00022180: 290a 2020 2020 2020 2020 2020 2020 5c6e  ).            \n
-00022190: 6577 2053 7461 6666 0a20 2020 2020 2020  ew Staff.       
-000221a0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-000221b0: 2020 2020 2020 205c 7265 7065 6174 2074         \repeat t
-000221c0: 7265 6d6f 6c6f 2032 207b 0a20 2020 2020  remolo 2 {.     
-000221d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-000221e0: 2731 360a 2020 2020 2020 2020 2020 2020  '16.            
-000221f0: 2020 2020 2020 2020 6527 3136 0a20 2020          e'16.   
-00022200: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
-00022210: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00022220: 7327 340a 2020 2020 2020 2020 2020 2020  s'4.            
-00022230: 2020 2020 5c72 6570 6561 7420 7472 656d      \repeat trem
-00022240: 6f6c 6f20 3220 7b0a 2020 2020 2020 2020  olo 2 {.        
-00022250: 2020 2020 2020 2020 2020 2020 6427 3136              d'16
-00022260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022270: 2020 2020 2066 2731 360a 2020 2020 2020       f'16.      
-00022280: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00022290: 2020 2020 2020 2020 2020 2020 6473 2734              ds'4
-000222a0: 0a20 2020 2020 2020 2020 2020 207d 0a0a  .            }..
-000222b0: 2020 2020 2020 2020 4475 7261 7469 6f6e          Duration
-000222c0: 206f 6620 636f 6e74 6169 6e65 7220 6571   of container eq
-000222d0: 7561 6c20 746f 2063 6f6e 7465 6e74 7320  ual to contents 
-000222e0: 6475 7261 7469 6f6e 206d 756c 7469 706c  duration multipl
-000222f0: 6965 6420 6279 2063 6f75 6e74 3a0a 0a20  ied by count:.. 
-00022300: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-00022310: 2e67 6574 2e64 7572 6174 696f 6e28 7374  .get.duration(st
-00022320: 6166 665b 305d 290a 2020 2020 2020 2020  aff[0]).        
-00022330: 4475 7261 7469 6f6e 2831 2c20 3429 0a0a  Duration(1, 4)..
-00022340: 2020 2020 2020 2020 4475 7261 7469 6f6e          Duration
-00022350: 206f 6620 6561 6368 206c 6561 6620 6571   of each leaf eq
-00022360: 7561 6c20 746f 2077 7269 7474 656e 2064  ual to written d
-00022370: 7572 6174 696f 6e20 6d75 6c74 6970 6c69  uration multipli
-00022380: 6564 2062 7920 636f 756e 743a 0a0a 2020  ed by count:..  
-00022390: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-000223a0: 6765 742e 6475 7261 7469 6f6e 2873 7461  get.duration(sta
-000223b0: 6666 5b30 5d5b 305d 290a 2020 2020 2020  ff[0][0]).      
-000223c0: 2020 4475 7261 7469 6f6e 2831 2c20 3829    Duration(1, 8)
-000223d0: 0a0a 2020 2020 2222 220a 0a20 2020 205f  ..    """..    _
-000223e0: 5f64 6f63 756d 656e 7461 7469 6f6e 5f73  _documentation_s
-000223f0: 6563 7469 6f6e 5f5f 203d 2022 436f 6e74  ection__ = "Cont
-00022400: 6169 6e65 7273 220a 0a20 2020 205f 5f73  ainers"..    __s
-00022410: 6c6f 7473 5f5f 203d 2028 225f 636f 756e  lots__ = ("_coun
-00022420: 7422 2c29 0a0a 2020 2020 6465 6620 5f5f  t",)..    def __
-00022430: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-00022440: 7365 6c66 2c0a 2020 2020 2020 2020 636f  self,.        co
-00022450: 756e 743a 2069 6e74 203d 2032 2c0a 2020  unt: int = 2,.  
-00022460: 2020 2020 2020 636f 6d70 6f6e 656e 7473        components
-00022470: 3d4e 6f6e 652c 0a20 2020 2020 2020 202a  =None,.        *
-00022480: 2c0a 2020 2020 2020 2020 6c61 6e67 7561  ,.        langua
-00022490: 6765 3a20 7374 7220 3d20 2265 6e67 6c69  ge: str = "engli
-000224a0: 7368 222c 0a20 2020 2020 2020 2074 6167  sh",.        tag
-000224b0: 3a20 5f74 6167 2e54 6167 203d 204e 6f6e  : _tag.Tag = Non
-000224c0: 652c 0a20 2020 2029 202d 3e20 4e6f 6e65  e,.    ) -> None
-000224d0: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
-000224e0: 205f 6d61 7468 2e69 735f 6173 7369 676e   _math.is_assign
-000224f0: 6162 6c65 5f69 6e74 6567 6572 2863 6f75  able_integer(cou
-00022500: 6e74 292c 2072 6570 7228 636f 756e 7429  nt), repr(count)
-00022510: 0a20 2020 2020 2020 2073 656c 662e 5f63  .        self._c
-00022520: 6f75 6e74 203d 2063 6f75 6e74 0a20 2020  ount = count.   
-00022530: 2020 2020 2043 6f6e 7461 696e 6572 2e5f       Container._
-00022540: 5f69 6e69 745f 5f28 7365 6c66 2c20 636f  _init__(self, co
-00022550: 6d70 6f6e 656e 7473 2c20 6c61 6e67 7561  mponents, langua
-00022560: 6765 3d6c 616e 6775 6167 652c 2074 6167  ge=language, tag
-00022570: 3d74 6167 290a 2020 2020 2020 2020 6966  =tag).        if
-00022580: 206c 656e 2873 656c 6629 2021 3d20 323a   len(self) != 2:
-00022590: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-000225a0: 7365 2045 7863 6570 7469 6f6e 2866 226d  se Exception(f"m
-000225b0: 7573 7420 636f 6e74 6169 6e20 3220 6c65  ust contain 2 le
-000225c0: 6176 6573 2028 6e6f 7420 7b6c 656e 2873  aves (not {len(s
-000225d0: 656c 6629 7d22 290a 0a20 2020 2064 6566  elf)}")..    def
-000225e0: 205f 5f67 6574 6e65 7761 7267 735f 5f28   __getnewargs__(
-000225f0: 7365 6c66 2920 2d3e 2074 7570 6c65 3a0a  self) -> tuple:.
-00022600: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00022610: 2020 2020 4765 7473 206e 6577 2061 7267      Gets new arg
-00022620: 756d 656e 7473 206f 6620 7472 656d 6f6c  uments of tremol
-00022630: 6f20 636f 6e74 6169 6e65 722e 0a20 2020  o container..   
-00022640: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00022650: 2072 6574 7572 6e20 2873 656c 662e 636f   return (self.co
-00022660: 756e 742c 290a 0a20 2020 2064 6566 205f  unt,)..    def _
-00022670: 666f 726d 6174 5f6f 7065 6e5f 6272 6163  format_open_brac
-00022680: 6b65 7473 5f73 6974 6528 7365 6c66 2c20  kets_site(self, 
-00022690: 636f 6e74 7269 6275 7469 6f6e 7329 3a0a  contributions):.
-000226a0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-000226b0: 205b 5d0a 2020 2020 2020 2020 7374 7269   [].        stri
-000226c0: 6e67 203d 2072 6622 5c72 6570 6561 7420  ng = rf"\repeat 
-000226d0: 7472 656d 6f6c 6f20 7b73 656c 662e 636f  tremolo {self.co
-000226e0: 756e 747d 207b 7b22 0a20 2020 2020 2020  unt} {{".       
-000226f0: 2072 6573 756c 742e 6170 7065 6e64 2873   result.append(s
-00022700: 7472 696e 6729 0a20 2020 2020 2020 2072  tring).        r
-00022710: 6574 7572 6e20 7265 7375 6c74 0a0a 2020  eturn result..  
-00022720: 2020 6465 6620 5f67 6574 5f70 7265 7072    def _get_prepr
-00022730: 6f6c 6174 6564 5f64 7572 6174 696f 6e28  olated_duration(
-00022740: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-00022750: 6574 7572 6e20 7365 6c66 2e69 6d70 6c69  eturn self.impli
-00022760: 6564 5f70 726f 6c61 7469 6f6e 202a 2073  ed_prolation * s
-00022770: 656c 662e 5f67 6574 5f63 6f6e 7465 6e74  elf._get_content
-00022780: 735f 6475 7261 7469 6f6e 2829 0a0a 2020  s_duration()..  
-00022790: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
-000227a0: 6465 6620 636f 756e 7428 7365 6c66 2920  def count(self) 
-000227b0: 2d3e 2069 6e74 3a0a 2020 2020 2020 2020  -> int:.        
-000227c0: 2222 220a 2020 2020 2020 2020 4765 7473  """.        Gets
-000227d0: 2063 6f75 6e74 2e0a 0a20 2020 2020 2020   count...       
-000227e0: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
-000227f0: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
-00022800: 2020 2020 2020 3e3e 3e20 7472 656d 6f6c        >>> tremol
-00022810: 6f5f 636f 6e74 6169 6e65 7220 3d20 6162  o_container = ab
-00022820: 6a61 642e 5472 656d 6f6c 6f43 6f6e 7461  jad.TremoloConta
-00022830: 696e 6572 2832 2c20 223c 6327 2064 273e  iner(2, "<c' d'>
-00022840: 3136 2065 2731 3622 290a 2020 2020 2020  16 e'16").      
-00022850: 2020 2020 2020 3e3e 3e20 7472 656d 6f6c        >>> tremol
-00022860: 6f5f 636f 6e74 6169 6e65 722e 636f 756e  o_container.coun
-00022870: 740a 2020 2020 2020 2020 2020 2020 320a  t.            2.
-00022880: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00022890: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000228a0: 2e5f 636f 756e 740a 0a20 2020 2040 7072  ._count..    @pr
-000228b0: 6f70 6572 7479 0a20 2020 2064 6566 2069  operty.    def i
-000228c0: 6d70 6c69 6564 5f70 726f 6c61 7469 6f6e  mplied_prolation
-000228d0: 2873 656c 6629 202d 3e20 5f64 7572 6174  (self) -> _durat
-000228e0: 696f 6e2e 4d75 6c74 6970 6c69 6572 3a0a  ion.Multiplier:.
-000228f0: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
-00022900: 2020 2020 2047 6574 7320 696d 706c 6965       Gets implie
-00022910: 6420 7072 6f6c 6174 696f 6e20 6f66 2074  d prolation of t
-00022920: 7265 6d6f 6c6f 2063 6f6e 7461 696e 6572  remolo container
-00022930: 2e0a 0a20 2020 2020 2020 202e 2e20 2063  ...        ..  c
-00022940: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
-00022950: 6c65 0a0a 2020 2020 2020 2020 2020 2020  le..            
-00022960: 4465 6669 6e65 6420 6571 7561 6c20 746f  Defined equal to
-00022970: 2063 6f75 6e74 2e0a 0a20 2020 2020 2020   count...       
-00022980: 2020 2020 203e 3e3e 2074 7265 6d6f 6c6f       >>> tremolo
-00022990: 5f63 6f6e 7461 696e 6572 203d 2061 626a  _container = abj
-000229a0: 6164 2e54 7265 6d6f 6c6f 436f 6e74 6169  ad.TremoloContai
-000229b0: 6e65 7228 322c 2022 3c63 2720 6427 3e31  ner(2, "<c' d'>1
-000229c0: 3620 6527 3136 2229 0a20 2020 2020 2020  6 e'16").       
-000229d0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-000229e0: 686f 7728 7472 656d 6f6c 6f5f 636f 6e74  how(tremolo_cont
-000229f0: 6169 6e65 7229 2023 2064 6f63 7465 7374  ainer) # doctest
-00022a00: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-00022a10: 2020 2020 203e 3e3e 2074 7265 6d6f 6c6f       >>> tremolo
-00022a20: 5f63 6f6e 7461 696e 6572 2e69 6d70 6c69  _container.impli
-00022a30: 6564 5f70 726f 6c61 7469 6f6e 0a20 2020  ed_prolation.   
-00022a40: 2020 2020 2020 2020 204d 756c 7469 706c           Multipl
-00022a50: 6965 7228 322c 2031 290a 0a20 2020 2020  ier(2, 1)..     
-00022a60: 2020 2022 2222 0a20 2020 2020 2020 206d     """.        m
-00022a70: 756c 7469 706c 6965 7220 3d20 5f64 7572  ultiplier = _dur
-00022a80: 6174 696f 6e2e 4d75 6c74 6970 6c69 6572  ation.Multiplier
-00022a90: 2873 656c 662e 636f 756e 7429 0a20 2020  (self.count).   
-00022aa0: 2020 2020 2072 6574 7572 6e20 6d75 6c74       return mult
-00022ab0: 6970 6c69 6572 0a0a 0a63 6c61 7373 2054  iplier...class T
-00022ac0: 7570 6c65 7428 436f 6e74 6169 6e65 7229  uplet(Container)
-00022ad0: 3a0a 2020 2020 7222 2222 0a20 2020 2054  :.    r""".    T
-00022ae0: 7570 6c65 742e 0a0a 2020 2020 2e2e 2020  uplet...    ..  
-00022af0: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-00022b00: 706c 650a 0a20 2020 2020 2020 2041 2074  ple..        A t
-00022b10: 7570 6c65 743a 0a0a 2020 2020 2020 2020  uplet:..        
-00022b20: 3e3e 3e20 7475 706c 6574 203d 2061 626a  >>> tuplet = abj
-00022b30: 6164 2e54 7570 6c65 7428 2236 3a34 222c  ad.Tuplet("6:4",
-00022b40: 2022 6327 3820 6427 3820 6527 3822 290a   "c'8 d'8 e'8").
-00022b50: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-00022b60: 642e 7368 6f77 2874 7570 6c65 7429 2023  d.show(tuplet) #
-00022b70: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
-00022b80: 0a20 2020 2020 2020 202e 2e20 2064 6f63  .        ..  doc
-00022b90: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
-00022ba0: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-00022bb0: 6a61 642e 6c69 6c79 706f 6e64 2874 7570  jad.lilypond(tup
-00022bc0: 6c65 7429 0a20 2020 2020 2020 2020 2020  let).           
-00022bd0: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-00022be0: 6729 0a20 2020 2020 2020 2020 2020 205c  g).            \
-00022bf0: 7469 6d65 7320 342f 360a 2020 2020 2020  times 4/6.      
-00022c00: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00022c10: 2020 2020 2020 2020 6327 380a 2020 2020          c'8.    
-00022c20: 2020 2020 2020 2020 2020 2020 6427 380a              d'8.
-00022c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022c40: 6527 380a 2020 2020 2020 2020 2020 2020  e'8.            
-00022c50: 7d0a 0a20 2020 202e 2e20 2063 6f6e 7461  }..    ..  conta
-00022c60: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
-00022c70: 2020 2020 2020 2020 4120 6e65 7374 6564          A nested
-00022c80: 2074 7570 6c65 743a 0a0a 2020 2020 2020   tuplet:..      
-00022c90: 2020 3e3e 3e20 7365 636f 6e64 5f74 7570    >>> second_tup
-00022ca0: 6c65 7420 3d20 6162 6a61 642e 5475 706c  let = abjad.Tupl
-00022cb0: 6574 2822 373a 3422 2c20 2267 2734 2e20  et("7:4", "g'4. 
-00022cc0: 2820 6127 3136 2029 2229 0a20 2020 2020  ( a'16 )").     
-00022cd0: 2020 203e 3e3e 2074 7570 6c65 742e 696e     >>> tuplet.in
-00022ce0: 7365 7274 2831 2c20 7365 636f 6e64 5f74  sert(1, second_t
-00022cf0: 7570 6c65 7429 0a20 2020 2020 2020 203e  uplet).        >
-00022d00: 3e3e 2061 626a 6164 2e73 686f 7728 7475  >> abjad.show(tu
-00022d10: 706c 6574 2920 2320 646f 6374 6573 743a  plet) # doctest:
-00022d20: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
-00022d30: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
-00022d40: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
-00022d50: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
-00022d60: 6f6e 6428 7475 706c 6574 290a 2020 2020  ond(tuplet).    
-00022d70: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-00022d80: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-00022d90: 2020 2020 2020 5c74 7765 616b 2065 6467        \tweak edg
-00022da0: 652d 6865 6967 6874 2023 2728 302e 3720  e-height #'(0.7 
-00022db0: 2e20 3029 0a20 2020 2020 2020 2020 2020  . 0).           
-00022dc0: 205c 7469 6d65 7320 342f 360a 2020 2020   \times 4/6.    
-00022dd0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-00022de0: 2020 2020 2020 2020 2020 6327 380a 2020            c'8.  
-00022df0: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-00022e00: 696d 6573 2034 2f37 0a20 2020 2020 2020  imes 4/7.       
-00022e10: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00022e20: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-00022e30: 2734 2e0a 2020 2020 2020 2020 2020 2020  '4..            
-00022e40: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
-00022e50: 2020 2020 2020 2020 2020 2020 2020 6127                a'
-00022e60: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
-00022e70: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00022e80: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-00022e90: 2020 2020 2020 2020 2020 2064 2738 0a20             d'8. 
-00022ea0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00022eb0: 2738 0a20 2020 2020 2020 2020 2020 207d  '8.            }
-00022ec0: 0a0a 0a20 2020 202e 2e20 2063 6f6e 7461  ...    ..  conta
-00022ed0: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
-00022ee0: 2020 2020 2020 2020 4120 646f 7562 6c79          A doubly
-00022ef0: 206e 6573 7465 6420 7475 706c 6574 3a0a   nested tuplet:.
-00022f00: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00022f10: 2074 6869 7264 5f74 7570 6c65 7420 3d20   third_tuplet = 
-00022f20: 6162 6a61 642e 5475 706c 6574 2822 353a  abjad.Tuplet("5:
-00022f30: 3422 2c20 5b5d 290a 2020 2020 2020 2020  4", []).        
-00022f40: 2020 2020 3e3e 3e20 7468 6972 645f 7475      >>> third_tu
-00022f50: 706c 6574 2e65 7874 656e 6428 2265 2727  plet.extend("e''
-00022f60: 3332 205b 2065 6627 2733 3220 6427 2733  32 [ ef''32 d''3
-00022f70: 3220 6373 2727 3332 2063 7173 2727 3332  2 cs''32 cqs''32
-00022f80: 205d 2229 0a20 2020 2020 2020 2020 2020   ]").           
-00022f90: 203e 3e3e 2073 6563 6f6e 645f 7475 706c   >>> second_tupl
-00022fa0: 6574 2e69 6e73 6572 7428 312c 2074 6869  et.insert(1, thi
-00022fb0: 7264 5f74 7570 6c65 7429 0a20 2020 2020  rd_tuplet).     
-00022fc0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-00022fd0: 2e73 686f 7728 7475 706c 6574 2920 2320  .show(tuplet) # 
-00022fe0: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
-00022ff0: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-00023000: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-00023010: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
-00023020: 6164 2e6c 696c 7970 6f6e 6428 7475 706c  ad.lilypond(tupl
-00023030: 6574 290a 2020 2020 2020 2020 2020 2020  et).            
-00023040: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-00023050: 290a 2020 2020 2020 2020 2020 2020 5c74  ).            \t
-00023060: 7765 616b 2065 6467 652d 6865 6967 6874  weak edge-height
-00023070: 2023 2728 302e 3720 2e20 3029 0a20 2020   #'(0.7 . 0).   
-00023080: 2020 2020 2020 2020 205c 7469 6d65 7320           \times 
-00023090: 342f 360a 2020 2020 2020 2020 2020 2020  4/6.            
-000230a0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-000230b0: 2020 6327 380a 2020 2020 2020 2020 2020    c'8.          
-000230c0: 2020 2020 2020 5c74 7765 616b 2065 6467        \tweak edg
-000230d0: 652d 6865 6967 6874 2023 2728 302e 3720  e-height #'(0.7 
-000230e0: 2e20 3029 0a20 2020 2020 2020 2020 2020  . 0).           
-000230f0: 2020 2020 205c 7469 6d65 7320 342f 370a       \times 4/7.
-00023100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023110: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-00023120: 2020 2020 2020 6727 342e 0a20 2020 2020        g'4..     
-00023130: 2020 2020 2020 2020 2020 2020 2020 2028                 (
-00023140: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023150: 2020 2020 205c 7469 6d65 7320 342f 350a       \times 4/5.
-00023160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023170: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-00023180: 2020 2020 2020 2020 2020 2020 2020 6527                e'
-00023190: 2733 320a 2020 2020 2020 2020 2020 2020  '32.            
-000231a0: 2020 2020 2020 2020 2020 2020 5b0a 2020              [.  
-000231b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000231c0: 2020 2020 2020 6566 2727 3332 0a20 2020        ef''32.   
-000231d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000231e0: 2020 2020 2064 2727 3332 0a20 2020 2020       d''32.     
-000231f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023200: 2020 2063 7327 2733 320a 2020 2020 2020     cs''32.      
-00023210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023220: 2020 6371 7327 2733 320a 2020 2020 2020    cqs''32.      
-00023230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023240: 2020 5d0a 2020 2020 2020 2020 2020 2020    ].            
-00023250: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00023260: 2020 2020 2020 2020 2020 2020 2020 6127                a'
-00023270: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
-00023280: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00023290: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-000232a0: 2020 2020 2020 2020 2020 2064 2738 0a20             d'8. 
-000232b0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000232c0: 2738 0a20 2020 2020 2020 2020 2020 207d  '8.            }
-000232d0: 0a0a 2020 2020 2e2e 2020 636f 6e74 6169  ..    ..  contai
-000232e0: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-000232f0: 2020 2020 2020 2053 656c 6563 7473 206c         Selects l
-00023300: 616e 6775 6167 653a 0a0a 2020 2020 2020  anguage:..      
-00023310: 2020 3e3e 3e20 6162 6a61 642e 5475 706c    >>> abjad.Tupl
-00023320: 6574 2822 363a 3422 2c20 2264 6f27 3220  et("6:4", "do'2 
-00023330: 646f 6427 2072 6527 222c 206c 616e 6775  dod' re'", langu
-00023340: 6167 653d 2266 7261 6ec3 a761 6973 2229  age="fran..ais")
-00023350: 0a20 2020 2020 2020 2054 7570 6c65 7428  .        Tuplet(
-00023360: 2736 3a34 272c 2022 6327 3220 6373 2732  '6:4', "c'2 cs'2
-00023370: 2064 2732 2229 0a0a 2020 2020 2e2e 2020   d'2")..    ..  
-00023380: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-00023390: 706c 650a 0a20 2020 2020 2020 2054 7570  ple..        Tup
-000233a0: 6c65 7473 2063 616e 2062 6520 656e 7465  lets can be ente
-000233b0: 7265 6420 6173 204c 696c 7950 6f6e 6420  red as LilyPond 
-000233c0: 696e 7075 743a 0a0a 2020 2020 2020 2020  input:..        
-000233d0: 3e3e 3e20 766f 6963 6520 3d20 6162 6a61  >>> voice = abja
-000233e0: 642e 566f 6963 6528 7222 5c74 7570 6c65  d.Voice(r"\tuple
-000233f0: 7420 362f 3420 7b20 6327 3420 6427 2065  t 6/4 { c'4 d' e
-00023400: 2720 7d22 290a 2020 2020 2020 2020 3e3e  ' }").        >>
-00023410: 3e20 6162 6a61 642e 7368 6f77 2876 6f69  > abjad.show(voi
-00023420: 6365 2920 2320 646f 6374 6573 743a 202b  ce) # doctest: +
-00023430: 534b 4950 0a0a 2020 2020 2020 2020 2e2e  SKIP..        ..
-00023440: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
-00023450: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-00023460: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-00023470: 6428 766f 6963 6529 0a20 2020 2020 2020  d(voice).       
-00023480: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-00023490: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-000234a0: 2020 205c 6e65 7720 566f 6963 650a 2020     \new Voice.  
-000234b0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-000234c0: 2020 2020 2020 2020 2020 2020 5c74 696d              \tim
-000234d0: 6573 2034 2f36 0a20 2020 2020 2020 2020  es 4/6.         
-000234e0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-000234f0: 2020 2020 2020 2020 2020 2020 2063 2734               c'4
-00023500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023510: 2020 2020 2064 2734 0a20 2020 2020 2020       d'4.       
-00023520: 2020 2020 2020 2020 2020 2020 2065 2734               e'4
-00023530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023540: 207d 0a20 2020 2020 2020 2020 2020 207d   }.            }
-00023550: 0a0a 2020 2020 2020 2020 3e3e 3e20 766f  ..        >>> vo
-00023560: 6963 6520 3d20 6162 6a61 642e 566f 6963  ice = abjad.Voic
-00023570: 6528 7222 5c74 696d 6573 2034 2f36 207b  e(r"\times 4/6 {
-00023580: 2063 2734 2064 2720 6527 207d 2229 0a20   c'4 d' e' }"). 
-00023590: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-000235a0: 2e73 686f 7728 766f 6963 6529 2023 2064  .show(voice) # d
-000235b0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
-000235c0: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-000235d0: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-000235e0: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
-000235f0: 642e 6c69 6c79 706f 6e64 2876 6f69 6365  d.lilypond(voice
-00023600: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00023610: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-00023620: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
-00023630: 2056 6f69 6365 0a20 2020 2020 2020 2020   Voice.         
-00023640: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00023650: 2020 2020 205c 7469 6d65 7320 342f 360a       \times 4/6.
-00023660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023670: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-00023680: 2020 2020 2020 6327 340a 2020 2020 2020        c'4.      
-00023690: 2020 2020 2020 2020 2020 2020 2020 6427                d'
-000236a0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-000236b0: 2020 2020 2020 6527 340a 2020 2020 2020        e'4.      
-000236c0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-000236d0: 2020 2020 2020 2020 7d0a 0a20 2020 202e          }..    .
-000236e0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-000236f0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-00023700: 3e3e 3e20 7475 706c 6574 5f31 203d 2061  >>> tuplet_1 = a
-00023710: 626a 6164 2e54 7570 6c65 7428 2832 2c20  bjad.Tuplet((2, 
-00023720: 3329 2c20 2263 2734 2028 2064 2734 2065  3), "c'4 ( d'4 e
-00023730: 2734 2029 2229 0a20 2020 2020 2020 203e  '4 )").        >
-00023740: 3e3e 2061 626a 6164 2e74 7765 616b 2874  >> abjad.tweak(t
-00023750: 7570 6c65 745f 312c 2072 225c 7477 6561  uplet_1, r"\twea
-00023760: 6b20 636f 6c6f 7220 2372 6564 2229 0a20  k color #red"). 
-00023770: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-00023780: 2e74 7765 616b 2874 7570 6c65 745f 312c  .tweak(tuplet_1,
-00023790: 2072 225c 7477 6561 6b20 7374 6166 662d   r"\tweak staff-
-000237a0: 7061 6464 696e 6720 3222 290a 0a20 2020  padding 2")..   
-000237b0: 2020 2020 203e 3e3e 2074 7570 6c65 745f       >>> tuplet_
-000237c0: 3220 3d20 6162 6a61 642e 5475 706c 6574  2 = abjad.Tuplet
-000237d0: 2828 322c 2033 292c 2022 6327 3420 2820  ((2, 3), "c'4 ( 
-000237e0: 6427 3420 6527 3420 2922 290a 2020 2020  d'4 e'4 )").    
-000237f0: 2020 2020 3e3e 3e20 6162 6a61 642e 7477      >>> abjad.tw
-00023800: 6561 6b28 7475 706c 6574 5f32 2c20 7222  eak(tuplet_2, r"
-00023810: 5c74 7765 616b 2063 6f6c 6f72 2023 6772  \tweak color #gr
-00023820: 6565 6e22 290a 2020 2020 2020 2020 3e3e  een").        >>
-00023830: 3e20 6162 6a61 642e 7477 6561 6b28 7475  > abjad.tweak(tu
-00023840: 706c 6574 5f32 2c20 7222 5c74 7765 616b  plet_2, r"\tweak
-00023850: 2073 7461 6666 2d70 6164 6469 6e67 2032   staff-padding 2
-00023860: 2229 0a0a 2020 2020 2020 2020 3e3e 3e20  ")..        >>> 
-00023870: 7475 706c 6574 5f33 203d 2061 626a 6164  tuplet_3 = abjad
-00023880: 2e54 7570 6c65 7428 2835 2c20 3429 2c20  .Tuplet((5, 4), 
-00023890: 5b74 7570 6c65 745f 312c 2074 7570 6c65  [tuplet_1, tuple
-000238a0: 745f 325d 290a 2020 2020 2020 2020 3e3e  t_2]).        >>
-000238b0: 3e20 6162 6a61 642e 7477 6561 6b28 7475  > abjad.tweak(tu
-000238c0: 706c 6574 5f33 2c20 7222 5c74 7765 616b  plet_3, r"\tweak
-000238d0: 2063 6f6c 6f72 2023 626c 7565 2229 0a20   color #blue"). 
-000238e0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-000238f0: 2e74 7765 616b 2874 7570 6c65 745f 332c  .tweak(tuplet_3,
-00023900: 2072 225c 7477 6561 6b20 7374 6166 662d   r"\tweak staff-
-00023910: 7061 6464 696e 6720 3422 290a 0a20 2020  padding 4")..   
-00023920: 2020 2020 203e 3e3e 2073 7461 6666 203d       >>> staff =
-00023930: 2061 626a 6164 2e53 7461 6666 285b 7475   abjad.Staff([tu
-00023940: 706c 6574 5f33 5d29 0a20 2020 2020 2020  plet_3]).       
-00023950: 203e 3e3e 206c 6561 7665 7320 3d20 6162   >>> leaves = ab
-00023960: 6a61 642e 7365 6c65 6374 2e6c 6561 7665  jad.select.leave
-00023970: 7328 7374 6166 6629 0a20 2020 2020 2020  s(staff).       
-00023980: 203e 3e3e 2061 626a 6164 2e61 7474 6163   >>> abjad.attac
-00023990: 6828 6162 6a61 642e 5469 6d65 5369 676e  h(abjad.TimeSign
-000239a0: 6174 7572 6528 2835 2c20 3429 292c 206c  ature((5, 4)), l
-000239b0: 6561 7665 735b 305d 290a 2020 2020 2020  eaves[0]).      
-000239c0: 2020 3e3e 3e20 6c69 7465 7261 6c20 3d20    >>> literal = 
-000239d0: 6162 6a61 642e 4c69 6c79 506f 6e64 4c69  abjad.LilyPondLi
-000239e0: 7465 7261 6c28 7227 5c73 6574 2074 7570  teral(r'\set tup
-000239f0: 6c65 7446 756c 6c4c 656e 6774 6820 3d20  letFullLength = 
-00023a00: 2323 7427 290a 2020 2020 2020 2020 3e3e  ##t').        >>
-00023a10: 3e20 6162 6a61 642e 6174 7461 6368 286c  > abjad.attach(l
-00023a20: 6974 6572 616c 2c20 7374 6166 6629 0a20  iteral, staff). 
-00023a30: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-00023a40: 2e73 686f 7728 7374 6166 6629 2023 2064  .show(staff) # d
-00023a50: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
-00023a60: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-00023a70: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-00023a80: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
-00023a90: 642e 6c69 6c79 706f 6e64 2873 7461 6666  d.lilypond(staff
-00023aa0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00023ab0: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-00023ac0: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
-00023ad0: 2053 7461 6666 0a20 2020 2020 2020 2020   Staff.         
-00023ae0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00023af0: 2020 2020 205c 7365 7420 7475 706c 6574       \set tuplet
-00023b00: 4675 6c6c 4c65 6e67 7468 203d 2023 2374  FullLength = ##t
-00023b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023b20: 205c 7477 6561 6b20 7465 7874 2023 7475   \tweak text #tu
-00023b30: 706c 6574 2d6e 756d 6265 723a 3a63 616c  plet-number::cal
-00023b40: 632d 6672 6163 7469 6f6e 2d74 6578 740a  c-fraction-text.
-00023b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023b60: 5c74 7765 616b 2063 6f6c 6f72 2023 626c  \tweak color #bl
-00023b70: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-00023b80: 2020 205c 7477 6561 6b20 7374 6166 662d     \tweak staff-
-00023b90: 7061 6464 696e 6720 340a 2020 2020 2020  padding 4.      
-00023ba0: 2020 2020 2020 2020 2020 5c74 696d 6573            \times
-00023bb0: 2035 2f34 0a20 2020 2020 2020 2020 2020   5/4.           
-00023bc0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00023bd0: 2020 2020 2020 2020 2020 205c 7477 6561             \twea
-00023be0: 6b20 636f 6c6f 7220 2372 6564 0a20 2020  k color #red.   
-00023bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023c00: 205c 7477 6561 6b20 7374 6166 662d 7061   \tweak staff-pa
-00023c10: 6464 696e 6720 320a 2020 2020 2020 2020  dding 2.        
-00023c20: 2020 2020 2020 2020 2020 2020 5c74 696d              \tim
-00023c30: 6573 2032 2f33 0a20 2020 2020 2020 2020  es 2/3.         
-00023c40: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-00023c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023c60: 2020 2020 205c 7469 6d65 2035 2f34 0a20       \time 5/4. 
-00023c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023c80: 2020 2020 2020 2063 2734 0a20 2020 2020         c'4.     
-00023c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023ca0: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
-00023cb0: 2020 2020 2020 2020 2020 2020 2064 2734               d'4
-00023cc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023cd0: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
-00023ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023cf0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00023d00: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-00023d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023d20: 205c 7477 6561 6b20 636f 6c6f 7220 2367   \tweak color #g
-00023d30: 7265 656e 0a20 2020 2020 2020 2020 2020  reen.           
-00023d40: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
-00023d50: 7374 6166 662d 7061 6464 696e 6720 320a  staff-padding 2.
-00023d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023d70: 2020 2020 5c74 696d 6573 2032 2f33 0a20      \times 2/3. 
-00023d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023d90: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00023da0: 2020 2020 2020 2020 2020 2020 2063 2734               c'4
-00023db0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023dc0: 2020 2020 2020 2020 2028 0a20 2020 2020           (.     
-00023dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023de0: 2020 2064 2734 0a20 2020 2020 2020 2020     d'4.         
-00023df0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00023e00: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00023e10: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00023e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023e30: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
-00023e40: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00023e50: 207d 0a0a 2020 2020 2020 2020 2e2e 2020   }..        ..  
-00023e60: 746f 646f 3a3a 2052 6570 6f72 7420 4c69  todo:: Report Li
-00023e70: 6c79 506f 6e64 2062 7567 2074 6861 7420  lyPond bug that 
-00023e80: 7265 7375 6c74 7320 6672 6f6d 2072 656d  results from rem
-00023e90: 6f76 696e 6720 7475 706c 6574 4675 6c6c  oving tupletFull
-00023ea0: 4c65 6e67 7468 0a20 2020 2020 2020 2020  Length.         
-00023eb0: 2020 2069 6e20 7468 6520 6578 616d 706c     in the exampl
-00023ec0: 6520 6162 6f76 653a 2062 6c75 6520 7475  e above: blue tu
-00023ed0: 706c 6574 2062 7261 636b 6574 2073 6872  plet bracket shr
-00023ee0: 696e 6b73 2074 6f20 656e 636f 6d70 6173  inks to encompas
-00023ef0: 7320 6f6e 6c79 2074 6865 0a20 2020 2020  s only the.     
-00023f00: 2020 2020 2020 2073 6563 6f6e 6420 756e         second un
-00023f10: 6465 726c 7969 6e67 2074 7570 6c65 742e  derlying tuplet.
-00023f20: 0a0a 2020 2020 2222 220a 0a20 2020 2023  ..    """..    #
-00023f30: 2323 2043 4c41 5353 2056 4152 4941 424c  ## CLASS VARIABL
-00023f40: 4553 2023 2323 0a0a 2020 2020 5f5f 646f  ES ###..    __do
-00023f50: 6375 6d65 6e74 6174 696f 6e5f 7365 6374  cumentation_sect
-00023f60: 696f 6e5f 5f20 3d20 2243 6f6e 7461 696e  ion__ = "Contain
-00023f70: 6572 7322 0a0a 2020 2020 5f5f 736c 6f74  ers"..    __slot
-00023f80: 735f 5f20 3d20 280a 2020 2020 2020 2020  s__ = (.        
-00023f90: 225f 6465 6e6f 6d69 6e61 746f 7222 2c0a  "_denominator",.
-00023fa0: 2020 2020 2020 2020 225f 666f 7263 655f          "_force_
-00023fb0: 6672 6163 7469 6f6e 222c 0a20 2020 2020  fraction",.     
-00023fc0: 2020 2022 5f68 6964 6522 2c0a 2020 2020     "_hide",.    
-00023fd0: 2020 2020 225f 6d75 6c74 6970 6c69 6572      "_multiplier
-00023fe0: 222c 0a20 2020 2020 2020 2022 7477 6561  ",.        "twea
-00023ff0: 6b73 222c 0a20 2020 2029 0a0a 2020 2020  ks",.    )..    
-00024000: 2323 2320 494e 4954 4941 4c49 5a45 5220  ### INITIALIZER 
-00024010: 2323 230a 0a20 2020 2064 6566 205f 5f69  ###..    def __i
-00024020: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
-00024030: 656c 662c 0a20 2020 2020 2020 206d 756c  elf,.        mul
-00024040: 7469 706c 6965 723d 2233 3a32 222c 0a20  tiplier="3:2",. 
-00024050: 2020 2020 2020 2063 6f6d 706f 6e65 6e74         component
-00024060: 733d 4e6f 6e65 2c0a 2020 2020 2020 2020  s=None,.        
-00024070: 2a2c 0a20 2020 2020 2020 2064 656e 6f6d  *,.        denom
-00024080: 696e 6174 6f72 3a20 696e 7420 3d20 4e6f  inator: int = No
-00024090: 6e65 2c0a 2020 2020 2020 2020 666f 7263  ne,.        forc
-000240a0: 655f 6672 6163 7469 6f6e 3a20 626f 6f6c  e_fraction: bool
-000240b0: 203d 2046 616c 7365 2c0a 2020 2020 2020   = False,.      
-000240c0: 2020 6869 6465 3a20 626f 6f6c 203d 2046    hide: bool = F
-000240d0: 616c 7365 2c0a 2020 2020 2020 2020 6c61  alse,.        la
-000240e0: 6e67 7561 6765 3a20 7374 7220 3d20 2265  nguage: str = "e
-000240f0: 6e67 6c69 7368 222c 0a20 2020 2020 2020  nglish",.       
-00024100: 2074 6167 3a20 5f74 6167 2e54 6167 203d   tag: _tag.Tag =
-00024110: 204e 6f6e 652c 0a20 2020 2020 2020 2074   None,.        t
-00024120: 7765 616b 733a 2074 7765 616b 736d 6f64  weaks: tweaksmod
-00024130: 756c 652e 5477 6561 6b20 3d20 4e6f 6e65  ule.Tweak = None
-00024140: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
-00024150: 0a20 2020 2020 2020 2043 6f6e 7461 696e  .        Contain
-00024160: 6572 2e5f 5f69 6e69 745f 5f28 7365 6c66  er.__init__(self
-00024170: 2c20 636f 6d70 6f6e 656e 7473 2c20 6c61  , components, la
-00024180: 6e67 7561 6765 3d6c 616e 6775 6167 652c  nguage=language,
-00024190: 2074 6167 3d74 6167 290a 2020 2020 2020   tag=tag).      
-000241a0: 2020 7365 6c66 2e74 7765 616b 7320 3d20    self.tweaks = 
-000241b0: 2829 0a20 2020 2020 2020 2069 6620 6973  ().        if is
-000241c0: 696e 7374 616e 6365 286d 756c 7469 706c  instance(multipl
-000241d0: 6965 722c 2073 7472 2920 616e 6420 223a  ier, str) and ":
-000241e0: 2220 696e 206d 756c 7469 706c 6965 723a  " in multiplier:
-000241f0: 0a20 2020 2020 2020 2020 2020 2073 7472  .            str
-00024200: 696e 6773 203d 206d 756c 7469 706c 6965  ings = multiplie
-00024210: 722e 7370 6c69 7428 223a 2229 0a20 2020  r.split(":").   
-00024220: 2020 2020 2020 2020 206e 756d 6265 7273           numbers
-00024230: 203d 205b 696e 7428 5f29 2066 6f72 205f   = [int(_) for _
-00024240: 2069 6e20 7374 7269 6e67 735d 0a20 2020   in strings].   
-00024250: 2020 2020 2020 2020 206d 756c 7469 706c           multipl
-00024260: 6965 7220 3d20 5f64 7572 6174 696f 6e2e  ier = _duration.
-00024270: 4e6f 6e72 6564 7563 6564 4672 6163 7469  NonreducedFracti
-00024280: 6f6e 286e 756d 6265 7273 5b31 5d2c 206e  on(numbers[1], n
-00024290: 756d 6265 7273 5b30 5d29 0a20 2020 2020  umbers[0]).     
-000242a0: 2020 2073 656c 662e 6d75 6c74 6970 6c69     self.multipli
-000242b0: 6572 203d 206d 756c 7469 706c 6965 720a  er = multiplier.
-000242c0: 2020 2020 2020 2020 7365 6c66 2e64 656e          self.den
-000242d0: 6f6d 696e 6174 6f72 203d 2064 656e 6f6d  ominator = denom
-000242e0: 696e 6174 6f72 0a20 2020 2020 2020 2073  inator.        s
-000242f0: 656c 662e 666f 7263 655f 6672 6163 7469  elf.force_fracti
-00024300: 6f6e 203d 2066 6f72 6365 5f66 7261 6374  on = force_fract
-00024310: 696f 6e0a 2020 2020 2020 2020 7365 6c66  ion.        self
-00024320: 2e68 6964 6520 3d20 6869 6465 0a0a 2020  .hide = hide..  
-00024330: 2020 2323 2320 5350 4543 4941 4c20 4d45    ### SPECIAL ME
-00024340: 5448 4f44 5320 2323 230a 0a20 2020 2064  THODS ###..    d
-00024350: 6566 205f 5f67 6574 6e65 7761 7267 735f  ef __getnewargs_
-00024360: 5f28 7365 6c66 2920 2d3e 2074 7570 6c65  _(self) -> tuple
-00024370: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00024380: 2020 2020 2020 4765 7473 206e 6577 2061        Gets new a
-00024390: 7267 756d 656e 7473 206f 6620 7475 706c  rguments of tupl
-000243a0: 6574 2e0a 2020 2020 2020 2020 2222 220a  et..        """.
-000243b0: 2020 2020 2020 2020 7265 7475 726e 2028          return (
-000243c0: 7365 6c66 2e6d 756c 7469 706c 6965 722c  self.multiplier,
-000243d0: 290a 0a20 2020 2064 6566 205f 5f72 6570  )..    def __rep
-000243e0: 725f 5f28 7365 6c66 2920 2d3e 2073 7472  r__(self) -> str
-000243f0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00024400: 2020 2020 2020 4765 7473 2072 6570 722e        Gets repr.
-00024410: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00024420: 2020 2020 2073 7472 696e 6720 3d20 7365       string = se
-00024430: 6c66 2e5f 6765 745f 636f 6e74 656e 7473  lf._get_contents
-00024440: 5f73 756d 6d61 7279 2829 0a20 2020 2020  _summary().     
-00024450: 2020 2072 6574 7572 6e20 6622 7b74 7970     return f"{typ
-00024460: 6528 7365 6c66 292e 5f5f 6e61 6d65 5f5f  e(self).__name__
-00024470: 7d28 7b73 656c 662e 636f 6c6f 6e5f 7374  }({self.colon_st
-00024480: 7269 6e67 2172 7d2c 207b 7374 7269 6e67  ring!r}, {string
-00024490: 2172 7d29 220a 0a20 2020 2023 2323 2050  !r})"..    ### P
-000244a0: 5249 5641 5445 204d 4554 484f 4453 2023  RIVATE METHODS #
-000244b0: 2323 0a0a 2020 2020 6465 6620 5f66 6f72  ##..    def _for
-000244c0: 6d61 745f 6166 7465 725f 7369 7465 2873  mat_after_site(s
-000244d0: 656c 662c 2063 6f6e 7472 6962 7574 696f  elf, contributio
-000244e0: 6e73 293a 0a20 2020 2020 2020 2072 6573  ns):.        res
-000244f0: 756c 7420 3d20 5b5d 0a20 2020 2020 2020  ult = [].       
-00024500: 2072 6573 756c 742e 6578 7465 6e64 2863   result.extend(c
-00024510: 6f6e 7472 6962 7574 696f 6e73 2e67 726f  ontributions.gro
-00024520: 625f 7265 7665 7274 7329 0a20 2020 2020  b_reverts).     
-00024530: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
-00024540: 2863 6f6e 7472 6962 7574 696f 6e73 2e61  (contributions.a
-00024550: 6674 6572 2e63 6f6d 6d61 6e64 7329 0a20  fter.commands). 
-00024560: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-00024570: 7375 6c74 0a0a 2020 2020 6465 6620 5f66  sult..    def _f
-00024580: 6f72 6d61 745f 6265 666f 7265 5f73 6974  ormat_before_sit
-00024590: 6528 7365 6c66 2c20 636f 6e74 7269 6275  e(self, contribu
-000245a0: 7469 6f6e 7329 3a0a 2020 2020 2020 2020  tions):.        
-000245b0: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
-000245c0: 2020 2020 7265 7375 6c74 2e65 7874 656e      result.exten
-000245d0: 6428 636f 6e74 7269 6275 7469 6f6e 732e  d(contributions.
-000245e0: 6265 666f 7265 2e63 6f6d 6d61 6e64 7329  before.commands)
-000245f0: 0a20 2020 2020 2020 2072 6573 756c 742e  .        result.
-00024600: 6578 7465 6e64 2863 6f6e 7472 6962 7574  extend(contribut
-00024610: 696f 6e73 2e67 726f 625f 6f76 6572 7269  ions.grob_overri
-00024620: 6465 7329 0a20 2020 2020 2020 2072 6573  des).        res
-00024630: 756c 742e 6578 7465 6e64 2863 6f6e 7472  ult.extend(contr
-00024640: 6962 7574 696f 6e73 2e63 6f6e 7465 7874  ibutions.context
-00024650: 5f73 6574 7469 6e67 7329 0a20 2020 2020  _settings).     
-00024660: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-00024670: 0a0a 2020 2020 6465 6620 5f66 6f72 6d61  ..    def _forma
-00024680: 745f 636c 6f73 655f 6272 6163 6b65 7473  t_close_brackets
-00024690: 5f73 6974 6528 7365 6c66 2c20 636f 6e74  _site(self, cont
-000246a0: 7269 6275 7469 6f6e 7329 3a0a 2020 2020  ributions):.    
-000246b0: 2020 2020 7265 7375 6c74 203d 205b 5d0a      result = [].
-000246c0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000246d0: 6d75 6c74 6970 6c69 6572 3a0a 2020 2020  multiplier:.    
-000246e0: 2020 2020 2020 2020 7374 7269 6e67 7320          strings 
-000246f0: 3d20 5b22 7d22 5d0a 2020 2020 2020 2020  = ["}"].        
-00024700: 2020 2020 6966 2073 656c 662e 7461 6720      if self.tag 
-00024710: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00024720: 2020 2020 2020 2020 2020 2020 2073 7472               str
-00024730: 696e 6773 203d 205f 7461 672e 646f 7562  ings = _tag.doub
-00024740: 6c65 5f74 6167 2873 7472 696e 6773 2c20  le_tag(strings, 
-00024750: 7365 6c66 2e74 6167 290a 2020 2020 2020  self.tag).      
-00024760: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
-00024770: 656e 6428 7374 7269 6e67 7329 0a20 2020  end(strings).   
-00024780: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-00024790: 6c74 0a0a 2020 2020 6465 6620 5f66 6f72  lt..    def _for
-000247a0: 6d61 745f 636c 6f73 696e 675f 7369 7465  mat_closing_site
-000247b0: 2873 656c 662c 2063 6f6e 7472 6962 7574  (self, contribut
-000247c0: 696f 6e73 293a 0a20 2020 2020 2020 2072  ions):.        r
-000247d0: 6573 756c 7420 3d20 5b5d 0a20 2020 2020  esult = [].     
-000247e0: 2020 2072 6573 756c 742e 6578 7465 6e64     result.extend
-000247f0: 2863 6f6e 7472 6962 7574 696f 6e73 2e63  (contributions.c
-00024800: 6c6f 7369 6e67 2e63 6f6d 6d61 6e64 7329  losing.commands)
-00024810: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00024820: 7365 6c66 2e5f 636f 6e74 7269 6275 7469  self._contributi
-00024830: 6f6e 735f 7769 7468 5f69 6e64 656e 7428  ons_with_indent(
-00024840: 7265 7375 6c74 290a 0a20 2020 2064 6566  result)..    def
-00024850: 205f 666f 726d 6174 5f6c 696c 7970 6f6e   _format_lilypon
-00024860: 645f 6672 6163 7469 6f6e 5f63 6f6d 6d61  d_fraction_comma
-00024870: 6e64 5f73 7472 696e 6728 7365 6c66 293a  nd_string(self):
-00024880: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00024890: 2e68 6964 653a 0a20 2020 2020 2020 2020  .hide:.         
-000248a0: 2020 2072 6574 7572 6e20 2222 0a20 2020     return "".   
-000248b0: 2020 2020 2069 6620 2274 6578 7422 2069       if "text" i
-000248c0: 6e20 7661 7273 285f 6f76 6572 7269 6465  n vars(_override
-000248d0: 732e 6f76 6572 7269 6465 2873 656c 6629  s.override(self)
-000248e0: 2e54 7570 6c65 744e 756d 6265 7229 3a0a  .TupletNumber):.
-000248f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00024900: 726e 2022 220a 2020 2020 2020 2020 6966  rn "".        if
-00024910: 2028 0a20 2020 2020 2020 2020 2020 2073   (.            s
-00024920: 656c 662e 6175 676d 656e 7461 7469 6f6e  elf.augmentation
-00024930: 2829 0a20 2020 2020 2020 2020 2020 206f  ().            o
-00024940: 7220 6e6f 7420 7365 6c66 2e5f 6973 5f64  r not self._is_d
-00024950: 7961 6469 635f 7261 7469 6f6e 616c 2829  yadic_rational()
-00024960: 0a20 2020 2020 2020 2020 2020 206f 7220  .            or 
-00024970: 7365 6c66 2e6d 756c 7469 706c 6965 722e  self.multiplier.
-00024980: 6465 6e6f 6d69 6e61 746f 7220 3d3d 2031  denominator == 1
-00024990: 0a20 2020 2020 2020 2020 2020 206f 7220  .            or 
-000249a0: 7365 6c66 2e66 6f72 6365 5f66 7261 6374  self.force_fract
-000249b0: 696f 6e0a 2020 2020 2020 2020 293a 0a20  ion.        ):. 
-000249c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000249d0: 6e20 7222 5c74 7765 616b 2074 6578 7420  n r"\tweak text 
-000249e0: 2374 7570 6c65 742d 6e75 6d62 6572 3a3a  #tuplet-number::
-000249f0: 6361 6c63 2d66 7261 6374 696f 6e2d 7465  calc-fraction-te
-00024a00: 7874 220a 2020 2020 2020 2020 7265 7475  xt".        retu
-00024a10: 726e 2022 220a 0a20 2020 2064 6566 205f  rn ""..    def _
-00024a20: 666f 726d 6174 5f6f 7065 6e5f 6272 6163  format_open_brac
-00024a30: 6b65 7473 5f73 6974 6528 7365 6c66 2c20  kets_site(self, 
-00024a40: 636f 6e74 7269 6275 7469 6f6e 7329 3a0a  contributions):.
-00024a50: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00024a60: 205b 5d0a 2020 2020 2020 2020 6966 2073   [].        if s
-00024a70: 656c 662e 6d75 6c74 6970 6c69 6572 3a0a  elf.multiplier:.
-00024a80: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00024a90: 656c 662e 6869 6465 3a0a 2020 2020 2020  elf.hide:.      
-00024aa0: 2020 2020 2020 2020 2020 7374 7269 6e67            string
-00024ab0: 203d 2073 656c 662e 5f67 6574 5f73 6361   = self._get_sca
-00024ac0: 6c65 5f64 7572 6174 696f 6e73 5f63 6f6d  le_durations_com
-00024ad0: 6d61 6e64 5f73 7472 696e 6728 290a 2020  mand_string().  
-00024ae0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00024af0: 6e74 7269 6275 7469 6f6e 7320 3d20 5b73  ntributions = [s
-00024b00: 7472 696e 672c 2022 7b22 5d0a 2020 2020  tring, "{"].    
-00024b10: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00024b20: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00024b30: 6e74 7269 6275 7469 6f6e 7320 3d20 5b5d  ntributions = []
-00024b40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024b50: 2066 7261 6374 696f 6e5f 636f 6d6d 616e   fraction_comman
-00024b60: 645f 7374 7269 6e67 203d 2028 0a20 2020  d_string = (.   
-00024b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024b80: 2073 656c 662e 5f66 6f72 6d61 745f 6c69   self._format_li
-00024b90: 6c79 706f 6e64 5f66 7261 6374 696f 6e5f  lypond_fraction_
-00024ba0: 636f 6d6d 616e 645f 7374 7269 6e67 2829  command_string()
-00024bb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024bc0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
-00024bd0: 2020 2069 6620 6672 6163 7469 6f6e 5f63     if fraction_c
-00024be0: 6f6d 6d61 6e64 5f73 7472 696e 673a 0a20  ommand_string:. 
-00024bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024c00: 2020 2063 6f6e 7472 6962 7574 696f 6e73     contributions
-00024c10: 2e61 7070 656e 6428 6672 6163 7469 6f6e  .append(fraction
-00024c20: 5f63 6f6d 6d61 6e64 5f73 7472 696e 6729  _command_string)
-00024c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024c40: 2065 6467 655f 6865 6967 6874 5f74 7765   edge_height_twe
-00024c50: 616b 5f73 7472 696e 6720 3d20 7365 6c66  ak_string = self
-00024c60: 2e5f 6765 745f 6564 6765 5f68 6569 6768  ._get_edge_heigh
-00024c70: 745f 7477 6561 6b5f 7374 7269 6e67 2829  t_tweak_string()
-00024c80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024c90: 2069 6620 6564 6765 5f68 6569 6768 745f   if edge_height_
-00024ca0: 7477 6561 6b5f 7374 7269 6e67 3a0a 2020  tweak_string:.  
-00024cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024cc0: 2020 636f 6e74 7269 6275 7469 6f6e 732e    contributions.
-00024cd0: 6170 7065 6e64 2865 6467 655f 6865 6967  append(edge_heig
-00024ce0: 6874 5f74 7765 616b 5f73 7472 696e 6729  ht_tweak_string)
-00024cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024d00: 2066 6f72 2074 7765 616b 2069 6e20 736f   for tweak in so
-00024d10: 7274 6564 2873 656c 662e 7477 6561 6b73  rted(self.tweaks
-00024d20: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00024d30: 2020 2020 2020 2073 7472 696e 6773 203d         strings =
-00024d40: 2074 7765 616b 2e5f 6c69 7374 5f63 6f6e   tweak._list_con
-00024d50: 7472 6962 7574 696f 6e73 2829 0a20 2020  tributions().   
-00024d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024d70: 2063 6f6e 7472 6962 7574 696f 6e73 2e65   contributions.e
-00024d80: 7874 656e 6428 7374 7269 6e67 7329 0a20  xtend(strings). 
-00024d90: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00024da0: 696d 6573 5f63 6f6d 6d61 6e64 5f73 7472  imes_command_str
-00024db0: 696e 6720 3d20 7365 6c66 2e5f 6765 745f  ing = self._get_
-00024dc0: 7469 6d65 735f 636f 6d6d 616e 645f 7374  times_command_st
-00024dd0: 7269 6e67 2829 0a20 2020 2020 2020 2020  ring().         
-00024de0: 2020 2020 2020 2063 6f6e 7472 6962 7574         contribut
-00024df0: 696f 6e73 2e61 7070 656e 6428 7469 6d65  ions.append(time
-00024e00: 735f 636f 6d6d 616e 645f 7374 7269 6e67  s_command_string
-00024e10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00024e20: 2020 636f 6e74 7269 6275 7469 6f6e 732e    contributions.
-00024e30: 6170 7065 6e64 2822 7b22 290a 2020 2020  append("{").    
-00024e40: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00024e50: 7461 6720 6973 206e 6f74 204e 6f6e 653a  tag is not None:
-00024e60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024e70: 2063 6f6e 7472 6962 7574 696f 6e73 203d   contributions =
-00024e80: 205f 7461 672e 646f 7562 6c65 5f74 6167   _tag.double_tag
-00024e90: 2863 6f6e 7472 6962 7574 696f 6e73 2c20  (contributions, 
-00024ea0: 7365 6c66 2e74 6167 290a 2020 2020 2020  self.tag).      
-00024eb0: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
-00024ec0: 656e 6428 636f 6e74 7269 6275 7469 6f6e  end(contribution
-00024ed0: 7329 0a20 2020 2020 2020 2072 6574 7572  s).        retur
-00024ee0: 6e20 7265 7375 6c74 0a0a 2020 2020 6465  n result..    de
-00024ef0: 6620 5f66 6f72 6d61 745f 6f70 656e 696e  f _format_openin
-00024f00: 675f 7369 7465 2873 656c 662c 2063 6f6e  g_site(self, con
-00024f10: 7472 6962 7574 696f 6e73 293a 0a20 2020  tributions):.   
-00024f20: 2020 2020 2072 6573 756c 7420 3d20 5b5d       result = []
-00024f30: 0a20 2020 2020 2020 2072 6573 756c 742e  .        result.
-00024f40: 6578 7465 6e64 2863 6f6e 7472 6962 7574  extend(contribut
-00024f50: 696f 6e73 2e6f 7065 6e69 6e67 2e63 6f6d  ions.opening.com
-00024f60: 6d61 6e64 7329 0a20 2020 2020 2020 2072  mands).        r
-00024f70: 6574 7572 6e20 7365 6c66 2e5f 636f 6e74  eturn self._cont
-00024f80: 7269 6275 7469 6f6e 735f 7769 7468 5f69  ributions_with_i
-00024f90: 6e64 656e 7428 7265 7375 6c74 290a 0a20  ndent(result).. 
-00024fa0: 2020 2064 6566 205f 6765 745f 636f 6d70     def _get_comp
-00024fb0: 6163 745f 7265 7072 6573 656e 7461 7469  act_representati
-00024fc0: 6f6e 2873 656c 6629 3a0a 2020 2020 2020  on(self):.      
-00024fd0: 2020 6966 206e 6f74 2073 656c 663a 0a20    if not self:. 
-00024fe0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00024ff0: 6e20 6622 7b7b 207b 7365 6c66 2e6d 756c  n f"{{ {self.mul
-00025000: 7469 706c 6965 7221 737d 207d 7d22 0a20  tiplier!s} }}". 
-00025010: 2020 2020 2020 2072 6574 7572 6e20 6622         return f"
-00025020: 7b7b 207b 7365 6c66 2e6d 756c 7469 706c  {{ {self.multipl
-00025030: 6965 7221 737d 207b 7365 6c66 2e5f 6765  ier!s} {self._ge
-00025040: 745f 636f 6e74 656e 7473 5f73 756d 6d61  t_contents_summa
-00025050: 7279 2829 7d20 7d7d 220a 0a20 2020 2064  ry()} }}"..    d
-00025060: 6566 205f 6765 745f 6564 6765 5f68 6569  ef _get_edge_hei
-00025070: 6768 745f 7477 6561 6b5f 7374 7269 6e67  ght_tweak_string
-00025080: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00025090: 6475 7261 7469 6f6e 203d 2073 656c 662e  duration = self.
-000250a0: 5f67 6574 5f70 7265 7072 6f6c 6174 6564  _get_preprolated
-000250b0: 5f64 7572 6174 696f 6e28 290a 2020 2020  _duration().    
-000250c0: 2020 2020 6465 6e6f 6d69 6e61 746f 7220      denominator 
-000250d0: 3d20 6475 7261 7469 6f6e 2e64 656e 6f6d  = duration.denom
-000250e0: 696e 6174 6f72 0a20 2020 2020 2020 2069  inator.        i
-000250f0: 6620 6e6f 7420 5f6d 6174 682e 6973 5f6e  f not _math.is_n
-00025100: 6f6e 6e65 6761 7469 7665 5f69 6e74 6567  onnegative_integ
-00025110: 6572 5f70 6f77 6572 5f6f 665f 7477 6f28  er_power_of_two(
-00025120: 6465 6e6f 6d69 6e61 746f 7229 3a0a 2020  denominator):.  
-00025130: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00025140: 2072 225c 7477 6561 6b20 6564 6765 2d68   r"\tweak edge-h
-00025150: 6569 6768 7420 2327 2830 2e37 202e 2030  eight #'(0.7 . 0
-00025160: 2922 0a0a 2020 2020 6465 6620 5f67 6574  )"..    def _get
-00025170: 5f6d 756c 7469 706c 6965 725f 6672 6163  _multiplier_frac
-00025180: 7469 6f6e 5f73 7472 696e 6728 7365 6c66  tion_string(self
-00025190: 293a 0a20 2020 2020 2020 2069 6620 7365  ):.        if se
-000251a0: 6c66 2e64 656e 6f6d 696e 6174 6f72 2069  lf.denominator i
-000251b0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-000251c0: 2020 2020 2020 2020 696e 7665 7273 655f          inverse_
-000251d0: 6d75 6c74 6970 6c69 6572 203d 205f 6475  multiplier = _du
-000251e0: 7261 7469 6f6e 2e4d 756c 7469 706c 6965  ration.Multiplie
-000251f0: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
-00025200: 2020 2073 656c 662e 6d75 6c74 6970 6c69     self.multipli
-00025210: 6572 2e64 656e 6f6d 696e 6174 6f72 2c20  er.denominator, 
-00025220: 7365 6c66 2e6d 756c 7469 706c 6965 722e  self.multiplier.
-00025230: 6e75 6d65 7261 746f 720a 2020 2020 2020  numerator.      
-00025240: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00025250: 2020 2020 6e6f 6e72 6564 7563 6564 5f66      nonreduced_f
-00025260: 7261 6374 696f 6e20 3d20 5f64 7572 6174  raction = _durat
-00025270: 696f 6e2e 4e6f 6e72 6564 7563 6564 4672  ion.NonreducedFr
-00025280: 6163 7469 6f6e 2869 6e76 6572 7365 5f6d  action(inverse_m
-00025290: 756c 7469 706c 6965 7229 0a20 2020 2020  ultiplier).     
-000252a0: 2020 2020 2020 206e 6f6e 7265 6475 6365         nonreduce
-000252b0: 645f 6672 6163 7469 6f6e 203d 206e 6f6e  d_fraction = non
-000252c0: 7265 6475 6365 645f 6672 6163 7469 6f6e  reduced_fraction
-000252d0: 2e77 6974 685f 6465 6e6f 6d69 6e61 746f  .with_denominato
-000252e0: 7228 7365 6c66 2e64 656e 6f6d 696e 6174  r(self.denominat
-000252f0: 6f72 290a 2020 2020 2020 2020 2020 2020  or).            
-00025300: 6465 6e6f 6d69 6e61 746f 722c 206e 756d  denominator, num
-00025310: 6572 6174 6f72 203d 206e 6f6e 7265 6475  erator = nonredu
-00025320: 6365 645f 6672 6163 7469 6f6e 2e70 6169  ced_fraction.pai
-00025330: 720a 2020 2020 2020 2020 656c 7365 3a0a  r.        else:.
-00025340: 2020 2020 2020 2020 2020 2020 6e75 6d65              nume
-00025350: 7261 746f 7220 3d20 7365 6c66 2e6d 756c  rator = self.mul
-00025360: 7469 706c 6965 722e 6e75 6d65 7261 746f  tiplier.numerato
-00025370: 720a 2020 2020 2020 2020 2020 2020 6465  r.            de
-00025380: 6e6f 6d69 6e61 746f 7220 3d20 7365 6c66  nominator = self
-00025390: 2e6d 756c 7469 706c 6965 722e 6465 6e6f  .multiplier.deno
-000253a0: 6d69 6e61 746f 720a 2020 2020 2020 2020  minator.        
-000253b0: 7265 7475 726e 2066 227b 6e75 6d65 7261  return f"{numera
-000253c0: 746f 727d 2f7b 6465 6e6f 6d69 6e61 746f  tor}/{denominato
-000253d0: 727d 220a 0a20 2020 2064 6566 205f 6973  r}"..    def _is
-000253e0: 5f64 7961 6469 635f 7261 7469 6f6e 616c  _dyadic_rational
-000253f0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00025400: 6966 2073 656c 662e 6d75 6c74 6970 6c69  if self.multipli
-00025410: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-00025420: 6e75 6d65 7261 746f 7220 3d20 7365 6c66  numerator = self
-00025430: 2e6d 756c 7469 706c 6965 722e 6e75 6d65  .multiplier.nume
-00025440: 7261 746f 720a 2020 2020 2020 2020 2020  rator.          
-00025450: 2020 7265 7475 726e 205f 6d61 7468 2e69    return _math.i
-00025460: 735f 6e6f 6e6e 6567 6174 6976 655f 696e  s_nonnegative_in
-00025470: 7465 6765 725f 706f 7765 725f 6f66 5f74  teger_power_of_t
-00025480: 776f 286e 756d 6572 6174 6f72 290a 2020  wo(numerator).  
-00025490: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000254a0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-000254b0: 7275 650a 0a20 2020 2064 6566 205f 6765  rue..    def _ge
-000254c0: 745f 7072 6570 726f 6c61 7465 645f 6475  t_preprolated_du
-000254d0: 7261 7469 6f6e 2873 656c 6629 3a0a 2020  ration(self):.  
-000254e0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-000254f0: 662e 6d75 6c74 6970 6c69 6564 5f64 7572  f.multiplied_dur
-00025500: 6174 696f 6e0a 0a20 2020 2064 6566 205f  ation..    def _
-00025510: 6765 745f 7261 7469 6f5f 7374 7269 6e67  get_ratio_string
-00025520: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00025530: 6d75 6c74 6970 6c69 6572 203d 2073 656c  multiplier = sel
-00025540: 662e 6d75 6c74 6970 6c69 6572 0a20 2020  f.multiplier.   
-00025550: 2020 2020 2069 6620 6d75 6c74 6970 6c69       if multipli
-00025560: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0a  er is not None:.
-00025570: 2020 2020 2020 2020 2020 2020 6e75 6d65              nume
-00025580: 7261 746f 7220 3d20 6d75 6c74 6970 6c69  rator = multipli
-00025590: 6572 2e6e 756d 6572 6174 6f72 0a20 2020  er.numerator.   
-000255a0: 2020 2020 2020 2020 2064 656e 6f6d 696e           denomin
-000255b0: 6174 6f72 203d 206d 756c 7469 706c 6965  ator = multiplie
-000255c0: 722e 6465 6e6f 6d69 6e61 746f 720a 2020  r.denominator.  
-000255d0: 2020 2020 2020 2020 2020 7261 7469 6f5f            ratio_
-000255e0: 7374 7269 6e67 203d 2066 227b 6465 6e6f  string = f"{deno
-000255f0: 6d69 6e61 746f 727d 3a7b 6e75 6d65 7261  minator}:{numera
-00025600: 746f 727d 220a 2020 2020 2020 2020 2020  tor}".          
-00025610: 2020 7265 7475 726e 2072 6174 696f 5f73    return ratio_s
-00025620: 7472 696e 670a 2020 2020 2020 2020 656c  tring.        el
-00025630: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00025640: 7265 7475 726e 204e 6f6e 650a 0a20 2020  return None..   
-00025650: 2064 6566 205f 6765 745f 7363 616c 655f   def _get_scale_
-00025660: 6475 7261 7469 6f6e 735f 636f 6d6d 616e  durations_comman
-00025670: 645f 7374 7269 6e67 2873 656c 6629 3a0a  d_string(self):.
-00025680: 2020 2020 2020 2020 6d75 6c74 6970 6c69          multipli
-00025690: 6572 203d 205f 6475 7261 7469 6f6e 2e4d  er = _duration.M
-000256a0: 756c 7469 706c 6965 7228 7365 6c66 2e6d  ultiplier(self.m
-000256b0: 756c 7469 706c 6965 7229 0a20 2020 2020  ultiplier).     
-000256c0: 2020 206e 756d 6572 6174 6f72 203d 206d     numerator = m
-000256d0: 756c 7469 706c 6965 722e 6e75 6d65 7261  ultiplier.numera
-000256e0: 746f 720a 2020 2020 2020 2020 6465 6e6f  tor.        deno
-000256f0: 6d69 6e61 746f 7220 3d20 6d75 6c74 6970  minator = multip
-00025700: 6c69 6572 2e64 656e 6f6d 696e 6174 6f72  lier.denominator
-00025710: 0a20 2020 2020 2020 2073 7472 696e 6720  .        string 
-00025720: 3d20 7266 225c 7363 616c 6544 7572 6174  = rf"\scaleDurat
-00025730: 696f 6e73 2023 2728 7b6e 756d 6572 6174  ions #'({numerat
-00025740: 6f72 7d20 2e20 7b64 656e 6f6d 696e 6174  or} . {denominat
-00025750: 6f72 7d29 220a 2020 2020 2020 2020 7265  or})".        re
-00025760: 7475 726e 2073 7472 696e 670a 0a20 2020  turn string..   
-00025770: 2064 6566 205f 6765 745f 7375 6d6d 6172   def _get_summar
-00025780: 7928 7365 6c66 293a 0a20 2020 2020 2020  y(self):.       
-00025790: 2069 6620 3020 3c20 6c65 6e28 7365 6c66   if 0 < len(self
-000257a0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-000257b0: 6574 7572 6e20 222c 2022 2e6a 6f69 6e28  eturn ", ".join(
-000257c0: 5b73 7472 285f 2920 666f 7220 5f20 696e  [str(_) for _ in
-000257d0: 2073 656c 662e 636f 6d70 6f6e 656e 7473   self.components
-000257e0: 5d29 0a20 2020 2020 2020 2065 6c73 653a  ]).        else:
-000257f0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00025800: 7572 6e20 2222 0a0a 2020 2020 6465 6620  urn ""..    def 
-00025810: 5f67 6574 5f74 696d 6573 5f63 6f6d 6d61  _get_times_comma
-00025820: 6e64 5f73 7472 696e 6728 7365 6c66 293a  nd_string(self):
-00025830: 0a20 2020 2020 2020 2073 7472 696e 6720  .        string 
-00025840: 3d20 7266 225c 7469 6d65 7320 7b73 656c  = rf"\times {sel
-00025850: 662e 5f67 6574 5f6d 756c 7469 706c 6965  f._get_multiplie
-00025860: 725f 6672 6163 7469 6f6e 5f73 7472 696e  r_fraction_strin
-00025870: 6728 297d 220a 2020 2020 2020 2020 7265  g()}".        re
-00025880: 7475 726e 2073 7472 696e 670a 0a20 2020  turn string..   
-00025890: 2064 6566 205f 7363 616c 6528 7365 6c66   def _scale(self
-000258a0: 2c20 6d75 6c74 6970 6c69 6572 293a 0a20  , multiplier):. 
-000258b0: 2020 2020 2020 206d 756c 7469 706c 6965         multiplie
-000258c0: 7220 3d20 5f64 7572 6174 696f 6e2e 4d75  r = _duration.Mu
-000258d0: 6c74 6970 6c69 6572 286d 756c 7469 706c  ltiplier(multipl
-000258e0: 6965 7229 0a20 2020 2020 2020 2066 6f72  ier).        for
-000258f0: 2063 6f6d 706f 6e65 6e74 2069 6e20 7365   component in se
-00025900: 6c66 5b3a 5d3a 0a20 2020 2020 2020 2020  lf[:]:.         
-00025910: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00025920: 2863 6f6d 706f 6e65 6e74 2c20 4c65 6166  (component, Leaf
-00025930: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00025940: 2020 2063 6f6d 706f 6e65 6e74 2e5f 7363     component._sc
-00025950: 616c 6528 6d75 6c74 6970 6c69 6572 290a  ale(multiplier).
-00025960: 2020 2020 2020 2020 7365 6c66 2e6e 6f72          self.nor
-00025970: 6d61 6c69 7a65 5f6d 756c 7469 706c 6965  malize_multiplie
-00025980: 7228 290a 0a20 2020 2023 2323 2050 5542  r()..    ### PUB
-00025990: 4c49 4320 5052 4f50 4552 5449 4553 2023  LIC PROPERTIES #
-000259a0: 2323 0a0a 2020 2020 4070 726f 7065 7274  ##..    @propert
-000259b0: 790a 2020 2020 6465 6620 636f 6c6f 6e5f  y.    def colon_
-000259c0: 7374 7269 6e67 2873 656c 6629 202d 3e20  string(self) -> 
-000259d0: 7374 723a 0a20 2020 2020 2020 2072 2222  str:.        r""
-000259e0: 220a 2020 2020 2020 2020 4765 7473 2063  ".        Gets c
-000259f0: 6f6c 6f6e 2073 7472 696e 672e 0a0a 2020  olon string...  
-00025a00: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
-00025a10: 6e65 7220 6578 616d 706c 650a 0a20 2020  ner example..   
-00025a20: 2020 2020 2020 2020 203e 3e3e 2074 7570           >>> tup
-00025a30: 6c65 7420 3d20 6162 6a61 642e 5475 706c  let = abjad.Tupl
-00025a40: 6574 2822 333a 3222 2c20 2263 2734 2064  et("3:2", "c'4 d
-00025a50: 2720 6527 2229 0a20 2020 2020 2020 2020  ' e'").         
-00025a60: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
-00025a70: 7728 7475 706c 6574 2920 2320 646f 6374  w(tuplet) # doct
-00025a80: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-00025a90: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-00025aa0: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-00025ab0: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-00025ac0: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-00025ad0: 7475 706c 6574 290a 2020 2020 2020 2020  tuplet).        
-00025ae0: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-00025af0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-00025b00: 2020 2020 2020 2020 2020 5c74 696d 6573            \times
-00025b10: 2032 2f33 0a20 2020 2020 2020 2020 2020   2/3.           
-00025b20: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00025b30: 2020 2020 2020 2020 2020 2063 2734 0a20             c'4. 
-00025b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025b50: 2020 2064 2734 0a20 2020 2020 2020 2020     d'4.         
-00025b60: 2020 2020 2020 2020 2020 2065 2734 0a20             e'4. 
-00025b70: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-00025b80: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-00025b90: 3e20 7475 706c 6574 2e63 6f6c 6f6e 5f73  > tuplet.colon_s
-00025ba0: 7472 696e 670a 2020 2020 2020 2020 2020  tring.          
-00025bb0: 2020 2733 3a32 270a 0a20 2020 2020 2020    '3:2'..       
-00025bc0: 2022 2222 0a20 2020 2020 2020 206e 756d   """.        num
-00025bd0: 6572 6174 6f72 2c20 6465 6e6f 6d69 6e61  erator, denomina
-00025be0: 746f 7220 3d20 7365 6c66 2e6d 756c 7469  tor = self.multi
-00025bf0: 706c 6965 722e 7061 6972 0a20 2020 2020  plier.pair.     
-00025c00: 2020 2072 6574 7572 6e20 6622 7b64 656e     return f"{den
-00025c10: 6f6d 696e 6174 6f72 7d3a 7b6e 756d 6572  ominator}:{numer
-00025c20: 6174 6f72 7d22 0a0a 2020 2020 4070 726f  ator}"..    @pro
-00025c30: 7065 7274 790a 2020 2020 6465 6620 6465  perty.    def de
-00025c40: 6e6f 6d69 6e61 746f 7228 7365 6c66 2920  nominator(self) 
-00025c50: 2d3e 2069 6e74 207c 204e 6f6e 653a 0a20  -> int | None:. 
-00025c60: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
-00025c70: 2020 2020 4765 7473 2061 6e64 2073 6574      Gets and set
-00025c80: 7320 7072 6566 6572 7265 6420 6465 6e6f  s preferred deno
-00025c90: 6d69 6e61 746f 7220 6f66 2074 7570 6c65  minator of tuple
-00025ca0: 742e 0a0a 2020 2020 2020 2020 2e2e 2020  t...        ..  
-00025cb0: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-00025cc0: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
-00025cd0: 2047 6574 7320 7072 6566 6572 7265 6420   Gets preferred 
-00025ce0: 6465 6e6f 6d69 6e61 746f 7220 6f66 2074  denominator of t
-00025cf0: 7570 6c65 743a 0a0a 2020 2020 2020 2020  uplet:..        
-00025d00: 2020 2020 3e3e 3e20 7475 706c 6574 203d      >>> tuplet =
-00025d10: 2061 626a 6164 2e54 7570 6c65 7428 2233   abjad.Tuplet("3
-00025d20: 3a32 222c 2022 6327 3820 6427 3820 6527  :2", "c'8 d'8 e'
-00025d30: 3822 290a 2020 2020 2020 2020 2020 2020  8").            
-00025d40: 3e3e 3e20 7475 706c 6574 2e64 656e 6f6d  >>> tuplet.denom
-00025d50: 696e 6174 6f72 2069 7320 4e6f 6e65 0a20  inator is None. 
-00025d60: 2020 2020 2020 2020 2020 2054 7275 650a             True.
-00025d70: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00025d80: 6162 6a61 642e 7368 6f77 2874 7570 6c65  abjad.show(tuple
-00025d90: 7429 2023 2064 6f63 7465 7374 3a20 2b53  t) # doctest: +S
-00025da0: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
-00025db0: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
-00025dc0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-00025dd0: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
-00025de0: 6c69 6c79 706f 6e64 2874 7570 6c65 7429  lilypond(tuplet)
-00025df0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025e00: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-00025e10: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-00025e20: 2020 205c 7469 6d65 7320 322f 330a 2020     \times 2/3.  
-00025e30: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-00025e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025e50: 2020 2020 6327 380a 2020 2020 2020 2020      c'8.        
-00025e60: 2020 2020 2020 2020 2020 2020 6427 380a              d'8.
-00025e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025e80: 2020 2020 6527 380a 2020 2020 2020 2020      e'8.        
-00025e90: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
-00025ea0: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
-00025eb0: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
-00025ec0: 2020 2020 2020 2020 5365 7473 2070 7265          Sets pre
-00025ed0: 6665 7272 6564 2064 656e 6f6d 696e 6174  ferred denominat
-00025ee0: 6f72 206f 6620 7475 706c 6574 3a0a 0a20  or of tuplet:.. 
-00025ef0: 2020 2020 2020 2020 2020 203e 3e3e 2074             >>> t
-00025f00: 7570 6c65 7420 3d20 6162 6a61 642e 5475  uplet = abjad.Tu
-00025f10: 706c 6574 2822 333a 3222 2c20 2263 2738  plet("3:2", "c'8
-00025f20: 2064 2738 2065 2738 2229 0a20 2020 2020   d'8 e'8").     
-00025f30: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-00025f40: 2e73 686f 7728 7475 706c 6574 2920 2320  .show(tuplet) # 
-00025f50: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
-00025f60: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
-00025f70: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
-00025f80: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
-00025f90: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
-00025fa0: 6f6e 6428 7475 706c 6574 290a 2020 2020  ond(tuplet).    
-00025fb0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00025fc0: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
-00025fd0: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-00025fe0: 696d 6573 2032 2f33 0a20 2020 2020 2020  imes 2/3.       
-00025ff0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00026000: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00026010: 2738 0a20 2020 2020 2020 2020 2020 2020  '8.             
-00026020: 2020 2020 2020 2064 2738 0a20 2020 2020         d'8.     
-00026030: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00026040: 2738 0a20 2020 2020 2020 2020 2020 2020  '8.             
-00026050: 2020 207d 0a0a 2020 2020 2020 2020 2020     }..          
-00026060: 2020 3e3e 3e20 7475 706c 6574 2e64 656e    >>> tuplet.den
-00026070: 6f6d 696e 6174 6f72 203d 2034 0a20 2020  ominator = 4.   
-00026080: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
-00026090: 6164 2e73 686f 7728 7475 706c 6574 2920  ad.show(tuplet) 
-000260a0: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
-000260b0: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
-000260c0: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
-000260d0: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-000260e0: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-000260f0: 7970 6f6e 6428 7475 706c 6574 290a 2020  ypond(tuplet).  
-00026100: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-00026110: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-00026120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026130: 5c74 696d 6573 2034 2f36 0a20 2020 2020  \times 4/6.     
-00026140: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-00026150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026160: 2063 2738 0a20 2020 2020 2020 2020 2020   c'8.           
-00026170: 2020 2020 2020 2020 2064 2738 0a20 2020           d'8.   
-00026180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026190: 2065 2738 0a20 2020 2020 2020 2020 2020   e'8.           
-000261a0: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
-000261b0: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
-000261c0: 726e 2073 656c 662e 5f64 656e 6f6d 696e  rn self._denomin
-000261d0: 6174 6f72 0a0a 2020 2020 4064 656e 6f6d  ator..    @denom
-000261e0: 696e 6174 6f72 2e73 6574 7465 720a 2020  inator.setter.  
-000261f0: 2020 6465 6620 6465 6e6f 6d69 6e61 746f    def denominato
-00026200: 7228 7365 6c66 2c20 6172 6775 6d65 6e74  r(self, argument
-00026210: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
-00026220: 696e 7374 616e 6365 2861 7267 756d 656e  instance(argumen
-00026230: 742c 2069 6e74 293a 0a20 2020 2020 2020  t, int):.       
-00026240: 2020 2020 2069 6620 6e6f 7420 3020 3c20       if not 0 < 
-00026250: 6172 6775 6d65 6e74 3a0a 2020 2020 2020  argument:.      
-00026260: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00026270: 5661 6c75 6545 7272 6f72 2861 7267 756d  ValueError(argum
-00026280: 656e 7429 0a20 2020 2020 2020 2065 6c69  ent).        eli
-00026290: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-000262a0: 2861 7267 756d 656e 742c 2074 7970 6528  (argument, type(
-000262b0: 4e6f 6e65 2929 3a0a 2020 2020 2020 2020  None)):.        
-000262c0: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
-000262d0: 726f 7228 6172 6775 6d65 6e74 290a 2020  ror(argument).  
-000262e0: 2020 2020 2020 7365 6c66 2e5f 6465 6e6f        self._deno
-000262f0: 6d69 6e61 746f 7220 3d20 6172 6775 6d65  minator = argume
-00026300: 6e74 0a0a 2020 2020 4070 726f 7065 7274  nt..    @propert
-00026310: 790a 2020 2020 6465 6620 666f 7263 655f  y.    def force_
-00026320: 6672 6163 7469 6f6e 2873 656c 6629 202d  fraction(self) -
-00026330: 3e20 626f 6f6c 207c 204e 6f6e 653a 0a20  > bool | None:. 
-00026340: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
-00026350: 2020 2020 4765 7473 2061 6e64 2073 6574      Gets and set
-00026360: 7320 666f 7263 6520 6672 6163 7469 6f6e  s force fraction
-00026370: 2066 6c61 672e 0a0a 2020 2020 2020 2020   flag...        
-00026380: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
-00026390: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
-000263a0: 2020 2020 2054 6f20 696c 6c75 7374 7261       To illustra
-000263b0: 7465 2074 6865 2065 6666 6563 7420 6f66  te the effect of
-000263c0: 2041 626a 6164 2773 2066 6f72 6365 2066   Abjad's force f
-000263d0: 7261 6374 696f 6e20 7072 6f70 6572 7479  raction property
-000263e0: 2c20 7765 2063 616e 0a20 2020 2020 2020  , we can.       
-000263f0: 2020 2020 2074 656d 706f 7261 7269 6c79       temporarily
-00026400: 2072 6573 746f 7265 204c 696c 7950 6f6e   restore LilyPon
-00026410: 6427 7320 6465 6661 756c 7420 7475 706c  d's default tupl
-00026420: 6574 206e 756d 6265 7220 666f 726d 6174  et number format
-00026430: 7469 6e67 0a20 2020 2020 2020 2020 2020  ting.           
-00026440: 206c 696b 6520 7468 6973 3a0a 0a20 2020   like this:..   
-00026450: 2020 2020 2020 2020 203e 3e3e 2073 7461           >>> sta
-00026460: 6666 203d 2061 626a 6164 2e53 7461 6666  ff = abjad.Staff
-00026470: 2829 0a20 2020 2020 2020 2020 2020 203e  ().            >
-00026480: 3e3e 2073 7461 6666 2e61 7070 656e 6428  >> staff.append(
-00026490: 6162 6a61 642e 5475 706c 6574 2828 322c  abjad.Tuplet((2,
-000264a0: 2033 292c 2022 6327 3420 6427 2065 2722   3), "c'4 d' e'"
-000264b0: 2929 0a20 2020 2020 2020 2020 2020 203e  )).            >
-000264c0: 3e3e 2073 7461 6666 2e61 7070 656e 6428  >> staff.append(
-000264d0: 6162 6a61 642e 5475 706c 6574 2828 322c  abjad.Tuplet((2,
-000264e0: 2033 292c 2022 6327 3420 6427 2065 2722   3), "c'4 d' e'"
-000264f0: 2929 0a20 2020 2020 2020 2020 2020 203e  )).            >
-00026500: 3e3e 2073 7461 6666 2e61 7070 656e 6428  >> staff.append(
-00026510: 6162 6a61 642e 5475 706c 6574 2828 322c  abjad.Tuplet((2,
-00026520: 2033 292c 2022 6327 3420 6427 2065 2722   3), "c'4 d' e'"
-00026530: 2929 0a20 2020 2020 2020 2020 2020 203e  )).            >
-00026540: 3e3e 2073 7472 696e 6720 3d20 2723 7475  >> string = '#tu
-00026550: 706c 6574 2d6e 756d 6265 723a 3a63 616c  plet-number::cal
-00026560: 632d 6465 6e6f 6d69 6e61 746f 722d 7465  c-denominator-te
-00026570: 7874 270a 2020 2020 2020 2020 2020 2020  xt'.            
-00026580: 3e3e 3e20 6162 6a61 642e 6f76 6572 7269  >>> abjad.overri
-00026590: 6465 2873 7461 6666 292e 5475 706c 6574  de(staff).Tuplet
-000265a0: 4e75 6d62 6572 2e74 6578 7420 3d20 7374  Number.text = st
-000265b0: 7269 6e67 0a20 2020 2020 2020 2020 2020  ring.           
-000265c0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-000265d0: 7374 6166 6629 2023 2064 6f63 7465 7374  staff) # doctest
-000265e0: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-000265f0: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
-00026600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026610: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-00026620: 6a61 642e 6c69 6c79 706f 6e64 2873 7461  jad.lilypond(sta
-00026630: 6666 290a 2020 2020 2020 2020 2020 2020  ff).            
-00026640: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
-00026650: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-00026660: 2020 2020 2020 5c6e 6577 2053 7461 6666        \new Staff
-00026670: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026680: 205c 7769 7468 0a20 2020 2020 2020 2020   \with.         
-00026690: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-000266a0: 2020 2020 2020 2020 2020 2020 205c 6f76               \ov
-000266b0: 6572 7269 6465 2054 7570 6c65 744e 756d  erride TupletNum
-000266c0: 6265 722e 7465 7874 203d 2023 7475 706c  ber.text = #tupl
-000266d0: 6574 2d6e 756d 6265 723a 3a63 616c 632d  et-number::calc-
-000266e0: 6465 6e6f 6d69 6e61 746f 722d 7465 7874  denominator-text
-000266f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026700: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
-00026710: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00026720: 2020 2020 2020 2020 205c 7469 6d65 7320           \times 
-00026730: 322f 330a 2020 2020 2020 2020 2020 2020  2/3.            
-00026740: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-00026750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026760: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
-00026770: 2020 2020 2020 2020 2020 2020 2020 6427                d'
-00026780: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-00026790: 2020 2020 2020 2020 2020 6527 340a 2020            e'4.  
-000267a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000267b0: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-000267c0: 2020 2020 2020 2020 5c74 696d 6573 2032          \times 2
-000267d0: 2f33 0a20 2020 2020 2020 2020 2020 2020  /3.             
-000267e0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-000267f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026800: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
-00026810: 2020 2020 2020 2020 2020 2020 2064 2734               d'4
-00026820: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026830: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
-00026840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026850: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
-00026860: 2020 2020 2020 205c 7469 6d65 7320 322f         \times 2/
-00026870: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
-00026880: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00026890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000268a0: 6327 340a 2020 2020 2020 2020 2020 2020  c'4.            
-000268b0: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
-000268c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000268d0: 2020 2020 2020 2020 6527 340a 2020 2020          e'4.    
-000268e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000268f0: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
-00026900: 2020 7d0a 0a20 2020 2020 2020 2020 2020    }..           
-00026910: 2057 6869 6368 206d 616b 6573 2069 7420   Which makes it 
-00026920: 706f 7373 6962 6c65 2074 6f20 7365 6520  possible to see 
-00026930: 7468 6520 6566 6665 6374 206f 6620 7365  the effect of se
-00026940: 7474 696e 6720 666f 7263 6520 6672 6163  tting force frac
-00026950: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
-00026960: 2074 6f20 7472 7565 206f 6e20 6120 7369   to true on a si
-00026970: 6e67 6c65 2074 7570 6c65 743a 0a0a 2020  ngle tuplet:..  
-00026980: 2020 2020 2020 2020 2020 3e3e 3e20 7475            >>> tu
-00026990: 706c 6574 203d 2073 7461 6666 5b31 5d0a  plet = staff[1].
-000269a0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-000269b0: 7475 706c 6574 2e66 6f72 6365 5f66 7261  tuplet.force_fra
-000269c0: 6374 696f 6e20 3d20 5472 7565 0a20 2020  ction = True.   
-000269d0: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
-000269e0: 6164 2e73 686f 7728 7374 6166 6629 2023  ad.show(staff) #
-000269f0: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
-00026a00: 0a20 2020 2020 2020 2020 2020 202e 2e20  .            .. 
-00026a10: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
-00026a20: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
-00026a30: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
-00026a40: 706f 6e64 2873 7461 6666 290a 2020 2020  pond(staff).    
-00026a50: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00026a60: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
-00026a70: 2020 2020 2020 2020 2020 2020 2020 5c6e                \n
-00026a80: 6577 2053 7461 6666 0a20 2020 2020 2020  ew Staff.       
-00026a90: 2020 2020 2020 2020 205c 7769 7468 0a20           \with. 
-00026aa0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-00026ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026ac0: 2020 2020 205c 6f76 6572 7269 6465 2054       \override T
-00026ad0: 7570 6c65 744e 756d 6265 722e 7465 7874  upletNumber.text
-00026ae0: 203d 2023 7475 706c 6574 2d6e 756d 6265   = #tuplet-numbe
-00026af0: 723a 3a63 616c 632d 6465 6e6f 6d69 6e61  r::calc-denomina
-00026b00: 746f 722d 7465 7874 0a20 2020 2020 2020  tor-text.       
-00026b10: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-00026b20: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-00026b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026b40: 205c 7469 6d65 7320 322f 330a 2020 2020   \times 2/3.    
-00026b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026b60: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-00026b70: 2020 2020 2020 2020 2020 6327 340a 2020            c'4.  
-00026b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026b90: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-00026ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026bb0: 2020 6527 340a 2020 2020 2020 2020 2020    e'4.          
-00026bc0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00026bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026be0: 5c74 7765 616b 2074 6578 7420 2374 7570  \tweak text #tup
-00026bf0: 6c65 742d 6e75 6d62 6572 3a3a 6361 6c63  let-number::calc
-00026c00: 2d66 7261 6374 696f 6e2d 7465 7874 0a20  -fraction-text. 
-00026c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026c20: 2020 205c 7469 6d65 7320 322f 330a 2020     \times 2/3.  
-00026c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026c40: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-00026c50: 2020 2020 2020 2020 2020 2020 6327 340a              c'4.
-00026c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026c70: 2020 2020 2020 2020 6427 340a 2020 2020          d'4.    
-00026c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026c90: 2020 2020 6527 340a 2020 2020 2020 2020      e'4.        
-00026ca0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-00026cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026cc0: 2020 5c74 696d 6573 2032 2f33 0a20 2020    \times 2/3.   
-00026cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026ce0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00026cf0: 2020 2020 2020 2020 2020 2063 2734 0a20             c'4. 
-00026d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026d10: 2020 2020 2020 2064 2734 0a20 2020 2020         d'4.     
-00026d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026d30: 2020 2065 2734 0a20 2020 2020 2020 2020     e'4.         
-00026d40: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-00026d50: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
-00026d60: 2020 2020 2020 2020 2e2e 2020 636f 6e74          ..  cont
-00026d70: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-00026d80: 0a20 2020 2020 2020 2020 2020 2049 676e  .            Ign
-00026d90: 6f72 6564 2077 6865 6e20 7475 706c 6574  ored when tuplet
-00026da0: 206e 756d 6265 7220 7465 7874 2069 7320   number text is 
-00026db0: 6f76 6572 7269 6464 656e 2065 7870 6c69  overridden expli
-00026dc0: 6369 746c 793a 0a0a 2020 2020 2020 2020  citly:..        
-00026dd0: 2020 2020 3e3e 3e20 7475 706c 6574 203d      >>> tuplet =
-00026de0: 2061 626a 6164 2e54 7570 6c65 7428 2832   abjad.Tuplet((2
-00026df0: 2c20 3329 2c20 2263 2738 2064 2738 2065  , 3), "c'8 d'8 e
-00026e00: 2738 2229 0a20 2020 2020 2020 2020 2020  '8").           
-00026e10: 203e 3e3e 2064 7572 6174 696f 6e20 3d20   >>> duration = 
-00026e20: 6162 6a61 642e 6765 742e 6475 7261 7469  abjad.get.durati
-00026e30: 6f6e 2874 7570 6c65 7429 0a20 2020 2020  on(tuplet).     
-00026e40: 2020 2020 2020 203e 3e3e 206e 6f74 6520         >>> note 
-00026e50: 3d20 6162 6a61 642e 4e6f 7465 2e66 726f  = abjad.Note.fro
-00026e60: 6d5f 7069 7463 685f 616e 645f 6475 7261  m_pitch_and_dura
-00026e70: 7469 6f6e 2830 2c20 6475 7261 7469 6f6e  tion(0, duration
-00026e80: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00026e90: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-00026ea0: 2e69 6c6c 7573 7472 6174 6f72 732e 7365  .illustrators.se
-00026eb0: 6c65 6374 696f 6e5f 746f 5f73 636f 7265  lection_to_score
-00026ec0: 5f6d 6172 6b75 705f 7374 7269 6e67 285b  _markup_string([
-00026ed0: 6e6f 7465 5d29 0a20 2020 2020 2020 2020  note]).         
-00026ee0: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-00026ef0: 7266 225c 6d61 726b 7570 207b 7b20 7b73  rf"\markup {{ {s
-00026f00: 7472 696e 677d 207d 7d22 0a20 2020 2020  tring} }}".     
-00026f10: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-00026f20: 2e6f 7665 7272 6964 6528 7475 706c 6574  .override(tuplet
-00026f30: 292e 5475 706c 6574 4e75 6d62 6572 2e74  ).TupletNumber.t
-00026f40: 6578 7420 3d20 7374 7269 6e67 0a20 2020  ext = string.   
-00026f50: 2020 2020 2020 2020 203e 3e3e 2073 7461           >>> sta
-00026f60: 6666 203d 2061 626a 6164 2e53 7461 6666  ff = abjad.Staff
-00026f70: 285b 7475 706c 6574 5d29 0a20 2020 2020  ([tuplet]).     
-00026f80: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-00026f90: 2e73 686f 7728 7374 6166 6629 2023 2064  .show(staff) # d
-00026fa0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
-00026fb0: 2020 2020 2020 2020 2020 202e 2e20 2064             ..  d
-00026fc0: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
-00026fd0: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
-00026fe0: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
-00026ff0: 6e64 2873 7461 6666 290a 2020 2020 2020  nd(staff).      
-00027000: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-00027010: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
-00027020: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
-00027030: 2053 7461 6666 0a20 2020 2020 2020 2020   Staff.         
-00027040: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-00027050: 2020 2020 2020 2020 2020 2020 205c 6f76               \ov
-00027060: 6572 7269 6465 2054 7570 6c65 744e 756d  erride TupletNum
-00027070: 6265 722e 7465 7874 203d 205c 6d61 726b  ber.text = \mark
-00027080: 7570 207b 205c 7363 6f72 650a 2020 2020  up { \score.    
-00027090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000270a0: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-000270b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000270c0: 2020 5c63 6f6e 7465 7874 2053 636f 7265    \context Score
-000270d0: 203d 2022 5363 6f72 6522 0a20 2020 2020   = "Score".     
-000270e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000270f0: 2020 2020 2020 205c 7769 7468 0a20 2020         \with.   
-00027100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027110: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00027120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027130: 2020 2020 2020 2020 2020 205c 6f76 6572             \over
-00027140: 7269 6465 2053 7061 6369 6e67 5370 616e  ride SpacingSpan
-00027150: 6e65 722e 7370 6163 696e 672d 696e 6372  ner.spacing-incr
-00027160: 656d 656e 7420 3d20 302e 350a 2020 2020  ement = 0.5.    
-00027170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027180: 2020 2020 2020 2020 2020 2020 7072 6f70              prop
-00027190: 6f72 7469 6f6e 616c 4e6f 7461 7469 6f6e  ortionalNotation
-000271a0: 4475 7261 7469 6f6e 203d 2023 2366 0a20  Duration = ##f. 
-000271b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000271c0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-000271d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000271e0: 2020 2020 2020 2020 203c 3c0a 2020 2020           <<.    
-000271f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027200: 2020 2020 2020 2020 2020 2020 5c63 6f6e              \con
-00027210: 7465 7874 2052 6879 7468 6d69 6353 7461  text RhythmicSta
-00027220: 6666 203d 2022 5268 7974 686d 6963 5f53  ff = "Rhythmic_S
-00027230: 7461 6666 220a 2020 2020 2020 2020 2020  taff".          
-00027240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027250: 2020 2020 2020 5c77 6974 680a 2020 2020        \with.    
-00027260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027270: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-00027280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000272a0: 2020 5c72 656d 6f76 6520 5469 6d65 5f73    \remove Time_s
-000272b0: 6967 6e61 7475 7265 5f65 6e67 7261 7665  ignature_engrave
-000272c0: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
-000272d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000272e0: 2020 2020 2020 5c72 656d 6f76 6520 5374        \remove St
-000272f0: 6166 665f 7379 6d62 6f6c 5f65 6e67 7261  aff_symbol_engra
-00027300: 7665 720a 2020 2020 2020 2020 2020 2020  ver.            
-00027310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027320: 2020 2020 2020 2020 5c6f 7665 7272 6964          \overrid
-00027330: 6520 5374 656d 2e64 6972 6563 7469 6f6e  e Stem.direction
-00027340: 203d 2023 7570 0a20 2020 2020 2020 2020   = #up.         
-00027350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027360: 2020 2020 2020 2020 2020 205c 6f76 6572             \over
-00027370: 7269 6465 2053 7465 6d2e 6c65 6e67 7468  ride Stem.length
-00027380: 203d 2035 0a20 2020 2020 2020 2020 2020   = 5.           
-00027390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000273a0: 2020 2020 2020 2020 205c 6f76 6572 7269           \overri
-000273b0: 6465 2054 7570 6c65 7442 7261 636b 6574  de TupletBracket
-000273c0: 2e62 7261 636b 6574 2d76 6973 6962 696c  .bracket-visibil
-000273d0: 6974 7920 3d20 2323 740a 2020 2020 2020  ity = ##t.      
-000273e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000273f0: 2020 2020 2020 2020 2020 2020 2020 5c6f                \o
-00027400: 7665 7272 6964 6520 5475 706c 6574 4272  verride TupletBr
-00027410: 6163 6b65 742e 6469 7265 6374 696f 6e20  acket.direction 
-00027420: 3d20 2375 700a 2020 2020 2020 2020 2020  = #up.          
-00027430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027440: 2020 2020 2020 2020 2020 5c6f 7665 7272            \overr
-00027450: 6964 6520 5475 706c 6574 4272 6163 6b65  ide TupletBracke
-00027460: 742e 6d69 6e69 6d75 6d2d 6c65 6e67 7468  t.minimum-length
-00027470: 203d 2034 0a20 2020 2020 2020 2020 2020   = 4.           
-00027480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027490: 2020 2020 2020 2020 205c 6f76 6572 7269           \overri
-000274a0: 6465 2054 7570 6c65 7442 7261 636b 6574  de TupletBracket
-000274b0: 2e70 6164 6469 6e67 203d 2031 2e32 350a  .padding = 1.25.
-000274c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000274d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000274e0: 2020 2020 5c6f 7665 7272 6964 6520 5475      \override Tu
-000274f0: 706c 6574 4272 6163 6b65 742e 7368 6f72  pletBracket.shor
-00027500: 7465 6e2d 7061 6972 203d 2023 2728 2d31  ten-pair = #'(-1
-00027510: 202e 202d 312e 3529 0a20 2020 2020 2020   . -1.5).       
-00027520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027530: 2020 2020 2020 2020 2020 2020 205c 6f76               \ov
-00027540: 6572 7269 6465 2054 7570 6c65 7442 7261  erride TupletBra
-00027550: 636b 6574 2e73 7072 696e 6773 2d61 6e64  cket.springs-and
-00027560: 2d72 6f64 7320 3d20 236c 793a 7370 616e  -rods = #ly:span
-00027570: 6e65 723a 3a73 6574 2d73 7061 6369 6e67  ner::set-spacing
-00027580: 2d72 6f64 730a 2020 2020 2020 2020 2020  -rods.          
-00027590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000275a0: 2020 2020 2020 2020 2020 5c6f 7665 7272            \overr
-000275b0: 6964 6520 5475 706c 6574 4e75 6d62 6572  ide TupletNumber
-000275c0: 2e66 6f6e 742d 7369 7a65 203d 2030 0a20  .font-size = 0. 
-000275d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000275e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000275f0: 2020 205c 6f76 6572 7269 6465 2054 7570     \override Tup
-00027600: 6c65 744e 756d 6265 722e 7465 7874 203d  letNumber.text =
-00027610: 2023 7475 706c 6574 2d6e 756d 6265 723a   #tuplet-number:
-00027620: 3a63 616c 632d 6672 6163 7469 6f6e 2d74  :calc-fraction-t
-00027630: 6578 740a 2020 2020 2020 2020 2020 2020  ext.            
-00027640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027650: 2020 2020 2020 2020 7475 706c 6574 4675          tupletFu
-00027660: 6c6c 4c65 6e67 7468 203d 2023 2374 0a20  llLength = ##t. 
-00027670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027680: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-00027690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000276a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000276b0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-000276c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000276d0: 2020 2020 2020 2063 2734 0a20 2020 2020         c'4.     
-000276e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000276f0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-00027700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027710: 2020 2020 2020 2020 203e 3e0a 2020 2020           >>.    
-00027720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027730: 2020 2020 2020 2020 5c6c 6179 6f75 740a          \layout.
-00027740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027750: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+0001abd0: 206e 6f74 6520 3d20 6162 6a61 642e 4e6f   note = abjad.No
+0001abe0: 7465 2822 6327 2734 2229 0a20 2020 2020  te("c''4").     
+0001abf0: 2020 2020 2020 203e 3e3e 2061 6c74 6572         >>> alter
+0001ac00: 6e61 7469 7665 203d 2063 6f70 792e 636f  native = copy.co
+0001ac10: 7079 286e 6f74 652e 6e6f 7465 5f68 6561  py(note.note_hea
+0001ac20: 6429 0a20 2020 2020 2020 2020 2020 203e  d).            >
+0001ac30: 3e3e 2061 6c74 6572 6e61 7469 7665 2e69  >> alternative.i
+0001ac40: 735f 666f 7263 6564 203d 2054 7275 650a  s_forced = True.
+0001ac50: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001ac60: 7472 6970 6c65 203d 2028 616c 7465 726e  triple = (altern
+0001ac70: 6174 6976 652c 2061 626a 6164 2e54 6167  ative, abjad.Tag
+0001ac80: 2822 2d50 4152 5453 2229 2c20 6162 6a61  ("-PARTS"), abja
+0001ac90: 642e 5461 6728 222b 5041 5254 5322 2929  d.Tag("+PARTS"))
+0001aca0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0001acb0: 206e 6f74 652e 6e6f 7465 5f68 6561 642e   note.note_head.
+0001acc0: 616c 7465 726e 6174 6976 6520 3d20 7472  alternative = tr
+0001acd0: 6970 6c65 0a20 2020 2020 2020 2020 2020  iple.           
+0001ace0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+0001acf0: 6e6f 7465 2920 2320 646f 6374 6573 743a  note) # doctest:
+0001ad00: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0001ad10: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
+0001ad20: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
+0001ad30: 6e6f 7465 2c20 7461 6773 3d54 7275 6529  note, tags=True)
+0001ad40: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0001ad50: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
+0001ad60: 2020 2020 2020 2020 2020 2025 2120 2b50             %! +P
+0001ad70: 4152 5453 0a20 2020 2020 2020 2020 2020  ARTS.           
+0001ad80: 2063 2727 340a 2020 2020 2020 2020 2020   c''4.          
+0001ad90: 2020 2521 202d 5041 5254 530a 2020 2020    %! -PARTS.    
+0001ada0: 2020 2020 2020 2020 2540 2520 6327 2721          %@% c''!
+0001adb0: 340a 0a20 2020 2020 2020 2020 2020 2053  4..            S
+0001adc0: 7572 7669 7665 7320 7069 7463 6820 7265  urvives pitch re
+0001add0: 6173 7369 676e 6d65 6e74 3a0a 0a20 2020  assignment:..   
+0001ade0: 2020 2020 2020 2020 203e 3e3e 206e 6f74           >>> not
+0001adf0: 652e 7772 6974 7465 6e5f 7069 7463 6820  e.written_pitch 
+0001ae00: 3d20 2244 3522 0a20 2020 2020 2020 2020  = "D5".         
+0001ae10: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
+0001ae20: 7728 6e6f 7465 2920 2320 646f 6374 6573  w(note) # doctes
+0001ae30: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+0001ae40: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
+0001ae50: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
+0001ae60: 6428 6e6f 7465 2c20 7461 6773 3d54 7275  d(note, tags=Tru
+0001ae70: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+0001ae80: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
+0001ae90: 0a20 2020 2020 2020 2020 2020 2025 2120  .            %! 
+0001aea0: 2b50 4152 5453 0a20 2020 2020 2020 2020  +PARTS.         
+0001aeb0: 2020 2064 2727 340a 2020 2020 2020 2020     d''4.        
+0001aec0: 2020 2020 2521 202d 5041 5254 530a 2020      %! -PARTS.  
+0001aed0: 2020 2020 2020 2020 2020 2540 2520 6427            %@% d'
+0001aee0: 2721 340a 0a20 2020 2020 2020 2020 2020  '!4..           
+0001aef0: 2043 6c65 6172 2077 6974 6820 6e6f 6e65   Clear with none
+0001af00: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
+0001af10: 3e3e 206e 6f74 652e 6e6f 7465 5f68 6561  >> note.note_hea
+0001af20: 642e 616c 7465 726e 6174 6976 6520 3d20  d.alternative = 
+0001af30: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0001af40: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+0001af50: 6e6f 7465 2920 2320 646f 6374 6573 743a  note) # doctest:
+0001af60: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0001af70: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
+0001af80: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
+0001af90: 6e6f 7465 2c20 7461 6773 3d54 7275 6529  note, tags=True)
+0001afa0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0001afb0: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
+0001afc0: 2020 2020 2020 2020 2020 2064 2727 340a             d''4.
+0001afd0: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
+0001afe0: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
+0001aff0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0001b000: 3e20 6368 6f72 6420 3d20 6162 6a61 642e  > chord = abjad.
+0001b010: 4368 6f72 6428 223c 6327 2064 2720 6266  Chord("<c' d' bf
+0001b020: 2727 3e34 2229 0a20 2020 2020 2020 2020  ''>4").         
+0001b030: 2020 203e 3e3e 2061 6c74 6572 6e61 7469     >>> alternati
+0001b040: 7665 203d 2063 6f70 792e 636f 7079 2863  ve = copy.copy(c
+0001b050: 686f 7264 2e6e 6f74 655f 6865 6164 735b  hord.note_heads[
+0001b060: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
+0001b070: 3e3e 3e20 616c 7465 726e 6174 6976 652e  >>> alternative.
+0001b080: 6973 5f66 6f72 6365 6420 3d20 5472 7565  is_forced = True
+0001b090: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0001b0a0: 2074 7269 706c 6520 3d20 2861 6c74 6572   triple = (alter
+0001b0b0: 6e61 7469 7665 2c20 6162 6a61 642e 5461  native, abjad.Ta
+0001b0c0: 6728 222d 5041 5254 5322 292c 2061 626a  g("-PARTS"), abj
+0001b0d0: 6164 2e54 6167 2822 2b50 4152 5453 2229  ad.Tag("+PARTS")
+0001b0e0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+0001b0f0: 3e20 6368 6f72 642e 6e6f 7465 5f68 6561  > chord.note_hea
+0001b100: 6473 5b30 5d2e 616c 7465 726e 6174 6976  ds[0].alternativ
+0001b110: 6520 3d20 7472 6970 6c65 0a20 2020 2020  e = triple.     
+0001b120: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0001b130: 2e73 686f 7728 6368 6f72 6429 2023 2064  .show(chord) # d
+0001b140: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+0001b150: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
+0001b160: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
+0001b170: 6c79 706f 6e64 2863 686f 7264 2c20 7461  lypond(chord, ta
+0001b180: 6773 3d54 7275 6529 0a20 2020 2020 2020  gs=True).       
+0001b190: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
+0001b1a0: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+0001b1b0: 2020 203c 0a20 2020 2020 2020 2020 2020     <.           
+0001b1c0: 2020 2020 2025 2120 2b50 4152 5453 0a20       %! +PARTS. 
+0001b1d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0001b1e0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+0001b1f0: 2020 2521 202d 5041 5254 530a 2020 2020    %! -PARTS.    
+0001b200: 2020 2020 2020 2020 2020 2020 2540 2520              %@% 
+0001b210: 6327 210a 2020 2020 2020 2020 2020 2020  c'!.            
+0001b220: 2020 2020 6427 0a20 2020 2020 2020 2020      d'.         
+0001b230: 2020 2020 2020 2062 6627 270a 2020 2020         bf''.    
+0001b240: 2020 2020 2020 2020 3e34 0a0a 2020 2020          >4..    
+0001b250: 2020 2020 2020 2020 5375 7669 7665 7320          Suvives 
+0001b260: 7069 7463 6820 7265 6173 7369 676e 6d65  pitch reassignme
+0001b270: 6e74 3a0a 0a20 2020 2020 2020 2020 2020  nt:..           
+0001b280: 203e 3e3e 2063 686f 7264 2e6e 6f74 655f   >>> chord.note_
+0001b290: 6865 6164 735b 305d 2e77 7269 7474 656e  heads[0].written
+0001b2a0: 5f70 6974 6368 203d 2022 4233 220a 2020  _pitch = "B3".  
+0001b2b0: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+0001b2c0: 6a61 642e 7368 6f77 2863 686f 7264 2920  jad.show(chord) 
+0001b2d0: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
+0001b2e0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0001b2f0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+0001b300: 2e6c 696c 7970 6f6e 6428 6368 6f72 642c  .lilypond(chord,
+0001b310: 2074 6167 733d 5472 7565 290a 2020 2020   tags=True).    
+0001b320: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+0001b330: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+0001b340: 2020 2020 2020 3c0a 2020 2020 2020 2020        <.        
+0001b350: 2020 2020 2020 2020 2521 202b 5041 5254          %! +PART
+0001b360: 530a 2020 2020 2020 2020 2020 2020 2020  S.              
+0001b370: 2020 620a 2020 2020 2020 2020 2020 2020    b.            
+0001b380: 2020 2020 2521 202d 5041 5254 530a 2020      %! -PARTS.  
+0001b390: 2020 2020 2020 2020 2020 2020 2020 2540                %@
+0001b3a0: 2520 6221 0a20 2020 2020 2020 2020 2020  % b!.           
+0001b3b0: 2020 2020 2064 270a 2020 2020 2020 2020       d'.        
+0001b3c0: 2020 2020 2020 2020 6266 2727 0a20 2020          bf''.   
+0001b3d0: 2020 2020 2020 2020 203e 340a 0a20 2020           >4..   
+0001b3e0: 2020 2020 2020 2020 2043 6c65 6172 2077           Clear w
+0001b3f0: 6974 6820 6e6f 6e65 3a0a 0a20 2020 2020  ith none:..     
+0001b400: 2020 2020 2020 203e 3e3e 2063 686f 7264         >>> chord
+0001b410: 2e6e 6f74 655f 6865 6164 735b 305d 2e61  .note_heads[0].a
+0001b420: 6c74 6572 6e61 7469 7665 203d 204e 6f6e  lternative = Non
+0001b430: 650a 2020 2020 2020 2020 2020 2020 3e3e  e.            >>
+0001b440: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+0001b450: 2e6c 696c 7970 6f6e 6428 6368 6f72 642c  .lilypond(chord,
+0001b460: 2074 6167 733d 5472 7565 290a 2020 2020   tags=True).    
+0001b470: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+0001b480: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+0001b490: 2020 2020 2020 3c62 2064 2720 6266 2727        <b d' bf''
+0001b4a0: 3e34 0a0a 2020 2020 2020 2020 2222 220a  >4..        """.
+0001b4b0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0001b4c0: 656c 662e 5f61 6c74 6572 6e61 7469 7665  elf._alternative
+0001b4d0: 0a0a 2020 2020 4061 6c74 6572 6e61 7469  ..    @alternati
+0001b4e0: 7665 2e73 6574 7465 720a 2020 2020 6465  ve.setter.    de
+0001b4f0: 6620 616c 7465 726e 6174 6976 6528 7365  f alternative(se
+0001b500: 6c66 2c20 6172 6775 6d65 6e74 293a 0a20  lf, argument):. 
+0001b510: 2020 2020 2020 2069 6620 6172 6775 6d65         if argume
+0001b520: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
+0001b530: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+0001b540: 7274 2069 7369 6e73 7461 6e63 6528 6172  rt isinstance(ar
+0001b550: 6775 6d65 6e74 2c20 7475 706c 6529 2c20  gument, tuple), 
+0001b560: 7265 7072 2861 7267 756d 656e 7429 0a20  repr(argument). 
+0001b570: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+0001b580: 7420 6c65 6e28 6172 6775 6d65 6e74 2920  t len(argument) 
+0001b590: 3d3d 2033 2c20 7265 7072 2861 7267 756d  == 3, repr(argum
+0001b5a0: 656e 7429 0a20 2020 2020 2020 2020 2020  ent).           
+0001b5b0: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
+0001b5c0: 6365 2861 7267 756d 656e 745b 305d 2c20  ce(argument[0], 
+0001b5d0: 4e6f 7465 4865 6164 292c 2072 6570 7228  NoteHead), repr(
+0001b5e0: 6172 6775 6d65 6e74 290a 2020 2020 2020  argument).      
+0001b5f0: 2020 2020 2020 6173 7365 7274 2061 7267        assert arg
+0001b600: 756d 656e 745b 305d 2e61 6c74 6572 6e61  ument[0].alterna
+0001b610: 7469 7665 2069 7320 4e6f 6e65 2c20 7265  tive is None, re
+0001b620: 7072 2861 7267 756d 656e 7429 0a20 2020  pr(argument).   
+0001b630: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+0001b640: 6973 696e 7374 616e 6365 2861 7267 756d  isinstance(argum
+0001b650: 656e 745b 315d 2c20 5f74 6167 2e54 6167  ent[1], _tag.Tag
+0001b660: 292c 2072 6570 7228 6172 6775 6d65 6e74  ), repr(argument
+0001b670: 290a 2020 2020 2020 2020 2020 2020 6173  ).            as
+0001b680: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
+0001b690: 6172 6775 6d65 6e74 5b32 5d2c 205f 7461  argument[2], _ta
+0001b6a0: 672e 5461 6729 2c20 7265 7072 2861 7267  g.Tag), repr(arg
+0001b6b0: 756d 656e 7429 0a20 2020 2020 2020 2073  ument).        s
+0001b6c0: 656c 662e 5f61 6c74 6572 6e61 7469 7665  elf._alternative
+0001b6d0: 203d 2061 7267 756d 656e 740a 0a20 2020   = argument..   
+0001b6e0: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
+0001b6f0: 6566 2069 735f 6361 7574 696f 6e61 7279  ef is_cautionary
+0001b700: 2873 656c 6629 202d 3e20 626f 6f6c 3a0a  (self) -> bool:.
+0001b710: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001b720: 2020 2020 4765 7473 2061 6e64 2073 6574      Gets and set
+0001b730: 7320 6361 7574 696f 6e61 7279 2061 6363  s cautionary acc
+0001b740: 6964 656e 7461 6c20 666c 6167 2e0a 0a20  idental flag... 
+0001b750: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
+0001b760: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+0001b770: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001b780: 6e6f 7465 203d 2061 626a 6164 2e4e 6f74  note = abjad.Not
+0001b790: 6528 2263 2727 2229 0a20 2020 2020 2020  e("c''").       
+0001b7a0: 2020 2020 203e 3e3e 206e 6f74 652e 6e6f       >>> note.no
+0001b7b0: 7465 5f68 6561 642e 6973 5f63 6175 7469  te_head.is_cauti
+0001b7c0: 6f6e 6172 7920 3d20 5472 7565 0a20 2020  onary = True.   
+0001b7d0: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
+0001b7e0: 6164 2e73 686f 7728 6e6f 7465 2920 2320  ad.show(note) # 
+0001b7f0: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+0001b800: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
+0001b810: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
+0001b820: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+0001b830: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+0001b840: 6f6e 6428 6e6f 7465 290a 2020 2020 2020  ond(note).      
+0001b850: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
+0001b860: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+0001b870: 2020 2020 2020 2020 2020 2020 6327 273f              c''?
+0001b880: 340a 0a20 2020 2020 2020 2020 2020 203e  4..            >
+0001b890: 3e3e 206e 6f74 6520 3d20 6162 6a61 642e  >> note = abjad.
+0001b8a0: 4e6f 7465 2822 6373 2727 2229 0a20 2020  Note("cs''").   
+0001b8b0: 2020 2020 2020 2020 203e 3e3e 206e 6f74           >>> not
+0001b8c0: 652e 6e6f 7465 5f68 6561 642e 6973 5f63  e.note_head.is_c
+0001b8d0: 6175 7469 6f6e 6172 7920 3d20 5472 7565  autionary = True
+0001b8e0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0001b8f0: 2061 626a 6164 2e73 686f 7728 6e6f 7465   abjad.show(note
+0001b900: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
+0001b910: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
+0001b920: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+0001b930: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001b940: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
+0001b950: 696c 7970 6f6e 6428 6e6f 7465 290a 2020  ilypond(note).  
+0001b960: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+0001b970: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
+0001b980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b990: 6373 2727 3f34 0a0a 2020 2020 2020 2020  cs''?4..        
+0001b9a0: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+0001b9b0: 726e 2073 656c 662e 5f69 735f 6361 7574  rn self._is_caut
+0001b9c0: 696f 6e61 7279 0a0a 2020 2020 4069 735f  ionary..    @is_
+0001b9d0: 6361 7574 696f 6e61 7279 2e73 6574 7465  cautionary.sette
+0001b9e0: 720a 2020 2020 6465 6620 6973 5f63 6175  r.    def is_cau
+0001b9f0: 7469 6f6e 6172 7928 7365 6c66 2c20 6172  tionary(self, ar
+0001ba00: 6775 6d65 6e74 293a 0a20 2020 2020 2020  gument):.       
+0001ba10: 2073 656c 662e 5f69 735f 6361 7574 696f   self._is_cautio
+0001ba20: 6e61 7279 203d 2062 6f6f 6c28 6172 6775  nary = bool(argu
+0001ba30: 6d65 6e74 290a 0a20 2020 2040 7072 6f70  ment)..    @prop
+0001ba40: 6572 7479 0a20 2020 2064 6566 2069 735f  erty.    def is_
+0001ba50: 666f 7263 6564 2873 656c 6629 202d 3e20  forced(self) -> 
+0001ba60: 626f 6f6c 3a0a 2020 2020 2020 2020 2222  bool:.        ""
+0001ba70: 220a 2020 2020 2020 2020 4765 7473 2061  ".        Gets a
+0001ba80: 6e64 2073 6574 7320 666f 7263 6564 2061  nd sets forced a
+0001ba90: 6363 6964 656e 7461 6c20 666c 6167 2e0a  ccidental flag..
+0001baa0: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
+0001bab0: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
+0001bac0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0001bad0: 3e20 6e6f 7465 203d 2061 626a 6164 2e4e  > note = abjad.N
+0001bae0: 6f74 6528 2263 2727 2229 0a20 2020 2020  ote("c''").     
+0001baf0: 2020 2020 2020 203e 3e3e 206e 6f74 652e         >>> note.
+0001bb00: 6e6f 7465 5f68 6561 642e 6973 5f66 6f72  note_head.is_for
+0001bb10: 6365 6420 3d20 5472 7565 0a20 2020 2020  ced = True.     
+0001bb20: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0001bb30: 2e73 686f 7728 6e6f 7465 2920 2320 646f  .show(note) # do
+0001bb40: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
+0001bb50: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
+0001bb60: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
+0001bb70: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
+0001bb80: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
+0001bb90: 6428 6e6f 7465 290a 2020 2020 2020 2020  d(note).        
+0001bba0: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+0001bbb0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+0001bbc0: 2020 2020 2020 2020 2020 6327 2721 340a            c''!4.
+0001bbd0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0001bbe0: 206e 6f74 6520 3d20 6162 6a61 642e 4e6f   note = abjad.No
+0001bbf0: 7465 2822 6373 2727 2229 0a20 2020 2020  te("cs''").     
+0001bc00: 2020 2020 2020 203e 3e3e 206e 6f74 652e         >>> note.
+0001bc10: 6e6f 7465 5f68 6561 642e 6973 5f66 6f72  note_head.is_for
+0001bc20: 6365 6420 3d20 5472 7565 0a20 2020 2020  ced = True.     
+0001bc30: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0001bc40: 2e73 686f 7728 6e6f 7465 2920 2320 646f  .show(note) # do
+0001bc50: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
+0001bc60: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
+0001bc70: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
+0001bc80: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
+0001bc90: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
+0001bca0: 6428 6e6f 7465 290a 2020 2020 2020 2020  d(note).        
+0001bcb0: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+0001bcc0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+0001bcd0: 2020 2020 2020 2020 2020 6373 2727 2134            cs''!4
+0001bce0: 0a0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+0001bcf0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0001bd00: 662e 5f69 735f 666f 7263 6564 0a0a 2020  f._is_forced..  
+0001bd10: 2020 4069 735f 666f 7263 6564 2e73 6574    @is_forced.set
+0001bd20: 7465 720a 2020 2020 6465 6620 6973 5f66  ter.    def is_f
+0001bd30: 6f72 6365 6428 7365 6c66 2c20 6172 6775  orced(self, argu
+0001bd40: 6d65 6e74 293a 0a20 2020 2020 2020 2069  ment):.        i
+0001bd50: 6620 6172 6775 6d65 6e74 2069 7320 6e6f  f argument is no
+0001bd60: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0001bd70: 2020 2020 6172 6775 6d65 6e74 203d 2062      argument = b
+0001bd80: 6f6f 6c28 6172 6775 6d65 6e74 290a 2020  ool(argument).  
+0001bd90: 2020 2020 2020 7365 6c66 2e5f 6973 5f66        self._is_f
+0001bda0: 6f72 6365 6420 3d20 6172 6775 6d65 6e74  orced = argument
+0001bdb0: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+0001bdc0: 2020 2020 6465 6620 6973 5f70 6172 656e      def is_paren
+0001bdd0: 7468 6573 697a 6564 2873 656c 6629 202d  thesized(self) -
+0001bde0: 3e20 626f 6f6c 3a0a 2020 2020 2020 2020  > bool:.        
+0001bdf0: 7222 2222 0a20 2020 2020 2020 2047 6574  r""".        Get
+0001be00: 7320 616e 6420 7365 7473 2066 6f72 6365  s and sets force
+0001be10: 6420 6163 6369 6465 6e74 616c 2066 6c61  d accidental fla
+0001be20: 672e 0a0a 2020 2020 2020 2020 2e2e 2020  g...        ..  
+0001be30: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
+0001be40: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
+0001be50: 203e 3e3e 206e 6f74 6520 3d20 6162 6a61   >>> note = abja
+0001be60: 642e 4e6f 7465 2822 6327 2722 290a 2020  d.Note("c''").  
+0001be70: 2020 2020 2020 2020 2020 3e3e 3e20 6e6f            >>> no
+0001be80: 7465 2e6e 6f74 655f 6865 6164 2e69 735f  te.note_head.is_
+0001be90: 7061 7265 6e74 6865 7369 7a65 6420 3d20  parenthesized = 
+0001bea0: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
+0001beb0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+0001bec0: 6e6f 7465 2920 2320 646f 6374 6573 743a  note) # doctest:
+0001bed0: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0001bee0: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
+0001bef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bf00: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+0001bf10: 6164 2e6c 696c 7970 6f6e 6428 6e6f 7465  ad.lilypond(note
+0001bf20: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001bf30: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+0001bf40: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0001bf50: 2020 2020 5c70 6172 656e 7468 6573 697a      \parenthesiz
+0001bf60: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0001bf70: 2020 6327 2734 0a0a 2020 2020 2020 2020    c''4..        
+0001bf80: 2020 2020 3e3e 3e20 6e6f 7465 203d 2061      >>> note = a
+0001bf90: 626a 6164 2e4e 6f74 6528 2263 7327 2722  bjad.Note("cs''"
+0001bfa0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+0001bfb0: 3e20 6e6f 7465 2e6e 6f74 655f 6865 6164  > note.note_head
+0001bfc0: 2e69 735f 7061 7265 6e74 6865 7369 7a65  .is_parenthesize
+0001bfd0: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
+0001bfe0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
+0001bff0: 686f 7728 6e6f 7465 2920 2320 646f 6374  how(note) # doct
+0001c000: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
+0001c010: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
+0001c020: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
+0001c030: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
+0001c040: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
+0001c050: 6e6f 7465 290a 2020 2020 2020 2020 2020  note).          
+0001c060: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+0001c070: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+0001c080: 2020 2020 2020 2020 5c70 6172 656e 7468          \parenth
+0001c090: 6573 697a 650a 2020 2020 2020 2020 2020  esize.          
+0001c0a0: 2020 2020 2020 6373 2727 340a 0a20 2020        cs''4..   
+0001c0b0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0001c0c0: 2072 6574 7572 6e20 7365 6c66 2e5f 6973   return self._is
+0001c0d0: 5f70 6172 656e 7468 6573 697a 6564 0a0a  _parenthesized..
+0001c0e0: 2020 2020 4069 735f 7061 7265 6e74 6865      @is_parenthe
+0001c0f0: 7369 7a65 642e 7365 7474 6572 0a20 2020  sized.setter.   
+0001c100: 2064 6566 2069 735f 7061 7265 6e74 6865   def is_parenthe
+0001c110: 7369 7a65 6428 7365 6c66 2c20 6172 6775  sized(self, argu
+0001c120: 6d65 6e74 293a 0a20 2020 2020 2020 2069  ment):.        i
+0001c130: 6620 6172 6775 6d65 6e74 2069 7320 6e6f  f argument is no
+0001c140: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0001c150: 2020 2020 6172 6775 6d65 6e74 203d 2062      argument = b
+0001c160: 6f6f 6c28 6172 6775 6d65 6e74 290a 2020  ool(argument).  
+0001c170: 2020 2020 2020 7365 6c66 2e5f 6973 5f70        self._is_p
+0001c180: 6172 656e 7468 6573 697a 6564 203d 2061  arenthesized = a
+0001c190: 7267 756d 656e 740a 0a20 2020 2040 7072  rgument..    @pr
+0001c1a0: 6f70 6572 7479 0a20 2020 2064 6566 206e  operty.    def n
+0001c1b0: 616d 6564 5f70 6974 6368 2873 656c 6629  amed_pitch(self)
+0001c1c0: 202d 3e20 5f70 6974 6368 2e4e 616d 6564   -> _pitch.Named
+0001c1d0: 5069 7463 683a 0a20 2020 2020 2020 2022  Pitch:.        "
+0001c1e0: 2222 0a20 2020 2020 2020 2047 6574 7320  "".        Gets 
+0001c1f0: 6e61 6d65 6420 7069 7463 682e 0a0a 2020  named pitch...  
+0001c200: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
+0001c210: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
+0001c220: 2020 2020 2020 2020 2020 203e 3e3e 206e             >>> n
+0001c230: 6f74 655f 6865 6164 203d 2061 626a 6164  ote_head = abjad
+0001c240: 2e4e 6f74 6548 6561 6428 2263 7327 2722  .NoteHead("cs''"
+0001c250: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+0001c260: 3e20 6e6f 7465 5f68 6561 642e 6e61 6d65  > note_head.name
+0001c270: 645f 7069 7463 680a 2020 2020 2020 2020  d_pitch.        
+0001c280: 2020 2020 4e61 6d65 6450 6974 6368 2822      NamedPitch("
+0001c290: 6373 2727 2229 0a0a 2020 2020 2020 2020  cs''")..        
+0001c2a0: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+0001c2b0: 726e 2073 656c 662e 7772 6974 7465 6e5f  rn self.written_
+0001c2c0: 7069 7463 680a 0a20 2020 2040 7072 6f70  pitch..    @prop
+0001c2d0: 6572 7479 0a20 2020 2064 6566 2077 7269  erty.    def wri
+0001c2e0: 7474 656e 5f70 6974 6368 2873 656c 6629  tten_pitch(self)
+0001c2f0: 202d 3e20 5f70 6974 6368 2e4e 616d 6564   -> _pitch.Named
+0001c300: 5069 7463 683a 0a20 2020 2020 2020 2022  Pitch:.        "
+0001c310: 2222 0a20 2020 2020 2020 2047 6574 7320  "".        Gets 
+0001c320: 616e 6420 7365 7473 2077 7269 7474 656e  and sets written
+0001c330: 2070 6974 6368 206f 6620 6e6f 7465 2d68   pitch of note-h
+0001c340: 6561 642e 0a0a 2020 2020 2020 2020 2e2e  ead...        ..
+0001c350: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
+0001c360: 616d 706c 650a 0a20 2020 2020 2020 2020  ample..         
+0001c370: 2020 203e 3e3e 206e 6f74 655f 6865 6164     >>> note_head
+0001c380: 203d 2061 626a 6164 2e4e 6f74 6548 6561   = abjad.NoteHea
+0001c390: 6428 2263 7327 2722 290a 2020 2020 2020  d("cs''").      
+0001c3a0: 2020 2020 2020 3e3e 3e20 6e6f 7465 5f68        >>> note_h
+0001c3b0: 6561 642e 7772 6974 7465 6e5f 7069 7463  ead.written_pitc
+0001c3c0: 680a 2020 2020 2020 2020 2020 2020 4e61  h.            Na
+0001c3d0: 6d65 6450 6974 6368 2822 6373 2727 2229  medPitch("cs''")
+0001c3e0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0001c3f0: 3e20 6e6f 7465 5f68 6561 6420 3d20 6162  > note_head = ab
+0001c400: 6a61 642e 4e6f 7465 4865 6164 2822 6373  jad.NoteHead("cs
+0001c410: 2727 2229 0a20 2020 2020 2020 2020 2020  ''").           
+0001c420: 203e 3e3e 206e 6f74 655f 6865 6164 2e77   >>> note_head.w
+0001c430: 7269 7474 656e 5f70 6974 6368 203d 2022  ritten_pitch = "
+0001c440: 6427 2722 0a20 2020 2020 2020 2020 2020  d''".           
+0001c450: 203e 3e3e 206e 6f74 655f 6865 6164 2e77   >>> note_head.w
+0001c460: 7269 7474 656e 5f70 6974 6368 0a20 2020  ritten_pitch.   
+0001c470: 2020 2020 2020 2020 204e 616d 6564 5069           NamedPi
+0001c480: 7463 6828 2264 2727 2229 0a0a 2020 2020  tch("d''")..    
+0001c490: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0001c4a0: 7265 7475 726e 2073 656c 662e 5f77 7269  return self._wri
+0001c4b0: 7474 656e 5f70 6974 6368 0a0a 2020 2020  tten_pitch..    
+0001c4c0: 4077 7269 7474 656e 5f70 6974 6368 2e73  @written_pitch.s
+0001c4d0: 6574 7465 720a 2020 2020 6465 6620 7772  etter.    def wr
+0001c4e0: 6974 7465 6e5f 7069 7463 6828 7365 6c66  itten_pitch(self
+0001c4f0: 2c20 6172 6775 6d65 6e74 293a 0a20 2020  , argument):.   
+0001c500: 2020 2020 2077 7269 7474 656e 5f70 6974       written_pit
+0001c510: 6368 203d 205f 7069 7463 682e 4e61 6d65  ch = _pitch.Name
+0001c520: 6450 6974 6368 2861 7267 756d 656e 7429  dPitch(argument)
+0001c530: 0a20 2020 2020 2020 2073 656c 662e 5f77  .        self._w
+0001c540: 7269 7474 656e 5f70 6974 6368 203d 2077  ritten_pitch = w
+0001c550: 7269 7474 656e 5f70 6974 6368 0a20 2020  ritten_pitch.   
+0001c560: 2020 2020 2069 6620 7365 6c66 2e61 6c74       if self.alt
+0001c570: 6572 6e61 7469 7665 2069 7320 6e6f 7420  ernative is not 
+0001c580: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0001c590: 2020 7365 6c66 2e61 6c74 6572 6e61 7469    self.alternati
+0001c5a0: 7665 5b30 5d2e 7772 6974 7465 6e5f 7069  ve[0].written_pi
+0001c5b0: 7463 6820 3d20 7772 6974 7465 6e5f 7069  tch = written_pi
+0001c5c0: 7463 680a 0a0a 636c 6173 7320 4472 756d  tch...class Drum
+0001c5d0: 4e6f 7465 4865 6164 284e 6f74 6548 6561  NoteHead(NoteHea
+0001c5e0: 6429 3a0a 2020 2020 2222 220a 2020 2020  d):.    """.    
+0001c5f0: 4472 756d 206e 6f74 652d 6865 6164 2e0a  Drum note-head..
+0001c600: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
+0001c610: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+0001c620: 2020 2020 2020 3e3e 3e20 6e6f 7465 5f68        >>> note_h
+0001c630: 6561 6420 3d20 6162 6a61 642e 4472 756d  ead = abjad.Drum
+0001c640: 4e6f 7465 4865 6164 2822 736e 6172 6522  NoteHead("snare"
+0001c650: 290a 2020 2020 2020 2020 3e3e 3e20 6e6f  ).        >>> no
+0001c660: 7465 5f68 6561 640a 2020 2020 2020 2020  te_head.        
+0001c670: 4472 756d 4e6f 7465 4865 6164 2827 736e  DrumNoteHead('sn
+0001c680: 6172 6527 290a 0a20 2020 2022 2222 0a0a  are')..    """..
+0001c690: 2020 2020 5f5f 646f 6375 6d65 6e74 6174      __documentat
+0001c6a0: 696f 6e5f 7365 6374 696f 6e5f 5f20 3d20  ion_section__ = 
+0001c6b0: 224e 6f74 652d 6865 6164 7322 0a0a 2020  "Note-heads"..  
+0001c6c0: 2020 5f5f 736c 6f74 735f 5f20 3d20 2829    __slots__ = ()
+0001c6d0: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+0001c6e0: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
+0001c6f0: 2c0a 2020 2020 2020 2020 7772 6974 7465  ,.        writte
+0001c700: 6e5f 7069 7463 683a 2073 7472 203d 2022  n_pitch: str = "
+0001c710: 736e 6172 6522 2c0a 2020 2020 2020 2020  snare",.        
+0001c720: 6973 5f63 6175 7469 6f6e 6172 793a 2062  is_cautionary: b
+0001c730: 6f6f 6c20 3d20 4661 6c73 652c 0a20 2020  ool = False,.   
+0001c740: 2020 2020 2069 735f 666f 7263 6564 3a20       is_forced: 
+0001c750: 626f 6f6c 203d 2046 616c 7365 2c0a 2020  bool = False,.  
+0001c760: 2020 2020 2020 6973 5f70 6172 656e 7468        is_parenth
+0001c770: 6573 697a 6564 3a20 626f 6f6c 203d 2046  esized: bool = F
+0001c780: 616c 7365 2c0a 2020 2020 2020 2020 7477  alse,.        tw
+0001c790: 6561 6b73 3a20 5f74 7765 616b 732e 5477  eaks: _tweaks.Tw
+0001c7a0: 6561 6b20 3d20 4e6f 6e65 2c0a 2020 2020  eak = None,.    
+0001c7b0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+0001c7c0: 2020 204e 6f74 6548 6561 642e 5f5f 696e     NoteHead.__in
+0001c7d0: 6974 5f5f 280a 2020 2020 2020 2020 2020  it__(.          
+0001c7e0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+0001c7f0: 2020 2020 7772 6974 7465 6e5f 7069 7463      written_pitc
+0001c800: 683d 4e6f 6e65 2c0a 2020 2020 2020 2020  h=None,.        
+0001c810: 2020 2020 6973 5f63 6175 7469 6f6e 6172      is_cautionar
+0001c820: 793d 6973 5f63 6175 7469 6f6e 6172 792c  y=is_cautionary,
+0001c830: 0a20 2020 2020 2020 2020 2020 2069 735f  .            is_
+0001c840: 666f 7263 6564 3d69 735f 666f 7263 6564  forced=is_forced
+0001c850: 2c0a 2020 2020 2020 2020 2020 2020 6973  ,.            is
+0001c860: 5f70 6172 656e 7468 6573 697a 6564 3d69  _parenthesized=i
+0001c870: 735f 7061 7265 6e74 6865 7369 7a65 642c  s_parenthesized,
+0001c880: 0a20 2020 2020 2020 2020 2020 2074 7765  .            twe
+0001c890: 616b 733d 7477 6561 6b73 2c0a 2020 2020  aks=tweaks,.    
+0001c8a0: 2020 2020 290a 2020 2020 2020 2020 6173      ).        as
+0001c8b0: 7365 7274 2073 7472 2877 7269 7474 656e  sert str(written
+0001c8c0: 5f70 6974 6368 2920 696e 205f 6c79 636f  _pitch) in _lyco
+0001c8d0: 6e73 742e 6472 756d 730a 2020 2020 2020  nst.drums.      
+0001c8e0: 2020 6472 756d 5f70 6974 6368 203d 205f    drum_pitch = _
+0001c8f0: 6c79 636f 6e73 742e 6472 756d 735b 7374  lyconst.drums[st
+0001c900: 7228 7772 6974 7465 6e5f 7069 7463 6829  r(written_pitch)
+0001c910: 5d0a 2020 2020 2020 2020 7365 6c66 2e5f  ].        self._
+0001c920: 7772 6974 7465 6e5f 7069 7463 6820 3d20  written_pitch = 
+0001c930: 6472 756d 5f70 6974 6368 0a0a 0a63 6c61  drum_pitch...cla
+0001c940: 7373 204e 6f74 6548 6561 644c 6973 7428  ss NoteHeadList(
+0001c950: 6c69 7374 293a 0a20 2020 2022 2222 0a20  list):.    """. 
+0001c960: 2020 204e 6f74 652d 6865 6164 206c 6973     Note-head lis
+0001c970: 742e 0a0a 2020 2020 2e2e 2020 636f 6e74  t...    ..  cont
+0001c980: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
+0001c990: 0a20 2020 2020 2020 203e 3e3e 2066 6f72  .        >>> for
+0001c9a0: 205f 2069 6e20 6162 6a61 642e 4e6f 7465   _ in abjad.Note
+0001c9b0: 4865 6164 4c69 7374 285b 3131 2c20 3130  HeadList([11, 10
+0001c9c0: 2c20 395d 293a 205f 0a20 2020 2020 2020  , 9]): _.       
+0001c9d0: 204e 6f74 6548 6561 6428 2261 2722 290a   NoteHead("a'").
+0001c9e0: 2020 2020 2020 2020 4e6f 7465 4865 6164          NoteHead
+0001c9f0: 2822 6266 2722 290a 2020 2020 2020 2020  ("bf'").        
+0001ca00: 4e6f 7465 4865 6164 2822 6227 2229 0a0a  NoteHead("b'")..
+0001ca10: 2020 2020 2222 220a 0a20 2020 205f 5f64      """..    __d
+0001ca20: 6f63 756d 656e 7461 7469 6f6e 5f73 6563  ocumentation_sec
+0001ca30: 7469 6f6e 5f5f 203d 2022 4e6f 7465 2d68  tion__ = "Note-h
+0001ca40: 6561 6473 220a 0a20 2020 2064 6566 205f  eads"..    def _
+0001ca50: 5f69 6e69 745f 5f28 7365 6c66 2c20 6172  _init__(self, ar
+0001ca60: 6775 6d65 6e74 3d28 2929 3a0a 2020 2020  gument=()):.    
+0001ca70: 2020 2020 6e6f 7465 5f68 6561 6473 203d      note_heads =
+0001ca80: 205b 4e6f 7465 4865 6164 285f 2920 666f   [NoteHead(_) fo
+0001ca90: 7220 5f20 696e 2061 7267 756d 656e 745d  r _ in argument]
+0001caa0: 0a20 2020 2020 2020 206c 6973 742e 5f5f  .        list.__
+0001cab0: 696e 6974 5f5f 2873 656c 662c 206e 6f74  init__(self, not
+0001cac0: 655f 6865 6164 7329 0a20 2020 2020 2020  e_heads).       
+0001cad0: 2073 656c 662e 736f 7274 2829 0a0a 2020   self.sort()..  
+0001cae0: 2020 6465 6620 5f5f 7365 7469 7465 6d5f    def __setitem_
+0001caf0: 5f28 7365 6c66 2c20 692c 2061 7267 756d  _(self, i, argum
+0001cb00: 656e 7429 3a0a 2020 2020 2020 2020 2222  ent):.        ""
+0001cb10: 220a 2020 2020 2020 2020 436f 6572 6365  ".        Coerce
+0001cb20: 7320 6060 6172 6775 6d65 6e74 6060 2061  s ``argument`` a
+0001cb30: 6e64 2073 6574 7320 6174 2060 6069 6060  nd sets at ``i``
+0001cb40: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+0001cb50: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0001cb60: 6e63 6528 692c 2069 6e74 293a 0a20 2020  nce(i, int):.   
+0001cb70: 2020 2020 2020 2020 206e 6577 5f69 7465           new_ite
+0001cb80: 6d20 3d20 4e6f 7465 4865 6164 2861 7267  m = NoteHead(arg
+0001cb90: 756d 656e 7429 0a20 2020 2020 2020 2020  ument).         
+0001cba0: 2020 206c 6973 742e 5f5f 7365 7469 7465     list.__setite
+0001cbb0: 6d5f 5f28 7365 6c66 2c20 692c 206e 6577  m__(self, i, new
+0001cbc0: 5f69 7465 6d29 0a20 2020 2020 2020 2065  _item).        e
+0001cbd0: 6c69 6620 6973 696e 7374 616e 6365 2869  lif isinstance(i
+0001cbe0: 2c20 736c 6963 6529 3a0a 2020 2020 2020  , slice):.      
+0001cbf0: 2020 2020 2020 6e65 775f 6974 656d 7320        new_items 
+0001cc00: 3d20 5b4e 6f74 6548 6561 6428 5f29 2066  = [NoteHead(_) f
+0001cc10: 6f72 205f 2069 6e20 6172 6775 6d65 6e74  or _ in argument
+0001cc20: 5d0a 2020 2020 2020 2020 2020 2020 6c69  ].            li
+0001cc30: 7374 2e5f 5f73 6574 6974 656d 5f5f 2873  st.__setitem__(s
+0001cc40: 656c 662c 2069 2c20 6e65 775f 6974 656d  elf, i, new_item
+0001cc50: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
+0001cc60: 736f 7274 2829 0a0a 2020 2020 6465 6620  sort()..    def 
+0001cc70: 6170 7065 6e64 2873 656c 662c 2069 7465  append(self, ite
+0001cc80: 6d29 3a0a 2020 2020 2020 2020 2222 220a  m):.        """.
+0001cc90: 2020 2020 2020 2020 436f 6572 6365 7320          Coerces 
+0001cca0: 6060 6974 656d 6060 2061 6e64 2061 7070  ``item`` and app
+0001ccb0: 656e 6473 206e 6f74 652d 6865 6164 2e0a  ends note-head..
+0001ccc0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001ccd0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0001cce0: 6528 6974 656d 2c20 4e6f 7465 4865 6164  e(item, NoteHead
+0001ccf0: 293a 0a20 2020 2020 2020 2020 2020 206e  ):.            n
+0001cd00: 6f74 655f 6865 6164 203d 2069 7465 6d0a  ote_head = item.
+0001cd10: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0001cd20: 2020 2020 2020 2020 2020 6e6f 7465 5f68            note_h
+0001cd30: 6561 6420 3d20 4e6f 7465 4865 6164 2869  ead = NoteHead(i
+0001cd40: 7465 6d29 0a20 2020 2020 2020 206c 6973  tem).        lis
+0001cd50: 742e 6170 7065 6e64 2873 656c 662c 206e  t.append(self, n
+0001cd60: 6f74 655f 6865 6164 290a 2020 2020 2020  ote_head).      
+0001cd70: 2020 7365 6c66 2e73 6f72 7428 290a 0a20    self.sort().. 
+0001cd80: 2020 2064 6566 2065 7874 656e 6428 7365     def extend(se
+0001cd90: 6c66 2c20 6974 656d 7329 202d 3e20 4e6f  lf, items) -> No
+0001cda0: 6e65 3a0a 2020 2020 2020 2020 7222 2222  ne:.        r"""
+0001cdb0: 0a20 2020 2020 2020 2045 7874 656e 6473  .        Extends
+0001cdc0: 206e 6f74 652d 6865 6164 732e 0a0a 2020   note-heads...  
+0001cdd0: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
+0001cde0: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
+0001cdf0: 2020 2020 2020 2020 2020 203e 3e3e 2063             >>> c
+0001ce00: 686f 7264 203d 2061 626a 6164 2e43 686f  hord = abjad.Cho
+0001ce10: 7264 2822 3c65 6627 3e22 290a 2020 2020  rd("<ef'>").    
+0001ce20: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+0001ce30: 642e 7368 6f77 2863 686f 7264 2920 2320  d.show(chord) # 
+0001ce40: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+0001ce50: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
+0001ce60: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
+0001ce70: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+0001ce80: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+0001ce90: 6f6e 6428 6368 6f72 6429 0a20 2020 2020  ond(chord).     
+0001cea0: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
+0001ceb0: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
+0001cec0: 2020 2020 2020 2020 2020 2020 203c 6566               <ef
+0001ced0: 273e 340a 0a20 2020 2020 2020 2020 2020  '>4..           
+0001cee0: 203e 3e3e 206e 6f74 655f 6865 6164 7320   >>> note_heads 
+0001cef0: 3d20 5b5d 0a20 2020 2020 2020 2020 2020  = [].           
+0001cf00: 203e 3e3e 206e 6f74 655f 6865 6164 203d   >>> note_head =
+0001cf10: 2061 626a 6164 2e4e 6f74 6548 6561 6428   abjad.NoteHead(
+0001cf20: 2263 7327 2722 290a 2020 2020 2020 2020  "cs''").        
+0001cf30: 2020 2020 3e3e 3e20 6162 6a61 642e 7477      >>> abjad.tw
+0001cf40: 6561 6b28 6e6f 7465 5f68 6561 642c 2072  eak(note_head, r
+0001cf50: 225c 7477 6561 6b20 636f 6c6f 7220 2362  "\tweak color #b
+0001cf60: 6c75 6522 290a 2020 2020 2020 2020 2020  lue").          
+0001cf70: 2020 3e3e 3e20 6e6f 7465 5f68 6561 6473    >>> note_heads
+0001cf80: 2e61 7070 656e 6428 6e6f 7465 5f68 6561  .append(note_hea
+0001cf90: 6429 0a20 2020 2020 2020 2020 2020 203e  d).            >
+0001cfa0: 3e3e 206e 6f74 655f 6865 6164 203d 2061  >> note_head = a
+0001cfb0: 626a 6164 2e4e 6f74 6548 6561 6428 2266  bjad.NoteHead("f
+0001cfc0: 2727 2229 0a20 2020 2020 2020 2020 2020  ''").           
+0001cfd0: 203e 3e3e 2061 626a 6164 2e74 7765 616b   >>> abjad.tweak
+0001cfe0: 286e 6f74 655f 6865 6164 2c20 7222 5c74  (note_head, r"\t
+0001cff0: 7765 616b 2063 6f6c 6f72 2023 6772 6565  weak color #gree
+0001d000: 6e22 290a 2020 2020 2020 2020 2020 2020  n").            
+0001d010: 3e3e 3e20 6e6f 7465 5f68 6561 6473 2e61  >>> note_heads.a
+0001d020: 7070 656e 6428 6e6f 7465 5f68 6561 6429  ppend(note_head)
+0001d030: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0001d040: 2063 686f 7264 2e6e 6f74 655f 6865 6164   chord.note_head
+0001d050: 732e 6578 7465 6e64 286e 6f74 655f 6865  s.extend(note_he
+0001d060: 6164 7329 0a20 2020 2020 2020 2020 2020  ads).           
+0001d070: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+0001d080: 6368 6f72 6429 2023 2064 6f63 7465 7374  chord) # doctest
+0001d090: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
+0001d0a0: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
+0001d0b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d0c0: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
+0001d0d0: 6a61 642e 6c69 6c79 706f 6e64 2863 686f  jad.lilypond(cho
+0001d0e0: 7264 290a 2020 2020 2020 2020 2020 2020  rd).            
+0001d0f0: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+0001d100: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+0001d110: 2020 2020 2020 3c0a 2020 2020 2020 2020        <.        
+0001d120: 2020 2020 2020 2020 2020 2020 6566 270a              ef'.
+0001d130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d140: 2020 2020 5c74 7765 616b 2063 6f6c 6f72      \tweak color
+0001d150: 2023 626c 7565 0a20 2020 2020 2020 2020   #blue.         
+0001d160: 2020 2020 2020 2020 2020 2063 7327 270a             cs''.
+0001d170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d180: 2020 2020 5c74 7765 616b 2063 6f6c 6f72      \tweak color
+0001d190: 2023 6772 6565 6e0a 2020 2020 2020 2020   #green.        
+0001d1a0: 2020 2020 2020 2020 2020 2020 6627 270a              f''.
+0001d1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d1c0: 3e34 0a0a 2020 2020 2020 2020 2222 220a  >4..        """.
+0001d1d0: 2020 2020 2020 2020 6e6f 7465 5f68 6561          note_hea
+0001d1e0: 6473 203d 205b 5f20 6966 2069 7369 6e73  ds = [_ if isins
+0001d1f0: 7461 6e63 6528 5f2c 204e 6f74 6548 6561  tance(_, NoteHea
+0001d200: 6429 2065 6c73 6520 4e6f 7465 4865 6164  d) else NoteHead
+0001d210: 285f 2920 666f 7220 5f20 696e 2069 7465  (_) for _ in ite
+0001d220: 6d73 5d0a 2020 2020 2020 2020 6c69 7374  ms].        list
+0001d230: 2e65 7874 656e 6428 7365 6c66 2c20 6e6f  .extend(self, no
+0001d240: 7465 5f68 6561 6473 290a 2020 2020 2020  te_heads).      
+0001d250: 2020 7365 6c66 2e73 6f72 7428 290a 0a20    self.sort().. 
+0001d260: 2020 2064 6566 2067 6574 2873 656c 662c     def get(self,
+0001d270: 2070 6974 6368 2920 2d3e 204e 6f74 6548   pitch) -> NoteH
+0001d280: 6561 643a 0a20 2020 2020 2020 2072 2222  ead:.        r""
+0001d290: 220a 2020 2020 2020 2020 4765 7473 206e  ".        Gets n
+0001d2a0: 6f74 652d 6865 6164 2062 7920 6060 7069  ote-head by ``pi
+0001d2b0: 7463 6860 602e 0a0a 2020 2020 2020 2020  tch``...        
+0001d2c0: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+0001d2d0: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+0001d2e0: 2020 2020 2047 6574 7320 6e6f 7465 2d68       Gets note-h
+0001d2f0: 6561 6420 6279 2070 6974 6368 206e 616d  ead by pitch nam
+0001d300: 653a 0a0a 2020 2020 2020 2020 2020 2020  e:..            
+0001d310: 3e3e 3e20 6368 6f72 6420 3d20 6162 6a61  >>> chord = abja
+0001d320: 642e 4368 6f72 6428 223c 6527 2063 7327  d.Chord("<e' cs'
+0001d330: 2720 6627 273e 3422 290a 2020 2020 2020  ' f''>4").      
+0001d340: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+0001d350: 7368 6f77 2863 686f 7264 2920 2320 646f  show(chord) # do
+0001d360: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
+0001d370: 2020 2020 2020 2020 2020 3e3e 3e20 6e6f            >>> no
+0001d380: 7465 5f68 6561 6420 3d20 6368 6f72 642e  te_head = chord.
+0001d390: 6e6f 7465 5f68 6561 6473 2e67 6574 2822  note_heads.get("
+0001d3a0: 6527 2229 0a20 2020 2020 2020 2020 2020  e'").           
+0001d3b0: 203e 3e3e 2061 626a 6164 2e74 7765 616b   >>> abjad.tweak
+0001d3c0: 286e 6f74 655f 6865 6164 2c20 7222 5c74  (note_head, r"\t
+0001d3d0: 7765 616b 2063 6f6c 6f72 2023 7265 6422  weak color #red"
+0001d3e0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+0001d3f0: 3e20 6162 6a61 642e 7368 6f77 2863 686f  > abjad.show(cho
+0001d400: 7264 2920 2320 646f 6374 6573 743a 202b  rd) # doctest: +
+0001d410: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
+0001d420: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+0001d430: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+0001d440: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+0001d450: 2e6c 696c 7970 6f6e 6428 6368 6f72 6429  .lilypond(chord)
+0001d460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d470: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
+0001d480: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
+0001d490: 2020 203c 0a20 2020 2020 2020 2020 2020     <.           
+0001d4a0: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
+0001d4b0: 636f 6c6f 7220 2372 6564 0a20 2020 2020  color #red.     
+0001d4c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001d4d0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+0001d4e0: 2020 2020 2020 6373 2727 0a20 2020 2020        cs''.     
+0001d4f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001d500: 2727 0a20 2020 2020 2020 2020 2020 2020  ''.             
+0001d510: 2020 203e 340a 0a20 2020 2020 2020 202e     >4..        .
+0001d520: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+0001d530: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+0001d540: 2020 2020 4765 7473 206e 6f74 652d 6865      Gets note-he
+0001d550: 6164 2062 7920 7069 7463 6820 6e75 6d62  ad by pitch numb
+0001d560: 6572 3a0a 0a20 2020 2020 2020 2020 2020  er:..           
+0001d570: 203e 3e3e 2063 686f 7264 203d 2061 626a   >>> chord = abj
+0001d580: 6164 2e43 686f 7264 2822 3c65 2720 6373  ad.Chord("<e' cs
+0001d590: 2727 2066 2727 3e34 2229 0a20 2020 2020  '' f''>4").     
+0001d5a0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0001d5b0: 2e73 686f 7728 6368 6f72 6429 2023 2064  .show(chord) # d
+0001d5c0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+0001d5d0: 2020 2020 2020 2020 2020 203e 3e3e 206e             >>> n
+0001d5e0: 6f74 655f 6865 6164 203d 2063 686f 7264  ote_head = chord
+0001d5f0: 2e6e 6f74 655f 6865 6164 732e 6765 7428  .note_heads.get(
+0001d600: 3429 0a20 2020 2020 2020 2020 2020 203e  4).            >
+0001d610: 3e3e 2061 626a 6164 2e74 7765 616b 286e  >> abjad.tweak(n
+0001d620: 6f74 655f 6865 6164 2c20 7222 5c74 7765  ote_head, r"\twe
+0001d630: 616b 2063 6f6c 6f72 2023 7265 6422 290a  ak color #red").
+0001d640: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001d650: 6162 6a61 642e 7368 6f77 2863 686f 7264  abjad.show(chord
+0001d660: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
+0001d670: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
+0001d680: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+0001d690: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001d6a0: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
+0001d6b0: 696c 7970 6f6e 6428 6368 6f72 6429 0a20  ilypond(chord). 
+0001d6c0: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+0001d6d0: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
+0001d6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d6f0: 203c 0a20 2020 2020 2020 2020 2020 2020   <.             
+0001d700: 2020 2020 2020 205c 7477 6561 6b20 636f         \tweak co
+0001d710: 6c6f 7220 2372 6564 0a20 2020 2020 2020  lor #red.       
+0001d720: 2020 2020 2020 2020 2020 2020 2065 270a               e'.
+0001d730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d740: 2020 2020 6373 2727 0a20 2020 2020 2020      cs''.       
+0001d750: 2020 2020 2020 2020 2020 2020 2066 2727               f''
+0001d760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d770: 203e 340a 0a20 2020 2020 2020 2052 6169   >4..        Rai
+0001d780: 7365 7320 6d69 7373 696e 6720 6e6f 7465  ses missing note
+0001d790: 2d68 6561 6420 6572 726f 7220 7768 656e  -head error when
+0001d7a0: 2063 686f 7264 2063 6f6e 7461 696e 7320   chord contains 
+0001d7b0: 6e6f 206e 6f74 652d 6865 6164 2077 6974  no note-head wit
+0001d7c0: 6820 6060 7069 7463 6860 602e 0a0a 2020  h ``pitch``...  
+0001d7d0: 2020 2020 2020 5261 6973 6573 2065 7874        Raises ext
+0001d7e0: 7261 206e 6f74 652d 6865 6164 2065 7272  ra note-head err
+0001d7f0: 6f72 2077 6865 6e20 6368 6f72 6420 636f  or when chord co
+0001d800: 6e74 6169 6e73 206d 6f72 6520 7468 616e  ntains more than
+0001d810: 206f 6e65 206e 6f74 652d 6865 6164 2077   one note-head w
+0001d820: 6974 680a 2020 2020 2020 2020 6060 7069  ith.        ``pi
+0001d830: 7463 6860 602e 0a20 2020 2020 2020 2022  tch``..        "
+0001d840: 2222 0a20 2020 2020 2020 2072 6573 756c  "".        resul
+0001d850: 7420 3d20 5b5d 0a20 2020 2020 2020 2070  t = [].        p
+0001d860: 6974 6368 203d 205f 7069 7463 682e 4e61  itch = _pitch.Na
+0001d870: 6d65 6450 6974 6368 2870 6974 6368 290a  medPitch(pitch).
+0001d880: 2020 2020 2020 2020 666f 7220 6e6f 7465          for note
+0001d890: 5f68 6561 6420 696e 2073 656c 663a 0a20  _head in self:. 
+0001d8a0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+0001d8b0: 7420 6973 696e 7374 616e 6365 286e 6f74  t isinstance(not
+0001d8c0: 655f 6865 6164 2c20 4e6f 7465 4865 6164  e_head, NoteHead
+0001d8d0: 292c 2072 6570 7228 6e6f 7465 5f68 6561  ), repr(note_hea
+0001d8e0: 6429 0a20 2020 2020 2020 2020 2020 2069  d).            i
+0001d8f0: 6620 6e6f 7465 5f68 6561 642e 7772 6974  f note_head.writ
+0001d900: 7465 6e5f 7069 7463 6820 3d3d 2070 6974  ten_pitch == pit
+0001d910: 6368 3a0a 2020 2020 2020 2020 2020 2020  ch:.            
+0001d920: 2020 2020 7265 7375 6c74 2e61 7070 656e      result.appen
+0001d930: 6428 6e6f 7465 5f68 6561 6429 0a20 2020  d(note_head).   
+0001d940: 2020 2020 2063 6f75 6e74 203d 206c 656e       count = len
+0001d950: 2872 6573 756c 7429 0a20 2020 2020 2020  (result).       
+0001d960: 2069 6620 636f 756e 7420 3d3d 2030 3a0a   if count == 0:.
+0001d970: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0001d980: 6520 5661 6c75 6545 7272 6f72 2822 6d69  e ValueError("mi
+0001d990: 7373 696e 6720 6e6f 7465 2d68 6561 642e  ssing note-head.
+0001d9a0: 2229 0a20 2020 2020 2020 2065 6c69 6620  ").        elif 
+0001d9b0: 636f 756e 7420 3d3d 2031 3a0a 2020 2020  count == 1:.    
+0001d9c0: 2020 2020 2020 2020 6e6f 7465 5f68 6561          note_hea
+0001d9d0: 6420 3d20 7265 7375 6c74 5b30 5d0a 2020  d = result[0].  
+0001d9e0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001d9f0: 206e 6f74 655f 6865 6164 0a20 2020 2020   note_head.     
+0001da00: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0001da10: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+0001da20: 4572 726f 7228 2265 7874 7261 206e 6f74  Error("extra not
+0001da30: 652d 6865 6164 2e22 290a 0a20 2020 2064  e-head.")..    d
+0001da40: 6566 2070 6f70 2873 656c 662c 2069 3d2d  ef pop(self, i=-
+0001da50: 3129 202d 3e20 4e6f 7465 4865 6164 3a0a  1) -> NoteHead:.
+0001da60: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
+0001da70: 2020 2020 2050 6f70 7320 6e6f 7465 2d68       Pops note-h
+0001da80: 6561 6420 6060 6960 602e 0a0a 2020 2020  ead ``i``...    
+0001da90: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+0001daa0: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+0001dab0: 2020 2020 2020 2020 203e 3e3e 2063 686f           >>> cho
+0001dac0: 7264 203d 2061 626a 6164 2e43 686f 7264  rd = abjad.Chord
+0001dad0: 2822 3c65 6627 2063 2727 2066 2727 3e34  ("<ef' c'' f''>4
+0001dae0: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
+0001daf0: 3e3e 2061 626a 6164 2e73 686f 7728 6368  >> abjad.show(ch
+0001db00: 6f72 6429 2023 2064 6f63 7465 7374 3a20  ord) # doctest: 
+0001db10: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+0001db20: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+0001db30: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+0001db40: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+0001db50: 642e 6c69 6c79 706f 6e64 2863 686f 7264  d.lilypond(chord
+0001db60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001db70: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+0001db80: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0001db90: 2020 2020 3c65 6627 2063 2727 2066 2727      <ef' c'' f''
+0001dba0: 3e34 0a0a 2020 2020 2020 2020 2020 2020  >4..            
+0001dbb0: 3e3e 3e20 6368 6f72 642e 6e6f 7465 5f68  >>> chord.note_h
+0001dbc0: 6561 6473 2e70 6f70 2831 290a 2020 2020  eads.pop(1).    
+0001dbd0: 2020 2020 2020 2020 4e6f 7465 4865 6164          NoteHead
+0001dbe0: 2822 6327 2722 290a 0a20 2020 2020 2020  ("c''")..       
+0001dbf0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
+0001dc00: 686f 7728 6368 6f72 6429 2023 2064 6f63  how(chord) # doc
+0001dc10: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
+0001dc20: 2020 2020 2020 2020 202e 2e20 2064 6f63           ..  doc
+0001dc30: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
+0001dc40: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+0001dc50: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+0001dc60: 2863 686f 7264 290a 2020 2020 2020 2020  (chord).        
+0001dc70: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+0001dc80: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+0001dc90: 2020 2020 2020 2020 2020 3c65 6627 2066            <ef' f
+0001dca0: 2727 3e34 0a0a 2020 2020 2020 2020 2222  ''>4..        ""
+0001dcb0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+0001dcc0: 206c 6973 742e 706f 7028 7365 6c66 2c20   list.pop(self, 
+0001dcd0: 6929 0a0a 2020 2020 6465 6620 7265 6d6f  i)..    def remo
+0001dce0: 7665 2873 656c 662c 2069 7465 6d29 3a0a  ve(self, item):.
+0001dcf0: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
+0001dd00: 2020 2020 2052 656d 6f76 6573 2060 6069       Removes ``i
+0001dd10: 7465 6d60 602e 0a0a 2020 2020 2020 2020  tem``...        
+0001dd20: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+0001dd30: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+0001dd40: 2020 2020 203e 3e3e 2063 686f 7264 203d       >>> chord =
+0001dd50: 2061 626a 6164 2e43 686f 7264 2822 3c65   abjad.Chord("<e
+0001dd60: 6627 2063 2727 2066 2727 3e34 2229 0a20  f' c'' f''>4"). 
+0001dd70: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+0001dd80: 626a 6164 2e73 686f 7728 6368 6f72 6429  bjad.show(chord)
+0001dd90: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
+0001dda0: 500a 0a20 2020 2020 2020 2020 2020 202e  P..            .
+0001ddb0: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
+0001ddc0: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
+0001ddd0: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
+0001dde0: 6c79 706f 6e64 2863 686f 7264 290a 2020  lypond(chord).  
+0001ddf0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+0001de00: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
+0001de10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001de20: 3c65 6627 2063 2727 2066 2727 3e34 0a0a  <ef' c'' f''>4..
+0001de30: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001de40: 6e6f 7465 5f68 6561 6420 3d20 6368 6f72  note_head = chor
+0001de50: 642e 6e6f 7465 5f68 6561 6473 5b31 5d0a  d.note_heads[1].
+0001de60: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001de70: 6368 6f72 642e 6e6f 7465 5f68 6561 6473  chord.note_heads
+0001de80: 2e72 656d 6f76 6528 6e6f 7465 5f68 6561  .remove(note_hea
+0001de90: 6429 0a20 2020 2020 2020 2020 2020 203e  d).            >
+0001dea0: 3e3e 2061 626a 6164 2e73 686f 7728 6368  >> abjad.show(ch
+0001deb0: 6f72 6429 2023 2064 6f63 7465 7374 3a20  ord) # doctest: 
+0001dec0: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+0001ded0: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+0001dee0: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+0001def0: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+0001df00: 642e 6c69 6c79 706f 6e64 2863 686f 7264  d.lilypond(chord
+0001df10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001df20: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+0001df30: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0001df40: 2020 2020 3c65 6627 2066 2727 3e34 0a0a      <ef' f''>4..
+0001df50: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001df60: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0001df70: 6528 6974 656d 2c20 4e6f 7465 4865 6164  e(item, NoteHead
+0001df80: 293a 0a20 2020 2020 2020 2020 2020 206e  ):.            n
+0001df90: 6f74 655f 6865 6164 203d 2069 7465 6d0a  ote_head = item.
+0001dfa0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0001dfb0: 2020 2020 2020 2020 2020 6e6f 7465 5f68            note_h
+0001dfc0: 6561 6420 3d20 4e6f 7465 4865 6164 2869  ead = NoteHead(i
+0001dfd0: 7465 6d29 0a20 2020 2020 2020 206c 6973  tem).        lis
+0001dfe0: 742e 7265 6d6f 7665 2873 656c 662c 206e  t.remove(self, n
+0001dff0: 6f74 655f 6865 6164 290a 0a0a 636c 6173  ote_head)...clas
+0001e000: 7320 4e6f 7465 284c 6561 6629 3a0a 2020  s Note(Leaf):.  
+0001e010: 2020 2222 220a 2020 2020 4e6f 7465 2e0a    """.    Note..
+0001e020: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
+0001e030: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+0001e040: 2020 2020 2020 3e3e 3e20 6e6f 7465 203d        >>> note =
+0001e050: 2061 626a 6164 2e4e 6f74 6528 2263 7327   abjad.Note("cs'
+0001e060: 2738 2e22 290a 2020 2020 2020 2020 3e3e  '8.").        >>
+0001e070: 3e20 6162 6a61 642e 7368 6f77 286e 6f74  > abjad.show(not
+0001e080: 6529 2023 2064 6f63 7465 7374 3a20 2b53  e) # doctest: +S
+0001e090: 4b49 500a 0a20 2020 2020 2020 202e 2e20  KIP..        .. 
+0001e0a0: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
+0001e0b0: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+0001e0c0: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+0001e0d0: 286e 6f74 6529 0a20 2020 2020 2020 2020  (note).         
+0001e0e0: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
+0001e0f0: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0001e100: 2063 7327 2738 2e0a 0a20 2020 202e 2e20   cs''8...    .. 
+0001e110: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
+0001e120: 6d70 6c65 0a0a 2020 2020 2020 2020 5245  mple..        RE
+0001e130: 4752 4553 5349 4f4e 2e20 496e 6974 6961  GRESSION. Initia
+0001e140: 6c69 7a65 7320 6672 6f6d 206f 7468 6572  lizes from other
+0001e150: 206e 6f74 653a 0a0a 2020 2020 2020 2020   note:..        
+0001e160: 3e3e 3e20 6e6f 7465 203d 2061 626a 6164  >>> note = abjad
+0001e170: 2e4e 6f74 6528 2263 7327 2734 222c 206d  .Note("cs''4", m
+0001e180: 756c 7469 706c 6965 723d 2831 2c20 3129  ultiplier=(1, 1)
+0001e190: 290a 2020 2020 2020 2020 3e3e 3e20 6162  ).        >>> ab
+0001e1a0: 6a61 642e 7368 6f77 286e 6f74 6529 2023  jad.show(note) #
+0001e1b0: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
+0001e1c0: 0a20 2020 2020 2020 202e 2e20 2064 6f63  .        ..  doc
+0001e1d0: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
+0001e1e0: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
+0001e1f0: 6a61 642e 6c69 6c79 706f 6e64 286e 6f74  jad.lilypond(not
+0001e200: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+0001e210: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
+0001e220: 0a20 2020 2020 2020 2020 2020 2063 7327  .            cs'
+0001e230: 2734 202a 2031 0a0a 2020 2020 2020 2020  '4 * 1..        
+0001e240: 3e3e 3e20 6e65 775f 6e6f 7465 203d 2061  >>> new_note = a
+0001e250: 626a 6164 2e4e 6f74 6528 6e6f 7465 290a  bjad.Note(note).
+0001e260: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+0001e270: 642e 7368 6f77 286e 6577 5f6e 6f74 6529  d.show(new_note)
+0001e280: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
+0001e290: 500a 0a20 2020 2020 2020 202e 2e20 2064  P..        ..  d
+0001e2a0: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
+0001e2b0: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
+0001e2c0: 6162 6a61 642e 6c69 6c79 706f 6e64 286e  abjad.lilypond(n
+0001e2d0: 6577 5f6e 6f74 6529 0a20 2020 2020 2020  ew_note).       
+0001e2e0: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
+0001e2f0: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+0001e300: 2020 2063 7327 2734 202a 2031 0a0a 2020     cs''4 * 1..  
+0001e310: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
+0001e320: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
+0001e330: 2020 2053 656c 6563 7473 206c 616e 6775     Selects langu
+0001e340: 6167 653a 0a0a 2020 2020 2020 2020 3e3e  age:..        >>
+0001e350: 3e20 6162 6a61 642e 4e6f 7465 2822 646f  > abjad.Note("do
+0001e360: 6427 2738 2e22 2c20 6c61 6e67 7561 6765  d''8.", language
+0001e370: 3d22 6672 616e c3a7 6169 7322 290a 2020  ="fran..ais").  
+0001e380: 2020 2020 2020 4e6f 7465 2822 6373 2727        Note("cs''
+0001e390: 382e 2229 0a0a 2020 2020 2222 220a 0a20  8.")..    """.. 
+0001e3a0: 2020 2023 2323 2043 4c41 5353 2056 4152     ### CLASS VAR
+0001e3b0: 4941 424c 4553 2023 2323 0a0a 2020 2020  IABLES ###..    
+0001e3c0: 5f5f 646f 6375 6d65 6e74 6174 696f 6e5f  __documentation_
+0001e3d0: 7365 6374 696f 6e5f 5f20 3d20 224c 6561  section__ = "Lea
+0001e3e0: 7665 7322 0a0a 2020 2020 5f5f 736c 6f74  ves"..    __slot
+0001e3f0: 735f 5f20 3d20 2822 5f6e 6f74 655f 6865  s__ = ("_note_he
+0001e400: 6164 222c 290a 0a20 2020 2023 2323 2049  ad",)..    ### I
+0001e410: 4e49 5449 414c 495a 4552 2023 2323 0a0a  NITIALIZER ###..
+0001e420: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+0001e430: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+0001e440: 2020 2020 2020 2020 2a61 7267 756d 656e          *argumen
+0001e450: 7473 2c0a 2020 2020 2020 2020 6c61 6e67  ts,.        lang
+0001e460: 7561 6765 3a20 7374 7220 3d20 2265 6e67  uage: str = "eng
+0001e470: 6c69 7368 222c 0a20 2020 2020 2020 206d  lish",.        m
+0001e480: 756c 7469 706c 6965 723a 205f 7479 7069  ultiplier: _typi
+0001e490: 6e67 732e 4475 7261 7469 6f6e 203d 204e  ngs.Duration = N
+0001e4a0: 6f6e 652c 0a20 2020 2020 2020 2074 6167  one,.        tag
+0001e4b0: 3a20 5f74 6167 2e54 6167 203d 204e 6f6e  : _tag.Tag = Non
+0001e4c0: 652c 0a20 2020 2029 202d 3e20 4e6f 6e65  e,.    ) -> None
+0001e4d0: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
+0001e4e0: 206c 656e 2861 7267 756d 656e 7473 2920   len(arguments) 
+0001e4f0: 696e 2028 302c 2031 2c20 3229 0a20 2020  in (0, 1, 2).   
+0001e500: 2020 2020 2069 6620 6c65 6e28 6172 6775       if len(argu
+0001e510: 6d65 6e74 7329 203d 3d20 3120 616e 6420  ments) == 1 and 
+0001e520: 6973 696e 7374 616e 6365 2861 7267 756d  isinstance(argum
+0001e530: 656e 7473 5b30 5d2c 2073 7472 293a 0a20  ents[0], str):. 
+0001e540: 2020 2020 2020 2020 2020 2073 7472 696e             strin
+0001e550: 6720 3d20 6622 7b7b 207b 6172 6775 6d65  g = f"{{ {argume
+0001e560: 6e74 735b 305d 7d20 7d7d 220a 2020 2020  nts[0]} }}".    
+0001e570: 2020 2020 2020 2020 7061 7273 6564 203d          parsed =
+0001e580: 2073 656c 662e 5f70 6172 7365 5f6c 696c   self._parse_lil
+0001e590: 7970 6f6e 645f 7374 7269 6e67 2873 7472  ypond_string(str
+0001e5a0: 696e 672c 206c 616e 6775 6167 653d 6c61  ing, language=la
+0001e5b0: 6e67 7561 6765 290a 2020 2020 2020 2020  nguage).        
+0001e5c0: 2020 2020 6173 7365 7274 206c 656e 2870      assert len(p
+0001e5d0: 6172 7365 6429 203d 3d20 3120 616e 6420  arsed) == 1 and 
+0001e5e0: 6973 696e 7374 616e 6365 2870 6172 7365  isinstance(parse
+0001e5f0: 645b 305d 2c20 4c65 6166 290a 2020 2020  d[0], Leaf).    
+0001e600: 2020 2020 2020 2020 6172 6775 6d65 6e74          argument
+0001e610: 7320 3d20 7475 706c 6528 5b70 6172 7365  s = tuple([parse
+0001e620: 645b 305d 5d29 0a20 2020 2020 2020 2077  d[0]]).        w
+0001e630: 7269 7474 656e 5f70 6974 6368 203d 204e  ritten_pitch = N
+0001e640: 6f6e 650a 2020 2020 2020 2020 6973 5f63  one.        is_c
+0001e650: 6175 7469 6f6e 6172 7920 3d20 4661 6c73  autionary = Fals
+0001e660: 650a 2020 2020 2020 2020 6973 5f66 6f72  e.        is_for
+0001e670: 6365 6420 3d20 4661 6c73 650a 2020 2020  ced = False.    
+0001e680: 2020 2020 6973 5f70 6172 656e 7468 6573      is_parenthes
+0001e690: 697a 6564 203d 2046 616c 7365 0a20 2020  ized = False.   
+0001e6a0: 2020 2020 2069 6620 6c65 6e28 6172 6775       if len(argu
+0001e6b0: 6d65 6e74 7329 203d 3d20 3120 616e 6420  ments) == 1 and 
+0001e6c0: 6973 696e 7374 616e 6365 2861 7267 756d  isinstance(argum
+0001e6d0: 656e 7473 5b30 5d2c 204c 6561 6629 3a0a  ents[0], Leaf):.
+0001e6e0: 2020 2020 2020 2020 2020 2020 6c65 6166              leaf
+0001e6f0: 203d 2061 7267 756d 656e 7473 5b30 5d0a   = arguments[0].
+0001e700: 2020 2020 2020 2020 2020 2020 7772 6974              writ
+0001e710: 7465 6e5f 7069 7463 6820 3d20 4e6f 6e65  ten_pitch = None
+0001e720: 0a20 2020 2020 2020 2020 2020 2077 7269  .            wri
+0001e730: 7474 656e 5f64 7572 6174 696f 6e20 3d20  tten_duration = 
+0001e740: 6c65 6166 2e77 7269 7474 656e 5f64 7572  leaf.written_dur
+0001e750: 6174 696f 6e0a 2020 2020 2020 2020 2020  ation.          
+0001e760: 2020 6966 206d 756c 7469 706c 6965 7220    if multiplier 
+0001e770: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0001e780: 2020 2020 2020 2020 206d 756c 7469 706c           multipl
+0001e790: 6965 7220 3d20 6c65 6166 2e6d 756c 7469  ier = leaf.multi
+0001e7a0: 706c 6965 720a 2020 2020 2020 2020 2020  plier.          
+0001e7b0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0001e7c0: 6c65 6166 2c20 4e6f 7465 2920 616e 6420  leaf, Note) and 
+0001e7d0: 6c65 6166 2e6e 6f74 655f 6865 6164 2069  leaf.note_head i
+0001e7e0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0001e7f0: 2020 2020 2020 2020 2020 2020 7772 6974              writ
+0001e800: 7465 6e5f 7069 7463 6820 3d20 6c65 6166  ten_pitch = leaf
+0001e810: 2e6e 6f74 655f 6865 6164 2e77 7269 7474  .note_head.writt
+0001e820: 656e 5f70 6974 6368 0a20 2020 2020 2020  en_pitch.       
+0001e830: 2020 2020 2020 2020 2069 735f 6361 7574           is_caut
+0001e840: 696f 6e61 7279 203d 206c 6561 662e 6e6f  ionary = leaf.no
+0001e850: 7465 5f68 6561 642e 6973 5f63 6175 7469  te_head.is_cauti
+0001e860: 6f6e 6172 790a 2020 2020 2020 2020 2020  onary.          
+0001e870: 2020 2020 2020 6973 5f66 6f72 6365 6420        is_forced 
+0001e880: 3d20 6c65 6166 2e6e 6f74 655f 6865 6164  = leaf.note_head
+0001e890: 2e69 735f 666f 7263 6564 0a20 2020 2020  .is_forced.     
+0001e8a0: 2020 2020 2020 2020 2020 2069 735f 7061             is_pa
+0001e8b0: 7265 6e74 6865 7369 7a65 6420 3d20 6c65  renthesized = le
+0001e8c0: 6166 2e6e 6f74 655f 6865 6164 2e69 735f  af.note_head.is_
+0001e8d0: 7061 7265 6e74 6865 7369 7a65 640a 2020  parenthesized.  
+0001e8e0: 2020 2020 2020 2020 2020 2320 544f 444f            # TODO
+0001e8f0: 3a20 6d6f 7665 2069 6e74 6f20 7365 7061  : move into sepa
+0001e900: 7261 7465 2066 726f 6d5f 6368 6f72 6428  rate from_chord(
+0001e910: 2920 636f 6e73 7472 7563 746f 723a 0a20  ) constructor:. 
+0001e920: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0001e930: 6973 696e 7374 616e 6365 286c 6561 662c  isinstance(leaf,
+0001e940: 2043 686f 7264 293a 0a20 2020 2020 2020   Chord):.       
+0001e950: 2020 2020 2020 2020 2077 7269 7474 656e           written
+0001e960: 5f70 6974 6368 6573 203d 205b 5f2e 7772  _pitches = [_.wr
+0001e970: 6974 7465 6e5f 7069 7463 6820 666f 7220  itten_pitch for 
+0001e980: 5f20 696e 206c 6561 662e 6e6f 7465 5f68  _ in leaf.note_h
+0001e990: 6561 6473 5d0a 2020 2020 2020 2020 2020  eads].          
+0001e9a0: 2020 2020 2020 6966 2077 7269 7474 656e        if written
+0001e9b0: 5f70 6974 6368 6573 3a0a 2020 2020 2020  _pitches:.      
+0001e9c0: 2020 2020 2020 2020 2020 2020 2020 7772                wr
+0001e9d0: 6974 7465 6e5f 7069 7463 6820 3d20 7772  itten_pitch = wr
+0001e9e0: 6974 7465 6e5f 7069 7463 6865 735b 305d  itten_pitches[0]
+0001e9f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ea00: 2020 2020 2069 735f 6361 7574 696f 6e61       is_cautiona
+0001ea10: 7279 203d 206c 6561 662e 6e6f 7465 5f68  ry = leaf.note_h
+0001ea20: 6561 6473 5b30 5d2e 6973 5f63 6175 7469  eads[0].is_cauti
+0001ea30: 6f6e 6172 790a 2020 2020 2020 2020 2020  onary.          
+0001ea40: 2020 2020 2020 2020 2020 6973 5f66 6f72            is_for
+0001ea50: 6365 6420 3d20 6c65 6166 2e6e 6f74 655f  ced = leaf.note_
+0001ea60: 6865 6164 735b 305d 2e69 735f 666f 7263  heads[0].is_forc
+0001ea70: 6564 0a20 2020 2020 2020 2020 2020 2020  ed.             
+0001ea80: 2020 2020 2020 2069 735f 7061 7265 6e74         is_parent
+0001ea90: 6865 7369 7a65 6420 3d20 6c65 6166 2e6e  hesized = leaf.n
+0001eaa0: 6f74 655f 6865 6164 735b 305d 2e69 735f  ote_heads[0].is_
+0001eab0: 7061 7265 6e74 6865 7369 7a65 640a 2020  parenthesized.  
+0001eac0: 2020 2020 2020 656c 6966 206c 656e 2861        elif len(a
+0001ead0: 7267 756d 656e 7473 2920 3d3d 2032 3a0a  rguments) == 2:.
+0001eae0: 2020 2020 2020 2020 2020 2020 7772 6974              writ
+0001eaf0: 7465 6e5f 7069 7463 682c 2077 7269 7474  ten_pitch, writt
+0001eb00: 656e 5f64 7572 6174 696f 6e20 3d20 6172  en_duration = ar
+0001eb10: 6775 6d65 6e74 730a 2020 2020 2020 2020  guments.        
+0001eb20: 656c 6966 206c 656e 2861 7267 756d 656e  elif len(argumen
+0001eb30: 7473 2920 3d3d 2030 3a0a 2020 2020 2020  ts) == 0:.      
+0001eb40: 2020 2020 2020 7772 6974 7465 6e5f 7069        written_pi
+0001eb50: 7463 6820 3d20 5f70 6974 6368 2e4e 616d  tch = _pitch.Nam
+0001eb60: 6564 5069 7463 6828 2243 3422 290a 2020  edPitch("C4").  
+0001eb70: 2020 2020 2020 2020 2020 7772 6974 7465            writte
+0001eb80: 6e5f 6475 7261 7469 6f6e 203d 205f 6475  n_duration = _du
+0001eb90: 7261 7469 6f6e 2e44 7572 6174 696f 6e28  ration.Duration(
+0001eba0: 312c 2034 290a 2020 2020 2020 2020 656c  1, 4).        el
+0001ebb0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0001ebc0: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+0001ebd0: 2822 6361 6e20 6e6f 7420 696e 6974 6961  ("can not initia
+0001ebe0: 6c69 7a65 206e 6f74 6520 6672 6f6d 207b  lize note from {
+0001ebf0: 6172 6775 6d65 6e74 7321 727d 2e22 290a  arguments!r}.").
+0001ec00: 2020 2020 2020 2020 4c65 6166 2e5f 5f69          Leaf.__i
+0001ec10: 6e69 745f 5f28 7365 6c66 2c20 7772 6974  nit__(self, writ
+0001ec20: 7465 6e5f 6475 7261 7469 6f6e 2c20 6d75  ten_duration, mu
+0001ec30: 6c74 6970 6c69 6572 3d6d 756c 7469 706c  ltiplier=multipl
+0001ec40: 6965 722c 2074 6167 3d74 6167 290a 2020  ier, tag=tag).  
+0001ec50: 2020 2020 2020 6966 2077 7269 7474 656e        if written
+0001ec60: 5f70 6974 6368 2069 7320 6e6f 7420 4e6f  _pitch is not No
+0001ec70: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0001ec80: 6966 2077 7269 7474 656e 5f70 6974 6368  if written_pitch
+0001ec90: 206e 6f74 2069 6e20 5f6c 7963 6f6e 7374   not in _lyconst
+0001eca0: 2e64 7275 6d73 3a0a 2020 2020 2020 2020  .drums:.        
+0001ecb0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+0001ecc0: 655f 6865 6164 203d 204e 6f74 6548 6561  e_head = NoteHea
+0001ecd0: 6428 0a20 2020 2020 2020 2020 2020 2020  d(.             
+0001ece0: 2020 2020 2020 2077 7269 7474 656e 5f70         written_p
+0001ecf0: 6974 6368 3d77 7269 7474 656e 5f70 6974  itch=written_pit
+0001ed00: 6368 2c0a 2020 2020 2020 2020 2020 2020  ch,.            
+0001ed10: 2020 2020 2020 2020 6973 5f63 6175 7469          is_cauti
+0001ed20: 6f6e 6172 793d 6973 5f63 6175 7469 6f6e  onary=is_caution
+0001ed30: 6172 792c 0a20 2020 2020 2020 2020 2020  ary,.           
+0001ed40: 2020 2020 2020 2020 2069 735f 666f 7263           is_forc
+0001ed50: 6564 3d69 735f 666f 7263 6564 2c0a 2020  ed=is_forced,.  
+0001ed60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ed70: 2020 6973 5f70 6172 656e 7468 6573 697a    is_parenthesiz
+0001ed80: 6564 3d69 735f 7061 7265 6e74 6865 7369  ed=is_parenthesi
+0001ed90: 7a65 642c 0a20 2020 2020 2020 2020 2020  zed,.           
+0001eda0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0001edb0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0001edc0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+0001edd0: 6973 696e 7374 616e 6365 2877 7269 7474  isinstance(writt
+0001ede0: 656e 5f70 6974 6368 2c20 7374 7229 2c20  en_pitch, str), 
+0001edf0: 7265 7072 2877 7269 7474 656e 5f70 6974  repr(written_pit
+0001ee00: 6368 290a 2020 2020 2020 2020 2020 2020  ch).            
+0001ee10: 2020 2020 7365 6c66 2e6e 6f74 655f 6865      self.note_he
+0001ee20: 6164 203d 2044 7275 6d4e 6f74 6548 6561  ad = DrumNoteHea
+0001ee30: 6428 0a20 2020 2020 2020 2020 2020 2020  d(.             
+0001ee40: 2020 2020 2020 2077 7269 7474 656e 5f70         written_p
+0001ee50: 6974 6368 3d77 7269 7474 656e 5f70 6974  itch=written_pit
+0001ee60: 6368 2c0a 2020 2020 2020 2020 2020 2020  ch,.            
+0001ee70: 2020 2020 2020 2020 6973 5f63 6175 7469          is_cauti
+0001ee80: 6f6e 6172 793d 6973 5f63 6175 7469 6f6e  onary=is_caution
+0001ee90: 6172 792c 0a20 2020 2020 2020 2020 2020  ary,.           
+0001eea0: 2020 2020 2020 2020 2069 735f 666f 7263           is_forc
+0001eeb0: 6564 3d69 735f 666f 7263 6564 2c0a 2020  ed=is_forced,.  
+0001eec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001eed0: 2020 6973 5f70 6172 656e 7468 6573 697a    is_parenthesiz
+0001eee0: 6564 3d69 735f 7061 7265 6e74 6865 7369  ed=is_parenthesi
+0001eef0: 7a65 642c 0a20 2020 2020 2020 2020 2020  zed,.           
+0001ef00: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0001ef10: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0001ef20: 2877 7269 7474 656e 5f70 6974 6368 2c20  (written_pitch, 
+0001ef30: 4e6f 7465 4865 6164 293a 0a20 2020 2020  NoteHead):.     
+0001ef40: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001ef50: 6e6f 7465 5f68 6561 642e 7477 6561 6b73  note_head.tweaks
+0001ef60: 203d 2063 6f70 792e 6465 6570 636f 7079   = copy.deepcopy
+0001ef70: 2877 7269 7474 656e 5f70 6974 6368 2e74  (written_pitch.t
+0001ef80: 7765 616b 7329 0a20 2020 2020 2020 2065  weaks).        e
+0001ef90: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001efa0: 2073 656c 662e 5f6e 6f74 655f 6865 6164   self._note_head
+0001efb0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+0001efc0: 6966 206c 656e 2861 7267 756d 656e 7473  if len(arguments
+0001efd0: 2920 3d3d 2031 2061 6e64 2069 7369 6e73  ) == 1 and isins
+0001efe0: 7461 6e63 6528 6172 6775 6d65 6e74 735b  tance(arguments[
+0001eff0: 305d 2c20 4c65 6166 293a 0a20 2020 2020  0], Leaf):.     
+0001f000: 2020 2020 2020 2073 656c 662e 5f63 6f70         self._cop
+0001f010: 795f 6f76 6572 7269 6465 5f61 6e64 5f73  y_override_and_s
+0001f020: 6574 5f66 726f 6d5f 6c65 6166 2861 7267  et_from_leaf(arg
+0001f030: 756d 656e 7473 5b30 5d29 0a0a 2020 2020  uments[0])..    
+0001f040: 2323 2320 5350 4543 4941 4c20 4d45 5448  ### SPECIAL METH
+0001f050: 4f44 5320 2323 230a 0a20 2020 2064 6566  ODS ###..    def
+0001f060: 205f 5f63 6f70 795f 5f28 7365 6c66 2c20   __copy__(self, 
+0001f070: 2a61 7267 756d 656e 7473 2920 2d3e 2022  *arguments) -> "
+0001f080: 4e6f 7465 223a 0a20 2020 2020 2020 2022  Note":.        "
+0001f090: 2222 0a20 2020 2020 2020 2043 6f70 6965  "".        Copie
+0001f0a0: 7320 6e6f 7465 2e0a 2020 2020 2020 2020  s note..        
+0001f0b0: 2222 220a 2020 2020 2020 2020 6e65 775f  """.        new_
+0001f0c0: 6e6f 7465 203d 204c 6561 662e 5f5f 636f  note = Leaf.__co
+0001f0d0: 7079 5f5f 2873 656c 662c 202a 6172 6775  py__(self, *argu
+0001f0e0: 6d65 6e74 7329 0a20 2020 2020 2020 206e  ments).        n
+0001f0f0: 6577 5f6e 6f74 652e 6e6f 7465 5f68 6561  ew_note.note_hea
+0001f100: 6420 3d20 636f 7079 2e63 6f70 7928 7365  d = copy.copy(se
+0001f110: 6c66 2e6e 6f74 655f 6865 6164 290a 2020  lf.note_head).  
+0001f120: 2020 2020 2020 7265 7475 726e 206e 6577        return new
+0001f130: 5f6e 6f74 650a 0a20 2020 2064 6566 205f  _note..    def _
+0001f140: 5f67 6574 6e65 7761 7267 735f 5f28 7365  _getnewargs__(se
+0001f150: 6c66 2920 2d3e 2074 7570 6c65 3a0a 2020  lf) -> tuple:.  
+0001f160: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0001f170: 2020 4765 7473 206e 6577 2061 7267 756d    Gets new argum
+0001f180: 656e 7473 2e0a 2020 2020 2020 2020 2222  ents..        ""
+0001f190: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+0001f1a0: 2028 7365 6c66 2e77 7269 7474 656e 5f70   (self.written_p
+0001f1b0: 6974 6368 2c20 7365 6c66 2e77 7269 7474  itch, self.writt
+0001f1c0: 656e 5f64 7572 6174 696f 6e29 0a0a 2020  en_duration)..  
+0001f1d0: 2020 2323 2320 5052 4956 4154 4520 4d45    ### PRIVATE ME
+0001f1e0: 5448 4f44 5320 2323 230a 0a20 2020 2064  THODS ###..    d
+0001f1f0: 6566 205f 6765 745f 626f 6479 2873 656c  ef _get_body(sel
+0001f200: 6629 3a0a 2020 2020 2020 2020 6475 7261  f):.        dura
+0001f210: 7469 6f6e 203d 2073 656c 662e 5f67 6574  tion = self._get
+0001f220: 5f66 6f72 6d61 7474 6564 5f64 7572 6174  _formatted_durat
+0001f230: 696f 6e28 290a 2020 2020 2020 2020 6966  ion().        if
+0001f240: 2073 656c 662e 6e6f 7465 5f68 6561 6420   self.note_head 
+0001f250: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0001f260: 2020 2020 2020 2020 2073 7472 696e 6720           string 
+0001f270: 3d20 7365 6c66 2e6e 6f74 655f 6865 6164  = self.note_head
+0001f280: 2e5f 6765 745f 6c69 6c79 706f 6e64 5f66  ._get_lilypond_f
+0001f290: 6f72 6d61 7428 6475 7261 7469 6f6e 3d64  ormat(duration=d
+0001f2a0: 7572 6174 696f 6e29 0a20 2020 2020 2020  uration).       
+0001f2b0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0001f2c0: 2020 2073 7472 696e 6720 3d20 6475 7261     string = dura
+0001f2d0: 7469 6f6e 0a20 2020 2020 2020 2072 6574  tion.        ret
+0001f2e0: 7572 6e20 5b73 7472 696e 675d 0a0a 2020  urn [string]..  
+0001f2f0: 2020 6465 6620 5f67 6574 5f63 6f6d 7061    def _get_compa
+0001f300: 6374 5f72 6570 7265 7365 6e74 6174 696f  ct_representatio
+0001f310: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
+0001f320: 2072 6574 7572 6e20 7365 6c66 2e5f 6765   return self._ge
+0001f330: 745f 626f 6479 2829 5b30 5d0a 0a20 2020  t_body()[0]..   
+0001f340: 2023 2323 2050 5542 4c49 4320 5052 4f50   ### PUBLIC PROP
+0001f350: 4552 5449 4553 2023 2323 0a0a 2020 2020  ERTIES ###..    
+0001f360: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
+0001f370: 6620 6e6f 7465 5f68 6561 6428 7365 6c66  f note_head(self
+0001f380: 2920 2d3e 204e 6f74 6548 6561 6420 7c20  ) -> NoteHead | 
+0001f390: 4e6f 6e65 3a0a 2020 2020 2020 2020 2222  None:.        ""
+0001f3a0: 220a 2020 2020 2020 2020 4765 7473 2061  ".        Gets a
+0001f3b0: 6e64 2073 6574 7320 6e6f 7465 2d68 6561  nd sets note-hea
+0001f3c0: 642e 0a0a 2020 2020 2020 2020 2e2e 2063  d...        .. c
+0001f3d0: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
+0001f3e0: 6c65 0a0a 2020 2020 2020 2020 2020 2020  le..            
+0001f3f0: 3e3e 3e20 6e6f 7465 203d 2061 626a 6164  >>> note = abjad
+0001f400: 2e4e 6f74 6528 2263 7327 2738 2e22 290a  .Note("cs''8.").
+0001f410: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0001f420: 6e6f 7465 2e6e 6f74 655f 6865 6164 0a20  note.note_head. 
+0001f430: 2020 2020 2020 2020 2020 204e 6f74 6548             NoteH
+0001f440: 6561 6428 2263 7327 2722 290a 0a20 2020  ead("cs''")..   
+0001f450: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
+0001f460: 6164 2e73 686f 7728 6e6f 7465 2920 2320  ad.show(note) # 
+0001f470: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+0001f480: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
+0001f490: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
+0001f4a0: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+0001f4b0: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+0001f4c0: 6f6e 6428 6e6f 7465 290a 2020 2020 2020  ond(note).      
+0001f4d0: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
+0001f4e0: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+0001f4f0: 2020 2020 2020 2020 2020 2020 6373 2727              cs''
+0001f500: 382e 0a0a 2020 2020 2020 2020 2020 2020  8...            
+0001f510: 3e3e 3e20 6e6f 7465 2e6e 6f74 655f 6865  >>> note.note_he
+0001f520: 6164 203d 2027 4435 270a 2020 2020 2020  ad = 'D5'.      
+0001f530: 2020 2020 2020 3e3e 3e20 6e6f 7465 2e6e        >>> note.n
+0001f540: 6f74 655f 6865 6164 0a20 2020 2020 2020  ote_head.       
+0001f550: 2020 2020 204e 6f74 6548 6561 6428 2264       NoteHead("d
+0001f560: 2727 2229 0a0a 2020 2020 2020 2020 2020  ''")..          
+0001f570: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+0001f580: 286e 6f74 6529 2023 2064 6f63 7465 7374  (note) # doctest
+0001f590: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
+0001f5a0: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
+0001f5b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f5c0: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
+0001f5d0: 6a61 642e 6c69 6c79 706f 6e64 286e 6f74  jad.lilypond(not
+0001f5e0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+0001f5f0: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
+0001f600: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0001f610: 2020 2020 2064 2727 382e 0a0a 2020 2020       d''8...    
+0001f620: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0001f630: 7265 7475 726e 2073 656c 662e 5f6e 6f74  return self._not
+0001f640: 655f 6865 6164 0a0a 2020 2020 406e 6f74  e_head..    @not
+0001f650: 655f 6865 6164 2e73 6574 7465 720a 2020  e_head.setter.  
+0001f660: 2020 6465 6620 6e6f 7465 5f68 6561 6428    def note_head(
+0001f670: 7365 6c66 2c20 6172 6775 6d65 6e74 293a  self, argument):
+0001f680: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+0001f690: 7374 616e 6365 2861 7267 756d 656e 742c  stance(argument,
+0001f6a0: 2074 7970 6528 4e6f 6e65 2929 3a0a 2020   type(None)):.  
+0001f6b0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+0001f6c0: 6e6f 7465 5f68 6561 6420 3d20 4e6f 6e65  note_head = None
+0001f6d0: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
+0001f6e0: 696e 7374 616e 6365 2861 7267 756d 656e  instance(argumen
+0001f6f0: 742c 204e 6f74 6548 6561 6429 3a0a 2020  t, NoteHead):.  
+0001f700: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+0001f710: 6e6f 7465 5f68 6561 6420 3d20 6172 6775  note_head = argu
+0001f720: 6d65 6e74 0a20 2020 2020 2020 2065 6c73  ment.        els
+0001f730: 653a 0a20 2020 2020 2020 2020 2020 206e  e:.            n
+0001f740: 6f74 655f 6865 6164 203d 204e 6f74 6548  ote_head = NoteH
+0001f750: 6561 6428 7772 6974 7465 6e5f 7069 7463  ead(written_pitc
+0001f760: 683d 6172 6775 6d65 6e74 290a 2020 2020  h=argument).    
+0001f770: 2020 2020 2020 2020 7365 6c66 2e5f 6e6f          self._no
+0001f780: 7465 5f68 6561 6420 3d20 6e6f 7465 5f68  te_head = note_h
+0001f790: 6561 640a 0a20 2020 2040 7072 6f70 6572  ead..    @proper
+0001f7a0: 7479 0a20 2020 2064 6566 2077 7269 7474  ty.    def writt
+0001f7b0: 656e 5f64 7572 6174 696f 6e28 7365 6c66  en_duration(self
+0001f7c0: 2920 2d3e 205f 6475 7261 7469 6f6e 2e44  ) -> _duration.D
+0001f7d0: 7572 6174 696f 6e3a 0a20 2020 2020 2020  uration:.       
+0001f7e0: 2022 2222 0a20 2020 2020 2020 2047 6574   """.        Get
+0001f7f0: 7320 616e 6420 7365 7473 2077 7269 7474  s and sets writt
+0001f800: 656e 2064 7572 6174 696f 6e2e 0a0a 2020  en duration...  
+0001f810: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
+0001f820: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
+0001f830: 2020 2020 2020 2020 2020 203e 3e3e 206e             >>> n
+0001f840: 6f74 6520 3d20 6162 6a61 642e 4e6f 7465  ote = abjad.Note
+0001f850: 2822 6373 2727 382e 2229 0a20 2020 2020  ("cs''8.").     
+0001f860: 2020 2020 2020 203e 3e3e 206e 6f74 652e         >>> note.
+0001f870: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
+0001f880: 0a20 2020 2020 2020 2020 2020 2044 7572  .            Dur
+0001f890: 6174 696f 6e28 332c 2031 3629 0a0a 2020  ation(3, 16)..  
+0001f8a0: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+0001f8b0: 6a61 642e 7368 6f77 286e 6f74 6529 2023  jad.show(note) #
+0001f8c0: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
+0001f8d0: 0a20 2020 2020 2020 2020 2020 202e 2e20  .            .. 
+0001f8e0: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
+0001f8f0: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
+0001f900: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
+0001f910: 706f 6e64 286e 6f74 6529 0a20 2020 2020  pond(note).     
+0001f920: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
+0001f930: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
+0001f940: 2020 2020 2020 2020 2020 2020 2063 7327               cs'
+0001f950: 2738 2e0a 0a20 2020 2020 2020 2020 2020  '8...           
+0001f960: 203e 3e3e 206e 6f74 652e 7772 6974 7465   >>> note.writte
+0001f970: 6e5f 6475 7261 7469 6f6e 203d 2028 312c  n_duration = (1,
+0001f980: 2031 3629 0a20 2020 2020 2020 2020 2020   16).           
+0001f990: 203e 3e3e 206e 6f74 652e 7772 6974 7465   >>> note.writte
+0001f9a0: 6e5f 6475 7261 7469 6f6e 0a20 2020 2020  n_duration.     
+0001f9b0: 2020 2020 2020 2044 7572 6174 696f 6e28         Duration(
+0001f9c0: 312c 2031 3629 0a0a 2020 2020 2020 2020  1, 16)..        
+0001f9d0: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
+0001f9e0: 6f77 286e 6f74 6529 2023 2064 6f63 7465  ow(note) # docte
+0001f9f0: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+0001fa00: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
+0001fa10: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001fa20: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
+0001fa30: 6162 6a61 642e 6c69 6c79 706f 6e64 286e  abjad.lilypond(n
+0001fa40: 6f74 6529 0a20 2020 2020 2020 2020 2020  ote).           
+0001fa50: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
+0001fa60: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+0001fa70: 2020 2020 2020 2063 7327 2731 360a 0a20         cs''16.. 
+0001fa80: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0001fa90: 2020 2072 6574 7572 6e20 7375 7065 7228     return super(
+0001faa0: 292e 7772 6974 7465 6e5f 6475 7261 7469  ).written_durati
+0001fab0: 6f6e 0a0a 2020 2020 4077 7269 7474 656e  on..    @written
+0001fac0: 5f64 7572 6174 696f 6e2e 7365 7474 6572  _duration.setter
+0001fad0: 0a20 2020 2064 6566 2077 7269 7474 656e  .    def written
+0001fae0: 5f64 7572 6174 696f 6e28 7365 6c66 2c20  _duration(self, 
+0001faf0: 6172 6775 6d65 6e74 293a 0a20 2020 2020  argument):.     
+0001fb00: 2020 2072 6574 7572 6e20 4c65 6166 2e77     return Leaf.w
+0001fb10: 7269 7474 656e 5f64 7572 6174 696f 6e2e  ritten_duration.
+0001fb20: 6673 6574 2873 656c 662c 2061 7267 756d  fset(self, argum
+0001fb30: 656e 7429 0a0a 2020 2020 2320 544f 444f  ent)..    # TODO
+0001fb40: 3a20 6368 616e 6765 204e 6f74 6520 616c  : change Note al
+0001fb50: 7761 7973 2074 6f20 6861 7665 2061 206e  ways to have a n
+0001fb60: 6f74 6520 6865 6164 0a20 2020 2040 7072  ote head.    @pr
+0001fb70: 6f70 6572 7479 0a20 2020 2064 6566 2077  operty.    def w
+0001fb80: 7269 7474 656e 5f70 6974 6368 2873 656c  ritten_pitch(sel
+0001fb90: 6629 202d 3e20 5f70 6974 6368 2e4e 616d  f) -> _pitch.Nam
+0001fba0: 6564 5069 7463 6820 7c20 4e6f 6e65 3a0a  edPitch | None:.
+0001fbb0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001fbc0: 2020 2020 4765 7473 2061 6e64 2073 6574      Gets and set
+0001fbd0: 7320 7772 6974 7465 6e20 7069 7463 682e  s written pitch.
+0001fbe0: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
+0001fbf0: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
+0001fc00: 650a 0a20 2020 2020 2020 2020 2020 203e  e..            >
+0001fc10: 3e3e 206e 6f74 6520 3d20 6162 6a61 642e  >> note = abjad.
+0001fc20: 4e6f 7465 2822 6373 2727 382e 2229 0a20  Note("cs''8."). 
+0001fc30: 2020 2020 2020 2020 2020 203e 3e3e 206e             >>> n
+0001fc40: 6f74 652e 7772 6974 7465 6e5f 7069 7463  ote.written_pitc
+0001fc50: 680a 2020 2020 2020 2020 2020 2020 4e61  h.            Na
+0001fc60: 6d65 6450 6974 6368 2822 6373 2727 2229  medPitch("cs''")
+0001fc70: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0001fc80: 3e20 6162 6a61 642e 7368 6f77 286e 6f74  > abjad.show(not
+0001fc90: 6529 2023 2064 6f63 7465 7374 3a20 2b53  e) # doctest: +S
+0001fca0: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
+0001fcb0: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
+0001fcc0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+0001fcd0: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
+0001fce0: 6c69 6c79 706f 6e64 286e 6f74 6529 0a20  lilypond(note). 
+0001fcf0: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+0001fd00: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
+0001fd10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001fd20: 2063 7327 2738 2e0a 0a20 2020 2020 2020   cs''8...       
+0001fd30: 2020 2020 203e 3e3e 206e 6f74 652e 7772       >>> note.wr
+0001fd40: 6974 7465 6e5f 7069 7463 6820 3d20 2744  itten_pitch = 'D
+0001fd50: 3527 0a20 2020 2020 2020 2020 2020 203e  5'.            >
+0001fd60: 3e3e 206e 6f74 652e 7772 6974 7465 6e5f  >> note.written_
+0001fd70: 7069 7463 680a 2020 2020 2020 2020 2020  pitch.          
+0001fd80: 2020 4e61 6d65 6450 6974 6368 2822 6427    NamedPitch("d'
+0001fd90: 2722 290a 0a20 2020 2020 2020 2020 2020  '")..           
+0001fda0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+0001fdb0: 6e6f 7465 2920 2320 646f 6374 6573 743a  note) # doctest:
+0001fdc0: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0001fdd0: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
+0001fde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fdf0: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+0001fe00: 6164 2e6c 696c 7970 6f6e 6428 6e6f 7465  ad.lilypond(note
+0001fe10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001fe20: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+0001fe30: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0001fe40: 2020 2020 6427 2738 2e0a 0a20 2020 2020      d''8...     
+0001fe50: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
+0001fe60: 6620 7365 6c66 2e6e 6f74 655f 6865 6164  f self.note_head
+0001fe70: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0001fe80: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001fe90: 2073 656c 662e 6e6f 7465 5f68 6561 642e   self.note_head.
+0001fea0: 7772 6974 7465 6e5f 7069 7463 680a 2020  written_pitch.  
+0001feb0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0001fec0: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+0001fed0: 6f6e 650a 0a20 2020 2040 7772 6974 7465  one..    @writte
+0001fee0: 6e5f 7069 7463 682e 7365 7474 6572 0a20  n_pitch.setter. 
+0001fef0: 2020 2064 6566 2077 7269 7474 656e 5f70     def written_p
+0001ff00: 6974 6368 2873 656c 662c 2061 7267 756d  itch(self, argum
+0001ff10: 656e 7429 3a0a 2020 2020 2020 2020 6966  ent):.        if
+0001ff20: 2061 7267 756d 656e 7420 6973 204e 6f6e   argument is Non
+0001ff30: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
+0001ff40: 6620 7365 6c66 2e6e 6f74 655f 6865 6164  f self.note_head
+0001ff50: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0001ff60: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0001ff70: 6c66 2e6e 6f74 655f 6865 6164 2e77 7269  lf.note_head.wri
+0001ff80: 7474 656e 5f70 6974 6368 203d 204e 6f6e  tten_pitch = Non
+0001ff90: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
+0001ffa0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0001ffb0: 656c 662e 6e6f 7465 5f68 6561 6420 6973  elf.note_head is
+0001ffc0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0001ffd0: 2020 2020 2020 2073 656c 662e 6e6f 7465         self.note
+0001ffe0: 5f68 6561 6420 3d20 4e6f 7465 4865 6164  _head = NoteHead
+0001fff0: 2873 656c 662c 2077 7269 7474 656e 5f70  (self, written_p
+00020000: 6974 6368 3d4e 6f6e 6529 0a20 2020 2020  itch=None).     
+00020010: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00020020: 2020 2020 2020 2020 2020 2020 2070 6974               pit
+00020030: 6368 203d 205f 7069 7463 682e 4e61 6d65  ch = _pitch.Name
+00020040: 6450 6974 6368 2861 7267 756d 656e 7429  dPitch(argument)
+00020050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020060: 2073 656c 662e 6e6f 7465 5f68 6561 642e   self.note_head.
+00020070: 7772 6974 7465 6e5f 7069 7463 6820 3d20  written_pitch = 
+00020080: 7069 7463 680a 0a20 2020 2023 2323 2050  pitch..    ### P
+00020090: 5542 4c49 4320 4d45 5448 4f44 5320 2323  UBLIC METHODS ##
+000200a0: 230a 0a20 2020 2040 7374 6174 6963 6d65  #..    @staticme
+000200b0: 7468 6f64 0a20 2020 2064 6566 2066 726f  thod.    def fro
+000200c0: 6d5f 7069 7463 685f 616e 645f 6475 7261  m_pitch_and_dura
+000200d0: 7469 6f6e 2870 6974 6368 2c20 6475 7261  tion(pitch, dura
+000200e0: 7469 6f6e 2920 2d3e 2022 4e6f 7465 223a  tion) -> "Note":
+000200f0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00020100: 2020 2020 204d 616b 6573 206e 6f74 6520       Makes note 
+00020110: 6672 6f6d 2060 6070 6974 6368 6060 2061  from ``pitch`` a
+00020120: 6e64 2060 6064 7572 6174 696f 6e60 602e  nd ``duration``.
+00020130: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
+00020140: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
+00020150: 650a 0a20 2020 2020 2020 2020 2020 203e  e..            >
+00020160: 3e3e 206e 6f74 6520 3d20 6162 6a61 642e  >> note = abjad.
+00020170: 4e6f 7465 2e66 726f 6d5f 7069 7463 685f  Note.from_pitch_
+00020180: 616e 645f 6475 7261 7469 6f6e 2827 4323  and_duration('C#
+00020190: 3527 2c20 2833 2c20 3136 2929 0a20 2020  5', (3, 16)).   
+000201a0: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
+000201b0: 6164 2e73 686f 7728 6e6f 7465 2920 2320  ad.show(note) # 
+000201c0: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+000201d0: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
+000201e0: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
+000201f0: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+00020200: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+00020210: 6f6e 6428 6e6f 7465 290a 2020 2020 2020  ond(note).      
+00020220: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
+00020230: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+00020240: 2020 2020 2020 2020 2020 2020 6373 2727              cs''
+00020250: 382e 0a0a 2020 2020 2020 2020 2222 220a  8...        """.
+00020260: 2020 2020 2020 2020 6e6f 7465 203d 204e          note = N
+00020270: 6f74 6528 7069 7463 682c 2064 7572 6174  ote(pitch, durat
+00020280: 696f 6e29 0a20 2020 2020 2020 2072 6574  ion).        ret
+00020290: 7572 6e20 6e6f 7465 0a0a 0a63 6c61 7373  urn note...class
+000202a0: 2052 6573 7428 4c65 6166 293a 0a20 2020   Rest(Leaf):.   
+000202b0: 2072 2222 220a 2020 2020 5265 7374 2e0a   r""".    Rest..
+000202c0: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
+000202d0: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+000202e0: 2020 2020 2020 3e3e 3e20 7265 7374 203d        >>> rest =
+000202f0: 2061 626a 6164 2e52 6573 7428 2272 382e   abjad.Rest("r8.
+00020300: 2229 0a20 2020 2020 2020 203e 3e3e 2061  ").        >>> a
+00020310: 626a 6164 2e61 7474 6163 6828 6162 6a61  bjad.attach(abja
+00020320: 642e 5469 6d65 5369 676e 6174 7572 6528  d.TimeSignature(
+00020330: 2833 2c20 3136 2929 2c20 7265 7374 290a  (3, 16)), rest).
+00020340: 2020 2020 2020 2020 3e3e 3e20 7374 6166          >>> staf
+00020350: 6620 3d20 6162 6a61 642e 5374 6166 6628  f = abjad.Staff(
+00020360: 5b72 6573 745d 290a 2020 2020 2020 2020  [rest]).        
+00020370: 3e3e 3e20 6162 6a61 642e 7368 6f77 2873  >>> abjad.show(s
+00020380: 7461 6666 2920 2320 646f 6374 6573 743a  taff) # doctest:
+00020390: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+000203a0: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+000203b0: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+000203c0: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+000203d0: 6f6e 6428 7374 6166 6629 0a20 2020 2020  ond(staff).     
+000203e0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+000203f0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+00020400: 2020 2020 205c 6e65 7720 5374 6166 660a       \new Staff.
+00020410: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00020420: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+00020430: 696d 6520 332f 3136 0a20 2020 2020 2020  ime 3/16.       
+00020440: 2020 2020 2020 2020 2072 382e 0a20 2020           r8..   
+00020450: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+00020460: 2222 220a 0a20 2020 205f 5f64 6f63 756d  """..    __docum
+00020470: 656e 7461 7469 6f6e 5f73 6563 7469 6f6e  entation_section
+00020480: 5f5f 203d 2022 4c65 6176 6573 220a 0a20  __ = "Leaves".. 
+00020490: 2020 205f 5f73 6c6f 7473 5f5f 203d 2028     __slots__ = (
+000204a0: 290a 0a20 2020 2064 6566 205f 5f69 6e69  )..    def __ini
+000204b0: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
+000204c0: 662c 0a20 2020 2020 2020 2077 7269 7474  f,.        writt
+000204d0: 656e 5f64 7572 6174 696f 6e3d 4e6f 6e65  en_duration=None
+000204e0: 2c0a 2020 2020 2020 2020 2a2c 0a20 2020  ,.        *,.   
+000204f0: 2020 2020 206c 616e 6775 6167 653a 2073       language: s
+00020500: 7472 203d 2022 656e 676c 6973 6822 2c0a  tr = "english",.
+00020510: 2020 2020 2020 2020 6d75 6c74 6970 6c69          multipli
+00020520: 6572 3a20 5f74 7970 696e 6773 2e44 7572  er: _typings.Dur
+00020530: 6174 696f 6e20 3d20 4e6f 6e65 2c0a 2020  ation = None,.  
+00020540: 2020 2020 2020 7461 673a 205f 7461 672e        tag: _tag.
+00020550: 5461 6720 3d20 4e6f 6e65 2c0a 2020 2020  Tag = None,.    
+00020560: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00020570: 2020 206f 7269 6769 6e61 6c5f 696e 7075     original_inpu
+00020580: 7420 3d20 7772 6974 7465 6e5f 6475 7261  t = written_dura
+00020590: 7469 6f6e 0a20 2020 2020 2020 2069 6620  tion.        if 
+000205a0: 6973 696e 7374 616e 6365 2877 7269 7474  isinstance(writt
+000205b0: 656e 5f64 7572 6174 696f 6e2c 204c 6561  en_duration, Lea
+000205c0: 6629 3a0a 2020 2020 2020 2020 2020 2020  f):.            
+000205d0: 6d75 6c74 6970 6c69 6572 203d 2077 7269  multiplier = wri
+000205e0: 7474 656e 5f64 7572 6174 696f 6e2e 6d75  tten_duration.mu
+000205f0: 6c74 6970 6c69 6572 0a20 2020 2020 2020  ltiplier.       
+00020600: 2069 6620 6973 696e 7374 616e 6365 2877   if isinstance(w
+00020610: 7269 7474 656e 5f64 7572 6174 696f 6e2c  ritten_duration,
+00020620: 2073 7472 293a 0a20 2020 2020 2020 2020   str):.         
+00020630: 2020 2073 7472 696e 6720 3d20 6622 7b7b     string = f"{{
+00020640: 207b 7772 6974 7465 6e5f 6475 7261 7469   {written_durati
+00020650: 6f6e 7d20 7d7d 220a 2020 2020 2020 2020  on} }}".        
+00020660: 2020 2020 7061 7273 6564 203d 2073 656c      parsed = sel
+00020670: 662e 5f70 6172 7365 5f6c 696c 7970 6f6e  f._parse_lilypon
+00020680: 645f 7374 7269 6e67 2873 7472 696e 672c  d_string(string,
+00020690: 206c 616e 6775 6167 653d 6c61 6e67 7561   language=langua
+000206a0: 6765 290a 2020 2020 2020 2020 2020 2020  ge).            
+000206b0: 6173 7365 7274 206c 656e 2870 6172 7365  assert len(parse
+000206c0: 6429 203d 3d20 3120 616e 6420 6973 696e  d) == 1 and isin
+000206d0: 7374 616e 6365 2870 6172 7365 645b 305d  stance(parsed[0]
+000206e0: 2c20 4c65 6166 290a 2020 2020 2020 2020  , Leaf).        
+000206f0: 2020 2020 7772 6974 7465 6e5f 6475 7261      written_dura
+00020700: 7469 6f6e 203d 2070 6172 7365 645b 305d  tion = parsed[0]
+00020710: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00020720: 7374 616e 6365 2877 7269 7474 656e 5f64  stance(written_d
+00020730: 7572 6174 696f 6e2c 204c 6561 6629 3a0a  uration, Leaf):.
+00020740: 2020 2020 2020 2020 2020 2020 7772 6974              writ
+00020750: 7465 6e5f 6475 7261 7469 6f6e 203d 2077  ten_duration = w
+00020760: 7269 7474 656e 5f64 7572 6174 696f 6e2e  ritten_duration.
+00020770: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
+00020780: 0a20 2020 2020 2020 2065 6c69 6620 7772  .        elif wr
+00020790: 6974 7465 6e5f 6475 7261 7469 6f6e 2069  itten_duration i
+000207a0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000207b0: 2020 2020 7772 6974 7465 6e5f 6475 7261      written_dura
+000207c0: 7469 6f6e 203d 205f 6475 7261 7469 6f6e  tion = _duration
+000207d0: 2e44 7572 6174 696f 6e28 312c 2034 290a  .Duration(1, 4).
+000207e0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000207f0: 2020 2020 2020 2020 2020 7772 6974 7465            writte
+00020800: 6e5f 6475 7261 7469 6f6e 203d 205f 6475  n_duration = _du
+00020810: 7261 7469 6f6e 2e44 7572 6174 696f 6e28  ration.Duration(
+00020820: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
+00020830: 290a 2020 2020 2020 2020 4c65 6166 2e5f  ).        Leaf._
+00020840: 5f69 6e69 745f 5f28 7365 6c66 2c20 7772  _init__(self, wr
+00020850: 6974 7465 6e5f 6475 7261 7469 6f6e 2c20  itten_duration, 
+00020860: 6d75 6c74 6970 6c69 6572 3d6d 756c 7469  multiplier=multi
+00020870: 706c 6965 722c 2074 6167 3d74 6167 290a  plier, tag=tag).
+00020880: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00020890: 7461 6e63 6528 6f72 6967 696e 616c 5f69  tance(original_i
+000208a0: 6e70 7574 2c20 4c65 6166 293a 0a20 2020  nput, Leaf):.   
+000208b0: 2020 2020 2020 2020 2073 656c 662e 5f63           self._c
+000208c0: 6f70 795f 6f76 6572 7269 6465 5f61 6e64  opy_override_and
+000208d0: 5f73 6574 5f66 726f 6d5f 6c65 6166 286f  _set_from_leaf(o
+000208e0: 7269 6769 6e61 6c5f 696e 7075 7429 0a0a  riginal_input)..
+000208f0: 2020 2020 6465 6620 5f67 6574 5f62 6f64      def _get_bod
+00020900: 7928 7365 6c66 293a 0a20 2020 2020 2020  y(self):.       
+00020910: 2072 6574 7572 6e20 5b73 656c 662e 5f67   return [self._g
+00020920: 6574 5f63 6f6d 7061 6374 5f72 6570 7265  et_compact_repre
+00020930: 7365 6e74 6174 696f 6e28 295d 0a0a 2020  sentation()]..  
+00020940: 2020 6465 6620 5f67 6574 5f63 6f6d 7061    def _get_compa
+00020950: 6374 5f72 6570 7265 7365 6e74 6174 696f  ct_representatio
+00020960: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
+00020970: 2072 6574 7572 6e20 6622 727b 7365 6c66   return f"r{self
+00020980: 2e5f 6765 745f 666f 726d 6174 7465 645f  ._get_formatted_
+00020990: 6475 7261 7469 6f6e 2829 7d22 0a0a 0a63  duration()}"...c
+000209a0: 6c61 7373 2053 636f 7265 2843 6f6e 7465  lass Score(Conte
+000209b0: 7874 293a 0a20 2020 2072 2222 220a 2020  xt):.    r""".  
+000209c0: 2020 5363 6f72 652e 0a0a 2020 2020 2e2e    Score...    ..
+000209d0: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
+000209e0: 616d 706c 650a 0a20 2020 2020 2020 203e  ample..        >
+000209f0: 3e3e 2073 7461 6666 5f31 203d 2061 626a  >> staff_1 = abj
+00020a00: 6164 2e53 7461 6666 2822 6327 3820 6427  ad.Staff("c'8 d'
+00020a10: 3820 6527 3820 6627 3822 290a 2020 2020  8 e'8 f'8").    
+00020a20: 2020 2020 3e3e 3e20 7374 6166 665f 3220      >>> staff_2 
+00020a30: 3d20 6162 6a61 642e 5374 6166 6628 2263  = abjad.Staff("c
+00020a40: 2738 2064 2738 2065 2738 2066 2738 2229  '8 d'8 e'8 f'8")
+00020a50: 0a20 2020 2020 2020 203e 3e3e 2073 636f  .        >>> sco
+00020a60: 7265 203d 2061 626a 6164 2e53 636f 7265  re = abjad.Score
+00020a70: 285b 7374 6166 665f 312c 2073 7461 6666  ([staff_1, staff
+00020a80: 5f32 5d29 0a20 2020 2020 2020 203e 3e3e  _2]).        >>>
+00020a90: 2061 626a 6164 2e73 686f 7728 7363 6f72   abjad.show(scor
+00020aa0: 6529 2023 2064 6f63 7465 7374 3a20 2b53  e) # doctest: +S
+00020ab0: 4b49 500a 0a20 2020 2020 2020 202e 2e20  KIP..        .. 
+00020ac0: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
+00020ad0: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+00020ae0: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+00020af0: 2873 636f 7265 290a 2020 2020 2020 2020  (score).        
+00020b00: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+00020b10: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+00020b20: 2020 5c6e 6577 2053 636f 7265 0a20 2020    \new Score.   
+00020b30: 2020 2020 2020 2020 203c 3c0a 2020 2020           <<.    
+00020b40: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
+00020b50: 2053 7461 6666 0a20 2020 2020 2020 2020   Staff.         
+00020b60: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+00020b70: 2020 2020 2020 2020 2020 2020 2063 2738               c'8
+00020b80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020b90: 2020 2020 2064 2738 0a20 2020 2020 2020       d'8.       
+00020ba0: 2020 2020 2020 2020 2020 2020 2065 2738               e'8
+00020bb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020bc0: 2020 2020 2066 2738 0a20 2020 2020 2020       f'8.       
+00020bd0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00020be0: 2020 2020 2020 2020 2020 205c 6e65 7720             \new 
+00020bf0: 5374 6166 660a 2020 2020 2020 2020 2020  Staff.          
+00020c00: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+00020c10: 2020 2020 2020 2020 2020 2020 6327 380a              c'8.
+00020c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020c30: 2020 2020 6427 380a 2020 2020 2020 2020      d'8.        
+00020c40: 2020 2020 2020 2020 2020 2020 6527 380a              e'8.
+00020c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020c60: 2020 2020 6627 380a 2020 2020 2020 2020      f'8.        
+00020c70: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00020c80: 2020 2020 2020 3e3e 0a0a 2020 2020 2222        >>..    ""
+00020c90: 220a 0a20 2020 2023 2323 2043 4c41 5353  "..    ### CLASS
+00020ca0: 2056 4152 4941 424c 4553 2023 2323 0a0a   VARIABLES ###..
+00020cb0: 2020 2020 5f5f 646f 6375 6d65 6e74 6174      __documentat
+00020cc0: 696f 6e5f 7365 6374 696f 6e5f 5f20 3d20  ion_section__ = 
+00020cd0: 2243 6f6e 7465 7874 7322 0a0a 2020 2020  "Contexts"..    
+00020ce0: 5f5f 736c 6f74 735f 5f20 3d20 2829 0a0a  __slots__ = ()..
+00020cf0: 2020 2020 5f64 6566 6175 6c74 5f6c 696c      _default_lil
+00020d00: 7970 6f6e 645f 7479 7065 203d 2022 5363  ypond_type = "Sc
+00020d10: 6f72 6522 0a0a 2020 2020 2323 2320 494e  ore"..    ### IN
+00020d20: 4954 4941 4c49 5a45 5220 2323 230a 0a20  ITIALIZER ###.. 
+00020d30: 2020 2023 2054 4f44 4f3a 206d 616b 6520     # TODO: make 
+00020d40: 6b65 7977 6f72 6473 206d 616e 6461 746f  keywords mandato
+00020d50: 7279 0a20 2020 2064 6566 205f 5f69 6e69  ry.    def __ini
+00020d60: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
+00020d70: 662c 0a20 2020 2020 2020 2063 6f6d 706f  f,.        compo
+00020d80: 6e65 6e74 733d 4e6f 6e65 2c0a 2020 2020  nents=None,.    
+00020d90: 2020 2020 6c69 6c79 706f 6e64 5f74 7970      lilypond_typ
+00020da0: 653a 2073 7472 203d 2022 5363 6f72 6522  e: str = "Score"
+00020db0: 2c0a 2020 2020 2020 2020 7369 6d75 6c74  ,.        simult
+00020dc0: 616e 656f 7573 3a20 626f 6f6c 203d 2054  aneous: bool = T
+00020dd0: 7275 652c 0a20 2020 2020 2020 206e 616d  rue,.        nam
+00020de0: 653a 2073 7472 203d 204e 6f6e 652c 0a20  e: str = None,. 
+00020df0: 2020 2020 2020 2074 6167 3a20 5f74 6167         tag: _tag
+00020e00: 2e54 6167 203d 204e 6f6e 652c 0a20 2020  .Tag = None,.   
+00020e10: 2020 2020 202a 2c0a 2020 2020 2020 2020       *,.        
+00020e20: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
+00020e30: 2265 6e67 6c69 7368 222c 0a20 2020 2029  "english",.    )
+00020e40: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00020e50: 2020 436f 6e74 6578 742e 5f5f 696e 6974    Context.__init
+00020e60: 5f5f 280a 2020 2020 2020 2020 2020 2020  __(.            
+00020e70: 7365 6c66 2c0a 2020 2020 2020 2020 2020  self,.          
+00020e80: 2020 636f 6d70 6f6e 656e 7473 3d63 6f6d    components=com
+00020e90: 706f 6e65 6e74 732c 0a20 2020 2020 2020  ponents,.       
+00020ea0: 2020 2020 206c 616e 6775 6167 653d 6c61       language=la
+00020eb0: 6e67 7561 6765 2c0a 2020 2020 2020 2020  nguage,.        
+00020ec0: 2020 2020 6c69 6c79 706f 6e64 5f74 7970      lilypond_typ
+00020ed0: 653d 6c69 6c79 706f 6e64 5f74 7970 652c  e=lilypond_type,
+00020ee0: 0a20 2020 2020 2020 2020 2020 2073 696d  .            sim
+00020ef0: 756c 7461 6e65 6f75 733d 7369 6d75 6c74  ultaneous=simult
+00020f00: 616e 656f 7573 2c0a 2020 2020 2020 2020  aneous,.        
+00020f10: 2020 2020 6e61 6d65 3d6e 616d 652c 0a20      name=name,. 
+00020f20: 2020 2020 2020 2020 2020 2074 6167 3d74             tag=t
+00020f30: 6167 2c0a 2020 2020 2020 2020 290a 0a20  ag,.        ).. 
+00020f40: 2020 2023 2323 2050 5542 4c49 4320 5052     ### PUBLIC PR
+00020f50: 4f50 4552 5449 4553 2023 2323 0a0a 2020  OPERTIES ###..  
+00020f60: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
+00020f70: 6465 6620 7461 6728 7365 6c66 2920 2d3e  def tag(self) ->
+00020f80: 205f 7461 672e 5461 6720 7c20 4e6f 6e65   _tag.Tag | None
+00020f90: 3a0a 2020 2020 2020 2020 7222 2222 0a20  :.        r""". 
+00020fa0: 2020 2020 2020 2047 6574 7320 7461 672e         Gets tag.
+00020fb0: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
+00020fc0: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
+00020fd0: 650a 0a20 2020 2020 2020 2020 2020 203e  e..            >
+00020fe0: 3e3e 2076 6f69 6365 203d 2061 626a 6164  >> voice = abjad
+00020ff0: 2e56 6f69 6365 2822 6327 3420 6427 2065  .Voice("c'4 d' e
+00021000: 2720 6627 222c 2074 6167 3d61 626a 6164  ' f'", tag=abjad
+00021010: 2e54 6167 2822 5245 4422 2929 0a20 2020  .Tag("RED")).   
+00021020: 2020 2020 2020 2020 203e 3e3e 2073 7461           >>> sta
+00021030: 6666 203d 2061 626a 6164 2e53 7461 6666  ff = abjad.Staff
+00021040: 285b 766f 6963 655d 2c20 7461 673d 6162  ([voice], tag=ab
+00021050: 6a61 642e 5461 6728 2242 4c55 4522 2929  jad.Tag("BLUE"))
+00021060: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00021070: 2073 636f 7265 203d 2061 626a 6164 2e53   score = abjad.S
+00021080: 636f 7265 285b 7374 6166 665d 2c20 7461  core([staff], ta
+00021090: 673d 6162 6a61 642e 5461 6728 2247 5245  g=abjad.Tag("GRE
+000210a0: 454e 2229 290a 2020 2020 2020 2020 2020  EN")).          
+000210b0: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+000210c0: 2873 636f 7265 2920 2320 646f 6374 6573  (score) # doctes
+000210d0: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+000210e0: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
+000210f0: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
+00021100: 6428 7363 6f72 652c 2074 6167 733d 5472  d(score, tags=Tr
+00021110: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
+00021120: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
+00021130: 290a 2020 2020 2020 2020 2020 2020 2521  ).            %!
+00021140: 2047 5245 454e 0a20 2020 2020 2020 2020   GREEN.         
+00021150: 2020 205c 6e65 7720 5363 6f72 650a 2020     \new Score.  
+00021160: 2020 2020 2020 2020 2020 2521 2047 5245            %! GRE
+00021170: 454e 0a20 2020 2020 2020 2020 2020 203c  EN.            <
+00021180: 3c0a 2020 2020 2020 2020 2020 2020 2020  <.              
+00021190: 2020 2521 2042 4c55 450a 2020 2020 2020    %! BLUE.      
+000211a0: 2020 2020 2020 2020 2020 5c6e 6577 2053            \new S
+000211b0: 7461 6666 0a20 2020 2020 2020 2020 2020  taff.           
+000211c0: 2020 2020 2025 2120 424c 5545 0a20 2020       %! BLUE.   
+000211d0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+000211e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000211f0: 2020 2025 2120 5245 440a 2020 2020 2020     %! RED.      
+00021200: 2020 2020 2020 2020 2020 2020 2020 5c6e                \n
+00021210: 6577 2056 6f69 6365 0a20 2020 2020 2020  ew Voice.       
+00021220: 2020 2020 2020 2020 2020 2020 2025 2120               %! 
+00021230: 5245 440a 2020 2020 2020 2020 2020 2020  RED.            
+00021240: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+00021250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021260: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
+00021270: 2020 2020 2020 2020 2020 2020 2020 6427                d'
+00021280: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+00021290: 2020 2020 2020 2020 2020 6527 340a 2020            e'4.  
+000212a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000212b0: 2020 2020 2020 6627 340a 2020 2020 2020        f'4.      
+000212c0: 2020 2020 2020 2020 2020 2020 2020 2521                %!
+000212d0: 2052 4544 0a20 2020 2020 2020 2020 2020   RED.           
+000212e0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+000212f0: 2020 2020 2020 2020 2020 2025 2120 424c             %! BL
+00021300: 5545 0a20 2020 2020 2020 2020 2020 2020  UE.             
+00021310: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+00021320: 2025 2120 4752 4545 4e0a 2020 2020 2020   %! GREEN.      
+00021330: 2020 2020 2020 3e3e 0a0a 2020 2020 2020        >>..      
+00021340: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00021350: 7475 726e 2073 7570 6572 2829 2e74 6167  turn super().tag
+00021360: 0a0a 0a63 6c61 7373 2053 6b69 7028 4c65  ...class Skip(Le
+00021370: 6166 293a 0a20 2020 2022 2222 0a20 2020  af):.    """.   
+00021380: 204c 696c 7950 6f6e 6420 736b 6970 2e0a   LilyPond skip..
+00021390: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
+000213a0: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+000213b0: 2020 2020 2020 3e3e 3e20 736b 6970 203d        >>> skip =
+000213c0: 2061 626a 6164 2e53 6b69 7028 2831 2c20   abjad.Skip((1, 
+000213d0: 3129 290a 2020 2020 2020 2020 3e3e 3e20  1)).        >>> 
+000213e0: 736b 6970 0a20 2020 2020 2020 2053 6b69  skip.        Ski
+000213f0: 7028 2773 3127 290a 0a20 2020 2020 2020  p('s1')..       
+00021400: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
+00021410: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
+00021420: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
+00021430: 706f 6e64 2873 6b69 7029 0a20 2020 2020  pond(skip).     
+00021440: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+00021450: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+00021460: 2020 2020 2073 310a 0a20 2020 2020 2020       s1..       
+00021470: 203e 3e3e 2073 6b69 7020 3d20 6162 6a61   >>> skip = abja
+00021480: 642e 536b 6970 2828 312c 2031 292c 206d  d.Skip((1, 1), m
+00021490: 756c 7469 706c 6965 723d 2835 2c20 3429  ultiplier=(5, 4)
+000214a0: 290a 2020 2020 2020 2020 3e3e 3e20 736b  ).        >>> sk
+000214b0: 6970 0a20 2020 2020 2020 2053 6b69 7028  ip.        Skip(
+000214c0: 2773 3120 2a20 352f 3427 290a 0a20 2020  's1 * 5/4')..   
+000214d0: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
+000214e0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+000214f0: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
+00021500: 6c69 6c79 706f 6e64 2873 6b69 7029 0a20  lilypond(skip). 
+00021510: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
+00021520: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
+00021530: 2020 2020 2020 2020 2073 3120 2a20 352f           s1 * 5/
+00021540: 340a 0a20 2020 2020 2020 203e 3e3e 206e  4..        >>> n
+00021550: 6f74 6520 3d20 6162 6a61 642e 4e6f 7465  ote = abjad.Note
+00021560: 2822 6327 3422 2c20 6d75 6c74 6970 6c69  ("c'4", multipli
+00021570: 6572 3d28 352c 2034 2929 0a20 2020 2020  er=(5, 4)).     
+00021580: 2020 203e 3e3e 2073 6b69 7020 3d20 6162     >>> skip = ab
+00021590: 6a61 642e 536b 6970 286e 6f74 6529 0a20  jad.Skip(note). 
+000215a0: 2020 2020 2020 203e 3e3e 2073 6b69 700a         >>> skip.
+000215b0: 2020 2020 2020 2020 536b 6970 2827 7334          Skip('s4
+000215c0: 202a 2035 2f34 2729 0a0a 2020 2020 2020   * 5/4')..      
+000215d0: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+000215e0: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+000215f0: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+00021600: 7970 6f6e 6428 736b 6970 290a 2020 2020  ypond(skip).    
+00021610: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+00021620: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+00021630: 2020 2020 2020 7334 202a 2035 2f34 0a0a        s4 * 5/4..
+00021640: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+00021650: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+00021660: 2020 2020 2053 6b69 7073 2063 616e 2062       Skips can b
+00021670: 6520 7461 6767 6564 3a0a 0a20 2020 2020  e tagged:..     
+00021680: 2020 203e 3e3e 2073 6b69 7020 3d20 6162     >>> skip = ab
+00021690: 6a61 642e 536b 6970 2822 7338 2e22 2c20  jad.Skip("s8.", 
+000216a0: 7461 673d 6162 6a61 642e 5461 6728 2247  tag=abjad.Tag("G
+000216b0: 4c4f 4241 4c5f 534b 4950 2229 290a 2020  LOBAL_SKIP")).  
+000216c0: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
+000216d0: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
+000216e0: 6428 736b 6970 2c20 7461 6773 3d54 7275  d(skip, tags=Tru
+000216f0: 6529 0a20 2020 2020 2020 203e 3e3e 2070  e).        >>> p
+00021700: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
+00021710: 2020 2020 2025 2120 474c 4f42 414c 5f53       %! GLOBAL_S
+00021720: 4b49 500a 2020 2020 2020 2020 7338 2e0a  KIP.        s8..
+00021730: 0a20 2020 2022 2222 0a0a 2020 2020 5f5f  .    """..    __
+00021740: 646f 6375 6d65 6e74 6174 696f 6e5f 7365  documentation_se
+00021750: 6374 696f 6e5f 5f20 3d20 224c 6561 7665  ction__ = "Leave
+00021760: 7322 0a0a 2020 2020 5f5f 736c 6f74 735f  s"..    __slots_
+00021770: 5f20 3d20 2829 0a0a 2020 2020 6465 6620  _ = ()..    def 
+00021780: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+00021790: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+000217a0: 2a61 7267 756d 656e 7473 2c0a 2020 2020  *arguments,.    
+000217b0: 2020 2020 6c61 6e67 7561 6765 3a20 7374      language: st
+000217c0: 7220 3d20 2265 6e67 6c69 7368 222c 0a20  r = "english",. 
+000217d0: 2020 2020 2020 206d 756c 7469 706c 6965         multiplie
+000217e0: 723a 205f 7479 7069 6e67 732e 4475 7261  r: _typings.Dura
+000217f0: 7469 6f6e 203d 204e 6f6e 652c 0a20 2020  tion = None,.   
+00021800: 2020 2020 2074 6167 3a20 5f74 6167 2e54       tag: _tag.T
+00021810: 6167 203d 204e 6f6e 652c 0a20 2020 2029  ag = None,.    )
+00021820: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00021830: 2020 696e 7075 745f 6c65 6166 203d 204e    input_leaf = N
+00021840: 6f6e 650a 2020 2020 2020 2020 7772 6974  one.        writ
+00021850: 7465 6e5f 6475 7261 7469 6f6e 203d 204e  ten_duration = N
+00021860: 6f6e 650a 2020 2020 2020 2020 6966 206c  one.        if l
+00021870: 656e 2861 7267 756d 656e 7473 2920 3d3d  en(arguments) ==
+00021880: 2031 2061 6e64 2069 7369 6e73 7461 6e63   1 and isinstanc
+00021890: 6528 6172 6775 6d65 6e74 735b 305d 2c20  e(arguments[0], 
+000218a0: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
+000218b0: 2020 7374 7269 6e67 203d 2066 227b 7b20    string = f"{{ 
+000218c0: 7b61 7267 756d 656e 7473 5b30 5d7d 207d  {arguments[0]} }
+000218d0: 7d22 0a20 2020 2020 2020 2020 2020 2070  }".            p
+000218e0: 6172 7365 6420 3d20 7365 6c66 2e5f 7061  arsed = self._pa
+000218f0: 7273 655f 6c69 6c79 706f 6e64 5f73 7472  rse_lilypond_str
+00021900: 696e 6728 7374 7269 6e67 2c20 6c61 6e67  ing(string, lang
+00021910: 7561 6765 3d6c 616e 6775 6167 6529 0a20  uage=language). 
+00021920: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00021930: 7420 6c65 6e28 7061 7273 6564 2920 3d3d  t len(parsed) ==
+00021940: 2031 2061 6e64 2069 7369 6e73 7461 6e63   1 and isinstanc
+00021950: 6528 7061 7273 6564 5b30 5d2c 204c 6561  e(parsed[0], Lea
+00021960: 6629 0a20 2020 2020 2020 2020 2020 2069  f).            i
+00021970: 6e70 7574 5f6c 6561 6620 3d20 7061 7273  nput_leaf = pars
+00021980: 6564 5b30 5d0a 2020 2020 2020 2020 2020  ed[0].          
+00021990: 2020 7772 6974 7465 6e5f 6475 7261 7469    written_durati
+000219a0: 6f6e 203d 2069 6e70 7574 5f6c 6561 662e  on = input_leaf.
+000219b0: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
+000219c0: 0a20 2020 2020 2020 2065 6c69 6620 6c65  .        elif le
+000219d0: 6e28 6172 6775 6d65 6e74 7329 203d 3d20  n(arguments) == 
+000219e0: 3120 616e 6420 6973 696e 7374 616e 6365  1 and isinstance
+000219f0: 2861 7267 756d 656e 7473 5b30 5d2c 204c  (arguments[0], L
+00021a00: 6561 6629 3a0a 2020 2020 2020 2020 2020  eaf):.          
+00021a10: 2020 696e 7075 745f 6c65 6166 203d 2061    input_leaf = a
+00021a20: 7267 756d 656e 7473 5b30 5d0a 2020 2020  rguments[0].    
+00021a30: 2020 2020 2020 2020 7772 6974 7465 6e5f          written_
+00021a40: 6475 7261 7469 6f6e 203d 2069 6e70 7574  duration = input
+00021a50: 5f6c 6561 662e 7772 6974 7465 6e5f 6475  _leaf.written_du
+00021a60: 7261 7469 6f6e 0a20 2020 2020 2020 2020  ration.         
+00021a70: 2020 206d 756c 7469 706c 6965 7220 3d20     multiplier = 
+00021a80: 696e 7075 745f 6c65 6166 2e6d 756c 7469  input_leaf.multi
+00021a90: 706c 6965 720a 2020 2020 2020 2020 656c  plier.        el
+00021aa0: 6966 206c 656e 2861 7267 756d 656e 7473  if len(arguments
+00021ab0: 2920 3d3d 2031 2061 6e64 206e 6f74 2069  ) == 1 and not i
+00021ac0: 7369 6e73 7461 6e63 6528 6172 6775 6d65  sinstance(argume
+00021ad0: 6e74 735b 305d 2c20 7374 7229 3a0a 2020  nts[0], str):.  
+00021ae0: 2020 2020 2020 2020 2020 7772 6974 7465            writte
+00021af0: 6e5f 6475 7261 7469 6f6e 203d 2061 7267  n_duration = arg
+00021b00: 756d 656e 7473 5b30 5d0a 2020 2020 2020  uments[0].      
+00021b10: 2020 656c 6966 206c 656e 2861 7267 756d    elif len(argum
+00021b20: 656e 7473 2920 3d3d 2030 3a0a 2020 2020  ents) == 0:.    
+00021b30: 2020 2020 2020 2020 7772 6974 7465 6e5f          written_
+00021b40: 6475 7261 7469 6f6e 203d 205f 6475 7261  duration = _dura
+00021b50: 7469 6f6e 2e44 7572 6174 696f 6e28 312c  tion.Duration(1,
+00021b60: 2034 290a 2020 2020 2020 2020 656c 7365   4).        else
+00021b70: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+00021b80: 6973 6520 5661 6c75 6545 7272 6f72 2866  ise ValueError(f
+00021b90: 2263 616e 206e 6f74 2069 6e69 7469 616c  "can not initial
+00021ba0: 697a 6520 736b 6970 2066 726f 6d20 7b61  ize skip from {a
+00021bb0: 7267 756d 656e 7473 2172 7d2e 2229 0a20  rguments!r}."). 
+00021bc0: 2020 2020 2020 204c 6561 662e 5f5f 696e         Leaf.__in
+00021bd0: 6974 5f5f 2873 656c 662c 2077 7269 7474  it__(self, writt
+00021be0: 656e 5f64 7572 6174 696f 6e2c 206d 756c  en_duration, mul
+00021bf0: 7469 706c 6965 723d 6d75 6c74 6970 6c69  tiplier=multipli
+00021c00: 6572 2c20 7461 673d 7461 6729 0a20 2020  er, tag=tag).   
+00021c10: 2020 2020 2069 6620 696e 7075 745f 6c65       if input_le
+00021c20: 6166 2069 7320 6e6f 7420 4e6f 6e65 3a0a  af is not None:.
+00021c30: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00021c40: 2e5f 636f 7079 5f6f 7665 7272 6964 655f  ._copy_override_
+00021c50: 616e 645f 7365 745f 6672 6f6d 5f6c 6561  and_set_from_lea
+00021c60: 6628 696e 7075 745f 6c65 6166 290a 0a20  f(input_leaf).. 
+00021c70: 2020 2064 6566 205f 6765 745f 626f 6479     def _get_body
+00021c80: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00021c90: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
+00021ca0: 2020 2020 7265 7375 6c74 2e61 7070 656e      result.appen
+00021cb0: 6428 6622 737b 7365 6c66 2e5f 6765 745f  d(f"s{self._get_
+00021cc0: 666f 726d 6174 7465 645f 6475 7261 7469  formatted_durati
+00021cd0: 6f6e 2829 7d22 290a 2020 2020 2020 2020  on()}").        
+00021ce0: 7265 7475 726e 2072 6573 756c 740a 0a20  return result.. 
+00021cf0: 2020 2064 6566 205f 6765 745f 636f 6d70     def _get_comp
+00021d00: 6163 745f 7265 7072 6573 656e 7461 7469  act_representati
+00021d10: 6f6e 2873 656c 6629 3a0a 2020 2020 2020  on(self):.      
+00021d20: 2020 7265 7475 726e 2066 2273 7b73 656c    return f"s{sel
+00021d30: 662e 5f67 6574 5f66 6f72 6d61 7474 6564  f._get_formatted
+00021d40: 5f64 7572 6174 696f 6e28 297d 220a 0a0a  _duration()}"...
+00021d50: 636c 6173 7320 5374 6166 6628 436f 6e74  class Staff(Cont
+00021d60: 6578 7429 3a0a 2020 2020 7222 2222 0a20  ext):.    r""". 
+00021d70: 2020 2053 7461 6666 2e0a 0a20 2020 202e     Staff...    .
+00021d80: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+00021d90: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+00021da0: 3e3e 3e20 7374 6166 6620 3d20 6162 6a61  >>> staff = abja
+00021db0: 642e 5374 6166 6628 2263 2738 2064 2738  d.Staff("c'8 d'8
+00021dc0: 2065 2738 2066 2738 2229 0a20 2020 2020   e'8 f'8").     
+00021dd0: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
+00021de0: 7728 7374 6166 6629 2023 2064 6f63 7465  w(staff) # docte
+00021df0: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+00021e00: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+00021e10: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
+00021e20: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
+00021e30: 6c79 706f 6e64 2873 7461 6666 290a 2020  lypond(staff).  
+00021e40: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
+00021e50: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+00021e60: 2020 2020 2020 2020 5c6e 6577 2053 7461          \new Sta
+00021e70: 6666 0a20 2020 2020 2020 2020 2020 207b  ff.            {
+00021e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021e90: 2063 2738 0a20 2020 2020 2020 2020 2020   c'8.           
+00021ea0: 2020 2020 2064 2738 0a20 2020 2020 2020       d'8.       
+00021eb0: 2020 2020 2020 2020 2065 2738 0a20 2020           e'8.   
+00021ec0: 2020 2020 2020 2020 2020 2020 2066 2738               f'8
+00021ed0: 0a20 2020 2020 2020 2020 2020 207d 0a0a  .            }..
+00021ee0: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+00021ef0: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+00021f00: 2020 2020 2043 616e 2069 6e69 7469 616c       Can initial
+00021f10: 697a 6520 6672 6f6d 2063 6f6c 6c65 6374  ize from collect
+00021f20: 696f 6e20 6f66 2073 7472 696e 6773 3a0a  ion of strings:.
+00021f30: 0a20 2020 2020 2020 203e 3e3e 2073 7461  .        >>> sta
+00021f40: 6666 203d 2061 626a 6164 2e53 7461 6666  ff = abjad.Staff
+00021f50: 285b 0a20 2020 2020 2020 202e 2e2e 2020  ([.        ...  
+00021f60: 2020 2072 225c 7469 6d65 7320 392f 3130     r"\times 9/10
+00021f70: 207b 2072 3820 6327 3136 2063 2731 3620   { r8 c'16 c'16 
+00021f80: 6266 2734 7e20 6266 2731 3620 7231 3620  bf'4~ bf'16 r16 
+00021f90: 7d22 2c0a 2020 2020 2020 2020 2e2e 2e20  }",.        ... 
+00021fa0: 2020 2020 7222 5c74 696d 6573 2039 2f31      r"\times 9/1
+00021fb0: 3020 7b20 6266 2731 3620 6527 2731 3620  0 { bf'16 e''16 
+00021fc0: 6527 2734 207e 2065 2727 3136 2072 3136  e''4 ~ e''16 r16
+00021fd0: 2066 7327 2731 3620 6166 2727 3136 207d   fs''16 af''16 }
+00021fe0: 222c 0a20 2020 2020 2020 202e 2e2e 2020  ",.        ...  
+00021ff0: 2020 2072 225c 7469 6d65 7320 342f 3520     r"\times 4/5 
+00022000: 7b20 6127 3136 2072 3420 7d22 2c0a 2020  { a'16 r4 }",.  
+00022010: 2020 2020 2020 2e2e 2e20 5d29 0a20 2020        ... ]).   
+00022020: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
+00022030: 686f 7728 7374 6166 6629 2023 2064 6f63  how(staff) # doc
+00022040: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
+00022050: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
+00022060: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00022070: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
+00022080: 6c69 6c79 706f 6e64 2873 7461 6666 290a  lilypond(staff).
+00022090: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+000220a0: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
+000220b0: 2020 2020 2020 2020 2020 5c6e 6577 2053            \new S
+000220c0: 7461 6666 0a20 2020 2020 2020 2020 2020  taff.           
+000220d0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+000220e0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+000220f0: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
+00022100: 7465 7874 2023 7475 706c 6574 2d6e 756d  text #tuplet-num
+00022110: 6265 723a 3a63 616c 632d 6672 6163 7469  ber::calc-fracti
+00022120: 6f6e 2d74 6578 740a 2020 2020 2020 2020  on-text.        
+00022130: 2020 2020 2020 2020 2020 2020 5c74 696d              \tim
+00022140: 6573 2039 2f31 300a 2020 2020 2020 2020  es 9/10.        
+00022150: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00022160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022170: 2020 2020 2020 7238 0a20 2020 2020 2020        r8.       
+00022180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022190: 2063 2731 360a 2020 2020 2020 2020 2020   c'16.          
+000221a0: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+000221b0: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
+000221c0: 2020 2020 2020 2020 2020 2062 6627 340a             bf'4.
+000221d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000221e0: 2020 2020 2020 2020 7e0a 2020 2020 2020          ~.      
+000221f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022200: 2020 6266 2731 360a 2020 2020 2020 2020    bf'16.        
+00022210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022220: 7231 360a 2020 2020 2020 2020 2020 2020  r16.            
+00022230: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00022240: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00022250: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00022260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022270: 2020 5c74 7765 616b 2074 6578 7420 2374    \tweak text #t
+00022280: 7570 6c65 742d 6e75 6d62 6572 3a3a 6361  uplet-number::ca
+00022290: 6c63 2d66 7261 6374 696f 6e2d 7465 7874  lc-fraction-text
+000222a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000222b0: 2020 2020 205c 7469 6d65 7320 392f 3130       \times 9/10
+000222c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000222d0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
+000222e0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+000222f0: 6627 3136 0a20 2020 2020 2020 2020 2020  f'16.           
+00022300: 2020 2020 2020 2020 2020 2020 2065 2727               e''
+00022310: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
+00022320: 2020 2020 2020 2020 2020 2065 2727 340a             e''4.
+00022330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022340: 2020 2020 2020 2020 7e0a 2020 2020 2020          ~.      
+00022350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022360: 2020 6527 2731 360a 2020 2020 2020 2020    e''16.        
+00022370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022380: 7231 360a 2020 2020 2020 2020 2020 2020  r16.            
+00022390: 2020 2020 2020 2020 2020 2020 6673 2727              fs''
+000223a0: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
+000223b0: 2020 2020 2020 2020 2020 2061 6627 2731             af''1
+000223c0: 360a 2020 2020 2020 2020 2020 2020 2020  6.              
+000223d0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+000223e0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+000223f0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+00022400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022410: 5c74 696d 6573 2034 2f35 0a20 2020 2020  \times 4/5.     
+00022420: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+00022430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022440: 2020 2020 2020 2020 2061 2731 360a 2020           a'16.  
+00022450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022460: 2020 2020 2020 7234 0a20 2020 2020 2020        r4.       
+00022470: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+00022480: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00022490: 0a20 2020 2020 2020 2020 2020 207d 0a0a  .            }..
+000224a0: 2020 2020 2222 220a 0a20 2020 205f 5f64      """..    __d
+000224b0: 6f63 756d 656e 7461 7469 6f6e 5f73 6563  ocumentation_sec
+000224c0: 7469 6f6e 5f5f 203d 2022 436f 6e74 6578  tion__ = "Contex
+000224d0: 7473 220a 0a20 2020 205f 5f73 6c6f 7473  ts"..    __slots
+000224e0: 5f5f 203d 2028 290a 0a20 2020 205f 6465  __ = ()..    _de
+000224f0: 6661 756c 745f 6c69 6c79 706f 6e64 5f74  fault_lilypond_t
+00022500: 7970 6520 3d20 2253 7461 6666 220a 0a20  ype = "Staff".. 
+00022510: 2020 2023 2054 4f44 4f3a 206d 616b 6520     # TODO: make 
+00022520: 6b65 7977 6f72 6473 206d 616e 6461 746f  keywords mandato
+00022530: 7279 0a20 2020 2064 6566 205f 5f69 6e69  ry.    def __ini
+00022540: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
+00022550: 662c 0a20 2020 2020 2020 2063 6f6d 706f  f,.        compo
+00022560: 6e65 6e74 733d 4e6f 6e65 2c0a 2020 2020  nents=None,.    
+00022570: 2020 2020 6c69 6c79 706f 6e64 5f74 7970      lilypond_typ
+00022580: 653a 2073 7472 203d 2022 5374 6166 6622  e: str = "Staff"
+00022590: 2c0a 2020 2020 2020 2020 7369 6d75 6c74  ,.        simult
+000225a0: 616e 656f 7573 3a20 626f 6f6c 203d 2046  aneous: bool = F
+000225b0: 616c 7365 2c0a 2020 2020 2020 2020 6e61  alse,.        na
+000225c0: 6d65 3a20 7374 7220 3d20 4e6f 6e65 2c0a  me: str = None,.
+000225d0: 2020 2020 2020 2020 7461 673a 205f 7461          tag: _ta
+000225e0: 672e 5461 6720 3d20 4e6f 6e65 2c0a 2020  g.Tag = None,.  
+000225f0: 2020 2020 2020 2a2c 0a20 2020 2020 2020        *,.       
+00022600: 206c 616e 6775 6167 653a 2073 7472 203d   language: str =
+00022610: 2022 656e 676c 6973 6822 2c0a 2020 2020   "english",.    
+00022620: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00022630: 2020 2043 6f6e 7465 7874 2e5f 5f69 6e69     Context.__ini
+00022640: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
+00022650: 2073 656c 662c 0a20 2020 2020 2020 2020   self,.         
+00022660: 2020 2063 6f6d 706f 6e65 6e74 733d 636f     components=co
+00022670: 6d70 6f6e 656e 7473 2c0a 2020 2020 2020  mponents,.      
+00022680: 2020 2020 2020 6c61 6e67 7561 6765 3d6c        language=l
+00022690: 616e 6775 6167 652c 0a20 2020 2020 2020  anguage,.       
+000226a0: 2020 2020 206c 696c 7970 6f6e 645f 7479       lilypond_ty
+000226b0: 7065 3d6c 696c 7970 6f6e 645f 7479 7065  pe=lilypond_type
+000226c0: 2c0a 2020 2020 2020 2020 2020 2020 7369  ,.            si
+000226d0: 6d75 6c74 616e 656f 7573 3d73 696d 756c  multaneous=simul
+000226e0: 7461 6e65 6f75 732c 0a20 2020 2020 2020  taneous,.       
+000226f0: 2020 2020 206e 616d 653d 6e61 6d65 2c0a       name=name,.
+00022700: 2020 2020 2020 2020 2020 2020 7461 673d              tag=
+00022710: 7461 672c 0a20 2020 2020 2020 2029 0a0a  tag,.        )..
+00022720: 0a63 6c61 7373 2053 7461 6666 4772 6f75  .class StaffGrou
+00022730: 7028 436f 6e74 6578 7429 3a0a 2020 2020  p(Context):.    
+00022740: 7222 2222 0a20 2020 2053 7461 6666 2067  r""".    Staff g
+00022750: 726f 7570 2e0a 0a20 2020 202e 2e20 2063  roup...    ..  c
+00022760: 6f6e 7461 696e 6572 3a3a 2065 7861 6d70  ontainer:: examp
+00022770: 6c65 0a0a 2020 2020 2020 2020 3e3e 3e20  le..        >>> 
+00022780: 7374 6166 665f 3120 3d20 6162 6a61 642e  staff_1 = abjad.
+00022790: 5374 6166 6628 2263 2734 2064 2734 2065  Staff("c'4 d'4 e
+000227a0: 2734 2066 2734 2067 2731 2229 0a20 2020  '4 f'4 g'1").   
+000227b0: 2020 2020 203e 3e3e 2073 7461 6666 5f32       >>> staff_2
+000227c0: 203d 2061 626a 6164 2e53 7461 6666 2822   = abjad.Staff("
+000227d0: 6732 2066 3220 6531 2229 0a20 2020 2020  g2 f2 e1").     
+000227e0: 2020 203e 3e3e 2073 7461 6666 5f67 726f     >>> staff_gro
+000227f0: 7570 203d 2061 626a 6164 2e53 7461 6666  up = abjad.Staff
+00022800: 4772 6f75 7028 5b73 7461 6666 5f31 2c20  Group([staff_1, 
+00022810: 7374 6166 665f 325d 290a 2020 2020 2020  staff_2]).      
+00022820: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+00022830: 2873 7461 6666 5f67 726f 7570 2920 2320  (staff_group) # 
+00022840: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+00022850: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
+00022860: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
+00022870: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+00022880: 6164 2e6c 696c 7970 6f6e 6428 7374 6166  ad.lilypond(staf
+00022890: 665f 6772 6f75 7029 0a20 2020 2020 2020  f_group).       
+000228a0: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
+000228b0: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+000228c0: 2020 205c 6e65 7720 5374 6166 6647 726f     \new StaffGro
+000228d0: 7570 0a20 2020 2020 2020 2020 2020 203c  up.            <
+000228e0: 3c0a 2020 2020 2020 2020 2020 2020 2020  <.              
+000228f0: 2020 5c6e 6577 2053 7461 6666 0a20 2020    \new Staff.   
+00022900: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+00022910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022920: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
+00022930: 2020 2020 2020 2020 2020 2064 2734 0a20             d'4. 
+00022940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022950: 2020 2065 2734 0a20 2020 2020 2020 2020     e'4.         
+00022960: 2020 2020 2020 2020 2020 2066 2734 0a20             f'4. 
+00022970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022980: 2020 2067 2731 0a20 2020 2020 2020 2020     g'1.         
+00022990: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+000229a0: 2020 2020 2020 2020 205c 6e65 7720 5374           \new St
+000229b0: 6166 660a 2020 2020 2020 2020 2020 2020  aff.            
+000229c0: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+000229d0: 2020 2020 2020 2020 2020 6732 0a20 2020            g2.   
+000229e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000229f0: 2066 320a 2020 2020 2020 2020 2020 2020   f2.            
+00022a00: 2020 2020 2020 2020 6531 0a20 2020 2020          e1.     
+00022a10: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00022a20: 2020 2020 2020 2020 203e 3e0a 0a20 2020           >>..   
+00022a30: 2022 2222 0a0a 2020 2020 5f5f 646f 6375   """..    __docu
+00022a40: 6d65 6e74 6174 696f 6e5f 7365 6374 696f  mentation_sectio
+00022a50: 6e5f 5f20 3d20 2243 6f6e 7465 7874 7322  n__ = "Contexts"
+00022a60: 0a0a 2020 2020 5f5f 736c 6f74 735f 5f20  ..    __slots__ 
+00022a70: 3d20 2829 0a0a 2020 2020 5f64 6566 6175  = ()..    _defau
+00022a80: 6c74 5f6c 696c 7970 6f6e 645f 7479 7065  lt_lilypond_type
+00022a90: 203d 2022 5374 6166 6647 726f 7570 220a   = "StaffGroup".
+00022aa0: 0a20 2020 2023 2054 4f44 4f3a 206d 616b  .    # TODO: mak
+00022ab0: 6520 6b65 7977 6f72 6473 206d 616e 6461  e keywords manda
+00022ac0: 746f 7279 0a20 2020 2064 6566 205f 5f69  tory.    def __i
+00022ad0: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
+00022ae0: 656c 662c 0a20 2020 2020 2020 2063 6f6d  elf,.        com
+00022af0: 706f 6e65 6e74 733d 4e6f 6e65 2c0a 2020  ponents=None,.  
+00022b00: 2020 2020 2020 6c69 6c79 706f 6e64 5f74        lilypond_t
+00022b10: 7970 653a 2073 7472 203d 2022 5374 6166  ype: str = "Staf
+00022b20: 6647 726f 7570 222c 0a20 2020 2020 2020  fGroup",.       
+00022b30: 2073 696d 756c 7461 6e65 6f75 733a 2062   simultaneous: b
+00022b40: 6f6f 6c20 3d20 5472 7565 2c0a 2020 2020  ool = True,.    
+00022b50: 2020 2020 6e61 6d65 3a20 7374 7220 3d20      name: str = 
+00022b60: 4e6f 6e65 2c0a 2020 2020 2020 2020 7461  None,.        ta
+00022b70: 673a 205f 7461 672e 5461 6720 3d20 4e6f  g: _tag.Tag = No
+00022b80: 6e65 2c0a 2020 2020 2020 2020 2a2c 0a20  ne,.        *,. 
+00022b90: 2020 2020 2020 206c 616e 6775 6167 653a         language:
+00022ba0: 2073 7472 203d 2022 656e 676c 6973 6822   str = "english"
+00022bb0: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+00022bc0: 0a20 2020 2020 2020 2043 6f6e 7465 7874  .        Context
+00022bd0: 2e5f 5f69 6e69 745f 5f28 0a20 2020 2020  .__init__(.     
+00022be0: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+00022bf0: 2020 2020 2020 2020 2063 6f6d 706f 6e65           compone
+00022c00: 6e74 733d 636f 6d70 6f6e 656e 7473 2c0a  nts=components,.
+00022c10: 2020 2020 2020 2020 2020 2020 6c61 6e67              lang
+00022c20: 7561 6765 3d6c 616e 6775 6167 652c 0a20  uage=language,. 
+00022c30: 2020 2020 2020 2020 2020 206c 696c 7970             lilyp
+00022c40: 6f6e 645f 7479 7065 3d6c 696c 7970 6f6e  ond_type=lilypon
+00022c50: 645f 7479 7065 2c0a 2020 2020 2020 2020  d_type,.        
+00022c60: 2020 2020 7369 6d75 6c74 616e 656f 7573      simultaneous
+00022c70: 3d73 696d 756c 7461 6e65 6f75 732c 0a20  =simultaneous,. 
+00022c80: 2020 2020 2020 2020 2020 206e 616d 653d             name=
+00022c90: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
+00022ca0: 2020 7461 673d 7461 672c 0a20 2020 2020    tag=tag,.     
+00022cb0: 2020 2029 0a0a 0a63 6c61 7373 2054 7265     )...class Tre
+00022cc0: 6d6f 6c6f 436f 6e74 6169 6e65 7228 436f  moloContainer(Co
+00022cd0: 6e74 6169 6e65 7229 3a0a 2020 2020 7222  ntainer):.    r"
+00022ce0: 2222 0a20 2020 2054 7265 6d6f 6c6f 2063  "".    Tremolo c
+00022cf0: 6f6e 7461 696e 6572 2e0a 0a20 2020 202e  ontainer...    .
+00022d00: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+00022d10: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+00022d20: 3e3e 3e20 7374 6166 6620 3d20 6162 6a61  >>> staff = abja
+00022d30: 642e 5374 6166 6628 290a 2020 2020 2020  d.Staff().      
+00022d40: 2020 3e3e 3e20 7374 6166 662e 6170 7065    >>> staff.appe
+00022d50: 6e64 2861 626a 6164 2e54 7265 6d6f 6c6f  nd(abjad.Tremolo
+00022d60: 436f 6e74 6169 6e65 7228 322c 2022 6327  Container(2, "c'
+00022d70: 3136 2065 2722 2929 0a20 2020 2020 2020  16 e'")).       
+00022d80: 203e 3e3e 2073 7461 6666 2e61 7070 656e   >>> staff.appen
+00022d90: 6428 2263 7327 3422 290a 2020 2020 2020  d("cs'4").      
+00022da0: 2020 3e3e 3e20 7374 6166 662e 6170 7065    >>> staff.appe
+00022db0: 6e64 2861 626a 6164 2e54 7265 6d6f 6c6f  nd(abjad.Tremolo
+00022dc0: 436f 6e74 6169 6e65 7228 322c 2022 6427  Container(2, "d'
+00022dd0: 3136 2066 2722 2929 0a20 2020 2020 2020  16 f'")).       
+00022de0: 203e 3e3e 2073 7461 6666 2e61 7070 656e   >>> staff.appen
+00022df0: 6428 2264 7327 3422 290a 2020 2020 2020  d("ds'4").      
+00022e00: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+00022e10: 2873 7461 6666 2920 2320 646f 6374 6573  (staff) # doctes
+00022e20: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+00022e30: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+00022e40: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+00022e50: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+00022e60: 7970 6f6e 6428 7374 6166 6629 0a20 2020  ypond(staff).   
+00022e70: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
+00022e80: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
+00022e90: 2020 2020 2020 205c 6e65 7720 5374 6166         \new Staf
+00022ea0: 660a 2020 2020 2020 2020 2020 2020 7b0a  f.            {.
+00022eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022ec0: 5c72 6570 6561 7420 7472 656d 6f6c 6f20  \repeat tremolo 
+00022ed0: 3220 7b0a 2020 2020 2020 2020 2020 2020  2 {.            
+00022ee0: 2020 2020 2020 2020 6327 3136 0a20 2020          c'16.   
+00022ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022f00: 2065 2731 360a 2020 2020 2020 2020 2020   e'16.          
+00022f10: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00022f20: 2020 2020 2020 2020 6373 2734 0a20 2020          cs'4.   
+00022f30: 2020 2020 2020 2020 2020 2020 205c 7265               \re
+00022f40: 7065 6174 2074 7265 6d6f 6c6f 2032 207b  peat tremolo 2 {
+00022f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022f60: 2020 2020 2064 2731 360a 2020 2020 2020       d'16.      
+00022f70: 2020 2020 2020 2020 2020 2020 2020 6627                f'
+00022f80: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
+00022f90: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+00022fa0: 2020 2020 2064 7327 340a 2020 2020 2020       ds'4.      
+00022fb0: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
+00022fc0: 2044 7572 6174 696f 6e20 6f66 2063 6f6e   Duration of con
+00022fd0: 7461 696e 6572 2065 7175 616c 2074 6f20  tainer equal to 
+00022fe0: 636f 6e74 656e 7473 2064 7572 6174 696f  contents duratio
+00022ff0: 6e20 6d75 6c74 6970 6c69 6564 2062 7920  n multiplied by 
+00023000: 636f 756e 743a 0a0a 2020 2020 2020 2020  count:..        
+00023010: 3e3e 3e20 6162 6a61 642e 6765 742e 6475  >>> abjad.get.du
+00023020: 7261 7469 6f6e 2873 7461 6666 5b30 5d29  ration(staff[0])
+00023030: 0a20 2020 2020 2020 2044 7572 6174 696f  .        Duratio
+00023040: 6e28 312c 2034 290a 0a20 2020 2020 2020  n(1, 4)..       
+00023050: 2044 7572 6174 696f 6e20 6f66 2065 6163   Duration of eac
+00023060: 6820 6c65 6166 2065 7175 616c 2074 6f20  h leaf equal to 
+00023070: 7772 6974 7465 6e20 6475 7261 7469 6f6e  written duration
+00023080: 206d 756c 7469 706c 6965 6420 6279 2063   multiplied by c
+00023090: 6f75 6e74 3a0a 0a20 2020 2020 2020 203e  ount:..        >
+000230a0: 3e3e 2061 626a 6164 2e67 6574 2e64 7572  >> abjad.get.dur
+000230b0: 6174 696f 6e28 7374 6166 665b 305d 5b30  ation(staff[0][0
+000230c0: 5d29 0a20 2020 2020 2020 2044 7572 6174  ]).        Durat
+000230d0: 696f 6e28 312c 2038 290a 0a20 2020 2022  ion(1, 8)..    "
+000230e0: 2222 0a0a 2020 2020 5f5f 646f 6375 6d65  ""..    __docume
+000230f0: 6e74 6174 696f 6e5f 7365 6374 696f 6e5f  ntation_section_
+00023100: 5f20 3d20 2243 6f6e 7461 696e 6572 7322  _ = "Containers"
+00023110: 0a0a 2020 2020 5f5f 736c 6f74 735f 5f20  ..    __slots__ 
+00023120: 3d20 2822 5f63 6f75 6e74 222c 290a 0a20  = ("_count",).. 
+00023130: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00023140: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+00023150: 2020 2020 2020 2063 6f75 6e74 3a20 696e         count: in
+00023160: 7420 3d20 322c 0a20 2020 2020 2020 2063  t = 2,.        c
+00023170: 6f6d 706f 6e65 6e74 733d 4e6f 6e65 2c0a  omponents=None,.
+00023180: 2020 2020 2020 2020 2a2c 0a20 2020 2020          *,.     
+00023190: 2020 206c 616e 6775 6167 653a 2073 7472     language: str
+000231a0: 203d 2022 656e 676c 6973 6822 2c0a 2020   = "english",.  
+000231b0: 2020 2020 2020 7461 673a 205f 7461 672e        tag: _tag.
+000231c0: 5461 6720 3d20 4e6f 6e65 2c0a 2020 2020  Tag = None,.    
+000231d0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+000231e0: 2020 2061 7373 6572 7420 5f6d 6174 682e     assert _math.
+000231f0: 6973 5f61 7373 6967 6e61 626c 655f 696e  is_assignable_in
+00023200: 7465 6765 7228 636f 756e 7429 2c20 7265  teger(count), re
+00023210: 7072 2863 6f75 6e74 290a 2020 2020 2020  pr(count).      
+00023220: 2020 7365 6c66 2e5f 636f 756e 7420 3d20    self._count = 
+00023230: 636f 756e 740a 2020 2020 2020 2020 436f  count.        Co
+00023240: 6e74 6169 6e65 722e 5f5f 696e 6974 5f5f  ntainer.__init__
+00023250: 2873 656c 662c 2063 6f6d 706f 6e65 6e74  (self, component
+00023260: 732c 206c 616e 6775 6167 653d 6c61 6e67  s, language=lang
+00023270: 7561 6765 2c20 7461 673d 7461 6729 0a20  uage, tag=tag). 
+00023280: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
+00023290: 6c66 2920 213d 2032 3a0a 2020 2020 2020  lf) != 2:.      
+000232a0: 2020 2020 2020 7261 6973 6520 4578 6365        raise Exce
+000232b0: 7074 696f 6e28 6622 6d75 7374 2063 6f6e  ption(f"must con
+000232c0: 7461 696e 2032 206c 6561 7665 7320 286e  tain 2 leaves (n
+000232d0: 6f74 207b 6c65 6e28 7365 6c66 297d 2229  ot {len(self)}")
+000232e0: 0a0a 2020 2020 6465 6620 5f5f 6765 746e  ..    def __getn
+000232f0: 6577 6172 6773 5f5f 2873 656c 6629 202d  ewargs__(self) -
+00023300: 3e20 7475 706c 653a 0a20 2020 2020 2020  > tuple:.       
+00023310: 2022 2222 0a20 2020 2020 2020 2047 6574   """.        Get
+00023320: 7320 6e65 7720 6172 6775 6d65 6e74 7320  s new arguments 
+00023330: 6f66 2074 7265 6d6f 6c6f 2063 6f6e 7461  of tremolo conta
+00023340: 696e 6572 2e0a 2020 2020 2020 2020 2222  iner..        ""
+00023350: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00023360: 2028 7365 6c66 2e63 6f75 6e74 2c29 0a0a   (self.count,)..
+00023370: 2020 2020 6465 6620 5f66 6f72 6d61 745f      def _format_
+00023380: 6f70 656e 5f62 7261 636b 6574 735f 7369  open_brackets_si
+00023390: 7465 2873 656c 662c 2063 6f6e 7472 6962  te(self, contrib
+000233a0: 7574 696f 6e73 293a 0a20 2020 2020 2020  utions):.       
+000233b0: 2072 6573 756c 7420 3d20 5b5d 0a20 2020   result = [].   
+000233c0: 2020 2020 2073 7472 696e 6720 3d20 7266       string = rf
+000233d0: 225c 7265 7065 6174 2074 7265 6d6f 6c6f  "\repeat tremolo
+000233e0: 207b 7365 6c66 2e63 6f75 6e74 7d20 7b7b   {self.count} {{
+000233f0: 220a 2020 2020 2020 2020 7265 7375 6c74  ".        result
+00023400: 2e61 7070 656e 6428 7374 7269 6e67 290a  .append(string).
+00023410: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00023420: 6573 756c 740a 0a20 2020 2064 6566 205f  esult..    def _
+00023430: 6765 745f 7072 6570 726f 6c61 7465 645f  get_preprolated_
+00023440: 6475 7261 7469 6f6e 2873 656c 6629 3a0a  duration(self):.
+00023450: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00023460: 656c 662e 696d 706c 6965 645f 7072 6f6c  elf.implied_prol
+00023470: 6174 696f 6e20 2a20 7365 6c66 2e5f 6765  ation * self._ge
+00023480: 745f 636f 6e74 656e 7473 5f64 7572 6174  t_contents_durat
+00023490: 696f 6e28 290a 0a20 2020 2040 7072 6f70  ion()..    @prop
+000234a0: 6572 7479 0a20 2020 2064 6566 2063 6f75  erty.    def cou
+000234b0: 6e74 2873 656c 6629 202d 3e20 696e 743a  nt(self) -> int:
+000234c0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+000234d0: 2020 2020 2047 6574 7320 636f 756e 742e       Gets count.
+000234e0: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
+000234f0: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
+00023500: 650a 0a20 2020 2020 2020 2020 2020 203e  e..            >
+00023510: 3e3e 2074 7265 6d6f 6c6f 5f63 6f6e 7461  >> tremolo_conta
+00023520: 696e 6572 203d 2061 626a 6164 2e54 7265  iner = abjad.Tre
+00023530: 6d6f 6c6f 436f 6e74 6169 6e65 7228 322c  moloContainer(2,
+00023540: 2022 3c63 2720 6427 3e31 3620 6527 3136   "<c' d'>16 e'16
+00023550: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
+00023560: 3e3e 2074 7265 6d6f 6c6f 5f63 6f6e 7461  >> tremolo_conta
+00023570: 696e 6572 2e63 6f75 6e74 0a20 2020 2020  iner.count.     
+00023580: 2020 2020 2020 2032 0a0a 2020 2020 2020         2..      
+00023590: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+000235a0: 7475 726e 2073 656c 662e 5f63 6f75 6e74  turn self._count
+000235b0: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+000235c0: 2020 2020 6465 6620 696d 706c 6965 645f      def implied_
+000235d0: 7072 6f6c 6174 696f 6e28 7365 6c66 2920  prolation(self) 
+000235e0: 2d3e 205f 6475 7261 7469 6f6e 2e4d 756c  -> _duration.Mul
+000235f0: 7469 706c 6965 723a 0a20 2020 2020 2020  tiplier:.       
+00023600: 2072 2222 220a 2020 2020 2020 2020 4765   r""".        Ge
+00023610: 7473 2069 6d70 6c69 6564 2070 726f 6c61  ts implied prola
+00023620: 7469 6f6e 206f 6620 7472 656d 6f6c 6f20  tion of tremolo 
+00023630: 636f 6e74 6169 6e65 722e 0a0a 2020 2020  container...    
+00023640: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+00023650: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+00023660: 2020 2020 2020 2020 2044 6566 696e 6564           Defined
+00023670: 2065 7175 616c 2074 6f20 636f 756e 742e   equal to count.
+00023680: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+00023690: 3e20 7472 656d 6f6c 6f5f 636f 6e74 6169  > tremolo_contai
+000236a0: 6e65 7220 3d20 6162 6a61 642e 5472 656d  ner = abjad.Trem
+000236b0: 6f6c 6f43 6f6e 7461 696e 6572 2832 2c20  oloContainer(2, 
+000236c0: 223c 6327 2064 273e 3136 2065 2731 3622  "<c' d'>16 e'16"
+000236d0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+000236e0: 3e20 6162 6a61 642e 7368 6f77 2874 7265  > abjad.show(tre
+000236f0: 6d6f 6c6f 5f63 6f6e 7461 696e 6572 2920  molo_container) 
+00023700: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
+00023710: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+00023720: 3e20 7472 656d 6f6c 6f5f 636f 6e74 6169  > tremolo_contai
+00023730: 6e65 722e 696d 706c 6965 645f 7072 6f6c  ner.implied_prol
+00023740: 6174 696f 6e0a 2020 2020 2020 2020 2020  ation.          
+00023750: 2020 4d75 6c74 6970 6c69 6572 2832 2c20    Multiplier(2, 
+00023760: 3129 0a0a 2020 2020 2020 2020 2222 220a  1)..        """.
+00023770: 2020 2020 2020 2020 6d75 6c74 6970 6c69          multipli
+00023780: 6572 203d 205f 6475 7261 7469 6f6e 2e4d  er = _duration.M
+00023790: 756c 7469 706c 6965 7228 7365 6c66 2e63  ultiplier(self.c
+000237a0: 6f75 6e74 290a 2020 2020 2020 2020 7265  ount).        re
+000237b0: 7475 726e 206d 756c 7469 706c 6965 720a  turn multiplier.
+000237c0: 0a0a 636c 6173 7320 5475 706c 6574 2843  ..class Tuplet(C
+000237d0: 6f6e 7461 696e 6572 293a 0a20 2020 2072  ontainer):.    r
+000237e0: 2222 220a 2020 2020 5475 706c 6574 2e0a  """.    Tuplet..
+000237f0: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
+00023800: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+00023810: 2020 2020 2020 4120 7475 706c 6574 3a0a        A tuplet:.
+00023820: 0a20 2020 2020 2020 203e 3e3e 2074 7570  .        >>> tup
+00023830: 6c65 7420 3d20 6162 6a61 642e 5475 706c  let = abjad.Tupl
+00023840: 6574 2822 363a 3422 2c20 2263 2738 2064  et("6:4", "c'8 d
+00023850: 2738 2065 2738 2229 0a20 2020 2020 2020  '8 e'8").       
+00023860: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+00023870: 7475 706c 6574 2920 2320 646f 6374 6573  tuplet) # doctes
+00023880: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+00023890: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+000238a0: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+000238b0: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+000238c0: 7970 6f6e 6428 7475 706c 6574 290a 2020  ypond(tuplet).  
+000238d0: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
+000238e0: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+000238f0: 2020 2020 2020 2020 5c74 696d 6573 2034          \times 4
+00023900: 2f36 0a20 2020 2020 2020 2020 2020 207b  /6.            {
+00023910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023920: 2063 2738 0a20 2020 2020 2020 2020 2020   c'8.           
+00023930: 2020 2020 2064 2738 0a20 2020 2020 2020       d'8.       
+00023940: 2020 2020 2020 2020 2065 2738 0a20 2020           e'8.   
+00023950: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+00023960: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+00023970: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+00023980: 2041 206e 6573 7465 6420 7475 706c 6574   A nested tuplet
+00023990: 3a0a 0a20 2020 2020 2020 203e 3e3e 2073  :..        >>> s
+000239a0: 6563 6f6e 645f 7475 706c 6574 203d 2061  econd_tuplet = a
+000239b0: 626a 6164 2e54 7570 6c65 7428 2237 3a34  bjad.Tuplet("7:4
+000239c0: 222c 2022 6727 342e 2028 2061 2731 3620  ", "g'4. ( a'16 
+000239d0: 2922 290a 2020 2020 2020 2020 3e3e 3e20  )").        >>> 
+000239e0: 7475 706c 6574 2e69 6e73 6572 7428 312c  tuplet.insert(1,
+000239f0: 2073 6563 6f6e 645f 7475 706c 6574 290a   second_tuplet).
+00023a00: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+00023a10: 642e 7368 6f77 2874 7570 6c65 7429 2023  d.show(tuplet) #
+00023a20: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
+00023a30: 0a20 2020 2020 2020 202e 2e20 2064 6f63  .        ..  doc
+00023a40: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
+00023a50: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
+00023a60: 6a61 642e 6c69 6c79 706f 6e64 2874 7570  jad.lilypond(tup
+00023a70: 6c65 7429 0a20 2020 2020 2020 2020 2020  let).           
+00023a80: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
+00023a90: 6729 0a20 2020 2020 2020 2020 2020 205c  g).            \
+00023aa0: 7477 6561 6b20 6564 6765 2d68 6569 6768  tweak edge-heigh
+00023ab0: 7420 2327 2830 2e37 202e 2030 290a 2020  t #'(0.7 . 0).  
+00023ac0: 2020 2020 2020 2020 2020 5c74 696d 6573            \times
+00023ad0: 2034 2f36 0a20 2020 2020 2020 2020 2020   4/6.           
+00023ae0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00023af0: 2020 2063 2738 0a20 2020 2020 2020 2020     c'8.         
+00023b00: 2020 2020 2020 205c 7469 6d65 7320 342f         \times 4/
+00023b10: 370a 2020 2020 2020 2020 2020 2020 2020  7.              
+00023b20: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+00023b30: 2020 2020 2020 2020 6727 342e 0a20 2020          g'4..   
+00023b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023b50: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+00023b60: 2020 2020 2020 2061 2731 360a 2020 2020         a'16.    
+00023b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023b80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00023b90: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+00023ba0: 2020 2020 6427 380a 2020 2020 2020 2020      d'8.        
+00023bb0: 2020 2020 2020 2020 6527 380a 2020 2020          e'8.    
+00023bc0: 2020 2020 2020 2020 7d0a 0a0a 2020 2020          }...    
+00023bd0: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+00023be0: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+00023bf0: 2041 2064 6f75 626c 7920 6e65 7374 6564   A doubly nested
+00023c00: 2074 7570 6c65 743a 0a0a 2020 2020 2020   tuplet:..      
+00023c10: 2020 2020 2020 3e3e 3e20 7468 6972 645f        >>> third_
+00023c20: 7475 706c 6574 203d 2061 626a 6164 2e54  tuplet = abjad.T
+00023c30: 7570 6c65 7428 2235 3a34 222c 205b 5d29  uplet("5:4", [])
+00023c40: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00023c50: 2074 6869 7264 5f74 7570 6c65 742e 6578   third_tuplet.ex
+00023c60: 7465 6e64 2822 6527 2733 3220 5b20 6566  tend("e''32 [ ef
+00023c70: 2727 3332 2064 2727 3332 2063 7327 2733  ''32 d''32 cs''3
+00023c80: 3220 6371 7327 2733 3220 5d22 290a 2020  2 cqs''32 ]").  
+00023c90: 2020 2020 2020 2020 2020 3e3e 3e20 7365            >>> se
+00023ca0: 636f 6e64 5f74 7570 6c65 742e 696e 7365  cond_tuplet.inse
+00023cb0: 7274 2831 2c20 7468 6972 645f 7475 706c  rt(1, third_tupl
+00023cc0: 6574 290a 2020 2020 2020 2020 2020 2020  et).            
+00023cd0: 3e3e 3e20 6162 6a61 642e 7368 6f77 2874  >>> abjad.show(t
+00023ce0: 7570 6c65 7429 2023 2064 6f63 7465 7374  uplet) # doctest
+00023cf0: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
+00023d00: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
+00023d10: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
+00023d20: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
+00023d30: 706f 6e64 2874 7570 6c65 7429 0a20 2020  pond(tuplet).   
+00023d40: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
+00023d50: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
+00023d60: 2020 2020 2020 205c 7477 6561 6b20 6564         \tweak ed
+00023d70: 6765 2d68 6569 6768 7420 2327 2830 2e37  ge-height #'(0.7
+00023d80: 202e 2030 290a 2020 2020 2020 2020 2020   . 0).          
+00023d90: 2020 5c74 696d 6573 2034 2f36 0a20 2020    \times 4/6.   
+00023da0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00023db0: 2020 2020 2020 2020 2020 2063 2738 0a20             c'8. 
+00023dc0: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+00023dd0: 7477 6561 6b20 6564 6765 2d68 6569 6768  tweak edge-heigh
+00023de0: 7420 2327 2830 2e37 202e 2030 290a 2020  t #'(0.7 . 0).  
+00023df0: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+00023e00: 696d 6573 2034 2f37 0a20 2020 2020 2020  imes 4/7.       
+00023e10: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00023e20: 2020 2020 2020 2020 2020 2020 2020 2067                 g
+00023e30: 2734 2e0a 2020 2020 2020 2020 2020 2020  '4..            
+00023e40: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+00023e50: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+00023e60: 696d 6573 2034 2f35 0a20 2020 2020 2020  imes 4/5.       
+00023e70: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+00023e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023e90: 2020 2020 2020 2065 2727 3332 0a20 2020         e''32.   
+00023ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023eb0: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
+00023ec0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00023ed0: 6627 2733 320a 2020 2020 2020 2020 2020  f''32.          
+00023ee0: 2020 2020 2020 2020 2020 2020 2020 6427                d'
+00023ef0: 2733 320a 2020 2020 2020 2020 2020 2020  '32.            
+00023f00: 2020 2020 2020 2020 2020 2020 6373 2727              cs''
+00023f10: 3332 0a20 2020 2020 2020 2020 2020 2020  32.             
+00023f20: 2020 2020 2020 2020 2020 2063 7173 2727             cqs''
+00023f30: 3332 0a20 2020 2020 2020 2020 2020 2020  32.             
+00023f40: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
+00023f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023f60: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
+00023f70: 2020 2020 2020 2061 2731 360a 2020 2020         a'16.    
+00023f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023f90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00023fa0: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+00023fb0: 2020 2020 6427 380a 2020 2020 2020 2020      d'8.        
+00023fc0: 2020 2020 2020 2020 6527 380a 2020 2020          e'8.    
+00023fd0: 2020 2020 2020 2020 7d0a 0a20 2020 202e          }..    .
+00023fe0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+00023ff0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+00024000: 5365 6c65 6374 7320 6c61 6e67 7561 6765  Selects language
+00024010: 3a0a 0a20 2020 2020 2020 203e 3e3e 2061  :..        >>> a
+00024020: 626a 6164 2e54 7570 6c65 7428 2236 3a34  bjad.Tuplet("6:4
+00024030: 222c 2022 646f 2732 2064 6f64 2720 7265  ", "do'2 dod' re
+00024040: 2722 2c20 6c61 6e67 7561 6765 3d22 6672  '", language="fr
+00024050: 616e c3a7 6169 7322 290a 2020 2020 2020  an..ais").      
+00024060: 2020 5475 706c 6574 2827 363a 3427 2c20    Tuplet('6:4', 
+00024070: 2263 2732 2063 7327 3220 6427 3222 290a  "c'2 cs'2 d'2").
+00024080: 0a20 2020 202e 2e20 2063 6f6e 7461 696e  .    ..  contain
+00024090: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+000240a0: 2020 2020 2020 5475 706c 6574 7320 6361        Tuplets ca
+000240b0: 6e20 6265 2065 6e74 6572 6564 2061 7320  n be entered as 
+000240c0: 4c69 6c79 506f 6e64 2069 6e70 7574 3a0a  LilyPond input:.
+000240d0: 0a20 2020 2020 2020 203e 3e3e 2076 6f69  .        >>> voi
+000240e0: 6365 203d 2061 626a 6164 2e56 6f69 6365  ce = abjad.Voice
+000240f0: 2872 225c 7475 706c 6574 2036 2f34 207b  (r"\tuplet 6/4 {
+00024100: 2063 2734 2064 2720 6527 207d 2229 0a20   c'4 d' e' }"). 
+00024110: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+00024120: 2e73 686f 7728 766f 6963 6529 2023 2064  .show(voice) # d
+00024130: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+00024140: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
+00024150: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
+00024160: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+00024170: 642e 6c69 6c79 706f 6e64 2876 6f69 6365  d.lilypond(voice
+00024180: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00024190: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
+000241a0: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
+000241b0: 2056 6f69 6365 0a20 2020 2020 2020 2020   Voice.         
+000241c0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+000241d0: 2020 2020 205c 7469 6d65 7320 342f 360a       \times 4/6.
+000241e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000241f0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00024200: 2020 2020 2020 6327 340a 2020 2020 2020        c'4.      
+00024210: 2020 2020 2020 2020 2020 2020 2020 6427                d'
+00024220: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+00024230: 2020 2020 2020 6527 340a 2020 2020 2020        e'4.      
+00024240: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00024250: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
+00024260: 2020 203e 3e3e 2076 6f69 6365 203d 2061     >>> voice = a
+00024270: 626a 6164 2e56 6f69 6365 2872 225c 7469  bjad.Voice(r"\ti
+00024280: 6d65 7320 342f 3620 7b20 6327 3420 6427  mes 4/6 { c'4 d'
+00024290: 2065 2720 7d22 290a 2020 2020 2020 2020   e' }").        
+000242a0: 3e3e 3e20 6162 6a61 642e 7368 6f77 2876  >>> abjad.show(v
+000242b0: 6f69 6365 2920 2320 646f 6374 6573 743a  oice) # doctest:
+000242c0: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+000242d0: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+000242e0: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+000242f0: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+00024300: 6f6e 6428 766f 6963 6529 0a20 2020 2020  ond(voice).     
+00024310: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+00024320: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+00024330: 2020 2020 205c 6e65 7720 566f 6963 650a       \new Voice.
+00024340: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00024350: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+00024360: 696d 6573 2034 2f36 0a20 2020 2020 2020  imes 4/6.       
+00024370: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00024380: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00024390: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+000243a0: 2020 2020 2020 2064 2734 0a20 2020 2020         d'4.     
+000243b0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000243c0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+000243d0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+000243e0: 207d 0a0a 2020 2020 2e2e 2020 636f 6e74   }..    ..  cont
+000243f0: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
+00024400: 0a20 2020 2020 2020 203e 3e3e 2074 7570  .        >>> tup
+00024410: 6c65 745f 3120 3d20 6162 6a61 642e 5475  let_1 = abjad.Tu
+00024420: 706c 6574 2828 322c 2033 292c 2022 6327  plet((2, 3), "c'
+00024430: 3420 2820 6427 3420 6527 3420 2922 290a  4 ( d'4 e'4 )").
+00024440: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+00024450: 642e 7477 6561 6b28 7475 706c 6574 5f31  d.tweak(tuplet_1
+00024460: 2c20 7222 5c74 7765 616b 2063 6f6c 6f72  , r"\tweak color
+00024470: 2023 7265 6422 290a 2020 2020 2020 2020   #red").        
+00024480: 3e3e 3e20 6162 6a61 642e 7477 6561 6b28  >>> abjad.tweak(
+00024490: 7475 706c 6574 5f31 2c20 7222 5c74 7765  tuplet_1, r"\twe
+000244a0: 616b 2073 7461 6666 2d70 6164 6469 6e67  ak staff-padding
+000244b0: 2032 2229 0a0a 2020 2020 2020 2020 3e3e   2")..        >>
+000244c0: 3e20 7475 706c 6574 5f32 203d 2061 626a  > tuplet_2 = abj
+000244d0: 6164 2e54 7570 6c65 7428 2832 2c20 3329  ad.Tuplet((2, 3)
+000244e0: 2c20 2263 2734 2028 2064 2734 2065 2734  , "c'4 ( d'4 e'4
+000244f0: 2029 2229 0a20 2020 2020 2020 203e 3e3e   )").        >>>
+00024500: 2061 626a 6164 2e74 7765 616b 2874 7570   abjad.tweak(tup
+00024510: 6c65 745f 322c 2072 225c 7477 6561 6b20  let_2, r"\tweak 
+00024520: 636f 6c6f 7220 2367 7265 656e 2229 0a20  color #green"). 
+00024530: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+00024540: 2e74 7765 616b 2874 7570 6c65 745f 322c  .tweak(tuplet_2,
+00024550: 2072 225c 7477 6561 6b20 7374 6166 662d   r"\tweak staff-
+00024560: 7061 6464 696e 6720 3222 290a 0a20 2020  padding 2")..   
+00024570: 2020 2020 203e 3e3e 2074 7570 6c65 745f       >>> tuplet_
+00024580: 3320 3d20 6162 6a61 642e 5475 706c 6574  3 = abjad.Tuplet
+00024590: 2828 352c 2034 292c 205b 7475 706c 6574  ((5, 4), [tuplet
+000245a0: 5f31 2c20 7475 706c 6574 5f32 5d29 0a20  _1, tuplet_2]). 
+000245b0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+000245c0: 2e74 7765 616b 2874 7570 6c65 745f 332c  .tweak(tuplet_3,
+000245d0: 2072 225c 7477 6561 6b20 636f 6c6f 7220   r"\tweak color 
+000245e0: 2362 6c75 6522 290a 2020 2020 2020 2020  #blue").        
+000245f0: 3e3e 3e20 6162 6a61 642e 7477 6561 6b28  >>> abjad.tweak(
+00024600: 7475 706c 6574 5f33 2c20 7222 5c74 7765  tuplet_3, r"\twe
+00024610: 616b 2073 7461 6666 2d70 6164 6469 6e67  ak staff-padding
+00024620: 2034 2229 0a0a 2020 2020 2020 2020 3e3e   4")..        >>
+00024630: 3e20 7374 6166 6620 3d20 6162 6a61 642e  > staff = abjad.
+00024640: 5374 6166 6628 5b74 7570 6c65 745f 335d  Staff([tuplet_3]
+00024650: 290a 2020 2020 2020 2020 3e3e 3e20 6c65  ).        >>> le
+00024660: 6176 6573 203d 2061 626a 6164 2e73 656c  aves = abjad.sel
+00024670: 6563 742e 6c65 6176 6573 2873 7461 6666  ect.leaves(staff
+00024680: 290a 2020 2020 2020 2020 3e3e 3e20 6162  ).        >>> ab
+00024690: 6a61 642e 6174 7461 6368 2861 626a 6164  jad.attach(abjad
+000246a0: 2e54 696d 6553 6967 6e61 7475 7265 2828  .TimeSignature((
+000246b0: 352c 2034 2929 2c20 6c65 6176 6573 5b30  5, 4)), leaves[0
+000246c0: 5d29 0a20 2020 2020 2020 203e 3e3e 206c  ]).        >>> l
+000246d0: 6974 6572 616c 203d 2061 626a 6164 2e4c  iteral = abjad.L
+000246e0: 696c 7950 6f6e 644c 6974 6572 616c 2872  ilyPondLiteral(r
+000246f0: 275c 7365 7420 7475 706c 6574 4675 6c6c  '\set tupletFull
+00024700: 4c65 6e67 7468 203d 2023 2374 2729 0a20  Length = ##t'). 
+00024710: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+00024720: 2e61 7474 6163 6828 6c69 7465 7261 6c2c  .attach(literal,
+00024730: 2073 7461 6666 290a 2020 2020 2020 2020   staff).        
+00024740: 3e3e 3e20 6162 6a61 642e 7368 6f77 2873  >>> abjad.show(s
+00024750: 7461 6666 2920 2320 646f 6374 6573 743a  taff) # doctest:
+00024760: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+00024770: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+00024780: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+00024790: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+000247a0: 6f6e 6428 7374 6166 6629 0a20 2020 2020  ond(staff).     
+000247b0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+000247c0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+000247d0: 2020 2020 205c 6e65 7720 5374 6166 660a       \new Staff.
+000247e0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+000247f0: 2020 2020 2020 2020 2020 2020 2020 5c73                \s
+00024800: 6574 2074 7570 6c65 7446 756c 6c4c 656e  et tupletFullLen
+00024810: 6774 6820 3d20 2323 740a 2020 2020 2020  gth = ##t.      
+00024820: 2020 2020 2020 2020 2020 5c74 7765 616b            \tweak
+00024830: 2074 6578 7420 2374 7570 6c65 742d 6e75   text #tuplet-nu
+00024840: 6d62 6572 3a3a 6361 6c63 2d66 7261 6374  mber::calc-fract
+00024850: 696f 6e2d 7465 7874 0a20 2020 2020 2020  ion-text.       
+00024860: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
+00024870: 636f 6c6f 7220 2362 6c75 650a 2020 2020  color #blue.    
+00024880: 2020 2020 2020 2020 2020 2020 5c74 7765              \twe
+00024890: 616b 2073 7461 6666 2d70 6164 6469 6e67  ak staff-padding
+000248a0: 2034 0a20 2020 2020 2020 2020 2020 2020   4.             
+000248b0: 2020 205c 7469 6d65 7320 352f 340a 2020     \times 5/4.  
+000248c0: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+000248d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000248e0: 2020 2020 5c74 7765 616b 2063 6f6c 6f72      \tweak color
+000248f0: 2023 7265 640a 2020 2020 2020 2020 2020   #red.          
+00024900: 2020 2020 2020 2020 2020 5c74 7765 616b            \tweak
+00024910: 2073 7461 6666 2d70 6164 6469 6e67 2032   staff-padding 2
+00024920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024930: 2020 2020 205c 7469 6d65 7320 322f 330a       \times 2/3.
+00024940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024950: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00024960: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+00024970: 696d 6520 352f 340a 2020 2020 2020 2020  ime 5/4.        
+00024980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024990: 6327 340a 2020 2020 2020 2020 2020 2020  c'4.            
+000249a0: 2020 2020 2020 2020 2020 2020 280a 2020              (.  
+000249b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000249c0: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
+000249d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000249e0: 2020 6527 340a 2020 2020 2020 2020 2020    e'4.          
+000249f0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+00024a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024a10: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
+00024a20: 2020 2020 2020 2020 2020 5c74 7765 616b            \tweak
+00024a30: 2063 6f6c 6f72 2023 6772 6565 6e0a 2020   color #green.  
+00024a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024a50: 2020 5c74 7765 616b 2073 7461 6666 2d70    \tweak staff-p
+00024a60: 6164 6469 6e67 2032 0a20 2020 2020 2020  adding 2.       
+00024a70: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
+00024a80: 6d65 7320 322f 330a 2020 2020 2020 2020  mes 2/3.        
+00024a90: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00024aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024ab0: 2020 2020 2020 6327 340a 2020 2020 2020        c'4.      
+00024ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024ad0: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+00024ae0: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
+00024af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024b00: 2020 2020 2020 2020 6527 340a 2020 2020          e'4.    
+00024b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024b20: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00024b30: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00024b40: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00024b50: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+00024b60: 2020 2020 202e 2e20 2074 6f64 6f3a 3a20       ..  todo:: 
+00024b70: 5265 706f 7274 204c 696c 7950 6f6e 6420  Report LilyPond 
+00024b80: 6275 6720 7468 6174 2072 6573 756c 7473  bug that results
+00024b90: 2066 726f 6d20 7265 6d6f 7669 6e67 2074   from removing t
+00024ba0: 7570 6c65 7446 756c 6c4c 656e 6774 680a  upletFullLength.
+00024bb0: 2020 2020 2020 2020 2020 2020 696e 2074              in t
+00024bc0: 6865 2065 7861 6d70 6c65 2061 626f 7665  he example above
+00024bd0: 3a20 626c 7565 2074 7570 6c65 7420 6272  : blue tuplet br
+00024be0: 6163 6b65 7420 7368 7269 6e6b 7320 746f  acket shrinks to
+00024bf0: 2065 6e63 6f6d 7061 7373 206f 6e6c 7920   encompass only 
+00024c00: 7468 650a 2020 2020 2020 2020 2020 2020  the.            
+00024c10: 7365 636f 6e64 2075 6e64 6572 6c79 696e  second underlyin
+00024c20: 6720 7475 706c 6574 2e0a 0a20 2020 2022  g tuplet...    "
+00024c30: 2222 0a0a 2020 2020 2323 2320 434c 4153  ""..    ### CLAS
+00024c40: 5320 5641 5249 4142 4c45 5320 2323 230a  S VARIABLES ###.
+00024c50: 0a20 2020 205f 5f64 6f63 756d 656e 7461  .    __documenta
+00024c60: 7469 6f6e 5f73 6563 7469 6f6e 5f5f 203d  tion_section__ =
+00024c70: 2022 436f 6e74 6169 6e65 7273 220a 0a20   "Containers".. 
+00024c80: 2020 205f 5f73 6c6f 7473 5f5f 203d 2028     __slots__ = (
+00024c90: 0a20 2020 2020 2020 2022 5f64 656e 6f6d  .        "_denom
+00024ca0: 696e 6174 6f72 222c 0a20 2020 2020 2020  inator",.       
+00024cb0: 2022 5f66 6f72 6365 5f66 7261 6374 696f   "_force_fractio
+00024cc0: 6e22 2c0a 2020 2020 2020 2020 225f 6869  n",.        "_hi
+00024cd0: 6465 222c 0a20 2020 2020 2020 2022 5f6d  de",.        "_m
+00024ce0: 756c 7469 706c 6965 7222 2c0a 2020 2020  ultiplier",.    
+00024cf0: 2020 2020 2274 7765 616b 7322 2c0a 2020      "tweaks",.  
+00024d00: 2020 290a 0a20 2020 2023 2323 2049 4e49    )..    ### INI
+00024d10: 5449 414c 495a 4552 2023 2323 0a0a 2020  TIALIZER ###..  
+00024d20: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
+00024d30: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+00024d40: 2020 2020 2020 6d75 6c74 6970 6c69 6572        multiplier
+00024d50: 3d22 333a 3222 2c0a 2020 2020 2020 2020  ="3:2",.        
+00024d60: 636f 6d70 6f6e 656e 7473 3d4e 6f6e 652c  components=None,
+00024d70: 0a20 2020 2020 2020 202a 2c0a 2020 2020  .        *,.    
+00024d80: 2020 2020 6465 6e6f 6d69 6e61 746f 723a      denominator:
+00024d90: 2069 6e74 203d 204e 6f6e 652c 0a20 2020   int = None,.   
+00024da0: 2020 2020 2066 6f72 6365 5f66 7261 6374       force_fract
+00024db0: 696f 6e3a 2062 6f6f 6c20 3d20 4661 6c73  ion: bool = Fals
+00024dc0: 652c 0a20 2020 2020 2020 2068 6964 653a  e,.        hide:
+00024dd0: 2062 6f6f 6c20 3d20 4661 6c73 652c 0a20   bool = False,. 
+00024de0: 2020 2020 2020 206c 616e 6775 6167 653a         language:
+00024df0: 2073 7472 203d 2022 656e 676c 6973 6822   str = "english"
+00024e00: 2c0a 2020 2020 2020 2020 7461 673a 205f  ,.        tag: _
+00024e10: 7461 672e 5461 6720 3d20 4e6f 6e65 2c0a  tag.Tag = None,.
+00024e20: 2020 2020 2020 2020 7477 6561 6b73 3a20          tweaks: 
+00024e30: 5f74 7765 616b 732e 5477 6561 6b20 3d20  _tweaks.Tweak = 
+00024e40: 4e6f 6e65 2c0a 2020 2020 2920 2d3e 204e  None,.    ) -> N
+00024e50: 6f6e 653a 0a20 2020 2020 2020 2043 6f6e  one:.        Con
+00024e60: 7461 696e 6572 2e5f 5f69 6e69 745f 5f28  tainer.__init__(
+00024e70: 7365 6c66 2c20 636f 6d70 6f6e 656e 7473  self, components
+00024e80: 2c20 6c61 6e67 7561 6765 3d6c 616e 6775  , language=langu
+00024e90: 6167 652c 2074 6167 3d74 6167 290a 2020  age, tag=tag).  
+00024ea0: 2020 2020 2020 7365 6c66 2e74 7765 616b        self.tweak
+00024eb0: 7320 3d20 2829 0a20 2020 2020 2020 2069  s = ().        i
+00024ec0: 6620 6973 696e 7374 616e 6365 286d 756c  f isinstance(mul
+00024ed0: 7469 706c 6965 722c 2073 7472 2920 616e  tiplier, str) an
+00024ee0: 6420 223a 2220 696e 206d 756c 7469 706c  d ":" in multipl
+00024ef0: 6965 723a 0a20 2020 2020 2020 2020 2020  ier:.           
+00024f00: 2073 7472 696e 6773 203d 206d 756c 7469   strings = multi
+00024f10: 706c 6965 722e 7370 6c69 7428 223a 2229  plier.split(":")
+00024f20: 0a20 2020 2020 2020 2020 2020 206e 756d  .            num
+00024f30: 6265 7273 203d 205b 696e 7428 5f29 2066  bers = [int(_) f
+00024f40: 6f72 205f 2069 6e20 7374 7269 6e67 735d  or _ in strings]
+00024f50: 0a20 2020 2020 2020 2020 2020 206d 756c  .            mul
+00024f60: 7469 706c 6965 7220 3d20 5f64 7572 6174  tiplier = _durat
+00024f70: 696f 6e2e 4e6f 6e72 6564 7563 6564 4672  ion.NonreducedFr
+00024f80: 6163 7469 6f6e 286e 756d 6265 7273 5b31  action(numbers[1
+00024f90: 5d2c 206e 756d 6265 7273 5b30 5d29 0a20  ], numbers[0]). 
+00024fa0: 2020 2020 2020 2073 656c 662e 6d75 6c74         self.mult
+00024fb0: 6970 6c69 6572 203d 206d 756c 7469 706c  iplier = multipl
+00024fc0: 6965 720a 2020 2020 2020 2020 7365 6c66  ier.        self
+00024fd0: 2e64 656e 6f6d 696e 6174 6f72 203d 2064  .denominator = d
+00024fe0: 656e 6f6d 696e 6174 6f72 0a20 2020 2020  enominator.     
+00024ff0: 2020 2073 656c 662e 666f 7263 655f 6672     self.force_fr
+00025000: 6163 7469 6f6e 203d 2066 6f72 6365 5f66  action = force_f
+00025010: 7261 6374 696f 6e0a 2020 2020 2020 2020  raction.        
+00025020: 7365 6c66 2e68 6964 6520 3d20 6869 6465  self.hide = hide
+00025030: 0a0a 2020 2020 2323 2320 5350 4543 4941  ..    ### SPECIA
+00025040: 4c20 4d45 5448 4f44 5320 2323 230a 0a20  L METHODS ###.. 
+00025050: 2020 2064 6566 205f 5f67 6574 6e65 7761     def __getnewa
+00025060: 7267 735f 5f28 7365 6c66 2920 2d3e 2074  rgs__(self) -> t
+00025070: 7570 6c65 3a0a 2020 2020 2020 2020 2222  uple:.        ""
+00025080: 220a 2020 2020 2020 2020 4765 7473 206e  ".        Gets n
+00025090: 6577 2061 7267 756d 656e 7473 206f 6620  ew arguments of 
+000250a0: 7475 706c 6574 2e0a 2020 2020 2020 2020  tuplet..        
+000250b0: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+000250c0: 726e 2028 7365 6c66 2e6d 756c 7469 706c  rn (self.multipl
+000250d0: 6965 722c 290a 0a20 2020 2064 6566 205f  ier,)..    def _
+000250e0: 5f72 6570 725f 5f28 7365 6c66 2920 2d3e  _repr__(self) ->
+000250f0: 2073 7472 3a0a 2020 2020 2020 2020 2222   str:.        ""
+00025100: 220a 2020 2020 2020 2020 4765 7473 2072  ".        Gets r
+00025110: 6570 722e 0a20 2020 2020 2020 2022 2222  epr..        """
+00025120: 0a20 2020 2020 2020 2073 7472 696e 6720  .        string 
+00025130: 3d20 7365 6c66 2e5f 6765 745f 636f 6e74  = self._get_cont
+00025140: 656e 7473 5f73 756d 6d61 7279 2829 0a20  ents_summary(). 
+00025150: 2020 2020 2020 2072 6574 7572 6e20 6622         return f"
+00025160: 7b74 7970 6528 7365 6c66 292e 5f5f 6e61  {type(self).__na
+00025170: 6d65 5f5f 7d28 7b73 656c 662e 636f 6c6f  me__}({self.colo
+00025180: 6e5f 7374 7269 6e67 2172 7d2c 207b 7374  n_string!r}, {st
+00025190: 7269 6e67 2172 7d29 220a 0a20 2020 2023  ring!r})"..    #
+000251a0: 2323 2050 5249 5641 5445 204d 4554 484f  ## PRIVATE METHO
+000251b0: 4453 2023 2323 0a0a 2020 2020 6465 6620  DS ###..    def 
+000251c0: 5f66 6f72 6d61 745f 6166 7465 725f 7369  _format_after_si
+000251d0: 7465 2873 656c 662c 2063 6f6e 7472 6962  te(self, contrib
+000251e0: 7574 696f 6e73 293a 0a20 2020 2020 2020  utions):.       
+000251f0: 2072 6573 756c 7420 3d20 5b5d 0a20 2020   result = [].   
+00025200: 2020 2020 2073 7472 696e 6773 203d 2063       strings = c
+00025210: 6f6e 7472 6962 7574 696f 6e73 2e67 726f  ontributions.gro
+00025220: 625f 7265 7665 7274 730a 2020 2020 2020  b_reverts.      
+00025230: 2020 6966 2073 7472 696e 6773 3a0a 2020    if strings:.  
+00025240: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00025250: 2e61 7070 656e 6428 6622 2520 7b5f 636f  .append(f"% {_co
+00025260: 6e74 7269 6275 7469 6f6e 732e 5479 7065  ntributions.Type
+00025270: 732e 4752 4f42 5f52 4556 4552 5453 2e6e  s.GROB_REVERTS.n
+00025280: 616d 657d 3a22 290a 2020 2020 2020 2020  ame}:").        
+00025290: 2020 2020 7265 7375 6c74 2e65 7874 656e      result.exten
+000252a0: 6428 7374 7269 6e67 7329 0a20 2020 2020  d(strings).     
+000252b0: 2020 2073 7472 696e 6773 203d 2063 6f6e     strings = con
+000252c0: 7472 6962 7574 696f 6e73 2e61 6c70 6861  tributions.alpha
+000252d0: 6265 7469 7a65 2863 6f6e 7472 6962 7574  betize(contribut
+000252e0: 696f 6e73 2e61 6674 6572 2e63 6f6d 6d61  ions.after.comma
+000252f0: 6e64 7329 0a20 2020 2020 2020 2069 6620  nds).        if 
+00025300: 7374 7269 6e67 733a 0a20 2020 2020 2020  strings:.       
+00025310: 2020 2020 2072 6573 756c 742e 6170 7065       result.appe
+00025320: 6e64 2866 2225 207b 5f63 6f6e 7472 6962  nd(f"% {_contrib
+00025330: 7574 696f 6e73 2e54 7970 6573 2e43 4f4d  utions.Types.COM
+00025340: 4d41 4e44 532e 6e61 6d65 7d3a 2229 0a20  MANDS.name}:"). 
+00025350: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00025360: 742e 6578 7465 6e64 2873 7472 696e 6773  t.extend(strings
+00025370: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00025380: 2072 6573 756c 740a 0a20 2020 2064 6566   result..    def
+00025390: 205f 666f 726d 6174 5f62 6566 6f72 655f   _format_before_
+000253a0: 7369 7465 2873 656c 662c 2063 6f6e 7472  site(self, contr
+000253b0: 6962 7574 696f 6e73 293a 0a20 2020 2020  ibutions):.     
+000253c0: 2020 2072 6573 756c 7420 3d20 5b5d 0a20     result = []. 
+000253d0: 2020 2020 2020 2073 7472 696e 6773 203d         strings =
+000253e0: 2063 6f6e 7472 6962 7574 696f 6e73 2e61   contributions.a
+000253f0: 6c70 6861 6265 7469 7a65 2863 6f6e 7472  lphabetize(contr
+00025400: 6962 7574 696f 6e73 2e62 6566 6f72 652e  ibutions.before.
+00025410: 636f 6d6d 616e 6473 290a 2020 2020 2020  commands).      
+00025420: 2020 6966 2073 7472 696e 6773 3a0a 2020    if strings:.  
+00025430: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00025440: 2e61 7070 656e 6428 6622 2520 7b5f 636f  .append(f"% {_co
+00025450: 6e74 7269 6275 7469 6f6e 732e 5479 7065  ntributions.Type
+00025460: 732e 434f 4d4d 414e 4453 2e6e 616d 657d  s.COMMANDS.name}
+00025470: 3a22 290a 2020 2020 2020 2020 2020 2020  :").            
+00025480: 7265 7375 6c74 2e65 7874 656e 6428 7374  result.extend(st
+00025490: 7269 6e67 7329 0a20 2020 2020 2020 2073  rings).        s
+000254a0: 7472 696e 6773 203d 2063 6f6e 7472 6962  trings = contrib
+000254b0: 7574 696f 6e73 2e67 726f 625f 6f76 6572  utions.grob_over
+000254c0: 7269 6465 730a 2020 2020 2020 2020 6966  rides.        if
+000254d0: 2073 7472 696e 6773 3a0a 2020 2020 2020   strings:.      
+000254e0: 2020 2020 2020 7265 7375 6c74 2e61 7070        result.app
+000254f0: 656e 6428 6622 2520 7b5f 636f 6e74 7269  end(f"% {_contri
+00025500: 6275 7469 6f6e 732e 5479 7065 732e 4752  butions.Types.GR
+00025510: 4f42 5f4f 5645 5252 4944 4553 2e6e 616d  OB_OVERRIDES.nam
+00025520: 657d 3a22 290a 2020 2020 2020 2020 2020  e}:").          
+00025530: 2020 7265 7375 6c74 2e65 7874 656e 6428    result.extend(
+00025540: 7374 7269 6e67 7329 0a20 2020 2020 2020  strings).       
+00025550: 2073 7472 696e 6773 203d 2063 6f6e 7472   strings = contr
+00025560: 6962 7574 696f 6e73 2e63 6f6e 7465 7874  ibutions.context
+00025570: 5f73 6574 7469 6e67 730a 2020 2020 2020  _settings.      
+00025580: 2020 6966 2073 7472 696e 6773 3a0a 2020    if strings:.  
+00025590: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+000255a0: 2e61 7070 656e 6428 6622 2520 7b5f 636f  .append(f"% {_co
+000255b0: 6e74 7269 6275 7469 6f6e 732e 5479 7065  ntributions.Type
+000255c0: 732e 434f 4e54 4558 545f 5345 5454 494e  s.CONTEXT_SETTIN
+000255d0: 4753 2e6e 616d 657d 3a22 290a 2020 2020  GS.name}:").    
+000255e0: 2020 2020 2020 2020 7265 7375 6c74 2e65          result.e
+000255f0: 7874 656e 6428 7374 7269 6e67 7329 0a20  xtend(strings). 
+00025600: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00025610: 7375 6c74 0a0a 2020 2020 6465 6620 5f66  sult..    def _f
+00025620: 6f72 6d61 745f 636c 6f73 655f 6272 6163  ormat_close_brac
+00025630: 6b65 7473 2873 656c 6629 3a0a 2020 2020  kets(self):.    
+00025640: 2020 2020 7265 7375 6c74 203d 205b 5d0a      result = [].
+00025650: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00025660: 6d75 6c74 6970 6c69 6572 3a0a 2020 2020  multiplier:.    
+00025670: 2020 2020 2020 2020 7374 7269 6e67 7320          strings 
+00025680: 3d20 5b22 7d22 5d0a 2020 2020 2020 2020  = ["}"].        
+00025690: 2020 2020 6966 2073 656c 662e 7461 6720      if self.tag 
+000256a0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000256b0: 2020 2020 2020 2020 2020 2020 2073 7472               str
+000256c0: 696e 6773 203d 205f 7461 672e 646f 7562  ings = _tag.doub
+000256d0: 6c65 5f74 6167 2873 7472 696e 6773 2c20  le_tag(strings, 
+000256e0: 7365 6c66 2e74 6167 290a 2020 2020 2020  self.tag).      
+000256f0: 2020 2020 2020 7265 7375 6c74 2e65 7874        result.ext
+00025700: 656e 6428 7374 7269 6e67 7329 0a20 2020  end(strings).   
+00025710: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+00025720: 6c74 0a0a 2020 2020 6465 6620 5f66 6f72  lt..    def _for
+00025730: 6d61 745f 636c 6f73 696e 675f 7369 7465  mat_closing_site
+00025740: 2873 656c 662c 2063 6f6e 7472 6962 7574  (self, contribut
+00025750: 696f 6e73 293a 0a20 2020 2020 2020 2072  ions):.        r
+00025760: 6573 756c 7420 3d20 5b5d 0a20 2020 2020  esult = [].     
+00025770: 2020 2073 7472 696e 6773 203d 2063 6f6e     strings = con
+00025780: 7472 6962 7574 696f 6e73 2e61 6c70 6861  tributions.alpha
+00025790: 6265 7469 7a65 2863 6f6e 7472 6962 7574  betize(contribut
+000257a0: 696f 6e73 2e63 6c6f 7369 6e67 2e63 6f6d  ions.closing.com
+000257b0: 6d61 6e64 7329 0a20 2020 2020 2020 2069  mands).        i
+000257c0: 6620 7374 7269 6e67 733a 0a20 2020 2020  f strings:.     
+000257d0: 2020 2020 2020 2072 6573 756c 742e 6170         result.ap
+000257e0: 7065 6e64 2866 2225 207b 5f63 6f6e 7472  pend(f"% {_contr
+000257f0: 6962 7574 696f 6e73 2e54 7970 6573 2e43  ibutions.Types.C
+00025800: 4f4d 4d41 4e44 532e 6e61 6d65 7d3a 2229  OMMANDS.name}:")
+00025810: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00025820: 756c 742e 6578 7465 6e64 2873 7472 696e  ult.extend(strin
+00025830: 6773 290a 2020 2020 2020 2020 7265 7375  gs).        resu
+00025840: 6c74 203d 205f 696e 6465 6e74 5f73 7472  lt = _indent_str
+00025850: 696e 6773 2872 6573 756c 7429 0a20 2020  ings(result).   
+00025860: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+00025870: 6c74 0a0a 2020 2020 6465 6620 5f66 6f72  lt..    def _for
+00025880: 6d61 745f 6c69 6c79 706f 6e64 5f66 7261  mat_lilypond_fra
+00025890: 6374 696f 6e5f 636f 6d6d 616e 645f 7374  ction_command_st
+000258a0: 7269 6e67 2873 656c 6629 3a0a 2020 2020  ring(self):.    
+000258b0: 2020 2020 6966 2073 656c 662e 6869 6465      if self.hide
+000258c0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+000258d0: 7475 726e 2022 220a 2020 2020 2020 2020  turn "".        
+000258e0: 6966 2022 7465 7874 2220 696e 2076 6172  if "text" in var
+000258f0: 7328 5f6f 7665 7272 6964 6573 2e6f 7665  s(_overrides.ove
+00025900: 7272 6964 6528 7365 6c66 292e 5475 706c  rride(self).Tupl
+00025910: 6574 4e75 6d62 6572 293a 0a20 2020 2020  etNumber):.     
+00025920: 2020 2020 2020 2072 6574 7572 6e20 2222         return ""
+00025930: 0a20 2020 2020 2020 2069 6620 280a 2020  .        if (.  
+00025940: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00025950: 7567 6d65 6e74 6174 696f 6e28 290a 2020  ugmentation().  
+00025960: 2020 2020 2020 2020 2020 6f72 206e 6f74            or not
+00025970: 2073 656c 662e 5f69 735f 6479 6164 6963   self._is_dyadic
+00025980: 5f72 6174 696f 6e61 6c28 290a 2020 2020  _rational().    
+00025990: 2020 2020 2020 2020 6f72 2073 656c 662e          or self.
+000259a0: 6d75 6c74 6970 6c69 6572 2e64 656e 6f6d  multiplier.denom
+000259b0: 696e 6174 6f72 203d 3d20 310a 2020 2020  inator == 1.    
+000259c0: 2020 2020 2020 2020 6f72 2073 656c 662e          or self.
+000259d0: 666f 7263 655f 6672 6163 7469 6f6e 0a20  force_fraction. 
+000259e0: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+000259f0: 2020 2020 2020 7265 7475 726e 2072 225c        return r"\
+00025a00: 7477 6561 6b20 7465 7874 2023 7475 706c  tweak text #tupl
+00025a10: 6574 2d6e 756d 6265 723a 3a63 616c 632d  et-number::calc-
+00025a20: 6672 6163 7469 6f6e 2d74 6578 7422 0a20  fraction-text". 
+00025a30: 2020 2020 2020 2072 6574 7572 6e20 2222         return ""
+00025a40: 0a0a 2020 2020 6465 6620 5f66 6f72 6d61  ..    def _forma
+00025a50: 745f 6f70 656e 5f62 7261 636b 6574 735f  t_open_brackets_
+00025a60: 7369 7465 2873 656c 662c 2063 6f6e 7472  site(self, contr
+00025a70: 6962 7574 696f 6e73 293a 0a20 2020 2020  ibutions):.     
+00025a80: 2020 2072 6573 756c 7420 3d20 5b5d 0a20     result = []. 
+00025a90: 2020 2020 2020 2069 6620 7365 6c66 2e6d         if self.m
+00025aa0: 756c 7469 706c 6965 723a 0a20 2020 2020  ultiplier:.     
+00025ab0: 2020 2020 2020 2069 6620 7365 6c66 2e68         if self.h
+00025ac0: 6964 653a 0a20 2020 2020 2020 2020 2020  ide:.           
+00025ad0: 2020 2020 2073 7472 696e 6720 3d20 7365       string = se
+00025ae0: 6c66 2e5f 6765 745f 7363 616c 655f 6475  lf._get_scale_du
+00025af0: 7261 7469 6f6e 735f 636f 6d6d 616e 645f  rations_command_
+00025b00: 7374 7269 6e67 2829 0a20 2020 2020 2020  string().       
+00025b10: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
+00025b20: 7574 696f 6e73 203d 205b 7374 7269 6e67  utions = [string
+00025b30: 2c20 227b 225d 0a20 2020 2020 2020 2020  , "{"].         
+00025b40: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00025b50: 2020 2020 2020 2020 2063 6f6e 7472 6962           contrib
+00025b60: 7574 696f 6e73 203d 205b 5d0a 2020 2020  utions = [].    
+00025b70: 2020 2020 2020 2020 2020 2020 6672 6163              frac
+00025b80: 7469 6f6e 5f63 6f6d 6d61 6e64 5f73 7472  tion_command_str
+00025b90: 696e 6720 3d20 280a 2020 2020 2020 2020  ing = (.        
+00025ba0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00025bb0: 2e5f 666f 726d 6174 5f6c 696c 7970 6f6e  ._format_lilypon
+00025bc0: 645f 6672 6163 7469 6f6e 5f63 6f6d 6d61  d_fraction_comma
+00025bd0: 6e64 5f73 7472 696e 6728 290a 2020 2020  nd_string().    
+00025be0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00025bf0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00025c00: 2066 7261 6374 696f 6e5f 636f 6d6d 616e   fraction_comman
+00025c10: 645f 7374 7269 6e67 3a0a 2020 2020 2020  d_string:.      
+00025c20: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00025c30: 6e74 7269 6275 7469 6f6e 732e 6170 7065  ntributions.appe
+00025c40: 6e64 2866 7261 6374 696f 6e5f 636f 6d6d  nd(fraction_comm
+00025c50: 616e 645f 7374 7269 6e67 290a 2020 2020  and_string).    
+00025c60: 2020 2020 2020 2020 2020 2020 6564 6765              edge
+00025c70: 5f68 6569 6768 745f 7477 6561 6b5f 7374  _height_tweak_st
+00025c80: 7269 6e67 203d 2073 656c 662e 5f67 6574  ring = self._get
+00025c90: 5f65 6467 655f 6865 6967 6874 5f74 7765  _edge_height_twe
+00025ca0: 616b 5f73 7472 696e 6728 290a 2020 2020  ak_string().    
+00025cb0: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+00025cc0: 6467 655f 6865 6967 6874 5f74 7765 616b  dge_height_tweak
+00025cd0: 5f73 7472 696e 673a 0a20 2020 2020 2020  _string:.       
+00025ce0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00025cf0: 7472 6962 7574 696f 6e73 2e61 7070 656e  tributions.appen
+00025d00: 6428 6564 6765 5f68 6569 6768 745f 7477  d(edge_height_tw
+00025d10: 6561 6b5f 7374 7269 6e67 290a 2020 2020  eak_string).    
+00025d20: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00025d30: 7477 6561 6b20 696e 2073 6f72 7465 6428  tweak in sorted(
+00025d40: 7365 6c66 2e74 7765 616b 7329 3a0a 2020  self.tweaks):.  
+00025d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025d60: 2020 7374 7269 6e67 7320 3d20 7477 6561    strings = twea
+00025d70: 6b2e 5f6c 6973 745f 636f 6e74 7269 6275  k._list_contribu
+00025d80: 7469 6f6e 7328 290a 2020 2020 2020 2020  tions().        
+00025d90: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00025da0: 7269 6275 7469 6f6e 732e 6578 7465 6e64  ributions.extend
+00025db0: 2873 7472 696e 6773 290a 2020 2020 2020  (strings).      
+00025dc0: 2020 2020 2020 2020 2020 7469 6d65 735f            times_
+00025dd0: 636f 6d6d 616e 645f 7374 7269 6e67 203d  command_string =
+00025de0: 2073 656c 662e 5f67 6574 5f74 696d 6573   self._get_times
+00025df0: 5f63 6f6d 6d61 6e64 5f73 7472 696e 6728  _command_string(
+00025e00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00025e10: 2020 636f 6e74 7269 6275 7469 6f6e 732e    contributions.
+00025e20: 6170 7065 6e64 2874 696d 6573 5f63 6f6d  append(times_com
+00025e30: 6d61 6e64 5f73 7472 696e 6729 0a20 2020  mand_string).   
+00025e40: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00025e50: 7472 6962 7574 696f 6e73 2e61 7070 656e  tributions.appen
+00025e60: 6428 227b 2229 0a20 2020 2020 2020 2020  d("{").         
+00025e70: 2020 2069 6620 7365 6c66 2e74 6167 2069     if self.tag i
+00025e80: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00025e90: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00025ea0: 7269 6275 7469 6f6e 7320 3d20 5f74 6167  ributions = _tag
+00025eb0: 2e64 6f75 626c 655f 7461 6728 636f 6e74  .double_tag(cont
+00025ec0: 7269 6275 7469 6f6e 732c 2073 656c 662e  ributions, self.
+00025ed0: 7461 6729 0a20 2020 2020 2020 2020 2020  tag).           
+00025ee0: 2072 6573 756c 742e 6578 7465 6e64 2863   result.extend(c
+00025ef0: 6f6e 7472 6962 7574 696f 6e73 290a 2020  ontributions).  
+00025f00: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+00025f10: 756c 740a 0a20 2020 2064 6566 205f 666f  ult..    def _fo
+00025f20: 726d 6174 5f6f 7065 6e69 6e67 5f73 6974  rmat_opening_sit
+00025f30: 6528 7365 6c66 2c20 636f 6e74 7269 6275  e(self, contribu
+00025f40: 7469 6f6e 7329 3a0a 2020 2020 2020 2020  tions):.        
+00025f50: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
+00025f60: 2020 2020 7374 7269 6e67 7320 3d20 636f      strings = co
+00025f70: 6e74 7269 6275 7469 6f6e 732e 616c 7068  ntributions.alph
+00025f80: 6162 6574 697a 6528 636f 6e74 7269 6275  abetize(contribu
+00025f90: 7469 6f6e 732e 6f70 656e 696e 672e 636f  tions.opening.co
+00025fa0: 6d6d 616e 6473 290a 2020 2020 2020 2020  mmands).        
+00025fb0: 6966 2073 7472 696e 6773 3a0a 2020 2020  if strings:.    
+00025fc0: 2020 2020 2020 2020 7265 7375 6c74 2e61          result.a
+00025fd0: 7070 656e 6428 6622 2520 7b5f 636f 6e74  ppend(f"% {_cont
+00025fe0: 7269 6275 7469 6f6e 732e 5479 7065 732e  ributions.Types.
+00025ff0: 434f 4d4d 414e 4453 2e6e 616d 657d 3a22  COMMANDS.name}:"
+00026000: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+00026010: 7375 6c74 2e65 7874 656e 6428 7374 7269  sult.extend(stri
+00026020: 6e67 7329 0a20 2020 2020 2020 2072 6573  ngs).        res
+00026030: 756c 7420 3d20 5f69 6e64 656e 745f 7374  ult = _indent_st
+00026040: 7269 6e67 7328 7265 7375 6c74 290a 2020  rings(result).  
+00026050: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+00026060: 756c 740a 0a20 2020 2064 6566 205f 6765  ult..    def _ge
+00026070: 745f 636f 6d70 6163 745f 7265 7072 6573  t_compact_repres
+00026080: 656e 7461 7469 6f6e 2873 656c 6629 3a0a  entation(self):.
+00026090: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
+000260a0: 656c 663a 0a20 2020 2020 2020 2020 2020  elf:.           
+000260b0: 2072 6574 7572 6e20 6622 7b7b 207b 7365   return f"{{ {se
+000260c0: 6c66 2e6d 756c 7469 706c 6965 7221 737d  lf.multiplier!s}
+000260d0: 207d 7d22 0a20 2020 2020 2020 2072 6574   }}".        ret
+000260e0: 7572 6e20 6622 7b7b 207b 7365 6c66 2e6d  urn f"{{ {self.m
+000260f0: 756c 7469 706c 6965 7221 737d 207b 7365  ultiplier!s} {se
+00026100: 6c66 2e5f 6765 745f 636f 6e74 656e 7473  lf._get_contents
+00026110: 5f73 756d 6d61 7279 2829 7d20 7d7d 220a  _summary()} }}".
+00026120: 0a20 2020 2064 6566 205f 6765 745f 6564  .    def _get_ed
+00026130: 6765 5f68 6569 6768 745f 7477 6561 6b5f  ge_height_tweak_
+00026140: 7374 7269 6e67 2873 656c 6629 3a0a 2020  string(self):.  
+00026150: 2020 2020 2020 6475 7261 7469 6f6e 203d        duration =
+00026160: 2073 656c 662e 5f67 6574 5f70 7265 7072   self._get_prepr
+00026170: 6f6c 6174 6564 5f64 7572 6174 696f 6e28  olated_duration(
+00026180: 290a 2020 2020 2020 2020 6465 6e6f 6d69  ).        denomi
+00026190: 6e61 746f 7220 3d20 6475 7261 7469 6f6e  nator = duration
+000261a0: 2e64 656e 6f6d 696e 6174 6f72 0a20 2020  .denominator.   
+000261b0: 2020 2020 2069 6620 6e6f 7420 5f6d 6174       if not _mat
+000261c0: 682e 6973 5f6e 6f6e 6e65 6761 7469 7665  h.is_nonnegative
+000261d0: 5f69 6e74 6567 6572 5f70 6f77 6572 5f6f  _integer_power_o
+000261e0: 665f 7477 6f28 6465 6e6f 6d69 6e61 746f  f_two(denominato
+000261f0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+00026200: 7265 7475 726e 2072 225c 7477 6561 6b20  return r"\tweak 
+00026210: 6564 6765 2d68 6569 6768 7420 2327 2830  edge-height #'(0
+00026220: 2e37 202e 2030 2922 0a0a 2020 2020 6465  .7 . 0)"..    de
+00026230: 6620 5f67 6574 5f6d 756c 7469 706c 6965  f _get_multiplie
+00026240: 725f 6672 6163 7469 6f6e 5f73 7472 696e  r_fraction_strin
+00026250: 6728 7365 6c66 293a 0a20 2020 2020 2020  g(self):.       
+00026260: 2069 6620 7365 6c66 2e64 656e 6f6d 696e   if self.denomin
+00026270: 6174 6f72 2069 7320 6e6f 7420 4e6f 6e65  ator is not None
+00026280: 3a0a 2020 2020 2020 2020 2020 2020 696e  :.            in
+00026290: 7665 7273 655f 6d75 6c74 6970 6c69 6572  verse_multiplier
+000262a0: 203d 205f 6475 7261 7469 6f6e 2e4d 756c   = _duration.Mul
+000262b0: 7469 706c 6965 7228 0a20 2020 2020 2020  tiplier(.       
+000262c0: 2020 2020 2020 2020 2073 656c 662e 6d75           self.mu
+000262d0: 6c74 6970 6c69 6572 2e64 656e 6f6d 696e  ltiplier.denomin
+000262e0: 6174 6f72 2c20 7365 6c66 2e6d 756c 7469  ator, self.multi
+000262f0: 706c 6965 722e 6e75 6d65 7261 746f 720a  plier.numerator.
+00026300: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00026310: 2020 2020 2020 2020 2020 6e6f 6e72 6564            nonred
+00026320: 7563 6564 5f66 7261 6374 696f 6e20 3d20  uced_fraction = 
+00026330: 5f64 7572 6174 696f 6e2e 4e6f 6e72 6564  _duration.Nonred
+00026340: 7563 6564 4672 6163 7469 6f6e 2869 6e76  ucedFraction(inv
+00026350: 6572 7365 5f6d 756c 7469 706c 6965 7229  erse_multiplier)
+00026360: 0a20 2020 2020 2020 2020 2020 206e 6f6e  .            non
+00026370: 7265 6475 6365 645f 6672 6163 7469 6f6e  reduced_fraction
+00026380: 203d 206e 6f6e 7265 6475 6365 645f 6672   = nonreduced_fr
+00026390: 6163 7469 6f6e 2e77 6974 685f 6465 6e6f  action.with_deno
+000263a0: 6d69 6e61 746f 7228 7365 6c66 2e64 656e  minator(self.den
+000263b0: 6f6d 696e 6174 6f72 290a 2020 2020 2020  ominator).      
+000263c0: 2020 2020 2020 6465 6e6f 6d69 6e61 746f        denominato
+000263d0: 722c 206e 756d 6572 6174 6f72 203d 206e  r, numerator = n
+000263e0: 6f6e 7265 6475 6365 645f 6672 6163 7469  onreduced_fracti
+000263f0: 6f6e 2e70 6169 720a 2020 2020 2020 2020  on.pair.        
+00026400: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00026410: 2020 6e75 6d65 7261 746f 7220 3d20 7365    numerator = se
+00026420: 6c66 2e6d 756c 7469 706c 6965 722e 6e75  lf.multiplier.nu
+00026430: 6d65 7261 746f 720a 2020 2020 2020 2020  merator.        
+00026440: 2020 2020 6465 6e6f 6d69 6e61 746f 7220      denominator 
+00026450: 3d20 7365 6c66 2e6d 756c 7469 706c 6965  = self.multiplie
+00026460: 722e 6465 6e6f 6d69 6e61 746f 720a 2020  r.denominator.  
+00026470: 2020 2020 2020 7265 7475 726e 2066 227b        return f"{
+00026480: 6e75 6d65 7261 746f 727d 2f7b 6465 6e6f  numerator}/{deno
+00026490: 6d69 6e61 746f 727d 220a 0a20 2020 2064  minator}"..    d
+000264a0: 6566 205f 6973 5f64 7961 6469 635f 7261  ef _is_dyadic_ra
+000264b0: 7469 6f6e 616c 2873 656c 6629 3a0a 2020  tional(self):.  
+000264c0: 2020 2020 2020 6966 2073 656c 662e 6d75        if self.mu
+000264d0: 6c74 6970 6c69 6572 3a0a 2020 2020 2020  ltiplier:.      
+000264e0: 2020 2020 2020 6e75 6d65 7261 746f 7220        numerator 
+000264f0: 3d20 7365 6c66 2e6d 756c 7469 706c 6965  = self.multiplie
+00026500: 722e 6e75 6d65 7261 746f 720a 2020 2020  r.numerator.    
+00026510: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+00026520: 6d61 7468 2e69 735f 6e6f 6e6e 6567 6174  math.is_nonnegat
+00026530: 6976 655f 696e 7465 6765 725f 706f 7765  ive_integer_powe
+00026540: 725f 6f66 5f74 776f 286e 756d 6572 6174  r_of_two(numerat
+00026550: 6f72 290a 2020 2020 2020 2020 656c 7365  or).        else
+00026560: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00026570: 7475 726e 2054 7275 650a 0a20 2020 2064  turn True..    d
+00026580: 6566 205f 6765 745f 7072 6570 726f 6c61  ef _get_preprola
+00026590: 7465 645f 6475 7261 7469 6f6e 2873 656c  ted_duration(sel
+000265a0: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
+000265b0: 726e 2073 656c 662e 6d75 6c74 6970 6c69  rn self.multipli
+000265c0: 6564 5f64 7572 6174 696f 6e0a 0a20 2020  ed_duration..   
+000265d0: 2064 6566 205f 6765 745f 7261 7469 6f5f   def _get_ratio_
+000265e0: 7374 7269 6e67 2873 656c 6629 3a0a 2020  string(self):.  
+000265f0: 2020 2020 2020 6d75 6c74 6970 6c69 6572        multiplier
+00026600: 203d 2073 656c 662e 6d75 6c74 6970 6c69   = self.multipli
+00026610: 6572 0a20 2020 2020 2020 2069 6620 6d75  er.        if mu
+00026620: 6c74 6970 6c69 6572 2069 7320 6e6f 7420  ltiplier is not 
+00026630: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00026640: 2020 6e75 6d65 7261 746f 7220 3d20 6d75    numerator = mu
+00026650: 6c74 6970 6c69 6572 2e6e 756d 6572 6174  ltiplier.numerat
+00026660: 6f72 0a20 2020 2020 2020 2020 2020 2064  or.            d
+00026670: 656e 6f6d 696e 6174 6f72 203d 206d 756c  enominator = mul
+00026680: 7469 706c 6965 722e 6465 6e6f 6d69 6e61  tiplier.denomina
+00026690: 746f 720a 2020 2020 2020 2020 2020 2020  tor.            
+000266a0: 7261 7469 6f5f 7374 7269 6e67 203d 2066  ratio_string = f
+000266b0: 227b 6465 6e6f 6d69 6e61 746f 727d 3a7b  "{denominator}:{
+000266c0: 6e75 6d65 7261 746f 727d 220a 2020 2020  numerator}".    
+000266d0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+000266e0: 6174 696f 5f73 7472 696e 670a 2020 2020  atio_string.    
+000266f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00026700: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+00026710: 650a 0a20 2020 2064 6566 205f 6765 745f  e..    def _get_
+00026720: 7363 616c 655f 6475 7261 7469 6f6e 735f  scale_durations_
+00026730: 636f 6d6d 616e 645f 7374 7269 6e67 2873  command_string(s
+00026740: 656c 6629 3a0a 2020 2020 2020 2020 6d75  elf):.        mu
+00026750: 6c74 6970 6c69 6572 203d 205f 6475 7261  ltiplier = _dura
+00026760: 7469 6f6e 2e4d 756c 7469 706c 6965 7228  tion.Multiplier(
+00026770: 7365 6c66 2e6d 756c 7469 706c 6965 7229  self.multiplier)
+00026780: 0a20 2020 2020 2020 206e 756d 6572 6174  .        numerat
+00026790: 6f72 203d 206d 756c 7469 706c 6965 722e  or = multiplier.
+000267a0: 6e75 6d65 7261 746f 720a 2020 2020 2020  numerator.      
+000267b0: 2020 6465 6e6f 6d69 6e61 746f 7220 3d20    denominator = 
+000267c0: 6d75 6c74 6970 6c69 6572 2e64 656e 6f6d  multiplier.denom
+000267d0: 696e 6174 6f72 0a20 2020 2020 2020 2073  inator.        s
+000267e0: 7472 696e 6720 3d20 7266 225c 7363 616c  tring = rf"\scal
+000267f0: 6544 7572 6174 696f 6e73 2023 2728 7b6e  eDurations #'({n
+00026800: 756d 6572 6174 6f72 7d20 2e20 7b64 656e  umerator} . {den
+00026810: 6f6d 696e 6174 6f72 7d29 220a 2020 2020  ominator})".    
+00026820: 2020 2020 7265 7475 726e 2073 7472 696e      return strin
+00026830: 670a 0a20 2020 2064 6566 205f 6765 745f  g..    def _get_
+00026840: 7375 6d6d 6172 7928 7365 6c66 293a 0a20  summary(self):. 
+00026850: 2020 2020 2020 2069 6620 3020 3c20 6c65         if 0 < le
+00026860: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
+00026870: 2020 2020 2072 6574 7572 6e20 222c 2022       return ", "
+00026880: 2e6a 6f69 6e28 5b73 7472 285f 2920 666f  .join([str(_) fo
+00026890: 7220 5f20 696e 2073 656c 662e 636f 6d70  r _ in self.comp
+000268a0: 6f6e 656e 7473 5d29 0a20 2020 2020 2020  onents]).       
+000268b0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000268c0: 2020 2072 6574 7572 6e20 2222 0a0a 2020     return ""..  
+000268d0: 2020 6465 6620 5f67 6574 5f74 696d 6573    def _get_times
+000268e0: 5f63 6f6d 6d61 6e64 5f73 7472 696e 6728  _command_string(
+000268f0: 7365 6c66 293a 0a20 2020 2020 2020 2073  self):.        s
+00026900: 7472 696e 6720 3d20 7266 225c 7469 6d65  tring = rf"\time
+00026910: 7320 7b73 656c 662e 5f67 6574 5f6d 756c  s {self._get_mul
+00026920: 7469 706c 6965 725f 6672 6163 7469 6f6e  tiplier_fraction
+00026930: 5f73 7472 696e 6728 297d 220a 2020 2020  _string()}".    
+00026940: 2020 2020 7265 7475 726e 2073 7472 696e      return strin
+00026950: 670a 0a20 2020 2064 6566 205f 7363 616c  g..    def _scal
+00026960: 6528 7365 6c66 2c20 6d75 6c74 6970 6c69  e(self, multipli
+00026970: 6572 293a 0a20 2020 2020 2020 206d 756c  er):.        mul
+00026980: 7469 706c 6965 7220 3d20 5f64 7572 6174  tiplier = _durat
+00026990: 696f 6e2e 4d75 6c74 6970 6c69 6572 286d  ion.Multiplier(m
+000269a0: 756c 7469 706c 6965 7229 0a20 2020 2020  ultiplier).     
+000269b0: 2020 2066 6f72 2063 6f6d 706f 6e65 6e74     for component
+000269c0: 2069 6e20 7365 6c66 5b3a 5d3a 0a20 2020   in self[:]:.   
+000269d0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+000269e0: 7374 616e 6365 2863 6f6d 706f 6e65 6e74  stance(component
+000269f0: 2c20 4c65 6166 293a 0a20 2020 2020 2020  , Leaf):.       
+00026a00: 2020 2020 2020 2020 2063 6f6d 706f 6e65           compone
+00026a10: 6e74 2e5f 7363 616c 6528 6d75 6c74 6970  nt._scale(multip
+00026a20: 6c69 6572 290a 2020 2020 2020 2020 7365  lier).        se
+00026a30: 6c66 2e6e 6f72 6d61 6c69 7a65 5f6d 756c  lf.normalize_mul
+00026a40: 7469 706c 6965 7228 290a 0a20 2020 2023  tiplier()..    #
+00026a50: 2323 2050 5542 4c49 4320 5052 4f50 4552  ## PUBLIC PROPER
+00026a60: 5449 4553 2023 2323 0a0a 2020 2020 4070  TIES ###..    @p
+00026a70: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+00026a80: 636f 6c6f 6e5f 7374 7269 6e67 2873 656c  colon_string(sel
+00026a90: 6629 202d 3e20 7374 723a 0a20 2020 2020  f) -> str:.     
+00026aa0: 2020 2072 2222 220a 2020 2020 2020 2020     r""".        
+00026ab0: 4765 7473 2063 6f6c 6f6e 2073 7472 696e  Gets colon strin
+00026ac0: 672e 0a0a 2020 2020 2020 2020 2e2e 2020  g...        ..  
+00026ad0: 636f 6e74 6169 6e65 7220 6578 616d 706c  container exampl
+00026ae0: 650a 0a20 2020 2020 2020 2020 2020 203e  e..            >
+00026af0: 3e3e 2074 7570 6c65 7420 3d20 6162 6a61  >> tuplet = abja
+00026b00: 642e 5475 706c 6574 2822 333a 3222 2c20  d.Tuplet("3:2", 
+00026b10: 2263 2734 2064 2720 6527 2229 0a20 2020  "c'4 d' e'").   
+00026b20: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
+00026b30: 6164 2e73 686f 7728 7475 706c 6574 2920  ad.show(tuplet) 
+00026b40: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
+00026b50: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
+00026b60: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
+00026b70: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+00026b80: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+00026b90: 7970 6f6e 6428 7475 706c 6574 290a 2020  ypond(tuplet).  
+00026ba0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+00026bb0: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
+00026bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026bd0: 5c74 696d 6573 2032 2f33 0a20 2020 2020  \times 2/3.     
+00026be0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00026bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026c00: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
+00026c10: 2020 2020 2020 2020 2064 2734 0a20 2020           d'4.   
+00026c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026c30: 2065 2734 0a20 2020 2020 2020 2020 2020   e'4.           
+00026c40: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
+00026c50: 2020 2020 3e3e 3e20 7475 706c 6574 2e63      >>> tuplet.c
+00026c60: 6f6c 6f6e 5f73 7472 696e 670a 2020 2020  olon_string.    
+00026c70: 2020 2020 2020 2020 2733 3a32 270a 0a20          '3:2'.. 
+00026c80: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00026c90: 2020 206e 756d 6572 6174 6f72 2c20 6465     numerator, de
+00026ca0: 6e6f 6d69 6e61 746f 7220 3d20 7365 6c66  nominator = self
+00026cb0: 2e6d 756c 7469 706c 6965 722e 7061 6972  .multiplier.pair
+00026cc0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00026cd0: 6622 7b64 656e 6f6d 696e 6174 6f72 7d3a  f"{denominator}:
+00026ce0: 7b6e 756d 6572 6174 6f72 7d22 0a0a 2020  {numerator}"..  
+00026cf0: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
+00026d00: 6465 6620 6465 6e6f 6d69 6e61 746f 7228  def denominator(
+00026d10: 7365 6c66 2920 2d3e 2069 6e74 207c 204e  self) -> int | N
+00026d20: 6f6e 653a 0a20 2020 2020 2020 2072 2222  one:.        r""
+00026d30: 220a 2020 2020 2020 2020 4765 7473 2061  ".        Gets a
+00026d40: 6e64 2073 6574 7320 7072 6566 6572 7265  nd sets preferre
+00026d50: 6420 6465 6e6f 6d69 6e61 746f 7220 6f66  d denominator of
+00026d60: 2074 7570 6c65 742e 0a0a 2020 2020 2020   tuplet...      
+00026d70: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
+00026d80: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
+00026d90: 2020 2020 2020 2047 6574 7320 7072 6566         Gets pref
+00026da0: 6572 7265 6420 6465 6e6f 6d69 6e61 746f  erred denominato
+00026db0: 7220 6f66 2074 7570 6c65 743a 0a0a 2020  r of tuplet:..  
+00026dc0: 2020 2020 2020 2020 2020 3e3e 3e20 7475            >>> tu
+00026dd0: 706c 6574 203d 2061 626a 6164 2e54 7570  plet = abjad.Tup
+00026de0: 6c65 7428 2233 3a32 222c 2022 6327 3820  let("3:2", "c'8 
+00026df0: 6427 3820 6527 3822 290a 2020 2020 2020  d'8 e'8").      
+00026e00: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
+00026e10: 2e64 656e 6f6d 696e 6174 6f72 2069 7320  .denominator is 
+00026e20: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+00026e30: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
+00026e40: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+00026e50: 2874 7570 6c65 7429 2023 2064 6f63 7465  (tuplet) # docte
+00026e60: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+00026e70: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
+00026e80: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
+00026e90: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
+00026ea0: 6162 6a61 642e 6c69 6c79 706f 6e64 2874  abjad.lilypond(t
+00026eb0: 7570 6c65 7429 0a20 2020 2020 2020 2020  uplet).         
+00026ec0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+00026ed0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+00026ee0: 2020 2020 2020 2020 205c 7469 6d65 7320           \times 
+00026ef0: 322f 330a 2020 2020 2020 2020 2020 2020  2/3.            
+00026f00: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00026f10: 2020 2020 2020 2020 2020 6327 380a 2020            c'8.  
+00026f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026f30: 2020 6427 380a 2020 2020 2020 2020 2020    d'8.          
+00026f40: 2020 2020 2020 2020 2020 6527 380a 2020            e'8.  
+00026f50: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+00026f60: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
+00026f70: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
+00026f80: 0a0a 2020 2020 2020 2020 2020 2020 5365  ..            Se
+00026f90: 7473 2070 7265 6665 7272 6564 2064 656e  ts preferred den
+00026fa0: 6f6d 696e 6174 6f72 206f 6620 7475 706c  ominator of tupl
+00026fb0: 6574 3a0a 0a20 2020 2020 2020 2020 2020  et:..           
+00026fc0: 203e 3e3e 2074 7570 6c65 7420 3d20 6162   >>> tuplet = ab
+00026fd0: 6a61 642e 5475 706c 6574 2822 333a 3222  jad.Tuplet("3:2"
+00026fe0: 2c20 2263 2738 2064 2738 2065 2738 2229  , "c'8 d'8 e'8")
+00026ff0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00027000: 2061 626a 6164 2e73 686f 7728 7475 706c   abjad.show(tupl
+00027010: 6574 2920 2320 646f 6374 6573 743a 202b  et) # doctest: +
+00027020: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
+00027030: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+00027040: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+00027050: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+00027060: 2e6c 696c 7970 6f6e 6428 7475 706c 6574  .lilypond(tuplet
+00027070: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00027080: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+00027090: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+000270a0: 2020 2020 5c74 696d 6573 2032 2f33 0a20      \times 2/3. 
+000270b0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+000270c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000270d0: 2020 2020 2063 2738 0a20 2020 2020 2020       c'8.       
+000270e0: 2020 2020 2020 2020 2020 2020 2064 2738               d'8
+000270f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027100: 2020 2020 2065 2738 0a20 2020 2020 2020       e'8.       
+00027110: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+00027120: 2020 2020 2020 2020 3e3e 3e20 7475 706c          >>> tupl
+00027130: 6574 2e64 656e 6f6d 696e 6174 6f72 203d  et.denominator =
+00027140: 2034 0a20 2020 2020 2020 2020 2020 203e   4.            >
+00027150: 3e3e 2061 626a 6164 2e73 686f 7728 7475  >> abjad.show(tu
+00027160: 706c 6574 2920 2320 646f 6374 6573 743a  plet) # doctest:
+00027170: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+00027180: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
+00027190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000271a0: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+000271b0: 6164 2e6c 696c 7970 6f6e 6428 7475 706c  ad.lilypond(tupl
+000271c0: 6574 290a 2020 2020 2020 2020 2020 2020  et).            
+000271d0: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+000271e0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+000271f0: 2020 2020 2020 5c74 696d 6573 2034 2f36        \times 4/6
+00027200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027210: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00027220: 2020 2020 2020 2063 2738 0a20 2020 2020         c'8.     
+00027230: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00027240: 2738 0a20 2020 2020 2020 2020 2020 2020  '8.             
+00027250: 2020 2020 2020 2065 2738 0a20 2020 2020         e'8.     
+00027260: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
+00027270: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00027280: 2020 7265 7475 726e 2073 656c 662e 5f64    return self._d
+00027290: 656e 6f6d 696e 6174 6f72 0a0a 2020 2020  enominator..    
+000272a0: 4064 656e 6f6d 696e 6174 6f72 2e73 6574  @denominator.set
+000272b0: 7465 720a 2020 2020 6465 6620 6465 6e6f  ter.    def deno
+000272c0: 6d69 6e61 746f 7228 7365 6c66 2c20 6172  minator(self, ar
+000272d0: 6775 6d65 6e74 293a 0a20 2020 2020 2020  gument):.       
+000272e0: 2069 6620 6973 696e 7374 616e 6365 2861   if isinstance(a
+000272f0: 7267 756d 656e 742c 2069 6e74 293a 0a20  rgument, int):. 
+00027300: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00027310: 7420 3020 3c20 6172 6775 6d65 6e74 3a0a  t 0 < argument:.
+00027320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027330: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+00027340: 2861 7267 756d 656e 7429 0a20 2020 2020  (argument).     
+00027350: 2020 2065 6c69 6620 6e6f 7420 6973 696e     elif not isin
+00027360: 7374 616e 6365 2861 7267 756d 656e 742c  stance(argument,
+00027370: 2074 7970 6528 4e6f 6e65 2929 3a0a 2020   type(None)):.  
+00027380: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00027390: 5479 7065 4572 726f 7228 6172 6775 6d65  TypeError(argume
+000273a0: 6e74 290a 2020 2020 2020 2020 7365 6c66  nt).        self
+000273b0: 2e5f 6465 6e6f 6d69 6e61 746f 7220 3d20  ._denominator = 
+000273c0: 6172 6775 6d65 6e74 0a0a 2020 2020 4070  argument..    @p
+000273d0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+000273e0: 666f 7263 655f 6672 6163 7469 6f6e 2873  force_fraction(s
+000273f0: 656c 6629 202d 3e20 626f 6f6c 207c 204e  elf) -> bool | N
+00027400: 6f6e 653a 0a20 2020 2020 2020 2072 2222  one:.        r""
+00027410: 220a 2020 2020 2020 2020 4765 7473 2061  ".        Gets a
+00027420: 6e64 2073 6574 7320 666f 7263 6520 6672  nd sets force fr
+00027430: 6163 7469 6f6e 2066 6c61 672e 0a0a 2020  action flag...  
+00027440: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
+00027450: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
+00027460: 2020 2020 2020 2020 2020 2054 6f20 696c             To il
+00027470: 6c75 7374 7261 7465 2074 6865 2065 6666  lustrate the eff
+00027480: 6563 7420 6f66 2041 626a 6164 2773 2066  ect of Abjad's f
+00027490: 6f72 6365 2066 7261 6374 696f 6e20 7072  orce fraction pr
+000274a0: 6f70 6572 7479 2c20 7765 2063 616e 0a20  operty, we can. 
+000274b0: 2020 2020 2020 2020 2020 2074 656d 706f             tempo
+000274c0: 7261 7269 6c79 2072 6573 746f 7265 204c  rarily restore L
+000274d0: 696c 7950 6f6e 6427 7320 6465 6661 756c  ilyPond's defaul
+000274e0: 7420 7475 706c 6574 206e 756d 6265 7220  t tuplet number 
+000274f0: 666f 726d 6174 7469 6e67 0a20 2020 2020  formatting.     
+00027500: 2020 2020 2020 206c 696b 6520 7468 6973         like this
+00027510: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
+00027520: 3e3e 2073 7461 6666 203d 2061 626a 6164  >> staff = abjad
+00027530: 2e53 7461 6666 2829 0a20 2020 2020 2020  .Staff().       
+00027540: 2020 2020 203e 3e3e 2073 7461 6666 2e61       >>> staff.a
+00027550: 7070 656e 6428 6162 6a61 642e 5475 706c  ppend(abjad.Tupl
+00027560: 6574 2828 322c 2033 292c 2022 6327 3420  et((2, 3), "c'4 
+00027570: 6427 2065 2722 2929 0a20 2020 2020 2020  d' e'")).       
+00027580: 2020 2020 203e 3e3e 2073 7461 6666 2e61       >>> staff.a
+00027590: 7070 656e 6428 6162 6a61 642e 5475 706c  ppend(abjad.Tupl
+000275a0: 6574 2828 322c 2033 292c 2022 6327 3420  et((2, 3), "c'4 
+000275b0: 6427 2065 2722 2929 0a20 2020 2020 2020  d' e'")).       
+000275c0: 2020 2020 203e 3e3e 2073 7461 6666 2e61       >>> staff.a
+000275d0: 7070 656e 6428 6162 6a61 642e 5475 706c  ppend(abjad.Tupl
+000275e0: 6574 2828 322c 2033 292c 2022 6327 3420  et((2, 3), "c'4 
+000275f0: 6427 2065 2722 2929 0a20 2020 2020 2020  d' e'")).       
+00027600: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+00027610: 3d20 2723 7475 706c 6574 2d6e 756d 6265  = '#tuplet-numbe
+00027620: 723a 3a63 616c 632d 6465 6e6f 6d69 6e61  r::calc-denomina
+00027630: 746f 722d 7465 7874 270a 2020 2020 2020  tor-text'.      
+00027640: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+00027650: 6f76 6572 7269 6465 2873 7461 6666 292e  override(staff).
+00027660: 5475 706c 6574 4e75 6d62 6572 2e74 6578  TupletNumber.tex
+00027670: 7420 3d20 7374 7269 6e67 0a20 2020 2020  t = string.     
+00027680: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+00027690: 2e73 686f 7728 7374 6166 6629 2023 2064  .show(staff) # d
+000276a0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+000276b0: 2020 2020 2020 2020 2020 202e 2e20 2064             ..  d
+000276c0: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
+000276d0: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+000276e0: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+000276f0: 6e64 2873 7461 6666 290a 2020 2020 2020  nd(staff).      
+00027700: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
+00027710: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+00027720: 2020 2020 2020 2020 2020 2020 5c6e 6577              \new
+00027730: 2053 7461 6666 0a20 2020 2020 2020 2020   Staff.         
+00027740: 2020 2020 2020 205c 7769 7468 0a20 2020         \with.   
+00027750: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
 00027760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027770: 2020 2020 2020 2020 2020 2020 2020 696e                in
-00027780: 6465 6e74 203d 2030 0a20 2020 2020 2020  dent = 0.       
-00027790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000277a0: 2020 2020 2020 2020 2072 6167 6765 642d           ragged-
-000277b0: 7269 6768 7420 3d20 2323 740a 2020 2020  right = ##t.    
-000277c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000277d0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-000277e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000277f0: 2020 7d20 7d0a 2020 2020 2020 2020 2020    } }.          
-00027800: 2020 2020 2020 2020 2020 5c74 696d 6573            \times
-00027810: 2032 2f33 0a20 2020 2020 2020 2020 2020   2/3.           
-00027820: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00027770: 2020 205c 6f76 6572 7269 6465 2054 7570     \override Tup
+00027780: 6c65 744e 756d 6265 722e 7465 7874 203d  letNumber.text =
+00027790: 2023 7475 706c 6574 2d6e 756d 6265 723a   #tuplet-number:
+000277a0: 3a63 616c 632d 6465 6e6f 6d69 6e61 746f  :calc-denominato
+000277b0: 722d 7465 7874 0a20 2020 2020 2020 2020  r-text.         
+000277c0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+000277d0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+000277e0: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+000277f0: 7469 6d65 7320 322f 330a 2020 2020 2020  times 2/3.      
+00027800: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+00027810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027820: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
 00027830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027840: 2020 2063 2738 0a20 2020 2020 2020 2020     c'8.         
-00027850: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00027860: 2738 0a20 2020 2020 2020 2020 2020 2020  '8.             
-00027870: 2020 2020 2020 2020 2020 2065 2738 0a20             e'8. 
-00027880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027890: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-000278a0: 2020 2020 2020 2020 205c 7265 7665 7274           \revert
-000278b0: 2054 7570 6c65 744e 756d 6265 722e 7465   TupletNumber.te
-000278c0: 7874 0a20 2020 2020 2020 2020 2020 2020  xt.             
-000278d0: 2020 207d 0a0a 2020 2020 2020 2020 2222     }..        ""
-000278e0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
-000278f0: 2073 656c 662e 5f66 6f72 6365 5f66 7261   self._force_fra
-00027900: 6374 696f 6e0a 0a20 2020 2040 666f 7263  ction..    @forc
-00027910: 655f 6672 6163 7469 6f6e 2e73 6574 7465  e_fraction.sette
-00027920: 720a 2020 2020 6465 6620 666f 7263 655f  r.    def force_
-00027930: 6672 6163 7469 6f6e 2873 656c 662c 2061  fraction(self, a
-00027940: 7267 756d 656e 7429 3a0a 2020 2020 2020  rgument):.      
-00027950: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00027960: 6172 6775 6d65 6e74 2c20 626f 6f6c 293a  argument, bool):
-00027970: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00027980: 662e 5f66 6f72 6365 5f66 7261 6374 696f  f._force_fractio
-00027990: 6e20 3d20 6172 6775 6d65 6e74 0a20 2020  n = argument.   
-000279a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000279b0: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
-000279c0: 6545 7272 6f72 2866 2266 6f72 6365 2066  eError(f"force f
-000279d0: 7261 6374 696f 6e20 6d75 7374 2062 6520  raction must be 
-000279e0: 626f 6f6c 6561 6e20 286e 6f74 207b 6172  boolean (not {ar
-000279f0: 6775 6d65 6e74 2172 7d29 2e22 290a 0a20  gument!r}).").. 
-00027a00: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
-00027a10: 2064 6566 2068 6964 6528 7365 6c66 2920   def hide(self) 
-00027a20: 2d3e 2062 6f6f 6c20 7c20 4e6f 6e65 3a0a  -> bool | None:.
-00027a30: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
-00027a40: 2020 2020 2049 7320 7472 7565 2077 6865       Is true whe
-00027a50: 6e20 7475 706c 6574 2062 7261 636b 6574  n tuplet bracket
-00027a60: 2068 6964 6573 2e0a 0a20 2020 2020 2020   hides...       
-00027a70: 202e 2e20 2063 6f6e 7461 696e 6572 3a3a   ..  container::
-00027a80: 2065 7861 6d70 6c65 0a0a 2020 2020 2020   example..      
-00027a90: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
-00027aa0: 203d 2061 626a 6164 2e54 7570 6c65 7428   = abjad.Tuplet(
-00027ab0: 2832 2c20 3329 2c20 2263 2738 2064 2738  (2, 3), "c'8 d'8
-00027ac0: 2065 2738 2229 0a20 2020 2020 2020 2020   e'8").         
-00027ad0: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
-00027ae0: 7728 7475 706c 6574 2920 2320 646f 6374  w(tuplet) # doct
-00027af0: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
-00027b00: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
-00027b10: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-00027b20: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
-00027b30: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
-00027b40: 7475 706c 6574 290a 2020 2020 2020 2020  tuplet).        
-00027b50: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-00027b60: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-00027b70: 2020 2020 2020 2020 2020 5c74 696d 6573            \times
-00027b80: 2032 2f33 0a20 2020 2020 2020 2020 2020   2/3.           
-00027b90: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00027ba0: 2020 2020 2020 2020 2020 2063 2738 0a20             c'8. 
-00027bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027bc0: 2020 2064 2738 0a20 2020 2020 2020 2020     d'8.         
-00027bd0: 2020 2020 2020 2020 2020 2065 2738 0a20             e'8. 
-00027be0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-00027bf0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-00027c00: 3e20 7475 706c 6574 2e68 6964 650a 2020  > tuplet.hide.  
-00027c10: 2020 2020 2020 2020 2020 4661 6c73 650a            False.
-00027c20: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
-00027c30: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
-00027c40: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-00027c50: 3e20 7475 706c 6574 5f31 203d 2061 626a  > tuplet_1 = abj
-00027c60: 6164 2e54 7570 6c65 7428 2832 2c20 3329  ad.Tuplet((2, 3)
-00027c70: 2c20 2263 2734 2064 2734 2065 2734 2229  , "c'4 d'4 e'4")
-00027c80: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00027c90: 2074 7570 6c65 745f 3220 3d20 6162 6a61   tuplet_2 = abja
-00027ca0: 642e 5475 706c 6574 2828 322c 2033 292c  d.Tuplet((2, 3),
-00027cb0: 2022 6427 3420 6527 3420 6627 3422 290a   "d'4 e'4 f'4").
-00027cc0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00027cd0: 7374 6166 6620 3d20 6162 6a61 642e 5374  staff = abjad.St
-00027ce0: 6166 6628 5b74 7570 6c65 745f 312c 2074  aff([tuplet_1, t
-00027cf0: 7570 6c65 745f 325d 290a 2020 2020 2020  uplet_2]).      
-00027d00: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-00027d10: 7368 6f77 2873 7461 6666 2920 2320 646f  show(staff) # do
-00027d20: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-00027d30: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
-00027d40: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
-00027d50: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-00027d60: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-00027d70: 6428 7374 6166 6629 0a20 2020 2020 2020  d(staff).       
-00027d80: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
-00027d90: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
-00027da0: 2020 2020 2020 2020 2020 205c 6e65 7720             \new 
-00027db0: 5374 6166 660a 2020 2020 2020 2020 2020  Staff.          
-00027dc0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00027dd0: 2020 2020 2020 2020 2020 2020 5c74 696d              \tim
-00027de0: 6573 2032 2f33 0a20 2020 2020 2020 2020  es 2/3.         
-00027df0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00027840: 2020 2020 6427 340a 2020 2020 2020 2020      d'4.        
+00027850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027860: 6527 340a 2020 2020 2020 2020 2020 2020  e'4.            
+00027870: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00027880: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+00027890: 696d 6573 2032 2f33 0a20 2020 2020 2020  imes 2/3.       
+000278a0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+000278b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000278c0: 2020 2020 2020 2063 2734 0a20 2020 2020         c'4.     
+000278d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000278e0: 2020 2064 2734 0a20 2020 2020 2020 2020     d'4.         
+000278f0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00027900: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+00027910: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00027920: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
+00027930: 6d65 7320 322f 330a 2020 2020 2020 2020  mes 2/3.        
+00027940: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00027950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027960: 2020 2020 2020 6327 340a 2020 2020 2020        c'4.      
+00027970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027980: 2020 6427 340a 2020 2020 2020 2020 2020    d'4.          
+00027990: 2020 2020 2020 2020 2020 2020 2020 6527                e'
+000279a0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+000279b0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+000279c0: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
+000279d0: 2020 2020 2020 2057 6869 6368 206d 616b         Which mak
+000279e0: 6573 2069 7420 706f 7373 6962 6c65 2074  es it possible t
+000279f0: 6f20 7365 6520 7468 6520 6566 6665 6374  o see the effect
+00027a00: 206f 6620 7365 7474 696e 6720 666f 7263   of setting forc
+00027a10: 6520 6672 6163 7469 6f6e 0a20 2020 2020  e fraction.     
+00027a20: 2020 2020 2020 2074 6f20 7472 7565 206f         to true o
+00027a30: 6e20 6120 7369 6e67 6c65 2074 7570 6c65  n a single tuple
+00027a40: 743a 0a0a 2020 2020 2020 2020 2020 2020  t:..            
+00027a50: 3e3e 3e20 7475 706c 6574 203d 2073 7461  >>> tuplet = sta
+00027a60: 6666 5b31 5d0a 2020 2020 2020 2020 2020  ff[1].          
+00027a70: 2020 3e3e 3e20 7475 706c 6574 2e66 6f72    >>> tuplet.for
+00027a80: 6365 5f66 7261 6374 696f 6e20 3d20 5472  ce_fraction = Tr
+00027a90: 7565 0a20 2020 2020 2020 2020 2020 203e  ue.            >
+00027aa0: 3e3e 2061 626a 6164 2e73 686f 7728 7374  >> abjad.show(st
+00027ab0: 6166 6629 2023 2064 6f63 7465 7374 3a20  aff) # doctest: 
+00027ac0: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+00027ad0: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+00027ae0: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+00027af0: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+00027b00: 642e 6c69 6c79 706f 6e64 2873 7461 6666  d.lilypond(staff
+00027b10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00027b20: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+00027b30: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+00027b40: 2020 2020 5c6e 6577 2053 7461 6666 0a20      \new Staff. 
+00027b50: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+00027b60: 7769 7468 0a20 2020 2020 2020 2020 2020  with.           
+00027b70: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
+00027b80: 2020 2020 2020 2020 2020 205c 6f76 6572             \over
+00027b90: 7269 6465 2054 7570 6c65 744e 756d 6265  ride TupletNumbe
+00027ba0: 722e 7465 7874 203d 2023 7475 706c 6574  r.text = #tuplet
+00027bb0: 2d6e 756d 6265 723a 3a63 616c 632d 6465  -number::calc-de
+00027bc0: 6e6f 6d69 6e61 746f 722d 7465 7874 0a20  nominator-text. 
+00027bd0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00027be0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027bf0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00027c00: 2020 2020 2020 205c 7469 6d65 7320 322f         \times 2/
+00027c10: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
+00027c20: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+00027c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027c40: 6327 340a 2020 2020 2020 2020 2020 2020  c'4.            
+00027c50: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
+00027c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027c70: 2020 2020 2020 2020 6527 340a 2020 2020          e'4.    
+00027c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027c90: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
+00027ca0: 2020 2020 2020 5c74 7765 616b 2074 6578        \tweak tex
+00027cb0: 7420 2374 7570 6c65 742d 6e75 6d62 6572  t #tuplet-number
+00027cc0: 3a3a 6361 6c63 2d66 7261 6374 696f 6e2d  ::calc-fraction-
+00027cd0: 7465 7874 0a20 2020 2020 2020 2020 2020  text.           
+00027ce0: 2020 2020 2020 2020 205c 7469 6d65 7320           \times 
+00027cf0: 322f 330a 2020 2020 2020 2020 2020 2020  2/3.            
+00027d00: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+00027d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027d20: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
+00027d30: 2020 2020 2020 2020 2020 2020 2020 6427                d'
+00027d40: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+00027d50: 2020 2020 2020 2020 2020 6527 340a 2020            e'4.  
+00027d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027d70: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+00027d80: 2020 2020 2020 2020 5c74 696d 6573 2032          \times 2
+00027d90: 2f33 0a20 2020 2020 2020 2020 2020 2020  /3.             
+00027da0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+00027db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027dc0: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
+00027dd0: 2020 2020 2020 2020 2020 2020 2064 2734               d'4
+00027de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027df0: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
 00027e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027e10: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
-00027e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027e30: 2064 2734 0a20 2020 2020 2020 2020 2020   d'4.           
-00027e40: 2020 2020 2020 2020 2020 2020 2065 2734               e'4
-00027e50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027e60: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
-00027e70: 2020 2020 2020 2020 2020 205c 7469 6d65             \time
-00027e80: 7320 322f 330a 2020 2020 2020 2020 2020  s 2/3.          
-00027e90: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-00027ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027eb0: 2020 2020 6427 340a 2020 2020 2020 2020      d'4.        
-00027ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027ed0: 6527 340a 2020 2020 2020 2020 2020 2020  e'4.            
-00027ee0: 2020 2020 2020 2020 2020 2020 6627 340a              f'4.
-00027ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027f00: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
-00027f10: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
-00027f20: 2020 2020 203e 3e3e 2073 7461 6666 5b30       >>> staff[0
-00027f30: 5d2e 6869 6465 203d 2054 7275 650a 2020  ].hide = True.  
-00027f40: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
-00027f50: 6a61 642e 7368 6f77 2873 7461 6666 2920  jad.show(staff) 
-00027f60: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
-00027f70: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
-00027f80: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
-00027f90: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-00027fa0: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-00027fb0: 7970 6f6e 6428 7374 6166 6629 0a20 2020  ypond(staff).   
-00027fc0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-00027fd0: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
-00027fe0: 2020 2020 2020 2020 2020 2020 2020 205c                 \
-00027ff0: 6e65 7720 5374 6166 660a 2020 2020 2020  new Staff.      
-00028000: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-00028010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028020: 5c73 6361 6c65 4475 7261 7469 6f6e 7320  \scaleDurations 
-00028030: 2327 2832 202e 2033 290a 2020 2020 2020  #'(2 . 3).      
-00028040: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-00028050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028060: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
-00028070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028080: 2020 2020 6427 340a 2020 2020 2020 2020      d'4.        
-00028090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000280a0: 6527 340a 2020 2020 2020 2020 2020 2020  e'4.            
-000280b0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-000280c0: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-000280d0: 696d 6573 2032 2f33 0a20 2020 2020 2020  imes 2/3.       
-000280e0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-000280f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028100: 2020 2020 2020 2064 2734 0a20 2020 2020         d'4.     
+00027e10: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
+00027e20: 2020 207d 0a0a 2020 2020 2020 2020 2e2e     }..        ..
+00027e30: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
+00027e40: 616d 706c 650a 0a20 2020 2020 2020 2020  ample..         
+00027e50: 2020 2049 676e 6f72 6564 2077 6865 6e20     Ignored when 
+00027e60: 7475 706c 6574 206e 756d 6265 7220 7465  tuplet number te
+00027e70: 7874 2069 7320 6f76 6572 7269 6464 656e  xt is overridden
+00027e80: 2065 7870 6c69 6369 746c 793a 0a0a 2020   explicitly:..  
+00027e90: 2020 2020 2020 2020 2020 3e3e 3e20 7475            >>> tu
+00027ea0: 706c 6574 203d 2061 626a 6164 2e54 7570  plet = abjad.Tup
+00027eb0: 6c65 7428 2832 2c20 3329 2c20 2263 2738  let((2, 3), "c'8
+00027ec0: 2064 2738 2065 2738 2229 0a20 2020 2020   d'8 e'8").     
+00027ed0: 2020 2020 2020 203e 3e3e 2064 7572 6174         >>> durat
+00027ee0: 696f 6e20 3d20 6162 6a61 642e 6765 742e  ion = abjad.get.
+00027ef0: 6475 7261 7469 6f6e 2874 7570 6c65 7429  duration(tuplet)
+00027f00: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00027f10: 206e 6f74 6520 3d20 6162 6a61 642e 4e6f   note = abjad.No
+00027f20: 7465 2e66 726f 6d5f 7069 7463 685f 616e  te.from_pitch_an
+00027f30: 645f 6475 7261 7469 6f6e 2830 2c20 6475  d_duration(0, du
+00027f40: 7261 7469 6f6e 290a 2020 2020 2020 2020  ration).        
+00027f50: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
+00027f60: 2061 626a 6164 2e69 6c6c 7573 7472 6174   abjad.illustrat
+00027f70: 6f72 732e 7365 6c65 6374 696f 6e5f 746f  ors.selection_to
+00027f80: 5f73 636f 7265 5f6d 6172 6b75 705f 7374  _score_markup_st
+00027f90: 7269 6e67 285b 6e6f 7465 5d29 0a20 2020  ring([note]).   
+00027fa0: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
+00027fb0: 696e 6720 3d20 7266 225c 6d61 726b 7570  ing = rf"\markup
+00027fc0: 207b 7b20 7b73 7472 696e 677d 207d 7d22   {{ {string} }}"
+00027fd0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00027fe0: 2061 626a 6164 2e6f 7665 7272 6964 6528   abjad.override(
+00027ff0: 7475 706c 6574 292e 5475 706c 6574 4e75  tuplet).TupletNu
+00028000: 6d62 6572 2e74 6578 7420 3d20 7374 7269  mber.text = stri
+00028010: 6e67 0a20 2020 2020 2020 2020 2020 203e  ng.            >
+00028020: 3e3e 2073 7461 6666 203d 2061 626a 6164  >> staff = abjad
+00028030: 2e53 7461 6666 285b 7475 706c 6574 5d29  .Staff([tuplet])
+00028040: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00028050: 2061 626a 6164 2e73 686f 7728 7374 6166   abjad.show(staf
+00028060: 6629 2023 2064 6f63 7465 7374 3a20 2b53  f) # doctest: +S
+00028070: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
+00028080: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
+00028090: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+000280a0: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
+000280b0: 6c69 6c79 706f 6e64 2873 7461 6666 290a  lilypond(staff).
+000280c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000280d0: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
+000280e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000280f0: 2020 5c6e 6577 2053 7461 6666 0a20 2020    \new Staff.   
+00028100: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
 00028110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028120: 2020 2065 2734 0a20 2020 2020 2020 2020     e'4.         
-00028130: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00028140: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00028150: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00028160: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
-00028170: 2020 2020 4869 6465 7320 7475 706c 6574      Hides tuplet
-00028180: 2062 7261 636b 6574 2061 6e64 2074 7570   bracket and tup
-00028190: 6c65 7420 6e75 6d62 6572 2077 6865 6e20  let number when 
-000281a0: 7472 7565 2e0a 2020 2020 2020 2020 2222  true..        ""
-000281b0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
-000281c0: 2073 656c 662e 5f68 6964 650a 0a20 2020   self._hide..   
-000281d0: 2040 6869 6465 2e73 6574 7465 720a 2020   @hide.setter.  
-000281e0: 2020 6465 6620 6869 6465 2873 656c 662c    def hide(self,
-000281f0: 2061 7267 756d 656e 7429 3a0a 2020 2020   argument):.    
-00028200: 2020 2020 6173 7365 7274 2069 7369 6e73      assert isins
-00028210: 7461 6e63 6528 6172 6775 6d65 6e74 2c20  tance(argument, 
-00028220: 626f 6f6c 292c 2072 6570 7228 6172 6775  bool), repr(argu
-00028230: 6d65 6e74 290a 2020 2020 2020 2020 7365  ment).        se
-00028240: 6c66 2e5f 6869 6465 203d 2061 7267 756d  lf._hide = argum
-00028250: 656e 740a 0a20 2020 2040 7072 6f70 6572  ent..    @proper
-00028260: 7479 0a20 2020 2064 6566 2069 6d70 6c69  ty.    def impli
-00028270: 6564 5f70 726f 6c61 7469 6f6e 2873 656c  ed_prolation(sel
-00028280: 6629 202d 3e20 5f64 7572 6174 696f 6e2e  f) -> _duration.
-00028290: 4d75 6c74 6970 6c69 6572 3a0a 2020 2020  Multiplier:.    
-000282a0: 2020 2020 7222 2222 0a20 2020 2020 2020      r""".       
-000282b0: 2047 6574 7320 696d 706c 6965 6420 7072   Gets implied pr
-000282c0: 6f6c 6174 696f 6e20 6f66 2074 7570 6c65  olation of tuple
-000282d0: 742e 0a0a 2020 2020 2020 2020 2e2e 2020  t...        ..  
-000282e0: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-000282f0: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
-00028300: 203e 3e3e 2074 7570 6c65 7420 3d20 6162   >>> tuplet = ab
-00028310: 6a61 642e 5475 706c 6574 2828 322c 2033  jad.Tuplet((2, 3
-00028320: 292c 2022 6327 3820 6427 3820 6527 3822  ), "c'8 d'8 e'8"
-00028330: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00028340: 3e20 6162 6a61 642e 7368 6f77 2874 7570  > abjad.show(tup
-00028350: 6c65 7429 2023 2064 6f63 7465 7374 3a20  let) # doctest: 
-00028360: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
-00028370: 2020 203e 3e3e 2074 7570 6c65 742e 696d     >>> tuplet.im
-00028380: 706c 6965 645f 7072 6f6c 6174 696f 6e0a  plied_prolation.
-00028390: 2020 2020 2020 2020 2020 2020 4d75 6c74              Mult
-000283a0: 6970 6c69 6572 2832 2c20 3329 0a0a 2020  iplier(2, 3)..  
-000283b0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000283c0: 2020 7265 7475 726e 205f 6475 7261 7469    return _durati
-000283d0: 6f6e 2e4d 756c 7469 706c 6965 7228 7365  on.Multiplier(se
-000283e0: 6c66 2e6d 756c 7469 706c 6965 7229 0a0a  lf.multiplier)..
-000283f0: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
-00028400: 2020 6465 6620 6d75 6c74 6970 6c69 6564    def multiplied
-00028410: 5f64 7572 6174 696f 6e28 7365 6c66 2920  _duration(self) 
-00028420: 2d3e 205f 6475 7261 7469 6f6e 2e44 7572  -> _duration.Dur
-00028430: 6174 696f 6e3a 0a20 2020 2020 2020 2072  ation:.        r
-00028440: 2222 220a 2020 2020 2020 2020 4765 7473  """.        Gets
-00028450: 206d 756c 7469 706c 6965 6420 6475 7261   multiplied dura
-00028460: 7469 6f6e 206f 6620 7475 706c 6574 2e0a  tion of tuplet..
-00028470: 0a20 2020 2020 2020 202e 2e20 2063 6f6e  .        ..  con
-00028480: 7461 696e 6572 3a3a 2065 7861 6d70 6c65  tainer:: example
-00028490: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-000284a0: 3e20 7475 706c 6574 203d 2061 626a 6164  > tuplet = abjad
-000284b0: 2e54 7570 6c65 7428 2832 2c20 3329 2c20  .Tuplet((2, 3), 
-000284c0: 2263 2738 2064 2738 2065 2738 2229 0a0a  "c'8 d'8 e'8")..
-000284d0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-000284e0: 6162 6a61 642e 7368 6f77 2874 7570 6c65  abjad.show(tuple
-000284f0: 7429 2023 2064 6f63 7465 7374 3a20 2b53  t) # doctest: +S
-00028500: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
-00028510: 203e 3e3e 2074 7570 6c65 742e 6d75 6c74   >>> tuplet.mult
-00028520: 6970 6c69 6564 5f64 7572 6174 696f 6e0a  iplied_duration.
-00028530: 2020 2020 2020 2020 2020 2020 4475 7261              Dura
-00028540: 7469 6f6e 2831 2c20 3429 0a0a 2020 2020  tion(1, 4)..    
-00028550: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00028560: 7265 7475 726e 205f 6475 7261 7469 6f6e  return _duration
-00028570: 2e44 7572 6174 696f 6e28 7365 6c66 2e6d  .Duration(self.m
-00028580: 756c 7469 706c 6965 7220 2a20 7365 6c66  ultiplier * self
-00028590: 2e5f 6765 745f 636f 6e74 656e 7473 5f64  ._get_contents_d
-000285a0: 7572 6174 696f 6e28 2929 0a0a 2020 2020  uration())..    
-000285b0: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
-000285c0: 6620 6d75 6c74 6970 6c69 6572 2873 656c  f multiplier(sel
-000285d0: 6629 202d 3e20 5f64 7572 6174 696f 6e2e  f) -> _duration.
-000285e0: 4e6f 6e72 6564 7563 6564 4672 6163 7469  NonreducedFracti
-000285f0: 6f6e 3a0a 2020 2020 2020 2020 7222 2222  on:.        r"""
-00028600: 0a20 2020 2020 2020 2047 6574 7320 616e  .        Gets an
-00028610: 6420 7365 7473 206d 756c 7469 706c 6965  d sets multiplie
-00028620: 7220 6f66 2074 7570 6c65 742e 0a0a 2020  r of tuplet...  
-00028630: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
-00028640: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-00028650: 2020 2020 2020 2020 2020 2047 6574 7320             Gets 
-00028660: 7475 706c 6574 206d 756c 7469 706c 6965  tuplet multiplie
-00028670: 723a 0a0a 2020 2020 2020 2020 2020 2020  r:..            
-00028680: 2020 2020 3e3e 3e20 7475 706c 6574 203d      >>> tuplet =
-00028690: 2061 626a 6164 2e54 7570 6c65 7428 2832   abjad.Tuplet((2
-000286a0: 2c20 3329 2c20 2263 2738 2064 2738 2065  , 3), "c'8 d'8 e
-000286b0: 2738 2229 0a20 2020 2020 2020 2020 2020  '8").           
-000286c0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-000286d0: 686f 7728 7475 706c 6574 2920 2320 646f  how(tuplet) # do
-000286e0: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-000286f0: 2020 2020 2020 2020 2020 3e3e 3e20 7475            >>> tu
-00028700: 706c 6574 2e6d 756c 7469 706c 6965 720a  plet.multiplier.
-00028710: 2020 2020 2020 2020 2020 2020 4e6f 6e72              Nonr
-00028720: 6564 7563 6564 4672 6163 7469 6f6e 2832  educedFraction(2
-00028730: 2c20 3329 0a0a 2020 2020 2020 2020 2e2e  , 3)..        ..
-00028740: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
-00028750: 616d 706c 650a 0a20 2020 2020 2020 2020  ample..         
-00028760: 2020 2053 6574 7320 7475 706c 6574 206d     Sets tuplet m
-00028770: 756c 7469 706c 6965 723a 0a0a 2020 2020  ultiplier:..    
-00028780: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00028790: 7475 706c 6574 2e6d 756c 7469 706c 6965  tuplet.multiplie
-000287a0: 7220 3d20 6162 6a61 642e 4d75 6c74 6970  r = abjad.Multip
-000287b0: 6c69 6572 2834 2c20 3329 0a20 2020 2020  lier(4, 3).     
-000287c0: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
-000287d0: 626a 6164 2e73 686f 7728 7475 706c 6574  bjad.show(tuplet
-000287e0: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-000287f0: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
-00028800: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
-00028810: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00028820: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
-00028830: 696c 7970 6f6e 6428 7475 706c 6574 290a  ilypond(tuplet).
-00028840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028850: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-00028860: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00028870: 2020 5c74 7765 616b 2074 6578 7420 2374    \tweak text #t
-00028880: 7570 6c65 742d 6e75 6d62 6572 3a3a 6361  uplet-number::ca
-00028890: 6c63 2d66 7261 6374 696f 6e2d 7465 7874  lc-fraction-text
-000288a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000288b0: 205c 7469 6d65 7320 342f 330a 2020 2020   \times 4/3.    
-000288c0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-000288d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000288e0: 2020 6327 380a 2020 2020 2020 2020 2020    c'8.          
-000288f0: 2020 2020 2020 2020 2020 6427 380a 2020            d'8.  
-00028900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028910: 2020 6527 380a 2020 2020 2020 2020 2020    e'8.          
-00028920: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
-00028930: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
-00028940: 7572 6e20 7365 6c66 2e5f 6d75 6c74 6970  urn self._multip
-00028950: 6c69 6572 0a0a 2020 2020 406d 756c 7469  lier..    @multi
-00028960: 706c 6965 722e 7365 7474 6572 0a20 2020  plier.setter.   
-00028970: 2064 6566 206d 756c 7469 706c 6965 7228   def multiplier(
-00028980: 7365 6c66 2c20 6172 6775 6d65 6e74 293a  self, argument):
-00028990: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-000289a0: 7374 616e 6365 2861 7267 756d 656e 742c  stance(argument,
-000289b0: 2069 6e74 207c 2071 7569 636b 7469 6f6e   int | quicktion
-000289c0: 732e 4672 6163 7469 6f6e 293a 0a20 2020  s.Fraction):.   
-000289d0: 2020 2020 2020 2020 206d 756c 7469 706c           multipl
-000289e0: 6965 7220 3d20 5f64 7572 6174 696f 6e2e  ier = _duration.
-000289f0: 4e6f 6e72 6564 7563 6564 4672 6163 7469  NonreducedFracti
-00028a00: 6f6e 2861 7267 756d 656e 7429 0a20 2020  on(argument).   
-00028a10: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
-00028a20: 616e 6365 2861 7267 756d 656e 742c 2074  ance(argument, t
-00028a30: 7570 6c65 293a 0a20 2020 2020 2020 2020  uple):.         
-00028a40: 2020 206d 756c 7469 706c 6965 7220 3d20     multiplier = 
-00028a50: 5f64 7572 6174 696f 6e2e 4e6f 6e72 6564  _duration.Nonred
-00028a60: 7563 6564 4672 6163 7469 6f6e 2861 7267  ucedFraction(arg
-00028a70: 756d 656e 7429 0a20 2020 2020 2020 2065  ument).        e
-00028a80: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00028a90: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-00028aa0: 7228 6622 6361 6e20 6e6f 7420 7365 7420  r(f"can not set 
-00028ab0: 7475 706c 6574 206d 756c 7469 706c 6965  tuplet multiplie
-00028ac0: 723a 207b 6172 6775 6d65 6e74 2172 7d2e  r: {argument!r}.
-00028ad0: 2229 0a20 2020 2020 2020 2069 6620 3020  ").        if 0 
-00028ae0: 3c20 6d75 6c74 6970 6c69 6572 3a0a 2020  < multiplier:.  
-00028af0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-00028b00: 6d75 6c74 6970 6c69 6572 203d 206d 756c  multiplier = mul
-00028b10: 7469 706c 6965 720a 2020 2020 2020 2020  tiplier.        
-00028b20: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00028b30: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00028b40: 6f72 2866 2274 7570 6c65 7420 6d75 6c74  or(f"tuplet mult
-00028b50: 6970 6c69 6572 206d 7573 7420 6265 2070  iplier must be p
-00028b60: 6f73 6974 6976 653a 207b 6172 6775 6d65  ositive: {argume
-00028b70: 6e74 2172 7d2e 2229 0a0a 2020 2020 4070  nt!r}.")..    @p
-00028b80: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
-00028b90: 7461 6728 7365 6c66 2920 2d3e 205f 7461  tag(self) -> _ta
-00028ba0: 672e 5461 6720 7c20 4e6f 6e65 3a0a 2020  g.Tag | None:.  
-00028bb0: 2020 2020 2020 7222 2222 0a20 2020 2020        r""".     
-00028bc0: 2020 2047 6574 7320 7461 672e 0a0a 2020     Gets tag...  
-00028bd0: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
-00028be0: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-00028bf0: 2020 2020 2020 2020 2020 203e 3e3e 2074             >>> t
-00028c00: 7570 6c65 7420 3d20 6162 6a61 642e 5475  uplet = abjad.Tu
-00028c10: 706c 6574 280a 2020 2020 2020 2020 2020  plet(.          
-00028c20: 2020 2e2e 2e20 2020 2020 2832 2c20 3329    ...     (2, 3)
-00028c30: 2c20 2263 2734 2064 2720 6527 222c 2074  , "c'4 d' e'", t
-00028c40: 6167 3d61 626a 6164 2e54 6167 2827 5245  ag=abjad.Tag('RE
-00028c50: 4427 290a 2020 2020 2020 2020 2020 2020  D').            
-00028c60: 2e2e 2e20 290a 2020 2020 2020 2020 2020  ... ).          
-00028c70: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
-00028c80: 2874 7570 6c65 7429 2023 2064 6f63 7465  (tuplet) # docte
-00028c90: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-00028ca0: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
-00028cb0: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
-00028cc0: 6e64 2874 7570 6c65 742c 2074 6167 733d  nd(tuplet, tags=
-00028cd0: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
-00028ce0: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
-00028cf0: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-00028d00: 2521 2052 4544 0a20 2020 2020 2020 2020  %! RED.         
-00028d10: 2020 205c 7469 6d65 7320 322f 330a 2020     \times 2/3.  
-00028d20: 2020 2020 2020 2020 2020 2521 2052 4544            %! RED
-00028d30: 0a20 2020 2020 2020 2020 2020 207b 0a20  .            {. 
-00028d40: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00028d50: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00028d60: 2020 2064 2734 0a20 2020 2020 2020 2020     d'4.         
-00028d70: 2020 2020 2020 2065 2734 0a20 2020 2020         e'4.     
-00028d80: 2020 2020 2020 2025 2120 5245 440a 2020         %! RED.  
-00028d90: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
-00028da0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00028db0: 2072 6574 7572 6e20 7375 7065 7228 292e   return super().
-00028dc0: 7461 670a 0a20 2020 2023 2323 2050 5542  tag..    ### PUB
-00028dd0: 4c49 4320 4d45 5448 4f44 5320 2323 230a  LIC METHODS ###.
-00028de0: 0a20 2020 2064 6566 2061 7070 656e 6428  .    def append(
-00028df0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-00028e00: 2020 2020 2020 2063 6f6d 706f 6e65 6e74         component
-00028e10: 3a20 436f 6d70 6f6e 656e 742c 0a20 2020  : Component,.   
-00028e20: 2020 2020 202a 2c0a 2020 2020 2020 2020       *,.        
-00028e30: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
-00028e40: 2265 6e67 6c69 7368 222c 0a20 2020 2020  "english",.     
-00028e50: 2020 2070 7265 7365 7276 655f 6475 7261     preserve_dura
-00028e60: 7469 6f6e 3d46 616c 7365 2c0a 2020 2020  tion=False,.    
-00028e70: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00028e80: 2020 2072 2222 220a 2020 2020 2020 2020     r""".        
-00028e90: 4170 7065 6e64 7320 6060 636f 6d70 6f6e  Appends ``compon
-00028ea0: 656e 7460 6020 746f 2074 7570 6c65 742e  ent`` to tuplet.
-00028eb0: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
-00028ec0: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-00028ed0: 650a 0a20 2020 2020 2020 2020 2020 2041  e..            A
-00028ee0: 7070 656e 6473 206e 6f74 6520 746f 2074  ppends note to t
-00028ef0: 7570 6c65 743a 0a0a 2020 2020 2020 2020  uplet:..        
-00028f00: 2020 2020 3e3e 3e20 7475 706c 6574 203d      >>> tuplet =
-00028f10: 2061 626a 6164 2e54 7570 6c65 7428 2832   abjad.Tuplet((2
-00028f20: 2c20 3329 2c20 2263 2734 2028 2064 2734  , 3), "c'4 ( d'4
-00028f30: 2066 2734 2029 2229 0a20 2020 2020 2020   f'4 )").       
-00028f40: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-00028f50: 686f 7728 7475 706c 6574 2920 2320 646f  how(tuplet) # do
-00028f60: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-00028f70: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
-00028f80: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
-00028f90: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-00028fa0: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-00028fb0: 6428 7475 706c 6574 290a 2020 2020 2020  d(tuplet).      
-00028fc0: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-00028fd0: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
-00028fe0: 2020 2020 2020 2020 2020 2020 5c74 696d              \tim
-00028ff0: 6573 2032 2f33 0a20 2020 2020 2020 2020  es 2/3.         
-00029000: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-00029010: 2020 2020 2020 2020 2020 2020 2063 2734               c'4
-00029020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029030: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
-00029040: 2020 2020 2020 2020 2020 2064 2734 0a20             d'4. 
+00028120: 2020 205c 6f76 6572 7269 6465 2054 7570     \override Tup
+00028130: 6c65 744e 756d 6265 722e 7465 7874 203d  letNumber.text =
+00028140: 205c 6d61 726b 7570 207b 205c 7363 6f72   \markup { \scor
+00028150: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00028160: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+00028170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028180: 2020 2020 2020 2020 5c63 6f6e 7465 7874          \context
+00028190: 2053 636f 7265 203d 2022 5363 6f72 6522   Score = "Score"
+000281a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000281b0: 2020 2020 2020 2020 2020 2020 205c 7769               \wi
+000281c0: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
+000281d0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+000281e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000281f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028200: 205c 6f76 6572 7269 6465 2053 7061 6369   \override Spaci
+00028210: 6e67 5370 616e 6e65 722e 7370 6163 696e  ngSpanner.spacin
+00028220: 672d 696e 6372 656d 656e 7420 3d20 302e  g-increment = 0.
+00028230: 350a 2020 2020 2020 2020 2020 2020 2020  5.              
+00028240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028250: 2020 7072 6f70 6f72 7469 6f6e 616c 4e6f    proportionalNo
+00028260: 7461 7469 6f6e 4475 7261 7469 6f6e 203d  tationDuration =
+00028270: 2023 2366 0a20 2020 2020 2020 2020 2020   ##f.           
+00028280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028290: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
+000282a0: 2020 2020 2020 2020 2020 2020 2020 203c                 <
+000282b0: 3c0a 2020 2020 2020 2020 2020 2020 2020  <.              
+000282c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000282d0: 2020 5c63 6f6e 7465 7874 2052 6879 7468    \context Rhyth
+000282e0: 6d69 6353 7461 6666 203d 2022 5268 7974  micStaff = "Rhyt
+000282f0: 686d 6963 5f53 7461 6666 220a 2020 2020  hmic_Staff".    
+00028300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028310: 2020 2020 2020 2020 2020 2020 5c77 6974              \wit
+00028320: 680a 2020 2020 2020 2020 2020 2020 2020  h.              
+00028330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028340: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+00028350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028360: 2020 2020 2020 2020 5c72 656d 6f76 6520          \remove 
+00028370: 5469 6d65 5f73 6967 6e61 7475 7265 5f65  Time_signature_e
+00028380: 6e67 7261 7665 720a 2020 2020 2020 2020  ngraver.        
+00028390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000283a0: 2020 2020 2020 2020 2020 2020 5c72 656d              \rem
+000283b0: 6f76 6520 5374 6166 665f 7379 6d62 6f6c  ove Staff_symbol
+000283c0: 5f65 6e67 7261 7665 720a 2020 2020 2020  _engraver.      
+000283d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000283e0: 2020 2020 2020 2020 2020 2020 2020 5c6f                \o
+000283f0: 7665 7272 6964 6520 5374 656d 2e64 6972  verride Stem.dir
+00028400: 6563 7469 6f6e 203d 2023 7570 0a20 2020  ection = #up.   
+00028410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028430: 205c 6f76 6572 7269 6465 2053 7465 6d2e   \override Stem.
+00028440: 6c65 6e67 7468 203d 2035 0a20 2020 2020  length = 5.     
+00028450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028460: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+00028470: 6f76 6572 7269 6465 2054 7570 6c65 7442  override TupletB
+00028480: 7261 636b 6574 2e62 7261 636b 6574 2d76  racket.bracket-v
+00028490: 6973 6962 696c 6974 7920 3d20 2323 740a  isibility = ##t.
+000284a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000284b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000284c0: 2020 2020 5c6f 7665 7272 6964 6520 5475      \override Tu
+000284d0: 706c 6574 4272 6163 6b65 742e 6469 7265  pletBracket.dire
+000284e0: 6374 696f 6e20 3d20 2375 700a 2020 2020  ction = #up.    
+000284f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028510: 5c6f 7665 7272 6964 6520 5475 706c 6574  \override Tuplet
+00028520: 4272 6163 6b65 742e 6d69 6e69 6d75 6d2d  Bracket.minimum-
+00028530: 6c65 6e67 7468 203d 2034 0a20 2020 2020  length = 4.     
+00028540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028550: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+00028560: 6f76 6572 7269 6465 2054 7570 6c65 7442  override TupletB
+00028570: 7261 636b 6574 2e70 6164 6469 6e67 203d  racket.padding =
+00028580: 2031 2e32 350a 2020 2020 2020 2020 2020   1.25.          
+00028590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000285a0: 2020 2020 2020 2020 2020 5c6f 7665 7272            \overr
+000285b0: 6964 6520 5475 706c 6574 4272 6163 6b65  ide TupletBracke
+000285c0: 742e 7368 6f72 7465 6e2d 7061 6972 203d  t.shorten-pair =
+000285d0: 2023 2728 2d31 202e 202d 312e 3529 0a20   #'(-1 . -1.5). 
+000285e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000285f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028600: 2020 205c 6f76 6572 7269 6465 2054 7570     \override Tup
+00028610: 6c65 7442 7261 636b 6574 2e73 7072 696e  letBracket.sprin
+00028620: 6773 2d61 6e64 2d72 6f64 7320 3d20 236c  gs-and-rods = #l
+00028630: 793a 7370 616e 6e65 723a 3a73 6574 2d73  y:spanner::set-s
+00028640: 7061 6369 6e67 2d72 6f64 730a 2020 2020  pacing-rods.    
+00028650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028670: 5c6f 7665 7272 6964 6520 5475 706c 6574  \override Tuplet
+00028680: 4e75 6d62 6572 2e66 6f6e 742d 7369 7a65  Number.font-size
+00028690: 203d 2030 0a20 2020 2020 2020 2020 2020   = 0.           
+000286a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000286b0: 2020 2020 2020 2020 205c 6f76 6572 7269           \overri
+000286c0: 6465 2054 7570 6c65 744e 756d 6265 722e  de TupletNumber.
+000286d0: 7465 7874 203d 2023 7475 706c 6574 2d6e  text = #tuplet-n
+000286e0: 756d 6265 723a 3a63 616c 632d 6672 6163  umber::calc-frac
+000286f0: 7469 6f6e 2d74 6578 740a 2020 2020 2020  tion-text.      
+00028700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028710: 2020 2020 2020 2020 2020 2020 2020 7475                tu
+00028720: 706c 6574 4675 6c6c 4c65 6e67 7468 203d  pletFullLength =
+00028730: 2023 2374 0a20 2020 2020 2020 2020 2020   ##t.           
+00028740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028750: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+00028760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028770: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+00028780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028790: 2020 2020 2020 2020 2020 2020 2063 2734               c'4
+000287a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000287b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000287c0: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
+000287d0: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+000287e0: 3e0a 2020 2020 2020 2020 2020 2020 2020  >.              
+000287f0: 2020 2020 2020 2020 2020 2020 2020 5c6c                \l
+00028800: 6179 6f75 740a 2020 2020 2020 2020 2020  ayout.          
+00028810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028820: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+00028830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028840: 2020 2020 696e 6465 6e74 203d 2030 0a20      indent = 0. 
+00028850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028860: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00028870: 6167 6765 642d 7269 6768 7420 3d20 2323  agged-right = ##
+00028880: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+00028890: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+000288a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000288b0: 2020 2020 2020 2020 7d20 7d0a 2020 2020          } }.    
+000288c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000288d0: 5c74 696d 6573 2032 2f33 0a20 2020 2020  \times 2/3.     
+000288e0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+000288f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028900: 2020 2020 2020 2020 2063 2738 0a20 2020           c'8.   
+00028910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028920: 2020 2020 2064 2738 0a20 2020 2020 2020       d'8.       
+00028930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028940: 2065 2738 0a20 2020 2020 2020 2020 2020   e'8.           
+00028950: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00028960: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+00028970: 7265 7665 7274 2054 7570 6c65 744e 756d  revert TupletNum
+00028980: 6265 722e 7465 7874 0a20 2020 2020 2020  ber.text.       
+00028990: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+000289a0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000289b0: 7265 7475 726e 2073 656c 662e 5f66 6f72  return self._for
+000289c0: 6365 5f66 7261 6374 696f 6e0a 0a20 2020  ce_fraction..   
+000289d0: 2040 666f 7263 655f 6672 6163 7469 6f6e   @force_fraction
+000289e0: 2e73 6574 7465 720a 2020 2020 6465 6620  .setter.    def 
+000289f0: 666f 7263 655f 6672 6163 7469 6f6e 2873  force_fraction(s
+00028a00: 656c 662c 2061 7267 756d 656e 7429 3a0a  elf, argument):.
+00028a10: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00028a20: 7461 6e63 6528 6172 6775 6d65 6e74 2c20  tance(argument, 
+00028a30: 626f 6f6c 293a 0a20 2020 2020 2020 2020  bool):.         
+00028a40: 2020 2073 656c 662e 5f66 6f72 6365 5f66     self._force_f
+00028a50: 7261 6374 696f 6e20 3d20 6172 6775 6d65  raction = argume
+00028a60: 6e74 0a20 2020 2020 2020 2065 6c73 653a  nt.        else:
+00028a70: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00028a80: 7365 2054 7970 6545 7272 6f72 2866 2266  se TypeError(f"f
+00028a90: 6f72 6365 2066 7261 6374 696f 6e20 6d75  orce fraction mu
+00028aa0: 7374 2062 6520 626f 6f6c 6561 6e20 286e  st be boolean (n
+00028ab0: 6f74 207b 6172 6775 6d65 6e74 2172 7d29  ot {argument!r})
+00028ac0: 2e22 290a 0a20 2020 2040 7072 6f70 6572  .")..    @proper
+00028ad0: 7479 0a20 2020 2064 6566 2068 6964 6528  ty.    def hide(
+00028ae0: 7365 6c66 2920 2d3e 2062 6f6f 6c20 7c20  self) -> bool | 
+00028af0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7222  None:.        r"
+00028b00: 2222 0a20 2020 2020 2020 2049 7320 7472  "".        Is tr
+00028b10: 7565 2077 6865 6e20 7475 706c 6574 2062  ue when tuplet b
+00028b20: 7261 636b 6574 2068 6964 6573 2e0a 0a20  racket hides... 
+00028b30: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
+00028b40: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+00028b50: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00028b60: 7475 706c 6574 203d 2061 626a 6164 2e54  tuplet = abjad.T
+00028b70: 7570 6c65 7428 2832 2c20 3329 2c20 2263  uplet((2, 3), "c
+00028b80: 2738 2064 2738 2065 2738 2229 0a20 2020  '8 d'8 e'8").   
+00028b90: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
+00028ba0: 6164 2e73 686f 7728 7475 706c 6574 2920  ad.show(tuplet) 
+00028bb0: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
+00028bc0: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
+00028bd0: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
+00028be0: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+00028bf0: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+00028c00: 7970 6f6e 6428 7475 706c 6574 290a 2020  ypond(tuplet).  
+00028c10: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+00028c20: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
+00028c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028c40: 5c74 696d 6573 2032 2f33 0a20 2020 2020  \times 2/3.     
+00028c50: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00028c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028c70: 2063 2738 0a20 2020 2020 2020 2020 2020   c'8.           
+00028c80: 2020 2020 2020 2020 2064 2738 0a20 2020           d'8.   
+00028c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ca0: 2065 2738 0a20 2020 2020 2020 2020 2020   e'8.           
+00028cb0: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
+00028cc0: 2020 2020 3e3e 3e20 7475 706c 6574 2e68      >>> tuplet.h
+00028cd0: 6964 650a 2020 2020 2020 2020 2020 2020  ide.            
+00028ce0: 4661 6c73 650a 0a20 2020 2020 2020 202e  False..        .
+00028cf0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+00028d00: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+00028d10: 2020 2020 3e3e 3e20 7475 706c 6574 5f31      >>> tuplet_1
+00028d20: 203d 2061 626a 6164 2e54 7570 6c65 7428   = abjad.Tuplet(
+00028d30: 2832 2c20 3329 2c20 2263 2734 2064 2734  (2, 3), "c'4 d'4
+00028d40: 2065 2734 2229 0a20 2020 2020 2020 2020   e'4").         
+00028d50: 2020 203e 3e3e 2074 7570 6c65 745f 3220     >>> tuplet_2 
+00028d60: 3d20 6162 6a61 642e 5475 706c 6574 2828  = abjad.Tuplet((
+00028d70: 322c 2033 292c 2022 6427 3420 6527 3420  2, 3), "d'4 e'4 
+00028d80: 6627 3422 290a 2020 2020 2020 2020 2020  f'4").          
+00028d90: 2020 3e3e 3e20 7374 6166 6620 3d20 6162    >>> staff = ab
+00028da0: 6a61 642e 5374 6166 6628 5b74 7570 6c65  jad.Staff([tuple
+00028db0: 745f 312c 2074 7570 6c65 745f 325d 290a  t_1, tuplet_2]).
+00028dc0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00028dd0: 6162 6a61 642e 7368 6f77 2873 7461 6666  abjad.show(staff
+00028de0: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
+00028df0: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
+00028e00: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+00028e10: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00028e20: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
+00028e30: 696c 7970 6f6e 6428 7374 6166 6629 0a20  ilypond(staff). 
+00028e40: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+00028e50: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
+00028e60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028e70: 205c 6e65 7720 5374 6166 660a 2020 2020   \new Staff.    
+00028e80: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00028e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ea0: 2020 5c74 696d 6573 2032 2f33 0a20 2020    \times 2/3.   
+00028eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ec0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00028ed0: 2020 2020 2020 2020 2020 2063 2734 0a20             c'4. 
+00028ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ef0: 2020 2020 2020 2064 2734 0a20 2020 2020         d'4.     
+00028f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f10: 2020 2065 2734 0a20 2020 2020 2020 2020     e'4.         
+00028f20: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00028f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f40: 205c 7469 6d65 7320 322f 330a 2020 2020   \times 2/3.    
+00028f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f60: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00028f70: 2020 2020 2020 2020 2020 6427 340a 2020            d'4.  
+00028f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f90: 2020 2020 2020 6527 340a 2020 2020 2020        e'4.      
+00028fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028fb0: 2020 6627 340a 2020 2020 2020 2020 2020    f'4.          
+00028fc0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00028fd0: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
+00028fe0: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
+00028ff0: 7461 6666 5b30 5d2e 6869 6465 203d 2054  taff[0].hide = T
+00029000: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+00029010: 3e3e 3e20 6162 6a61 642e 7368 6f77 2873  >>> abjad.show(s
+00029020: 7461 6666 2920 2320 646f 6374 6573 743a  taff) # doctest:
+00029030: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+00029040: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
 00029050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029060: 2020 2066 2734 0a20 2020 2020 2020 2020     f'4.         
-00029070: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00029080: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
-00029090: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-000290a0: 7475 706c 6574 2e61 7070 656e 6428 6162  tuplet.append(ab
-000290b0: 6a61 642e 4e6f 7465 2822 6527 3422 2929  jad.Note("e'4"))
-000290c0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-000290d0: 2061 626a 6164 2e73 686f 7728 7475 706c   abjad.show(tupl
-000290e0: 6574 2920 2320 646f 6374 6573 743a 202b  et) # doctest: +
-000290f0: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
-00029100: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
-00029110: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-00029120: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-00029130: 2e6c 696c 7970 6f6e 6428 7475 706c 6574  .lilypond(tuplet
-00029140: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00029150: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
-00029160: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-00029170: 2020 2020 5c74 7765 616b 2065 6467 652d      \tweak edge-
-00029180: 6865 6967 6874 2023 2728 302e 3720 2e20  height #'(0.7 . 
-00029190: 3029 0a20 2020 2020 2020 2020 2020 2020  0).             
-000291a0: 2020 205c 7469 6d65 7320 322f 330a 2020     \times 2/3.  
-000291b0: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-000291c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000291d0: 2020 2020 6327 340a 2020 2020 2020 2020      c'4.        
-000291e0: 2020 2020 2020 2020 2020 2020 280a 2020              (.  
+00029060: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+00029070: 6164 2e6c 696c 7970 6f6e 6428 7374 6166  ad.lilypond(staf
+00029080: 6629 0a20 2020 2020 2020 2020 2020 2020  f).             
+00029090: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
+000290a0: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+000290b0: 2020 2020 205c 6e65 7720 5374 6166 660a       \new Staff.
+000290c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000290d0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+000290e0: 2020 2020 2020 5c73 6361 6c65 4475 7261        \scaleDura
+000290f0: 7469 6f6e 7320 2327 2832 202e 2033 290a  tions #'(2 . 3).
+00029100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029110: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00029120: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+00029130: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+00029140: 2020 2020 2020 2020 2020 6427 340a 2020            d'4.  
+00029150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029160: 2020 2020 2020 6527 340a 2020 2020 2020        e'4.      
+00029170: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+00029180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029190: 2020 2020 5c74 696d 6573 2032 2f33 0a20      \times 2/3. 
+000291a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000291b0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+000291c0: 2020 2020 2020 2020 2020 2020 2064 2734               d'4
+000291d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000291e0: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
 000291f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029200: 2020 6427 340a 2020 2020 2020 2020 2020    d'4.          
-00029210: 2020 2020 2020 2020 2020 6627 340a 2020            f'4.  
-00029220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029230: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-00029240: 2020 2020 2020 2020 6527 340a 2020 2020          e'4.    
-00029250: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
-00029260: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
-00029270: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
-00029280: 2020 2020 2020 2020 2020 2020 4170 7065              Appe
-00029290: 6e64 7320 6e6f 7465 2074 6f20 7475 706c  nds note to tupl
-000292a0: 6574 2061 6e64 2070 7265 7365 7276 6573  et and preserves
-000292b0: 2074 7570 6c65 7420 6475 7261 7469 6f6e   tuplet duration
-000292c0: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-000292d0: 3e3e 2074 7570 6c65 7420 3d20 6162 6a61  >> tuplet = abja
-000292e0: 642e 5475 706c 6574 2828 322c 2033 292c  d.Tuplet((2, 3),
-000292f0: 2022 6327 3420 2820 6427 3420 6627 3420   "c'4 ( d'4 f'4 
-00029300: 2922 290a 2020 2020 2020 2020 2020 2020  )").            
-00029310: 3e3e 3e20 6162 6a61 642e 7368 6f77 2874  >>> abjad.show(t
-00029320: 7570 6c65 7429 2023 2064 6f63 7465 7374  uplet) # doctest
-00029330: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-00029340: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
-00029350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029360: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-00029370: 6a61 642e 6c69 6c79 706f 6e64 2874 7570  jad.lilypond(tup
-00029380: 6c65 7429 0a20 2020 2020 2020 2020 2020  let).           
-00029390: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-000293a0: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-000293b0: 2020 2020 2020 205c 7469 6d65 7320 322f         \times 2/
-000293c0: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
-000293d0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-000293e0: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
-000293f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029400: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00029410: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-00029420: 2020 2020 2020 2020 2020 2020 2020 6627                f'
-00029430: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-00029440: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00029450: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
-00029460: 2020 2020 2020 203e 3e3e 2074 7570 6c65         >>> tuple
-00029470: 742e 6170 7065 6e64 2861 626a 6164 2e4e  t.append(abjad.N
-00029480: 6f74 6528 2265 2734 2229 2c20 7072 6573  ote("e'4"), pres
-00029490: 6572 7665 5f64 7572 6174 696f 6e3d 5472  erve_duration=Tr
-000294a0: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
-000294b0: 3e3e 3e20 6162 6a61 642e 7368 6f77 2874  >>> abjad.show(t
-000294c0: 7570 6c65 7429 2023 2064 6f63 7465 7374  uplet) # doctest
-000294d0: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-000294e0: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
-000294f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029500: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-00029510: 6a61 642e 6c69 6c79 706f 6e64 2874 7570  jad.lilypond(tup
-00029520: 6c65 7429 0a20 2020 2020 2020 2020 2020  let).           
-00029530: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-00029540: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-00029550: 2020 2020 2020 205c 7469 6d65 7320 312f         \times 1/
-00029560: 320a 2020 2020 2020 2020 2020 2020 2020  2.              
-00029570: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-00029580: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
-00029590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000295a0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000295b0: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-000295c0: 2020 2020 2020 2020 2020 2020 2020 6627                f'
-000295d0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-000295e0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000295f0: 2020 2020 2020 2020 2020 2020 6527 340a              e'4.
-00029600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029610: 7d0a 0a20 2020 2020 2020 2022 2222 0a20  }..        """. 
-00029620: 2020 2020 2020 2069 6620 7072 6573 6572         if preser
-00029630: 7665 5f64 7572 6174 696f 6e3a 0a20 2020  ve_duration:.   
-00029640: 2020 2020 2020 2020 206f 6c64 5f64 7572           old_dur
-00029650: 6174 696f 6e20 3d20 7365 6c66 2e5f 6765  ation = self._ge
-00029660: 745f 6475 7261 7469 6f6e 2829 0a20 2020  t_duration().   
-00029670: 2020 2020 2043 6f6e 7461 696e 6572 2e61       Container.a
-00029680: 7070 656e 6428 7365 6c66 2c20 636f 6d70  ppend(self, comp
-00029690: 6f6e 656e 742c 206c 616e 6775 6167 653d  onent, language=
-000296a0: 6c61 6e67 7561 6765 290a 2020 2020 2020  language).      
-000296b0: 2020 6966 2070 7265 7365 7276 655f 6475    if preserve_du
-000296c0: 7261 7469 6f6e 3a0a 2020 2020 2020 2020  ration:.        
-000296d0: 2020 2020 6e65 775f 6475 7261 7469 6f6e      new_duration
-000296e0: 203d 2073 656c 662e 5f67 6574 5f63 6f6e   = self._get_con
-000296f0: 7465 6e74 735f 6475 7261 7469 6f6e 2829  tents_duration()
-00029700: 0a20 2020 2020 2020 2020 2020 206d 756c  .            mul
-00029710: 7469 706c 6965 7220 3d20 6f6c 645f 6475  tiplier = old_du
-00029720: 7261 7469 6f6e 202f 206e 6577 5f64 7572  ration / new_dur
-00029730: 6174 696f 6e0a 2020 2020 2020 2020 2020  ation.          
-00029740: 2020 7365 6c66 2e6d 756c 7469 706c 6965    self.multiplie
-00029750: 7220 3d20 6d75 6c74 6970 6c69 6572 0a20  r = multiplier. 
-00029760: 2020 2020 2020 2020 2020 2061 7373 6572             asser
-00029770: 7420 7365 6c66 2e5f 6765 745f 6475 7261  t self._get_dura
-00029780: 7469 6f6e 2829 203d 3d20 6f6c 645f 6475  tion() == old_du
-00029790: 7261 7469 6f6e 0a0a 2020 2020 6465 6620  ration..    def 
-000297a0: 6175 676d 656e 7461 7469 6f6e 2873 656c  augmentation(sel
-000297b0: 6629 202d 3e20 626f 6f6c 3a0a 2020 2020  f) -> bool:.    
-000297c0: 2020 2020 7222 2222 0a20 2020 2020 2020      r""".       
-000297d0: 2049 7320 7472 7565 2077 6865 6e20 7475   Is true when tu
-000297e0: 706c 6574 206d 756c 7469 706c 6965 7220  plet multiplier 
-000297f0: 6973 2067 7265 6174 6572 2074 6861 6e20  is greater than 
-00029800: 6060 3160 602e 0a0a 2020 2020 2020 2020  ``1``...        
-00029810: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
-00029820: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
-00029830: 2020 2020 2041 7567 6d65 6e74 6564 2074       Augmented t
-00029840: 7570 6c65 743a 0a0a 2020 2020 2020 2020  uplet:..        
-00029850: 2020 2020 3e3e 3e20 7475 706c 6574 203d      >>> tuplet =
-00029860: 2061 626a 6164 2e54 7570 6c65 7428 2834   abjad.Tuplet((4
-00029870: 2c20 3329 2c20 2263 2738 2064 2738 2065  , 3), "c'8 d'8 e
-00029880: 2738 2229 0a20 2020 2020 2020 2020 2020  '8").           
+00029200: 2020 2020 2066 2734 0a20 2020 2020 2020       f'4.       
+00029210: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+00029220: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00029230: 0a0a 2020 2020 2020 2020 4869 6465 7320  ..        Hides 
+00029240: 7475 706c 6574 2062 7261 636b 6574 2061  tuplet bracket a
+00029250: 6e64 2074 7570 6c65 7420 6e75 6d62 6572  nd tuplet number
+00029260: 2077 6865 6e20 7472 7565 2e0a 2020 2020   when true..    
+00029270: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00029280: 7265 7475 726e 2073 656c 662e 5f68 6964  return self._hid
+00029290: 650a 0a20 2020 2040 6869 6465 2e73 6574  e..    @hide.set
+000292a0: 7465 720a 2020 2020 6465 6620 6869 6465  ter.    def hide
+000292b0: 2873 656c 662c 2061 7267 756d 656e 7429  (self, argument)
+000292c0: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
+000292d0: 2069 7369 6e73 7461 6e63 6528 6172 6775   isinstance(argu
+000292e0: 6d65 6e74 2c20 626f 6f6c 292c 2072 6570  ment, bool), rep
+000292f0: 7228 6172 6775 6d65 6e74 290a 2020 2020  r(argument).    
+00029300: 2020 2020 7365 6c66 2e5f 6869 6465 203d      self._hide =
+00029310: 2061 7267 756d 656e 740a 0a20 2020 2040   argument..    @
+00029320: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00029330: 2069 6d70 6c69 6564 5f70 726f 6c61 7469   implied_prolati
+00029340: 6f6e 2873 656c 6629 202d 3e20 5f64 7572  on(self) -> _dur
+00029350: 6174 696f 6e2e 4d75 6c74 6970 6c69 6572  ation.Multiplier
+00029360: 3a0a 2020 2020 2020 2020 7222 2222 0a20  :.        r""". 
+00029370: 2020 2020 2020 2047 6574 7320 696d 706c         Gets impl
+00029380: 6965 6420 7072 6f6c 6174 696f 6e20 6f66  ied prolation of
+00029390: 2074 7570 6c65 742e 0a0a 2020 2020 2020   tuplet...      
+000293a0: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
+000293b0: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
+000293c0: 2020 2020 2020 203e 3e3e 2074 7570 6c65         >>> tuple
+000293d0: 7420 3d20 6162 6a61 642e 5475 706c 6574  t = abjad.Tuplet
+000293e0: 2828 322c 2033 292c 2022 6327 3820 6427  ((2, 3), "c'8 d'
+000293f0: 3820 6527 3822 290a 2020 2020 2020 2020  8 e'8").        
+00029400: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
+00029410: 6f77 2874 7570 6c65 7429 2023 2064 6f63  ow(tuplet) # doc
+00029420: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
+00029430: 2020 2020 2020 2020 203e 3e3e 2074 7570           >>> tup
+00029440: 6c65 742e 696d 706c 6965 645f 7072 6f6c  let.implied_prol
+00029450: 6174 696f 6e0a 2020 2020 2020 2020 2020  ation.          
+00029460: 2020 4d75 6c74 6970 6c69 6572 2832 2c20    Multiplier(2, 
+00029470: 3329 0a0a 2020 2020 2020 2020 2222 220a  3)..        """.
+00029480: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+00029490: 6475 7261 7469 6f6e 2e4d 756c 7469 706c  duration.Multipl
+000294a0: 6965 7228 7365 6c66 2e6d 756c 7469 706c  ier(self.multipl
+000294b0: 6965 7229 0a0a 2020 2020 4070 726f 7065  ier)..    @prope
+000294c0: 7274 790a 2020 2020 6465 6620 6d75 6c74  rty.    def mult
+000294d0: 6970 6c69 6564 5f64 7572 6174 696f 6e28  iplied_duration(
+000294e0: 7365 6c66 2920 2d3e 205f 6475 7261 7469  self) -> _durati
+000294f0: 6f6e 2e44 7572 6174 696f 6e3a 0a20 2020  on.Duration:.   
+00029500: 2020 2020 2072 2222 220a 2020 2020 2020       r""".      
+00029510: 2020 4765 7473 206d 756c 7469 706c 6965    Gets multiplie
+00029520: 6420 6475 7261 7469 6f6e 206f 6620 7475  d duration of tu
+00029530: 706c 6574 2e0a 0a20 2020 2020 2020 202e  plet...        .
+00029540: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+00029550: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+00029560: 2020 2020 3e3e 3e20 7475 706c 6574 203d      >>> tuplet =
+00029570: 2061 626a 6164 2e54 7570 6c65 7428 2832   abjad.Tuplet((2
+00029580: 2c20 3329 2c20 2263 2738 2064 2738 2065  , 3), "c'8 d'8 e
+00029590: 2738 2229 0a0a 2020 2020 2020 2020 2020  '8")..          
+000295a0: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+000295b0: 2874 7570 6c65 7429 2023 2064 6f63 7465  (tuplet) # docte
+000295c0: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+000295d0: 2020 2020 2020 203e 3e3e 2074 7570 6c65         >>> tuple
+000295e0: 742e 6d75 6c74 6970 6c69 6564 5f64 7572  t.multiplied_dur
+000295f0: 6174 696f 6e0a 2020 2020 2020 2020 2020  ation.          
+00029600: 2020 4475 7261 7469 6f6e 2831 2c20 3429    Duration(1, 4)
+00029610: 0a0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00029620: 2020 2020 2020 7265 7475 726e 205f 6475        return _du
+00029630: 7261 7469 6f6e 2e44 7572 6174 696f 6e28  ration.Duration(
+00029640: 7365 6c66 2e6d 756c 7469 706c 6965 7220  self.multiplier 
+00029650: 2a20 7365 6c66 2e5f 6765 745f 636f 6e74  * self._get_cont
+00029660: 656e 7473 5f64 7572 6174 696f 6e28 2929  ents_duration())
+00029670: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+00029680: 2020 2020 6465 6620 6d75 6c74 6970 6c69      def multipli
+00029690: 6572 2873 656c 6629 202d 3e20 5f64 7572  er(self) -> _dur
+000296a0: 6174 696f 6e2e 4e6f 6e72 6564 7563 6564  ation.Nonreduced
+000296b0: 4672 6163 7469 6f6e 3a0a 2020 2020 2020  Fraction:.      
+000296c0: 2020 7222 2222 0a20 2020 2020 2020 2047    r""".        G
+000296d0: 6574 7320 616e 6420 7365 7473 206d 756c  ets and sets mul
+000296e0: 7469 706c 6965 7220 6f66 2074 7570 6c65  tiplier of tuple
+000296f0: 742e 0a0a 2020 2020 2020 2020 2e2e 2020  t...        ..  
+00029700: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
+00029710: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
+00029720: 2047 6574 7320 7475 706c 6574 206d 756c   Gets tuplet mul
+00029730: 7469 706c 6965 723a 0a0a 2020 2020 2020  tiplier:..      
+00029740: 2020 2020 2020 2020 2020 3e3e 3e20 7475            >>> tu
+00029750: 706c 6574 203d 2061 626a 6164 2e54 7570  plet = abjad.Tup
+00029760: 6c65 7428 2832 2c20 3329 2c20 2263 2738  let((2, 3), "c'8
+00029770: 2064 2738 2065 2738 2229 0a20 2020 2020   d'8 e'8").     
+00029780: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+00029790: 626a 6164 2e73 686f 7728 7475 706c 6574  bjad.show(tuplet
+000297a0: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
+000297b0: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
+000297c0: 3e3e 3e20 7475 706c 6574 2e6d 756c 7469  >>> tuplet.multi
+000297d0: 706c 6965 720a 2020 2020 2020 2020 2020  plier.          
+000297e0: 2020 4e6f 6e72 6564 7563 6564 4672 6163    NonreducedFrac
+000297f0: 7469 6f6e 2832 2c20 3329 0a0a 2020 2020  tion(2, 3)..    
+00029800: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+00029810: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+00029820: 2020 2020 2020 2020 2053 6574 7320 7475           Sets tu
+00029830: 706c 6574 206d 756c 7469 706c 6965 723a  plet multiplier:
+00029840: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00029850: 2020 3e3e 3e20 7475 706c 6574 2e6d 756c    >>> tuplet.mul
+00029860: 7469 706c 6965 7220 3d20 6162 6a61 642e  tiplier = abjad.
+00029870: 4d75 6c74 6970 6c69 6572 2834 2c20 3329  Multiplier(4, 3)
+00029880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00029890: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
 000298a0: 7475 706c 6574 2920 2320 646f 6374 6573  tuplet) # doctes
 000298b0: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-000298c0: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
-000298d0: 2e61 7567 6d65 6e74 6174 696f 6e28 290a  .augmentation().
-000298e0: 2020 2020 2020 2020 2020 2020 5472 7565              True
-000298f0: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
-00029900: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-00029910: 650a 0a20 2020 2020 2020 2020 2020 2044  e..            D
-00029920: 696d 696e 6973 6865 6420 7475 706c 6574  iminished tuplet
-00029930: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-00029940: 3e3e 2074 7570 6c65 7420 3d20 6162 6a61  >> tuplet = abja
-00029950: 642e 5475 706c 6574 2828 322c 2033 292c  d.Tuplet((2, 3),
-00029960: 2022 6327 3420 6427 3420 6527 3422 290a   "c'4 d'4 e'4").
-00029970: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00029980: 6162 6a61 642e 7368 6f77 2874 7570 6c65  abjad.show(tuple
-00029990: 7429 2023 2064 6f63 7465 7374 3a20 2b53  t) # doctest: +S
-000299a0: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
-000299b0: 203e 3e3e 2074 7570 6c65 742e 6175 676d   >>> tuplet.augm
-000299c0: 656e 7461 7469 6f6e 2829 0a20 2020 2020  entation().     
-000299d0: 2020 2020 2020 2046 616c 7365 0a0a 2020         False..  
-000299e0: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
-000299f0: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-00029a00: 2020 2020 2020 2020 2020 2054 7269 7669             Trivi
-00029a10: 616c 2074 7570 6c65 743a 0a0a 2020 2020  al tuplet:..    
-00029a20: 2020 2020 2020 2020 3e3e 3e20 7475 706c          >>> tupl
-00029a30: 6574 203d 2061 626a 6164 2e54 7570 6c65  et = abjad.Tuple
-00029a40: 7428 2831 2c20 3129 2c20 2263 2738 2e20  t((1, 1), "c'8. 
-00029a50: 6427 382e 2065 2738 2e22 290a 2020 2020  d'8. e'8.").    
-00029a60: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-00029a70: 642e 7368 6f77 2874 7570 6c65 7429 2023  d.show(tuplet) #
-00029a80: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
-00029a90: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00029aa0: 2074 7570 6c65 742e 6175 676d 656e 7461   tuplet.augmenta
-00029ab0: 7469 6f6e 2829 0a20 2020 2020 2020 2020  tion().         
-00029ac0: 2020 2046 616c 7365 0a0a 2020 2020 2020     False..      
-00029ad0: 2020 2222 220a 2020 2020 2020 2020 6966    """.        if
-00029ae0: 2073 656c 662e 6d75 6c74 6970 6c69 6572   self.multiplier
-00029af0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00029b00: 7475 726e 2031 203c 2073 656c 662e 6d75  turn 1 < self.mu
-00029b10: 6c74 6970 6c69 6572 0a20 2020 2020 2020  ltiplier.       
-00029b20: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00029b30: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
-00029b40: 0a20 2020 2064 6566 2064 696d 696e 7574  .    def diminut
-00029b50: 696f 6e28 7365 6c66 2920 2d3e 2062 6f6f  ion(self) -> boo
-00029b60: 6c3a 0a20 2020 2020 2020 2072 2222 220a  l:.        r""".
-00029b70: 2020 2020 2020 2020 4973 2074 7275 6520          Is true 
-00029b80: 7768 656e 2074 7570 6c65 7420 6d75 6c74  when tuplet mult
-00029b90: 6970 6c69 6572 2069 7320 6c65 7373 2074  iplier is less t
-00029ba0: 6861 6e20 6060 3160 602e 0a0a 2020 2020  han ``1``...    
-00029bb0: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-00029bc0: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-00029bd0: 2020 2020 2020 2020 2041 7567 6d65 6e74           Augment
-00029be0: 6564 2074 7570 6c65 743a 0a0a 2020 2020  ed tuplet:..    
-00029bf0: 2020 2020 2020 2020 3e3e 3e20 7475 706c          >>> tupl
-00029c00: 6574 203d 2061 626a 6164 2e54 7570 6c65  et = abjad.Tuple
-00029c10: 7428 2834 2c20 3329 2c20 2263 2738 2064  t((4, 3), "c'8 d
-00029c20: 2738 2065 2738 2229 0a20 2020 2020 2020  '8 e'8").       
-00029c30: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-00029c40: 686f 7728 7475 706c 6574 2920 2320 646f  how(tuplet) # do
-00029c50: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-00029c60: 2020 2020 2020 2020 2020 3e3e 3e20 7475            >>> tu
-00029c70: 706c 6574 2e64 696d 696e 7574 696f 6e28  plet.diminution(
-00029c80: 290a 2020 2020 2020 2020 2020 2020 4661  ).            Fa
-00029c90: 6c73 650a 0a20 2020 2020 2020 202e 2e20  lse..        .. 
-00029ca0: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
-00029cb0: 6d70 6c65 0a0a 2020 2020 2020 2020 2020  mple..          
-00029cc0: 2020 4469 6d69 6e69 7368 6564 2074 7570    Diminished tup
-00029cd0: 6c65 743a 0a0a 2020 2020 2020 2020 2020  let:..          
-00029ce0: 2020 3e3e 3e20 7475 706c 6574 203d 2061    >>> tuplet = a
-00029cf0: 626a 6164 2e54 7570 6c65 7428 2832 2c20  bjad.Tuplet((2, 
-00029d00: 3329 2c20 2263 2734 2064 2734 2065 2734  3), "c'4 d'4 e'4
-00029d10: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
-00029d20: 3e3e 2061 626a 6164 2e73 686f 7728 7475  >> abjad.show(tu
-00029d30: 706c 6574 2920 2320 646f 6374 6573 743a  plet) # doctest:
-00029d40: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
-00029d50: 2020 2020 3e3e 3e20 7475 706c 6574 2e64      >>> tuplet.d
-00029d60: 696d 696e 7574 696f 6e28 290a 2020 2020  iminution().    
-00029d70: 2020 2020 2020 2020 5472 7565 0a0a 2020          True..  
-00029d80: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
-00029d90: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-00029da0: 2020 2020 2020 2020 2020 2054 7269 7669             Trivi
-00029db0: 616c 2074 7570 6c65 743a 0a0a 2020 2020  al tuplet:..    
-00029dc0: 2020 2020 2020 2020 3e3e 3e20 7475 706c          >>> tupl
-00029dd0: 6574 203d 2061 626a 6164 2e54 7570 6c65  et = abjad.Tuple
-00029de0: 7428 2831 2c20 3129 2c20 2263 2738 2e20  t((1, 1), "c'8. 
-00029df0: 6427 382e 2065 2738 2e22 290a 2020 2020  d'8. e'8.").    
-00029e00: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-00029e10: 642e 7368 6f77 2874 7570 6c65 7429 2023  d.show(tuplet) #
-00029e20: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
-00029e30: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00029e40: 2074 7570 6c65 742e 6469 6d69 6e75 7469   tuplet.diminuti
-00029e50: 6f6e 2829 0a20 2020 2020 2020 2020 2020  on().           
-00029e60: 2046 616c 7365 0a0a 2020 2020 2020 2020   False..        
-00029e70: 2222 220a 2020 2020 2020 2020 6966 2073  """.        if s
-00029e80: 656c 662e 6d75 6c74 6970 6c69 6572 3a0a  elf.multiplier:.
-00029e90: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00029ea0: 726e 2073 656c 662e 6d75 6c74 6970 6c69  rn self.multipli
-00029eb0: 6572 203c 2031 0a20 2020 2020 2020 2065  er < 1.        e
-00029ec0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00029ed0: 2072 6574 7572 6e20 4661 6c73 650a 0a20   return False.. 
-00029ee0: 2020 2064 6566 2065 7874 656e 6428 0a20     def extend(. 
-00029ef0: 2020 2020 2020 2073 656c 662c 2061 7267         self, arg
-00029f00: 756d 656e 742c 202a 2c20 6c61 6e67 7561  ument, *, langua
-00029f10: 6765 3a20 7374 7220 3d20 2265 6e67 6c69  ge: str = "engli
-00029f20: 7368 222c 2070 7265 7365 7276 655f 6475  sh", preserve_du
-00029f30: 7261 7469 6f6e 3d46 616c 7365 0a20 2020  ration=False.   
-00029f40: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00029f50: 2020 2020 7222 2222 0a20 2020 2020 2020      r""".       
-00029f60: 2045 7874 656e 6473 2074 7570 6c65 7420   Extends tuplet 
-00029f70: 7769 7468 2060 6061 7267 756d 656e 7460  with ``argument`
-00029f80: 602e 0a0a 2020 2020 2020 2020 2e2e 2020  `...        ..  
-00029f90: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-00029fa0: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
-00029fb0: 2045 7874 656e 6473 2074 7570 6c65 7420   Extends tuplet 
-00029fc0: 7769 7468 2074 6872 6565 206e 6f74 6573  with three notes
-00029fd0: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-00029fe0: 3e3e 2074 7570 6c65 7420 3d20 6162 6a61  >> tuplet = abja
-00029ff0: 642e 5475 706c 6574 2828 322c 2033 292c  d.Tuplet((2, 3),
-0002a000: 2022 6327 3420 2820 6427 3420 6627 3420   "c'4 ( d'4 f'4 
-0002a010: 2922 290a 2020 2020 2020 2020 2020 2020  )").            
-0002a020: 3e3e 3e20 6162 6a61 642e 7368 6f77 2874  >>> abjad.show(t
-0002a030: 7570 6c65 7429 2023 2064 6f63 7465 7374  uplet) # doctest
-0002a040: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-0002a050: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
-0002a060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a070: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-0002a080: 6a61 642e 6c69 6c79 706f 6e64 2874 7570  jad.lilypond(tup
-0002a090: 6c65 7429 0a20 2020 2020 2020 2020 2020  let).           
-0002a0a0: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-0002a0b0: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-0002a0c0: 2020 2020 2020 205c 7469 6d65 7320 322f         \times 2/
-0002a0d0: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
-0002a0e0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0002a0f0: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
+000298c0: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
+000298d0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000298e0: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
+000298f0: 626a 6164 2e6c 696c 7970 6f6e 6428 7475  bjad.lilypond(tu
+00029900: 706c 6574 290a 2020 2020 2020 2020 2020  plet).          
+00029910: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+00029920: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+00029930: 2020 2020 2020 2020 5c74 7765 616b 2074          \tweak t
+00029940: 6578 7420 2374 7570 6c65 742d 6e75 6d62  ext #tuplet-numb
+00029950: 6572 3a3a 6361 6c63 2d66 7261 6374 696f  er::calc-fractio
+00029960: 6e2d 7465 7874 0a20 2020 2020 2020 2020  n-text.         
+00029970: 2020 2020 2020 205c 7469 6d65 7320 342f         \times 4/
+00029980: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
+00029990: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+000299a0: 2020 2020 2020 2020 6327 380a 2020 2020          c'8.    
+000299b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000299c0: 6427 380a 2020 2020 2020 2020 2020 2020  d'8.            
+000299d0: 2020 2020 2020 2020 6527 380a 2020 2020          e'8.    
+000299e0: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
+000299f0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00029a00: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00029a10: 6d75 6c74 6970 6c69 6572 0a0a 2020 2020  multiplier..    
+00029a20: 406d 756c 7469 706c 6965 722e 7365 7474  @multiplier.sett
+00029a30: 6572 0a20 2020 2064 6566 206d 756c 7469  er.    def multi
+00029a40: 706c 6965 7228 7365 6c66 2c20 6172 6775  plier(self, argu
+00029a50: 6d65 6e74 293a 0a20 2020 2020 2020 2069  ment):.        i
+00029a60: 6620 6973 696e 7374 616e 6365 2861 7267  f isinstance(arg
+00029a70: 756d 656e 742c 2069 6e74 207c 2071 7569  ument, int | qui
+00029a80: 636b 7469 6f6e 732e 4672 6163 7469 6f6e  cktions.Fraction
+00029a90: 293a 0a20 2020 2020 2020 2020 2020 206d  ):.            m
+00029aa0: 756c 7469 706c 6965 7220 3d20 5f64 7572  ultiplier = _dur
+00029ab0: 6174 696f 6e2e 4e6f 6e72 6564 7563 6564  ation.Nonreduced
+00029ac0: 4672 6163 7469 6f6e 2861 7267 756d 656e  Fraction(argumen
+00029ad0: 7429 0a20 2020 2020 2020 2065 6c69 6620  t).        elif 
+00029ae0: 6973 696e 7374 616e 6365 2861 7267 756d  isinstance(argum
+00029af0: 656e 742c 2074 7570 6c65 293a 0a20 2020  ent, tuple):.   
+00029b00: 2020 2020 2020 2020 206d 756c 7469 706c           multipl
+00029b10: 6965 7220 3d20 5f64 7572 6174 696f 6e2e  ier = _duration.
+00029b20: 4e6f 6e72 6564 7563 6564 4672 6163 7469  NonreducedFracti
+00029b30: 6f6e 2861 7267 756d 656e 7429 0a20 2020  on(argument).   
+00029b40: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00029b50: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00029b60: 7565 4572 726f 7228 6622 6361 6e20 6e6f  ueError(f"can no
+00029b70: 7420 7365 7420 7475 706c 6574 206d 756c  t set tuplet mul
+00029b80: 7469 706c 6965 723a 207b 6172 6775 6d65  tiplier: {argume
+00029b90: 6e74 2172 7d2e 2229 0a20 2020 2020 2020  nt!r}.").       
+00029ba0: 2069 6620 3020 3c20 6d75 6c74 6970 6c69   if 0 < multipli
+00029bb0: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
+00029bc0: 7365 6c66 2e5f 6d75 6c74 6970 6c69 6572  self._multiplier
+00029bd0: 203d 206d 756c 7469 706c 6965 720a 2020   = multiplier.  
+00029be0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00029bf0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+00029c00: 6c75 6545 7272 6f72 2866 2274 7570 6c65  lueError(f"tuple
+00029c10: 7420 6d75 6c74 6970 6c69 6572 206d 7573  t multiplier mus
+00029c20: 7420 6265 2070 6f73 6974 6976 653a 207b  t be positive: {
+00029c30: 6172 6775 6d65 6e74 2172 7d2e 2229 0a0a  argument!r}.")..
+00029c40: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
+00029c50: 2020 6465 6620 7461 6728 7365 6c66 2920    def tag(self) 
+00029c60: 2d3e 205f 7461 672e 5461 6720 7c20 4e6f  -> _tag.Tag | No
+00029c70: 6e65 3a0a 2020 2020 2020 2020 7222 2222  ne:.        r"""
+00029c80: 0a20 2020 2020 2020 2047 6574 7320 7461  .        Gets ta
+00029c90: 672e 0a0a 2020 2020 2020 2020 2e2e 2020  g...        ..  
+00029ca0: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
+00029cb0: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
+00029cc0: 203e 3e3e 2074 7570 6c65 7420 3d20 6162   >>> tuplet = ab
+00029cd0: 6a61 642e 5475 706c 6574 280a 2020 2020  jad.Tuplet(.    
+00029ce0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+00029cf0: 2832 2c20 3329 2c20 2263 2734 2064 2720  (2, 3), "c'4 d' 
+00029d00: 6527 222c 2074 6167 3d61 626a 6164 2e54  e'", tag=abjad.T
+00029d10: 6167 2827 5245 4427 290a 2020 2020 2020  ag('RED').      
+00029d20: 2020 2020 2020 2e2e 2e20 290a 2020 2020        ... ).    
+00029d30: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+00029d40: 642e 7368 6f77 2874 7570 6c65 7429 2023  d.show(tuplet) #
+00029d50: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
+00029d60: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00029d70: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
+00029d80: 6c69 6c79 706f 6e64 2874 7570 6c65 742c  lilypond(tuplet,
+00029d90: 2074 6167 733d 5472 7565 290a 2020 2020   tags=True).    
+00029da0: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+00029db0: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+00029dc0: 2020 2020 2020 2521 2052 4544 0a20 2020        %! RED.   
+00029dd0: 2020 2020 2020 2020 205c 7469 6d65 7320           \times 
+00029de0: 322f 330a 2020 2020 2020 2020 2020 2020  2/3.            
+00029df0: 2521 2052 4544 0a20 2020 2020 2020 2020  %! RED.         
+00029e00: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+00029e10: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
+00029e20: 2020 2020 2020 2020 2064 2734 0a20 2020           d'4.   
+00029e30: 2020 2020 2020 2020 2020 2020 2065 2734               e'4
+00029e40: 0a20 2020 2020 2020 2020 2020 2025 2120  .            %! 
+00029e50: 5245 440a 2020 2020 2020 2020 2020 2020  RED.            
+00029e60: 7d0a 0a20 2020 2020 2020 2022 2222 0a20  }..        """. 
+00029e70: 2020 2020 2020 2072 6574 7572 6e20 7375         return su
+00029e80: 7065 7228 292e 7461 670a 0a20 2020 2023  per().tag..    #
+00029e90: 2323 2050 5542 4c49 4320 4d45 5448 4f44  ## PUBLIC METHOD
+00029ea0: 5320 2323 230a 0a20 2020 2064 6566 2061  S ###..    def a
+00029eb0: 7070 656e 6428 0a20 2020 2020 2020 2073  ppend(.        s
+00029ec0: 656c 662c 0a20 2020 2020 2020 2063 6f6d  elf,.        com
+00029ed0: 706f 6e65 6e74 3a20 436f 6d70 6f6e 656e  ponent: Componen
+00029ee0: 742c 0a20 2020 2020 2020 202a 2c0a 2020  t,.        *,.  
+00029ef0: 2020 2020 2020 6c61 6e67 7561 6765 3a20        language: 
+00029f00: 7374 7220 3d20 2265 6e67 6c69 7368 222c  str = "english",
+00029f10: 0a20 2020 2020 2020 2070 7265 7365 7276  .        preserv
+00029f20: 655f 6475 7261 7469 6f6e 3d46 616c 7365  e_duration=False
+00029f30: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+00029f40: 0a20 2020 2020 2020 2072 2222 220a 2020  .        r""".  
+00029f50: 2020 2020 2020 4170 7065 6e64 7320 6060        Appends ``
+00029f60: 636f 6d70 6f6e 656e 7460 6020 746f 2074  component`` to t
+00029f70: 7570 6c65 742e 0a0a 2020 2020 2020 2020  uplet...        
+00029f80: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+00029f90: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+00029fa0: 2020 2020 2041 7070 656e 6473 206e 6f74       Appends not
+00029fb0: 6520 746f 2074 7570 6c65 743a 0a0a 2020  e to tuplet:..  
+00029fc0: 2020 2020 2020 2020 2020 3e3e 3e20 7475            >>> tu
+00029fd0: 706c 6574 203d 2061 626a 6164 2e54 7570  plet = abjad.Tup
+00029fe0: 6c65 7428 2832 2c20 3329 2c20 2263 2734  let((2, 3), "c'4
+00029ff0: 2028 2064 2734 2066 2734 2029 2229 0a20   ( d'4 f'4 )"). 
+0002a000: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+0002a010: 626a 6164 2e73 686f 7728 7475 706c 6574  bjad.show(tuplet
+0002a020: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
+0002a030: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
+0002a040: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+0002a050: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002a060: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
+0002a070: 696c 7970 6f6e 6428 7475 706c 6574 290a  ilypond(tuplet).
+0002a080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a090: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
+0002a0a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002a0b0: 2020 5c74 696d 6573 2032 2f33 0a20 2020    \times 2/3.   
+0002a0c0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+0002a0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a0e0: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
+0002a0f0: 2020 2020 2020 2020 2020 2028 0a20 2020             (.   
 0002a100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a110: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0002a120: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-0002a130: 2020 2020 2020 2020 2020 2020 2020 6627                f'
-0002a140: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0002a150: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0002a160: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
-0002a170: 2020 2020 2020 203e 3e3e 206e 6f74 6573         >>> notes
-0002a180: 203d 205b 6162 6a61 642e 4e6f 7465 2822   = [abjad.Note("
-0002a190: 6527 3332 2229 2c20 6162 6a61 642e 4e6f  e'32"), abjad.No
-0002a1a0: 7465 2822 6427 3332 2229 2c20 6162 6a61  te("d'32"), abja
-0002a1b0: 642e 4e6f 7465 2822 6527 3136 2229 5d0a  d.Note("e'16")].
-0002a1c0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002a1d0: 7475 706c 6574 2e65 7874 656e 6428 6e6f  tuplet.extend(no
-0002a1e0: 7465 7329 0a20 2020 2020 2020 2020 2020  tes).           
-0002a1f0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-0002a200: 7475 706c 6574 2920 2320 646f 6374 6573  tuplet) # doctes
-0002a210: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-0002a220: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-0002a230: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002a240: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-0002a250: 626a 6164 2e6c 696c 7970 6f6e 6428 7475  bjad.lilypond(tu
-0002a260: 706c 6574 290a 2020 2020 2020 2020 2020  plet).          
-0002a270: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-0002a280: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-0002a290: 2020 2020 2020 2020 5c74 7765 616b 2065          \tweak e
-0002a2a0: 6467 652d 6865 6967 6874 2023 2728 302e  dge-height #'(0.
-0002a2b0: 3720 2e20 3029 0a20 2020 2020 2020 2020  7 . 0).         
-0002a2c0: 2020 2020 2020 205c 7469 6d65 7320 322f         \times 2/
-0002a2d0: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
-0002a2e0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0002a2f0: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
-0002a300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a310: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0002a320: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-0002a330: 2020 2020 2020 2020 2020 2020 2020 6627                f'
-0002a340: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0002a350: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0002a360: 2020 2020 2020 2020 2020 2020 6527 3332              e'32
-0002a370: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a380: 2020 2020 2064 2733 320a 2020 2020 2020       d'32.      
-0002a390: 2020 2020 2020 2020 2020 2020 2020 6527                e'
-0002a3a0: 3136 0a20 2020 2020 2020 2020 2020 2020  16.             
-0002a3b0: 2020 207d 0a0a 2020 2020 2020 2020 2e2e     }..        ..
-0002a3c0: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
-0002a3d0: 616d 706c 650a 0a20 2020 2020 2020 2020  ample..         
-0002a3e0: 2020 2045 7874 656e 6473 2074 7570 6c65     Extends tuple
-0002a3f0: 7420 7769 7468 2074 6872 6565 206e 6f74  t with three not
-0002a400: 6573 2061 6e64 2070 7265 7365 7276 6573  es and preserves
-0002a410: 2074 7570 6c65 7420 6475 7261 7469 6f6e   tuplet duration
-0002a420: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-0002a430: 3e3e 2074 7570 6c65 7420 3d20 6162 6a61  >> tuplet = abja
-0002a440: 642e 5475 706c 6574 2828 322c 2033 292c  d.Tuplet((2, 3),
-0002a450: 2022 6327 3420 2820 6427 3420 6627 3420   "c'4 ( d'4 f'4 
-0002a460: 2922 290a 2020 2020 2020 2020 2020 2020  )").            
-0002a470: 3e3e 3e20 6162 6a61 642e 7368 6f77 2874  >>> abjad.show(t
-0002a480: 7570 6c65 7429 2023 2064 6f63 7465 7374  uplet) # doctest
-0002a490: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-0002a4a0: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
-0002a4b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a4c0: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-0002a4d0: 6a61 642e 6c69 6c79 706f 6e64 2874 7570  jad.lilypond(tup
-0002a4e0: 6c65 7429 0a20 2020 2020 2020 2020 2020  let).           
-0002a4f0: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-0002a500: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-0002a510: 2020 2020 2020 205c 7469 6d65 7320 322f         \times 2/
-0002a520: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
-0002a530: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0002a540: 2020 2020 2020 2020 6327 340a 2020 2020          c'4.    
-0002a550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a560: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0002a570: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-0002a580: 2020 2020 2020 2020 2020 2020 2020 6627                f'
-0002a590: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0002a5a0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0002a5b0: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
-0002a5c0: 2020 2020 2020 203e 3e3e 206e 6f74 6573         >>> notes
-0002a5d0: 203d 205b 6162 6a61 642e 4e6f 7465 2822   = [abjad.Note("
-0002a5e0: 6527 3332 2229 2c20 6162 6a61 642e 4e6f  e'32"), abjad.No
-0002a5f0: 7465 2822 6427 3332 2229 2c20 6162 6a61  te("d'32"), abja
-0002a600: 642e 4e6f 7465 2822 6527 3136 2229 5d0a  d.Note("e'16")].
-0002a610: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002a620: 7475 706c 6574 2e65 7874 656e 6428 6e6f  tuplet.extend(no
-0002a630: 7465 732c 2070 7265 7365 7276 655f 6475  tes, preserve_du
-0002a640: 7261 7469 6f6e 3d54 7275 6529 0a20 2020  ration=True).   
-0002a650: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
-0002a660: 6164 2e73 686f 7728 7475 706c 6574 2920  ad.show(tuplet) 
-0002a670: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
-0002a680: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
-0002a690: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
-0002a6a0: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-0002a6b0: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-0002a6c0: 7970 6f6e 6428 7475 706c 6574 290a 2020  ypond(tuplet).  
-0002a6d0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-0002a6e0: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-0002a6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a700: 5c74 696d 6573 2034 2f37 0a20 2020 2020  \times 4/7.     
-0002a710: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-0002a720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a730: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
-0002a740: 2020 2020 2020 2020 2028 0a20 2020 2020           (.     
-0002a750: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0002a760: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-0002a770: 2020 2020 2020 2066 2734 0a20 2020 2020         f'4.     
-0002a780: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0002a790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a7a0: 2020 2020 2065 2733 320a 2020 2020 2020       e'32.      
-0002a7b0: 2020 2020 2020 2020 2020 2020 2020 6427                d'
-0002a7c0: 3332 0a20 2020 2020 2020 2020 2020 2020  32.             
-0002a7d0: 2020 2020 2020 2065 2731 360a 2020 2020         e'16.    
-0002a7e0: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
-0002a7f0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0002a800: 2020 2069 6620 7072 6573 6572 7665 5f64     if preserve_d
-0002a810: 7572 6174 696f 6e3a 0a20 2020 2020 2020  uration:.       
-0002a820: 2020 2020 206f 6c64 5f64 7572 6174 696f       old_duratio
-0002a830: 6e20 3d20 7365 6c66 2e5f 6765 745f 6475  n = self._get_du
-0002a840: 7261 7469 6f6e 2829 0a20 2020 2020 2020  ration().       
-0002a850: 2043 6f6e 7461 696e 6572 2e65 7874 656e   Container.exten
-0002a860: 6428 7365 6c66 2c20 6172 6775 6d65 6e74  d(self, argument
-0002a870: 2c20 6c61 6e67 7561 6765 3d6c 616e 6775  , language=langu
-0002a880: 6167 6529 0a20 2020 2020 2020 2069 6620  age).        if 
-0002a890: 7072 6573 6572 7665 5f64 7572 6174 696f  preserve_duratio
-0002a8a0: 6e3a 0a20 2020 2020 2020 2020 2020 206e  n:.            n
-0002a8b0: 6577 5f64 7572 6174 696f 6e20 3d20 7365  ew_duration = se
-0002a8c0: 6c66 2e5f 6765 745f 636f 6e74 656e 7473  lf._get_contents
-0002a8d0: 5f64 7572 6174 696f 6e28 290a 2020 2020  _duration().    
-0002a8e0: 2020 2020 2020 2020 6d75 6c74 6970 6c69          multipli
-0002a8f0: 6572 203d 206f 6c64 5f64 7572 6174 696f  er = old_duratio
-0002a900: 6e20 2f20 6e65 775f 6475 7261 7469 6f6e  n / new_duration
-0002a910: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0002a920: 662e 6d75 6c74 6970 6c69 6572 203d 206d  f.multiplier = m
-0002a930: 756c 7469 706c 6965 720a 2020 2020 2020  ultiplier.      
-0002a940: 2020 2020 2020 6173 7365 7274 2073 656c        assert sel
-0002a950: 662e 5f67 6574 5f64 7572 6174 696f 6e28  f._get_duration(
-0002a960: 2920 3d3d 206f 6c64 5f64 7572 6174 696f  ) == old_duratio
-0002a970: 6e0a 0a20 2020 2040 7374 6174 6963 6d65  n..    @staticme
-0002a980: 7468 6f64 0a20 2020 2064 6566 2066 726f  thod.    def fro
-0002a990: 6d5f 6475 7261 7469 6f6e 280a 2020 2020  m_duration(.    
-0002a9a0: 2020 2020 6475 7261 7469 6f6e 3a20 5f74      duration: _t
-0002a9b0: 7970 696e 6773 2e44 7572 6174 696f 6e54  ypings.DurationT
-0002a9c0: 7970 696e 672c 2063 6f6d 706f 6e65 6e74  yping, component
-0002a9d0: 732c 202a 2c20 7461 673a 205f 7461 672e  s, *, tag: _tag.
-0002a9e0: 5461 6720 3d20 4e6f 6e65 0a20 2020 2029  Tag = None.    )
-0002a9f0: 202d 3e20 2254 7570 6c65 7422 3a0a 2020   -> "Tuplet":.  
-0002aa00: 2020 2020 2020 7222 2222 0a20 2020 2020        r""".     
-0002aa10: 2020 204d 616b 6573 2074 7570 6c65 7420     Makes tuplet 
-0002aa20: 6672 6f6d 2060 6064 7572 6174 696f 6e60  from ``duration`
-0002aa30: 6020 616e 6420 6060 636f 6d70 6f6e 656e  ` and ``componen
-0002aa40: 7473 6060 2e0a 0a20 2020 2020 2020 202e  ts``...        .
-0002aa50: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-0002aa60: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-0002aa70: 2020 2020 4d61 6b65 7320 6469 6d69 6e75      Makes diminu
-0002aa80: 7469 6f6e 3a0a 0a20 2020 2020 2020 2020  tion:..         
-0002aa90: 2020 203e 3e3e 2074 7570 6c65 7420 3d20     >>> tuplet = 
-0002aaa0: 6162 6a61 642e 5475 706c 6574 2e66 726f  abjad.Tuplet.fro
-0002aab0: 6d5f 6475 7261 7469 6f6e 2828 322c 2038  m_duration((2, 8
-0002aac0: 292c 2022 6327 3820 6427 2065 2722 290a  ), "c'8 d' e'").
-0002aad0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002aae0: 6162 6a61 642e 7368 6f77 2874 7570 6c65  abjad.show(tuple
-0002aaf0: 7429 2023 2064 6f63 7465 7374 3a20 2b53  t) # doctest: +S
-0002ab00: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
-0002ab10: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
-0002ab20: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-0002ab30: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
-0002ab40: 6c69 6c79 706f 6e64 2874 7570 6c65 7429  lilypond(tuplet)
-0002ab50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002ab60: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-0002ab70: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-0002ab80: 2020 205c 7469 6d65 7320 322f 330a 2020     \times 2/3.  
-0002ab90: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-0002aba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002abb0: 2020 2020 6327 380a 2020 2020 2020 2020      c'8.        
-0002abc0: 2020 2020 2020 2020 2020 2020 6427 380a              d'8.
-0002abd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002abe0: 2020 2020 6527 380a 2020 2020 2020 2020      e'8.        
-0002abf0: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
-0002ac00: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
-0002ac10: 6620 6e6f 7420 6c65 6e28 636f 6d70 6f6e  f not len(compon
-0002ac20: 656e 7473 293a 0a20 2020 2020 2020 2020  ents):.         
-0002ac30: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
-0002ac40: 6f6e 2866 2263 6f6d 706f 6e65 6e74 7320  on(f"components 
-0002ac50: 6d75 7374 2062 6520 6e6f 6e65 6d70 7479  must be nonempty
-0002ac60: 3a20 7b63 6f6d 706f 6e65 6e74 7321 727d  : {components!r}
-0002ac70: 2e22 290a 2020 2020 2020 2020 7461 7267  .").        targ
-0002ac80: 6574 5f64 7572 6174 696f 6e20 3d20 5f64  et_duration = _d
-0002ac90: 7572 6174 696f 6e2e 4475 7261 7469 6f6e  uration.Duration
-0002aca0: 2864 7572 6174 696f 6e29 0a20 2020 2020  (duration).     
-0002acb0: 2020 2074 7570 6c65 7420 3d20 5475 706c     tuplet = Tupl
-0002acc0: 6574 2831 2c20 636f 6d70 6f6e 656e 7473  et(1, components
-0002acd0: 2c20 7461 673d 7461 6729 0a20 2020 2020  , tag=tag).     
-0002ace0: 2020 2063 6f6e 7465 6e74 735f 6475 7261     contents_dura
-0002acf0: 7469 6f6e 203d 2074 7570 6c65 742e 5f67  tion = tuplet._g
-0002ad00: 6574 5f64 7572 6174 696f 6e28 290a 2020  et_duration().  
-0002ad10: 2020 2020 2020 6d75 6c74 6970 6c69 6572        multiplier
-0002ad20: 203d 2074 6172 6765 745f 6475 7261 7469   = target_durati
-0002ad30: 6f6e 202f 2063 6f6e 7465 6e74 735f 6475  on / contents_du
-0002ad40: 7261 7469 6f6e 0a20 2020 2020 2020 2074  ration.        t
-0002ad50: 7570 6c65 742e 6d75 6c74 6970 6c69 6572  uplet.multiplier
-0002ad60: 203d 206d 756c 7469 706c 6965 720a 2020   = multiplier.  
-0002ad70: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
-0002ad80: 6c65 740a 0a20 2020 2064 6566 206e 6f72  let..    def nor
-0002ad90: 6d61 6c69 7a65 5f6d 756c 7469 706c 6965  malize_multiplie
-0002ada0: 7228 7365 6c66 2920 2d3e 204e 6f6e 653a  r(self) -> None:
-0002adb0: 0a20 2020 2020 2020 2072 2222 220a 2020  .        r""".  
-0002adc0: 2020 2020 2020 4e6f 726d 616c 697a 6573        Normalizes
-0002add0: 2074 7570 6c65 7420 6d75 6c74 6970 6c69   tuplet multipli
-0002ade0: 6572 2e0a 0a20 2020 2020 2020 202e 2e20  er...        .. 
-0002adf0: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
-0002ae00: 6d70 6c65 0a0a 2020 2020 2020 2020 2020  mple..          
-0002ae10: 2020 3e3e 3e20 7475 706c 6574 203d 2061    >>> tuplet = a
-0002ae20: 626a 6164 2e54 7570 6c65 7428 2831 2c20  bjad.Tuplet((1, 
-0002ae30: 3329 2c20 2263 2734 2064 2720 6527 2229  3), "c'4 d' e'")
-0002ae40: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0002ae50: 2061 626a 6164 2e73 686f 7728 7475 706c   abjad.show(tupl
-0002ae60: 6574 2920 2320 646f 6374 6573 743a 202b  et) # doctest: +
-0002ae70: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
-0002ae80: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
-0002ae90: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-0002aea0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-0002aeb0: 2e6c 696c 7970 6f6e 6428 7475 706c 6574  .lilypond(tuplet
-0002aec0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002aed0: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
-0002aee0: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-0002aef0: 2020 2020 5c74 696d 6573 2031 2f33 0a20      \times 1/3. 
-0002af00: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-0002af10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002af20: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
-0002af30: 2020 2020 2020 2020 2020 2020 2064 2734               d'4
-0002af40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002af50: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
-0002af60: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
-0002af70: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-0002af80: 642e 4d75 6c74 6970 6c69 6572 2874 7570  d.Multiplier(tup
-0002af90: 6c65 742e 6d75 6c74 6970 6c69 6572 292e  let.multiplier).
-0002afa0: 6e6f 726d 616c 697a 6564 2829 0a20 2020  normalized().   
-0002afb0: 2020 2020 2020 2020 2046 616c 7365 0a0a           False..
-0002afc0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002afd0: 7475 706c 6574 2e6e 6f72 6d61 6c69 7a65  tuplet.normalize
-0002afe0: 5f6d 756c 7469 706c 6965 7228 290a 2020  _multiplier().  
-0002aff0: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
-0002b000: 6a61 642e 7368 6f77 2874 7570 6c65 7429  jad.show(tuplet)
-0002b010: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
-0002b020: 500a 0a20 2020 2020 2020 2020 2020 202e  P..            .
-0002b030: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
-0002b040: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
-0002b050: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
-0002b060: 6c79 706f 6e64 2874 7570 6c65 7429 0a20  lypond(tuplet). 
-0002b070: 2020 2020 2020 2020 2020 2020 2020 203e                 >
-0002b080: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
-0002b090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b0a0: 205c 7469 6d65 7320 322f 330a 2020 2020   \times 2/3.    
-0002b0b0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0002b0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b0d0: 2020 6327 380a 2020 2020 2020 2020 2020    c'8.          
-0002b0e0: 2020 2020 2020 2020 2020 6427 380a 2020            d'8.  
-0002b0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b100: 2020 6527 380a 2020 2020 2020 2020 2020    e'8.          
-0002b110: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
-0002b120: 2020 2020 203e 3e3e 2061 626a 6164 2e4d       >>> abjad.M
-0002b130: 756c 7469 706c 6965 7228 7475 706c 6574  ultiplier(tuplet
-0002b140: 2e6d 756c 7469 706c 6965 7229 2e6e 6f72  .multiplier).nor
-0002b150: 6d61 6c69 7a65 6428 290a 2020 2020 2020  malized().      
-0002b160: 2020 2020 2020 5472 7565 0a0a 2020 2020        True..    
-0002b170: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-0002b180: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-0002b190: 2020 2020 2020 2020 203e 3e3e 2074 7570           >>> tup
-0002b1a0: 6c65 7420 3d20 6162 6a61 642e 5475 706c  let = abjad.Tupl
-0002b1b0: 6574 2828 382c 2033 292c 2022 6327 3332  et((8, 3), "c'32
-0002b1c0: 2064 2733 3220 6527 3332 2229 0a20 2020   d'32 e'32").   
-0002b1d0: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
-0002b1e0: 6164 2e73 686f 7728 7475 706c 6574 2920  ad.show(tuplet) 
-0002b1f0: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
-0002b200: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
-0002b210: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
-0002b220: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-0002b230: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-0002b240: 7970 6f6e 6428 7475 706c 6574 290a 2020  ypond(tuplet).  
-0002b250: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-0002b260: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
-0002b270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b280: 5c74 7765 616b 2074 6578 7420 2374 7570  \tweak text #tup
-0002b290: 6c65 742d 6e75 6d62 6572 3a3a 6361 6c63  let-number::calc
-0002b2a0: 2d66 7261 6374 696f 6e2d 7465 7874 0a20  -fraction-text. 
-0002b2b0: 2020 2020 2020 2020 2020 2020 2020 205c                 \
-0002b2c0: 7469 6d65 7320 382f 330a 2020 2020 2020  times 8/3.      
-0002b2d0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-0002b2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b2f0: 6327 3332 0a20 2020 2020 2020 2020 2020  c'32.           
-0002b300: 2020 2020 2020 2020 2064 2733 320a 2020           d'32.  
-0002b310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b320: 2020 6527 3332 0a20 2020 2020 2020 2020    e'32.         
-0002b330: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
-0002b340: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-0002b350: 4d75 6c74 6970 6c69 6572 2874 7570 6c65  Multiplier(tuple
-0002b360: 742e 6d75 6c74 6970 6c69 6572 292e 6e6f  t.multiplier).no
-0002b370: 726d 616c 697a 6564 2829 0a20 2020 2020  rmalized().     
-0002b380: 2020 2020 2020 2046 616c 7365 0a0a 2020         False..  
-0002b390: 2020 2020 2020 2020 2020 3e3e 3e20 7475            >>> tu
-0002b3a0: 706c 6574 2e6e 6f72 6d61 6c69 7a65 5f6d  plet.normalize_m
-0002b3b0: 756c 7469 706c 6965 7228 290a 2020 2020  ultiplier().    
-0002b3c0: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-0002b3d0: 642e 7368 6f77 2874 7570 6c65 7429 2023  d.show(tuplet) #
-0002b3e0: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
-0002b3f0: 0a20 2020 2020 2020 2020 2020 202e 2e20  .            .. 
-0002b400: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
-0002b410: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
-0002b420: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
-0002b430: 706f 6e64 2874 7570 6c65 7429 0a20 2020  pond(tuplet).   
-0002b440: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-0002b450: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
-0002b460: 2020 2020 2020 2020 2020 2020 2020 205c                 \
-0002b470: 7477 6561 6b20 7465 7874 2023 7475 706c  tweak text #tupl
-0002b480: 6574 2d6e 756d 6265 723a 3a63 616c 632d  et-number::calc-
-0002b490: 6672 6163 7469 6f6e 2d74 6578 740a 2020  fraction-text.  
-0002b4a0: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-0002b4b0: 696d 6573 2034 2f33 0a20 2020 2020 2020  imes 4/3.       
-0002b4c0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-0002b4d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0002b4e0: 2731 360a 2020 2020 2020 2020 2020 2020  '16.            
-0002b4f0: 2020 2020 2020 2020 6427 3136 0a20 2020          d'16.   
-0002b500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b510: 2065 2731 360a 2020 2020 2020 2020 2020   e'16.          
-0002b520: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
-0002b530: 2020 2020 203e 3e3e 2061 626a 6164 2e4d       >>> abjad.M
-0002b540: 756c 7469 706c 6965 7228 7475 706c 6574  ultiplier(tuplet
-0002b550: 2e6d 756c 7469 706c 6965 7229 2e6e 6f72  .multiplier).nor
-0002b560: 6d61 6c69 7a65 6428 290a 2020 2020 2020  malized().      
-0002b570: 2020 2020 2020 5472 7565 0a0a 2020 2020        True..    
-0002b580: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-0002b590: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-0002b5a0: 2020 2020 2020 2020 203e 3e3e 2074 7570           >>> tup
-0002b5b0: 6c65 7420 3d20 6162 6a61 642e 5475 706c  let = abjad.Tupl
-0002b5c0: 6574 2828 352c 2031 3229 2c20 2263 2734  et((5, 12), "c'4
-0002b5d0: 2064 2734 2065 2734 2229 0a20 2020 2020   d'4 e'4").     
-0002b5e0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-0002b5f0: 2e73 686f 7728 7475 706c 6574 2920 2320  .show(tuplet) # 
-0002b600: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
-0002b610: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
-0002b620: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
-0002b630: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
-0002b640: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
-0002b650: 6f6e 6428 7475 706c 6574 290a 2020 2020  ond(tuplet).    
-0002b660: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002b670: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
-0002b680: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-0002b690: 7765 616b 2074 6578 7420 2374 7570 6c65  weak text #tuple
-0002b6a0: 742d 6e75 6d62 6572 3a3a 6361 6c63 2d66  t-number::calc-f
-0002b6b0: 7261 6374 696f 6e2d 7465 7874 0a20 2020  raction-text.   
-0002b6c0: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
-0002b6d0: 6d65 7320 352f 3132 0a20 2020 2020 2020  mes 5/12.       
-0002b6e0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-0002b6f0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0002b700: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-0002b710: 2020 2020 2020 2064 2734 0a20 2020 2020         d'4.     
-0002b720: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0002b730: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-0002b740: 2020 207d 0a0a 2020 2020 2020 2020 2020     }..          
-0002b750: 2020 3e3e 3e20 6162 6a61 642e 4d75 6c74    >>> abjad.Mult
-0002b760: 6970 6c69 6572 2874 7570 6c65 742e 6d75  iplier(tuplet.mu
-0002b770: 6c74 6970 6c69 6572 292e 6e6f 726d 616c  ltiplier).normal
-0002b780: 697a 6564 2829 0a20 2020 2020 2020 2020  ized().         
-0002b790: 2020 2046 616c 7365 0a0a 2020 2020 2020     False..      
-0002b7a0: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
-0002b7b0: 2e6e 6f72 6d61 6c69 7a65 5f6d 756c 7469  .normalize_multi
-0002b7c0: 706c 6965 7228 290a 2020 2020 2020 2020  plier().        
-0002b7d0: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
-0002b7e0: 6f77 2874 7570 6c65 7429 2023 2064 6f63  ow(tuplet) # doc
-0002b7f0: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
-0002b800: 2020 2020 2020 2020 202e 2e20 2064 6f63           ..  doc
-0002b810: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
-0002b820: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
-0002b830: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
-0002b840: 2874 7570 6c65 7429 0a20 2020 2020 2020  (tuplet).       
-0002b850: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
-0002b860: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
-0002b870: 2020 2020 2020 2020 2020 205c 7477 6561             \twea
-0002b880: 6b20 7465 7874 2023 7475 706c 6574 2d6e  k text #tuplet-n
-0002b890: 756d 6265 723a 3a63 616c 632d 6672 6163  umber::calc-frac
-0002b8a0: 7469 6f6e 2d74 6578 740a 2020 2020 2020  tion-text.      
-0002b8b0: 2020 2020 2020 2020 2020 5c74 696d 6573            \times
-0002b8c0: 2031 302f 3132 0a20 2020 2020 2020 2020   10/12.         
-0002b8d0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-0002b8e0: 2020 2020 2020 2020 2020 2020 2063 2738               c'8
-0002b8f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b900: 2020 2020 2064 2738 0a20 2020 2020 2020       d'8.       
-0002b910: 2020 2020 2020 2020 2020 2020 2065 2738               e'8
-0002b920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b930: 207d 0a0a 2020 2020 2020 2020 2020 2020   }..            
-0002b940: 3e3e 3e20 6162 6a61 642e 4d75 6c74 6970  >>> abjad.Multip
-0002b950: 6c69 6572 2874 7570 6c65 742e 6d75 6c74  lier(tuplet.mult
-0002b960: 6970 6c69 6572 292e 6e6f 726d 616c 697a  iplier).normaliz
-0002b970: 6564 2829 0a20 2020 2020 2020 2020 2020  ed().           
-0002b980: 2054 7275 650a 0a20 2020 2020 2020 2022   True..        "
-0002b990: 2222 0a20 2020 2020 2020 2023 2066 696e  "".        # fin
-0002b9a0: 6420 7475 706c 6574 206d 756c 7469 706c  d tuplet multipl
-0002b9b0: 6965 720a 2020 2020 2020 2020 696e 7465  ier.        inte
-0002b9c0: 6765 725f 6578 706f 6e65 6e74 203d 2069  ger_exponent = i
-0002b9d0: 6e74 286d 6174 682e 6c6f 6728 7365 6c66  nt(math.log(self
-0002b9e0: 2e6d 756c 7469 706c 6965 722c 2032 2929  .multiplier, 2))
-0002b9f0: 0a20 2020 2020 2020 206c 6561 665f 6d75  .        leaf_mu
-0002ba00: 6c74 6970 6c69 6572 203d 205f 6475 7261  ltiplier = _dura
-0002ba10: 7469 6f6e 2e4d 756c 7469 706c 6965 7228  tion.Multiplier(
-0002ba20: 3229 202a 2a20 696e 7465 6765 725f 6578  2) ** integer_ex
-0002ba30: 706f 6e65 6e74 0a20 2020 2020 2020 2023  ponent.        #
-0002ba40: 2073 6361 6c65 206c 6561 7665 7320 696e   scale leaves in
-0002ba50: 2074 7570 6c65 7420 6279 2070 6f77 6572   tuplet by power
-0002ba60: 206f 6620 7477 6f0a 2020 2020 2020 2020   of two.        
-0002ba70: 666f 7220 636f 6d70 6f6e 656e 7420 696e  for component in
-0002ba80: 2073 656c 663a 0a20 2020 2020 2020 2020   self:.         
-0002ba90: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0002baa0: 2863 6f6d 706f 6e65 6e74 2c20 4c65 6166  (component, Leaf
-0002bab0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0002bac0: 2020 206f 6c64 5f77 7269 7474 656e 5f64     old_written_d
-0002bad0: 7572 6174 696f 6e20 3d20 636f 6d70 6f6e  uration = compon
-0002bae0: 656e 742e 7772 6974 7465 6e5f 6475 7261  ent.written_dura
-0002baf0: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
-0002bb00: 2020 2020 206e 6577 5f77 7269 7474 656e       new_written
-0002bb10: 5f64 7572 6174 696f 6e20 3d20 6c65 6166  _duration = leaf
-0002bb20: 5f6d 756c 7469 706c 6965 7220 2a20 6f6c  _multiplier * ol
-0002bb30: 645f 7772 6974 7465 6e5f 6475 7261 7469  d_written_durati
-0002bb40: 6f6e 0a20 2020 2020 2020 2020 2020 2020  on.             
-0002bb50: 2020 206d 756c 7469 706c 6965 7220 3d20     multiplier = 
-0002bb60: 6e65 775f 7772 6974 7465 6e5f 6475 7261  new_written_dura
-0002bb70: 7469 6f6e 202f 206f 6c64 5f77 7269 7474  tion / old_writt
-0002bb80: 656e 5f64 7572 6174 696f 6e0a 2020 2020  en_duration.    
-0002bb90: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
-0002bba0: 6f6e 656e 742e 5f73 6361 6c65 286d 756c  onent._scale(mul
-0002bbb0: 7469 706c 6965 7229 0a20 2020 2020 2020  tiplier).       
-0002bbc0: 206e 756d 6572 6174 6f72 2c20 6465 6e6f   numerator, deno
-0002bbd0: 6d69 6e61 746f 7220 3d20 6c65 6166 5f6d  minator = leaf_m
-0002bbe0: 756c 7469 706c 6965 722e 7061 6972 0a20  ultiplier.pair. 
-0002bbf0: 2020 2020 2020 206d 756c 7469 706c 6965         multiplie
-0002bc00: 7220 3d20 5f64 7572 6174 696f 6e2e 4d75  r = _duration.Mu
-0002bc10: 6c74 6970 6c69 6572 2864 656e 6f6d 696e  ltiplier(denomin
-0002bc20: 6174 6f72 2c20 6e75 6d65 7261 746f 7229  ator, numerator)
-0002bc30: 0a20 2020 2020 2020 2073 656c 662e 6d75  .        self.mu
-0002bc40: 6c74 6970 6c69 6572 202a 3d20 6d75 6c74  ltiplier *= mult
-0002bc50: 6970 6c69 6572 0a0a 2020 2020 6465 6620  iplier..    def 
-0002bc60: 7265 7374 5f66 696c 6c65 6428 7365 6c66  rest_filled(self
-0002bc70: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
-0002bc80: 2020 2072 2222 220a 2020 2020 2020 2020     r""".        
-0002bc90: 4973 2074 7275 6520 7768 656e 2074 7570  Is true when tup
-0002bca0: 6c65 7420 6973 2072 6573 742d 6669 6c6c  let is rest-fill
-0002bcb0: 6564 2e0a 0a20 2020 2020 2020 202e 2e20  ed...        .. 
-0002bcc0: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
-0002bcd0: 6d70 6c65 0a0a 2020 2020 2020 2020 2020  mple..          
-0002bce0: 2020 3e3e 3e20 7475 706c 6574 203d 2061    >>> tuplet = a
-0002bcf0: 626a 6164 2e54 7570 6c65 7428 2833 2c20  bjad.Tuplet((3, 
-0002bd00: 3229 2c20 2272 3420 7220 7222 290a 2020  2), "r4 r r").  
-0002bd10: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
-0002bd20: 6a61 642e 7368 6f77 2874 7570 6c65 7429  jad.show(tuplet)
-0002bd30: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
-0002bd40: 500a 0a20 2020 2020 2020 2020 2020 202e  P..            .
-0002bd50: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-0002bd60: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-0002bd70: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
-0002bd80: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
-0002bd90: 6f6e 6428 7475 706c 6574 290a 2020 2020  ond(tuplet).    
-0002bda0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002bdb0: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
-0002bdc0: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-0002bdd0: 7765 616b 2074 6578 7420 2374 7570 6c65  weak text #tuple
-0002bde0: 742d 6e75 6d62 6572 3a3a 6361 6c63 2d66  t-number::calc-f
-0002bdf0: 7261 6374 696f 6e2d 7465 7874 0a20 2020  raction-text.   
-0002be00: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
-0002be10: 6d65 7320 332f 320a 2020 2020 2020 2020  mes 3/2.        
-0002be20: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0002be30: 2020 2020 2020 2020 2020 2020 2020 7234                r4
-0002be40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002be50: 2020 2020 2072 340a 2020 2020 2020 2020       r4.        
-0002be60: 2020 2020 2020 2020 2020 2020 7234 0a20              r4. 
-0002be70: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-0002be80: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0002be90: 3e20 7475 706c 6574 2e72 6573 745f 6669  > tuplet.rest_fi
-0002bea0: 6c6c 6564 2829 0a20 2020 2020 2020 2020  lled().         
-0002beb0: 2020 2054 7275 650a 0a20 2020 2020 2020     True..       
-0002bec0: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
-0002bed0: 7572 6e20 616c 6c28 6973 696e 7374 616e  urn all(isinstan
-0002bee0: 6365 285f 2c20 5265 7374 2920 666f 7220  ce(_, Rest) for 
-0002bef0: 5f20 696e 2073 656c 6629 0a0a 2020 2020  _ in self)..    
-0002bf00: 6465 6620 7265 7772 6974 655f 646f 7473  def rewrite_dots
-0002bf10: 2873 656c 6629 202d 3e20 4e6f 6e65 3a0a  (self) -> None:.
-0002bf20: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
-0002bf30: 2020 2020 2052 6577 7269 7465 7320 646f       Rewrites do
-0002bf40: 7473 2e0a 0a20 2020 2020 2020 202e 2e20  ts...        .. 
-0002bf50: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
-0002bf60: 6d70 6c65 0a0a 2020 2020 2020 2020 2020  mple..          
-0002bf70: 2020 5265 7772 6974 6573 2073 696e 676c    Rewrites singl
-0002bf80: 6520 646f 7473 2061 7320 333a 3220 7072  e dots as 3:2 pr
-0002bf90: 6f6c 6174 696f 6e3a 0a0a 2020 2020 2020  olation:..      
-0002bfa0: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
-0002bfb0: 203d 2061 626a 6164 2e54 7570 6c65 7428   = abjad.Tuplet(
-0002bfc0: 312c 2022 6327 382e 2063 2738 2e22 290a  1, "c'8. c'8.").
-0002bfd0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002bfe0: 6162 6a61 642e 7368 6f77 2874 7570 6c65  abjad.show(tuple
-0002bff0: 7429 2023 2064 6f63 7465 7374 3a20 2b53  t) # doctest: +S
-0002c000: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
-0002c010: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
-0002c020: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-0002c030: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
-0002c040: 6c69 6c79 706f 6e64 2874 7570 6c65 7429  lilypond(tuplet)
-0002c050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c060: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-0002c070: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-0002c080: 2020 205c 7477 6561 6b20 7465 7874 2023     \tweak text #
-0002c090: 7475 706c 6574 2d6e 756d 6265 723a 3a63  tuplet-number::c
-0002c0a0: 616c 632d 6672 6163 7469 6f6e 2d74 6578  alc-fraction-tex
-0002c0b0: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
-0002c0c0: 2020 5c74 696d 6573 2031 2f31 0a20 2020    \times 1/1.   
-0002c0d0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0002c0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c0f0: 2020 2063 2738 2e0a 2020 2020 2020 2020     c'8..        
-0002c100: 2020 2020 2020 2020 2020 2020 6327 382e              c'8.
-0002c110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c120: 207d 0a0a 2020 2020 2020 2020 2020 2020   }..            
-0002c130: 3e3e 3e20 7475 706c 6574 2e72 6577 7269  >>> tuplet.rewri
-0002c140: 7465 5f64 6f74 7328 290a 2020 2020 2020  te_dots().      
-0002c150: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-0002c160: 7368 6f77 2874 7570 6c65 7429 2023 2064  show(tuplet) # d
-0002c170: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
-0002c180: 2020 2020 2020 2020 2020 202e 2e20 2064             ..  d
-0002c190: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
-0002c1a0: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
-0002c1b0: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
-0002c1c0: 6e64 2874 7570 6c65 7429 0a20 2020 2020  nd(tuplet).     
-0002c1d0: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
-0002c1e0: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
-0002c1f0: 2020 2020 2020 2020 2020 2020 205c 7477               \tw
-0002c200: 6561 6b20 7465 7874 2023 7475 706c 6574  eak text #tuplet
-0002c210: 2d6e 756d 6265 723a 3a63 616c 632d 6672  -number::calc-fr
-0002c220: 6163 7469 6f6e 2d74 6578 740a 2020 2020  action-text.    
-0002c230: 2020 2020 2020 2020 2020 2020 5c74 696d              \tim
-0002c240: 6573 2033 2f32 0a20 2020 2020 2020 2020  es 3/2.         
-0002c250: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-0002c260: 2020 2020 2020 2020 2020 2020 2063 2738               c'8
-0002c270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c280: 2020 2020 2063 2738 0a20 2020 2020 2020       c'8.       
-0002c290: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
-0002c2a0: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-0002c2b0: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-0002c2c0: 2020 2020 2020 2020 2052 6577 7269 7465           Rewrite
-0002c2d0: 7320 646f 7562 6c65 2064 6f74 7320 6173  s double dots as
-0002c2e0: 2037 3a34 2070 726f 6c61 7469 6f6e 3a0a   7:4 prolation:.
-0002c2f0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0002c300: 2074 7570 6c65 7420 3d20 6162 6a61 642e   tuplet = abjad.
-0002c310: 5475 706c 6574 2831 2c20 2263 2738 2e2e  Tuplet(1, "c'8..
-0002c320: 2063 2738 2e2e 2229 0a20 2020 2020 2020   c'8..").       
-0002c330: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-0002c340: 686f 7728 7475 706c 6574 2920 2320 646f  how(tuplet) # do
-0002c350: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-0002c360: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
-0002c370: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
-0002c380: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
-0002c390: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
-0002c3a0: 6428 7475 706c 6574 290a 2020 2020 2020  d(tuplet).      
-0002c3b0: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
-0002c3c0: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
-0002c3d0: 2020 2020 2020 2020 2020 2020 5c74 7765              \twe
-0002c3e0: 616b 2074 6578 7420 2374 7570 6c65 742d  ak text #tuplet-
-0002c3f0: 6e75 6d62 6572 3a3a 6361 6c63 2d66 7261  number::calc-fra
-0002c400: 6374 696f 6e2d 7465 7874 0a20 2020 2020  ction-text.     
-0002c410: 2020 2020 2020 2020 2020 205c 7469 6d65             \time
-0002c420: 7320 312f 310a 2020 2020 2020 2020 2020  s 1/1.          
-0002c430: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-0002c440: 2020 2020 2020 2020 2020 2020 6327 382e              c'8.
-0002c450: 2e0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002c460: 2020 2020 2020 6327 382e 2e0a 2020 2020        c'8...    
-0002c470: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
-0002c480: 2020 2020 2020 2020 2020 203e 3e3e 2074             >>> t
-0002c490: 7570 6c65 742e 7265 7772 6974 655f 646f  uplet.rewrite_do
-0002c4a0: 7473 2829 0a20 2020 2020 2020 2020 2020  ts().           
-0002c4b0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-0002c4c0: 7475 706c 6574 2920 2320 646f 6374 6573  tuplet) # doctes
-0002c4d0: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-0002c4e0: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-0002c4f0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002c500: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-0002c510: 626a 6164 2e6c 696c 7970 6f6e 6428 7475  bjad.lilypond(tu
-0002c520: 706c 6574 290a 2020 2020 2020 2020 2020  plet).          
-0002c530: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-0002c540: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-0002c550: 2020 2020 2020 2020 5c74 7765 616b 2074          \tweak t
-0002c560: 6578 7420 2374 7570 6c65 742d 6e75 6d62  ext #tuplet-numb
-0002c570: 6572 3a3a 6361 6c63 2d66 7261 6374 696f  er::calc-fractio
-0002c580: 6e2d 7465 7874 0a20 2020 2020 2020 2020  n-text.         
-0002c590: 2020 2020 2020 205c 7469 6d65 7320 372f         \times 7/
-0002c5a0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0002c5b0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0002c5c0: 2020 2020 2020 2020 6327 380a 2020 2020          c'8.    
-0002c5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c5e0: 6327 380a 2020 2020 2020 2020 2020 2020  c'8.            
-0002c5f0: 2020 2020 7d0a 0a20 2020 2020 2020 202e      }..        .
-0002c600: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-0002c610: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-0002c620: 2020 2020 446f 6573 206e 6f74 6869 6e67      Does nothing
-0002c630: 2077 6865 6e20 646f 7420 636f 756e 7473   when dot counts
-0002c640: 2064 6966 6665 723a 0a0a 2020 2020 2020   differ:..      
-0002c650: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
-0002c660: 203d 2061 626a 6164 2e54 7570 6c65 7428   = abjad.Tuplet(
-0002c670: 312c 2022 6327 382e 2064 2738 2e20 6527  1, "c'8. d'8. e'
-0002c680: 3822 290a 2020 2020 2020 2020 2020 2020  8").            
-0002c690: 3e3e 3e20 6162 6a61 642e 7368 6f77 2874  >>> abjad.show(t
-0002c6a0: 7570 6c65 7429 2023 2064 6f63 7465 7374  uplet) # doctest
-0002c6b0: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-0002c6c0: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
-0002c6d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c6e0: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-0002c6f0: 6a61 642e 6c69 6c79 706f 6e64 2874 7570  jad.lilypond(tup
-0002c700: 6c65 7429 0a20 2020 2020 2020 2020 2020  let).           
-0002c710: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-0002c720: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-0002c730: 2020 2020 2020 205c 7477 6561 6b20 7465         \tweak te
-0002c740: 7874 2023 7475 706c 6574 2d6e 756d 6265  xt #tuplet-numbe
-0002c750: 723a 3a63 616c 632d 6672 6163 7469 6f6e  r::calc-fraction
-0002c760: 2d74 6578 740a 2020 2020 2020 2020 2020  -text.          
-0002c770: 2020 2020 2020 5c74 696d 6573 2031 2f31        \times 1/1
-0002c780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c790: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-0002c7a0: 2020 2020 2020 2063 2738 2e0a 2020 2020         c'8..    
-0002c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7c0: 6427 382e 0a20 2020 2020 2020 2020 2020  d'8..           
-0002c7d0: 2020 2020 2020 2020 2065 2738 0a20 2020           e'8.   
-0002c7e0: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
-0002c7f0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002c800: 7475 706c 6574 2e72 6577 7269 7465 5f64  tuplet.rewrite_d
-0002c810: 6f74 7328 290a 2020 2020 2020 2020 2020  ots().          
-0002c820: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
-0002c830: 2874 7570 6c65 7429 2023 2064 6f63 7465  (tuplet) # docte
-0002c840: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-0002c850: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0002c860: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002c870: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0002c880: 6162 6a61 642e 6c69 6c79 706f 6e64 2874  abjad.lilypond(t
-0002c890: 7570 6c65 7429 0a20 2020 2020 2020 2020  uplet).         
-0002c8a0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
-0002c8b0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
-0002c8c0: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
-0002c8d0: 7465 7874 2023 7475 706c 6574 2d6e 756d  text #tuplet-num
-0002c8e0: 6265 723a 3a63 616c 632d 6672 6163 7469  ber::calc-fracti
-0002c8f0: 6f6e 2d74 6578 740a 2020 2020 2020 2020  on-text.        
-0002c900: 2020 2020 2020 2020 5c74 696d 6573 2031          \times 1
-0002c910: 2f31 0a20 2020 2020 2020 2020 2020 2020  /1.             
-0002c920: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-0002c930: 2020 2020 2020 2020 2063 2738 2e0a 2020           c'8..  
-0002c940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c950: 2020 6427 382e 0a20 2020 2020 2020 2020    d'8..         
-0002c960: 2020 2020 2020 2020 2020 2065 2738 0a20             e'8. 
-0002c970: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-0002c980: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
-0002c990: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-0002c9a0: 650a 0a20 2020 2020 2020 2020 2020 2044  e..            D
-0002c9b0: 6f65 7320 6e6f 7468 696e 6720 7768 656e  oes nothing when
-0002c9c0: 206c 6561 7665 7320 6361 7272 7920 6e6f   leaves carry no
-0002c9d0: 2064 6f74 733a 0a0a 2020 2020 2020 2020   dots:..        
-0002c9e0: 2020 2020 3e3e 3e20 7475 706c 6574 203d      >>> tuplet =
-0002c9f0: 2061 626a 6164 2e54 7570 6c65 7428 2833   abjad.Tuplet((3
-0002ca00: 2c20 3229 2c20 2263 2738 2064 2720 6527  , 2), "c'8 d' e'
-0002ca10: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
-0002ca20: 3e3e 2061 626a 6164 2e73 686f 7728 7475  >> abjad.show(tu
-0002ca30: 706c 6574 2920 2320 646f 6374 6573 743a  plet) # doctest:
-0002ca40: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
-0002ca50: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
-0002ca60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca70: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
-0002ca80: 6164 2e6c 696c 7970 6f6e 6428 7475 706c  ad.lilypond(tupl
-0002ca90: 6574 290a 2020 2020 2020 2020 2020 2020  et).            
-0002caa0: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
-0002cab0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-0002cac0: 2020 2020 2020 5c74 7765 616b 2074 6578        \tweak tex
-0002cad0: 7420 2374 7570 6c65 742d 6e75 6d62 6572  t #tuplet-number
-0002cae0: 3a3a 6361 6c63 2d66 7261 6374 696f 6e2d  ::calc-fraction-
-0002caf0: 7465 7874 0a20 2020 2020 2020 2020 2020  text.           
-0002cb00: 2020 2020 205c 7469 6d65 7320 332f 320a       \times 3/2.
-0002cb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cb20: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0002cb30: 2020 2020 2020 6327 380a 2020 2020 2020        c'8.      
-0002cb40: 2020 2020 2020 2020 2020 2020 2020 6427                d'
-0002cb50: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
-0002cb60: 2020 2020 2020 6527 380a 2020 2020 2020        e'8.      
-0002cb70: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
-0002cb80: 2020 2020 2020 2020 203e 3e3e 2074 7570           >>> tup
-0002cb90: 6c65 742e 7265 7772 6974 655f 646f 7473  let.rewrite_dots
-0002cba0: 2829 0a20 2020 2020 2020 2020 2020 203e  ().            >
-0002cbb0: 3e3e 2061 626a 6164 2e73 686f 7728 7475  >> abjad.show(tu
-0002cbc0: 706c 6574 2920 2320 646f 6374 6573 743a  plet) # doctest:
-0002cbd0: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
-0002cbe0: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
-0002cbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc00: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
-0002cc10: 6164 2e6c 696c 7970 6f6e 6428 7475 706c  ad.lilypond(tupl
-0002cc20: 6574 290a 2020 2020 2020 2020 2020 2020  et).            
-0002cc30: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
-0002cc40: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-0002cc50: 2020 2020 2020 5c74 7765 616b 2074 6578        \tweak tex
-0002cc60: 7420 2374 7570 6c65 742d 6e75 6d62 6572  t #tuplet-number
-0002cc70: 3a3a 6361 6c63 2d66 7261 6374 696f 6e2d  ::calc-fraction-
-0002cc80: 7465 7874 0a20 2020 2020 2020 2020 2020  text.           
-0002cc90: 2020 2020 205c 7469 6d65 7320 332f 320a       \times 3/2.
-0002cca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ccb0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0002ccc0: 2020 2020 2020 6327 380a 2020 2020 2020        c'8.      
-0002ccd0: 2020 2020 2020 2020 2020 2020 2020 6427                d'
-0002cce0: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
-0002ccf0: 2020 2020 2020 6527 380a 2020 2020 2020        e'8.      
-0002cd00: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
-0002cd10: 2020 2020 204e 6f74 2079 6574 2069 6d70       Not yet imp
-0002cd20: 6c65 6d65 6e74 6564 2066 6f72 206d 756c  lemented for mul
-0002cd30: 7469 706c 7920 6e65 7374 6564 2074 7570  tiply nested tup
-0002cd40: 6c65 7473 2e0a 2020 2020 2020 2020 2222  lets..        ""
-0002cd50: 220a 2020 2020 2020 2020 646f 745f 636f  ".        dot_co
-0002cd60: 756e 7473 203d 2073 6574 2829 0a20 2020  unts = set().   
-0002cd70: 2020 2020 2066 6f72 2063 6f6d 706f 6e65       for compone
-0002cd80: 6e74 2069 6e20 7365 6c66 3a0a 2020 2020  nt in self:.    
-0002cd90: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0002cda0: 7461 6e63 6528 636f 6d70 6f6e 656e 742c  tance(component,
-0002cdb0: 2054 7570 6c65 7429 3a0a 2020 2020 2020   Tuplet):.      
-0002cdc0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0002cdd0: 0a20 2020 2020 2020 2020 2020 2064 6f74  .            dot
-0002cde0: 5f63 6f75 6e74 203d 2063 6f6d 706f 6e65  _count = compone
-0002cdf0: 6e74 2e77 7269 7474 656e 5f64 7572 6174  nt.written_durat
-0002ce00: 696f 6e2e 646f 745f 636f 756e 740a 2020  ion.dot_count.  
-0002ce10: 2020 2020 2020 2020 2020 646f 745f 636f            dot_co
-0002ce20: 756e 7473 2e61 6464 2864 6f74 5f63 6f75  unts.add(dot_cou
-0002ce30: 6e74 290a 2020 2020 2020 2020 6966 2031  nt).        if 1
-0002ce40: 203c 206c 656e 2864 6f74 5f63 6f75 6e74   < len(dot_count
-0002ce50: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
-0002ce60: 7265 7475 726e 0a20 2020 2020 2020 2061  return.        a
-0002ce70: 7373 6572 7420 6c65 6e28 646f 745f 636f  ssert len(dot_co
-0002ce80: 756e 7473 2920 3d3d 2031 0a20 2020 2020  unts) == 1.     
-0002ce90: 2020 2067 6c6f 6261 6c5f 646f 745f 636f     global_dot_co
-0002cea0: 756e 7420 3d20 646f 745f 636f 756e 7473  unt = dot_counts
-0002ceb0: 2e70 6f70 2829 0a20 2020 2020 2020 2069  .pop().        i
-0002cec0: 6620 676c 6f62 616c 5f64 6f74 5f63 6f75  f global_dot_cou
-0002ced0: 6e74 203d 3d20 303a 0a20 2020 2020 2020  nt == 0:.       
-0002cee0: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
-0002cef0: 2020 2020 646f 745f 6d75 6c74 6970 6c69      dot_multipli
-0002cf00: 6572 203d 205f 6475 7261 7469 6f6e 2e4d  er = _duration.M
-0002cf10: 756c 7469 706c 6965 722e 6672 6f6d 5f64  ultiplier.from_d
-0002cf20: 6f74 5f63 6f75 6e74 2867 6c6f 6261 6c5f  ot_count(global_
-0002cf30: 646f 745f 636f 756e 7429 0a20 2020 2020  dot_count).     
-0002cf40: 2020 2073 656c 662e 6d75 6c74 6970 6c69     self.multipli
-0002cf50: 6572 202a 3d20 646f 745f 6d75 6c74 6970  er *= dot_multip
-0002cf60: 6c69 6572 0a20 2020 2020 2020 2064 6f74  lier.        dot
-0002cf70: 5f6d 756c 7469 706c 6965 725f 7265 6369  _multiplier_reci
-0002cf80: 7072 6f63 616c 203d 2064 6f74 5f6d 756c  procal = dot_mul
-0002cf90: 7469 706c 6965 722e 7265 6369 7072 6f63  tiplier.reciproc
-0002cfa0: 616c 0a20 2020 2020 2020 2066 6f72 2063  al.        for c
-0002cfb0: 6f6d 706f 6e65 6e74 2069 6e20 7365 6c66  omponent in self
-0002cfc0: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
-0002cfd0: 6d70 6f6e 656e 742e 7772 6974 7465 6e5f  mponent.written_
-0002cfe0: 6475 7261 7469 6f6e 202a 3d20 646f 745f  duration *= dot_
-0002cff0: 6d75 6c74 6970 6c69 6572 5f72 6563 6970  multiplier_recip
-0002d000: 726f 6361 6c0a 0a20 2020 2064 6566 2073  rocal..    def s
-0002d010: 6574 5f6d 696e 696d 756d 5f64 656e 6f6d  et_minimum_denom
-0002d020: 696e 6174 6f72 2873 656c 662c 2064 656e  inator(self, den
-0002d030: 6f6d 696e 6174 6f72 2920 2d3e 204e 6f6e  ominator) -> Non
-0002d040: 653a 0a20 2020 2020 2020 2072 2222 220a  e:.        r""".
-0002d050: 2020 2020 2020 2020 5365 7473 2070 7265          Sets pre
-0002d060: 6665 7272 6564 2064 656e 6f6d 696e 6174  ferred denominat
-0002d070: 6f72 206f 6620 7475 706c 6574 2074 6f20  or of tuplet to 
-0002d080: 6174 206c 6561 7374 2060 6064 656e 6f6d  at least ``denom
-0002d090: 696e 6174 6f72 6060 2e0a 0a20 2020 2020  inator``...     
-0002d0a0: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
-0002d0b0: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
-0002d0c0: 2020 2020 2020 2020 5365 7473 2070 7265          Sets pre
-0002d0d0: 6665 7272 6564 2064 656e 6f6d 696e 6174  ferred denominat
-0002d0e0: 6f72 206f 6620 7475 706c 6574 2074 6f20  or of tuplet to 
-0002d0f0: 6060 3860 6020 6174 206c 6561 7374 3a0a  ``8`` at least:.
-0002d100: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0002d110: 2074 7570 6c65 7420 3d20 6162 6a61 642e   tuplet = abjad.
-0002d120: 5475 706c 6574 2828 332c 2035 292c 2022  Tuplet((3, 5), "
-0002d130: 6327 3420 6427 3820 6527 3820 6627 3420  c'4 d'8 e'8 f'4 
-0002d140: 6727 3222 290a 2020 2020 2020 2020 2020  g'2").          
-0002d150: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
-0002d160: 2874 7570 6c65 7429 2023 2064 6f63 7465  (tuplet) # docte
-0002d170: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-0002d180: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0002d190: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002d1a0: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0002d1b0: 6162 6a61 642e 6c69 6c79 706f 6e64 2874  abjad.lilypond(t
-0002d1c0: 7570 6c65 7429 0a20 2020 2020 2020 2020  uplet).         
-0002d1d0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
-0002d1e0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
-0002d1f0: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
-0002d200: 7465 7874 2023 7475 706c 6574 2d6e 756d  text #tuplet-num
-0002d210: 6265 723a 3a63 616c 632d 6672 6163 7469  ber::calc-fracti
-0002d220: 6f6e 2d74 6578 740a 2020 2020 2020 2020  on-text.        
-0002d230: 2020 2020 2020 2020 5c74 696d 6573 2033          \times 3
-0002d240: 2f35 0a20 2020 2020 2020 2020 2020 2020  /5.             
-0002d250: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-0002d260: 2020 2020 2020 2020 2063 2734 0a20 2020           c'4.   
-0002d270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d280: 2064 2738 0a20 2020 2020 2020 2020 2020   d'8.           
-0002d290: 2020 2020 2020 2020 2065 2738 0a20 2020           e'8.   
-0002d2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d2b0: 2066 2734 0a20 2020 2020 2020 2020 2020   f'4.           
-0002d2c0: 2020 2020 2020 2020 2067 2732 0a20 2020           g'2.   
-0002d2d0: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
-0002d2e0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002d2f0: 7475 706c 6574 2e73 6574 5f6d 696e 696d  tuplet.set_minim
-0002d300: 756d 5f64 656e 6f6d 696e 6174 6f72 2838  um_denominator(8
-0002d310: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-0002d320: 3e20 6162 6a61 642e 7368 6f77 2874 7570  > abjad.show(tup
-0002d330: 6c65 7429 2023 2064 6f63 7465 7374 3a20  let) # doctest: 
-0002d340: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
-0002d350: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
-0002d360: 2020 2020 2020 2020 2020 2020 2020 203e                 >
-0002d370: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
-0002d380: 642e 6c69 6c79 706f 6e64 2874 7570 6c65  d.lilypond(tuple
-0002d390: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-0002d3a0: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
-0002d3b0: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
-0002d3c0: 2020 2020 205c 7477 6561 6b20 7465 7874       \tweak text
-0002d3d0: 2023 7475 706c 6574 2d6e 756d 6265 723a   #tuplet-number:
-0002d3e0: 3a63 616c 632d 6672 6163 7469 6f6e 2d74  :calc-fraction-t
-0002d3f0: 6578 740a 2020 2020 2020 2020 2020 2020  ext.            
-0002d400: 2020 2020 5c74 696d 6573 2036 2f31 300a      \times 6/10.
-0002d410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d420: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0002d430: 2020 2020 2020 6327 340a 2020 2020 2020        c'4.      
-0002d440: 2020 2020 2020 2020 2020 2020 2020 6427                d'
-0002d450: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
-0002d460: 2020 2020 2020 6527 380a 2020 2020 2020        e'8.      
-0002d470: 2020 2020 2020 2020 2020 2020 2020 6627                f'
-0002d480: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0002d490: 2020 2020 2020 6727 320a 2020 2020 2020        g'2.      
-0002d4a0: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
-0002d4b0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0002d4c0: 2061 7373 6572 7420 5f6d 6174 682e 6973   assert _math.is
-0002d4d0: 5f6e 6f6e 6e65 6761 7469 7665 5f69 6e74  _nonnegative_int
-0002d4e0: 6567 6572 5f70 6f77 6572 5f6f 665f 7477  eger_power_of_tw
-0002d4f0: 6f28 6465 6e6f 6d69 6e61 746f 7229 0a20  o(denominator). 
-0002d500: 2020 2020 2020 2073 656c 662e 666f 7263         self.forc
-0002d510: 655f 6672 6163 7469 6f6e 203d 2054 7275  e_fraction = Tru
-0002d520: 650a 2020 2020 2020 2020 6475 7261 7469  e.        durati
-0002d530: 6f6e 7320 3d20 5b0a 2020 2020 2020 2020  ons = [.        
-0002d540: 2020 2020 7365 6c66 2e5f 6765 745f 636f      self._get_co
-0002d550: 6e74 656e 7473 5f64 7572 6174 696f 6e28  ntents_duration(
-0002d560: 292c 0a20 2020 2020 2020 2020 2020 2073  ),.            s
-0002d570: 656c 662e 5f67 6574 5f70 7265 7072 6f6c  elf._get_preprol
-0002d580: 6174 6564 5f64 7572 6174 696f 6e28 292c  ated_duration(),
-0002d590: 0a20 2020 2020 2020 2020 2020 205f 6475  .            _du
-0002d5a0: 7261 7469 6f6e 2e44 7572 6174 696f 6e28  ration.Duration(
-0002d5b0: 312c 2064 656e 6f6d 696e 6174 6f72 292c  1, denominator),
-0002d5c0: 0a20 2020 2020 2020 205d 0a20 2020 2020  .        ].     
-0002d5d0: 2020 206e 6f6e 7265 6475 6365 645f 6672     nonreduced_fr
-0002d5e0: 6163 7469 6f6e 7320 3d20 5f64 7572 6174  actions = _durat
-0002d5f0: 696f 6e2e 4475 7261 7469 6f6e 2e64 7572  ion.Duration.dur
-0002d600: 6174 696f 6e73 5f74 6f5f 6e6f 6e72 6564  ations_to_nonred
-0002d610: 7563 6564 5f66 7261 6374 696f 6e73 280a  uced_fractions(.
-0002d620: 2020 2020 2020 2020 2020 2020 6475 7261              dura
-0002d630: 7469 6f6e 730a 2020 2020 2020 2020 290a  tions.        ).
-0002d640: 2020 2020 2020 2020 7365 6c66 2e64 656e          self.den
-0002d650: 6f6d 696e 6174 6f72 203d 206e 6f6e 7265  ominator = nonre
-0002d660: 6475 6365 645f 6672 6163 7469 6f6e 735b  duced_fractions[
-0002d670: 315d 2e6e 756d 6572 6174 6f72 0a0a 2020  1].numerator..  
-0002d680: 2020 6465 6620 746f 6767 6c65 5f70 726f    def toggle_pro
-0002d690: 6c61 7469 6f6e 2873 656c 6629 202d 3e20  lation(self) -> 
-0002d6a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7222  None:.        r"
-0002d6b0: 2222 0a20 2020 2020 2020 2043 6861 6e67  "".        Chang
-0002d6c0: 6573 2061 7567 6d65 6e74 6564 2074 7570  es augmented tup
-0002d6d0: 6c65 7473 2074 6f20 6469 6d69 6e69 7368  lets to diminish
-0002d6e0: 6564 3b20 6368 616e 6765 7320 6469 6d69  ed; changes dimi
-0002d6f0: 6e69 7368 6564 2074 7570 6c65 7473 2074  nished tuplets t
-0002d700: 6f20 6175 676d 656e 7465 642e 0a0a 2020  o augmented...  
-0002d710: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
-0002d720: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
-0002d730: 2020 2020 2020 2020 2020 2043 6861 6e67             Chang
-0002d740: 6573 2061 7567 6d65 6e74 6564 2074 7570  es augmented tup
-0002d750: 6c65 7420 746f 2064 696d 696e 6973 6865  let to diminishe
-0002d760: 643a 0a0a 2020 2020 2020 2020 2020 2020  d:..            
-0002d770: 3e3e 3e20 7475 706c 6574 203d 2061 626a  >>> tuplet = abj
-0002d780: 6164 2e54 7570 6c65 7428 2834 2c20 3329  ad.Tuplet((4, 3)
-0002d790: 2c20 2263 2738 2064 2738 2065 2738 2229  , "c'8 d'8 e'8")
-0002d7a0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0002d7b0: 2061 626a 6164 2e73 686f 7728 7475 706c   abjad.show(tupl
-0002d7c0: 6574 2920 2320 646f 6374 6573 743a 202b  et) # doctest: +
-0002d7d0: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
-0002d7e0: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
-0002d7f0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-0002d800: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-0002d810: 2e6c 696c 7970 6f6e 6428 7475 706c 6574  .lilypond(tuplet
-0002d820: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002d830: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
-0002d840: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-0002d850: 2020 2020 5c74 7765 616b 2074 6578 7420      \tweak text 
-0002d860: 2374 7570 6c65 742d 6e75 6d62 6572 3a3a  #tuplet-number::
-0002d870: 6361 6c63 2d66 7261 6374 696f 6e2d 7465  calc-fraction-te
-0002d880: 7874 0a20 2020 2020 2020 2020 2020 2020  xt.             
-0002d890: 2020 205c 7469 6d65 7320 342f 330a 2020     \times 4/3.  
-0002d8a0: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-0002d8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d8c0: 2020 2020 6327 380a 2020 2020 2020 2020      c'8.        
-0002d8d0: 2020 2020 2020 2020 2020 2020 6427 380a              d'8.
-0002d8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d8f0: 2020 2020 6527 380a 2020 2020 2020 2020      e'8.        
-0002d900: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
-0002d910: 2020 2020 2020 203e 3e3e 2074 7570 6c65         >>> tuple
-0002d920: 742e 746f 6767 6c65 5f70 726f 6c61 7469  t.toggle_prolati
-0002d930: 6f6e 2829 0a20 2020 2020 2020 2020 2020  on().           
-0002d940: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-0002d950: 7475 706c 6574 2920 2320 646f 6374 6573  tuplet) # doctes
-0002d960: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-0002d970: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-0002d980: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002d990: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-0002d9a0: 626a 6164 2e6c 696c 7970 6f6e 6428 7475  bjad.lilypond(tu
-0002d9b0: 706c 6574 290a 2020 2020 2020 2020 2020  plet).          
-0002d9c0: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-0002d9d0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-0002d9e0: 2020 2020 2020 2020 5c74 696d 6573 2032          \times 2
-0002d9f0: 2f33 0a20 2020 2020 2020 2020 2020 2020  /3.             
-0002da00: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-0002da10: 2020 2020 2020 2020 2063 2734 0a20 2020           c'4.   
-0002da20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002da30: 2064 2734 0a20 2020 2020 2020 2020 2020   d'4.           
-0002da40: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
-0002da50: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
-0002da60: 2020 2020 2020 2020 2020 2020 4d75 6c74              Mult
-0002da70: 6970 6c69 6573 2074 6865 2077 7269 7474  iplies the writt
-0002da80: 656e 2064 7572 6174 696f 6e20 6f66 2074  en duration of t
-0002da90: 6865 206c 6561 7665 7320 696e 2074 7570  he leaves in tup
-0002daa0: 6c65 740a 2020 2020 2020 2020 2020 2020  let.            
-0002dab0: 6279 2074 6865 206c 6561 7374 2070 6f77  by the least pow
-0002dac0: 6572 206f 6620 6060 3260 6020 6e65 6365  er of ``2`` nece
-0002dad0: 7373 6172 7920 746f 2064 696d 696e 7368  ssary to diminsh
-0002dae0: 6564 2074 7570 6c65 742e 0a0a 2020 2020  ed tuplet...    
-0002daf0: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
-0002db00: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
-0002db10: 2020 2020 2020 2020 2043 6861 6e67 6573           Changes
-0002db20: 2064 696d 696e 6973 6865 6420 7475 706c   diminished tupl
-0002db30: 6574 2074 6f20 6175 676d 656e 7465 643a  et to augmented:
-0002db40: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0002db50: 3e20 7475 706c 6574 203d 2061 626a 6164  > tuplet = abjad
-0002db60: 2e54 7570 6c65 7428 2832 2c20 3329 2c20  .Tuplet((2, 3), 
-0002db70: 2263 2734 2064 2734 2065 2734 2229 0a20  "c'4 d'4 e'4"). 
-0002db80: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
-0002db90: 626a 6164 2e73 686f 7728 7475 706c 6574  bjad.show(tuplet
-0002dba0: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-0002dbb0: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
-0002dbc0: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
-0002dbd0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002dbe0: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
-0002dbf0: 696c 7970 6f6e 6428 7475 706c 6574 290a  ilypond(tuplet).
-0002dc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc10: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-0002dc20: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002dc30: 2020 5c74 696d 6573 2032 2f33 0a20 2020    \times 2/3.   
-0002dc40: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0002dc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc60: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
-0002dc70: 2020 2020 2020 2020 2020 2064 2734 0a20             d'4. 
-0002dc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc90: 2020 2065 2734 0a20 2020 2020 2020 2020     e'4.         
-0002dca0: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
-0002dcb0: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
-0002dcc0: 2e74 6f67 676c 655f 7072 6f6c 6174 696f  .toggle_prolatio
-0002dcd0: 6e28 290a 2020 2020 2020 2020 2020 2020  n().            
-0002dce0: 3e3e 3e20 6162 6a61 642e 7368 6f77 2874  >>> abjad.show(t
-0002dcf0: 7570 6c65 7429 2023 2064 6f63 7465 7374  uplet) # doctest
-0002dd00: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
-0002dd10: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
-0002dd20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002dd30: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
-0002dd40: 6a61 642e 6c69 6c79 706f 6e64 2874 7570  jad.lilypond(tup
-0002dd50: 6c65 7429 0a20 2020 2020 2020 2020 2020  let).           
-0002dd60: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
-0002dd70: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
-0002dd80: 2020 2020 2020 205c 7477 6561 6b20 7465         \tweak te
-0002dd90: 7874 2023 7475 706c 6574 2d6e 756d 6265  xt #tuplet-numbe
-0002dda0: 723a 3a63 616c 632d 6672 6163 7469 6f6e  r::calc-fraction
-0002ddb0: 2d74 6578 740a 2020 2020 2020 2020 2020  -text.          
-0002ddc0: 2020 2020 2020 5c74 696d 6573 2034 2f33        \times 4/3
-0002ddd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002dde0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-0002ddf0: 2020 2020 2020 2063 2738 0a20 2020 2020         c'8.     
-0002de00: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0002de10: 2738 0a20 2020 2020 2020 2020 2020 2020  '8.             
-0002de20: 2020 2020 2020 2065 2738 0a20 2020 2020         e'8.     
-0002de30: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
-0002de40: 2020 2020 2020 2020 2020 4469 7669 6465            Divide
-0002de50: 7320 7468 6520 7772 6974 7465 6e20 6475  s the written du
-0002de60: 7261 7469 6f6e 206f 6620 7468 6520 6c65  ration of the le
-0002de70: 6176 6573 2069 6e20 7475 706c 6574 0a20  aves in tuplet. 
-0002de80: 2020 2020 2020 2020 2020 2062 7920 7468             by th
-0002de90: 6520 6c65 6173 7420 706f 7765 7220 6f66  e least power of
-0002dea0: 2060 6032 6060 206e 6563 6573 7361 7279   ``2`` necessary
-0002deb0: 2074 6f20 6469 6d69 6e73 6865 6420 7475   to diminshed tu
-0002dec0: 706c 6574 2e0a 0a20 2020 2020 2020 202e  plet...        .
-0002ded0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-0002dee0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-0002def0: 2020 2020 5245 4752 4553 5349 4f4e 2e20      REGRESSION. 
-0002df00: 4c65 6176 6573 2074 7269 7669 616c 2074  Leaves trivial t
-0002df10: 7570 6c65 7473 2075 6e63 6861 6e67 6564  uplets unchanged
-0002df20: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-0002df30: 3e3e 2074 7570 6c65 7420 3d20 6162 6a61  >> tuplet = abja
-0002df40: 642e 5475 706c 6574 2831 2c20 2263 2734  d.Tuplet(1, "c'4
-0002df50: 2064 2734 2065 2734 2229 0a20 2020 2020   d'4 e'4").     
-0002df60: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
-0002df70: 2e73 686f 7728 7475 706c 6574 2920 2320  .show(tuplet) # 
-0002df80: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
-0002df90: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
-0002dfa0: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
-0002dfb0: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
-0002dfc0: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
-0002dfd0: 6f6e 6428 7475 706c 6574 290a 2020 2020  ond(tuplet).    
-0002dfe0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002dff0: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
-0002e000: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-0002e010: 7765 616b 2074 6578 7420 2374 7570 6c65  weak text #tuple
-0002e020: 742d 6e75 6d62 6572 3a3a 6361 6c63 2d66  t-number::calc-f
-0002e030: 7261 6374 696f 6e2d 7465 7874 0a20 2020  raction-text.   
-0002e040: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
-0002e050: 6d65 7320 312f 310a 2020 2020 2020 2020  mes 1/1.        
-0002e060: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0002e070: 2020 2020 2020 2020 2020 2020 2020 6327                c'
-0002e080: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0002e090: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
-0002e0a0: 2020 2020 2020 2020 2020 2020 2020 6527                e'
-0002e0b0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0002e0c0: 2020 7d0a 0a20 2020 2020 2020 2020 2020    }..           
-0002e0d0: 203e 3e3e 2074 7570 6c65 742e 746f 6767   >>> tuplet.togg
-0002e0e0: 6c65 5f70 726f 6c61 7469 6f6e 2829 0a20  le_prolation(). 
-0002e0f0: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
-0002e100: 626a 6164 2e73 686f 7728 7475 706c 6574  bjad.show(tuplet
-0002e110: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
-0002e120: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
-0002e130: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
-0002e140: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002e150: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
-0002e160: 696c 7970 6f6e 6428 7475 706c 6574 290a  ilypond(tuplet).
-0002e170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e180: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-0002e190: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002e1a0: 2020 5c74 7765 616b 2074 6578 7420 2374    \tweak text #t
-0002e1b0: 7570 6c65 742d 6e75 6d62 6572 3a3a 6361  uplet-number::ca
-0002e1c0: 6c63 2d66 7261 6374 696f 6e2d 7465 7874  lc-fraction-text
-0002e1d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e1e0: 205c 7469 6d65 7320 312f 310a 2020 2020   \times 1/1.    
-0002e1f0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0002e200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e210: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
-0002e220: 2020 2020 2020 2020 2020 6427 340a 2020            d'4.  
-0002e230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e240: 2020 6527 340a 2020 2020 2020 2020 2020    e'4.          
-0002e250: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
-0002e260: 2044 6f65 7320 6e6f 7420 7965 7420 776f   Does not yet wo
-0002e270: 726b 2077 6974 6820 6e65 7374 6564 2074  rk with nested t
-0002e280: 7570 6c65 7473 2e0a 2020 2020 2020 2020  uplets..        
-0002e290: 2222 220a 2020 2020 2020 2020 6966 2073  """.        if s
-0002e2a0: 656c 662e 6469 6d69 6e75 7469 6f6e 2829  elf.diminution()
-0002e2b0: 3a0a 2020 2020 2020 2020 2020 2020 7768  :.            wh
-0002e2c0: 696c 6520 7365 6c66 2e64 696d 696e 7574  ile self.diminut
-0002e2d0: 696f 6e28 293a 0a20 2020 2020 2020 2020  ion():.         
-0002e2e0: 2020 2020 2020 2073 656c 662e 6d75 6c74         self.mult
-0002e2f0: 6970 6c69 6572 202a 3d20 320a 2020 2020  iplier *= 2.    
-0002e300: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0002e310: 636f 6d70 6f6e 656e 7420 696e 2073 656c  component in sel
-0002e320: 662e 5f67 6574 5f73 7562 7472 6565 2829  f._get_subtree()
-0002e330: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002e340: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0002e350: 6e63 6528 636f 6d70 6f6e 656e 742c 204c  nce(component, L
-0002e360: 6561 6629 3a0a 2020 2020 2020 2020 2020  eaf):.          
-0002e370: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0002e380: 6d70 6f6e 656e 742e 7772 6974 7465 6e5f  mponent.written_
-0002e390: 6475 7261 7469 6f6e 202f 3d20 320a 2020  duration /= 2.  
-0002e3a0: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
-0002e3b0: 6175 676d 656e 7461 7469 6f6e 2829 3a0a  augmentation():.
-0002e3c0: 2020 2020 2020 2020 2020 2020 7768 696c              whil
-0002e3d0: 6520 6e6f 7420 7365 6c66 2e64 696d 696e  e not self.dimin
-0002e3e0: 7574 696f 6e28 293a 0a20 2020 2020 2020  ution():.       
-0002e3f0: 2020 2020 2020 2020 2073 656c 662e 6d75           self.mu
-0002e400: 6c74 6970 6c69 6572 202f 3d20 320a 2020  ltiplier /= 2.  
-0002e410: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0002e420: 7220 636f 6d70 6f6e 656e 7420 696e 2073  r component in s
-0002e430: 656c 662e 5f67 6574 5f73 7562 7472 6565  elf._get_subtree
-0002e440: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-0002e450: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0002e460: 7461 6e63 6528 636f 6d70 6f6e 656e 742c  tance(component,
-0002e470: 204c 6561 6629 3a0a 2020 2020 2020 2020   Leaf):.        
-0002e480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e490: 636f 6d70 6f6e 656e 742e 7772 6974 7465  component.writte
-0002e4a0: 6e5f 6475 7261 7469 6f6e 202a 3d20 320a  n_duration *= 2.
-0002e4b0: 0a20 2020 2064 6566 2074 7269 7669 616c  .    def trivial
-0002e4c0: 2873 656c 6629 202d 3e20 626f 6f6c 3a0a  (self) -> bool:.
-0002e4d0: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
-0002e4e0: 2020 2020 2049 7320 7472 7565 2077 6865       Is true whe
-0002e4f0: 6e20 7475 706c 6574 206d 756c 7469 706c  n tuplet multipl
-0002e500: 6965 7220 6973 2065 7175 616c 2074 6f20  ier is equal to 
-0002e510: 6060 3160 6020 616e 6420 6e6f 206d 756c  ``1`` and no mul
-0002e520: 7469 706c 6965 7273 0a20 2020 2020 2020  tipliers.       
-0002e530: 2061 7474 6163 6820 746f 2061 6e79 206c   attach to any l
-0002e540: 6561 7665 7320 696e 2074 7570 6c65 742e  eaves in tuplet.
-0002e550: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
-0002e560: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
-0002e570: 650a 0a20 2020 2020 2020 2020 2020 203e  e..            >
-0002e580: 3e3e 2074 7570 6c65 7420 3d20 6162 6a61  >> tuplet = abja
-0002e590: 642e 5475 706c 6574 2828 312c 2031 292c  d.Tuplet((1, 1),
-0002e5a0: 2022 6327 3820 6427 3820 6527 3822 290a   "c'8 d'8 e'8").
-0002e5b0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002e5c0: 6162 6a61 642e 7368 6f77 2874 7570 6c65  abjad.show(tuple
-0002e5d0: 7429 2023 2064 6f63 7465 7374 3a20 2b53  t) # doctest: +S
-0002e5e0: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
-0002e5f0: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
-0002e600: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-0002e610: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
-0002e620: 6c69 6c79 706f 6e64 2874 7570 6c65 7429  lilypond(tuplet)
-0002e630: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e640: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
-0002e650: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-0002e660: 2020 205c 7477 6561 6b20 7465 7874 2023     \tweak text #
-0002e670: 7475 706c 6574 2d6e 756d 6265 723a 3a63  tuplet-number::c
-0002e680: 616c 632d 6672 6163 7469 6f6e 2d74 6578  alc-fraction-tex
-0002e690: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
-0002e6a0: 2020 5c74 696d 6573 2031 2f31 0a20 2020    \times 1/1.   
-0002e6b0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0002e6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e6d0: 2020 2063 2738 0a20 2020 2020 2020 2020     c'8.         
-0002e6e0: 2020 2020 2020 2020 2020 2064 2738 0a20             d'8. 
-0002e6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e700: 2020 2065 2738 0a20 2020 2020 2020 2020     e'8.         
-0002e710: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
-0002e720: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
-0002e730: 2e74 7269 7669 616c 2829 0a20 2020 2020  .trivial().     
-0002e740: 2020 2020 2020 2054 7275 650a 0a20 2020         True..   
-0002e750: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
-0002e760: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
-0002e770: 2020 2020 2020 2020 2020 5475 706c 6574            Tuplet
-0002e780: 2069 7320 6e6f 7420 7472 6976 6961 6c20   is not trivial 
-0002e790: 7768 656e 206d 756c 7469 706c 6965 7273  when multipliers
-0002e7a0: 2061 7474 6163 6820 746f 2074 7570 6c65   attach to tuple
-0002e7b0: 7420 6c65 6176 6573 3a0a 0a20 2020 2020  t leaves:..     
-0002e7c0: 2020 2020 2020 203e 3e3e 2074 7570 6c65         >>> tuple
-0002e7d0: 7420 3d20 6162 6a61 642e 5475 706c 6574  t = abjad.Tuplet
-0002e7e0: 2828 312c 2031 292c 2022 6327 3820 6427  ((1, 1), "c'8 d'
-0002e7f0: 3820 6527 3822 290a 2020 2020 2020 2020  8 e'8").        
-0002e800: 2020 2020 3e3e 3e20 7475 706c 6574 5b30      >>> tuplet[0
-0002e810: 5d2e 6d75 6c74 6970 6c69 6572 203d 2028  ].multiplier = (
-0002e820: 332c 2032 290a 2020 2020 2020 2020 2020  3, 2).          
-0002e830: 2020 3e3e 3e20 7475 706c 6574 5b2d 315d    >>> tuplet[-1]
-0002e840: 2e6d 756c 7469 706c 6965 7220 3d20 2831  .multiplier = (1
-0002e850: 2c20 3229 0a20 2020 2020 2020 2020 2020  , 2).           
-0002e860: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-0002e870: 7475 706c 6574 2920 2320 646f 6374 6573  tuplet) # doctes
-0002e880: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-0002e890: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-0002e8a0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002e8b0: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-0002e8c0: 626a 6164 2e6c 696c 7970 6f6e 6428 7475  bjad.lilypond(tu
-0002e8d0: 706c 6574 290a 2020 2020 2020 2020 2020  plet).          
-0002e8e0: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-0002e8f0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-0002e900: 2020 2020 2020 2020 5c74 7765 616b 2074          \tweak t
-0002e910: 6578 7420 2374 7570 6c65 742d 6e75 6d62  ext #tuplet-numb
-0002e920: 6572 3a3a 6361 6c63 2d66 7261 6374 696f  er::calc-fractio
-0002e930: 6e2d 7465 7874 0a20 2020 2020 2020 2020  n-text.         
-0002e940: 2020 2020 2020 205c 7469 6d65 7320 312f         \times 1/
-0002e950: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
-0002e960: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0002e970: 2020 2020 2020 2020 6327 3820 2a20 332f          c'8 * 3/
-0002e980: 320a 2020 2020 2020 2020 2020 2020 2020  2.              
-0002e990: 2020 2020 2020 6427 380a 2020 2020 2020        d'8.      
-0002e9a0: 2020 2020 2020 2020 2020 2020 2020 6527                e'
-0002e9b0: 3820 2a20 312f 320a 2020 2020 2020 2020  8 * 1/2.        
+0002a110: 2064 2734 0a20 2020 2020 2020 2020 2020   d'4.           
+0002a120: 2020 2020 2020 2020 2066 2734 0a20 2020           f'4.   
+0002a130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a140: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+0002a150: 2020 207d 0a0a 2020 2020 2020 2020 2020     }..          
+0002a160: 2020 3e3e 3e20 7475 706c 6574 2e61 7070    >>> tuplet.app
+0002a170: 656e 6428 6162 6a61 642e 4e6f 7465 2822  end(abjad.Note("
+0002a180: 6527 3422 2929 0a20 2020 2020 2020 2020  e'4")).         
+0002a190: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
+0002a1a0: 7728 7475 706c 6574 2920 2320 646f 6374  w(tuplet) # doct
+0002a1b0: 6573 743a 202b 534b 4950 0a0a 2020 2020  est: +SKIP..    
+0002a1c0: 2020 2020 2020 2020 2e2e 2020 646f 6373          ..  docs
+0002a1d0: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
+0002a1e0: 2020 2020 3e3e 3e20 7374 7269 6e67 203d      >>> string =
+0002a1f0: 2061 626a 6164 2e6c 696c 7970 6f6e 6428   abjad.lilypond(
+0002a200: 7475 706c 6574 290a 2020 2020 2020 2020  tuplet).        
+0002a210: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+0002a220: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+0002a230: 2020 2020 2020 2020 2020 5c74 7765 616b            \tweak
+0002a240: 2065 6467 652d 6865 6967 6874 2023 2728   edge-height #'(
+0002a250: 302e 3720 2e20 3029 0a20 2020 2020 2020  0.7 . 0).       
+0002a260: 2020 2020 2020 2020 205c 7469 6d65 7320           \times 
+0002a270: 322f 330a 2020 2020 2020 2020 2020 2020  2/3.            
+0002a280: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+0002a290: 2020 2020 2020 2020 2020 6327 340a 2020            c'4.  
+0002a2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a2b0: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+0002a2c0: 2020 2020 2020 2020 6427 340a 2020 2020          d'4.    
+0002a2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a2e0: 6627 340a 2020 2020 2020 2020 2020 2020  f'4.            
+0002a2f0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0002a300: 2020 2020 2020 2020 2020 2020 2020 6527                e'
+0002a310: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0002a320: 2020 7d0a 0a20 2020 2020 2020 202e 2e20    }..        .. 
+0002a330: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
+0002a340: 6d70 6c65 0a0a 2020 2020 2020 2020 2020  mple..          
+0002a350: 2020 4170 7065 6e64 7320 6e6f 7465 2074    Appends note t
+0002a360: 6f20 7475 706c 6574 2061 6e64 2070 7265  o tuplet and pre
+0002a370: 7365 7276 6573 2074 7570 6c65 7420 6475  serves tuplet du
+0002a380: 7261 7469 6f6e 3a0a 0a20 2020 2020 2020  ration:..       
+0002a390: 2020 2020 203e 3e3e 2074 7570 6c65 7420       >>> tuplet 
+0002a3a0: 3d20 6162 6a61 642e 5475 706c 6574 2828  = abjad.Tuplet((
+0002a3b0: 322c 2033 292c 2022 6327 3420 2820 6427  2, 3), "c'4 ( d'
+0002a3c0: 3420 6627 3420 2922 290a 2020 2020 2020  4 f'4 )").      
+0002a3d0: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+0002a3e0: 7368 6f77 2874 7570 6c65 7429 2023 2064  show(tuplet) # d
+0002a3f0: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+0002a400: 2020 2020 2020 2020 2020 202e 2e20 2064             ..  d
+0002a410: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
+0002a420: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+0002a430: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+0002a440: 6e64 2874 7570 6c65 7429 0a20 2020 2020  nd(tuplet).     
+0002a450: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
+0002a460: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
+0002a470: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
+0002a480: 6d65 7320 322f 330a 2020 2020 2020 2020  mes 2/3.        
+0002a490: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0002a4a0: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+0002a4b0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0002a4c0: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+0002a4d0: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
+0002a4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a4f0: 2020 2020 6627 340a 2020 2020 2020 2020      f'4.        
+0002a500: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0002a510: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+0002a520: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0002a530: 2074 7570 6c65 742e 6170 7065 6e64 2861   tuplet.append(a
+0002a540: 626a 6164 2e4e 6f74 6528 2265 2734 2229  bjad.Note("e'4")
+0002a550: 2c20 7072 6573 6572 7665 5f64 7572 6174  , preserve_durat
+0002a560: 696f 6e3d 5472 7565 290a 2020 2020 2020  ion=True).      
+0002a570: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+0002a580: 7368 6f77 2874 7570 6c65 7429 2023 2064  show(tuplet) # d
+0002a590: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+0002a5a0: 2020 2020 2020 2020 2020 202e 2e20 2064             ..  d
+0002a5b0: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
+0002a5c0: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+0002a5d0: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+0002a5e0: 6e64 2874 7570 6c65 7429 0a20 2020 2020  nd(tuplet).     
+0002a5f0: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
+0002a600: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
+0002a610: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
+0002a620: 6d65 7320 312f 320a 2020 2020 2020 2020  mes 1/2.        
+0002a630: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0002a640: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+0002a650: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0002a660: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+0002a670: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
+0002a680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a690: 2020 2020 6627 340a 2020 2020 2020 2020      f'4.        
+0002a6a0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0002a6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a6c0: 2020 6527 340a 2020 2020 2020 2020 2020    e'4.          
+0002a6d0: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
+0002a6e0: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
+0002a6f0: 7072 6573 6572 7665 5f64 7572 6174 696f  preserve_duratio
+0002a700: 6e3a 0a20 2020 2020 2020 2020 2020 206f  n:.            o
+0002a710: 6c64 5f64 7572 6174 696f 6e20 3d20 7365  ld_duration = se
+0002a720: 6c66 2e5f 6765 745f 6475 7261 7469 6f6e  lf._get_duration
+0002a730: 2829 0a20 2020 2020 2020 2043 6f6e 7461  ().        Conta
+0002a740: 696e 6572 2e61 7070 656e 6428 7365 6c66  iner.append(self
+0002a750: 2c20 636f 6d70 6f6e 656e 742c 206c 616e  , component, lan
+0002a760: 6775 6167 653d 6c61 6e67 7561 6765 290a  guage=language).
+0002a770: 2020 2020 2020 2020 6966 2070 7265 7365          if prese
+0002a780: 7276 655f 6475 7261 7469 6f6e 3a0a 2020  rve_duration:.  
+0002a790: 2020 2020 2020 2020 2020 6e65 775f 6475            new_du
+0002a7a0: 7261 7469 6f6e 203d 2073 656c 662e 5f67  ration = self._g
+0002a7b0: 6574 5f63 6f6e 7465 6e74 735f 6475 7261  et_contents_dura
+0002a7c0: 7469 6f6e 2829 0a20 2020 2020 2020 2020  tion().         
+0002a7d0: 2020 206d 756c 7469 706c 6965 7220 3d20     multiplier = 
+0002a7e0: 6f6c 645f 6475 7261 7469 6f6e 202f 206e  old_duration / n
+0002a7f0: 6577 5f64 7572 6174 696f 6e0a 2020 2020  ew_duration.    
+0002a800: 2020 2020 2020 2020 7365 6c66 2e6d 756c          self.mul
+0002a810: 7469 706c 6965 7220 3d20 6d75 6c74 6970  tiplier = multip
+0002a820: 6c69 6572 0a20 2020 2020 2020 2020 2020  lier.           
+0002a830: 2061 7373 6572 7420 7365 6c66 2e5f 6765   assert self._ge
+0002a840: 745f 6475 7261 7469 6f6e 2829 203d 3d20  t_duration() == 
+0002a850: 6f6c 645f 6475 7261 7469 6f6e 0a0a 2020  old_duration..  
+0002a860: 2020 6465 6620 6175 676d 656e 7461 7469    def augmentati
+0002a870: 6f6e 2873 656c 6629 202d 3e20 626f 6f6c  on(self) -> bool
+0002a880: 3a0a 2020 2020 2020 2020 7222 2222 0a20  :.        r""". 
+0002a890: 2020 2020 2020 2049 7320 7472 7565 2077         Is true w
+0002a8a0: 6865 6e20 7475 706c 6574 206d 756c 7469  hen tuplet multi
+0002a8b0: 706c 6965 7220 6973 2067 7265 6174 6572  plier is greater
+0002a8c0: 2074 6861 6e20 6060 3160 602e 0a0a 2020   than ``1``...  
+0002a8d0: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
+0002a8e0: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
+0002a8f0: 2020 2020 2020 2020 2020 2041 7567 6d65             Augme
+0002a900: 6e74 6564 2074 7570 6c65 743a 0a0a 2020  nted tuplet:..  
+0002a910: 2020 2020 2020 2020 2020 3e3e 3e20 7475            >>> tu
+0002a920: 706c 6574 203d 2061 626a 6164 2e54 7570  plet = abjad.Tup
+0002a930: 6c65 7428 2834 2c20 3329 2c20 2263 2738  let((4, 3), "c'8
+0002a940: 2064 2738 2065 2738 2229 0a20 2020 2020   d'8 e'8").     
+0002a950: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0002a960: 2e73 686f 7728 7475 706c 6574 2920 2320  .show(tuplet) # 
+0002a970: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+0002a980: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002a990: 7475 706c 6574 2e61 7567 6d65 6e74 6174  tuplet.augmentat
+0002a9a0: 696f 6e28 290a 2020 2020 2020 2020 2020  ion().          
+0002a9b0: 2020 5472 7565 0a0a 2020 2020 2020 2020    True..        
+0002a9c0: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+0002a9d0: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+0002a9e0: 2020 2020 2044 696d 696e 6973 6865 6420       Diminished 
+0002a9f0: 7475 706c 6574 3a0a 0a20 2020 2020 2020  tuplet:..       
+0002aa00: 2020 2020 203e 3e3e 2074 7570 6c65 7420       >>> tuplet 
+0002aa10: 3d20 6162 6a61 642e 5475 706c 6574 2828  = abjad.Tuplet((
+0002aa20: 322c 2033 292c 2022 6327 3420 6427 3420  2, 3), "c'4 d'4 
+0002aa30: 6527 3422 290a 2020 2020 2020 2020 2020  e'4").          
+0002aa40: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+0002aa50: 2874 7570 6c65 7429 2023 2064 6f63 7465  (tuplet) # docte
+0002aa60: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+0002aa70: 2020 2020 2020 203e 3e3e 2074 7570 6c65         >>> tuple
+0002aa80: 742e 6175 676d 656e 7461 7469 6f6e 2829  t.augmentation()
+0002aa90: 0a20 2020 2020 2020 2020 2020 2046 616c  .            Fal
+0002aaa0: 7365 0a0a 2020 2020 2020 2020 2e2e 2020  se..        ..  
+0002aab0: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
+0002aac0: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
+0002aad0: 2054 7269 7669 616c 2074 7570 6c65 743a   Trivial tuplet:
+0002aae0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0002aaf0: 3e20 7475 706c 6574 203d 2061 626a 6164  > tuplet = abjad
+0002ab00: 2e54 7570 6c65 7428 2831 2c20 3129 2c20  .Tuplet((1, 1), 
+0002ab10: 2263 2738 2e20 6427 382e 2065 2738 2e22  "c'8. d'8. e'8."
+0002ab20: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+0002ab30: 3e20 6162 6a61 642e 7368 6f77 2874 7570  > abjad.show(tup
+0002ab40: 6c65 7429 2023 2064 6f63 7465 7374 3a20  let) # doctest: 
+0002ab50: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+0002ab60: 2020 203e 3e3e 2074 7570 6c65 742e 6175     >>> tuplet.au
+0002ab70: 676d 656e 7461 7469 6f6e 2829 0a20 2020  gmentation().   
+0002ab80: 2020 2020 2020 2020 2046 616c 7365 0a0a           False..
+0002ab90: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0002aba0: 2020 2020 6966 2073 656c 662e 6d75 6c74      if self.mult
+0002abb0: 6970 6c69 6572 3a0a 2020 2020 2020 2020  iplier:.        
+0002abc0: 2020 2020 7265 7475 726e 2031 203c 2073      return 1 < s
+0002abd0: 656c 662e 6d75 6c74 6970 6c69 6572 0a20  elf.multiplier. 
+0002abe0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0002abf0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0002ac00: 4661 6c73 650a 0a20 2020 2064 6566 2064  False..    def d
+0002ac10: 696d 696e 7574 696f 6e28 7365 6c66 2920  iminution(self) 
+0002ac20: 2d3e 2062 6f6f 6c3a 0a20 2020 2020 2020  -> bool:.       
+0002ac30: 2072 2222 220a 2020 2020 2020 2020 4973   r""".        Is
+0002ac40: 2074 7275 6520 7768 656e 2074 7570 6c65   true when tuple
+0002ac50: 7420 6d75 6c74 6970 6c69 6572 2069 7320  t multiplier is 
+0002ac60: 6c65 7373 2074 6861 6e20 6060 3160 602e  less than ``1``.
+0002ac70: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
+0002ac80: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
+0002ac90: 650a 0a20 2020 2020 2020 2020 2020 2041  e..            A
+0002aca0: 7567 6d65 6e74 6564 2074 7570 6c65 743a  ugmented tuplet:
+0002acb0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0002acc0: 3e20 7475 706c 6574 203d 2061 626a 6164  > tuplet = abjad
+0002acd0: 2e54 7570 6c65 7428 2834 2c20 3329 2c20  .Tuplet((4, 3), 
+0002ace0: 2263 2738 2064 2738 2065 2738 2229 0a20  "c'8 d'8 e'8"). 
+0002acf0: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+0002ad00: 626a 6164 2e73 686f 7728 7475 706c 6574  bjad.show(tuplet
+0002ad10: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
+0002ad20: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
+0002ad30: 3e3e 3e20 7475 706c 6574 2e64 696d 696e  >>> tuplet.dimin
+0002ad40: 7574 696f 6e28 290a 2020 2020 2020 2020  ution().        
+0002ad50: 2020 2020 4661 6c73 650a 0a20 2020 2020      False..     
+0002ad60: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
+0002ad70: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
+0002ad80: 2020 2020 2020 2020 4469 6d69 6e69 7368          Diminish
+0002ad90: 6564 2074 7570 6c65 743a 0a0a 2020 2020  ed tuplet:..    
+0002ada0: 2020 2020 2020 2020 3e3e 3e20 7475 706c          >>> tupl
+0002adb0: 6574 203d 2061 626a 6164 2e54 7570 6c65  et = abjad.Tuple
+0002adc0: 7428 2832 2c20 3329 2c20 2263 2734 2064  t((2, 3), "c'4 d
+0002add0: 2734 2065 2734 2229 0a20 2020 2020 2020  '4 e'4").       
+0002ade0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
+0002adf0: 686f 7728 7475 706c 6574 2920 2320 646f  how(tuplet) # do
+0002ae00: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
+0002ae10: 2020 2020 2020 2020 2020 3e3e 3e20 7475            >>> tu
+0002ae20: 706c 6574 2e64 696d 696e 7574 696f 6e28  plet.diminution(
+0002ae30: 290a 2020 2020 2020 2020 2020 2020 5472  ).            Tr
+0002ae40: 7565 0a0a 2020 2020 2020 2020 2e2e 2020  ue..        ..  
+0002ae50: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
+0002ae60: 706c 650a 0a20 2020 2020 2020 2020 2020  ple..           
+0002ae70: 2054 7269 7669 616c 2074 7570 6c65 743a   Trivial tuplet:
+0002ae80: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0002ae90: 3e20 7475 706c 6574 203d 2061 626a 6164  > tuplet = abjad
+0002aea0: 2e54 7570 6c65 7428 2831 2c20 3129 2c20  .Tuplet((1, 1), 
+0002aeb0: 2263 2738 2e20 6427 382e 2065 2738 2e22  "c'8. d'8. e'8."
+0002aec0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+0002aed0: 3e20 6162 6a61 642e 7368 6f77 2874 7570  > abjad.show(tup
+0002aee0: 6c65 7429 2023 2064 6f63 7465 7374 3a20  let) # doctest: 
+0002aef0: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+0002af00: 2020 203e 3e3e 2074 7570 6c65 742e 6469     >>> tuplet.di
+0002af10: 6d69 6e75 7469 6f6e 2829 0a20 2020 2020  minution().     
+0002af20: 2020 2020 2020 2046 616c 7365 0a0a 2020         False..  
+0002af30: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0002af40: 2020 6966 2073 656c 662e 6d75 6c74 6970    if self.multip
+0002af50: 6c69 6572 3a0a 2020 2020 2020 2020 2020  lier:.          
+0002af60: 2020 7265 7475 726e 2073 656c 662e 6d75    return self.mu
+0002af70: 6c74 6970 6c69 6572 203c 2031 0a20 2020  ltiplier < 1.   
+0002af80: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0002af90: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+0002afa0: 6c73 650a 0a20 2020 2064 6566 2065 7874  lse..    def ext
+0002afb0: 656e 6428 0a20 2020 2020 2020 2073 656c  end(.        sel
+0002afc0: 662c 2061 7267 756d 656e 742c 202a 2c20  f, argument, *, 
+0002afd0: 6c61 6e67 7561 6765 3a20 7374 7220 3d20  language: str = 
+0002afe0: 2265 6e67 6c69 7368 222c 2070 7265 7365  "english", prese
+0002aff0: 7276 655f 6475 7261 7469 6f6e 3d46 616c  rve_duration=Fal
+0002b000: 7365 0a20 2020 2029 202d 3e20 4e6f 6e65  se.    ) -> None
+0002b010: 3a0a 2020 2020 2020 2020 7222 2222 0a20  :.        r""". 
+0002b020: 2020 2020 2020 2045 7874 656e 6473 2074         Extends t
+0002b030: 7570 6c65 7420 7769 7468 2060 6061 7267  uplet with ``arg
+0002b040: 756d 656e 7460 602e 0a0a 2020 2020 2020  ument``...      
+0002b050: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
+0002b060: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
+0002b070: 2020 2020 2020 2045 7874 656e 6473 2074         Extends t
+0002b080: 7570 6c65 7420 7769 7468 2074 6872 6565  uplet with three
+0002b090: 206e 6f74 6573 3a0a 0a20 2020 2020 2020   notes:..       
+0002b0a0: 2020 2020 203e 3e3e 2074 7570 6c65 7420       >>> tuplet 
+0002b0b0: 3d20 6162 6a61 642e 5475 706c 6574 2828  = abjad.Tuplet((
+0002b0c0: 322c 2033 292c 2022 6327 3420 2820 6427  2, 3), "c'4 ( d'
+0002b0d0: 3420 6627 3420 2922 290a 2020 2020 2020  4 f'4 )").      
+0002b0e0: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+0002b0f0: 7368 6f77 2874 7570 6c65 7429 2023 2064  show(tuplet) # d
+0002b100: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+0002b110: 2020 2020 2020 2020 2020 202e 2e20 2064             ..  d
+0002b120: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
+0002b130: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+0002b140: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+0002b150: 6e64 2874 7570 6c65 7429 0a20 2020 2020  nd(tuplet).     
+0002b160: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
+0002b170: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
+0002b180: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
+0002b190: 6d65 7320 322f 330a 2020 2020 2020 2020  mes 2/3.        
+0002b1a0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0002b1b0: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+0002b1c0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0002b1d0: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+0002b1e0: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
+0002b1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b200: 2020 2020 6627 340a 2020 2020 2020 2020      f'4.        
+0002b210: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0002b220: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+0002b230: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0002b240: 206e 6f74 6573 203d 205b 6162 6a61 642e   notes = [abjad.
+0002b250: 4e6f 7465 2822 6527 3332 2229 2c20 6162  Note("e'32"), ab
+0002b260: 6a61 642e 4e6f 7465 2822 6427 3332 2229  jad.Note("d'32")
+0002b270: 2c20 6162 6a61 642e 4e6f 7465 2822 6527  , abjad.Note("e'
+0002b280: 3136 2229 5d0a 2020 2020 2020 2020 2020  16")].          
+0002b290: 2020 3e3e 3e20 7475 706c 6574 2e65 7874    >>> tuplet.ext
+0002b2a0: 656e 6428 6e6f 7465 7329 0a20 2020 2020  end(notes).     
+0002b2b0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0002b2c0: 2e73 686f 7728 7475 706c 6574 2920 2320  .show(tuplet) # 
+0002b2d0: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+0002b2e0: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
+0002b2f0: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
+0002b300: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+0002b310: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+0002b320: 6f6e 6428 7475 706c 6574 290a 2020 2020  ond(tuplet).    
+0002b330: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002b340: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
+0002b350: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+0002b360: 7765 616b 2065 6467 652d 6865 6967 6874  weak edge-height
+0002b370: 2023 2728 302e 3720 2e20 3029 0a20 2020   #'(0.7 . 0).   
+0002b380: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
+0002b390: 6d65 7320 322f 330a 2020 2020 2020 2020  mes 2/3.        
+0002b3a0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0002b3b0: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+0002b3c0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0002b3d0: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+0002b3e0: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
+0002b3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b400: 2020 2020 6627 340a 2020 2020 2020 2020      f'4.        
+0002b410: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0002b420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b430: 2020 6527 3332 0a20 2020 2020 2020 2020    e'32.         
+0002b440: 2020 2020 2020 2020 2020 2064 2733 320a             d'32.
+0002b450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b460: 2020 2020 6527 3136 0a20 2020 2020 2020      e'16.       
+0002b470: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+0002b480: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+0002b490: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+0002b4a0: 2020 2020 2020 2020 2045 7874 656e 6473           Extends
+0002b4b0: 2074 7570 6c65 7420 7769 7468 2074 6872   tuplet with thr
+0002b4c0: 6565 206e 6f74 6573 2061 6e64 2070 7265  ee notes and pre
+0002b4d0: 7365 7276 6573 2074 7570 6c65 7420 6475  serves tuplet du
+0002b4e0: 7261 7469 6f6e 3a0a 0a20 2020 2020 2020  ration:..       
+0002b4f0: 2020 2020 203e 3e3e 2074 7570 6c65 7420       >>> tuplet 
+0002b500: 3d20 6162 6a61 642e 5475 706c 6574 2828  = abjad.Tuplet((
+0002b510: 322c 2033 292c 2022 6327 3420 2820 6427  2, 3), "c'4 ( d'
+0002b520: 3420 6627 3420 2922 290a 2020 2020 2020  4 f'4 )").      
+0002b530: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+0002b540: 7368 6f77 2874 7570 6c65 7429 2023 2064  show(tuplet) # d
+0002b550: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+0002b560: 2020 2020 2020 2020 2020 202e 2e20 2064             ..  d
+0002b570: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
+0002b580: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+0002b590: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+0002b5a0: 6e64 2874 7570 6c65 7429 0a20 2020 2020  nd(tuplet).     
+0002b5b0: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
+0002b5c0: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
+0002b5d0: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
+0002b5e0: 6d65 7320 322f 330a 2020 2020 2020 2020  mes 2/3.        
+0002b5f0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0002b600: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+0002b610: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0002b620: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+0002b630: 2020 2020 2020 2020 2020 2020 6427 340a              d'4.
+0002b640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b650: 2020 2020 6627 340a 2020 2020 2020 2020      f'4.        
+0002b660: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0002b670: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+0002b680: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0002b690: 206e 6f74 6573 203d 205b 6162 6a61 642e   notes = [abjad.
+0002b6a0: 4e6f 7465 2822 6527 3332 2229 2c20 6162  Note("e'32"), ab
+0002b6b0: 6a61 642e 4e6f 7465 2822 6427 3332 2229  jad.Note("d'32")
+0002b6c0: 2c20 6162 6a61 642e 4e6f 7465 2822 6527  , abjad.Note("e'
+0002b6d0: 3136 2229 5d0a 2020 2020 2020 2020 2020  16")].          
+0002b6e0: 2020 3e3e 3e20 7475 706c 6574 2e65 7874    >>> tuplet.ext
+0002b6f0: 656e 6428 6e6f 7465 732c 2070 7265 7365  end(notes, prese
+0002b700: 7276 655f 6475 7261 7469 6f6e 3d54 7275  rve_duration=Tru
+0002b710: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+0002b720: 3e3e 2061 626a 6164 2e73 686f 7728 7475  >> abjad.show(tu
+0002b730: 706c 6574 2920 2320 646f 6374 6573 743a  plet) # doctest:
+0002b740: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0002b750: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
+0002b760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b770: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+0002b780: 6164 2e6c 696c 7970 6f6e 6428 7475 706c  ad.lilypond(tupl
+0002b790: 6574 290a 2020 2020 2020 2020 2020 2020  et).            
+0002b7a0: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+0002b7b0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+0002b7c0: 2020 2020 2020 5c74 696d 6573 2034 2f37        \times 4/7
+0002b7d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b7e0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+0002b7f0: 2020 2020 2020 2063 2734 0a20 2020 2020         c'4.     
+0002b800: 2020 2020 2020 2020 2020 2020 2020 2028                 (
+0002b810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b820: 2020 2020 2064 2734 0a20 2020 2020 2020       d'4.       
+0002b830: 2020 2020 2020 2020 2020 2020 2066 2734               f'4
+0002b840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b850: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0002b860: 2020 2020 2020 2020 2020 2065 2733 320a             e'32.
+0002b870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b880: 2020 2020 6427 3332 0a20 2020 2020 2020      d'32.       
+0002b890: 2020 2020 2020 2020 2020 2020 2065 2731               e'1
+0002b8a0: 360a 2020 2020 2020 2020 2020 2020 2020  6.              
+0002b8b0: 2020 7d0a 0a20 2020 2020 2020 2022 2222    }..        """
+0002b8c0: 0a20 2020 2020 2020 2069 6620 7072 6573  .        if pres
+0002b8d0: 6572 7665 5f64 7572 6174 696f 6e3a 0a20  erve_duration:. 
+0002b8e0: 2020 2020 2020 2020 2020 206f 6c64 5f64             old_d
+0002b8f0: 7572 6174 696f 6e20 3d20 7365 6c66 2e5f  uration = self._
+0002b900: 6765 745f 6475 7261 7469 6f6e 2829 0a20  get_duration(). 
+0002b910: 2020 2020 2020 2043 6f6e 7461 696e 6572         Container
+0002b920: 2e65 7874 656e 6428 7365 6c66 2c20 6172  .extend(self, ar
+0002b930: 6775 6d65 6e74 2c20 6c61 6e67 7561 6765  gument, language
+0002b940: 3d6c 616e 6775 6167 6529 0a20 2020 2020  =language).     
+0002b950: 2020 2069 6620 7072 6573 6572 7665 5f64     if preserve_d
+0002b960: 7572 6174 696f 6e3a 0a20 2020 2020 2020  uration:.       
+0002b970: 2020 2020 206e 6577 5f64 7572 6174 696f       new_duratio
+0002b980: 6e20 3d20 7365 6c66 2e5f 6765 745f 636f  n = self._get_co
+0002b990: 6e74 656e 7473 5f64 7572 6174 696f 6e28  ntents_duration(
+0002b9a0: 290a 2020 2020 2020 2020 2020 2020 6d75  ).            mu
+0002b9b0: 6c74 6970 6c69 6572 203d 206f 6c64 5f64  ltiplier = old_d
+0002b9c0: 7572 6174 696f 6e20 2f20 6e65 775f 6475  uration / new_du
+0002b9d0: 7261 7469 6f6e 0a20 2020 2020 2020 2020  ration.         
+0002b9e0: 2020 2073 656c 662e 6d75 6c74 6970 6c69     self.multipli
+0002b9f0: 6572 203d 206d 756c 7469 706c 6965 720a  er = multiplier.
+0002ba00: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+0002ba10: 7274 2073 656c 662e 5f67 6574 5f64 7572  rt self._get_dur
+0002ba20: 6174 696f 6e28 2920 3d3d 206f 6c64 5f64  ation() == old_d
+0002ba30: 7572 6174 696f 6e0a 0a20 2020 2040 7374  uration..    @st
+0002ba40: 6174 6963 6d65 7468 6f64 0a20 2020 2064  aticmethod.    d
+0002ba50: 6566 2066 726f 6d5f 6475 7261 7469 6f6e  ef from_duration
+0002ba60: 280a 2020 2020 2020 2020 6475 7261 7469  (.        durati
+0002ba70: 6f6e 3a20 5f74 7970 696e 6773 2e44 7572  on: _typings.Dur
+0002ba80: 6174 696f 6e2c 2063 6f6d 706f 6e65 6e74  ation, component
+0002ba90: 732c 202a 2c20 7461 673a 205f 7461 672e  s, *, tag: _tag.
+0002baa0: 5461 6720 3d20 4e6f 6e65 0a20 2020 2029  Tag = None.    )
+0002bab0: 202d 3e20 2254 7570 6c65 7422 3a0a 2020   -> "Tuplet":.  
+0002bac0: 2020 2020 2020 7222 2222 0a20 2020 2020        r""".     
+0002bad0: 2020 204d 616b 6573 2074 7570 6c65 7420     Makes tuplet 
+0002bae0: 6672 6f6d 2060 6064 7572 6174 696f 6e60  from ``duration`
+0002baf0: 6020 616e 6420 6060 636f 6d70 6f6e 656e  ` and ``componen
+0002bb00: 7473 6060 2e0a 0a20 2020 2020 2020 202e  ts``...        .
+0002bb10: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+0002bb20: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+0002bb30: 2020 2020 4d61 6b65 7320 6469 6d69 6e75      Makes diminu
+0002bb40: 7469 6f6e 3a0a 0a20 2020 2020 2020 2020  tion:..         
+0002bb50: 2020 203e 3e3e 2074 7570 6c65 7420 3d20     >>> tuplet = 
+0002bb60: 6162 6a61 642e 5475 706c 6574 2e66 726f  abjad.Tuplet.fro
+0002bb70: 6d5f 6475 7261 7469 6f6e 2828 322c 2038  m_duration((2, 8
+0002bb80: 292c 2022 6327 3820 6427 2065 2722 290a  ), "c'8 d' e'").
+0002bb90: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002bba0: 6162 6a61 642e 7368 6f77 2874 7570 6c65  abjad.show(tuple
+0002bbb0: 7429 2023 2064 6f63 7465 7374 3a20 2b53  t) # doctest: +S
+0002bbc0: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
+0002bbd0: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
+0002bbe0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+0002bbf0: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
+0002bc00: 6c69 6c79 706f 6e64 2874 7570 6c65 7429  lilypond(tuplet)
+0002bc10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002bc20: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
+0002bc30: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
+0002bc40: 2020 205c 7469 6d65 7320 322f 330a 2020     \times 2/3.  
+0002bc50: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+0002bc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bc70: 2020 2020 6327 380a 2020 2020 2020 2020      c'8.        
+0002bc80: 2020 2020 2020 2020 2020 2020 6427 380a              d'8.
+0002bc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bca0: 2020 2020 6527 380a 2020 2020 2020 2020      e'8.        
+0002bcb0: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
+0002bcc0: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
+0002bcd0: 6620 6e6f 7420 6c65 6e28 636f 6d70 6f6e  f not len(compon
+0002bce0: 656e 7473 293a 0a20 2020 2020 2020 2020  ents):.         
+0002bcf0: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
+0002bd00: 6f6e 2866 2263 6f6d 706f 6e65 6e74 7320  on(f"components 
+0002bd10: 6d75 7374 2062 6520 6e6f 6e65 6d70 7479  must be nonempty
+0002bd20: 3a20 7b63 6f6d 706f 6e65 6e74 7321 727d  : {components!r}
+0002bd30: 2e22 290a 2020 2020 2020 2020 7461 7267  .").        targ
+0002bd40: 6574 5f64 7572 6174 696f 6e20 3d20 5f64  et_duration = _d
+0002bd50: 7572 6174 696f 6e2e 4475 7261 7469 6f6e  uration.Duration
+0002bd60: 2864 7572 6174 696f 6e29 0a20 2020 2020  (duration).     
+0002bd70: 2020 2074 7570 6c65 7420 3d20 5475 706c     tuplet = Tupl
+0002bd80: 6574 2831 2c20 636f 6d70 6f6e 656e 7473  et(1, components
+0002bd90: 2c20 7461 673d 7461 6729 0a20 2020 2020  , tag=tag).     
+0002bda0: 2020 2063 6f6e 7465 6e74 735f 6475 7261     contents_dura
+0002bdb0: 7469 6f6e 203d 2074 7570 6c65 742e 5f67  tion = tuplet._g
+0002bdc0: 6574 5f64 7572 6174 696f 6e28 290a 2020  et_duration().  
+0002bdd0: 2020 2020 2020 6d75 6c74 6970 6c69 6572        multiplier
+0002bde0: 203d 2074 6172 6765 745f 6475 7261 7469   = target_durati
+0002bdf0: 6f6e 202f 2063 6f6e 7465 6e74 735f 6475  on / contents_du
+0002be00: 7261 7469 6f6e 0a20 2020 2020 2020 2074  ration.        t
+0002be10: 7570 6c65 742e 6d75 6c74 6970 6c69 6572  uplet.multiplier
+0002be20: 203d 206d 756c 7469 706c 6965 720a 2020   = multiplier.  
+0002be30: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
+0002be40: 6c65 740a 0a20 2020 2064 6566 206e 6f72  let..    def nor
+0002be50: 6d61 6c69 7a65 5f6d 756c 7469 706c 6965  malize_multiplie
+0002be60: 7228 7365 6c66 2920 2d3e 204e 6f6e 653a  r(self) -> None:
+0002be70: 0a20 2020 2020 2020 2072 2222 220a 2020  .        r""".  
+0002be80: 2020 2020 2020 4e6f 726d 616c 697a 6573        Normalizes
+0002be90: 2074 7570 6c65 7420 6d75 6c74 6970 6c69   tuplet multipli
+0002bea0: 6572 2e0a 0a20 2020 2020 2020 202e 2e20  er...        .. 
+0002beb0: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
+0002bec0: 6d70 6c65 0a0a 2020 2020 2020 2020 2020  mple..          
+0002bed0: 2020 3e3e 3e20 7475 706c 6574 203d 2061    >>> tuplet = a
+0002bee0: 626a 6164 2e54 7570 6c65 7428 2831 2c20  bjad.Tuplet((1, 
+0002bef0: 3329 2c20 2263 2734 2064 2720 6527 2229  3), "c'4 d' e'")
+0002bf00: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0002bf10: 2061 626a 6164 2e73 686f 7728 7475 706c   abjad.show(tupl
+0002bf20: 6574 2920 2320 646f 6374 6573 743a 202b  et) # doctest: +
+0002bf30: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
+0002bf40: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+0002bf50: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+0002bf60: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+0002bf70: 2e6c 696c 7970 6f6e 6428 7475 706c 6574  .lilypond(tuplet
+0002bf80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002bf90: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+0002bfa0: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0002bfb0: 2020 2020 5c74 696d 6573 2031 2f33 0a20      \times 1/3. 
+0002bfc0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+0002bfd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002bfe0: 2020 2020 2063 2734 0a20 2020 2020 2020       c'4.       
+0002bff0: 2020 2020 2020 2020 2020 2020 2064 2734               d'4
+0002c000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c010: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
+0002c020: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+0002c030: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+0002c040: 642e 4d75 6c74 6970 6c69 6572 2874 7570  d.Multiplier(tup
+0002c050: 6c65 742e 6d75 6c74 6970 6c69 6572 292e  let.multiplier).
+0002c060: 6e6f 726d 616c 697a 6564 2829 0a20 2020  normalized().   
+0002c070: 2020 2020 2020 2020 2046 616c 7365 0a0a           False..
+0002c080: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002c090: 7475 706c 6574 2e6e 6f72 6d61 6c69 7a65  tuplet.normalize
+0002c0a0: 5f6d 756c 7469 706c 6965 7228 290a 2020  _multiplier().  
+0002c0b0: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+0002c0c0: 6a61 642e 7368 6f77 2874 7570 6c65 7429  jad.show(tuplet)
+0002c0d0: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
+0002c0e0: 500a 0a20 2020 2020 2020 2020 2020 202e  P..            .
+0002c0f0: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
+0002c100: 2020 2020 2020 2020 2020 203e 3e3e 2073             >>> s
+0002c110: 7472 696e 6720 3d20 6162 6a61 642e 6c69  tring = abjad.li
+0002c120: 6c79 706f 6e64 2874 7570 6c65 7429 0a20  lypond(tuplet). 
+0002c130: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+0002c140: 3e3e 2070 7269 6e74 2873 7472 696e 6729  >> print(string)
+0002c150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c160: 205c 7469 6d65 7320 322f 330a 2020 2020   \times 2/3.    
+0002c170: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+0002c180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c190: 2020 6327 380a 2020 2020 2020 2020 2020    c'8.          
+0002c1a0: 2020 2020 2020 2020 2020 6427 380a 2020            d'8.  
+0002c1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c1c0: 2020 6527 380a 2020 2020 2020 2020 2020    e'8.          
+0002c1d0: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
+0002c1e0: 2020 2020 203e 3e3e 2061 626a 6164 2e4d       >>> abjad.M
+0002c1f0: 756c 7469 706c 6965 7228 7475 706c 6574  ultiplier(tuplet
+0002c200: 2e6d 756c 7469 706c 6965 7229 2e6e 6f72  .multiplier).nor
+0002c210: 6d61 6c69 7a65 6428 290a 2020 2020 2020  malized().      
+0002c220: 2020 2020 2020 5472 7565 0a0a 2020 2020        True..    
+0002c230: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+0002c240: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+0002c250: 2020 2020 2020 2020 203e 3e3e 2074 7570           >>> tup
+0002c260: 6c65 7420 3d20 6162 6a61 642e 5475 706c  let = abjad.Tupl
+0002c270: 6574 2828 382c 2033 292c 2022 6327 3332  et((8, 3), "c'32
+0002c280: 2064 2733 3220 6527 3332 2229 0a20 2020   d'32 e'32").   
+0002c290: 2020 2020 2020 2020 203e 3e3e 2061 626a           >>> abj
+0002c2a0: 6164 2e73 686f 7728 7475 706c 6574 2920  ad.show(tuplet) 
+0002c2b0: 2320 646f 6374 6573 743a 202b 534b 4950  # doctest: +SKIP
+0002c2c0: 0a0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
+0002c2d0: 2020 646f 6373 3a3a 0a0a 2020 2020 2020    docs::..      
+0002c2e0: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+0002c2f0: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+0002c300: 7970 6f6e 6428 7475 706c 6574 290a 2020  ypond(tuplet).  
+0002c310: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+0002c320: 3e20 7072 696e 7428 7374 7269 6e67 290a  > print(string).
+0002c330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c340: 5c74 7765 616b 2074 6578 7420 2374 7570  \tweak text #tup
+0002c350: 6c65 742d 6e75 6d62 6572 3a3a 6361 6c63  let-number::calc
+0002c360: 2d66 7261 6374 696f 6e2d 7465 7874 0a20  -fraction-text. 
+0002c370: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+0002c380: 7469 6d65 7320 382f 330a 2020 2020 2020  times 8/3.      
+0002c390: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+0002c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c3b0: 6327 3332 0a20 2020 2020 2020 2020 2020  c'32.           
+0002c3c0: 2020 2020 2020 2020 2064 2733 320a 2020           d'32.  
+0002c3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c3e0: 2020 6527 3332 0a20 2020 2020 2020 2020    e'32.         
+0002c3f0: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
+0002c400: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+0002c410: 4d75 6c74 6970 6c69 6572 2874 7570 6c65  Multiplier(tuple
+0002c420: 742e 6d75 6c74 6970 6c69 6572 292e 6e6f  t.multiplier).no
+0002c430: 726d 616c 697a 6564 2829 0a20 2020 2020  rmalized().     
+0002c440: 2020 2020 2020 2046 616c 7365 0a0a 2020         False..  
+0002c450: 2020 2020 2020 2020 2020 3e3e 3e20 7475            >>> tu
+0002c460: 706c 6574 2e6e 6f72 6d61 6c69 7a65 5f6d  plet.normalize_m
+0002c470: 756c 7469 706c 6965 7228 290a 2020 2020  ultiplier().    
+0002c480: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+0002c490: 642e 7368 6f77 2874 7570 6c65 7429 2023  d.show(tuplet) #
+0002c4a0: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
+0002c4b0: 0a20 2020 2020 2020 2020 2020 202e 2e20  .            .. 
+0002c4c0: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
+0002c4d0: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
+0002c4e0: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
+0002c4f0: 706f 6e64 2874 7570 6c65 7429 0a20 2020  pond(tuplet).   
+0002c500: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+0002c510: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
+0002c520: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+0002c530: 7477 6561 6b20 7465 7874 2023 7475 706c  tweak text #tupl
+0002c540: 6574 2d6e 756d 6265 723a 3a63 616c 632d  et-number::calc-
+0002c550: 6672 6163 7469 6f6e 2d74 6578 740a 2020  fraction-text.  
+0002c560: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+0002c570: 696d 6573 2034 2f33 0a20 2020 2020 2020  imes 4/3.       
+0002c580: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+0002c590: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0002c5a0: 2731 360a 2020 2020 2020 2020 2020 2020  '16.            
+0002c5b0: 2020 2020 2020 2020 6427 3136 0a20 2020          d'16.   
+0002c5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c5d0: 2065 2731 360a 2020 2020 2020 2020 2020   e'16.          
+0002c5e0: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
+0002c5f0: 2020 2020 203e 3e3e 2061 626a 6164 2e4d       >>> abjad.M
+0002c600: 756c 7469 706c 6965 7228 7475 706c 6574  ultiplier(tuplet
+0002c610: 2e6d 756c 7469 706c 6965 7229 2e6e 6f72  .multiplier).nor
+0002c620: 6d61 6c69 7a65 6428 290a 2020 2020 2020  malized().      
+0002c630: 2020 2020 2020 5472 7565 0a0a 2020 2020        True..    
+0002c640: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+0002c650: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+0002c660: 2020 2020 2020 2020 203e 3e3e 2074 7570           >>> tup
+0002c670: 6c65 7420 3d20 6162 6a61 642e 5475 706c  let = abjad.Tupl
+0002c680: 6574 2828 352c 2031 3229 2c20 2263 2734  et((5, 12), "c'4
+0002c690: 2064 2734 2065 2734 2229 0a20 2020 2020   d'4 e'4").     
+0002c6a0: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0002c6b0: 2e73 686f 7728 7475 706c 6574 2920 2320  .show(tuplet) # 
+0002c6c0: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+0002c6d0: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
+0002c6e0: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
+0002c6f0: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+0002c700: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+0002c710: 6f6e 6428 7475 706c 6574 290a 2020 2020  ond(tuplet).    
+0002c720: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002c730: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
+0002c740: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+0002c750: 7765 616b 2074 6578 7420 2374 7570 6c65  weak text #tuple
+0002c760: 742d 6e75 6d62 6572 3a3a 6361 6c63 2d66  t-number::calc-f
+0002c770: 7261 6374 696f 6e2d 7465 7874 0a20 2020  raction-text.   
+0002c780: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
+0002c790: 6d65 7320 352f 3132 0a20 2020 2020 2020  mes 5/12.       
+0002c7a0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+0002c7b0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0002c7c0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+0002c7d0: 2020 2020 2020 2064 2734 0a20 2020 2020         d'4.     
+0002c7e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0002c7f0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+0002c800: 2020 207d 0a0a 2020 2020 2020 2020 2020     }..          
+0002c810: 2020 3e3e 3e20 6162 6a61 642e 4d75 6c74    >>> abjad.Mult
+0002c820: 6970 6c69 6572 2874 7570 6c65 742e 6d75  iplier(tuplet.mu
+0002c830: 6c74 6970 6c69 6572 292e 6e6f 726d 616c  ltiplier).normal
+0002c840: 697a 6564 2829 0a20 2020 2020 2020 2020  ized().         
+0002c850: 2020 2046 616c 7365 0a0a 2020 2020 2020     False..      
+0002c860: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
+0002c870: 2e6e 6f72 6d61 6c69 7a65 5f6d 756c 7469  .normalize_multi
+0002c880: 706c 6965 7228 290a 2020 2020 2020 2020  plier().        
+0002c890: 2020 2020 3e3e 3e20 6162 6a61 642e 7368      >>> abjad.sh
+0002c8a0: 6f77 2874 7570 6c65 7429 2023 2064 6f63  ow(tuplet) # doc
+0002c8b0: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
+0002c8c0: 2020 2020 2020 2020 202e 2e20 2064 6f63           ..  doc
+0002c8d0: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
+0002c8e0: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+0002c8f0: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+0002c900: 2874 7570 6c65 7429 0a20 2020 2020 2020  (tuplet).       
+0002c910: 2020 2020 2020 2020 203e 3e3e 2070 7269           >>> pri
+0002c920: 6e74 2873 7472 696e 6729 0a20 2020 2020  nt(string).     
+0002c930: 2020 2020 2020 2020 2020 205c 7477 6561             \twea
+0002c940: 6b20 7465 7874 2023 7475 706c 6574 2d6e  k text #tuplet-n
+0002c950: 756d 6265 723a 3a63 616c 632d 6672 6163  umber::calc-frac
+0002c960: 7469 6f6e 2d74 6578 740a 2020 2020 2020  tion-text.      
+0002c970: 2020 2020 2020 2020 2020 5c74 696d 6573            \times
+0002c980: 2031 302f 3132 0a20 2020 2020 2020 2020   10/12.         
+0002c990: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+0002c9a0: 2020 2020 2020 2020 2020 2020 2063 2738               c'8
+0002c9b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c9c0: 2020 2020 2064 2738 0a20 2020 2020 2020       d'8.       
+0002c9d0: 2020 2020 2020 2020 2020 2020 2065 2738               e'8
+0002c9e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c9f0: 207d 0a0a 2020 2020 2020 2020 2020 2020   }..            
+0002ca00: 3e3e 3e20 6162 6a61 642e 4d75 6c74 6970  >>> abjad.Multip
+0002ca10: 6c69 6572 2874 7570 6c65 742e 6d75 6c74  lier(tuplet.mult
+0002ca20: 6970 6c69 6572 292e 6e6f 726d 616c 697a  iplier).normaliz
+0002ca30: 6564 2829 0a20 2020 2020 2020 2020 2020  ed().           
+0002ca40: 2054 7275 650a 0a20 2020 2020 2020 2022   True..        "
+0002ca50: 2222 0a20 2020 2020 2020 2023 2066 696e  "".        # fin
+0002ca60: 6420 7475 706c 6574 206d 756c 7469 706c  d tuplet multipl
+0002ca70: 6965 720a 2020 2020 2020 2020 696e 7465  ier.        inte
+0002ca80: 6765 725f 6578 706f 6e65 6e74 203d 2069  ger_exponent = i
+0002ca90: 6e74 286d 6174 682e 6c6f 6728 7365 6c66  nt(math.log(self
+0002caa0: 2e6d 756c 7469 706c 6965 722c 2032 2929  .multiplier, 2))
+0002cab0: 0a20 2020 2020 2020 206c 6561 665f 6d75  .        leaf_mu
+0002cac0: 6c74 6970 6c69 6572 203d 205f 6475 7261  ltiplier = _dura
+0002cad0: 7469 6f6e 2e4d 756c 7469 706c 6965 7228  tion.Multiplier(
+0002cae0: 3229 202a 2a20 696e 7465 6765 725f 6578  2) ** integer_ex
+0002caf0: 706f 6e65 6e74 0a20 2020 2020 2020 2023  ponent.        #
+0002cb00: 2073 6361 6c65 206c 6561 7665 7320 696e   scale leaves in
+0002cb10: 2074 7570 6c65 7420 6279 2070 6f77 6572   tuplet by power
+0002cb20: 206f 6620 7477 6f0a 2020 2020 2020 2020   of two.        
+0002cb30: 666f 7220 636f 6d70 6f6e 656e 7420 696e  for component in
+0002cb40: 2073 656c 663a 0a20 2020 2020 2020 2020   self:.         
+0002cb50: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0002cb60: 2863 6f6d 706f 6e65 6e74 2c20 4c65 6166  (component, Leaf
+0002cb70: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0002cb80: 2020 206f 6c64 5f77 7269 7474 656e 5f64     old_written_d
+0002cb90: 7572 6174 696f 6e20 3d20 636f 6d70 6f6e  uration = compon
+0002cba0: 656e 742e 7772 6974 7465 6e5f 6475 7261  ent.written_dura
+0002cbb0: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
+0002cbc0: 2020 2020 206e 6577 5f77 7269 7474 656e       new_written
+0002cbd0: 5f64 7572 6174 696f 6e20 3d20 6c65 6166  _duration = leaf
+0002cbe0: 5f6d 756c 7469 706c 6965 7220 2a20 6f6c  _multiplier * ol
+0002cbf0: 645f 7772 6974 7465 6e5f 6475 7261 7469  d_written_durati
+0002cc00: 6f6e 0a20 2020 2020 2020 2020 2020 2020  on.             
+0002cc10: 2020 206d 756c 7469 706c 6965 7220 3d20     multiplier = 
+0002cc20: 6e65 775f 7772 6974 7465 6e5f 6475 7261  new_written_dura
+0002cc30: 7469 6f6e 202f 206f 6c64 5f77 7269 7474  tion / old_writt
+0002cc40: 656e 5f64 7572 6174 696f 6e0a 2020 2020  en_duration.    
+0002cc50: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
+0002cc60: 6f6e 656e 742e 5f73 6361 6c65 286d 756c  onent._scale(mul
+0002cc70: 7469 706c 6965 7229 0a20 2020 2020 2020  tiplier).       
+0002cc80: 206e 756d 6572 6174 6f72 2c20 6465 6e6f   numerator, deno
+0002cc90: 6d69 6e61 746f 7220 3d20 6c65 6166 5f6d  minator = leaf_m
+0002cca0: 756c 7469 706c 6965 722e 7061 6972 0a20  ultiplier.pair. 
+0002ccb0: 2020 2020 2020 206d 756c 7469 706c 6965         multiplie
+0002ccc0: 7220 3d20 5f64 7572 6174 696f 6e2e 4d75  r = _duration.Mu
+0002ccd0: 6c74 6970 6c69 6572 2864 656e 6f6d 696e  ltiplier(denomin
+0002cce0: 6174 6f72 2c20 6e75 6d65 7261 746f 7229  ator, numerator)
+0002ccf0: 0a20 2020 2020 2020 2073 656c 662e 6d75  .        self.mu
+0002cd00: 6c74 6970 6c69 6572 202a 3d20 6d75 6c74  ltiplier *= mult
+0002cd10: 6970 6c69 6572 0a0a 2020 2020 6465 6620  iplier..    def 
+0002cd20: 7265 7374 5f66 696c 6c65 6428 7365 6c66  rest_filled(self
+0002cd30: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
+0002cd40: 2020 2072 2222 220a 2020 2020 2020 2020     r""".        
+0002cd50: 4973 2074 7275 6520 7768 656e 2074 7570  Is true when tup
+0002cd60: 6c65 7420 6973 2072 6573 742d 6669 6c6c  let is rest-fill
+0002cd70: 6564 2e0a 0a20 2020 2020 2020 202e 2e20  ed...        .. 
+0002cd80: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
+0002cd90: 6d70 6c65 0a0a 2020 2020 2020 2020 2020  mple..          
+0002cda0: 2020 3e3e 3e20 7475 706c 6574 203d 2061    >>> tuplet = a
+0002cdb0: 626a 6164 2e54 7570 6c65 7428 2833 2c20  bjad.Tuplet((3, 
+0002cdc0: 3229 2c20 2272 3420 7220 7222 290a 2020  2), "r4 r r").  
+0002cdd0: 2020 2020 2020 2020 2020 3e3e 3e20 6162            >>> ab
+0002cde0: 6a61 642e 7368 6f77 2874 7570 6c65 7429  jad.show(tuplet)
+0002cdf0: 2023 2064 6f63 7465 7374 3a20 2b53 4b49   # doctest: +SKI
+0002ce00: 500a 0a20 2020 2020 2020 2020 2020 202e  P..            .
+0002ce10: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+0002ce20: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+0002ce30: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+0002ce40: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+0002ce50: 6f6e 6428 7475 706c 6574 290a 2020 2020  ond(tuplet).    
+0002ce60: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002ce70: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
+0002ce80: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+0002ce90: 7765 616b 2074 6578 7420 2374 7570 6c65  weak text #tuple
+0002cea0: 742d 6e75 6d62 6572 3a3a 6361 6c63 2d66  t-number::calc-f
+0002ceb0: 7261 6374 696f 6e2d 7465 7874 0a20 2020  raction-text.   
+0002cec0: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
+0002ced0: 6d65 7320 332f 320a 2020 2020 2020 2020  mes 3/2.        
+0002cee0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0002cef0: 2020 2020 2020 2020 2020 2020 2020 7234                r4
+0002cf00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cf10: 2020 2020 2072 340a 2020 2020 2020 2020       r4.        
+0002cf20: 2020 2020 2020 2020 2020 2020 7234 0a20              r4. 
+0002cf30: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+0002cf40: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0002cf50: 3e20 7475 706c 6574 2e72 6573 745f 6669  > tuplet.rest_fi
+0002cf60: 6c6c 6564 2829 0a20 2020 2020 2020 2020  lled().         
+0002cf70: 2020 2054 7275 650a 0a20 2020 2020 2020     True..       
+0002cf80: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+0002cf90: 7572 6e20 616c 6c28 6973 696e 7374 616e  urn all(isinstan
+0002cfa0: 6365 285f 2c20 5265 7374 2920 666f 7220  ce(_, Rest) for 
+0002cfb0: 5f20 696e 2073 656c 6629 0a0a 2020 2020  _ in self)..    
+0002cfc0: 6465 6620 7265 7772 6974 655f 646f 7473  def rewrite_dots
+0002cfd0: 2873 656c 6629 202d 3e20 4e6f 6e65 3a0a  (self) -> None:.
+0002cfe0: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
+0002cff0: 2020 2020 2052 6577 7269 7465 7320 646f       Rewrites do
+0002d000: 7473 2e0a 0a20 2020 2020 2020 202e 2e20  ts...        .. 
+0002d010: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
+0002d020: 6d70 6c65 0a0a 2020 2020 2020 2020 2020  mple..          
+0002d030: 2020 5265 7772 6974 6573 2073 696e 676c    Rewrites singl
+0002d040: 6520 646f 7473 2061 7320 333a 3220 7072  e dots as 3:2 pr
+0002d050: 6f6c 6174 696f 6e3a 0a0a 2020 2020 2020  olation:..      
+0002d060: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
+0002d070: 203d 2061 626a 6164 2e54 7570 6c65 7428   = abjad.Tuplet(
+0002d080: 312c 2022 6327 382e 2063 2738 2e22 290a  1, "c'8. c'8.").
+0002d090: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002d0a0: 6162 6a61 642e 7368 6f77 2874 7570 6c65  abjad.show(tuple
+0002d0b0: 7429 2023 2064 6f63 7465 7374 3a20 2b53  t) # doctest: +S
+0002d0c0: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
+0002d0d0: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
+0002d0e0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+0002d0f0: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
+0002d100: 6c69 6c79 706f 6e64 2874 7570 6c65 7429  lilypond(tuplet)
+0002d110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d120: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
+0002d130: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
+0002d140: 2020 205c 7477 6561 6b20 7465 7874 2023     \tweak text #
+0002d150: 7475 706c 6574 2d6e 756d 6265 723a 3a63  tuplet-number::c
+0002d160: 616c 632d 6672 6163 7469 6f6e 2d74 6578  alc-fraction-tex
+0002d170: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+0002d180: 2020 5c74 696d 6573 2031 2f31 0a20 2020    \times 1/1.   
+0002d190: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+0002d1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d1b0: 2020 2063 2738 2e0a 2020 2020 2020 2020     c'8..        
+0002d1c0: 2020 2020 2020 2020 2020 2020 6327 382e              c'8.
+0002d1d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d1e0: 207d 0a0a 2020 2020 2020 2020 2020 2020   }..            
+0002d1f0: 3e3e 3e20 7475 706c 6574 2e72 6577 7269  >>> tuplet.rewri
+0002d200: 7465 5f64 6f74 7328 290a 2020 2020 2020  te_dots().      
+0002d210: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+0002d220: 7368 6f77 2874 7570 6c65 7429 2023 2064  show(tuplet) # d
+0002d230: 6f63 7465 7374 3a20 2b53 4b49 500a 0a20  octest: +SKIP.. 
+0002d240: 2020 2020 2020 2020 2020 202e 2e20 2064             ..  d
+0002d250: 6f63 733a 3a0a 0a20 2020 2020 2020 2020  ocs::..         
+0002d260: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+0002d270: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+0002d280: 6e64 2874 7570 6c65 7429 0a20 2020 2020  nd(tuplet).     
+0002d290: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
+0002d2a0: 7269 6e74 2873 7472 696e 6729 0a20 2020  rint(string).   
+0002d2b0: 2020 2020 2020 2020 2020 2020 205c 7477               \tw
+0002d2c0: 6561 6b20 7465 7874 2023 7475 706c 6574  eak text #tuplet
+0002d2d0: 2d6e 756d 6265 723a 3a63 616c 632d 6672  -number::calc-fr
+0002d2e0: 6163 7469 6f6e 2d74 6578 740a 2020 2020  action-text.    
+0002d2f0: 2020 2020 2020 2020 2020 2020 5c74 696d              \tim
+0002d300: 6573 2033 2f32 0a20 2020 2020 2020 2020  es 3/2.         
+0002d310: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+0002d320: 2020 2020 2020 2020 2020 2020 2063 2738               c'8
+0002d330: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d340: 2020 2020 2063 2738 0a20 2020 2020 2020       c'8.       
+0002d350: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+0002d360: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+0002d370: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+0002d380: 2020 2020 2020 2020 2052 6577 7269 7465           Rewrite
+0002d390: 7320 646f 7562 6c65 2064 6f74 7320 6173  s double dots as
+0002d3a0: 2037 3a34 2070 726f 6c61 7469 6f6e 3a0a   7:4 prolation:.
+0002d3b0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0002d3c0: 2074 7570 6c65 7420 3d20 6162 6a61 642e   tuplet = abjad.
+0002d3d0: 5475 706c 6574 2831 2c20 2263 2738 2e2e  Tuplet(1, "c'8..
+0002d3e0: 2063 2738 2e2e 2229 0a20 2020 2020 2020   c'8..").       
+0002d3f0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
+0002d400: 686f 7728 7475 706c 6574 2920 2320 646f  how(tuplet) # do
+0002d410: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
+0002d420: 2020 2020 2020 2020 2020 2e2e 2020 646f            ..  do
+0002d430: 6373 3a3a 0a0a 2020 2020 2020 2020 2020  cs::..          
+0002d440: 2020 2020 2020 3e3e 3e20 7374 7269 6e67        >>> string
+0002d450: 203d 2061 626a 6164 2e6c 696c 7970 6f6e   = abjad.lilypon
+0002d460: 6428 7475 706c 6574 290a 2020 2020 2020  d(tuplet).      
+0002d470: 2020 2020 2020 2020 2020 3e3e 3e20 7072            >>> pr
+0002d480: 696e 7428 7374 7269 6e67 290a 2020 2020  int(string).    
+0002d490: 2020 2020 2020 2020 2020 2020 5c74 7765              \twe
+0002d4a0: 616b 2074 6578 7420 2374 7570 6c65 742d  ak text #tuplet-
+0002d4b0: 6e75 6d62 6572 3a3a 6361 6c63 2d66 7261  number::calc-fra
+0002d4c0: 6374 696f 6e2d 7465 7874 0a20 2020 2020  ction-text.     
+0002d4d0: 2020 2020 2020 2020 2020 205c 7469 6d65             \time
+0002d4e0: 7320 312f 310a 2020 2020 2020 2020 2020  s 1/1.          
+0002d4f0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+0002d500: 2020 2020 2020 2020 2020 2020 6327 382e              c'8.
+0002d510: 2e0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d520: 2020 2020 2020 6327 382e 2e0a 2020 2020        c'8...    
+0002d530: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
+0002d540: 2020 2020 2020 2020 2020 203e 3e3e 2074             >>> t
+0002d550: 7570 6c65 742e 7265 7772 6974 655f 646f  uplet.rewrite_do
+0002d560: 7473 2829 0a20 2020 2020 2020 2020 2020  ts().           
+0002d570: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+0002d580: 7475 706c 6574 2920 2320 646f 6374 6573  tuplet) # doctes
+0002d590: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+0002d5a0: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
+0002d5b0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d5c0: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
+0002d5d0: 626a 6164 2e6c 696c 7970 6f6e 6428 7475  bjad.lilypond(tu
+0002d5e0: 706c 6574 290a 2020 2020 2020 2020 2020  plet).          
+0002d5f0: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+0002d600: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+0002d610: 2020 2020 2020 2020 5c74 7765 616b 2074          \tweak t
+0002d620: 6578 7420 2374 7570 6c65 742d 6e75 6d62  ext #tuplet-numb
+0002d630: 6572 3a3a 6361 6c63 2d66 7261 6374 696f  er::calc-fractio
+0002d640: 6e2d 7465 7874 0a20 2020 2020 2020 2020  n-text.         
+0002d650: 2020 2020 2020 205c 7469 6d65 7320 372f         \times 7/
+0002d660: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0002d670: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+0002d680: 2020 2020 2020 2020 6327 380a 2020 2020          c'8.    
+0002d690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d6a0: 6327 380a 2020 2020 2020 2020 2020 2020  c'8.            
+0002d6b0: 2020 2020 7d0a 0a20 2020 2020 2020 202e      }..        .
+0002d6c0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+0002d6d0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+0002d6e0: 2020 2020 446f 6573 206e 6f74 6869 6e67      Does nothing
+0002d6f0: 2077 6865 6e20 646f 7420 636f 756e 7473   when dot counts
+0002d700: 2064 6966 6665 723a 0a0a 2020 2020 2020   differ:..      
+0002d710: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
+0002d720: 203d 2061 626a 6164 2e54 7570 6c65 7428   = abjad.Tuplet(
+0002d730: 312c 2022 6327 382e 2064 2738 2e20 6527  1, "c'8. d'8. e'
+0002d740: 3822 290a 2020 2020 2020 2020 2020 2020  8").            
+0002d750: 3e3e 3e20 6162 6a61 642e 7368 6f77 2874  >>> abjad.show(t
+0002d760: 7570 6c65 7429 2023 2064 6f63 7465 7374  uplet) # doctest
+0002d770: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
+0002d780: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
+0002d790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d7a0: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
+0002d7b0: 6a61 642e 6c69 6c79 706f 6e64 2874 7570  jad.lilypond(tup
+0002d7c0: 6c65 7429 0a20 2020 2020 2020 2020 2020  let).           
+0002d7d0: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
+0002d7e0: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+0002d7f0: 2020 2020 2020 205c 7477 6561 6b20 7465         \tweak te
+0002d800: 7874 2023 7475 706c 6574 2d6e 756d 6265  xt #tuplet-numbe
+0002d810: 723a 3a63 616c 632d 6672 6163 7469 6f6e  r::calc-fraction
+0002d820: 2d74 6578 740a 2020 2020 2020 2020 2020  -text.          
+0002d830: 2020 2020 2020 5c74 696d 6573 2031 2f31        \times 1/1
+0002d840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d850: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+0002d860: 2020 2020 2020 2063 2738 2e0a 2020 2020         c'8..    
+0002d870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d880: 6427 382e 0a20 2020 2020 2020 2020 2020  d'8..           
+0002d890: 2020 2020 2020 2020 2065 2738 0a20 2020           e'8.   
+0002d8a0: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
+0002d8b0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002d8c0: 7475 706c 6574 2e72 6577 7269 7465 5f64  tuplet.rewrite_d
+0002d8d0: 6f74 7328 290a 2020 2020 2020 2020 2020  ots().          
+0002d8e0: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+0002d8f0: 2874 7570 6c65 7429 2023 2064 6f63 7465  (tuplet) # docte
+0002d900: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+0002d910: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
+0002d920: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002d930: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
+0002d940: 6162 6a61 642e 6c69 6c79 706f 6e64 2874  abjad.lilypond(t
+0002d950: 7570 6c65 7429 0a20 2020 2020 2020 2020  uplet).         
+0002d960: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+0002d970: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+0002d980: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
+0002d990: 7465 7874 2023 7475 706c 6574 2d6e 756d  text #tuplet-num
+0002d9a0: 6265 723a 3a63 616c 632d 6672 6163 7469  ber::calc-fracti
+0002d9b0: 6f6e 2d74 6578 740a 2020 2020 2020 2020  on-text.        
+0002d9c0: 2020 2020 2020 2020 5c74 696d 6573 2031          \times 1
+0002d9d0: 2f31 0a20 2020 2020 2020 2020 2020 2020  /1.             
+0002d9e0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+0002d9f0: 2020 2020 2020 2020 2063 2738 2e0a 2020           c'8..  
+0002da00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da10: 2020 6427 382e 0a20 2020 2020 2020 2020    d'8..         
+0002da20: 2020 2020 2020 2020 2020 2065 2738 0a20             e'8. 
+0002da30: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+0002da40: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
+0002da50: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
+0002da60: 650a 0a20 2020 2020 2020 2020 2020 2044  e..            D
+0002da70: 6f65 7320 6e6f 7468 696e 6720 7768 656e  oes nothing when
+0002da80: 206c 6561 7665 7320 6361 7272 7920 6e6f   leaves carry no
+0002da90: 2064 6f74 733a 0a0a 2020 2020 2020 2020   dots:..        
+0002daa0: 2020 2020 3e3e 3e20 7475 706c 6574 203d      >>> tuplet =
+0002dab0: 2061 626a 6164 2e54 7570 6c65 7428 2833   abjad.Tuplet((3
+0002dac0: 2c20 3229 2c20 2263 2738 2064 2720 6527  , 2), "c'8 d' e'
+0002dad0: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
+0002dae0: 3e3e 2061 626a 6164 2e73 686f 7728 7475  >> abjad.show(tu
+0002daf0: 706c 6574 2920 2320 646f 6374 6573 743a  plet) # doctest:
+0002db00: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0002db10: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
+0002db20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002db30: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+0002db40: 6164 2e6c 696c 7970 6f6e 6428 7475 706c  ad.lilypond(tupl
+0002db50: 6574 290a 2020 2020 2020 2020 2020 2020  et).            
+0002db60: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+0002db70: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+0002db80: 2020 2020 2020 5c74 7765 616b 2074 6578        \tweak tex
+0002db90: 7420 2374 7570 6c65 742d 6e75 6d62 6572  t #tuplet-number
+0002dba0: 3a3a 6361 6c63 2d66 7261 6374 696f 6e2d  ::calc-fraction-
+0002dbb0: 7465 7874 0a20 2020 2020 2020 2020 2020  text.           
+0002dbc0: 2020 2020 205c 7469 6d65 7320 332f 320a       \times 3/2.
+0002dbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dbe0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+0002dbf0: 2020 2020 2020 6327 380a 2020 2020 2020        c'8.      
+0002dc00: 2020 2020 2020 2020 2020 2020 2020 6427                d'
+0002dc10: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
+0002dc20: 2020 2020 2020 6527 380a 2020 2020 2020        e'8.      
+0002dc30: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+0002dc40: 2020 2020 2020 2020 203e 3e3e 2074 7570           >>> tup
+0002dc50: 6c65 742e 7265 7772 6974 655f 646f 7473  let.rewrite_dots
+0002dc60: 2829 0a20 2020 2020 2020 2020 2020 203e  ().            >
+0002dc70: 3e3e 2061 626a 6164 2e73 686f 7728 7475  >> abjad.show(tu
+0002dc80: 706c 6574 2920 2320 646f 6374 6573 743a  plet) # doctest:
+0002dc90: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+0002dca0: 2020 2020 2e2e 2020 646f 6373 3a3a 0a0a      ..  docs::..
+0002dcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dcc0: 3e3e 3e20 7374 7269 6e67 203d 2061 626a  >>> string = abj
+0002dcd0: 6164 2e6c 696c 7970 6f6e 6428 7475 706c  ad.lilypond(tupl
+0002dce0: 6574 290a 2020 2020 2020 2020 2020 2020  et).            
+0002dcf0: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+0002dd00: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+0002dd10: 2020 2020 2020 5c74 7765 616b 2074 6578        \tweak tex
+0002dd20: 7420 2374 7570 6c65 742d 6e75 6d62 6572  t #tuplet-number
+0002dd30: 3a3a 6361 6c63 2d66 7261 6374 696f 6e2d  ::calc-fraction-
+0002dd40: 7465 7874 0a20 2020 2020 2020 2020 2020  text.           
+0002dd50: 2020 2020 205c 7469 6d65 7320 332f 320a       \times 3/2.
+0002dd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dd70: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+0002dd80: 2020 2020 2020 6327 380a 2020 2020 2020        c'8.      
+0002dd90: 2020 2020 2020 2020 2020 2020 2020 6427                d'
+0002dda0: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
+0002ddb0: 2020 2020 2020 6527 380a 2020 2020 2020        e'8.      
+0002ddc0: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+0002ddd0: 2020 2020 204e 6f74 2079 6574 2069 6d70       Not yet imp
+0002dde0: 6c65 6d65 6e74 6564 2066 6f72 206d 756c  lemented for mul
+0002ddf0: 7469 706c 7920 6e65 7374 6564 2074 7570  tiply nested tup
+0002de00: 6c65 7473 2e0a 2020 2020 2020 2020 2222  lets..        ""
+0002de10: 220a 2020 2020 2020 2020 646f 745f 636f  ".        dot_co
+0002de20: 756e 7473 203d 2073 6574 2829 0a20 2020  unts = set().   
+0002de30: 2020 2020 2066 6f72 2063 6f6d 706f 6e65       for compone
+0002de40: 6e74 2069 6e20 7365 6c66 3a0a 2020 2020  nt in self:.    
+0002de50: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0002de60: 7461 6e63 6528 636f 6d70 6f6e 656e 742c  tance(component,
+0002de70: 2054 7570 6c65 7429 3a0a 2020 2020 2020   Tuplet):.      
+0002de80: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0002de90: 0a20 2020 2020 2020 2020 2020 2064 6f74  .            dot
+0002dea0: 5f63 6f75 6e74 203d 2063 6f6d 706f 6e65  _count = compone
+0002deb0: 6e74 2e77 7269 7474 656e 5f64 7572 6174  nt.written_durat
+0002dec0: 696f 6e2e 646f 745f 636f 756e 740a 2020  ion.dot_count.  
+0002ded0: 2020 2020 2020 2020 2020 646f 745f 636f            dot_co
+0002dee0: 756e 7473 2e61 6464 2864 6f74 5f63 6f75  unts.add(dot_cou
+0002def0: 6e74 290a 2020 2020 2020 2020 6966 2031  nt).        if 1
+0002df00: 203c 206c 656e 2864 6f74 5f63 6f75 6e74   < len(dot_count
+0002df10: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+0002df20: 7265 7475 726e 0a20 2020 2020 2020 2061  return.        a
+0002df30: 7373 6572 7420 6c65 6e28 646f 745f 636f  ssert len(dot_co
+0002df40: 756e 7473 2920 3d3d 2031 0a20 2020 2020  unts) == 1.     
+0002df50: 2020 2067 6c6f 6261 6c5f 646f 745f 636f     global_dot_co
+0002df60: 756e 7420 3d20 646f 745f 636f 756e 7473  unt = dot_counts
+0002df70: 2e70 6f70 2829 0a20 2020 2020 2020 2069  .pop().        i
+0002df80: 6620 676c 6f62 616c 5f64 6f74 5f63 6f75  f global_dot_cou
+0002df90: 6e74 203d 3d20 303a 0a20 2020 2020 2020  nt == 0:.       
+0002dfa0: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
+0002dfb0: 2020 2020 646f 745f 6d75 6c74 6970 6c69      dot_multipli
+0002dfc0: 6572 203d 205f 6475 7261 7469 6f6e 2e4d  er = _duration.M
+0002dfd0: 756c 7469 706c 6965 722e 6672 6f6d 5f64  ultiplier.from_d
+0002dfe0: 6f74 5f63 6f75 6e74 2867 6c6f 6261 6c5f  ot_count(global_
+0002dff0: 646f 745f 636f 756e 7429 0a20 2020 2020  dot_count).     
+0002e000: 2020 2073 656c 662e 6d75 6c74 6970 6c69     self.multipli
+0002e010: 6572 202a 3d20 646f 745f 6d75 6c74 6970  er *= dot_multip
+0002e020: 6c69 6572 0a20 2020 2020 2020 2064 6f74  lier.        dot
+0002e030: 5f6d 756c 7469 706c 6965 725f 7265 6369  _multiplier_reci
+0002e040: 7072 6f63 616c 203d 2064 6f74 5f6d 756c  procal = dot_mul
+0002e050: 7469 706c 6965 722e 7265 6369 7072 6f63  tiplier.reciproc
+0002e060: 616c 0a20 2020 2020 2020 2066 6f72 2063  al.        for c
+0002e070: 6f6d 706f 6e65 6e74 2069 6e20 7365 6c66  omponent in self
+0002e080: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
+0002e090: 6d70 6f6e 656e 742e 7772 6974 7465 6e5f  mponent.written_
+0002e0a0: 6475 7261 7469 6f6e 202a 3d20 646f 745f  duration *= dot_
+0002e0b0: 6d75 6c74 6970 6c69 6572 5f72 6563 6970  multiplier_recip
+0002e0c0: 726f 6361 6c0a 0a20 2020 2064 6566 2073  rocal..    def s
+0002e0d0: 6574 5f6d 696e 696d 756d 5f64 656e 6f6d  et_minimum_denom
+0002e0e0: 696e 6174 6f72 2873 656c 662c 2064 656e  inator(self, den
+0002e0f0: 6f6d 696e 6174 6f72 2920 2d3e 204e 6f6e  ominator) -> Non
+0002e100: 653a 0a20 2020 2020 2020 2072 2222 220a  e:.        r""".
+0002e110: 2020 2020 2020 2020 5365 7473 2070 7265          Sets pre
+0002e120: 6665 7272 6564 2064 656e 6f6d 696e 6174  ferred denominat
+0002e130: 6f72 206f 6620 7475 706c 6574 2074 6f20  or of tuplet to 
+0002e140: 6174 206c 6561 7374 2060 6064 656e 6f6d  at least ``denom
+0002e150: 696e 6174 6f72 6060 2e0a 0a20 2020 2020  inator``...     
+0002e160: 2020 202e 2e20 2063 6f6e 7461 696e 6572     ..  container
+0002e170: 3a3a 2065 7861 6d70 6c65 0a0a 2020 2020  :: example..    
+0002e180: 2020 2020 2020 2020 5365 7473 2070 7265          Sets pre
+0002e190: 6665 7272 6564 2064 656e 6f6d 696e 6174  ferred denominat
+0002e1a0: 6f72 206f 6620 7475 706c 6574 2074 6f20  or of tuplet to 
+0002e1b0: 6060 3860 6020 6174 206c 6561 7374 3a0a  ``8`` at least:.
+0002e1c0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0002e1d0: 2074 7570 6c65 7420 3d20 6162 6a61 642e   tuplet = abjad.
+0002e1e0: 5475 706c 6574 2828 332c 2035 292c 2022  Tuplet((3, 5), "
+0002e1f0: 6327 3420 6427 3820 6527 3820 6627 3420  c'4 d'8 e'8 f'4 
+0002e200: 6727 3222 290a 2020 2020 2020 2020 2020  g'2").          
+0002e210: 2020 3e3e 3e20 6162 6a61 642e 7368 6f77    >>> abjad.show
+0002e220: 2874 7570 6c65 7429 2023 2064 6f63 7465  (tuplet) # docte
+0002e230: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+0002e240: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
+0002e250: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002e260: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
+0002e270: 6162 6a61 642e 6c69 6c79 706f 6e64 2874  abjad.lilypond(t
+0002e280: 7570 6c65 7429 0a20 2020 2020 2020 2020  uplet).         
+0002e290: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+0002e2a0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+0002e2b0: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
+0002e2c0: 7465 7874 2023 7475 706c 6574 2d6e 756d  text #tuplet-num
+0002e2d0: 6265 723a 3a63 616c 632d 6672 6163 7469  ber::calc-fracti
+0002e2e0: 6f6e 2d74 6578 740a 2020 2020 2020 2020  on-text.        
+0002e2f0: 2020 2020 2020 2020 5c74 696d 6573 2033          \times 3
+0002e300: 2f35 0a20 2020 2020 2020 2020 2020 2020  /5.             
+0002e310: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+0002e320: 2020 2020 2020 2020 2063 2734 0a20 2020           c'4.   
+0002e330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e340: 2064 2738 0a20 2020 2020 2020 2020 2020   d'8.           
+0002e350: 2020 2020 2020 2020 2065 2738 0a20 2020           e'8.   
+0002e360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e370: 2066 2734 0a20 2020 2020 2020 2020 2020   f'4.           
+0002e380: 2020 2020 2020 2020 2067 2732 0a20 2020           g'2.   
+0002e390: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
+0002e3a0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002e3b0: 7475 706c 6574 2e73 6574 5f6d 696e 696d  tuplet.set_minim
+0002e3c0: 756d 5f64 656e 6f6d 696e 6174 6f72 2838  um_denominator(8
+0002e3d0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+0002e3e0: 3e20 6162 6a61 642e 7368 6f77 2874 7570  > abjad.show(tup
+0002e3f0: 6c65 7429 2023 2064 6f63 7465 7374 3a20  let) # doctest: 
+0002e400: 2b53 4b49 500a 0a20 2020 2020 2020 2020  +SKIP..         
+0002e410: 2020 202e 2e20 2064 6f63 733a 3a0a 0a20     ..  docs::.. 
+0002e420: 2020 2020 2020 2020 2020 2020 2020 203e                 >
+0002e430: 3e3e 2073 7472 696e 6720 3d20 6162 6a61  >> string = abja
+0002e440: 642e 6c69 6c79 706f 6e64 2874 7570 6c65  d.lilypond(tuple
+0002e450: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+0002e460: 2020 203e 3e3e 2070 7269 6e74 2873 7472     >>> print(str
+0002e470: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0002e480: 2020 2020 205c 7477 6561 6b20 7465 7874       \tweak text
+0002e490: 2023 7475 706c 6574 2d6e 756d 6265 723a   #tuplet-number:
+0002e4a0: 3a63 616c 632d 6672 6163 7469 6f6e 2d74  :calc-fraction-t
+0002e4b0: 6578 740a 2020 2020 2020 2020 2020 2020  ext.            
+0002e4c0: 2020 2020 5c74 696d 6573 2036 2f31 300a      \times 6/10.
+0002e4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e4e0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+0002e4f0: 2020 2020 2020 6327 340a 2020 2020 2020        c'4.      
+0002e500: 2020 2020 2020 2020 2020 2020 2020 6427                d'
+0002e510: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
+0002e520: 2020 2020 2020 6527 380a 2020 2020 2020        e'8.      
+0002e530: 2020 2020 2020 2020 2020 2020 2020 6627                f'
+0002e540: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0002e550: 2020 2020 2020 6727 320a 2020 2020 2020        g'2.      
+0002e560: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+0002e570: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0002e580: 2061 7373 6572 7420 5f6d 6174 682e 6973   assert _math.is
+0002e590: 5f6e 6f6e 6e65 6761 7469 7665 5f69 6e74  _nonnegative_int
+0002e5a0: 6567 6572 5f70 6f77 6572 5f6f 665f 7477  eger_power_of_tw
+0002e5b0: 6f28 6465 6e6f 6d69 6e61 746f 7229 0a20  o(denominator). 
+0002e5c0: 2020 2020 2020 2073 656c 662e 666f 7263         self.forc
+0002e5d0: 655f 6672 6163 7469 6f6e 203d 2054 7275  e_fraction = Tru
+0002e5e0: 650a 2020 2020 2020 2020 6475 7261 7469  e.        durati
+0002e5f0: 6f6e 7320 3d20 5b0a 2020 2020 2020 2020  ons = [.        
+0002e600: 2020 2020 7365 6c66 2e5f 6765 745f 636f      self._get_co
+0002e610: 6e74 656e 7473 5f64 7572 6174 696f 6e28  ntents_duration(
+0002e620: 292c 0a20 2020 2020 2020 2020 2020 2073  ),.            s
+0002e630: 656c 662e 5f67 6574 5f70 7265 7072 6f6c  elf._get_preprol
+0002e640: 6174 6564 5f64 7572 6174 696f 6e28 292c  ated_duration(),
+0002e650: 0a20 2020 2020 2020 2020 2020 205f 6475  .            _du
+0002e660: 7261 7469 6f6e 2e44 7572 6174 696f 6e28  ration.Duration(
+0002e670: 312c 2064 656e 6f6d 696e 6174 6f72 292c  1, denominator),
+0002e680: 0a20 2020 2020 2020 205d 0a20 2020 2020  .        ].     
+0002e690: 2020 206e 6f6e 7265 6475 6365 645f 6672     nonreduced_fr
+0002e6a0: 6163 7469 6f6e 7320 3d20 5f64 7572 6174  actions = _durat
+0002e6b0: 696f 6e2e 4475 7261 7469 6f6e 2e64 7572  ion.Duration.dur
+0002e6c0: 6174 696f 6e73 5f74 6f5f 6e6f 6e72 6564  ations_to_nonred
+0002e6d0: 7563 6564 5f66 7261 6374 696f 6e73 280a  uced_fractions(.
+0002e6e0: 2020 2020 2020 2020 2020 2020 6475 7261              dura
+0002e6f0: 7469 6f6e 730a 2020 2020 2020 2020 290a  tions.        ).
+0002e700: 2020 2020 2020 2020 7365 6c66 2e64 656e          self.den
+0002e710: 6f6d 696e 6174 6f72 203d 206e 6f6e 7265  ominator = nonre
+0002e720: 6475 6365 645f 6672 6163 7469 6f6e 735b  duced_fractions[
+0002e730: 315d 2e6e 756d 6572 6174 6f72 0a0a 2020  1].numerator..  
+0002e740: 2020 6465 6620 746f 6767 6c65 5f70 726f    def toggle_pro
+0002e750: 6c61 7469 6f6e 2873 656c 6629 202d 3e20  lation(self) -> 
+0002e760: 4e6f 6e65 3a0a 2020 2020 2020 2020 7222  None:.        r"
+0002e770: 2222 0a20 2020 2020 2020 2043 6861 6e67  "".        Chang
+0002e780: 6573 2061 7567 6d65 6e74 6564 2074 7570  es augmented tup
+0002e790: 6c65 7473 2074 6f20 6469 6d69 6e69 7368  lets to diminish
+0002e7a0: 6564 3b20 6368 616e 6765 7320 6469 6d69  ed; changes dimi
+0002e7b0: 6e69 7368 6564 2074 7570 6c65 7473 2074  nished tuplets t
+0002e7c0: 6f20 6175 676d 656e 7465 642e 0a0a 2020  o augmented...  
+0002e7d0: 2020 2020 2020 2e2e 2020 636f 6e74 6169        ..  contai
+0002e7e0: 6e65 723a 3a20 6578 616d 706c 650a 0a20  ner:: example.. 
+0002e7f0: 2020 2020 2020 2020 2020 2043 6861 6e67             Chang
+0002e800: 6573 2061 7567 6d65 6e74 6564 2074 7570  es augmented tup
+0002e810: 6c65 7420 746f 2064 696d 696e 6973 6865  let to diminishe
+0002e820: 643a 0a0a 2020 2020 2020 2020 2020 2020  d:..            
+0002e830: 3e3e 3e20 7475 706c 6574 203d 2061 626a  >>> tuplet = abj
+0002e840: 6164 2e54 7570 6c65 7428 2834 2c20 3329  ad.Tuplet((4, 3)
+0002e850: 2c20 2263 2738 2064 2738 2065 2738 2229  , "c'8 d'8 e'8")
+0002e860: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0002e870: 2061 626a 6164 2e73 686f 7728 7475 706c   abjad.show(tupl
+0002e880: 6574 2920 2320 646f 6374 6573 743a 202b  et) # doctest: +
+0002e890: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
+0002e8a0: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+0002e8b0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+0002e8c0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+0002e8d0: 2e6c 696c 7970 6f6e 6428 7475 706c 6574  .lilypond(tuplet
+0002e8e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002e8f0: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+0002e900: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0002e910: 2020 2020 5c74 7765 616b 2074 6578 7420      \tweak text 
+0002e920: 2374 7570 6c65 742d 6e75 6d62 6572 3a3a  #tuplet-number::
+0002e930: 6361 6c63 2d66 7261 6374 696f 6e2d 7465  calc-fraction-te
+0002e940: 7874 0a20 2020 2020 2020 2020 2020 2020  xt.             
+0002e950: 2020 205c 7469 6d65 7320 342f 330a 2020     \times 4/3.  
+0002e960: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+0002e970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e980: 2020 2020 6327 380a 2020 2020 2020 2020      c'8.        
+0002e990: 2020 2020 2020 2020 2020 2020 6427 380a              d'8.
+0002e9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e9b0: 2020 2020 6527 380a 2020 2020 2020 2020      e'8.        
 0002e9c0: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
 0002e9d0: 2020 2020 2020 203e 3e3e 2074 7570 6c65         >>> tuple
-0002e9e0: 742e 7472 6976 6961 6c28 290a 2020 2020  t.trivial().    
-0002e9f0: 2020 2020 2020 2020 4661 6c73 650a 0a20          False.. 
-0002ea00: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0002ea10: 2020 2069 6620 7365 6c66 2e6d 756c 7469     if self.multi
-0002ea20: 706c 6965 7220 213d 2031 3a0a 2020 2020  plier != 1:.    
-0002ea30: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-0002ea40: 616c 7365 0a20 2020 2020 2020 2066 6f72  alse.        for
-0002ea50: 2063 6f6d 706f 6e65 6e74 2069 6e20 7365   component in se
-0002ea60: 6c66 3a0a 2020 2020 2020 2020 2020 2020  lf:.            
-0002ea70: 6966 2069 7369 6e73 7461 6e63 6528 636f  if isinstance(co
-0002ea80: 6d70 6f6e 656e 742c 2054 7570 6c65 7429  mponent, Tuplet)
-0002ea90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002eaa0: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
-0002eab0: 2020 2020 2020 2065 6c69 6620 6861 7361         elif hasa
-0002eac0: 7474 7228 636f 6d70 6f6e 656e 742c 2022  ttr(component, "
-0002ead0: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
-0002eae0: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
-0002eaf0: 2020 2020 6966 2063 6f6d 706f 6e65 6e74      if component
-0002eb00: 2e6d 756c 7469 706c 6965 7220 6973 206e  .multiplier is n
-0002eb10: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0002eb20: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0002eb30: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
-0002eb40: 2020 7265 7475 726e 2054 7275 650a 0a20    return True.. 
-0002eb50: 2020 2064 6566 2074 7269 7669 616c 697a     def trivializ
-0002eb60: 6162 6c65 2873 656c 6629 202d 3e20 626f  able(self) -> bo
-0002eb70: 6f6c 3a0a 2020 2020 2020 2020 7222 2222  ol:.        r"""
-0002eb80: 0a20 2020 2020 2020 2049 7320 7472 7565  .        Is true
-0002eb90: 2077 6865 6e20 7475 706c 6574 2069 7320   when tuplet is 
-0002eba0: 7472 6976 6961 6c69 7a61 626c 6520 2863  trivializable (c
-0002ebb0: 616e 2062 6520 7265 7772 6974 7465 6e20  an be rewritten 
-0002ebc0: 7769 7468 2061 2072 6174 696f 206f 6620  with a ratio of 
-0002ebd0: 313a 3129 2e0a 0a20 2020 2020 2020 202e  1:1)...        .
-0002ebe0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
-0002ebf0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
-0002ec00: 2020 2020 5265 6475 6461 6e74 2074 7570      Redudant tup
-0002ec10: 6c65 743a 0a0a 2020 2020 2020 2020 2020  let:..          
-0002ec20: 2020 3e3e 3e20 7475 706c 6574 203d 2061    >>> tuplet = a
-0002ec30: 626a 6164 2e54 7570 6c65 7428 2833 2c20  bjad.Tuplet((3, 
-0002ec40: 3429 2c20 2263 2734 2063 2734 2229 0a20  4), "c'4 c'4"). 
-0002ec50: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
-0002ec60: 626a 6164 2e61 7474 6163 6828 6162 6a61  bjad.attach(abja
-0002ec70: 642e 5469 6d65 5369 676e 6174 7572 6528  d.TimeSignature(
-0002ec80: 2833 2c20 3829 292c 2074 7570 6c65 745b  (3, 8)), tuplet[
-0002ec90: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
-0002eca0: 3e3e 3e20 7374 6166 6620 3d20 6162 6a61  >>> staff = abja
-0002ecb0: 642e 5374 6166 6628 5b74 7570 6c65 745d  d.Staff([tuplet]
-0002ecc0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-0002ecd0: 3e20 6162 6a61 642e 7368 6f77 2873 7461  > abjad.show(sta
-0002ece0: 6666 2920 2320 646f 6374 6573 743a 202b  ff) # doctest: +
-0002ecf0: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
-0002ed00: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
-0002ed10: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
-0002ed20: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-0002ed30: 2e6c 696c 7970 6f6e 6428 7475 706c 6574  .lilypond(tuplet
-0002ed40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002ed50: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
-0002ed60: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-0002ed70: 2020 2020 5c74 7765 616b 2074 6578 7420      \tweak text 
-0002ed80: 2374 7570 6c65 742d 6e75 6d62 6572 3a3a  #tuplet-number::
-0002ed90: 6361 6c63 2d66 7261 6374 696f 6e2d 7465  calc-fraction-te
-0002eda0: 7874 0a20 2020 2020 2020 2020 2020 2020  xt.             
-0002edb0: 2020 205c 7469 6d65 7320 332f 340a 2020     \times 3/4.  
-0002edc0: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-0002edd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ede0: 2020 2020 5c74 696d 6520 332f 380a 2020      \time 3/8.  
-0002edf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee00: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
-0002ee10: 2020 2020 2020 2020 2020 6327 340a 2020            c'4.  
-0002ee20: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-0002ee30: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0002ee40: 2074 7570 6c65 742e 7472 6976 6961 6c69   tuplet.triviali
-0002ee50: 7a61 626c 6528 290a 2020 2020 2020 2020  zable().        
-0002ee60: 2020 2020 5472 7565 0a0a 2020 2020 2020      True..      
-0002ee70: 2020 2020 2020 4361 6e20 6265 2072 6577        Can be rew
-0002ee80: 7269 7474 656e 2077 6974 686f 7574 2061  ritten without a
-0002ee90: 2074 7570 6c65 7420 6272 6163 6b65 743a   tuplet bracket:
-0002eea0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0002eeb0: 3e20 7374 6166 6620 3d20 6162 6a61 642e  > staff = abjad.
-0002eec0: 5374 6166 6628 2263 2738 2e20 6327 382e  Staff("c'8. c'8.
-0002eed0: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
-0002eee0: 3e3e 2061 626a 6164 2e61 7474 6163 6828  >> abjad.attach(
-0002eef0: 6162 6a61 642e 5469 6d65 5369 676e 6174  abjad.TimeSignat
-0002ef00: 7572 6528 2833 2c20 3829 292c 2073 7461  ure((3, 8)), sta
-0002ef10: 6666 5b30 5d29 0a20 2020 2020 2020 2020  ff[0]).         
-0002ef20: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
-0002ef30: 7728 7374 6166 6629 2023 2064 6f63 7465  w(staff) # docte
-0002ef40: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-0002ef50: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0002ef60: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002ef70: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0002ef80: 6162 6a61 642e 6c69 6c79 706f 6e64 2873  abjad.lilypond(s
-0002ef90: 7461 6666 290a 2020 2020 2020 2020 2020  taff).          
-0002efa0: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-0002efb0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-0002efc0: 2020 2020 2020 2020 5c6e 6577 2053 7461          \new Sta
-0002efd0: 6666 0a20 2020 2020 2020 2020 2020 2020  ff.             
-0002efe0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-0002eff0: 2020 2020 2020 2020 205c 7469 6d65 2033           \time 3
-0002f000: 2f38 0a20 2020 2020 2020 2020 2020 2020  /8.             
-0002f010: 2020 2020 2020 2063 2738 2e0a 2020 2020         c'8..    
-0002f020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f030: 6327 382e 0a20 2020 2020 2020 2020 2020  c'8..           
-0002f040: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
-0002f050: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
-0002f060: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
-0002f070: 2020 2020 204e 6f6e 7472 6976 6961 6c69       Nontriviali
-0002f080: 7a61 626c 6520 7475 706c 6574 3a0a 0a20  zable tuplet:.. 
-0002f090: 2020 2020 2020 2020 2020 203e 3e3e 2074             >>> t
-0002f0a0: 7570 6c65 7420 3d20 6162 6a61 642e 5475  uplet = abjad.Tu
-0002f0b0: 706c 6574 2828 332c 2035 292c 2022 6327  plet((3, 5), "c'
-0002f0c0: 3420 6327 3420 6327 3420 6327 3420 6327  4 c'4 c'4 c'4 c'
-0002f0d0: 3422 290a 2020 2020 2020 2020 2020 2020  4").            
-0002f0e0: 3e3e 3e20 6162 6a61 642e 6174 7461 6368  >>> abjad.attach
-0002f0f0: 2861 626a 6164 2e54 696d 6553 6967 6e61  (abjad.TimeSigna
-0002f100: 7475 7265 2828 332c 2034 2929 2c20 7475  ture((3, 4)), tu
-0002f110: 706c 6574 5b30 5d29 0a20 2020 2020 2020  plet[0]).       
-0002f120: 2020 2020 203e 3e3e 2073 7461 6666 203d       >>> staff =
-0002f130: 2061 626a 6164 2e53 7461 6666 285b 7475   abjad.Staff([tu
-0002f140: 706c 6574 5d29 0a20 2020 2020 2020 2020  plet]).         
-0002f150: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
-0002f160: 7728 7374 6166 6629 2023 2064 6f63 7465  w(staff) # docte
-0002f170: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
-0002f180: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
-0002f190: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002f1a0: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
-0002f1b0: 6162 6a61 642e 6c69 6c79 706f 6e64 2873  abjad.lilypond(s
-0002f1c0: 7461 6666 290a 2020 2020 2020 2020 2020  taff).          
-0002f1d0: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-0002f1e0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-0002f1f0: 2020 2020 2020 2020 5c6e 6577 2053 7461          \new Sta
-0002f200: 6666 0a20 2020 2020 2020 2020 2020 2020  ff.             
-0002f210: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-0002f220: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
-0002f230: 7465 7874 2023 7475 706c 6574 2d6e 756d  text #tuplet-num
-0002f240: 6265 723a 3a63 616c 632d 6672 6163 7469  ber::calc-fracti
-0002f250: 6f6e 2d74 6578 740a 2020 2020 2020 2020  on-text.        
-0002f260: 2020 2020 2020 2020 2020 2020 5c74 696d              \tim
-0002f270: 6573 2033 2f35 0a20 2020 2020 2020 2020  es 3/5.         
-0002f280: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-0002f290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f2a0: 2020 2020 205c 7469 6d65 2033 2f34 0a20       \time 3/4. 
-0002f2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f2c0: 2020 2020 2020 2063 2734 0a20 2020 2020         c'4.     
-0002f2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f2e0: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
-0002f2f0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0002f300: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-0002f310: 2020 2020 2020 2020 2020 2063 2734 0a20             c'4. 
-0002f320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f330: 2020 2020 2020 2063 2734 0a20 2020 2020         c'4.     
-0002f340: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-0002f350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f360: 207d 0a0a 2020 2020 2020 2020 2020 2020   }..            
-0002f370: 3e3e 3e20 7475 706c 6574 2e74 7269 7669  >>> tuplet.trivi
-0002f380: 616c 697a 6162 6c65 2829 0a20 2020 2020  alizable().     
-0002f390: 2020 2020 2020 2046 616c 7365 0a0a 2020         False..  
-0002f3a0: 2020 2020 2020 2020 2020 4361 6e20 6e6f            Can no
-0002f3b0: 7420 6265 2072 6577 7269 7474 656e 2077  t be rewritten w
-0002f3c0: 6974 686f 7574 2061 2074 7570 6c65 7420  ithout a tuplet 
-0002f3d0: 6272 6163 6b65 742e 0a0a 2020 2020 2020  bracket...      
-0002f3e0: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
-0002f3f0: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
-0002f400: 2020 2020 2020 2052 4547 5245 5353 494f         REGRESSIO
-0002f410: 4e2e 204e 6f6e 7472 6976 6961 6c69 7a61  N. Nontrivializa
-0002f420: 626c 6520 7475 706c 6574 3a0a 0a20 2020  ble tuplet:..   
-0002f430: 2020 2020 2020 2020 203e 3e3e 2074 7570           >>> tup
-0002f440: 6c65 7420 3d20 6162 6a61 642e 5475 706c  let = abjad.Tupl
-0002f450: 6574 2828 332c 2034 292c 2022 6327 322e  et((3, 4), "c'2.
-0002f460: 2063 3422 290a 2020 2020 2020 2020 2020   c4").          
-0002f470: 2020 3e3e 3e20 6162 6a61 642e 6174 7461    >>> abjad.atta
-0002f480: 6368 2861 626a 6164 2e54 696d 6553 6967  ch(abjad.TimeSig
-0002f490: 6e61 7475 7265 2828 332c 2034 2929 2c20  nature((3, 4)), 
-0002f4a0: 7475 706c 6574 5b30 5d29 0a20 2020 2020  tuplet[0]).     
-0002f4b0: 2020 2020 2020 203e 3e3e 2073 7461 6666         >>> staff
-0002f4c0: 203d 2061 626a 6164 2e53 7461 6666 285b   = abjad.Staff([
-0002f4d0: 7475 706c 6574 5d29 0a20 2020 2020 2020  tuplet]).       
-0002f4e0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-0002f4f0: 686f 7728 7374 6166 6629 2023 2064 6f63  how(staff) # doc
-0002f500: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
-0002f510: 2020 2020 2020 2020 202e 2e20 2064 6f63           ..  doc
-0002f520: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
-0002f530: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
-0002f540: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
-0002f550: 2873 7461 6666 290a 2020 2020 2020 2020  (staff).        
-0002f560: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
-0002f570: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
-0002f580: 2020 2020 2020 2020 2020 5c6e 6577 2053            \new S
-0002f590: 7461 6666 0a20 2020 2020 2020 2020 2020  taff.           
-0002f5a0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-0002f5b0: 2020 2020 2020 2020 2020 205c 7477 6561             \twea
-0002f5c0: 6b20 7465 7874 2023 7475 706c 6574 2d6e  k text #tuplet-n
-0002f5d0: 756d 6265 723a 3a63 616c 632d 6672 6163  umber::calc-frac
-0002f5e0: 7469 6f6e 2d74 6578 740a 2020 2020 2020  tion-text.      
-0002f5f0: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-0002f600: 696d 6573 2033 2f34 0a20 2020 2020 2020  imes 3/4.       
-0002f610: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0002f620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f630: 2020 2020 2020 205c 7469 6d65 2033 2f34         \time 3/4
-0002f640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f650: 2020 2020 2020 2020 2063 2732 2e0a 2020           c'2..  
-0002f660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f670: 2020 2020 2020 6334 0a20 2020 2020 2020        c4.       
-0002f680: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
-0002f690: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-0002f6a0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-0002f6b0: 3e20 7475 706c 6574 2e74 7269 7669 616c  > tuplet.trivial
-0002f6c0: 697a 6162 6c65 2829 0a20 2020 2020 2020  izable().       
-0002f6d0: 2020 2020 2046 616c 7365 0a0a 2020 2020       False..    
-0002f6e0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0002f6f0: 666f 7220 636f 6d70 6f6e 656e 7420 696e  for component in
-0002f700: 2073 656c 663a 0a20 2020 2020 2020 2020   self:.         
-0002f710: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0002f720: 2863 6f6d 706f 6e65 6e74 2c20 5475 706c  (component, Tupl
-0002f730: 6574 293a 0a20 2020 2020 2020 2020 2020  et):.           
-0002f740: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
-0002f750: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-0002f760: 2069 7369 6e73 7461 6e63 6528 636f 6d70   isinstance(comp
-0002f770: 6f6e 656e 742c 204c 6561 6629 2c20 7265  onent, Leaf), re
-0002f780: 7072 2863 6f6d 706f 6e65 6e74 290a 2020  pr(component).  
-0002f790: 2020 2020 2020 2020 2020 6475 7261 7469            durati
-0002f7a0: 6f6e 203d 205f 6475 7261 7469 6f6e 2e44  on = _duration.D
-0002f7b0: 7572 6174 696f 6e28 7365 6c66 2e6d 756c  uration(self.mul
-0002f7c0: 7469 706c 6965 7220 2a20 636f 6d70 6f6e  tiplier * compon
-0002f7d0: 656e 742e 7772 6974 7465 6e5f 6475 7261  ent.written_dura
-0002f7e0: 7469 6f6e 290a 2020 2020 2020 2020 2020  tion).          
-0002f7f0: 2020 6966 206e 6f74 2064 7572 6174 696f    if not duratio
-0002f800: 6e2e 6973 5f61 7373 6967 6e61 626c 653a  n.is_assignable:
-0002f810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f820: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
-0002f830: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-0002f840: 650a 0a20 2020 2064 6566 2074 7269 7669  e..    def trivi
-0002f850: 616c 697a 6528 7365 6c66 2920 2d3e 204e  alize(self) -> N
-0002f860: 6f6e 653a 0a20 2020 2020 2020 2072 2222  one:.        r""
-0002f870: 220a 2020 2020 2020 2020 5472 6976 6961  ".        Trivia
-0002f880: 6c69 7a65 7320 7475 706c 6574 2e0a 0a20  lizes tuplet... 
-0002f890: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
-0002f8a0: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
-0002f8b0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0002f8c0: 7475 706c 6574 203d 2061 626a 6164 2e54  tuplet = abjad.T
-0002f8d0: 7570 6c65 7428 2833 2c20 3429 2c20 2263  uplet((3, 4), "c
-0002f8e0: 2732 2229 0a20 2020 2020 2020 2020 2020  '2").           
-0002f8f0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
-0002f900: 7475 706c 6574 2920 2320 646f 6374 6573  tuplet) # doctes
-0002f910: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
-0002f920: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-0002f930: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002f940: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
-0002f950: 626a 6164 2e6c 696c 7970 6f6e 6428 7475  bjad.lilypond(tu
-0002f960: 706c 6574 290a 2020 2020 2020 2020 2020  plet).          
-0002f970: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-0002f980: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-0002f990: 2020 2020 2020 2020 5c74 7765 616b 2074          \tweak t
-0002f9a0: 6578 7420 2374 7570 6c65 742d 6e75 6d62  ext #tuplet-numb
-0002f9b0: 6572 3a3a 6361 6c63 2d66 7261 6374 696f  er::calc-fractio
-0002f9c0: 6e2d 7465 7874 0a20 2020 2020 2020 2020  n-text.         
-0002f9d0: 2020 2020 2020 205c 7469 6d65 7320 332f         \times 3/
-0002f9e0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-0002f9f0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-0002fa00: 2020 2020 2020 2020 6327 320a 2020 2020          c'2.    
-0002fa10: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
-0002fa20: 2020 2020 2020 2020 2020 203e 3e3e 2074             >>> t
-0002fa30: 7570 6c65 742e 7472 6976 6961 6c69 7a61  uplet.trivializa
-0002fa40: 626c 6528 290a 2020 2020 2020 2020 2020  ble().          
-0002fa50: 2020 5472 7565 0a0a 2020 2020 2020 2020    True..        
-0002fa60: 2020 2020 3e3e 3e20 7475 706c 6574 2e74      >>> tuplet.t
-0002fa70: 7269 7669 616c 697a 6528 290a 2020 2020  rivialize().    
-0002fa80: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
-0002fa90: 642e 7368 6f77 2874 7570 6c65 7429 2023  d.show(tuplet) #
-0002faa0: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
-0002fab0: 0a20 2020 2020 2020 2020 2020 202e 2e20  .            .. 
-0002fac0: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
-0002fad0: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
-0002fae0: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
-0002faf0: 706f 6e64 2874 7570 6c65 7429 0a20 2020  pond(tuplet).   
-0002fb00: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
-0002fb10: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
-0002fb20: 2020 2020 2020 2020 2020 2020 2020 205c                 \
-0002fb30: 7477 6561 6b20 7465 7874 2023 7475 706c  tweak text #tupl
-0002fb40: 6574 2d6e 756d 6265 723a 3a63 616c 632d  et-number::calc-
-0002fb50: 6672 6163 7469 6f6e 2d74 6578 740a 2020  fraction-text.  
-0002fb60: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
-0002fb70: 696d 6573 2031 2f31 0a20 2020 2020 2020  imes 1/1.       
-0002fb80: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-0002fb90: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0002fba0: 2734 2e0a 2020 2020 2020 2020 2020 2020  '4..            
-0002fbb0: 2020 2020 7d0a 0a20 2020 2020 2020 2022      }..        "
-0002fbc0: 2222 0a20 2020 2020 2020 2069 6620 6e6f  "".        if no
-0002fbd0: 7420 7365 6c66 2e74 7269 7669 616c 697a  t self.trivializ
-0002fbe0: 6162 6c65 2829 3a0a 2020 2020 2020 2020  able():.        
-0002fbf0: 2020 2020 7265 7475 726e 0a20 2020 2020      return.     
-0002fc00: 2020 2066 6f72 2063 6f6d 706f 6e65 6e74     for component
-0002fc10: 2069 6e20 7365 6c66 3a0a 2020 2020 2020   in self:.      
-0002fc20: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0002fc30: 6e63 6528 636f 6d70 6f6e 656e 742c 2054  nce(component, T
-0002fc40: 7570 6c65 7429 3a0a 2020 2020 2020 2020  uplet):.        
-0002fc50: 2020 2020 2020 2020 636f 6d70 6f6e 656e          componen
-0002fc60: 742e 6d75 6c74 6970 6c69 6572 202a 3d20  t.multiplier *= 
-0002fc70: 7365 6c66 2e6d 756c 7469 706c 6965 720a  self.multiplier.
-0002fc80: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0002fc90: 2069 7369 6e73 7461 6e63 6528 636f 6d70   isinstance(comp
-0002fca0: 6f6e 656e 742c 204c 6561 6629 3a0a 2020  onent, Leaf):.  
-0002fcb0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0002fcc0: 6d70 6f6e 656e 742e 7772 6974 7465 6e5f  mponent.written_
-0002fcd0: 6475 7261 7469 6f6e 202a 3d20 7365 6c66  duration *= self
-0002fce0: 2e6d 756c 7469 706c 6965 720a 2020 2020  .multiplier.    
-0002fcf0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0002fd00: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-0002fd10: 6973 6520 5479 7065 4572 726f 7228 636f  ise TypeError(co
-0002fd20: 6d70 6f6e 656e 7429 0a20 2020 2020 2020  mponent).       
-0002fd30: 2073 656c 662e 6d75 6c74 6970 6c69 6572   self.multiplier
-0002fd40: 203d 205f 6475 7261 7469 6f6e 2e4d 756c   = _duration.Mul
-0002fd50: 7469 706c 6965 7228 3129 0a0a 0a63 6c61  tiplier(1)...cla
-0002fd60: 7373 2056 6f69 6365 2843 6f6e 7465 7874  ss Voice(Context
-0002fd70: 293a 0a20 2020 2072 2222 220a 2020 2020  ):.    r""".    
-0002fd80: 566f 6963 652e 0a0a 2020 2020 2e2e 2020  Voice...    ..  
-0002fd90: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-0002fda0: 706c 650a 0a20 2020 2020 2020 203e 3e3e  ple..        >>>
-0002fdb0: 2076 6f69 6365 203d 2061 626a 6164 2e56   voice = abjad.V
-0002fdc0: 6f69 6365 2822 6327 3820 6427 3820 6527  oice("c'8 d'8 e'
-0002fdd0: 3820 6627 3822 290a 2020 2020 2020 2020  8 f'8").        
-0002fde0: 3e3e 3e20 6162 6a61 642e 7368 6f77 2876  >>> abjad.show(v
-0002fdf0: 6f69 6365 2920 2320 646f 6374 6573 743a  oice) # doctest:
-0002fe00: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
-0002fe10: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
-0002fe20: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
-0002fe30: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
-0002fe40: 6f6e 6428 766f 6963 6529 0a20 2020 2020  ond(voice).     
-0002fe50: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
-0002fe60: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
-0002fe70: 2020 2020 205c 6e65 7720 566f 6963 650a       \new Voice.
-0002fe80: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0002fe90: 2020 2020 2020 2020 2020 2020 2020 6327                c'
-0002fea0: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
-0002feb0: 2020 6427 380a 2020 2020 2020 2020 2020    d'8.          
-0002fec0: 2020 2020 2020 6527 380a 2020 2020 2020        e'8.      
-0002fed0: 2020 2020 2020 2020 2020 6627 380a 2020            f'8.  
-0002fee0: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
-0002fef0: 2056 6f69 6365 2d63 6f6e 7465 7874 6564   Voice-contexted
-0002ff00: 2069 6e64 6963 6174 6f72 7320 6c69 6b65   indicators like
-0002ff10: 2064 796e 616d 6963 7320 776f 726b 2077   dynamics work w
-0002ff20: 6974 6820 6e65 7374 6564 2076 6f69 6365  ith nested voice
-0002ff30: 732e 0a0a 2020 2020 2e2e 2020 636f 6e74  s...    ..  cont
-0002ff40: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
-0002ff50: 0a20 2020 2020 2020 2046 6f72 7465 2061  .        Forte a
-0002ff60: 6666 6563 7473 2061 6c6c 2072 6564 206e  ffects all red n
-0002ff70: 6f74 6573 3a0a 0a20 2020 2020 2020 203e  otes:..        >
-0002ff80: 3e3e 206f 7574 6572 5f72 6564 5f76 6f69  >> outer_red_voi
-0002ff90: 6365 203d 2061 626a 6164 2e56 6f69 6365  ce = abjad.Voice
-0002ffa0: 2822 6527 2738 2064 2727 222c 206e 616d  ("e''8 d''", nam
-0002ffb0: 653d 2752 6564 5f56 6f69 6365 2729 0a20  e='Red_Voice'). 
-0002ffc0: 2020 2020 2020 203e 3e3e 2069 6e6e 6572         >>> inner
-0002ffd0: 5f72 6564 5f76 6f69 6365 203d 2061 626a  _red_voice = abj
-0002ffe0: 6164 2e56 6f69 6365 2822 6327 2734 2062  ad.Voice("c''4 b
-0002fff0: 2720 6327 2738 222c 206e 616d 653d 2752  ' c''8", name='R
-00030000: 6564 5f56 6f69 6365 2729 0a20 2020 2020  ed_Voice').     
-00030010: 2020 203e 3e3e 2069 6e6e 6572 5f62 6c75     >>> inner_blu
-00030020: 655f 766f 6963 6520 3d20 6162 6a61 642e  e_voice = abjad.
-00030030: 566f 6963 6528 2265 2734 2066 2720 6527  Voice("e'4 f' e'
-00030040: 3822 2c20 6e61 6d65 3d27 426c 7565 5f56  8", name='Blue_V
-00030050: 6f69 6365 2729 0a20 2020 2020 2020 203e  oice').        >
-00030060: 3e3e 2063 6f6e 7461 696e 6572 203d 2061  >> container = a
-00030070: 626a 6164 2e43 6f6e 7461 696e 6572 280a  bjad.Container(.
-00030080: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-00030090: 5b69 6e6e 6572 5f72 6564 5f76 6f69 6365  [inner_red_voice
-000300a0: 2c20 696e 6e65 725f 626c 7565 5f76 6f69  , inner_blue_voi
-000300b0: 6365 5d2c 0a20 2020 2020 2020 202e 2e2e  ce],.        ...
-000300c0: 2020 2020 2073 696d 756c 7461 6e65 6f75       simultaneou
-000300d0: 733d 5472 7565 2c0a 2020 2020 2020 2020  s=True,.        
-000300e0: 2e2e 2e20 2020 2020 290a 2020 2020 2020  ...     ).      
-000300f0: 2020 3e3e 3e20 6f75 7465 725f 7265 645f    >>> outer_red_
-00030100: 766f 6963 652e 6170 7065 6e64 2863 6f6e  voice.append(con
-00030110: 7461 696e 6572 290a 2020 2020 2020 2020  tainer).        
-00030120: 3e3e 3e20 6f75 7465 725f 7265 645f 766f  >>> outer_red_vo
-00030130: 6963 652e 6578 7465 6e64 2822 6427 2738  ice.extend("d''8
-00030140: 2229 0a20 2020 2020 2020 203e 3e3e 2061  ").        >>> a
-00030150: 626a 6164 2e6f 7665 7272 6964 6528 6f75  bjad.override(ou
-00030160: 7465 725f 7265 645f 766f 6963 6529 2e4e  ter_red_voice).N
-00030170: 6f74 6548 6561 642e 636f 6c6f 7220 3d20  oteHead.color = 
-00030180: 2223 7265 6422 0a20 2020 2020 2020 203e  "#red".        >
-00030190: 3e3e 206c 6974 6572 616c 203d 2061 626a  >> literal = abj
-000301a0: 6164 2e4c 696c 7950 6f6e 644c 6974 6572  ad.LilyPondLiter
-000301b0: 616c 2872 275c 766f 6963 654f 6e65 2729  al(r'\voiceOne')
-000301c0: 0a20 2020 2020 2020 203e 3e3e 2061 626a  .        >>> abj
-000301d0: 6164 2e61 7474 6163 6828 6c69 7465 7261  ad.attach(litera
-000301e0: 6c2c 206f 7574 6572 5f72 6564 5f76 6f69  l, outer_red_voi
-000301f0: 6365 5b30 5d29 0a20 2020 2020 2020 203e  ce[0]).        >
-00030200: 3e3e 2061 626a 6164 2e6f 7665 7272 6964  >> abjad.overrid
-00030210: 6528 696e 6e65 725f 626c 7565 5f76 6f69  e(inner_blue_voi
-00030220: 6365 292e 4e6f 7465 4865 6164 2e63 6f6c  ce).NoteHead.col
-00030230: 6f72 203d 2022 2362 6c75 6522 0a20 2020  or = "#blue".   
-00030240: 2020 2020 203e 3e3e 206c 6974 6572 616c       >>> literal
-00030250: 203d 2061 626a 6164 2e4c 696c 7950 6f6e   = abjad.LilyPon
-00030260: 644c 6974 6572 616c 2872 275c 766f 6963  dLiteral(r'\voic
-00030270: 6554 776f 2729 0a20 2020 2020 2020 203e  eTwo').        >
-00030280: 3e3e 2061 626a 6164 2e61 7474 6163 6828  >> abjad.attach(
-00030290: 6c69 7465 7261 6c2c 2069 6e6e 6572 5f62  literal, inner_b
-000302a0: 6c75 655f 766f 6963 655b 305d 290a 2020  lue_voice[0]).  
-000302b0: 2020 2020 2020 3e3e 3e20 6479 6e61 6d69        >>> dynami
-000302c0: 6320 3d20 6162 6a61 642e 4479 6e61 6d69  c = abjad.Dynami
-000302d0: 6328 2766 2729 0a20 2020 2020 2020 203e  c('f').        >
-000302e0: 3e3e 2061 626a 6164 2e61 7474 6163 6828  >> abjad.attach(
-000302f0: 6479 6e61 6d69 632c 206f 7574 6572 5f72  dynamic, outer_r
-00030300: 6564 5f76 6f69 6365 5b30 5d29 0a20 2020  ed_voice[0]).   
-00030310: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
-00030320: 686f 7728 6f75 7465 725f 7265 645f 766f  how(outer_red_vo
-00030330: 6963 6529 2023 2064 6f63 7465 7374 3a20  ice) # doctest: 
-00030340: 2b53 4b49 500a 0a20 2020 2020 2020 202e  +SKIP..        .
-00030350: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
-00030360: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
-00030370: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
-00030380: 6e64 286f 7574 6572 5f72 6564 5f76 6f69  nd(outer_red_voi
-00030390: 6365 290a 2020 2020 2020 2020 2020 2020  ce).            
-000303a0: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
-000303b0: 290a 2020 2020 2020 2020 2020 2020 5c63  ).            \c
-000303c0: 6f6e 7465 7874 2056 6f69 6365 203d 2022  ontext Voice = "
-000303d0: 5265 645f 566f 6963 6522 0a20 2020 2020  Red_Voice".     
-000303e0: 2020 2020 2020 205c 7769 7468 0a20 2020         \with.   
-000303f0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00030400: 2020 2020 2020 2020 2020 205c 6f76 6572             \over
-00030410: 7269 6465 204e 6f74 6548 6561 642e 636f  ride NoteHead.co
-00030420: 6c6f 7220 3d20 2372 6564 0a20 2020 2020  lor = #red.     
-00030430: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00030440: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00030450: 2020 2020 2020 205c 766f 6963 654f 6e65         \voiceOne
-00030460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00030470: 2065 2727 380a 2020 2020 2020 2020 2020   e''8.          
-00030480: 2020 2020 2020 5c66 0a20 2020 2020 2020        \f.       
-00030490: 2020 2020 2020 2020 2064 2727 380a 2020           d''8.  
-000304a0: 2020 2020 2020 2020 2020 2020 2020 3c3c                <<
-000304b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000304c0: 2020 2020 205c 636f 6e74 6578 7420 566f       \context Vo
-000304d0: 6963 6520 3d20 2252 6564 5f56 6f69 6365  ice = "Red_Voice
-000304e0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-000304f0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00030500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030510: 6327 2734 0a20 2020 2020 2020 2020 2020  c''4.           
-00030520: 2020 2020 2020 2020 2020 2020 2062 2734               b'4
-00030530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00030540: 2020 2020 2020 2020 2063 2727 380a 2020           c''8.  
-00030550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030560: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-00030570: 2020 2020 2020 2020 5c63 6f6e 7465 7874          \context
-00030580: 2056 6f69 6365 203d 2022 426c 7565 5f56   Voice = "Blue_V
-00030590: 6f69 6365 220a 2020 2020 2020 2020 2020  oice".          
-000305a0: 2020 2020 2020 2020 2020 5c77 6974 680a            \with.
-000305b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000305c0: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-000305d0: 2020 2020 2020 2020 2020 2020 2020 5c6f                \o
-000305e0: 7665 7272 6964 6520 4e6f 7465 4865 6164  verride NoteHead
-000305f0: 2e63 6f6c 6f72 203d 2023 626c 7565 0a20  .color = #blue. 
-00030600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030610: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00030620: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00030630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030640: 2020 205c 766f 6963 6554 776f 0a20 2020     \voiceTwo.   
-00030650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030660: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
-00030670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030680: 2066 2734 0a20 2020 2020 2020 2020 2020   f'4.           
-00030690: 2020 2020 2020 2020 2020 2020 2065 2738               e'8
-000306a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000306b0: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
-000306c0: 2020 2020 2020 203e 3e0a 2020 2020 2020         >>.      
-000306d0: 2020 2020 2020 2020 2020 6427 2738 0a20            d''8. 
-000306e0: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
-000306f0: 2020 2020 2020 3e3e 3e20 666f 7220 6c65        >>> for le
-00030700: 6166 2069 6e20 6162 6a61 642e 6974 6572  af in abjad.iter
-00030710: 6174 652e 6c65 6176 6573 286f 7574 6572  ate.leaves(outer
-00030720: 5f72 6564 5f76 6f69 6365 293a 0a20 2020  _red_voice):.   
-00030730: 2020 2020 202e 2e2e 2020 2020 2064 796e       ...     dyn
-00030740: 616d 6963 203d 2061 626a 6164 2e67 6574  amic = abjad.get
-00030750: 2e65 6666 6563 7469 7665 286c 6561 662c  .effective(leaf,
-00030760: 2061 626a 6164 2e44 796e 616d 6963 290a   abjad.Dynamic).
-00030770: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-00030780: 7072 696e 7428 6c65 6166 2c20 6479 6e61  print(leaf, dyna
-00030790: 6d69 6329 0a20 2020 2020 2020 202e 2e2e  mic).        ...
-000307a0: 0a20 2020 2020 2020 204e 6f74 6528 2265  .        Note("e
-000307b0: 2727 3822 2920 4479 6e61 6d69 6328 6e61  ''8") Dynamic(na
-000307c0: 6d65 3d27 6627 2c20 636f 6d6d 616e 643d  me='f', command=
-000307d0: 4e6f 6e65 2c20 666f 726d 6174 5f68 6169  None, format_hai
-000307e0: 7270 696e 5f73 746f 703d 4661 6c73 652c  rpin_stop=False,
-000307f0: 2068 6964 653d 4661 6c73 652c 206c 6561   hide=False, lea
-00030800: 6b3d 4661 6c73 652c 206e 616d 655f 6973  k=False, name_is
-00030810: 5f74 6578 7475 616c 3d46 616c 7365 2c20  _textual=False, 
-00030820: 6f72 6469 6e61 6c3d 3229 0a20 2020 2020  ordinal=2).     
-00030830: 2020 204e 6f74 6528 2264 2727 3822 2920     Note("d''8") 
-00030840: 4479 6e61 6d69 6328 6e61 6d65 3d27 6627  Dynamic(name='f'
-00030850: 2c20 636f 6d6d 616e 643d 4e6f 6e65 2c20  , command=None, 
-00030860: 666f 726d 6174 5f68 6169 7270 696e 5f73  format_hairpin_s
-00030870: 746f 703d 4661 6c73 652c 2068 6964 653d  top=False, hide=
-00030880: 4661 6c73 652c 206c 6561 6b3d 4661 6c73  False, leak=Fals
-00030890: 652c 206e 616d 655f 6973 5f74 6578 7475  e, name_is_textu
-000308a0: 616c 3d46 616c 7365 2c20 6f72 6469 6e61  al=False, ordina
-000308b0: 6c3d 3229 0a20 2020 2020 2020 204e 6f74  l=2).        Not
-000308c0: 6528 2263 2727 3422 2920 4479 6e61 6d69  e("c''4") Dynami
-000308d0: 6328 6e61 6d65 3d27 6627 2c20 636f 6d6d  c(name='f', comm
-000308e0: 616e 643d 4e6f 6e65 2c20 666f 726d 6174  and=None, format
-000308f0: 5f68 6169 7270 696e 5f73 746f 703d 4661  _hairpin_stop=Fa
-00030900: 6c73 652c 2068 6964 653d 4661 6c73 652c  lse, hide=False,
-00030910: 206c 6561 6b3d 4661 6c73 652c 206e 616d   leak=False, nam
-00030920: 655f 6973 5f74 6578 7475 616c 3d46 616c  e_is_textual=Fal
-00030930: 7365 2c20 6f72 6469 6e61 6c3d 3229 0a20  se, ordinal=2). 
-00030940: 2020 2020 2020 204e 6f74 6528 2262 2734         Note("b'4
-00030950: 2229 2044 796e 616d 6963 286e 616d 653d  ") Dynamic(name=
-00030960: 2766 272c 2063 6f6d 6d61 6e64 3d4e 6f6e  'f', command=Non
-00030970: 652c 2066 6f72 6d61 745f 6861 6972 7069  e, format_hairpi
-00030980: 6e5f 7374 6f70 3d46 616c 7365 2c20 6869  n_stop=False, hi
-00030990: 6465 3d46 616c 7365 2c20 6c65 616b 3d46  de=False, leak=F
-000309a0: 616c 7365 2c20 6e61 6d65 5f69 735f 7465  alse, name_is_te
-000309b0: 7874 7561 6c3d 4661 6c73 652c 206f 7264  xtual=False, ord
-000309c0: 696e 616c 3d32 290a 2020 2020 2020 2020  inal=2).        
-000309d0: 4e6f 7465 2822 6327 2738 2229 2044 796e  Note("c''8") Dyn
-000309e0: 616d 6963 286e 616d 653d 2766 272c 2063  amic(name='f', c
-000309f0: 6f6d 6d61 6e64 3d4e 6f6e 652c 2066 6f72  ommand=None, for
-00030a00: 6d61 745f 6861 6972 7069 6e5f 7374 6f70  mat_hairpin_stop
-00030a10: 3d46 616c 7365 2c20 6869 6465 3d46 616c  =False, hide=Fal
-00030a20: 7365 2c20 6c65 616b 3d46 616c 7365 2c20  se, leak=False, 
-00030a30: 6e61 6d65 5f69 735f 7465 7874 7561 6c3d  name_is_textual=
-00030a40: 4661 6c73 652c 206f 7264 696e 616c 3d32  False, ordinal=2
-00030a50: 290a 2020 2020 2020 2020 4e6f 7465 2822  ).        Note("
-00030a60: 6527 3422 2920 4e6f 6e65 0a20 2020 2020  e'4") None.     
-00030a70: 2020 204e 6f74 6528 2266 2734 2229 204e     Note("f'4") N
-00030a80: 6f6e 650a 2020 2020 2020 2020 4e6f 7465  one.        Note
-00030a90: 2822 6527 3822 2920 4e6f 6e65 0a20 2020  ("e'8") None.   
-00030aa0: 2020 2020 204e 6f74 6528 2264 2727 3822       Note("d''8"
-00030ab0: 2920 4479 6e61 6d69 6328 6e61 6d65 3d27  ) Dynamic(name='
-00030ac0: 6627 2c20 636f 6d6d 616e 643d 4e6f 6e65  f', command=None
-00030ad0: 2c20 666f 726d 6174 5f68 6169 7270 696e  , format_hairpin
-00030ae0: 5f73 746f 703d 4661 6c73 652c 2068 6964  _stop=False, hid
-00030af0: 653d 4661 6c73 652c 206c 6561 6b3d 4661  e=False, leak=Fa
-00030b00: 6c73 652c 206e 616d 655f 6973 5f74 6578  lse, name_is_tex
-00030b10: 7475 616c 3d46 616c 7365 2c20 6f72 6469  tual=False, ordi
-00030b20: 6e61 6c3d 3229 0a0a 2020 2020 2e2e 2020  nal=2)..    ..  
-00030b30: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
-00030b40: 706c 650a 0a20 2020 2020 2020 2050 6961  ple..        Pia
-00030b50: 6e6f 2061 6666 6563 7473 2061 6c6c 2062  no affects all b
-00030b60: 6c75 6520 6e6f 7465 733a 0a0a 2020 2020  lue notes:..    
-00030b70: 2020 2020 3e3e 3e20 6f75 7465 725f 7265      >>> outer_re
-00030b80: 645f 766f 6963 6520 3d20 6162 6a61 642e  d_voice = abjad.
-00030b90: 566f 6963 6528 2265 2727 3820 6427 2722  Voice("e''8 d''"
-00030ba0: 2c20 6e61 6d65 3d27 5265 645f 566f 6963  , name='Red_Voic
-00030bb0: 6527 290a 2020 2020 2020 2020 3e3e 3e20  e').        >>> 
-00030bc0: 696e 6e65 725f 7265 645f 766f 6963 6520  inner_red_voice 
-00030bd0: 3d20 6162 6a61 642e 566f 6963 6528 2263  = abjad.Voice("c
-00030be0: 2727 3420 6227 2063 2727 3822 2c20 6e61  ''4 b' c''8", na
-00030bf0: 6d65 3d27 5265 645f 566f 6963 6527 290a  me='Red_Voice').
-00030c00: 2020 2020 2020 2020 3e3e 3e20 696e 6e65          >>> inne
-00030c10: 725f 626c 7565 5f76 6f69 6365 203d 2061  r_blue_voice = a
-00030c20: 626a 6164 2e56 6f69 6365 2822 6527 3420  bjad.Voice("e'4 
-00030c30: 6627 2065 2738 222c 206e 616d 653d 2742  f' e'8", name='B
-00030c40: 6c75 655f 566f 6963 6527 290a 2020 2020  lue_Voice').    
-00030c50: 2020 2020 3e3e 3e20 636f 6e74 6169 6e65      >>> containe
-00030c60: 7220 3d20 6162 6a61 642e 436f 6e74 6169  r = abjad.Contai
-00030c70: 6e65 7228 0a20 2020 2020 2020 202e 2e2e  ner(.        ...
-00030c80: 2020 2020 205b 696e 6e65 725f 7265 645f       [inner_red_
-00030c90: 766f 6963 652c 2069 6e6e 6572 5f62 6c75  voice, inner_blu
-00030ca0: 655f 766f 6963 655d 2c0a 2020 2020 2020  e_voice],.      
-00030cb0: 2020 2e2e 2e20 2020 2020 7369 6d75 6c74    ...     simult
-00030cc0: 616e 656f 7573 3d54 7275 652c 0a20 2020  aneous=True,.   
-00030cd0: 2020 2020 202e 2e2e 2020 2020 2029 0a20       ...     ). 
-00030ce0: 2020 2020 2020 203e 3e3e 206f 7574 6572         >>> outer
-00030cf0: 5f72 6564 5f76 6f69 6365 2e61 7070 656e  _red_voice.appen
-00030d00: 6428 636f 6e74 6169 6e65 7229 0a20 2020  d(container).   
-00030d10: 2020 2020 203e 3e3e 206f 7574 6572 5f72       >>> outer_r
-00030d20: 6564 5f76 6f69 6365 2e65 7874 656e 6428  ed_voice.extend(
-00030d30: 2264 2727 3822 290a 2020 2020 2020 2020  "d''8").        
-00030d40: 3e3e 3e20 6162 6a61 642e 6f76 6572 7269  >>> abjad.overri
-00030d50: 6465 286f 7574 6572 5f72 6564 5f76 6f69  de(outer_red_voi
-00030d60: 6365 292e 4e6f 7465 4865 6164 2e63 6f6c  ce).NoteHead.col
-00030d70: 6f72 203d 2022 2372 6564 220a 2020 2020  or = "#red".    
-00030d80: 2020 2020 3e3e 3e20 6c69 7465 7261 6c20      >>> literal 
-00030d90: 3d20 6162 6a61 642e 4c69 6c79 506f 6e64  = abjad.LilyPond
-00030da0: 4c69 7465 7261 6c28 7227 5c76 6f69 6365  Literal(r'\voice
-00030db0: 4f6e 6527 290a 2020 2020 2020 2020 3e3e  One').        >>
-00030dc0: 3e20 6162 6a61 642e 6174 7461 6368 286c  > abjad.attach(l
-00030dd0: 6974 6572 616c 2c20 6f75 7465 725f 7265  iteral, outer_re
-00030de0: 645f 766f 6963 655b 305d 290a 2020 2020  d_voice[0]).    
-00030df0: 2020 2020 3e3e 3e20 6162 6a61 642e 6f76      >>> abjad.ov
-00030e00: 6572 7269 6465 2869 6e6e 6572 5f62 6c75  erride(inner_blu
-00030e10: 655f 766f 6963 6529 2e4e 6f74 6548 6561  e_voice).NoteHea
-00030e20: 642e 636f 6c6f 7220 3d20 2223 626c 7565  d.color = "#blue
-00030e30: 220a 2020 2020 2020 2020 3e3e 3e20 6c69  ".        >>> li
-00030e40: 7465 7261 6c20 3d20 6162 6a61 642e 4c69  teral = abjad.Li
-00030e50: 6c79 506f 6e64 4c69 7465 7261 6c28 7227  lyPondLiteral(r'
-00030e60: 5c76 6f69 6365 5477 6f27 290a 2020 2020  \voiceTwo').    
-00030e70: 2020 2020 3e3e 3e20 6162 6a61 642e 6174      >>> abjad.at
-00030e80: 7461 6368 286c 6974 6572 616c 2c20 696e  tach(literal, in
-00030e90: 6e65 725f 626c 7565 5f76 6f69 6365 5b30  ner_blue_voice[0
-00030ea0: 5d29 0a20 2020 2020 2020 203e 3e3e 2064  ]).        >>> d
-00030eb0: 796e 616d 6963 203d 2061 626a 6164 2e44  ynamic = abjad.D
-00030ec0: 796e 616d 6963 2827 7027 290a 2020 2020  ynamic('p').    
-00030ed0: 2020 2020 3e3e 3e20 6162 6a61 642e 6174      >>> abjad.at
-00030ee0: 7461 6368 2864 796e 616d 6963 2c20 696e  tach(dynamic, in
-00030ef0: 6e65 725f 626c 7565 5f76 6f69 6365 5b30  ner_blue_voice[0
-00030f00: 5d29 0a20 2020 2020 2020 203e 3e3e 2061  ]).        >>> a
-00030f10: 626a 6164 2e73 686f 7728 6f75 7465 725f  bjad.show(outer_
-00030f20: 7265 645f 766f 6963 6529 2023 2064 6f63  red_voice) # doc
-00030f30: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
-00030f40: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
-00030f50: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00030f60: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
-00030f70: 6c69 6c79 706f 6e64 286f 7574 6572 5f72  lilypond(outer_r
-00030f80: 6564 5f76 6f69 6365 290a 2020 2020 2020  ed_voice).      
-00030f90: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
-00030fa0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
-00030fb0: 2020 2020 5c63 6f6e 7465 7874 2056 6f69      \context Voi
-00030fc0: 6365 203d 2022 5265 645f 566f 6963 6522  ce = "Red_Voice"
-00030fd0: 0a20 2020 2020 2020 2020 2020 205c 7769  .            \wi
-00030fe0: 7468 0a20 2020 2020 2020 2020 2020 207b  th.            {
-00030ff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00031000: 205c 6f76 6572 7269 6465 204e 6f74 6548   \override NoteH
-00031010: 6561 642e 636f 6c6f 7220 3d20 2372 6564  ead.color = #red
-00031020: 0a20 2020 2020 2020 2020 2020 207d 0a20  .            }. 
-00031030: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-00031040: 2020 2020 2020 2020 2020 2020 205c 766f               \vo
-00031050: 6963 654f 6e65 0a20 2020 2020 2020 2020  iceOne.         
-00031060: 2020 2020 2020 2065 2727 380a 2020 2020         e''8.    
-00031070: 2020 2020 2020 2020 2020 2020 6427 2738              d''8
-00031080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00031090: 203c 3c0a 2020 2020 2020 2020 2020 2020   <<.            
-000310a0: 2020 2020 2020 2020 5c63 6f6e 7465 7874          \context
-000310b0: 2056 6f69 6365 203d 2022 5265 645f 566f   Voice = "Red_Vo
-000310c0: 6963 6522 0a20 2020 2020 2020 2020 2020  ice".           
-000310d0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-000310e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000310f0: 2020 2063 2727 340a 2020 2020 2020 2020     c''4.        
-00031100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031110: 6227 340a 2020 2020 2020 2020 2020 2020  b'4.            
-00031120: 2020 2020 2020 2020 2020 2020 6327 2738              c''8
-00031130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00031140: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
-00031150: 2020 2020 2020 2020 2020 205c 636f 6e74             \cont
-00031160: 6578 7420 566f 6963 6520 3d20 2242 6c75  ext Voice = "Blu
-00031170: 655f 566f 6963 6522 0a20 2020 2020 2020  e_Voice".       
-00031180: 2020 2020 2020 2020 2020 2020 205c 7769               \wi
-00031190: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
-000311a0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-000311b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000311c0: 205c 6f76 6572 7269 6465 204e 6f74 6548   \override NoteH
-000311d0: 6561 642e 636f 6c6f 7220 3d20 2362 6c75  ead.color = #blu
-000311e0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000311f0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00031200: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-00031210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031220: 2020 2020 2020 5c76 6f69 6365 5477 6f0a        \voiceTwo.
-00031230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031240: 2020 2020 2020 2020 6527 340a 2020 2020          e'4.    
-00031250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031260: 2020 2020 5c70 0a20 2020 2020 2020 2020      \p.         
-00031270: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00031280: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
-00031290: 2020 2020 2020 2020 2020 2065 2738 0a20             e'8. 
-000312a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000312b0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-000312c0: 2020 2020 203e 3e0a 2020 2020 2020 2020       >>.        
-000312d0: 2020 2020 2020 2020 6427 2738 0a20 2020          d''8.   
-000312e0: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
-000312f0: 2020 2020 3e3e 3e20 666f 7220 6c65 6166      >>> for leaf
-00031300: 2069 6e20 6162 6a61 642e 6974 6572 6174   in abjad.iterat
-00031310: 652e 6c65 6176 6573 286f 7574 6572 5f72  e.leaves(outer_r
-00031320: 6564 5f76 6f69 6365 293a 0a20 2020 2020  ed_voice):.     
-00031330: 2020 202e 2e2e 2020 2020 2064 796e 616d     ...     dynam
-00031340: 6963 203d 2061 626a 6164 2e67 6574 2e65  ic = abjad.get.e
-00031350: 6666 6563 7469 7665 286c 6561 662c 2061  ffective(leaf, a
-00031360: 626a 6164 2e44 796e 616d 6963 290a 2020  bjad.Dynamic).  
-00031370: 2020 2020 2020 2e2e 2e20 2020 2020 7072        ...     pr
-00031380: 696e 7428 6c65 6166 2c20 6479 6e61 6d69  int(leaf, dynami
-00031390: 6329 0a20 2020 2020 2020 202e 2e2e 0a20  c).        .... 
-000313a0: 2020 2020 2020 204e 6f74 6528 2265 2727         Note("e''
-000313b0: 3822 2920 4e6f 6e65 0a20 2020 2020 2020  8") None.       
-000313c0: 204e 6f74 6528 2264 2727 3822 2920 4e6f   Note("d''8") No
-000313d0: 6e65 0a20 2020 2020 2020 204e 6f74 6528  ne.        Note(
-000313e0: 2263 2727 3422 2920 4e6f 6e65 0a20 2020  "c''4") None.   
-000313f0: 2020 2020 204e 6f74 6528 2262 2734 2229       Note("b'4")
-00031400: 204e 6f6e 650a 2020 2020 2020 2020 4e6f   None.        No
-00031410: 7465 2822 6327 2738 2229 204e 6f6e 650a  te("c''8") None.
-00031420: 2020 2020 2020 2020 4e6f 7465 2822 6527          Note("e'
-00031430: 3422 2920 4479 6e61 6d69 6328 6e61 6d65  4") Dynamic(name
-00031440: 3d27 7027 2c20 636f 6d6d 616e 643d 4e6f  ='p', command=No
-00031450: 6e65 2c20 666f 726d 6174 5f68 6169 7270  ne, format_hairp
-00031460: 696e 5f73 746f 703d 4661 6c73 652c 2068  in_stop=False, h
-00031470: 6964 653d 4661 6c73 652c 206c 6561 6b3d  ide=False, leak=
-00031480: 4661 6c73 652c 206e 616d 655f 6973 5f74  False, name_is_t
-00031490: 6578 7475 616c 3d46 616c 7365 2c20 6f72  extual=False, or
-000314a0: 6469 6e61 6c3d 2d32 290a 2020 2020 2020  dinal=-2).      
-000314b0: 2020 4e6f 7465 2822 6627 3422 2920 4479    Note("f'4") Dy
-000314c0: 6e61 6d69 6328 6e61 6d65 3d27 7027 2c20  namic(name='p', 
-000314d0: 636f 6d6d 616e 643d 4e6f 6e65 2c20 666f  command=None, fo
-000314e0: 726d 6174 5f68 6169 7270 696e 5f73 746f  rmat_hairpin_sto
-000314f0: 703d 4661 6c73 652c 2068 6964 653d 4661  p=False, hide=Fa
-00031500: 6c73 652c 206c 6561 6b3d 4661 6c73 652c  lse, leak=False,
-00031510: 206e 616d 655f 6973 5f74 6578 7475 616c   name_is_textual
-00031520: 3d46 616c 7365 2c20 6f72 6469 6e61 6c3d  =False, ordinal=
-00031530: 2d32 290a 2020 2020 2020 2020 4e6f 7465  -2).        Note
-00031540: 2822 6527 3822 2920 4479 6e61 6d69 6328  ("e'8") Dynamic(
-00031550: 6e61 6d65 3d27 7027 2c20 636f 6d6d 616e  name='p', comman
-00031560: 643d 4e6f 6e65 2c20 666f 726d 6174 5f68  d=None, format_h
-00031570: 6169 7270 696e 5f73 746f 703d 4661 6c73  airpin_stop=Fals
-00031580: 652c 2068 6964 653d 4661 6c73 652c 206c  e, hide=False, l
-00031590: 6561 6b3d 4661 6c73 652c 206e 616d 655f  eak=False, name_
-000315a0: 6973 5f74 6578 7475 616c 3d46 616c 7365  is_textual=False
-000315b0: 2c20 6f72 6469 6e61 6c3d 2d32 290a 2020  , ordinal=-2).  
-000315c0: 2020 2020 2020 4e6f 7465 2822 6427 2738        Note("d''8
-000315d0: 2229 204e 6f6e 650a 0a20 2020 202e 2e20  ") None..    .. 
-000315e0: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
-000315f0: 6d70 6c65 0a0a 2020 2020 2020 2020 4d65  mple..        Me
-00031600: 7a7a 6f66 6f72 7465 2061 6666 6563 7473  zzoforte affects
-00031610: 2072 6564 206e 6f74 6573 2066 726f 6d20   red notes from 
-00031620: 4334 2066 6f72 7761 7264 3a0a 0a20 2020  C4 forward:..   
-00031630: 2020 2020 203e 3e3e 206f 7574 6572 5f72       >>> outer_r
-00031640: 6564 5f76 6f69 6365 203d 2061 626a 6164  ed_voice = abjad
-00031650: 2e56 6f69 6365 2822 6527 2738 2064 2727  .Voice("e''8 d''
-00031660: 222c 206e 616d 653d 2752 6564 5f56 6f69  ", name='Red_Voi
-00031670: 6365 2729 0a20 2020 2020 2020 203e 3e3e  ce').        >>>
-00031680: 2069 6e6e 6572 5f72 6564 5f76 6f69 6365   inner_red_voice
-00031690: 203d 2061 626a 6164 2e56 6f69 6365 2822   = abjad.Voice("
-000316a0: 6327 2734 2062 2720 6327 2738 222c 206e  c''4 b' c''8", n
-000316b0: 616d 653d 2752 6564 5f56 6f69 6365 2729  ame='Red_Voice')
-000316c0: 0a20 2020 2020 2020 203e 3e3e 2069 6e6e  .        >>> inn
-000316d0: 6572 5f62 6c75 655f 766f 6963 6520 3d20  er_blue_voice = 
-000316e0: 6162 6a61 642e 566f 6963 6528 2265 2734  abjad.Voice("e'4
-000316f0: 2066 2720 6527 3822 2c20 6e61 6d65 3d27   f' e'8", name='
-00031700: 426c 7565 5f56 6f69 6365 2729 0a20 2020  Blue_Voice').   
-00031710: 2020 2020 203e 3e3e 2063 6f6e 7461 696e       >>> contain
-00031720: 6572 203d 2061 626a 6164 2e43 6f6e 7461  er = abjad.Conta
-00031730: 696e 6572 280a 2020 2020 2020 2020 2e2e  iner(.        ..
-00031740: 2e20 2020 2020 5b69 6e6e 6572 5f72 6564  .     [inner_red
-00031750: 5f76 6f69 6365 2c20 696e 6e65 725f 626c  _voice, inner_bl
-00031760: 7565 5f76 6f69 6365 5d2c 0a20 2020 2020  ue_voice],.     
-00031770: 2020 202e 2e2e 2020 2020 2073 696d 756c     ...     simul
-00031780: 7461 6e65 6f75 733d 5472 7565 2c0a 2020  taneous=True,.  
-00031790: 2020 2020 2020 2e2e 2e20 2020 2020 290a        ...     ).
-000317a0: 2020 2020 2020 2020 3e3e 3e20 6f75 7465          >>> oute
-000317b0: 725f 7265 645f 766f 6963 652e 6170 7065  r_red_voice.appe
-000317c0: 6e64 2863 6f6e 7461 696e 6572 290a 2020  nd(container).  
-000317d0: 2020 2020 2020 3e3e 3e20 6f75 7465 725f        >>> outer_
-000317e0: 7265 645f 766f 6963 652e 6578 7465 6e64  red_voice.extend
-000317f0: 2822 6427 2738 2229 0a20 2020 2020 2020  ("d''8").       
-00031800: 203e 3e3e 2061 626a 6164 2e6f 7665 7272   >>> abjad.overr
-00031810: 6964 6528 6f75 7465 725f 7265 645f 766f  ide(outer_red_vo
-00031820: 6963 6529 2e4e 6f74 6548 6561 642e 636f  ice).NoteHead.co
-00031830: 6c6f 7220 3d20 2223 7265 6422 0a20 2020  lor = "#red".   
-00031840: 2020 2020 203e 3e3e 206c 6974 6572 616c       >>> literal
-00031850: 203d 2061 626a 6164 2e4c 696c 7950 6f6e   = abjad.LilyPon
-00031860: 644c 6974 6572 616c 2872 275c 766f 6963  dLiteral(r'\voic
-00031870: 654f 6e65 2729 0a20 2020 2020 2020 203e  eOne').        >
-00031880: 3e3e 2061 626a 6164 2e61 7474 6163 6828  >> abjad.attach(
-00031890: 6c69 7465 7261 6c2c 206f 7574 6572 5f72  literal, outer_r
-000318a0: 6564 5f76 6f69 6365 5b30 5d29 0a20 2020  ed_voice[0]).   
-000318b0: 2020 2020 203e 3e3e 2061 626a 6164 2e6f       >>> abjad.o
-000318c0: 7665 7272 6964 6528 696e 6e65 725f 626c  verride(inner_bl
-000318d0: 7565 5f76 6f69 6365 292e 4e6f 7465 4865  ue_voice).NoteHe
-000318e0: 6164 2e63 6f6c 6f72 203d 2022 2362 6c75  ad.color = "#blu
-000318f0: 6522 0a20 2020 2020 2020 203e 3e3e 206c  e".        >>> l
-00031900: 6974 6572 616c 203d 2061 626a 6164 2e4c  iteral = abjad.L
-00031910: 696c 7950 6f6e 644c 6974 6572 616c 2872  ilyPondLiteral(r
-00031920: 275c 766f 6963 6554 776f 2729 0a20 2020  '\voiceTwo').   
-00031930: 2020 2020 203e 3e3e 2061 626a 6164 2e61       >>> abjad.a
-00031940: 7474 6163 6828 6c69 7465 7261 6c2c 2069  ttach(literal, i
-00031950: 6e6e 6572 5f62 6c75 655f 766f 6963 655b  nner_blue_voice[
-00031960: 305d 290a 2020 2020 2020 2020 3e3e 3e20  0]).        >>> 
-00031970: 6479 6e61 6d69 6320 3d20 6162 6a61 642e  dynamic = abjad.
-00031980: 4479 6e61 6d69 6328 276d 6627 290a 2020  Dynamic('mf').  
-00031990: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-000319a0: 6174 7461 6368 2864 796e 616d 6963 2c20  attach(dynamic, 
-000319b0: 696e 6e65 725f 7265 645f 766f 6963 655b  inner_red_voice[
-000319c0: 305d 290a 2020 2020 2020 2020 3e3e 3e20  0]).        >>> 
-000319d0: 6162 6a61 642e 7368 6f77 286f 7574 6572  abjad.show(outer
-000319e0: 5f72 6564 5f76 6f69 6365 2920 2320 646f  _red_voice) # do
-000319f0: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-00031a00: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-00031a10: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-00031a20: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-00031a30: 2e6c 696c 7970 6f6e 6428 6f75 7465 725f  .lilypond(outer_
-00031a40: 7265 645f 766f 6963 6529 0a20 2020 2020  red_voice).     
-00031a50: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
-00031a60: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
-00031a70: 2020 2020 205c 636f 6e74 6578 7420 566f       \context Vo
-00031a80: 6963 6520 3d20 2252 6564 5f56 6f69 6365  ice = "Red_Voice
-00031a90: 220a 2020 2020 2020 2020 2020 2020 5c77  ".            \w
-00031aa0: 6974 680a 2020 2020 2020 2020 2020 2020  ith.            
-00031ab0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-00031ac0: 2020 5c6f 7665 7272 6964 6520 4e6f 7465    \override Note
-00031ad0: 4865 6164 2e63 6f6c 6f72 203d 2023 7265  Head.color = #re
-00031ae0: 640a 2020 2020 2020 2020 2020 2020 7d0a  d.            }.
-00031af0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-00031b00: 2020 2020 2020 2020 2020 2020 2020 5c76                \v
-00031b10: 6f69 6365 4f6e 650a 2020 2020 2020 2020  oiceOne.        
-00031b20: 2020 2020 2020 2020 6527 2738 0a20 2020          e''8.   
-00031b30: 2020 2020 2020 2020 2020 2020 2064 2727               d''
-00031b40: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
-00031b50: 2020 3c3c 0a20 2020 2020 2020 2020 2020    <<.           
-00031b60: 2020 2020 2020 2020 205c 636f 6e74 6578           \contex
-00031b70: 7420 566f 6963 6520 3d20 2252 6564 5f56  t Voice = "Red_V
-00031b80: 6f69 6365 220a 2020 2020 2020 2020 2020  oice".          
-00031b90: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-00031ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031bb0: 2020 2020 6327 2734 0a20 2020 2020 2020      c''4.       
-00031bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031bd0: 205c 6d66 0a20 2020 2020 2020 2020 2020   \mf.           
-00031be0: 2020 2020 2020 2020 2020 2020 2062 2734               b'4
-00031bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00031c00: 2020 2020 2020 2020 2063 2727 380a 2020           c''8.  
-00031c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031c20: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-00031c30: 2020 2020 2020 2020 5c63 6f6e 7465 7874          \context
-00031c40: 2056 6f69 6365 203d 2022 426c 7565 5f56   Voice = "Blue_V
-00031c50: 6f69 6365 220a 2020 2020 2020 2020 2020  oice".          
-00031c60: 2020 2020 2020 2020 2020 5c77 6974 680a            \with.
-00031c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031c80: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-00031c90: 2020 2020 2020 2020 2020 2020 2020 5c6f                \o
-00031ca0: 7665 7272 6964 6520 4e6f 7465 4865 6164  verride NoteHead
-00031cb0: 2e63 6f6c 6f72 203d 2023 626c 7565 0a20  .color = #blue. 
-00031cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031cd0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00031ce0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00031cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031d00: 2020 205c 766f 6963 6554 776f 0a20 2020     \voiceTwo.   
-00031d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031d20: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
-00031d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031d40: 2066 2734 0a20 2020 2020 2020 2020 2020   f'4.           
-00031d50: 2020 2020 2020 2020 2020 2020 2065 2738               e'8
-00031d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00031d70: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
-00031d80: 2020 2020 2020 203e 3e0a 2020 2020 2020         >>.      
-00031d90: 2020 2020 2020 2020 2020 6427 2738 0a20            d''8. 
-00031da0: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
-00031db0: 2020 2020 2020 3e3e 3e20 666f 7220 6c65        >>> for le
-00031dc0: 6166 2069 6e20 6162 6a61 642e 6974 6572  af in abjad.iter
-00031dd0: 6174 652e 6c65 6176 6573 286f 7574 6572  ate.leaves(outer
-00031de0: 5f72 6564 5f76 6f69 6365 293a 0a20 2020  _red_voice):.   
-00031df0: 2020 2020 202e 2e2e 2020 2020 2064 796e       ...     dyn
-00031e00: 616d 6963 203d 2061 626a 6164 2e67 6574  amic = abjad.get
-00031e10: 2e65 6666 6563 7469 7665 286c 6561 662c  .effective(leaf,
-00031e20: 2061 626a 6164 2e44 796e 616d 6963 290a   abjad.Dynamic).
-00031e30: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-00031e40: 7072 696e 7428 6c65 6166 2c20 6479 6e61  print(leaf, dyna
-00031e50: 6d69 6329 0a20 2020 2020 2020 202e 2e2e  mic).        ...
-00031e60: 0a20 2020 2020 2020 204e 6f74 6528 2265  .        Note("e
-00031e70: 2727 3822 2920 4e6f 6e65 0a20 2020 2020  ''8") None.     
-00031e80: 2020 204e 6f74 6528 2264 2727 3822 2920     Note("d''8") 
-00031e90: 4e6f 6e65 0a20 2020 2020 2020 204e 6f74  None.        Not
-00031ea0: 6528 2263 2727 3422 2920 4479 6e61 6d69  e("c''4") Dynami
-00031eb0: 6328 6e61 6d65 3d27 6d66 272c 2063 6f6d  c(name='mf', com
-00031ec0: 6d61 6e64 3d4e 6f6e 652c 2066 6f72 6d61  mand=None, forma
-00031ed0: 745f 6861 6972 7069 6e5f 7374 6f70 3d46  t_hairpin_stop=F
-00031ee0: 616c 7365 2c20 6869 6465 3d46 616c 7365  alse, hide=False
-00031ef0: 2c20 6c65 616b 3d46 616c 7365 2c20 6e61  , leak=False, na
-00031f00: 6d65 5f69 735f 7465 7874 7561 6c3d 4661  me_is_textual=Fa
-00031f10: 6c73 652c 206f 7264 696e 616c 3d31 290a  lse, ordinal=1).
-00031f20: 2020 2020 2020 2020 4e6f 7465 2822 6227          Note("b'
-00031f30: 3422 2920 4479 6e61 6d69 6328 6e61 6d65  4") Dynamic(name
-00031f40: 3d27 6d66 272c 2063 6f6d 6d61 6e64 3d4e  ='mf', command=N
-00031f50: 6f6e 652c 2066 6f72 6d61 745f 6861 6972  one, format_hair
-00031f60: 7069 6e5f 7374 6f70 3d46 616c 7365 2c20  pin_stop=False, 
-00031f70: 6869 6465 3d46 616c 7365 2c20 6c65 616b  hide=False, leak
-00031f80: 3d46 616c 7365 2c20 6e61 6d65 5f69 735f  =False, name_is_
-00031f90: 7465 7874 7561 6c3d 4661 6c73 652c 206f  textual=False, o
-00031fa0: 7264 696e 616c 3d31 290a 2020 2020 2020  rdinal=1).      
-00031fb0: 2020 4e6f 7465 2822 6327 2738 2229 2044    Note("c''8") D
-00031fc0: 796e 616d 6963 286e 616d 653d 276d 6627  ynamic(name='mf'
-00031fd0: 2c20 636f 6d6d 616e 643d 4e6f 6e65 2c20  , command=None, 
-00031fe0: 666f 726d 6174 5f68 6169 7270 696e 5f73  format_hairpin_s
-00031ff0: 746f 703d 4661 6c73 652c 2068 6964 653d  top=False, hide=
-00032000: 4661 6c73 652c 206c 6561 6b3d 4661 6c73  False, leak=Fals
-00032010: 652c 206e 616d 655f 6973 5f74 6578 7475  e, name_is_textu
-00032020: 616c 3d46 616c 7365 2c20 6f72 6469 6e61  al=False, ordina
-00032030: 6c3d 3129 0a20 2020 2020 2020 204e 6f74  l=1).        Not
-00032040: 6528 2265 2734 2229 204e 6f6e 650a 2020  e("e'4") None.  
-00032050: 2020 2020 2020 4e6f 7465 2822 6627 3422        Note("f'4"
-00032060: 2920 4e6f 6e65 0a20 2020 2020 2020 204e  ) None.        N
-00032070: 6f74 6528 2265 2738 2229 204e 6f6e 650a  ote("e'8") None.
-00032080: 2020 2020 2020 2020 4e6f 7465 2822 6427          Note("d'
-00032090: 2738 2229 2044 796e 616d 6963 286e 616d  '8") Dynamic(nam
-000320a0: 653d 276d 6627 2c20 636f 6d6d 616e 643d  e='mf', command=
-000320b0: 4e6f 6e65 2c20 666f 726d 6174 5f68 6169  None, format_hai
-000320c0: 7270 696e 5f73 746f 703d 4661 6c73 652c  rpin_stop=False,
-000320d0: 2068 6964 653d 4661 6c73 652c 206c 6561   hide=False, lea
-000320e0: 6b3d 4661 6c73 652c 206e 616d 655f 6973  k=False, name_is
-000320f0: 5f74 6578 7475 616c 3d46 616c 7365 2c20  _textual=False, 
-00032100: 6f72 6469 6e61 6c3d 3129 0a0a 2020 2020  ordinal=1)..    
-00032110: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
-00032120: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
-00032130: 204d 657a 7a6f 666f 7274 6520 616e 6420   Mezzoforte and 
-00032140: 7069 616e 6f20 7365 7420 6174 2074 6865  piano set at the
-00032150: 2073 616d 6520 7469 6d65 3a0a 0a20 2020   same time:..   
-00032160: 2020 2020 203e 3e3e 206f 7574 6572 5f72       >>> outer_r
-00032170: 6564 5f76 6f69 6365 203d 2061 626a 6164  ed_voice = abjad
-00032180: 2e56 6f69 6365 2822 6527 2738 2064 2727  .Voice("e''8 d''
-00032190: 222c 206e 616d 653d 2752 6564 5f56 6f69  ", name='Red_Voi
-000321a0: 6365 2729 0a20 2020 2020 2020 203e 3e3e  ce').        >>>
-000321b0: 2069 6e6e 6572 5f72 6564 5f76 6f69 6365   inner_red_voice
-000321c0: 203d 2061 626a 6164 2e56 6f69 6365 2822   = abjad.Voice("
-000321d0: 6327 2734 2062 2720 6327 2738 222c 206e  c''4 b' c''8", n
-000321e0: 616d 653d 2752 6564 5f56 6f69 6365 2729  ame='Red_Voice')
-000321f0: 0a20 2020 2020 2020 203e 3e3e 2069 6e6e  .        >>> inn
-00032200: 6572 5f62 6c75 655f 766f 6963 6520 3d20  er_blue_voice = 
-00032210: 6162 6a61 642e 566f 6963 6528 2265 2734  abjad.Voice("e'4
-00032220: 2066 2720 6527 3822 2c20 6e61 6d65 3d27   f' e'8", name='
-00032230: 426c 7565 5f56 6f69 6365 2729 0a20 2020  Blue_Voice').   
-00032240: 2020 2020 203e 3e3e 2063 6f6e 7461 696e       >>> contain
-00032250: 6572 203d 2061 626a 6164 2e43 6f6e 7461  er = abjad.Conta
-00032260: 696e 6572 280a 2020 2020 2020 2020 2e2e  iner(.        ..
-00032270: 2e20 2020 2020 5b69 6e6e 6572 5f72 6564  .     [inner_red
-00032280: 5f76 6f69 6365 2c20 696e 6e65 725f 626c  _voice, inner_bl
-00032290: 7565 5f76 6f69 6365 5d2c 0a20 2020 2020  ue_voice],.     
-000322a0: 2020 202e 2e2e 2020 2020 2073 696d 756c     ...     simul
-000322b0: 7461 6e65 6f75 733d 5472 7565 2c0a 2020  taneous=True,.  
-000322c0: 2020 2020 2020 2e2e 2e20 2020 2020 290a        ...     ).
-000322d0: 2020 2020 2020 2020 3e3e 3e20 6f75 7465          >>> oute
-000322e0: 725f 7265 645f 766f 6963 652e 6170 7065  r_red_voice.appe
-000322f0: 6e64 2863 6f6e 7461 696e 6572 290a 2020  nd(container).  
-00032300: 2020 2020 2020 3e3e 3e20 6f75 7465 725f        >>> outer_
-00032310: 7265 645f 766f 6963 652e 6578 7465 6e64  red_voice.extend
-00032320: 2822 6427 2738 2229 0a20 2020 2020 2020  ("d''8").       
-00032330: 203e 3e3e 2061 626a 6164 2e6f 7665 7272   >>> abjad.overr
-00032340: 6964 6528 6f75 7465 725f 7265 645f 766f  ide(outer_red_vo
-00032350: 6963 6529 2e4e 6f74 6548 6561 642e 636f  ice).NoteHead.co
-00032360: 6c6f 7220 3d20 2223 7265 6422 0a20 2020  lor = "#red".   
-00032370: 2020 2020 203e 3e3e 206c 6974 6572 616c       >>> literal
-00032380: 203d 2061 626a 6164 2e4c 696c 7950 6f6e   = abjad.LilyPon
-00032390: 644c 6974 6572 616c 2872 275c 766f 6963  dLiteral(r'\voic
-000323a0: 654f 6e65 2729 0a20 2020 2020 2020 203e  eOne').        >
-000323b0: 3e3e 2061 626a 6164 2e61 7474 6163 6828  >> abjad.attach(
-000323c0: 6c69 7465 7261 6c2c 206f 7574 6572 5f72  literal, outer_r
-000323d0: 6564 5f76 6f69 6365 5b30 5d29 0a20 2020  ed_voice[0]).   
-000323e0: 2020 2020 203e 3e3e 2061 626a 6164 2e6f       >>> abjad.o
-000323f0: 7665 7272 6964 6528 696e 6e65 725f 626c  verride(inner_bl
-00032400: 7565 5f76 6f69 6365 292e 4e6f 7465 4865  ue_voice).NoteHe
-00032410: 6164 2e63 6f6c 6f72 203d 2022 2362 6c75  ad.color = "#blu
-00032420: 6522 0a20 2020 2020 2020 203e 3e3e 206c  e".        >>> l
-00032430: 6974 6572 616c 203d 2061 626a 6164 2e4c  iteral = abjad.L
-00032440: 696c 7950 6f6e 644c 6974 6572 616c 2872  ilyPondLiteral(r
-00032450: 275c 766f 6963 6554 776f 2729 0a20 2020  '\voiceTwo').   
-00032460: 2020 2020 203e 3e3e 2061 626a 6164 2e61       >>> abjad.a
-00032470: 7474 6163 6828 6c69 7465 7261 6c2c 2069  ttach(literal, i
-00032480: 6e6e 6572 5f62 6c75 655f 766f 6963 655b  nner_blue_voice[
-00032490: 305d 290a 2020 2020 2020 2020 3e3e 3e20  0]).        >>> 
-000324a0: 6479 6e61 6d69 6320 3d20 6162 6a61 642e  dynamic = abjad.
-000324b0: 4479 6e61 6d69 6328 276d 6627 290a 2020  Dynamic('mf').  
-000324c0: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-000324d0: 6174 7461 6368 2864 796e 616d 6963 2c20  attach(dynamic, 
-000324e0: 696e 6e65 725f 7265 645f 766f 6963 655b  inner_red_voice[
-000324f0: 305d 290a 2020 2020 2020 2020 3e3e 3e20  0]).        >>> 
-00032500: 6479 6e61 6d69 6320 3d20 6162 6a61 642e  dynamic = abjad.
-00032510: 4479 6e61 6d69 6328 2770 2729 0a20 2020  Dynamic('p').   
-00032520: 2020 2020 203e 3e3e 2061 626a 6164 2e61       >>> abjad.a
-00032530: 7474 6163 6828 6479 6e61 6d69 632c 2069  ttach(dynamic, i
-00032540: 6e6e 6572 5f62 6c75 655f 766f 6963 655b  nner_blue_voice[
-00032550: 305d 290a 2020 2020 2020 2020 3e3e 3e20  0]).        >>> 
-00032560: 6162 6a61 642e 7368 6f77 286f 7574 6572  abjad.show(outer
-00032570: 5f72 6564 5f76 6f69 6365 2920 2320 646f  _red_voice) # do
-00032580: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-00032590: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
-000325a0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-000325b0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
-000325c0: 2e6c 696c 7970 6f6e 6428 6f75 7465 725f  .lilypond(outer_
-000325d0: 7265 645f 766f 6963 6529 0a20 2020 2020  red_voice).     
-000325e0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
-000325f0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
-00032600: 2020 2020 205c 636f 6e74 6578 7420 566f       \context Vo
-00032610: 6963 6520 3d20 2252 6564 5f56 6f69 6365  ice = "Red_Voice
-00032620: 220a 2020 2020 2020 2020 2020 2020 5c77  ".            \w
-00032630: 6974 680a 2020 2020 2020 2020 2020 2020  ith.            
-00032640: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-00032650: 2020 5c6f 7665 7272 6964 6520 4e6f 7465    \override Note
-00032660: 4865 6164 2e63 6f6c 6f72 203d 2023 7265  Head.color = #re
-00032670: 640a 2020 2020 2020 2020 2020 2020 7d0a  d.            }.
-00032680: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-00032690: 2020 2020 2020 2020 2020 2020 2020 5c76                \v
-000326a0: 6f69 6365 4f6e 650a 2020 2020 2020 2020  oiceOne.        
-000326b0: 2020 2020 2020 2020 6527 2738 0a20 2020          e''8.   
-000326c0: 2020 2020 2020 2020 2020 2020 2064 2727               d''
-000326d0: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
-000326e0: 2020 3c3c 0a20 2020 2020 2020 2020 2020    <<.           
-000326f0: 2020 2020 2020 2020 205c 636f 6e74 6578           \contex
-00032700: 7420 566f 6963 6520 3d20 2252 6564 5f56  t Voice = "Red_V
-00032710: 6f69 6365 220a 2020 2020 2020 2020 2020  oice".          
-00032720: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-00032730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032740: 2020 2020 6327 2734 0a20 2020 2020 2020      c''4.       
-00032750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032760: 205c 6d66 0a20 2020 2020 2020 2020 2020   \mf.           
-00032770: 2020 2020 2020 2020 2020 2020 2062 2734               b'4
-00032780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032790: 2020 2020 2020 2020 2063 2727 380a 2020           c''8.  
-000327a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000327b0: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-000327c0: 2020 2020 2020 2020 5c63 6f6e 7465 7874          \context
-000327d0: 2056 6f69 6365 203d 2022 426c 7565 5f56   Voice = "Blue_V
-000327e0: 6f69 6365 220a 2020 2020 2020 2020 2020  oice".          
-000327f0: 2020 2020 2020 2020 2020 5c77 6974 680a            \with.
-00032800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032810: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-00032820: 2020 2020 2020 2020 2020 2020 2020 5c6f                \o
-00032830: 7665 7272 6964 6520 4e6f 7465 4865 6164  verride NoteHead
-00032840: 2e63 6f6c 6f72 203d 2023 626c 7565 0a20  .color = #blue. 
-00032850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032860: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00032870: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00032880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032890: 2020 205c 766f 6963 6554 776f 0a20 2020     \voiceTwo.   
-000328a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000328b0: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
-000328c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000328d0: 205c 700a 2020 2020 2020 2020 2020 2020   \p.            
-000328e0: 2020 2020 2020 2020 2020 2020 6627 340a              f'4.
-000328f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032900: 2020 2020 2020 2020 6527 380a 2020 2020          e'8.    
-00032910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032920: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
-00032930: 2020 3e3e 0a20 2020 2020 2020 2020 2020    >>.           
-00032940: 2020 2020 2064 2727 380a 2020 2020 2020       d''8.      
-00032950: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
-00032960: 203e 3e3e 2066 6f72 206c 6561 6620 696e   >>> for leaf in
-00032970: 2061 626a 6164 2e69 7465 7261 7465 2e6c   abjad.iterate.l
-00032980: 6561 7665 7328 6f75 7465 725f 7265 645f  eaves(outer_red_
-00032990: 766f 6963 6529 3a0a 2020 2020 2020 2020  voice):.        
-000329a0: 2e2e 2e20 2020 2020 6479 6e61 6d69 6320  ...     dynamic 
-000329b0: 3d20 6162 6a61 642e 6765 742e 6566 6665  = abjad.get.effe
-000329c0: 6374 6976 6528 6c65 6166 2c20 6162 6a61  ctive(leaf, abja
-000329d0: 642e 4479 6e61 6d69 6329 0a20 2020 2020  d.Dynamic).     
-000329e0: 2020 202e 2e2e 2020 2020 2070 7269 6e74     ...     print
-000329f0: 286c 6561 662c 2064 796e 616d 6963 290a  (leaf, dynamic).
-00032a00: 2020 2020 2020 2020 2e2e 2e0a 2020 2020          ....    
-00032a10: 2020 2020 4e6f 7465 2822 6527 2738 2229      Note("e''8")
-00032a20: 204e 6f6e 650a 2020 2020 2020 2020 4e6f   None.        No
-00032a30: 7465 2822 6427 2738 2229 204e 6f6e 650a  te("d''8") None.
-00032a40: 2020 2020 2020 2020 4e6f 7465 2822 6327          Note("c'
-00032a50: 2734 2229 2044 796e 616d 6963 286e 616d  '4") Dynamic(nam
-00032a60: 653d 276d 6627 2c20 636f 6d6d 616e 643d  e='mf', command=
-00032a70: 4e6f 6e65 2c20 666f 726d 6174 5f68 6169  None, format_hai
-00032a80: 7270 696e 5f73 746f 703d 4661 6c73 652c  rpin_stop=False,
-00032a90: 2068 6964 653d 4661 6c73 652c 206c 6561   hide=False, lea
-00032aa0: 6b3d 4661 6c73 652c 206e 616d 655f 6973  k=False, name_is
-00032ab0: 5f74 6578 7475 616c 3d46 616c 7365 2c20  _textual=False, 
-00032ac0: 6f72 6469 6e61 6c3d 3129 0a20 2020 2020  ordinal=1).     
-00032ad0: 2020 204e 6f74 6528 2262 2734 2229 2044     Note("b'4") D
-00032ae0: 796e 616d 6963 286e 616d 653d 276d 6627  ynamic(name='mf'
-00032af0: 2c20 636f 6d6d 616e 643d 4e6f 6e65 2c20  , command=None, 
-00032b00: 666f 726d 6174 5f68 6169 7270 696e 5f73  format_hairpin_s
-00032b10: 746f 703d 4661 6c73 652c 2068 6964 653d  top=False, hide=
-00032b20: 4661 6c73 652c 206c 6561 6b3d 4661 6c73  False, leak=Fals
-00032b30: 652c 206e 616d 655f 6973 5f74 6578 7475  e, name_is_textu
-00032b40: 616c 3d46 616c 7365 2c20 6f72 6469 6e61  al=False, ordina
-00032b50: 6c3d 3129 0a20 2020 2020 2020 204e 6f74  l=1).        Not
-00032b60: 6528 2263 2727 3822 2920 4479 6e61 6d69  e("c''8") Dynami
-00032b70: 6328 6e61 6d65 3d27 6d66 272c 2063 6f6d  c(name='mf', com
-00032b80: 6d61 6e64 3d4e 6f6e 652c 2066 6f72 6d61  mand=None, forma
-00032b90: 745f 6861 6972 7069 6e5f 7374 6f70 3d46  t_hairpin_stop=F
-00032ba0: 616c 7365 2c20 6869 6465 3d46 616c 7365  alse, hide=False
-00032bb0: 2c20 6c65 616b 3d46 616c 7365 2c20 6e61  , leak=False, na
-00032bc0: 6d65 5f69 735f 7465 7874 7561 6c3d 4661  me_is_textual=Fa
-00032bd0: 6c73 652c 206f 7264 696e 616c 3d31 290a  lse, ordinal=1).
-00032be0: 2020 2020 2020 2020 4e6f 7465 2822 6527          Note("e'
-00032bf0: 3422 2920 4479 6e61 6d69 6328 6e61 6d65  4") Dynamic(name
-00032c00: 3d27 7027 2c20 636f 6d6d 616e 643d 4e6f  ='p', command=No
-00032c10: 6e65 2c20 666f 726d 6174 5f68 6169 7270  ne, format_hairp
-00032c20: 696e 5f73 746f 703d 4661 6c73 652c 2068  in_stop=False, h
-00032c30: 6964 653d 4661 6c73 652c 206c 6561 6b3d  ide=False, leak=
-00032c40: 4661 6c73 652c 206e 616d 655f 6973 5f74  False, name_is_t
-00032c50: 6578 7475 616c 3d46 616c 7365 2c20 6f72  extual=False, or
-00032c60: 6469 6e61 6c3d 2d32 290a 2020 2020 2020  dinal=-2).      
-00032c70: 2020 4e6f 7465 2822 6627 3422 2920 4479    Note("f'4") Dy
-00032c80: 6e61 6d69 6328 6e61 6d65 3d27 7027 2c20  namic(name='p', 
-00032c90: 636f 6d6d 616e 643d 4e6f 6e65 2c20 666f  command=None, fo
-00032ca0: 726d 6174 5f68 6169 7270 696e 5f73 746f  rmat_hairpin_sto
-00032cb0: 703d 4661 6c73 652c 2068 6964 653d 4661  p=False, hide=Fa
-00032cc0: 6c73 652c 206c 6561 6b3d 4661 6c73 652c  lse, leak=False,
-00032cd0: 206e 616d 655f 6973 5f74 6578 7475 616c   name_is_textual
-00032ce0: 3d46 616c 7365 2c20 6f72 6469 6e61 6c3d  =False, ordinal=
-00032cf0: 2d32 290a 2020 2020 2020 2020 4e6f 7465  -2).        Note
-00032d00: 2822 6527 3822 2920 4479 6e61 6d69 6328  ("e'8") Dynamic(
-00032d10: 6e61 6d65 3d27 7027 2c20 636f 6d6d 616e  name='p', comman
-00032d20: 643d 4e6f 6e65 2c20 666f 726d 6174 5f68  d=None, format_h
-00032d30: 6169 7270 696e 5f73 746f 703d 4661 6c73  airpin_stop=Fals
-00032d40: 652c 2068 6964 653d 4661 6c73 652c 206c  e, hide=False, l
-00032d50: 6561 6b3d 4661 6c73 652c 206e 616d 655f  eak=False, name_
-00032d60: 6973 5f74 6578 7475 616c 3d46 616c 7365  is_textual=False
-00032d70: 2c20 6f72 6469 6e61 6c3d 2d32 290a 2020  , ordinal=-2).  
-00032d80: 2020 2020 2020 4e6f 7465 2822 6427 2738        Note("d''8
-00032d90: 2229 2044 796e 616d 6963 286e 616d 653d  ") Dynamic(name=
-00032da0: 276d 6627 2c20 636f 6d6d 616e 643d 4e6f  'mf', command=No
-00032db0: 6e65 2c20 666f 726d 6174 5f68 6169 7270  ne, format_hairp
-00032dc0: 696e 5f73 746f 703d 4661 6c73 652c 2068  in_stop=False, h
-00032dd0: 6964 653d 4661 6c73 652c 206c 6561 6b3d  ide=False, leak=
-00032de0: 4661 6c73 652c 206e 616d 655f 6973 5f74  False, name_is_t
-00032df0: 6578 7475 616c 3d46 616c 7365 2c20 6f72  extual=False, or
-00032e00: 6469 6e61 6c3d 3129 0a0a 2020 2020 2e2e  dinal=1)..    ..
-00032e10: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
-00032e20: 616d 706c 650a 0a20 2020 2020 2020 2053  ample..        S
-00032e30: 656c 6563 7473 206c 616e 6775 6167 653a  elects language:
-00032e40: 0a0a 2020 2020 2020 2020 3e3e 3e20 6162  ..        >>> ab
-00032e50: 6a61 642e 566f 6963 6528 2264 6f27 3820  jad.Voice("do'8 
-00032e60: 7265 2720 6d69 2720 6661 2722 2c20 6c61  re' mi' fa'", la
-00032e70: 6e67 7561 6765 3d22 6672 616e c3a7 6169  nguage="fran..ai
-00032e80: 7322 290a 2020 2020 2020 2020 566f 6963  s").        Voic
-00032e90: 6528 2263 2738 2064 2738 2065 2738 2066  e("c'8 d'8 e'8 f
-00032ea0: 2738 2229 0a0a 2020 2020 2222 220a 0a20  '8")..    """.. 
-00032eb0: 2020 2023 2323 2043 4c41 5353 2056 4152     ### CLASS VAR
-00032ec0: 4941 424c 4553 2023 2323 0a0a 2020 2020  IABLES ###..    
-00032ed0: 5f5f 646f 6375 6d65 6e74 6174 696f 6e5f  __documentation_
-00032ee0: 7365 6374 696f 6e5f 5f20 3d20 2243 6f6e  section__ = "Con
-00032ef0: 7465 7874 7322 0a0a 2020 2020 5f5f 736c  texts"..    __sl
-00032f00: 6f74 735f 5f20 3d20 2829 0a0a 2020 2020  ots__ = ()..    
-00032f10: 5f64 6566 6175 6c74 5f6c 696c 7970 6f6e  _default_lilypon
-00032f20: 645f 7479 7065 203d 2022 566f 6963 6522  d_type = "Voice"
-00032f30: 0a0a 2020 2020 2323 2320 494e 4954 4941  ..    ### INITIA
-00032f40: 4c49 5a45 5220 2323 230a 0a20 2020 2023  LIZER ###..    #
-00032f50: 2054 4f44 4f3a 206d 616b 6520 6b65 7977   TODO: make keyw
-00032f60: 6f72 6473 206d 616e 6461 746f 7279 0a20  ords mandatory. 
-00032f70: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00032f80: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-00032f90: 2020 2020 2020 2063 6f6d 706f 6e65 6e74         component
-00032fa0: 733d 4e6f 6e65 2c0a 2020 2020 2020 2020  s=None,.        
-00032fb0: 6c69 6c79 706f 6e64 5f74 7970 653a 2073  lilypond_type: s
-00032fc0: 7472 203d 2022 566f 6963 6522 2c0a 2020  tr = "Voice",.  
-00032fd0: 2020 2020 2020 7369 6d75 6c74 616e 656f        simultaneo
-00032fe0: 7573 3a20 626f 6f6c 203d 2046 616c 7365  us: bool = False
-00032ff0: 2c0a 2020 2020 2020 2020 6e61 6d65 3a20  ,.        name: 
-00033000: 7374 7220 3d20 4e6f 6e65 2c0a 2020 2020  str = None,.    
-00033010: 2020 2020 7461 673a 205f 7461 672e 5461      tag: _tag.Ta
-00033020: 6720 3d20 4e6f 6e65 2c0a 2020 2020 2020  g = None,.      
-00033030: 2020 2a2c 0a20 2020 2020 2020 206c 616e    *,.        lan
-00033040: 6775 6167 653a 2073 7472 203d 2022 656e  guage: str = "en
-00033050: 676c 6973 6822 2c0a 2020 2020 2920 2d3e  glish",.    ) ->
-00033060: 204e 6f6e 653a 0a20 2020 2020 2020 2043   None:.        C
-00033070: 6f6e 7465 7874 2e5f 5f69 6e69 745f 5f28  ontext.__init__(
-00033080: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00033090: 662c 0a20 2020 2020 2020 2020 2020 2063  f,.            c
-000330a0: 6f6d 706f 6e65 6e74 733d 636f 6d70 6f6e  omponents=compon
-000330b0: 656e 7473 2c0a 2020 2020 2020 2020 2020  ents,.          
-000330c0: 2020 6c61 6e67 7561 6765 3d6c 616e 6775    language=langu
-000330d0: 6167 652c 0a20 2020 2020 2020 2020 2020  age,.           
-000330e0: 206c 696c 7970 6f6e 645f 7479 7065 3d6c   lilypond_type=l
-000330f0: 696c 7970 6f6e 645f 7479 7065 2c0a 2020  ilypond_type,.  
-00033100: 2020 2020 2020 2020 2020 7369 6d75 6c74            simult
-00033110: 616e 656f 7573 3d73 696d 756c 7461 6e65  aneous=simultane
-00033120: 6f75 732c 0a20 2020 2020 2020 2020 2020  ous,.           
-00033130: 206e 616d 653d 6e61 6d65 2c0a 2020 2020   name=name,.    
-00033140: 2020 2020 2020 2020 7461 673d 7461 672c          tag=tag,
-00033150: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00033160: 2323 2320 5055 424c 4943 2050 524f 5045  ### PUBLIC PROPE
-00033170: 5254 4945 5320 2323 230a 0a20 2020 2040  RTIES ###..    @
-00033180: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
-00033190: 2074 6167 2873 656c 6629 202d 3e20 5f74   tag(self) -> _t
-000331a0: 6167 2e54 6167 207c 204e 6f6e 653a 0a20  ag.Tag | None:. 
-000331b0: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
-000331c0: 2020 2020 4765 7473 2074 6167 2e0a 0a20      Gets tag... 
-000331d0: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
-000331e0: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
-000331f0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00033200: 766f 6963 6520 3d20 6162 6a61 642e 566f  voice = abjad.Vo
-00033210: 6963 6528 2263 2734 2064 2720 6527 2066  ice("c'4 d' e' f
-00033220: 2722 2c20 7461 673d 6162 6a61 642e 5461  '", tag=abjad.Ta
-00033230: 6728 2752 4544 2729 290a 2020 2020 2020  g('RED')).      
-00033240: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
-00033250: 7368 6f77 2876 6f69 6365 2920 2320 646f  show(voice) # do
-00033260: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
-00033270: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
-00033280: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
-00033290: 7970 6f6e 6428 766f 6963 652c 2074 6167  ypond(voice, tag
-000332a0: 733d 5472 7565 290a 2020 2020 2020 2020  s=True).        
-000332b0: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
-000332c0: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
-000332d0: 2020 2521 2052 4544 0a20 2020 2020 2020    %! RED.       
-000332e0: 2020 2020 205c 6e65 7720 566f 6963 650a       \new Voice.
-000332f0: 2020 2020 2020 2020 2020 2020 2521 2052              %! R
-00033300: 4544 0a20 2020 2020 2020 2020 2020 207b  ED.            {
-00033310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00033320: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
-00033330: 2020 2020 2064 2734 0a20 2020 2020 2020       d'4.       
-00033340: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
-00033350: 2020 2020 2020 2020 2020 2020 2066 2734               f'4
-00033360: 0a20 2020 2020 2020 2020 2020 2025 2120  .            %! 
-00033370: 5245 440a 2020 2020 2020 2020 2020 2020  RED.            
-00033380: 7d0a 0a20 2020 2020 2020 2022 2222 0a20  }..        """. 
-00033390: 2020 2020 2020 2072 6574 7572 6e20 7375         return su
-000333a0: 7065 7228 292e 7461 670a                 per().tag.
+0002e9e0: 742e 746f 6767 6c65 5f70 726f 6c61 7469  t.toggle_prolati
+0002e9f0: 6f6e 2829 0a20 2020 2020 2020 2020 2020  on().           
+0002ea00: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+0002ea10: 7475 706c 6574 2920 2320 646f 6374 6573  tuplet) # doctes
+0002ea20: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+0002ea30: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
+0002ea40: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ea50: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
+0002ea60: 626a 6164 2e6c 696c 7970 6f6e 6428 7475  bjad.lilypond(tu
+0002ea70: 706c 6574 290a 2020 2020 2020 2020 2020  plet).          
+0002ea80: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+0002ea90: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+0002eaa0: 2020 2020 2020 2020 5c74 696d 6573 2032          \times 2
+0002eab0: 2f33 0a20 2020 2020 2020 2020 2020 2020  /3.             
+0002eac0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+0002ead0: 2020 2020 2020 2020 2063 2734 0a20 2020           c'4.   
+0002eae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eaf0: 2064 2734 0a20 2020 2020 2020 2020 2020   d'4.           
+0002eb00: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
+0002eb10: 2020 2020 2020 2020 2020 2020 207d 0a0a               }..
+0002eb20: 2020 2020 2020 2020 2020 2020 4d75 6c74              Mult
+0002eb30: 6970 6c69 6573 2074 6865 2077 7269 7474  iplies the writt
+0002eb40: 656e 2064 7572 6174 696f 6e20 6f66 2074  en duration of t
+0002eb50: 6865 206c 6561 7665 7320 696e 2074 7570  he leaves in tup
+0002eb60: 6c65 740a 2020 2020 2020 2020 2020 2020  let.            
+0002eb70: 6279 2074 6865 206c 6561 7374 2070 6f77  by the least pow
+0002eb80: 6572 206f 6620 6060 3260 6020 6e65 6365  er of ``2`` nece
+0002eb90: 7373 6172 7920 746f 2064 696d 696e 7368  ssary to diminsh
+0002eba0: 6564 2074 7570 6c65 742e 0a0a 2020 2020  ed tuplet...    
+0002ebb0: 2020 2020 2e2e 2020 636f 6e74 6169 6e65      ..  containe
+0002ebc0: 723a 3a20 6578 616d 706c 650a 0a20 2020  r:: example..   
+0002ebd0: 2020 2020 2020 2020 2043 6861 6e67 6573           Changes
+0002ebe0: 2064 696d 696e 6973 6865 6420 7475 706c   diminished tupl
+0002ebf0: 6574 2074 6f20 6175 676d 656e 7465 643a  et to augmented:
+0002ec00: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0002ec10: 3e20 7475 706c 6574 203d 2061 626a 6164  > tuplet = abjad
+0002ec20: 2e54 7570 6c65 7428 2832 2c20 3329 2c20  .Tuplet((2, 3), 
+0002ec30: 2263 2734 2064 2734 2065 2734 2229 0a20  "c'4 d'4 e'4"). 
+0002ec40: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+0002ec50: 626a 6164 2e73 686f 7728 7475 706c 6574  bjad.show(tuplet
+0002ec60: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
+0002ec70: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
+0002ec80: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+0002ec90: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002eca0: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
+0002ecb0: 696c 7970 6f6e 6428 7475 706c 6574 290a  ilypond(tuplet).
+0002ecc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ecd0: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
+0002ece0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002ecf0: 2020 5c74 696d 6573 2032 2f33 0a20 2020    \times 2/3.   
+0002ed00: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+0002ed10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ed20: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
+0002ed30: 2020 2020 2020 2020 2020 2064 2734 0a20             d'4. 
+0002ed40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ed50: 2020 2065 2734 0a20 2020 2020 2020 2020     e'4.         
+0002ed60: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
+0002ed70: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
+0002ed80: 2e74 6f67 676c 655f 7072 6f6c 6174 696f  .toggle_prolatio
+0002ed90: 6e28 290a 2020 2020 2020 2020 2020 2020  n().            
+0002eda0: 3e3e 3e20 6162 6a61 642e 7368 6f77 2874  >>> abjad.show(t
+0002edb0: 7570 6c65 7429 2023 2064 6f63 7465 7374  uplet) # doctest
+0002edc0: 3a20 2b53 4b49 500a 0a20 2020 2020 2020  : +SKIP..       
+0002edd0: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
+0002ede0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002edf0: 203e 3e3e 2073 7472 696e 6720 3d20 6162   >>> string = ab
+0002ee00: 6a61 642e 6c69 6c79 706f 6e64 2874 7570  jad.lilypond(tup
+0002ee10: 6c65 7429 0a20 2020 2020 2020 2020 2020  let).           
+0002ee20: 2020 2020 203e 3e3e 2070 7269 6e74 2873       >>> print(s
+0002ee30: 7472 696e 6729 0a20 2020 2020 2020 2020  tring).         
+0002ee40: 2020 2020 2020 205c 7477 6561 6b20 7465         \tweak te
+0002ee50: 7874 2023 7475 706c 6574 2d6e 756d 6265  xt #tuplet-numbe
+0002ee60: 723a 3a63 616c 632d 6672 6163 7469 6f6e  r::calc-fraction
+0002ee70: 2d74 6578 740a 2020 2020 2020 2020 2020  -text.          
+0002ee80: 2020 2020 2020 5c74 696d 6573 2034 2f33        \times 4/3
+0002ee90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002eea0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+0002eeb0: 2020 2020 2020 2063 2738 0a20 2020 2020         c'8.     
+0002eec0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0002eed0: 2738 0a20 2020 2020 2020 2020 2020 2020  '8.             
+0002eee0: 2020 2020 2020 2065 2738 0a20 2020 2020         e'8.     
+0002eef0: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
+0002ef00: 2020 2020 2020 2020 2020 4469 7669 6465            Divide
+0002ef10: 7320 7468 6520 7772 6974 7465 6e20 6475  s the written du
+0002ef20: 7261 7469 6f6e 206f 6620 7468 6520 6c65  ration of the le
+0002ef30: 6176 6573 2069 6e20 7475 706c 6574 0a20  aves in tuplet. 
+0002ef40: 2020 2020 2020 2020 2020 2062 7920 7468             by th
+0002ef50: 6520 6c65 6173 7420 706f 7765 7220 6f66  e least power of
+0002ef60: 2060 6032 6060 206e 6563 6573 7361 7279   ``2`` necessary
+0002ef70: 2074 6f20 6469 6d69 6e73 6865 6420 7475   to diminshed tu
+0002ef80: 706c 6574 2e0a 0a20 2020 2020 2020 202e  plet...        .
+0002ef90: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+0002efa0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+0002efb0: 2020 2020 5245 4752 4553 5349 4f4e 2e20      REGRESSION. 
+0002efc0: 4c65 6176 6573 2074 7269 7669 616c 2074  Leaves trivial t
+0002efd0: 7570 6c65 7473 2075 6e63 6861 6e67 6564  uplets unchanged
+0002efe0: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
+0002eff0: 3e3e 2074 7570 6c65 7420 3d20 6162 6a61  >> tuplet = abja
+0002f000: 642e 5475 706c 6574 2831 2c20 2263 2734  d.Tuplet(1, "c'4
+0002f010: 2064 2734 2065 2734 2229 0a20 2020 2020   d'4 e'4").     
+0002f020: 2020 2020 2020 203e 3e3e 2061 626a 6164         >>> abjad
+0002f030: 2e73 686f 7728 7475 706c 6574 2920 2320  .show(tuplet) # 
+0002f040: 646f 6374 6573 743a 202b 534b 4950 0a0a  doctest: +SKIP..
+0002f050: 2020 2020 2020 2020 2020 2020 2e2e 2020              ..  
+0002f060: 646f 6373 3a3a 0a0a 2020 2020 2020 2020  docs::..        
+0002f070: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+0002f080: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+0002f090: 6f6e 6428 7475 706c 6574 290a 2020 2020  ond(tuplet).    
+0002f0a0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002f0b0: 7072 696e 7428 7374 7269 6e67 290a 2020  print(string).  
+0002f0c0: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+0002f0d0: 7765 616b 2074 6578 7420 2374 7570 6c65  weak text #tuple
+0002f0e0: 742d 6e75 6d62 6572 3a3a 6361 6c63 2d66  t-number::calc-f
+0002f0f0: 7261 6374 696f 6e2d 7465 7874 0a20 2020  raction-text.   
+0002f100: 2020 2020 2020 2020 2020 2020 205c 7469               \ti
+0002f110: 6d65 7320 312f 310a 2020 2020 2020 2020  mes 1/1.        
+0002f120: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0002f130: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+0002f140: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0002f150: 2020 2020 2020 6427 340a 2020 2020 2020        d'4.      
+0002f160: 2020 2020 2020 2020 2020 2020 2020 6527                e'
+0002f170: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0002f180: 2020 7d0a 0a20 2020 2020 2020 2020 2020    }..           
+0002f190: 203e 3e3e 2074 7570 6c65 742e 746f 6767   >>> tuplet.togg
+0002f1a0: 6c65 5f70 726f 6c61 7469 6f6e 2829 0a20  le_prolation(). 
+0002f1b0: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+0002f1c0: 626a 6164 2e73 686f 7728 7475 706c 6574  bjad.show(tuplet
+0002f1d0: 2920 2320 646f 6374 6573 743a 202b 534b  ) # doctest: +SK
+0002f1e0: 4950 0a0a 2020 2020 2020 2020 2020 2020  IP..            
+0002f1f0: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+0002f200: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002f210: 7374 7269 6e67 203d 2061 626a 6164 2e6c  string = abjad.l
+0002f220: 696c 7970 6f6e 6428 7475 706c 6574 290a  ilypond(tuplet).
+0002f230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f240: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
+0002f250: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002f260: 2020 5c74 7765 616b 2074 6578 7420 2374    \tweak text #t
+0002f270: 7570 6c65 742d 6e75 6d62 6572 3a3a 6361  uplet-number::ca
+0002f280: 6c63 2d66 7261 6374 696f 6e2d 7465 7874  lc-fraction-text
+0002f290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f2a0: 205c 7469 6d65 7320 312f 310a 2020 2020   \times 1/1.    
+0002f2b0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+0002f2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f2d0: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
+0002f2e0: 2020 2020 2020 2020 2020 6427 340a 2020            d'4.  
+0002f2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f300: 2020 6527 340a 2020 2020 2020 2020 2020    e'4.          
+0002f310: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
+0002f320: 2044 6f65 7320 6e6f 7420 7965 7420 776f   Does not yet wo
+0002f330: 726b 2077 6974 6820 6e65 7374 6564 2074  rk with nested t
+0002f340: 7570 6c65 7473 2e0a 2020 2020 2020 2020  uplets..        
+0002f350: 2222 220a 2020 2020 2020 2020 6966 2073  """.        if s
+0002f360: 656c 662e 6469 6d69 6e75 7469 6f6e 2829  elf.diminution()
+0002f370: 3a0a 2020 2020 2020 2020 2020 2020 7768  :.            wh
+0002f380: 696c 6520 7365 6c66 2e64 696d 696e 7574  ile self.diminut
+0002f390: 696f 6e28 293a 0a20 2020 2020 2020 2020  ion():.         
+0002f3a0: 2020 2020 2020 2073 656c 662e 6d75 6c74         self.mult
+0002f3b0: 6970 6c69 6572 202a 3d20 320a 2020 2020  iplier *= 2.    
+0002f3c0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0002f3d0: 636f 6d70 6f6e 656e 7420 696e 2073 656c  component in sel
+0002f3e0: 662e 5f67 6574 5f73 7562 7472 6565 2829  f._get_subtree()
+0002f3f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002f400: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0002f410: 6e63 6528 636f 6d70 6f6e 656e 742c 204c  nce(component, L
+0002f420: 6561 6629 3a0a 2020 2020 2020 2020 2020  eaf):.          
+0002f430: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0002f440: 6d70 6f6e 656e 742e 7772 6974 7465 6e5f  mponent.written_
+0002f450: 6475 7261 7469 6f6e 202f 3d20 320a 2020  duration /= 2.  
+0002f460: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
+0002f470: 6175 676d 656e 7461 7469 6f6e 2829 3a0a  augmentation():.
+0002f480: 2020 2020 2020 2020 2020 2020 7768 696c              whil
+0002f490: 6520 6e6f 7420 7365 6c66 2e64 696d 696e  e not self.dimin
+0002f4a0: 7574 696f 6e28 293a 0a20 2020 2020 2020  ution():.       
+0002f4b0: 2020 2020 2020 2020 2073 656c 662e 6d75           self.mu
+0002f4c0: 6c74 6970 6c69 6572 202f 3d20 320a 2020  ltiplier /= 2.  
+0002f4d0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0002f4e0: 7220 636f 6d70 6f6e 656e 7420 696e 2073  r component in s
+0002f4f0: 656c 662e 5f67 6574 5f73 7562 7472 6565  elf._get_subtree
+0002f500: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+0002f510: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0002f520: 7461 6e63 6528 636f 6d70 6f6e 656e 742c  tance(component,
+0002f530: 204c 6561 6629 3a0a 2020 2020 2020 2020   Leaf):.        
+0002f540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f550: 636f 6d70 6f6e 656e 742e 7772 6974 7465  component.writte
+0002f560: 6e5f 6475 7261 7469 6f6e 202a 3d20 320a  n_duration *= 2.
+0002f570: 0a20 2020 2064 6566 2074 7269 7669 616c  .    def trivial
+0002f580: 2873 656c 6629 202d 3e20 626f 6f6c 3a0a  (self) -> bool:.
+0002f590: 2020 2020 2020 2020 7222 2222 0a20 2020          r""".   
+0002f5a0: 2020 2020 2049 7320 7472 7565 2077 6865       Is true whe
+0002f5b0: 6e20 7475 706c 6574 206d 756c 7469 706c  n tuplet multipl
+0002f5c0: 6965 7220 6973 2065 7175 616c 2074 6f20  ier is equal to 
+0002f5d0: 6060 3160 6020 616e 6420 6e6f 206d 756c  ``1`` and no mul
+0002f5e0: 7469 706c 6965 7273 0a20 2020 2020 2020  tipliers.       
+0002f5f0: 2061 7474 6163 6820 746f 2061 6e79 206c   attach to any l
+0002f600: 6561 7665 7320 696e 2074 7570 6c65 742e  eaves in tuplet.
+0002f610: 0a0a 2020 2020 2020 2020 2e2e 2020 636f  ..        ..  co
+0002f620: 6e74 6169 6e65 723a 3a20 6578 616d 706c  ntainer:: exampl
+0002f630: 650a 0a20 2020 2020 2020 2020 2020 203e  e..            >
+0002f640: 3e3e 2074 7570 6c65 7420 3d20 6162 6a61  >> tuplet = abja
+0002f650: 642e 5475 706c 6574 2828 312c 2031 292c  d.Tuplet((1, 1),
+0002f660: 2022 6327 3820 6427 3820 6527 3822 290a   "c'8 d'8 e'8").
+0002f670: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0002f680: 6162 6a61 642e 7368 6f77 2874 7570 6c65  abjad.show(tuple
+0002f690: 7429 2023 2064 6f63 7465 7374 3a20 2b53  t) # doctest: +S
+0002f6a0: 4b49 500a 0a20 2020 2020 2020 2020 2020  KIP..           
+0002f6b0: 202e 2e20 2064 6f63 733a 3a0a 0a20 2020   ..  docs::..   
+0002f6c0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+0002f6d0: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
+0002f6e0: 6c69 6c79 706f 6e64 2874 7570 6c65 7429  lilypond(tuplet)
+0002f6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f700: 203e 3e3e 2070 7269 6e74 2873 7472 696e   >>> print(strin
+0002f710: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
+0002f720: 2020 205c 7477 6561 6b20 7465 7874 2023     \tweak text #
+0002f730: 7475 706c 6574 2d6e 756d 6265 723a 3a63  tuplet-number::c
+0002f740: 616c 632d 6672 6163 7469 6f6e 2d74 6578  alc-fraction-tex
+0002f750: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+0002f760: 2020 5c74 696d 6573 2031 2f31 0a20 2020    \times 1/1.   
+0002f770: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+0002f780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f790: 2020 2063 2738 0a20 2020 2020 2020 2020     c'8.         
+0002f7a0: 2020 2020 2020 2020 2020 2064 2738 0a20             d'8. 
+0002f7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f7c0: 2020 2065 2738 0a20 2020 2020 2020 2020     e'8.         
+0002f7d0: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
+0002f7e0: 2020 2020 2020 3e3e 3e20 7475 706c 6574        >>> tuplet
+0002f7f0: 2e74 7269 7669 616c 2829 0a20 2020 2020  .trivial().     
+0002f800: 2020 2020 2020 2054 7275 650a 0a20 2020         True..   
+0002f810: 2020 2020 202e 2e20 2063 6f6e 7461 696e       ..  contain
+0002f820: 6572 3a3a 2065 7861 6d70 6c65 0a0a 2020  er:: example..  
+0002f830: 2020 2020 2020 2020 2020 5475 706c 6574            Tuplet
+0002f840: 2069 7320 6e6f 7420 7472 6976 6961 6c20   is not trivial 
+0002f850: 7768 656e 206d 756c 7469 706c 6965 7273  when multipliers
+0002f860: 2061 7474 6163 6820 746f 2074 7570 6c65   attach to tuple
+0002f870: 7420 6c65 6176 6573 3a0a 0a20 2020 2020  t leaves:..     
+0002f880: 2020 2020 2020 203e 3e3e 2074 7570 6c65         >>> tuple
+0002f890: 7420 3d20 6162 6a61 642e 5475 706c 6574  t = abjad.Tuplet
+0002f8a0: 2828 312c 2031 292c 2022 6327 3820 6427  ((1, 1), "c'8 d'
+0002f8b0: 3820 6527 3822 290a 2020 2020 2020 2020  8 e'8").        
+0002f8c0: 2020 2020 3e3e 3e20 7475 706c 6574 5b30      >>> tuplet[0
+0002f8d0: 5d2e 6d75 6c74 6970 6c69 6572 203d 2028  ].multiplier = (
+0002f8e0: 332c 2032 290a 2020 2020 2020 2020 2020  3, 2).          
+0002f8f0: 2020 3e3e 3e20 7475 706c 6574 5b2d 315d    >>> tuplet[-1]
+0002f900: 2e6d 756c 7469 706c 6965 7220 3d20 2831  .multiplier = (1
+0002f910: 2c20 3229 0a20 2020 2020 2020 2020 2020  , 2).           
+0002f920: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+0002f930: 7475 706c 6574 2920 2320 646f 6374 6573  tuplet) # doctes
+0002f940: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+0002f950: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
+0002f960: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f970: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
+0002f980: 626a 6164 2e6c 696c 7970 6f6e 6428 7475  bjad.lilypond(tu
+0002f990: 706c 6574 290a 2020 2020 2020 2020 2020  plet).          
+0002f9a0: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+0002f9b0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+0002f9c0: 2020 2020 2020 2020 5c74 7765 616b 2074          \tweak t
+0002f9d0: 6578 7420 2374 7570 6c65 742d 6e75 6d62  ext #tuplet-numb
+0002f9e0: 6572 3a3a 6361 6c63 2d66 7261 6374 696f  er::calc-fractio
+0002f9f0: 6e2d 7465 7874 0a20 2020 2020 2020 2020  n-text.         
+0002fa00: 2020 2020 2020 205c 7469 6d65 7320 312f         \times 1/
+0002fa10: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+0002fa20: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+0002fa30: 2020 2020 2020 2020 6327 3820 2a20 332f          c'8 * 3/
+0002fa40: 320a 2020 2020 2020 2020 2020 2020 2020  2.              
+0002fa50: 2020 2020 2020 6427 380a 2020 2020 2020        d'8.      
+0002fa60: 2020 2020 2020 2020 2020 2020 2020 6527                e'
+0002fa70: 3820 2a20 312f 320a 2020 2020 2020 2020  8 * 1/2.        
+0002fa80: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
+0002fa90: 2020 2020 2020 203e 3e3e 2074 7570 6c65         >>> tuple
+0002faa0: 742e 7472 6976 6961 6c28 290a 2020 2020  t.trivial().    
+0002fab0: 2020 2020 2020 2020 4661 6c73 650a 0a20          False.. 
+0002fac0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0002fad0: 2020 2069 6620 7365 6c66 2e6d 756c 7469     if self.multi
+0002fae0: 706c 6965 7220 213d 2031 3a0a 2020 2020  plier != 1:.    
+0002faf0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+0002fb00: 616c 7365 0a20 2020 2020 2020 2066 6f72  alse.        for
+0002fb10: 2063 6f6d 706f 6e65 6e74 2069 6e20 7365   component in se
+0002fb20: 6c66 3a0a 2020 2020 2020 2020 2020 2020  lf:.            
+0002fb30: 6966 2069 7369 6e73 7461 6e63 6528 636f  if isinstance(co
+0002fb40: 6d70 6f6e 656e 742c 2054 7570 6c65 7429  mponent, Tuplet)
+0002fb50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002fb60: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
+0002fb70: 2020 2020 2020 2065 6c69 6620 6861 7361         elif hasa
+0002fb80: 7474 7228 636f 6d70 6f6e 656e 742c 2022  ttr(component, "
+0002fb90: 7772 6974 7465 6e5f 6475 7261 7469 6f6e  written_duration
+0002fba0: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
+0002fbb0: 2020 2020 6966 2063 6f6d 706f 6e65 6e74      if component
+0002fbc0: 2e6d 756c 7469 706c 6965 7220 6973 206e  .multiplier is n
+0002fbd0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0002fbe0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0002fbf0: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+0002fc00: 2020 7265 7475 726e 2054 7275 650a 0a20    return True.. 
+0002fc10: 2020 2064 6566 2074 7269 7669 616c 697a     def trivializ
+0002fc20: 6162 6c65 2873 656c 6629 202d 3e20 626f  able(self) -> bo
+0002fc30: 6f6c 3a0a 2020 2020 2020 2020 7222 2222  ol:.        r"""
+0002fc40: 0a20 2020 2020 2020 2049 7320 7472 7565  .        Is true
+0002fc50: 2077 6865 6e20 7475 706c 6574 2069 7320   when tuplet is 
+0002fc60: 7472 6976 6961 6c69 7a61 626c 6520 2863  trivializable (c
+0002fc70: 616e 2062 6520 7265 7772 6974 7465 6e20  an be rewritten 
+0002fc80: 7769 7468 2061 2072 6174 696f 206f 6620  with a ratio of 
+0002fc90: 313a 3129 2e0a 0a20 2020 2020 2020 202e  1:1)...        .
+0002fca0: 2e20 2063 6f6e 7461 696e 6572 3a3a 2065  .  container:: e
+0002fcb0: 7861 6d70 6c65 0a0a 2020 2020 2020 2020  xample..        
+0002fcc0: 2020 2020 5265 6475 6461 6e74 2074 7570      Redudant tup
+0002fcd0: 6c65 743a 0a0a 2020 2020 2020 2020 2020  let:..          
+0002fce0: 2020 3e3e 3e20 7475 706c 6574 203d 2061    >>> tuplet = a
+0002fcf0: 626a 6164 2e54 7570 6c65 7428 2833 2c20  bjad.Tuplet((3, 
+0002fd00: 3429 2c20 2263 2734 2063 2734 2229 0a20  4), "c'4 c'4"). 
+0002fd10: 2020 2020 2020 2020 2020 203e 3e3e 2061             >>> a
+0002fd20: 626a 6164 2e61 7474 6163 6828 6162 6a61  bjad.attach(abja
+0002fd30: 642e 5469 6d65 5369 676e 6174 7572 6528  d.TimeSignature(
+0002fd40: 2833 2c20 3829 292c 2074 7570 6c65 745b  (3, 8)), tuplet[
+0002fd50: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
+0002fd60: 3e3e 3e20 7374 6166 6620 3d20 6162 6a61  >>> staff = abja
+0002fd70: 642e 5374 6166 6628 5b74 7570 6c65 745d  d.Staff([tuplet]
+0002fd80: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+0002fd90: 3e20 6162 6a61 642e 7368 6f77 2873 7461  > abjad.show(sta
+0002fda0: 6666 2920 2320 646f 6374 6573 743a 202b  ff) # doctest: +
+0002fdb0: 534b 4950 0a0a 2020 2020 2020 2020 2020  SKIP..          
+0002fdc0: 2020 2e2e 2020 646f 6373 3a3a 0a0a 2020    ..  docs::..  
+0002fdd0: 2020 2020 2020 2020 2020 2020 2020 3e3e                >>
+0002fde0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+0002fdf0: 2e6c 696c 7970 6f6e 6428 7475 706c 6574  .lilypond(tuplet
+0002fe00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002fe10: 2020 3e3e 3e20 7072 696e 7428 7374 7269    >>> print(stri
+0002fe20: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
+0002fe30: 2020 2020 5c74 7765 616b 2074 6578 7420      \tweak text 
+0002fe40: 2374 7570 6c65 742d 6e75 6d62 6572 3a3a  #tuplet-number::
+0002fe50: 6361 6c63 2d66 7261 6374 696f 6e2d 7465  calc-fraction-te
+0002fe60: 7874 0a20 2020 2020 2020 2020 2020 2020  xt.             
+0002fe70: 2020 205c 7469 6d65 7320 332f 340a 2020     \times 3/4.  
+0002fe80: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+0002fe90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fea0: 2020 2020 5c74 696d 6520 332f 380a 2020      \time 3/8.  
+0002feb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fec0: 2020 6327 340a 2020 2020 2020 2020 2020    c'4.          
+0002fed0: 2020 2020 2020 2020 2020 6327 340a 2020            c'4.  
+0002fee0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+0002fef0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0002ff00: 2074 7570 6c65 742e 7472 6976 6961 6c69   tuplet.triviali
+0002ff10: 7a61 626c 6528 290a 2020 2020 2020 2020  zable().        
+0002ff20: 2020 2020 5472 7565 0a0a 2020 2020 2020      True..      
+0002ff30: 2020 2020 2020 4361 6e20 6265 2072 6577        Can be rew
+0002ff40: 7269 7474 656e 2077 6974 686f 7574 2061  ritten without a
+0002ff50: 2074 7570 6c65 7420 6272 6163 6b65 743a   tuplet bracket:
+0002ff60: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+0002ff70: 3e20 7374 6166 6620 3d20 6162 6a61 642e  > staff = abjad.
+0002ff80: 5374 6166 6628 2263 2738 2e20 6327 382e  Staff("c'8. c'8.
+0002ff90: 2229 0a20 2020 2020 2020 2020 2020 203e  ").            >
+0002ffa0: 3e3e 2061 626a 6164 2e61 7474 6163 6828  >> abjad.attach(
+0002ffb0: 6162 6a61 642e 5469 6d65 5369 676e 6174  abjad.TimeSignat
+0002ffc0: 7572 6528 2833 2c20 3829 292c 2073 7461  ure((3, 8)), sta
+0002ffd0: 6666 5b30 5d29 0a20 2020 2020 2020 2020  ff[0]).         
+0002ffe0: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
+0002fff0: 7728 7374 6166 6629 2023 2064 6f63 7465  w(staff) # docte
+00030000: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+00030010: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
+00030020: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
+00030030: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
+00030040: 6162 6a61 642e 6c69 6c79 706f 6e64 2873  abjad.lilypond(s
+00030050: 7461 6666 290a 2020 2020 2020 2020 2020  taff).          
+00030060: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+00030070: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+00030080: 2020 2020 2020 2020 5c6e 6577 2053 7461          \new Sta
+00030090: 6666 0a20 2020 2020 2020 2020 2020 2020  ff.             
+000300a0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+000300b0: 2020 2020 2020 2020 205c 7469 6d65 2033           \time 3
+000300c0: 2f38 0a20 2020 2020 2020 2020 2020 2020  /8.             
+000300d0: 2020 2020 2020 2063 2738 2e0a 2020 2020         c'8..    
+000300e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000300f0: 6327 382e 0a20 2020 2020 2020 2020 2020  c'8..           
+00030100: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
+00030110: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+00030120: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+00030130: 2020 2020 204e 6f6e 7472 6976 6961 6c69       Nontriviali
+00030140: 7a61 626c 6520 7475 706c 6574 3a0a 0a20  zable tuplet:.. 
+00030150: 2020 2020 2020 2020 2020 203e 3e3e 2074             >>> t
+00030160: 7570 6c65 7420 3d20 6162 6a61 642e 5475  uplet = abjad.Tu
+00030170: 706c 6574 2828 332c 2035 292c 2022 6327  plet((3, 5), "c'
+00030180: 3420 6327 3420 6327 3420 6327 3420 6327  4 c'4 c'4 c'4 c'
+00030190: 3422 290a 2020 2020 2020 2020 2020 2020  4").            
+000301a0: 3e3e 3e20 6162 6a61 642e 6174 7461 6368  >>> abjad.attach
+000301b0: 2861 626a 6164 2e54 696d 6553 6967 6e61  (abjad.TimeSigna
+000301c0: 7475 7265 2828 332c 2034 2929 2c20 7475  ture((3, 4)), tu
+000301d0: 706c 6574 5b30 5d29 0a20 2020 2020 2020  plet[0]).       
+000301e0: 2020 2020 203e 3e3e 2073 7461 6666 203d       >>> staff =
+000301f0: 2061 626a 6164 2e53 7461 6666 285b 7475   abjad.Staff([tu
+00030200: 706c 6574 5d29 0a20 2020 2020 2020 2020  plet]).         
+00030210: 2020 203e 3e3e 2061 626a 6164 2e73 686f     >>> abjad.sho
+00030220: 7728 7374 6166 6629 2023 2064 6f63 7465  w(staff) # docte
+00030230: 7374 3a20 2b53 4b49 500a 0a20 2020 2020  st: +SKIP..     
+00030240: 2020 2020 2020 202e 2e20 2064 6f63 733a         ..  docs:
+00030250: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
+00030260: 2020 203e 3e3e 2073 7472 696e 6720 3d20     >>> string = 
+00030270: 6162 6a61 642e 6c69 6c79 706f 6e64 2873  abjad.lilypond(s
+00030280: 7461 6666 290a 2020 2020 2020 2020 2020  taff).          
+00030290: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+000302a0: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+000302b0: 2020 2020 2020 2020 5c6e 6577 2053 7461          \new Sta
+000302c0: 6666 0a20 2020 2020 2020 2020 2020 2020  ff.             
+000302d0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
+000302e0: 2020 2020 2020 2020 205c 7477 6561 6b20           \tweak 
+000302f0: 7465 7874 2023 7475 706c 6574 2d6e 756d  text #tuplet-num
+00030300: 6265 723a 3a63 616c 632d 6672 6163 7469  ber::calc-fracti
+00030310: 6f6e 2d74 6578 740a 2020 2020 2020 2020  on-text.        
+00030320: 2020 2020 2020 2020 2020 2020 5c74 696d              \tim
+00030330: 6573 2033 2f35 0a20 2020 2020 2020 2020  es 3/5.         
+00030340: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00030350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030360: 2020 2020 205c 7469 6d65 2033 2f34 0a20       \time 3/4. 
+00030370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030380: 2020 2020 2020 2063 2734 0a20 2020 2020         c'4.     
+00030390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000303a0: 2020 2063 2734 0a20 2020 2020 2020 2020     c'4.         
+000303b0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000303c0: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+000303d0: 2020 2020 2020 2020 2020 2063 2734 0a20             c'4. 
+000303e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000303f0: 2020 2020 2020 2063 2734 0a20 2020 2020         c'4.     
+00030400: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00030410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030420: 207d 0a0a 2020 2020 2020 2020 2020 2020   }..            
+00030430: 3e3e 3e20 7475 706c 6574 2e74 7269 7669  >>> tuplet.trivi
+00030440: 616c 697a 6162 6c65 2829 0a20 2020 2020  alizable().     
+00030450: 2020 2020 2020 2046 616c 7365 0a0a 2020         False..  
+00030460: 2020 2020 2020 2020 2020 4361 6e20 6e6f            Can no
+00030470: 7420 6265 2072 6577 7269 7474 656e 2077  t be rewritten w
+00030480: 6974 686f 7574 2061 2074 7570 6c65 7420  ithout a tuplet 
+00030490: 6272 6163 6b65 742e 0a0a 2020 2020 2020  bracket...      
+000304a0: 2020 2e2e 2020 636f 6e74 6169 6e65 723a    ..  container:
+000304b0: 3a20 6578 616d 706c 650a 0a20 2020 2020  : example..     
+000304c0: 2020 2020 2020 2052 4547 5245 5353 494f         REGRESSIO
+000304d0: 4e2e 204e 6f6e 7472 6976 6961 6c69 7a61  N. Nontrivializa
+000304e0: 626c 6520 7475 706c 6574 3a0a 0a20 2020  ble tuplet:..   
+000304f0: 2020 2020 2020 2020 203e 3e3e 2074 7570           >>> tup
+00030500: 6c65 7420 3d20 6162 6a61 642e 5475 706c  let = abjad.Tupl
+00030510: 6574 2828 332c 2034 292c 2022 6327 322e  et((3, 4), "c'2.
+00030520: 2063 3422 290a 2020 2020 2020 2020 2020   c4").          
+00030530: 2020 3e3e 3e20 6162 6a61 642e 6174 7461    >>> abjad.atta
+00030540: 6368 2861 626a 6164 2e54 696d 6553 6967  ch(abjad.TimeSig
+00030550: 6e61 7475 7265 2828 332c 2034 2929 2c20  nature((3, 4)), 
+00030560: 7475 706c 6574 5b30 5d29 0a20 2020 2020  tuplet[0]).     
+00030570: 2020 2020 2020 203e 3e3e 2073 7461 6666         >>> staff
+00030580: 203d 2061 626a 6164 2e53 7461 6666 285b   = abjad.Staff([
+00030590: 7475 706c 6574 5d29 0a20 2020 2020 2020  tuplet]).       
+000305a0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
+000305b0: 686f 7728 7374 6166 6629 2023 2064 6f63  how(staff) # doc
+000305c0: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
+000305d0: 2020 2020 2020 2020 202e 2e20 2064 6f63           ..  doc
+000305e0: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
+000305f0: 2020 2020 203e 3e3e 2073 7472 696e 6720       >>> string 
+00030600: 3d20 6162 6a61 642e 6c69 6c79 706f 6e64  = abjad.lilypond
+00030610: 2873 7461 6666 290a 2020 2020 2020 2020  (staff).        
+00030620: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+00030630: 7428 7374 7269 6e67 290a 2020 2020 2020  t(string).      
+00030640: 2020 2020 2020 2020 2020 5c6e 6577 2053            \new S
+00030650: 7461 6666 0a20 2020 2020 2020 2020 2020  taff.           
+00030660: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
+00030670: 2020 2020 2020 2020 2020 205c 7477 6561             \twea
+00030680: 6b20 7465 7874 2023 7475 706c 6574 2d6e  k text #tuplet-n
+00030690: 756d 6265 723a 3a63 616c 632d 6672 6163  umber::calc-frac
+000306a0: 7469 6f6e 2d74 6578 740a 2020 2020 2020  tion-text.      
+000306b0: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+000306c0: 696d 6573 2033 2f34 0a20 2020 2020 2020  imes 3/4.       
+000306d0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+000306e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000306f0: 2020 2020 2020 205c 7469 6d65 2033 2f34         \time 3/4
+00030700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030710: 2020 2020 2020 2020 2063 2732 2e0a 2020           c'2..  
+00030720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030730: 2020 2020 2020 6334 0a20 2020 2020 2020        c4.       
+00030740: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+00030750: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00030760: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+00030770: 3e20 7475 706c 6574 2e74 7269 7669 616c  > tuplet.trivial
+00030780: 697a 6162 6c65 2829 0a20 2020 2020 2020  izable().       
+00030790: 2020 2020 2046 616c 7365 0a0a 2020 2020       False..    
+000307a0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000307b0: 666f 7220 636f 6d70 6f6e 656e 7420 696e  for component in
+000307c0: 2073 656c 663a 0a20 2020 2020 2020 2020   self:.         
+000307d0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+000307e0: 2863 6f6d 706f 6e65 6e74 2c20 5475 706c  (component, Tupl
+000307f0: 6574 293a 0a20 2020 2020 2020 2020 2020  et):.           
+00030800: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
+00030810: 2020 2020 2020 2020 2020 6173 7365 7274            assert
+00030820: 2069 7369 6e73 7461 6e63 6528 636f 6d70   isinstance(comp
+00030830: 6f6e 656e 742c 204c 6561 6629 2c20 7265  onent, Leaf), re
+00030840: 7072 2863 6f6d 706f 6e65 6e74 290a 2020  pr(component).  
+00030850: 2020 2020 2020 2020 2020 6475 7261 7469            durati
+00030860: 6f6e 203d 205f 6475 7261 7469 6f6e 2e44  on = _duration.D
+00030870: 7572 6174 696f 6e28 7365 6c66 2e6d 756c  uration(self.mul
+00030880: 7469 706c 6965 7220 2a20 636f 6d70 6f6e  tiplier * compon
+00030890: 656e 742e 7772 6974 7465 6e5f 6475 7261  ent.written_dura
+000308a0: 7469 6f6e 290a 2020 2020 2020 2020 2020  tion).          
+000308b0: 2020 6966 206e 6f74 2064 7572 6174 696f    if not duratio
+000308c0: 6e2e 6973 5f61 7373 6967 6e61 626c 653a  n.is_assignable:
+000308d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000308e0: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
+000308f0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+00030900: 650a 0a20 2020 2064 6566 2074 7269 7669  e..    def trivi
+00030910: 616c 697a 6528 7365 6c66 2920 2d3e 204e  alize(self) -> N
+00030920: 6f6e 653a 0a20 2020 2020 2020 2072 2222  one:.        r""
+00030930: 220a 2020 2020 2020 2020 5472 6976 6961  ".        Trivia
+00030940: 6c69 7a65 7320 7475 706c 6574 2e0a 0a20  lizes tuplet... 
+00030950: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
+00030960: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+00030970: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00030980: 7475 706c 6574 203d 2061 626a 6164 2e54  tuplet = abjad.T
+00030990: 7570 6c65 7428 2833 2c20 3429 2c20 2263  uplet((3, 4), "c
+000309a0: 2732 2229 0a20 2020 2020 2020 2020 2020  '2").           
+000309b0: 203e 3e3e 2061 626a 6164 2e73 686f 7728   >>> abjad.show(
+000309c0: 7475 706c 6574 2920 2320 646f 6374 6573  tuplet) # doctes
+000309d0: 743a 202b 534b 4950 0a0a 2020 2020 2020  t: +SKIP..      
+000309e0: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
+000309f0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00030a00: 2020 3e3e 3e20 7374 7269 6e67 203d 2061    >>> string = a
+00030a10: 626a 6164 2e6c 696c 7970 6f6e 6428 7475  bjad.lilypond(tu
+00030a20: 706c 6574 290a 2020 2020 2020 2020 2020  plet).          
+00030a30: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+00030a40: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+00030a50: 2020 2020 2020 2020 5c74 7765 616b 2074          \tweak t
+00030a60: 6578 7420 2374 7570 6c65 742d 6e75 6d62  ext #tuplet-numb
+00030a70: 6572 3a3a 6361 6c63 2d66 7261 6374 696f  er::calc-fractio
+00030a80: 6e2d 7465 7874 0a20 2020 2020 2020 2020  n-text.         
+00030a90: 2020 2020 2020 205c 7469 6d65 7320 332f         \times 3/
+00030aa0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+00030ab0: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+00030ac0: 2020 2020 2020 2020 6327 320a 2020 2020          c'2.    
+00030ad0: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
+00030ae0: 2020 2020 2020 2020 2020 203e 3e3e 2074             >>> t
+00030af0: 7570 6c65 742e 7472 6976 6961 6c69 7a61  uplet.trivializa
+00030b00: 626c 6528 290a 2020 2020 2020 2020 2020  ble().          
+00030b10: 2020 5472 7565 0a0a 2020 2020 2020 2020    True..        
+00030b20: 2020 2020 3e3e 3e20 7475 706c 6574 2e74      >>> tuplet.t
+00030b30: 7269 7669 616c 697a 6528 290a 2020 2020  rivialize().    
+00030b40: 2020 2020 2020 2020 3e3e 3e20 6162 6a61          >>> abja
+00030b50: 642e 7368 6f77 2874 7570 6c65 7429 2023  d.show(tuplet) #
+00030b60: 2064 6f63 7465 7374 3a20 2b53 4b49 500a   doctest: +SKIP.
+00030b70: 0a20 2020 2020 2020 2020 2020 202e 2e20  .            .. 
+00030b80: 2064 6f63 733a 3a0a 0a20 2020 2020 2020   docs::..       
+00030b90: 2020 2020 2020 2020 203e 3e3e 2073 7472           >>> str
+00030ba0: 696e 6720 3d20 6162 6a61 642e 6c69 6c79  ing = abjad.lily
+00030bb0: 706f 6e64 2874 7570 6c65 7429 0a20 2020  pond(tuplet).   
+00030bc0: 2020 2020 2020 2020 2020 2020 203e 3e3e               >>>
+00030bd0: 2070 7269 6e74 2873 7472 696e 6729 0a20   print(string). 
+00030be0: 2020 2020 2020 2020 2020 2020 2020 205c                 \
+00030bf0: 7477 6561 6b20 7465 7874 2023 7475 706c  tweak text #tupl
+00030c00: 6574 2d6e 756d 6265 723a 3a63 616c 632d  et-number::calc-
+00030c10: 6672 6163 7469 6f6e 2d74 6578 740a 2020  fraction-text.  
+00030c20: 2020 2020 2020 2020 2020 2020 2020 5c74                \t
+00030c30: 696d 6573 2031 2f31 0a20 2020 2020 2020  imes 1/1.       
+00030c40: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00030c50: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00030c60: 2734 2e0a 2020 2020 2020 2020 2020 2020  '4..            
+00030c70: 2020 2020 7d0a 0a20 2020 2020 2020 2022      }..        "
+00030c80: 2222 0a20 2020 2020 2020 2069 6620 6e6f  "".        if no
+00030c90: 7420 7365 6c66 2e74 7269 7669 616c 697a  t self.trivializ
+00030ca0: 6162 6c65 2829 3a0a 2020 2020 2020 2020  able():.        
+00030cb0: 2020 2020 7265 7475 726e 0a20 2020 2020      return.     
+00030cc0: 2020 2066 6f72 2063 6f6d 706f 6e65 6e74     for component
+00030cd0: 2069 6e20 7365 6c66 3a0a 2020 2020 2020   in self:.      
+00030ce0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00030cf0: 6e63 6528 636f 6d70 6f6e 656e 742c 2054  nce(component, T
+00030d00: 7570 6c65 7429 3a0a 2020 2020 2020 2020  uplet):.        
+00030d10: 2020 2020 2020 2020 636f 6d70 6f6e 656e          componen
+00030d20: 742e 6d75 6c74 6970 6c69 6572 202a 3d20  t.multiplier *= 
+00030d30: 7365 6c66 2e6d 756c 7469 706c 6965 720a  self.multiplier.
+00030d40: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00030d50: 2069 7369 6e73 7461 6e63 6528 636f 6d70   isinstance(comp
+00030d60: 6f6e 656e 742c 204c 6561 6629 3a0a 2020  onent, Leaf):.  
+00030d70: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00030d80: 6d70 6f6e 656e 742e 7772 6974 7465 6e5f  mponent.written_
+00030d90: 6475 7261 7469 6f6e 202a 3d20 7365 6c66  duration *= self
+00030da0: 2e6d 756c 7469 706c 6965 720a 2020 2020  .multiplier.    
+00030db0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00030dc0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+00030dd0: 6973 6520 5479 7065 4572 726f 7228 636f  ise TypeError(co
+00030de0: 6d70 6f6e 656e 7429 0a20 2020 2020 2020  mponent).       
+00030df0: 2073 656c 662e 6d75 6c74 6970 6c69 6572   self.multiplier
+00030e00: 203d 205f 6475 7261 7469 6f6e 2e4d 756c   = _duration.Mul
+00030e10: 7469 706c 6965 7228 3129 0a0a 0a63 6c61  tiplier(1)...cla
+00030e20: 7373 2056 6f69 6365 2843 6f6e 7465 7874  ss Voice(Context
+00030e30: 293a 0a20 2020 2072 2222 220a 2020 2020  ):.    r""".    
+00030e40: 566f 6963 652e 0a0a 2020 2020 2e2e 2020  Voice...    ..  
+00030e50: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
+00030e60: 706c 650a 0a20 2020 2020 2020 203e 3e3e  ple..        >>>
+00030e70: 2076 6f69 6365 203d 2061 626a 6164 2e56   voice = abjad.V
+00030e80: 6f69 6365 2822 6327 3820 6427 3820 6527  oice("c'8 d'8 e'
+00030e90: 3820 6627 3822 290a 2020 2020 2020 2020  8 f'8").        
+00030ea0: 3e3e 3e20 6162 6a61 642e 7368 6f77 2876  >>> abjad.show(v
+00030eb0: 6f69 6365 2920 2320 646f 6374 6573 743a  oice) # doctest:
+00030ec0: 202b 534b 4950 0a0a 2020 2020 2020 2020   +SKIP..        
+00030ed0: 2e2e 2020 646f 6373 3a3a 0a0a 2020 2020  ..  docs::..    
+00030ee0: 2020 2020 2020 2020 3e3e 3e20 7374 7269          >>> stri
+00030ef0: 6e67 203d 2061 626a 6164 2e6c 696c 7970  ng = abjad.lilyp
+00030f00: 6f6e 6428 766f 6963 6529 0a20 2020 2020  ond(voice).     
+00030f10: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+00030f20: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+00030f30: 2020 2020 205c 6e65 7720 566f 6963 650a       \new Voice.
+00030f40: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00030f50: 2020 2020 2020 2020 2020 2020 2020 6327                c'
+00030f60: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
+00030f70: 2020 6427 380a 2020 2020 2020 2020 2020    d'8.          
+00030f80: 2020 2020 2020 6527 380a 2020 2020 2020        e'8.      
+00030f90: 2020 2020 2020 2020 2020 6627 380a 2020            f'8.  
+00030fa0: 2020 2020 2020 2020 2020 7d0a 0a20 2020            }..   
+00030fb0: 2056 6f69 6365 2d63 6f6e 7465 7874 6564   Voice-contexted
+00030fc0: 2069 6e64 6963 6174 6f72 7320 6c69 6b65   indicators like
+00030fd0: 2064 796e 616d 6963 7320 776f 726b 2077   dynamics work w
+00030fe0: 6974 6820 6e65 7374 6564 2076 6f69 6365  ith nested voice
+00030ff0: 732e 0a0a 2020 2020 2e2e 2020 636f 6e74  s...    ..  cont
+00031000: 6169 6e65 723a 3a20 6578 616d 706c 650a  ainer:: example.
+00031010: 0a20 2020 2020 2020 2046 6f72 7465 2061  .        Forte a
+00031020: 6666 6563 7473 2061 6c6c 2072 6564 206e  ffects all red n
+00031030: 6f74 6573 3a0a 0a20 2020 2020 2020 203e  otes:..        >
+00031040: 3e3e 206f 7574 6572 5f72 6564 5f76 6f69  >> outer_red_voi
+00031050: 6365 203d 2061 626a 6164 2e56 6f69 6365  ce = abjad.Voice
+00031060: 2822 6527 2738 2064 2727 222c 206e 616d  ("e''8 d''", nam
+00031070: 653d 2752 6564 5f56 6f69 6365 2729 0a20  e='Red_Voice'). 
+00031080: 2020 2020 2020 203e 3e3e 2069 6e6e 6572         >>> inner
+00031090: 5f72 6564 5f76 6f69 6365 203d 2061 626a  _red_voice = abj
+000310a0: 6164 2e56 6f69 6365 2822 6327 2734 2062  ad.Voice("c''4 b
+000310b0: 2720 6327 2738 222c 206e 616d 653d 2752  ' c''8", name='R
+000310c0: 6564 5f56 6f69 6365 2729 0a20 2020 2020  ed_Voice').     
+000310d0: 2020 203e 3e3e 2069 6e6e 6572 5f62 6c75     >>> inner_blu
+000310e0: 655f 766f 6963 6520 3d20 6162 6a61 642e  e_voice = abjad.
+000310f0: 566f 6963 6528 2265 2734 2066 2720 6527  Voice("e'4 f' e'
+00031100: 3822 2c20 6e61 6d65 3d27 426c 7565 5f56  8", name='Blue_V
+00031110: 6f69 6365 2729 0a20 2020 2020 2020 203e  oice').        >
+00031120: 3e3e 2063 6f6e 7461 696e 6572 203d 2061  >> container = a
+00031130: 626a 6164 2e43 6f6e 7461 696e 6572 280a  bjad.Container(.
+00031140: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+00031150: 5b69 6e6e 6572 5f72 6564 5f76 6f69 6365  [inner_red_voice
+00031160: 2c20 696e 6e65 725f 626c 7565 5f76 6f69  , inner_blue_voi
+00031170: 6365 5d2c 0a20 2020 2020 2020 202e 2e2e  ce],.        ...
+00031180: 2020 2020 2073 696d 756c 7461 6e65 6f75       simultaneou
+00031190: 733d 5472 7565 2c0a 2020 2020 2020 2020  s=True,.        
+000311a0: 2e2e 2e20 2020 2020 290a 2020 2020 2020  ...     ).      
+000311b0: 2020 3e3e 3e20 6f75 7465 725f 7265 645f    >>> outer_red_
+000311c0: 766f 6963 652e 6170 7065 6e64 2863 6f6e  voice.append(con
+000311d0: 7461 696e 6572 290a 2020 2020 2020 2020  tainer).        
+000311e0: 3e3e 3e20 6f75 7465 725f 7265 645f 766f  >>> outer_red_vo
+000311f0: 6963 652e 6578 7465 6e64 2822 6427 2738  ice.extend("d''8
+00031200: 2229 0a20 2020 2020 2020 203e 3e3e 2061  ").        >>> a
+00031210: 626a 6164 2e6f 7665 7272 6964 6528 6f75  bjad.override(ou
+00031220: 7465 725f 7265 645f 766f 6963 6529 2e4e  ter_red_voice).N
+00031230: 6f74 6548 6561 642e 636f 6c6f 7220 3d20  oteHead.color = 
+00031240: 2223 7265 6422 0a20 2020 2020 2020 203e  "#red".        >
+00031250: 3e3e 206c 6974 6572 616c 203d 2061 626a  >> literal = abj
+00031260: 6164 2e4c 696c 7950 6f6e 644c 6974 6572  ad.LilyPondLiter
+00031270: 616c 2872 275c 766f 6963 654f 6e65 2729  al(r'\voiceOne')
+00031280: 0a20 2020 2020 2020 203e 3e3e 2061 626a  .        >>> abj
+00031290: 6164 2e61 7474 6163 6828 6c69 7465 7261  ad.attach(litera
+000312a0: 6c2c 206f 7574 6572 5f72 6564 5f76 6f69  l, outer_red_voi
+000312b0: 6365 5b30 5d29 0a20 2020 2020 2020 203e  ce[0]).        >
+000312c0: 3e3e 2061 626a 6164 2e6f 7665 7272 6964  >> abjad.overrid
+000312d0: 6528 696e 6e65 725f 626c 7565 5f76 6f69  e(inner_blue_voi
+000312e0: 6365 292e 4e6f 7465 4865 6164 2e63 6f6c  ce).NoteHead.col
+000312f0: 6f72 203d 2022 2362 6c75 6522 0a20 2020  or = "#blue".   
+00031300: 2020 2020 203e 3e3e 206c 6974 6572 616c       >>> literal
+00031310: 203d 2061 626a 6164 2e4c 696c 7950 6f6e   = abjad.LilyPon
+00031320: 644c 6974 6572 616c 2872 275c 766f 6963  dLiteral(r'\voic
+00031330: 6554 776f 2729 0a20 2020 2020 2020 203e  eTwo').        >
+00031340: 3e3e 2061 626a 6164 2e61 7474 6163 6828  >> abjad.attach(
+00031350: 6c69 7465 7261 6c2c 2069 6e6e 6572 5f62  literal, inner_b
+00031360: 6c75 655f 766f 6963 655b 305d 290a 2020  lue_voice[0]).  
+00031370: 2020 2020 2020 3e3e 3e20 6479 6e61 6d69        >>> dynami
+00031380: 6320 3d20 6162 6a61 642e 4479 6e61 6d69  c = abjad.Dynami
+00031390: 6328 2766 2729 0a20 2020 2020 2020 203e  c('f').        >
+000313a0: 3e3e 2061 626a 6164 2e61 7474 6163 6828  >> abjad.attach(
+000313b0: 6479 6e61 6d69 632c 206f 7574 6572 5f72  dynamic, outer_r
+000313c0: 6564 5f76 6f69 6365 5b30 5d29 0a20 2020  ed_voice[0]).   
+000313d0: 2020 2020 203e 3e3e 2061 626a 6164 2e73       >>> abjad.s
+000313e0: 686f 7728 6f75 7465 725f 7265 645f 766f  how(outer_red_vo
+000313f0: 6963 6529 2023 2064 6f63 7465 7374 3a20  ice) # doctest: 
+00031400: 2b53 4b49 500a 0a20 2020 2020 2020 202e  +SKIP..        .
+00031410: 2e20 2064 6f63 733a 3a0a 0a20 2020 2020  .  docs::..     
+00031420: 2020 2020 2020 203e 3e3e 2073 7472 696e         >>> strin
+00031430: 6720 3d20 6162 6a61 642e 6c69 6c79 706f  g = abjad.lilypo
+00031440: 6e64 286f 7574 6572 5f72 6564 5f76 6f69  nd(outer_red_voi
+00031450: 6365 290a 2020 2020 2020 2020 2020 2020  ce).            
+00031460: 3e3e 3e20 7072 696e 7428 7374 7269 6e67  >>> print(string
+00031470: 290a 2020 2020 2020 2020 2020 2020 5c63  ).            \c
+00031480: 6f6e 7465 7874 2056 6f69 6365 203d 2022  ontext Voice = "
+00031490: 5265 645f 566f 6963 6522 0a20 2020 2020  Red_Voice".     
+000314a0: 2020 2020 2020 205c 7769 7468 0a20 2020         \with.   
+000314b0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+000314c0: 2020 2020 2020 2020 2020 205c 6f76 6572             \over
+000314d0: 7269 6465 204e 6f74 6548 6561 642e 636f  ride NoteHead.co
+000314e0: 6c6f 7220 3d20 2372 6564 0a20 2020 2020  lor = #red.     
+000314f0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00031500: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
+00031510: 2020 2020 2020 205c 766f 6963 654f 6e65         \voiceOne
+00031520: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031530: 2065 2727 380a 2020 2020 2020 2020 2020   e''8.          
+00031540: 2020 2020 2020 5c66 0a20 2020 2020 2020        \f.       
+00031550: 2020 2020 2020 2020 2064 2727 380a 2020           d''8.  
+00031560: 2020 2020 2020 2020 2020 2020 2020 3c3c                <<
+00031570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031580: 2020 2020 205c 636f 6e74 6578 7420 566f       \context Vo
+00031590: 6963 6520 3d20 2252 6564 5f56 6f69 6365  ice = "Red_Voice
+000315a0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+000315b0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+000315c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000315d0: 6327 2734 0a20 2020 2020 2020 2020 2020  c''4.           
+000315e0: 2020 2020 2020 2020 2020 2020 2062 2734               b'4
+000315f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031600: 2020 2020 2020 2020 2063 2727 380a 2020           c''8.  
+00031610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031620: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+00031630: 2020 2020 2020 2020 5c63 6f6e 7465 7874          \context
+00031640: 2056 6f69 6365 203d 2022 426c 7565 5f56   Voice = "Blue_V
+00031650: 6f69 6365 220a 2020 2020 2020 2020 2020  oice".          
+00031660: 2020 2020 2020 2020 2020 5c77 6974 680a            \with.
+00031670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031680: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00031690: 2020 2020 2020 2020 2020 2020 2020 5c6f                \o
+000316a0: 7665 7272 6964 6520 4e6f 7465 4865 6164  verride NoteHead
+000316b0: 2e63 6f6c 6f72 203d 2023 626c 7565 0a20  .color = #blue. 
+000316c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000316d0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+000316e0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+000316f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031700: 2020 205c 766f 6963 6554 776f 0a20 2020     \voiceTwo.   
+00031710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031720: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
+00031730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031740: 2066 2734 0a20 2020 2020 2020 2020 2020   f'4.           
+00031750: 2020 2020 2020 2020 2020 2020 2065 2738               e'8
+00031760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031770: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+00031780: 2020 2020 2020 203e 3e0a 2020 2020 2020         >>.      
+00031790: 2020 2020 2020 2020 2020 6427 2738 0a20            d''8. 
+000317a0: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
+000317b0: 2020 2020 2020 3e3e 3e20 666f 7220 6c65        >>> for le
+000317c0: 6166 2069 6e20 6162 6a61 642e 6974 6572  af in abjad.iter
+000317d0: 6174 652e 6c65 6176 6573 286f 7574 6572  ate.leaves(outer
+000317e0: 5f72 6564 5f76 6f69 6365 293a 0a20 2020  _red_voice):.   
+000317f0: 2020 2020 202e 2e2e 2020 2020 2064 796e       ...     dyn
+00031800: 616d 6963 203d 2061 626a 6164 2e67 6574  amic = abjad.get
+00031810: 2e65 6666 6563 7469 7665 286c 6561 662c  .effective(leaf,
+00031820: 2061 626a 6164 2e44 796e 616d 6963 290a   abjad.Dynamic).
+00031830: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+00031840: 7072 696e 7428 6c65 6166 2c20 6479 6e61  print(leaf, dyna
+00031850: 6d69 6329 0a20 2020 2020 2020 202e 2e2e  mic).        ...
+00031860: 0a20 2020 2020 2020 204e 6f74 6528 2265  .        Note("e
+00031870: 2727 3822 2920 4479 6e61 6d69 6328 6e61  ''8") Dynamic(na
+00031880: 6d65 3d27 6627 2c20 636f 6d6d 616e 643d  me='f', command=
+00031890: 4e6f 6e65 2c20 666f 726d 6174 5f68 6169  None, format_hai
+000318a0: 7270 696e 5f73 746f 703d 4661 6c73 652c  rpin_stop=False,
+000318b0: 2068 6964 653d 4661 6c73 652c 206c 6561   hide=False, lea
+000318c0: 6b3d 4661 6c73 652c 206e 616d 655f 6973  k=False, name_is
+000318d0: 5f74 6578 7475 616c 3d46 616c 7365 2c20  _textual=False, 
+000318e0: 6f72 6469 6e61 6c3d 3229 0a20 2020 2020  ordinal=2).     
+000318f0: 2020 204e 6f74 6528 2264 2727 3822 2920     Note("d''8") 
+00031900: 4479 6e61 6d69 6328 6e61 6d65 3d27 6627  Dynamic(name='f'
+00031910: 2c20 636f 6d6d 616e 643d 4e6f 6e65 2c20  , command=None, 
+00031920: 666f 726d 6174 5f68 6169 7270 696e 5f73  format_hairpin_s
+00031930: 746f 703d 4661 6c73 652c 2068 6964 653d  top=False, hide=
+00031940: 4661 6c73 652c 206c 6561 6b3d 4661 6c73  False, leak=Fals
+00031950: 652c 206e 616d 655f 6973 5f74 6578 7475  e, name_is_textu
+00031960: 616c 3d46 616c 7365 2c20 6f72 6469 6e61  al=False, ordina
+00031970: 6c3d 3229 0a20 2020 2020 2020 204e 6f74  l=2).        Not
+00031980: 6528 2263 2727 3422 2920 4479 6e61 6d69  e("c''4") Dynami
+00031990: 6328 6e61 6d65 3d27 6627 2c20 636f 6d6d  c(name='f', comm
+000319a0: 616e 643d 4e6f 6e65 2c20 666f 726d 6174  and=None, format
+000319b0: 5f68 6169 7270 696e 5f73 746f 703d 4661  _hairpin_stop=Fa
+000319c0: 6c73 652c 2068 6964 653d 4661 6c73 652c  lse, hide=False,
+000319d0: 206c 6561 6b3d 4661 6c73 652c 206e 616d   leak=False, nam
+000319e0: 655f 6973 5f74 6578 7475 616c 3d46 616c  e_is_textual=Fal
+000319f0: 7365 2c20 6f72 6469 6e61 6c3d 3229 0a20  se, ordinal=2). 
+00031a00: 2020 2020 2020 204e 6f74 6528 2262 2734         Note("b'4
+00031a10: 2229 2044 796e 616d 6963 286e 616d 653d  ") Dynamic(name=
+00031a20: 2766 272c 2063 6f6d 6d61 6e64 3d4e 6f6e  'f', command=Non
+00031a30: 652c 2066 6f72 6d61 745f 6861 6972 7069  e, format_hairpi
+00031a40: 6e5f 7374 6f70 3d46 616c 7365 2c20 6869  n_stop=False, hi
+00031a50: 6465 3d46 616c 7365 2c20 6c65 616b 3d46  de=False, leak=F
+00031a60: 616c 7365 2c20 6e61 6d65 5f69 735f 7465  alse, name_is_te
+00031a70: 7874 7561 6c3d 4661 6c73 652c 206f 7264  xtual=False, ord
+00031a80: 696e 616c 3d32 290a 2020 2020 2020 2020  inal=2).        
+00031a90: 4e6f 7465 2822 6327 2738 2229 2044 796e  Note("c''8") Dyn
+00031aa0: 616d 6963 286e 616d 653d 2766 272c 2063  amic(name='f', c
+00031ab0: 6f6d 6d61 6e64 3d4e 6f6e 652c 2066 6f72  ommand=None, for
+00031ac0: 6d61 745f 6861 6972 7069 6e5f 7374 6f70  mat_hairpin_stop
+00031ad0: 3d46 616c 7365 2c20 6869 6465 3d46 616c  =False, hide=Fal
+00031ae0: 7365 2c20 6c65 616b 3d46 616c 7365 2c20  se, leak=False, 
+00031af0: 6e61 6d65 5f69 735f 7465 7874 7561 6c3d  name_is_textual=
+00031b00: 4661 6c73 652c 206f 7264 696e 616c 3d32  False, ordinal=2
+00031b10: 290a 2020 2020 2020 2020 4e6f 7465 2822  ).        Note("
+00031b20: 6527 3422 2920 4e6f 6e65 0a20 2020 2020  e'4") None.     
+00031b30: 2020 204e 6f74 6528 2266 2734 2229 204e     Note("f'4") N
+00031b40: 6f6e 650a 2020 2020 2020 2020 4e6f 7465  one.        Note
+00031b50: 2822 6527 3822 2920 4e6f 6e65 0a20 2020  ("e'8") None.   
+00031b60: 2020 2020 204e 6f74 6528 2264 2727 3822       Note("d''8"
+00031b70: 2920 4479 6e61 6d69 6328 6e61 6d65 3d27  ) Dynamic(name='
+00031b80: 6627 2c20 636f 6d6d 616e 643d 4e6f 6e65  f', command=None
+00031b90: 2c20 666f 726d 6174 5f68 6169 7270 696e  , format_hairpin
+00031ba0: 5f73 746f 703d 4661 6c73 652c 2068 6964  _stop=False, hid
+00031bb0: 653d 4661 6c73 652c 206c 6561 6b3d 4661  e=False, leak=Fa
+00031bc0: 6c73 652c 206e 616d 655f 6973 5f74 6578  lse, name_is_tex
+00031bd0: 7475 616c 3d46 616c 7365 2c20 6f72 6469  tual=False, ordi
+00031be0: 6e61 6c3d 3229 0a0a 2020 2020 2e2e 2020  nal=2)..    ..  
+00031bf0: 636f 6e74 6169 6e65 723a 3a20 6578 616d  container:: exam
+00031c00: 706c 650a 0a20 2020 2020 2020 2050 6961  ple..        Pia
+00031c10: 6e6f 2061 6666 6563 7473 2061 6c6c 2062  no affects all b
+00031c20: 6c75 6520 6e6f 7465 733a 0a0a 2020 2020  lue notes:..    
+00031c30: 2020 2020 3e3e 3e20 6f75 7465 725f 7265      >>> outer_re
+00031c40: 645f 766f 6963 6520 3d20 6162 6a61 642e  d_voice = abjad.
+00031c50: 566f 6963 6528 2265 2727 3820 6427 2722  Voice("e''8 d''"
+00031c60: 2c20 6e61 6d65 3d27 5265 645f 566f 6963  , name='Red_Voic
+00031c70: 6527 290a 2020 2020 2020 2020 3e3e 3e20  e').        >>> 
+00031c80: 696e 6e65 725f 7265 645f 766f 6963 6520  inner_red_voice 
+00031c90: 3d20 6162 6a61 642e 566f 6963 6528 2263  = abjad.Voice("c
+00031ca0: 2727 3420 6227 2063 2727 3822 2c20 6e61  ''4 b' c''8", na
+00031cb0: 6d65 3d27 5265 645f 566f 6963 6527 290a  me='Red_Voice').
+00031cc0: 2020 2020 2020 2020 3e3e 3e20 696e 6e65          >>> inne
+00031cd0: 725f 626c 7565 5f76 6f69 6365 203d 2061  r_blue_voice = a
+00031ce0: 626a 6164 2e56 6f69 6365 2822 6527 3420  bjad.Voice("e'4 
+00031cf0: 6627 2065 2738 222c 206e 616d 653d 2742  f' e'8", name='B
+00031d00: 6c75 655f 566f 6963 6527 290a 2020 2020  lue_Voice').    
+00031d10: 2020 2020 3e3e 3e20 636f 6e74 6169 6e65      >>> containe
+00031d20: 7220 3d20 6162 6a61 642e 436f 6e74 6169  r = abjad.Contai
+00031d30: 6e65 7228 0a20 2020 2020 2020 202e 2e2e  ner(.        ...
+00031d40: 2020 2020 205b 696e 6e65 725f 7265 645f       [inner_red_
+00031d50: 766f 6963 652c 2069 6e6e 6572 5f62 6c75  voice, inner_blu
+00031d60: 655f 766f 6963 655d 2c0a 2020 2020 2020  e_voice],.      
+00031d70: 2020 2e2e 2e20 2020 2020 7369 6d75 6c74    ...     simult
+00031d80: 616e 656f 7573 3d54 7275 652c 0a20 2020  aneous=True,.   
+00031d90: 2020 2020 202e 2e2e 2020 2020 2029 0a20       ...     ). 
+00031da0: 2020 2020 2020 203e 3e3e 206f 7574 6572         >>> outer
+00031db0: 5f72 6564 5f76 6f69 6365 2e61 7070 656e  _red_voice.appen
+00031dc0: 6428 636f 6e74 6169 6e65 7229 0a20 2020  d(container).   
+00031dd0: 2020 2020 203e 3e3e 206f 7574 6572 5f72       >>> outer_r
+00031de0: 6564 5f76 6f69 6365 2e65 7874 656e 6428  ed_voice.extend(
+00031df0: 2264 2727 3822 290a 2020 2020 2020 2020  "d''8").        
+00031e00: 3e3e 3e20 6162 6a61 642e 6f76 6572 7269  >>> abjad.overri
+00031e10: 6465 286f 7574 6572 5f72 6564 5f76 6f69  de(outer_red_voi
+00031e20: 6365 292e 4e6f 7465 4865 6164 2e63 6f6c  ce).NoteHead.col
+00031e30: 6f72 203d 2022 2372 6564 220a 2020 2020  or = "#red".    
+00031e40: 2020 2020 3e3e 3e20 6c69 7465 7261 6c20      >>> literal 
+00031e50: 3d20 6162 6a61 642e 4c69 6c79 506f 6e64  = abjad.LilyPond
+00031e60: 4c69 7465 7261 6c28 7227 5c76 6f69 6365  Literal(r'\voice
+00031e70: 4f6e 6527 290a 2020 2020 2020 2020 3e3e  One').        >>
+00031e80: 3e20 6162 6a61 642e 6174 7461 6368 286c  > abjad.attach(l
+00031e90: 6974 6572 616c 2c20 6f75 7465 725f 7265  iteral, outer_re
+00031ea0: 645f 766f 6963 655b 305d 290a 2020 2020  d_voice[0]).    
+00031eb0: 2020 2020 3e3e 3e20 6162 6a61 642e 6f76      >>> abjad.ov
+00031ec0: 6572 7269 6465 2869 6e6e 6572 5f62 6c75  erride(inner_blu
+00031ed0: 655f 766f 6963 6529 2e4e 6f74 6548 6561  e_voice).NoteHea
+00031ee0: 642e 636f 6c6f 7220 3d20 2223 626c 7565  d.color = "#blue
+00031ef0: 220a 2020 2020 2020 2020 3e3e 3e20 6c69  ".        >>> li
+00031f00: 7465 7261 6c20 3d20 6162 6a61 642e 4c69  teral = abjad.Li
+00031f10: 6c79 506f 6e64 4c69 7465 7261 6c28 7227  lyPondLiteral(r'
+00031f20: 5c76 6f69 6365 5477 6f27 290a 2020 2020  \voiceTwo').    
+00031f30: 2020 2020 3e3e 3e20 6162 6a61 642e 6174      >>> abjad.at
+00031f40: 7461 6368 286c 6974 6572 616c 2c20 696e  tach(literal, in
+00031f50: 6e65 725f 626c 7565 5f76 6f69 6365 5b30  ner_blue_voice[0
+00031f60: 5d29 0a20 2020 2020 2020 203e 3e3e 2064  ]).        >>> d
+00031f70: 796e 616d 6963 203d 2061 626a 6164 2e44  ynamic = abjad.D
+00031f80: 796e 616d 6963 2827 7027 290a 2020 2020  ynamic('p').    
+00031f90: 2020 2020 3e3e 3e20 6162 6a61 642e 6174      >>> abjad.at
+00031fa0: 7461 6368 2864 796e 616d 6963 2c20 696e  tach(dynamic, in
+00031fb0: 6e65 725f 626c 7565 5f76 6f69 6365 5b30  ner_blue_voice[0
+00031fc0: 5d29 0a20 2020 2020 2020 203e 3e3e 2061  ]).        >>> a
+00031fd0: 626a 6164 2e73 686f 7728 6f75 7465 725f  bjad.show(outer_
+00031fe0: 7265 645f 766f 6963 6529 2023 2064 6f63  red_voice) # doc
+00031ff0: 7465 7374 3a20 2b53 4b49 500a 0a20 2020  test: +SKIP..   
+00032000: 2020 2020 202e 2e20 2064 6f63 733a 3a0a       ..  docs::.
+00032010: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00032020: 2073 7472 696e 6720 3d20 6162 6a61 642e   string = abjad.
+00032030: 6c69 6c79 706f 6e64 286f 7574 6572 5f72  lilypond(outer_r
+00032040: 6564 5f76 6f69 6365 290a 2020 2020 2020  ed_voice).      
+00032050: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+00032060: 7374 7269 6e67 290a 2020 2020 2020 2020  string).        
+00032070: 2020 2020 5c63 6f6e 7465 7874 2056 6f69      \context Voi
+00032080: 6365 203d 2022 5265 645f 566f 6963 6522  ce = "Red_Voice"
+00032090: 0a20 2020 2020 2020 2020 2020 205c 7769  .            \wi
+000320a0: 7468 0a20 2020 2020 2020 2020 2020 207b  th.            {
+000320b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000320c0: 205c 6f76 6572 7269 6465 204e 6f74 6548   \override NoteH
+000320d0: 6561 642e 636f 6c6f 7220 3d20 2372 6564  ead.color = #red
+000320e0: 0a20 2020 2020 2020 2020 2020 207d 0a20  .            }. 
+000320f0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00032100: 2020 2020 2020 2020 2020 2020 205c 766f               \vo
+00032110: 6963 654f 6e65 0a20 2020 2020 2020 2020  iceOne.         
+00032120: 2020 2020 2020 2065 2727 380a 2020 2020         e''8.    
+00032130: 2020 2020 2020 2020 2020 2020 6427 2738              d''8
+00032140: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032150: 203c 3c0a 2020 2020 2020 2020 2020 2020   <<.            
+00032160: 2020 2020 2020 2020 5c63 6f6e 7465 7874          \context
+00032170: 2056 6f69 6365 203d 2022 5265 645f 566f   Voice = "Red_Vo
+00032180: 6963 6522 0a20 2020 2020 2020 2020 2020  ice".           
+00032190: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+000321a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000321b0: 2020 2063 2727 340a 2020 2020 2020 2020     c''4.        
+000321c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000321d0: 6227 340a 2020 2020 2020 2020 2020 2020  b'4.            
+000321e0: 2020 2020 2020 2020 2020 2020 6327 2738              c''8
+000321f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032200: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+00032210: 2020 2020 2020 2020 2020 205c 636f 6e74             \cont
+00032220: 6578 7420 566f 6963 6520 3d20 2242 6c75  ext Voice = "Blu
+00032230: 655f 566f 6963 6522 0a20 2020 2020 2020  e_Voice".       
+00032240: 2020 2020 2020 2020 2020 2020 205c 7769               \wi
+00032250: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
+00032260: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+00032270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032280: 205c 6f76 6572 7269 6465 204e 6f74 6548   \override NoteH
+00032290: 6561 642e 636f 6c6f 7220 3d20 2362 6c75  ead.color = #blu
+000322a0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000322b0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+000322c0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+000322d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000322e0: 2020 2020 2020 5c76 6f69 6365 5477 6f0a        \voiceTwo.
+000322f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032300: 2020 2020 2020 2020 6527 340a 2020 2020          e'4.    
+00032310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032320: 2020 2020 5c70 0a20 2020 2020 2020 2020      \p.         
+00032330: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00032340: 2734 0a20 2020 2020 2020 2020 2020 2020  '4.             
+00032350: 2020 2020 2020 2020 2020 2065 2738 0a20             e'8. 
+00032360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032370: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+00032380: 2020 2020 203e 3e0a 2020 2020 2020 2020       >>.        
+00032390: 2020 2020 2020 2020 6427 2738 0a20 2020          d''8.   
+000323a0: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+000323b0: 2020 2020 3e3e 3e20 666f 7220 6c65 6166      >>> for leaf
+000323c0: 2069 6e20 6162 6a61 642e 6974 6572 6174   in abjad.iterat
+000323d0: 652e 6c65 6176 6573 286f 7574 6572 5f72  e.leaves(outer_r
+000323e0: 6564 5f76 6f69 6365 293a 0a20 2020 2020  ed_voice):.     
+000323f0: 2020 202e 2e2e 2020 2020 2064 796e 616d     ...     dynam
+00032400: 6963 203d 2061 626a 6164 2e67 6574 2e65  ic = abjad.get.e
+00032410: 6666 6563 7469 7665 286c 6561 662c 2061  ffective(leaf, a
+00032420: 626a 6164 2e44 796e 616d 6963 290a 2020  bjad.Dynamic).  
+00032430: 2020 2020 2020 2e2e 2e20 2020 2020 7072        ...     pr
+00032440: 696e 7428 6c65 6166 2c20 6479 6e61 6d69  int(leaf, dynami
+00032450: 6329 0a20 2020 2020 2020 202e 2e2e 0a20  c).        .... 
+00032460: 2020 2020 2020 204e 6f74 6528 2265 2727         Note("e''
+00032470: 3822 2920 4e6f 6e65 0a20 2020 2020 2020  8") None.       
+00032480: 204e 6f74 6528 2264 2727 3822 2920 4e6f   Note("d''8") No
+00032490: 6e65 0a20 2020 2020 2020 204e 6f74 6528  ne.        Note(
+000324a0: 2263 2727 3422 2920 4e6f 6e65 0a20 2020  "c''4") None.   
+000324b0: 2020 2020 204e 6f74 6528 2262 2734 2229       Note("b'4")
+000324c0: 204e 6f6e 650a 2020 2020 2020 2020 4e6f   None.        No
+000324d0: 7465 2822 6327 2738 2229 204e 6f6e 650a  te("c''8") None.
+000324e0: 2020 2020 2020 2020 4e6f 7465 2822 6527          Note("e'
+000324f0: 3422 2920 4479 6e61 6d69 6328 6e61 6d65  4") Dynamic(name
+00032500: 3d27 7027 2c20 636f 6d6d 616e 643d 4e6f  ='p', command=No
+00032510: 6e65 2c20 666f 726d 6174 5f68 6169 7270  ne, format_hairp
+00032520: 696e 5f73 746f 703d 4661 6c73 652c 2068  in_stop=False, h
+00032530: 6964 653d 4661 6c73 652c 206c 6561 6b3d  ide=False, leak=
+00032540: 4661 6c73 652c 206e 616d 655f 6973 5f74  False, name_is_t
+00032550: 6578 7475 616c 3d46 616c 7365 2c20 6f72  extual=False, or
+00032560: 6469 6e61 6c3d 2d32 290a 2020 2020 2020  dinal=-2).      
+00032570: 2020 4e6f 7465 2822 6627 3422 2920 4479    Note("f'4") Dy
+00032580: 6e61 6d69 6328 6e61 6d65 3d27 7027 2c20  namic(name='p', 
+00032590: 636f 6d6d 616e 643d 4e6f 6e65 2c20 666f  command=None, fo
+000325a0: 726d 6174 5f68 6169 7270 696e 5f73 746f  rmat_hairpin_sto
+000325b0: 703d 4661 6c73 652c 2068 6964 653d 4661  p=False, hide=Fa
+000325c0: 6c73 652c 206c 6561 6b3d 4661 6c73 652c  lse, leak=False,
+000325d0: 206e 616d 655f 6973 5f74 6578 7475 616c   name_is_textual
+000325e0: 3d46 616c 7365 2c20 6f72 6469 6e61 6c3d  =False, ordinal=
+000325f0: 2d32 290a 2020 2020 2020 2020 4e6f 7465  -2).        Note
+00032600: 2822 6527 3822 2920 4479 6e61 6d69 6328  ("e'8") Dynamic(
+00032610: 6e61 6d65 3d27 7027 2c20 636f 6d6d 616e  name='p', comman
+00032620: 643d 4e6f 6e65 2c20 666f 726d 6174 5f68  d=None, format_h
+00032630: 6169 7270 696e 5f73 746f 703d 4661 6c73  airpin_stop=Fals
+00032640: 652c 2068 6964 653d 4661 6c73 652c 206c  e, hide=False, l
+00032650: 6561 6b3d 4661 6c73 652c 206e 616d 655f  eak=False, name_
+00032660: 6973 5f74 6578 7475 616c 3d46 616c 7365  is_textual=False
+00032670: 2c20 6f72 6469 6e61 6c3d 2d32 290a 2020  , ordinal=-2).  
+00032680: 2020 2020 2020 4e6f 7465 2822 6427 2738        Note("d''8
+00032690: 2229 204e 6f6e 650a 0a20 2020 202e 2e20  ") None..    .. 
+000326a0: 2063 6f6e 7461 696e 6572 3a3a 2065 7861   container:: exa
+000326b0: 6d70 6c65 0a0a 2020 2020 2020 2020 4d65  mple..        Me
+000326c0: 7a7a 6f66 6f72 7465 2061 6666 6563 7473  zzoforte affects
+000326d0: 2072 6564 206e 6f74 6573 2066 726f 6d20   red notes from 
+000326e0: 4334 2066 6f72 7761 7264 3a0a 0a20 2020  C4 forward:..   
+000326f0: 2020 2020 203e 3e3e 206f 7574 6572 5f72       >>> outer_r
+00032700: 6564 5f76 6f69 6365 203d 2061 626a 6164  ed_voice = abjad
+00032710: 2e56 6f69 6365 2822 6527 2738 2064 2727  .Voice("e''8 d''
+00032720: 222c 206e 616d 653d 2752 6564 5f56 6f69  ", name='Red_Voi
+00032730: 6365 2729 0a20 2020 2020 2020 203e 3e3e  ce').        >>>
+00032740: 2069 6e6e 6572 5f72 6564 5f76 6f69 6365   inner_red_voice
+00032750: 203d 2061 626a 6164 2e56 6f69 6365 2822   = abjad.Voice("
+00032760: 6327 2734 2062 2720 6327 2738 222c 206e  c''4 b' c''8", n
+00032770: 616d 653d 2752 6564 5f56 6f69 6365 2729  ame='Red_Voice')
+00032780: 0a20 2020 2020 2020 203e 3e3e 2069 6e6e  .        >>> inn
+00032790: 6572 5f62 6c75 655f 766f 6963 6520 3d20  er_blue_voice = 
+000327a0: 6162 6a61 642e 566f 6963 6528 2265 2734  abjad.Voice("e'4
+000327b0: 2066 2720 6527 3822 2c20 6e61 6d65 3d27   f' e'8", name='
+000327c0: 426c 7565 5f56 6f69 6365 2729 0a20 2020  Blue_Voice').   
+000327d0: 2020 2020 203e 3e3e 2063 6f6e 7461 696e       >>> contain
+000327e0: 6572 203d 2061 626a 6164 2e43 6f6e 7461  er = abjad.Conta
+000327f0: 696e 6572 280a 2020 2020 2020 2020 2e2e  iner(.        ..
+00032800: 2e20 2020 2020 5b69 6e6e 6572 5f72 6564  .     [inner_red
+00032810: 5f76 6f69 6365 2c20 696e 6e65 725f 626c  _voice, inner_bl
+00032820: 7565 5f76 6f69 6365 5d2c 0a20 2020 2020  ue_voice],.     
+00032830: 2020 202e 2e2e 2020 2020 2073 696d 756c     ...     simul
+00032840: 7461 6e65 6f75 733d 5472 7565 2c0a 2020  taneous=True,.  
+00032850: 2020 2020 2020 2e2e 2e20 2020 2020 290a        ...     ).
+00032860: 2020 2020 2020 2020 3e3e 3e20 6f75 7465          >>> oute
+00032870: 725f 7265 645f 766f 6963 652e 6170 7065  r_red_voice.appe
+00032880: 6e64 2863 6f6e 7461 696e 6572 290a 2020  nd(container).  
+00032890: 2020 2020 2020 3e3e 3e20 6f75 7465 725f        >>> outer_
+000328a0: 7265 645f 766f 6963 652e 6578 7465 6e64  red_voice.extend
+000328b0: 2822 6427 2738 2229 0a20 2020 2020 2020  ("d''8").       
+000328c0: 203e 3e3e 2061 626a 6164 2e6f 7665 7272   >>> abjad.overr
+000328d0: 6964 6528 6f75 7465 725f 7265 645f 766f  ide(outer_red_vo
+000328e0: 6963 6529 2e4e 6f74 6548 6561 642e 636f  ice).NoteHead.co
+000328f0: 6c6f 7220 3d20 2223 7265 6422 0a20 2020  lor = "#red".   
+00032900: 2020 2020 203e 3e3e 206c 6974 6572 616c       >>> literal
+00032910: 203d 2061 626a 6164 2e4c 696c 7950 6f6e   = abjad.LilyPon
+00032920: 644c 6974 6572 616c 2872 275c 766f 6963  dLiteral(r'\voic
+00032930: 654f 6e65 2729 0a20 2020 2020 2020 203e  eOne').        >
+00032940: 3e3e 2061 626a 6164 2e61 7474 6163 6828  >> abjad.attach(
+00032950: 6c69 7465 7261 6c2c 206f 7574 6572 5f72  literal, outer_r
+00032960: 6564 5f76 6f69 6365 5b30 5d29 0a20 2020  ed_voice[0]).   
+00032970: 2020 2020 203e 3e3e 2061 626a 6164 2e6f       >>> abjad.o
+00032980: 7665 7272 6964 6528 696e 6e65 725f 626c  verride(inner_bl
+00032990: 7565 5f76 6f69 6365 292e 4e6f 7465 4865  ue_voice).NoteHe
+000329a0: 6164 2e63 6f6c 6f72 203d 2022 2362 6c75  ad.color = "#blu
+000329b0: 6522 0a20 2020 2020 2020 203e 3e3e 206c  e".        >>> l
+000329c0: 6974 6572 616c 203d 2061 626a 6164 2e4c  iteral = abjad.L
+000329d0: 696c 7950 6f6e 644c 6974 6572 616c 2872  ilyPondLiteral(r
+000329e0: 275c 766f 6963 6554 776f 2729 0a20 2020  '\voiceTwo').   
+000329f0: 2020 2020 203e 3e3e 2061 626a 6164 2e61       >>> abjad.a
+00032a00: 7474 6163 6828 6c69 7465 7261 6c2c 2069  ttach(literal, i
+00032a10: 6e6e 6572 5f62 6c75 655f 766f 6963 655b  nner_blue_voice[
+00032a20: 305d 290a 2020 2020 2020 2020 3e3e 3e20  0]).        >>> 
+00032a30: 6479 6e61 6d69 6320 3d20 6162 6a61 642e  dynamic = abjad.
+00032a40: 4479 6e61 6d69 6328 276d 6627 290a 2020  Dynamic('mf').  
+00032a50: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+00032a60: 6174 7461 6368 2864 796e 616d 6963 2c20  attach(dynamic, 
+00032a70: 696e 6e65 725f 7265 645f 766f 6963 655b  inner_red_voice[
+00032a80: 305d 290a 2020 2020 2020 2020 3e3e 3e20  0]).        >>> 
+00032a90: 6162 6a61 642e 7368 6f77 286f 7574 6572  abjad.show(outer
+00032aa0: 5f72 6564 5f76 6f69 6365 2920 2320 646f  _red_voice) # do
+00032ab0: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
+00032ac0: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
+00032ad0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+00032ae0: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+00032af0: 2e6c 696c 7970 6f6e 6428 6f75 7465 725f  .lilypond(outer_
+00032b00: 7265 645f 766f 6963 6529 0a20 2020 2020  red_voice).     
+00032b10: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+00032b20: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+00032b30: 2020 2020 205c 636f 6e74 6578 7420 566f       \context Vo
+00032b40: 6963 6520 3d20 2252 6564 5f56 6f69 6365  ice = "Red_Voice
+00032b50: 220a 2020 2020 2020 2020 2020 2020 5c77  ".            \w
+00032b60: 6974 680a 2020 2020 2020 2020 2020 2020  ith.            
+00032b70: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00032b80: 2020 5c6f 7665 7272 6964 6520 4e6f 7465    \override Note
+00032b90: 4865 6164 2e63 6f6c 6f72 203d 2023 7265  Head.color = #re
+00032ba0: 640a 2020 2020 2020 2020 2020 2020 7d0a  d.            }.
+00032bb0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00032bc0: 2020 2020 2020 2020 2020 2020 2020 5c76                \v
+00032bd0: 6f69 6365 4f6e 650a 2020 2020 2020 2020  oiceOne.        
+00032be0: 2020 2020 2020 2020 6527 2738 0a20 2020          e''8.   
+00032bf0: 2020 2020 2020 2020 2020 2020 2064 2727               d''
+00032c00: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
+00032c10: 2020 3c3c 0a20 2020 2020 2020 2020 2020    <<.           
+00032c20: 2020 2020 2020 2020 205c 636f 6e74 6578           \contex
+00032c30: 7420 566f 6963 6520 3d20 2252 6564 5f56  t Voice = "Red_V
+00032c40: 6f69 6365 220a 2020 2020 2020 2020 2020  oice".          
+00032c50: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+00032c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032c70: 2020 2020 6327 2734 0a20 2020 2020 2020      c''4.       
+00032c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032c90: 205c 6d66 0a20 2020 2020 2020 2020 2020   \mf.           
+00032ca0: 2020 2020 2020 2020 2020 2020 2062 2734               b'4
+00032cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032cc0: 2020 2020 2020 2020 2063 2727 380a 2020           c''8.  
+00032cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032ce0: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+00032cf0: 2020 2020 2020 2020 5c63 6f6e 7465 7874          \context
+00032d00: 2056 6f69 6365 203d 2022 426c 7565 5f56   Voice = "Blue_V
+00032d10: 6f69 6365 220a 2020 2020 2020 2020 2020  oice".          
+00032d20: 2020 2020 2020 2020 2020 5c77 6974 680a            \with.
+00032d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032d40: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00032d50: 2020 2020 2020 2020 2020 2020 2020 5c6f                \o
+00032d60: 7665 7272 6964 6520 4e6f 7465 4865 6164  verride NoteHead
+00032d70: 2e63 6f6c 6f72 203d 2023 626c 7565 0a20  .color = #blue. 
+00032d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032d90: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+00032da0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00032db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032dc0: 2020 205c 766f 6963 6554 776f 0a20 2020     \voiceTwo.   
+00032dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032de0: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
+00032df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032e00: 2066 2734 0a20 2020 2020 2020 2020 2020   f'4.           
+00032e10: 2020 2020 2020 2020 2020 2020 2065 2738               e'8
+00032e20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032e30: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+00032e40: 2020 2020 2020 203e 3e0a 2020 2020 2020         >>.      
+00032e50: 2020 2020 2020 2020 2020 6427 2738 0a20            d''8. 
+00032e60: 2020 2020 2020 2020 2020 207d 0a0a 2020             }..  
+00032e70: 2020 2020 2020 3e3e 3e20 666f 7220 6c65        >>> for le
+00032e80: 6166 2069 6e20 6162 6a61 642e 6974 6572  af in abjad.iter
+00032e90: 6174 652e 6c65 6176 6573 286f 7574 6572  ate.leaves(outer
+00032ea0: 5f72 6564 5f76 6f69 6365 293a 0a20 2020  _red_voice):.   
+00032eb0: 2020 2020 202e 2e2e 2020 2020 2064 796e       ...     dyn
+00032ec0: 616d 6963 203d 2061 626a 6164 2e67 6574  amic = abjad.get
+00032ed0: 2e65 6666 6563 7469 7665 286c 6561 662c  .effective(leaf,
+00032ee0: 2061 626a 6164 2e44 796e 616d 6963 290a   abjad.Dynamic).
+00032ef0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+00032f00: 7072 696e 7428 6c65 6166 2c20 6479 6e61  print(leaf, dyna
+00032f10: 6d69 6329 0a20 2020 2020 2020 202e 2e2e  mic).        ...
+00032f20: 0a20 2020 2020 2020 204e 6f74 6528 2265  .        Note("e
+00032f30: 2727 3822 2920 4e6f 6e65 0a20 2020 2020  ''8") None.     
+00032f40: 2020 204e 6f74 6528 2264 2727 3822 2920     Note("d''8") 
+00032f50: 4e6f 6e65 0a20 2020 2020 2020 204e 6f74  None.        Not
+00032f60: 6528 2263 2727 3422 2920 4479 6e61 6d69  e("c''4") Dynami
+00032f70: 6328 6e61 6d65 3d27 6d66 272c 2063 6f6d  c(name='mf', com
+00032f80: 6d61 6e64 3d4e 6f6e 652c 2066 6f72 6d61  mand=None, forma
+00032f90: 745f 6861 6972 7069 6e5f 7374 6f70 3d46  t_hairpin_stop=F
+00032fa0: 616c 7365 2c20 6869 6465 3d46 616c 7365  alse, hide=False
+00032fb0: 2c20 6c65 616b 3d46 616c 7365 2c20 6e61  , leak=False, na
+00032fc0: 6d65 5f69 735f 7465 7874 7561 6c3d 4661  me_is_textual=Fa
+00032fd0: 6c73 652c 206f 7264 696e 616c 3d31 290a  lse, ordinal=1).
+00032fe0: 2020 2020 2020 2020 4e6f 7465 2822 6227          Note("b'
+00032ff0: 3422 2920 4479 6e61 6d69 6328 6e61 6d65  4") Dynamic(name
+00033000: 3d27 6d66 272c 2063 6f6d 6d61 6e64 3d4e  ='mf', command=N
+00033010: 6f6e 652c 2066 6f72 6d61 745f 6861 6972  one, format_hair
+00033020: 7069 6e5f 7374 6f70 3d46 616c 7365 2c20  pin_stop=False, 
+00033030: 6869 6465 3d46 616c 7365 2c20 6c65 616b  hide=False, leak
+00033040: 3d46 616c 7365 2c20 6e61 6d65 5f69 735f  =False, name_is_
+00033050: 7465 7874 7561 6c3d 4661 6c73 652c 206f  textual=False, o
+00033060: 7264 696e 616c 3d31 290a 2020 2020 2020  rdinal=1).      
+00033070: 2020 4e6f 7465 2822 6327 2738 2229 2044    Note("c''8") D
+00033080: 796e 616d 6963 286e 616d 653d 276d 6627  ynamic(name='mf'
+00033090: 2c20 636f 6d6d 616e 643d 4e6f 6e65 2c20  , command=None, 
+000330a0: 666f 726d 6174 5f68 6169 7270 696e 5f73  format_hairpin_s
+000330b0: 746f 703d 4661 6c73 652c 2068 6964 653d  top=False, hide=
+000330c0: 4661 6c73 652c 206c 6561 6b3d 4661 6c73  False, leak=Fals
+000330d0: 652c 206e 616d 655f 6973 5f74 6578 7475  e, name_is_textu
+000330e0: 616c 3d46 616c 7365 2c20 6f72 6469 6e61  al=False, ordina
+000330f0: 6c3d 3129 0a20 2020 2020 2020 204e 6f74  l=1).        Not
+00033100: 6528 2265 2734 2229 204e 6f6e 650a 2020  e("e'4") None.  
+00033110: 2020 2020 2020 4e6f 7465 2822 6627 3422        Note("f'4"
+00033120: 2920 4e6f 6e65 0a20 2020 2020 2020 204e  ) None.        N
+00033130: 6f74 6528 2265 2738 2229 204e 6f6e 650a  ote("e'8") None.
+00033140: 2020 2020 2020 2020 4e6f 7465 2822 6427          Note("d'
+00033150: 2738 2229 2044 796e 616d 6963 286e 616d  '8") Dynamic(nam
+00033160: 653d 276d 6627 2c20 636f 6d6d 616e 643d  e='mf', command=
+00033170: 4e6f 6e65 2c20 666f 726d 6174 5f68 6169  None, format_hai
+00033180: 7270 696e 5f73 746f 703d 4661 6c73 652c  rpin_stop=False,
+00033190: 2068 6964 653d 4661 6c73 652c 206c 6561   hide=False, lea
+000331a0: 6b3d 4661 6c73 652c 206e 616d 655f 6973  k=False, name_is
+000331b0: 5f74 6578 7475 616c 3d46 616c 7365 2c20  _textual=False, 
+000331c0: 6f72 6469 6e61 6c3d 3129 0a0a 2020 2020  ordinal=1)..    
+000331d0: 2e2e 2020 636f 6e74 6169 6e65 723a 3a20  ..  container:: 
+000331e0: 6578 616d 706c 650a 0a20 2020 2020 2020  example..       
+000331f0: 204d 657a 7a6f 666f 7274 6520 616e 6420   Mezzoforte and 
+00033200: 7069 616e 6f20 7365 7420 6174 2074 6865  piano set at the
+00033210: 2073 616d 6520 7469 6d65 3a0a 0a20 2020   same time:..   
+00033220: 2020 2020 203e 3e3e 206f 7574 6572 5f72       >>> outer_r
+00033230: 6564 5f76 6f69 6365 203d 2061 626a 6164  ed_voice = abjad
+00033240: 2e56 6f69 6365 2822 6527 2738 2064 2727  .Voice("e''8 d''
+00033250: 222c 206e 616d 653d 2752 6564 5f56 6f69  ", name='Red_Voi
+00033260: 6365 2729 0a20 2020 2020 2020 203e 3e3e  ce').        >>>
+00033270: 2069 6e6e 6572 5f72 6564 5f76 6f69 6365   inner_red_voice
+00033280: 203d 2061 626a 6164 2e56 6f69 6365 2822   = abjad.Voice("
+00033290: 6327 2734 2062 2720 6327 2738 222c 206e  c''4 b' c''8", n
+000332a0: 616d 653d 2752 6564 5f56 6f69 6365 2729  ame='Red_Voice')
+000332b0: 0a20 2020 2020 2020 203e 3e3e 2069 6e6e  .        >>> inn
+000332c0: 6572 5f62 6c75 655f 766f 6963 6520 3d20  er_blue_voice = 
+000332d0: 6162 6a61 642e 566f 6963 6528 2265 2734  abjad.Voice("e'4
+000332e0: 2066 2720 6527 3822 2c20 6e61 6d65 3d27   f' e'8", name='
+000332f0: 426c 7565 5f56 6f69 6365 2729 0a20 2020  Blue_Voice').   
+00033300: 2020 2020 203e 3e3e 2063 6f6e 7461 696e       >>> contain
+00033310: 6572 203d 2061 626a 6164 2e43 6f6e 7461  er = abjad.Conta
+00033320: 696e 6572 280a 2020 2020 2020 2020 2e2e  iner(.        ..
+00033330: 2e20 2020 2020 5b69 6e6e 6572 5f72 6564  .     [inner_red
+00033340: 5f76 6f69 6365 2c20 696e 6e65 725f 626c  _voice, inner_bl
+00033350: 7565 5f76 6f69 6365 5d2c 0a20 2020 2020  ue_voice],.     
+00033360: 2020 202e 2e2e 2020 2020 2073 696d 756c     ...     simul
+00033370: 7461 6e65 6f75 733d 5472 7565 2c0a 2020  taneous=True,.  
+00033380: 2020 2020 2020 2e2e 2e20 2020 2020 290a        ...     ).
+00033390: 2020 2020 2020 2020 3e3e 3e20 6f75 7465          >>> oute
+000333a0: 725f 7265 645f 766f 6963 652e 6170 7065  r_red_voice.appe
+000333b0: 6e64 2863 6f6e 7461 696e 6572 290a 2020  nd(container).  
+000333c0: 2020 2020 2020 3e3e 3e20 6f75 7465 725f        >>> outer_
+000333d0: 7265 645f 766f 6963 652e 6578 7465 6e64  red_voice.extend
+000333e0: 2822 6427 2738 2229 0a20 2020 2020 2020  ("d''8").       
+000333f0: 203e 3e3e 2061 626a 6164 2e6f 7665 7272   >>> abjad.overr
+00033400: 6964 6528 6f75 7465 725f 7265 645f 766f  ide(outer_red_vo
+00033410: 6963 6529 2e4e 6f74 6548 6561 642e 636f  ice).NoteHead.co
+00033420: 6c6f 7220 3d20 2223 7265 6422 0a20 2020  lor = "#red".   
+00033430: 2020 2020 203e 3e3e 206c 6974 6572 616c       >>> literal
+00033440: 203d 2061 626a 6164 2e4c 696c 7950 6f6e   = abjad.LilyPon
+00033450: 644c 6974 6572 616c 2872 275c 766f 6963  dLiteral(r'\voic
+00033460: 654f 6e65 2729 0a20 2020 2020 2020 203e  eOne').        >
+00033470: 3e3e 2061 626a 6164 2e61 7474 6163 6828  >> abjad.attach(
+00033480: 6c69 7465 7261 6c2c 206f 7574 6572 5f72  literal, outer_r
+00033490: 6564 5f76 6f69 6365 5b30 5d29 0a20 2020  ed_voice[0]).   
+000334a0: 2020 2020 203e 3e3e 2061 626a 6164 2e6f       >>> abjad.o
+000334b0: 7665 7272 6964 6528 696e 6e65 725f 626c  verride(inner_bl
+000334c0: 7565 5f76 6f69 6365 292e 4e6f 7465 4865  ue_voice).NoteHe
+000334d0: 6164 2e63 6f6c 6f72 203d 2022 2362 6c75  ad.color = "#blu
+000334e0: 6522 0a20 2020 2020 2020 203e 3e3e 206c  e".        >>> l
+000334f0: 6974 6572 616c 203d 2061 626a 6164 2e4c  iteral = abjad.L
+00033500: 696c 7950 6f6e 644c 6974 6572 616c 2872  ilyPondLiteral(r
+00033510: 275c 766f 6963 6554 776f 2729 0a20 2020  '\voiceTwo').   
+00033520: 2020 2020 203e 3e3e 2061 626a 6164 2e61       >>> abjad.a
+00033530: 7474 6163 6828 6c69 7465 7261 6c2c 2069  ttach(literal, i
+00033540: 6e6e 6572 5f62 6c75 655f 766f 6963 655b  nner_blue_voice[
+00033550: 305d 290a 2020 2020 2020 2020 3e3e 3e20  0]).        >>> 
+00033560: 6479 6e61 6d69 6320 3d20 6162 6a61 642e  dynamic = abjad.
+00033570: 4479 6e61 6d69 6328 276d 6627 290a 2020  Dynamic('mf').  
+00033580: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+00033590: 6174 7461 6368 2864 796e 616d 6963 2c20  attach(dynamic, 
+000335a0: 696e 6e65 725f 7265 645f 766f 6963 655b  inner_red_voice[
+000335b0: 305d 290a 2020 2020 2020 2020 3e3e 3e20  0]).        >>> 
+000335c0: 6479 6e61 6d69 6320 3d20 6162 6a61 642e  dynamic = abjad.
+000335d0: 4479 6e61 6d69 6328 2770 2729 0a20 2020  Dynamic('p').   
+000335e0: 2020 2020 203e 3e3e 2061 626a 6164 2e61       >>> abjad.a
+000335f0: 7474 6163 6828 6479 6e61 6d69 632c 2069  ttach(dynamic, i
+00033600: 6e6e 6572 5f62 6c75 655f 766f 6963 655b  nner_blue_voice[
+00033610: 305d 290a 2020 2020 2020 2020 3e3e 3e20  0]).        >>> 
+00033620: 6162 6a61 642e 7368 6f77 286f 7574 6572  abjad.show(outer
+00033630: 5f72 6564 5f76 6f69 6365 2920 2320 646f  _red_voice) # do
+00033640: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
+00033650: 2020 2020 2020 2e2e 2020 646f 6373 3a3a        ..  docs::
+00033660: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+00033670: 3e20 7374 7269 6e67 203d 2061 626a 6164  > string = abjad
+00033680: 2e6c 696c 7970 6f6e 6428 6f75 7465 725f  .lilypond(outer_
+00033690: 7265 645f 766f 6963 6529 0a20 2020 2020  red_voice).     
+000336a0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+000336b0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+000336c0: 2020 2020 205c 636f 6e74 6578 7420 566f       \context Vo
+000336d0: 6963 6520 3d20 2252 6564 5f56 6f69 6365  ice = "Red_Voice
+000336e0: 220a 2020 2020 2020 2020 2020 2020 5c77  ".            \w
+000336f0: 6974 680a 2020 2020 2020 2020 2020 2020  ith.            
+00033700: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00033710: 2020 5c6f 7665 7272 6964 6520 4e6f 7465    \override Note
+00033720: 4865 6164 2e63 6f6c 6f72 203d 2023 7265  Head.color = #re
+00033730: 640a 2020 2020 2020 2020 2020 2020 7d0a  d.            }.
+00033740: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00033750: 2020 2020 2020 2020 2020 2020 2020 5c76                \v
+00033760: 6f69 6365 4f6e 650a 2020 2020 2020 2020  oiceOne.        
+00033770: 2020 2020 2020 2020 6527 2738 0a20 2020          e''8.   
+00033780: 2020 2020 2020 2020 2020 2020 2064 2727               d''
+00033790: 380a 2020 2020 2020 2020 2020 2020 2020  8.              
+000337a0: 2020 3c3c 0a20 2020 2020 2020 2020 2020    <<.           
+000337b0: 2020 2020 2020 2020 205c 636f 6e74 6578           \contex
+000337c0: 7420 566f 6963 6520 3d20 2252 6564 5f56  t Voice = "Red_V
+000337d0: 6f69 6365 220a 2020 2020 2020 2020 2020  oice".          
+000337e0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+000337f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033800: 2020 2020 6327 2734 0a20 2020 2020 2020      c''4.       
+00033810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033820: 205c 6d66 0a20 2020 2020 2020 2020 2020   \mf.           
+00033830: 2020 2020 2020 2020 2020 2020 2062 2734               b'4
+00033840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033850: 2020 2020 2020 2020 2063 2727 380a 2020           c''8.  
+00033860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033870: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+00033880: 2020 2020 2020 2020 5c63 6f6e 7465 7874          \context
+00033890: 2056 6f69 6365 203d 2022 426c 7565 5f56   Voice = "Blue_V
+000338a0: 6f69 6365 220a 2020 2020 2020 2020 2020  oice".          
+000338b0: 2020 2020 2020 2020 2020 5c77 6974 680a            \with.
+000338c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000338d0: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+000338e0: 2020 2020 2020 2020 2020 2020 2020 5c6f                \o
+000338f0: 7665 7272 6964 6520 4e6f 7465 4865 6164  verride NoteHead
+00033900: 2e63 6f6c 6f72 203d 2023 626c 7565 0a20  .color = #blue. 
+00033910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033920: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
+00033930: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00033940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033950: 2020 205c 766f 6963 6554 776f 0a20 2020     \voiceTwo.   
+00033960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033970: 2020 2020 2065 2734 0a20 2020 2020 2020       e'4.       
+00033980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033990: 205c 700a 2020 2020 2020 2020 2020 2020   \p.            
+000339a0: 2020 2020 2020 2020 2020 2020 6627 340a              f'4.
+000339b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000339c0: 2020 2020 2020 2020 6527 380a 2020 2020          e'8.    
+000339d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000339e0: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
+000339f0: 2020 3e3e 0a20 2020 2020 2020 2020 2020    >>.           
+00033a00: 2020 2020 2064 2727 380a 2020 2020 2020       d''8.      
+00033a10: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
+00033a20: 203e 3e3e 2066 6f72 206c 6561 6620 696e   >>> for leaf in
+00033a30: 2061 626a 6164 2e69 7465 7261 7465 2e6c   abjad.iterate.l
+00033a40: 6561 7665 7328 6f75 7465 725f 7265 645f  eaves(outer_red_
+00033a50: 766f 6963 6529 3a0a 2020 2020 2020 2020  voice):.        
+00033a60: 2e2e 2e20 2020 2020 6479 6e61 6d69 6320  ...     dynamic 
+00033a70: 3d20 6162 6a61 642e 6765 742e 6566 6665  = abjad.get.effe
+00033a80: 6374 6976 6528 6c65 6166 2c20 6162 6a61  ctive(leaf, abja
+00033a90: 642e 4479 6e61 6d69 6329 0a20 2020 2020  d.Dynamic).     
+00033aa0: 2020 202e 2e2e 2020 2020 2070 7269 6e74     ...     print
+00033ab0: 286c 6561 662c 2064 796e 616d 6963 290a  (leaf, dynamic).
+00033ac0: 2020 2020 2020 2020 2e2e 2e0a 2020 2020          ....    
+00033ad0: 2020 2020 4e6f 7465 2822 6527 2738 2229      Note("e''8")
+00033ae0: 204e 6f6e 650a 2020 2020 2020 2020 4e6f   None.        No
+00033af0: 7465 2822 6427 2738 2229 204e 6f6e 650a  te("d''8") None.
+00033b00: 2020 2020 2020 2020 4e6f 7465 2822 6327          Note("c'
+00033b10: 2734 2229 2044 796e 616d 6963 286e 616d  '4") Dynamic(nam
+00033b20: 653d 276d 6627 2c20 636f 6d6d 616e 643d  e='mf', command=
+00033b30: 4e6f 6e65 2c20 666f 726d 6174 5f68 6169  None, format_hai
+00033b40: 7270 696e 5f73 746f 703d 4661 6c73 652c  rpin_stop=False,
+00033b50: 2068 6964 653d 4661 6c73 652c 206c 6561   hide=False, lea
+00033b60: 6b3d 4661 6c73 652c 206e 616d 655f 6973  k=False, name_is
+00033b70: 5f74 6578 7475 616c 3d46 616c 7365 2c20  _textual=False, 
+00033b80: 6f72 6469 6e61 6c3d 3129 0a20 2020 2020  ordinal=1).     
+00033b90: 2020 204e 6f74 6528 2262 2734 2229 2044     Note("b'4") D
+00033ba0: 796e 616d 6963 286e 616d 653d 276d 6627  ynamic(name='mf'
+00033bb0: 2c20 636f 6d6d 616e 643d 4e6f 6e65 2c20  , command=None, 
+00033bc0: 666f 726d 6174 5f68 6169 7270 696e 5f73  format_hairpin_s
+00033bd0: 746f 703d 4661 6c73 652c 2068 6964 653d  top=False, hide=
+00033be0: 4661 6c73 652c 206c 6561 6b3d 4661 6c73  False, leak=Fals
+00033bf0: 652c 206e 616d 655f 6973 5f74 6578 7475  e, name_is_textu
+00033c00: 616c 3d46 616c 7365 2c20 6f72 6469 6e61  al=False, ordina
+00033c10: 6c3d 3129 0a20 2020 2020 2020 204e 6f74  l=1).        Not
+00033c20: 6528 2263 2727 3822 2920 4479 6e61 6d69  e("c''8") Dynami
+00033c30: 6328 6e61 6d65 3d27 6d66 272c 2063 6f6d  c(name='mf', com
+00033c40: 6d61 6e64 3d4e 6f6e 652c 2066 6f72 6d61  mand=None, forma
+00033c50: 745f 6861 6972 7069 6e5f 7374 6f70 3d46  t_hairpin_stop=F
+00033c60: 616c 7365 2c20 6869 6465 3d46 616c 7365  alse, hide=False
+00033c70: 2c20 6c65 616b 3d46 616c 7365 2c20 6e61  , leak=False, na
+00033c80: 6d65 5f69 735f 7465 7874 7561 6c3d 4661  me_is_textual=Fa
+00033c90: 6c73 652c 206f 7264 696e 616c 3d31 290a  lse, ordinal=1).
+00033ca0: 2020 2020 2020 2020 4e6f 7465 2822 6527          Note("e'
+00033cb0: 3422 2920 4479 6e61 6d69 6328 6e61 6d65  4") Dynamic(name
+00033cc0: 3d27 7027 2c20 636f 6d6d 616e 643d 4e6f  ='p', command=No
+00033cd0: 6e65 2c20 666f 726d 6174 5f68 6169 7270  ne, format_hairp
+00033ce0: 696e 5f73 746f 703d 4661 6c73 652c 2068  in_stop=False, h
+00033cf0: 6964 653d 4661 6c73 652c 206c 6561 6b3d  ide=False, leak=
+00033d00: 4661 6c73 652c 206e 616d 655f 6973 5f74  False, name_is_t
+00033d10: 6578 7475 616c 3d46 616c 7365 2c20 6f72  extual=False, or
+00033d20: 6469 6e61 6c3d 2d32 290a 2020 2020 2020  dinal=-2).      
+00033d30: 2020 4e6f 7465 2822 6627 3422 2920 4479    Note("f'4") Dy
+00033d40: 6e61 6d69 6328 6e61 6d65 3d27 7027 2c20  namic(name='p', 
+00033d50: 636f 6d6d 616e 643d 4e6f 6e65 2c20 666f  command=None, fo
+00033d60: 726d 6174 5f68 6169 7270 696e 5f73 746f  rmat_hairpin_sto
+00033d70: 703d 4661 6c73 652c 2068 6964 653d 4661  p=False, hide=Fa
+00033d80: 6c73 652c 206c 6561 6b3d 4661 6c73 652c  lse, leak=False,
+00033d90: 206e 616d 655f 6973 5f74 6578 7475 616c   name_is_textual
+00033da0: 3d46 616c 7365 2c20 6f72 6469 6e61 6c3d  =False, ordinal=
+00033db0: 2d32 290a 2020 2020 2020 2020 4e6f 7465  -2).        Note
+00033dc0: 2822 6527 3822 2920 4479 6e61 6d69 6328  ("e'8") Dynamic(
+00033dd0: 6e61 6d65 3d27 7027 2c20 636f 6d6d 616e  name='p', comman
+00033de0: 643d 4e6f 6e65 2c20 666f 726d 6174 5f68  d=None, format_h
+00033df0: 6169 7270 696e 5f73 746f 703d 4661 6c73  airpin_stop=Fals
+00033e00: 652c 2068 6964 653d 4661 6c73 652c 206c  e, hide=False, l
+00033e10: 6561 6b3d 4661 6c73 652c 206e 616d 655f  eak=False, name_
+00033e20: 6973 5f74 6578 7475 616c 3d46 616c 7365  is_textual=False
+00033e30: 2c20 6f72 6469 6e61 6c3d 2d32 290a 2020  , ordinal=-2).  
+00033e40: 2020 2020 2020 4e6f 7465 2822 6427 2738        Note("d''8
+00033e50: 2229 2044 796e 616d 6963 286e 616d 653d  ") Dynamic(name=
+00033e60: 276d 6627 2c20 636f 6d6d 616e 643d 4e6f  'mf', command=No
+00033e70: 6e65 2c20 666f 726d 6174 5f68 6169 7270  ne, format_hairp
+00033e80: 696e 5f73 746f 703d 4661 6c73 652c 2068  in_stop=False, h
+00033e90: 6964 653d 4661 6c73 652c 206c 6561 6b3d  ide=False, leak=
+00033ea0: 4661 6c73 652c 206e 616d 655f 6973 5f74  False, name_is_t
+00033eb0: 6578 7475 616c 3d46 616c 7365 2c20 6f72  extual=False, or
+00033ec0: 6469 6e61 6c3d 3129 0a0a 2020 2020 2e2e  dinal=1)..    ..
+00033ed0: 2020 636f 6e74 6169 6e65 723a 3a20 6578    container:: ex
+00033ee0: 616d 706c 650a 0a20 2020 2020 2020 2053  ample..        S
+00033ef0: 656c 6563 7473 206c 616e 6775 6167 653a  elects language:
+00033f00: 0a0a 2020 2020 2020 2020 3e3e 3e20 6162  ..        >>> ab
+00033f10: 6a61 642e 566f 6963 6528 2264 6f27 3820  jad.Voice("do'8 
+00033f20: 7265 2720 6d69 2720 6661 2722 2c20 6c61  re' mi' fa'", la
+00033f30: 6e67 7561 6765 3d22 6672 616e c3a7 6169  nguage="fran..ai
+00033f40: 7322 290a 2020 2020 2020 2020 566f 6963  s").        Voic
+00033f50: 6528 2263 2738 2064 2738 2065 2738 2066  e("c'8 d'8 e'8 f
+00033f60: 2738 2229 0a0a 2020 2020 2222 220a 0a20  '8")..    """.. 
+00033f70: 2020 2023 2323 2043 4c41 5353 2056 4152     ### CLASS VAR
+00033f80: 4941 424c 4553 2023 2323 0a0a 2020 2020  IABLES ###..    
+00033f90: 5f5f 646f 6375 6d65 6e74 6174 696f 6e5f  __documentation_
+00033fa0: 7365 6374 696f 6e5f 5f20 3d20 2243 6f6e  section__ = "Con
+00033fb0: 7465 7874 7322 0a0a 2020 2020 5f5f 736c  texts"..    __sl
+00033fc0: 6f74 735f 5f20 3d20 2829 0a0a 2020 2020  ots__ = ()..    
+00033fd0: 5f64 6566 6175 6c74 5f6c 696c 7970 6f6e  _default_lilypon
+00033fe0: 645f 7479 7065 203d 2022 566f 6963 6522  d_type = "Voice"
+00033ff0: 0a0a 2020 2020 2323 2320 494e 4954 4941  ..    ### INITIA
+00034000: 4c49 5a45 5220 2323 230a 0a20 2020 2023  LIZER ###..    #
+00034010: 2054 4f44 4f3a 206d 616b 6520 6b65 7977   TODO: make keyw
+00034020: 6f72 6473 206d 616e 6461 746f 7279 0a20  ords mandatory. 
+00034030: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00034040: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+00034050: 2020 2020 2020 2063 6f6d 706f 6e65 6e74         component
+00034060: 733d 4e6f 6e65 2c0a 2020 2020 2020 2020  s=None,.        
+00034070: 6c69 6c79 706f 6e64 5f74 7970 653a 2073  lilypond_type: s
+00034080: 7472 203d 2022 566f 6963 6522 2c0a 2020  tr = "Voice",.  
+00034090: 2020 2020 2020 7369 6d75 6c74 616e 656f        simultaneo
+000340a0: 7573 3a20 626f 6f6c 203d 2046 616c 7365  us: bool = False
+000340b0: 2c0a 2020 2020 2020 2020 6e61 6d65 3a20  ,.        name: 
+000340c0: 7374 7220 3d20 4e6f 6e65 2c0a 2020 2020  str = None,.    
+000340d0: 2020 2020 7461 673a 205f 7461 672e 5461      tag: _tag.Ta
+000340e0: 6720 3d20 4e6f 6e65 2c0a 2020 2020 2020  g = None,.      
+000340f0: 2020 2a2c 0a20 2020 2020 2020 206c 616e    *,.        lan
+00034100: 6775 6167 653a 2073 7472 203d 2022 656e  guage: str = "en
+00034110: 676c 6973 6822 2c0a 2020 2020 2920 2d3e  glish",.    ) ->
+00034120: 204e 6f6e 653a 0a20 2020 2020 2020 2043   None:.        C
+00034130: 6f6e 7465 7874 2e5f 5f69 6e69 745f 5f28  ontext.__init__(
+00034140: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00034150: 662c 0a20 2020 2020 2020 2020 2020 2063  f,.            c
+00034160: 6f6d 706f 6e65 6e74 733d 636f 6d70 6f6e  omponents=compon
+00034170: 656e 7473 2c0a 2020 2020 2020 2020 2020  ents,.          
+00034180: 2020 6c61 6e67 7561 6765 3d6c 616e 6775    language=langu
+00034190: 6167 652c 0a20 2020 2020 2020 2020 2020  age,.           
+000341a0: 206c 696c 7970 6f6e 645f 7479 7065 3d6c   lilypond_type=l
+000341b0: 696c 7970 6f6e 645f 7479 7065 2c0a 2020  ilypond_type,.  
+000341c0: 2020 2020 2020 2020 2020 7369 6d75 6c74            simult
+000341d0: 616e 656f 7573 3d73 696d 756c 7461 6e65  aneous=simultane
+000341e0: 6f75 732c 0a20 2020 2020 2020 2020 2020  ous,.           
+000341f0: 206e 616d 653d 6e61 6d65 2c0a 2020 2020   name=name,.    
+00034200: 2020 2020 2020 2020 7461 673d 7461 672c          tag=tag,
+00034210: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00034220: 2323 2320 5055 424c 4943 2050 524f 5045  ### PUBLIC PROPE
+00034230: 5254 4945 5320 2323 230a 0a20 2020 2040  RTIES ###..    @
+00034240: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00034250: 2074 6167 2873 656c 6629 202d 3e20 5f74   tag(self) -> _t
+00034260: 6167 2e54 6167 207c 204e 6f6e 653a 0a20  ag.Tag | None:. 
+00034270: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
+00034280: 2020 2020 4765 7473 2074 6167 2e0a 0a20      Gets tag... 
+00034290: 2020 2020 2020 202e 2e20 2063 6f6e 7461         ..  conta
+000342a0: 696e 6572 3a3a 2065 7861 6d70 6c65 0a0a  iner:: example..
+000342b0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+000342c0: 766f 6963 6520 3d20 6162 6a61 642e 566f  voice = abjad.Vo
+000342d0: 6963 6528 2263 2734 2064 2720 6527 2066  ice("c'4 d' e' f
+000342e0: 2722 2c20 7461 673d 6162 6a61 642e 5461  '", tag=abjad.Ta
+000342f0: 6728 2752 4544 2729 290a 2020 2020 2020  g('RED')).      
+00034300: 2020 2020 2020 3e3e 3e20 6162 6a61 642e        >>> abjad.
+00034310: 7368 6f77 2876 6f69 6365 2920 2320 646f  show(voice) # do
+00034320: 6374 6573 743a 202b 534b 4950 0a0a 2020  ctest: +SKIP..  
+00034330: 2020 2020 2020 2020 2020 3e3e 3e20 7374            >>> st
+00034340: 7269 6e67 203d 2061 626a 6164 2e6c 696c  ring = abjad.lil
+00034350: 7970 6f6e 6428 766f 6963 652c 2074 6167  ypond(voice, tag
+00034360: 733d 5472 7565 290a 2020 2020 2020 2020  s=True).        
+00034370: 2020 2020 3e3e 3e20 7072 696e 7428 7374      >>> print(st
+00034380: 7269 6e67 290a 2020 2020 2020 2020 2020  ring).          
+00034390: 2020 2521 2052 4544 0a20 2020 2020 2020    %! RED.       
+000343a0: 2020 2020 205c 6e65 7720 566f 6963 650a       \new Voice.
+000343b0: 2020 2020 2020 2020 2020 2020 2521 2052              %! R
+000343c0: 4544 0a20 2020 2020 2020 2020 2020 207b  ED.            {
+000343d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000343e0: 2063 2734 0a20 2020 2020 2020 2020 2020   c'4.           
+000343f0: 2020 2020 2064 2734 0a20 2020 2020 2020       d'4.       
+00034400: 2020 2020 2020 2020 2065 2734 0a20 2020           e'4.   
+00034410: 2020 2020 2020 2020 2020 2020 2066 2734               f'4
+00034420: 0a20 2020 2020 2020 2020 2020 2025 2120  .            %! 
+00034430: 5245 440a 2020 2020 2020 2020 2020 2020  RED.            
+00034440: 7d0a 0a20 2020 2020 2020 2022 2222 0a20  }..        """. 
+00034450: 2020 2020 2020 2072 6574 7572 6e20 7375         return su
+00034460: 7065 7228 292e 7461 670a                 per().tag.
```

### Comparing `abjad-3.8/abjad/select.py` & `abjad-3.9/abjad/select.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,40 +1,40 @@
 import collections
 import itertools
 import typing
 
-from . import _inspect, _iterate, _update
+from . import _getlib, _iterlib, _updatelib
 from . import cyclictuple as _cyclictuple
 from . import duration as _duration
 from . import enums as _enums
-from . import iterate as iterate_
+from . import iterate as _iterate
 from . import parentage as _parentage
 from . import pattern as _pattern
 from . import pcollections as _pcollections
 from . import ratio as _ratio
 from . import score as _score
 from . import sequence as _sequence
 from . import typings as _typings
 
 
 def _head_filter_subresult(result, head):
     result_ = []
     for item in result:
         if isinstance(item, _score.Component):
-            leaves = _iterate._get_logical_tie_leaves(item)
+            leaves = _iterlib._get_logical_tie_leaves(item)
             if head == (item is leaves[0]):
                 result_.append(item)
             else:
                 pass
         else:
             if not all(isinstance(_, _score.Component) for _ in item):
                 raise NotImplementedError(item)
             selection = []
             for component in item:
-                leaves = _iterate._get_logical_tie_leaves(component)
+                leaves = _iterlib._get_logical_tie_leaves(component)
                 if head == leaves[0]:
                     selection.append(item)
                 else:
                     pass
             result_.append(selection)
     assert isinstance(result_, list), repr(result_)
     return result_
@@ -48,25 +48,25 @@
     return None
 
 
 def _tail_filter_subresult(result, tail):
     result_ = []
     for item in result:
         if isinstance(item, _score.Component):
-            leaves = _iterate._get_logical_tie_leaves(item)
+            leaves = _iterlib._get_logical_tie_leaves(item)
             if tail == (item is leaves[-1]):
                 result_.append(item)
             else:
                 pass
         else:
             if not all(isinstance(_, _score.Component) for _ in item):
                 raise NotImplementedError(item)
             selection = []
             for component in item:
-                leaves = _iterate._get_logical_tie_leaves(component)
+                leaves = _iterlib._get_logical_tie_leaves(component)
                 if tail == leaves[-1]:
                     selection.append(item)
                 else:
                     pass
             result_.append(selection)
     assert isinstance(result_, list), repr(result_)
     return result_
@@ -240,15 +240,15 @@
         """
         Sum of written duration of all components in logical tie.
         """
         return _duration.Duration(sum([_.written_duration for _ in self]))
 
 
 def chord(
-    argument, n: int, *, exclude: _typings.Strings = None, grace: bool = None
+    argument, n: int, *, exclude: _typings.Exclude = None, grace: bool = None
 ) -> _score.Chord:
     r"""
     Selects chord ``n`` in ``argument``.
 
     ..  container:: example
 
         Selects chord -1:
@@ -327,15 +327,15 @@
             >>
 
     """
     return chords(argument, exclude=exclude, grace=grace)[n]
 
 
 def chords(
-    argument, *, exclude: _typings.Strings = None, grace: bool = None
+    argument, *, exclude: _typings.Exclude = None, grace: bool = None
 ) -> list[_score.Chord]:
     r"""
     Selects chords in ``argument``.
 
     ..  container:: example
 
         Selects chords:
@@ -440,15 +440,15 @@
     return items
 
 
 def components(
     argument,
     prototype=None,
     *,
-    exclude: _typings.Strings = None,
+    exclude: _typings.Exclude = None,
     grace: bool = None,
     reverse: bool = None,
 ) -> list[_score.Component]:
     r"""
     Selects components.
 
     ..  container:: example
@@ -664,15 +664,15 @@
                     gf'16
                 }
                 e'8
                 f'8
             }
 
     """
-    generator = _iterate._public_iterate_components(
+    generator = _iterlib._public_iterate_components(
         argument, prototype=prototype, exclude=exclude, grace=grace, reverse=reverse
     )
     return list(generator)
 
 
 def exclude(argument, indices: typing.Sequence[int], period: int = None) -> list:
     r"""
@@ -929,16 +929,16 @@
                     \override TupletBracket.staff-padding = 3
                     autoBeaming = ##f
                 }
                 {
                     \tweak text #tuplet-number::calc-fraction-text
                     \times 10/9
                     {
-                        \time 7/4
                         \abjad-color-music #'red
+                        \time 7/4
                         r16
                         \abjad-color-music #'red
                         bf'16
                         <a'' b''>16
                         c'16
                         <d' e'>4
                         ~
@@ -1019,16 +1019,16 @@
                     \override TupletBracket.staff-padding = 3
                     autoBeaming = ##f
                 }
                 {
                     \tweak text #tuplet-number::calc-fraction-text
                     \times 10/9
                     {
-                        \time 7/4
                         \abjad-color-music #'red
+                        \time 7/4
                         r16
                         \abjad-color-music #'blue
                         bf'16
                         <a'' b''>16
                         c'16
                         <d' e'>4
                         ~
@@ -1065,16 +1065,18 @@
     """
     items = _sequence.flatten(argument, depth=depth)
     return list(items)
 
 
 def get(
     argument,
-    indices: typing.Sequence[int] | _pattern.Pattern,
+    indices: typing.Sequence[int] | tuple[list[int], int] | _pattern.Pattern,
     period: int = None,
+    *,
+    invert: bool = False,
 ) -> list:
     r"""
     Gets items in ``argument`` at ``indices`` according to ``period``.
 
     ..  container:: example
 
         Gets every other leaf:
@@ -1217,16 +1219,24 @@
                 f'8
             }
 
     """
     if isinstance(indices, _pattern.Pattern):
         assert period is None
         pattern = indices
+    elif isinstance(indices, tuple):
+        assert len(indices) == 2, repr(indices)
+        indices, period = indices
+        assert isinstance(indices, list), repr(indices)
+        assert isinstance(period, int), repr(period)
+        pattern = _pattern.Pattern(indices, period=period)
     else:
         pattern = _pattern.Pattern(indices, period=period)
+    if invert is True:
+        pattern = ~pattern
     items = _sequence.retain_pattern(argument, pattern)
     return list(items)
 
 
 def group(argument) -> list[list]:
     r"""
     Groups ``argument`` in selection.
@@ -1649,16 +1659,16 @@
             }
 
     '''
     result = []
     selection = []
     selection.extend(argument[:1])
     for item in argument[1:]:
-        this_timespan = _inspect._get_timespan(selection[-1])
-        that_timespan = _inspect._get_timespan(item)
+        this_timespan = _getlib._get_timespan(selection[-1])
+        that_timespan = _getlib._get_timespan(item)
         # remove displacement
         this_stop_offset = this_timespan.stop_offset
         this_stop_offset = _duration.Offset(this_stop_offset.pair)
         that_start_offset = that_timespan.start_offset
         that_start_offset = _duration.Offset(that_start_offset.pair)
         # if this_timespan.stop_offset == that_timespan.start_offset:
         if this_stop_offset == that_start_offset:
@@ -1734,15 +1744,15 @@
                 \abjad-color-music #'blue
                 f'16
             }
 
     """
 
     def predicate(argument):
-        return _inspect._get_duration(argument)
+        return _getlib._get_duration(argument)
 
     return group_by(argument, predicate=predicate)
 
 
 def group_by_length(argument) -> list[list]:
     r"""
     Groups items in ``argument`` by length.
@@ -1849,32 +1859,32 @@
             >>> print(string)
             \new Staff
             \with
             {
                 autoBeaming = ##f
             }
             {
-                \time 2/8
                 \abjad-color-music #'red
+                \time 2/8
                 c'8
                 \abjad-color-music #'red
                 d'8
                 \abjad-color-music #'blue
                 e'8
                 \abjad-color-music #'blue
                 f'8
-                \time 3/8
                 \abjad-color-music #'red
+                \time 3/8
                 g'8
                 \abjad-color-music #'red
                 a'8
                 \abjad-color-music #'red
                 b'8
-                \time 1/8
                 \abjad-color-music #'blue
+                \time 1/8
                 c''8
             }
 
     ..  container:: example
 
         Groups leaves by measure and joins pairs of consecutive groups:
 
@@ -1904,32 +1914,32 @@
             >>> print(string)
             \new Staff
             \with
             {
                 autoBeaming = ##f
             }
             {
-                \time 2/8
                 \abjad-color-music #'red
+                \time 2/8
                 c'8
                 \abjad-color-music #'red
                 d'8
                 \abjad-color-music #'red
                 e'8
                 \abjad-color-music #'red
                 f'8
-                \time 3/8
                 \abjad-color-music #'blue
+                \time 3/8
                 g'8
                 \abjad-color-music #'blue
                 a'8
                 \abjad-color-music #'blue
                 b'8
-                \time 1/8
                 \abjad-color-music #'blue
+                \time 1/8
                 c''8
             }
 
     ..  container:: example
 
         Groups leaves by measure; then gets item 0 in each group:
 
@@ -1959,28 +1969,28 @@
             >>> print(string)
             \new Staff
             \with
             {
                 autoBeaming = ##f
             }
             {
-                \time 2/8
                 \abjad-color-music #'red
+                \time 2/8
                 c'8
                 d'8
                 \abjad-color-music #'blue
                 e'8
                 f'8
-                \time 3/8
                 \abjad-color-music #'red
+                \time 3/8
                 g'8
                 a'8
                 b'8
-                \time 1/8
                 \abjad-color-music #'blue
+                \time 1/8
                 c''8
             }
 
     ..  container:: example
 
         Groups leaves by measure; then gets item -1 in each group:
 
@@ -2023,16 +2033,16 @@
                 \abjad-color-music #'blue
                 f'8
                 \time 3/8
                 g'8
                 a'8
                 \abjad-color-music #'red
                 b'8
-                \time 1/8
                 \abjad-color-music #'blue
+                \time 1/8
                 c''8
             }
 
     ..  container:: example
 
         Works with implicit time signatures:
 
@@ -2111,35 +2121,35 @@
             >>> print(string)
             \new Staff
             \with
             {
                 autoBeaming = ##f
             }
             {
-                \time 2/8
                 \abjad-color-music #'red
+                \time 2/8
                 c'8
                 \abjad-color-music #'red
                 d'8
                 ~
                 \abjad-color-music #'red
                 d'8
                 \abjad-color-music #'blue
                 e'8
                 ~
-                \time 3/8
                 \abjad-color-music #'blue
+                \time 3/8
                 e'8
                 \abjad-color-music #'red
                 f'8
                 \abjad-color-music #'red
                 g'8
                 ~
-                \time 1/8
                 \abjad-color-music #'red
+                \time 1/8
                 g'8
             }
 
     ..  container:: example
 
         REGRESSION: works for pickup measure:
 
@@ -2165,15 +2175,15 @@
     def _get_measure_number(argument):
         first_component = _get_first_component(argument)
         assert first_component._measure_number is not None
         return first_component._measure_number
 
     selections = []
     first_component = _get_first_component(argument)
-    _update._update_measure_numbers(first_component)
+    _updatelib._update_measure_numbers(first_component)
     pairs = itertools.groupby(argument, _get_measure_number)
     for value, group in pairs:
         selections.append(list(group))
     return selections
 
 
 def group_by_pitch(argument) -> list[list]:
@@ -2237,25 +2247,25 @@
                 \abjad-color-music #'blue
                 f'16
             }
 
     """
 
     def predicate(argument):
-        generator = iterate_.pitches(argument)
+        generator = _iterate.pitches(argument)
         return _pcollections.PitchSet(generator)
 
     return group_by(argument, predicate)
 
 
 def leaf(
     argument,
     n: int,
     *,
-    exclude: _typings.Strings = None,
+    exclude: _typings.Exclude = None,
     grace: bool = None,
     head: bool = None,
     pitched: bool = None,
     prototype=None,
     reverse: bool = None,
     tail: bool = None,
     trim: bool | _enums.Horizontal | None = None,
@@ -2354,15 +2364,15 @@
     )[n]
 
 
 @typing.overload
 def leaves(
     argument,
     *,
-    exclude: _typings.Strings = None,
+    exclude: _typings.Exclude = None,
     grace: bool = None,
     head: bool = None,
     pitched: bool = None,
     reverse: bool = None,
     tail: bool = None,
     trim: bool | _enums.Horizontal | None = None,
 ) -> list[_score.Leaf]:
@@ -2370,15 +2380,15 @@
 
 
 @typing.overload
 def leaves(
     argument,
     prototype: typing.Type[_score.Chord],
     *,
-    exclude: _typings.Strings = None,
+    exclude: _typings.Exclude = None,
     grace: bool = None,
     head: bool = None,
     pitched: bool = None,
     reverse: bool = None,
     tail: bool = None,
     trim: bool | _enums.Horizontal | None = None,
 ) -> list[_score.Chord]:
@@ -2386,15 +2396,15 @@
 
 
 @typing.overload
 def leaves(
     argument,
     prototype: typing.Type[_score.MultimeasureRest],
     *,
-    exclude: _typings.Strings = None,
+    exclude: _typings.Exclude = None,
     grace: bool = None,
     head: bool = None,
     pitched: bool = None,
     reverse: bool = None,
     tail: bool = None,
     trim: bool | _enums.Horizontal | None = None,
 ) -> list[_score.MultimeasureRest]:
@@ -2402,30 +2412,30 @@
 
 
 @typing.overload
 def leaves(
     argument,
     prototype: typing.Type[_score.Note],
     *,
-    exclude: _typings.Strings = None,
+    exclude: _typings.Exclude = None,
     grace: bool = None,
     head: bool = None,
     pitched: bool = None,
     reverse: bool = None,
     tail: bool = None,
     trim: bool | _enums.Horizontal | None = None,
 ) -> list[_score.Note]:
     ...
 
 
 def leaves(
     argument,
     prototype=None,
     *,
-    exclude: _typings.Strings = None,
+    exclude: _typings.Exclude = None,
     grace: bool = None,
     head: bool = None,
     pitched: bool = None,
     reverse: bool = None,
     tail: bool = None,
     trim: bool | _enums.Horizontal | None = None,
 ):
@@ -3292,15 +3302,15 @@
         prototype = (_score.Chord, _score.Note)
     elif prototype is None:
         prototype = _score.Leaf
     prototype = prototype or _score.Component
     if not isinstance(prototype, tuple):
         prototype = (prototype,)
     result = []
-    generator = _iterate._public_iterate_components(
+    generator = _iterlib._public_iterate_components(
         argument, prototype, exclude=exclude, grace=grace
     )
     components = list(generator)
     if components:
         if trim in (True, _enums.LEFT):
             components = _trim_subresult(components, trim)
         if head is not None:
@@ -3311,15 +3321,15 @@
     return result
 
 
 def logical_tie(
     argument,
     n: int = 0,
     *,
-    exclude: _typings.Strings = None,
+    exclude: _typings.Exclude = None,
     grace: bool = None,
     nontrivial: bool = None,
     pitched: bool = None,
     reverse: bool = None,
 ) -> LogicalTie:
     r"""
     Selects logical tie ``n`` in ``argument``.
@@ -3340,15 +3350,15 @@
         reverse=reverse,
     )[n]
 
 
 def logical_ties(
     argument,
     *,
-    exclude: _typings.Strings = None,
+    exclude: _typings.Exclude = None,
     grace: bool = None,
     nontrivial: bool = None,
     pitched: bool = None,
     reverse: bool = None,
 ) -> list[LogicalTie]:
     r'''
     Selects logical ties in ``argument``.
@@ -3808,15 +3818,15 @@
                     gf'16
                 }
                 e'8
                 f'8
             }
 
     '''
-    generator = _iterate._iterate_logical_ties(
+    generator = _iterlib._iterate_logical_ties(
         argument,
         exclude=exclude,
         grace=grace,
         nontrivial=nontrivial,
         pitched=pitched,
         reverse=reverse,
     )
@@ -3873,15 +3883,15 @@
 
     """
     items = [_ for _ in argument if len(_) > 1]
     return items
 
 
 def note(
-    argument, n: int, *, exclude: _typings.Strings = None, grace: bool = None
+    argument, n: int, *, exclude: _typings.Exclude = None, grace: bool = None
 ) -> _score.Note:
     r"""
     Selects note ``n`` in ``argument``.
 
     ..  container:: example
 
         Selects note -1:
@@ -3960,15 +3970,15 @@
             >>
 
     """
     return notes(argument, exclude=exclude, grace=grace)[n]
 
 
 def notes(
-    argument, *, exclude: _typings.Strings = None, grace: bool = None
+    argument, *, exclude: _typings.Exclude = None, grace: bool = None
 ) -> list[_score.Note]:
     r"""
     Selects notes in ``argument``.
 
     ..  container:: example
 
         Selects notes:
@@ -4606,37 +4616,37 @@
             \new Staff
             \with
             {
                 autoBeaming = ##f
             }
             {
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     c'8
                     \abjad-color-music #'red
                     d'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     e'8
                     \abjad-color-music #'blue
                     f'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'blue
+                    \time 2/8
                     g'8
                     \abjad-color-music #'blue
                     a'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     b'8
                     \abjad-color-music #'red
                     c''8
                 }
             }
 
     ..  container:: example
@@ -4680,23 +4690,23 @@
             \new Staff
             \with
             {
                 autoBeaming = ##f
             }
             {
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     c'8
                     \abjad-color-music #'red
                     d'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     e'8
                     f'8
                 }
                 {
                     \time 2/8
                     g'8
                     a'8
@@ -4754,37 +4764,37 @@
             \new Staff
             \with
             {
                 autoBeaming = ##f
             }
             {
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     c'8
                     \abjad-color-music #'red
                     d'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'blue
+                    \time 2/8
                     e'8
                     \abjad-color-music #'red
                     f'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     g'8
                     \abjad-color-music #'blue
                     a'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     b'8
                     \abjad-color-music #'red
                     c''8
                 }
             }
 
     ..  container:: example
@@ -4835,37 +4845,37 @@
             \new Staff
             \with
             {
                 autoBeaming = ##f
             }
             {
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     c'8
                     \abjad-color-music #'blue
                     d'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     e'8
                     \abjad-color-music #'blue
                     f'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     g'8
                     \abjad-color-music #'blue
                     a'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     b'8
                     c''8
                 }
             }
 
     ..  container:: example
 
@@ -4909,16 +4919,16 @@
             \new Staff
             \with
             {
                 autoBeaming = ##f
             }
             {
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     c'8
                     d'8
                 }
                 {
                     \time 2/8
                     e'8
                     f'8
@@ -4982,30 +4992,30 @@
             \with
             {
                 autoBeaming = ##f
             }
             {
                 {
                     \tempo 4=60
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     c'8
                     \abjad-color-music #'red
                     d'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     e'8
                     \abjad-color-music #'blue
                     f'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'blue
+                    \time 2/8
                     g'8
                     \abjad-color-music #'blue
                     a'8
                 }
                 {
                     \time 2/8
                     b'8
@@ -5061,37 +5071,37 @@
             \with
             {
                 autoBeaming = ##f
             }
             {
                 {
                     \tempo 4=60
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     c'8
                     \abjad-color-music #'red
                     d'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     e'8
                     \abjad-color-music #'blue
                     f'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'blue
+                    \time 2/8
                     g'8
                     \abjad-color-music #'blue
                     a'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     b'8
                     \abjad-color-music #'red
                     c''8
                 }
             }
 
     ..  container:: example
@@ -5140,23 +5150,23 @@
             \with
             {
                 autoBeaming = ##f
             }
             {
                 {
                     \tempo 4=60
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     c'8
                     \abjad-color-music #'red
                     d'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     e'8
                     f'8
                 }
                 {
                     \time 2/8
                     g'8
                     a'8
@@ -5220,37 +5230,37 @@
             \with
             {
                 autoBeaming = ##f
             }
             {
                 {
                     \tempo 4=60
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     c'8
                     \abjad-color-music #'blue
                     d'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     e'8
                     \abjad-color-music #'blue
                     f'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     g'8
                     \abjad-color-music #'blue
                     a'8
                 }
                 {
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     b'8
                     c''8
                 }
             }
 
     ..  container:: example
 
@@ -5298,16 +5308,16 @@
             \with
             {
                 autoBeaming = ##f
             }
             {
                 {
                     \tempo 4=60
-                    \time 2/8
                     \abjad-color-music #'red
+                    \time 2/8
                     c'8
                     d'8
                 }
                 {
                     \time 2/8
                     e'8
                     f'8
@@ -5351,15 +5361,15 @@
     while True:
         try:
             component = components_copy.pop(0)
         except IndexError:
             break
         component_duration = component._get_duration()
         if in_seconds:
-            component_duration = _inspect._get_duration_in_seconds(component)
+            component_duration = _getlib._get_duration_in_seconds(component)
         candidate_duration = cumulative_duration + component_duration
         if candidate_duration < target_duration:
             part.append(component)
             cumulative_duration = candidate_duration
         elif candidate_duration == target_duration:
             part.append(component)
             result.append(part)
@@ -5373,18 +5383,18 @@
         elif target_duration < candidate_duration:
             if fill is _enums.EXACT:
                 raise Exception("must partition exactly.")
             elif fill is _enums.LESS:
                 result.append(part)
                 part = [component]
                 if in_seconds:
-                    sum_ = sum([_inspect._get_duration_in_seconds(_) for _ in part])
+                    sum_ = sum([_getlib._get_duration_in_seconds(_) for _ in part])
                     cumulative_duration = _duration.Duration(sum_)
                 else:
-                    sum_ = sum([_inspect._get_duration(_) for _ in part])
+                    sum_ = sum([_getlib._get_duration(_) for _ in part])
                     cumulative_duration = _duration.Duration(sum_)
                 current_duration_index += 1
                 try:
                     target_duration = durations[current_duration_index]
                 except IndexError:
                     break
                 if target_duration < cumulative_duration:
@@ -5529,15 +5539,15 @@
     counts = ratio.partition_integer(len(argument))
     parts = _sequence.partition_by_counts(argument, counts=counts)
     selections = [list(_) for _ in parts]
     return selections
 
 
 def rest(
-    argument, n: int, *, exclude: _typings.Strings = None, grace: bool = None
+    argument, n: int, *, exclude: _typings.Exclude = None, grace: bool = None
 ) -> _score.Rest | _score.MultimeasureRest:
     r"""
     Selects rest ``n`` in ``argument``.
 
     ..  container:: example
 
         Selects rest -1:
@@ -5616,15 +5626,15 @@
             >>
 
     """
     return rests(argument, exclude=exclude, grace=grace)[n]
 
 
 def rests(
-    argument, *, exclude: _typings.Strings = None, grace: bool = None
+    argument, *, exclude: _typings.Exclude = None, grace: bool = None
 ) -> list[_score.Rest | _score.MultimeasureRest]:
     r"""
     Selects rests in ``argument``.
 
     ..  container:: example
 
         Selects rests:
@@ -5668,16 +5678,16 @@
                     \override TupletBracket.staff-padding = 3
                     autoBeaming = ##f
                 }
                 {
                     \tweak text #tuplet-number::calc-fraction-text
                     \times 10/9
                     {
-                        \time 7/4
                         \abjad-color-music #'red
+                        \time 7/4
                         r16
                         bf'16
                         <a'' b''>16
                         c'16
                         <d' e'>4
                         ~
                         <d' e'>16
@@ -5713,15 +5723,15 @@
     prototype = (_score.MultimeasureRest, _score.Rest)
     for item in components(argument, prototype=prototype, exclude=exclude, grace=grace):
         assert isinstance(item, prototype)
         items.append(item)
     return items
 
 
-def run(argument, n: int, *, exclude: _typings.Strings = None) -> list[_score.Leaf]:
+def run(argument, n: int, *, exclude: _typings.Exclude = None) -> list[_score.Leaf]:
     r"""
     Selects run ``n`` in ``argument``.
 
     ..  container:: example
 
         Selects run -1:
 
@@ -5803,15 +5813,15 @@
             >>
 
     """
     return runs(argument, exclude=exclude)[n]
 
 
 def runs(
-    argument, *, exclude: _typings.Strings = None, grace: bool = None
+    argument, *, exclude: _typings.Exclude = None, grace: bool = None
 ) -> list[list]:
     r"""
     Selects runs in ``argument``.
 
     ..  container:: example
 
         Selects runs:
@@ -5957,17 +5967,17 @@
                     }
                     \abjad-color-music #'blue
                     d'4
                     <<
                         \context Voice = "On_Beat_Grace_Container"
                         {
                             \set fontSize = #-3
+                            \abjad-color-music #'blue
                             \slash
                             \voiceOne
-                            \abjad-color-music #'blue
                             <
                                 \tweak font-size 0
                                 \tweak transparent ##t
                                 e'
                                 g'
                             >16
                             - \accent
@@ -5980,16 +5990,16 @@
                             \abjad-color-music #'blue
                             as'16
                             )
                             ]
                         }
                         \context Voice = "Music_Voice"
                         {
-                            \voiceTwo
                             \abjad-color-music #'blue
+                            \voiceTwo
                             e'4
                             r8
                         }
                     >>
                     \oneVoice
                     \abjad-color-music #'red
                     \afterGrace
@@ -6003,15 +6013,15 @@
 
     """
     result = leaves(argument, exclude=exclude, grace=grace, pitched=True)
     groups = group_by_contiguity(result)
     return groups
 
 
-def top(argument, *, exclude: _typings.Strings = None) -> list[_score.Component]:
+def top(argument, *, exclude: _typings.Exclude = None) -> list[_score.Component]:
     r"""
     Selects top components in ``argument``.
 
     ..  container:: example
 
         Selects top components (up from leaves):
 
@@ -6067,26 +6077,26 @@
                 a'8
                 \abjad-color-music #'red
                 r8
             }
 
     """
     result = []
-    for component in _iterate._public_iterate_components(argument, exclude=exclude):
+    for component in _iterlib._public_iterate_components(argument, exclude=exclude):
         for component_ in _parentage.Parentage(component):
             if (
                 _is_immediate_child_of_outermost_voice(component_)
                 and component_ not in result
             ):
                 result.append(component_)
     return result
 
 
 def tuplet(
-    argument, n: int, *, exclude: _typings.Strings = None, level: int = None
+    argument, n: int, *, exclude: _typings.Exclude = None, level: int = None
 ) -> _score.Tuplet:
     r"""
     Selects tuplet ``n`` in ``argument``.
 
     ..  container:: example
 
         Selects tuplet -1:
@@ -6170,15 +6180,15 @@
             >>
 
     """
     return tuplets(argument, exclude=exclude, level=level)[n]
 
 
 def tuplets(
-    argument, *, exclude: _typings.Strings = None, level: int = None
+    argument, *, exclude: _typings.Exclude = None, level: int = None
 ) -> list[_score.Tuplet]:
     r"""
     Selects tuplets in ``argument``.
 
     ..  container:: example
 
         Selects tuplets at every level:
@@ -6207,22 +6217,22 @@
             {
                 \times 2/3
                 {
                     \abjad-color-music #'red
                     c'2
                     \times 2/3
                     {
-                        \abjad-color-music #'red
                         \abjad-color-music #'blue
-                        d'8
                         \abjad-color-music #'red
+                        d'8
                         \abjad-color-music #'blue
-                        e'8
                         \abjad-color-music #'red
+                        e'8
                         \abjad-color-music #'blue
+                        \abjad-color-music #'red
                         f'8
                     }
                 }
                 \times 2/3
                 {
                     \abjad-color-music #'red
                     c'4
@@ -6345,15 +6355,15 @@
         tuplets.append(item)
     if level is None:
         return tuplets
     elif level < 0:
         result = []
         for tuplet in tuplets:
             count = 0
-            for component in _iterate._iterate_descendants(tuplet):
+            for component in _iterlib._iterate_descendants(tuplet):
                 if isinstance(component, _score.Tuplet):
                     count += 1
             if -count == level:
                 result.append(tuplet)
     else:
         result = []
         for tuplet in tuplets:
@@ -6586,17 +6596,17 @@
                     }
                     \abjad-color-music #'red
                     d'4
                     <<
                         \context Voice = "On_Beat_Grace_Container"
                         {
                             \set fontSize = #-3
+                            \abjad-color-music #'blue
                             \slash
                             \voiceOne
-                            \abjad-color-music #'blue
                             <
                                 \tweak font-size 0
                                 \tweak transparent ##t
                                 e'
                                 g'
                             >16
                             - \accent
@@ -6609,16 +6619,16 @@
                             \abjad-color-music #'blue
                             as'16
                             )
                             ]
                         }
                         \context Voice = "Music_Voice"
                         {
-                            \voiceTwo
                             \abjad-color-music #'blue
+                            \voiceTwo
                             e'4
                         }
                     >>
                     \oneVoice
                     \afterGrace
                     f'4
                     {
@@ -6628,21 +6638,21 @@
                 }
             }
 
     """
     items = leaves(argument)
     previous_leaf = items[-1]
     while True:
-        next_leaf = _iterate._get_leaf(previous_leaf, n=1)
+        next_leaf = _iterlib._get_leaf(previous_leaf, n=1)
         if next_leaf is None:
             break
         if (
             grace is None
-            or (grace is True and _inspect._get_grace_container(next_leaf))
-            or (grace is False and not _inspect._get_grace_container(next_leaf))
+            or (grace is True and _getlib._get_grace_container(next_leaf))
+            or (grace is False and not _getlib._get_grace_container(next_leaf))
         ):
             items.append(next_leaf)
             break
         previous_leaf = next_leaf
     return items
 
 
@@ -6798,17 +6808,17 @@
                     }
                     \abjad-color-music #'blue
                     d'4
                     <<
                         \context Voice = "On_Beat_Grace_Container"
                         {
                             \set fontSize = #-3
+                            \abjad-color-music #'blue
                             \slash
                             \voiceOne
-                            \abjad-color-music #'blue
                             <
                                 \tweak font-size 0
                                 \tweak transparent ##t
                                 e'
                                 g'
                             >16
                             - \accent
@@ -6838,11 +6848,11 @@
                         fs'16
                     }
                 }
             }
 
     """
     items = leaves(argument)
-    previous_leaf = _iterate._get_leaf(items[0], n=-1)
+    previous_leaf = _iterlib._get_leaf(items[0], n=-1)
     if previous_leaf is not None:
         items.insert(0, previous_leaf)
     return items
```

### Comparing `abjad-3.8/abjad/sequence.py` & `abjad-3.9/abjad/sequence.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/setclass.py` & `abjad-3.9/abjad/setclass.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/spanners.py` & `abjad-3.9/abjad/spanners.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,26 +1,25 @@
 """
 Classes and functions for modeling spanners: beams, hairpins, slurs, etc.
 """
 import typing
 
-from . import _iterate
+from . import _iterlib
 from . import bind as _bind
 from . import duration as _duration
 from . import dynamic as _dynamic
 from . import enums as _enums
 from . import indicators as _indicators
-from . import iterate as iterate_
+from . import iterate as _iterate
 from . import parentage as _parentage
 from . import score as _score
 from . import select as _select
 from . import sequence as _sequence
 from . import tag as _tag
 from . import tweaks as _tweaks
-from . import typings as _typings
 
 
 def _apply_tweaks(argument, tweaks, i=None, total=None):
     if not tweaks:
         return argument
     if i is not None:
         assert isinstance(i, int), repr(i)
@@ -47,15 +46,15 @@
     beam_lone_notes: bool = False,
     beam_rests: bool | None = True,
     direction: _enums.Vertical | None = None,
     durations: typing.Sequence[_duration.Duration] = None,
     selector: typing.Callable = lambda _: _select.leaves(_),
     span_beam_count: int = None,
     start_beam: _indicators.StartBeam = None,
-    stemlet_length: _typings.Number = None,
+    stemlet_length: int | float | None = None,
     stop_beam: _indicators.StopBeam = None,
     tag: _tag.Tag = None,
 ) -> None:
     r"""
     Attaches beam indicators.
 
     ..  container:: example
@@ -77,15 +76,15 @@
                 f'8
                 ]
             }
 
     """
     assert callable(selector)
     argument = selector(argument)
-    original_leaves = list(iterate_.leaves(argument))
+    original_leaves = list(_iterate.leaves(argument))
     silent_prototype = (_score.MultimeasureRest, _score.Rest, _score.Skip)
 
     def _is_beamable(argument, beam_rests=False):
         if isinstance(argument, _score.Chord | _score.Note):
             if 0 < argument.written_duration.flag_count:
                 return True
         if beam_rests and isinstance(argument, silent_prototype):
@@ -596,16 +595,16 @@
             d'8
             %! abjad.glissando(7)
             \glissando
             e'8
             %! abjad.glissando(7)
             \glissando
             f'8
-            %! abjad.glissando(7)
             %! SHOW_TO_JOIN_BROKEN_SPANNERS
+            %! abjad.glissando(7)
             %@% \glissando
         }
 
     ..  container:: example
 
         With ``right_broken=True`` and ``hide_middle_note_heads=True``:
 
@@ -622,47 +621,47 @@
         >>> string = abjad.lilypond(staff, tags=True)
         >>> print(string)
         \new Staff
         {
             c'8
             %! abjad.glissando(7)
             \glissando
-            %! abjad.glissando(0)
-            %! SHOW_TO_JOIN_BROKEN_SPANNERS
             %! RIGHT_BROKEN
-            \hide NoteHead
-            %! abjad.glissando(0)
             %! SHOW_TO_JOIN_BROKEN_SPANNERS
-            %! RIGHT_BROKEN
-            \override Accidental.stencil = ##f
             %! abjad.glissando(0)
-            %! SHOW_TO_JOIN_BROKEN_SPANNERS
+            \hide NoteHead
             %! RIGHT_BROKEN
-            \override NoteColumn.glissando-skip = ##t
+            %! SHOW_TO_JOIN_BROKEN_SPANNERS
             %! abjad.glissando(0)
+            \override Accidental.stencil = ##f
+            %! RIGHT_BROKEN
             %! SHOW_TO_JOIN_BROKEN_SPANNERS
+            %! abjad.glissando(0)
+            \override NoteColumn.glissando-skip = ##t
             %! RIGHT_BROKEN
+            %! SHOW_TO_JOIN_BROKEN_SPANNERS
+            %! abjad.glissando(0)
             \override NoteHead.no-ledgers = ##t
             d'8
             e'8
-            %! abjad.glissando(4)
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! RIGHT_BROKEN
-            \revert Accidental.stencil
             %! abjad.glissando(4)
+            \revert Accidental.stencil
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! RIGHT_BROKEN
-            \revert NoteColumn.glissando-skip
             %! abjad.glissando(4)
+            \revert NoteColumn.glissando-skip
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! RIGHT_BROKEN
-            \revert NoteHead.no-ledgers
             %! abjad.glissando(4)
+            \revert NoteHead.no-ledgers
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! RIGHT_BROKEN
+            %! abjad.glissando(4)
             \undo \hide NoteHead
             f'8
         }
 
     ..  container:: example
 
         With ``right_broken=True``, ``hide_middle_note_heads=True`` and
@@ -682,64 +681,64 @@
         >>> string = abjad.lilypond(staff, tags=True)
         >>> print(string)
         \new Staff
         {
             c'8
             %! abjad.glissando(7)
             \glissando
-            %! abjad.glissando(0)
-            %! SHOW_TO_JOIN_BROKEN_SPANNERS
             %! RIGHT_BROKEN
-            \hide NoteHead
-            %! abjad.glissando(0)
             %! SHOW_TO_JOIN_BROKEN_SPANNERS
-            %! RIGHT_BROKEN
-            \override Accidental.stencil = ##f
             %! abjad.glissando(0)
-            %! SHOW_TO_JOIN_BROKEN_SPANNERS
+            \hide NoteHead
             %! RIGHT_BROKEN
-            \override NoteColumn.glissando-skip = ##t
+            %! SHOW_TO_JOIN_BROKEN_SPANNERS
             %! abjad.glissando(0)
+            \override Accidental.stencil = ##f
+            %! RIGHT_BROKEN
             %! SHOW_TO_JOIN_BROKEN_SPANNERS
+            %! abjad.glissando(0)
+            \override NoteColumn.glissando-skip = ##t
             %! RIGHT_BROKEN
+            %! SHOW_TO_JOIN_BROKEN_SPANNERS
+            %! abjad.glissando(0)
             \override NoteHead.no-ledgers = ##t
             d'8
             e'8
-            %! abjad.glissando(4)
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! RIGHT_BROKEN
-            \revert Accidental.stencil
             %! abjad.glissando(4)
+            \revert Accidental.stencil
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! RIGHT_BROKEN
-            \revert NoteColumn.glissando-skip
             %! abjad.glissando(4)
+            \revert NoteColumn.glissando-skip
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! RIGHT_BROKEN
-            \revert NoteHead.no-ledgers
             %! abjad.glissando(4)
+            \revert NoteHead.no-ledgers
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! RIGHT_BROKEN
+            %! abjad.glissando(4)
             \undo \hide NoteHead
             f'8
-            %! abjad.glissando(5)
-            %! SHOW_TO_JOIN_BROKEN_SPANNERS
             %! RIGHT_BROKEN_SHOW_NEXT
-            %@% \revert Accidental.stencil
-            %! abjad.glissando(5)
             %! SHOW_TO_JOIN_BROKEN_SPANNERS
-            %! RIGHT_BROKEN_SHOW_NEXT
-            %@% \revert NoteColumn.glissando-skip
             %! abjad.glissando(5)
-            %! SHOW_TO_JOIN_BROKEN_SPANNERS
+            %@% \revert Accidental.stencil
             %! RIGHT_BROKEN_SHOW_NEXT
-            %@% \revert NoteHead.no-ledgers
+            %! SHOW_TO_JOIN_BROKEN_SPANNERS
             %! abjad.glissando(5)
+            %@% \revert NoteColumn.glissando-skip
+            %! RIGHT_BROKEN_SHOW_NEXT
             %! SHOW_TO_JOIN_BROKEN_SPANNERS
+            %! abjad.glissando(5)
+            %@% \revert NoteHead.no-ledgers
             %! RIGHT_BROKEN_SHOW_NEXT
+            %! SHOW_TO_JOIN_BROKEN_SPANNERS
+            %! abjad.glissando(5)
             %@% \undo \hide NoteHead
         }
 
     ..  container:: example
 
         With ``left_broken=True`` (and ``hide_middle_note_heads=True``):
 
@@ -753,32 +752,32 @@
 
         LilyPond output looks like this:
 
         >>> string = abjad.lilypond(staff, tags=True)
         >>> print(string)
         \new Staff
         {
-            %! abjad.glissando(2)
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! LEFT_BROKEN
-            \hide NoteHead
             %! abjad.glissando(2)
+            \hide NoteHead
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! LEFT_BROKEN
-            \override Accidental.stencil = ##f
             %! abjad.glissando(2)
+            \override Accidental.stencil = ##f
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! LEFT_BROKEN
+            %! abjad.glissando(2)
             \override NoteHead.no-ledgers = ##t
             c'8
             %! abjad.glissando(7)
             \glissando
-            %! abjad.glissando(3)
             %! HIDE_TO_JOIN_BROKEN_SPANNERS
             %! LEFT_BROKEN
+            %! abjad.glissando(3)
             \override NoteColumn.glissando-skip = ##t
             d'8
             e'8
             %! abjad.glissando(6)
             \revert Accidental.stencil
             %! abjad.glissando(6)
             \revert NoteColumn.glissando-skip
@@ -951,19 +950,19 @@
 
     if hide_middle_stems and not hide_middle_note_heads:
         message = "set hide_middle_stems only when"
         message += " hide_middle_note_heads is true."
         raise Exception(message)
 
     def _is_last_in_tie_chain(leaf):
-        logical_tie = _iterate._get_logical_tie_leaves(leaf)
+        logical_tie = _iterlib._get_logical_tie_leaves(leaf)
         return leaf is logical_tie[-1]
 
     def _next_leaf_changes_current_pitch(leaf):
-        next_leaf = _iterate._get_leaf(leaf, 1)
+        next_leaf = _iterlib._get_leaf(leaf, 1)
         if (
             isinstance(leaf, _score.Note)
             and isinstance(next_leaf, _score.Note)
             and leaf.written_pitch == next_leaf.written_pitch
         ):
             return False
         elif (
@@ -978,15 +977,15 @@
         if isinstance(leaf, _score.Note):
             leaf.note_head.is_parenthesized = True
         elif isinstance(leaf, _score.Chord):
             for note_head in leaf.note_heads:
                 note_head.is_parenthesized = True
 
     def _previous_leaf_changes_current_pitch(leaf):
-        previous_leaf = _iterate._get_leaf(leaf, -1)
+        previous_leaf = _iterlib._get_leaf(leaf, -1)
         if (
             isinstance(leaf, _score.Note)
             and isinstance(previous_leaf, _score.Note)
             and leaf.written_pitch == previous_leaf.written_pitch
         ):
             return False
         elif (
@@ -1679,15 +1678,15 @@
     _bind.attach(stop_text_span, stop_leaf, tag=tag)
 
 
 def tie(
     argument: _score.Component | typing.Sequence[_score.Component],
     *,
     direction: _enums.Vertical | None = None,
-    repeat: bool | _typings.IntegerPair | typing.Callable = False,
+    repeat: bool | tuple[int, int] | typing.Callable = False,
     selector: typing.Callable = lambda _: _select.leaves(_),
     tag: _tag.Tag = None,
 ) -> None:
     r"""
     Attaches tie indicators.
 
     ..  container:: example
```

### Comparing `abjad-3.8/abjad/string.py` & `abjad-3.9/abjad/string.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/tag.py` & `abjad-3.9/abjad/tag.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 import dataclasses
 import typing
 
-from . import _indent
+from . import _indentlib
 
 
 @dataclasses.dataclass(frozen=True, order=True, slots=True, unsafe_hash=True)
 class Tag:
     """
     Tag.
 
@@ -648,58 +648,49 @@
 
         >>> lines = [_.strip("\n") for _ in text.split("\n")]
         >>> string = "\n".join(lines)
         >>> lilypond_file = abjad.LilyPondFile([string])
         >>> abjad.show(lilypond_file) # doctest: +SKIP
 
     Tags can toggle indefinitely.
-
-    Returns text, count pair.
-
-    Count gives number of deactivated tags.
     """
     assert isinstance(text, str), repr(text)
     assert isinstance(tag, Tag) or callable(tag), repr(tag)
-    lines: list[str] = []
     count, skipped_count = 0, 0
-    treated_last_line, last_index = False, None
+    treated_last_line = False
     found_already_deactivated_on_last_line = False
+    previous_line_was_tweak = False
     text_lines = text.split("\n")
     text_lines = [_ + "\n" for _ in text_lines[:-1]] + text_lines[-1:]
-    lines = []
-    previous_line_was_tweak = False
-    current_tags = []
+    lines, current_tags = [], []
     for line in text_lines:
         if line.lstrip().startswith("%! "):
             lines.append(line)
             current_tag = Tag(line.strip()[3:])
             current_tags.append(current_tag)
             continue
         if not _match_line(line, tag, current_tags):
             lines.append(line)
-            treated_last_line, last_index = False, None
+            treated_last_line = False
             found_already_deactivated_on_last_line = False
             current_tags = []
             continue
-        first_nonwhitespace_index = len(line) - len(line.lstrip())
-        index = first_nonwhitespace_index
-        if line[index] != "%":
-            if last_index is None:
-                last_index = index
+        start_column = len(line) - len(line.lstrip())
+        if line[start_column] != "%":
             if " %@%" in line:
                 prefix = "%@% "
                 line = line.replace(" %@%", "")
             else:
                 prefix = "%%% "
             if prepend_empty_chord and not previous_line_was_tweak:
                 prefix += "<> "
-            target = line[last_index - 4 : last_index]
-            assert target == "    ", repr((line, target, index, tag))
+            target = line[start_column - 4 : start_column]
+            assert target == "    ", repr((line, target, start_column, tag))
             characters = list(line)
-            characters[last_index - 4 : last_index] = list(prefix)
+            characters[start_column - 4 : start_column] = list(prefix)
             line = "".join(characters)
             if not treated_last_line:
                 count += 1
             treated_last_line = True
             found_already_deactivated_on_last_line = False
         else:
             if not found_already_deactivated_on_last_line:
@@ -718,30 +709,30 @@
 
 def double_tag(strings: list[str], tag_: Tag, deactivate: bool = False) -> list[str]:
     """
     Double tags ``strings``.
     """
     assert all(isinstance(_, str) for _ in strings), repr(strings)
     assert isinstance(tag_, Tag), repr(tag_)
-    before_tags = []
+    half_indent = 2 * " "
+    tag_lines = []
     if tag_.string:
-        line = tag_.string
-        lines = line.split(":")
-        lines = ["%! " + _ for _ in lines]
-        before_tags.extend(lines)
-    right_tagged_lines = strings
+        tag_lines_ = tag_.string.split(":")
+        tag_lines_ = [half_indent + "%! " + _ for _ in tag_lines_]
+        tag_lines.extend(tag_lines_)
+        tag_lines.sort()
     if deactivate is True:
-        right_tagged_lines = ["%@% " + _ for _ in right_tagged_lines]
+        strings = ["%@% " + _ for _ in strings]
     result = []
-    for right_tagged_line in right_tagged_lines:
-        if right_tagged_line.strip().startswith("%!"):
-            result.append(right_tagged_line)
+    for string in strings:
+        if string.strip().startswith("%!"):
+            result.append(string)
             continue
-        result.extend(before_tags)
-        result.append(right_tagged_line)
+        result.extend(tag_lines)
+        result.append(string)
     return result
 
 
 def left_shift_tags(text: str) -> str:
     """
     Left shifts tags in ``strings``.
     """
@@ -753,15 +744,15 @@
             continue
         if not string.startswith(4 * " "):
             strings_.append(string)
             continue
         string_ = string[4:]
         tag_start = string_.find("%!")
         strings__ = list(string_)
-        strings__[tag_start:tag_start] = _indent.INDENT
+        strings__[tag_start:tag_start] = _indentlib.INDENT
         string_ = "".join(strings__)
         strings_.append(string_)
     text = "\n".join(strings_)
     return text
 
 
 def remove_tags(string: str) -> str:
```

### Comparing `abjad-3.8/abjad/timespan.py` & `abjad-3.9/abjad/timespan.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/tweaks.py` & `abjad-3.9/abjad/tweaks.py`

 * *Files identical despite different names*

### Comparing `abjad-3.8/abjad/typings.py` & `abjad-3.9/abjad/typings.py`

 * *Files 22% similar despite different names*

```diff
@@ -1,35 +1,26 @@
 """
-Utilities for typehinting.
+Type aliases.
 """
+import enum
 import typing
 
 from . import duration as _duration
 from . import ratio as _ratio
 
-IntegerPair: typing.TypeAlias = tuple[int, int]
+Duration: typing.TypeAlias = typing.Union[_duration.Duration, tuple[int, int]]
 
-IntegerSequence: typing.TypeAlias = typing.Sequence[int]
-
-DurationTyping: typing.TypeAlias = _duration.Duration | IntegerPair
-
-DurationSequenceTyping: typing.TypeAlias = typing.Sequence[DurationTyping]
-
-Number: typing.TypeAlias = int | float
-
-NumberPair: typing.TypeAlias = tuple[Number, Number]
-
-OffsetTyping: typing.TypeAlias = _duration.Offset | Number | IntegerPair
+Exclude: typing.TypeAlias = typing.Union[
+    str | enum.Enum | typing.Sequence[str | enum.Enum]
+]
 
-OffsetSequenceTyping: typing.TypeAlias = typing.Sequence[OffsetTyping]
+Offset: typing.TypeAlias = typing.Union[_duration.Offset, int, float, tuple[int, int]]
 
-PatternTyping: typing.TypeAlias = typing.Union[
-    tuple[IntegerSequence], tuple[IntegerSequence, int]
+Pattern: typing.TypeAlias = typing.Union[
+    tuple[typing.Sequence[int]], tuple[typing.Sequence[int], int]
 ]
 
 Prototype: typing.TypeAlias = typing.Union[typing.Type | tuple[typing.Type, ...]]
 
-RatioTyping: typing.TypeAlias = _duration.Duration | _ratio.Ratio | tuple[int, ...]
-
-RatioSequenceTyping: typing.TypeAlias = typing.Sequence[RatioTyping]
+Ratio: typing.TypeAlias = _duration.Duration | _ratio.Ratio | tuple[int, ...]
 
 Strings: typing.TypeAlias = str | typing.Sequence[str]
```

### Comparing `abjad-3.8/abjad/verticalmoment.py` & `abjad-3.9/abjad/verticalmoment.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,9 +1,9 @@
 from . import enumerate as _enumerate
-from . import iterate as iterate_
+from . import iterate as _iterate
 from . import parentage as _parentage
 from . import score as _score
 from . import select as _select
 from . import sequence as _sequence
 
 
 class VerticalMoment:
@@ -817,23 +817,23 @@
         (NamedPitch("e'"), NamedPitch("f''"))
         (NamedPitch("e'"), NamedPitch("g''"))
         (NamedPitch("f''"), NamedPitch("g''"))
 
     Returns generator.
     """
     for leaf_pair in iterate_leaf_pairs(components):
-        pitches = sorted(iterate_.pitches(leaf_pair[0]))
+        pitches = sorted(_iterate.pitches(leaf_pair[0]))
         for pair in _enumerate.yield_pairs(pitches):
             yield tuple(pair)
         if isinstance(leaf_pair, set):
-            pitches = sorted(iterate_.pitches(leaf_pair))
+            pitches = sorted(_iterate.pitches(leaf_pair))
             for pair in _enumerate.yield_pairs(pitches):
                 yield tuple(pair)
         else:
-            pitches_1 = sorted(iterate_.pitches(leaf_pair[0]))
-            pitches_2 = sorted(iterate_.pitches(leaf_pair[1]))
+            pitches_1 = sorted(_iterate.pitches(leaf_pair[0]))
+            pitches_2 = sorted(_iterate.pitches(leaf_pair[1]))
             sequences = [pitches_1, pitches_2]
             for pair in _enumerate.outer_product(sequences):
                 yield tuple(pair)
-        pitches = sorted(iterate_.pitches(leaf_pair[1]))
+        pitches = sorted(_iterate.pitches(leaf_pair[1]))
         for pair in _enumerate.yield_pairs(pitches):
             yield tuple(pair)
```

### Comparing `abjad-3.8/abjad/wf.py` & `abjad-3.9/abjad/wf.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,27 +1,30 @@
-from . import _inspect
+import enum
+import typing
+
+from . import _getlib
 from . import duration as _duration
 from . import indicators as _indicators
 from . import instruments as _instruments
-from . import iterate as iterate_
+from . import iterate as _iterate
 from . import iterpitches as _iterpitches
 from . import parentage as _parentage
 from . import score as _score
 from . import sequence as _sequence
 from . import tag as _tag
 
 
 def _aggregate_context_wrappers(argument):
     """
     Special_Voice may contain other instances of Special_Voice.
     This currently happens with OnBeatGraceContainer.
     This method aggregates all Special_Voice wrappers for checks.
     """
     name_to_wrappers: dict = {}
-    for context in iterate_.components(argument, _score.Context):
+    for context in _iterate.components(argument, _score.Context):
         if context.name not in name_to_wrappers:
             name_to_wrappers[context.name] = []
         wrappers = context._dependent_wrappers[:]
         name_to_wrappers[context.name].extend(wrappers)
     return name_to_wrappers
 
 
@@ -136,24 +139,24 @@
         0 /    0 unterminated hairpins
         0 /    0 unterminated text spanners
 
     The examples above feature Abjad voice containers because beams are
     voice-persistent.
     """
     violators, total = [], 0
-    for leaf in iterate_.leaves(argument):
+    for leaf in _iterate.leaves(argument):
         total += 1
         if leaf.written_duration < _duration.Duration((1, 4)):
             continue
-        start_wrapper = _inspect._get_effective(
+        start_wrapper = _getlib._get_effective(
             leaf, _indicators.StartBeam, unwrap=False
         )
         if start_wrapper is None:
             continue
-        stop_wrapper = _inspect._get_effective(leaf, _indicators.StopBeam, unwrap=False)
+        stop_wrapper = _getlib._get_effective(leaf, _indicators.StopBeam, unwrap=False)
         if stop_wrapper is None:
             violators.append(leaf)
             continue
         if stop_wrapper.leaked_start_offset < start_wrapper.leaked_start_offset:
             violators.append(leaf)
             continue
         leaf_start_offset = leaf._get_timespan().start_offset
@@ -163,15 +166,15 @@
 
 
 def check_duplicate_ids(argument) -> tuple[list, int]:
     """
     Checks duplicate IDs.
     """
     violators = []
-    components = iterate_.components(argument)
+    components = _iterate.components(argument)
     total_ids = [id(_) for _ in components]
     unique_ids = _sequence.remove_repeats(total_ids)
     if len(unique_ids) < len(total_ids):
         for current_id in unique_ids:
             if 1 < total_ids.count(current_id):
                 violators.extend([_ for _ in components if id(_) == current_id])
     return violators, len(total_ids)
@@ -200,27 +203,27 @@
 
         >>> violators, total = abjad.wf.check_empty_containers(staff)
         >>> violators
         [Container()]
 
     """
     violators, containers = [], set()
-    for container in iterate_.components(argument, _score.Container):
+    for container in _iterate.components(argument, _score.Container):
         containers.add(container)
         if len(container) == 0:
             violators.append(container)
     return violators, len(containers)
 
 
 def check_missing_parents(argument) -> tuple[list, int]:
     """
     Checks missing parents.
     """
     violators, total = [], set()
-    components = iterate_.components(argument)
+    components = _iterate.components(argument)
     for i, component in enumerate(components):
         total.add(component)
         if 0 < i:
             # TODO: figure out why "if component._parent is None" doesn't work
             if _parentage.Parentage(component).parent is None:
                 violators.append(component)
     return violators, len(total)
@@ -300,35 +303,37 @@
         0 /    0 overlapping text spanners
         0 /    0 unmatched stop text spans
         0 /    0 unterminated hairpins
         0 /    0 unterminated text spanners
 
     """
     violators, total = [], set()
-    for leaf in iterate_.leaves(argument):
+    for leaf in _iterate.leaves(argument):
         total.add(leaf)
-        instrument = _inspect._get_effective(leaf, _instruments.Instrument)
+        instrument = _getlib._get_effective(leaf, _instruments.Instrument)
         if instrument is None:
             continue
-        effective_clef = _inspect._get_effective(leaf, _indicators.Clef)
+        effective_clef = _getlib._get_effective(leaf, _indicators.Clef)
         if effective_clef is None:
             continue
         allowable_clefs = []
         for clef in instrument.allowable_clefs:
             if isinstance(clef, str):
                 clef = _indicators.Clef(clef)
             assert isinstance(clef, _indicators.Clef), repr(clef)
             allowable_clefs.append(clef)
         allowable_clefs.append(_indicators.Clef("percussion"))
         if effective_clef not in allowable_clefs:
             violators.append(leaf)
     return violators, len(total)
 
 
-def check_out_of_range_pitches(argument) -> tuple[list, int]:
+def check_out_of_range_pitches(
+    argument, *, allow_indicators: typing.Sequence[str | enum.Enum] = ()
+) -> tuple[list, int]:
     r"""
     Checks out-of-range notes.
 
     ..  container:: example
 
         Out of range:
 
@@ -360,15 +365,15 @@
         0 /    0 overlapping text spanners
         0 /    0 unmatched stop text spans
         0 /    0 unterminated hairpins
         0 /    0 unterminated text spanners
 
     ..  container:: example
 
-        Allows out-of-range pitches:
+        Using ``allow_indicators``:
 
         >>> staff = abjad.Staff("c'8 r8 <d fs>8 r8")
         >>> violin = abjad.Violin()
         >>> abjad.attach(violin, staff[0])
         >>> abjad.attach("ALLOW_OUT_OF_RANGE", staff[2])
         >>> abjad.show(staff) # doctest: +SKIP
 
@@ -380,41 +385,43 @@
             {
                 c'8
                 r8
                 <d fs>8
                 r8
             }
 
-        >>> count, string = abjad.wf.tabulate_wellformedness(staff)
-        >>> print(string)
-        0 /    4 beamed long notes
-        0 /    5 duplicate ids
-        0 /    1 empty containers
-        0 /    5 missing parents
-        0 /    4 notes on wrong clef
-        0 /    2 out of range pitches
-        0 /    0 overlapping text spanners
-        0 /    0 unmatched stop text spans
-        0 /    0 unterminated hairpins
-        0 /    0 unterminated text spanners
+        Does not check for indicator:
+
+        >>> violators, total = abjad.wf.check_out_of_range_pitches(staff)
+        >>> violators
+        [Chord('<d fs>8')]
+
+        Does check for indicator:
+
+        >>> violators, total = abjad.wf.check_out_of_range_pitches(
+        ...     staff, allow_indicators=["ALLOW_OUT_OF_RANGE"]
+        ... )
+        >>> violators
+        []
 
     """
     violators, total = [], set()
-    for leaf in iterate_.leaves(argument, pitched=True):
+    for leaf in _iterate.leaves(argument, pitched=True):
         total.add(leaf)
-        if leaf._has_indicator("ALLOW_OUT_OF_RANGE"):
-            continue
-        if leaf._has_indicator("HIDDEN"):
+        ok = False
+        for indicator in allow_indicators or ():
+            if leaf._has_indicator(indicator):
+                ok = True
+        if ok is True:
             continue
         if "unpitched" in argument._get_indicators(str):
             continue
-        instrument = _inspect._get_effective(leaf, _instruments.Instrument)
+        instrument = _getlib._get_effective(leaf, _instruments.Instrument)
         if instrument is None:
             continue
-        # if leaf not in instrument.pitch_range:
         if not _iterpitches.sounding_pitches_are_in_range(leaf, instrument.pitch_range):
             violators.append(leaf)
     return violators, len(total)
 
 
 def check_overlapping_text_spanners(argument) -> tuple[list, int]:
     r"""
```

### Comparing `abjad-3.8/abjad.egg-info/PKG-INFO` & `abjad-3.9/abjad.egg-info/PKG-INFO`

 * *Files 4% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: abjad
-Version: 3.8
+Version: 3.9
 Summary: Abjad is a Python API for building LilyPond files.
 Home-page: https://abjad.github.io
 Author: Trevor Bača, Josiah Wolf Oberholtzer
 Author-email: trevor.baca@gmail.com, josiah.oberholtzer@gmail.com
 License: MIT
 Keywords: music composition,music notation,lilypond
 Platform: Any
@@ -14,15 +14,15 @@
 Classifier: Programming Language :: Python :: Implementation :: CPython
 Classifier: Topic :: Artistic Software
 Description-Content-Type: text/x-rst
 Provides-Extra: nauert
 Provides-Extra: rmakers
 License-File: LICENSE
 
-Abjad 3.8
+Abjad 3.9
 =========
 
 Abjad helps composers build up complex pieces of music notation in iterative and
 incremental ways. Use Abjad to create a symbolic representation of all the notes, rests,
 chords, tuplets, beams and slurs in any score. Because Abjad extends the Python
 programming language, you can use Abjad to make systematic changes to music as you work.
 Because Abjad wraps the LilyPond music notation package, you can use Abjad to control the
@@ -49,24 +49,26 @@
 Abjad requires Python 3.10 or later:
 
 ..  code-block::
 
     ~$ python --version
     Python 3.10.2
 
+Abjad requires LilyPond 2.23.6 or later.
+
 Make sure LilyPond is installed: http://lilypond.org/development.html
 
 Make sure LilyPond is callable from the commandline:
 
 ..  code-block::
 
     $ lilypond --version
-    GNU LilyPond 2.22.1
+    GNU LilyPond 2.23.8
 
-    Copyright (c) 1996--2021 by
+    Copyright (c) 1996--2022 by
     Han-Wen Nienhuys <hanwen@xs4all.nl>
     Jan Nieuwenhuizen <janneke@gnu.org>
     and others.
 
     This program is free software.  It is covered by the GNU General Public
     License and you are welcome to change it and/or distribute copies of it
     under certain conditions.  Invoke as `lilypond --warranty' for more
```

### Comparing `abjad-3.8/abjad.egg-info/SOURCES.txt` & `abjad-3.9/abjad.egg-info/SOURCES.txt`

 * *Files 26% similar despite different names*

```diff
@@ -2,18 +2,18 @@
 MANIFEST.in
 README.rst
 conftest.py
 pytest.ini
 setup.cfg
 setup.py
 abjad/__init__.py
-abjad/_indent.py
-abjad/_inspect.py
-abjad/_iterate.py
-abjad/_update.py
+abjad/_getlib.py
+abjad/_indentlib.py
+abjad/_iterlib.py
+abjad/_updatelib.py
 abjad/_version.py
 abjad/bind.py
 abjad/configuration.py
 abjad/contextmanagers.py
 abjad/contributions.py
 abjad/cyclictuple.py
 abjad/deprecated.py
@@ -64,35 +64,35 @@
 abjad/verticalmoment.py
 abjad/wf.py
 abjad.egg-info/PKG-INFO
 abjad.egg-info/SOURCES.txt
 abjad.egg-info/dependency_links.txt
 abjad.egg-info/requires.txt
 abjad.egg-info/top_level.txt
-abjad/_stylesheets/abjad-coloring.ily
-abjad/_stylesheets/abjad-make-music-functions.ily
-abjad/_stylesheets/abjad-metric-modulations.ily
-abjad/_stylesheets/abjad-metronome-marks.ily
-abjad/_stylesheets/abjad-spanners.ily
-abjad/_stylesheets/abjad-text-spanner-line-styles.ily
-abjad/_stylesheets/abjad.ily
-abjad/_stylesheets/all-edo-markups-example.ily
-abjad/_stylesheets/default-et-accidental-markups.ily
-abjad/_stylesheets/ekmelos-edo-accidental-markups.ily
-abjad/_stylesheets/ekmelos-ji-accidental-markups.ily
-abjad/_stylesheets/fraction-accidental-markups.ily
-abjad/_stylesheets/general-et-accidental-markups.ily
-abjad/_stylesheets/harmonic-series-layout.ily
-abjad/_stylesheets/heji2-ji-accidental-markups.ily
-abjad/_stylesheets/markup-functions.ily
-abjad/_stylesheets/nalesnik-slash.ily
-abjad/_stylesheets/nalesnik-text-spanner-id.ily
-abjad/_stylesheets/solomon-flared-hairpin-demo.ly
-abjad/_stylesheets/solomon-flared-hairpin.ily
 abjad/ext/__init__.py
 abjad/ext/sphinx.py
 abjad/parsers/__init__.py
 abjad/parsers/base.py
 abjad/parsers/parse.py
 abjad/parsers/parser.py
 abjad/parsers/reduced.py
-abjad/parsers/scheme.py
+abjad/parsers/scheme.py
+abjad/scm/abjad-coloring.ily
+abjad/scm/abjad-make-music-functions.ily
+abjad/scm/abjad-metric-modulations.ily
+abjad/scm/abjad-metronome-marks.ily
+abjad/scm/abjad-spanners.ily
+abjad/scm/abjad-text-spanner-line-styles.ily
+abjad/scm/abjad.ily
+abjad/scm/all-edo-markups-example.ily
+abjad/scm/default-et-accidental-markups.ily
+abjad/scm/ekmelos-edo-accidental-markups.ily
+abjad/scm/ekmelos-ji-accidental-markups.ily
+abjad/scm/fraction-accidental-markups.ily
+abjad/scm/general-et-accidental-markups.ily
+abjad/scm/harmonic-series-layout.ily
+abjad/scm/heji2-ji-accidental-markups.ily
+abjad/scm/markup-functions.ily
+abjad/scm/nalesnik-slash.ily
+abjad/scm/nalesnik-text-spanner-id.ily
+abjad/scm/solomon-flared-hairpin-demo.ly
+abjad/scm/solomon-flared-hairpin.ily
```

### Comparing `abjad-3.8/setup.py` & `abjad-3.9/setup.py`

 * *Files 0% similar despite different names*

```diff
@@ -56,16 +56,16 @@
     "License :: OSI Approved :: GNU General Public License (GPL)",
     "Programming Language :: Python :: 3.10",
     "Programming Language :: Python :: Implementation :: CPython",
     "Topic :: Artistic Software",
 ]
 
 extras_require = {
-    "nauert": ["abjad-ext-nauert>=3.8"],
-    "rmakers": ["abjad-ext-rmakers>=3.8"],
+    "nauert": ["abjad-ext-nauert>=3.9"],
+    "rmakers": ["abjad-ext-rmakers>=3.9"],
 }
 
 keywords = [
     "music composition",
     "music notation",
     "lilypond",
 ]
```

